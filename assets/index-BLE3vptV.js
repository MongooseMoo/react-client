var EP=Object.defineProperty;var TP=(t,e,n)=>e in t?EP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>(TP(t,typeof e!="symbol"?e+"":e,n),n),$p=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var N=(t,e,n)=>($p(t,e,"read from private field"),n?n.call(t):e.get(t)),Ne=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ie=(t,e,n,r)=>($p(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Dd=(t,e,n,r)=>({set _(i){Ie(t,e,i,n)},get _(){return N(t,e,r)}}),ye=(t,e,n)=>($p(t,e,"access private method"),n);function Uw(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var xP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vw={exports:{}},tp={},Gw={exports:{}},Fe={},pd=Symbol.for("react.element"),RP=Symbol.for("react.portal"),PP=Symbol.for("react.fragment"),NP=Symbol.for("react.strict_mode"),_P=Symbol.for("react.profiler"),MP=Symbol.for("react.provider"),OP=Symbol.for("react.context"),DP=Symbol.for("react.forward_ref"),LP=Symbol.for("react.suspense"),BP=Symbol.for("react.memo"),FP=Symbol.for("react.lazy"),_C=Symbol.iterator;function UP(t){return t===null||typeof t!="object"?null:(t=_C&&t[_C]||t["@@iterator"],typeof t=="function"?t:null)}var Ww={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Zw=Object.assign,jw={};function hl(t,e,n){this.props=t,this.context=e,this.refs=jw,this.updater=n||Ww}hl.prototype.isReactComponent={};hl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zw(){}zw.prototype=hl.prototype;function C0(t,e,n){this.props=t,this.context=e,this.refs=jw,this.updater=n||Ww}var I0=C0.prototype=new zw;I0.constructor=C0;Zw(I0,hl.prototype);I0.isPureReactComponent=!0;var MC=Array.isArray,Hw=Object.prototype.hasOwnProperty,S0={current:null},Xw={key:!0,ref:!0,__self:!0,__source:!0};function $w(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Hw.call(e,r)&&!Xw.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pd,type:t,key:o,ref:s,props:i,_owner:S0.current}}function VP(t,e){return{$$typeof:pd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function b0(t){return typeof t=="object"&&t!==null&&t.$$typeof===pd}function GP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var OC=/\/+/g;function Kp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?GP(""+t.key):e.toString(36)}function dh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case pd:case RP:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Kp(s,0):r,MC(i)?(n="",t!=null&&(n=t.replace(OC,"$&/")+"/"),dh(i,e,n,"",function(l){return l})):i!=null&&(b0(i)&&(i=VP(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(OC,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",MC(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+Kp(o,a);s+=dh(o,e,n,c,i)}else if(c=UP(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+Kp(o,a++),s+=dh(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Ld(t,e,n){if(t==null)return t;var r=[],i=0;return dh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function WP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Un={current:null},hh={transition:null},ZP={ReactCurrentDispatcher:Un,ReactCurrentBatchConfig:hh,ReactCurrentOwner:S0};Fe.Children={map:Ld,forEach:function(t,e,n){Ld(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ld(t,function(){e++}),e},toArray:function(t){return Ld(t,function(e){return e})||[]},only:function(t){if(!b0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Fe.Component=hl;Fe.Fragment=PP;Fe.Profiler=_P;Fe.PureComponent=C0;Fe.StrictMode=NP;Fe.Suspense=LP;Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ZP;Fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Zw({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=S0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)Hw.call(e,c)&&!Xw.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:pd,type:t.type,key:i,ref:o,props:r,_owner:s}};Fe.createContext=function(t){return t={$$typeof:OP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MP,_context:t},t.Consumer=t};Fe.createElement=$w;Fe.createFactory=function(t){var e=$w.bind(null,t);return e.type=t,e};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(t){return{$$typeof:DP,render:t}};Fe.isValidElement=b0;Fe.lazy=function(t){return{$$typeof:FP,_payload:{_status:-1,_result:t},_init:WP}};Fe.memo=function(t,e){return{$$typeof:BP,type:t,compare:e===void 0?null:e}};Fe.startTransition=function(t){var e=hh.transition;hh.transition={};try{t()}finally{hh.transition=e}};Fe.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Fe.useCallback=function(t,e){return Un.current.useCallback(t,e)};Fe.useContext=function(t){return Un.current.useContext(t)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(t){return Un.current.useDeferredValue(t)};Fe.useEffect=function(t,e){return Un.current.useEffect(t,e)};Fe.useId=function(){return Un.current.useId()};Fe.useImperativeHandle=function(t,e,n){return Un.current.useImperativeHandle(t,e,n)};Fe.useInsertionEffect=function(t,e){return Un.current.useInsertionEffect(t,e)};Fe.useLayoutEffect=function(t,e){return Un.current.useLayoutEffect(t,e)};Fe.useMemo=function(t,e){return Un.current.useMemo(t,e)};Fe.useReducer=function(t,e,n){return Un.current.useReducer(t,e,n)};Fe.useRef=function(t){return Un.current.useRef(t)};Fe.useState=function(t){return Un.current.useState(t)};Fe.useSyncExternalStore=function(t,e,n){return Un.current.useSyncExternalStore(t,e,n)};Fe.useTransition=function(){return Un.current.useTransition()};Fe.version="18.2.0";Gw.exports=Fe;var b=Gw.exports;const rt=fd(b),jP=Uw({__proto__:null,default:rt},[b]);var zP=b,HP=Symbol.for("react.element"),XP=Symbol.for("react.fragment"),$P=Object.prototype.hasOwnProperty,KP=zP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JP={key:!0,ref:!0,__self:!0,__source:!0};function Kw(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)$P.call(e,r)&&!JP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:HP,type:t,key:o,ref:s,props:i,_owner:KP.current}}tp.Fragment=XP;tp.jsx=Kw;tp.jsxs=Kw;Vw.exports=tp;var $=Vw.exports,im={},Jw={exports:{}},xr={},Yw={exports:{}},Qw={};(function(t){function e(z,Y){var ie=z.length;z.push(Y);e:for(;0<ie;){var Z=ie-1>>>1,ne=z[Z];if(0<i(ne,Y))z[Z]=Y,z[ie]=ne,ie=Z;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Y=z[0],ie=z.pop();if(ie!==Y){z[0]=ie;e:for(var Z=0,ne=z.length,Ee=ne>>>1;Z<Ee;){var xe=2*(Z+1)-1,me=z[xe],Ae=xe+1,Xe=z[Ae];if(0>i(me,ie))Ae<ne&&0>i(Xe,me)?(z[Z]=Xe,z[Ae]=ie,Z=Ae):(z[Z]=me,z[xe]=ie,Z=xe);else if(Ae<ne&&0>i(Xe,ie))z[Z]=Xe,z[Ae]=ie,Z=Ae;else break e}}return Y}function i(z,Y){var ie=z.sortIndex-Y.sortIndex;return ie!==0?ie:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,g=!1,m=!1,C=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var Y=n(l);Y!==null;){if(Y.callback===null)r(l);else if(Y.startTime<=z)r(l),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(l)}}function E(z){if(m=!1,S(z),!g)if(n(c)!==null)g=!0,q(w);else{var Y=n(l);Y!==null&&te(E,Y.startTime-z)}}function w(z,Y){g=!1,m&&(m=!1,p(x),x=-1),f=!0;var ie=h;try{for(S(Y),d=n(c);d!==null&&(!(d.expirationTime>Y)||z&&!D());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,h=d.priorityLevel;var ne=Z(d.expirationTime<=Y);Y=t.unstable_now(),typeof ne=="function"?d.callback=ne:d===n(c)&&r(c),S(Y)}else r(c);d=n(c)}if(d!==null)var Ee=!0;else{var xe=n(l);xe!==null&&te(E,xe.startTime-Y),Ee=!1}return Ee}finally{d=null,h=ie,f=!1}}var A=!1,T=null,x=-1,_=5,M=-1;function D(){return!(t.unstable_now()-M<_)}function F(){if(T!==null){var z=t.unstable_now();M=z;var Y=!0;try{Y=T(!0,z)}finally{Y?W():(A=!1,T=null)}}else A=!1}var W;if(typeof v=="function")W=function(){v(F)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,H=j.port2;j.port1.onmessage=F,W=function(){H.postMessage(null)}}else W=function(){C(F,0)};function q(z){T=z,A||(A=!0,W())}function te(z,Y){x=C(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,q(w))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var ie=h;h=Y;try{return z()}finally{h=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var ie=h;h=z;try{return Y()}finally{h=ie}},t.unstable_scheduleCallback=function(z,Y,ie){var Z=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?Z+ie:Z):ie=Z,z){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=ie+ne,z={id:u++,callback:Y,priorityLevel:z,startTime:ie,expirationTime:ne,sortIndex:-1},ie>Z?(z.sortIndex=ie,e(l,z),n(c)===null&&z===n(l)&&(m?(p(x),x=-1):m=!0,te(E,ie-Z))):(z.sortIndex=ne,e(c,z),g||f||(g=!0,q(w))),z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(z){var Y=h;return function(){var ie=h;h=Y;try{return z.apply(this,arguments)}finally{h=ie}}}})(Qw);Yw.exports=Qw;var YP=Yw.exports,qw=b,Er=YP;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var e1=new Set,Tu={};function ja(t,e){Kc(t,e),Kc(t+"Capture",e)}function Kc(t,e){for(Tu[t]=e,t=0;t<e.length;t++)e1.add(e[t])}var jo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),om=Object.prototype.hasOwnProperty,QP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,DC={},LC={};function qP(t){return om.call(LC,t)?!0:om.call(DC,t)?!1:QP.test(t)?LC[t]=!0:(DC[t]=!0,!1)}function eN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tN(t,e,n,r){if(e===null||typeof e>"u"||eN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Vn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){hn[t]=new Vn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];hn[e]=new Vn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){hn[t]=new Vn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){hn[t]=new Vn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){hn[t]=new Vn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){hn[t]=new Vn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){hn[t]=new Vn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){hn[t]=new Vn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){hn[t]=new Vn(t,5,!1,t.toLowerCase(),null,!1,!1)});var w0=/[\-:]([a-z])/g;function A0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(w0,A0);hn[e]=new Vn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(w0,A0);hn[e]=new Vn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(w0,A0);hn[e]=new Vn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){hn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!1,!1)});hn.xlinkHref=new Vn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){hn[t]=new Vn(t,1,!1,t.toLowerCase(),null,!0,!0)});function k0(t,e,n,r){var i=hn.hasOwnProperty(e)?hn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tN(e,n,i,r)&&(n=null),r||i===null?qP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var es=qw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bd=Symbol.for("react.element"),lc=Symbol.for("react.portal"),uc=Symbol.for("react.fragment"),E0=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),t1=Symbol.for("react.provider"),n1=Symbol.for("react.context"),T0=Symbol.for("react.forward_ref"),am=Symbol.for("react.suspense"),cm=Symbol.for("react.suspense_list"),x0=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),r1=Symbol.for("react.offscreen"),BC=Symbol.iterator;function Pl(t){return t===null||typeof t!="object"?null:(t=BC&&t[BC]||t["@@iterator"],typeof t=="function"?t:null)}var kt=Object.assign,Jp;function Jl(t){if(Jp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Jp=e&&e[1]||""}return`
`+Jp+t}var Yp=!1;function Qp(t,e){if(!t||Yp)return"";Yp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{Yp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jl(t):""}function nN(t){switch(t.tag){case 5:return Jl(t.type);case 16:return Jl("Lazy");case 13:return Jl("Suspense");case 19:return Jl("SuspenseList");case 0:case 2:case 15:return t=Qp(t.type,!1),t;case 11:return t=Qp(t.type.render,!1),t;case 1:return t=Qp(t.type,!0),t;default:return""}}function lm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uc:return"Fragment";case lc:return"Portal";case sm:return"Profiler";case E0:return"StrictMode";case am:return"Suspense";case cm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n1:return(t.displayName||"Context")+".Consumer";case t1:return(t._context.displayName||"Context")+".Provider";case T0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x0:return e=t.displayName||null,e!==null?e:lm(t.type)||"Memo";case vs:e=t._payload,t=t._init;try{return lm(t(e))}catch{}}return null}function rN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return lm(e);case 8:return e===E0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function iN(t){var e=i1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fd(t){t._valueTracker||(t._valueTracker=iN(t))}function o1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=i1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function $h(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function um(t,e){var n=e.checked;return kt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function FC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function s1(t,e){e=e.checked,e!=null&&k0(t,"checked",e,!1)}function dm(t,e){s1(t,e);var n=zs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?hm(t,e.type,n):e.hasOwnProperty("defaultValue")&&hm(t,e.type,zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function UC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function hm(t,e,n){(e!=="number"||$h(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yl=Array.isArray;function xc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function fm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return kt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function VC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Yl(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zs(n)}}function a1(t,e){var n=zs(e.value),r=zs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function GC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ud,l1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ud=Ud||document.createElement("div"),Ud.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ud.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function xu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var uu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oN=["Webkit","ms","Moz","O"];Object.keys(uu).forEach(function(t){oN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),uu[e]=uu[t]})});function u1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||uu.hasOwnProperty(t)&&uu[t]?(""+e).trim():e+"px"}function d1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=u1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var sN=kt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gm(t,e){if(e){if(sN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function mm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vm=null;function R0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ym=null,Rc=null,Pc=null;function WC(t){if(t=vd(t)){if(typeof ym!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=sp(e),ym(t.stateNode,t.type,e))}}function h1(t){Rc?Pc?Pc.push(t):Pc=[t]:Rc=t}function f1(){if(Rc){var t=Rc,e=Pc;if(Pc=Rc=null,WC(t),e)for(t=0;t<e.length;t++)WC(e[t])}}function p1(t,e){return t(e)}function g1(){}var qp=!1;function m1(t,e,n){if(qp)return t(e,n);qp=!0;try{return p1(t,e,n)}finally{qp=!1,(Rc!==null||Pc!==null)&&(g1(),f1())}}function Ru(t,e){var n=t.stateNode;if(n===null)return null;var r=sp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var Cm=!1;if(jo)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Cm=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Cm=!1}function aN(t,e,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var du=!1,Kh=null,Jh=!1,Im=null,cN={onError:function(t){du=!0,Kh=t}};function lN(t,e,n,r,i,o,s,a,c){du=!1,Kh=null,aN.apply(cN,arguments)}function uN(t,e,n,r,i,o,s,a,c){if(lN.apply(this,arguments),du){if(du){var l=Kh;du=!1,Kh=null}else throw Error(oe(198));Jh||(Jh=!0,Im=l)}}function za(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function v1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ZC(t){if(za(t)!==t)throw Error(oe(188))}function dN(t){var e=t.alternate;if(!e){if(e=za(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ZC(i),t;if(o===r)return ZC(i),e;o=o.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function y1(t){return t=dN(t),t!==null?C1(t):null}function C1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C1(t);if(e!==null)return e;t=t.sibling}return null}var I1=Er.unstable_scheduleCallback,jC=Er.unstable_cancelCallback,hN=Er.unstable_shouldYield,fN=Er.unstable_requestPaint,Dt=Er.unstable_now,pN=Er.unstable_getCurrentPriorityLevel,P0=Er.unstable_ImmediatePriority,S1=Er.unstable_UserBlockingPriority,Yh=Er.unstable_NormalPriority,gN=Er.unstable_LowPriority,b1=Er.unstable_IdlePriority,np=null,Ki=null;function mN(t){if(Ki&&typeof Ki.onCommitFiberRoot=="function")try{Ki.onCommitFiberRoot(np,t,void 0,(t.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:CN,vN=Math.log,yN=Math.LN2;function CN(t){return t>>>=0,t===0?32:31-(vN(t)/yN|0)|0}var Vd=64,Gd=4194304;function Ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Ql(a):(o&=s,o!==0&&(r=Ql(o)))}else s=n&~i,s!==0?r=Ql(s):o!==0&&(r=Ql(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-pi(e),i=1<<n,r|=t[n],e&=~i;return r}function IN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function SN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-pi(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=IN(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function Sm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w1(){var t=Vd;return Vd<<=1,!(Vd&4194240)&&(Vd=64),t}function eg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pi(e),t[e]=n}function bN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-pi(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function N0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-pi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Je=0;function A1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var k1,_0,E1,T1,x1,bm=!1,Wd=[],Ms=null,Os=null,Ds=null,Pu=new Map,Nu=new Map,Is=[],wN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zC(t,e){switch(t){case"focusin":case"focusout":Ms=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Ds=null;break;case"pointerover":case"pointerout":Pu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nu.delete(e.pointerId)}}function _l(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=vd(e),e!==null&&_0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function AN(t,e,n,r,i){switch(e){case"focusin":return Ms=_l(Ms,t,e,n,r,i),!0;case"dragenter":return Os=_l(Os,t,e,n,r,i),!0;case"mouseover":return Ds=_l(Ds,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pu.set(o,_l(Pu.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Nu.set(o,_l(Nu.get(o)||null,t,e,n,r,i)),!0}return!1}function R1(t){var e=pa(t.target);if(e!==null){var n=za(e);if(n!==null){if(e=n.tag,e===13){if(e=v1(n),e!==null){t.blockedOn=e,x1(t.priority,function(){E1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function fh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=wm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vm=r,n.target.dispatchEvent(r),vm=null}else return e=vd(n),e!==null&&_0(e),t.blockedOn=n,!1;e.shift()}return!0}function HC(t,e,n){fh(t)&&n.delete(e)}function kN(){bm=!1,Ms!==null&&fh(Ms)&&(Ms=null),Os!==null&&fh(Os)&&(Os=null),Ds!==null&&fh(Ds)&&(Ds=null),Pu.forEach(HC),Nu.forEach(HC)}function Ml(t,e){t.blockedOn===e&&(t.blockedOn=null,bm||(bm=!0,Er.unstable_scheduleCallback(Er.unstable_NormalPriority,kN)))}function _u(t){function e(i){return Ml(i,t)}if(0<Wd.length){Ml(Wd[0],t);for(var n=1;n<Wd.length;n++){var r=Wd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ms!==null&&Ml(Ms,t),Os!==null&&Ml(Os,t),Ds!==null&&Ml(Ds,t),Pu.forEach(e),Nu.forEach(e),n=0;n<Is.length;n++)r=Is[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Is.length&&(n=Is[0],n.blockedOn===null);)R1(n),n.blockedOn===null&&Is.shift()}var Nc=es.ReactCurrentBatchConfig,qh=!0;function EN(t,e,n,r){var i=Je,o=Nc.transition;Nc.transition=null;try{Je=1,M0(t,e,n,r)}finally{Je=i,Nc.transition=o}}function TN(t,e,n,r){var i=Je,o=Nc.transition;Nc.transition=null;try{Je=4,M0(t,e,n,r)}finally{Je=i,Nc.transition=o}}function M0(t,e,n,r){if(qh){var i=wm(t,e,n,r);if(i===null)ug(t,e,r,ef,n),zC(t,r);else if(AN(i,t,e,n,r))r.stopPropagation();else if(zC(t,r),e&4&&-1<wN.indexOf(t)){for(;i!==null;){var o=vd(i);if(o!==null&&k1(o),o=wm(t,e,n,r),o===null&&ug(t,e,r,ef,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else ug(t,e,r,null,n)}}var ef=null;function wm(t,e,n,r){if(ef=null,t=R0(r),t=pa(t),t!==null)if(e=za(t),e===null)t=null;else if(n=e.tag,n===13){if(t=v1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ef=t,null}function P1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pN()){case P0:return 1;case S1:return 4;case Yh:case gN:return 16;case b1:return 536870912;default:return 16}default:return 16}}var ws=null,O0=null,ph=null;function N1(){if(ph)return ph;var t,e=O0,n=e.length,r,i="value"in ws?ws.value:ws.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return ph=i.slice(t,1<r?1-r:void 0)}function gh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Zd(){return!0}function XC(){return!1}function Rr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Zd:XC,this.isPropagationStopped=XC,this}return kt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Zd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Zd)},persist:function(){},isPersistent:Zd}),e}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D0=Rr(fl),md=kt({},fl,{view:0,detail:0}),xN=Rr(md),tg,ng,Ol,rp=kt({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:L0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ol&&(Ol&&t.type==="mousemove"?(tg=t.screenX-Ol.screenX,ng=t.screenY-Ol.screenY):ng=tg=0,Ol=t),tg)},movementY:function(t){return"movementY"in t?t.movementY:ng}}),$C=Rr(rp),RN=kt({},rp,{dataTransfer:0}),PN=Rr(RN),NN=kt({},md,{relatedTarget:0}),rg=Rr(NN),_N=kt({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),MN=Rr(_N),ON=kt({},fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DN=Rr(ON),LN=kt({},fl,{data:0}),KC=Rr(LN),BN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UN[t])?!!e[t]:!1}function L0(){return VN}var GN=kt({},md,{key:function(t){if(t.key){var e=BN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?FN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:L0,charCode:function(t){return t.type==="keypress"?gh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),WN=Rr(GN),ZN=kt({},rp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JC=Rr(ZN),jN=kt({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:L0}),zN=Rr(jN),HN=kt({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),XN=Rr(HN),$N=kt({},rp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KN=Rr($N),JN=[9,13,27,32],B0=jo&&"CompositionEvent"in window,hu=null;jo&&"documentMode"in document&&(hu=document.documentMode);var YN=jo&&"TextEvent"in window&&!hu,_1=jo&&(!B0||hu&&8<hu&&11>=hu),YC=" ",QC=!1;function M1(t,e){switch(t){case"keyup":return JN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function O1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dc=!1;function QN(t,e){switch(t){case"compositionend":return O1(e);case"keypress":return e.which!==32?null:(QC=!0,YC);case"textInput":return t=e.data,t===YC&&QC?null:t;default:return null}}function qN(t,e){if(dc)return t==="compositionend"||!B0&&M1(t,e)?(t=N1(),ph=O0=ws=null,dc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _1&&e.locale!=="ko"?null:e.data;default:return null}}var e_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!e_[t.type]:e==="textarea"}function D1(t,e,n,r){h1(r),e=tf(e,"onChange"),0<e.length&&(n=new D0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var fu=null,Mu=null;function t_(t){H1(t,0)}function ip(t){var e=pc(t);if(o1(e))return t}function n_(t,e){if(t==="change")return e}var L1=!1;if(jo){var ig;if(jo){var og="oninput"in document;if(!og){var eI=document.createElement("div");eI.setAttribute("oninput","return;"),og=typeof eI.oninput=="function"}ig=og}else ig=!1;L1=ig&&(!document.documentMode||9<document.documentMode)}function tI(){fu&&(fu.detachEvent("onpropertychange",B1),Mu=fu=null)}function B1(t){if(t.propertyName==="value"&&ip(Mu)){var e=[];D1(e,Mu,t,R0(t)),m1(t_,e)}}function r_(t,e,n){t==="focusin"?(tI(),fu=e,Mu=n,fu.attachEvent("onpropertychange",B1)):t==="focusout"&&tI()}function i_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ip(Mu)}function o_(t,e){if(t==="click")return ip(e)}function s_(t,e){if(t==="input"||t==="change")return ip(e)}function a_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vi=typeof Object.is=="function"?Object.is:a_;function Ou(t,e){if(vi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!om.call(e,i)||!vi(t[i],e[i]))return!1}return!0}function nI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rI(t,e){var n=nI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=nI(n)}}function F1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U1(){for(var t=window,e=$h();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$h(t.document)}return e}function F0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function c_(t){var e=U1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&F1(n.ownerDocument.documentElement,n)){if(r!==null&&F0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=rI(n,o);var s=rI(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var l_=jo&&"documentMode"in document&&11>=document.documentMode,hc=null,Am=null,pu=null,km=!1;function iI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;km||hc==null||hc!==$h(r)||(r=hc,"selectionStart"in r&&F0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),pu&&Ou(pu,r)||(pu=r,r=tf(Am,"onSelect"),0<r.length&&(e=new D0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hc)))}function jd(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var fc={animationend:jd("Animation","AnimationEnd"),animationiteration:jd("Animation","AnimationIteration"),animationstart:jd("Animation","AnimationStart"),transitionend:jd("Transition","TransitionEnd")},sg={},V1={};jo&&(V1=document.createElement("div").style,"AnimationEvent"in window||(delete fc.animationend.animation,delete fc.animationiteration.animation,delete fc.animationstart.animation),"TransitionEvent"in window||delete fc.transitionend.transition);function op(t){if(sg[t])return sg[t];if(!fc[t])return t;var e=fc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in V1)return sg[t]=e[n];return t}var G1=op("animationend"),W1=op("animationiteration"),Z1=op("animationstart"),j1=op("transitionend"),z1=new Map,oI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Js(t,e){z1.set(t,e),ja(e,[t])}for(var ag=0;ag<oI.length;ag++){var cg=oI[ag],u_=cg.toLowerCase(),d_=cg[0].toUpperCase()+cg.slice(1);Js(u_,"on"+d_)}Js(G1,"onAnimationEnd");Js(W1,"onAnimationIteration");Js(Z1,"onAnimationStart");Js("dblclick","onDoubleClick");Js("focusin","onFocus");Js("focusout","onBlur");Js(j1,"onTransitionEnd");Kc("onMouseEnter",["mouseout","mouseover"]);Kc("onMouseLeave",["mouseout","mouseover"]);Kc("onPointerEnter",["pointerout","pointerover"]);Kc("onPointerLeave",["pointerout","pointerover"]);ja("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ja("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ja("onBeforeInput",["compositionend","keypress","textInput","paste"]);ja("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ja("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),h_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function sI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uN(r,e,void 0,t),t.currentTarget=null}function H1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;sI(i,a,l),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;sI(i,a,l),o=c}}}if(Jh)throw t=Im,Jh=!1,Im=null,t}function ht(t,e){var n=e[Pm];n===void 0&&(n=e[Pm]=new Set);var r=t+"__bubble";n.has(r)||(X1(e,t,2,!1),n.add(r))}function lg(t,e,n){var r=0;e&&(r|=4),X1(n,t,r,e)}var zd="_reactListening"+Math.random().toString(36).slice(2);function Du(t){if(!t[zd]){t[zd]=!0,e1.forEach(function(n){n!=="selectionchange"&&(h_.has(n)||lg(n,!1,t),lg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zd]||(e[zd]=!0,lg("selectionchange",!1,e))}}function X1(t,e,n,r){switch(P1(e)){case 1:var i=EN;break;case 4:i=TN;break;default:i=M0}n=i.bind(null,e,n,t),i=void 0,!Cm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function ug(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=pa(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}m1(function(){var l=o,u=R0(n),d=[];e:{var h=z1.get(t);if(h!==void 0){var f=D0,g=t;switch(t){case"keypress":if(gh(n)===0)break e;case"keydown":case"keyup":f=WN;break;case"focusin":g="focus",f=rg;break;case"focusout":g="blur",f=rg;break;case"beforeblur":case"afterblur":f=rg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=$C;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=PN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=zN;break;case G1:case W1:case Z1:f=MN;break;case j1:f=XN;break;case"scroll":f=xN;break;case"wheel":f=KN;break;case"copy":case"cut":case"paste":f=DN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=JC}var m=(e&4)!==0,C=!m&&t==="scroll",p=m?h!==null?h+"Capture":null:h;m=[];for(var v=l,S;v!==null;){S=v;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,p!==null&&(E=Ru(v,p),E!=null&&m.push(Lu(v,E,S)))),C)break;v=v.return}0<m.length&&(h=new f(h,g,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==vm&&(g=n.relatedTarget||n.fromElement)&&(pa(g)||g[zo]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(g=n.relatedTarget||n.toElement,f=l,g=g?pa(g):null,g!==null&&(C=za(g),g!==C||g.tag!==5&&g.tag!==6)&&(g=null)):(f=null,g=l),f!==g)){if(m=$C,E="onMouseLeave",p="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=JC,E="onPointerLeave",p="onPointerEnter",v="pointer"),C=f==null?h:pc(f),S=g==null?h:pc(g),h=new m(E,v+"leave",f,n,u),h.target=C,h.relatedTarget=S,E=null,pa(u)===l&&(m=new m(p,v+"enter",g,n,u),m.target=S,m.relatedTarget=C,E=m),C=E,f&&g)t:{for(m=f,p=g,v=0,S=m;S;S=nc(S))v++;for(S=0,E=p;E;E=nc(E))S++;for(;0<v-S;)m=nc(m),v--;for(;0<S-v;)p=nc(p),S--;for(;v--;){if(m===p||p!==null&&m===p.alternate)break t;m=nc(m),p=nc(p)}m=null}else m=null;f!==null&&aI(d,h,f,m,!1),g!==null&&C!==null&&aI(d,C,g,m,!0)}}e:{if(h=l?pc(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=n_;else if(qC(h))if(L1)w=s_;else{w=i_;var A=r_}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=o_);if(w&&(w=w(t,l))){D1(d,w,n,u);break e}A&&A(t,h,l),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&hm(h,"number",h.value)}switch(A=l?pc(l):window,t){case"focusin":(qC(A)||A.contentEditable==="true")&&(hc=A,Am=l,pu=null);break;case"focusout":pu=Am=hc=null;break;case"mousedown":km=!0;break;case"contextmenu":case"mouseup":case"dragend":km=!1,iI(d,n,u);break;case"selectionchange":if(l_)break;case"keydown":case"keyup":iI(d,n,u)}var T;if(B0)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else dc?M1(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(_1&&n.locale!=="ko"&&(dc||x!=="onCompositionStart"?x==="onCompositionEnd"&&dc&&(T=N1()):(ws=u,O0="value"in ws?ws.value:ws.textContent,dc=!0)),A=tf(l,x),0<A.length&&(x=new KC(x,t,null,n,u),d.push({event:x,listeners:A}),T?x.data=T:(T=O1(n),T!==null&&(x.data=T)))),(T=YN?QN(t,n):qN(t,n))&&(l=tf(l,"onBeforeInput"),0<l.length&&(u=new KC("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=T))}H1(d,e)})}function Lu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ru(t,n),o!=null&&r.unshift(Lu(t,o,i)),o=Ru(t,e),o!=null&&r.push(Lu(t,o,i))),t=t.return}return r}function nc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aI(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=Ru(n,o),c!=null&&s.unshift(Lu(n,c,a))):i||(c=Ru(n,o),c!=null&&s.push(Lu(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var f_=/\r\n?/g,p_=/\u0000|\uFFFD/g;function cI(t){return(typeof t=="string"?t:""+t).replace(f_,`
`).replace(p_,"")}function Hd(t,e,n){if(e=cI(e),cI(t)!==e&&n)throw Error(oe(425))}function nf(){}var Em=null,Tm=null;function xm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Rm=typeof setTimeout=="function"?setTimeout:void 0,g_=typeof clearTimeout=="function"?clearTimeout:void 0,lI=typeof Promise=="function"?Promise:void 0,m_=typeof queueMicrotask=="function"?queueMicrotask:typeof lI<"u"?function(t){return lI.resolve(null).then(t).catch(v_)}:Rm;function v_(t){setTimeout(function(){throw t})}function dg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_u(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_u(e)}function Ls(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pl=Math.random().toString(36).slice(2),Pi="__reactFiber$"+pl,Bu="__reactProps$"+pl,zo="__reactContainer$"+pl,Pm="__reactEvents$"+pl,y_="__reactListeners$"+pl,C_="__reactHandles$"+pl;function pa(t){var e=t[Pi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zo]||n[Pi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uI(t);t!==null;){if(n=t[Pi])return n;t=uI(t)}return e}t=n,n=t.parentNode}return null}function vd(t){return t=t[Pi]||t[zo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function sp(t){return t[Bu]||null}var Nm=[],gc=-1;function Ys(t){return{current:t}}function vt(t){0>gc||(t.current=Nm[gc],Nm[gc]=null,gc--)}function ut(t,e){gc++,Nm[gc]=t.current,t.current=e}var Hs={},En=Ys(Hs),tr=Ys(!1),Pa=Hs;function Jc(t,e){var n=t.type.contextTypes;if(!n)return Hs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function nr(t){return t=t.childContextTypes,t!=null}function rf(){vt(tr),vt(En)}function dI(t,e,n){if(En.current!==Hs)throw Error(oe(168));ut(En,e),ut(tr,n)}function $1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,rN(t)||"Unknown",i));return kt({},n,r)}function of(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hs,Pa=En.current,ut(En,t),ut(tr,tr.current),!0}function hI(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=$1(t,e,Pa),r.__reactInternalMemoizedMergedChildContext=t,vt(tr),vt(En),ut(En,t)):vt(tr),ut(tr,n)}var co=null,ap=!1,hg=!1;function K1(t){co===null?co=[t]:co.push(t)}function I_(t){ap=!0,K1(t)}function Qs(){if(!hg&&co!==null){hg=!0;var t=0,e=Je;try{var n=co;for(Je=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}co=null,ap=!1}catch(i){throw co!==null&&(co=co.slice(t+1)),I1(P0,Qs),i}finally{Je=e,hg=!1}}return null}var mc=[],vc=0,sf=null,af=0,Mr=[],Or=0,Na=null,po=1,go="";function aa(t,e){mc[vc++]=af,mc[vc++]=sf,sf=t,af=e}function J1(t,e,n){Mr[Or++]=po,Mr[Or++]=go,Mr[Or++]=Na,Na=t;var r=po;t=go;var i=32-pi(r)-1;r&=~(1<<i),n+=1;var o=32-pi(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,po=1<<32-pi(e)+i|n<<i|r,go=o+t}else po=1<<o|n<<i|r,go=t}function U0(t){t.return!==null&&(aa(t,1),J1(t,1,0))}function V0(t){for(;t===sf;)sf=mc[--vc],mc[vc]=null,af=mc[--vc],mc[vc]=null;for(;t===Na;)Na=Mr[--Or],Mr[Or]=null,go=Mr[--Or],Mr[Or]=null,po=Mr[--Or],Mr[Or]=null}var Ar=null,br=null,St=!1,si=null;function Y1(t,e){var n=Lr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ar=t,br=Ls(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ar=t,br=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Na!==null?{id:po,overflow:go}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Lr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ar=t,br=null,!0):!1;default:return!1}}function _m(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mm(t){if(St){var e=br;if(e){var n=e;if(!fI(t,e)){if(_m(t))throw Error(oe(418));e=Ls(n.nextSibling);var r=Ar;e&&fI(t,e)?Y1(r,n):(t.flags=t.flags&-4097|2,St=!1,Ar=t)}}else{if(_m(t))throw Error(oe(418));t.flags=t.flags&-4097|2,St=!1,Ar=t}}}function pI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ar=t}function Xd(t){if(t!==Ar)return!1;if(!St)return pI(t),St=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xm(t.type,t.memoizedProps)),e&&(e=br)){if(_m(t))throw Q1(),Error(oe(418));for(;e;)Y1(t,e),e=Ls(e.nextSibling)}if(pI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){br=Ls(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}br=null}}else br=Ar?Ls(t.stateNode.nextSibling):null;return!0}function Q1(){for(var t=br;t;)t=Ls(t.nextSibling)}function Yc(){br=Ar=null,St=!1}function G0(t){si===null?si=[t]:si.push(t)}var S_=es.ReactCurrentBatchConfig;function $r(t,e){if(t&&t.defaultProps){e=kt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var cf=Ys(null),lf=null,yc=null,W0=null;function Z0(){W0=yc=lf=null}function j0(t){var e=cf.current;vt(cf),t._currentValue=e}function Om(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _c(t,e){lf=t,W0=yc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(qn=!0),t.firstContext=null)}function Vr(t){var e=t._currentValue;if(W0!==t)if(t={context:t,memoizedValue:e,next:null},yc===null){if(lf===null)throw Error(oe(308));yc=t,lf.dependencies={lanes:0,firstContext:t}}else yc=yc.next=t;return e}var ga=null;function z0(t){ga===null?ga=[t]:ga.push(t)}function q1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,z0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ho(t,r)}function Ho(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ys=!1;function H0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function eA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Vo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ho(t,n)}return i=r.interleaved,i===null?(e.next=e,z0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ho(t,n)}function mh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N0(t,n)}}function gI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function uf(t,e,n,r){var i=t.updateQueue;ys=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,s===null?o=l:s.next=l,s=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;s=0,u=l=c=null,a=o;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var g=t,m=a;switch(h=e,f=n,m.tag){case 1:if(g=m.payload,typeof g=="function"){d=g.call(f,d,h);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=m.payload,h=typeof g=="function"?g.call(f,d,h):g,h==null)break e;d=kt({},d,h);break e;case 2:ys=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ma|=s,t.lanes=s,t.memoizedState=d}}function mI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var tA=new qw.Component().refs;function Dm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:kt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var cp={isMounted:function(t){return(t=t._reactInternals)?za(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Fn(),i=Us(t),o=Vo(r,i);o.payload=e,n!=null&&(o.callback=n),e=Bs(t,o,i),e!==null&&(gi(e,t,i,r),mh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Fn(),i=Us(t),o=Vo(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Bs(t,o,i),e!==null&&(gi(e,t,i,r),mh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Fn(),r=Us(t),i=Vo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Bs(t,i,r),e!==null&&(gi(e,t,r,n),mh(e,t,r))}};function vI(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Ou(n,r)||!Ou(i,o):!0}function nA(t,e,n){var r=!1,i=Hs,o=e.contextType;return typeof o=="object"&&o!==null?o=Vr(o):(i=nr(e)?Pa:En.current,r=e.contextTypes,o=(r=r!=null)?Jc(t,i):Hs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function yI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&cp.enqueueReplaceState(e,e.state,null)}function Lm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=tA,H0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Vr(o):(o=nr(e)?Pa:En.current,i.context=Jc(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Dm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cp.enqueueReplaceState(i,i.state,null),uf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Dl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===tA&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function $d(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function CI(t){var e=t._init;return e(t._payload)}function rA(t){function e(p,v){if(t){var S=p.deletions;S===null?(p.deletions=[v],p.flags|=16):S.push(v)}}function n(p,v){if(!t)return null;for(;v!==null;)e(p,v),v=v.sibling;return null}function r(p,v){for(p=new Map;v!==null;)v.key!==null?p.set(v.key,v):p.set(v.index,v),v=v.sibling;return p}function i(p,v){return p=Vs(p,v),p.index=0,p.sibling=null,p}function o(p,v,S){return p.index=S,t?(S=p.alternate,S!==null?(S=S.index,S<v?(p.flags|=2,v):S):(p.flags|=2,v)):(p.flags|=1048576,v)}function s(p){return t&&p.alternate===null&&(p.flags|=2),p}function a(p,v,S,E){return v===null||v.tag!==6?(v=Cg(S,p.mode,E),v.return=p,v):(v=i(v,S),v.return=p,v)}function c(p,v,S,E){var w=S.type;return w===uc?u(p,v,S.props.children,E,S.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===vs&&CI(w)===v.type)?(E=i(v,S.props),E.ref=Dl(p,v,S),E.return=p,E):(E=bh(S.type,S.key,S.props,null,p.mode,E),E.ref=Dl(p,v,S),E.return=p,E)}function l(p,v,S,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Ig(S,p.mode,E),v.return=p,v):(v=i(v,S.children||[]),v.return=p,v)}function u(p,v,S,E,w){return v===null||v.tag!==7?(v=ka(S,p.mode,E,w),v.return=p,v):(v=i(v,S),v.return=p,v)}function d(p,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Cg(""+v,p.mode,S),v.return=p,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bd:return S=bh(v.type,v.key,v.props,null,p.mode,S),S.ref=Dl(p,null,v),S.return=p,S;case lc:return v=Ig(v,p.mode,S),v.return=p,v;case vs:var E=v._init;return d(p,E(v._payload),S)}if(Yl(v)||Pl(v))return v=ka(v,p.mode,S,null),v.return=p,v;$d(p,v)}return null}function h(p,v,S,E){var w=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return w!==null?null:a(p,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bd:return S.key===w?c(p,v,S,E):null;case lc:return S.key===w?l(p,v,S,E):null;case vs:return w=S._init,h(p,v,w(S._payload),E)}if(Yl(S)||Pl(S))return w!==null?null:u(p,v,S,E,null);$d(p,S)}return null}function f(p,v,S,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return p=p.get(S)||null,a(v,p,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bd:return p=p.get(E.key===null?S:E.key)||null,c(v,p,E,w);case lc:return p=p.get(E.key===null?S:E.key)||null,l(v,p,E,w);case vs:var A=E._init;return f(p,v,S,A(E._payload),w)}if(Yl(E)||Pl(E))return p=p.get(S)||null,u(v,p,E,w,null);$d(v,E)}return null}function g(p,v,S,E){for(var w=null,A=null,T=v,x=v=0,_=null;T!==null&&x<S.length;x++){T.index>x?(_=T,T=null):_=T.sibling;var M=h(p,T,S[x],E);if(M===null){T===null&&(T=_);break}t&&T&&M.alternate===null&&e(p,T),v=o(M,v,x),A===null?w=M:A.sibling=M,A=M,T=_}if(x===S.length)return n(p,T),St&&aa(p,x),w;if(T===null){for(;x<S.length;x++)T=d(p,S[x],E),T!==null&&(v=o(T,v,x),A===null?w=T:A.sibling=T,A=T);return St&&aa(p,x),w}for(T=r(p,T);x<S.length;x++)_=f(T,p,x,S[x],E),_!==null&&(t&&_.alternate!==null&&T.delete(_.key===null?x:_.key),v=o(_,v,x),A===null?w=_:A.sibling=_,A=_);return t&&T.forEach(function(D){return e(p,D)}),St&&aa(p,x),w}function m(p,v,S,E){var w=Pl(S);if(typeof w!="function")throw Error(oe(150));if(S=w.call(S),S==null)throw Error(oe(151));for(var A=w=null,T=v,x=v=0,_=null,M=S.next();T!==null&&!M.done;x++,M=S.next()){T.index>x?(_=T,T=null):_=T.sibling;var D=h(p,T,M.value,E);if(D===null){T===null&&(T=_);break}t&&T&&D.alternate===null&&e(p,T),v=o(D,v,x),A===null?w=D:A.sibling=D,A=D,T=_}if(M.done)return n(p,T),St&&aa(p,x),w;if(T===null){for(;!M.done;x++,M=S.next())M=d(p,M.value,E),M!==null&&(v=o(M,v,x),A===null?w=M:A.sibling=M,A=M);return St&&aa(p,x),w}for(T=r(p,T);!M.done;x++,M=S.next())M=f(T,p,x,M.value,E),M!==null&&(t&&M.alternate!==null&&T.delete(M.key===null?x:M.key),v=o(M,v,x),A===null?w=M:A.sibling=M,A=M);return t&&T.forEach(function(F){return e(p,F)}),St&&aa(p,x),w}function C(p,v,S,E){if(typeof S=="object"&&S!==null&&S.type===uc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Bd:e:{for(var w=S.key,A=v;A!==null;){if(A.key===w){if(w=S.type,w===uc){if(A.tag===7){n(p,A.sibling),v=i(A,S.props.children),v.return=p,p=v;break e}}else if(A.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===vs&&CI(w)===A.type){n(p,A.sibling),v=i(A,S.props),v.ref=Dl(p,A,S),v.return=p,p=v;break e}n(p,A);break}else e(p,A);A=A.sibling}S.type===uc?(v=ka(S.props.children,p.mode,E,S.key),v.return=p,p=v):(E=bh(S.type,S.key,S.props,null,p.mode,E),E.ref=Dl(p,v,S),E.return=p,p=E)}return s(p);case lc:e:{for(A=S.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(p,v.sibling),v=i(v,S.children||[]),v.return=p,p=v;break e}else{n(p,v);break}else e(p,v);v=v.sibling}v=Ig(S,p.mode,E),v.return=p,p=v}return s(p);case vs:return A=S._init,C(p,v,A(S._payload),E)}if(Yl(S))return g(p,v,S,E);if(Pl(S))return m(p,v,S,E);$d(p,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(p,v.sibling),v=i(v,S),v.return=p,p=v):(n(p,v),v=Cg(S,p.mode,E),v.return=p,p=v),s(p)):n(p,v)}return C}var Qc=rA(!0),iA=rA(!1),yd={},Ji=Ys(yd),Fu=Ys(yd),Uu=Ys(yd);function ma(t){if(t===yd)throw Error(oe(174));return t}function X0(t,e){switch(ut(Uu,e),ut(Fu,t),ut(Ji,yd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:pm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=pm(e,t)}vt(Ji),ut(Ji,e)}function qc(){vt(Ji),vt(Fu),vt(Uu)}function oA(t){ma(Uu.current);var e=ma(Ji.current),n=pm(e,t.type);e!==n&&(ut(Fu,t),ut(Ji,n))}function $0(t){Fu.current===t&&(vt(Ji),vt(Fu))}var wt=Ys(0);function df(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fg=[];function K0(){for(var t=0;t<fg.length;t++)fg[t]._workInProgressVersionPrimary=null;fg.length=0}var vh=es.ReactCurrentDispatcher,pg=es.ReactCurrentBatchConfig,_a=0,At=null,Zt=null,qt=null,hf=!1,gu=!1,Vu=0,b_=0;function Cn(){throw Error(oe(321))}function J0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vi(t[n],e[n]))return!1;return!0}function Y0(t,e,n,r,i,o){if(_a=o,At=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,vh.current=t===null||t.memoizedState===null?E_:T_,t=n(r,i),gu){o=0;do{if(gu=!1,Vu=0,25<=o)throw Error(oe(301));o+=1,qt=Zt=null,e.updateQueue=null,vh.current=x_,t=n(r,i)}while(gu)}if(vh.current=ff,e=Zt!==null&&Zt.next!==null,_a=0,qt=Zt=At=null,hf=!1,e)throw Error(oe(300));return t}function Q0(){var t=Vu!==0;return Vu=0,t}function Ei(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?At.memoizedState=qt=t:qt=qt.next=t,qt}function Gr(){if(Zt===null){var t=At.alternate;t=t!==null?t.memoizedState:null}else t=Zt.next;var e=qt===null?At.memoizedState:qt.next;if(e!==null)qt=e,Zt=t;else{if(t===null)throw Error(oe(310));Zt=t,t={memoizedState:Zt.memoizedState,baseState:Zt.baseState,baseQueue:Zt.baseQueue,queue:Zt.queue,next:null},qt===null?At.memoizedState=qt=t:qt=qt.next=t}return qt}function Gu(t,e){return typeof e=="function"?e(t):e}function gg(t){var e=Gr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=Zt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,l=o;do{var u=l.lane;if((_a&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,s=r):c=c.next=d,At.lanes|=u,Ma|=u}l=l.next}while(l!==null&&l!==o);c===null?s=r:c.next=a,vi(r,e.memoizedState)||(qn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,At.lanes|=o,Ma|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function mg(t){var e=Gr(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);vi(o,e.memoizedState)||(qn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function sA(){}function aA(t,e){var n=At,r=Gr(),i=e(),o=!vi(r.memoizedState,i);if(o&&(r.memoizedState=i,qn=!0),r=r.queue,q0(uA.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||qt!==null&&qt.memoizedState.tag&1){if(n.flags|=2048,Wu(9,lA.bind(null,n,r,i,e),void 0,null),tn===null)throw Error(oe(349));_a&30||cA(n,e,i)}return i}function cA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function lA(t,e,n,r){e.value=n,e.getSnapshot=r,dA(e)&&hA(t)}function uA(t,e,n){return n(function(){dA(e)&&hA(t)})}function dA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vi(t,n)}catch{return!0}}function hA(t){var e=Ho(t,1);e!==null&&gi(e,t,1,-1)}function II(t){var e=Ei();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gu,lastRenderedState:t},e.queue=t,t=t.dispatch=k_.bind(null,At,t),[e.memoizedState,t]}function Wu(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=At.updateQueue,e===null?(e={lastEffect:null,stores:null},At.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function fA(){return Gr().memoizedState}function yh(t,e,n,r){var i=Ei();At.flags|=t,i.memoizedState=Wu(1|e,n,void 0,r===void 0?null:r)}function lp(t,e,n,r){var i=Gr();r=r===void 0?null:r;var o=void 0;if(Zt!==null){var s=Zt.memoizedState;if(o=s.destroy,r!==null&&J0(r,s.deps)){i.memoizedState=Wu(e,n,o,r);return}}At.flags|=t,i.memoizedState=Wu(1|e,n,o,r)}function SI(t,e){return yh(8390656,8,t,e)}function q0(t,e){return lp(2048,8,t,e)}function pA(t,e){return lp(4,2,t,e)}function gA(t,e){return lp(4,4,t,e)}function mA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function vA(t,e,n){return n=n!=null?n.concat([t]):null,lp(4,4,mA.bind(null,e,t),n)}function ey(){}function yA(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J0(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function CA(t,e){var n=Gr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&J0(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function IA(t,e,n){return _a&21?(vi(n,e)||(n=w1(),At.lanes|=n,Ma|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,qn=!0),t.memoizedState=n)}function w_(t,e){var n=Je;Je=n!==0&&4>n?n:4,t(!0);var r=pg.transition;pg.transition={};try{t(!1),e()}finally{Je=n,pg.transition=r}}function SA(){return Gr().memoizedState}function A_(t,e,n){var r=Us(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bA(t))wA(e,n);else if(n=q1(t,e,n,r),n!==null){var i=Fn();gi(n,t,r,i),AA(n,e,r)}}function k_(t,e,n){var r=Us(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bA(t))wA(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,vi(a,s)){var c=e.interleaved;c===null?(i.next=i,z0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=q1(t,e,i,r),n!==null&&(i=Fn(),gi(n,t,r,i),AA(n,e,r))}}function bA(t){var e=t.alternate;return t===At||e!==null&&e===At}function wA(t,e){gu=hf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function AA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N0(t,n)}}var ff={readContext:Vr,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useInsertionEffect:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useSyncExternalStore:Cn,useId:Cn,unstable_isNewReconciler:!1},E_={readContext:Vr,useCallback:function(t,e){return Ei().memoizedState=[t,e===void 0?null:e],t},useContext:Vr,useEffect:SI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,yh(4194308,4,mA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return yh(4194308,4,t,e)},useInsertionEffect:function(t,e){return yh(4,2,t,e)},useMemo:function(t,e){var n=Ei();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ei();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=A_.bind(null,At,t),[r.memoizedState,t]},useRef:function(t){var e=Ei();return t={current:t},e.memoizedState=t},useState:II,useDebugValue:ey,useDeferredValue:function(t){return Ei().memoizedState=t},useTransition:function(){var t=II(!1),e=t[0];return t=w_.bind(null,t[1]),Ei().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=At,i=Ei();if(St){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),tn===null)throw Error(oe(349));_a&30||cA(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,SI(uA.bind(null,r,o,t),[t]),r.flags|=2048,Wu(9,lA.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Ei(),e=tn.identifierPrefix;if(St){var n=go,r=po;n=(r&~(1<<32-pi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Vu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=b_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},T_={readContext:Vr,useCallback:yA,useContext:Vr,useEffect:q0,useImperativeHandle:vA,useInsertionEffect:pA,useLayoutEffect:gA,useMemo:CA,useReducer:gg,useRef:fA,useState:function(){return gg(Gu)},useDebugValue:ey,useDeferredValue:function(t){var e=Gr();return IA(e,Zt.memoizedState,t)},useTransition:function(){var t=gg(Gu)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:sA,useSyncExternalStore:aA,useId:SA,unstable_isNewReconciler:!1},x_={readContext:Vr,useCallback:yA,useContext:Vr,useEffect:q0,useImperativeHandle:vA,useInsertionEffect:pA,useLayoutEffect:gA,useMemo:CA,useReducer:mg,useRef:fA,useState:function(){return mg(Gu)},useDebugValue:ey,useDeferredValue:function(t){var e=Gr();return Zt===null?e.memoizedState=t:IA(e,Zt.memoizedState,t)},useTransition:function(){var t=mg(Gu)[0],e=Gr().memoizedState;return[t,e]},useMutableSource:sA,useSyncExternalStore:aA,useId:SA,unstable_isNewReconciler:!1};function el(t,e){try{var n="",r=e;do n+=nN(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function vg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Bm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var R_=typeof WeakMap=="function"?WeakMap:Map;function kA(t,e,n){n=Vo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gf||(gf=!0,Xm=r),Bm(t,e)},n}function EA(t,e,n){n=Vo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Bm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Bm(t,e),typeof r!="function"&&(Fs===null?Fs=new Set([this]):Fs.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function bI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new R_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Z_.bind(null,t,e,n),e.then(t,t))}function wI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function AI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Vo(-1,1),e.tag=2,Bs(n,e,1))),n.lanes|=1),t)}var P_=es.ReactCurrentOwner,qn=!1;function Nn(t,e,n,r){e.child=t===null?iA(e,null,n,r):Qc(e,t.child,n,r)}function kI(t,e,n,r,i){n=n.render;var o=e.ref;return _c(e,i),r=Y0(t,e,n,r,o,i),n=Q0(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xo(t,e,i)):(St&&n&&U0(e),e.flags|=1,Nn(t,e,r,i),e.child)}function EI(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!cy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,TA(t,e,o,r,i)):(t=bh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Ou,n(s,r)&&t.ref===e.ref)return Xo(t,e,i)}return e.flags|=1,t=Vs(o,r),t.ref=e.ref,t.return=e,e.child=t}function TA(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Ou(o,r)&&t.ref===e.ref)if(qn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(qn=!0);else return e.lanes=t.lanes,Xo(t,e,i)}return Fm(t,e,n,r,i)}function xA(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ut(Ic,mr),mr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ut(Ic,mr),mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ut(Ic,mr),mr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ut(Ic,mr),mr|=r;return Nn(t,e,i,n),e.child}function RA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fm(t,e,n,r,i){var o=nr(n)?Pa:En.current;return o=Jc(e,o),_c(e,i),n=Y0(t,e,n,r,o,i),r=Q0(),t!==null&&!qn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Xo(t,e,i)):(St&&r&&U0(e),e.flags|=1,Nn(t,e,n,i),e.child)}function TI(t,e,n,r,i){if(nr(n)){var o=!0;of(e)}else o=!1;if(_c(e,i),e.stateNode===null)Ch(t,e),nA(e,n,r),Lm(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=Vr(l):(l=nr(n)?Pa:En.current,l=Jc(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==l)&&yI(e,s,r,l),ys=!1;var h=e.memoizedState;s.state=h,uf(e,r,s,i),c=e.memoizedState,a!==r||h!==c||tr.current||ys?(typeof u=="function"&&(Dm(e,n,u,r),c=e.memoizedState),(a=ys||vI(e,n,a,r,h,c,l))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,eA(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:$r(e.type,a),s.props=l,d=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Vr(c):(c=nr(n)?Pa:En.current,c=Jc(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==c)&&yI(e,s,r,c),ys=!1,h=e.memoizedState,s.state=h,uf(e,r,s,i);var g=e.memoizedState;a!==d||h!==g||tr.current||ys?(typeof f=="function"&&(Dm(e,n,f,r),g=e.memoizedState),(l=ys||vI(e,n,l,r,h,g,c)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,g,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,g,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),s.props=r,s.state=g,s.context=c,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Um(t,e,n,r,o,i)}function Um(t,e,n,r,i,o){RA(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&hI(e,n,!1),Xo(t,e,o);r=e.stateNode,P_.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Qc(e,t.child,null,o),e.child=Qc(e,null,a,o)):Nn(t,e,a,o),e.memoizedState=r.state,i&&hI(e,n,!0),e.child}function PA(t){var e=t.stateNode;e.pendingContext?dI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dI(t,e.context,!1),X0(t,e.containerInfo)}function xI(t,e,n,r,i){return Yc(),G0(i),e.flags|=256,Nn(t,e,n,r),e.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function Gm(t){return{baseLanes:t,cachePool:null,transitions:null}}function NA(t,e,n){var r=e.pendingProps,i=wt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ut(wt,i&1),t===null)return Mm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=hp(s,r,0,null),t=ka(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Gm(n),e.memoizedState=Vm,t):ty(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return N_(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Vs(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Vs(a,o):(o=ka(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Gm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Vm,r}return o=t.child,t=o.sibling,r=Vs(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ty(t,e){return e=hp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kd(t,e,n,r){return r!==null&&G0(r),Qc(e,t.child,null,n),t=ty(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function N_(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=vg(Error(oe(422))),Kd(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=hp({mode:"visible",children:r.children},i,0,null),o=ka(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Qc(e,t.child,null,s),e.child.memoizedState=Gm(s),e.memoizedState=Vm,o);if(!(e.mode&1))return Kd(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(oe(419)),r=vg(o,r,void 0),Kd(t,e,s,r)}if(a=(s&t.childLanes)!==0,qn||a){if(r=tn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ho(t,i),gi(r,t,i,-1))}return ay(),r=vg(Error(oe(421))),Kd(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=j_.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,br=Ls(i.nextSibling),Ar=e,St=!0,si=null,t!==null&&(Mr[Or++]=po,Mr[Or++]=go,Mr[Or++]=Na,po=t.id,go=t.overflow,Na=e),e=ty(e,r.children),e.flags|=4096,e)}function RI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Om(t.return,e,n)}function yg(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function _A(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Nn(t,e,r.children,n),r=wt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&RI(t,n,e);else if(t.tag===19)RI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ut(wt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&df(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),yg(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&df(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}yg(e,!0,n,null,o);break;case"together":yg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ch(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ma|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Vs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Vs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function __(t,e,n){switch(e.tag){case 3:PA(e),Yc();break;case 5:oA(e);break;case 1:nr(e.type)&&of(e);break;case 4:X0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ut(cf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ut(wt,wt.current&1),e.flags|=128,null):n&e.child.childLanes?NA(t,e,n):(ut(wt,wt.current&1),t=Xo(t,e,n),t!==null?t.sibling:null);ut(wt,wt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _A(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ut(wt,wt.current),r)break;return null;case 22:case 23:return e.lanes=0,xA(t,e,n)}return Xo(t,e,n)}var MA,Wm,OA,DA;MA=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wm=function(){};OA=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ma(Ji.current);var o=null;switch(n){case"input":i=um(t,i),r=um(t,r),o=[];break;case"select":i=kt({},i,{value:void 0}),r=kt({},r,{value:void 0}),o=[];break;case"textarea":i=fm(t,i),r=fm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nf)}gm(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Tu.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(Tu.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&ht("scroll",t),o||a===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};DA=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ll(t,e){if(!St)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function In(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function M_(t,e,n){var r=e.pendingProps;switch(V0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return In(e),null;case 1:return nr(e.type)&&rf(),In(e),null;case 3:return r=e.stateNode,qc(),vt(tr),vt(En),K0(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Xd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,si!==null&&(Jm(si),si=null))),Wm(t,e),In(e),null;case 5:$0(e);var i=ma(Uu.current);if(n=e.type,t!==null&&e.stateNode!=null)OA(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return In(e),null}if(t=ma(Ji.current),Xd(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Pi]=e,r[Bu]=o,t=(e.mode&1)!==0,n){case"dialog":ht("cancel",r),ht("close",r);break;case"iframe":case"object":case"embed":ht("load",r);break;case"video":case"audio":for(i=0;i<ql.length;i++)ht(ql[i],r);break;case"source":ht("error",r);break;case"img":case"image":case"link":ht("error",r),ht("load",r);break;case"details":ht("toggle",r);break;case"input":FC(r,o),ht("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ht("invalid",r);break;case"textarea":VC(r,o),ht("invalid",r)}gm(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Hd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Hd(r.textContent,a,t),i=["children",""+a]):Tu.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ht("scroll",r)}switch(n){case"input":Fd(r),UC(r,o,!0);break;case"textarea":Fd(r),GC(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=nf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Pi]=e,t[Bu]=r,MA(t,e,!1,!1),e.stateNode=t;e:{switch(s=mm(n,r),n){case"dialog":ht("cancel",t),ht("close",t),i=r;break;case"iframe":case"object":case"embed":ht("load",t),i=r;break;case"video":case"audio":for(i=0;i<ql.length;i++)ht(ql[i],t);i=r;break;case"source":ht("error",t),i=r;break;case"img":case"image":case"link":ht("error",t),ht("load",t),i=r;break;case"details":ht("toggle",t),i=r;break;case"input":FC(t,r),i=um(t,r),ht("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=kt({},r,{value:void 0}),ht("invalid",t);break;case"textarea":VC(t,r),i=fm(t,r),ht("invalid",t);break;default:i=r}gm(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?d1(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&l1(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&xu(t,c):typeof c=="number"&&xu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Tu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&ht("scroll",t):c!=null&&k0(t,o,c,s))}switch(n){case"input":Fd(t),UC(t,r,!1);break;case"textarea":Fd(t),GC(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zs(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?xc(t,!!r.multiple,o,!1):r.defaultValue!=null&&xc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=nf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return In(e),null;case 6:if(t&&e.stateNode!=null)DA(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=ma(Uu.current),ma(Ji.current),Xd(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pi]=e,(o=r.nodeValue!==n)&&(t=Ar,t!==null))switch(t.tag){case 3:Hd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Hd(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pi]=e,e.stateNode=r}return In(e),null;case 13:if(vt(wt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(St&&br!==null&&e.mode&1&&!(e.flags&128))Q1(),Yc(),e.flags|=98560,o=!1;else if(o=Xd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[Pi]=e}else Yc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;In(e),o=!1}else si!==null&&(Jm(si),si=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||wt.current&1?jt===0&&(jt=3):ay())),e.updateQueue!==null&&(e.flags|=4),In(e),null);case 4:return qc(),Wm(t,e),t===null&&Du(e.stateNode.containerInfo),In(e),null;case 10:return j0(e.type._context),In(e),null;case 17:return nr(e.type)&&rf(),In(e),null;case 19:if(vt(wt),o=e.memoizedState,o===null)return In(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Ll(o,!1);else{if(jt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=df(t),s!==null){for(e.flags|=128,Ll(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ut(wt,wt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Dt()>tl&&(e.flags|=128,r=!0,Ll(o,!1),e.lanes=4194304)}else{if(!r)if(t=df(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ll(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!St)return In(e),null}else 2*Dt()-o.renderingStartTime>tl&&n!==1073741824&&(e.flags|=128,r=!0,Ll(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Dt(),e.sibling=null,n=wt.current,ut(wt,r?n&1|2:n&1),e):(In(e),null);case 22:case 23:return sy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mr&1073741824&&(In(e),e.subtreeFlags&6&&(e.flags|=8192)):In(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function O_(t,e){switch(V0(e),e.tag){case 1:return nr(e.type)&&rf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return qc(),vt(tr),vt(En),K0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $0(e),null;case 13:if(vt(wt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Yc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(wt),null;case 4:return qc(),null;case 10:return j0(e.type._context),null;case 22:case 23:return sy(),null;case 24:return null;default:return null}}var Jd=!1,bn=!1,D_=typeof WeakSet=="function"?WeakSet:Set,ue=null;function Cc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Rt(t,e,r)}else n.current=null}function Zm(t,e,n){try{n()}catch(r){Rt(t,e,r)}}var PI=!1;function L_(t,e){if(Em=qh,t=U1(),F0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(c=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===i&&(a=s),h===o&&++u===r&&(c=s),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Tm={focusedElem:t,selectionRange:n},qh=!1,ue=e;ue!==null;)if(e=ue,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ue=t;else for(;ue!==null;){e=ue;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var m=g.memoizedProps,C=g.memoizedState,p=e.stateNode,v=p.getSnapshotBeforeUpdate(e.elementType===e.type?m:$r(e.type,m),C);p.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(E){Rt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ue=t;break}ue=e.return}return g=PI,PI=!1,g}function mu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Zm(e,n,o)}i=i.next}while(i!==r)}}function up(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function LA(t){var e=t.alternate;e!==null&&(t.alternate=null,LA(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pi],delete e[Bu],delete e[Pm],delete e[y_],delete e[C_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function BA(t){return t.tag===5||t.tag===3||t.tag===4}function NI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||BA(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nf));else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}function Hm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Hm(t,e,n),t=t.sibling;t!==null;)Hm(t,e,n),t=t.sibling}var on=null,ri=!1;function as(t,e,n){for(n=n.child;n!==null;)FA(t,e,n),n=n.sibling}function FA(t,e,n){if(Ki&&typeof Ki.onCommitFiberUnmount=="function")try{Ki.onCommitFiberUnmount(np,n)}catch{}switch(n.tag){case 5:bn||Cc(n,e);case 6:var r=on,i=ri;on=null,as(t,e,n),on=r,ri=i,on!==null&&(ri?(t=on,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):on.removeChild(n.stateNode));break;case 18:on!==null&&(ri?(t=on,n=n.stateNode,t.nodeType===8?dg(t.parentNode,n):t.nodeType===1&&dg(t,n),_u(t)):dg(on,n.stateNode));break;case 4:r=on,i=ri,on=n.stateNode.containerInfo,ri=!0,as(t,e,n),on=r,ri=i;break;case 0:case 11:case 14:case 15:if(!bn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Zm(n,e,s),i=i.next}while(i!==r)}as(t,e,n);break;case 1:if(!bn&&(Cc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Rt(n,e,a)}as(t,e,n);break;case 21:as(t,e,n);break;case 22:n.mode&1?(bn=(r=bn)||n.memoizedState!==null,as(t,e,n),bn=r):as(t,e,n);break;default:as(t,e,n)}}function _I(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new D_),e.forEach(function(r){var i=z_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function zr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:on=a.stateNode,ri=!1;break e;case 3:on=a.stateNode.containerInfo,ri=!0;break e;case 4:on=a.stateNode.containerInfo,ri=!0;break e}a=a.return}if(on===null)throw Error(oe(160));FA(o,s,i),on=null,ri=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Rt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)UA(e,t),e=e.sibling}function UA(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(zr(e,t),bi(t),r&4){try{mu(3,t,t.return),up(3,t)}catch(m){Rt(t,t.return,m)}try{mu(5,t,t.return)}catch(m){Rt(t,t.return,m)}}break;case 1:zr(e,t),bi(t),r&512&&n!==null&&Cc(n,n.return);break;case 5:if(zr(e,t),bi(t),r&512&&n!==null&&Cc(n,n.return),t.flags&32){var i=t.stateNode;try{xu(i,"")}catch(m){Rt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&s1(i,o),mm(a,s);var l=mm(a,o);for(s=0;s<c.length;s+=2){var u=c[s],d=c[s+1];u==="style"?d1(i,d):u==="dangerouslySetInnerHTML"?l1(i,d):u==="children"?xu(i,d):k0(i,u,d,l)}switch(a){case"input":dm(i,o);break;case"textarea":a1(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?xc(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?xc(i,!!o.multiple,o.defaultValue,!0):xc(i,!!o.multiple,o.multiple?[]:"",!1))}i[Bu]=o}catch(m){Rt(t,t.return,m)}}break;case 6:if(zr(e,t),bi(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(m){Rt(t,t.return,m)}}break;case 3:if(zr(e,t),bi(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_u(e.containerInfo)}catch(m){Rt(t,t.return,m)}break;case 4:zr(e,t),bi(t);break;case 13:zr(e,t),bi(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(iy=Dt())),r&4&&_I(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(bn=(l=bn)||u,zr(e,t),bn=l):zr(e,t),bi(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(ue=t,u=t.child;u!==null;){for(d=ue=u;ue!==null;){switch(h=ue,f=h.child,h.tag){case 0:case 11:case 14:case 15:mu(4,h,h.return);break;case 1:Cc(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(m){Rt(r,n,m)}}break;case 5:Cc(h,h.return);break;case 22:if(h.memoizedState!==null){OI(d);continue}}f!==null?(f.return=h,ue=f):OI(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=u1("display",s))}catch(m){Rt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){Rt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:zr(e,t),bi(t),r&4&&_I(t);break;case 21:break;default:zr(e,t),bi(t)}}function bi(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(BA(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(xu(i,""),r.flags&=-33);var o=NI(t);Hm(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=NI(t);zm(t,a,s);break;default:throw Error(oe(161))}}catch(c){Rt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B_(t,e,n){ue=t,VA(t)}function VA(t,e,n){for(var r=(t.mode&1)!==0;ue!==null;){var i=ue,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Jd;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||bn;a=Jd;var l=bn;if(Jd=s,(bn=c)&&!l)for(ue=i;ue!==null;)s=ue,c=s.child,s.tag===22&&s.memoizedState!==null?DI(i):c!==null?(c.return=s,ue=c):DI(i);for(;o!==null;)ue=o,VA(o),o=o.sibling;ue=i,Jd=a,bn=l}MI(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ue=o):MI(t)}}function MI(t){for(;ue!==null;){var e=ue;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bn||up(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:$r(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&mI(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mI(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&_u(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}bn||e.flags&512&&jm(e)}catch(h){Rt(e,e.return,h)}}if(e===t){ue=null;break}if(n=e.sibling,n!==null){n.return=e.return,ue=n;break}ue=e.return}}function OI(t){for(;ue!==null;){var e=ue;if(e===t){ue=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ue=n;break}ue=e.return}}function DI(t){for(;ue!==null;){var e=ue;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{up(4,e)}catch(c){Rt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Rt(e,i,c)}}var o=e.return;try{jm(e)}catch(c){Rt(e,o,c)}break;case 5:var s=e.return;try{jm(e)}catch(c){Rt(e,s,c)}}}catch(c){Rt(e,e.return,c)}if(e===t){ue=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ue=a;break}ue=e.return}}var F_=Math.ceil,pf=es.ReactCurrentDispatcher,ny=es.ReactCurrentOwner,Ur=es.ReactCurrentBatchConfig,We=0,tn=null,Ft=null,un=0,mr=0,Ic=Ys(0),jt=0,Zu=null,Ma=0,dp=0,ry=0,vu=null,Jn=null,iy=0,tl=1/0,so=null,gf=!1,Xm=null,Fs=null,Yd=!1,As=null,mf=0,yu=0,$m=null,Ih=-1,Sh=0;function Fn(){return We&6?Dt():Ih!==-1?Ih:Ih=Dt()}function Us(t){return t.mode&1?We&2&&un!==0?un&-un:S_.transition!==null?(Sh===0&&(Sh=w1()),Sh):(t=Je,t!==0||(t=window.event,t=t===void 0?16:P1(t.type)),t):1}function gi(t,e,n,r){if(50<yu)throw yu=0,$m=null,Error(oe(185));gd(t,n,r),(!(We&2)||t!==tn)&&(t===tn&&(!(We&2)&&(dp|=n),jt===4&&Ss(t,un)),rr(t,r),n===1&&We===0&&!(e.mode&1)&&(tl=Dt()+500,ap&&Qs()))}function rr(t,e){var n=t.callbackNode;SN(t,e);var r=Qh(t,t===tn?un:0);if(r===0)n!==null&&jC(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&jC(n),e===1)t.tag===0?I_(LI.bind(null,t)):K1(LI.bind(null,t)),m_(function(){!(We&6)&&Qs()}),n=null;else{switch(A1(r)){case 1:n=P0;break;case 4:n=S1;break;case 16:n=Yh;break;case 536870912:n=b1;break;default:n=Yh}n=$A(n,GA.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function GA(t,e){if(Ih=-1,Sh=0,We&6)throw Error(oe(327));var n=t.callbackNode;if(Mc()&&t.callbackNode!==n)return null;var r=Qh(t,t===tn?un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vf(t,r);else{e=r;var i=We;We|=2;var o=ZA();(tn!==t||un!==e)&&(so=null,tl=Dt()+500,Aa(t,e));do try{G_();break}catch(a){WA(t,a)}while(!0);Z0(),pf.current=o,We=i,Ft!==null?e=0:(tn=null,un=0,e=jt)}if(e!==0){if(e===2&&(i=Sm(t),i!==0&&(r=i,e=Km(t,i))),e===1)throw n=Zu,Aa(t,0),Ss(t,r),rr(t,Dt()),n;if(e===6)Ss(t,r);else{if(i=t.current.alternate,!(r&30)&&!U_(i)&&(e=vf(t,r),e===2&&(o=Sm(t),o!==0&&(r=o,e=Km(t,o))),e===1))throw n=Zu,Aa(t,0),Ss(t,r),rr(t,Dt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:ca(t,Jn,so);break;case 3:if(Ss(t,r),(r&130023424)===r&&(e=iy+500-Dt(),10<e)){if(Qh(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Fn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Rm(ca.bind(null,t,Jn,so),e);break}ca(t,Jn,so);break;case 4:if(Ss(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-pi(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Dt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*F_(r/1960))-r,10<r){t.timeoutHandle=Rm(ca.bind(null,t,Jn,so),r);break}ca(t,Jn,so);break;case 5:ca(t,Jn,so);break;default:throw Error(oe(329))}}}return rr(t,Dt()),t.callbackNode===n?GA.bind(null,t):null}function Km(t,e){var n=vu;return t.current.memoizedState.isDehydrated&&(Aa(t,e).flags|=256),t=vf(t,e),t!==2&&(e=Jn,Jn=n,e!==null&&Jm(e)),t}function Jm(t){Jn===null?Jn=t:Jn.push.apply(Jn,t)}function U_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!vi(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ss(t,e){for(e&=~ry,e&=~dp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pi(e),r=1<<n;t[n]=-1,e&=~r}}function LI(t){if(We&6)throw Error(oe(327));Mc();var e=Qh(t,0);if(!(e&1))return rr(t,Dt()),null;var n=vf(t,e);if(t.tag!==0&&n===2){var r=Sm(t);r!==0&&(e=r,n=Km(t,r))}if(n===1)throw n=Zu,Aa(t,0),Ss(t,e),rr(t,Dt()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ca(t,Jn,so),rr(t,Dt()),null}function oy(t,e){var n=We;We|=1;try{return t(e)}finally{We=n,We===0&&(tl=Dt()+500,ap&&Qs())}}function Oa(t){As!==null&&As.tag===0&&!(We&6)&&Mc();var e=We;We|=1;var n=Ur.transition,r=Je;try{if(Ur.transition=null,Je=1,t)return t()}finally{Je=r,Ur.transition=n,We=e,!(We&6)&&Qs()}}function sy(){mr=Ic.current,vt(Ic)}function Aa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,g_(n)),Ft!==null)for(n=Ft.return;n!==null;){var r=n;switch(V0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&rf();break;case 3:qc(),vt(tr),vt(En),K0();break;case 5:$0(r);break;case 4:qc();break;case 13:vt(wt);break;case 19:vt(wt);break;case 10:j0(r.type._context);break;case 22:case 23:sy()}n=n.return}if(tn=t,Ft=t=Vs(t.current,null),un=mr=e,jt=0,Zu=null,ry=dp=Ma=0,Jn=vu=null,ga!==null){for(e=0;e<ga.length;e++)if(n=ga[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ga=null}return t}function WA(t,e){do{var n=Ft;try{if(Z0(),vh.current=ff,hf){for(var r=At.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hf=!1}if(_a=0,qt=Zt=At=null,gu=!1,Vu=0,ny.current=null,n===null||n.return===null){jt=1,Zu=e,Ft=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=un,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=wI(s);if(f!==null){f.flags&=-257,AI(f,s,a,o,e),f.mode&1&&bI(o,l,e),e=f,c=l;var g=e.updateQueue;if(g===null){var m=new Set;m.add(c),e.updateQueue=m}else g.add(c);break e}else{if(!(e&1)){bI(o,l,e),ay();break e}c=Error(oe(426))}}else if(St&&a.mode&1){var C=wI(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),AI(C,s,a,o,e),G0(el(c,a));break e}}o=c=el(c,a),jt!==4&&(jt=2),vu===null?vu=[o]:vu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var p=kA(o,c,e);gI(o,p);break e;case 1:a=c;var v=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Fs===null||!Fs.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=EA(o,a,e);gI(o,E);break e}}o=o.return}while(o!==null)}zA(n)}catch(w){e=w,Ft===n&&n!==null&&(Ft=n=n.return);continue}break}while(!0)}function ZA(){var t=pf.current;return pf.current=ff,t===null?ff:t}function ay(){(jt===0||jt===3||jt===2)&&(jt=4),tn===null||!(Ma&268435455)&&!(dp&268435455)||Ss(tn,un)}function vf(t,e){var n=We;We|=2;var r=ZA();(tn!==t||un!==e)&&(so=null,Aa(t,e));do try{V_();break}catch(i){WA(t,i)}while(!0);if(Z0(),We=n,pf.current=r,Ft!==null)throw Error(oe(261));return tn=null,un=0,jt}function V_(){for(;Ft!==null;)jA(Ft)}function G_(){for(;Ft!==null&&!hN();)jA(Ft)}function jA(t){var e=XA(t.alternate,t,mr);t.memoizedProps=t.pendingProps,e===null?zA(t):Ft=e,ny.current=null}function zA(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=O_(n,e),n!==null){n.flags&=32767,Ft=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{jt=6,Ft=null;return}}else if(n=M_(n,e,mr),n!==null){Ft=n;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=t}while(e!==null);jt===0&&(jt=5)}function ca(t,e,n){var r=Je,i=Ur.transition;try{Ur.transition=null,Je=1,W_(t,e,n,r)}finally{Ur.transition=i,Je=r}return null}function W_(t,e,n,r){do Mc();while(As!==null);if(We&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(bN(t,o),t===tn&&(Ft=tn=null,un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yd||(Yd=!0,$A(Yh,function(){return Mc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Ur.transition,Ur.transition=null;var s=Je;Je=1;var a=We;We|=4,ny.current=null,L_(t,n),UA(n,t),c_(Tm),qh=!!Em,Tm=Em=null,t.current=n,B_(n),fN(),We=a,Je=s,Ur.transition=o}else t.current=n;if(Yd&&(Yd=!1,As=t,mf=i),o=t.pendingLanes,o===0&&(Fs=null),mN(n.stateNode),rr(t,Dt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(gf)throw gf=!1,t=Xm,Xm=null,t;return mf&1&&t.tag!==0&&Mc(),o=t.pendingLanes,o&1?t===$m?yu++:(yu=0,$m=t):yu=0,Qs(),null}function Mc(){if(As!==null){var t=A1(mf),e=Ur.transition,n=Je;try{if(Ur.transition=null,Je=16>t?16:t,As===null)var r=!1;else{if(t=As,As=null,mf=0,We&6)throw Error(oe(331));var i=We;for(We|=4,ue=t.current;ue!==null;){var o=ue,s=o.child;if(ue.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(ue=l;ue!==null;){var u=ue;switch(u.tag){case 0:case 11:case 15:mu(8,u,o)}var d=u.child;if(d!==null)d.return=u,ue=d;else for(;ue!==null;){u=ue;var h=u.sibling,f=u.return;if(LA(u),u===l){ue=null;break}if(h!==null){h.return=f,ue=h;break}ue=f}}}var g=o.alternate;if(g!==null){var m=g.child;if(m!==null){g.child=null;do{var C=m.sibling;m.sibling=null,m=C}while(m!==null)}}ue=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ue=s;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:mu(9,o,o.return)}var p=o.sibling;if(p!==null){p.return=o.return,ue=p;break e}ue=o.return}}var v=t.current;for(ue=v;ue!==null;){s=ue;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,ue=S;else e:for(s=v;ue!==null;){if(a=ue,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:up(9,a)}}catch(w){Rt(a,a.return,w)}if(a===s){ue=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ue=E;break e}ue=a.return}}if(We=i,Qs(),Ki&&typeof Ki.onPostCommitFiberRoot=="function")try{Ki.onPostCommitFiberRoot(np,t)}catch{}r=!0}return r}finally{Je=n,Ur.transition=e}}return!1}function BI(t,e,n){e=el(n,e),e=kA(t,e,1),t=Bs(t,e,1),e=Fn(),t!==null&&(gd(t,1,e),rr(t,e))}function Rt(t,e,n){if(t.tag===3)BI(t,t,n);else for(;e!==null;){if(e.tag===3){BI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fs===null||!Fs.has(r))){t=el(n,t),t=EA(e,t,1),e=Bs(e,t,1),t=Fn(),e!==null&&(gd(e,1,t),rr(e,t));break}}e=e.return}}function Z_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Fn(),t.pingedLanes|=t.suspendedLanes&n,tn===t&&(un&n)===n&&(jt===4||jt===3&&(un&130023424)===un&&500>Dt()-iy?Aa(t,0):ry|=n),rr(t,e)}function HA(t,e){e===0&&(t.mode&1?(e=Gd,Gd<<=1,!(Gd&130023424)&&(Gd=4194304)):e=1);var n=Fn();t=Ho(t,e),t!==null&&(gd(t,e,n),rr(t,n))}function j_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),HA(t,n)}function z_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),HA(t,n)}var XA;XA=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||tr.current)qn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return qn=!1,__(t,e,n);qn=!!(t.flags&131072)}else qn=!1,St&&e.flags&1048576&&J1(e,af,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ch(t,e),t=e.pendingProps;var i=Jc(e,En.current);_c(e,n),i=Y0(null,e,r,t,i,n);var o=Q0();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,nr(r)?(o=!0,of(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,H0(e),i.updater=cp,e.stateNode=i,i._reactInternals=e,Lm(e,r,t,n),e=Um(null,e,r,!0,o,n)):(e.tag=0,St&&o&&U0(e),Nn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ch(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=X_(r),t=$r(r,t),i){case 0:e=Fm(null,e,r,t,n);break e;case 1:e=TI(null,e,r,t,n);break e;case 11:e=kI(null,e,r,t,n);break e;case 14:e=EI(null,e,r,$r(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),Fm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),TI(t,e,r,i,n);case 3:e:{if(PA(e),t===null)throw Error(oe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,eA(t,e),uf(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=el(Error(oe(423)),e),e=xI(t,e,r,n,i);break e}else if(r!==i){i=el(Error(oe(424)),e),e=xI(t,e,r,n,i);break e}else for(br=Ls(e.stateNode.containerInfo.firstChild),Ar=e,St=!0,si=null,n=iA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Yc(),r===i){e=Xo(t,e,n);break e}Nn(t,e,r,n)}e=e.child}return e;case 5:return oA(e),t===null&&Mm(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,xm(r,i)?s=null:o!==null&&xm(r,o)&&(e.flags|=32),RA(t,e),Nn(t,e,s,n),e.child;case 6:return t===null&&Mm(e),null;case 13:return NA(t,e,n);case 4:return X0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Qc(e,null,r,n):Nn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),kI(t,e,r,i,n);case 7:return Nn(t,e,e.pendingProps,n),e.child;case 8:return Nn(t,e,e.pendingProps.children,n),e.child;case 12:return Nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ut(cf,r._currentValue),r._currentValue=s,o!==null)if(vi(o.value,s)){if(o.children===i.children&&!tr.current){e=Xo(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Vo(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Om(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(oe(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Om(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Nn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_c(e,n),i=Vr(i),r=r(i),e.flags|=1,Nn(t,e,r,n),e.child;case 14:return r=e.type,i=$r(r,e.pendingProps),i=$r(r.type,i),EI(t,e,r,i,n);case 15:return TA(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:$r(r,i),Ch(t,e),e.tag=1,nr(r)?(t=!0,of(e)):t=!1,_c(e,n),nA(e,r,i),Lm(e,r,i,n),Um(null,e,r,!0,t,n);case 19:return _A(t,e,n);case 22:return xA(t,e,n)}throw Error(oe(156,e.tag))};function $A(t,e){return I1(t,e)}function H_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(t,e,n,r){return new H_(t,e,n,r)}function cy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X_(t){if(typeof t=="function")return cy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===T0)return 11;if(t===x0)return 14}return 2}function Vs(t,e){var n=t.alternate;return n===null?(n=Lr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function bh(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")cy(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case uc:return ka(n.children,i,o,e);case E0:s=8,i|=8;break;case sm:return t=Lr(12,n,e,i|2),t.elementType=sm,t.lanes=o,t;case am:return t=Lr(13,n,e,i),t.elementType=am,t.lanes=o,t;case cm:return t=Lr(19,n,e,i),t.elementType=cm,t.lanes=o,t;case r1:return hp(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case t1:s=10;break e;case n1:s=9;break e;case T0:s=11;break e;case x0:s=14;break e;case vs:s=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=Lr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function ka(t,e,n,r){return t=Lr(7,t,r,e),t.lanes=n,t}function hp(t,e,n,r){return t=Lr(22,t,r,e),t.elementType=r1,t.lanes=n,t.stateNode={isHidden:!1},t}function Cg(t,e,n){return t=Lr(6,t,null,e),t.lanes=n,t}function Ig(t,e,n){return e=Lr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eg(0),this.expirationTimes=eg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ly(t,e,n,r,i,o,s,a,c){return t=new $_(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Lr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},H0(o),t}function K_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:lc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function KA(t){if(!t)return Hs;t=t._reactInternals;e:{if(za(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(nr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(nr(n))return $1(t,n,e)}return e}function JA(t,e,n,r,i,o,s,a,c){return t=ly(n,r,!0,t,i,o,s,a,c),t.context=KA(null),n=t.current,r=Fn(),i=Us(n),o=Vo(r,i),o.callback=e??null,Bs(n,o,i),t.current.lanes=i,gd(t,i,r),rr(t,r),t}function fp(t,e,n,r){var i=e.current,o=Fn(),s=Us(i);return n=KA(n),e.context===null?e.context=n:e.pendingContext=n,e=Vo(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Bs(i,e,s),t!==null&&(gi(t,i,s,o),mh(t,i,s)),s}function yf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function FI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function uy(t,e){FI(t,e),(t=t.alternate)&&FI(t,e)}function J_(){return null}var YA=typeof reportError=="function"?reportError:function(t){console.error(t)};function dy(t){this._internalRoot=t}pp.prototype.render=dy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));fp(t,e,null,null)};pp.prototype.unmount=dy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Oa(function(){fp(null,t,null,null)}),e[zo]=null}};function pp(t){this._internalRoot=t}pp.prototype.unstable_scheduleHydration=function(t){if(t){var e=T1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Is.length&&e!==0&&e<Is[n].priority;n++);Is.splice(n,0,t),n===0&&R1(t)}};function hy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function UI(){}function Y_(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=yf(s);o.call(l)}}var s=JA(e,r,t,0,null,!1,!1,"",UI);return t._reactRootContainer=s,t[zo]=s.current,Du(t.nodeType===8?t.parentNode:t),Oa(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=yf(c);a.call(l)}}var c=ly(t,0,!1,null,null,!1,!1,"",UI);return t._reactRootContainer=c,t[zo]=c.current,Du(t.nodeType===8?t.parentNode:t),Oa(function(){fp(e,c,n,r)}),c}function mp(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=yf(s);a.call(c)}}fp(e,s,t,i)}else s=Y_(n,e,t,i,r);return yf(s)}k1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ql(e.pendingLanes);n!==0&&(N0(e,n|1),rr(e,Dt()),!(We&6)&&(tl=Dt()+500,Qs()))}break;case 13:Oa(function(){var r=Ho(t,1);if(r!==null){var i=Fn();gi(r,t,1,i)}}),uy(t,1)}};_0=function(t){if(t.tag===13){var e=Ho(t,134217728);if(e!==null){var n=Fn();gi(e,t,134217728,n)}uy(t,134217728)}};E1=function(t){if(t.tag===13){var e=Us(t),n=Ho(t,e);if(n!==null){var r=Fn();gi(n,t,e,r)}uy(t,e)}};T1=function(){return Je};x1=function(t,e){var n=Je;try{return Je=t,e()}finally{Je=n}};ym=function(t,e,n){switch(e){case"input":if(dm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=sp(r);if(!i)throw Error(oe(90));o1(r),dm(r,i)}}}break;case"textarea":a1(t,n);break;case"select":e=n.value,e!=null&&xc(t,!!n.multiple,e,!1)}};p1=oy;g1=Oa;var Q_={usingClientEntryPoint:!1,Events:[vd,pc,sp,h1,f1,oy]},Bl={findFiberByHostInstance:pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},q_={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:es.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y1(t),t===null?null:t.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||J_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qd.isDisabled&&Qd.supportsFiber)try{np=Qd.inject(q_),Ki=Qd}catch{}}xr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q_;xr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hy(e))throw Error(oe(200));return K_(t,e,null,n)};xr.createRoot=function(t,e){if(!hy(t))throw Error(oe(299));var n=!1,r="",i=YA;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ly(t,1,!1,null,null,n,!1,r,i),t[zo]=e.current,Du(t.nodeType===8?t.parentNode:t),new dy(e)};xr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=y1(e),t=t===null?null:t.stateNode,t};xr.flushSync=function(t){return Oa(t)};xr.hydrate=function(t,e,n){if(!gp(e))throw Error(oe(200));return mp(null,t,e,!0,n)};xr.hydrateRoot=function(t,e,n){if(!hy(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=YA;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=JA(e,null,t,1,n??null,i,!1,o,s),t[zo]=e.current,Du(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new pp(e)};xr.render=function(t,e,n){if(!gp(e))throw Error(oe(200));return mp(null,t,e,!1,n)};xr.unmountComponentAtNode=function(t){if(!gp(t))throw Error(oe(40));return t._reactRootContainer?(Oa(function(){mp(null,null,t,!1,function(){t._reactRootContainer=null,t[zo]=null})}),!0):!1};xr.unstable_batchedUpdates=oy;xr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!gp(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return mp(t,e,n,!1,r)};xr.version="18.2.0-next-9e3b772b8-20220608";function QA(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(QA)}catch(t){console.error(t)}}QA(),Jw.exports=xr;var fy=Jw.exports;const eM=fd(fy),tM=Uw({__proto__:null,default:eM},[fy]);var VI=fy;im.createRoot=VI.createRoot,im.hydrateRoot=VI.hydrateRoot;/**
 * @remix-run/router v1.15.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Pt(){return Pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Pt.apply(this,arguments)}var _t;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_t||(_t={}));const GI="popstate";function nM(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return ju("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Cd(i)}return iM(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rM(){return Math.random().toString(36).substr(2,8)}function WI(t,e){return{usr:t.state,key:t.key,idx:e}}function ju(t,e,n,r){return n===void 0&&(n=null),Pt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ts(e):e,{state:n,key:e&&e.key||r||rM()})}function Cd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ts(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iM(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=_t.Pop,c=null,l=u();l==null&&(l=0,s.replaceState(Pt({},s.state,{idx:l}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=_t.Pop;let C=u(),p=C==null?null:C-l;l=C,c&&c({action:a,location:m.location,delta:p})}function h(C,p){a=_t.Push;let v=ju(m.location,C,p);n&&n(v,C),l=u()+1;let S=WI(v,l),E=m.createHref(v);try{s.pushState(S,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(E)}o&&c&&c({action:a,location:m.location,delta:1})}function f(C,p){a=_t.Replace;let v=ju(m.location,C,p);n&&n(v,C),l=u();let S=WI(v,l),E=m.createHref(v);s.replaceState(S,"",E),o&&c&&c({action:a,location:m.location,delta:0})}function g(C){let p=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof C=="string"?C:Cd(C);return v=v.replace(/ $/,"%20"),Ge(p,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,p)}let m={get action(){return a},get location(){return t(i,s)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(GI,d),c=C,()=>{i.removeEventListener(GI,d),c=null}},createHref(C){return e(i,C)},createURL:g,encodeLocation(C){let p=g(C);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(C){return s.go(C)}};return m}var xt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(xt||(xt={}));const oM=new Set(["lazy","caseSensitive","path","id","index","children"]);function sM(t){return t.index===!0}function Ym(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,o],a=typeof i.id=="string"?i.id:s.join("-");if(Ge(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ge(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),sM(i)){let c=Pt({},i,e(i),{id:a});return r[a]=c,c}else{let c=Pt({},i,e(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=Ym(i.children,e,s,r)),c}})}function Sc(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?ts(e):e,i=Id(r.pathname||"/",n);if(i==null)return null;let o=qA(t);cM(o);let s=null;for(let a=0;s==null&&a<o.length;++a){let c=IM(i);s=vM(o[a],c)}return s}function aM(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function qA(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=Ea([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(Ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),qA(o.children,e,u,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:gM(l,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let c of ek(o.path))i(o,s,c)}),e}function ek(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=ek(r.join("/")),a=[];return a.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...s),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function cM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:mM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const lM=/^:[\w-]+$/,uM=3,dM=2,hM=1,fM=10,pM=-2,ZI=t=>t==="*";function gM(t,e){let n=t.split("/"),r=n.length;return n.some(ZI)&&(r+=pM),e&&(r+=dM),n.filter(i=>!ZI(i)).reduce((i,o)=>i+(lM.test(o)?uM:o===""?hM:fM),r)}function mM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function vM(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let a=n[s],c=s===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",u=yM({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},l);if(!u)return null;Object.assign(r,u.params);let d=a.route;o.push({params:r,pathname:Ea([i,u.pathname]),pathnameBase:kM(Ea([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Ea([i,u.pathnameBase]))}return o}function yM(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=CM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=a[d]||"";s=o.slice(0,o.length-m.length).replace(/(.)\/+$/,"$1")}const g=a[d];return f&&!g?l[h]=void 0:l[h]=(g||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:t}}function CM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function IM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Id(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function SM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ts(t):t;return{pathname:n?n.startsWith("/")?n:bM(n,e):e,search:EM(r),hash:TM(i)}}function bM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Sg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function tk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function wM(t,e){let n=tk(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function AM(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ts(t):(i=Pt({},t),Ge(!i.pathname||!i.pathname.includes("?"),Sg("?","pathname","search",i)),Ge(!i.pathname||!i.pathname.includes("#"),Sg("#","pathname","hash",i)),Ge(!i.search||!i.search.includes("#"),Sg("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=SM(i,a),l=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const Ea=t=>t.join("/").replace(/\/\/+/g,"/"),kM=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),EM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class py{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function nk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const rk=["post","put","patch","delete"],xM=new Set(rk),RM=["get",...rk],PM=new Set(RM),NM=new Set([301,302,303,307,308]),_M=new Set([307,308]),bg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},MM={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Fl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ik=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,OM=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),ok="remix-router-transitions";function DM(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ge(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let L=t.detectErrorBoundary;i=G=>({hasErrorBoundary:L(G)})}else i=OM;let o={},s=Ym(t.routes,i,void 0,o),a,c=t.basename||"/",l=Pt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),u=null,d=new Set,h=null,f=null,g=null,m=t.hydrationData!=null,C=Sc(s,t.history.location,c),p=null;if(C==null){let L=_r(404,{pathname:t.history.location.pathname}),{matches:G,route:J}=YI(s);C=G,p={[J.id]:L}}let v,S=C.some(L=>L.route.lazy),E=C.some(L=>L.route.loader);if(S)v=!1;else if(!E)v=!0;else if(l.v7_partialHydration){let L=t.hydrationData?t.hydrationData.loaderData:null,G=t.hydrationData?t.hydrationData.errors:null,J=se=>se.route.loader?se.route.loader.hydrate===!0?!1:L&&L[se.route.id]!==void 0||G&&G[se.route.id]!==void 0:!0;if(G){let se=C.findIndex(ge=>G[ge.route.id]!==void 0);v=C.slice(0,se+1).every(J)}else v=C.every(J)}else v=t.hydrationData!=null;let w,A={historyAction:t.history.action,location:t.history.location,matches:C,initialized:v,navigation:bg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||p,fetchers:new Map,blockers:new Map},T=_t.Pop,x=!1,_,M=!1,D=new Map,F=null,W=!1,j=!1,H=[],q=[],te=new Map,z=0,Y=-1,ie=new Map,Z=new Set,ne=new Map,Ee=new Map,xe=new Set,me=new Map,Ae=new Map,Xe=!1;function he(){if(u=t.history.listen(L=>{let{action:G,location:J,delta:se}=L;if(Xe){Xe=!1;return}nl(Ae.size===0||se!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=tt({currentLocation:A.location,nextLocation:J,historyAction:G});if(ge&&se!=null){Xe=!0,t.history.go(se*-1),et(ge,{state:"blocked",location:J,proceed(){et(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),t.history.go(se)},reset(){let De=new Map(A.blockers);De.set(ge,Fl),Ct({blockers:De})}});return}return ae(G,J)}),n){HM(e,D);let L=()=>XM(e,D);e.addEventListener("pagehide",L),F=()=>e.removeEventListener("pagehide",L)}return A.initialized||ae(_t.Pop,A.location,{initialHydration:!0}),w}function xn(){u&&u(),F&&F(),d.clear(),_&&_.abort(),A.fetchers.forEach((L,G)=>k(G)),A.blockers.forEach((L,G)=>Pe(G))}function jn(L){return d.add(L),()=>d.delete(L)}function Ct(L,G){G===void 0&&(G={}),A=Pt({},A,L);let J=[],se=[];l.v7_fetcherPersist&&A.fetchers.forEach((ge,De)=>{ge.state==="idle"&&(xe.has(De)?se.push(De):J.push(De))}),[...d].forEach(ge=>ge(A,{deletedFetchers:se,unstable_viewTransitionOpts:G.viewTransitionOpts,unstable_flushSync:G.flushSync===!0})),l.v7_fetcherPersist&&(J.forEach(ge=>A.fetchers.delete(ge)),se.forEach(ge=>k(ge)))}function $t(L,G,J){var se,ge;let{flushSync:De}=J===void 0?{}:J,we=A.actionData!=null&&A.navigation.formMethod!=null&&ii(A.navigation.formMethod)&&A.navigation.state==="loading"&&((se=L.state)==null?void 0:se._isRedirect)!==!0,Se;G.actionData?Object.keys(G.actionData).length>0?Se=G.actionData:Se=null:we?Se=A.actionData:Se=null;let Ce=G.loaderData?JI(A.loaderData,G.loaderData,G.matches||[],G.errors):A.loaderData,Ue=A.blockers;Ue.size>0&&(Ue=new Map(Ue),Ue.forEach((st,nn)=>Ue.set(nn,Fl)));let Kt=x===!0||A.navigation.formMethod!=null&&ii(A.navigation.formMethod)&&((ge=L.state)==null?void 0:ge._isRedirect)!==!0;a&&(s=a,a=void 0),W||T===_t.Pop||(T===_t.Push?t.history.push(L,L.state):T===_t.Replace&&t.history.replace(L,L.state));let Me;if(T===_t.Pop){let st=D.get(A.location.pathname);st&&st.has(L.pathname)?Me={currentLocation:A.location,nextLocation:L}:D.has(L.pathname)&&(Me={currentLocation:L,nextLocation:A.location})}else if(M){let st=D.get(A.location.pathname);st?st.add(L.pathname):(st=new Set([L.pathname]),D.set(A.location.pathname,st)),Me={currentLocation:A.location,nextLocation:L}}Ct(Pt({},G,{actionData:Se,loaderData:Ce,historyAction:T,location:L,initialized:!0,navigation:bg,revalidation:"idle",restoreScrollPosition:NC(L,G.matches||A.matches),preventScrollReset:Kt,blockers:Ue}),{viewTransitionOpts:Me,flushSync:De===!0}),T=_t.Pop,x=!1,M=!1,W=!1,j=!1,H=[],q=[]}async function ar(L,G){if(typeof L=="number"){t.history.go(L);return}let J=Qm(A.location,A.matches,c,l.v7_prependBasename,L,l.v7_relativeSplatPath,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:se,submission:ge,error:De}=jI(l.v7_normalizeFormMethod,!1,J,G),we=A.location,Se=ju(A.location,se,G&&G.state);Se=Pt({},Se,t.history.encodeLocation(Se));let Ce=G&&G.replace!=null?G.replace:void 0,Ue=_t.Push;Ce===!0?Ue=_t.Replace:Ce===!1||ge!=null&&ii(ge.formMethod)&&ge.formAction===A.location.pathname+A.location.search&&(Ue=_t.Replace);let Kt=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,Me=(G&&G.unstable_flushSync)===!0,st=tt({currentLocation:we,nextLocation:Se,historyAction:Ue});if(st){et(st,{state:"blocked",location:Se,proceed(){et(st,{state:"proceeding",proceed:void 0,reset:void 0,location:Se}),ar(L,G)},reset(){let nn=new Map(A.blockers);nn.set(st,Fl),Ct({blockers:nn})}});return}return await ae(Ue,Se,{submission:ge,pendingError:De,preventScrollReset:Kt,replace:G&&G.replace,enableViewTransition:G&&G.unstable_viewTransition,flushSync:Me})}function jr(){if(cr(),Ct({revalidation:"loading"}),A.navigation.state!=="submitting"){if(A.navigation.state==="idle"){ae(A.historyAction,A.location,{startUninterruptedRevalidation:!0});return}ae(T||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation})}}async function ae(L,G,J){_&&_.abort(),_=null,T=L,W=(J&&J.startUninterruptedRevalidation)===!0,wP(A.location,A.matches),x=(J&&J.preventScrollReset)===!0,M=(J&&J.enableViewTransition)===!0;let se=a||s,ge=J&&J.overrideNavigation,De=Sc(se,G,c),we=(J&&J.flushSync)===!0;if(!De){let nn=_r(404,{pathname:G.pathname}),{matches:lr,route:Jt}=YI(se);ot(),$t(G,{matches:lr,loaderData:{},errors:{[Jt.id]:nn}},{flushSync:we});return}if(A.initialized&&!j&&VM(A.location,G)&&!(J&&J.submission&&ii(J.submission.formMethod))){$t(G,{matches:De},{flushSync:we});return}_=new AbortController;let Se=Vl(t.history,G,_.signal,J&&J.submission),Ce,Ue;if(J&&J.pendingError)Ue={[Cu(De).route.id]:J.pendingError};else if(J&&J.submission&&ii(J.submission.formMethod)){let nn=await pe(Se,G,J.submission,De,{replace:J.replace,flushSync:we});if(nn.shortCircuited)return;Ce=nn.pendingActionData,Ue=nn.pendingActionError,ge=wg(G,J.submission),we=!1,Se=new Request(Se.url,{signal:Se.signal})}let{shortCircuited:Kt,loaderData:Me,errors:st}=await Ze(Se,G,De,ge,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,we,Ce,Ue);Kt||(_=null,$t(G,Pt({matches:De},Ce?{actionData:Ce}:{},{loaderData:Me,errors:st})))}async function pe(L,G,J,se,ge){ge===void 0&&(ge={}),cr();let De=jM(G,J);Ct({navigation:De},{flushSync:ge.flushSync===!0});let we,Se=ev(se,G);if(!Se.route.action&&!Se.route.lazy)we={type:xt.error,error:_r(405,{method:L.method,pathname:G.pathname,routeId:Se.route.id})};else if(we=await Ul("action",L,Se,se,o,i,c,l.v7_relativeSplatPath),L.signal.aborted)return{shortCircuited:!0};if(ya(we)){let Ce;return ge&&ge.replace!=null?Ce=ge.replace:Ce=we.location===A.location.pathname+A.location.search,await bt(A,we,{submission:J,replace:Ce}),{shortCircuited:!0}}if(bc(we)){let Ce=Cu(se,Se.route.id);return(ge&&ge.replace)!==!0&&(T=_t.Push),{pendingActionData:{},pendingActionError:{[Ce.route.id]:we.error}}}if(va(we))throw _r(400,{type:"defer-action"});return{pendingActionData:{[Se.route.id]:we.data}}}async function Ze(L,G,J,se,ge,De,we,Se,Ce,Ue,Kt){let Me=se||wg(G,ge),st=ge||De||eS(Me),nn=a||s,[lr,Jt]=zI(t.history,A,J,st,G,l.v7_partialHydration&&Se===!0,j,H,q,xe,ne,Z,nn,c,Ue,Kt);if(ot(ze=>!(J&&J.some(Ye=>Ye.route.id===ze))||lr&&lr.some(Ye=>Ye.route.id===ze)),Y=++z,lr.length===0&&Jt.length===0){let ze=O();return $t(G,Pt({matches:J,loaderData:{},errors:Kt||null},Ue?{actionData:Ue}:{},ze?{fetchers:new Map(A.fetchers)}:{}),{flushSync:Ce}),{shortCircuited:!0}}if(!W&&(!l.v7_partialHydration||!Se)){Jt.forEach(Ye=>{let Hn=A.fetchers.get(Ye.key),Od=Gl(void 0,Hn?Hn.data:void 0);A.fetchers.set(Ye.key,Od)});let ze=Ue||A.actionData;Ct(Pt({navigation:Me},ze?Object.keys(ze).length===0?{actionData:null}:{actionData:ze}:{},Jt.length>0?{fetchers:new Map(A.fetchers)}:{}),{flushSync:Ce})}Jt.forEach(ze=>{te.has(ze.key)&&I(ze.key),ze.controller&&te.set(ze.key,ze.controller)});let qa=()=>Jt.forEach(ze=>I(ze.key));_&&_.signal.addEventListener("abort",qa);let{results:zp,loaderResults:ec,fetcherResults:ss}=await Et(A.matches,J,lr,Jt,L);if(L.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",qa),Jt.forEach(ze=>te.delete(ze.key));let oa=QI(zp);if(oa){if(oa.idx>=lr.length){let ze=Jt[oa.idx-lr.length].key;Z.add(ze)}return await bt(A,oa.result,{replace:we}),{shortCircuited:!0}}let{loaderData:Hp,errors:Rl}=KI(A,J,lr,ec,Kt,Jt,ss,me);me.forEach((ze,Ye)=>{ze.subscribe(Hn=>{(Hn||ze.done)&&me.delete(Ye)})}),l.v7_partialHydration&&Se&&A.errors&&Object.entries(A.errors).filter(ze=>{let[Ye]=ze;return!lr.some(Hn=>Hn.route.id===Ye)}).forEach(ze=>{let[Ye,Hn]=ze;Rl=Object.assign(Rl||{},{[Ye]:Hn})});let Xp=O(),tc=V(Y),Md=Xp||tc||Jt.length>0;return Pt({loaderData:Hp,errors:Rl},Md?{fetchers:new Map(A.fetchers)}:{})}function Ve(L,G,J,se){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");te.has(L)&&I(L);let ge=(se&&se.unstable_flushSync)===!0,De=a||s,we=Qm(A.location,A.matches,c,l.v7_prependBasename,J,l.v7_relativeSplatPath,G,se==null?void 0:se.relative),Se=Sc(De,we,c);if(!Se){yn(L,G,_r(404,{pathname:we}),{flushSync:ge});return}let{path:Ce,submission:Ue,error:Kt}=jI(l.v7_normalizeFormMethod,!0,we,se);if(Kt){yn(L,G,Kt,{flushSync:ge});return}let Me=ev(Se,Ce);if(x=(se&&se.preventScrollReset)===!0,Ue&&ii(Ue.formMethod)){Te(L,G,Ce,Me,Se,ge,Ue);return}ne.set(L,{routeId:G,path:Ce}),He(L,G,Ce,Me,Se,ge,Ue)}async function Te(L,G,J,se,ge,De,we){if(cr(),ne.delete(L),!se.route.action&&!se.route.lazy){let Ye=_r(405,{method:we.formMethod,pathname:J,routeId:G});yn(L,G,Ye,{flushSync:De});return}let Se=A.fetchers.get(L);zn(L,zM(we,Se),{flushSync:De});let Ce=new AbortController,Ue=Vl(t.history,J,Ce.signal,we);te.set(L,Ce);let Kt=z,Me=await Ul("action",Ue,se,ge,o,i,c,l.v7_relativeSplatPath);if(Ue.signal.aborted){te.get(L)===Ce&&te.delete(L);return}if(l.v7_fetcherPersist&&xe.has(L)){if(ya(Me)||bc(Me)){zn(L,ds(void 0));return}}else{if(ya(Me))if(te.delete(L),Y>Kt){zn(L,ds(void 0));return}else return Z.add(L),zn(L,Gl(we)),bt(A,Me,{fetcherSubmission:we});if(bc(Me)){yn(L,G,Me.error);return}}if(va(Me))throw _r(400,{type:"defer-action"});let st=A.navigation.location||A.location,nn=Vl(t.history,st,Ce.signal),lr=a||s,Jt=A.navigation.state!=="idle"?Sc(lr,A.navigation.location,c):A.matches;Ge(Jt,"Didn't find any matches after fetcher action");let qa=++z;ie.set(L,qa);let zp=Gl(we,Me.data);A.fetchers.set(L,zp);let[ec,ss]=zI(t.history,A,Jt,we,st,!1,j,H,q,xe,ne,Z,lr,c,{[se.route.id]:Me.data},void 0);ss.filter(Ye=>Ye.key!==L).forEach(Ye=>{let Hn=Ye.key,Od=A.fetchers.get(Hn),kP=Gl(void 0,Od?Od.data:void 0);A.fetchers.set(Hn,kP),te.has(Hn)&&I(Hn),Ye.controller&&te.set(Hn,Ye.controller)}),Ct({fetchers:new Map(A.fetchers)});let oa=()=>ss.forEach(Ye=>I(Ye.key));Ce.signal.addEventListener("abort",oa);let{results:Hp,loaderResults:Rl,fetcherResults:Xp}=await Et(A.matches,Jt,ec,ss,nn);if(Ce.signal.aborted)return;Ce.signal.removeEventListener("abort",oa),ie.delete(L),te.delete(L),ss.forEach(Ye=>te.delete(Ye.key));let tc=QI(Hp);if(tc){if(tc.idx>=ec.length){let Ye=ss[tc.idx-ec.length].key;Z.add(Ye)}return bt(A,tc.result)}let{loaderData:Md,errors:ze}=KI(A,A.matches,ec,Rl,void 0,ss,Xp,me);if(A.fetchers.has(L)){let Ye=ds(Me.data);A.fetchers.set(L,Ye)}V(qa),A.navigation.state==="loading"&&qa>Y?(Ge(T,"Expected pending action"),_&&_.abort(),$t(A.navigation.location,{matches:Jt,loaderData:Md,errors:ze,fetchers:new Map(A.fetchers)})):(Ct({errors:ze,loaderData:JI(A.loaderData,Md,Jt,ze),fetchers:new Map(A.fetchers)}),j=!1)}async function He(L,G,J,se,ge,De,we){let Se=A.fetchers.get(L);zn(L,Gl(we,Se?Se.data:void 0),{flushSync:De});let Ce=new AbortController,Ue=Vl(t.history,J,Ce.signal);te.set(L,Ce);let Kt=z,Me=await Ul("loader",Ue,se,ge,o,i,c,l.v7_relativeSplatPath);if(va(Me)&&(Me=await ck(Me,Ue.signal,!0)||Me),te.get(L)===Ce&&te.delete(L),!Ue.signal.aborted){if(xe.has(L)){zn(L,ds(void 0));return}if(ya(Me))if(Y>Kt){zn(L,ds(void 0));return}else{Z.add(L),await bt(A,Me);return}if(bc(Me)){yn(L,G,Me.error);return}Ge(!va(Me),"Unhandled fetcher deferred data"),zn(L,ds(Me.data))}}async function bt(L,G,J){let{submission:se,fetcherSubmission:ge,replace:De}=J===void 0?{}:J;G.revalidate&&(j=!0);let we=ju(L.location,G.location,{_isRedirect:!0});if(Ge(we,"Expected a location on the redirect navigation"),n){let st=!1;if(G.reloadDocument)st=!0;else if(ik.test(G.location)){const nn=t.history.createURL(G.location);st=nn.origin!==e.location.origin||Id(nn.pathname,c)==null}if(st){De?e.location.replace(G.location):e.location.assign(G.location);return}}_=null;let Se=De===!0?_t.Replace:_t.Push,{formMethod:Ce,formAction:Ue,formEncType:Kt}=L.navigation;!se&&!ge&&Ce&&Ue&&Kt&&(se=eS(L.navigation));let Me=se||ge;if(_M.has(G.status)&&Me&&ii(Me.formMethod))await ae(Se,we,{submission:Pt({},Me,{formAction:G.location}),preventScrollReset:x});else{let st=wg(we,se);await ae(Se,we,{overrideNavigation:st,fetcherSubmission:ge,preventScrollReset:x})}}async function Et(L,G,J,se,ge){let De=await Promise.all([...J.map(Ce=>Ul("loader",ge,Ce,G,o,i,c,l.v7_relativeSplatPath)),...se.map(Ce=>Ce.matches&&Ce.match&&Ce.controller?Ul("loader",Vl(t.history,Ce.path,Ce.controller.signal),Ce.match,Ce.matches,o,i,c,l.v7_relativeSplatPath):{type:xt.error,error:_r(404,{pathname:Ce.path})})]),we=De.slice(0,J.length),Se=De.slice(J.length);return await Promise.all([qI(L,J,we,we.map(()=>ge.signal),!1,A.loaderData),qI(L,se.map(Ce=>Ce.match),Se,se.map(Ce=>Ce.controller?Ce.controller.signal:null),!0)]),{results:De,loaderResults:we,fetcherResults:Se}}function cr(){j=!0,H.push(...ot()),ne.forEach((L,G)=>{te.has(G)&&(q.push(G),I(G))})}function zn(L,G,J){J===void 0&&(J={}),A.fetchers.set(L,G),Ct({fetchers:new Map(A.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function yn(L,G,J,se){se===void 0&&(se={});let ge=Cu(A.matches,G);k(L),Ct({errors:{[ge.route.id]:J},fetchers:new Map(A.fetchers)},{flushSync:(se&&se.flushSync)===!0})}function Qa(L){return l.v7_fetcherPersist&&(Ee.set(L,(Ee.get(L)||0)+1),xe.has(L)&&xe.delete(L)),A.fetchers.get(L)||MM}function k(L){let G=A.fetchers.get(L);te.has(L)&&!(G&&G.state==="loading"&&ie.has(L))&&I(L),ne.delete(L),ie.delete(L),Z.delete(L),xe.delete(L),A.fetchers.delete(L)}function y(L){if(l.v7_fetcherPersist){let G=(Ee.get(L)||0)-1;G<=0?(Ee.delete(L),xe.add(L)):Ee.set(L,G)}else k(L);Ct({fetchers:new Map(A.fetchers)})}function I(L){let G=te.get(L);Ge(G,"Expected fetch controller: "+L),G.abort(),te.delete(L)}function P(L){for(let G of L){let J=Qa(G),se=ds(J.data);A.fetchers.set(G,se)}}function O(){let L=[],G=!1;for(let J of Z){let se=A.fetchers.get(J);Ge(se,"Expected fetcher: "+J),se.state==="loading"&&(Z.delete(J),L.push(J),G=!0)}return P(L),G}function V(L){let G=[];for(let[J,se]of ie)if(se<L){let ge=A.fetchers.get(J);Ge(ge,"Expected fetcher: "+J),ge.state==="loading"&&(I(J),ie.delete(J),G.push(J))}return P(G),G.length>0}function K(L,G){let J=A.blockers.get(L)||Fl;return Ae.get(L)!==G&&Ae.set(L,G),J}function Pe(L){A.blockers.delete(L),Ae.delete(L)}function et(L,G){let J=A.blockers.get(L)||Fl;Ge(J.state==="unblocked"&&G.state==="blocked"||J.state==="blocked"&&G.state==="blocked"||J.state==="blocked"&&G.state==="proceeding"||J.state==="blocked"&&G.state==="unblocked"||J.state==="proceeding"&&G.state==="unblocked","Invalid blocker state transition: "+J.state+" -> "+G.state);let se=new Map(A.blockers);se.set(L,G),Ct({blockers:se})}function tt(L){let{currentLocation:G,nextLocation:J,historyAction:se}=L;if(Ae.size===0)return;Ae.size>1&&nl(!1,"A router only supports one blocker at a time");let ge=Array.from(Ae.entries()),[De,we]=ge[ge.length-1],Se=A.blockers.get(De);if(!(Se&&Se.state==="proceeding")&&we({currentLocation:G,nextLocation:J,historyAction:se}))return De}function ot(L){let G=[];return me.forEach((J,se)=>{(!L||L(se))&&(J.cancel(),G.push(se),me.delete(se))}),G}function $e(L,G,J){if(h=L,g=G,f=J||null,!m&&A.navigation===bg){m=!0;let se=NC(A.location,A.matches);se!=null&&Ct({restoreScrollPosition:se})}return()=>{h=null,g=null,f=null}}function PC(L,G){return f&&f(L,G.map(se=>aM(se,A.loaderData)))||L.key}function wP(L,G){if(h&&g){let J=PC(L,G);h[J]=g()}}function NC(L,G){if(h){let J=PC(L,G),se=h[J];if(typeof se=="number")return se}return null}function AP(L){o={},a=Ym(L,i,void 0,o)}return w={get basename(){return c},get future(){return l},get state(){return A},get routes(){return s},get window(){return e},initialize:he,subscribe:jn,enableScrollRestoration:$e,navigate:ar,fetch:Ve,revalidate:jr,createHref:L=>t.history.createHref(L),encodeLocation:L=>t.history.encodeLocation(L),getFetcher:Qa,deleteFetcher:y,dispose:xn,getBlocker:K,deleteBlocker:Pe,_internalFetchControllers:te,_internalActiveDeferreds:me,_internalSetRoutes:AP},w}function LM(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Qm(t,e,n,r,i,o,s,a){let c,l;if(s){c=[];for(let d of e)if(c.push(d),d.route.id===s){l=d;break}}else c=e,l=e[e.length-1];let u=AM(i||".",wM(c,o),Id(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!gy(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Ea([n,u.pathname])),Cd(u)}function jI(t,e,n,r){if(!r||!LM(r))return{path:n};if(r.formMethod&&!ZM(r.formMethod))return{path:n,error:_r(405,{method:r.formMethod})};let i=()=>({path:n,error:_r(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),a=ak(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ii(s))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,g)=>{let[m,C]=g;return""+f+m+"="+C+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!ii(s))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}Ge(typeof FormData=="function","FormData is not available in this environment");let c,l;if(r.formData)c=qm(r.formData),l=r.formData;else if(r.body instanceof FormData)c=qm(r.body),l=r.body;else if(r.body instanceof URLSearchParams)c=r.body,l=$I(c);else if(r.body==null)c=new URLSearchParams,l=new FormData;else try{c=new URLSearchParams(r.body),l=$I(c)}catch{return i()}let u={formMethod:s,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(ii(u.formMethod))return{path:n,submission:u};let d=ts(n);return e&&d.search&&gy(d.search)&&c.append("index",""),d.search="?"+c,{path:Cd(d),submission:u}}function BM(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function zI(t,e,n,r,i,o,s,a,c,l,u,d,h,f,g,m){let C=m?Object.values(m)[0]:g?Object.values(g)[0]:void 0,p=t.createURL(e.location),v=t.createURL(i),S=m?Object.keys(m)[0]:void 0,w=BM(n,S).filter((T,x)=>{let{route:_}=T;if(_.lazy)return!0;if(_.loader==null)return!1;if(o)return _.loader.hydrate?!0:e.loaderData[_.id]===void 0&&(!e.errors||e.errors[_.id]===void 0);if(FM(e.loaderData,e.matches[x],T)||a.some(F=>F===T.route.id))return!0;let M=e.matches[x],D=T;return HI(T,Pt({currentUrl:p,currentParams:M.params,nextUrl:v,nextParams:D.params},r,{actionResult:C,defaultShouldRevalidate:s||p.pathname+p.search===v.pathname+v.search||p.search!==v.search||sk(M,D)}))}),A=[];return u.forEach((T,x)=>{if(o||!n.some(W=>W.route.id===T.routeId)||l.has(x))return;let _=Sc(h,T.path,f);if(!_){A.push({key:x,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let M=e.fetchers.get(x),D=ev(_,T.path),F=!1;d.has(x)?F=!1:c.includes(x)?F=!0:M&&M.state!=="idle"&&M.data===void 0?F=s:F=HI(D,Pt({currentUrl:p,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:C,defaultShouldRevalidate:s})),F&&A.push({key:x,routeId:T.routeId,path:T.path,matches:_,match:D,controller:new AbortController})}),[w,A]}function FM(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function sk(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function HI(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function XI(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ge(i,"No route found in manifest");let o={};for(let s in r){let c=i[s]!==void 0&&s!=="hasErrorBoundary";nl(!c,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!c&&!oM.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,Pt({},e(i),{lazy:void 0}))}async function Ul(t,e,n,r,i,o,s,a,c){c===void 0&&(c={});let l,u,d,h=m=>{let C,p=new Promise((v,S)=>C=S);return d=()=>C(),e.signal.addEventListener("abort",d),Promise.race([m({request:e,params:n.params,context:c.requestContext}),p])};try{let m=n.route[t];if(n.route.lazy)if(m){let C,p=await Promise.all([h(m).catch(v=>{C=v}),XI(n.route,o,i)]);if(C)throw C;u=p[0]}else if(await XI(n.route,o,i),m=n.route[t],m)u=await h(m);else if(t==="action"){let C=new URL(e.url),p=C.pathname+C.search;throw _r(405,{method:e.method,pathname:p,routeId:n.route.id})}else return{type:xt.data,data:void 0};else if(m)u=await h(m);else{let C=new URL(e.url),p=C.pathname+C.search;throw _r(404,{pathname:p})}Ge(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(m){l=xt.error,u=m}finally{d&&e.signal.removeEventListener("abort",d)}if(WM(u)){let m=u.status;if(NM.has(m)){let p=u.headers.get("Location");if(Ge(p,"Redirects returned/thrown from loaders/actions must have a Location header"),!ik.test(p))p=Qm(new URL(e.url),r.slice(0,r.indexOf(n)+1),s,!0,p,a);else if(!c.isStaticRequest){let v=new URL(e.url),S=p.startsWith("//")?new URL(v.protocol+p):new URL(p),E=Id(S.pathname,s)!=null;S.origin===v.origin&&E&&(p=S.pathname+S.search+S.hash)}if(c.isStaticRequest)throw u.headers.set("Location",p),u;return{type:xt.redirect,status:m,location:p,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(c.isRouteRequest)throw{type:l===xt.error?xt.error:xt.data,response:u};let C;try{let p=u.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?u.body==null?C=null:C=await u.json():C=await u.text()}catch(p){return{type:xt.error,error:p}}return l===xt.error?{type:l,error:new py(m,u.statusText,C),headers:u.headers}:{type:xt.data,data:C,statusCode:u.status,headers:u.headers}}if(l===xt.error)return{type:l,error:u};if(GM(u)){var f,g;return{type:xt.deferred,deferredData:u,statusCode:(f=u.init)==null?void 0:f.status,headers:((g=u.init)==null?void 0:g.headers)&&new Headers(u.init.headers)}}return{type:xt.data,data:u}}function Vl(t,e,n,r){let i=t.createURL(ak(e)).toString(),o={signal:n};if(r&&ii(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=qm(r.formData):o.body=r.formData}return new Request(i,o)}function qm(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function $I(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function UM(t,e,n,r,i){let o={},s=null,a,c=!1,l={};return n.forEach((u,d)=>{let h=e[d].route.id;if(Ge(!ya(u),"Cannot handle redirect results in processLoaderData"),bc(u)){let f=Cu(t,h),g=u.error;r&&(g=Object.values(r)[0],r=void 0),s=s||{},s[f.route.id]==null&&(s[f.route.id]=g),o[h]=void 0,c||(c=!0,a=nk(u.error)?u.error.status:500),u.headers&&(l[h]=u.headers)}else va(u)?(i.set(h,u.deferredData),o[h]=u.deferredData.data):o[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!c&&(a=u.statusCode),u.headers&&(l[h]=u.headers)}),r&&(s=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:l}}function KI(t,e,n,r,i,o,s,a){let{loaderData:c,errors:l}=UM(e,n,r,i,a);for(let u=0;u<o.length;u++){let{key:d,match:h,controller:f}=o[u];Ge(s!==void 0&&s[u]!==void 0,"Did not find corresponding fetcher result");let g=s[u];if(!(f&&f.signal.aborted))if(bc(g)){let m=Cu(t.matches,h==null?void 0:h.route.id);l&&l[m.route.id]||(l=Pt({},l,{[m.route.id]:g.error})),t.fetchers.delete(d)}else if(ya(g))Ge(!1,"Unhandled fetcher revalidation redirect");else if(va(g))Ge(!1,"Unhandled fetcher deferred data");else{let m=ds(g.data);t.fetchers.set(d,m)}}return{loaderData:c,errors:l}}function JI(t,e,n,r){let i=Pt({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function Cu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function YI(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function _r(t,e){let{pathname:n,routeId:r,method:i,type:o}=e===void 0?{}:e,s="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(s="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?a="defer() is not supported in actions":o==="invalid-body"&&(a="Unable to encode submission body")):t===403?(s="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(s="Not Found",a='No route matches URL "'+n+'"'):t===405&&(s="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new py(t||500,s,new Error(a),!0)}function QI(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(ya(n))return{result:n,idx:e}}}function ak(t){let e=typeof t=="string"?ts(t):t;return Cd(Pt({},e,{hash:""}))}function VM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function va(t){return t.type===xt.deferred}function bc(t){return t.type===xt.error}function ya(t){return(t&&t.type)===xt.redirect}function GM(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function WM(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function ZM(t){return PM.has(t.toLowerCase())}function ii(t){return xM.has(t.toLowerCase())}async function qI(t,e,n,r,i,o){for(let s=0;s<n.length;s++){let a=n[s],c=e[s];if(!c)continue;let l=t.find(d=>d.route.id===c.route.id),u=l!=null&&!sk(l,c)&&(o&&o[c.route.id])!==void 0;if(va(a)&&(i||u)){let d=r[s];Ge(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await ck(a,d,i).then(h=>{h&&(n[s]=h||n[s])})}}}async function ck(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:xt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:xt.error,error:i}}return{type:xt.data,data:t.deferredData.data}}}function gy(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ev(t,e){let n=typeof e=="string"?ts(e).search:e.search;if(t[t.length-1].route.index&&gy(n||""))return t[t.length-1];let r=tk(t);return r[r.length-1]}function eS(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function wg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function jM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Gl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function zM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ds(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function HM(t,e){try{let n=t.sessionStorage.getItem(ok);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function XM(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(ok,JSON.stringify(n))}catch(r){nl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(this,arguments)}const lk=b.createContext(null),uk=b.createContext(null),dk=b.createContext(null),vp=b.createContext(null),yp=b.createContext({outlet:null,matches:[],isDataRoute:!1}),hk=b.createContext(null);function my(){return b.useContext(vp)!=null}function fk(){return my()||Ge(!1),b.useContext(vp).location}function $M(t,e,n,r){my()||Ge(!1);let{navigator:i}=b.useContext(dk),{matches:o}=b.useContext(yp),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let l=fk(),u;if(e){var d;let C=typeof e=="string"?ts(e):e;c==="/"||(d=C.pathname)!=null&&d.startsWith(c)||Ge(!1),u=C}else u=l;let h=u.pathname||"/",f=h;if(c!=="/"){let C=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(C.length).join("/")}let g=Sc(t,{pathname:f}),m=qM(g&&g.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:Ea([c,i.encodeLocation?i.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Ea([c,i.encodeLocation?i.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),o,n,r);return e&&m?b.createElement(vp.Provider,{value:{location:Cf({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:_t.Pop}},m):m}function KM(){let t=rO(),e=nk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const JM=b.createElement(KM,null);class YM extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(yp.Provider,{value:this.props.routeContext},b.createElement(hk.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function QM(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(lk);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(yp.Provider,{value:e},r)}function qM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Ge(!1),s=s.slice(0,Math.min(s.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,g=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||g){c=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let f,g=!1,m=null,C=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||JM,c&&(l<0&&h===0?(iO("route-fallback",!1),g=!0,C=null):l===h&&(g=!0,C=d.route.hydrateFallbackElement||null)));let p=e.concat(s.slice(0,h+1)),v=()=>{let S;return f?S=m:g?S=C:d.route.Component?S=b.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,b.createElement(QM,{match:d,routeContext:{outlet:u,matches:p,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?b.createElement(YM,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:v(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):v()},null)}var tv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tv||{});function eO(t){let e=b.useContext(uk);return e||Ge(!1),e}function tO(t){let e=b.useContext(yp);return e||Ge(!1),e}function nO(t){let e=tO(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function rO(){var t;let e=b.useContext(hk),n=eO(tv.UseRouteError),r=nO(tv.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const tS={};function iO(t,e,n){!e&&!tS[t]&&(tS[t]=!0)}function oO(t){let{basename:e="/",children:n=null,location:r,navigationType:i=_t.Pop,navigator:o,static:s=!1,future:a}=t;my()&&Ge(!1);let c=e.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:c,navigator:o,static:s,future:Cf({v7_relativeSplatPath:!1},a)}),[c,a,o,s]);typeof r=="string"&&(r=ts(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:g="default"}=r,m=b.useMemo(()=>{let C=Id(u,c);return C==null?null:{location:{pathname:C,search:d,hash:h,state:f,key:g},navigationType:i}},[c,u,d,h,f,g,i]);return m==null?null:b.createElement(dk.Provider,{value:l},b.createElement(vp.Provider,{children:n,value:m}))}new Promise(()=>{});function sO(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:b.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:b.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:b.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},If.apply(this,arguments)}const aO="6";try{window.__reactRouterVersion=aO}catch{}function cO(t,e){return DM({basename:e==null?void 0:e.basename,future:If({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:nM({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||lO(),routes:t,mapRouteProperties:sO,window:e==null?void 0:e.window}).initialize()}function lO(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=If({},e,{errors:uO(e.errors)})),e}function uO(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new py(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const dO=b.createContext({isTransitioning:!1}),hO=b.createContext(new Map),fO="startTransition",nS=jP[fO],pO="flushSync",rS=tM[pO];function gO(t){nS?nS(t):t()}function Wl(t){rS?rS(t):t()}class mO{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function vO(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=b.useState(n.state),[s,a]=b.useState(),[c,l]=b.useState({isTransitioning:!1}),[u,d]=b.useState(),[h,f]=b.useState(),[g,m]=b.useState(),C=b.useRef(new Map),{v7_startTransition:p}=r||{},v=b.useCallback(T=>{p?gO(T):T()},[p]),S=b.useCallback((T,x)=>{let{deletedFetchers:_,unstable_flushSync:M,unstable_viewTransitionOpts:D}=x;_.forEach(W=>C.current.delete(W)),T.fetchers.forEach((W,j)=>{W.data!==void 0&&C.current.set(j,W.data)});let F=n.window==null||typeof n.window.document.startViewTransition!="function";if(!D||F){M?Wl(()=>o(T)):v(()=>o(T));return}if(M){Wl(()=>{h&&(u&&u.resolve(),h.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let W=n.window.document.startViewTransition(()=>{Wl(()=>o(T))});W.finished.finally(()=>{Wl(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})})}),Wl(()=>f(W));return}h?(u&&u.resolve(),h.skipTransition(),m({state:T,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(a(T),l({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,h,u,C,v]);b.useLayoutEffect(()=>n.subscribe(S),[n,S]),b.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new mO)},[c]),b.useEffect(()=>{if(u&&s&&n.window){let T=s,x=u.promise,_=n.window.document.startViewTransition(async()=>{v(()=>o(T)),await x});_.finished.finally(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})}),f(_)}},[v,s,u,n.window]),b.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,h,i.location,s]),b.useEffect(()=>{!c.isTransitioning&&g&&(a(g.state),l({isTransitioning:!0,flushSync:!1,currentLocation:g.currentLocation,nextLocation:g.nextLocation}),m(void 0))},[c.isTransitioning,g]),b.useEffect(()=>{},[]);let E=b.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,x,_)=>n.navigate(T,{state:x,preventScrollReset:_==null?void 0:_.preventScrollReset}),replace:(T,x,_)=>n.navigate(T,{replace:!0,state:x,preventScrollReset:_==null?void 0:_.preventScrollReset})}),[n]),w=n.basename||"/",A=b.useMemo(()=>({router:n,navigator:E,static:!1,basename:w}),[n,E,w]);return b.createElement(b.Fragment,null,b.createElement(lk.Provider,{value:A},b.createElement(uk.Provider,{value:i},b.createElement(hO.Provider,{value:C.current},b.createElement(dO.Provider,{value:c},b.createElement(oO,{basename:w,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?b.createElement(yO,{routes:n.routes,future:n.future,state:i}):e))))),null)}function yO(t){let{routes:e,future:n,state:r}=t;return $M(e,void 0,r,n)}var iS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(iS||(iS={}));var oS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(oS||(oS={}));const pk=t=>{const e=typeof t=="function",n=b.useRef(t);b.useEffect(()=>{n.current=t}),b.useEffect(()=>{if(e){const r=i=>{const o=n.current(i);if(typeof o=="string")return i.preventDefault(),i.returnValue=o;if(i.defaultPrevented)return i.returnValue=""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}},[e])};var sS=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function CO(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var cs=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],IO=function(){sS(t,null,[{key:"escapeForHtml",value:function(n){return new t().escapeForHtml(n)}},{key:"linkify",value:function(n){return new t().linkify(n)}},{key:"ansiToHtml",value:function(n,r){return new t().ansiToHtml(n,r)}},{key:"ansiToJson",value:function(n,r){return new t().ansiToJson(n,r)}},{key:"ansiToText",value:function(n){return new t().ansiToText(n)}}]);function t(){CO(this,t),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return sS(t,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var r=0;r<8;++r)this.PALETTE_COLORS.push(cs[n][r].color);for(var i=[0,95,135,175,215,255],o=function(h,f,g){return i[h]+", "+i[f]+", "+i[g]},s=0;s<6;++s)for(var a=0;a<6;++a)for(var c=0;c<6;++c)this.PALETTE_COLORS.push(o(s,a,c));for(var l=8,u=0;u<24;++u,l+=10)this.PALETTE_COLORS.push(o(l,l,l))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(r){return r=="&"?"&amp;":r=='"'?"&quot;":r=="<"?"&lt;":r==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(/(https?:\/\/[^\s]+)/gm,function(r){return'<a href="'+r+'">'+r+"</a>"})}},{key:"ansiToHtml",value:function(n,r){return this.process(n,r,!0)}},{key:"ansiToJson",value:function(n,r){return r=r||{},r.json=!0,r.clearLine=!1,this.process(n,r,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,r,i){var o=this,s=this,a=n.split(/\033\[/),c=a.shift();r==null&&(r={}),r.clearLine=/\r/.test(n);var l=a.map(function(d){return o.processChunk(d,r,i)});if(r&&r.json){var u=s.processChunkJson("");return u.content=c,u.clearLine=r.clearLine,l.unshift(u),r.remove_empty&&(l=l.filter(function(d){return!d.isEmpty()})),l}else l.unshift(c);return l.join("")}},{key:"processChunkJson",value:function(n,r,i){r=typeof r>"u"?{}:r;var o=r.use_classes=typeof r.use_classes<"u"&&r.use_classes,s=r.key=o?"class":"color",a={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:r.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},c=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!c)return a;a.content=c[4];var l=c[2].split(";");if(c[1]!==""||c[3]!=="m"||!i)return a;for(var u=this;l.length>0;){var d=l.shift(),h=parseInt(d);if(isNaN(h)||h===0)u.fg=u.bg=null,u.decorations=[];else if(h===1)u.decorations.push("bold");else if(h===2)u.decorations.push("dim");else if(h===3)u.decorations.push("italic");else if(h===4)u.decorations.push("underline");else if(h===5)u.decorations.push("blink");else if(h===7)u.decorations.push("reverse");else if(h===8)u.decorations.push("hidden");else if(h===9)u.decorations.push("strikethrough");else if(h===21)u.removeDecoration("bold");else if(h===22)u.removeDecoration("bold"),u.removeDecoration("dim");else if(h===23)u.removeDecoration("italic");else if(h===24)u.removeDecoration("underline");else if(h===25)u.removeDecoration("blink");else if(h===27)u.removeDecoration("reverse");else if(h===28)u.removeDecoration("hidden");else if(h===29)u.removeDecoration("strikethrough");else if(h===39)u.fg=null;else if(h===49)u.bg=null;else if(h>=30&&h<38)u.fg=cs[0][h%10][s];else if(h>=90&&h<98)u.fg=cs[1][h%10][s];else if(h>=40&&h<48)u.bg=cs[0][h%10][s];else if(h>=100&&h<108)u.bg=cs[1][h%10][s];else if(h===38||h===48){var f=h===38;if(l.length>=1){var g=l.shift();if(g==="5"&&l.length>=1){var m=parseInt(l.shift());if(m>=0&&m<=255)if(!o)this.PALETTE_COLORS||u.setupPalette(),f?u.fg=this.PALETTE_COLORS[m]:u.bg=this.PALETTE_COLORS[m];else{var C=m>=16?"ansi-palette-"+m:cs[m>7?1:0][m%8].class;f?u.fg=C:u.bg=C}}else if(g==="2"&&l.length>=3){var p=parseInt(l.shift()),v=parseInt(l.shift()),S=parseInt(l.shift());if(p>=0&&p<=255&&v>=0&&v<=255&&S>=0&&S<=255){var E=p+", "+v+", "+S;o?f?(u.fg="ansi-truecolor",u.fg_truecolor=E):(u.bg="ansi-truecolor",u.bg_truecolor=E):f?u.fg=E:u.bg=E}}}}}return u.fg===null&&u.bg===null&&u.decorations.length===0||(a.fg=u.fg,a.bg=u.bg,a.fg_truecolor=u.fg_truecolor,a.bg_truecolor=u.bg_truecolor,a.decorations=u.decorations,a.decoration=u.decorations.slice(-1).pop()||null,a.was_processed=!0),a}},{key:"processChunk",value:function(n,r,i){var o=this;r=r||{};var s=this.processChunkJson(n,r,i),a=r.use_classes;if(s.decorations=s.decorations.filter(function(f){if(f==="reverse"){s.fg||(s.fg=cs[0][7][a?"class":"color"]),s.bg||(s.bg=cs[0][0][a?"class":"color"]);var g=s.fg;s.fg=s.bg,s.bg=g;var m=s.fg_truecolor;return s.fg_truecolor=s.bg_truecolor,s.bg_truecolor=m,s.isInverted=!0,!1}return!0}),r.json)return s;if(s.isEmpty())return"";if(!s.was_processed)return s.content;var c=[],l=[],u=[],d={},h=function(g){var m=[],C=void 0;for(C in g)g.hasOwnProperty(C)&&m.push("data-"+C+'="'+o.escapeForHtml(g[C])+'"');return m.length>0?" "+m.join(" "):""};return s.isInverted&&(d["ansi-is-inverted"]="true"),s.fg&&(a?(c.push(s.fg+"-fg"),s.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=s.fg_truecolor,s.fg_truecolor=null)):c.push("color:rgb("+s.fg+")")),s.bg&&(a?(c.push(s.bg+"-bg"),s.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=s.bg_truecolor,s.bg_truecolor=null)):c.push("background-color:rgb("+s.bg+")")),s.decorations.forEach(function(f){if(a){l.push("ansi-"+f);return}f==="bold"?l.push("font-weight:bold"):f==="dim"?l.push("opacity:0.5"):f==="italic"?l.push("font-style:italic"):f==="hidden"?l.push("visibility:hidden"):f==="strikethrough"?u.push("line-through"):u.push(f)}),u.length&&l.push("text-decoration:"+u.join(" ")),a?'<span class="'+c.concat(l).join(" ")+'"'+h(d)+">"+s.content+"</span>":'<span style="'+c.concat(l).join(";")+'"'+h(d)+">"+s.content+"</span>"}},{key:"removeDecoration",value:function(n){var r=this.decorations.indexOf(n);r>=0&&this.decorations.splice(r,1)}}]),t}(),SO=IO;const bO=fd(SO);function wO(t,e){let n=[];for(const r of t.split(`\r
`)){const i=bO.ansiToJson(r,{json:!0,remove_empty:!1});let o=[];for(const s of i){const a=TO(s,e);o=[...o,...a]}n=[...n,$.jsx("span",{children:o},n.length)]}return n}const AO=/(\s|^)((\w+):\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,kO=/(?<slorp1>\s|^)(?<name>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+[a-zA-Z])(?<slorp2>\s|$|\.)/g,EO=/@\[exit:([a-zA-Z]+)\]([a-zA-Z]+)@\[\/\]/g;function TO(t,e){const n=xO(t),r=[];let i=0,o=0;function s(u,d){let h;for(;(h=u.exec(t.content))!==null;){const f=h.index;f>i&&r.push(t.content.substring(i,f)),r.push(d(h)),i=u.lastIndex}}function a(u){const[,d,h]=u,f=h;return $.jsxs($.Fragment,{children:[d,$.jsx("a",{href:f,target:"_blank",rel:"noreferrer",children:h})]})}function c(u){const d=u.groups.name,h=`mailto:${d}`;return $.jsxs($.Fragment,{children:[u.groups.slorp1,$.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:d}),u.groups.slorp2]})}function l(u){const[,d,h]=u;return $.jsx("a",{onClick:()=>e(d),className:"exit",children:h})}return s(AO,a),s(kO,c),s(EO,l),i<t.content.length&&r.push(t.content.substring(i)),r.map(u=>$.jsx("span",{style:n,children:u},o++))}function xO(t){const e={};switch(t.bg&&(e.backgroundColor=`rgb(${t.bg})`),t.fg&&(e.color=`rgb(${t.fg})`),t.decoration){case"bold":e.fontWeight="bold";break;case"dim":e.opacity="0.5";break;case"italic":e.fontStyle="italic";break;case"hidden":e.visibility="hidden";break;case"strikethrough":e.textDecoration="line-through";break;case"underline":e.textDecoration="underline";break;case"blink":e.textDecoration="blink";break}return e}var Ha={},gl={},gk=b;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xn=Object.prototype.hasOwnProperty,RO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,aS={},cS={};function mk(t){return Xn.call(cS,t)?!0:Xn.call(aS,t)?!1:RO.test(t)?cS[t]=!0:(aS[t]=!0,!1)}function Gn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){fn[t]=new Gn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];fn[e]=new Gn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){fn[t]=new Gn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){fn[t]=new Gn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){fn[t]=new Gn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){fn[t]=new Gn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){fn[t]=new Gn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){fn[t]=new Gn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){fn[t]=new Gn(t,5,!1,t.toLowerCase(),null,!1,!1)});var vy=/[\-:]([a-z])/g;function yy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vy,yy);fn[e]=new Gn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vy,yy);fn[e]=new Gn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vy,yy);fn[e]=new Gn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){fn[t]=new Gn(t,1,!1,t.toLowerCase(),null,!1,!1)});fn.xlinkHref=new Gn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){fn[t]=new Gn(t,1,!1,t.toLowerCase(),null,!0,!0)});var wh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},PO=["Webkit","ms","Moz","O"];Object.keys(wh).forEach(function(t){PO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wh[e]=wh[t]})});var NO=/["'&<>]/;function On(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=NO.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var _O=/([A-Z])/g,MO=/^ms-/,nv=Array.isArray;function oo(t,e){return{insertionMode:t,selectedValue:e}}function OO(t,e,n){switch(e){case"select":return oo(1,n.value!=null?n.value:n.defaultValue);case"svg":return oo(2,null);case"math":return oo(3,null);case"foreignObject":return oo(1,null);case"table":return oo(4,null);case"thead":case"tbody":case"tfoot":return oo(5,null);case"colgroup":return oo(7,null);case"tr":return oo(6,null)}return 4<=t.insertionMode||t.insertionMode===0?oo(1,null):t}var lS=new Map;function vk(t,e,n){if(typeof n!="object")throw Error(Re(62));e=!0;for(var r in n)if(Xn.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=On(r);i=On((""+i).trim())}else{o=r;var s=lS.get(o);s!==void 0||(s=On(o.replace(_O,"-$1").toLowerCase().replace(MO,"-ms-")),lS.set(o,s)),o=s,i=typeof i=="number"?i===0||Xn.call(wh,r)?""+i:i+"px":On((""+i).trim())}e?(e=!1,t.push(' style="',o,":",i)):t.push(";",o,":",i)}}e||t.push('"')}function ur(t,e,n,r){switch(n){case"style":vk(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=fn.hasOwnProperty(n)?fn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',On(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',On(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',On(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',On(r),'"')}}else if(mk(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',On(r),'"')}}}function Ah(t,e,n){if(e!=null){if(n!=null)throw Error(Re(60));if(typeof e!="object"||!("__html"in e))throw Error(Re(61));e=e.__html,e!=null&&t.push(""+e)}}function DO(t){var e="";return gk.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Ag(t,e,n,r){t.push(wi(n));var i=n=null,o;for(o in e)if(Xn.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:ur(t,r,o,s)}}return t.push(">"),Ah(t,i,n),typeof n=="string"?(t.push(On(n)),null):n}var LO=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,uS=new Map;function wi(t){var e=uS.get(t);if(e===void 0){if(!LO.test(t))throw Error(Re(65,t));e="<"+t,uS.set(t,e)}return e}function BO(t,e,n,r,i){switch(e){case"select":t.push(wi("select"));var o=null,s=null;for(u in n)if(Xn.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:ur(t,r,u,a)}}return t.push(">"),Ah(t,s,o),o;case"option":s=i.selectedValue,t.push(wi("option"));var c=a=null,l=null,u=null;for(o in n)if(Xn.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:ur(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:DO(a),nv(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(' selected=""');break}}else""+s===n&&t.push(' selected=""');else l&&t.push(' selected=""');return t.push(">"),Ah(t,u,a),a;case"textarea":t.push(wi("textarea")),u=s=o=null;for(a in n)if(Xn.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(Re(91));default:ur(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(">"),u!=null){if(o!=null)throw Error(Re(92));if(nv(u)&&1<u.length)throw Error(Re(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o!==null&&t.push(On(""+o)),null;case"input":t.push(wi("input")),c=u=a=o=null;for(s in n)if(Xn.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(Re(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:ur(t,r,s,l)}return u!==null?ur(t,r,"checked",u):c!==null&&ur(t,r,"checked",c),o!==null?ur(t,r,"value",o):a!==null&&ur(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(wi("menuitem"));for(var h in n)if(Xn.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Re(400));default:ur(t,r,h,o)}return t.push(">"),null;case"title":t.push(wi("title")),o=null;for(d in n)if(Xn.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(Re(434));default:ur(t,r,d,s)}return t.push(">"),o;case"listing":case"pre":t.push(wi(e)),s=o=null;for(c in n)if(Xn.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:ur(t,r,c,a)}if(t.push(">"),s!=null){if(o!=null)throw Error(Re(60));if(typeof s!="object"||!("__html"in s))throw Error(Re(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(wi(e));for(var f in n)if(Xn.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Re(399,e));default:ur(t,r,f,o)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Ag(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),Ag(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Ag(t,n,e,r);t.push(wi(e)),s=o=null;for(l in n)if(Xn.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":vk(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:mk(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",l,'="',On(a),'"')}return t.push(">"),Ah(t,s,o),o}}function dS(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Re(395));return t.push(n),t.push('"></template>')}function FO(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(Re(397))}}function UO(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Re(397))}}var VO=/[<\u2028\u2029]/g;function kg(t){return JSON.stringify(t).replace(VO,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function GO(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function hS(t,e,n,r){return n.generateStaticMarkup?(t.push(On(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(On(e)),t=!0),t)}var Iu=Object.assign,WO=Symbol.for("react.element"),yk=Symbol.for("react.portal"),Ck=Symbol.for("react.fragment"),Ik=Symbol.for("react.strict_mode"),Sk=Symbol.for("react.profiler"),bk=Symbol.for("react.provider"),wk=Symbol.for("react.context"),Ak=Symbol.for("react.forward_ref"),kk=Symbol.for("react.suspense"),Ek=Symbol.for("react.suspense_list"),Tk=Symbol.for("react.memo"),Cy=Symbol.for("react.lazy"),ZO=Symbol.for("react.scope"),jO=Symbol.for("react.debug_trace_mode"),zO=Symbol.for("react.legacy_hidden"),HO=Symbol.for("react.default_value"),fS=Symbol.iterator;function rv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ck:return"Fragment";case yk:return"Portal";case Sk:return"Profiler";case Ik:return"StrictMode";case kk:return"Suspense";case Ek:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case wk:return(t.displayName||"Context")+".Consumer";case bk:return(t._context.displayName||"Context")+".Provider";case Ak:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tk:return e=t.displayName||null,e!==null?e:rv(t.type)||"Memo";case Cy:e=t._payload,t=t._init;try{return rv(t(e))}catch{}}return null}var xk={};function pS(t,e){if(t=t.contextTypes,!t)return xk;var n={},r;for(r in t)n[r]=e[r];return n}var Ca=null;function Cp(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Re(401))}else{if(n===null)throw Error(Re(401));Cp(t,n)}e.context._currentValue2=e.value}}function Rk(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&Rk(t)}function Pk(t){var e=t.parent;e!==null&&Pk(e),t.context._currentValue2=t.value}function Nk(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Re(402));t.depth===e.depth?Cp(t,e):Nk(t,e)}function _k(t,e){var n=e.parent;if(n===null)throw Error(Re(402));t.depth===n.depth?Cp(t,n):_k(t,n),e.context._currentValue2=e.value}function Sf(t){var e=Ca;e!==t&&(e===null?Pk(t):t===null?Rk(e):e.depth===t.depth?Cp(e,t):e.depth>t.depth?Nk(e,t):_k(e,t),Ca=t)}var gS={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function mS(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=gS,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue2:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:Iu({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&gS.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=Iu({},o,a)):Iu(o,a))}t.state=o}else o.queue=null}var XO={id:1,overflow:""};function iv(t,e,n){var r=t.id;t=t.overflow;var i=32-kh(r)-1;r&=~(1<<i),n+=1;var o=32-kh(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-kh(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var kh=Math.clz32?Math.clz32:JO,$O=Math.log,KO=Math.LN2;function JO(t){return t>>>=0,t===0?32:31-($O(t)/KO|0)|0}function YO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var QO=typeof Object.is=="function"?Object.is:YO,$o=null,Iy=null,Eh=null,at=null,eu=!1,bf=!1,zu=0,ks=null,Ip=0;function la(){if($o===null)throw Error(Re(321));return $o}function vS(){if(0<Ip)throw Error(Re(312));return{memoizedState:null,queue:null,next:null}}function Sy(){return at===null?Eh===null?(eu=!1,Eh=at=vS()):(eu=!0,at=Eh):at.next===null?(eu=!1,at=at.next=vS()):(eu=!0,at=at.next),at}function by(){Iy=$o=null,bf=!1,Eh=null,Ip=0,at=ks=null}function Mk(t,e){return typeof e=="function"?e(t):e}function yS(t,e,n){if($o=la(),at=Sy(),eu){var r=at.queue;if(e=r.dispatch,ks!==null&&(n=ks.get(r),n!==void 0)){ks.delete(r),r=at.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return at.memoizedState=r,[r,e]}return[at.memoizedState,e]}return t=t===Mk?typeof e=="function"?e():e:n!==void 0?n(e):e,at.memoizedState=t,t=at.queue={last:null,dispatch:null},t=t.dispatch=qO.bind(null,$o,t),[at.memoizedState,t]}function CS(t,e){if($o=la(),at=Sy(),e=e===void 0?null:e,at!==null){var n=at.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!QO(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),at.memoizedState=[t,e],t}function qO(t,e,n){if(25<=Ip)throw Error(Re(301));if(t===$o)if(bf=!0,t={action:n,next:null},ks===null&&(ks=new Map),n=ks.get(e),n===void 0)ks.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function eD(){throw Error(Re(394))}function qd(){}var IS={readContext:function(t){return t._currentValue2},useContext:function(t){return la(),t._currentValue2},useMemo:CS,useReducer:yS,useRef:function(t){$o=la(),at=Sy();var e=at.memoizedState;return e===null?(t={current:t},at.memoizedState=t):e},useState:function(t){return yS(Mk,t)},useInsertionEffect:qd,useLayoutEffect:function(){},useCallback:function(t,e){return CS(function(){return t},e)},useImperativeHandle:qd,useEffect:qd,useDebugValue:qd,useDeferredValue:function(t){return la(),t},useTransition:function(){return la(),[!1,eD]},useId:function(){var t=Iy.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-kh(t)-1)).toString(32)+e;var n=Th;if(n===null)throw Error(Re(404));return e=zu++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return la(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Re(407));return n()}},Th=null,Eg=gk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function tD(t){return console.error(t),null}function tu(){}function nD(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?tD:i,onAllReady:o===void 0?tu:o,onShellReady:s===void 0?tu:s,onShellError:a===void 0?tu:a,onFatalError:c===void 0?tu:c},n=wf(e,0,null,n,!1,!1),n.parentFlushed=!0,t=wy(e,t,null,n,u,xk,null,XO),l.push(t),e}function wy(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&Lk(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function wf(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function Hu(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Af(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function SS(t,e,n,r,i){for($o={},Iy=e,zu=0,t=n(r,i);bf;)bf=!1,zu=0,Ip+=1,at=null,t=n(r,i);return by(),t}function bS(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(Re(108,rv(r)||"Unknown",a));r=Iu({},s,n)}e.legacyContext=r,vr(t,e,i),e.legacyContext=s}else vr(t,e,i)}function wS(t,e){if(t&&t.defaultProps){e=Iu({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ov(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=pS(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue2:i),mS(o,n,r,i),bS(t,e,o,n)}else{o=pS(n,e.legacyContext),i=SS(t,e,n,r,o);var s=zu!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)mS(i,n,r,o),bS(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=iv(r,1,0);try{vr(t,e,i)}finally{e.treeContext=r}}else vr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=BO(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=OO(s,n,r),sv(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case zO:case jO:case Ik:case Sk:case Ck:vr(t,e,r.children);return;case Ek:vr(t,e,r.children);return;case ZO:throw Error(Re(343));case kk:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=wf(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=wf(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(sv(t,e,r),t.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),l.status=1,kf(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=Hu(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=wy(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Ak:if(r=SS(t,e,n.render,r,i),zu!==0){n=e.treeContext,e.treeContext=iv(n,1,0);try{vr(t,e,r)}finally{e.treeContext=n}}else vr(t,e,r);return;case Tk:n=n.type,r=wS(n,r),ov(t,e,n,r,i);return;case bk:if(i=r.children,n=n._context,r=r.value,o=n._currentValue2,n._currentValue2=r,s=Ca,Ca=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,vr(t,e,i),t=Ca,t===null)throw Error(Re(403));r=t.parentValue,t.context._currentValue2=r===HO?t.context._defaultValue:r,t=Ca=t.parent,e.context=t;return;case wk:r=r.children,r=r(n._currentValue2),vr(t,e,r);return;case Cy:i=n._init,n=i(n._payload),r=wS(n,r),ov(t,e,n,r,void 0);return}throw Error(Re(130,n==null?n:typeof n,""))}}function vr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case WO:ov(t,e,n.type,n.props,n.ref);return;case yk:throw Error(Re(257));case Cy:var r=n._init;n=r(n._payload),vr(t,e,n);return}if(nv(n)){AS(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=fS&&n[fS]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);AS(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=hS(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=hS(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function AS(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=iv(o,r,i);try{sv(t,e,n[i])}finally{e.treeContext=o}}}function sv(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return vr(t,e,n)}catch(c){if(by(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=wf(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=wy(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Sf(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Sf(o),c}}function rD(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,Dk(this,e,t)}function Ok(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Re(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return Ok(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function kf(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&kf(t,n)}else t.completedSegments.push(e)}function Dk(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Re(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=tu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&kf(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(rD,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(kf(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function Lk(t){if(t.status!==2){var e=Ca,n=Eg.current;Eg.current=IS;var r=Th;Th=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){Sf(s.context);try{vr(a,s,s.node),a.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),s.abortSet.delete(s),c.status=1,Dk(a,s.blockedBoundary,c)}catch(g){if(by(),typeof g=="object"&&g!==null&&typeof g.then=="function"){var l=s.ping;g.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=g,h=Hu(a,d);if(u===null?Af(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&Ay(t,t.destination)}catch(g){Hu(t,g),Af(t,g)}finally{Th=r,Eg.current=n,n===IS&&Sf(e)}}}function eh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)e.push(r[o]);i=Sp(t,e,i)}for(;o<r.length-1;o++)e.push(r[o]);return o<r.length&&(i=e.push(r[o])),i;default:throw Error(Re(390))}}function Sp(t,e,n){var r=n.boundary;if(r===null)return eh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=On(r),e.push(r),e.push('"')),e.push("></template>")),eh(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;return i=i.boundaryPrefix+o.toString(16),r=r.id=i,dS(e,t.responseState,r),eh(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),dS(e,t.responseState,r.id),eh(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Re(391));return Sp(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function kS(t,e,n){return FO(e,t.responseState,n.formatContext,n.id),Sp(t,e,n),UO(e,n.formatContext)}function ES(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)Bk(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Re(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function Bk(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Re(392));return kS(t,e,r)}return kS(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function Ay(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Sp(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(Re(395));if(r.push(c),r.push('"'),l||u||d){r.push(",");var h=kg(l||"");r.push(h)}if(u||d){r.push(",");var f=kg(u||"");r.push(f)}if(d){r.push(",");var g=kg(d);r.push(g)}if(!r.push(")<\/script>")){t.destination=null,o++,i.splice(0,o);return}}i.splice(0,o);var m=t.completedBoundaries;for(o=0;o<m.length;o++)if(!ES(t,e,m[o])){t.destination=null,o++,m.splice(0,o);return}m.splice(0,o);var C=t.partialBoundaries;for(o=0;o<C.length;o++){var p=C[o];e:{i=t,s=e;var v=p.completedSegments;for(a=0;a<v.length;a++)if(!Bk(i,s,p,v[a])){a++,v.splice(0,a);var S=!1;break e}v.splice(0,a),S=!0}if(!S){t.destination=null,o++,C.splice(0,o);return}}C.splice(0,o);var E=t.completedBoundaries;for(o=0;o<E.length;o++)if(!ES(t,e,E[o])){t.destination=null,o++,E.splice(0,o);return}E.splice(0,o)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function iD(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return Ok(r,t,e)}),n.clear(),t.destination!==null&&Ay(t,t.destination)}catch(r){Hu(t,r),Af(t,r)}}function oD(){}function Fk(t,e,n,r){var i=!1,o=null,s="",a={push:function(l){return l!==null&&(s+=l),!0},destroy:function(l){i=!0,o=l}},c=!1;if(t=nD(t,GO(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,oD,void 0,function(){c=!0},void 0,void 0),Lk(t),iD(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{Ay(t,a)}catch(l){Hu(t,l),Af(t,l)}}if(i)throw o;if(!c)throw Error(Re(426));return s}gl.renderToNodeStream=function(){throw Error(Re(207))};gl.renderToStaticMarkup=function(t,e){return Fk(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};gl.renderToStaticNodeStream=function(){throw Error(Re(208))};gl.renderToString=function(t,e){return Fk(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};gl.version="18.2.0";var ky={},Uk=b;function Oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yr=null,Cr=0;function ve(t,e){if(e.length!==0)if(512<e.length)0<Cr&&(t.enqueue(new Uint8Array(yr.buffer,0,Cr)),yr=new Uint8Array(512),Cr=0),t.enqueue(e);else{var n=yr.length-Cr;n<e.length&&(n===0?t.enqueue(yr):(yr.set(e.subarray(0,n),Cr),t.enqueue(yr),e=e.subarray(n)),yr=new Uint8Array(512),Cr=0),yr.set(e,Cr),Cr+=e.length}}function mt(t,e){return ve(t,e),!0}function TS(t){yr&&0<Cr&&(t.enqueue(new Uint8Array(yr.buffer,0,Cr)),yr=null,Cr=0)}var Vk=new TextEncoder;function Le(t){return Vk.encode(t)}function ce(t){return Vk.encode(t)}function Gk(t,e){typeof t.error=="function"?t.error(e):t.close()}var $n=Object.prototype.hasOwnProperty,sD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xS={},RS={};function Wk(t){return $n.call(RS,t)?!0:$n.call(xS,t)?!1:sD.test(t)?RS[t]=!0:(xS[t]=!0,!1)}function Wn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pn[t]=new Wn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pn[e]=new Wn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pn[t]=new Wn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pn[t]=new Wn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pn[t]=new Wn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pn[t]=new Wn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pn[t]=new Wn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pn[t]=new Wn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pn[t]=new Wn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ey=/[\-:]([a-z])/g;function Ty(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ey,Ty);pn[e]=new Wn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ey,Ty);pn[e]=new Wn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ey,Ty);pn[e]=new Wn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!1,!1)});pn.xlinkHref=new Wn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pn[t]=new Wn(t,1,!1,t.toLowerCase(),null,!0,!0)});var xh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aD=["Webkit","ms","Moz","O"];Object.keys(xh).forEach(function(t){aD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),xh[e]=xh[t]})});var cD=/["'&<>]/;function cn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=cD.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var lD=/([A-Z])/g,uD=/^ms-/,av=Array.isArray,dD=ce("<script>"),hD=ce("<\/script>"),fD=ce('<script src="'),pD=ce('<script type="module" src="'),PS=ce('" async=""><\/script>'),gD=/(<\/|<)(s)(cript)/gi;function mD(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function vD(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?dD:ce('<script nonce="'+cn(e)+'">');var o=[];if(n!==void 0&&o.push(e,Le((""+n).replace(gD,mD)),hD),r!==void 0)for(n=0;n<r.length;n++)o.push(fD,Le(cn(r[n])),PS);if(i!==void 0)for(r=0;r<i.length;r++)o.push(pD,Le(cn(i[r])),PS);return{bootstrapChunks:o,startInlineScript:e,placeholderPrefix:ce(t+"P:"),segmentPrefix:ce(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Ai(t,e){return{insertionMode:t,selectedValue:e}}function yD(t){return Ai(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function CD(t,e,n){switch(e){case"select":return Ai(1,n.value!=null?n.value:n.defaultValue);case"svg":return Ai(2,null);case"math":return Ai(3,null);case"foreignObject":return Ai(1,null);case"table":return Ai(4,null);case"thead":case"tbody":case"tfoot":return Ai(5,null);case"colgroup":return Ai(7,null);case"tr":return Ai(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Ai(1,null):t}var xy=ce("<!-- -->");function NS(t,e,n,r){return e===""?r:(r&&t.push(xy),t.push(Le(cn(e))),!0)}var _S=new Map,ID=ce(' style="'),MS=ce(":"),SD=ce(";");function Zk(t,e,n){if(typeof n!="object")throw Error(Oe(62));e=!0;for(var r in n)if($n.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=Le(cn(r));i=Le(cn((""+i).trim()))}else{o=r;var s=_S.get(o);s!==void 0||(s=ce(cn(o.replace(lD,"-$1").toLowerCase().replace(uD,"-ms-"))),_S.set(o,s)),o=s,i=typeof i=="number"?i===0||$n.call(xh,r)?Le(""+i):Le(i+"px"):Le(cn((""+i).trim()))}e?(e=!1,t.push(ID,o,MS,i)):t.push(SD,o,MS,i)}}e||t.push(ua)}var hs=ce(" "),ac=ce('="'),ua=ce('"'),OS=ce('=""');function dr(t,e,n,r){switch(n){case"style":Zk(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=pn.hasOwnProperty(n)?pn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=Le(e.attributeName),e.type){case 3:r&&t.push(hs,n,OS);break;case 4:r===!0?t.push(hs,n,OS):r!==!1&&t.push(hs,n,ac,Le(cn(r)),ua);break;case 5:isNaN(r)||t.push(hs,n,ac,Le(cn(r)),ua);break;case 6:!isNaN(r)&&1<=r&&t.push(hs,n,ac,Le(cn(r)),ua);break;default:e.sanitizeURL&&(r=""+r),t.push(hs,n,ac,Le(cn(r)),ua)}}else if(Wk(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(hs,Le(n),ac,Le(cn(r)),ua)}}}var fs=ce(">"),DS=ce("/>");function Rh(t,e,n){if(e!=null){if(n!=null)throw Error(Oe(60));if(typeof e!="object"||!("__html"in e))throw Error(Oe(61));e=e.__html,e!=null&&t.push(Le(""+e))}}function bD(t){var e="";return Uk.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var Tg=ce(' selected=""');function xg(t,e,n,r){t.push(ki(n));var i=n=null,o;for(o in e)if($n.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:dr(t,r,o,s)}}return t.push(fs),Rh(t,i,n),typeof n=="string"?(t.push(Le(cn(n))),null):n}var Rg=ce(`
`),wD=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,LS=new Map;function ki(t){var e=LS.get(t);if(e===void 0){if(!wD.test(t))throw Error(Oe(65,t));e=ce("<"+t),LS.set(t,e)}return e}var AD=ce("<!DOCTYPE html>");function kD(t,e,n,r,i){switch(e){case"select":t.push(ki("select"));var o=null,s=null;for(u in n)if($n.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:dr(t,r,u,a)}}return t.push(fs),Rh(t,s,o),o;case"option":s=i.selectedValue,t.push(ki("option"));var c=a=null,l=null,u=null;for(o in n)if($n.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:dr(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:bD(a),av(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(Tg);break}}else""+s===n&&t.push(Tg);else l&&t.push(Tg);return t.push(fs),Rh(t,u,a),a;case"textarea":t.push(ki("textarea")),u=s=o=null;for(a in n)if($n.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(Oe(91));default:dr(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(fs),u!=null){if(o!=null)throw Error(Oe(92));if(av(u)&&1<u.length)throw Error(Oe(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(Rg),o!==null&&t.push(Le(cn(""+o))),null;case"input":t.push(ki("input")),c=u=a=o=null;for(s in n)if($n.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(Oe(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:dr(t,r,s,l)}return u!==null?dr(t,r,"checked",u):c!==null&&dr(t,r,"checked",c),o!==null?dr(t,r,"value",o):a!==null&&dr(t,r,"value",a),t.push(DS),null;case"menuitem":t.push(ki("menuitem"));for(var h in n)if($n.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Oe(400));default:dr(t,r,h,o)}return t.push(fs),null;case"title":t.push(ki("title")),o=null;for(d in n)if($n.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(Oe(434));default:dr(t,r,d,s)}return t.push(fs),o;case"listing":case"pre":t.push(ki(e)),s=o=null;for(c in n)if($n.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:dr(t,r,c,a)}if(t.push(fs),s!=null){if(o!=null)throw Error(Oe(60));if(typeof s!="object"||!("__html"in s))throw Error(Oe(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(Rg,Le(n)):t.push(Le(""+n)))}return typeof o=="string"&&o[0]===`
`&&t.push(Rg),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(ki(e));for(var f in n)if($n.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Oe(399,e));default:dr(t,r,f,o)}return t.push(DS),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return xg(t,n,e,r);case"html":return i.insertionMode===0&&t.push(AD),xg(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return xg(t,n,e,r);t.push(ki(e)),s=o=null;for(l in n)if($n.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":Zk(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Wk(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(hs,Le(l),ac,Le(cn(a)),ua)}return t.push(fs),Rh(t,s,o),o}}var ED=ce("</"),TD=ce(">"),xD=ce('<template id="'),RD=ce('"></template>'),PD=ce("<!--$-->"),ND=ce('<!--$?--><template id="'),_D=ce('"></template>'),MD=ce("<!--$!-->"),OD=ce("<!--/$-->"),DD=ce("<template"),LD=ce('"'),BD=ce(' data-dgst="');ce(' data-msg="');ce(' data-stck="');var FD=ce("></template>");function BS(t,e,n){if(ve(t,ND),n===null)throw Error(Oe(395));return ve(t,n),mt(t,_D)}var UD=ce('<div hidden id="'),VD=ce('">'),GD=ce("</div>"),WD=ce('<svg aria-hidden="true" style="display:none" id="'),ZD=ce('">'),jD=ce("</svg>"),zD=ce('<math aria-hidden="true" style="display:none" id="'),HD=ce('">'),XD=ce("</math>"),$D=ce('<table hidden id="'),KD=ce('">'),JD=ce("</table>"),YD=ce('<table hidden><tbody id="'),QD=ce('">'),qD=ce("</tbody></table>"),e2=ce('<table hidden><tr id="'),t2=ce('">'),n2=ce("</tr></table>"),r2=ce('<table hidden><colgroup id="'),i2=ce('">'),o2=ce("</colgroup></table>");function s2(t,e,n,r){switch(n.insertionMode){case 0:case 1:return ve(t,UD),ve(t,e.segmentPrefix),ve(t,Le(r.toString(16))),mt(t,VD);case 2:return ve(t,WD),ve(t,e.segmentPrefix),ve(t,Le(r.toString(16))),mt(t,ZD);case 3:return ve(t,zD),ve(t,e.segmentPrefix),ve(t,Le(r.toString(16))),mt(t,HD);case 4:return ve(t,$D),ve(t,e.segmentPrefix),ve(t,Le(r.toString(16))),mt(t,KD);case 5:return ve(t,YD),ve(t,e.segmentPrefix),ve(t,Le(r.toString(16))),mt(t,QD);case 6:return ve(t,e2),ve(t,e.segmentPrefix),ve(t,Le(r.toString(16))),mt(t,t2);case 7:return ve(t,r2),ve(t,e.segmentPrefix),ve(t,Le(r.toString(16))),mt(t,i2);default:throw Error(Oe(397))}}function a2(t,e){switch(e.insertionMode){case 0:case 1:return mt(t,GD);case 2:return mt(t,jD);case 3:return mt(t,XD);case 4:return mt(t,JD);case 5:return mt(t,qD);case 6:return mt(t,n2);case 7:return mt(t,o2);default:throw Error(Oe(397))}}var c2=ce('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),l2=ce('$RS("'),u2=ce('","'),d2=ce('")<\/script>'),h2=ce('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),f2=ce('$RC("'),p2=ce('","'),g2=ce('")<\/script>'),m2=ce('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),v2=ce('$RX("'),y2=ce('"'),C2=ce(")<\/script>"),Pg=ce(","),I2=/[<\u2028\u2029]/g;function Ng(t){return JSON.stringify(t).replace(I2,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Su=Object.assign,S2=Symbol.for("react.element"),jk=Symbol.for("react.portal"),zk=Symbol.for("react.fragment"),Hk=Symbol.for("react.strict_mode"),Xk=Symbol.for("react.profiler"),$k=Symbol.for("react.provider"),Kk=Symbol.for("react.context"),Jk=Symbol.for("react.forward_ref"),Yk=Symbol.for("react.suspense"),Qk=Symbol.for("react.suspense_list"),qk=Symbol.for("react.memo"),Ry=Symbol.for("react.lazy"),b2=Symbol.for("react.scope"),w2=Symbol.for("react.debug_trace_mode"),A2=Symbol.for("react.legacy_hidden"),k2=Symbol.for("react.default_value"),FS=Symbol.iterator;function cv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zk:return"Fragment";case jk:return"Portal";case Xk:return"Profiler";case Hk:return"StrictMode";case Yk:return"Suspense";case Qk:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Kk:return(t.displayName||"Context")+".Consumer";case $k:return(t._context.displayName||"Context")+".Provider";case Jk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case qk:return e=t.displayName||null,e!==null?e:cv(t.type)||"Memo";case Ry:e=t._payload,t=t._init;try{return cv(t(e))}catch{}}return null}var eE={};function US(t,e){if(t=t.contextTypes,!t)return eE;var n={},r;for(r in t)n[r]=e[r];return n}var Ia=null;function bp(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Oe(401))}else{if(n===null)throw Error(Oe(401));bp(t,n)}e.context._currentValue=e.value}}function tE(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&tE(t)}function nE(t){var e=t.parent;e!==null&&nE(e),t.context._currentValue=t.value}function rE(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(Oe(402));t.depth===e.depth?bp(t,e):rE(t,e)}function iE(t,e){var n=e.parent;if(n===null)throw Error(Oe(402));t.depth===n.depth?bp(t,n):iE(t,n),e.context._currentValue=e.value}function Ef(t){var e=Ia;e!==t&&(e===null?nE(t):t===null?tE(e):e.depth===t.depth?bp(e,t):e.depth>t.depth?rE(e,t):iE(e,t),Ia=t)}var VS={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function GS(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=VS,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:Su({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&VS.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=Su({},o,a)):Su(o,a))}t.state=o}else o.queue=null}var E2={id:1,overflow:""};function lv(t,e,n){var r=t.id;t=t.overflow;var i=32-Ph(r)-1;r&=~(1<<i),n+=1;var o=32-Ph(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-Ph(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var Ph=Math.clz32?Math.clz32:R2,T2=Math.log,x2=Math.LN2;function R2(t){return t>>>=0,t===0?32:31-(T2(t)/x2|0)|0}function P2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var N2=typeof Object.is=="function"?Object.is:P2,Ko=null,Py=null,Nh=null,ct=null,nu=!1,Tf=!1,Xu=0,Es=null,wp=0;function da(){if(Ko===null)throw Error(Oe(321));return Ko}function WS(){if(0<wp)throw Error(Oe(312));return{memoizedState:null,queue:null,next:null}}function Ny(){return ct===null?Nh===null?(nu=!1,Nh=ct=WS()):(nu=!0,ct=Nh):ct.next===null?(nu=!1,ct=ct.next=WS()):(nu=!0,ct=ct.next),ct}function _y(){Py=Ko=null,Tf=!1,Nh=null,wp=0,ct=Es=null}function oE(t,e){return typeof e=="function"?e(t):e}function ZS(t,e,n){if(Ko=da(),ct=Ny(),nu){var r=ct.queue;if(e=r.dispatch,Es!==null&&(n=Es.get(r),n!==void 0)){Es.delete(r),r=ct.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return ct.memoizedState=r,[r,e]}return[ct.memoizedState,e]}return t=t===oE?typeof e=="function"?e():e:n!==void 0?n(e):e,ct.memoizedState=t,t=ct.queue={last:null,dispatch:null},t=t.dispatch=_2.bind(null,Ko,t),[ct.memoizedState,t]}function jS(t,e){if(Ko=da(),ct=Ny(),e=e===void 0?null:e,ct!==null){var n=ct.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!N2(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),ct.memoizedState=[t,e],t}function _2(t,e,n){if(25<=wp)throw Error(Oe(301));if(t===Ko)if(Tf=!0,t={action:n,next:null},Es===null&&(Es=new Map),n=Es.get(e),n===void 0)Es.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function M2(){throw Error(Oe(394))}function th(){}var zS={readContext:function(t){return t._currentValue},useContext:function(t){return da(),t._currentValue},useMemo:jS,useReducer:ZS,useRef:function(t){Ko=da(),ct=Ny();var e=ct.memoizedState;return e===null?(t={current:t},ct.memoizedState=t):e},useState:function(t){return ZS(oE,t)},useInsertionEffect:th,useLayoutEffect:function(){},useCallback:function(t,e){return jS(function(){return t},e)},useImperativeHandle:th,useEffect:th,useDebugValue:th,useDeferredValue:function(t){return da(),t},useTransition:function(){return da(),[!1,M2]},useId:function(){var t=Py.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Ph(t)-1)).toString(32)+e;var n=_h;if(n===null)throw Error(Oe(404));return e=Xu++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return da(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Oe(407));return n()}},_h=null,_g=Uk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function O2(t){return console.error(t),null}function ru(){}function D2(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?O2:i,onAllReady:o===void 0?ru:o,onShellReady:s===void 0?ru:s,onShellError:a===void 0?ru:a,onFatalError:c===void 0?ru:c},n=xf(e,0,null,n,!1,!1),n.parentFlushed=!0,t=My(e,t,null,n,u,eE,null,E2),l.push(t),e}function My(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&cE(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function xf(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function $u(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Rf(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,Gk(t.destination,e)):(t.status=1,t.fatalError=e)}function HS(t,e,n,r,i){for(Ko={},Py=e,Xu=0,t=n(r,i);Tf;)Tf=!1,Xu=0,wp+=1,ct=null,t=n(r,i);return _y(),t}function XS(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(Oe(108,cv(r)||"Unknown",a));r=Su({},s,n)}e.legacyContext=r,Ir(t,e,i),e.legacyContext=s}else Ir(t,e,i)}function $S(t,e){if(t&&t.defaultProps){e=Su({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uv(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=US(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue:i),GS(o,n,r,i),XS(t,e,o,n)}else{o=US(n,e.legacyContext),i=HS(t,e,n,r,o);var s=Xu!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)GS(i,n,r,o),XS(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=lv(r,1,0);try{Ir(t,e,i)}finally{e.treeContext=r}}else Ir(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=kD(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=CD(s,n,r),dv(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(ED,Le(n),TD)}i.lastPushedText=!1}else{switch(n){case A2:case w2:case Hk:case Xk:case zk:Ir(t,e,r.children);return;case Qk:Ir(t,e,r.children);return;case b2:throw Error(Oe(343));case Yk:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=xf(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=xf(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(dv(t,e,r),l.lastPushedText&&l.textEmbedded&&l.chunks.push(xy),l.status=1,Pf(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=$u(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=My(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Jk:if(r=HS(t,e,n.render,r,i),Xu!==0){n=e.treeContext,e.treeContext=lv(n,1,0);try{Ir(t,e,r)}finally{e.treeContext=n}}else Ir(t,e,r);return;case qk:n=n.type,r=$S(n,r),uv(t,e,n,r,i);return;case $k:if(i=r.children,n=n._context,r=r.value,o=n._currentValue,n._currentValue=r,s=Ia,Ia=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,Ir(t,e,i),t=Ia,t===null)throw Error(Oe(403));r=t.parentValue,t.context._currentValue=r===k2?t.context._defaultValue:r,t=Ia=t.parent,e.context=t;return;case Kk:r=r.children,r=r(n._currentValue),Ir(t,e,r);return;case Ry:i=n._init,n=i(n._payload),r=$S(n,r),uv(t,e,n,r,void 0);return}throw Error(Oe(130,n==null?n:typeof n,""))}}function Ir(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case S2:uv(t,e,n.type,n.props,n.ref);return;case jk:throw Error(Oe(257));case Ry:var r=n._init;n=r(n._payload),Ir(t,e,n);return}if(av(n)){KS(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=FS&&n[FS]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);KS(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Oe(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=NS(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=NS(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function KS(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=lv(o,r,i);try{dv(t,e,n[i])}finally{e.treeContext=o}}}function dv(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Ir(t,e,n)}catch(c){if(_y(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=xf(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=My(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Ef(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Ef(o),c}}function L2(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,aE(this,e,t)}function sE(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Oe(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return sE(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function Pf(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Pf(t,n)}else t.completedSegments.push(e)}function aE(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Oe(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=ru,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Pf(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(L2,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Pf(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function cE(t){if(t.status!==2){var e=Ia,n=_g.current;_g.current=zS;var r=_h;_h=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){Ef(s.context);try{Ir(a,s,s.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(xy),s.abortSet.delete(s),c.status=1,aE(a,s.blockedBoundary,c)}catch(g){if(_y(),typeof g=="object"&&g!==null&&typeof g.then=="function"){var l=s.ping;g.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=g,h=$u(a,d);if(u===null?Rf(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&Oy(t,t.destination)}catch(g){$u(t,g),Rf(t,g)}finally{_h=r,_g.current=n,n===zS&&Ef(e)}}}function nh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,ve(e,xD),ve(e,t.placeholderPrefix),t=Le(r.toString(16)),ve(e,t),mt(e,RD);case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)ve(e,r[o]);i=Ap(t,e,i)}for(;o<r.length-1;o++)ve(e,r[o]);return o<r.length&&(i=mt(e,r[o])),i;default:throw Error(Oe(390))}}function Ap(t,e,n){var r=n.boundary;if(r===null)return nh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,mt(e,MD),ve(e,DD),r&&(ve(e,BD),ve(e,Le(cn(r))),ve(e,LD)),mt(e,FD),nh(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;i=ce(i.boundaryPrefix+o.toString(16)),r=r.id=i,BS(e,t.responseState,r),nh(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),BS(e,t.responseState,r.id),nh(t,e,n);else{if(mt(e,PD),n=r.completedSegments,n.length!==1)throw Error(Oe(391));Ap(t,e,n[0])}return mt(e,OD)}function JS(t,e,n){return s2(e,t.responseState,n.formatContext,n.id),Ap(t,e,n),a2(e,n.formatContext)}function YS(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)lE(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,ve(e,t.startInlineScript),t.sentCompleteBoundaryFunction?ve(e,f2):(t.sentCompleteBoundaryFunction=!0,ve(e,h2)),r===null)throw Error(Oe(395));return n=Le(n.toString(16)),ve(e,r),ve(e,p2),ve(e,t.segmentPrefix),ve(e,n),mt(e,g2)}function lE(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Oe(392));return JS(t,e,r)}return JS(t,e,r),t=t.responseState,ve(e,t.startInlineScript),t.sentCompleteSegmentFunction?ve(e,l2):(t.sentCompleteSegmentFunction=!0,ve(e,c2)),ve(e,t.segmentPrefix),i=Le(i.toString(16)),ve(e,i),ve(e,u2),ve(e,t.placeholderPrefix),ve(e,i),mt(e,d2)}function Oy(t,e){yr=new Uint8Array(512),Cr=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Ap(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)ve(e,r[n]);n<r.length&&mt(e,r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(ve(r,a.startInlineScript),a.sentClientRenderFunction?ve(r,v2):(a.sentClientRenderFunction=!0,ve(r,m2)),c===null)throw Error(Oe(395));ve(r,c),ve(r,y2),(l||u||d)&&(ve(r,Pg),ve(r,Le(Ng(l||"")))),(u||d)&&(ve(r,Pg),ve(r,Le(Ng(u||"")))),d&&(ve(r,Pg),ve(r,Le(Ng(d)))),mt(r,C2)}i.splice(0,o);var h=t.completedBoundaries;for(o=0;o<h.length;o++)YS(t,e,h[o]);h.splice(0,o),TS(e),yr=new Uint8Array(512),Cr=0;var f=t.partialBoundaries;for(o=0;o<f.length;o++){var g=f[o];e:{i=t,s=e;var m=g.completedSegments;for(a=0;a<m.length;a++)if(!lE(i,s,g,m[a])){a++,m.splice(0,a);var C=!1;break e}m.splice(0,a),C=!0}if(!C){t.destination=null,o++,f.splice(0,o);return}}f.splice(0,o);var p=t.completedBoundaries;for(o=0;o<p.length;o++)YS(t,e,p[o]);p.splice(0,o)}finally{TS(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function QS(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return sE(r,t,e)}),n.clear(),t.destination!==null&&Oy(t,t.destination)}catch(r){$u(t,r),Rf(t,r)}}ky.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,o,s=new Promise(function(u,d){o=u,i=d}),a=D2(t,vD(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),yD(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,Gk(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{Oy(a,d)}catch(h){$u(a,h),Rf(a,h)}}},cancel:function(){QS(a)}},{highWaterMark:0});u.allReady=s,n(u)},function(u){s.catch(function(){}),r(u)},i);if(e&&e.signal){var c=e.signal,l=function(){QS(a,c.reason),c.removeEventListener("abort",l)};c.addEventListener("abort",l)}cE(a)})};ky.version="18.2.0";var ml,uE;ml=gl,uE=ky;Ha.version=ml.version;Ha.renderToString=ml.renderToString;Ha.renderToStaticMarkup=ml.renderToStaticMarkup;Ha.renderToNodeStream=ml.renderToNodeStream;Ha.renderToStaticNodeStream=ml.renderToStaticNodeStream;Ha.renderToReadableStream=uE.renderToReadableStream;const ha=class ha extends rt.Component{constructor(n){super(n);U(this,"outputRef",rt.createRef());U(this,"state",{output:[],sidebarVisible:!1,newLinesCount:0});U(this,"saveOutput",()=>{const n=this.state.output.map(r=>Ha.renderToStaticMarkup(r));localStorage.setItem(ha.LOCAL_STORAGE_KEY,JSON.stringify(n))});U(this,"loadOutput",()=>{const n=localStorage.getItem(ha.LOCAL_STORAGE_KEY);if(n){const r=JSON.parse(n).map(i=>rt.createElement("div",{dangerouslySetInnerHTML:{__html:i}}));this.setState({output:r})}});U(this,"addCommand",n=>{this.addToOutput([$.jsx("span",{className:"command","aria-live":"off",children:n})])});U(this,"addError",n=>this.addToOutput([$.jsxs("h2",{children:[" Error: ",n.message]})]));U(this,"handleConnected",()=>this.addToOutput([$.jsx("h2",{children:" Connected"})]));U(this,"handleDisconnected",()=>{this.addToOutput([$.jsx("h2",{children:" Disconnected"})]),this.setState({sidebarVisible:!1})});U(this,"handleUserList",n=>this.setState({sidebarVisible:!!n}));U(this,"handleScroll",()=>{this.isScrolledToBottom()&&this.setState({newLinesCount:0})});U(this,"isScrolledToBottom",()=>{const n=this.outputRef.current;return n?n.scrollHeight-n.scrollTop<=n.clientHeight+1:!1});U(this,"handleScrollToBottom",()=>{this.scrollToBottom(),this.setState({newLinesCount:0})});U(this,"scrollToBottom",()=>{const n=this.outputRef.current;n&&(n.scrollTop=n.scrollHeight)});U(this,"handleMessage",n=>{if(!n)return;const r=wO(n,this.handleExitClick);this.addToOutput(r)});U(this,"handleExitClick",n=>{this.props.client.sendCommand(n)});this.loadOutput(),this.props.client.on("message",this.handleMessage),this.props.client.on("connect",this.handleConnected),this.props.client.on("disconnect",this.handleDisconnected),this.props.client.on("error",this.addError),this.props.client.on("command",this.addCommand),this.props.client.on("userlist",this.handleUserList)}getSnapshotBeforeUpdate(n,r){if(this.outputRef.current){const i=this.outputRef.current;return i.scrollHeight-i.scrollTop<=i.clientHeight}return null}componentDidUpdate(n,r,i){i&&this.scrollToBottom(),this.state.output.length>r.output.length&&(this.isScrolledToBottom()?this.setState({newLinesCount:0}):this.setState({newLinesCount:this.state.newLinesCount+(this.state.output.length-r.output.length)})),this.saveOutput()}componentWillUnmount(){this.props.client.removeListener("message",this.handleMessage)}addToOutput(n){this.setState(r=>{const i=r.output.length,o=n.map((c,l)=>$.jsx("div",{children:c},i+l));return{output:[...r.output,...o].slice(-ha.MAX_OUTPUT_LENGTH)}})}saveLog(){const n=this.outputRef.current;if(n){const r=n.innerHTML,i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=new Date,c=a.toLocaleDateString(),l=a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=`${document.title.replace(/\s+/g,"-")}-log-${c}-${l}.html`;s.download=d,s.href=o,s.click(),URL.revokeObjectURL(o),s.remove()}}clearLog(){this.setState({output:[]})}render(){var n="output";this.state.sidebarVisible&&(n+=" sidebar-visible");const r=`${this.state.newLinesCount} new ${this.state.newLinesCount===1?"message":"messages"}`;return $.jsxs("div",{ref:this.outputRef,className:n,onScroll:this.handleScroll,"aria-live":"polite",role:"log",children:[this.state.output,this.state.newLinesCount>0&&$.jsx("div",{className:"new-lines-notification",onClick:this.handleScrollToBottom,role:"button","aria-live":"off",children:r})]})}};U(ha,"MAX_OUTPUT_LENGTH",5e3),U(ha,"LOCAL_STORAGE_KEY","outputLog");let hv=ha;var dE={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function o(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||c,h),g=n?n+l:l;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],f]:c._events[g].push(f):(c._events[g]=f,c._eventsCount++),c}function s(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,g=new Array(f);h<f;h++)g[h]=d[h].fn;return g},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,g){var m=n?n+l:l;if(!this._events[m])return!1;var C=this._events[m],p=arguments.length,v,S;if(C.fn){switch(C.once&&this.removeListener(l,C.fn,void 0,!0),p){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,u),!0;case 3:return C.fn.call(C.context,u,d),!0;case 4:return C.fn.call(C.context,u,d,h),!0;case 5:return C.fn.call(C.context,u,d,h,f),!0;case 6:return C.fn.call(C.context,u,d,h,f,g),!0}for(S=1,v=new Array(p-1);S<p;S++)v[S-1]=arguments[S];C.fn.apply(C.context,v)}else{var E=C.length,w;for(S=0;S<E;S++)switch(C[S].once&&this.removeListener(l,C[S].fn,void 0,!0),p){case 1:C[S].fn.call(C[S].context);break;case 2:C[S].fn.call(C[S].context,u);break;case 3:C[S].fn.call(C[S].context,u,d);break;case 4:C[S].fn.call(C[S].context,u,d,h);break;default:if(!v)for(w=1,v=new Array(p-1);w<p;w++)v[w-1]=arguments[w];C[S].fn.apply(C[S].context,v)}}return!0},a.prototype.on=function(l,u,d){return o(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return o(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return s(this,f),this;var g=this._events[f];if(g.fn)g.fn===u&&(!h||g.once)&&(!d||g.context===d)&&s(this,f);else{for(var m=0,C=[],p=g.length;m<p;m++)(g[m].fn!==u||h&&!g[m].once||d&&g[m].context!==d)&&C.push(g[m]);C.length?this._events[f]=C.length===1?C[0]:C:s(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(dE);var B2=dE.exports;const hE=fd(B2);var rn={},kp={};kp.byteLength=V2;kp.toByteArray=W2;kp.fromByteArray=z2;var Ni=[],Pr=[],F2=typeof Uint8Array<"u"?Uint8Array:Array,Mg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var rc=0,U2=Mg.length;rc<U2;++rc)Ni[rc]=Mg[rc],Pr[Mg.charCodeAt(rc)]=rc;Pr[45]=62;Pr[95]=63;function fE(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function V2(t){var e=fE(t),n=e[0],r=e[1];return(n+r)*3/4-r}function G2(t,e,n){return(e+n)*3/4-n}function W2(t){var e,n=fE(t),r=n[0],i=n[1],o=new F2(G2(t,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=Pr[t.charCodeAt(c)]<<18|Pr[t.charCodeAt(c+1)]<<12|Pr[t.charCodeAt(c+2)]<<6|Pr[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Pr[t.charCodeAt(c)]<<2|Pr[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=Pr[t.charCodeAt(c)]<<10|Pr[t.charCodeAt(c+1)]<<4|Pr[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function Z2(t){return Ni[t>>18&63]+Ni[t>>12&63]+Ni[t>>6&63]+Ni[t&63]}function j2(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(Z2(r));return i.join("")}function z2(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(j2(t,s,s+o>a?a:s+o));return r===1?(e=t[n-1],i.push(Ni[e>>2]+Ni[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Ni[e>>10]+Ni[e>>4&63]+Ni[e<<2&63]+"=")),i.join("")}var Dy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Dy.read=function(t,e,n,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=o*256+t[e+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=s*256+t[e+d],d+=h,u-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:(f?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-l}return(f?-1:1)*s*Math.pow(2,o-r)};Dy.write=function(t,e,n,r,i,o){var s,a,c,l=o*8-i-1,u=(1<<l)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,g=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(e*c-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=a&255,f+=g,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=s&255,f+=g,s/=256,l-=8);t[n+f-g]|=m*128};(function(t){const e=kp,n=Dy,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const k=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(k,y),k.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(k){if(k>i)throw new RangeError('The value "'+k+'" is invalid for option "size"');const y=new Uint8Array(k);return Object.setPrototypeOf(y,a.prototype),y}function a(k,y,I){if(typeof k=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(k)}return c(k,y,I)}a.poolSize=8192;function c(k,y,I){if(typeof k=="string")return h(k,y);if(ArrayBuffer.isView(k))return g(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Et(k,ArrayBuffer)||k&&Et(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Et(k,SharedArrayBuffer)||k&&Et(k.buffer,SharedArrayBuffer)))return m(k,y,I);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=k.valueOf&&k.valueOf();if(P!=null&&P!==k)return a.from(P,y,I);const O=C(k);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return a.from(k[Symbol.toPrimitive]("string"),y,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}a.from=function(k,y,I){return c(k,y,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function u(k,y,I){return l(k),k<=0?s(k):y!==void 0?typeof I=="string"?s(k).fill(y,I):s(k).fill(y):s(k)}a.alloc=function(k,y,I){return u(k,y,I)};function d(k){return l(k),s(k<0?0:p(k)|0)}a.allocUnsafe=function(k){return d(k)},a.allocUnsafeSlow=function(k){return d(k)};function h(k,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const I=S(k,y)|0;let P=s(I);const O=P.write(k,y);return O!==I&&(P=P.slice(0,O)),P}function f(k){const y=k.length<0?0:p(k.length)|0,I=s(y);for(let P=0;P<y;P+=1)I[P]=k[P]&255;return I}function g(k){if(Et(k,Uint8Array)){const y=new Uint8Array(k);return m(y.buffer,y.byteOffset,y.byteLength)}return f(k)}function m(k,y,I){if(y<0||k.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<y+(I||0))throw new RangeError('"length" is outside of buffer bounds');let P;return y===void 0&&I===void 0?P=new Uint8Array(k):I===void 0?P=new Uint8Array(k,y):P=new Uint8Array(k,y,I),Object.setPrototypeOf(P,a.prototype),P}function C(k){if(a.isBuffer(k)){const y=p(k.length)|0,I=s(y);return I.length===0||k.copy(I,0,0,y),I}if(k.length!==void 0)return typeof k.length!="number"||cr(k.length)?s(0):f(k);if(k.type==="Buffer"&&Array.isArray(k.data))return f(k.data)}function p(k){if(k>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return k|0}function v(k){return+k!=k&&(k=0),a.alloc(+k)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,I){if(Et(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),Et(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(y)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===I)return 0;let P=y.length,O=I.length;for(let V=0,K=Math.min(P,O);V<K;++V)if(y[V]!==I[V]){P=y[V],O=I[V];break}return P<O?-1:O<P?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,I){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let P;if(I===void 0)for(I=0,P=0;P<y.length;++P)I+=y[P].length;const O=a.allocUnsafe(I);let V=0;for(P=0;P<y.length;++P){let K=y[P];if(Et(K,Uint8Array))V+K.length>O.length?(a.isBuffer(K)||(K=a.from(K)),K.copy(O,V)):Uint8Array.prototype.set.call(O,K,V);else if(a.isBuffer(K))K.copy(O,V);else throw new TypeError('"list" argument must be an Array of Buffers');V+=K.length}return O};function S(k,y){if(a.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||Et(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const I=k.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&I===0)return 0;let O=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return Ze(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return He(k).length;default:if(O)return P?-1:Ze(k).length;y=(""+y).toLowerCase(),O=!0}}a.byteLength=S;function E(k,y,I){let P=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,y>>>=0,I<=y))return"";for(k||(k="utf8");;)switch(k){case"hex":return Y(this,y,I);case"utf8":case"utf-8":return j(this,y,I);case"ascii":return te(this,y,I);case"latin1":case"binary":return z(this,y,I);case"base64":return W(this,y,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,y,I);default:if(P)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),P=!0}}a.prototype._isBuffer=!0;function w(k,y,I){const P=k[y];k[y]=k[I],k[I]=P}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<y;I+=2)w(this,I,I+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<y;I+=4)w(this,I,I+3),w(this,I+1,I+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<y;I+=8)w(this,I,I+7),w(this,I+1,I+6),w(this,I+2,I+5),w(this,I+3,I+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?j(this,0,y):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const I=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,I,P,O,V){if(Et(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(I===void 0&&(I=0),P===void 0&&(P=y?y.length:0),O===void 0&&(O=0),V===void 0&&(V=this.length),I<0||P>y.length||O<0||V>this.length)throw new RangeError("out of range index");if(O>=V&&I>=P)return 0;if(O>=V)return-1;if(I>=P)return 1;if(I>>>=0,P>>>=0,O>>>=0,V>>>=0,this===y)return 0;let K=V-O,Pe=P-I;const et=Math.min(K,Pe),tt=this.slice(O,V),ot=y.slice(I,P);for(let $e=0;$e<et;++$e)if(tt[$e]!==ot[$e]){K=tt[$e],Pe=ot[$e];break}return K<Pe?-1:Pe<K?1:0};function A(k,y,I,P,O){if(k.length===0)return-1;if(typeof I=="string"?(P=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,cr(I)&&(I=O?0:k.length-1),I<0&&(I=k.length+I),I>=k.length){if(O)return-1;I=k.length-1}else if(I<0)if(O)I=0;else return-1;if(typeof y=="string"&&(y=a.from(y,P)),a.isBuffer(y))return y.length===0?-1:T(k,y,I,P,O);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(k,y,I):Uint8Array.prototype.lastIndexOf.call(k,y,I):T(k,[y],I,P,O);throw new TypeError("val must be string, number or Buffer")}function T(k,y,I,P,O){let V=1,K=k.length,Pe=y.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(k.length<2||y.length<2)return-1;V=2,K/=2,Pe/=2,I/=2}function et(ot,$e){return V===1?ot[$e]:ot.readUInt16BE($e*V)}let tt;if(O){let ot=-1;for(tt=I;tt<K;tt++)if(et(k,tt)===et(y,ot===-1?0:tt-ot)){if(ot===-1&&(ot=tt),tt-ot+1===Pe)return ot*V}else ot!==-1&&(tt-=tt-ot),ot=-1}else for(I+Pe>K&&(I=K-Pe),tt=I;tt>=0;tt--){let ot=!0;for(let $e=0;$e<Pe;$e++)if(et(k,tt+$e)!==et(y,$e)){ot=!1;break}if(ot)return tt}return-1}a.prototype.includes=function(y,I,P){return this.indexOf(y,I,P)!==-1},a.prototype.indexOf=function(y,I,P){return A(this,y,I,P,!0)},a.prototype.lastIndexOf=function(y,I,P){return A(this,y,I,P,!1)};function x(k,y,I,P){I=Number(I)||0;const O=k.length-I;P?(P=Number(P),P>O&&(P=O)):P=O;const V=y.length;P>V/2&&(P=V/2);let K;for(K=0;K<P;++K){const Pe=parseInt(y.substr(K*2,2),16);if(cr(Pe))return K;k[I+K]=Pe}return K}function _(k,y,I,P){return bt(Ze(y,k.length-I),k,I,P)}function M(k,y,I,P){return bt(Ve(y),k,I,P)}function D(k,y,I,P){return bt(He(y),k,I,P)}function F(k,y,I,P){return bt(Te(y,k.length-I),k,I,P)}a.prototype.write=function(y,I,P,O){if(I===void 0)O="utf8",P=this.length,I=0;else if(P===void 0&&typeof I=="string")O=I,P=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(P)?(P=P>>>0,O===void 0&&(O="utf8")):(O=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const V=this.length-I;if((P===void 0||P>V)&&(P=V),y.length>0&&(P<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let K=!1;for(;;)switch(O){case"hex":return x(this,y,I,P);case"utf8":case"utf-8":return _(this,y,I,P);case"ascii":case"latin1":case"binary":return M(this,y,I,P);case"base64":return D(this,y,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,y,I,P);default:if(K)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(k,y,I){return y===0&&I===k.length?e.fromByteArray(k):e.fromByteArray(k.slice(y,I))}function j(k,y,I){I=Math.min(k.length,I);const P=[];let O=y;for(;O<I;){const V=k[O];let K=null,Pe=V>239?4:V>223?3:V>191?2:1;if(O+Pe<=I){let et,tt,ot,$e;switch(Pe){case 1:V<128&&(K=V);break;case 2:et=k[O+1],(et&192)===128&&($e=(V&31)<<6|et&63,$e>127&&(K=$e));break;case 3:et=k[O+1],tt=k[O+2],(et&192)===128&&(tt&192)===128&&($e=(V&15)<<12|(et&63)<<6|tt&63,$e>2047&&($e<55296||$e>57343)&&(K=$e));break;case 4:et=k[O+1],tt=k[O+2],ot=k[O+3],(et&192)===128&&(tt&192)===128&&(ot&192)===128&&($e=(V&15)<<18|(et&63)<<12|(tt&63)<<6|ot&63,$e>65535&&$e<1114112&&(K=$e))}}K===null?(K=65533,Pe=1):K>65535&&(K-=65536,P.push(K>>>10&1023|55296),K=56320|K&1023),P.push(K),O+=Pe}return q(P)}const H=4096;function q(k){const y=k.length;if(y<=H)return String.fromCharCode.apply(String,k);let I="",P=0;for(;P<y;)I+=String.fromCharCode.apply(String,k.slice(P,P+=H));return I}function te(k,y,I){let P="";I=Math.min(k.length,I);for(let O=y;O<I;++O)P+=String.fromCharCode(k[O]&127);return P}function z(k,y,I){let P="";I=Math.min(k.length,I);for(let O=y;O<I;++O)P+=String.fromCharCode(k[O]);return P}function Y(k,y,I){const P=k.length;(!y||y<0)&&(y=0),(!I||I<0||I>P)&&(I=P);let O="";for(let V=y;V<I;++V)O+=zn[k[V]];return O}function ie(k,y,I){const P=k.slice(y,I);let O="";for(let V=0;V<P.length-1;V+=2)O+=String.fromCharCode(P[V]+P[V+1]*256);return O}a.prototype.slice=function(y,I){const P=this.length;y=~~y,I=I===void 0?P:~~I,y<0?(y+=P,y<0&&(y=0)):y>P&&(y=P),I<0?(I+=P,I<0&&(I=0)):I>P&&(I=P),I<y&&(I=y);const O=this.subarray(y,I);return Object.setPrototypeOf(O,a.prototype),O};function Z(k,y,I){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+y>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,I,P){y=y>>>0,I=I>>>0,P||Z(y,I,this.length);let O=this[y],V=1,K=0;for(;++K<I&&(V*=256);)O+=this[y+K]*V;return O},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,I,P){y=y>>>0,I=I>>>0,P||Z(y,I,this.length);let O=this[y+--I],V=1;for(;I>0&&(V*=256);)O+=this[y+--I]*V;return O},a.prototype.readUint8=a.prototype.readUInt8=function(y,I){return y=y>>>0,I||Z(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,I){return y=y>>>0,I||Z(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,I){return y=y>>>0,I||Z(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,I){return y=y>>>0,I||Z(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,I){return y=y>>>0,I||Z(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=yn(function(y){y=y>>>0,ar(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&jr(y,this.length-8);const O=I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,V=this[++y]+this[++y]*2**8+this[++y]*2**16+P*2**24;return BigInt(O)+(BigInt(V)<<BigInt(32))}),a.prototype.readBigUInt64BE=yn(function(y){y=y>>>0,ar(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&jr(y,this.length-8);const O=I*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],V=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+P;return(BigInt(O)<<BigInt(32))+BigInt(V)}),a.prototype.readIntLE=function(y,I,P){y=y>>>0,I=I>>>0,P||Z(y,I,this.length);let O=this[y],V=1,K=0;for(;++K<I&&(V*=256);)O+=this[y+K]*V;return V*=128,O>=V&&(O-=Math.pow(2,8*I)),O},a.prototype.readIntBE=function(y,I,P){y=y>>>0,I=I>>>0,P||Z(y,I,this.length);let O=I,V=1,K=this[y+--O];for(;O>0&&(V*=256);)K+=this[y+--O]*V;return V*=128,K>=V&&(K-=Math.pow(2,8*I)),K},a.prototype.readInt8=function(y,I){return y=y>>>0,I||Z(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,I){y=y>>>0,I||Z(y,2,this.length);const P=this[y]|this[y+1]<<8;return P&32768?P|4294901760:P},a.prototype.readInt16BE=function(y,I){y=y>>>0,I||Z(y,2,this.length);const P=this[y+1]|this[y]<<8;return P&32768?P|4294901760:P},a.prototype.readInt32LE=function(y,I){return y=y>>>0,I||Z(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,I){return y=y>>>0,I||Z(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=yn(function(y){y=y>>>0,ar(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&jr(y,this.length-8);const O=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(P<<24);return(BigInt(O)<<BigInt(32))+BigInt(I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=yn(function(y){y=y>>>0,ar(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&jr(y,this.length-8);const O=(I<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(O)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+P)}),a.prototype.readFloatLE=function(y,I){return y=y>>>0,I||Z(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,I){return y=y>>>0,I||Z(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,I){return y=y>>>0,I||Z(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,I){return y=y>>>0,I||Z(y,8,this.length),n.read(this,y,!1,52,8)};function ne(k,y,I,P,O,V){if(!a.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>O||y<V)throw new RangeError('"value" argument is out of bounds');if(I+P>k.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,I,P,O){if(y=+y,I=I>>>0,P=P>>>0,!O){const Pe=Math.pow(2,8*P)-1;ne(this,y,I,P,Pe,0)}let V=1,K=0;for(this[I]=y&255;++K<P&&(V*=256);)this[I+K]=y/V&255;return I+P},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,I,P,O){if(y=+y,I=I>>>0,P=P>>>0,!O){const Pe=Math.pow(2,8*P)-1;ne(this,y,I,P,Pe,0)}let V=P-1,K=1;for(this[I+V]=y&255;--V>=0&&(K*=256);)this[I+V]=y/K&255;return I+P},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,1,255,0),this[I]=y&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,2,65535,0),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,2,65535,0),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,4,4294967295,0),this[I+3]=y>>>24,this[I+2]=y>>>16,this[I+1]=y>>>8,this[I]=y&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,4,4294967295,0),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4};function Ee(k,y,I,P,O){$t(y,P,O,k,I,7);let V=Number(y&BigInt(4294967295));k[I++]=V,V=V>>8,k[I++]=V,V=V>>8,k[I++]=V,V=V>>8,k[I++]=V;let K=Number(y>>BigInt(32)&BigInt(4294967295));return k[I++]=K,K=K>>8,k[I++]=K,K=K>>8,k[I++]=K,K=K>>8,k[I++]=K,I}function xe(k,y,I,P,O){$t(y,P,O,k,I,7);let V=Number(y&BigInt(4294967295));k[I+7]=V,V=V>>8,k[I+6]=V,V=V>>8,k[I+5]=V,V=V>>8,k[I+4]=V;let K=Number(y>>BigInt(32)&BigInt(4294967295));return k[I+3]=K,K=K>>8,k[I+2]=K,K=K>>8,k[I+1]=K,K=K>>8,k[I]=K,I+8}a.prototype.writeBigUInt64LE=yn(function(y,I=0){return Ee(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=yn(function(y,I=0){return xe(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,I,P,O){if(y=+y,I=I>>>0,!O){const et=Math.pow(2,8*P-1);ne(this,y,I,P,et-1,-et)}let V=0,K=1,Pe=0;for(this[I]=y&255;++V<P&&(K*=256);)y<0&&Pe===0&&this[I+V-1]!==0&&(Pe=1),this[I+V]=(y/K>>0)-Pe&255;return I+P},a.prototype.writeIntBE=function(y,I,P,O){if(y=+y,I=I>>>0,!O){const et=Math.pow(2,8*P-1);ne(this,y,I,P,et-1,-et)}let V=P-1,K=1,Pe=0;for(this[I+V]=y&255;--V>=0&&(K*=256);)y<0&&Pe===0&&this[I+V+1]!==0&&(Pe=1),this[I+V]=(y/K>>0)-Pe&255;return I+P},a.prototype.writeInt8=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,1,127,-128),y<0&&(y=255+y+1),this[I]=y&255,I+1},a.prototype.writeInt16LE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,2,32767,-32768),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeInt16BE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,2,32767,-32768),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeInt32LE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,4,2147483647,-2147483648),this[I]=y&255,this[I+1]=y>>>8,this[I+2]=y>>>16,this[I+3]=y>>>24,I+4},a.prototype.writeInt32BE=function(y,I,P){return y=+y,I=I>>>0,P||ne(this,y,I,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4},a.prototype.writeBigInt64LE=yn(function(y,I=0){return Ee(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=yn(function(y,I=0){return xe(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(k,y,I,P,O,V){if(I+P>k.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Ae(k,y,I,P,O){return y=+y,I=I>>>0,O||me(k,y,I,4),n.write(k,y,I,P,23,4),I+4}a.prototype.writeFloatLE=function(y,I,P){return Ae(this,y,I,!0,P)},a.prototype.writeFloatBE=function(y,I,P){return Ae(this,y,I,!1,P)};function Xe(k,y,I,P,O){return y=+y,I=I>>>0,O||me(k,y,I,8),n.write(k,y,I,P,52,8),I+8}a.prototype.writeDoubleLE=function(y,I,P){return Xe(this,y,I,!0,P)},a.prototype.writeDoubleBE=function(y,I,P){return Xe(this,y,I,!1,P)},a.prototype.copy=function(y,I,P,O){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(P||(P=0),!O&&O!==0&&(O=this.length),I>=y.length&&(I=y.length),I||(I=0),O>0&&O<P&&(O=P),O===P||y.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),y.length-I<O-P&&(O=y.length-I+P);const V=O-P;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,P,O):Uint8Array.prototype.set.call(y,this.subarray(P,O),I),V},a.prototype.fill=function(y,I,P,O){if(typeof y=="string"){if(typeof I=="string"?(O=I,I=0,P=this.length):typeof P=="string"&&(O=P,P=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!a.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(y.length===1){const K=y.charCodeAt(0);(O==="utf8"&&K<128||O==="latin1")&&(y=K)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(I<0||this.length<I||this.length<P)throw new RangeError("Out of range index");if(P<=I)return this;I=I>>>0,P=P===void 0?this.length:P>>>0,y||(y=0);let V;if(typeof y=="number")for(V=I;V<P;++V)this[V]=y;else{const K=a.isBuffer(y)?y:a.from(y,O),Pe=K.length;if(Pe===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(V=0;V<P-I;++V)this[V+I]=K[V%Pe]}return this};const he={};function xn(k,y,I){he[k]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}xn("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),xn("ERR_INVALID_ARG_TYPE",function(k,y){return`The "${k}" argument must be of type number. Received type ${typeof y}`},TypeError),xn("ERR_OUT_OF_RANGE",function(k,y,I){let P=`The value of "${k}" is out of range.`,O=I;return Number.isInteger(I)&&Math.abs(I)>2**32?O=jn(String(I)):typeof I=="bigint"&&(O=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(O=jn(O)),O+="n"),P+=` It must be ${y}. Received ${O}`,P},RangeError);function jn(k){let y="",I=k.length;const P=k[0]==="-"?1:0;for(;I>=P+4;I-=3)y=`_${k.slice(I-3,I)}${y}`;return`${k.slice(0,I)}${y}`}function Ct(k,y,I){ar(y,"offset"),(k[y]===void 0||k[y+I]===void 0)&&jr(y,k.length-(I+1))}function $t(k,y,I,P,O,V){if(k>I||k<y){const K=typeof y=="bigint"?"n":"";let Pe;throw V>3?y===0||y===BigInt(0)?Pe=`>= 0${K} and < 2${K} ** ${(V+1)*8}${K}`:Pe=`>= -(2${K} ** ${(V+1)*8-1}${K}) and < 2 ** ${(V+1)*8-1}${K}`:Pe=`>= ${y}${K} and <= ${I}${K}`,new he.ERR_OUT_OF_RANGE("value",Pe,k)}Ct(P,O,V)}function ar(k,y){if(typeof k!="number")throw new he.ERR_INVALID_ARG_TYPE(y,"number",k)}function jr(k,y,I){throw Math.floor(k)!==k?(ar(k,I),new he.ERR_OUT_OF_RANGE(I||"offset","an integer",k)):y<0?new he.ERR_BUFFER_OUT_OF_BOUNDS:new he.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${y}`,k)}const ae=/[^+/0-9A-Za-z-_]/g;function pe(k){if(k=k.split("=")[0],k=k.trim().replace(ae,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Ze(k,y){y=y||1/0;let I;const P=k.length;let O=null;const V=[];for(let K=0;K<P;++K){if(I=k.charCodeAt(K),I>55295&&I<57344){if(!O){if(I>56319){(y-=3)>-1&&V.push(239,191,189);continue}else if(K+1===P){(y-=3)>-1&&V.push(239,191,189);continue}O=I;continue}if(I<56320){(y-=3)>-1&&V.push(239,191,189),O=I;continue}I=(O-55296<<10|I-56320)+65536}else O&&(y-=3)>-1&&V.push(239,191,189);if(O=null,I<128){if((y-=1)<0)break;V.push(I)}else if(I<2048){if((y-=2)<0)break;V.push(I>>6|192,I&63|128)}else if(I<65536){if((y-=3)<0)break;V.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((y-=4)<0)break;V.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return V}function Ve(k){const y=[];for(let I=0;I<k.length;++I)y.push(k.charCodeAt(I)&255);return y}function Te(k,y){let I,P,O;const V=[];for(let K=0;K<k.length&&!((y-=2)<0);++K)I=k.charCodeAt(K),P=I>>8,O=I%256,V.push(O),V.push(P);return V}function He(k){return e.toByteArray(pe(k))}function bt(k,y,I,P){let O;for(O=0;O<P&&!(O+I>=y.length||O>=k.length);++O)y[O+I]=k[O];return O}function Et(k,y){return k instanceof y||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===y.name}function cr(k){return k!==k}const zn=function(){const k="0123456789abcdef",y=new Array(256);for(let I=0;I<16;++I){const P=I*16;for(let O=0;O<16;++O)y[P+O]=k[I]+k[O]}return y}();function yn(k){return typeof BigInt>"u"?Qa:k}function Qa(){throw new Error("BigInt not supported")}})(rn);var iu=(t=>(t[t.BINARY=0]="BINARY",t[t.ECHO=1]="ECHO",t[t.RCP=2]="RCP",t[t.SUPPRESS_GO_AHEAD=3]="SUPPRESS_GO_AHEAD",t[t.APPROX_MESSAGE_SIZE_NEGOTIATION=4]="APPROX_MESSAGE_SIZE_NEGOTIATION",t[t.STATUS=5]="STATUS",t[t.TIMING_MARK=6]="TIMING_MARK",t[t.REMOTE_CONTROLLED_TRANSMISSION_ECHO=7]="REMOTE_CONTROLLED_TRANSMISSION_ECHO",t[t.OUTPUT_LINE_WIDTH=8]="OUTPUT_LINE_WIDTH",t[t.OUTPUT_PAGE_SIZE=9]="OUTPUT_PAGE_SIZE",t[t.OUTPUT_CARRIAGE_RETURN_DISPOSITION=10]="OUTPUT_CARRIAGE_RETURN_DISPOSITION",t[t.OUTPUT_HORIZONTAL_TAB_STOPS=11]="OUTPUT_HORIZONTAL_TAB_STOPS",t[t.OUTPUT_HORIZONTAL_TAB_DISPOSITION=12]="OUTPUT_HORIZONTAL_TAB_DISPOSITION",t[t.OUTPUT_FORMFEED_DISPOSITION=13]="OUTPUT_FORMFEED_DISPOSITION",t[t.OUTPUT_VERTICAL_TAB_STOPS=14]="OUTPUT_VERTICAL_TAB_STOPS",t[t.OUTPUT_VERTICAL_TAB_DISPOSITION=15]="OUTPUT_VERTICAL_TAB_DISPOSITION",t[t.OUTPUT_LINEFEED_DISPOSITION=16]="OUTPUT_LINEFEED_DISPOSITION",t[t.EXTENDED_ASCII=17]="EXTENDED_ASCII",t[t.LOGOUT=18]="LOGOUT",t[t.BYTE_MACRO=19]="BYTE_MACRO",t[t.DATA_ENTRY_TERMINAL=20]="DATA_ENTRY_TERMINAL",t[t.SUPDUP=21]="SUPDUP",t[t.SUPDUP_OUTPUT=22]="SUPDUP_OUTPUT",t[t.SEND_LOCATION=23]="SEND_LOCATION",t[t.TERMINAL_TYPE=24]="TERMINAL_TYPE",t[t.END_OF_RECORD=25]="END_OF_RECORD",t[t.TACACS_USER_IDENTIFICATION=26]="TACACS_USER_IDENTIFICATION",t[t.OUTPUT_MARKING=27]="OUTPUT_MARKING",t[t.TERMINAL_LOCATION_NUMBER=28]="TERMINAL_LOCATION_NUMBER",t[t.TELNET_3270_REGIME=29]="TELNET_3270_REGIME",t[t.X_3_PAD=30]="X_3_PAD",t[t.NAWS=31]="NAWS",t[t.TERMINAL_SPEED=32]="TERMINAL_SPEED",t[t.REMOTE_FLOW_CONTROL=33]="REMOTE_FLOW_CONTROL",t[t.LINEMODE=34]="LINEMODE",t[t.X_DISPLAY_LOCATION=35]="X_DISPLAY_LOCATION",t[t.ENVIRONMENT_OPTION=36]="ENVIRONMENT_OPTION",t[t.AUTHENTICATION_OPTION=37]="AUTHENTICATION_OPTION",t[t.ENCRYPTION_OPTION=38]="ENCRYPTION_OPTION",t[t.NEW_ENVIRONMENT_OPTION=39]="NEW_ENVIRONMENT_OPTION",t[t.TN3270E=40]="TN3270E",t[t.XAUTH=41]="XAUTH",t[t.CHARSET=42]="CHARSET",t[t.RSP=43]="RSP",t[t.COM_PORT_OPTION=44]="COM_PORT_OPTION",t[t.SUPPRESS_LOCAL_ECHO=45]="SUPPRESS_LOCAL_ECHO",t[t.START_TLS=46]="START_TLS",t[t.KERMIT=47]="KERMIT",t[t.SEND_URL=48]="SEND_URL",t[t.FORWARD_X=49]="FORWARD_X",t[t.PRAGMA_LOGON=138]="PRAGMA_LOGON",t[t.GMCP=201]="GMCP",t))(iu||{}),ou=(t=>(t[t.SE=240]="SE",t[t.NOP=241]="NOP",t[t.DM=242]="DM",t[t.BRK=243]="BRK",t[t.IP=244]="IP",t[t.AO=245]="AO",t[t.AYT=246]="AYT",t[t.EC=247]="EC",t[t.EL=248]="EL",t[t.GA=249]="GA",t[t.SB=250]="SB",t[t.WILL=251]="WILL",t[t.WONT=252]="WONT",t[t.DO=253]="DO",t[t.DONT=254]="DONT",t[t.IAC=255]="IAC",t))(ou||{});class H2{constructor(e){U(this,"ws");this.ws=e}on(e,n){if(e==="data"){this.ws.onmessage=i=>{n(i.data)};return}const r="on"+e;this[r]=n}write(e){this.ws.send(e)}}class X2 extends hE{constructor(n){super();U(this,"state");U(this,"buffer");U(this,"subBuffer");U(this,"iacSEBuffer",rn.Buffer.from([255,240]));U(this,"negotiationByte",0);U(this,"stream");this.state=0,this.buffer=rn.Buffer.alloc(0),this.subBuffer=rn.Buffer.alloc(0),n&&n.on("data",r=>this.parse(r)),this.stream=n}parse(n){for(this.buffer=rn.Buffer.concat([this.buffer,rn.Buffer.from(n)]);this.buffer.length>0;){let r;switch(this.state){case 0:this.handleData();break;case 1:if(r=this.handleCommand(),r)return;break;case 2:if(r=this.handleSubnegotiation(),r)return;break;case 3:if(r=this.handleNegotiation(),r)return;break}}}handleData(){const n=this.buffer.indexOf(255);if(n===-1){this.emit("data",this.buffer),this.buffer=rn.Buffer.alloc(0);return}this.emit("data",this.buffer.slice(0,n)),this.buffer=this.buffer.slice(n),this.state=1}handleCommand(){if(this.buffer.length<2)return!0;const n=this.buffer[1];switch(this.buffer=this.buffer.slice(2),n){case 241:this.emit("command",241),this.state=0;break;case 250:this.subBuffer=rn.Buffer.alloc(0),this.state=2;break;case 253:case 254:case 251:case 252:this.negotiationByte=n,this.state=3;break;default:this.state=0;break}return!1}handleNegotiation(){if(this.buffer.length<1)return!0;const n=this.negotiationByte,r=this.buffer[0];return this.buffer=this.buffer.slice(1),this.emit("negotiation",n,r),this.state=0,!1}handleSubnegotiation(){let n=this.buffer.indexOf(this.iacSEBuffer);if(n===-1)return!0;this.state=0;let r=this.buffer.slice(0,n);return r[0]===201?this.handleGmcp(r.slice(1)):this.emit("subnegotiation",r),this.buffer=this.buffer.slice(n+2),!1}handleGmcp(n){const r=n.toString(),[i,o]=r.split(/ +(.+?)$/,2);this.emit("gmcp",i,o)}sendNegotiation(n,r){this.stream.write(rn.Buffer.from([255,n,r]))}sendGmcp(n,r){const i=n+" "+r,o=rn.Buffer.from(i),s=rn.Buffer.concat([rn.Buffer.from([255,250]),rn.Buffer.from([201]),o,this.iacSEBuffer]);this.stream.write(s)}sendTerminalType(n){const r=rn.Buffer.from(n),i=rn.Buffer.concat([rn.Buffer.from([255,250]),rn.Buffer.from([24,0]),r,this.iacSEBuffer]);this.stream.write(i)}}class ns{constructor(e){U(this,"packageName");U(this,"packageVersion",1);U(this,"client");this.client=e}sendData(e,n){this.client.sendGmcp(this.packageName+"."+e,JSON.stringify(n))}shutdown(){}}class $2 extends ns{constructor(){super(...arguments);U(this,"packageName","Auth.Autologin")}handleToken(n){localStorage.setItem("LoginRefreshToken",n)}sendLogin(){var n=localStorage.getItem("LoginRefreshToken");n&&this.sendData("Login",n)}}class K2 extends ns{constructor(){super(...arguments);U(this,"packageName","Char")}handleName(n){this.client.worldData.playerId=n.name,this.client.worldData.playerName=n.fullname,this.client.emit("statustext",`Logged in as ${n.fullname}`)}sendLogin(n,r){this.client.sendGmcp("Char.Login",JSON.stringify({name:n,password:r}))}}class J2 extends ns{constructor(n){super(n);U(this,"packageName","Client.Keystrokes");U(this,"bindings",[]);U(this,"boundKeyUpHandler");document.addEventListener("keydown",r=>this.handleKeydown(r))}handleKeydown(n){const r=this.findBinding(n);if(r){n.preventDefault();const i=this.client.getInput(),o=this.parseCommand(r.command,i);r.autosend?this.client.sendCommand(o):this.placeInInputField(o)}}shutdown(){document.removeEventListener("keydown",n=>this.handleKeydown(n))}findBinding(n){try{return this.bindings.find(r=>{if(r.key.toLowerCase()!==n.key.toLowerCase())return!1;const i=new Set([n.altKey&&"Alt",n.ctrlKey&&"Control",n.shiftKey&&"Shift",n.metaKey&&"Meta"].filter(Boolean));return r.modifiers&&r.modifiers.every(o=>i.has(o))})}catch(r){console.error("Error in finding key binding: ",r);return}}parseCommand(n,r){const i=r.trim().split(/\s+/);return n.replace(/%(\d+|\*)/g,(o,s)=>{if(s==="*")return r;const a=parseInt(s,10)-1;return a>=0&&a<i.length?i[a]:o})}placeInInputField(n){this.client.setInput(n)}bindKey(n){const r={key:n.key,modifiers:n.modifiers,command:n.command,autosend:n.autosend};this.bindings.push(r)}unbindKey(n){this.bindings=this.bindings.filter(r=>!(r.key===n.key&&r.modifiers.length===n.modifiers.length&&r.modifiers.every(i=>n.modifiers.includes(i))))}unbindAll(){this.bindings=[]}handleBind(n){this.bindKey(n)}handleUnbind(n){this.unbindKey(n)}handleBind_all(n){this.bindings=n.bindings.map(r=>({...r}))}listBindings(){return[...this.bindings]}}const qS=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),eb=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),fv=(t,e)=>({startTime:e,type:"setValue",value:t}),pE=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),gE=(t,e,{startTime:n,target:r,timeConstant:i})=>r+(e-r)*Math.exp((n-t)/i),wc=t=>t.type==="exponentialRampToValue",Nf=t=>t.type==="linearRampToValue",Cs=t=>wc(t)||Nf(t),Ly=t=>t.type==="setValue",ao=t=>t.type==="setValueCurve",_f=(t,e,n,r)=>{const i=t[e];return i===void 0?r:Cs(i)||Ly(i)?i.value:ao(i)?i.values[i.values.length-1]:gE(n,_f(t,e-1,i.startTime,r),i)},tb=(t,e,n,r,i)=>n===void 0?[r.insertTime,i]:Cs(n)?[n.endTime,n.value]:Ly(n)?[n.startTime,n.value]:ao(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,_f(t,e-1,n.startTime,i)],pv=t=>t.type==="cancelAndHold",gv=t=>t.type==="cancelScheduledValues",ls=t=>pv(t)||gv(t)?t.cancelTime:wc(t)||Nf(t)?t.endTime:t.startTime,nb=(t,e,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(r-e)):0,rb=(t,e,n,{endTime:r,value:i})=>n+(t-e)/(r-e)*(i-n),Y2=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},Q2=(t,{duration:e,startTime:n,values:r})=>{const i=(t-n)/e*(r.length-1);return Y2(r,i)},rh=t=>t.type==="setTarget";class q2{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=ls(e);if(pv(e)||gv(e)){const r=this._automationEvents.findIndex(o=>gv(e)&&ao(o)?o.startTime+o.duration>=n:ls(o)>=n),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),pv(e)){const o=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&Cs(i)){if(o!==void 0&&rh(o))throw new Error("The internal list is malformed.");const s=o===void 0?i.insertTime:ao(o)?o.startTime+o.duration:ls(o),a=o===void 0?this._defaultValue:ao(o)?o.values[o.values.length-1]:o.value,c=wc(i)?nb(n,s,a,i):rb(n,s,a,i),l=wc(i)?qS(c,n,this._currenTime):eb(c,n,this._currenTime);this._automationEvents.push(l)}if(o!==void 0&&rh(o)&&this._automationEvents.push(fv(this.getValue(n),n)),o!==void 0&&ao(o)&&o.startTime+o.duration>n){const s=n-o.startTime,a=(o.values.length-1)/o.duration,c=Math.max(2,1+Math.ceil(s*a)),l=s/(c-1)*a,u=o.values.slice(0,c);if(l<1)for(let d=1;d<c;d+=1){const h=l*d%1;u[d]=o.values[d-1]*(1-h)+o.values[d]*h}this._automationEvents[this._automationEvents.length-1]=pE(u,o.startTime,s)}}}else{const r=this._automationEvents.findIndex(s=>ls(s)>n),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&ao(i)&&ls(i)+i.duration>n)return!1;const o=wc(e)?qS(e.value,e.endTime,this._currenTime):Nf(e)?eb(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(o);else{if(ao(e)&&n+e.duration>ls(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,o)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>ls(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),i=r[0];rh(i)&&r.unshift(fv(_f(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(s=>ls(s)>e),r=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,o=this._automationEvents[i];if(o!==void 0&&rh(o)&&(r===void 0||!Cs(r)||r.insertTime>e))return gE(e,_f(this._automationEvents,i-1,o.startTime,this._defaultValue),o);if(o!==void 0&&Ly(o)&&(r===void 0||!Cs(r)))return o.value;if(o!==void 0&&ao(o)&&(r===void 0||!Cs(r)||o.startTime+o.duration>e))return e<o.startTime+o.duration?Q2(e,o):o.values[o.values.length-1];if(o!==void 0&&Cs(o)&&(r===void 0||!Cs(r)))return o.value;if(r!==void 0&&wc(r)){const[s,a]=tb(this._automationEvents,i,o,r,this._defaultValue);return nb(e,s,a,r)}if(r!==void 0&&Nf(r)){const[s,a]=tb(this._automationEvents,i,o,r,this._defaultValue);return rb(e,s,a,r)}return this._defaultValue}}const eL=t=>({cancelTime:t,type:"cancelAndHold"}),tL=t=>({cancelTime:t,type:"cancelScheduledValues"}),nL=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),rL=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),iL=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),oL=()=>new DOMException("","AbortError"),sL=t=>(e,n,[r,i,o],s)=>{t(e[i],[n,r,o],a=>a[0]===n&&a[1]===r,s)},aL=t=>(e,n,r)=>{const i=[];for(let o=0;o<r.numberOfInputs;o+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},cL=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},rl=new WeakSet,mE=new WeakMap,vE=new WeakMap,yE=new WeakMap,CE=new WeakMap,IE=new WeakMap,SE=new WeakMap,mv=new WeakMap,vv=new WeakMap,yv=new WeakMap,bE={construct(){return bE}},lL=t=>{try{const e=new Proxy(t,bE);new e}catch{return!1}return!0},ib=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,ob=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),i=r.match(ib);for(;i!==null;){const o=i[1].slice(1,-1),s=i[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());n.push(s),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(ib)}return[n.join(";"),r]},sb=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},ab=t=>{if(!lL(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},uL=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>{let f=0;return(g,m,C={credentials:"omit"})=>{const p=u.get(g);if(p!==void 0&&p.has(m))return Promise.resolve();const v=l.get(g);if(v!==void 0){const w=v.get(m);if(w!==void 0)return w}const S=o(g),E=S.audioWorklet===void 0?i(m).then(([w,A])=>{const[T,x]=ob(w,A),_=`${T};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${x}
})})(window,'_AWGS')`;return n(_)}).then(()=>{const w=h._AWGS.pop();if(w===void 0)throw new SyntaxError;r(S.currentTime,S.sampleRate,()=>w(class{},void 0,(A,T)=>{if(A.trim()==="")throw e();const x=vv.get(S);if(x!==void 0){if(x.has(A))throw e();ab(T),sb(T.parameterDescriptors),x.set(A,T)}else ab(T),sb(T.parameterDescriptors),vv.set(S,new Map([[A,T]]))},S.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(t(d,d))]).then(([[w,A],T])=>{const x=f+1;f=x;const[_,M]=ob(w,A),j=`${_};((AudioWorkletProcessor,registerProcessor)=>{${M}
})(${T?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${T?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${T?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${x}',class extends AudioWorkletProcessor{process(){return !1}})`,H=new Blob([j],{type:"application/javascript; charset=utf-8"}),q=URL.createObjectURL(H);return S.audioWorklet.addModule(q,C).then(()=>{if(a(S))return S;const te=s(S);return te.audioWorklet.addModule(q,C).then(()=>te)}).then(te=>{if(c===null)throw new SyntaxError;try{new c(te,`__sac${x}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(q))});return v===void 0?l.set(g,new Map([[m,E]])):v.set(m,E),E.then(()=>{const w=u.get(g);w===void 0?u.set(g,new Set([m])):w.add(m)}).finally(()=>{const w=l.get(g);w!==void 0&&w.delete(m)}),E}},yi=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Ep=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},wE=(t,e,n,r)=>{const i=yi(t,e),o=Ep(i,s=>s[0]===n&&s[1]===r);return i.size===0&&t.delete(e),o},Sd=t=>yi(SE,t),il=t=>{if(rl.has(t))throw new Error("The AudioNode is already stored.");rl.add(t),Sd(t).forEach(e=>e(!0))},AE=t=>"port"in t,bd=t=>{if(!rl.has(t))throw new Error("The AudioNode is not stored.");rl.delete(t),Sd(t).forEach(e=>e(!1))},Cv=(t,e)=>{!AE(t)&&e.every(n=>n.size===0)&&bd(t)},dL=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>{const f=new WeakMap;return(g,m,C,p,v)=>{const{activeInputs:S,passiveInputs:E}=o(m),{outputs:w}=o(g),A=a(g),T=x=>{const _=c(m),M=c(g);if(x){const D=wE(E,g,C,p);t(S,g,D,!1),!v&&!d(g)&&n(M,_,C,p),h(m)&&il(m)}else{const D=r(S,g,C,p);e(E,p,D,!1),!v&&!d(g)&&i(M,_,C,p);const F=s(m);if(F===0)u(m)&&Cv(m,S);else{const W=f.get(m);W!==void 0&&clearTimeout(W),f.set(m,setTimeout(()=>{u(m)&&Cv(m,S)},F*1e3))}}};return l(w,[m,C,p],x=>x[0]===m&&x[1]===C&&x[2]===p,!0)?(A.add(T),u(g)?t(S,g,[C,p,T],!0):e(E,p,[g,C,T],!0),!0):!1}},hL=t=>(e,n,[r,i,o],s)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,n,o]])):t(a,[i,n,o],c=>c[0]===i&&c[1]===n,s)},fL=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)},pL=t=>(e,n)=>{t(e).add(n)},gL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},mL=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...gL,...c},d=r(l,u),h=o(l)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Tn=(t,e)=>t.context===e,vL=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Tn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},Iv=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},eo=()=>new DOMException("","IndexSizeError"),kE=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?eo():r}})(t.getChannelData)},yL={numberOfChannels:1},CL=(t,e,n,r,i,o,s,a)=>{let c=null;return class EE{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}={...yL,...u};c===null&&(c=new i(1,1,44100));const g=r!==null&&e(o,o)?new r({length:d,numberOfChannels:h,sampleRate:f}):c.createBuffer(h,d,f);if(g.numberOfChannels===0)throw n();return typeof g.copyFromChannel!="function"?(s(g),kE(g)):e(Iv,()=>Iv(g))||a(g),t.add(g),g}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===EE.prototype||t.has(u)}}},Yn=-34028234663852886e22,_n=-Yn,Go=t=>rl.has(t),IL={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},SL=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...IL,...u},f=i(d,h),g=s(d),m=g?e():null;super(l,!1,f,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,g,f.playbackRate,_n,Yn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[l,u]:[l,u,d]),this.context.state!=="closed"){il(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),Go(this)&&bd(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},bL=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const h=Tn(d,u);if(!h){const f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,f),s!==null&&d.start(...s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,l.playbackRate,d.playbackRate):await r(u,l.playbackRate,d.playbackRate),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},wL=t=>"playbackRate"in t,AL=t=>"frequency"in t&&"gain"in t,kL=t=>"offset"in t,EL=t=>!("frequency"in t)&&"gain"in t,TL=t=>"detune"in t&&"frequency"in t,xL=t=>"pan"in t,Dn=t=>yi(mE,t),wd=t=>yi(yE,t),Sv=(t,e)=>{const{activeInputs:n}=Dn(t);n.forEach(i=>i.forEach(([o])=>{e.includes(t)||Sv(o,[...e,t])}));const r=wL(t)?[t.playbackRate]:AE(t)?Array.from(t.parameters.values()):AL(t)?[t.Q,t.detune,t.frequency,t.gain]:kL(t)?[t.offset]:EL(t)?[t.gain]:TL(t)?[t.detune,t.frequency]:xL(t)?[t.pan]:[];for(const i of r){const o=wd(i);o!==void 0&&o.activeInputs.forEach(([s])=>Sv(s,e))}Go(t)&&bd(t)},RL=t=>{Sv(t.destination,[])},PL=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),NL=(t,e,n,r,i,o,s,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(g){throw g.code===12&&g.message==="sampleRate is not in range"?n():g}if(d===null)throw r();if(!PL(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const g=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",g)};d.addEventListener("statechange",g)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),RL(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(u){return new s(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},_L=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h=s(d),f=i(d,u,h),g=h?e(a):null;super(l,!1,f,g),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},ML=t=>{const e=new WeakMap,n=async(r,i)=>{const o=i.destination;return e.set(i,o),await t(r,i,o),o};return{render(r,i){const o=e.get(i);return o!==void 0?Promise.resolve(o):n(r,i)}}},OL=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=l.listener,d=()=>{const w=new Float32Array(1),A=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),T=s(l);let x=!1,_=[0,0,-1,0,1,0],M=[0,0,0];const D=()=>{if(x)return;x=!0;const H=r(l,256,9,0);H.onaudioprocess=({inputBuffer:q})=>{const te=[o(q,w,0),o(q,w,1),o(q,w,2),o(q,w,3),o(q,w,4),o(q,w,5)];te.some((Y,ie)=>Y!==_[ie])&&(u.setOrientation(...te),_=te);const z=[o(q,w,6),o(q,w,7),o(q,w,8)];z.some((Y,ie)=>Y!==M[ie])&&(u.setPosition(...z),M=z)},A.connect(H)},F=H=>q=>{q!==_[H]&&(_[H]=q,u.setOrientation(..._))},W=H=>q=>{q!==M[H]&&(M[H]=q,u.setPosition(...M))},j=(H,q,te)=>{const z=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:q});z.connect(A,0,H),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return q}});const Y=t({context:c},T,z.offset,_n,Yn);return a(Y,"value",ie=>()=>ie.call(Y),ie=>Z=>{try{ie.call(Y,Z)}catch(ne){if(ne.code!==9)throw ne}D(),T&&te(Z)}),Y.cancelAndHoldAtTime=(ie=>T?()=>{throw i()}:(...Z)=>{const ne=ie.apply(Y,Z);return D(),ne})(Y.cancelAndHoldAtTime),Y.cancelScheduledValues=(ie=>T?()=>{throw i()}:(...Z)=>{const ne=ie.apply(Y,Z);return D(),ne})(Y.cancelScheduledValues),Y.exponentialRampToValueAtTime=(ie=>T?()=>{throw i()}:(...Z)=>{const ne=ie.apply(Y,Z);return D(),ne})(Y.exponentialRampToValueAtTime),Y.linearRampToValueAtTime=(ie=>T?()=>{throw i()}:(...Z)=>{const ne=ie.apply(Y,Z);return D(),ne})(Y.linearRampToValueAtTime),Y.setTargetAtTime=(ie=>T?()=>{throw i()}:(...Z)=>{const ne=ie.apply(Y,Z);return D(),ne})(Y.setTargetAtTime),Y.setValueAtTime=(ie=>T?()=>{throw i()}:(...Z)=>{const ne=ie.apply(Y,Z);return D(),ne})(Y.setValueAtTime),Y.setValueCurveAtTime=(ie=>T?()=>{throw i()}:(...Z)=>{const ne=ie.apply(Y,Z);return D(),ne})(Y.setValueCurveAtTime),Y};return{forwardX:j(0,0,F(0)),forwardY:j(1,0,F(1)),forwardZ:j(2,-1,F(2)),positionX:j(6,0,W(0)),positionY:j(7,0,W(1)),positionZ:j(8,0,W(2)),upX:j(3,0,F(3)),upY:j(4,1,F(4)),upZ:j(5,0,F(5))}},{forwardX:h,forwardY:f,forwardZ:g,positionX:m,positionY:C,positionZ:p,upX:v,upY:S,upZ:E}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return g},get positionX(){return m},get positionY(){return C},get positionZ(){return p},get upX(){return v},get upY(){return S},get upZ(){return E}}},Mf=t=>"context"in t,Ad=t=>Mf(t[0]),Xa=(t,e,n,r)=>{for(const i of t)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},cb=(t,e,[n,r],i)=>{Xa(t,[e,n,r],o=>o[0]===e&&o[1]===n,i)},lb=(t,[e,n,r],i)=>{const o=t.get(e);o===void 0?t.set(e,new Set([[n,r]])):Xa(o,[n,r],s=>s[0]===n,i)},vl=t=>"inputs"in t,Of=(t,e,n,r)=>{if(vl(e)){const i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},TE=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},DL=(t,e,n)=>Ep(t,r=>r[0]===e&&r[1]===n),xE=(t,e)=>{if(!Sd(t).delete(e))throw new Error("Missing the expected event listener.")},RE=(t,e,n)=>{const r=yi(t,e),i=Ep(r,o=>o[0]===n);return r.size===0&&t.delete(e),i},Df=(t,e,n,r)=>{vl(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},yt=t=>yi(vE,t),Ku=t=>yi(CE,t),Da=t=>mv.has(t),Mh=t=>!rl.has(t),ub=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),i=t.createGain(),o=t.createBuffer(1,2,44100),s=o.getChannelData(0);s[0]=1,s[1]=1;const a=t.createBufferSource();a.buffer=o,a.loop=!0,a.connect(r).connect(t.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Og=(t,e)=>{const n=new Map;for(const r of t)for(const i of r){const o=n.get(i);n.set(i,o===void 0?1:o+1)}n.forEach((r,i)=>e(i,r))},Lf=t=>"context"in t,LL=t=>{const e=new Map;t.connect=(n=>(r,i=0,o=0)=>{const s=Lf(r)?n(r,i,o):n(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:o,output:i}]):a.every(c=>c.input!==o||c.output!==i)&&a.push({input:o,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(r,i,o)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[s,a]of e){const c=a.filter(l=>l.output!==r);c.length===0?e.delete(s):e.set(s,c)}else if(e.has(r))if(i===void 0)e.delete(r);else{const s=e.get(r);if(s!==void 0){const a=s.filter(c=>c.output!==i&&(c.input!==o||o===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[s,a]of e)a.forEach(c=>{Lf(s)?t.connect(s,c.output,c.input):t.connect(s,c.output)})})(t.disconnect)},BL=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=wd(e),{outputs:s}=Dn(t),a=Sd(t),c=l=>{const u=yt(t),d=Ku(e);if(l){const h=RE(o,t,n);cb(i,t,h,!1),!r&&!Da(t)&&u.connect(d,n)}else{const h=DL(i,t,n);lb(o,h,!1),!r&&!Da(t)&&u.disconnect(d,n)}};return Xa(s,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),Go(t)?cb(i,t,[n,c],!0):lb(o,[t,n,c],!0),!0):!1},FL=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=Dn(e),s=TE(i[r],t,n);return s===null?[wE(o,t,n,r)[2],!1]:[s[2],!0]},UL=(t,e,n)=>{const{activeInputs:r,passiveInputs:i}=wd(e),o=TE(r,t,n);return o===null?[RE(i,t,n)[1],!1]:[o[2],!0]},By=(t,e,n,r,i)=>{const[o,s]=FL(t,n,r,i);if(o!==null&&(xE(t,o),s&&!e&&!Da(t)&&Df(yt(t),yt(n),r,i)),Go(n)){const{activeInputs:a}=Dn(n);Cv(n,a)}},Fy=(t,e,n,r)=>{const[i,o]=UL(t,n,r);i!==null&&(xE(t,i),o&&!e&&!Da(t)&&yt(t).disconnect(Ku(n),r))},VL=(t,e)=>{const n=Dn(t),r=[];for(const i of n.outputs)Ad(i)?By(t,e,...i):Fy(t,e,...i),r.push(i[0]);return n.outputs.clear(),r},GL=(t,e,n)=>{const r=Dn(t),i=[];for(const o of r.outputs)o[1]===n&&(Ad(o)?By(t,e,...o):Fy(t,e,...o),i.push(o[0]),r.outputs.delete(o));return i},WL=(t,e,n,r,i)=>{const o=Dn(t);return Array.from(o.outputs).filter(s=>s[0]===n&&(r===void 0||s[1]===r)&&(i===void 0||s[2]===i)).map(s=>(Ad(s)?By(t,e,...s):Fy(t,e,...s),o.outputs.delete(s),s[0]))},ZL=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,g,m)=>class extends l{constructor(p,v,S,E){super(S),this._context=p,this._nativeAudioNode=S;const w=u(p);d(w)&&n(ub,()=>ub(w,m))!==!0&&LL(S),vE.set(this,S),SE.set(this,new Set),p.state!=="closed"&&v&&il(this),t(this,E,S)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(p){this._nativeAudioNode.channelCount=p}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(p){this._nativeAudioNode.channelCountMode=p}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(p){this._nativeAudioNode.channelInterpretation=p}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(p,v=0,S=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();const E=u(this._context),w=g(E);if(h(p)||f(p))throw o();if(Mf(p)){const x=yt(p);try{const M=Of(this._nativeAudioNode,x,v,S),D=Mh(this);(w||D)&&this._nativeAudioNode.disconnect(...M),this.context.state!=="closed"&&!D&&Mh(p)&&il(p)}catch(M){throw M.code===12?o():M}if(e(this,p,v,S,w)){const M=c([this],p);Og(M,r(w))}return p}const A=Ku(p);if(A.name==="playbackRate"&&A.maxValue===1024)throw s();try{this._nativeAudioNode.connect(A,v),(w||Mh(this))&&this._nativeAudioNode.disconnect(A,v)}catch(x){throw x.code===12?o():x}if(BL(this,p,v,w)){const x=c([this],p);Og(x,r(w))}}disconnect(p,v,S){let E;const w=u(this._context),A=g(w);if(p===void 0)E=VL(this,A);else if(typeof p=="number"){if(p<0||p>=this.numberOfOutputs)throw i();E=GL(this,A,p)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Mf(p)&&S!==void 0&&(S<0||S>=p.numberOfInputs))throw i();if(E=WL(this,A,p,v,S),E.length===0)throw o()}for(const T of E){const x=c([this],T);Og(x,a)}}},jL=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>(f,g,m,C=null,p=null)=>{const v=m.value,S=new q2(v),E=g?r(S):null,w={get defaultValue(){return v},get maxValue(){return C===null?m.maxValue:C},get minValue(){return p===null?m.minValue:p},get value(){return m.value},set value(A){m.value=A,w.setValueAtTime(A,f.context.currentTime)},cancelAndHoldAtTime(A){if(typeof m.cancelAndHoldAtTime=="function")E===null&&S.flush(f.context.currentTime),S.add(i(A)),m.cancelAndHoldAtTime(A);else{const T=Array.from(S).pop();E===null&&S.flush(f.context.currentTime),S.add(i(A));const x=Array.from(S).pop();m.cancelScheduledValues(A),T!==x&&x!==void 0&&(x.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(x.value,x.endTime):x.type==="linearRampToValue"?m.linearRampToValueAtTime(x.value,x.endTime):x.type==="setValue"?m.setValueAtTime(x.value,x.startTime):x.type==="setValueCurve"&&m.setValueCurveAtTime(x.values,x.startTime,x.duration))}return w},cancelScheduledValues(A){return E===null&&S.flush(f.context.currentTime),S.add(o(A)),m.cancelScheduledValues(A),w},exponentialRampToValueAtTime(A,T){if(A===0)throw new RangeError;if(!Number.isFinite(T)||T<0)throw new RangeError;const x=f.context.currentTime;return E===null&&S.flush(x),Array.from(S).length===0&&(S.add(l(v,x)),m.setValueAtTime(v,x)),S.add(s(A,T)),m.exponentialRampToValueAtTime(A,T),w},linearRampToValueAtTime(A,T){const x=f.context.currentTime;return E===null&&S.flush(x),Array.from(S).length===0&&(S.add(l(v,x)),m.setValueAtTime(v,x)),S.add(a(A,T)),m.linearRampToValueAtTime(A,T),w},setTargetAtTime(A,T,x){return E===null&&S.flush(f.context.currentTime),S.add(c(A,T,x)),m.setTargetAtTime(A,T,x),w},setValueAtTime(A,T){return E===null&&S.flush(f.context.currentTime),S.add(l(A,T)),m.setValueAtTime(A,T),w},setValueCurveAtTime(A,T,x){const _=A instanceof Float32Array?A:new Float32Array(A);if(d!==null&&d.name==="webkitAudioContext"){const M=T+x,D=f.context.sampleRate,F=Math.ceil(T*D),W=Math.floor(M*D),j=W-F,H=new Float32Array(j);for(let te=0;te<j;te+=1){const z=(_.length-1)/x*((F+te)/D-T),Y=Math.floor(z),ie=Math.ceil(z);H[te]=Y===ie?_[Y]:(1-(z-Y))*_[Y]+(1-(ie-z))*_[ie]}E===null&&S.flush(f.context.currentTime),S.add(u(H,T,x)),m.setValueCurveAtTime(H,T,x);const q=W/D;q<M&&h(w,H[H.length-1],q),h(w,_[_.length-1],M)}else E===null&&S.flush(f.context.currentTime),S.add(u(_,T,x)),m.setValueCurveAtTime(_,T,x);return w}};return n.set(w,m),e.set(w,f),t(w,E),w},zL=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:i}=n;e.exponentialRampToValueAtTime(i,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:i}=n;e.linearRampToValueAtTime(i,r)}else if(n.type==="setTarget"){const{startTime:r,target:i,timeConstant:o}=n;e.setTargetAtTime(i,r,o)}else if(n.type==="setValue"){const{startTime:r,value:i}=n;e.setValueAtTime(i,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:i,values:o}=n;e.setValueCurveAtTime(o,i,r)}else throw new Error("Can't apply an unknown automation.")}});class PE{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,i)=>e.call(n,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const HL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},XL=(t,e,n,r,i,o,s,a,c,l,u,d,h,f)=>class extends e{constructor(m,C,p){var v;const S=a(m),E=c(S),w=u({...HL,...p});h(w);const A=vv.get(S),T=A==null?void 0:A.get(C),x=E||S.state!=="closed"?S:(v=s(S))!==null&&v!==void 0?v:S,_=i(x,E?null:m.baseLatency,l,C,T,w),M=E?r(C,w,T):null;super(m,!0,_,M);const D=[];_.parameters.forEach((W,j)=>{const H=n(this,E,W);D.push([j,H])}),this._nativeAudioWorkletNode=_,this._onprocessorerror=null,this._parameters=new PE(D),E&&t(S,this);const{activeInputs:F}=o(this);d(_,F)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const C=typeof m=="function"?f(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=C;const p=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=p!==null&&p===C?m:p}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Bf(t,e,n,r,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{const o=t.getChannelData(r);if(e[n].byteLength===0)e[n]=o.slice(i,i+128);else{const s=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(s)}}}const NE=(t,e,n,r,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,i):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],i)},Ff=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const i=[],o=typeof e=="number"?e:e[r];for(let s=0;s<o;s+=1)i.push(new Float32Array(128));n.push(i)}return n},$L=(t,e)=>{const n=yi(yv,t),r=yt(e);return yi(n,r)},KL=async(t,e,n,r,i,o,s)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,l=i.reduce((C,p)=>C+p,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const d=Dn(t),h=await $L(n,t),f=Ff(r.numberOfInputs,r.channelCount),g=Ff(r.numberOfOutputs,i),m=Array.from(t.parameters.keys()).reduce((C,p)=>({...C,[p]:new Float32Array(128)}),{});for(let C=0;C<a;C+=128){if(r.numberOfInputs>0&&e!==null)for(let p=0;p<r.numberOfInputs;p+=1)for(let v=0;v<r.channelCount;v+=1)Bf(e,f[p],v,v,C);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:p},v)=>{Bf(e,m,p,c+v,C)});for(let p=0;p<r.numberOfInputs;p+=1)for(let v=0;v<i[p];v+=1)g[p][v].byteLength===0&&(g[p][v]=new Float32Array(128));try{const p=f.map((S,E)=>d.activeInputs[E].size===0?[]:S),v=s(C/n.sampleRate,n.sampleRate,()=>h.process(p,g,m));if(u!==null)for(let S=0,E=0;S<r.numberOfOutputs;S+=1){for(let w=0;w<i[S];w+=1)NE(u,g[S],w,E+w,C);E+=i[S]}if(!v)break}catch(p){t.dispatchEvent(new ErrorEvent("processorerror",{colno:p.colno,filename:p.filename,lineno:p.lineno,message:p.message}));break}}return u},JL=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,g,m)=>(C,p,v)=>{const S=new WeakMap;let E=null;const w=async(A,T)=>{let x=u(A),_=null;const M=Tn(x,T),D=Array.isArray(p.outputChannelCount)?p.outputChannelCount:Array.from(p.outputChannelCount);if(d===null){const F=D.reduce((q,te)=>q+te,0),W=i(T,{channelCount:Math.max(1,F),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,F)}),j=[];for(let q=0;q<A.numberOfOutputs;q+=1)j.push(r(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[q]}));const H=s(T,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1});H.connect=e.bind(null,j),H.disconnect=c.bind(null,j),_=[W,j,H]}else M||(x=new d(T,C));if(S.set(T,_===null?x:_[2]),_!==null){if(E===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const te=A.channelCount*A.numberOfInputs,z=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,Y=te+z;E=KL(A,Y===0?null:await(async()=>{const Z=new h(Y,Math.ceil(A.context.length/128)*128,T.sampleRate),ne=[],Ee=[];for(let Ae=0;Ae<p.numberOfInputs;Ae+=1)ne.push(s(Z,{channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,gain:1})),Ee.push(i(Z,{channelCount:p.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:p.channelCount}));const xe=await Promise.all(Array.from(A.parameters.values()).map(async Ae=>{const Xe=o(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Ae.value});return await f(Z,Ae,Xe.offset),Xe})),me=r(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,te+z)});for(let Ae=0;Ae<p.numberOfInputs;Ae+=1){ne[Ae].connect(Ee[Ae]);for(let Xe=0;Xe<p.channelCount;Xe+=1)Ee[Ae].connect(me,Xe,Ae*p.channelCount+Xe)}for(const[Ae,Xe]of xe.entries())Xe.connect(me,0,te+Ae),Xe.start(0);return me.connect(Z.destination),await Promise.all(ne.map(Ae=>g(A,Z,Ae))),m(Z)})(),T,p,D,v,l)}const F=await E,W=n(T,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[j,H,q]=_;F!==null&&(W.buffer=F,W.start(0)),W.connect(j);for(let te=0,z=0;te<A.numberOfOutputs;te+=1){const Y=H[te];for(let ie=0;ie<D[te];ie+=1)j.connect(Y,z+ie,ie);z+=D[te]}return q}if(M)for(const[F,W]of A.parameters.entries())await t(T,W,x.parameters.get(F));else for(const[F,W]of A.parameters.entries())await f(T,W,x.parameters.get(F));return await g(A,T,x),x};return{render(A,T){a(T,A);const x=S.get(T);return x!==void 0?Promise.resolve(x):w(A,T)}}},YL=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,g,m,C,p,v,S)=>class extends g{constructor(w,A){super(w,A),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(T,x)=>t(this,T,x)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(w,A,T){return new n({length:A,numberOfChannels:w,sampleRate:T})}createBufferSource(){return new r(this)}createChannelMerger(w=6){return new o(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new s(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(w,A){return new f(this,{feedback:A,feedforward:w})}createOscillator(){return new m(this)}createPanner(){return new C(this)}createPeriodicWave(w,A,T={disableNormalization:!1}){return new p(this,{...T,imag:A,real:w})}createStereoPanner(){return new v(this)}createWaveShaper(){return new S(this)}decodeAudioData(w,A,T){return l(this._nativeContext,w).then(x=>(typeof A=="function"&&A(x),x),x=>{throw typeof T=="function"&&T(x),x})}},QL={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},qL=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...QL,...u},f=i(d,h),g=s(d),m=g?n():null;super(l,!1,f,m),this._Q=e(this,g,f.Q,_n,Yn),this._detune=e(this,g,f.detune,1200*Math.log2(_n),-1200*Math.log2(_n)),this._frequency=e(this,g,f.frequency,l.sampleRate/2,0),this._gain=e(this,g,f.gain,40*Math.log10(_n),Yn),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(h){throw h.code===11?r():h}if(l.length!==u.length||u.length!==d.length)throw r()}},eB=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Tn(l,c);if(!u){const d={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,d)}return o.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await r(c,a.Q,l.Q),await r(c,a.detune,l.detune),await r(c,a.frequency,l.frequency),await r(c,a.gain,l.gain)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},tB=(t,e)=>(n,r)=>{const i=e.get(n);if(i!==void 0)return i;const o=t.get(n);if(o!==void 0)return o;try{const s=r();return s instanceof Promise?(t.set(n,s),s.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,s),s)}catch{return e.set(n,!1),!1}},nB={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},rB=(t,e,n,r,i)=>class extends t{constructor(s,a){const c=r(s),l={...nB,...a},u=n(c,l),d=i(c)?e():null;super(s,!1,u,d)}},iB=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Tn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},oB={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},sB=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=o({...oB,...c}),d=n(l,u),h=i(l)?e():null;super(a,!1,d,h)}},aB=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Tn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},cB=t=>(e,n,r)=>t(n,e,r),lB=t=>(e,n,r=0,i=0)=>{const o=e[r];if(o===void 0)throw t();return Lf(n)?o.connect(n,0,i):o.connect(n,0)},uB=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},dB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},hB=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...dB,...l},h=r(u,d),f=o(u),g=f?n():null;super(c,!1,h,g),this._constantSourceNodeRenderer=g,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,_n,Yn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){il(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Go(this)&&bd(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},fB=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const h=Tn(d,u);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,f),s!==null&&d.start(s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,l.offset,d.offset):await r(u,l.offset,d.offset),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},pB=t=>e=>(t[0]=e,t[0]),gB={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},mB=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u={...gB,...c},d=n(l,u),f=i(l)?e():null;super(a,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},vB=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Tn(a,s)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,l)}return r.set(s,a),vl(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},yB=()=>new DOMException("","DataCloneError"),db=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},CB=(t,e,n,r,i,o,s,a,c,l,u)=>(d,h)=>{const f=s(d)?d:o(d);if(i.has(h)){const g=n();return Promise.reject(g)}try{i.add(h)}catch{}return e(c,()=>c(f))?f.decodeAudioData(h).then(g=>(db(h).catch(()=>{}),e(a,()=>a(g))||u(g),t.add(g),g)):new Promise((g,m)=>{const C=async()=>{try{await db(h)}catch{}},p=v=>{m(v),C()};try{f.decodeAudioData(h,v=>{typeof v.copyFromChannel!="function"&&(l(v),kE(v)),t.add(v),C().then(()=>g(v))},v=>{p(v===null?r():v)})}catch(v){p(v)}})},IB=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=o(c.context),h=a(d);if(u===l){if(e.delete(c),!h&&s(c)){const f=r(c),{outputs:g}=n(c);for(const m of g)if(Ad(m)){const C=r(m[0]);t(f,C,m[1],m[2])}else{const C=i(m[0]);f.connect(C,m[1])}}}else e.set(c,u-l)},SB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},bB=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...SB,...l},h=r(u,d),f=o(u),g=f?n(d.maxDelayTime):null;super(c,!1,h,g),this._delayTime=e(this,f,h.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},wB=(t,e,n,r,i)=>o=>{const s=new WeakMap,a=async(c,l)=>{let u=n(c);const d=Tn(u,l);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:o};u=e(l,h)}return s.set(l,u),d?await t(l,c.delayTime,u.delayTime):await r(l,c.delayTime,u.delayTime),await i(c,l,u),u};return{render(c,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},AB=t=>(e,n,r,i)=>t(e[i],o=>o[0]===n&&o[1]===r),kB=t=>(e,n)=>{t(e).delete(n)},EB=t=>"delayTime"in t,TB=(t,e,n)=>function r(i,o){const s=Mf(o)?o:n(t,o);if(EB(s))return[];if(i[0]===s)return[i];if(i.includes(s))return[];const{outputs:a}=e(s);return Array.from(a).map(c=>r([...i,s],c[0])).reduce((c,l)=>c.concat(l),[])},ih=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},xB=t=>(e,n=void 0,r=void 0,i=0)=>n===void 0?e.forEach(o=>o.disconnect()):typeof n=="number"?ih(t,e,n).disconnect():Lf(n)?r===void 0?e.forEach(o=>o.disconnect(n)):i===void 0?ih(t,e,r).disconnect(n,0):ih(t,e,r).disconnect(n,0,i):r===void 0?e.forEach(o=>o.disconnect(n)):ih(t,e,r).disconnect(n,0),RB={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},PB=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...RB,...u},f=r(d,h),g=s(d),m=g?n():null;super(l,!1,f,m),this._attack=e(this,g,f.attack),this._knee=e(this,g,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,g,f.ratio),this._release=e(this,g,f.release),this._threshold=e(this,g,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},NB=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Tn(l,c);if(!u){const d={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,d)}return o.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await r(c,a.attack,l.attack),await r(c,a.knee,l.knee),await r(c,a.ratio,l.ratio),await r(c,a.release,l.release),await r(c,a.threshold,l.threshold)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},_B=()=>new DOMException("","EncodingError"),MB=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const i=t.document.head;if(i===null)r(new SyntaxError);else{const o=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,d,h,f,g)=>{if(d===a||d===t.location.href&&h===1&&f===1)return l(),r(g),!1;if(c!==null)return c(u,d,h,f,g)},o.onerror=()=>{l(),r(new SyntaxError)},o.onload=()=>{l(),n()},o.src=a,o.type="module",i.appendChild(o)}}),OB=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,i){if(r!==null){let o=this._listeners.get(r);o===void 0&&(o=t(this,r),typeof r=="function"&&this._listeners.set(r,o)),this._nativeEventTarget.addEventListener(n,o,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,i){const o=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,o===void 0?null:o,i)}},DB=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},LB=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},BB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},FB=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...BB,...c},d=r(l,u),h=o(l),f=h?n():null;super(a,!1,d,f),this._gain=e(this,h,d.gain,_n,Yn)}get gain(){return this._gain}},UB=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Tn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.gain,l.gain):await r(c,a.gain,l.gain),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},VB=(t,e)=>n=>e(t,n),GB=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},WB=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},ZB=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},jB=t=>e=>t.get(e),dn=()=>new DOMException("","InvalidStateError"),zB=t=>e=>{const n=t.get(e);if(n===void 0)throw dn();return n},HB=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},XB=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Tp=()=>new DOMException("","InvalidAccessError"),$B=t=>{t.getFrequencyResponse=(e=>(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw Tp();return e.call(t,n,r,i)})(t.getFrequencyResponse)},KB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},JB=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=i(l),d={...KB,...c},h=e(l,u?null:a.baseLatency,d),f=u?n(d.feedback,d.feedforward):null;super(a,!1,h,f),$B(h),this._nativeIIRFilterNode=h,o(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},_E=(t,e,n,r,i,o,s,a,c,l,u)=>{const d=l.length;let h=a;for(let f=0;f<d;f+=1){let g=n[0]*l[f];for(let m=1;m<i;m+=1){const C=h-m&c-1;g+=n[m]*o[C],g-=t[m]*s[C]}for(let m=i;m<r;m+=1)g+=n[m]*o[h-m&c-1];for(let m=i;m<e;m+=1)g-=t[m]*s[h-m&c-1];o[h]=l[f],s[h]=g,h=h+1&c-1,u[f]=g}return h},YB=(t,e,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=r instanceof Float64Array?r:new Float64Array(r),s=i.length,a=o.length,c=Math.min(s,a);if(i[0]!==1){for(let g=0;g<s;g+=1)o[g]/=i[0];for(let g=1;g<a;g+=1)i[g]/=i[0]}const l=32,u=new Float32Array(l),d=new Float32Array(l),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let g=0;g<f;g+=1){const m=t.getChannelData(g),C=h.getChannelData(g);u.fill(0),d.fill(0),_E(i,s,o,a,c,u,d,0,l,m,C)}return h},QB=(t,e,n,r,i)=>(o,s)=>{const a=new WeakMap;let c=null;const l=async(u,d)=>{let h=null,f=e(u);const g=Tn(f,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(f=d.createIIRFilter(s,o)),a.set(d,h===null?f:h),h!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);c=(async()=>{await r(u,C,C.destination);const p=await i(C);return YB(p,d,o,s)})()}const m=await c;return h.buffer=m,h.start(0),h}return await r(u,d,f),f};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},qB=(t,e,n,r,i,o)=>s=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!s&&o(a)){const u=r(a),{outputs:d}=n(a);for(const h of d)if(Ad(h)){const f=r(h[0]);e(u,f,h[1],h[2])}else{const f=i(h[0]);u.disconnect(f,h[1])}}t.set(a,c)}else t.set(a,l+c)},eF=t=>e=>t!==null&&e instanceof t,tF=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,nF=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,rF=(t,e)=>n=>t(n)||e(n),iF=t=>e=>t!==null&&e instanceof t,oF=t=>t!==null&&t.isSecureContext,sF=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw TypeError();super(o,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},aF={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},cF=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o);if(r(a))throw new TypeError;const c={...aF,...s},l=e(a,c);super(o,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},lF=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw new TypeError;super(o,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},uF=(t,e,n)=>class extends t{constructor(i,o){const s=n(i),a=e(s,o);super(i,!0,a,null)}},dF=(t,e,n,r,i,o)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,IE.set(this,a),r(a)&&i.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?o(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},bv=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},hF=(t,e)=>(n,r,i)=>{const o=new Set;return n.connect=(s=>(a,c=0,l=0)=>{const u=o.size===0;if(e(a))return s.call(n,a,c,l),t(o,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;s.call(n,a,c),t(o,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(n.connect),n.disconnect=(s=>(a,c,l)=>{const u=o.size>0;if(a===void 0)s.apply(n),o.clear();else if(typeof a=="number"){s.call(n,a);for(const h of o)h[1]===a&&o.delete(h)}else{e(a)?s.call(n,a,c,l):s.call(n,a,c);for(const h of o)h[0]===a&&(c===void 0||h[1]===c)&&(l===void 0||h[2]===l)&&o.delete(h)}const d=o.size===0;u&&d&&i()})(n.disconnect),n},It=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Xt=(t,e)=>{It(t,e,"channelCount"),It(t,e,"channelCountMode"),It(t,e,"channelInterpretation")},hb=t=>typeof t.getFloatTimeDomainData=="function",fF=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let i=0;i<r;i+=1)e[i]=(n[i]-128)*.0078125;return e}},pF=(t,e)=>(n,r)=>{const i=n.createAnalyser();if(Xt(i,r),!(r.maxDecibels>r.minDecibels))throw e();return It(i,r,"fftSize"),It(i,r,"maxDecibels"),It(i,r,"minDecibels"),It(i,r,"smoothingTimeConstant"),t(hb,()=>hb(i))||fF(i),i},gF=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Nt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},mF=t=>{t.start=(e=>{let n=!1;return(r=0,i=0,o)=>{if(n)throw dn();e.call(t,r,i,o),n=!0}})(t.start)},Uy=t=>{t.start=(e=>(n=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})(t.start)},Vy=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},vF=(t,e,n,r,i,o,s,a,c,l,u)=>(d,h)=>{const f=d.createBufferSource();return Xt(f,h),Nt(f,h,"playbackRate"),It(f,h,"buffer"),It(f,h,"loop"),It(f,h,"loopEnd"),It(f,h,"loopStart"),e(n,()=>n(d))||mF(f),e(r,()=>r(d))||c(f),e(i,()=>i(d))||l(f,d),e(o,()=>o(d))||Uy(f),e(s,()=>s(d))||u(f,d),e(a,()=>a(d))||Vy(f),t(d,f),f},yF=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,CF=(t,e)=>(n,r,i)=>{const o=n.destination;if(o.channelCount!==r)try{o.channelCount=r}catch{}i&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:r});const s=t(n,{channelCount:r,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>c=>{a.call(s,c);try{o.channelCount=c}catch(l){if(c>o.maxChannelCount)throw l}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelCountMode=c}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelInterpretation=c}),Object.defineProperty(s,"maxChannelCount",{get:()=>o.maxChannelCount}),s.connect(o),s},IF=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,SF=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},bF=(t,e,n,r,i)=>(o,s,a,c,l,u)=>{if(a!==null)try{const d=new a(o,c,u),h=new Map;let f=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:g=>{typeof f=="function"&&d.removeEventListener("processorerror",f),f=typeof g=="function"?g:null,typeof f=="function"&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(g=>(...m)=>{if(m[0]==="processorerror"){const C=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(C!==null){const p=h.get(m[1]);p!==void 0?m[1]=p:(m[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),C(v)):C(new ErrorEvent(m[0],{...v}))},h.set(C,m[1]))}}return g.call(d,"error",m[1],m[2]),g.call(d,...m)})(d.addEventListener),d.removeEventListener=(g=>(...m)=>{if(m[0]==="processorerror"){const C=h.get(m[1]);C!==void 0&&(h.delete(m[1]),m[1]=C)}return g.call(d,"error",m[1],m[2]),g.call(d,m[0],m[1],m[2])})(d.removeEventListener),u.numberOfOutputs!==0){const g=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(g).connect(o.destination),i(d,()=>g.disconnect(),()=>g.connect(o.destination))}return d}catch(d){throw d.code===11?r():d}if(l===void 0)throw r();return SF(u),e(o,s,l,u)},ME=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),wF=t=>new Promise((e,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:o})=>{r.close(),i.close(),e(o)},r.onmessageerror=({data:o})=>{r.close(),i.close(),n(o)},i.postMessage(t)}),AF=async(t,e)=>{const n=await wF(e);return new t(n)},kF=(t,e,n,r)=>{let i=yv.get(t);i===void 0&&(i=new WeakMap,yv.set(t,i));const o=AF(n,r);return i.set(e,o),o},EF=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>(f,g,m,C)=>{if(C.numberOfInputs===0&&C.numberOfOutputs===0)throw c();const p=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(p.some(ae=>ae<1))throw c();if(p.length!==C.numberOfOutputs)throw e();if(C.channelCountMode!=="explicit")throw c();const v=C.channelCount*C.numberOfInputs,S=p.reduce((ae,pe)=>ae+pe,0),E=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(v+E>6||S>6)throw c();const w=new MessageChannel,A=[],T=[];for(let ae=0;ae<C.numberOfInputs;ae+=1)A.push(s(f,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),T.push(i(f,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const x=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:ae,maxValue:pe,minValue:Ze,name:Ve}of m.parameterDescriptors){const Te=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.parameterData[Ve]!==void 0?C.parameterData[Ve]:ae===void 0?0:ae});Object.defineProperties(Te.offset,{defaultValue:{get:()=>ae===void 0?0:ae},maxValue:{get:()=>pe===void 0?_n:pe},minValue:{get:()=>Ze===void 0?Yn:Ze}}),x.push(Te)}const _=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+E)}),M=ME(g,f.sampleRate),D=a(f,M,v+E,Math.max(1,S)),F=i(f,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),W=[];for(let ae=0;ae<C.numberOfOutputs;ae+=1)W.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:p[ae]}));for(let ae=0;ae<C.numberOfInputs;ae+=1){A[ae].connect(T[ae]);for(let pe=0;pe<C.channelCount;pe+=1)T[ae].connect(_,pe,ae*C.channelCount+pe)}const j=new PE(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:ae},pe)=>{const Ze=x[pe];return Ze.connect(_,0,v+pe),Ze.start(0),[ae,Ze.offset]}));_.connect(D);let H=C.channelInterpretation,q=null;const te=C.numberOfOutputs===0?[D]:W,z={get bufferSize(){return M},get channelCount(){return C.channelCount},set channelCount(ae){throw n()},get channelCountMode(){return C.channelCountMode},set channelCountMode(ae){throw n()},get channelInterpretation(){return H},set channelInterpretation(ae){for(const pe of A)pe.channelInterpretation=ae;H=ae},get context(){return D.context},get inputs(){return A},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get onprocessorerror(){return q},set onprocessorerror(ae){typeof q=="function"&&z.removeEventListener("processorerror",q),q=typeof ae=="function"?ae:null,typeof q=="function"&&z.addEventListener("processorerror",q)},get parameters(){return j},get port(){return w.port2},addEventListener(...ae){return D.addEventListener(ae[0],ae[1],ae[2])},connect:t.bind(null,te),disconnect:l.bind(null,te),dispatchEvent(...ae){return D.dispatchEvent(ae[0])},removeEventListener(...ae){return D.removeEventListener(ae[0],ae[1],ae[2])}},Y=new Map;w.port1.addEventListener=(ae=>(...pe)=>{if(pe[0]==="message"){const Ze=typeof pe[1]=="function"?pe[1]:typeof pe[1]=="object"&&pe[1]!==null&&typeof pe[1].handleEvent=="function"?pe[1].handleEvent:null;if(Ze!==null){const Ve=Y.get(pe[1]);Ve!==void 0?pe[1]=Ve:(pe[1]=Te=>{u(f.currentTime,f.sampleRate,()=>Ze(Te))},Y.set(Ze,pe[1]))}}return ae.call(w.port1,pe[0],pe[1],pe[2])})(w.port1.addEventListener),w.port1.removeEventListener=(ae=>(...pe)=>{if(pe[0]==="message"){const Ze=Y.get(pe[1]);Ze!==void 0&&(Y.delete(pe[1]),pe[1]=Ze)}return ae.call(w.port1,pe[0],pe[1],pe[2])})(w.port1.removeEventListener);let ie=null;Object.defineProperty(w.port1,"onmessage",{get:()=>ie,set:ae=>{typeof ie=="function"&&w.port1.removeEventListener("message",ie),ie=typeof ae=="function"?ae:null,typeof ie=="function"&&(w.port1.addEventListener("message",ie),w.port1.start())}}),m.prototype.port=w.port1;let Z=null;kF(f,z,m,C).then(ae=>Z=ae);const Ee=Ff(C.numberOfInputs,C.channelCount),xe=Ff(C.numberOfOutputs,p),me=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((ae,{name:pe})=>({...ae,[pe]:new Float32Array(128)}),{});let Ae=!0;const Xe=()=>{C.numberOfOutputs>0&&D.disconnect(F);for(let ae=0,pe=0;ae<C.numberOfOutputs;ae+=1){const Ze=W[ae];for(let Ve=0;Ve<p[ae];Ve+=1)F.disconnect(Ze,pe+Ve,Ve);pe+=p[ae]}},he=new Map;D.onaudioprocess=({inputBuffer:ae,outputBuffer:pe})=>{if(Z!==null){const Ze=d(z);for(let Ve=0;Ve<M;Ve+=128){for(let Te=0;Te<C.numberOfInputs;Te+=1)for(let He=0;He<C.channelCount;He+=1)Bf(ae,Ee[Te],He,He,Ve);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:Te},He)=>{Bf(ae,me,Te,v+He,Ve)});for(let Te=0;Te<C.numberOfInputs;Te+=1)for(let He=0;He<p[Te];He+=1)xe[Te][He].byteLength===0&&(xe[Te][He]=new Float32Array(128));try{const Te=Ee.map((bt,Et)=>{if(Ze[Et].size>0)return he.set(Et,M/128),bt;const zn=he.get(Et);return zn===void 0?[]:(bt.every(yn=>yn.every(Qa=>Qa===0))&&(zn===1?he.delete(Et):he.set(Et,zn-1)),bt)});Ae=u(f.currentTime+Ve/f.sampleRate,f.sampleRate,()=>Z.process(Te,xe,me));for(let bt=0,Et=0;bt<C.numberOfOutputs;bt+=1){for(let cr=0;cr<p[bt];cr+=1)NE(pe,xe[bt],cr,Et+cr,Ve);Et+=p[bt]}}catch(Te){Ae=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:Te.colno,filename:Te.filename,lineno:Te.lineno,message:Te.message}))}if(!Ae){for(let Te=0;Te<C.numberOfInputs;Te+=1){A[Te].disconnect(T[Te]);for(let He=0;He<C.channelCount;He+=1)T[Ve].disconnect(_,He,Te*C.channelCount+He)}if(m.parameterDescriptors!==void 0){const Te=m.parameterDescriptors.length;for(let He=0;He<Te;He+=1){const bt=x[He];bt.disconnect(_,0,v+He),bt.stop()}}_.disconnect(D),D.onaudioprocess=null,xn?Xe():$t();break}}}};let xn=!1;const jn=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ct=()=>D.connect(jn).connect(f.destination),$t=()=>{D.disconnect(jn),jn.disconnect()},ar=()=>{if(Ae){$t(),C.numberOfOutputs>0&&D.connect(F);for(let ae=0,pe=0;ae<C.numberOfOutputs;ae+=1){const Ze=W[ae];for(let Ve=0;Ve<p[ae];Ve+=1)F.connect(Ze,pe+Ve,Ve);pe+=p[ae]}}xn=!0},jr=()=>{Ae&&(Ct(),Xe()),xn=!1};return Ct(),h(z,ar,jr)},OE=(t,e)=>{const n=t.createBiquadFilter();return Xt(n,e),Nt(n,e,"Q"),Nt(n,e,"detune"),Nt(n,e,"frequency"),Nt(n,e,"gain"),It(n,e,"type"),n},TF=(t,e)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),Xt(i,r),i},xF=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw dn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw dn()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw dn()}})},kd=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Xt(n,e),xF(n),n},RF=(t,e,n,r,i)=>(o,s)=>{if(o.createConstantSource===void 0)return n(o,s);const a=o.createConstantSource();return Xt(a,s),Nt(a,s,"offset"),e(r,()=>r(o))||Uy(a),e(i,()=>i(o))||Vy(a),t(o,a),a},yl=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),PF=(t,e,n,r)=>(i,{offset:o,...s})=>{const a=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...s,gain:o}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(g){l.channelCount=g},get channelCountMode(){return l.channelCountMode},set channelCountMode(g){l.channelCountMode=g},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(g){l.channelInterpretation=g},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(g){c.onended=g},addEventListener(...g){return c.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return c.dispatchEvent(g[0])},removeEventListener(...g){return c.removeEventListener(g[0],g[1],g[2])},start(g=0){c.start.call(c,g)},stop(g=0){c.stop.call(c,g)}},h=()=>c.connect(l),f=()=>c.disconnect(l);return t(i,c),r(yl(d,l),h,f)},NF=(t,e)=>(n,r)=>{const i=n.createConvolver();if(Xt(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),It(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",o=>()=>o.call(i),o=>s=>{if(s>2)throw t();return o.call(i,s)}),r.channelCountMode==="max"))throw t();return e(i,"channelCountMode",o=>()=>o.call(i),o=>s=>{if(s==="max")throw t();return o.call(i,s)}),i},DE=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Xt(n,e),Nt(n,e,"delayTime"),n},_F=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Xt(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Nt(r,n,"attack"),Nt(r,n,"knee"),Nt(r,n,"ratio"),Nt(r,n,"release"),Nt(r,n,"threshold"),r},or=(t,e)=>{const n=t.createGain();return Xt(n,e),Nt(n,e,"gain"),n},MF=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return Xt(i,r),i};function OF(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function DF(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function fb(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=DF(n,e),n[0]+=t[r];return n}const LF=(t,e,n,r)=>(i,o,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=ME(o,i.sampleRate),h=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),g=h.length,m=f.length,C=Math.min(g,m);if(g===0||g>20)throw r();if(h[0]===0)throw e();if(m===0||m>20)throw r();if(f[0]===0)throw e();if(h[0]!==1){for(let x=0;x<m;x+=1)f[x]/=h[0];for(let x=1;x<g;x+=1)h[x]/=h[0]}const p=n(i,d,s,s);p.channelCount=s,p.channelCountMode=a,p.channelInterpretation=c;const v=32,S=[],E=[],w=[];for(let x=0;x<s;x+=1){S.push(0);const _=new Float32Array(v),M=new Float32Array(v);_.fill(0),M.fill(0),E.push(_),w.push(M)}p.onaudioprocess=x=>{const _=x.inputBuffer,M=x.outputBuffer,D=_.numberOfChannels;for(let F=0;F<D;F+=1){const W=_.getChannelData(F),j=M.getChannelData(F);S[F]=_E(h,g,f,m,C,E[F],w[F],S[F],v,W,j)}};const A=i.sampleRate/2;return yl({get bufferSize(){return d},get channelCount(){return p.channelCount},set channelCount(x){p.channelCount=x},get channelCountMode(){return p.channelCountMode},set channelCountMode(x){p.channelCountMode=x},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(x){p.channelInterpretation=x},get context(){return p.context},get inputs(){return[p]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},addEventListener(...x){return p.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return p.dispatchEvent(x[0])},getFrequencyResponse(x,_,M){if(x.length!==_.length||_.length!==M.length)throw t();const D=x.length;for(let F=0;F<D;F+=1){const W=-Math.PI*(x[F]/A),j=[Math.cos(W),Math.sin(W)],H=fb(f,j),q=fb(h,j),te=OF(H,q);_[F]=Math.sqrt(te[0]*te[0]+te[1]*te[1]),M[F]=Math.atan2(te[1],te[0])}},removeEventListener(...x){return p.removeEventListener(x[0],x[1],x[2])}},p)},BF=(t,e)=>t.createMediaElementSource(e.mediaElement),FF=(t,e)=>{const n=t.createMediaStreamDestination();return Xt(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},UF=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((o,s)=>o.id<s.id?-1:o.id>s.id?1:0);const r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},VF=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),o=n.createMediaStreamSource(i);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return o},GF=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,WF=(t,e,n,r,i,o)=>(s,a)=>{const c=s.createOscillator();return Xt(c,a),Nt(c,a,"detune"),Nt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):It(c,a,"type"),e(n,()=>n(s))||Uy(c),e(r,()=>r(s))||o(c,s),e(i,()=>i(s))||Vy(c),t(s,c),c},ZF=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Xt(r,n),Nt(r,n,"orientationX"),Nt(r,n,"orientationY"),Nt(r,n,"orientationZ"),Nt(r,n,"positionX"),Nt(r,n,"positionY"),Nt(r,n,"positionZ"),It(r,n,"coneInnerAngle"),It(r,n,"coneOuterAngle"),It(r,n,"coneOuterGain"),It(r,n,"distanceModel"),It(r,n,"maxDistance"),It(r,n,"panningModel"),It(r,n,"refDistance"),It(r,n,"rolloffFactor"),r)},jF=(t,e,n,r,i,o,s,a,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:g,maxDistance:m,orientationX:C,orientationY:p,orientationZ:v,panningModel:S,positionX:E,positionY:w,positionZ:A,refDistance:T,rolloffFactor:x,..._})=>{const M=u.createPanner();if(_.channelCount>2||_.channelCountMode==="max")throw s();Xt(M,_);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},F=n(u,{...D,channelInterpretation:"speakers",numberOfInputs:6}),W=r(u,{..._,gain:1}),j=r(u,{...D,gain:1}),H=r(u,{...D,gain:0}),q=r(u,{...D,gain:0}),te=r(u,{...D,gain:0}),z=r(u,{...D,gain:0}),Y=r(u,{...D,gain:0}),ie=i(u,256,6,1),Z=o(u,{...D,curve:new Float32Array([1,1]),oversample:"none"});let ne=[C,p,v],Ee=[E,w,A];const xe=new Float32Array(1);ie.onaudioprocess=({inputBuffer:he})=>{const xn=[c(he,xe,0),c(he,xe,1),c(he,xe,2)];xn.some((Ct,$t)=>Ct!==ne[$t])&&(M.setOrientation(...xn),ne=xn);const jn=[c(he,xe,3),c(he,xe,4),c(he,xe,5)];jn.some((Ct,$t)=>Ct!==Ee[$t])&&(M.setPosition(...jn),Ee=jn)},Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0});const me={get bufferSize(){},get channelCount(){return M.channelCount},set channelCount(he){if(he>2)throw s();W.channelCount=he,M.channelCount=he},get channelCountMode(){return M.channelCountMode},set channelCountMode(he){if(he==="max")throw s();W.channelCountMode=he,M.channelCountMode=he},get channelInterpretation(){return M.channelInterpretation},set channelInterpretation(he){W.channelInterpretation=he,M.channelInterpretation=he},get coneInnerAngle(){return M.coneInnerAngle},set coneInnerAngle(he){M.coneInnerAngle=he},get coneOuterAngle(){return M.coneOuterAngle},set coneOuterAngle(he){M.coneOuterAngle=he},get coneOuterGain(){return M.coneOuterGain},set coneOuterGain(he){if(he<0||he>1)throw e();M.coneOuterGain=he},get context(){return M.context},get distanceModel(){return M.distanceModel},set distanceModel(he){M.distanceModel=he},get inputs(){return[W]},get maxDistance(){return M.maxDistance},set maxDistance(he){if(he<0)throw new RangeError;M.maxDistance=he},get numberOfInputs(){return M.numberOfInputs},get numberOfOutputs(){return M.numberOfOutputs},get orientationX(){return j.gain},get orientationY(){return H.gain},get orientationZ(){return q.gain},get panningModel(){return M.panningModel},set panningModel(he){M.panningModel=he},get positionX(){return te.gain},get positionY(){return z.gain},get positionZ(){return Y.gain},get refDistance(){return M.refDistance},set refDistance(he){if(he<0)throw new RangeError;M.refDistance=he},get rolloffFactor(){return M.rolloffFactor},set rolloffFactor(he){if(he<0)throw new RangeError;M.rolloffFactor=he},addEventListener(...he){return W.addEventListener(he[0],he[1],he[2])},dispatchEvent(...he){return W.dispatchEvent(he[0])},removeEventListener(...he){return W.removeEventListener(he[0],he[1],he[2])}};d!==me.coneInnerAngle&&(me.coneInnerAngle=d),h!==me.coneOuterAngle&&(me.coneOuterAngle=h),f!==me.coneOuterGain&&(me.coneOuterGain=f),g!==me.distanceModel&&(me.distanceModel=g),m!==me.maxDistance&&(me.maxDistance=m),C!==me.orientationX.value&&(me.orientationX.value=C),p!==me.orientationY.value&&(me.orientationY.value=p),v!==me.orientationZ.value&&(me.orientationZ.value=v),S!==me.panningModel&&(me.panningModel=S),E!==me.positionX.value&&(me.positionX.value=E),w!==me.positionY.value&&(me.positionY.value=w),A!==me.positionZ.value&&(me.positionZ.value=A),T!==me.refDistance&&(me.refDistance=T),x!==me.rolloffFactor&&(me.rolloffFactor=x),(ne[0]!==1||ne[1]!==0||ne[2]!==0)&&M.setOrientation(...ne),(Ee[0]!==0||Ee[1]!==0||Ee[2]!==0)&&M.setPosition(...Ee);const Ae=()=>{W.connect(M),t(W,Z,0,0),Z.connect(j).connect(F,0,0),Z.connect(H).connect(F,0,1),Z.connect(q).connect(F,0,2),Z.connect(te).connect(F,0,3),Z.connect(z).connect(F,0,4),Z.connect(Y).connect(F,0,5),F.connect(ie).connect(u.destination)},Xe=()=>{W.disconnect(M),a(W,Z,0,0),Z.disconnect(j),j.disconnect(F),Z.disconnect(H),H.disconnect(F),Z.disconnect(q),q.disconnect(F),Z.disconnect(te),te.disconnect(F),Z.disconnect(z),z.disconnect(F),Z.disconnect(Y),Y.disconnect(F),F.disconnect(ie),ie.disconnect(u.destination)};return l(yl(me,M),Ae,Xe)},zF=t=>(e,{disableNormalization:n,imag:r,real:i})=>{const o=r instanceof Float32Array?r:new Float32Array(r),s=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(s,o,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},Ed=(t,e,n,r)=>t.createScriptProcessor(e,n,r),HF=(t,e)=>(n,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const o=n.createStereoPanner();return Xt(o,r),Nt(o,r,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:s=>{if(s!==i)throw e()}}),o},XF=(t,e,n,r,i,o)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(g,m,C,p)=>{const v=new Float32Array(16385),S=new Float32Array(16385);for(let _=0;_<16385;_+=1){const M=_/16384*c;v[_]=Math.cos(M),S[_]=Math.sin(M)}const E=n(g,{...l,gain:0}),w=r(g,{...u,curve:v}),A=r(g,{...u,curve:a}),T=n(g,{...l,gain:0}),x=r(g,{...u,curve:S});return{connectGraph(){m.connect(E),m.connect(A.inputs===void 0?A:A.inputs[0]),m.connect(T),A.connect(C),C.connect(w.inputs===void 0?w:w.inputs[0]),C.connect(x.inputs===void 0?x:x.inputs[0]),w.connect(E.gain),x.connect(T.gain),E.connect(p,0,0),T.connect(p,0,1)},disconnectGraph(){m.disconnect(E),m.disconnect(A.inputs===void 0?A:A.inputs[0]),m.disconnect(T),A.disconnect(C),C.disconnect(w.inputs===void 0?w:w.inputs[0]),C.disconnect(x.inputs===void 0?x:x.inputs[0]),w.disconnect(E.gain),x.disconnect(T.gain),E.disconnect(p,0,0),T.disconnect(p,0,1)}}},h=(g,m,C,p)=>{const v=new Float32Array(16385),S=new Float32Array(16385),E=new Float32Array(16385),w=new Float32Array(16385),A=Math.floor(16385/2);for(let te=0;te<16385;te+=1)if(te>A){const z=(te-A)/(16384-A)*c;v[te]=Math.cos(z),S[te]=Math.sin(z),E[te]=0,w[te]=1}else{const z=te/(16384-A)*c;v[te]=1,S[te]=0,E[te]=Math.cos(z),w[te]=Math.sin(z)}const T=e(g,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),x=n(g,{...l,gain:0}),_=r(g,{...u,curve:v}),M=n(g,{...l,gain:0}),D=r(g,{...u,curve:S}),F=r(g,{...u,curve:a}),W=n(g,{...l,gain:0}),j=r(g,{...u,curve:E}),H=n(g,{...l,gain:0}),q=r(g,{...u,curve:w});return{connectGraph(){m.connect(T),m.connect(F.inputs===void 0?F:F.inputs[0]),T.connect(x,0),T.connect(M,0),T.connect(W,1),T.connect(H,1),F.connect(C),C.connect(_.inputs===void 0?_:_.inputs[0]),C.connect(D.inputs===void 0?D:D.inputs[0]),C.connect(j.inputs===void 0?j:j.inputs[0]),C.connect(q.inputs===void 0?q:q.inputs[0]),_.connect(x.gain),D.connect(M.gain),j.connect(W.gain),q.connect(H.gain),x.connect(p,0,0),W.connect(p,0,0),M.connect(p,0,1),H.connect(p,0,1)},disconnectGraph(){m.disconnect(T),m.disconnect(F.inputs===void 0?F:F.inputs[0]),T.disconnect(x,0),T.disconnect(M,0),T.disconnect(W,1),T.disconnect(H,1),F.disconnect(C),C.disconnect(_.inputs===void 0?_:_.inputs[0]),C.disconnect(D.inputs===void 0?D:D.inputs[0]),C.disconnect(j.inputs===void 0?j:j.inputs[0]),C.disconnect(q.inputs===void 0?q:q.inputs[0]),_.disconnect(x.gain),D.disconnect(M.gain),j.disconnect(W.gain),q.disconnect(H.gain),x.disconnect(p,0,0),W.disconnect(p,0,0),M.disconnect(p,0,1),H.disconnect(p,0,1)}}},f=(g,m,C,p,v)=>{if(m===1)return d(g,C,p,v);if(m===2)return h(g,C,p,v);throw i()};return(g,{channelCount:m,channelCountMode:C,pan:p,...v})=>{if(C==="max")throw i();const S=t(g,{...v,channelCount:1,channelCountMode:C,numberOfInputs:2}),E=n(g,{...v,channelCount:m,channelCountMode:C,gain:1}),w=n(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:p});let{connectGraph:A,disconnectGraph:T}=f(g,m,E,w,S);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const x={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(F){E.channelCount!==F&&(_&&T(),{connectGraph:A,disconnectGraph:T}=f(g,F,E,w,S),_&&A()),E.channelCount=F},get channelCountMode(){return E.channelCountMode},set channelCountMode(F){if(F==="clamped-max"||F==="max")throw i();E.channelCountMode=F},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(F){E.channelInterpretation=F},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return w.gain},addEventListener(...F){return E.addEventListener(F[0],F[1],F[2])},dispatchEvent(...F){return E.dispatchEvent(F[0])},removeEventListener(...F){return E.removeEventListener(F[0],F[1],F[2])}};let _=!1;const M=()=>{A(),_=!0},D=()=>{T(),_=!1};return o(yl(x,S),M,D)}},$F=(t,e,n,r,i,o,s)=>(a,c)=>{const l=a.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);Xt(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();It(l,{curve:u},"curve"),It(l,c,"oversample");let d=null,h=!1;return s(l,"curve",m=>()=>m.call(l),m=>C=>(m.call(l,C),h&&(r(C)&&d===null?d=t(a,l):!r(C)&&d!==null&&(d(),d=null)),C)),i(l,()=>{h=!0,r(l.curve)&&(d=t(a,l))},()=>{h=!1,d!==null&&(d(),d=null)})},KF=(t,e,n,r,i)=>(o,{curve:s,oversample:a,...c})=>{const l=o.createWaveShaper(),u=o.createWaveShaper();Xt(l,c),Xt(u,c);const d=n(o,{...c,gain:1}),h=n(o,{...c,gain:-1}),f=n(o,{...c,gain:1}),g=n(o,{...c,gain:-1});let m=null,C=!1,p=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(w){d.channelCount=w,h.channelCount=w,l.channelCount=w,f.channelCount=w,u.channelCount=w,g.channelCount=w},get channelCountMode(){return l.channelCountMode},set channelCountMode(w){d.channelCountMode=w,h.channelCountMode=w,l.channelCountMode=w,f.channelCountMode=w,u.channelCountMode=w,g.channelCountMode=w},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(w){d.channelInterpretation=w,h.channelInterpretation=w,l.channelInterpretation=w,f.channelInterpretation=w,u.channelInterpretation=w,g.channelInterpretation=w},get context(){return l.context},get curve(){return p},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)l.curve=w,u.curve=w;else{const A=w.length,T=new Float32Array(A+2-A%2),x=new Float32Array(A+2-A%2);T[0]=w[0],x[0]=-w[A-1];const _=Math.ceil((A+1)/2),M=(A+1)/2-1;for(let D=1;D<_;D+=1){const F=D/_*M,W=Math.floor(F),j=Math.ceil(F);T[D]=W===j?w[W]:(1-(F-W))*w[W]+(1-(j-F))*w[j],x[D]=W===j?-w[A-1-W]:-((1-(F-W))*w[A-1-W])-(1-(j-F))*w[A-1-j]}T[_]=A%2===1?w[_-1]:(w[_-2]+w[_-1])/2,l.curve=T,u.curve=x}p=w,C&&(r(p)&&m===null?m=t(o,d):m!==null&&(m(),m=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(w){l.oversample=w,u.oversample=w},addEventListener(...w){return d.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return d.dispatchEvent(w[0])},removeEventListener(...w){return d.removeEventListener(w[0],w[1],w[2])}};s!==null&&(v.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==v.oversample&&(v.oversample=a);const S=()=>{d.connect(l).connect(f),d.connect(h).connect(u).connect(g).connect(f),C=!0,r(p)&&(m=t(o,d))},E=()=>{d.disconnect(l),l.disconnect(f),d.disconnect(h),h.disconnect(u),u.disconnect(g),g.disconnect(f),C=!1,m!==null&&(m(),m=null)};return i(yl(v,f),S,E)},sr=()=>new DOMException("","NotSupportedError"),JF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},YF=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...JF,...l},h=n(u,d),f=o(u),g=f?r():null,m=c.sampleRate/2;super(c,!1,h,g),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,m,-m),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=g,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){il(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Go(this)&&bd(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},QF=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null,c=null;const l=async(u,d)=>{let h=n(u);const f=Tn(h,d);if(!f){const g={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:s===null?void 0:s,type:h.type};h=e(d,g),a!==null&&h.start(a),c!==null&&h.stop(c)}return o.set(d,h),f?(await t(d,u.detune,h.detune),await t(d,u.frequency,h.frequency)):(await r(d,u.detune,h.detune),await r(d,u.frequency,h.frequency)),await i(u,d,h),h};return{set periodicWave(u){s=u},set start(u){a=u},set stop(u){c=u},render(u,d){const h=o.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},qF={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},e3=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...qF,...l},h=n(u,d),f=o(u),g=f?r():null;super(c,!1,h,g),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,_n,Yn),this._orientationY=e(this,f,h.orientationY,_n,Yn),this._orientationZ=e(this,f,h.orientationZ,_n,Yn),this._positionX=e(this,f,h.positionX,_n,Yn),this._positionY=e(this,f,h.positionY,_n,Yn),this._positionZ=e(this,f,h.positionZ,_n,Yn),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},t3=(t,e,n,r,i,o,s,a,c,l)=>()=>{const u=new WeakMap;let d=null;const h=async(f,g)=>{let m=null,C=o(f);const p={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},v={...p,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},S=Tn(C,g);if("bufferSize"in C)m=r(g,{...p,gain:1});else if(!S){const E={...v,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=i(g,E)}if(u.set(g,m===null?C:m),m!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new s(6,f.context.length,g.sampleRate),F=e(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});F.connect(D.destination),d=(async()=>{const W=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(j,H)=>{const q=n(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:H===0?1:0});return await a(D,j,q.offset),q}));for(let j=0;j<6;j+=1)W[j].connect(F,0,j),W[j].start(0);return l(D)})()}const E=await d,w=r(g,{...p,gain:1});await c(f,g,w);const A=[];for(let D=0;D<E.numberOfChannels;D+=1)A.push(E.getChannelData(D));let T=[A[0][0],A[1][0],A[2][0]],x=[A[3][0],A[4][0],A[5][0]],_=r(g,{...p,gain:1}),M=i(g,{...v,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:x[0],positionY:x[1],positionZ:x[2]});w.connect(_).connect(M.inputs[0]),M.connect(m);for(let D=128;D<E.length;D+=128){const F=[A[0][D],A[1][D],A[2][D]],W=[A[3][D],A[4][D],A[5][D]];if(F.some((j,H)=>j!==T[H])||W.some((j,H)=>j!==x[H])){T=F,x=W;const j=D/g.sampleRate;_.gain.setValueAtTime(0,j),_=r(g,{...p,gain:0}),M=i(g,{...v,orientationX:T[0],orientationY:T[1],orientationZ:T[2],positionX:x[0],positionY:x[1],positionZ:x[2]}),_.gain.setValueAtTime(1,j),w.connect(_).connect(M.inputs[0]),M.connect(m)}}return m}return S?(await t(g,f.orientationX,C.orientationX),await t(g,f.orientationY,C.orientationY),await t(g,f.orientationZ,C.orientationZ),await t(g,f.positionX,C.positionX),await t(g,f.positionY,C.positionY),await t(g,f.positionZ,C.positionZ)):(await a(g,f.orientationX,C.orientationX),await a(g,f.orientationY,C.orientationY),await a(g,f.orientationZ,C.orientationZ),await a(g,f.positionX,C.positionX),await a(g,f.positionY,C.positionY),await a(g,f.positionZ,C.positionZ)),vl(C)?await c(f,g,C.inputs[0]):await c(f,g,C),C};return{render(f,g){const m=u.get(g);return m!==void 0?Promise.resolve(m):h(f,g)}}},n3={disableNormalization:!1},r3=(t,e,n,r)=>class LE{constructor(o,s){const a=e(o),c=r({...n3,...s}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===LE.prototype||n.has(o)}},i3=(t,e)=>(n,r,i)=>(t(r).replay(i),e(r,n,i)),o3=(t,e,n)=>async(r,i,o)=>{const s=t(r);await Promise.all(s.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const h=await e(l).render(l,i),f=r.context.destination;!n(l)&&(r!==f||!n(r))&&h.connect(o,u,c)})).reduce((a,c)=>[...a,...c],[]))},s3=(t,e,n)=>async(r,i,o)=>{const s=e(r);await Promise.all(Array.from(s.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,i);n(a)||u.connect(o,c)}))},a3=(t,e,n,r)=>i=>t(bv,()=>bv(i))?Promise.resolve(t(r,r)).then(o=>{if(!o){const s=n(i,512,0,1);i.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>i.currentTime,s.connect(i.destination)}return i.startRendering()}):new Promise(o=>{const s=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{s.disconnect(),o(a.renderedBuffer)},s.connect(i.destination),i.startRendering()}),c3=t=>(e,n)=>{t.set(e,n)},l3=t=>(e,n)=>t.set(e,n),u3={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},d3=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...u3,...c},d=n(l,u),h=o(l),f=h?r():null;super(a,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},h3=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Tn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.pan,l.pan):await r(c,a.pan,l.pan),vl(l)?await i(a,c,l.inputs[0]):await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},f3=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},p3=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(n);let o=!1,s=!1;try{await r.audioWorklet.addModule(i);const a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>o=!0,a.onprocessorerror=()=>s=!0,c.connect(a),c.start(0),await r.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(i)}return o&&!s},g3=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{r.disconnect(),i(n.currentTime!==0)},n.startRendering()})},m3=()=>new DOMException("","UnknownError"),v3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},y3=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...v3,...l},h=n(u,d),g=o(u)?r():null;super(c,!0,h,g),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},C3=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Tn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,l)}return r.set(s,a),vl(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},I3=()=>typeof window>"u"?null:window,S3=(t,e)=>n=>{n.copyFromChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)r[d]=l[d+s]},n.copyToChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)l[d+s]=r[d]}},b3=t=>e=>{e.copyFromChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyToChannel)},w3=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",i=>()=>{const o=i.call(e);return o===r?null:o},i=>o=>i.call(e,o===null?r:o))},A3=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)i.connect(r,0,c)},()=>i.disconnect(r))},BE=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),FE=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Td=(t,e,n,r)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:s}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:r(s)})},k3=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),E3=t=>({...t,channelCount:t.numberOfOutputs}),T3=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},UE=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;UE(t,e,n+1e-7)}},x3=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},R3=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},P3=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Gy=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},VE=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Wy=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},N3=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},_3=t=>{t.start=(e=>(n=0,r=0,i)=>{const o=t.buffer,s=o===null?r:Math.min(o.duration,r);o!==null&&s>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,i)})(t.start)},GE=(t,e)=>{const n=e.createGain();t.connect(n);const r=(i=>()=>{i.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),yl(t,n),t.stop=(i=>{let o=!1;return(s=0)=>{if(o)try{i.call(t,s)}catch{n.gain.setValueAtTime(0,s)}else i.call(t,s),o=!0}})(t.stop)},Cl=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},M3=sL(Xa),O3=hL(Xa),D3=AB(Ep),WE=new WeakMap,L3=WB(WE),rs=tB(new Map,new WeakMap),Yi=I3(),ZE=pF(rs,eo),jE=GB(Dn),vn=o3(Dn,jE,Da),B3=vL(ZE,yt,vn),dt=zB(IE),qs=GF(Yi),it=iF(qs),zE=new WeakMap,HE=OB(Cl),xd=yF(Yi),XE=eF(xd),$E=tF(Yi),F3=nF(Yi),Ju=IF(Yi),Lt=ZL(aL(mE),dL(M3,O3,Of,D3,Df,Dn,L3,Sd,yt,Xa,Go,Da,Mh),rs,qB(mv,Df,Dn,yt,Ku,Go),eo,Tp,sr,IB(Of,mv,Dn,yt,Ku,dt,Go,it),TB(zE,Dn,yi),HE,dt,XE,$E,F3,it,Ju),U3=mL(Lt,B3,eo,ZE,dt,it),KE=new WeakSet,pb=gF(Yi),JE=pB(new Uint32Array(1)),YE=S3(JE,eo),QE=b3(JE),V3=CL(KE,rs,sr,pb,qs,f3(pb),YE,QE),xp=fL(or),qE=s3(jE,wd,Da),to=cB(qE),Il=vF(xp,rs,x3,R3,P3,Gy,VE,Wy,_3,w3(Td),GE),no=i3(ZB(wd),qE),G3=bL(to,Il,yt,no,vn),Ii=jL(cL(yE),zE,CE,zL,eL,tL,nL,rL,iL,fv,pE,xd,UE),W3=SL(Lt,G3,Ii,dn,Il,dt,it,Cl),Z3=_L(Lt,ML,eo,dn,CF(or,Td),dt,it,vn),j3=eB(to,OE,yt,no,vn),$a=l3(WE),z3=qL(Lt,Ii,j3,Tp,OE,dt,it,$a),ea=hF(Xa,$E),H3=A3(dn,ea),ta=TF(xd,H3),X3=iB(ta,yt,vn),$3=rB(Lt,X3,ta,dt,it),K3=aB(kd,yt,vn),J3=sB(Lt,K3,kd,dt,it,E3),Y3=PF(xp,Il,or,ea),Sl=RF(xp,rs,Y3,Gy,Wy),Q3=fB(to,Sl,yt,no,vn),q3=hB(Lt,Ii,Q3,Sl,dt,it,Cl),eT=NF(sr,Td),e5=vB(eT,yt,vn),t5=mB(Lt,e5,eT,dt,it,$a),n5=wB(to,DE,yt,no,vn),r5=bB(Lt,Ii,n5,DE,dt,it,$a),tT=_F(sr),i5=NB(to,tT,yt,no,vn),o5=PB(Lt,Ii,i5,tT,sr,dt,it,$a),s5=UB(to,or,yt,no,vn),a5=FB(Lt,Ii,s5,or,dt,it),c5=LF(Tp,dn,Ed,sr),Zy=a3(rs,or,Ed,g3(or,qs)),l5=QB(Il,yt,qs,vn,Zy),u5=MF(c5),d5=JB(Lt,u5,l5,dt,it,$a),h5=OL(Ii,ta,Sl,Ed,sr,BE,it,Td),nT=new WeakMap,f5=dF(Z3,h5,HE,it,nT,Cl),rT=WF(xp,rs,Gy,VE,Wy,GE),p5=QF(to,rT,yt,no,vn),g5=YF(Lt,Ii,rT,p5,dt,it,Cl),iT=uB(Il),m5=KF(iT,dn,or,FE,ea),Rp=$F(iT,dn,m5,FE,ea,xd,Td),v5=jF(Of,dn,ta,or,Ed,Rp,sr,Df,BE,ea),oT=ZF(v5),y5=t3(to,ta,Sl,or,oT,yt,qs,no,vn,Zy),C5=e3(Lt,Ii,oT,y5,dt,it,$a),I5=zF(eo),S5=r3(I5,dt,new WeakSet,T3),b5=XF(ta,kd,or,Rp,sr,ea),sT=HF(b5,sr),w5=h3(to,sT,yt,no,vn),A5=d3(Lt,Ii,sT,w5,dt,it),k5=C3(Rp,yt,vn),E5=y3(Lt,dn,Rp,k5,dt,it,$a),aT=oF(Yi),jy=DB(Yi),cT=new WeakMap,T5=HB(cT,qs),x5=aT?uL(rs,sr,MB(Yi),jy,LB(oL),dt,T5,it,Ju,new WeakMap,new WeakMap,p3(Ju,qs),Yi):void 0,R5=rF(XE,it),P5=CB(KE,rs,yB,_B,new WeakSet,dt,R5,Iv,bv,YE,QE),N5=YL(x5,U3,V3,W3,z3,$3,J3,q3,t5,P5,r5,o5,a5,d5,f5,g5,C5,S5,A5,E5),_5=sF(Lt,BF,dt,it),M5=cF(Lt,FF,dt,it),O5=lF(Lt,UF,dt,it),D5=VF(dn,it),L5=uF(Lt,D5,dt),B5=NL(N5,dn,sr,m3,_5,M5,O5,L5,xd),lT=XB(nT),F5=pL(lT),uT=lB(eo),U5=kB(lT),dT=xB(eo),hT=new WeakMap,V5=VB(hT,yi),G5=EF(uT,eo,dn,ta,kd,Sl,or,Ed,sr,dT,jy,V5,ea),W5=bF(dn,G5,or,sr,ea),Z5=JL(to,uT,Il,ta,kd,Sl,or,U5,dT,jy,yt,Ju,qs,no,vn,Zy),j5=jB(cT),z5=c3(hT),gb=aT?XL(F5,Lt,Ii,Z5,W5,Dn,j5,dt,it,Ju,k3,z5,N3,Cl):void 0,H5="data:text/javascript;base64,KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgV0VCQVVESU9fQkxPQ0tfU0laRSA9IDEyODsKICAgIGNvbnN0IERFRkFVTFRfQkxPQ0tfU0laRSA9IDEwMjQ7IC8vIERlZmF1bHQgYmxvY2sgc2l6ZSBpZiBub3QgcHJvdmlkZWQgaW4gb3B0aW9ucwogICAgLyoqIE92ZXJsYXAtQWRkIE5vZGUgKi8KICAgIGNsYXNzIE9MQVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgICAgICAgbmJJbnB1dHM7CiAgICAgICAgbmJPdXRwdXRzOwogICAgICAgIGJsb2NrU2l6ZTsKICAgICAgICBob3BTaXplOwogICAgICAgIG5iT3ZlcmxhcHM7CiAgICAgICAgaW5wdXRCdWZmZXJzID0gW107CiAgICAgICAgaW5wdXRCdWZmZXJzSGVhZCA9IFtdOwogICAgICAgIGlucHV0QnVmZmVyc1RvU2VuZCA9IFtdOwogICAgICAgIG91dHB1dEJ1ZmZlcnMgPSBbXTsKICAgICAgICBvdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSA9IFtdOwogICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMubmJJbnB1dHMgPSBvcHRpb25zLm51bWJlck9mSW5wdXRzIHx8IDE7CiAgICAgICAgICAgIHRoaXMubmJPdXRwdXRzID0gb3B0aW9ucy5udW1iZXJPZk91dHB1dHMgfHwgMTsKICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBvcHRpb25zLnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplIHx8IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5ob3BTaXplID0gV0VCQVVESU9fQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5uYk92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLmJsb2NrU2l6ZSAvIHRoaXMuaG9wU2l6ZSk7CiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTsKICAgICAgICB9CiAgICAgICAgaW5pdGlhbGl6ZUJ1ZmZlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWQgPSBuZXcgQXJyYXkodGhpcy5uYklucHV0cyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMgPSBuZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlID0gbmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYk91dHB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFsbG9jYXRlSW5wdXRDaGFubmVscyhpbnB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWRbaW5wdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplICsgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc1tpbnB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW2lucHV0SW5kZXhdW2ldID0gdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0uc3ViYXJyYXkoMCwgdGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxvY2F0ZU91dHB1dENoYW5uZWxzKG91dHB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tvdXRwdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbb3V0cHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVtvdXRwdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZChpbnB1dHMsIG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gaW5wdXRzW2ldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYkNoYW5uZWxzICE9PSB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gb3V0cHV0c1tpXS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJDaGFubmVscyAhPT0gdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkSW5wdXRzKGlucHV0cykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gaW5wdXRzW2ldW2pdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLnNldCh3ZWJBdWRpb0Jsb2NrLCB0aGlzLmJsb2NrU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgd3JpdGVPdXRwdXRzKG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iT3V0cHV0czsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMub3V0cHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gb3V0cHV0c1tpXVtqXTsKICAgICAgICAgICAgICAgICAgICB3ZWJBdWRpb0Jsb2NrLnNldCh0aGlzLm91dHB1dEJ1ZmZlcnNbaV1bal0uc3ViYXJyYXkoMCwgV0VCQVVESU9fQkxPQ0tfU0laRSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0SW5wdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2hpZnRPdXRwdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmZpbGwoMCwgdGhpcy5ibG9ja1NpemUgLSBXRUJBVURJT19CTE9DS19TSVpFKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2ldW2pdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbaV1bal0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmJsb2NrU2l6ZTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tpXVtqXVtrXSArPSB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW2ldW2pdW2tdIC8gdGhpcy5uYk92ZXJsYXBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICB0aGlzLnJlYWxsb2NhdGVDaGFubmVsc0lmTmVlZGVkKGlucHV0cywgb3V0cHV0cyk7CiAgICAgICAgICAgIHRoaXMucmVhZElucHV0cyhpbnB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCk7CiAgICAgICAgICAgIHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpOwogICAgICAgICAgICB0aGlzLnByb2Nlc3NPTEEodGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQsIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUsIHBhcmFtZXRlcnMpOwogICAgICAgICAgICB0aGlzLmhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCk7CiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRzKG91dHB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgKHgpIHsKICAgIAlyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4OwogICAgfQoKICAgIGZ1bmN0aW9uIEZGVChzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfCAwOwogICAgICBpZiAodGhpcy5zaXplIDw9IDEgfHwgKHRoaXMuc2l6ZSAmICh0aGlzLnNpemUgLSAxKSkgIT09IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxJyk7CgogICAgICB0aGlzLl9jc2l6ZSA9IHNpemUgPDwgMTsKCiAgICAgIC8vIE5PVEU6IFVzZSBvZiBgdmFyYCBpcyBpbnRlbnRpb25hbCBmb3Igb2xkIFY4IHZlcnNpb25zCiAgICAgIHZhciB0YWJsZSA9IG5ldyBBcnJheSh0aGlzLnNpemUgKiAyKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSSAqIGkgLyB0aGlzLnNpemU7CiAgICAgICAgdGFibGVbaV0gPSBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgdGFibGVbaSArIDFdID0gLU1hdGguc2luKGFuZ2xlKTsKICAgICAgfQogICAgICB0aGlzLnRhYmxlID0gdGFibGU7CgogICAgICAvLyBGaW5kIHNpemUncyBwb3dlciBvZiB0d28KICAgICAgdmFyIHBvd2VyID0gMDsKICAgICAgZm9yICh2YXIgdCA9IDE7IHRoaXMuc2l6ZSA+IHQ7IHQgPDw9IDEpCiAgICAgICAgcG93ZXIrKzsKCiAgICAgIC8vIENhbGN1bGF0ZSBpbml0aWFsIHN0ZXAncyB3aWR0aDoKICAgICAgLy8gICAqIElmIHdlIGFyZSBmdWxsIHJhZGl4LTQgLSBpdCBpcyAyeCBzbWFsbGVyIHRvIGdpdmUgaW5pdGFsIGxlbj04CiAgICAgIC8vICAgKiBPdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgYHBvd2VyYCB0byBnaXZlIGxlbj00CiAgICAgIHRoaXMuX3dpZHRoID0gcG93ZXIgJSAyID09PSAwID8gcG93ZXIgLSAxIDogcG93ZXI7CgogICAgICAvLyBQcmUtY29tcHV0ZSBiaXQtcmV2ZXJzYWwgcGF0dGVybnMKICAgICAgdGhpcy5fYml0cmV2ID0gbmV3IEFycmF5KDEgPDwgdGhpcy5fd2lkdGgpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2JpdHJldi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuX2JpdHJldltqXSA9IDA7CiAgICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBzaGlmdCA8IHRoaXMuX3dpZHRoOyBzaGlmdCArPSAyKSB7CiAgICAgICAgICB2YXIgcmV2U2hpZnQgPSB0aGlzLl93aWR0aCAtIHNoaWZ0IC0gMjsKICAgICAgICAgIHRoaXMuX2JpdHJldltqXSB8PSAoKGogPj4+IHNoaWZ0KSAmIDMpIDw8IHJldlNoaWZ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fb3V0ID0gbnVsbDsKICAgICAgdGhpcy5fZGF0YSA9IG51bGw7CiAgICAgIHRoaXMuX2ludiA9IDA7CiAgICB9CiAgICB2YXIgZmZ0ID0gRkZUOwoKICAgIEZGVC5wcm90b3R5cGUuZnJvbUNvbXBsZXhBcnJheSA9IGZ1bmN0aW9uIGZyb21Db21wbGV4QXJyYXkoY29tcGxleCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCBuZXcgQXJyYXkoY29tcGxleC5sZW5ndGggPj4+IDEpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXgubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzW2kgPj4+IDFdID0gY29tcGxleFtpXTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5jcmVhdGVDb21wbGV4QXJyYXkgPSBmdW5jdGlvbiBjcmVhdGVDb21wbGV4QXJyYXkoKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudG9Db21wbGV4QXJyYXkgPSBmdW5jdGlvbiB0b0NvbXBsZXhBcnJheShpbnB1dCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCB0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHJlc1tpXSA9IGlucHV0W2kgPj4+IDFdOwogICAgICAgIHJlc1tpICsgMV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUuY29tcGxldGVTcGVjdHJ1bSA9IGZ1bmN0aW9uIGNvbXBsZXRlU3BlY3RydW0oc3BlY3RydW0pIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLl9jc2l6ZTsKICAgICAgdmFyIGhhbGYgPSBzaXplID4+PiAxOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGhhbGY7IGkgKz0gMikgewogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpXSA9IHNwZWN0cnVtW2ldOwogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpICsgMV0gPSAtc3BlY3RydW1baSArIDFdOwogICAgICB9CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl90cmFuc2Zvcm00KCk7CiAgICAgIHRoaXMuX291dCA9IG51bGw7CiAgICAgIHRoaXMuX2RhdGEgPSBudWxsOwogICAgfTsKCiAgICBGRlQucHJvdG90eXBlLnJlYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiByZWFsVHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl9yZWFsVHJhbnNmb3JtNCgpOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5pbnZlcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gaW52ZXJzZVRyYW5zZm9ybShvdXQsIGRhdGEpIHsKICAgICAgaWYgKG91dCA9PT0gZGF0YSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCcpOwoKICAgICAgdGhpcy5fb3V0ID0gb3V0OwogICAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgICAgdGhpcy5faW52ID0gMTsKICAgICAgdGhpcy5fdHJhbnNmb3JtNCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykKICAgICAgICBvdXRbaV0gLz0gdGhpcy5zaXplOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgLy8gcmFkaXgtNCBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IFVzZXMgb2YgYHZhcmAgYXJlIGludGVudGlvbmFsIGZvciBvbGRlciBWOCB2ZXJzaW9uIHRoYXQgZG8gbm90CiAgICAvLyBzdXBwb3J0IGJvdGggYGxldCBjb21wb3VuZCBhc3NpZ25tZW50c2AgYW5kIGBjb25zdCBwaGlgCiAgICBGRlQucHJvdG90eXBlLl90cmFuc2Zvcm00ID0gZnVuY3Rpb24gX3RyYW5zZm9ybTQoKSB7CiAgICAgIHZhciBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIHZhciBzaXplID0gdGhpcy5fY3NpemU7CgogICAgICAvLyBJbml0aWFsIHN0ZXAgKHBlcm11dGUgYW5kIHRyYW5zZm9ybSkKICAgICAgdmFyIHdpZHRoID0gdGhpcy5fd2lkdGg7CiAgICAgIHZhciBzdGVwID0gMSA8PCB3aWR0aDsKICAgICAgdmFyIGxlbiA9IChzaXplIC8gc3RlcCkgPDwgMTsKCiAgICAgIHZhciBvdXRPZmY7CiAgICAgIHZhciB0OwogICAgICB2YXIgYml0cmV2ID0gdGhpcy5fYml0cmV2OwogICAgICBpZiAobGVuID09PSA0KSB7CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGVuID09PSA4CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm00KG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gbGVuID4+PiAyOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgLy8gRnVsbCBjYXNlCiAgICAgICAgICB2YXIgbGltaXQgPSBvdXRPZmYgKyBxdWFydGVyTGVuOwogICAgICAgICAgZm9yICh2YXIgaSA9IG91dE9mZiwgayA9IDA7IGkgPCBsaW1pdDsgaSArPSAyLCBrICs9IHN0ZXApIHsKICAgICAgICAgICAgY29uc3QgQSA9IGk7CiAgICAgICAgICAgIGNvbnN0IEIgPSBBICsgcXVhcnRlckxlbjsKICAgICAgICAgICAgY29uc3QgQyA9IEIgKyBxdWFydGVyTGVuOwogICAgICAgICAgICBjb25zdCBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgQXIgPSBvdXRbQV07CiAgICAgICAgICAgIGNvbnN0IEFpID0gb3V0W0EgKyAxXTsKICAgICAgICAgICAgY29uc3QgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIGNvbnN0IEJpID0gb3V0W0IgKyAxXTsKICAgICAgICAgICAgY29uc3QgQ3IgPSBvdXRbQ107CiAgICAgICAgICAgIGNvbnN0IENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgY29uc3QgRHIgPSBvdXRbRF07CiAgICAgICAgICAgIGNvbnN0IERpID0gb3V0W0QgKyAxXTsKCiAgICAgICAgICAgIC8vIE1pZGRsZSB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgTUFyID0gQXI7CiAgICAgICAgICAgIGNvbnN0IE1BaSA9IEFpOwoKICAgICAgICAgICAgY29uc3QgdGFibGVCciA9IHRhYmxlW2tdOwogICAgICAgICAgICBjb25zdCB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICBjb25zdCBNQnIgPSBCciAqIHRhYmxlQnIgLSBCaSAqIHRhYmxlQmk7CiAgICAgICAgICAgIGNvbnN0IE1CaSA9IEJyICogdGFibGVCaSArIEJpICogdGFibGVCcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2kgPSBpbnYgKiB0YWJsZVsyICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNQ3IgPSBDciAqIHRhYmxlQ3IgLSBDaSAqIHRhYmxlQ2k7CiAgICAgICAgICAgIGNvbnN0IE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRHIgPSB0YWJsZVszICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGkgPSBpbnYgKiB0YWJsZVszICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIGNvbnN0IE1EaSA9IERyICogdGFibGVEaSArIERpICogdGFibGVEcjsKCiAgICAgICAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgVDByID0gTUFyICsgTUNyOwogICAgICAgICAgICBjb25zdCBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIGNvbnN0IFQxciA9IE1BciAtIE1DcjsKICAgICAgICAgICAgY29uc3QgVDFpID0gTUFpIC0gTUNpOwogICAgICAgICAgICBjb25zdCBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIGNvbnN0IFQyaSA9IE1CaSArIE1EaTsKICAgICAgICAgICAgY29uc3QgVDNyID0gaW52ICogKE1CciAtIE1Ecik7CiAgICAgICAgICAgIGNvbnN0IFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKICAgICAgICAgICAgY29uc3QgRkFpID0gVDBpICsgVDJpOwoKICAgICAgICAgICAgY29uc3QgRkNyID0gVDByIC0gVDJyOwogICAgICAgICAgICBjb25zdCBGQ2kgPSBUMGkgLSBUMmk7CgogICAgICAgICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgICAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgICAgICAgIGNvbnN0IEZEciA9IFQxciAtIFQzaTsKICAgICAgICAgICAgY29uc3QgRkRpID0gVDFpICsgVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CiAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgb3V0W0MgKyAxXSA9IEZDaTsKICAgICAgICAgICAgb3V0W0RdID0gRkRyOwogICAgICAgICAgICBvdXRbRCArIDFdID0gRkRpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyByYWRpeC0yIGltcGxlbWVudGF0aW9uCiAgICAvLwogICAgLy8gTk9URTogT25seSBjYWxsZWQgZm9yIGxlbj00CiAgICBGRlQucHJvdG90eXBlLl9zaW5nbGVUcmFuc2Zvcm0yID0gZnVuY3Rpb24gX3NpbmdsZVRyYW5zZm9ybTIob3V0T2ZmLCBvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IGV2ZW5JID0gZGF0YVtvZmYgKyAxXTsKICAgICAgY29uc3Qgb2RkUiA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IG9kZEkgPSBkYXRhW29mZiArIHN0ZXAgKyAxXTsKCiAgICAgIGNvbnN0IGxlZnRSID0gZXZlblIgKyBvZGRSOwogICAgICBjb25zdCBsZWZ0SSA9IGV2ZW5JICsgb2RkSTsKICAgICAgY29uc3QgcmlnaHRSID0gZXZlblIgLSBvZGRSOwogICAgICBjb25zdCByaWdodEkgPSBldmVuSSAtIG9kZEk7CgogICAgICBvdXRbb3V0T2ZmXSA9IGxlZnRSOwogICAgICBvdXRbb3V0T2ZmICsgMV0gPSBsZWZ0STsKICAgICAgb3V0W291dE9mZiArIDJdID0gcmlnaHRSOwogICAgICBvdXRbb3V0T2ZmICsgM10gPSByaWdodEk7CiAgICB9OwoKICAgIC8vIHJhZGl4LTQKICAgIC8vCiAgICAvLyBOT1RFOiBPbmx5IGNhbGxlZCBmb3IgbGVuPTgKICAgIEZGVC5wcm90b3R5cGUuX3NpbmdsZVRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlVHJhbnNmb3JtNChvdXRPZmYsIG9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuX291dDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7CiAgICAgIGNvbnN0IGludiA9IHRoaXMuX2ludiA/IC0xIDogMTsKICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwICogMjsKICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwICogMzsKCiAgICAgIC8vIE9yaWdpbmFsIHZhbHVlcwogICAgICBjb25zdCBBciA9IGRhdGFbb2ZmXTsKICAgICAgY29uc3QgQWkgPSBkYXRhW29mZiArIDFdOwogICAgICBjb25zdCBCciA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IEJpID0gZGF0YVtvZmYgKyBzdGVwICsgMV07CiAgICAgIGNvbnN0IENyID0gZGF0YVtvZmYgKyBzdGVwMl07CiAgICAgIGNvbnN0IENpID0gZGF0YVtvZmYgKyBzdGVwMiArIDFdOwogICAgICBjb25zdCBEciA9IGRhdGFbb2ZmICsgc3RlcDNdOwogICAgICBjb25zdCBEaSA9IGRhdGFbb2ZmICsgc3RlcDMgKyAxXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDBpID0gQWkgKyBDaTsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDFpID0gQWkgLSBDaTsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDJpID0gQmkgKyBEaTsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwogICAgICBjb25zdCBUM2kgPSBpbnYgKiAoQmkgLSBEaSk7CgogICAgICAvLyBGaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgRkFyID0gVDByICsgVDJyOwogICAgICBjb25zdCBGQWkgPSBUMGkgKyBUMmk7CgogICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKICAgICAgY29uc3QgRkNpID0gVDBpIC0gVDJpOwoKICAgICAgY29uc3QgRkRyID0gVDFyIC0gVDNpOwogICAgICBjb25zdCBGRGkgPSBUMWkgKyBUM3I7CgogICAgICBvdXRbb3V0T2ZmXSA9IEZBcjsKICAgICAgb3V0W291dE9mZiArIDFdID0gRkFpOwogICAgICBvdXRbb3V0T2ZmICsgMl0gPSBGQnI7CiAgICAgIG91dFtvdXRPZmYgKyAzXSA9IEZCaTsKICAgICAgb3V0W291dE9mZiArIDRdID0gRkNyOwogICAgICBvdXRbb3V0T2ZmICsgNV0gPSBGQ2k7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICAvLyBSZWFsIGlucHV0IHJhZGl4LTQgaW1wbGVtZW50YXRpb24KICAgIEZGVC5wcm90b3R5cGUuX3JlYWxUcmFuc2Zvcm00ID0gZnVuY3Rpb24gX3JlYWxUcmFuc2Zvcm00KCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5fb3V0OwogICAgICB2YXIgc2l6ZSA9IHRoaXMuX2NzaXplOwoKICAgICAgLy8gSW5pdGlhbCBzdGVwIChwZXJtdXRlIGFuZCB0cmFuc2Zvcm0pCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoOwogICAgICB2YXIgc3RlcCA9IDEgPDwgd2lkdGg7CiAgICAgIHZhciBsZW4gPSAoc2l6ZSAvIHN0ZXApIDw8IDE7CgogICAgICB2YXIgb3V0T2ZmOwogICAgICB2YXIgdDsKICAgICAgdmFyIGJpdHJldiA9IHRoaXMuX2JpdHJldjsKICAgICAgaWYgKGxlbiA9PT0gNCkgewogICAgICAgIGZvciAob3V0T2ZmID0gMCwgdCA9IDA7IG91dE9mZiA8IHNpemU7IG91dE9mZiArPSBsZW4sIHQrKykgewogICAgICAgICAgY29uc3Qgb2ZmID0gYml0cmV2W3RdOwogICAgICAgICAgdGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLCBvZmYgPj4+IDEsIHN0ZXAgPj4+IDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZW4gPT09IDgKICAgICAgICBmb3IgKG91dE9mZiA9IDAsIHQgPSAwOyBvdXRPZmYgPCBzaXplOyBvdXRPZmYgKz0gbGVuLCB0KyspIHsKICAgICAgICAgIGNvbnN0IG9mZiA9IGJpdHJldlt0XTsKICAgICAgICAgIHRoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG91dE9mZiwgb2ZmID4+PiAxLCBzdGVwID4+PiAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBoYWxmTGVuID0gbGVuID4+PiAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gaGFsZkxlbiA+Pj4gMTsKICAgICAgICB2YXIgaHF1YXJ0ZXJMZW4gPSBxdWFydGVyTGVuID4+PiAxOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDw9IGhxdWFydGVyTGVuOyBpICs9IDIsIGsgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgQSA9IG91dE9mZiArIGk7CiAgICAgICAgICAgIHZhciBCID0gQSArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBDID0gQiArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgdmFyIEFyID0gb3V0W0FdOwogICAgICAgICAgICB2YXIgQWkgPSBvdXRbQSArIDFdOwogICAgICAgICAgICB2YXIgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIHZhciBCaSA9IG91dFtCICsgMV07CiAgICAgICAgICAgIHZhciBDciA9IG91dFtDXTsKICAgICAgICAgICAgdmFyIENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgdmFyIERyID0gb3V0W0RdOwogICAgICAgICAgICB2YXIgRGkgPSBvdXRbRCArIDFdOwoKICAgICAgICAgICAgLy8gTWlkZGxlIHZhbHVlcwogICAgICAgICAgICB2YXIgTUFyID0gQXI7CiAgICAgICAgICAgIHZhciBNQWkgPSBBaTsKCiAgICAgICAgICAgIHZhciB0YWJsZUJyID0gdGFibGVba107CiAgICAgICAgICAgIHZhciB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICB2YXIgTUJyID0gQnIgKiB0YWJsZUJyIC0gQmkgKiB0YWJsZUJpOwogICAgICAgICAgICB2YXIgTUJpID0gQnIgKiB0YWJsZUJpICsgQmkgKiB0YWJsZUJyOwoKICAgICAgICAgICAgdmFyIHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIHZhciB0YWJsZUNpID0gaW52ICogdGFibGVbMiAqIGsgKyAxXTsKICAgICAgICAgICAgdmFyIE1DciA9IENyICogdGFibGVDciAtIENpICogdGFibGVDaTsKICAgICAgICAgICAgdmFyIE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIHZhciB0YWJsZURyID0gdGFibGVbMyAqIGtdOwogICAgICAgICAgICB2YXIgdGFibGVEaSA9IGludiAqIHRhYmxlWzMgKiBrICsgMV07CiAgICAgICAgICAgIHZhciBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIHZhciBNRGkgPSBEciAqIHRhYmxlRGkgKyBEaSAqIHRhYmxlRHI7CgogICAgICAgICAgICAvLyBQcmUtRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBUMHIgPSBNQXIgKyBNQ3I7CiAgICAgICAgICAgIHZhciBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIHZhciBUMXIgPSBNQXIgLSBNQ3I7CiAgICAgICAgICAgIHZhciBUMWkgPSBNQWkgLSBNQ2k7CiAgICAgICAgICAgIHZhciBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIHZhciBUMmkgPSBNQmkgKyBNRGk7CiAgICAgICAgICAgIHZhciBUM3IgPSBpbnYgKiAoTUJyIC0gTURyKTsKICAgICAgICAgICAgdmFyIFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBGQXIgPSBUMHIgKyBUMnI7CiAgICAgICAgICAgIHZhciBGQWkgPSBUMGkgKyBUMmk7CgogICAgICAgICAgICB2YXIgRkJyID0gVDFyICsgVDNpOwogICAgICAgICAgICB2YXIgRkJpID0gVDFpIC0gVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CgogICAgICAgICAgICAvLyBPdXRwdXQgZmluYWwgbWlkZGxlIHBvaW50CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyIEZDciA9IFQwciAtIFQycjsKICAgICAgICAgICAgICB2YXIgRkNpID0gVDBpIC0gVDJpOwogICAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgICBvdXRbQyArIDFdID0gRkNpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIG91cnNlbHZlcwogICAgICAgICAgICBpZiAoaSA9PT0gaHF1YXJ0ZXJMZW4pCiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBJbiB0aGUgZmxpcHBlZCBjYXNlOgogICAgICAgICAgICAvLyBNQWkgPSAtTUFpCiAgICAgICAgICAgIC8vIE1Ccj0tTUJpLCBNQmk9LU1CcgogICAgICAgICAgICAvLyBNQ3I9LU1DcgogICAgICAgICAgICAvLyBNRHI9TURpLCBNRGk9TURyCiAgICAgICAgICAgIHZhciBTVDByID0gVDFyOwogICAgICAgICAgICB2YXIgU1QwaSA9IC1UMWk7CiAgICAgICAgICAgIHZhciBTVDFyID0gVDByOwogICAgICAgICAgICB2YXIgU1QxaSA9IC1UMGk7CiAgICAgICAgICAgIHZhciBTVDJyID0gLWludiAqIFQzaTsKICAgICAgICAgICAgdmFyIFNUMmkgPSAtaW52ICogVDNyOwogICAgICAgICAgICB2YXIgU1QzciA9IC1pbnYgKiBUMmk7CiAgICAgICAgICAgIHZhciBTVDNpID0gLWludiAqIFQycjsKCiAgICAgICAgICAgIHZhciBTRkFyID0gU1QwciArIFNUMnI7CiAgICAgICAgICAgIHZhciBTRkFpID0gU1QwaSArIFNUMmk7CgogICAgICAgICAgICB2YXIgU0ZCciA9IFNUMXIgKyBTVDNpOwogICAgICAgICAgICB2YXIgU0ZCaSA9IFNUMWkgLSBTVDNyOwoKICAgICAgICAgICAgdmFyIFNBID0gb3V0T2ZmICsgcXVhcnRlckxlbiAtIGk7CiAgICAgICAgICAgIHZhciBTQiA9IG91dE9mZiArIGhhbGZMZW4gLSBpOwoKICAgICAgICAgICAgb3V0W1NBXSA9IFNGQXI7CiAgICAgICAgICAgIG91dFtTQSArIDFdID0gU0ZBaTsKICAgICAgICAgICAgb3V0W1NCXSA9IFNGQnI7CiAgICAgICAgICAgIG91dFtTQiArIDFdID0gU0ZCaTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gcmFkaXgtMiBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49NAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTIgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IG9kZFIgPSBkYXRhW29mZiArIHN0ZXBdOwoKICAgICAgY29uc3QgbGVmdFIgPSBldmVuUiArIG9kZFI7CiAgICAgIGNvbnN0IHJpZ2h0UiA9IGV2ZW5SIC0gb2RkUjsKCiAgICAgIG91dFtvdXRPZmZdID0gbGVmdFI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IHJpZ2h0UjsKICAgICAgb3V0W291dE9mZiArIDNdID0gMDsKICAgIH07CgogICAgLy8gcmFkaXgtNAogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49OAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTQob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwogICAgICBjb25zdCBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcCAqIDI7CiAgICAgIGNvbnN0IHN0ZXAzID0gc3RlcCAqIDM7CgogICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgQXIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IEJyID0gZGF0YVtvZmYgKyBzdGVwXTsKICAgICAgY29uc3QgQ3IgPSBkYXRhW29mZiArIHN0ZXAyXTsKICAgICAgY29uc3QgRHIgPSBkYXRhW29mZiArIHN0ZXAzXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwoKICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKCiAgICAgIGNvbnN0IEZCciA9IFQxcjsKICAgICAgY29uc3QgRkJpID0gLVQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKCiAgICAgIGNvbnN0IEZEciA9IFQxcjsKICAgICAgY29uc3QgRkRpID0gVDNyOwoKICAgICAgb3V0W291dE9mZl0gPSBGQXI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IEZCcjsKICAgICAgb3V0W291dE9mZiArIDNdID0gRkJpOwogICAgICBvdXRbb3V0T2ZmICsgNF0gPSBGQ3I7CiAgICAgIG91dFtvdXRPZmYgKyA1XSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICB2YXIgRkZUJDEgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmZ0KTsKCiAgICBjb25zdCBCVUZGRVJFRF9CTE9DS19TSVpFID0gMjA0ODsKICAgIGZ1bmN0aW9uIGdlbkhhbm5XaW5kb3cobGVuZ3RoKSB7CiAgICAgICAgbGV0IHdpbiA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdpbltpXSA9IDAuNSAqICgxIC0gTWF0aC5jb3MoMiAqIE1hdGguUEkgKiBpIC8gbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3aW47CiAgICB9CiAgICBjbGFzcyBQaGFzZVZvY29kZXJQcm9jZXNzb3IgZXh0ZW5kcyBPTEFQcm9jZXNzb3IgewogICAgICAgIGZmdFNpemU7CiAgICAgICAgdGltZUN1cnNvcjsKICAgICAgICBoYW5uV2luZG93OwogICAgICAgIGZmdDsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlcjsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ7CiAgICAgICAgdGltZUNvbXBsZXhCdWZmZXI7CiAgICAgICAgbWFnbml0dWRlczsKICAgICAgICBwZWFrSW5kZXhlczsKICAgICAgICBuYlBlYWtzOwogICAgICAgIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaXRjaEZhY3RvcicsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLjAKICAgICAgICAgICAgICAgIH1dOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMucHJvY2Vzc29yT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogQlVGRkVSRURfQkxPQ0tfU0laRSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMuZmZ0U2l6ZSA9IHRoaXMuYmxvY2tTaXplOwogICAgICAgICAgICB0aGlzLnRpbWVDdXJzb3IgPSAwOwogICAgICAgICAgICB0aGlzLmhhbm5XaW5kb3cgPSBnZW5IYW5uV2luZG93KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgLy8gcHJlcGFyZSBGRlQgYW5kIHByZS1hbGxvY2F0ZSBidWZmZXJzCiAgICAgICAgICAgIHRoaXMuZmZ0ID0gbmV3IEZGVCQxKHRoaXMuZmZ0U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy50aW1lQ29tcGxleEJ1ZmZlciA9IHRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICAgICAgICB0aGlzLm1hZ25pdHVkZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZSAvIDIgKyAxKTsKICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlcyA9IG5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLm5iUGVha3MgPSAwOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzT0xBKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIGNvbnN0IHBpdGNoRmFjdG9yID0gcGFyYW1ldGVycy5waXRjaEZhY3RvcltwYXJhbWV0ZXJzLnBpdGNoRmFjdG9yLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dHNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhhbm5XaW5kb3coaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlciwgaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQZWFrcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRQZWFrcyhwaXRjaEZhY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCBvdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIYW5uV2luZG93KG91dHB1dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lQ3Vyc29yICs9IHRoaXMuaG9wU2l6ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGFwcGx5SGFubldpbmRvdyhpbnB1dCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGlucHV0W2ldICo9IHRoaXMuaGFubldpbmRvd1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb21wdXRlTWFnbml0dWRlcygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdGhpcy5tYWduaXR1ZGVzLmxlbmd0aDsgaSsrLCBqICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2pdOwogICAgICAgICAgICAgICAgY29uc3QgaW1hZyA9IHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbaiArIDFdOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGVzW2ldID0gcmVhbCAqKiAyICsgaW1hZyAqKiAyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmRQZWFrcygpIHsKICAgICAgICAgICAgdGhpcy5uYlBlYWtzID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGVuZCA9IHRoaXMubWFnbml0dWRlcy5sZW5ndGggLSAyOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pdHVkZXNbaSAtIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSAtIDJdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDJdID49IG1hZykgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3MrK10gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0UGVha3MocGl0Y2hGYWN0b3IpIHsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iUGVha3M7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGVha0luZGV4ID0gdGhpcy5wZWFrSW5kZXhlc1tpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlYWtJbmRleFNoaWZ0ZWQgPSBNYXRoLnJvdW5kKHBlYWtJbmRleCAqIHBpdGNoRmFjdG9yKTsKICAgICAgICAgICAgICAgIGlmIChwZWFrSW5kZXhTaGlmdGVkID4gdGhpcy5tYWduaXR1ZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoaSA+IDApID8gcGVha0luZGV4IC0gTWF0aC5mbG9vcigocGVha0luZGV4IC0gdGhpcy5wZWFrSW5kZXhlc1tpIC0gMV0pIC8gMikgOiAwOwogICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKGkgPCB0aGlzLm5iUGVha3MgLSAxKSA/IHBlYWtJbmRleCArIE1hdGguY2VpbCgodGhpcy5wZWFrSW5kZXhlc1tpICsgMV0gLSBwZWFrSW5kZXgpIC8gMikgOiB0aGlzLmZmdFNpemU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJbmRleCAtIHBlYWtJbmRleDsgaiA8IGVuZEluZGV4IC0gcGVha0luZGV4OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5JbmRleCA9IHBlYWtJbmRleCArIGo7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluSW5kZXhTaGlmdGVkID0gcGVha0luZGV4U2hpZnRlZCArIGo7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbkluZGV4U2hpZnRlZCA+PSB0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWVnYURlbHRhID0gMiAqIE1hdGguUEkgKiAoYmluSW5kZXhTaGlmdGVkIC0gYmluSW5kZXgpIC8gdGhpcy5mZnRTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoYXNlU2hpZnRSZWFsID0gTWF0aC5jb3Mob21lZ2FEZWx0YSAqIHRoaXMudGltZUN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VTaGlmdEltYWcgPSBNYXRoLnNpbihvbWVnYURlbHRhICogdGhpcy50aW1lQ3Vyc29yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFJlYWwgPSBiaW5JbmRleCAqIDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbWFnID0gaW5kZXhSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2luZGV4UmVhbF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbWFnID0gdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltpbmRleEltYWddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZFJlYWwgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0UmVhbCAtIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRJbWFnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZEltYWcgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0SW1hZyArIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRSZWFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZFJlYWwgPSBiaW5JbmRleFNoaWZ0ZWQgKiAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZEltYWcgPSBpbmRleFNoaWZ0ZWRSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtpbmRleFNoaWZ0ZWRSZWFsXSArPSB2YWx1ZVNoaWZ0ZWRSZWFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2luZGV4U2hpZnRlZEltYWddICs9IHZhbHVlU2hpZnRlZEltYWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBAdHMtaWdub3JlCiAgICByZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2RlciIsIFBoYXNlVm9jb2RlclByb2Nlc3Nvcik7CiAgICBjb25zb2xlLmxvZygiUGhhc2VWb2NvZGVyUHJvY2Vzc29yIHJlZ2lzdGVyZWQiKTsKCiAgICBleHBvcnRzLlBoYXNlVm9jb2RlclByb2Nlc3NvciA9IFBoYXNlVm9jb2RlclByb2Nlc3NvcjsKCiAgICByZXR1cm4gZXhwb3J0czsKCn0pKHt9KTsK";class fT{static async openCache(){try{return await caches.open("audio-cache")}catch(e){throw console.error("Failed to open cache:",e),e}}static async getAudioBufferFromCache(e,n,r){try{const i=await n.match(e);if(i){if(!i.ok)throw new Error("Failed to get audio data from cache");const o=await i.arrayBuffer();return r.decodeAudioData(o)}return null}catch(i){throw console.error("Failed to get audio data from cache:",i),i}}static async fetchAndCacheAudioBuffer(e,n,r,i,o){try{const s=new Headers;i&&s.append("If-None-Match",i),o&&s.append("If-Modified-Since",o);const a=await fetch(e,{headers:s}),c=a.clone();if(a.status===200){const u=a.headers.get("ETag"),d=a.headers.get("Last-Modified"),h={url:e,etag:u,lastModified:d};n.put(e,c),n.put(e+":meta",new Response(JSON.stringify(h)))}else if(a.status===304){const u=await n.match(e);if(u){const d=await u.arrayBuffer();return r.decodeAudioData(d)}}const l=await a.arrayBuffer();return r.decodeAudioData(l)}catch(s){throw console.error("Failed to fetch and cache audio data:",s),s}}static async getAudioBuffer(e,n){if(e.startsWith("data:")){const l=e.split(",")[1],u=Uint8Array.from(atob(l),d=>d.charCodeAt(0));return n.decodeAudioData(u.buffer)}const r=await this.openCache();let i=this.pendingRequests.get(e);if(i)return i;const o=await this.getAudioBufferFromCache(e,r,n);if(o)return o;const s=await r.match(e+":meta");let a,c;if(s){const l=await s.json();a=l.etag,c=l.lastModified}return i=this.fetchAndCacheAudioBuffer(e,r,n,a,c),this.pendingRequests.set(e,i),i}}U(fT,"pendingRequests",new Map);let Pp=class{constructor(){U(this,"_filters",[])}addFilter(e){this._filters.push(e)}removeFilter(e){this._filters=this._filters.filter(n=>n.frequency.value!==e.frequency.value&&n.type!==e.type&&n.Q.value!==e.Q.value&&n.gain.value!==e.gain.value)}applyFilters(e){return this._filters.reduce((n,r)=>(n.connect(r),r),e),this._filters.length>0?this._filters[this._filters.length-1]:e}get filters(){return this._filters}addFilters(e){e.forEach(n=>this.addFilter(n))}removeFilters(e){e.forEach(n=>this.removeFilter(n))}};class mb{constructor(e=[]){U(this,"_position",[0,0,0]);U(this,"loopCount",0);U(this,"playIndex",0);this.sounds=e}playRandom(){if(this.sounds.length===0)throw new Error("Cannot play a random sound from an empty group");const e=Math.floor(Math.random()*this.sounds.length),n=this.sounds[e].preplay();return n.forEach(r=>r.play()),n[0]}playOrdered(e=!0){if(this.sounds.length===0)throw new Error("Cannot play an ordered sound from an empty group");const n=this.sounds[this.playIndex].preplay();return n.forEach(r=>r.play()),this.playIndex++,this.playIndex>=this.sounds.length&&(e?this.playIndex=0:this.playIndex=this.sounds.length),n[0]}get duration(){return this.sounds.map(e=>e.duration).reduce((e,n)=>Math.max(e,n),0)}seek(e){this.sounds.forEach(n=>n.seek&&n.seek(e))}addSound(e){this.sounds.push(e)}preplay(){return this.sounds.reduce((e,n)=>(n.loop&&n.loop(this.loopCount),e.concat(n.preplay())),[])}play(){return this.preplay().map(e=>e.play()[0])}get isPlaying(){return this.sounds.some(e=>e.isPlaying)}stop(){this.sounds.forEach(e=>e.stop())}pause(){this.sounds.forEach(e=>e.pause())}loop(e){return e===void 0?this.loopCount:(this.loopCount=e,this.sounds.forEach(n=>n.loop(e)),this.loopCount)}addFilter(e){this.sounds.forEach(n=>n.addFilter(e))}removeFilter(e){this.sounds.forEach(n=>n.removeFilter(e))}set position(e){this._position=e,this.sounds.forEach(n=>n.position=this._position)}get position(){return this._position}get volume(){return this.sounds.map(e=>e.volume).reduce((e,n)=>e+n,0)/this.sounds.length}set volume(e){this.sounds.forEach(n=>n.volume=e)}get playbackRate(){return this.sounds.length===0?1:this.sounds[0].playbackRate}set playbackRate(e){this.sounds.forEach(n=>n.playbackRate=e)}}class zy extends Pp{constructor(n,r,i,o=0,s="HRTF"){super();U(this,"_playing",!1);U(this,"context");U(this,"source");U(this,"gainNode");U(this,"panner");U(this,"loopCount",0);U(this,"currentLoop",0);U(this,"buffer");U(this,"pauseTime",0);U(this,"startTime",0);U(this,"handleLoop",()=>{this.source&&(this.currentLoop++,this.loopCount!=="infinite"&&this.currentLoop>this.loopCount&&(this._playing=!1,this.stop()),this.loopCount==="infinite"||this.currentLoop<this.loopCount?this.buffer?(this.recreateSource(),this._playing&&(this.source.start(0),this._playing=!0)):this._playing&&this.seek(0):this._playing=!1)});if(this.panType=s,this.loopCount=o,this.panType=s,this.source=n,"buffer"in n&&n.buffer&&(this.buffer=n.buffer),"mediaElement"in n&&n.mediaElement)n.mediaElement.onended=this.handleLoop;else if("onended"in n)n.onended=this.handleLoop;else throw new Error("Unsupported source type");if(this.gainNode=r,this.context=i,this.panType==="HRTF")this.panner=i.createPanner();else if(this.panType==="stereo")this.panner=i.createStereoPanner();else throw new Error("Invalid pan type");this.source.connect(this.panner),this.panner.connect(this.gainNode),this.refreshFilters()}get stereoPan(){return this.panType==="stereo"?this.panner.pan.value:null}set stereoPan(n){if(this.panType!=="stereo")throw new Error("Stereo panning is not available when using HRTF.");if(!this.panner)throw new Error("Cannot set stereo pan of a sound that has been cleaned up");this.panner.pan.setValueAtTime(X5(n,-1,1),this.context.currentTime)}get duration(){if(!this.buffer)throw new Error("Cannot get duration of a sound that has been cleaned up");return this.buffer.duration}get playbackRate(){if(!this.source)throw new Error("Cannot get playback rate of a sound that has been cleaned up");if("playbackRate"in this.source)return this.source.playbackRate.value;if("mediaElement"in this.source&&this.source.mediaElement)return this.source.mediaElement.playbackRate;throw new Error("Unsupported source type")}set playbackRate(n){if(!this.source)throw new Error("Cannot set playback rate of a sound that has been cleaned up");"playbackRate"in this.source&&(this.source.playbackRate.value=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.playbackRate=n)}recreateSource(){if(!this.buffer||!this.source||!this.panner||!this.context||!this.gainNode)throw new Error("Cannot recreate source of a sound that has been cleaned up");this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.panner),this.source.onended=this.handleLoop}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");if("mediaElement"in this.source&&this.source.mediaElement)this.source.mediaElement.play();else if("start"in this.source&&this.source.start){const n=this.pauseTime?this.pauseTime:0;this.source.start(0,n)}return this._playing=!0,[this]}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.pause():"stop"in this.source&&this.source.stop&&(this.pauseTime=this.context.currentTime-this.startTime,this.source.stop()),this._playing=!1}get threeDOptions(){if(!this.panner)throw new Error("Cannot get 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get 3D options of a sound that is not using HRTF");const n=this.panner;return{coneInnerAngle:n.coneInnerAngle,coneOuterAngle:n.coneOuterAngle,coneOuterGain:n.coneOuterGain,distanceModel:n.distanceModel,maxDistance:n.maxDistance,channelCount:this.panner.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation,panningModel:n.panningModel,refDistance:n.refDistance,rolloffFactor:n.rolloffFactor,positionX:n.positionX.value,positionY:n.positionY.value,positionZ:n.positionZ.value,orientationX:n.orientationX.value,orientationY:n.orientationY.value,orientationZ:n.orientationZ.value}}set threeDOptions(n){if(!this.panner)throw new Error("Cannot set 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot set 3D options of a sound that is not using HRTF");const r=this.panner;r.coneInnerAngle=n.coneInnerAngle!==void 0?n.coneInnerAngle:r.coneInnerAngle,r.coneOuterAngle=n.coneOuterAngle!==void 0?n.coneOuterAngle:r.coneOuterAngle,r.coneOuterGain=n.coneOuterGain!==void 0?n.coneOuterGain:r.coneOuterGain,r.distanceModel=n.distanceModel||r.distanceModel,r.maxDistance=n.maxDistance!==void 0?n.maxDistance:r.maxDistance,r.channelCount=n.channelCount!==void 0?n.channelCount:r.channelCount,r.channelCountMode=n.channelCountMode||r.channelCountMode,r.channelInterpretation=n.channelInterpretation||r.channelInterpretation,r.panningModel=n.panningModel||r.panningModel,r.refDistance=n.refDistance!==void 0?n.refDistance:r.refDistance,r.rolloffFactor=n.rolloffFactor!==void 0?n.rolloffFactor:r.rolloffFactor,r.positionX.value=n.positionX!==void 0?n.positionX:r.positionX.value,r.positionY.value=n.positionY!==void 0?n.positionY:r.positionY.value,r.positionZ.value=n.positionZ!==void 0?n.positionZ:r.positionZ.value,r.orientationX.value=n.orientationX!==void 0?n.orientationX:r.orientationX.value,r.orientationY.value=n.orientationY!==void 0?n.orientationY:r.orientationY.value,r.orientationZ.value=n.orientationZ!==void 0?n.orientationZ:r.orientationZ.value}seek(n){if(!this.source||!this.gainNode||!this.panner)throw new Error("Cannot seek a sound that has been cleaned up");const r=this.isPlaying;if(this.stop(),"mediaElement"in this.source&&this.source.mediaElement)this.source.mediaElement.currentTime=n,r&&this.source.mediaElement.play();else if(this.buffer)this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.onended=this.handleLoop,this.refreshFilters(),this.source.connect(this.panner),r&&this.source.start(0,n);else throw new Error("Unsupported source type for seeking")}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}set sourceLoop(n){if(!this.source)throw new Error("Cannot set loop on a sound that has been cleaned up");"loop"in this.source&&(this.source.loop=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.loop=n)}fadeIn(n,r="linear"){return new Promise(i=>{if(!this.gainNode)throw new Error("Cannot fade in a sound that has been cleaned up");this.gainNode.gain.value;const o=1;switch(this.gainNode.gain.value=0,r){case"exponential":this.gainNode.gain.setValueAtTime(.01,this.context.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(o,this.context.currentTime+n);break;case"linear":this.gainNode.gain.linearRampToValueAtTime(o,this.context.currentTime+n);break}setTimeout(()=>{if(!this.gainNode)throw new Error("Cannot fade in a sound that has been cleaned up");this.gainNode.gain.value=o,i()},n*1e3)})}fadeOut(n,r="linear"){return new Promise(i=>{if(!this.gainNode)throw new Error("Cannot fade out a sound that has been cleaned up");switch(this.gainNode.gain.value,r){case"exponential":this.gainNode.gain.exponentialRampToValueAtTime(.01,this.context.currentTime+n);break;case"linear":this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+n)}setTimeout(()=>i(),n*1e3)})}get isPlaying(){return this.source?this._playing:!1}cleanup(){this.source&&(this.source.disconnect(),this.source=void 0),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=void 0),this._filters.forEach(n=>{n&&n.disconnect()}),this._filters=[]}loop(n){var r;if(!this.source)throw new Error("Cannot loop a sound that has been cleaned up");if("mediaElement"in this.source&&this.source.mediaElement){const i=this.source.mediaElement;return n===void 0||(i.loop=!0),i.loop===!0?"infinite":0}else if("loop"in this.source)return n===void 0?this.source.loop===!0?"infinite":0:(this.source.loop=!0,this.source.loopEnd=((r=this.source.buffer)==null?void 0:r.duration)||0,this.source.loopStart=0,this.source.loop===!0?"infinite":0);throw new Error("Unsupported source type")}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");if(this.isPlaying){try{"stop"in this.source&&this.source.stop(),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.pause(),this.source.mediaElement.currentTime=0)}catch{}this._playing=!1,this.startTime=0,this.pauseTime=0}}addFilter(n){const r=n.context.createBiquadFilter();r.type=n.type,r.frequency.value=n.frequency.value,r.Q.value=n.Q.value,super.addFilter(r),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot move a sound that is not using HRTF");const[r,i,o]=n,s=this.panner;s.positionX.value=r,s.positionY.value=i,s.positionZ.value=o}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get position of a sound that is not using HRTF");const n=this.panner;return[n.positionX.value,n.positionY.value,n.positionZ.value]}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}clone(n={}){if(!this.source||!this.gainNode||!this.context)throw new Error("Cannot clone a sound that has been cleaned up");const r=n.panType||this.panType,i=this.context.createGain();let o;if("buffer"in this.source&&this.source.buffer)o=this.context.createBufferSource(),o.buffer=this.source.buffer;else if("mediaElement"in this.source&&this.source.mediaElement)o=this.context.createMediaElementSource(this.source.mediaElement);else throw new Error("Unsupported source type");const s=n.loopCount!==void 0?n.loopCount:this.loopCount;return new zy(o,i,this.context,s,r)}}function X5(t,e,n){return Math.min(Math.max(t,e),n)}class Ac extends Pp{constructor(n,r,i,o,s=Uf.Buffer,a="HRTF"){super();U(this,"buffer");U(this,"context");U(this,"playbacks",[]);U(this,"globalGainNode");U(this,"_position",[0,0,0]);U(this,"_stereoPan",0);U(this,"_threeDOptions",{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",panningModel:"HRTF",refDistance:1,rolloffFactor:1,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0});U(this,"loopCount",0);U(this,"_playbackRate",1);U(this,"_volume",1);this.url=n,this.type=s,this.panType=a,this.buffer=r,this.context=i,this.globalGainNode=o}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan,o=n.threeDOptions||this.threeDOptions,s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=n.playbackRate||this.playbackRate,c=n.volume!==void 0?n.volume:this.volume,l=n.position&&n.position.length?n.position:this.position,u=n.filters&&n.filters.length?n.filters:this._filters,d=new Ac(this.url,this.buffer,this.context,this.globalGainNode,this.type,r);return d.loopCount=s,d._playbackRate=a,d._volume=c,d._position=l,d._stereoPan=i,d._threeDOptions=o,d.addFilters(u),d}preplay(){let n;if(this.buffer)n=this.context.createBufferSource(),n.buffer=this.buffer;else{const o=new Audio;o.crossOrigin="anonymous",o.src=this.url,o.preload="auto",n=this.context.createMediaElementSource(o)}const r=this.context.createGain();r.connect(this.globalGainNode);const i=new zy(n,r,this.context,this.loopCount,this.panType);return i.volume=this.volume,i.playbackRate=this.playbackRate,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}play(){const n=this.preplay();return n.forEach(r=>r.play()),n}stop(){this.playbacks.forEach(n=>n.stop()),this.playbacks=[]}pause(){this.playbacks.forEach(n=>n.pause())}seek(n){this.playbacks.forEach(r=>r.seek(n))}get duration(){var n;return((n=this.buffer)==null?void 0:n.duration)||0}get position(){return[this._threeDOptions.positionX,this._threeDOptions.positionY,this._threeDOptions.positionZ]}set position(n){this._threeDOptions.positionX=n[0],this._threeDOptions.positionY=n[1],this._threeDOptions.positionZ=n[2],this.playbacks.forEach(r=>r.position=n)}get threeDOptions(){return this._threeDOptions}set threeDOptions(n){this._threeDOptions={...this._threeDOptions,...n},this.playbacks.forEach(r=>r.threeDOptions=this._threeDOptions)}get stereoPan(){return this._stereoPan}set stereoPan(n){this._stereoPan=n,this.playbacks.forEach(r=>r.stereoPan=n)}loop(n){return n===void 0?this.loopCount:(this.loopCount=n,this.playbacks.forEach(r=>r.loop(n)),this.loopCount)}addFilter(n){super.addFilter(n),this.playbacks.forEach(r=>r.addFilter(n))}removeFilter(n){super.removeFilter(n),this.playbacks.forEach(r=>r.removeFilter(n))}get volume(){return this._volume}set volume(n){this._volume=n,this.playbacks.forEach(r=>r.volume=n)}get isPlaying(){return this.playbacks.some(n=>n.isPlaying)}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.playbacks.forEach(r=>r.playbackRate=n)}}const $5=(t,e)=>{var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n.buffer};function K5(t,e){const n=[];let r=0;fetch(t).then(function(o){if(!o.ok)throw new Error("HTTP error, status = "+o.status);if(!o.body)throw new Error("Missing body");var s=o.body.getReader();let a=new ArrayBuffer(0);function c(){return s.read().then(({value:l,done:u})=>{let d=null;if(l){if(a.byteLength?d=$5(a,l.buffer):(a=l.buffer.slice(0,44),d=l.buffer),e.decodeAudioData(d,function(h){n.push(h),n.length&&i()},function(h){console.log("err(decodeAudioData): "+h)}),u){console.log("done");return}c()}})}c()});function i(){for(;n.length;){let o=n.shift();const s=e.createBufferSource();if(!o)return;s.buffer=o,s.connect(e.destination),r==0&&(r=e.currentTime+.02),s.start(r),r+=s.buffer.duration}}}var Uf=(t=>(t.HTML="HTML",t.Streaming="Streaming",t.Buffer="Buffer",t))(Uf||{});class J5{constructor(e){U(this,"context");U(this,"globalGainNode");U(this,"listener");U(this,"prevVolume",1);U(this,"finalizationRegistry");U(this,"createOscillator",({frequency:e,type:n,periodicWave:r})=>{e===void 0&&(e=440);const i=this.context.createOscillator();return i.type=n||"sine",r&&i.setPeriodicWave(r),i.frequency.setValueAtTime(e,this.context.currentTime),i.connect(this.globalGainNode),i});U(this,"createBiquadFilter",({type:e,frequency:n,gain:r,Q:i})=>{n===void 0&&(n=350);const o=this.context.createBiquadFilter();return o.type=e||"lowpass",o.frequency.value=n,o.gain.value=r||0,o.Q.value=i||1,o});this.context=e||new B5,this.listener=this.context.listener,this.globalGainNode=this.context.createGain(),this.globalGainNode.connect(this.context.destination),this.finalizationRegistry=new FinalizationRegistry(n=>{n.cleanup()})}async loadWorklets(){this.context.audioWorklet?await this.createWorkletNode("phase-vocoder",H5):console.warn("AudioWorklet not supported")}async createWorkletNode(e,n){if(!this.context.audioWorklet)throw new Error("AudioWorklet not supported");try{return new gb(this.context,e)}catch(r){console.error(r),console.log("Loading worklet from url",n);try{await this.context.audioWorklet.addModule(n)}catch(i){throw console.error(i),new Error(`Could not load worklet from url ${n}`)}return new gb(this.context,e)}}async createSound(e,n="Buffer",r="HRTF"){if(typeof e=="object")return Promise.resolve(new Ac("",e,this.context,this.globalGainNode,"Buffer",r));const i=e;if(n==="HTML"){const o=new Audio;return o.src=i,o.crossOrigin="anonymous",new Ac(i,void 0,this.context,this.globalGainNode,"HTML",r)}return fT.getAudioBuffer(i,this.context).then(o=>new Ac(i,o,this.context,this.globalGainNode,n,r))}async createGroup(e){const n=new mb;return e.forEach(r=>n.addSound(r)),n}async createGroupFromUrls(e,n="Buffer",r="HRTF"){const i=new mb;return(await Promise.all(e.map(o=>this.createSound(o,n,r)))).forEach(o=>i.addSound(o)),i}async createStream(e){return await K5(e,this.context),new Ac(e,void 0,this.context,this.globalGainNode,"Streaming")}createPanner({coneInnerAngle:e,coneOuterAngle:n,coneOuterGain:r,distanceModel:i,maxDistance:o,channelCount:s,channelCountMode:a,channelInterpretation:c,panningModel:l,refDistance:u,rolloffFactor:d,positionX:h,positionY:f,positionZ:g,orientationX:m,orientationY:C,orientationZ:p}){const v=this.context.createPanner();return v.coneInnerAngle=e||360,v.coneOuterAngle=n||360,v.coneOuterGain=r||0,v.distanceModel=i||"inverse",v.maxDistance=o||1e4,v.channelCount=s||2,v.channelCountMode=a||"clamped-max",v.channelInterpretation=c||"speakers",v.panningModel=l||"HRTF",v.refDistance=u||1,v.rolloffFactor=d||1,v.positionX.value=h||0,v.positionY.value=f||0,v.positionZ.value=g||0,v.orientationX.value=m||0,v.orientationY.value=C||0,v.orientationZ.value=p||0,v}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}setGlobalVolume(e){this.globalGainNode.gain.value=e}get volume(){return this.globalGainNode.gain.value}set volume(e){if(this.muted){this.prevVolume=e;return}this.setGlobalVolume(e)}mute(){this.muted||(this.prevVolume=this.globalGainNode.gain.value,this.setGlobalVolume(0))}unmute(){this.muted&&this.setGlobalVolume(this.prevVolume)}get muted(){return this.globalGainNode.gain.value===0}set muted(e){e!==this.muted&&(e?this.mute():this.unmute())}getMicrophoneStream(){return new Promise((e,n)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{const i=new Q5(this.context);i.play(),e(i)}).catch(r=>{n(r)})})}get listenerOrientation(){return{forward:[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value],up:[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}}set listenerOrientation(e){const{forward:n,up:r}=e,[i,o,s]=n,[a,c,l]=r;this.listener.forwardX.value=i,this.listener.forwardY.value=o,this.listener.forwardZ.value=s,this.listener.upX.value=a,this.listener.upY.value=c,this.listener.upZ.value=l}get listenerUpOrientation(){return[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}set listenerUpOrientation(e){const[n,r,i]=e;this.listener.upX.value=n,this.listener.upY.value=r,this.listener.upZ.value=i}get listenerForwardOrientation(){return[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value]}set listenerForwardOrientation(e){const[n,r,i]=e;this.listener.forwardX.value=n,this.listener.forwardY.value=r,this.listener.forwardZ.value=i}get listenerPosition(){return[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}set listenerPosition(e){const[n,r,i]=e,o=this.context.currentTime;this.listener.positionX.setValueAtTime(n,o),this.listener.positionY.setValueAtTime(r,o),this.listener.positionZ.setValueAtTime(i,o)}}let Y5=class extends Pp{constructor(n,r,i,o=0){super();U(this,"context");U(this,"source");U(this,"gainNode");U(this,"panner");this.source=n,this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner).connect(this.gainNode),this.refreshFilters()}get duration(){return 0}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return[this]}get isPlaying(){return!!this.source}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.stop())}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!1)}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!0)}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,o]=n;this.panner.positionX.value=r,this.panner.positionY.value=i,this.panner.positionZ.value=o}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.source||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.source;this.source.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}get playbackRate(){return 1}set playbackRate(n){}};class Q5 extends Pp{constructor(n){super();U(this,"context");U(this,"_position",[0,0,0]);U(this,"loopCount",0);U(this,"prevVolume",1);U(this,"microphoneGainNode");U(this,"streamPlayback");U(this,"stream");U(this,"streamSource");this.context=n,this.microphoneGainNode=this.context.createGain()}play(){return this.stream||navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{this.stream=n,this.streamSource=this.context.createMediaStreamSource(this.stream),this.streamPlayback=new Y5(this.streamSource,this.microphoneGainNode,this.context),this.streamPlayback.play()}).catch(n=>{console.error("Error initializing microphone stream:",n)}),this.streamPlayback?[this.streamPlayback]:[]}get duration(){return 0}seek(n){}get isPlaying(){return!!this.streamPlayback}stop(){this.streamPlayback&&(this.streamPlayback.stop(),this.streamPlayback=void 0)}pause(){this.streamPlayback&&this.streamPlayback.pause()}resume(){this.streamPlayback&&this.streamPlayback.resume()}addFilter(n){this.streamPlayback&&this.streamPlayback.addFilter(n)}removeFilter(n){this.streamPlayback&&this.streamPlayback.removeFilter(n)}get volume(){return this.streamPlayback?this.streamPlayback.volume:0}set volume(n){this.streamPlayback&&(this.streamPlayback.volume=n)}get position(){return[0,0,0]}set position(n){}loop(n){return 0}get playbackRate(){return 1}set playbackRate(n){}}const q5="https://mongoose.world:9080/?url=";class eU extends ns{constructor(){super(...arguments);U(this,"packageName","Client.Media");U(this,"sounds",{});U(this,"defaultUrl","")}handleDefault(n){this.defaultUrl=n}async handleLoad(n){const r=(n.url||this.defaultUrl)+n.name,i=n.url+n.name;if(!this.sounds[i]){let s=await this.client.cacophony.createSound(r);s.key=i,this.sounds[i]=s}}mediaUrl(n){var i;let r=(n.url||this.defaultUrl)+n.name;return((i=n.type)==null?void 0:i.toLowerCase())==="music"&&(r=q5+encodeURIComponent(r)),r}async handlePlay(n){let r=this.mediaUrl(n);n.key=n.key||r;let i=this.sounds[n.key];const o=n.is3d?"HRTF":"stereo";if((!i||i.url!==r)&&(n.type==="music"?i=await this.client.cacophony.createSound(r,Uf.HTML,o):i=await this.client.cacophony.createSound(r,Uf.Buffer,o)),n.volume!==void 0&&(i.volume=n.volume/100),n.loops!==void 0&&i.loop(n.loops),n.start&&i.seek(n.start),n.end&&setTimeout(()=>{delete this.sounds[i.key],i.stop()},n.end),n.is3d&&(i.threeDOptions={coneInnerAngle:360,coneOuterAngle:0,panningModel:"HRTF",distanceModel:"inverse"},i.position=[n.position[0],n.position[1],n.position[2]]),n.priority){for(let s in this.sounds){const a=this.sounds[s];a.priority&&a.priority<n.priority&&a.stop()}i.priority=n.priority}if(!i.isPlaying){const s=i.play()[0];n.fadein&&s.fadeIn(n.fadein),n.fadeout&&s.fadeOut(n.fadeout)}i.key=n.key,this.sounds[i.key]=i}handleStop(n){n.name&&this.soundsByName(n.name).forEach(r=>this.stopSound(r)),n.type&&this.soundsByType(n.type).forEach(r=>this.stopSound(r)),n.tag&&this.soundsByTag(n.tag).forEach(r=>this.stopSound(r)),n.key&&this.soundsByKey(n.key).forEach(r=>this.stopSound(r)),!n.name&&!n.type&&!n.tag&&!n.key&&(this.allSounds.forEach(r=>r.stop()),this.sounds={})}stopSound(n){delete this.sounds[n.key],n.stop()}handleListenerPosition(n){var r;(r=n.position)!=null&&r.length&&(this.client.cacophony.listenerPosition=n.position)}handleListenerOrientation(n){n.up&&n.up.length&&(this.client.cacophony.listenerUpOrientation=n.up),n.forward&&n.forward.length&&(this.client.cacophony.listenerForwardOrientation=n.forward)}soundsByName(n){return Object.values(this.sounds).filter(r=>r.url&&r.url[r.url.length-1].endsWith(n))}soundsByKey(n){return Object.values(this.sounds).filter(r=>r.key===n)}soundsByTag(n){return Object.values(this.sounds).filter(r=>r.tag===n)}soundsByType(n){return Object.values(this.sounds).filter(r=>r.mediaType===n)}get allSounds(){return Object.values(this.sounds)}stopAllSounds(){this.allSounds.forEach(n=>n.stop()),this.sounds={}}}class tU extends ns{constructor(){super(...arguments);U(this,"packageName","Client.Speech")}handleSpeak(n){const r=new SpeechSynthesisUtterance(n.text);r.rate=n.rate,r.pitch=n.pitch,r.volume=n.volume,speechSynthesis.speak(r)}}class nU extends ns{constructor(){super(...arguments);U(this,"packageName","Comm.Channel");U(this,"channels",[])}handleList(n){this.channels=n}sendList(){this.sendData("List")}handleText(n){n.channel==="say_to_you"&&(document.hasFocus()||this.client.sendNotification(`Message from ${n.talker}`,`${n.text}`))}}class rU extends ns{constructor(){super(...arguments);U(this,"packageName","Comm.LiveKit")}handleroom_token(n){this.client.worldData.liveKitTokens.push(n.token),this.client.emit("livekitToken",n.token)}handleroom_leave(n){this.client.worldData.liveKitTokens=this.client.worldData.liveKitTokens.filter(r=>r!==n.token),this.client.emit("livekitLeave",n.token)}}class iU extends ns{constructor(){super(...arguments);U(this,"packageName","Core")}sendHello(){this.sendData("Hello",{client:"Mongoose Client",version:"0.1"})}}class oU extends ns{constructor(){super(...arguments);U(this,"packageName","Core.Supports")}sendSet(){const n=Object.values(this.client.gmcpHandlers).map(r=>r.packageName+" "+r.packageVersion.toString());this.sendData("Set",n)}}const ic=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,pT=new Set,wv=typeof process=="object"&&process?process:{},gT=(t,e,n,r)=>{typeof wv.emitWarning=="function"?wv.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let Vf=globalThis.AbortController,vb=globalThis.AbortSignal;var Fw;if(typeof Vf>"u"){vb=class{constructor(){U(this,"onabort");U(this,"_onabort",[]);U(this,"reason");U(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},Vf=class{constructor(){U(this,"signal",new vb);e()}abort(r){var i,o;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const s of this.signal._onabort)s(r);(o=(i=this.signal).onabort)==null||o.call(i,r)}}};let t=((Fw=wv.env)==null?void 0:Fw.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,gT("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const sU=t=>!pT.has(t),ps=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),mT=t=>ps(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Oh:null:null;class Oh extends Array{constructor(e){super(e),this.fill(0)}}var jc;const fa=class fa{constructor(e,n){U(this,"heap");U(this,"length");if(!N(fa,jc))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=mT(e);if(!n)return[];Ie(fa,jc,!0);const r=new fa(e,n);return Ie(fa,jc,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};jc=new WeakMap,Ne(fa,jc,!1);let Av=fa;var Kr,hr,Jr,Yr,zc,Ut,Qr,Bt,pt,ke,Rn,fr,Sn,Yt,qr,Qt,ei,ti,pr,ni,bs,Pn,cd,Ev,Sa,ho,ld,gr,ep,vT,ba,Hc,ud,Ti,gs,xi,ms,dd,Tv,J8,Xc,Dh,$c,Lh,nt,ft,hd,xv,wa,su;const RC=class RC{constructor(e){Ne(this,cd);Ne(this,ep);Ne(this,Ti);Ne(this,xi);Ne(this,dd);Ne(this,Xc);Ne(this,$c);Ne(this,nt);Ne(this,hd);Ne(this,wa);Ne(this,Kr,void 0);Ne(this,hr,void 0);Ne(this,Jr,void 0);Ne(this,Yr,void 0);Ne(this,zc,void 0);U(this,"ttl");U(this,"ttlResolution");U(this,"ttlAutopurge");U(this,"updateAgeOnGet");U(this,"updateAgeOnHas");U(this,"allowStale");U(this,"noDisposeOnSet");U(this,"noUpdateTTL");U(this,"maxEntrySize");U(this,"sizeCalculation");U(this,"noDeleteOnFetchRejection");U(this,"noDeleteOnStaleGet");U(this,"allowStaleOnFetchAbort");U(this,"allowStaleOnFetchRejection");U(this,"ignoreFetchAbort");Ne(this,Ut,void 0);Ne(this,Qr,void 0);Ne(this,Bt,void 0);Ne(this,pt,void 0);Ne(this,ke,void 0);Ne(this,Rn,void 0);Ne(this,fr,void 0);Ne(this,Sn,void 0);Ne(this,Yt,void 0);Ne(this,qr,void 0);Ne(this,Qt,void 0);Ne(this,ei,void 0);Ne(this,ti,void 0);Ne(this,pr,void 0);Ne(this,ni,void 0);Ne(this,bs,void 0);Ne(this,Pn,void 0);Ne(this,Sa,()=>{});Ne(this,ho,()=>{});Ne(this,ld,()=>{});Ne(this,gr,()=>!1);Ne(this,ba,e=>{});Ne(this,Hc,(e,n,r)=>{});Ne(this,ud,(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});U(this,J8,"LRUCache");const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:h,maxSize:f=0,maxEntrySize:g=0,sizeCalculation:m,fetchMethod:C,noDeleteOnFetchRejection:p,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:E,ignoreFetchAbort:w}=e;if(n!==0&&!ps(n))throw new TypeError("max option must be a nonnegative integer");const A=n?mT(n):Array;if(!A)throw new Error("invalid max value: "+n);if(Ie(this,Kr,n),Ie(this,hr,f),this.maxEntrySize=g||N(this,hr),this.sizeCalculation=m,this.sizeCalculation){if(!N(this,hr)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ie(this,zc,C),Ie(this,bs,!!C),Ie(this,Bt,new Map),Ie(this,pt,new Array(n).fill(void 0)),Ie(this,ke,new Array(n).fill(void 0)),Ie(this,Rn,new A(n)),Ie(this,fr,new A(n)),Ie(this,Sn,0),Ie(this,Yt,0),Ie(this,qr,Av.create(n)),Ie(this,Ut,0),Ie(this,Qr,0),typeof l=="function"&&Ie(this,Jr,l),typeof u=="function"?(Ie(this,Yr,u),Ie(this,Qt,[])):(Ie(this,Yr,void 0),Ie(this,Qt,void 0)),Ie(this,ni,!!N(this,Jr)),Ie(this,Pn,!!N(this,Yr)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!p,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!w,this.maxEntrySize!==0){if(N(this,hr)!==0&&!ps(N(this,hr)))throw new TypeError("maxSize must be a positive integer if specified");if(!ps(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ye(this,ep,vT).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=ps(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!ps(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ye(this,cd,Ev).call(this)}if(N(this,Kr)===0&&this.ttl===0&&N(this,hr)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!N(this,Kr)&&!N(this,hr)){const T="LRU_CACHE_UNBOUNDED";sU(T)&&(pT.add(T),gT("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",T,RC))}}static unsafeExposeInternals(e){return{starts:N(e,ti),ttls:N(e,pr),sizes:N(e,ei),keyMap:N(e,Bt),keyList:N(e,pt),valList:N(e,ke),next:N(e,Rn),prev:N(e,fr),get head(){return N(e,Sn)},get tail(){return N(e,Yt)},free:N(e,qr),isBackgroundFetch:n=>{var r;return ye(r=e,nt,ft).call(r,n)},backgroundFetch:(n,r,i,o)=>{var s;return ye(s=e,$c,Lh).call(s,n,r,i,o)},moveToTail:n=>{var r;return ye(r=e,wa,su).call(r,n)},indexes:n=>{var r;return ye(r=e,Ti,gs).call(r,n)},rindexes:n=>{var r;return ye(r=e,xi,ms).call(r,n)},isStale:n=>{var r;return N(r=e,gr).call(r,n)}}}get max(){return N(this,Kr)}get maxSize(){return N(this,hr)}get calculatedSize(){return N(this,Qr)}get size(){return N(this,Ut)}get fetchMethod(){return N(this,zc)}get dispose(){return N(this,Jr)}get disposeAfter(){return N(this,Yr)}getRemainingTTL(e){return N(this,Bt).has(e)?1/0:0}*entries(){for(const e of ye(this,Ti,gs).call(this))N(this,ke)[e]!==void 0&&N(this,pt)[e]!==void 0&&!ye(this,nt,ft).call(this,N(this,ke)[e])&&(yield[N(this,pt)[e],N(this,ke)[e]])}*rentries(){for(const e of ye(this,xi,ms).call(this))N(this,ke)[e]!==void 0&&N(this,pt)[e]!==void 0&&!ye(this,nt,ft).call(this,N(this,ke)[e])&&(yield[N(this,pt)[e],N(this,ke)[e]])}*keys(){for(const e of ye(this,Ti,gs).call(this)){const n=N(this,pt)[e];n!==void 0&&!ye(this,nt,ft).call(this,N(this,ke)[e])&&(yield n)}}*rkeys(){for(const e of ye(this,xi,ms).call(this)){const n=N(this,pt)[e];n!==void 0&&!ye(this,nt,ft).call(this,N(this,ke)[e])&&(yield n)}}*values(){for(const e of ye(this,Ti,gs).call(this))N(this,ke)[e]!==void 0&&!ye(this,nt,ft).call(this,N(this,ke)[e])&&(yield N(this,ke)[e])}*rvalues(){for(const e of ye(this,xi,ms).call(this))N(this,ke)[e]!==void 0&&!ye(this,nt,ft).call(this,N(this,ke)[e])&&(yield N(this,ke)[e])}[Symbol.iterator](){return this.entries()}find(e,n={}){for(const r of ye(this,Ti,gs).call(this)){const i=N(this,ke)[r],o=ye(this,nt,ft).call(this,i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,N(this,pt)[r],this))return this.get(N(this,pt)[r],n)}}forEach(e,n=this){for(const r of ye(this,Ti,gs).call(this)){const i=N(this,ke)[r],o=ye(this,nt,ft).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,pt)[r],this)}}rforEach(e,n=this){for(const r of ye(this,xi,ms).call(this)){const i=N(this,ke)[r],o=ye(this,nt,ft).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,pt)[r],this)}}purgeStale(){let e=!1;for(const n of ye(this,xi,ms).call(this,{allowStale:!0}))N(this,gr).call(this,n)&&(this.delete(N(this,pt)[n]),e=!0);return e}info(e){const n=N(this,Bt).get(e);if(n===void 0)return;const r=N(this,ke)[n],i=ye(this,nt,ft).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const o={value:i};if(N(this,pr)&&N(this,ti)){const s=N(this,pr)[n],a=N(this,ti)[n];if(s&&a){const c=s-(ic.now()-a);o.ttl=c,o.start=Date.now()}}return N(this,ei)&&(o.size=N(this,ei)[n]),o}dump(){const e=[];for(const n of ye(this,Ti,gs).call(this,{allowStale:!0})){const r=N(this,pt)[n],i=N(this,ke)[n],o=ye(this,nt,ft).call(this,i)?i.__staleWhileFetching:i;if(o===void 0||r===void 0)continue;const s={value:o};if(N(this,pr)&&N(this,ti)){s.ttl=N(this,pr)[n];const a=ic.now()-N(this,ti)[n];s.start=Math.floor(Date.now()-a)}N(this,ei)&&(s.size=N(this,ei)[n]),e.unshift([r,s])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=ic.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){var h,f,g,m,C;if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const u=N(this,ud).call(this,e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let d=N(this,Ut)===0?void 0:N(this,Bt).get(e);if(d===void 0)d=N(this,Ut)===0?N(this,Yt):N(this,qr).length!==0?N(this,qr).pop():N(this,Ut)===N(this,Kr)?ye(this,Xc,Dh).call(this,!1):N(this,Ut),N(this,pt)[d]=e,N(this,ke)[d]=n,N(this,Bt).set(e,d),N(this,Rn)[N(this,Yt)]=d,N(this,fr)[d]=N(this,Yt),Ie(this,Yt,d),Dd(this,Ut)._++,N(this,Hc).call(this,d,u,c),c&&(c.set="add"),l=!1;else{ye(this,wa,su).call(this,d);const p=N(this,ke)[d];if(n!==p){if(N(this,bs)&&ye(this,nt,ft).call(this,p)){p.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:v}=p;v!==void 0&&!s&&(N(this,ni)&&((h=N(this,Jr))==null||h.call(this,v,e,"set")),N(this,Pn)&&((f=N(this,Qt))==null||f.push([v,e,"set"])))}else s||(N(this,ni)&&((g=N(this,Jr))==null||g.call(this,p,e,"set")),N(this,Pn)&&((m=N(this,Qt))==null||m.push([p,e,"set"])));if(N(this,ba).call(this,d),N(this,Hc).call(this,d,u,c),N(this,ke)[d]=n,c){c.set="replace";const v=p&&ye(this,nt,ft).call(this,p)?p.__staleWhileFetching:p;v!==void 0&&(c.oldValue=v)}}else c&&(c.set="update")}if(i!==0&&!N(this,pr)&&ye(this,cd,Ev).call(this),N(this,pr)&&(l||N(this,ld).call(this,d,i,o),c&&N(this,ho).call(this,c,d)),!s&&N(this,Pn)&&N(this,Qt)){const p=N(this,Qt);let v;for(;v=p==null?void 0:p.shift();)(C=N(this,Yr))==null||C.call(this,...v)}return this}pop(){var e;try{for(;N(this,Ut);){const n=N(this,ke)[N(this,Sn)];if(ye(this,Xc,Dh).call(this,!0),ye(this,nt,ft).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(N(this,Pn)&&N(this,Qt)){const n=N(this,Qt);let r;for(;r=n==null?void 0:n.shift();)(e=N(this,Yr))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,o=N(this,Bt).get(e);if(o!==void 0){const s=N(this,ke)[o];if(ye(this,nt,ft).call(this,s)&&s.__staleWhileFetching===void 0)return!1;if(N(this,gr).call(this,o))i&&(i.has="stale",N(this,ho).call(this,i,o));else return r&&N(this,Sa).call(this,o),i&&(i.has="hit",N(this,ho).call(this,i,o)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=N(this,Bt).get(e);if(i===void 0||!r&&N(this,gr).call(this,i))return;const o=N(this,ke)[i];return ye(this,nt,ft).call(this,o)?o.__staleWhileFetching:o}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:g=this.allowStaleOnFetchAbort,context:m,forceRefresh:C=!1,status:p,signal:v}=n;if(!N(this,bs))return p&&(p.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:p});const S={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:g,ignoreFetchAbort:f,status:p,signal:v};let E=N(this,Bt).get(e);if(E===void 0){p&&(p.fetch="miss");const w=ye(this,$c,Lh).call(this,e,E,S,m);return w.__returned=w}else{const w=N(this,ke)[E];if(ye(this,nt,ft).call(this,w)){const M=r&&w.__staleWhileFetching!==void 0;return p&&(p.fetch="inflight",M&&(p.returnedStale=!0)),M?w.__staleWhileFetching:w.__returned=w}const A=N(this,gr).call(this,E);if(!C&&!A)return p&&(p.fetch="hit"),ye(this,wa,su).call(this,E),i&&N(this,Sa).call(this,E),p&&N(this,ho).call(this,p,E),w;const T=ye(this,$c,Lh).call(this,e,E,S,m),_=T.__staleWhileFetching!==void 0&&r;return p&&(p.fetch=A?"stale":"refresh",_&&A&&(p.returnedStale=!0)),_?T.__staleWhileFetching:T.__returned=T}}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=n,a=N(this,Bt).get(e);if(a!==void 0){const c=N(this,ke)[a],l=ye(this,nt,ft).call(this,c);return s&&N(this,ho).call(this,s,a),N(this,gr).call(this,a)?(s&&(s.get="stale"),l?(s&&r&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),r?c.__staleWhileFetching:void 0):(o||this.delete(e),s&&r&&(s.returnedStale=!0),r?c:void 0)):(s&&(s.get="hit"),l?c.__staleWhileFetching:(ye(this,wa,su).call(this,a),i&&N(this,Sa).call(this,a),c))}else s&&(s.get="miss")}delete(e){var r,i,o,s;let n=!1;if(N(this,Ut)!==0){const a=N(this,Bt).get(e);if(a!==void 0)if(n=!0,N(this,Ut)===1)this.clear();else{N(this,ba).call(this,a);const c=N(this,ke)[a];if(ye(this,nt,ft).call(this,c)?c.__abortController.abort(new Error("deleted")):(N(this,ni)||N(this,Pn))&&(N(this,ni)&&((r=N(this,Jr))==null||r.call(this,c,e,"delete")),N(this,Pn)&&((i=N(this,Qt))==null||i.push([c,e,"delete"]))),N(this,Bt).delete(e),N(this,pt)[a]=void 0,N(this,ke)[a]=void 0,a===N(this,Yt))Ie(this,Yt,N(this,fr)[a]);else if(a===N(this,Sn))Ie(this,Sn,N(this,Rn)[a]);else{const l=N(this,fr)[a];N(this,Rn)[l]=N(this,Rn)[a];const u=N(this,Rn)[a];N(this,fr)[u]=N(this,fr)[a]}Dd(this,Ut)._--,N(this,qr).push(a)}}if(N(this,Pn)&&((o=N(this,Qt))!=null&&o.length)){const a=N(this,Qt);let c;for(;c=a==null?void 0:a.shift();)(s=N(this,Yr))==null||s.call(this,...c)}return n}clear(){var e,n,r;for(const i of ye(this,xi,ms).call(this,{allowStale:!0})){const o=N(this,ke)[i];if(ye(this,nt,ft).call(this,o))o.__abortController.abort(new Error("deleted"));else{const s=N(this,pt)[i];N(this,ni)&&((e=N(this,Jr))==null||e.call(this,o,s,"delete")),N(this,Pn)&&((n=N(this,Qt))==null||n.push([o,s,"delete"]))}}if(N(this,Bt).clear(),N(this,ke).fill(void 0),N(this,pt).fill(void 0),N(this,pr)&&N(this,ti)&&(N(this,pr).fill(0),N(this,ti).fill(0)),N(this,ei)&&N(this,ei).fill(0),Ie(this,Sn,0),Ie(this,Yt,0),N(this,qr).length=0,Ie(this,Qr,0),Ie(this,Ut,0),N(this,Pn)&&N(this,Qt)){const i=N(this,Qt);let o;for(;o=i==null?void 0:i.shift();)(r=N(this,Yr))==null||r.call(this,...o)}}};J8=Symbol.toStringTag,Kr=new WeakMap,hr=new WeakMap,Jr=new WeakMap,Yr=new WeakMap,zc=new WeakMap,Ut=new WeakMap,Qr=new WeakMap,Bt=new WeakMap,pt=new WeakMap,ke=new WeakMap,Rn=new WeakMap,fr=new WeakMap,Sn=new WeakMap,Yt=new WeakMap,qr=new WeakMap,Qt=new WeakMap,ei=new WeakMap,ti=new WeakMap,pr=new WeakMap,ni=new WeakMap,bs=new WeakMap,Pn=new WeakMap,cd=new WeakSet,Ev=function(){const e=new Oh(N(this,Kr)),n=new Oh(N(this,Kr));Ie(this,pr,e),Ie(this,ti,n),Ie(this,ld,(o,s,a=ic.now())=>{if(n[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){const c=setTimeout(()=>{N(this,gr).call(this,o)&&this.delete(N(this,pt)[o])},s+1);c.unref&&c.unref()}}),Ie(this,Sa,o=>{n[o]=e[o]!==0?ic.now():0}),Ie(this,ho,(o,s)=>{if(e[s]){const a=e[s],c=n[s];if(!a||!c)return;o.ttl=a,o.start=c,o.now=r||i();const l=o.now-c;o.remainingTTL=a-l}});let r=0;const i=()=>{const o=ic.now();if(this.ttlResolution>0){r=o;const s=setTimeout(()=>r=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{const s=N(this,Bt).get(o);if(s===void 0)return 0;const a=e[s],c=n[s];if(!a||!c)return 1/0;const l=(r||i())-c;return a-l},Ie(this,gr,o=>{const s=n[o],a=e[o];return!!a&&!!s&&(r||i())-s>a})},Sa=new WeakMap,ho=new WeakMap,ld=new WeakMap,gr=new WeakMap,ep=new WeakSet,vT=function(){const e=new Oh(N(this,Kr));Ie(this,Qr,0),Ie(this,ei,e),Ie(this,ba,n=>{Ie(this,Qr,N(this,Qr)-e[n]),e[n]=0}),Ie(this,ud,(n,r,i,o)=>{if(ye(this,nt,ft).call(this,r))return 0;if(!ps(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(r,n),!ps(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),Ie(this,Hc,(n,r,i)=>{if(e[n]=r,N(this,hr)){const o=N(this,hr)-e[n];for(;N(this,Qr)>o;)ye(this,Xc,Dh).call(this,!0)}Ie(this,Qr,N(this,Qr)+e[n]),i&&(i.entrySize=r,i.totalCalculatedSize=N(this,Qr))})},ba=new WeakMap,Hc=new WeakMap,ud=new WeakMap,Ti=new WeakSet,gs=function*({allowStale:e=this.allowStale}={}){if(N(this,Ut))for(let n=N(this,Yt);!(!ye(this,dd,Tv).call(this,n)||((e||!N(this,gr).call(this,n))&&(yield n),n===N(this,Sn)));)n=N(this,fr)[n]},xi=new WeakSet,ms=function*({allowStale:e=this.allowStale}={}){if(N(this,Ut))for(let n=N(this,Sn);!(!ye(this,dd,Tv).call(this,n)||((e||!N(this,gr).call(this,n))&&(yield n),n===N(this,Yt)));)n=N(this,Rn)[n]},dd=new WeakSet,Tv=function(e){return e!==void 0&&N(this,Bt).get(N(this,pt)[e])===e},Xc=new WeakSet,Dh=function(e){var o,s;const n=N(this,Sn),r=N(this,pt)[n],i=N(this,ke)[n];return N(this,bs)&&ye(this,nt,ft).call(this,i)?i.__abortController.abort(new Error("evicted")):(N(this,ni)||N(this,Pn))&&(N(this,ni)&&((o=N(this,Jr))==null||o.call(this,i,r,"evict")),N(this,Pn)&&((s=N(this,Qt))==null||s.push([i,r,"evict"]))),N(this,ba).call(this,n),e&&(N(this,pt)[n]=void 0,N(this,ke)[n]=void 0,N(this,qr).push(n)),N(this,Ut)===1?(Ie(this,Sn,Ie(this,Yt,0)),N(this,qr).length=0):Ie(this,Sn,N(this,Rn)[n]),N(this,Bt).delete(r),Dd(this,Ut)._--,n},$c=new WeakSet,Lh=function(e,n,r,i){const o=n===void 0?void 0:N(this,ke)[n];if(ye(this,nt,ft).call(this,o))return o;const s=new Vf,{signal:a}=r;a==null||a.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});const c={signal:s.signal,options:r,context:i},l=(m,C=!1)=>{const{aborted:p}=s.signal,v=r.ignoreFetchAbort&&m!==void 0;if(r.status&&(p&&!C?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,v&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),p&&!v&&!C)return d(s.signal.reason);const S=f;return N(this,ke)[n]===f&&(m===void 0?S.__staleWhileFetching?N(this,ke)[n]=S.__staleWhileFetching:this.delete(e):(r.status&&(r.status.fetchUpdated=!0),this.set(e,m,c.options))),m},u=m=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=m),d(m)),d=m=>{const{aborted:C}=s.signal,p=C&&r.allowStaleOnFetchAbort,v=p||r.allowStaleOnFetchRejection,S=v||r.noDeleteOnFetchRejection,E=f;if(N(this,ke)[n]===f&&(!S||E.__staleWhileFetching===void 0?this.delete(e):p||(N(this,ke)[n]=E.__staleWhileFetching)),v)return r.status&&E.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw m},h=(m,C)=>{var v;const p=(v=N(this,zc))==null?void 0:v.call(this,e,o,c);p&&p instanceof Promise&&p.then(S=>m(S===void 0?void 0:S),C),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(m(void 0),r.allowStaleOnFetchAbort&&(m=S=>l(S,!0)))})};r.status&&(r.status.fetchDispatched=!0);const f=new Promise(h).then(l,u),g=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return n===void 0?(this.set(e,g,{...c.options,status:void 0}),n=N(this,Bt).get(e)):N(this,ke)[n]=g,g},nt=new WeakSet,ft=function(e){if(!N(this,bs))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Vf},hd=new WeakSet,xv=function(e,n){N(this,fr)[n]=e,N(this,Rn)[e]=n},wa=new WeakSet,su=function(e){e!==N(this,Yt)&&(e===N(this,Sn)?Ie(this,Sn,N(this,Rn)[e]):ye(this,hd,xv).call(this,N(this,fr)[e],N(this,Rn)[e]),ye(this,hd,xv).call(this,N(this,Yt),e),Ie(this,Yt,e))};let kv=RC;function aU(t){const e=t.match(/^#\$#(\S+)(?:\s+(\S{6})\s+)?(.*)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#name [authKey] keyval*'\nGot `"+t+"`"),null;const n=e[1],r=e[2],i={},o=/(\S+)\s*:\s*"([^"]*)"|(\S+)\s*:\s*(\S+)/g;let s;for(;s=o.exec(e[3]);){const a=s[1]||s[3],c=s[2]||s[4];a in i?console.log(`Invalid message format: duplicate key ${a} detected`):i[a]=c}return{name:n,authKey:r,keyvals:i}}function yb(t){const e=t.match(/^#\$#\*\s(\S+)\s(\S+)\s*:\s*(.+)$|^#\$#:\s(\S+)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#* datatag keyval'\nGot `"+t+"`"),null;const n=e[1]||e[4],r=void 0,i=e[2],o=e[3],s={};return s[i]=o,{name:n,authKey:r,keyvals:s}}function Rv(){return(Math.random()+1).toString(36).substring(3,9)}class bl{constructor(e){U(this,"packageName");U(this,"minVersion",1);U(this,"maxVersion",1);U(this,"packageVersion",0);U(this,"client");this.client=e}handle(e){throw new Error("Method not implemented.")}handleMultiline(e){throw new Error("Method not implemented.")}closeMultiline(e){throw new Error("Method not implemented.")}shutdown(){}send(e,n){e.startsWith(this.packageName)||(e=this.packageName+"-"+e),this.client.sendMcp(e,n)}}class cU extends bl{constructor(){super(...arguments);U(this,"packageName","mcp-negotiate");U(this,"minVersion",2);U(this,"maxVersion",2)}handle(n){switch(n.name){}}sendNegotiate(){var n,r;for(const i of Object.values(this.client.mcpHandlers)){let o=(n=i.minVersion)==null?void 0:n.toFixed(1),s=(r=i.maxVersion)==null?void 0:r.toFixed(1);this.client.sendMcp("mcp-negotiate-can",{package:i.packageName,"min-version":o,"max-version":s})}this.client.sendCommand("#$#$mcp-negotiate-end")}}class lU extends bl{constructor(){super(...arguments);U(this,"packageName","dns-com-awns-status")}handle(n){console.log(n),this.client.emit("statustext",n.keyvals.text)}}class uU extends bl{constructor(n){super(n);U(this,"packageName","dns-org-mud-moo-simpleedit");U(this,"sessions",{});U(this,"clientId");this.clientId=Rv()}handle(n){if(n.name==="dns-org-mud-moo-simpleedit-content"){const r={name:n.keyvals.name,reference:n.keyvals.reference,type:n.keyvals.type,contents:[]};this.sessions[n.keyvals["_data-tag"]]=r}else console.log(`Unexpected simpleedit message ${n}`)}handleMultiline(n){"content"in n.keyvals?this.sessions[n.name].contents.push(n.keyvals.content):console.log(`Unexpected simpleedit ML ${n}`)}closeMultiline(n){console.log(`Closing multiline ${n.name}`),this.client.openEditorWindow(this.sessions[n.name])}shutdown(){new BroadcastChannel("editor").postMessage({type:"shutdown"})}}class dU extends bl{constructor(){super(...arguments);U(this,"packageName","dns-com-awns-getset");U(this,"id",1);U(this,"cache",new kv({max:10}));U(this,"LocalCache",{})}handle(n){switch(n.name){case"dns-com-awns-getset-ack":const r=this.cache.get(n.keyvals.id);if(r===void 0){console.log(`Got ack for unknown id ${n.keyvals.id}`);break}const i=n.keyvals.value;console.log(`Got ${r} = ${i}`),this.LocalCache[r]=i,this.client.emit("getset",r,i);break}}sendGet(n){const r=(this.id++).toString();this.cache.set(r,n),this.client.sendMcp("dns-com-awns-getset-get",{id:r,property:n})}sendSet(n,r){this.client.sendMcp("dns-com-awns-getset-set",{id:this.id++,property:n,value:r})}sendDrop(n){this.client.sendMcp("dns-com-awns-getset-drop",{id:this.id++,property:n})}}class hU extends bl{constructor(){super(...arguments);U(this,"packageName","dns-com-vmoo-userlist");U(this,"maxVersion",1.1);U(this,"player");U(this,"fields",["Object","Name","Icon"]);U(this,"icons",["Idle","Away","Idle+Away","Friend","Newbie","Inhabitant","Inhabitant+","Schooled","Wizard","Key","Star"]);U(this,"players",[])}handle(n){switch(n.name){case"dns-com-vmoo-userlist-you":this.player=n.keyvals.nr;break}}handleMultiline(n){if("fields"in n.keyvals&&(this.fields=Hr(n.keyvals.fields.trim())),"icons"in n.keyvals&&(this.icons=Hr(n.keyvals.icons.trim())),"d"in n.keyvals){const o=n.keyvals.d[0];switch(o){case"=":var r=Hr(n.keyvals.d.slice(1));this.players=r.map(a=>this.playerFromArray(a));break;case"+":this.players.push(this.playerFromArray(Hr(n.keyvals.d.slice(1))));break;case"-":var i=Hr(n.keyvals.d.slice(1));this.players=this.players.filter(a=>!i.includes(a.Object));break;case"*":const s=this.playerFromArray(Hr(n.keyvals.d.slice(1)));this.updatePlayer(s);break;case"<":i=Hr(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!0,this.players[c]=a)});break;case">":i=Hr(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!1,this.players[c]=a)});break;case"[":i=Hr(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!0,this.players[c]=a)});break;case"]":i=Hr(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!1,this.players[c]=a)});break;default:console.log(`Unknown userlist mode ${o} in ${n.keyvals.d}`);break}this.update()}}updatePlayer(n){const r=this.players.findIndex(i=>i.Object===n.Object);r!==-1?this.players[r]=n:this.players.push(n)}update(){this.players.sort((r,i)=>n(i)-n(r)),this.client.emit("userlist",this.players);function n(r){return r.Icon-(r.idle?10:0)-(r.away?20:0)}}playerFromArray(n){const r={};return n.forEach((i,o)=>{r[this.fields[o]]=i}),r.away=!1,r.idle=!1,r}}function Hr(t){t=t.slice(1,-1);let e=[],n="",r=0;for(let o=0;o<t.length;o++){const s=t[o];if(s==="{")r++;else if(s==="}")r--;else if(s===","&&r===0){i(),n="";continue}n+=s}return n.length>0&&i(),e;function i(){n=n.trim(),n.startsWith("{")&&n.endsWith("}")?e.push(Hr(n)):Number.isNaN(Number(n))?n.startsWith('"')&&n.endsWith('"')?e.push(n.slice(1,-1)):e.push(n):e.push(Number(n))}}class fU extends bl{constructor(){super(...arguments);U(this,"packageName","dns-com-awns-ping");U(this,"id",1)}handle(n){switch(n.name){case"dns-com-awns-ping":this.send("reply",n.keyvals);break}}ping(){this.send("dns-com-awns-ping",{id:this.id++})}}function pU({onlyFirst:t=!1}={}){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}const gU=pU();function mU(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(gU,"")}var Pv=(t=>(t.Off="off",t.Unfocused="unfocused",t.All="all",t))(Pv||{}),Jo=(t=>(t.SetGeneral="SET_GENERAL",t.SetSpeech="SET_SPEECH",t.SetChannels="SET_CHANNELS",t.SetEditorAutocompleteEnabled="SET_EDITOR_AUTOCOMPLETE_ENABLED",t.SetEditorAccessibilityMode="SET_EDITOR_ACCESSIBILITY_MODE",t))(Jo||{});class vU{constructor(){U(this,"state");U(this,"listeners",new Set);U(this,"dispatch",e=>{this.state=this.reducer(this.state,e),localStorage.setItem("preferences",JSON.stringify(this.state)),this.listeners.forEach(n=>n())});const e=localStorage.getItem("preferences"),n=this.getInitialPreferences();this.state=e?this.mergePreferences(n,JSON.parse(e)):n}getInitialPreferences(){return{general:{localEcho:!1},speech:{autoreadMode:"off",voice:"",rate:1,pitch:1,volume:1},channels:{sayto:{autoreadMode:"off",notify:!0}},editor:{autocompleteEnabled:!0,accessibilityMode:!0}}}mergePreferences(e,n){return{...e,general:{...e.general,...n.general},speech:{...e.speech,...n.speech},channels:n.channels?{...e.channels,...n.channels}:e.channels,editor:{...e.editor,...n.editor}}}reducer(e,n){switch(n.type){case"SET_GENERAL":return{...e,general:n.data};case"SET_SPEECH":return{...e,speech:n.data};case"SET_CHANNELS":return{...e,channels:n.data};case"SET_EDITOR_AUTOCOMPLETE_ENABLED":return{...e,editor:{...e.editor,autocompleteEnabled:n.data}};case"SET_EDITOR_ACCESSIBILITY_MODE":return{...e,editor:{...e.editor,accessibilityMode:n.data}};default:return e}}getState(){return this.state}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}}const Oc=new vU;class yU extends hE{constructor(n,r){super();U(this,"ws");U(this,"decoder",new TextDecoder("utf8"));U(this,"telnet");U(this,"host");U(this,"port");U(this,"telnetNegotiation",!1);U(this,"telnetBuffer","");U(this,"gmcpHandlers",{});U(this,"mcpHandlers",{});U(this,"mcpMultilines",{});U(this,"mcpAuthKey",null);U(this,"mcp_negotiate");U(this,"mcp_getset");U(this,"gmcp_char");U(this,"worldData",{playerId:"",playerName:"",roomId:"",liveKitTokens:[]});U(this,"cacophony");U(this,"sendCommand",n=>{Oc.getState().general.localEcho&&this.emit("command",n),this.send(n+`\r
`),console.log("> "+n)});this.host=n,this.port=r,this.mcp_negotiate=this.registerMcpPackage(cU),this.mcp_getset=this.registerMcpPackage(dU),this.gmcp_char=this.registerGMCPPackage(K2),this.cacophony=new J5}registerGMCPPackage(n){const r=new n(this);return this.gmcpHandlers[r.packageName]=r,console.log("Registered GMCP Package:",r.packageName),r}registerMcpPackage(n){const r=new n(this);return this.mcpHandlers[r.packageName]=r,r}connect(){this.ws=new window.WebSocket(`wss://${this.host}:${this.port}`),this.ws.binaryType="arraybuffer",this.telnet=new X2(new H2(this.ws)),this.ws.onopen=()=>{this.emit("connect")},this.telnet.on("data",n=>{this.handleData(n)}),this.telnet.on("negotiation",(n,r)=>{n===ou.WILL&&r===iu.GMCP?(console.log("GMCP Negotiation"),this.telnet.sendNegotiation(ou.DO,iu.GMCP),this.gmcpHandlers.Core.sendHello(),this.gmcpHandlers["Core.Supports"].sendSet(),this.gmcpHandlers["Auth.Autologin"].sendLogin()):n===ou.DO&&r===iu.TERMINAL_TYPE&&(console.log("TTYPE Negotiation"),this.telnet.sendNegotiation(ou.WILL,iu.TERMINAL_TYPE),this.telnet.sendTerminalType("Mongoose Client"),this.telnet.sendTerminalType("ANSI"),this.telnet.sendTerminalType("PROXY"))}),this.telnet.on("gmcp",(n,r)=>{console.log("GMCP Package:",n,r);try{this.handleGmcpData(n,r)}catch(i){console.error("Calling GMCP:",i)}}),this.ws.onclose=()=>{this.emit("disconnect"),this.mcpAuthKey=null,setTimeout(()=>{this.connect()},1e4)},this.ws.onerror=n=>{this.emit("error",n)}}send(n){this.ws.send(n)}close(){this.ws.close()}handleData(n){const r=this.decoder.decode(n).trimEnd();for(const i of r.split(`
`))i&&i.startsWith("#$#")?this.handleMcp(i):this.emitMessage(i)}handleMcp(n){if(n.startsWith("#$#*")){const i=yb(n.trimEnd());i&&(i.name in this.mcpMultilines?this.mcpMultilines[i.name].handleMultiline(i):console.warn("Received continuation for unknown multiline",i));return}if(n.startsWith("#$#:")){const i=yb(n.trimEnd());i&&(this.mcpMultilines[i.name].closeMultiline(i),delete this.mcpMultilines[i.name]);return}const r=aU(n.trimEnd());if(console.log("MCP Message:",r),(r==null?void 0:r.name.toLowerCase())==="mcp"&&r.authKey==null&&this.mcpAuthKey==null)this.mcpAuthKey=Rv(),this.sendCommand(`#$#mcp authentication-key: ${this.mcpAuthKey} version: 2.1 to: 2.1`),this.mcp_negotiate.sendNegotiate();else if((r==null?void 0:r.name)!=="mcp-negotiate-end")if((r==null?void 0:r.authKey)===this.mcpAuthKey){let i=r.name;do{if(i in this.mcpHandlers){this.mcpHandlers[i].handle(r),"_data-tag"in r.keyvals&&(console.log("new multiline "+r.keyvals["_data-tag"]),this.mcpMultilines[r.keyvals["_data-tag"]]=this.mcpHandlers[i]);return}i=i.substring(0,i.lastIndexOf("-"))}while(i);console.log(`No handler for ${r.name}`)}else console.log(`Unexpected authkey "${r==null?void 0:r.authKey}", probably a spoofed message.`)}handleGmcpData(n,r){const i=n.lastIndexOf("."),o=n.substring(0,i),s=n.substring(i+1);console.log("GMCP Message:",o,s,r);const a=this.gmcpHandlers[o];if(!a){console.log("No handler for GMCP package:",o);return}const c=a["handle"+s];c?(console.log("Calling handler:",c),c.call(a,JSON.parse(r))):console.log("No handler on package:",o,s)}emitMessage(n){const r=Oc.getState().speech.autoreadMode;r===Pv.All&&this.speak(n),r===Pv.Unfocused&&!document.hasFocus()&&this.speak(n),this.emit("message",n)}sendGmcp(n,r){console.log("Sending GMCP:",n,r),this.telnet.sendGmcp(n,r)}sendMcp(n,r){if(typeof r=="object"){let o="";for(const[s,a]of Object.entries(r))o+=` ${s}: ${a||'""'}`;r=o}const i=`#$#${n} ${this.mcpAuthKey} ${r}\r
`;this.send(i)}sendMcpMLLine(n,r,i){this.send(`#$#* ${n} ${r}: ${i}\r
`)}closeMcpML(n){this.send(`#$#: ${n}\r
`)}openEditorWindow(n){console.log(n);const r=new BroadcastChannel("editor"),i=n.reference,o=encodeURIComponent(i),s=window.open(`/editor?reference=${o}`,"_blank");r.onmessage=a=>{console.log("editor window message",a),a.data.id===i&&(a.data.type==="ready"?(console.log("sending editor window session",n),r.postMessage({type:"load",session:n})):a.data.type==="save"?(console.log("saving editor window with session",a.data.session),this.saveEditorWindow(a.data.session)):a.data.type==="close"&&(console.log("closing editor window"),r.close(),r.onmessage=null))},s&&s.focus()}saveEditorWindow(n){const r={reference:n.reference,type:n.type};r["content*"]="",this.sendMCPMultiline("dns-org-mud-moo-simpleedit-set",r,n.contents)}sendMCPMultiline(n,r,i){const o=Rv();r["_data-tag"]=o,this.sendMcp(n,r);for(const s of i)this.sendMcpMLLine(o,"content",s);this.closeMcpML(o)}shutdown(){Object.values(this.mcpHandlers).forEach(n=>{n.shutdown()}),Object.values(this.gmcpHandlers).forEach(n=>{n.shutdown()})}requestNotificationPermission(){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="default"&&Notification.requestPermission()}sendNotification(n,r){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="granted"&&new Notification(n,{body:r})}speak(n){if(!("speechSynthesis"in window)){console.log("This browser does not support speech synthesis");return}const r=new SpeechSynthesisUtterance(mU(n));r.lang="en-US";const{rate:i,pitch:o,voice:s,volume:a}=Oc.getState().speech;r.rate=i,r.pitch=o,r.volume=a;const l=speechSynthesis.getVoices().find(u=>u.name===s);l&&(r.voice=l),speechSynthesis.speak(r)}cancelSpeech(){speechSynthesis.cancel()}stopAllSounds(){this.gmcpHandlers["Client.Media"].stopAllSounds()}getInput(){var n;return((n=document.getElementById("command-input"))==null?void 0:n.textContent)||""}setInput(n){const r=document.getElementById("command-input");r&&(r.textContent=n)}}class CU{constructor(){U(this,"history",[]);U(this,"currentIndex",null);U(this,"unsentInput","")}addCommand(e){e.trim()!==""&&(this.history.length===0||this.history[this.history.length-1]!==e)&&(this.history.push(e.trim()),this.unsentInput=""),this.currentIndex=null}navigateUp(e){return this.currentIndex===null&&(this.unsentInput=e),this.history.length>0&&(this.currentIndex==null||this.currentIndex>0)?(this.currentIndex=this.currentIndex==null?this.history.length-1:this.currentIndex-1,this.history[this.currentIndex]):this.currentIndex===null?"":this.history[this.currentIndex]}navigateDown(e){return this.currentIndex!==null?this.currentIndex<this.history.length-1?(this.currentIndex++,this.history[this.currentIndex]):(this.currentIndex=null,this.unsentInput):this.unsentInput}getCurrentInput(){return this.currentIndex===null?this.unsentInput:this.history[this.currentIndex]}}const IU=({onSend:t,inputRef:e})=>{const[n,r]=b.useState(""),i=b.useRef(new CU),o=s=>{const a=i.current;if(s.key==="Enter"&&!s.shiftKey)s.preventDefault(),t(n),a.addCommand(n),r("");else if(s.key==="ArrowUp"){s.preventDefault();const c=a.navigateUp(n);r(c)}else if(s.key==="ArrowDown"){s.preventDefault();const c=a.navigateDown(n);r(c)}};return $.jsx("textarea",{value:n,onChange:s=>r(s.target.value),onKeyDown:o,id:"command-input",ref:e,autoFocus:!0})},SU="95d79017651827dbc93ffee229322fb4a1da1964",na=()=>{const[,t]=b.useReducer(e=>e+1,0);return b.useEffect(()=>Oc.subscribe(t),[]),[Oc.getState(),Oc.dispatch]},bU=()=>{const[t,e]=b.useState([]);return b.useEffect(()=>{const n=()=>{e(window.speechSynthesis.getVoices())};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)},[]),t},wU=({tabs:t})=>{const[e,n]=b.useState(0),r=b.useRef([]);return b.useEffect(()=>{r.current=r.current.slice(0,t.length)},[t]),b.useEffect(()=>{const i=s=>{switch(s.key){case"ArrowLeft":n(a=>a>0?a-1:t.length-1);break;case"ArrowRight":n(a=>a<t.length-1?a+1:0);break}},o=r.current[e];return o==null||o.addEventListener("keydown",i),()=>{o==null||o.removeEventListener("keydown",i)}},[t.length,e]),b.useEffect(()=>{var i;(i=r.current[e])==null||i.focus()},[e]),$.jsxs("div",{children:[$.jsx("div",{role:"tablist","aria-label":"Tabs",children:t.map((i,o)=>$.jsx("button",{ref:s=>r.current[o]=s,role:"tab","aria-selected":e===o,id:`${i.label}-tab`,"aria-controls":`${i.label}-panel`,onClick:()=>n(o),tabIndex:e===o?void 0:-1,children:i.label},o))}),t.map((i,o)=>$.jsx("div",{role:"tabpanel",id:`${i.label}-panel`,"aria-labelledby":`${i.label}-tab`,hidden:e!==o,tabIndex:e===o?0:-1,children:i.content},o))]})},AU=()=>{const[t,e]=na();return $.jsxs("label",{children:[$.jsx("input",{type:"checkbox",checked:t.general.localEcho,onChange:n=>e({type:Jo.SetGeneral,data:{...t.general,localEcho:n.target.checked}})}),"Local Echo"]})},kU=()=>{const[t,e]=na();return $.jsxs("label",{children:["Auto Read:",$.jsxs("select",{value:t.speech.autoreadMode,onChange:n=>e({type:Jo.SetSpeech,data:{...t.speech,autoreadMode:n.target.value}}),children:[$.jsx("option",{value:"off",children:"Off"}),$.jsx("option",{value:"unfocused",children:"Unfocused"}),$.jsx("option",{value:"all",children:"Always"})]})]})},EU=()=>{const[t,e]=na(),n=bU();return $.jsxs("label",{children:["Voice:",$.jsx("select",{value:t.speech.voice,onChange:r=>e({type:Jo.SetSpeech,data:{...t.speech,voice:r.target.value}}),children:n.map(r=>$.jsx("option",{value:r.name,children:r.name},r.voiceURI))})]})},TU=()=>{const[t,e]=na();return $.jsxs("label",{children:["Rate (0.1 - 10.0):",$.jsx("input",{type:"range",min:"0.1",max:"10.0",step:"0.1",value:t.speech.rate,onChange:n=>e({type:Jo.SetSpeech,data:{...t.speech,rate:parseFloat(n.target.value)}})})]})},xU=()=>{const[t,e]=na();return $.jsxs("label",{children:["Pitch (0 - 2):",$.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:t.speech.pitch,onChange:n=>e({type:Jo.SetSpeech,data:{...t.speech,pitch:parseFloat(n.target.value)}})})]})},RU=()=>{const[t,e]=na();return $.jsxs("label",{children:["Volume (0 - 1):",$.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.speech.volume,onChange:n=>e({type:Jo.SetSpeech,data:{...t.speech,volume:parseFloat(n.target.value)}})})]})},PU=()=>$.jsxs("div",{children:[$.jsx(kU,{}),$.jsx("br",{}),$.jsx(EU,{}),$.jsx("br",{}),$.jsx(TU,{}),$.jsx("br",{}),$.jsx(xU,{}),$.jsx("br",{}),$.jsx(RU,{}),$.jsx("br",{})]}),NU=()=>{const[t,e]=na(),n=t.editor,r=o=>{e({type:Jo.SetEditorAutocompleteEnabled,data:o.target.checked})},i=o=>{e({type:Jo.SetEditorAccessibilityMode,data:o.target.checked})};return $.jsxs("div",{children:[$.jsxs("label",{children:[$.jsx("input",{type:"checkbox",checked:n.autocompleteEnabled,onChange:r}),"Enable Autocomplete"]}),$.jsx("br",{}),$.jsxs("label",{children:[$.jsx("input",{type:"checkbox",checked:n.accessibilityMode,onChange:i}),"Enable Accessibility Mode"]}),$.jsx("br",{})]})},_U=()=>{const t=[{label:"General",content:$.jsx(AU,{})},{label:"Speech",content:$.jsx(PU,{})},{label:"Editor",content:$.jsx(NU,{})}];return $.jsx(wU,{tabs:t})};function MU(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Yu(){return Yu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yu.apply(this,arguments)}var Nv="data-focus-lock",yT="data-focus-lock-disabled",OU="data-no-focus-lock",DU="data-autofocus-inside",LU="data-no-autofocus";function Dg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function BU(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var FU=typeof window<"u"?b.useLayoutEffect:b.useEffect,Cb=new WeakMap;function UU(t,e){var n=BU(e||null,function(r){return t.forEach(function(i){return Dg(i,r)})});return FU(function(){var r=Cb.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||Dg(a,null)}),o.forEach(function(a){i.has(a)||Dg(a,s)})}Cb.set(n,t)},[t]),n}var Lg={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},_v=function(t,e){return _v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},_v(t,e)};function wl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");_v(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Mv=function(){return Mv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Mv.apply(this,arguments)};function VU(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function CT(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function ol(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ov(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Dv(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Dc(t){return this instanceof Dc?(this.v=t,this):new Dc(t)}function GU(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},s("next"),s("throw"),s("return"),i[Symbol.asyncIterator]=function(){return this},i;function s(h){r[h]&&(i[h]=function(f){return new Promise(function(g,m){o.push([h,f,g,m])>1||a(h,f)})})}function a(h,f){try{c(r[h](f))}catch(g){d(o[0][3],g)}}function c(h){h.value instanceof Dc?Promise.resolve(h.value.v).then(l,u):d(o[0][2],h)}function l(h){a("next",h)}function u(h){a("throw",h)}function d(h,f){h(f),o.shift(),o.length&&a(o[0][0],o[0][1])}}function WU(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof ol=="function"?ol(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function IT(t){return t}function ST(t,e){e===void 0&&(e=IT);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var c=function(){var u=s;s=[],u.forEach(o)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){s.push(u),l()},filter:function(u){return s=s.filter(u),n}}}};return i}function Hy(t,e){return e===void 0&&(e=IT),ST(t,e)}function ZU(t){t===void 0&&(t={});var e=ST(null);return e.options=Mv({async:!0,ssr:!1},t),e}var bT=Hy({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),wT=Hy(),jU=Hy(),zU=ZU({async:!0,ssr:typeof document<"u"}),HU=b.createContext(void 0),XU=[],AT=b.forwardRef(function(e,n){var r,i=b.useState(),o=i[0],s=i[1],a=b.useRef(),c=b.useRef(!1),l=b.useRef(null),u=b.useState({}),d=u[1],h=e.children,f=e.disabled,g=f===void 0?!1:f,m=e.noFocusGuards,C=m===void 0?!1:m,p=e.persistentFocus,v=p===void 0?!1:p,S=e.crossFrame,E=S===void 0?!0:S,w=e.autoFocus,A=w===void 0?!0:w;e.allowTextSelection;var T=e.group,x=e.className,_=e.whiteList,M=e.hasPositiveIndices,D=e.shards,F=D===void 0?XU:D,W=e.as,j=W===void 0?"div":W,H=e.lockProps,q=H===void 0?{}:H,te=e.sideCar,z=e.returnFocus,Y=z===void 0?!1:z,ie=e.focusOptions,Z=e.onActivation,ne=e.onDeactivation,Ee=b.useState({}),xe=Ee[0],me=b.useCallback(function(pe){var Ze=pe.captureFocusRestore;if(!l.current){var Ve,Te=(Ve=document)==null?void 0:Ve.activeElement;l.current=Te,Te!==document.body&&(l.current=Ze(Te))}a.current&&Z&&Z(a.current),c.current=!0,d()},[Z]),Ae=b.useCallback(function(){c.current=!1,ne&&ne(a.current),d()},[ne]),Xe=b.useCallback(function(pe){var Ze=l.current;if(Ze){var Ve=(typeof Ze=="function"?Ze():Ze)||document.body,Te=typeof Y=="function"?Y(Ve):Y;if(Te){var He=typeof Te=="object"?Te:void 0;l.current=null,pe?Promise.resolve().then(function(){return Ve.focus(He)}):Ve.focus(He)}}},[Y]),he=b.useCallback(function(pe){c.current&&bT.useMedium(pe)},[]),xn=wT.useMedium,jn=b.useCallback(function(pe){a.current!==pe&&(a.current=pe,s(pe))},[]),Ct=Yu((r={},r[yT]=g&&"disabled",r[Nv]=T,r),q),$t=C!==!0,ar=$t&&C!=="tail",jr=UU([n,jn]),ae=b.useMemo(function(){return{observed:a,shards:F,enabled:!g,active:c.current}},[g,c.current,F,o]);return b.createElement(b.Fragment,null,$t&&[b.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:g?-1:0,style:Lg}),M?b.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:g?-1:1,style:Lg}):null],!g&&b.createElement(te,{id:xe,sideCar:zU,observed:o,disabled:g,persistentFocus:v,crossFrame:E,autoFocus:A,whiteList:_,shards:F,onActivation:me,onDeactivation:Ae,returnFocus:Xe,focusOptions:ie}),b.createElement(j,Yu({ref:jr},Ct,{className:x,onBlur:xn,onFocus:he}),b.createElement(HU.Provider,{value:ae},h)),ar&&b.createElement("div",{"data-focus-guard":!0,tabIndex:g?-1:0,style:Lg}))});AT.propTypes={};const kT=AT;function Lv(t,e){return Lv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},Lv(t,e)}function $U(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Lv(t,e)}function Qu(t){"@babel/helpers - typeof";return Qu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qu(t)}function KU(t,e){if(Qu(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Qu(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function JU(t){var e=KU(t,"string");return Qu(e)=="symbol"?e:e+""}function YU(t,e,n){return e=JU(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function QU(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var o=[],s;function a(){s=t(o.map(function(l){return l.props})),e(s)}var c=function(l){$U(u,l);function u(){return l.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var f=o.indexOf(this);o.splice(f,1),a()},d.render=function(){return rt.createElement(i,this.props)},u}(b.PureComponent);return YU(c,"displayName","SideEffect("+n(i)+")"),c}}var ro=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},La=function(t){return Array.isArray(t)?t:[t]},ET=function(t){return Array.isArray(t)?t[0]:t},qU=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},TT=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},xT=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},e4=function(t){return t.hasAttribute("inert")},t4=function(t,e){return!t||xT(t)||!qU(t)&&!e4(t)&&e(TT(t))},RT=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=t4(e,RT.bind(void 0,t));return t.set(e,r),r},n4=function(t,e){return t&&!xT(t)?o4(t)?e(TT(t)):!1:!0},PT=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=n4(e,PT.bind(void 0,t));return t.set(e,r),r},NT=function(t){return t.dataset},r4=function(t){return t.tagName==="BUTTON"},_T=function(t){return t.tagName==="INPUT"},MT=function(t){return _T(t)&&t.type==="radio"},i4=function(t){return!((_T(t)||r4(t))&&(t.type==="hidden"||t.disabled))},o4=function(t){var e=t.getAttribute(LU);return![!0,"true",""].includes(e)},Xy=function(t){var e;return!!(t&&(!((e=NT(t))===null||e===void 0)&&e.focusGuard))},Bv=function(t){return!Xy(t)},s4=function(t){return!!t},a4=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},c4=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},$y=function(t,e,n){return ro(t).map(function(r,i){var o=c4(r);return{node:r,index:i,tabIndex:n&&o===-1?(r.dataset||{}).focusGuard?0:-1:o}}).filter(function(r){return!e||r.tabIndex>=0}).sort(a4)},l4=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],Ky=l4.join(","),u4="".concat(Ky,", [data-focus-guard]"),OT=function(t,e){return ro((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?u4:Ky)?[r]:[],OT(r))},[])},d4=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?sl([t.contentDocument.body],e):[t]},sl=function(t,e){return t.reduce(function(n,r){var i,o=OT(r,e),s=(i=[]).concat.apply(i,o.map(function(a){return d4(a,e)}));return n.concat(s,r.parentNode?ro(r.parentNode.querySelectorAll(Ky)).filter(function(a){return a===r}):[])},[])},h4=function(t){var e=t.querySelectorAll("[".concat(DU,"]"));return ro(e).map(function(n){return sl([n])}).reduce(function(n,r){return n.concat(r)},[])},Jy=function(t,e){return ro(t).filter(function(n){return RT(e,n)}).filter(function(n){return i4(n)})},Ib=function(t,e){return e===void 0&&(e=new Map),ro(t).filter(function(n){return PT(e,n)})},Yy=function(t,e,n){return $y(Jy(sl(t,n),e),!0,n)},Gf=function(t,e){return $y(Jy(sl(t),e),!1)},f4=function(t,e){return Jy(h4(t),e)},Ta=function(t,e){return t.shadowRoot?Ta(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:ro(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?Ta(i,e):!1}return Ta(n,e)})},p4=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(s,a){return!e.has(a)})},DT=function(t){return t.parentNode?DT(t.parentNode):t},Qy=function(t){var e=La(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(Nv);return n.push.apply(n,i?p4(ro(DT(r).querySelectorAll("[".concat(Nv,'="').concat(i,'"]:not([').concat(yT,'="disabled"])')))):[r]),n},[])},g4=function(t){try{return t()}catch{return}},qu=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?qu(e.shadowRoot):e instanceof HTMLIFrameElement&&g4(function(){return e.contentWindow.document})?qu(e.contentWindow.document):e}},m4=function(t,e){return t===e},v4=function(t,e){return!!ro(t.querySelectorAll("iframe")).some(function(n){return m4(n,e)})},LT=function(t,e){return e===void 0&&(e=qu(ET(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:Qy(t).some(function(n){return Ta(n,e)||v4(n,e)})},y4=function(t){t===void 0&&(t=document);var e=qu(t);return e?ro(t.querySelectorAll("[".concat(OU,"]"))).some(function(n){return Ta(n,e)}):!1},C4=function(t,e){return e.filter(MT).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},qy=function(t,e){return MT(t)&&t.name?C4(t,e):t},I4=function(t){var e=new Set;return t.forEach(function(n){return e.add(qy(n,t))}),t.filter(function(n){return e.has(n)})},Sb=function(t){return t[0]&&t.length>1?qy(t[0],t):t[0]},bb=function(t,e){return t.indexOf(qy(e,t))},Fv="NEW_FOCUS",S4=function(t,e,n,r,i){var o=t.length,s=t[0],a=t[o-1],c=Xy(r);if(!(r&&t.indexOf(r)>=0)){var l=r!==void 0?n.indexOf(r):-1,u=i?n.indexOf(i):l,d=i?t.indexOf(i):-1;if(l===-1)return d!==-1?d:Fv;if(d===-1)return Fv;var h=l-u,f=n.indexOf(s),g=n.indexOf(a),m=I4(n),C=r!==void 0?m.indexOf(r):-1,p=C-(i?m.indexOf(i):l);if(!h&&d>=0||e.length===0)return d;var v=bb(t,e[0]),S=bb(t,e[e.length-1]);if(l<=f&&c&&Math.abs(h)>1)return S;if(l>=g&&c&&Math.abs(h)>1)return v;if(h&&Math.abs(p)>1)return d;if(l<=f)return S;if(l>g)return v;if(h)return Math.abs(h)>1?d:(o+d+h)%o}},b4=function(t){return function(e){var n,r=(n=NT(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},wb=function(t,e,n){var r=t.map(function(o){var s=o.node;return s}),i=Ib(r.filter(b4(n)));return i&&i.length?Sb(i):Sb(Ib(e))},Uv=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&Uv(t.parentNode.host||t.parentNode,e),e},Bg=function(t,e){for(var n=Uv(t),r=Uv(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},BT=function(t,e,n){var r=La(t),i=La(e),o=r[0],s=!1;return i.filter(Boolean).forEach(function(a){s=Bg(s||a,a)||s,n.filter(Boolean).forEach(function(c){var l=Bg(o,c);l&&(!s||Ta(l,s)?s=l:s=Bg(l,s))})}),s},Ab=function(t,e){return t.reduce(function(n,r){return n.concat(f4(r,e))},[])},w4=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(s4)},A4=function(t,e){var n=qu(La(t).length>0?document:ET(t).ownerDocument),r=Qy(t).filter(Bv),i=BT(n||t,t,r),o=new Map,s=Gf(r,o),a=s.filter(function(g){var m=g.node;return Bv(m)});if(a[0]){var c=Gf([i],o).map(function(g){var m=g.node;return m}),l=w4(c,a),u=l.map(function(g){var m=g.node;return m}),d=l.filter(function(g){var m=g.tabIndex;return m>=0}).map(function(g){var m=g.node;return m}),h=S4(u,d,c,n,e);if(h===Fv){var f=wb(s,d,Ab(r,o))||wb(s,u,Ab(r,o));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return h===void 0?h:l[h]}},k4=function(t){var e=Qy(t).filter(Bv),n=BT(t,t,e),r=$y(sl([n],!0),!0,!0),i=sl(e,!1);return r.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:i.indexOf(s)>=0,guard:Xy(s)}})},eC=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},Fg=0,Ug=!1,FT=function(t,e,n){n===void 0&&(n={});var r=A4(t,e);if(!Ug&&r){if(Fg>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Ug=!0,setTimeout(function(){Ug=!1},1);return}Fg++,eC(r.node,n.focusOptions),Fg--}};function Zl(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var E4=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:Zl(n),parent:Zl(n.parentElement),left:Zl(n.previousElementSibling),right:Zl(n.nextElementSibling)}),n=n.parentElement;return{element:Zl(t),stack:e,ownerDocument:t.ownerDocument}},T4=function(t){var e,n,r,i,o;if(t)for(var s=t.stack,a=t.ownerDocument,c=new Map,l=0,u=s;l<u.length;l++){var d=u[l],h=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(h&&a.contains(h)){for(var f=(n=d.left)===null||n===void 0?void 0:n.call(d),g=d.current(),m=h.contains(g)?g:void 0,C=(r=d.right)===null||r===void 0?void 0:r.call(d),p=Yy([h],c),v=(o=(i=m??(f==null?void 0:f.nextElementSibling))!==null&&i!==void 0?i:C)!==null&&o!==void 0?o:f;v;){for(var S=0,E=p;S<E.length;S++){var w=E[S];if(v!=null&&v.contains(w.node))return w.node}v=v.nextElementSibling}if(p.length)return p[0].node}}},x4=function(t){var e=E4(t);return function(){return T4(e)}},R4=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=La(e);if(r.every(function(s){return!Ta(s,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?Yy(r,new Map):Gf(r,new Map),o=i.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},P4=function(t,e){var n=e?Yy(La(t),new Map):Gf(La(t),new Map);return{first:n[0],last:n[n.length-1]}},N4=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},UT=function(t,e,n){e===void 0&&(e={});var r=N4(e),i=R4(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&eC(o.node,r.focusOptions)}},_4=function(t,e){e===void 0&&(e={}),UT(t,e,function(n,r){var i=n.next,o=n.first;return i||r&&o})},M4=function(t,e){e===void 0&&(e={}),UT(t,e,function(n,r){var i=n.prev,o=n.last;return i||r&&o})},VT=function(t,e,n){var r,i=P4(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),o=i[n];o&&eC(o.node,e.focusOptions)},O4=function(t,e){e===void 0&&(e={}),VT(t,e,"first")},D4=function(t,e){e===void 0&&(e={}),VT(t,e,"last")};function tC(t){setTimeout(t,1)}var L4=function(e){return e&&"current"in e?e.current:e},B4=function(){return document&&document.activeElement===document.body},F4=function(){return B4()||y4()},Lc=null,kc=null,Bc=null,ed=!1,U4=function(){return!0},V4=function(e){return(Lc.whiteList||U4)(e)},G4=function(e,n){Bc={observerNode:e,portaledElement:n}},W4=function(e){return Bc&&Bc.portaledElement===e};function kb(t,e,n,r){var i=null,o=t;do{var s=r[o];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else if(s.lockItem){if(o!==t)return;i=null}else break}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var Z4=function(e){return e?!!ed:ed==="meanwhile"},j4=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},z4=function(e,n){return n.some(function(r){return j4(e,r,r)})},Wf=function(){var e=!1;if(Lc){var n=Lc,r=n.observed,i=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,c=n.focusOptions,l=r||Bc&&Bc.portaledElement,u=document&&document.activeElement;if(l){var d=[l].concat(s.map(L4).filter(Boolean));if((!u||V4(u))&&(i||Z4(a)||!F4()||!kc&&o)&&(l&&!(LT(d)||u&&z4(u,d)||W4(u))&&(document&&!kc&&u&&!o?(u.blur&&u.blur(),document.body.focus()):(e=FT(d,kc,{focusOptions:c}),Bc={})),ed=!1,kc=document&&document.activeElement),document&&u!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var h=document&&document.activeElement,f=k4(d),g=f.map(function(m){var C=m.node;return C}).indexOf(h);g>-1&&(f.filter(function(m){var C=m.guard,p=m.node;return C&&p.dataset.focusAutoGuard}).forEach(function(m){var C=m.node;return C.removeAttribute("tabIndex")}),kb(g,f.length,1,f),kb(g,-1,-1,f))}}}return e},GT=function(e){Wf()&&e&&(e.stopPropagation(),e.preventDefault())},nC=function(){return tC(Wf)},H4=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||G4(r,n)},X4=function(){return null},WT=function(){ed="just",tC(function(){ed="meanwhile"})},$4=function(){document.addEventListener("focusin",GT),document.addEventListener("focusout",nC),window.addEventListener("blur",WT)},K4=function(){document.removeEventListener("focusin",GT),document.removeEventListener("focusout",nC),window.removeEventListener("blur",WT)};function J4(t){return t.filter(function(e){var n=e.disabled;return!n})}var ZT={moveFocusInside:FT,focusInside:LT,focusNextElement:_4,focusPrevElement:M4,focusFirstElement:O4,focusLastElement:D4,captureFocusRestore:x4};function Y4(t){var e=t.slice(-1)[0];e&&!Lc&&$4();var n=Lc,r=n&&e&&e.id===n.id;Lc=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!e)),e?(kc=null,(!r||n.observed!==e.observed)&&e.onActivation(ZT),Wf(),tC(Wf)):(K4(),kc=null)}bT.assignSyncMedium(H4);wT.assignMedium(nC);jU.assignMedium(function(t){return t(ZT)});const Q4=QU(J4,Y4)(X4);var jT=b.forwardRef(function(e,n){return b.createElement(kT,Yu({sideCar:Q4,ref:n},e))}),zT=kT.propTypes||{};zT.sideCar;MU(zT,["sideCar"]);jT.propTypes={};const q4=jT,eV=rt.forwardRef((t,e)=>{const[n,r]=b.useState(!1),i=b.useRef(null);return rt.useImperativeHandle(e,()=>({open(){r(!0)},close(){r(!1)}})),b.useEffect(()=>{var o;n&&((o=i.current)==null||o.focus())},[n]),b.useEffect(()=>{const o=s=>{s.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[]),$.jsx(q4,{disabled:!n,children:$.jsxs("dialog",{className:"preferences-dialog",open:n,ref:i,tabIndex:-1,"aria-label":"Preferences",children:[$.jsx("h1",{style:{color:"white",textAlign:"center",fontSize:"1.5em",padding:"0.5em",margin:"0.5em",border:"1px solid black",borderRadius:"0.5em",backgroundColor:"black"},children:"Preferences"}),n&&$.jsx(_U,{}),$.jsx("button",{onClick:()=>r(!1),children:"Close"}),$.jsx("br",{}),$.jsxs("span",{id:"commit-hash",children:["Version: ",SU]})]})})});var HT={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Eb=rt.createContext&&rt.createContext(HT),Gs=function(){return Gs=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Gs.apply(this,arguments)},tV=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function XT(t){return t&&t.map(function(e,n){return rt.createElement(e.tag,Gs({key:n},e.attr),XT(e.child))})}function Ka(t){return function(e){return rt.createElement(nV,Gs({attr:Gs({},t.attr)},e),XT(t.child))}}function nV(t){var e=function(n){var r=t.attr,i=t.size,o=t.title,s=tV(t,["attr","size","title"]),a=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),rt.createElement("svg",Gs({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:c,style:Gs(Gs({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&rt.createElement("title",null,o),t.children)};return Eb!==void 0?rt.createElement(Eb.Consumer,null,function(n){return e(n)}):e(HT)}function rV(t){return Ka({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function iV(t){return Ka({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(t)}function oV(t){return Ka({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"}}]})(t)}function $T(t){return Ka({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(t)}function sV(t){return Ka({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"}}]})(t)}function aV(t){return Ka({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"}}]})(t)}function cV(t){return Ka({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}}]})(t)}const lV=({client:t,onClearLog:e,onSaveLog:n,onToggleUsers:r,onOpenPrefs:i})=>{const[o,s]=rt.useState(t.cacophony.muted);return $.jsxs("div",{className:"toolbar",children:[$.jsxs("button",{onClick:n,accessKey:"l",children:[$.jsx($T,{}),"Save Log"]}),$.jsxs("button",{onClick:e,accessKey:"c",children:[$.jsx(oV,{}),"Clear Log"]}),$.jsxs("button",{onClick:i,accessKey:"p",children:[$.jsx(rV,{}),"Preferences"]}),$.jsxs("button",{onClick:()=>{s(!o),t.cacophony.muted=!o},accessKey:"m",children:[o?$.jsx(cV,{}):$.jsx(aV,{}),o?"Unmute":"Mute"]}),$.jsx("button",{onClick:r,accessKey:"u",children:"Show/Hide Users"}),$.jsxs("label",{children:["Volume",$.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>t.cacophony.setGlobalVolume(Number(a.target.value)/100)})]})]})};class uV extends rt.Component{constructor(e){super(e),this.state={statusText:"Not connected"},e.client.on("statustext",n=>this.setState({statusText:n})),e.client.on("connect",()=>this.setState({statusText:"Connected"})),e.client.on("disconnect",()=>this.setState({statusText:"Disconnected"}))}render(){return $.jsx("div",{className:"statusbar",children:this.state.statusText})}}const dV=({users:t})=>$.jsxs("div",{className:"sidebar",children:[$.jsx("div",{className:"sidebar-header",role:"heading","aria-level":2,children:"Connected Players"}),$.jsx("div",{className:"sidebar-content",children:$.jsx("ul",{children:t.map(e=>{let n="";return e.away&&(n+=" away"),e.idle&&(n+=" idle"),$.jsx("li",{className:n,children:e.Name},e.Object)})})})]});var Tb={};function hV(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var fV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pV(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var KT={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(fV,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function o(m,C){var p=m[C];if(typeof p.bind=="function")return p.bind(m);try{return Function.prototype.bind.call(p,m)}catch{return function(){return Function.prototype.apply.apply(p,[m,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?s:console[m]!==void 0?o(console,m):console.log!==void 0?o(console,"log"):e}function c(m,C){for(var p=0;p<i.length;p++){var v=i[p];this[v]=p<m?e:this.methodFactory(v,m,C)}this.log=this.debug}function l(m,C,p){return function(){typeof console!==n&&(c.call(this,C,p),this[m].apply(this,arguments))}}function u(m,C,p){return a(m)||l.apply(this,arguments)}function d(m,C,p){var v=this,S;C=C??"WARN";var E="loglevel";typeof m=="string"?E+=":"+m:typeof m=="symbol"&&(E=void 0);function w(_){var M=(i[_]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=M;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+M+";"}catch{}}}function A(){var _;if(!(typeof window===n||!E)){try{_=window.localStorage[E]}catch{}if(typeof _===n)try{var M=window.document.cookie,D=M.indexOf(encodeURIComponent(E)+"=");D!==-1&&(_=/^([^;]+)/.exec(M.slice(D))[1])}catch{}return v.levels[_]===void 0&&(_=void 0),_}}function T(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E);return}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=p||u,v.getLevel=function(){return S},v.setLevel=function(_,M){if(typeof _=="string"&&v.levels[_.toUpperCase()]!==void 0&&(_=v.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=v.levels.SILENT){if(S=_,M!==!1&&w(_),c.call(v,_,m),typeof console===n&&_<v.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+_},v.setDefaultLevel=function(_){C=_,A()||v.setLevel(_,!1)},v.resetLevel=function(){v.setLevel(C,!1),T()},v.enableAll=function(_){v.setLevel(v.levels.TRACE,_)},v.disableAll=function(_){v.setLevel(v.levels.SILENT,_)};var x=A();x==null&&(x=C),v.setLevel(x,!1)}var h=new d,f={};h.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var p=f[C];return p||(p=f[C]=new d(C,h.getLevel(),h.methodFactory)),p};var g=typeof window!==n?window.log:void 0;return h.noConflict=function(){return typeof window!==n&&window.log===h&&(window.log=g),h},h.getLoggers=function(){return f},h.default=h,h})})(KT);var rC=KT.exports,Vv;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(Vv||(Vv={}));var Qi;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Qi||(Qi={}));let Be=rC.getLogger("livekit");Be.setDefaultLevel(Vv.info);function Yo(t){const e=rC.getLogger(t);return e.setDefaultLevel(Be.getLevel()),e}rC.getLogger("lk-e2ee");function Qn(t,e){if(!t)throw new Error(e)}const gV=34028234663852886e22,mV=-34028234663852886e22,vV=4294967295,yV=2147483647,CV=-2147483648;function Bh(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>yV||t<CV)throw new Error("invalid int 32: "+t)}function Gv(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>vV||t<0)throw new Error("invalid uint 32: "+t)}function JT(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>gV||t<mV))throw new Error("invalid float 32: "+t)}const YT=Symbol("@bufbuild/protobuf/enum-type");function IV(t){const e=t[YT];return Qn(e,"missing enum type on enum object"),e}function QT(t,e,n,r){t[YT]=qT(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function qT(t,e,n){const r=Object.create(null),i=Object.create(null),o=[];for(const s of e){const a=ex(s);o.push(a),r[s.name]=a,i[s.no]=a}return{typeName:t,values:o,findName(s){return r[s]},findNumber(s){return i[s]}}}function SV(t,e,n){const r={};for(const i of e){const o=ex(i);r[o.localName]=o.no,r[o.no]=o.localName}return QT(r,t,e),r}function ex(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class de{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function bV(t,e,n,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),s={[o]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(s.prototype,new de),Object.assign(s,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new s().fromBinary(a,c)},fromJson(a,c){return new s().fromJson(a,c)},fromJsonString(a,c){return new s().fromJsonString(a,c)},equals(a,c){return t.util.equals(s,a,c)}}),s}function wV(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makeMessageType(i,o,s){return bV(this,i,o,s)},makeEnum:SV,makeEnumType:qT,getEnumType:IV}}var Q;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(Q||(Q={}));var Ba;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Ba||(Ba={}));function AV(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Vg(t,e,n){for(let o=0;o<28;o=o+7){const s=t>>>o,a=!(!(s>>>7)&&e==0),c=(a?s|128:s)&255;if(n.push(c),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const s=e>>>o,a=!!(s>>>7),c=(a?s|128:s)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const Fh=4294967296;function xb(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function o(s,a){const c=Number(t.slice(s,a));i*=n,r=r*n+c,r>=Fh&&(i=i+(r/Fh|0),r=r%Fh)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?nx(r,i):iC(r,i)}function kV(t,e){let n=iC(t,e);const r=n.hi&2147483648;r&&(n=nx(n.lo,n.hi));const i=tx(n.lo,n.hi);return r?"-"+i:i}function tx(t,e){if({lo:t,hi:e}=EV(t,e),e<=2097151)return String(Fh*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let o=n+r*6777216+i*6710656,s=r+i*8147497,a=i*2;const c=1e7;return o>=c&&(s+=Math.floor(o/c),o%=c),s>=c&&(a+=Math.floor(s/c),s%=c),a.toString()+Rb(s)+Rb(o)}function EV(t,e){return{lo:t>>>0,hi:e>>>0}}function iC(t,e){return{lo:t|0,hi:e|0}}function nx(t,e){return e=~e,t?t=~t+1:e+=1,iC(t,e)}const Rb=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Pb(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function TV(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function xV(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof Tb!="object"||Tb.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<s)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>Qn(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>Qn(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),xb(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),xb(i)},dec(i,o){return kV(i,o)},uDec(i,o){return tx(i,o)}}}const _e=xV();var Mt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Mt||(Mt={}));class RV{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Gv(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Bh(e),Pb(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){JT(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Gv(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Bh(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Bh(e),e=(e<<1^e>>31)>>>0,Pb(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=_e.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=_e.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=_e.enc(e);return Vg(n.lo,n.hi,this.buf),this}sint64(e){let n=_e.enc(e),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return Vg(i,o,this.buf),this}uint64(e){let n=_e.uEnc(e);return Vg(n.lo,n.hi,this.buf),this}}class PV{constructor(e,n){this.varint64=AV,this.uint32=TV,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case Mt.Varint:for(;this.buf[this.pos++]&128;);break;case Mt.Bit64:this.pos+=4;case Mt.Bit32:this.pos+=4;break;case Mt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Mt.StartGroup:let i;for(;(i=this.tag()[1])!==Mt.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return _e.dec(...this.varint64())}uint64(){return _e.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,_e.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return _e.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return _e.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function Wv(t,e){return e instanceof de||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}Q.DOUBLE,Q.FLOAT,Q.INT64,Q.UINT64,Q.INT32,Q.UINT32,Q.BOOL,Q.STRING,Q.BYTES;function us(t,e,n){if(e===n)return!0;if(t==Q.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case Q.UINT64:case Q.FIXED64:case Q.INT64:case Q.SFIXED64:case Q.SINT64:return e==n}return!1}function Zv(t,e){switch(t){case Q.BOOL:return!1;case Q.UINT64:case Q.FIXED64:case Q.INT64:case Q.SFIXED64:case Q.SINT64:return e==0?_e.zero:"0";case Q.DOUBLE:case Q.FLOAT:return 0;case Q.BYTES:return new Uint8Array(0);case Q.STRING:return"";default:return 0}}function rx(t,e){const n=e===void 0;let r=Mt.Varint,i=e===0;switch(t){case Q.STRING:i=n||!e.length,r=Mt.LengthDelimited;break;case Q.BOOL:i=e===!1;break;case Q.DOUBLE:r=Mt.Bit64;break;case Q.FLOAT:r=Mt.Bit32;break;case Q.INT64:i=n||e==0;break;case Q.UINT64:i=n||e==0;break;case Q.FIXED64:i=n||e==0,r=Mt.Bit64;break;case Q.BYTES:i=n||!e.byteLength,r=Mt.LengthDelimited;break;case Q.FIXED32:r=Mt.Bit32;break;case Q.SFIXED32:r=Mt.Bit32;break;case Q.SFIXED64:i=n||e==0,r=Mt.Bit64;break;case Q.SINT64:i=n||e==0;break}const o=Q[t].toLowerCase();return[r,o,n||i]}const oc=Symbol("@bufbuild/protobuf/unknown-fields"),Nb={readUnknownFields:!0,readerFactory:t=>new PV(t)},_b={writeUnknownFields:!0,writerFactory:()=>new RV};function NV(t){return t?Object.assign(Object.assign({},Nb),t):Nb}function _V(t){return t?Object.assign(Object.assign({},_b),t):_b}function MV(){return{makeReadOptions:NV,makeWriteOptions:_V,listUnknownFields(t){var e;return(e=t[oc])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[oc]},writeUnknownFields(t,e){const r=t[oc];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[oc])||(i[oc]=[]),i[oc].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r){const i=t.getType(),o=n===void 0?e.len:e.pos+n;for(;e.pos<o;){const[s,a]=e.tag(),c=i.fields.find(s);if(!c){const h=e.skip(a);r.readUnknownFields&&this.onUnknownField(t,s,a,h);continue}let l=t,u=c.repeated,d=c.localName;switch(c.oneof&&(l=l[c.oneof.localName],l.case!=d&&delete l.value,l.case=d,d="value"),c.kind){case"scalar":case"enum":const h=c.kind=="enum"?Q.INT32:c.T;let f=Zf;if(c.kind=="scalar"&&c.L>0&&(f=DV),u){let p=l[d];if(a==Mt.LengthDelimited&&h!=Q.STRING&&h!=Q.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)p.push(f(e,h))}else p.push(f(e,h))}else l[d]=f(e,h);break;case"message":const g=c.T;u?l[d].push(Uh(e,new g,r)):l[d]instanceof de?Uh(e,l[d],r):(l[d]=Uh(e,new g,r),g.fieldWrapper&&!c.oneof&&!c.repeated&&(l[d]=g.fieldWrapper.unwrapField(l[d])));break;case"map":let[m,C]=OV(c,e,r);l[d][m]=C;break}}}}}function Uh(t,e,n){return e.getType().runtime.bin.readMessage(e,t,t.uint32(),n),e}function OV(t,e,n){const r=e.uint32(),i=e.pos+r;let o,s;for(;e.pos<i;){let[a]=e.tag();switch(a){case 1:o=Zf(e,t.K);break;case 2:switch(t.V.kind){case"scalar":s=Zf(e,t.V.T);break;case"enum":s=e.int32();break;case"message":s=Uh(e,new t.V.T,n);break}break}}if(o===void 0){let a=Zv(t.K,Ba.BIGINT);o=t.K==Q.BOOL?a.toString():a}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(t.V.kind){case"scalar":s=Zv(t.V.T,Ba.BIGINT);break;case"enum":s=0;break;case"message":s=new t.V.T;break}return[o,s]}function DV(t,e){const n=Zf(t,e);return typeof n=="bigint"?n.toString():n}function Zf(t,e){switch(e){case Q.STRING:return t.string();case Q.BOOL:return t.bool();case Q.DOUBLE:return t.double();case Q.FLOAT:return t.float();case Q.INT32:return t.int32();case Q.INT64:return t.int64();case Q.UINT64:return t.uint64();case Q.FIXED64:return t.fixed64();case Q.BYTES:return t.bytes();case Q.FIXED32:return t.fixed32();case Q.SFIXED32:return t.sfixed32();case Q.SFIXED64:return t.sfixed64();case Q.SINT64:return t.sint64();case Q.UINT32:return t.uint32();case Q.SINT32:return t.sint32()}}function LV(t,e,n,r,i){t.tag(n.no,Mt.LengthDelimited),t.fork();let o=r;switch(n.K){case Q.INT32:case Q.FIXED32:case Q.UINT32:case Q.SFIXED32:case Q.SINT32:o=Number.parseInt(r);break;case Q.BOOL:Qn(r=="true"||r=="false"),o=r=="true";break}switch(bu(t,n.K,1,o,!0),n.V.kind){case"scalar":bu(t,n.V.T,2,i,!0);break;case"enum":bu(t,Q.INT32,2,i,!0);break;case"message":jv(t,e,n.V.T,2,i);break}t.join()}function jv(t,e,n,r,i){if(i!==void 0){const o=Wv(n,i);t.tag(r,Mt.LengthDelimited).bytes(o.toBinary(e))}}function bu(t,e,n,r,i){let[o,s,a]=rx(e,r);(!a||i)&&t.tag(n,o)[s](r)}function BV(t,e,n,r){if(!r.length)return;t.tag(n,Mt.LengthDelimited).fork();let[,i]=rx(e);for(let o=0;o<r.length;o++)t[i](r[o]);t.join()}function FV(){return Object.assign(Object.assign({},MV()),{writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){let o,s=i.repeated,a=i.localName;if(i.oneof){const c=t[i.oneof.localName];if(c.case!==a)continue;o=c.value}else o=t[a];switch(i.kind){case"scalar":case"enum":let c=i.kind=="enum"?Q.INT32:i.T;if(s)if(i.packed)BV(e,c,i.no,o);else for(const l of o)bu(e,c,i.no,l,!0);else o!==void 0&&bu(e,c,i.no,o,!!i.oneof||i.opt);break;case"message":if(s)for(const l of o)jv(e,n,i.T,i.no,l);else jv(e,n,i.T,i.no,o);break;case"map":for(const[l,u]of Object.entries(o))LV(e,n,i,l,u);break}}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}let fo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Np=[];for(let t=0;t<fo.length;t++)Np[fo[t].charCodeAt(0)]=t;Np[45]=fo.indexOf("+");Np[95]=fo.indexOf("/");const ix={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,o,s=0;for(let a=0;a<t.length;a++){if(o=Np[t.charCodeAt(a)],o===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=o,i=1;break;case 1:n[r++]=s<<2|(o&48)>>4,s=o,i=2;break;case 2:n[r++]=(s&15)<<4|(o&60)>>2,s=o,i=3;break;case 3:n[r++]=(s&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=fo[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=fo[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=fo[i|r>>6],e+=fo[r&63],n=0;break}return n&&(e+=fo[i],e+="=",n==1&&(e+="=")),e}},Mb={ignoreUnknownFields:!1},Ob={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function UV(t){return t?Object.assign(Object.assign({},Mb),t):Mb}function VV(t){return t?Object.assign(Object.assign({},Ob),t):Ob}function GV(t){const e=t(WV,Db);return{makeReadOptions:UV,makeWriteOptions:VV,readMessage(n,r,i,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(this.debug(r)));o=o??new n;const s={};for(const[a,c]of Object.entries(r)){const l=n.fields.findJsonName(a);if(!l){if(!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(a,'" is unknown'));continue}let u=l.localName,d=o;if(l.oneof){if(c===null&&l.kind=="scalar")continue;const h=s[l.oneof.localName];if(h)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(h,'", "').concat(a,'"'));s[l.oneof.localName]=a,d=d[l.oneof.localName]={case:u},u="value"}if(l.repeated){if(c===null)continue;if(!Array.isArray(c))throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const h=d[u];for(const f of c){if(f===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(f)));let g;switch(l.kind){case"message":g=l.T.fromJson(f,i);break;case"enum":if(g=Gg(l.T,f,i.ignoreUnknownFields),g===void 0)continue;break;case"scalar":try{g=jl(l.T,f,l.L)}catch(m){let C="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(f));throw m instanceof Error&&m.message.length>0&&(C+=": ".concat(m.message)),new Error(C)}break}h.push(g)}}else if(l.kind=="map"){if(c===null)continue;if(Array.isArray(c)||typeof c!="object")throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const h=d[u];for(const[f,g]of Object.entries(c)){if(g===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: map value null"));let m;switch(l.V.kind){case"message":m=l.V.T.fromJson(g,i);break;case"enum":if(m=Gg(l.V.T,g,i.ignoreUnknownFields),m===void 0)continue;break;case"scalar":try{m=jl(l.V.T,g,Ba.BIGINT)}catch(C){let p="cannot decode map value for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(p+=": ".concat(C.message)),new Error(p)}break}try{h[jl(l.K,l.K==Q.BOOL?f=="true"?!0:f=="false"?!1:f:f,Ba.BIGINT).toString()]=m}catch(C){let p="cannot decode map key for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(p+=": ".concat(C.message)),new Error(p)}}}else switch(l.kind){case"message":const h=l.T;if(c===null&&h.typeName!="google.protobuf.Value"){if(l.oneof)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name,' from JSON: null is invalid for oneof field "').concat(a,'"'));continue}d[u]instanceof de?d[u].fromJson(c,i):(d[u]=h.fromJson(c,i),h.fieldWrapper&&!l.oneof&&(d[u]=h.fieldWrapper.unwrapField(d[u])));break;case"enum":const f=Gg(l.T,c,i.ignoreUnknownFields);f!==void 0&&(d[u]=f);break;case"scalar":try{d[u]=jl(l.T,c,l.L)}catch(g){let m="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw g instanceof Error&&g.message.length>0&&(m+=": ".concat(g.message)),new Error(m)}break}}return o},writeMessage(n,r){const i=n.getType(),o={};let s;try{for(const a of i.fields.byMember()){let c;if(a.kind=="oneof"){const l=n[a.localName];if(l.value===void 0)continue;if(s=a.findField(l.case),!s)throw"oneof case not found: "+l.case;c=e(s,l.value,r)}else s=a,c=e(s,n[s.localName],r);c!==void 0&&(o[r.useProtoFieldName?s.name:s.jsonName]=c)}}catch(a){const c=s?"cannot encode field ".concat(i.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return o},readScalar:jl,writeScalar:Db,debug:ox}}function ox(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function jl(t,e,n){switch(t){case Q.DOUBLE:case Q.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==Q.FLOAT&&JT(r),r;case Q.INT32:case Q.FIXED32:case Q.SFIXED32:case Q.SINT32:case Q.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return t==Q.UINT32?Gv(i):Bh(i),i;case Q.INT64:case Q.SFIXED64:case Q.SINT64:if(e===null)return _e.zero;if(typeof e!="number"&&typeof e!="string")break;const o=_e.parse(e);return n?o.toString():o;case Q.FIXED64:case Q.UINT64:if(e===null)return _e.zero;if(typeof e!="number"&&typeof e!="string")break;const s=_e.uParse(e);return n?s.toString():s;case Q.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case Q.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case Q.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return ix.dec(e)}throw new Error}function Gg(t,e,n){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r||n)return r==null?void 0:r.no;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(ox(e)))}function WV(t,e,n,r){var i;if(e===void 0)return e;if(e===0&&!n)return;if(r)return e;if(t.typeName=="google.protobuf.NullValue")return null;const o=t.findNumber(e);return(i=o==null?void 0:o.name)!==null&&i!==void 0?i:e}function Db(t,e,n){if(e!==void 0)switch(t){case Q.INT32:case Q.SFIXED32:case Q.SINT32:case Q.FIXED32:case Q.UINT32:return Qn(typeof e=="number"),e!=0||n?e:void 0;case Q.FLOAT:case Q.DOUBLE:return Qn(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||n?e:void 0;case Q.STRING:return Qn(typeof e=="string"),e.length>0||n?e:void 0;case Q.BOOL:return Qn(typeof e=="boolean"),e||n?e:void 0;case Q.UINT64:case Q.FIXED64:case Q.INT64:case Q.SFIXED64:case Q.SINT64:return Qn(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.toString(10):void 0;case Q.BYTES:return Qn(e instanceof Uint8Array),n||e.byteLength>0?ix.enc(e):void 0}}function ZV(){return GV((t,e)=>function(r,i,o){if(r.kind=="map"){const s={};switch(r.V.kind){case"scalar":for(const[c,l]of Object.entries(i)){const u=e(r.V.T,l,!0);Qn(u!==void 0),s[c.toString()]=u}break;case"message":for(const[c,l]of Object.entries(i))s[c.toString()]=l.toJson(o);break;case"enum":const a=r.V.T;for(const[c,l]of Object.entries(i)){Qn(l===void 0||typeof l=="number");const u=t(a,l,!0,o.enumAsInteger);Qn(u!==void 0),s[c.toString()]=u}break}return o.emitDefaultValues||Object.keys(s).length>0?s:void 0}else if(r.repeated){const s=[];switch(r.kind){case"scalar":for(let a=0;a<i.length;a++)s.push(e(r.T,i[a],!0));break;case"enum":for(let a=0;a<i.length;a++)s.push(t(r.T,i[a],!0,o.enumAsInteger));break;case"message":for(let a=0;a<i.length;a++)s.push(Wv(r.T,i[a]).toJson(o));break}return o.emitDefaultValues||s.length>0?s:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return t(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return i!==void 0?Wv(r.T,i).toJson(o):void 0}})}function jV(){return{setEnumType:QT,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,o=e,s=t;if(s[i]!==void 0)switch(r.kind){case"oneof":const a=s[i].case;if(a===void 0)continue;const c=r.findField(a);let l=s[i].value;c&&c.kind=="message"&&!(l instanceof c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===Q.BYTES&&(l=zl(l)),o[i]={case:a,value:l};break;case"scalar":case"enum":let u=s[i];r.T===Q.BYTES&&(u=r.repeated?u.map(zl):zl(u)),o[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===Q.BYTES)for(const[f,g]of Object.entries(s[i]))o[i][f]=zl(g);else Object.assign(o[i],s[i]);break;case"message":const h=r.V.T;for(const f of Object.keys(s[i])){let g=s[i][f];h.fieldWrapper||(g=new h(g)),o[i][f]=g}break}break;case"message":const d=r.T;if(r.repeated)o[i]=s[i].map(h=>h instanceof d?h:new d(h));else if(s[i]!==void 0){const h=s[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[i]=zl(h):o[i]=h:o[i]=h instanceof d?h:new d(h)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((s,a)=>r.T.equals(s,o[a]));case"scalar":return i.every((s,a)=>us(r.T,s,o[a]));case"enum":return i.every((s,a)=>us(Q.INT32,s,o[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return us(Q.INT32,i,o);case"scalar":return us(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const s=r.findField(i.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(i.value,o.value);case"enum":return us(Q.INT32,i.value,o.value);case"scalar":return us(s.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(s.kind));case"map":const a=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const c=r.V.T;return a.every(u=>c.equals(i[u],o[u]));case"enum":return a.every(u=>us(Q.INT32,i[u],o[u]));case"scalar":const l=r.V.T;return a.every(u=>us(l,i[u],o[u]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const o=t[i.localName];let s;if(i.repeated)s=o.map(oh);else if(i.kind=="map"){s=r[i.localName];for(const[a,c]of Object.entries(o))s[a]=oh(c)}else i.kind=="oneof"?s=i.findField(o.case)?{case:o.case,value:oh(o.value)}:{case:void 0}:s=oh(o);r[i.localName]=s}return n}}}function oh(t){if(t===void 0)return t;if(t instanceof de)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function zl(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class zV{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function sx(t,e){const n=ax(t);return e?n:YV(JV(n))}function HV(t){return sx(t,!1)}const XV=ax;function ax(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const $V=new Set(["constructor","toString","toJSON","valueOf"]),KV=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),cx=t=>"".concat(t,"$"),JV=t=>KV.has(t)?cx(t):t,YV=t=>$V.has(t)?cx(t):t;class QV{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=HV(e)}addField(e){Qn(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const R=wV("proto3",ZV(),FV(),Object.assign(Object.assign({},jV()),{newFieldList(t){return new zV(t,qV)},initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Zv(e.T,e.L);break}}}}));function qV(t){var e,n,r,i;const o=[];let s;for(const a of typeof t=="function"?t():t){const c=a;if(c.localName=sx(a.name,a.oneof!==void 0),c.jsonName=(e=a.jsonName)!==null&&e!==void 0?e:XV(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.L=(r=a.L)!==null&&r!==void 0?r:Ba.BIGINT),c.packed=(i=a.packed)!==null&&i!==void 0?i:a.kind=="enum"||a.kind=="scalar"&&a.T!=Q.BYTES&&a.T!=Q.STRING,a.oneof!==void 0){const l=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!s||s.name!=l)&&(s=new QV(l)),c.oneof=s,s.addField(c)}o.push(c)}return o}class en extends de{constructor(e){super(),this.seconds=_e.zero,this.nanos=0,R.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(R.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=_e.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return en.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new en({seconds:_e.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new en().fromBinary(e,n)}static fromJson(e,n){return new en().fromJson(e,n)}static fromJsonString(e,n){return new en().fromJsonString(e,n)}static equals(e,n){return R.util.equals(en,e,n)}}en.runtime=R;en.typeName="google.protobuf.Timestamp";en.fields=R.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var zv;(function(t){t[t.DEFAULT_AC=0]="DEFAULT_AC",t[t.OPUS=1]="OPUS",t[t.AAC=2]="AAC"})(zv||(zv={}));R.util.setEnumType(zv,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var Hv;(function(t){t[t.DEFAULT_VC=0]="DEFAULT_VC",t[t.H264_BASELINE=1]="H264_BASELINE",t[t.H264_MAIN=2]="H264_MAIN",t[t.H264_HIGH=3]="H264_HIGH",t[t.VP8=4]="VP8"})(Hv||(Hv={}));R.util.setEnumType(Hv,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var Xv;(function(t){t[t.IC_DEFAULT=0]="IC_DEFAULT",t[t.IC_JPEG=1]="IC_JPEG"})(Xv||(Xv={}));R.util.setEnumType(Xv,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var wn;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO",t[t.DATA=2]="DATA"})(wn||(wn={}));R.util.setEnumType(wn,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var Ot;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CAMERA=1]="CAMERA",t[t.MICROPHONE=2]="MICROPHONE",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(Ot||(Ot={}));R.util.setEnumType(Ot,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var zt;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF"})(zt||(zt={}));R.util.setEnumType(zt,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var mo;(function(t){t[t.POOR=0]="POOR",t[t.GOOD=1]="GOOD",t[t.EXCELLENT=2]="EXCELLENT",t[t.LOST=3]="LOST"})(mo||(mo={}));R.util.setEnumType(mo,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var Ci;(function(t){t[t.UNSET=0]="UNSET",t[t.DISABLED=1]="DISABLED",t[t.ENABLED=2]="ENABLED"})(Ci||(Ci={}));R.util.setEnumType(Ci,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var Wo;(function(t){t[t.UNKNOWN_REASON=0]="UNKNOWN_REASON",t[t.CLIENT_INITIATED=1]="CLIENT_INITIATED",t[t.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",t[t.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",t[t.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",t[t.ROOM_DELETED=5]="ROOM_DELETED",t[t.STATE_MISMATCH=6]="STATE_MISMATCH",t[t.JOIN_FAILURE=7]="JOIN_FAILURE"})(Wo||(Wo={}));R.util.setEnumType(Wo,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"}]);var lo;(function(t){t[t.RR_UNKNOWN=0]="RR_UNKNOWN",t[t.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",t[t.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",t[t.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",t[t.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(lo||(lo={}));R.util.setEnumType(lo,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var td;(function(t){t[t.SE_UNKNOWN=0]="SE_UNKNOWN",t[t.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",t[t.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(td||(td={}));R.util.setEnumType(td,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let Al=class au extends de{constructor(e){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=_e.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new au().fromBinary(e,n)}static fromJson(e,n){return new au().fromJson(e,n)}static fromJsonString(e,n){return new au().fromJsonString(e,n)}static equals(e,n){return R.util.equals(au,e,n)}};Al.runtime=R;Al.typeName="livekit.Room";Al.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:ai,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8}]);class ai extends de{constructor(e){super(),this.mime="",this.fmtpLine="",R.util.initPartial(e,this)}static fromBinary(e,n){return new ai().fromBinary(e,n)}static fromJson(e,n){return new ai().fromJson(e,n)}static fromJsonString(e,n){return new ai().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ai,e,n)}}ai.runtime=R;ai.typeName="livekit.Codec";ai.fields=R.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class Ts extends de{constructor(e){super(),this.enabled=!1,this.min=0,this.max=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ts().fromBinary(e,n)}static fromJson(e,n){return new Ts().fromJson(e,n)}static fromJsonString(e,n){return new Ts().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ts,e,n)}}Ts.runtime=R;Ts.typeName="livekit.PlayoutDelay";Ts.fields=R.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class vo extends de{constructor(e){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new vo().fromBinary(e,n)}static fromJson(e,n){return new vo().fromJson(e,n)}static fromJsonString(e,n){return new vo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(vo,e,n)}}vo.runtime=R;vo.typeName="livekit.ParticipantPermission";vo.fields=R.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:R.getEnumType(Ot),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class wr extends de{constructor(e){super(),this.sid="",this.identity="",this.state=Fa.JOINING,this.tracks=[],this.metadata="",this.joinedAt=_e.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new wr().fromBinary(e,n)}static fromJson(e,n){return new wr().fromJson(e,n)}static fromJsonString(e,n){return new wr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(wr,e,n)}}wr.runtime=R;wr.typeName="livekit.ParticipantInfo";wr.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(Fa)},{no:4,name:"tracks",kind:"message",T:er,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:vo},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8}]);var Fa;(function(t){t[t.JOINING=0]="JOINING",t[t.JOINED=1]="JOINED",t[t.ACTIVE=2]="ACTIVE",t[t.DISCONNECTED=3]="DISCONNECTED"})(Fa||(Fa={}));R.util.setEnumType(Fa,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);class xs extends de{constructor(e){super(),R.util.initPartial(e,this)}static fromBinary(e,n){return new xs().fromBinary(e,n)}static fromJson(e,n){return new xs().fromJson(e,n)}static fromJsonString(e,n){return new xs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(xs,e,n)}}xs.runtime=R;xs.typeName="livekit.Encryption";xs.fields=R.util.newFieldList(()=>[]);var an;(function(t){t[t.NONE=0]="NONE",t[t.GCM=1]="GCM",t[t.CUSTOM=2]="CUSTOM"})(an||(an={}));R.util.setEnumType(an,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class yo extends de{constructor(e){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new yo().fromBinary(e,n)}static fromJson(e,n){return new yo().fromJson(e,n)}static fromJsonString(e,n){return new yo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(yo,e,n)}}yo.runtime=R;yo.typeName="livekit.SimulcastCodecInfo";yo.fields=R.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Ln,repeated:!0}]);class er extends de{constructor(e){super(),this.sid="",this.type=wn.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=Ot.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=an.NONE,this.stream="",R.util.initPartial(e,this)}static fromBinary(e,n){return new er().fromBinary(e,n)}static fromJson(e,n){return new er().fromJson(e,n)}static fromJsonString(e,n){return new er().fromJsonString(e,n)}static equals(e,n){return R.util.equals(er,e,n)}}er.runtime=R;er.typeName="livekit.TrackInfo";er.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:R.getEnumType(wn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:R.getEnumType(Ot)},{no:10,name:"layers",kind:"message",T:Ln,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:yo,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:R.getEnumType(an)},{no:17,name:"stream",kind:"scalar",T:9}]);class Ln extends de{constructor(e){super(),this.quality=zt.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ln().fromBinary(e,n)}static fromJson(e,n){return new Ln().fromJson(e,n)}static fromJsonString(e,n){return new Ln().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ln,e,n)}}Ln.runtime=R;Ln.typeName="livekit.VideoLayer";Ln.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(zt)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class _i extends de{constructor(e){super(),this.kind=Gt.RELIABLE,this.value={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new _i().fromBinary(e,n)}static fromJson(e,n){return new _i().fromJson(e,n)}static fromJsonString(e,n){return new _i().fromJsonString(e,n)}static equals(e,n){return R.util.equals(_i,e,n)}}_i.runtime=R;_i.typeName="livekit.DataPacket";_i.fields=R.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:R.getEnumType(Gt)},{no:2,name:"user",kind:"message",T:Oi,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Co,oneof:"value"}]);var Gt;(function(t){t[t.RELIABLE=0]="RELIABLE",t[t.LOSSY=1]="LOSSY"})(Gt||(Gt={}));R.util.setEnumType(Gt,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class Co extends de{constructor(e){super(),this.speakers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Co().fromBinary(e,n)}static fromJson(e,n){return new Co().fromJson(e,n)}static fromJsonString(e,n){return new Co().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Co,e,n)}}Co.runtime=R;Co.typeName="livekit.ActiveSpeakerUpdate";Co.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Mi,repeated:!0}]);class Mi extends de{constructor(e){super(),this.sid="",this.level=0,this.active=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Mi().fromBinary(e,n)}static fromJson(e,n){return new Mi().fromJson(e,n)}static fromJsonString(e,n){return new Mi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Mi,e,n)}}Mi.runtime=R;Mi.typeName="livekit.SpeakerInfo";Mi.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class Oi extends de{constructor(e){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Oi().fromBinary(e,n)}static fromJson(e,n){return new Oi().fromJson(e,n)}static fromJsonString(e,n){return new Oi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Oi,e,n)}}Oi.runtime=R;Oi.typeName="livekit.UserPacket";Oi.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class Di extends de{constructor(e){super(),this.participantSid="",this.trackSids=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Di().fromBinary(e,n)}static fromJson(e,n){return new Di().fromJson(e,n)}static fromJsonString(e,n){return new Di().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Di,e,n)}}Di.runtime=R;Di.typeName="livekit.ParticipantTracks";Di.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class Io extends de{constructor(e){super(),this.edition=al.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Io().fromBinary(e,n)}static fromJson(e,n){return new Io().fromJson(e,n)}static fromJsonString(e,n){return new Io().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Io,e,n)}}Io.runtime=R;Io.typeName="livekit.ServerInfo";Io.fields=R.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:R.getEnumType(al)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var al;(function(t){t[t.Standard=0]="Standard",t[t.Cloud=1]="Cloud"})(al||(al={}));R.util.setEnumType(al,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class So extends de{constructor(e){super(),this.sdk=cl.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",R.util.initPartial(e,this)}static fromBinary(e,n){return new So().fromBinary(e,n)}static fromJson(e,n){return new So().fromJson(e,n)}static fromJsonString(e,n){return new So().fromJsonString(e,n)}static equals(e,n){return R.util.equals(So,e,n)}}So.runtime=R;So.typeName="livekit.ClientInfo";So.fields=R.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:R.getEnumType(cl)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var cl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JS=1]="JS",t[t.SWIFT=2]="SWIFT",t[t.ANDROID=3]="ANDROID",t[t.FLUTTER=4]="FLUTTER",t[t.GO=5]="GO",t[t.UNITY=6]="UNITY",t[t.REACT_NATIVE=7]="REACT_NATIVE",t[t.RUST=8]="RUST",t[t.PYTHON=9]="PYTHON",t[t.CPP=10]="CPP"})(cl||(cl={}));R.util.setEnumType(cl,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class Li extends de{constructor(e){super(),this.resumeConnection=Ci.UNSET,this.forceRelay=Ci.UNSET,R.util.initPartial(e,this)}static fromBinary(e,n){return new Li().fromBinary(e,n)}static fromJson(e,n){return new Li().fromJson(e,n)}static fromJsonString(e,n){return new Li().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Li,e,n)}}Li.runtime=R;Li.typeName="livekit.ClientConfiguration";Li.fields=R.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:Bi},{no:2,name:"screen",kind:"message",T:Bi},{no:3,name:"resume_connection",kind:"enum",T:R.getEnumType(Ci)},{no:4,name:"disabled_codecs",kind:"message",T:bo},{no:5,name:"force_relay",kind:"enum",T:R.getEnumType(Ci)}]);class Bi extends de{constructor(e){super(),this.hardwareEncoder=Ci.UNSET,R.util.initPartial(e,this)}static fromBinary(e,n){return new Bi().fromBinary(e,n)}static fromJson(e,n){return new Bi().fromJson(e,n)}static fromJsonString(e,n){return new Bi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Bi,e,n)}}Bi.runtime=R;Bi.typeName="livekit.VideoConfiguration";Bi.fields=R.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:R.getEnumType(Ci)}]);class bo extends de{constructor(e){super(),this.codecs=[],this.publish=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new bo().fromBinary(e,n)}static fromJson(e,n){return new bo().fromJson(e,n)}static fromJsonString(e,n){return new bo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(bo,e,n)}}bo.runtime=R;bo.typeName="livekit.DisabledCodecs";bo.fields=R.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:ai,repeated:!0},{no:2,name:"publish",kind:"message",T:ai,repeated:!0}]);class Fi extends de{constructor(e){super(),this.duration=0,this.startTimestamp=_e.zero,this.endTimestamp=_e.zero,this.rtpClockTicks=_e.zero,this.driftSamples=_e.zero,this.driftMs=0,this.clockRate=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Fi().fromBinary(e,n)}static fromJson(e,n){return new Fi().fromJson(e,n)}static fromJsonString(e,n){return new Fi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Fi,e,n)}}Fi.runtime=R;Fi.typeName="livekit.RTPDrift";Fi.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:en},{no:2,name:"end_time",kind:"message",T:en},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class Rs extends de{constructor(e){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=_e.zero,this.headerBytes=_e.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=_e.zero,this.headerBytesDuplicate=_e.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=_e.zero,this.headerBytesPadding=_e.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Rs().fromBinary(e,n)}static fromJson(e,n){return new Rs().fromJson(e,n)}static fromJsonString(e,n){return new Rs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Rs,e,n)}}Rs.runtime=R;Rs.typeName="livekit.RTPStats";Rs.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:en},{no:2,name:"end_time",kind:"message",T:en},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:en},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:en},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:en},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:en},{no:44,name:"packet_drift",kind:"message",T:Fi},{no:45,name:"report_drift",kind:"message",T:Fi}]);class Ps extends de{constructor(e){super(),this.unixMicro=_e.zero,this.ticks=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ps().fromBinary(e,n)}static fromJson(e,n){return new Ps().fromJson(e,n)}static fromJsonString(e,n){return new Ps().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ps,e,n)}}Ps.runtime=R;Ps.typeName="livekit.TimedVersion";Ps.fields=R.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const Hl=7e3,eG=[0,300,2*2*300,3*3*300,4*4*300,Hl,Hl,Hl,Hl,Hl];class tG{constructor(e){this._retryDelays=e!==void 0?[...e]:eG}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function B(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function Lb(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function cc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Lb=="function"?Lb(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var oC={exports:{}},Fc=typeof Reflect=="object"?Reflect:null,Bb=Fc&&typeof Fc.apply=="function"?Fc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Vh;Fc&&typeof Fc.ownKeys=="function"?Vh=Fc.ownKeys:Object.getOwnPropertySymbols?Vh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Vh=function(e){return Object.getOwnPropertyNames(e)};function nG(t){console&&console.warn&&console.warn(t)}var lx=Number.isNaN||function(e){return e!==e};function qe(){qe.init.call(this)}oC.exports=qe;oC.exports.once=sG;qe.EventEmitter=qe;qe.prototype._events=void 0;qe.prototype._eventsCount=0;qe.prototype._maxListeners=void 0;var Fb=10;function _p(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(qe,"defaultMaxListeners",{enumerable:!0,get:function(){return Fb},set:function(t){if(typeof t!="number"||t<0||lx(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Fb=t}});qe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};qe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||lx(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function ux(t){return t._maxListeners===void 0?qe.defaultMaxListeners:t._maxListeners}qe.prototype.getMaxListeners=function(){return ux(this)};qe.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")Bb(c,this,n);else for(var l=c.length,u=gx(c,l),r=0;r<l;++r)Bb(u[r],this,n);return!0};function dx(t,e,n,r){var i,o,s;if(_p(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=ux(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,nG(a)}return t}qe.prototype.addListener=function(e,n){return dx(this,e,n,!1)};qe.prototype.on=qe.prototype.addListener;qe.prototype.prependListener=function(e,n){return dx(this,e,n,!0)};function rG(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function hx(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=rG.bind(r);return i.listener=n,r.wrapFn=i,i}qe.prototype.once=function(e,n){return _p(n),this.on(e,hx(this,e,n)),this};qe.prototype.prependOnceListener=function(e,n){return _p(n),this.prependListener(e,hx(this,e,n)),this};qe.prototype.removeListener=function(e,n){var r,i,o,s,a;if(_p(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():iG(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};qe.prototype.off=qe.prototype.removeListener;qe.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function fx(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?oG(i):gx(i,i.length)}qe.prototype.listeners=function(e){return fx(this,e,!0)};qe.prototype.rawListeners=function(e){return fx(this,e,!1)};qe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):px.call(t,e)};qe.prototype.listenerCount=px;function px(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}qe.prototype.eventNames=function(){return this._eventsCount>0?Vh(this._events):[]};function gx(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function iG(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function oG(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function sG(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}mx(t,e,o,{once:!0}),e!=="error"&&aG(t,i,{once:!0})})}function aG(t,e,n){typeof t.on=="function"&&mx(t,"error",e,n)}function mx(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var io=oC.exports;let vx=!0,yx=!0;function Gh(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Ja(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[s,c])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(a))return o.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function cG(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(vx=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function lG(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(yx=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Cx(){if(typeof window=="object"){if(vx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function sC(t,e){yx&&console.warn(t+" is deprecated, please use "+e+" instead.")}function uG(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Gh(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=Gh(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Gh(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Ub(t){return Object.prototype.toString.call(t)==="[object Object]"}function Ix(t){return Ub(t)?Object.keys(t).reduce(function(e,n){const r=Ub(t[n]),i=r?Ix(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function $v(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?$v(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{$v(t,t.get(i),n)})}))}function Vb(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&o.push(s)}),o.forEach(s=>{t.forEach(a=>{a.type===r&&a.trackId===s.id&&$v(t,a,i)})}),i}const Gb=Cx;function Sx(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,f){return h?h+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(u.ideal!==void 0){c.optional=c.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",l)]=u.ideal,c.optional.push(h),h={},h[d("max",l)]=u.ideal,c.optional.push(h)):(h[d("",l)]=u.ideal,c.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(h,l)]=u[h])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(g=>g.kind==="videoinput");let f=h.find(g=>d.some(m=>g.label.toLowerCase().includes(m)));return!f&&h.length&&d.includes("back")&&(f=h[h.length-1]),f&&(a.video.deviceId=l.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=r(a.video),Gb("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Gb("chrome: "+JSON.stringify(a)),c(a)},o=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function dG(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),t.navigator.mediaDevices.getUserMedia(r)})}}}function bx(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function wx(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ja(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Ax(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(c=>c.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function kx(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const s=function(c){const l={};return c.result().forEach(d=>{const h={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(f=>{h[f]=d.stat(f)}),l[h.id]=h}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){const c=function(l){i(a(s(l)))};return e.apply(this,[c,r])}return new Promise((c,l)=>{e.apply(this,[function(u){c(a(s(u)))},l])}).then(i,o)}}function Ex(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>Vb(s,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Ja(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Vb(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Tx(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[s.id]=[s].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(s);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function xx(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Tx(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(f=>f.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const g=this._streams[d.id];if(g)g.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new t.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const f=l._reverseStreams[h],g=l._streams[f.id];d=d.replace(new RegExp(g.id,"g"),f.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const f=l._reverseStreams[h],g=l._streams[f.id];d=d.replace(new RegExp(f.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[g=>{const m=o(this,g);h[0].apply(null,[m])},g=>{h[1]&&h[1].apply(null,g)},arguments[2]]):u.apply(this,arguments).then(g=>o(this,g))}};t.RTCPeerConnection.prototype[l]=d[l]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:o(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(m=>u.track===m)&&(h=this._streams[f])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Kv(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function Rx(t,e){Ja(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var Wb=Object.freeze({__proto__:null,fixNegotiationNeeded:Rx,shimAddTrackRemoveTrack:xx,shimAddTrackRemoveTrackWithNative:Tx,shimGetDisplayMedia:dG,shimGetSendersWithDtmf:Ax,shimGetStats:kx,shimGetUserMedia:Sx,shimMediaStream:bx,shimOnTrack:wx,shimPeerConnection:Kv,shimSenderReceiverGetStats:Ex});function Px(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){sC("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function hG(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function Nx(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Jv(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(c=>{if(e.version<53&&!s)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(s,a)}}function _x(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function Mx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Ja(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Ox(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){sC("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Dx(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Lx(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function Bx(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function Fx(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Ux(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var Zb=Object.freeze({__proto__:null,shimAddTransceiver:Lx,shimCreateAnswer:Ux,shimCreateOffer:Fx,shimGetDisplayMedia:hG,shimGetParameters:Bx,shimGetUserMedia:Px,shimOnTrack:Nx,shimPeerConnection:Jv,shimRTCDataChannel:Dx,shimReceiverGetStats:Mx,shimRemoveStream:Ox,shimSenderGetStats:_x});function Vx(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function Gx(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function Wx(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function Zx(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(jx(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function jx(t){return t&&t.video!==void 0?Object.assign({},t,{video:Ix(t.video)}):t}function zx(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];a.urls===void 0&&a.url?(sC("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function Hx(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Xx(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function $x(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var jb=Object.freeze({__proto__:null,shimAudioContext:$x,shimCallbacksAPI:Wx,shimConstraints:jx,shimCreateOfferLegacy:Xx,shimGetUserMedia:Zx,shimLocalStreamsAPI:Vx,shimRTCIceServerUrls:zx,shimRemoteStreamsAPI:Gx,shimTrackEventTransceiver:Hx}),Kx={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let a=3;a<o.length;a++){const c=o[a],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const s=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{s.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(g=>parseInt(g,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let f={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&l&&(f.rtx={ssrc:l}),r.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(h=>{h.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(Kx);var Jx=Kx.exports,Uc=pV(Jx),fG=hV({__proto__:null,default:Uc},[Jx]);function Wh(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),o=Uc.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Ja(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Yv(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Ja(t,"icecandidate",e=>{if(e.candidate){const n=Uc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Zh(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=Uc.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=Uc.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},o=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=Uc.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=o(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return s.apply(this,arguments)}}function jh(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Ja(t,"datachannel",r=>(e(r.channel,r.target),r))}function Qv(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function qv(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function zh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Hh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var pG=Object.freeze({__proto__:null,removeExtmapAllowMixed:qv,shimAddIceCandidateNullOrEmpty:zh,shimConnectionState:Qv,shimMaxMessageSize:Zh,shimParameterlessSetLocalDescription:Hh,shimRTCIceCandidate:Wh,shimRTCIceCandidateRelayProtocol:Yv,shimSendThrowTypeError:jh});function gG(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Cx,r=uG(t),i={browserDetails:r,commonShim:pG,extractVersion:Gh,disableLog:cG,disableWarnings:lG,sdp:fG};switch(r.browser){case"chrome":if(!Wb||!Kv||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Wb,zh(t,r),Hh(t),Sx(t,r),bx(t),Kv(t,r),wx(t),xx(t,r),Ax(t),kx(t),Ex(t),Rx(t,r),Wh(t),Yv(t),Qv(t),Zh(t,r),jh(t),qv(t,r);break;case"firefox":if(!Zb||!Jv||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Zb,zh(t,r),Hh(t),Px(t,r),Jv(t,r),Nx(t),Ox(t),_x(t),Mx(t),Dx(t),Lx(t),Bx(t),Fx(t),Ux(t),Wh(t),Qv(t),Zh(t,r),jh(t);break;case"safari":if(!jb||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=jb,zh(t,r),Hh(t),zx(t),Xx(t),Wx(t),Vx(t),Gx(t),Hx(t),Zx(t),$x(t),Wh(t),Yv(t),Zh(t,r),jh(t),qv(t,r);break;default:n("Unsupported browser!");break}return i}gG({window:typeof window>"u"?void 0:window});const mG=10,sh="lk_e2ee",vG="LKFrameEncryptionKey",yG={sharedKey:!1,ratchetSalt:vG,ratchetWindowSize:8,failureTolerance:mG};var Ws;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Ws||(Ws={}));var zb;(function(t){t.KeyRatcheted="keyRatcheted"})(zb||(zb={}));var Ns;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Ns||(Ns={}));var Hb;(function(t){t.Error="cryptorError"})(Hb||(Hb={}));function CG(){return IG()||e0()}function e0(){return typeof window.RTCRtpScriptTransform<"u"}function IG(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class P7 extends io.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{Be.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},yG),e),this.on(Ws.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Ws.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Ws.RatchetRequest,e,n)}}class kl extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}class lt extends kl{constructor(e,n,r){super(1,e),this.status=r,this.reason=n}}class aC extends kl{constructor(e){super(21,e??"device is unsupported")}}class Ri extends kl{constructor(e){super(20,e??"track is invalid")}}class SG extends kl{constructor(e){super(10,e??"unsupported server")}}class Vt extends kl{constructor(e){super(12,e??"unexpected connection state")}}class t0 extends kl{constructor(e){super(13,e??"unable to negotiate")}}var nd;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(nd||(nd={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(nd||(nd={}));var ee;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.StateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged"})(ee||(ee={}));var re;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded"})(re||(re={}));var fe;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished"})(fe||(fe={}));var le;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed"})(le||(le={}));function cC(t,e,n){var r,i,o;e===void 0&&(e=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var f=Date.now()-l;if(f+e>=c)return c-f}return e}var h=function(){var f=[].slice.call(arguments),g=this;return new Promise(function(m,C){var p=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,l=Date.now(),!s){var S=t.apply(g,f);a&&a(S),u.forEach(function(E){return(0,E.resolve)(S)}),u=[]}},d()),p){var v=t.apply(g,f);return a&&a(v),m(v)}u.push({resolve:m,reject:C})})};return h.cancel=function(f){o!==void 0&&clearTimeout(o),u.forEach(function(g){return(0,g.reject)(f)}),u=[]},h}const bG=/version\/(\d+(\.?_?\d+)+)/i;let Wg;function Qo(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof t>"u"&&typeof navigator>"u")return;const n=(t??navigator.userAgent).toLowerCase();if(Wg===void 0||e){const r=wG.find(i=>{let{test:o}=i;return o.test(n)});Wg=r==null?void 0:r.describe(n)}return Wg}const wG=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Zg(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Zg(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Zg(bG,t),os:t.includes("mobile/")?"iOS":"macOS"}}}];function Zg(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}var AG="1.15.13";const kG=AG,EG=11;class ln{}ln.setTimeout=function(){return setTimeout(...arguments)};ln.setInterval=function(){return setInterval(...arguments)};ln.clearTimeout=function(){return clearTimeout(...arguments)};ln.clearInterval=function(){return clearInterval(...arguments)};class Qe{constructor(e,n,r,i,o){this.width=e,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const TG=["vp8","h264"],Yx=["vp8","h264","vp9","av1"];function xG(t){return!!TG.find(e=>e===t)}var jf;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:2e4},t.music={maxBitrate:32e3},t.musicStereo={maxBitrate:48e3},t.musicHighQuality={maxBitrate:64e3},t.musicHighQualityStereo={maxBitrate:96e3}})(jf||(jf={}));const rd={h90:new Qe(160,90,9e4,20),h180:new Qe(320,180,16e4,20),h216:new Qe(384,216,18e4,20),h360:new Qe(640,360,45e4,20),h540:new Qe(960,540,8e5,25),h720:new Qe(1280,720,17e5,30),h1080:new Qe(1920,1080,3e6,30),h1440:new Qe(2560,1440,5e6,30),h2160:new Qe(3840,2160,8e6,30)},n0={h120:new Qe(160,120,7e4,20),h180:new Qe(240,180,125e3,20),h240:new Qe(320,240,14e4,20),h360:new Qe(480,360,33e4,20),h480:new Qe(640,480,5e5,20),h540:new Qe(720,540,6e5,25),h720:new Qe(960,720,13e5,30),h1080:new Qe(1440,1080,23e5,30),h1440:new Qe(1920,1440,38e5,30)},lC={h360fps3:new Qe(640,360,2e5,3,"medium"),h360fps15:new Qe(640,360,4e5,15,"medium"),h720fps5:new Qe(1280,720,8e5,5,"medium"),h720fps15:new Qe(1280,720,15e5,15,"medium"),h720fps30:new Qe(1280,720,2e6,30,"medium"),h1080fps15:new Qe(1920,1080,25e5,15,"medium"),h1080fps30:new Qe(1920,1080,5e6,30,"medium"),original:new Qe(0,0,7e6,30,"medium")};var An;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(An||(An={}));R.util.setEnumType(An,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var Ua;(function(t){t[t.ACTIVE=0]="ACTIVE",t[t.PAUSED=1]="PAUSED"})(Ua||(Ua={}));R.util.setEnumType(Ua,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var zf;(function(t){t[t.UDP=0]="UDP",t[t.TCP=1]="TCP",t[t.TLS=2]="TLS"})(zf||(zf={}));R.util.setEnumType(zf,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class wo extends de{constructor(e){super(),this.message={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new wo().fromBinary(e,n)}static fromJson(e,n){return new wo().fromJson(e,n)}static fromJsonString(e,n){return new wo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(wo,e,n)}}wo.runtime=R;wo.typeName="livekit.SignalRequest";wo.fields=R.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:Bn,oneof:"message"},{no:2,name:"answer",kind:"message",T:Bn,oneof:"message"},{no:3,name:"trickle",kind:"message",T:ui,oneof:"message"},{no:4,name:"add_track",kind:"message",T:li,oneof:"message"},{no:5,name:"mute",kind:"message",T:di,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Br,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Vi,oneof:"message"},{no:8,name:"leave",kind:"message",T:Fr,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Gi,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:zi,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Hi,oneof:"message"},{no:13,name:"simulate",kind:"message",T:sn,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:Wi,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:$i,oneof:"message"}]);class Ui extends de{constructor(e){super(),this.message={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new Ui().fromBinary(e,n)}static fromJson(e,n){return new Ui().fromJson(e,n)}static fromJsonString(e,n){return new Ui().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ui,e,n)}}Ui.runtime=R;Ui.typeName="livekit.SignalResponse";Ui.fields=R.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:Ao,oneof:"message"},{no:2,name:"answer",kind:"message",T:Bn,oneof:"message"},{no:3,name:"offer",kind:"message",T:Bn,oneof:"message"},{no:4,name:"trickle",kind:"message",T:ui,oneof:"message"},{no:5,name:"update",kind:"message",T:To,oneof:"message"},{no:6,name:"track_published",kind:"message",T:hi,oneof:"message"},{no:8,name:"leave",kind:"message",T:Fr,oneof:"message"},{no:9,name:"mute",kind:"message",T:di,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:xo,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Ro,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:No,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Mo,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Do,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Lo,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Eo,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ko,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Bo,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Uo,oneof:"message"}]);class ci extends de{constructor(e){super(),this.codec="",this.cid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new ci().fromBinary(e,n)}static fromJson(e,n){return new ci().fromJson(e,n)}static fromJsonString(e,n){return new ci().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ci,e,n)}}ci.runtime=R;ci.typeName="livekit.SimulcastCodec";ci.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class li extends de{constructor(e){super(),this.cid="",this.name="",this.type=wn.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=Ot.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=an.NONE,this.stream="",R.util.initPartial(e,this)}static fromBinary(e,n){return new li().fromBinary(e,n)}static fromJson(e,n){return new li().fromJson(e,n)}static fromJsonString(e,n){return new li().fromJsonString(e,n)}static equals(e,n){return R.util.equals(li,e,n)}}li.runtime=R;li.typeName="livekit.AddTrackRequest";li.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:R.getEnumType(wn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:R.getEnumType(Ot)},{no:9,name:"layers",kind:"message",T:Ln,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:ci,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:R.getEnumType(an)},{no:15,name:"stream",kind:"scalar",T:9}]);class ui extends de{constructor(e){super(),this.candidateInit="",this.target=An.PUBLISHER,R.util.initPartial(e,this)}static fromBinary(e,n){return new ui().fromBinary(e,n)}static fromJson(e,n){return new ui().fromJson(e,n)}static fromJsonString(e,n){return new ui().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ui,e,n)}}ui.runtime=R;ui.typeName="livekit.TrickleRequest";ui.fields=R.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:R.getEnumType(An)}]);class di extends de{constructor(e){super(),this.sid="",this.muted=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new di().fromBinary(e,n)}static fromJson(e,n){return new di().fromJson(e,n)}static fromJsonString(e,n){return new di().fromJsonString(e,n)}static equals(e,n){return R.util.equals(di,e,n)}}di.runtime=R;di.typeName="livekit.MuteTrackRequest";di.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class Ao extends de{constructor(e){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),R.util.initPartial(e,this)}static fromBinary(e,n){return new Ao().fromBinary(e,n)}static fromJson(e,n){return new Ao().fromJson(e,n)}static fromJsonString(e,n){return new Ao().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ao,e,n)}}Ao.runtime=R;Ao.typeName="livekit.JoinResponse";Ao.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Al},{no:2,name:"participant",kind:"message",T:wr},{no:3,name:"other_participants",kind:"message",T:wr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Zi,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:Li},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Io},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class ko extends de{constructor(e){super(),this.iceServers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new ko().fromBinary(e,n)}static fromJson(e,n){return new ko().fromJson(e,n)}static fromJsonString(e,n){return new ko().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ko,e,n)}}ko.runtime=R;ko.typeName="livekit.ReconnectResponse";ko.fields=R.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:Zi,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:Li}]);class hi extends de{constructor(e){super(),this.cid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new hi().fromBinary(e,n)}static fromJson(e,n){return new hi().fromJson(e,n)}static fromJsonString(e,n){return new hi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(hi,e,n)}}hi.runtime=R;hi.typeName="livekit.TrackPublishedResponse";hi.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:er}]);class Eo extends de{constructor(e){super(),this.trackSid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Eo().fromBinary(e,n)}static fromJson(e,n){return new Eo().fromJson(e,n)}static fromJsonString(e,n){return new Eo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Eo,e,n)}}Eo.runtime=R;Eo.typeName="livekit.TrackUnpublishedResponse";Eo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class Bn extends de{constructor(e){super(),this.type="",this.sdp="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Bn().fromBinary(e,n)}static fromJson(e,n){return new Bn().fromJson(e,n)}static fromJsonString(e,n){return new Bn().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Bn,e,n)}}Bn.runtime=R;Bn.typeName="livekit.SessionDescription";Bn.fields=R.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class To extends de{constructor(e){super(),this.participants=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new To().fromBinary(e,n)}static fromJson(e,n){return new To().fromJson(e,n)}static fromJsonString(e,n){return new To().fromJsonString(e,n)}static equals(e,n){return R.util.equals(To,e,n)}}To.runtime=R;To.typeName="livekit.ParticipantUpdate";To.fields=R.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:wr,repeated:!0}]);class Br extends de{constructor(e){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Br().fromBinary(e,n)}static fromJson(e,n){return new Br().fromJson(e,n)}static fromJsonString(e,n){return new Br().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Br,e,n)}}Br.runtime=R;Br.typeName="livekit.UpdateSubscription";Br.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Di,repeated:!0}]);class Vi extends de{constructor(e){super(),this.trackSids=[],this.disabled=!1,this.quality=zt.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Vi().fromBinary(e,n)}static fromJson(e,n){return new Vi().fromJson(e,n)}static fromJsonString(e,n){return new Vi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Vi,e,n)}}Vi.runtime=R;Vi.typeName="livekit.UpdateTrackSettings";Vi.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:R.getEnumType(zt)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class Fr extends de{constructor(e){super(),this.canReconnect=!1,this.reason=Wo.UNKNOWN_REASON,R.util.initPartial(e,this)}static fromBinary(e,n){return new Fr().fromBinary(e,n)}static fromJson(e,n){return new Fr().fromJson(e,n)}static fromJsonString(e,n){return new Fr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Fr,e,n)}}Fr.runtime=R;Fr.typeName="livekit.LeaveRequest";Fr.fields=R.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:R.getEnumType(Wo)}]);class Gi extends de{constructor(e){super(),this.trackSid="",this.layers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Gi().fromBinary(e,n)}static fromJson(e,n){return new Gi().fromJson(e,n)}static fromJsonString(e,n){return new Gi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Gi,e,n)}}Gi.runtime=R;Gi.typeName="livekit.UpdateVideoLayers";Gi.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Ln,repeated:!0}]);class Wi extends de{constructor(e){super(),this.metadata="",this.name="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Wi().fromBinary(e,n)}static fromJson(e,n){return new Wi().fromJson(e,n)}static fromJsonString(e,n){return new Wi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Wi,e,n)}}Wi.runtime=R;Wi.typeName="livekit.UpdateParticipantMetadata";Wi.fields=R.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class Zi extends de{constructor(e){super(),this.urls=[],this.username="",this.credential="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Zi().fromBinary(e,n)}static fromJson(e,n){return new Zi().fromJson(e,n)}static fromJsonString(e,n){return new Zi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Zi,e,n)}}Zi.runtime=R;Zi.typeName="livekit.ICEServer";Zi.fields=R.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class xo extends de{constructor(e){super(),this.speakers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new xo().fromBinary(e,n)}static fromJson(e,n){return new xo().fromJson(e,n)}static fromJsonString(e,n){return new xo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(xo,e,n)}}xo.runtime=R;xo.typeName="livekit.SpeakersChanged";xo.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Mi,repeated:!0}]);class Ro extends de{constructor(e){super(),R.util.initPartial(e,this)}static fromBinary(e,n){return new Ro().fromBinary(e,n)}static fromJson(e,n){return new Ro().fromJson(e,n)}static fromJsonString(e,n){return new Ro().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ro,e,n)}}Ro.runtime=R;Ro.typeName="livekit.RoomUpdate";Ro.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Al}]);class Po extends de{constructor(e){super(),this.participantSid="",this.quality=mo.POOR,this.score=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Po().fromBinary(e,n)}static fromJson(e,n){return new Po().fromJson(e,n)}static fromJsonString(e,n){return new Po().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Po,e,n)}}Po.runtime=R;Po.typeName="livekit.ConnectionQualityInfo";Po.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:R.getEnumType(mo)},{no:3,name:"score",kind:"scalar",T:2}]);class No extends de{constructor(e){super(),this.updates=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new No().fromBinary(e,n)}static fromJson(e,n){return new No().fromJson(e,n)}static fromJsonString(e,n){return new No().fromJsonString(e,n)}static equals(e,n){return R.util.equals(No,e,n)}}No.runtime=R;No.typeName="livekit.ConnectionQualityUpdate";No.fields=R.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:Po,repeated:!0}]);class _o extends de{constructor(e){super(),this.participantSid="",this.trackSid="",this.state=Ua.ACTIVE,R.util.initPartial(e,this)}static fromBinary(e,n){return new _o().fromBinary(e,n)}static fromJson(e,n){return new _o().fromJson(e,n)}static fromJsonString(e,n){return new _o().fromJsonString(e,n)}static equals(e,n){return R.util.equals(_o,e,n)}}_o.runtime=R;_o.typeName="livekit.StreamStateInfo";_o.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(Ua)}]);class Mo extends de{constructor(e){super(),this.streamStates=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Mo().fromBinary(e,n)}static fromJson(e,n){return new Mo().fromJson(e,n)}static fromJsonString(e,n){return new Mo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Mo,e,n)}}Mo.runtime=R;Mo.typeName="livekit.StreamStateUpdate";Mo.fields=R.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:_o,repeated:!0}]);class fi extends de{constructor(e){super(),this.quality=zt.LOW,this.enabled=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new fi().fromBinary(e,n)}static fromJson(e,n){return new fi().fromJson(e,n)}static fromJsonString(e,n){return new fi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(fi,e,n)}}fi.runtime=R;fi.typeName="livekit.SubscribedQuality";fi.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(zt)},{no:2,name:"enabled",kind:"scalar",T:8}]);class Oo extends de{constructor(e){super(),this.codec="",this.qualities=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Oo().fromBinary(e,n)}static fromJson(e,n){return new Oo().fromJson(e,n)}static fromJsonString(e,n){return new Oo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Oo,e,n)}}Oo.runtime=R;Oo.typeName="livekit.SubscribedCodec";Oo.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:fi,repeated:!0}]);class Do extends de{constructor(e){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Do().fromBinary(e,n)}static fromJson(e,n){return new Do().fromJson(e,n)}static fromJsonString(e,n){return new Do().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Do,e,n)}}Do.runtime=R;Do.typeName="livekit.SubscribedQualityUpdate";Do.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:fi,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Oo,repeated:!0}]);class ji extends de{constructor(e){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",R.util.initPartial(e,this)}static fromBinary(e,n){return new ji().fromBinary(e,n)}static fromJson(e,n){return new ji().fromJson(e,n)}static fromJsonString(e,n){return new ji().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ji,e,n)}}ji.runtime=R;ji.typeName="livekit.TrackPermission";ji.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class zi extends de{constructor(e){super(),this.allParticipants=!1,this.trackPermissions=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new zi().fromBinary(e,n)}static fromJson(e,n){return new zi().fromJson(e,n)}static fromJsonString(e,n){return new zi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(zi,e,n)}}zi.runtime=R;zi.typeName="livekit.SubscriptionPermission";zi.fields=R.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:ji,repeated:!0}]);class Lo extends de{constructor(e){super(),this.participantSid="",this.trackSid="",this.allowed=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Lo().fromBinary(e,n)}static fromJson(e,n){return new Lo().fromJson(e,n)}static fromJsonString(e,n){return new Lo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Lo,e,n)}}Lo.runtime=R;Lo.typeName="livekit.SubscriptionPermissionUpdate";Lo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class Hi extends de{constructor(e){super(),this.publishTracks=[],this.dataChannels=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Hi().fromBinary(e,n)}static fromJson(e,n){return new Hi().fromJson(e,n)}static fromJsonString(e,n){return new Hi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Hi,e,n)}}Hi.runtime=R;Hi.typeName="livekit.SyncState";Hi.fields=R.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:Bn},{no:2,name:"subscription",kind:"message",T:Br},{no:3,name:"publish_tracks",kind:"message",T:hi,repeated:!0},{no:4,name:"data_channels",kind:"message",T:Xi,repeated:!0},{no:5,name:"offer",kind:"message",T:Bn}]);class Xi extends de{constructor(e){super(),this.label="",this.id=0,this.target=An.PUBLISHER,R.util.initPartial(e,this)}static fromBinary(e,n){return new Xi().fromBinary(e,n)}static fromJson(e,n){return new Xi().fromJson(e,n)}static fromJsonString(e,n){return new Xi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Xi,e,n)}}Xi.runtime=R;Xi.typeName="livekit.DataChannelInfo";Xi.fields=R.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:R.getEnumType(An)}]);class sn extends de{constructor(e){super(),this.scenario={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new sn().fromBinary(e,n)}static fromJson(e,n){return new sn().fromJson(e,n)}static fromJsonString(e,n){return new sn().fromJsonString(e,n)}static equals(e,n){return R.util.equals(sn,e,n)}}sn.runtime=R;sn.typeName="livekit.SimulateScenario";sn.fields=R.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:R.getEnumType(zf),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]);class $i extends de{constructor(e){super(),this.timestamp=_e.zero,this.rtt=_e.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new $i().fromBinary(e,n)}static fromJson(e,n){return new $i().fromJson(e,n)}static fromJsonString(e,n){return new $i().fromJsonString(e,n)}static equals(e,n){return R.util.equals($i,e,n)}}$i.runtime=R;$i.typeName="livekit.Ping";$i.fields=R.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class Bo extends de{constructor(e){super(),this.lastPingTimestamp=_e.zero,this.timestamp=_e.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new Bo().fromBinary(e,n)}static fromJson(e,n){return new Bo().fromJson(e,n)}static fromJsonString(e,n){return new Bo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Bo,e,n)}}Bo.runtime=R;Bo.typeName="livekit.Pong";Bo.fields=R.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class _s extends de{constructor(e){super(),this.regions=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new _s().fromBinary(e,n)}static fromJson(e,n){return new _s().fromJson(e,n)}static fromJsonString(e,n){return new _s().fromJsonString(e,n)}static equals(e,n){return R.util.equals(_s,e,n)}}_s.runtime=R;_s.typeName="livekit.RegionSettings";_s.fields=R.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:Fo,repeated:!0}]);class Fo extends de{constructor(e){super(),this.region="",this.url="",this.distance=_e.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new Fo().fromBinary(e,n)}static fromJson(e,n){return new Fo().fromJson(e,n)}static fromJsonString(e,n){return new Fo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Fo,e,n)}}Fo.runtime=R;Fo.typeName="livekit.RegionInfo";Fo.fields=R.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class Uo extends de{constructor(e){super(),this.trackSid="",this.err=td.SE_UNKNOWN,R.util.initPartial(e,this)}static fromBinary(e,n){return new Uo().fromBinary(e,n)}static fromJson(e,n){return new Uo().fromJson(e,n)}static fromJsonString(e,n){return new Uo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Uo,e,n)}}Uo.runtime=R;Uo.typeName="livekit.SubscriptionResponse";Uo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:R.getEnumType(td)}]);function RG(t){if(!(typeof t>"u"))return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const PG=5e3,Xl=[];class X extends io.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=X.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Be,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),PG):this.handleAppVisibilityChanged()},this.log=Yo((i=r.loggerName)!==null&&i!==void 0?i:Qi.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=X.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),gt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===X.Kind.Video&&(n="video"),this.attachedElements.length===0&&X.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Xl.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&Xl.splice(Xl.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Ec(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(i?le.AudioPlaybackStarted:le.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?le.AudioPlaybackFailed:le.VideoPlaybackFailed,o):o.name==="AbortError"?Be.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Be.warn("could not playback ".concat(i?"audio":"video"),o),i&&e&&r.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(le.ElementAttached,e),e}detach(e){try{if(e){Vc(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(le.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{Vc(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(le.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(e){e.loggerName&&(this.log=Yo(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Xl.forEach(r=>{r.parentElement||(n=!1)}),n&&Xl.push(e)}}handleAppVisibilityChanged(){return B(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){ir()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){ir()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Ec(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!Va()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Va()||ll())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function Vc(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return wn.AUDIO;case e.Video:return wn.VIDEO;default:return wn.DATA}}t.kindToProto=i;function o(l){switch(l){case wn.AUDIO:return e.Audio;case wn.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function s(l){switch(l){case n.Camera:return Ot.CAMERA;case n.Microphone:return Ot.MICROPHONE;case n.ScreenShare:return Ot.SCREEN_SHARE;case n.ScreenShareAudio:return Ot.SCREEN_SHARE_AUDIO;default:return Ot.UNKNOWN}}t.sourceToProto=s;function a(l){switch(l){case Ot.CAMERA:return n.Camera;case Ot.MICROPHONE:return n.Microphone;case Ot.SCREEN_SHARE:return n.ScreenShare;case Ot.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function c(l){switch(l){case Ua.ACTIVE:return r.Active;case Ua.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(X||(X={}));function Qx(t,e,n){var r;const i=(r=RG(t))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&r0(i.audio,e),i.video&&r0(i.video,n),i}function r0(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Mp(t){const e={};if(t.video)if(typeof t.video=="object"){const n={},r=n,i=t.video;Object.keys(i).forEach(o=>{switch(o){case"resolution":r0(r,i.resolution);break;default:r[o]=i[o]}}),e.video=n}else e.video=t.video;else e.video=!1;return t.audio?typeof t.audio=="object"?e.audio=t.audio:e.audio=!0:e.audio=!1,e}function NG(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return B(this,void 0,void 0,function*(){const n=uC();if(n){const r=n.createAnalyser();r.fftSize=2048;const i=r.frequencyBinCount,o=new Uint8Array(i);n.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield Zo(e),r.getByteTimeDomainData(o);const a=o.some(c=>c!==128&&c!==0);return n.close(),!a}return!1})}function uC(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}function _G(t){return t===X.Source.Microphone?"audioinput":t===X.Source.Camera?"videoinput":void 0}function MG(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Va()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio}}function qx(t){const e=t.split("/")[1].toLowerCase();if(!Yx.includes(e))throw Error("Video codec not supported: ".concat(e));return e}function OG(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new hi({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function gt(t){return t instanceof X?{trackSid:t.sid,trackSource:t.source,trackMuted:t.isMuted,trackEnabled:t.mediaStreamTrack.enabled,trackKind:t.kind}:{trackSid:t.trackSid,trackName:t.trackName,track:t.track?gt(t.track):void 0,trackEnabled:t.isEnabled,trackEncrypted:t.isEncrypted,trackMimeType:t.mimeType}}const DG="|",Xb="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function LG(t){const e=t.split(DG);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Zo(t){return B(this,void 0,void 0,function*(){return new Promise(e=>ln.setTimeout(e,t))})}function $b(){return"addTransceiver"in RTCPeerConnection.prototype}function Kb(){return"addTrack"in RTCPeerConnection.prototype}function BG(){if(!("getCapabilities"in RTCRtpSender)||Va())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function FG(){if(!("getCapabilities"in RTCRtpSender)||ll())return!1;if(Va()){const n=Qo();if(n!=null&&n.version&&dC(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function wu(t){return t==="av1"||t==="vp9"}function i0(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}const UG={Chrome:"100",Safari:"15",Firefox:"100"};function VG(t){if(!ir()||!("setCodecPreferences"in t))return!1;const e=Qo();if(!(e!=null&&e.name)||!e.version)return!1;const n=UG[e.name];return n?dC(e.version,n)>=0:!1}function ll(){var t;return((t=Qo())===null||t===void 0?void 0:t.name)==="Firefox"}function GG(){var t;return((t=Qo())===null||t===void 0?void 0:t.name)==="Chrome"}function Va(){var t;return((t=Qo())===null||t===void 0?void 0:t.name)==="Safari"}function WG(){const t=Qo();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function eR(){return ir()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function ir(){return typeof document<"u"}function Ga(){return navigator.product=="ReactNative"}function o0(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function tR(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function nR(){if(!Ga())return;let t=tR();if(t)return t.platform}function Jb(){if(ir())return window.devicePixelRatio;if(Ga()){let t=tR();if(t)return t.devicePixelRatio}return 1}function dC(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const s=parseInt(n[o],10),a=parseInt(r[o],10);if(s>a)return 1;if(s<a)return-1;if(o===i-1&&s===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function ZG(t){for(const e of t)e.target.handleResize(e)}function jG(t){for(const e of t)e.target.handleVisibilityChanged(e)}let jg=null;const Yb=()=>(jg||(jg=new ResizeObserver(ZG)),jg);let zg=null;const Qb=()=>(zg||(zg=new IntersectionObserver(jG,{root:null,rootMargin:"0px"})),zg);function zG(){var t;const e=new So({sdk:cl.JS,protocol:EG,version:kG});return Ga()&&(e.os=(t=nR())!==null&&t!==void 0?t:""),e}function qb(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const o=i.getContext("2d");o==null||o.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=i.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let $l;function Hg(){if(!$l){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[$l]=r.stream.getAudioTracks(),!$l)throw Error("Could not get empty media stream audio track");$l.enabled=!1}return $l.clone()}class rR{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>B(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function HG(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),r=uC();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,o=r.createMediaStreamSource(new MediaStream([i])),s=r.createAnalyser();s.minDecibels=n.minDecibels,s.maxDecibels=n.maxDecibels,s.fftSize=n.fftSize,s.smoothingTimeConstant=n.smoothingTimeConstant,o.connect(s);const a=new Uint8Array(s.frequencyBinCount);return{calculateVolume:()=>{s.getByteFrequencyData(a);let u=0;for(const h of a)u+=Math.pow(h/255,2);return Math.sqrt(u/a.length)},analyser:s,cleanup:()=>B(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class mi{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function XG(t){return Yx.includes(t)}function xa(t){if(typeof t=="string")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function $G(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function ew(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}const tw="default";class Mn{static getInstance(){return this.instance===void 0&&(this.instance=new Mn),this.instance}getDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r;return B(this,void 0,void 0,function*(){if(((r=Mn.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){Be.debug("awaiting getUserMedia promise");try{e?yield Mn.userMediaPromiseMap.get(e):yield Promise.all(Mn.userMediaPromiseMap.values())}catch{Be.warn("error waiting for media permissons")}}let i=yield navigator.mediaDevices.enumerateDevices();if(n&&!(Va()&&this.hasDeviceInUse(e))&&(i.length===0||i.some(s=>{const a=s.label==="",c=e?s.kind===e:!0;return a&&c}))){const s={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},a=yield navigator.mediaDevices.getUserMedia(s);i=yield navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(c=>{c.stop()})}return e&&(i=i.filter(o=>o.kind===e)),i})}normalizeDeviceId(e,n,r){return B(this,void 0,void 0,function*(){if(n!==tw)return n;const o=(yield this.getDevices(e)).find(s=>s.groupId===r&&s.deviceId!==tw);return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?Mn.userMediaPromiseMap.has(e):Mn.userMediaPromiseMap.size>0}}Mn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Mn.userMediaPromiseMap=new Map;const KG=1e3;class ul extends X{get constraints(){return this._constraints}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=cC(()=>B(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>B(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(le.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new mi,this.pauseUpstreamLock=new mi,this.processorLock=new mi,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==X.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(e,n){return B(this,void 0,void 0,function*(){if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{Vc(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e&&this.processorElement){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");Ec(e,this.processorElement),this.processorElement.muted=!0,yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{Ec(r??e,i)}))})}waitForDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:KG;var n;return B(this,void 0,void 0,function*(){if(this.kind===X.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=Qo())===null||n===void 0?void 0:n.os)==="iOS"&&(yield Zo(10));const r=Date.now();for(;Date.now()-r<e;){const i=this.dimensions;if(i)return i;yield Zo(50)}throw new Ri("unable to get track dimensions after timeout")})}getDeviceId(){return B(this,void 0,void 0,function*(){if(this.source===X.Source.ScreenShare)return;const{deviceId:e,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===X.Kind.Audio?"audioinput":"videoinput";return Mn.getInstance().normalizeDeviceId(r,e,n)})}mute(){return B(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return B(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return B(this,void 0,void 0,function*(){if(!this.sender)throw new Ri("unable to replace an unpublished track");return this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),this.providedByUser=n,this.processor&&(yield this.stopProcessor()),this})}restart(e){return B(this,void 0,void 0,function*(){e||(e=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const n={audio:!1,video:!1};this.kind===X.Kind.Video?n.video=e:n.audio=e,this.attachedElements.forEach(o=>{Vc(this.mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const i=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return i.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(i),this._constraints=e,this.emit(le.Restarted,this),this})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?le.Muted:le.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return B(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),eR()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return B(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(le.UpstreamPaused,this);const n=Qo();if((n==null?void 0:n.name)==="Safari"&&dC(n.version,"12.0")<0)throw new aC("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{e()}})}resumeUpstream(){return B(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(le.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{e()}})}getRTCStatsReport(){var e;return B(this,void 0,void 0,function*(){return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r,i;return B(this,void 0,void 0,function*(){const o=yield this.processorLock.lock();try{if(this.log.debug("setting up processor",this.logContext),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(r=this.processorElement)!==null&&r!==void 0?r:document.createElement(this.kind),Ec(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(a=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:a})));const s={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield e.init(s),this.processor=e,this.processor.processedTrack){for(const a of this.attachedElements)a!==this.processorElement&&n&&(Vc(this._mediaStreamTrack,a),Ec(this.processor.processedTrack,a));yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack)}}finally{o()}})}getProcessor(){return this.processor}stopProcessor(){var e,n;return B(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(e=this.processor.processedTrack)===null||e===void 0||e.stop(),yield this.processor.destroy(),this.processor=void 0,(n=this.processorElement)===null||n===void 0||n.remove(),this.processorElement=void 0,yield this.restart())})}}class JG extends io.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:o,data:s}=n.data;switch(o){case"error":Be.error(s.error.message),this.emit(Ns.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==s.enabled&&s.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Ns.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(s.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(Ns.ParticipantEncryptionStatusChanged,s.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(Ws.KeyRatcheted,s.material,s.keyIndex);break}},this.onWorkerError=n=>{Be.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Ns.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!CG())throw new aC("tried to setup end-to-end encryption on an unsupported browser");if(Be.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(Be.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Be.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Be.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(fe.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(ee.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==an.NONE,i.identity)),e.on(ee.ConnectionStateChanged,r=>{r===je.Connected&&e.participants.forEach(i=>{i.tracks.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==an.NONE,i.identity)})})}).on(ee.TrackUnsubscribed,(r,i,o)=>{var s;const a={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(a)}).on(ee.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(ee.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),e.localParticipant.on(re.LocalTrackPublished,r=>B(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Ws.SetKey,r=>this.postKey(r)).on(Ws.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?qx(r.mimeType):void 0)}}setupE2EESender(e,n){if(!(e instanceof ul)||!n){n||Be.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return B(this,void 0,void 0,function*(){if(this.worker){if(e0()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(sh in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let o=e.writableStream,s=e.readableStream;if(!o||!s){const c=e.createEncodedStreams();e.writableStream=c.writable,o=c.writable,e.readableStream=c.readable,s=c.readable}const a={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[s,o])}e[sh]=!0}})}handleSender(e,n,r){var i;if(!(sh in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(e0()){Be.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{Be.info("initialize encoded streams");const o=e.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s,[o.readable,o.writable])}e[sh]=!0}}}var Au;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Au||(Au={}));class YG{constructor(){this.pendingTasks=new Map,this.taskMutex=new mi,this.nextTaskIndex=0}run(e){return B(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Au.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Au.RUNNING,yield e()}finally{n.status=Au.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return B(this,void 0,void 0,function*(){return this.run(()=>B(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const QG=["syncState","trickle","offer","answer","simulate","leave"];function qG(t){const e=QG.indexOf(t.case)>=0;return Be.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Tt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Tt||(Tt={}));class hC{get currentState(){return this.state}get isDisconnected(){return this.state===Tt.DISCONNECTING||this.state===Tt.DISCONNECTED}get isEstablishingConnection(){return this.state===Tt.CONNECTING||this.state===Tt.RECONNECTING}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Tt.DISCONNECTED,this.log=Be,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Yo((r=n.loggerName)!==null&&r!==void 0?r:Qi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new YG,this.queuedRequests=[],this.closingLock=new mi,this.connectionLock=new mi,this.state=Tt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return B(this,void 0,void 0,function*(){return this.state=Tt.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return B(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Tt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r,e=$G(e),e=e.replace(/\/$/,""),e+="/rtc";const o=zG(),s=eW(n,o,r);return new Promise((a,c)=>B(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();try{const u=()=>B(this,void 0,void 0,function*(){this.close(),clearTimeout(d),c(new lt("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),c(new lt("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),this.log.debug("connecting to ".concat(e+s),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(e+s),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=h=>B(this,void 0,void 0,function*(){if(this.state!==Tt.CONNECTED){clearTimeout(d);try{const f=yield fetch("http".concat(e.substring(2),"/validate").concat(s));if(f.status.toFixed(0).startsWith("4")){const g=yield f.text();c(new lt(g,0,f.status))}else c(new lt("Internal error",2,f.status))}catch{c(new lt("server was not reachable",1))}return}this.handleWSError(h)}),this.ws.onmessage=h=>B(this,void 0,void 0,function*(){var f,g,m,C;let p;if(typeof h.data=="string"){const v=JSON.parse(h.data);p=Ui.fromJson(v)}else if(h.data instanceof ArrayBuffer)p=Ui.fromBinary(new Uint8Array(h.data));else{this.log.error("could not decode websocket message: ".concat(typeof h.data),this.logContext);return}if(this.state!==Tt.CONNECTED){let v=!1;if(((f=p.message)===null||f===void 0?void 0:f.case)==="join"?(this.state=Tt.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=p.message.value.pingTimeout,this.pingIntervalDuration=p.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(p.message.value)):this.state===Tt.RECONNECTING&&p.message.case!=="leave"?(this.state=Tt.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((g=p.message)===null||g===void 0?void 0:g.case)==="reconnect"?a((m=p.message)===null||m===void 0?void 0:m.value):(a(),v=!0)):this.isEstablishingConnection&&p.message.case==="leave"?c(new lt("Received leave request while trying to (re)connect",4)):r.reconnect||c(new lt("did not receive join response, got ".concat((C=p.message)===null||C===void 0?void 0:C.case," instead"))),!v)return}this.signalLatency&&(yield Zo(this.signalLatency)),this.handleSignalResponse(p)}),this.ws.onclose=h=>{this.isEstablishingConnection&&c(new lt("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:h.reason,state:this.state})),this.handleOnClose(h.reason)}}finally{l()}}))}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return B(this,void 0,void 0,function*(){const n=yield this.closingLock.lock();try{if(e&&(this.state=Tt.DISCONNECTING),this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const r=new Promise(i=>{this.ws?this.ws.onclose=()=>{i()}:i()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([r,Zo(250)])),this.ws=void 0}}finally{e&&(this.state=Tt.DISCONNECTED),this.clearPingInterval(),n()}})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Hf(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Hf(e)})}sendIceCandidate(e,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new ui({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new di({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return this.sendRequest({case:"updateMetadata",value:new Wi({metadata:e,name:n})})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new Gi({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new zi({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:_e.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new $i({timestamp:_e.parse(Date.now()),rtt:_e.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new Fr({canReconnect:!1,reason:Wo.CLIENT_INITIATED})})}sendRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return B(this,void 0,void 0,function*(){if(!n&&!qG(e)&&this.state===Tt.RECONNECTING){this.queuedRequests.push(()=>B(this,void 0,void 0,function*(){yield this.sendRequest(e,!0)}));return}if(n||(yield this.requestQueue.flush()),this.signalLatency&&(yield Zo(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(e==null?void 0:e.case),this.logContext);return}const i=new wo({message:e});try{this.useJSON?this.ws.send(i.toJsonString()):this.ws.send(i.toBinary())}catch(o){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:o}))}})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const s=nw(i.value);this.onAnswer&&this.onAnswer(s)}else if(i.case==="offer"){const s=nw(i.value);this.onOffer&&this.onOffer(s)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return B(this,void 0,void 0,function*(){if(this.state===Tt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=ln.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&ln.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=ln.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&ln.clearInterval(this.pingInterval)}}function nw(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Hf(t){return new Bn({sdp:t.sdp,type:t.type})}function eW(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Ga()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.publishOnly!==void 0&&i.set("publish",n.publishOnly),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var iR={},oR={exports:{}},rw=oR.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(rw).forEach(function(t){var e=rw[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var sR=oR.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=e(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=e(a[d+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=sR,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var h=d[0],f=d.slice(2);h==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var g=0;g<(i[h]||[]).length;g+=1){var m=i[h][g];if(m.reg.test(f))return r(m,u,f)}}),c.media=l,c};var s=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(iR);var Xg=sR,tW=/%[sdv%]/g,nW=function(t){var e=1,n=arguments,r=n.length;return t.replace(tW,function(i){if(e>=r)return i;var o=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},Kl=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var o=0;o<e.names.length;o+=1){var s=e.names[o];e.name?i.push(n[e.name][s]):i.push(n[e.names[o]])}else i.push(n[e.name]);return nW.apply(null,i)},rW=["v","o","s","i","u","e","p","c","b","t","r","z","a"],iW=["i","c","b","a"],oW=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var n=e.outerOrder||rW,r=e.innerOrder||iW,i=[];return n.forEach(function(o){Xg[o].forEach(function(s){s.name in t&&t[s.name]!=null?i.push(Kl(o,s,t)):s.push in t&&t[s.push]!=null&&t[s.push].forEach(function(a){i.push(Kl(o,s,a))})})}),t.media.forEach(function(o){i.push(Kl("m",Xg.m[0],o)),r.forEach(function(s){Xg[s].forEach(function(a){a.name in o&&o[a.name]!=null?i.push(Kl(s,a,o)):a.push in o&&o[a.push]!=null&&o[a.push].forEach(function(c){i.push(Kl(s,a,c))})})})}),i.join(`\r
`)+`\r
`},sW=iR,aW=oW,$g=aW,cu=sW.parse;const iw=.7,Gc={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class ow extends io.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.log=Be,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=cC(o=>B(this,void 0,void 0,function*(){this.emit(Gc.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(o)o(s);else throw s}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Yo((i=r.loggerName)!==null&&i!==void 0?i:Qi.PCTransport),this.loggerOptions=r,this.config=e,this.mediaConstraints=n,this._pc=this.createPC()}createPC(){const e=GG()?new RTCPeerConnection(this.config,this.mediaConstraints):new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return B(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){var n;return B(this,void 0,void 0,function*(){let r;if(e.type==="offer"){let{stereoMids:i,nackMids:o}=lW(e);this.remoteStereoMids=i,this.remoteNackMids=o}else if(e.type==="answer"){const i=cu((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(s=>{if(!s.transceiver||o.mid!=s.transceiver.mid)return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config=l.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),s.maxbr>0&&(l.config+=";maxaveragebitrate=".concat(s.maxbr*1e3)),c=!0;break}return c||s.maxbr>0&&o.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(s.maxbr*1e3)}),!0})}),r=$g(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Gc.NegotiationComplete),e.sdp&&cu(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(Gc.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(e){var n;return B(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e),i=cu((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"?sw(o,[],[]):o.type==="video"&&(cW(o),this.trackBitrates.some(s=>{if(!o.msid||!s.cid||!o.msid.includes(s.cid))return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config.includes("x-google-start-bitrate")||(l.config+=";x-google-start-bitrate=".concat(Math.round(s.maxbr*iw))),l.config.includes("x-google-max-bitrate")||(l.config+=";x-google-max-bitrate=".concat(s.maxbr)),c=!0;break}return c||o.fmtp.push({payload:a,config:"x-google-start-bitrate=".concat(Math.round(s.maxbr*iw),";x-google-max-bitrate=").concat(s.maxbr)}),!0}))}),yield this.setMungedSDP(r,$g(i)),this.onOffer(r)})}createAndSetAnswer(){var e;return B(this,void 0,void 0,function*(){const n=yield this.pc.createAnswer(),r=cu((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{i.type==="audio"&&sw(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,$g(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Vt("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Vt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var e;return B(this,void 0,void 0,function*(){if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const s=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(e,n,r){return B(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const s={error:o,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new t0(o)}})}}function sw(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function cW(t){var e,n,r,i;const o=(n=(e=t.rtp[0])===null||e===void 0?void 0:e.codec)===null||n===void 0?void 0:n.toLowerCase();if(!wu(o))return;let s=0;((r=t.ext)===null||r===void 0?void 0:r.some(c=>c.uri===Xb?!0:(c.value>s&&(s=c.value),!1)))||(i=t.ext)===null||i===void 0||i.push({value:s+1,uri:Xb})}function lW(t){var e;const n=[],r=[],i=cu((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return i.media.forEach(s=>{var a;s.type==="audio"&&(s.rtp.some(c=>c.codec==="opus"?(o=c.payload,!0):!1),!((a=s.rtcpFb)===null||a===void 0)&&a.some(c=>c.payload===o&&c.type==="nack")&&r.push(s.mid),s.fmtp.some(c=>c.payload===o?(c.config.includes("sprop-stereo=1")&&n.push(s.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const s0="vp8",uW={audioBitrate:jf.music.maxBitrate,audioPreset:jf.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:lC.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:s0,backupCodec:!0},aR={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},cR={resolution:rd.h720.resolution},dW={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new tG,disconnectOnPageLeave:!0,expWebAudioMix:!1},fC={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Wt;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Wt||(Wt={}));class hW{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=fC.peerConnectionTimeout,this.log=Be,this.updateState=()=>{var s;const a=this.state,c=this.requiredTransports.map(l=>l.getConnectionState());c.every(l=>l==="connected")?this.state=Wt.CONNECTED:c.some(l=>l==="failed")?this.state=Wt.FAILED:c.some(l=>l==="connecting")?this.state=Wt.CONNECTING:c.every(l=>l==="closed")?this.state=Wt.CLOSED:c.some(l=>l==="closed")?this.state=Wt.CLOSING:c.every(l=>l==="new")&&(this.state=Wt.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(Wt[a]," to ").concat(Wt[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Yo((i=r.loggerName)!==null&&i!==void 0?i:Qi.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n;const o={optional:[{googDscp:!0}]};this.publisher=new ow(e,o,r),this.subscriber=new ow(e,void 0,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,An.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,An.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=s=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s)},this.state=Wt.NEW,this.connectionLock=new mi}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return B(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return B(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return B(this,void 0,void 0,function*(){n===An.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return B(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){var r;return B(this,void 0,void 0,function*(){const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,e,n)))}finally{i()}})}negotiate(e){return B(this,void 0,void 0,function*(){return new Promise((n,r)=>B(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(Gc.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Gc.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===An.PUBLISHER?this.publisher.getConnectedAddress():e===An.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return B(this,void 0,void 0,function*(){if(e.getConnectionState()!=="connected")return new Promise((o,s)=>B(this,void 0,void 0,function*(){const a=()=>{this.log.warn("abort transport connection",this.logContext),ln.clearTimeout(c),s(new lt("room connection has been cancelled",3))};n!=null&&n.signal.aborted&&a(),n==null||n.signal.addEventListener("abort",a);const c=ln.setTimeout(()=>{n==null||n.signal.removeEventListener("abort",a),s(new lt("could not establish pc connection"))},r);for(;this.state!==Wt.CONNECTED;)if(yield Zo(50),n!=null&&n.signal.aborted){s(new lt("room connection has been cancelled",3));return}ln.clearTimeout(c),n==null||n.signal.removeEventListener("abort",a),o()}))})}}const aw="_lossy",cw="_reliable",fW=2*1e3,lw="leave-reconnect";var Xr;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Xr||(Xr={}));class pW extends io.EventEmitter{get isClosed(){return this._isClosed}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=fC.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=Xr.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Be,this.handleDataChannel=r=>{let{channel:i}=r;return B(this,void 0,void 0,function*(){if(i){if(i.label===cw)this.reliableDCSub=i;else if(i.label===aw)this.lossyDCSub=i;else return;this.log.debug("on data channel ".concat(i.id,", ").concat(i.label),this.logContext),i.onmessage=this.handleDataMessage}})},this.handleDataMessage=r=>B(this,void 0,void 0,function*(){var i,o;const s=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const c=_i.fromBinary(new Uint8Array(a));((i=c.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(fe.ActiveSpeakersUpdate,c.value.value.speakers):((o=c.value)===null||o===void 0?void 0:o.case)==="user"&&this.emit(fe.DataPacketReceived,c.value.value,c.kind)}finally{s()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?Gt.LOSSY:Gt.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(fe.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(a===null){o(s);return}r===lw&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=ln.setTimeout(()=>this.attemptReconnect(i),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Xr.Connected&&r();const o=()=>{this.off(fe.Disconnected,s),r()},s=()=>{this.off(fe.Restarted,o),i()};this.once(fe.Restarted,o),this.once(fe.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(fe.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Tt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(lo.RR_SIGNAL_DISCONNECTED))},this.log=Yo((n=e.loggerName)!==null&&n!==void 0?n:Qi.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new hC(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new mi,this.dataProcessLock=new mi,this.dcBufferStatus=new Map([[Gt.LOSSY,!0],[Gt.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(fe.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(fe.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(fe.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(fe.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(fe.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(fe.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(fe.StreamStateChanged,r)}get logContext(){var e,n,r,i,o,s;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomSid:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,identity:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity}}join(e,n,r,i){return B(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof lt&&o.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw o}})}close(){return B(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.emit(fe.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){var e;return B(this,void 0,void 0,function*(){yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return B(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Ri("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new lt("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){var e;return B(this,void 0,void 0,function*(){return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){var n;return B(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==Wt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new hW(r,e.subscriberPrimary,this.loggerOptions),this.emit(fe.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(i,o)=>{this.client.sendIceCandidate(i,o)},this.pcManager.onPublisherOffer=i=>{this.client.sendOffer(i)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(i,o,s)=>B(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(i),this.logContext),i===Wt.CONNECTED){const a=this.pcState===Xr.New;this.pcState=Xr.Connected,a&&this.emit(fe.Connected,e)}else i===Wt.FAILED&&this.pcState===Xr.Connected&&(this.pcState=Xr.Disconnected,this.handleDisconnect("peerconnection failed",s==="failed"?lo.RR_SUBSCRIBER_FAILED:lo.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=i=>{this.emit(fe.MediaTrackAdded,i.track,i.streams[0],i.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>B(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>B(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(fe.LocalTrackUnpublished,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(fe.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(fe.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",lo.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{e!=null&&e.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(lw)):(this.emit(fe.Disconnected,e==null?void 0:e.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason}))}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),i.push(s)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Ci.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(aw,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(cw,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(e,n,r){if(!("getCapabilities"in RTCRtpReceiver))return;const i=RTCRtpReceiver.getCapabilities(n);if(!i)return;this.log.debug("get receiver capabilities",Object.assign(Object.assign({},this.logContext),{cap:i}));const o=[],s=[],a=[];i.codecs.forEach(c=>{const l=c.mimeType.toLowerCase();if(l==="audio/opus"){o.push(c);return}if(!(l==="video/".concat(r))){a.push(c);return}if(r==="h264"){c.sdpFmtpLine&&c.sdpFmtpLine.includes("profile-level-id=42e01f")?o.push(c):s.push(c);return}o.push(c)}),VG(e)&&e.setCodecPreferences(o.concat(s,a))}createSender(e,n,r){return B(this,void 0,void 0,function*(){if($b())return yield this.createTransceiverRTCRtpSender(e,n,r);if(Kb())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Vt("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return B(this,void 0,void 0,function*(){if($b())return this.createSimulcastTransceiverSender(e,n,r,i);if(Kb())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Vt("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream);const o={direction:"sendonly",streams:i};r&&(o.sendEncodings=r);const s=yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o);return e.kind===X.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(s,e.kind,n.videoCodec),e.codec=n.videoCodec),s.sender})}createSimulcastTransceiverSender(e,n,r,i){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return this.setPreferredCodec(s,e.kind,r.videoCodec),e.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(e){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){var n,r,i;return B(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){Be.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Ci.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Wt.NEW)===Wt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof Vt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof sc||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",lo.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(fe.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){var n,r,i;return B(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new Vt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(fe.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new sc;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof lt&&s.reason===0?new Vt("could not reconnect, token might be expired"):new sc}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(fe.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Tt.CONNECTED)throw new sc("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(fe.Restarted)}catch(o){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(e){var n;return B(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new Vt("could not reconnect, url or token not saved");if(!this.pcManager)throw new Vt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(fe.Resuming);try{this.setupSignalClientCallbacks();const r=yield this.client.reconnect(this.url,this.token,this.participantSid,e);if(r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}}catch(r){let i="";throw r instanceof Error&&(i=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof lt&&r.reason===0?new Vt("could not reconnect, token might be expired"):r instanceof lt&&r.reason===4?r:new sc(i)}if(this.emit(fe.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Tt.CONNECTED)throw new sc("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(fe.Resumed)})}waitForPCInitialConnection(e,n){return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return B(this,void 0,void 0,function*(){this.pcState=Xr.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Zo(fW),!this.pcManager)throw new Vt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Xr.Connected}catch(e){throw this.pcState=Xr.Disconnected,new lt("could not establish PC connection, ".concat(e.message))}})}sendDataPacket(e,n){return B(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var r;return B(this,void 0,void 0,function*(){if(!this.pcManager)throw new Vt("PC manager is closed");const i=n?this.pcManager.subscriber:this.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!i)throw new lt("".concat(o," connection not set"));!n&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const s=this.dataChannelForKind(e,n);if((s==null?void 0:s.readyState)==="open")return;const a=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<a;){if(i.isICEConnected&&((r=this.dataChannelForKind(e,n))===null||r===void 0?void 0:r.readyState)==="open")return;yield Zo(50)}throw new lt("could not establish ".concat(o," connection, state: ").concat(i.getICEConnectionState()))})}ensurePublisherConnected(e){return B(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(e,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Wt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return B(this,void 0,void 0,function*(){return new Promise((e,n)=>B(this,void 0,void 0,function*(){if(!this.pcManager){n(new t0("PC manager is closed"));return}this.pcManager.requirePublisher();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(fe.Closing,i),this.pcManager.publisher.once(Gc.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(a=>{const c=a.codec.toLowerCase();XG(c)&&s.set(a.payload,c)}),this.emit(fe.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),e()}catch(o){o instanceof t0&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",lo.RR_UNKNOWN),n(o)}finally{this.off(fe.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===Gt.LOSSY)return this.lossyDCSub;if(e===Gt.RELIABLE)return this.reliableDCSub}else{if(e===Gt.LOSSY)return this.lossyDC;if(e===Gt.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array;e.forEach(l=>{l.isDesired!==a&&c.push(l.trackSid)}),this.client.sendSyncState(new Hi({answer:o?Hf({sdp:o.sdp,type:o.type}):void 0,offer:s?Hf({sdp:s.sdp,type:s.type}):void 0,subscription:new Br({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:OG(n),dataChannels:this.dataChannelsInfo()}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new Xi({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(Gt.LOSSY),An.PUBLISHER),n(this.dataChannelForKind(Gt.RELIABLE),An.PUBLISHER),n(this.dataChannelForKind(Gt.LOSSY,!0),An.SUBSCRIBER),n(this.dataChannelForKind(Gt.RELIABLE,!0),An.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&ln.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){ir()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){ir()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class sc extends Error{}class uw{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return o0(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return B(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),Be.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return B(this,void 0,void 0,function*(){const n=yield fetch("".concat(gW(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new lt("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}}function gW(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}const pC=2e3;function Op(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}class Kn extends ul{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,X.Kind.Audio,n,r,o),this.stopOnMute=!1,this.monitorSender=()=>B(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}s&&this.prevStats&&(this._currentBitrate=Op(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.checkForSilence()}setDeviceId(e){return B(this,void 0,void 0,function*(){return this._constraints.deviceId===e?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||xa(e)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===X.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==xa(this._constraints.deviceId);return this.source===X.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return B(this,void 0,void 0,function*(){let n;if(e){const r=Mp({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return B(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){ir()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},pC)))}setProcessor(e){var n;return B(this,void 0,void 0,function*(){const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack))}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){var e;return B(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return B(this,void 0,void 0,function*(){const e=yield NG(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(le.AudioSilenceDetected)),e})}}function lR(t,e,n){switch(t.kind){case"audio":return new Kn(t,e,!1,void 0,n);case"video":return new Nr(t,e,!1,n);default:throw new Ri("unsupported track type: ".concat(t.kind))}}const mW=Object.values(rd),vW=Object.values(n0),yW=Object.values(lC),CW=[rd.h180,rd.h360],IW=[n0.h180,n0.h360],SW=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new Qe(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),a0=["q","h","f"];function c0(t,e,n,r){var i,o;let s=r==null?void 0:r.videoEncoding;t&&(s=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!s&&!a&&!c||!e||!n)return[{}];s||(s=wW(t,e,n,l),Be.debug("using video encoding",s));const u=new Qe(e,n,s.maxBitrate,s.maxFramerate,s.priority);if(c&&wu(l)){Be.debug("using svc with scalabilityMode ".concat(c));const f=new uR(c),g=[];if(f.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));for(let m=0;m<f.spatial;m+=1)g.push({rid:a0[2-m],maxBitrate:s.maxBitrate/Math.pow(3,m),maxFramerate:u.encoding.maxFramerate});return g[0].scalabilityMode=c,Be.debug("encodings",g),g}if(!a)return[s];let d=[];t?d=(i=hw(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:dw(t,u):d=(o=hw(r==null?void 0:r.videoSimulcastLayers))!==null&&o!==void 0?o:dw(t,u);let h;if(d.length>0){const f=d[0];d.length>1&&([,h]=d);const g=Math.max(e,n);if(g>=960&&h)return Kg(e,n,[f,h,u]);if(g>=480)return Kg(e,n,[f,u])}return Kg(e,n,[u])}function bW(t,e,n){var r,i,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Be.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(o=a.height)!==null&&o!==void 0?o:(s=t.dimensions)===null||s===void 0?void 0:s.height;return c0(t.source===X.Source.ScreenShare,c,l,n)}function wW(t,e,n,r){const i=AW(t,e,n);let{encoding:o}=i[0];const s=Math.max(e,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(o=c.encoding,c.width>=s)break}if(r)switch(r){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function AW(t,e,n){if(t)return yW;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?mW:vW}function dw(t,e){if(t)return SW(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?CW:IW}function Kg(t,e,n){const r=[];if(n.forEach((i,o)=>{if(o>=a0.length)return;const s=Math.min(t,e),c={rid:a0[o],scaleResolutionDownBy:Math.max(1,s/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(c.maxFramerate=i.encoding.maxFramerate);const l=ll()||o===0;i.encoding.priority&&l&&(c.priority=i.encoding.priority,c.networkPriority=i.encoding.priority),r.push(c)}),Ga()&&nR()==="ios"){let i;r.forEach(s=>{i?s.maxFramerate&&s.maxFramerate>i&&(i=s.maxFramerate):i=s.maxFramerate});let o=!0;r.forEach(s=>{var a;s.maxFramerate!=i&&(o&&(o=!1,Be.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Be.info('Setting framerate of encoding "'.concat((a=s.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),s.maxFramerate=i)})}return r}function hw(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class uR{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}const kW=5e3;class Nr extends ul{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,X.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.monitorSender=()=>B(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const s=new Map(o.map(a=>[a.rid,a]));if(this.prevStats){let a=0;s.forEach((c,l)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(l);a+=Op(c,d)}),this._currentBitrate=a}this.prevStats=s}),this.senderLock=new mi}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!ir())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},pC))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var n,r,i,o,s;return B(this,void 0,void 0,function*(){yield e.pauseUpstream.call(this);try{for(var a=!0,c=cc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)o=l.value,a=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var n,r,i,o,s;return B(this,void 0,void 0,function*(){yield e.resumeUpstream.call(this);try{for(var a=!0,c=cc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;yield(s=u.sender)===null||s===void 0?void 0:s.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===X.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return B(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===X.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){var e;return B(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,framesSent:i.framesSent,timestamp:i.timestamp,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges},a=r.get(i.remoteId);a&&(s.jitter=a.jitter,s.packetsLost=a.packetsLost,s.roundTripTime=a.roundTripTime),n.push(s)}}),n})}setPublishingQuality(e){const n=[];for(let r=zt.LOW;r<=zt.HIGH;r+=1)n.push(new fi({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}setDeviceId(e){return B(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===xa(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||xa(e)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(e){var n,r,i,o;return B(this,void 0,void 0,function*(){let s;if(e){const u=Mp({video:e});typeof u.video!="boolean"&&(s=u.video)}yield this.restart(s);try{for(var a=!0,c=cc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var i,o,s,a,c,l;return B(this,void 0,void 0,function*(){if(yield r.setProcessor.call(this,e,n),!((c=this.processor)===null||c===void 0)&&c.processedTrack)try{for(var u=!0,d=cc(this.simulcastCodecs.values()),h;h=yield d.next(),i=h.done,!i;u=!0)a=h.value,u=!1,yield(l=a.sender)===null||l===void 0?void 0:l.replaceTrack(this.processor.processedTrack)}catch(f){o={error:f}}finally{try{!u&&!i&&(s=d.return)&&(yield s.call(d))}finally{if(o)throw o.error}}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e))throw new Error("".concat(e," already added"));const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},kW))}setPublishingCodecs(e){var n,r,i,o,s,a,c;return B(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=cc(e);i=yield r.next(),o=i.done,!o;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield fw(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){s={error:u}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return l})}setPublishingLayers(e){return B(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield fw(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return B(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),eR()&&this.isInBackground&&this.source===X.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function fw(t,e,n,r,i,o){return B(this,void 0,void 0,function*(){const s=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const a=t.getParameters(),{encodings:c}=a;if(!c)return;if(c.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch");return}let l=!1;!1&&c[0].scalabilityMode||c.forEach((d,h)=>{var f;let g=(f=d.rid)!==null&&f!==void 0?f:"";g===""&&(g="q");const m=dR(g),C=n.find(p=>p.quality===m);C&&d.active!==C.enabled&&(l=!0,d.active=C.enabled,i.debug("setting layer ".concat(C.quality," to ").concat(d.active?"enabled":"disabled"),o),ll()&&(C.enabled?(d.scaleResolutionDownBy=e[h].scaleResolutionDownBy,d.maxBitrate=e[h].maxBitrate,d.maxFrameRate=e[h].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),l&&(a.encodings=c,i.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:a.encodings})),yield t.setParameters(a))}finally{s()}})}function dR(t){switch(t){case"f":return zt.HIGH;case"h":return zt.MEDIUM;case"q":return zt.LOW;default:return zt.HIGH}}function pw(t,e,n,r){if(!n)return[new Ln({quality:zt.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new uR(i),s=[];for(let a=0;a<o.spatial;a+=1)s.push(new Ln({quality:zt.HIGH-a,width:Math.ceil(t/Math.pow(2,a)),height:Math.ceil(e/Math.pow(2,a)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(3,a)):0,ssrc:0}));return s}return n.map(i=>{var o,s,a;const c=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let l=dR((s=i.rid)!==null&&s!==void 0?s:"");return new Ln({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}class hR extends X{constructor(e,n,r,i,o){super(e,r,o),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?le.Muted:le.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver=void 0,this._currentBitrate=0,this.emit(le.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var e;return B(this,void 0,void 0,function*(){return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),pC))}}class Ra extends hR{constructor(e,n,r,i,o,s){super(e,n,X.Kind.Audio,r,s),this.monitorReceiver=()=>B(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Op(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;Ga()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Ga())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return B(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(i0(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&i0(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(le.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(le.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return B(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Jg=100;class ku extends hR{constructor(e,n,r,i,o){super(e,n,X.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>B(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=Op(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=cC(()=>{this.updateDimensions()},Jg),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?Vc(this._mediaStreamTrack,n):Ec(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new EW(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return B(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return B(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((a,c)=>Math.max(a,c.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(a=>a.pictureInPicture),s=this.elementInfos.some(a=>a.visible)&&!i||o;if(this.lastVisible!==s){if(!s&&Date.now()-r<Jg){ln.setTimeout(()=>{this.updateVisibility()},Jg);return}this.lastVisible=s,this.emit(le.VisibilityChanged,s,this)}}updateDimensions(){var e,n;let r=0,i=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const a=s.width()*o,c=s.height()*o;a+c>r+i&&(r=a,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(le.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?Jb():n||(Jb()>2?2:1)}}class EW{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:s}=r;o===this.element&&(this.isIntersecting=s,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??gw(e),this.isPiP=ir()&&document.pictureInPictureElement===e,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=gw(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var e;(e=this.handleResize)===null||e===void 0||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,Qb().observe(this.element),Yb().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var e,n;(e=Qb())===null||e===void 0||e.unobserve(this.element),(n=Yb())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function gw(t){let e=t.offsetTop,n=t.offsetLeft;const r=t.offsetWidth,i=t.offsetHeight,{hidden:o}=t,{opacity:s,display:a}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&e+i>window.pageYOffset&&n+r>window.pageXOffset&&!o&&(s!==""?parseFloat(s)>0:!0)&&a!=="none"}class uo extends io.EventEmitter{constructor(e,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=an.NONE,this.log=Be,this.handleMuted=()=>{this.emit(le.Muted)},this.handleUnmuted=()=>{this.emit(le.Unmuted)},this.log=Yo((o=i==null?void 0:i.loggerName)!==null&&o!==void 0?o:Qi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=X.Source.Unknown}setTrack(e){this.track&&(this.track.off(le.Muted,this.handleMuted),this.track.off(le.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(le.Muted,this.handleMuted),e.on(le.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),gt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==an.NONE}get audioTrack(){if(this.track instanceof Kn||this.track instanceof Ra)return this.track}get videoTrack(){if(this.track instanceof Nr||this.track instanceof ku)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=X.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===X.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(uo||(uo={}));class id extends uo{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(le.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(le.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(le.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var e;return B(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){var e;return B(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){var e;return B(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){var e;return B(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}}var Dr;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Dr||(Dr={}));function TW(t){switch(t){case mo.EXCELLENT:return Dr.Excellent;case mo.GOOD:return Dr.Good;case mo.POOR:return Dr.Poor;case mo.LOST:return Dr.Lost;default:return Dr.Unknown}}class fR extends io.EventEmitter{get logContext(){var e,n;return Object.assign(Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e)),{participantSid:this.sid,participantId:this.identity})}get isEncrypted(){return this.tracks.size>0&&Array.from(this.tracks.values()).every(e=>e.isEncrypted)}get isAgent(){var e,n;return(n=(e=this.permissions)===null||e===void 0?void 0:e.agent)!==null&&n!==void 0?n:!1}constructor(e,n,r,i,o){var s;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Dr.Unknown,this.log=Be,this.log=Yo((s=o==null?void 0:o.loggerName)!==null&&s!==void 0?s:Qi.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){for(const[,n]of this.tracks)if(n.source===e)return n}getTrackByName(e){for(const[,n]of this.tracks)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrack(X.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrack(X.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrack(X.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(re.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(re.ParticipantNameChanged,e)}setPermissions(e){var n,r,i,o,s;const a=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((l,u)=>{var d;return l!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=e,c&&this.emit(re.ParticipantPermissionsChanged,a),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(re.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=TW(e),n!==this._connectionQuality&&this.emit(re.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTracks.forEach(n=>(n.track instanceof Ra||n.track instanceof Kn)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(le.Muted,()=>{this.emit(re.TrackMuted,e)}),e.on(le.Unmuted,()=>{this.emit(re.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case X.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case X.Kind.Video:this.videoTracks.set(e.trackSid,e);break}}}function xW(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new ji({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class gC extends uo{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=zt.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(le.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new Br({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Di({participantSid:"",trackSids:[this.trackSid]})]});this.emit(le.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?uo.SubscriptionStatus.Unsubscribed:super.isSubscribed?uo.SubscriptionStatus.Subscribed:uo.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?uo.PermissionStatus.Allowed:uo.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(this.track instanceof ku&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&this.track instanceof ku&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(le.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(le.VisibilityChanged,this.handleVisibilityChange),i.off(le.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(le.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(le.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(le.VisibilityChanged,this.handleVisibilityChange),e.on(le.Ended,this.handleEnded),this.emit(le.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(le.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?le.Muted:le.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(le.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(le.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===X.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof ku&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Vi({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=zt.HIGH,this.emit(le.UpdateSettings,e)}}class od extends fR{static fromParticipantInfo(e,n){return new od(e,n.sid,n.identity,n.name,n.metadata)}constructor(e,n,r,i,o,s){super(n,r||"",i,o,s),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(le.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),gt(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(le.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(le.SubscriptionPermissionChanged,n=>{this.emit(re.TrackSubscriptionPermissionChanged,e,n)}),e.on(le.SubscriptionStatusChanged,n=>{this.emit(re.TrackSubscriptionStatusChanged,e,n)}),e.on(le.Subscribed,n=>{this.emit(re.TrackSubscribed,n,e)}),e.on(le.Unsubscribed,n=>{this.emit(re.TrackUnsubscribed,n,e)}),e.on(le.SubscriptionFailed,n=>{this.emit(re.TrackSubscriptionFailed,e.trackSid,n)})}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:X.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrack(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X.Source.Microphone;const n=this.getTrack(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,o,s){let a=this.getTrackPublication(n);if(a||n.startsWith("TR")||this.tracks.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(re.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,o,s-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),gt(a))),this.emit(re.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new ku(e,n,i,o):l=new Ra(e,n,i,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(r),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&l instanceof Ra&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var o,s;let a=this.getTrackPublication(i.sid);if(a)a.updateInfo(i);else{const c=X.kindFromProto(i.type);if(!c)return;a=new gC(c,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),a.updateInfo(i),r.set(i.sid,a);const l=Array.from(this.tracks.values()).find(u=>u.source===(a==null?void 0:a.source));l&&a.source!==X.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:gt(l),newTrack:gt(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.tracks.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),gt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(re.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.tracks.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.tracks.delete(e),r.kind){case X.Kind.Audio:this.audioTracks.delete(e);break;case X.Kind.Video:this.videoTracks.delete(e);break}n&&this.emit(re.TrackUnpublished,r)}setAudioOutput(e){return B(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTracks.forEach(r=>{var i;r.track instanceof Ra&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}class l0 extends fR{constructor(e,n,r,i){super(e,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=an.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new rR)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>xW(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),gt(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),gt(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),gt(o))),this.onTrackMuted(o,o.isMuted)},this.handleSubscribedQualityUpdate=o=>B(this,void 0,void 0,function*(){var s,a,c,l,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const h=this.videoTracks.get(o.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!h.videoTrack)return;const C=yield h.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var f=!0,g=cc(C),m;m=yield g.next(),s=m.done,!s;f=!0){l=m.value,f=!1;const p=l;xG(p)&&(this.log.debug("publish ".concat(p," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),gt(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,p,h.options))}}catch(p){a={error:p}}finally{try{!f&&!s&&(c=g.return)&&(yield c.call(g))}finally{if(a)throw a.error}}}else o.subscribedQualities.length>0&&(yield(d=h.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.tracks.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>B(this,void 0,void 0,function*(){if(o.source===X.Source.ScreenShare||o.source===X.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),gt(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof Kn||o instanceof Nr)try{if(ir())try{const s=yield navigator==null?void 0:navigator.permissions.query({name:o.source===X.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),gt(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),gt(o))),yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),gt(o))),yield o.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==an.NONE}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(fe.RemoteMute,(n,r)=>{const i=this.tracks.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(fe.Connected,this.handleReconnected).on(fe.SignalRestarted,this.handleReconnected).on(fe.SignalResumed,this.handleReconnected).on(fe.Restarting,this.handleReconnecting).on(fe.Resuming,this.handleReconnecting).on(fe.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(fe.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(fe.Disconnected,this.handleDisconnected)}setMetadata(e){var n;this.engine.client.sendUpdateLocalMetadata(e,(n=this.name)!==null&&n!==void 0?n:"")}setName(e){var n;this.engine.client.sendUpdateLocalMetadata((n=this.metadata)!==null&&n!==void 0?n:"",e)}setCameraEnabled(e,n,r){return this.setTrackEnabled(X.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(X.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(X.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(re.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return B(this,void 0,void 0,function*(){this.encryptionType=e?an.GCM:an.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){var o,s;return B(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n}));let a=this.getTrack(e);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(e)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:e}));return}this.pendingPublishing.add(e);try{switch(e){case X.Source.Camera:c=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case X.Source.Microphone:c=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case X.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Ri(e)}const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),gt(d))),l.push(this.publishTrack(d,i));[a]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&!(l instanceof Ri)&&this.emit(re.MediaDevicesError,l),l}finally{this.pendingPublishing.delete(e)}}else if(a&&a.track)if(e===X.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrack(X.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return B(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(X.Source.Camera)||this.pendingPublishing.has(X.Source.Microphone))){this.pendingPublishing.add(X.Source.Camera),this.pendingPublishing.add(X.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(X.Source.Camera),this.pendingPublishing.delete(X.Source.Microphone)}}})}createTracks(e){var n,r;return B(this,void 0,void 0,function*(){const i=Qx(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),o=Mp(i);let s;try{s=yield navigator.mediaDevices.getUserMedia(o)}catch(a){throw a instanceof Error&&(o.audio&&(this.microphoneError=a),o.video&&(this.cameraError=a)),a}return o.audio&&(this.microphoneError=void 0,this.emit(re.AudioStreamAcquired)),o.video&&(this.cameraError=void 0),s.getTracks().map(a=>{const c=a.kind==="audio";c?e.audio:e.video;let l;const u=c?o.audio:o.video;typeof u!="boolean"&&(l=u);const d=lR(a,l,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return d.kind===X.Kind.Video?d.source=X.Source.Camera:d.kind===X.Kind.Audio&&(d.source=X.Source.Microphone),d.mediaStream=s,d})})}createScreenTracks(e){return B(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new aC("getDisplayMedia not supported");e.resolution===void 0&&!WG()&&(e.resolution=lC.h1080fps30.resolution);const n=MG(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Ri("no video track found");const o=new Nr(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=X.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const s=[o];if(r.getAudioTracks().length>0){this.emit(re.AudioStreamAcquired);const a=new Kn(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=X.Source.ScreenShareAudio,s.push(a)}return s})}publishTrack(e,n){var r,i,o,s;return B(this,void 0,void 0,function*(){yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,e instanceof ul&&this.pendingPublishPromises.has(e)&&(yield this.pendingPublishPromises.get(e));let a;if(e instanceof MediaStreamTrack)a=e.getConstraints();else{a=e.constraints;let f;switch(e.source){case X.Source.Microphone:f="audioinput";break;case X.Source.Camera:f="videoinput"}f&&this.activeDeviceMap.has(f)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(f)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new Kn(e,a,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":e=new Nr(e,a,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new Ri("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e instanceof Kn&&e.setAudioContext(this.audioContext);let c;if(this.tracks.forEach(f=>{f.track&&f.track===e&&(c=f)}),c)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),gt(c))),c;const l="channelCount"in e.mediaStreamTrack.getSettings()&&e.mediaStreamTrack.getSettings().channelCount===2||e.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:l;u&&(n||(n={}),n.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),gt(e))),n.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(o=n.dtx)!==null&&o!==void 0||(n.dtx=!1),(s=n.red)!==null&&s!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);Va()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),d.simulcast=!1),d.source&&(e.source=d.source);const h=this.publish(e,d,u);this.pendingPublishPromises.set(e,h);try{return yield h}catch(f){throw f}finally{this.pendingPublishPromises.delete(e)}})}publish(e,n,r){var i,o,s,a,c,l,u,d,h,f,g,m,C;return B(this,void 0,void 0,function*(){Array.from(this.tracks.values()).find(x=>e instanceof ul&&x.source===e.source)&&e.source!==X.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),gt(e))),n.stopMicTrackOnMute&&e instanceof Kn&&(e.stopOnMute=!0),e.source===X.Source.ScreenShare&&ll()&&(n.simulcast=!1),n.videoCodec==="av1"&&!BG()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!FG()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=s0);const v=n.videoCodec;e.on(le.Muted,this.onTrackMuted),e.on(le.Unmuted,this.onTrackUnmuted),e.on(le.Ended,this.handleTrackEnded),e.on(le.UpstreamPaused,this.onTrackUpstreamPaused),e.on(le.UpstreamResumed,this.onTrackUpstreamResumed);const S=new li({cid:e.mediaStreamTrack.id,name:n.name,type:X.kindToProto(e.kind),muted:e.isMuted,source:X.sourceToProto(e.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n==null?void 0:n.stream});let E;if(e.kind===X.Kind.Video){let x={width:0,height:0};try{x=yield e.waitForDimensions()}catch{const M=(a=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&a!==void 0?a:rd.h720.resolution;x={width:M.width,height:M.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),gt(e)),{dims:x}))}S.width=x.width,S.height=x.height,e instanceof Nr&&(wu(v)&&(e.source===X.Source.ScreenShare&&v==="vp9"&&(n.scalabilityMode="L1T3"),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),S.simulcastCodecs=[new ci({codec:v,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:s0}),n.backupCodec&&v!==n.backupCodec.codec&&S.encryption===an.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),S.simulcastCodecs.push(new ci({codec:n.backupCodec.codec,cid:""})))),E=c0(e.source===X.Source.ScreenShare,S.width,S.height,n),S.layers=pw(S.width,S.height,E,wu(n.videoCodec))}else e.kind===X.Kind.Audio&&(E=[{maxBitrate:(u=(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate)!==null&&u!==void 0?u:n.audioBitrate,priority:(h=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&h!==void 0?h:"high",networkPriority:(g=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&g!==void 0?g:"high"}]);if(!this.engine||this.engine.isClosed)throw new Vt("cannot publish track when not connected");const w=yield this.engine.addTrack(S);let A;if(w.codecs.forEach(x=>{A===void 0&&(A=x.mimeType)}),A&&e.kind===X.Kind.Video){const x=qx(A);x!==v&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),gt(e)),{codec:x})),n.videoCodec=x,E=c0(e.source===X.Source.ScreenShare,S.width,S.height,n))}const T=new id(e.kind,w,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(T.options=n,e.sid=w.sid,!this.engine.pcManager)throw new Vt("pcManager is not ready");if(this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:E,trackInfo:w})),e.sender=yield this.engine.createSender(e,n,E),E)if(ll()&&e.kind===X.Kind.Audio){let x;for(const _ of this.engine.pcManager.publisher.getTransceivers())if(_.sender===e.sender){x=_;break}x&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:x,codec:"opus",maxbr:!((m=E[0])===null||m===void 0)&&m.maxBitrate?E[0].maxBitrate/1e3:0})}else e.codec&&wu(e.codec)&&(!((C=E[0])===null||C===void 0)&&C.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:S.cid,codec:e.codec,maxbr:E[0].maxBitrate/1e3});return yield this.engine.negotiate(),e instanceof Nr?e.startMonitor(this.engine.client):e instanceof Kn&&e.startMonitor(),this.addTrackPublication(T),this.emit(re.LocalTrackPublished,T),T})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){var i;return B(this,void 0,void 0,function*(){if(this.encryptionType!==an.NONE)return;let o;if(this.tracks.forEach(d=>{d.track&&d.track===e&&(o=d)}),!o)throw new Ri("track is not published");if(!(e instanceof Nr))throw new Ri("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=bW(e,n,s);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),gt(e)));return}const c=e.addSimulcastTrack(n,a),l=new li({cid:c.mediaStreamTrack.id,type:X.kindToProto(e.kind),muted:e.isMuted,source:X.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:s.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=pw(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new Vt("cannot publish track when not connected");const u=yield this.engine.addTrack(l);yield this.engine.createSimulcastSender(e,c,s,a),yield this.engine.negotiate(),this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:u}))})}unpublishTrack(e,n){var r,i;return B(this,void 0,void 0,function*(){const o=this.getPublicationForTrack(e),s=o?gt(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}e=o.track,e.off(le.Muted,this.onTrackMuted),e.off(le.Unmuted,this.onTrackUnmuted),e.off(le.Ended,this.handleTrackEnded),e.off(le.UpstreamPaused,this.onTrackUpstreamPaused),e.off(le.UpstreamResumed,this.onTrackUpstreamResumed),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&e.stop();let a=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Wt.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),e instanceof Nr){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(a=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:l}))}switch(this.tracks.delete(o.trackSid),o.kind){case X.Kind.Audio:this.audioTracks.delete(o.trackSid);break;case X.Kind.Video:this.videoTracks.delete(o.trackSid);break}return this.emit(re.LocalTrackUnpublished,o),o.setTrack(void 0),a&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return B(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof id)})}republishAllTracks(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return B(this,void 0,void 0,function*(){const r=[];this.tracks.forEach(i=>{i.track&&(e&&(i.options=Object.assign(Object.assign({},i.options),e)),r.push(i))}),yield Promise.all(r.map(i=>B(this,void 0,void 0,function*(){const o=i.track;yield this.unpublishTrack(o,!1),n&&!o.isMuted&&o.source!==X.Source.ScreenShare&&o.source!==X.Source.ScreenShareAudio&&(o instanceof Kn||o instanceof Nr)&&!o.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:i.trackSid})),yield o.restartTrack()),yield this.publishTrack(o,i.options)})))})}publishData(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return B(this,void 0,void 0,function*(){const i=Array.isArray(r)?r:r==null?void 0:r.destination,o=[],s=Array.isArray(r)?void 0:r.topic;i!==void 0&&i.forEach(c=>{c instanceof od?o.push(c.sid):o.push(c)});const a=new _i({kind:n,value:{case:"user",value:new Oi({participantSid:this.sid,payload:e,destinationSids:o,topic:s})}});yield this.engine.sendDataPacket(a,n)})}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var r,i;const o=this.tracks.get(n.sid);if(o){const s=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),gt(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0)}getPublicationForTrack(e){let n;return this.tracks.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(i instanceof Kn||i instanceof Nr)&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}}var je;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting"})(je||(je={}));const RW=2*1e3;class Xf extends io.EventEmitter{constructor(e){var n,r,i;super(),n=this,this.state=je.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Be,this.bufferedEvents=[],this.connect=(o,s,a)=>B(this,void 0,void 0,function*(){var c;const l=yield this.disconnectLock.lock();if(this.state===je.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),l(),Promise.resolve();if(this.connectFuture)return l(),this.connectFuture.promise;this.setAndEmitConnectionState(je.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),o0(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new uw(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().catch(h=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:h}))}));const u=(h,f,g)=>B(this,void 0,void 0,function*(){var m;this.abortController&&this.abortController.abort();const C=new AbortController;this.abortController=C,l==null||l();try{yield this.attemptConnection(g??o,s,a,C),this.abortController=void 0,h()}catch(p){if(this.regionUrlProvider&&p instanceof lt&&p.reason!==3&&p.reason!==0){let v=null;try{v=yield this.regionUrlProvider.getNextBestRegionUrl((m=this.abortController)===null||m===void 0?void 0:m.signal)}catch(S){if(S instanceof lt&&(S.status===401||S.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(S);return}}v?(this.log.info("Initial connection failed with ConnectionError: ".concat(p.message,". Retrying with another region: ").concat(v),this.logContext),yield u(h,f,v)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(p))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(p)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new rR((h,f)=>{u(h,f,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,a,c,l,u)=>B(this,void 0,void 0,function*(){var d,h,f;const g=yield a.join(o,s,{autoSubscribe:c.autoSubscribe,publishOnly:c.publishOnly,adaptiveStream:typeof l.adaptiveStream=="object"?!0:l.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},u.signal);let m=g.serverInfo;if(m||(m={version:g.serverVersion,region:g.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(m).map(C=>{let[p,v]=C;return"".concat(p,": ").concat(v)}).join(", ")),{room:(d=g.room)===null||d===void 0?void 0:d.name,roomSid:(h=g.room)===null||h===void 0?void 0:h.sid,identity:(f=g.participant)===null||f===void 0?void 0:f.identity}),!g.serverVersion)throw new SG("unknown server version");return g.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),l.dynacast=!1),g}),this.applyJoinResponse=o=>{const s=o.participant;this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(o.sifTrailer)},this.attemptConnection=(o,s,a,c)=>B(this,void 0,void 0,function*(){var l,u;this.state===je.Reconnecting?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((l=this.regionUrlProvider)===null||l===void 0)&&l.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},fC),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const d=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(d),this.setupLocalParticipantEvents(),this.emit(ee.SignalConnected)}catch(d){yield this.engine.close(),this.recreateEngine();const h=new lt("could not establish signal connection");throw d instanceof Error&&(h.message="".concat(h.message,": ").concat(d.message)),d instanceof lt&&(h.reason=d.reason,h.status=d.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:d})),h}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new lt("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(d){throw yield this.engine.close(),this.recreateEngine(),d}ir()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),ir()&&(document.addEventListener("freeze",this.onPageLeave),(u=navigator.mediaDevices)===null||u===void 0||u.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(je.Connected),this.emit(ee.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return B(n,void 0,void 0,function*(){var s,a,c,l;const u=yield this.disconnectLock.lock();try{if(this.state===je.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===je.Connecting||this.state===je.Reconnecting)&&(this.log.warn("abort connection attempt",this.logContext),(s=this.abortController)===null||s===void 0||s.abort(),(c=(a=this.connectFuture)===null||a===void 0?void 0:a.reject)===null||c===void 0||c.call(a,new lt("Client initiated disconnect")),this.connectFuture=void 0),!((l=this.engine)===null||l===void 0)&&l.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(o,Wo.CLIENT_INITIATED),this.engine=void 0}finally{u()}})},this.onPageLeave=()=>B(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>B(this,void 0,void 0,function*(){const o=[],s=Qo();if(s&&s.os==="iOS"){const a="livekit-dummy-audio-el";let c=document.getElementById(a);if(!c){c=document.createElement("audio"),c.id=a,c.autoplay=!0,c.hidden=!0;const l=Hg();l.enabled=!0;const u=new MediaStream([l]);c.srcObject=u,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:u,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(ee.Disconnected,()=>{c==null||c.remove(),c=null})}o.push(c)}this.participants.forEach(a=>{a.audioTracks.forEach(c=>{c.track&&c.track.attachedElements.forEach(l=>{o.push(l)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>B(this,void 0,void 0,function*(){const o=[];for(const s of this.participants.values())s.videoTracks.forEach(a=>{var c;(c=a.track)===null||c===void 0||c.attachedElements.forEach(l=>{o.includes(l)||o.push(l)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const o of this.participants.values())this.handleParticipantDisconnected(o.sid,o);this.setAndEmitConnectionState(je.Reconnecting)&&this.emit(ee.Reconnecting)},this.handleSignalRestarted=o=>B(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(je.Connected),this.emit(ee.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}const a=this.identityToSid.get(s.identity);a&&a!==s.sid&&this.handleParticipantDisconnected(a,this.participants.get(a));let c=this.participants.get(s.sid);const l=!c;s.state===Fa.DISCONNECTED?this.handleParticipantDisconnected(s.sid,c):(c=this.getOrCreateParticipant(s.sid,s),l||c.updateInfo(s))})},this.handleActiveSpeakersUpdate=o=>{const s=[],a={};o.forEach(c=>{if(a[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const l=this.participants.get(c.sid);l&&(l.audioLevel=c.level,l.setIsSpeaking(!0),s.push(l))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(c=>{a[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(ee.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(c=>{s.set(c.sid,c)}),o.forEach(c=>{let l=this.participants.get(c.sid);c.sid===this.localParticipant.sid&&(l=this.localParticipant),l&&(l.audioLevel=c.level,l.setIsSpeaking(c.active),c.active?s.set(c.sid,l):s.delete(c.sid))});const a=Array.from(s.values());a.sort((c,l)=>l.audioLevel-c.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(ee.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const a=this.participants.get(s.participantSid);if(!a)return;const c=a.getTrackPublication(s.trackSid);!c||!c.track||(c.track.streamState=X.streamStateFromProto(s.state),a.emit(re.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(ee.TrackStreamStateChanged,c,c.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.participants.get(o.participantSid);if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.participants.values()).find(c=>c.tracks.has(o.trackSid));if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setSubscriptionError(o.err)},this.handleDataPacket=(o,s)=>{const a=this.participants.get(o.participantSid);this.emit(ee.DataReceived,o.payload,a,s,o.topic),a==null||a.emit(re.DataReceived,o.payload,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ee.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ee.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ee.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ee.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>B(this,void 0,void 0,function*(){this.emit(ee.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(ee.RoomMetadataChanged,o.metadata),(s==null?void 0:s.activeRecording)!==o.activeRecording&&this.emitWhenConnected(ee.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const a=this.participants.get(s.participantSid);a&&a.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(ee.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(ee.ParticipantNameChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(ee.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(ee.TrackUnmuted,o,this.localParticipant)},this.onLocalTrackPublished=o=>B(this,void 0,void 0,function*(){var s;this.emit(ee.LocalTrackPublished,o,this.localParticipant),o.track instanceof Kn&&(yield o.track.checkForSilence())&&this.emit(ee.LocalAudioSilenceDetected,o);const a=yield(s=o.track)===null||s===void 0?void 0:s.getDeviceId(),c=_G(o.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.localParticipant.activeDeviceMap.set(c,a),this.emit(ee.ActiveDeviceChanged,c,a))}),this.onLocalTrackUnpublished=o=>{this.emit(ee.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalConnectionQualityChanged=o=>{this.emit(ee.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(ee.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(ee.ParticipantPermissionsChanged,o,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.identityToSid=new Map,this.options=Object.assign(Object.assign({},dW),e),this.log=Yo((r=this.options.loggerName)!==null&&r!==void 0?r:Qi.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},aR),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},cR),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},uW),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new mi,this.localParticipant=new l0("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",xa(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",xa(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",xa(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(e){return B(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&(this.e2eeManager=new JG(this.options.e2ee),this.e2eeManager.on(Ns.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof l0&&(this.isE2EEEnabled=n),this.emit(ee.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Ns.EncryptionError,n=>this.emit(ee.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){return{room:this.name,roomSid:this.sid,identity:this.localParticipant.identity}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}get sid(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.sid)!==null&&n!==void 0?n:""}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new pW(this.options),this.engine.on(fe.ParticipantUpdate,this.handleParticipantUpdates).on(fe.RoomUpdate,this.handleRoomUpdate).on(fe.SpeakersChanged,this.handleSpeakersChanged).on(fe.StreamStateChanged,this.handleStreamStateUpdate).on(fe.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(fe.SubscriptionError,this.handleSubscriptionError).on(fe.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(fe.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(fe.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(fe.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(fe.DataPacketReceived,this.handleDataPacket).on(fe.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(je.Reconnecting)&&this.emit(ee.Reconnecting)}).on(fe.Resumed,()=>{this.setAndEmitConnectionState(je.Connected),this.emit(ee.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),this.emitBufferedEvents()}).on(fe.SignalResumed,()=>{this.bufferedEvents=[],this.state===je.Reconnecting&&this.sendSyncState()}).on(fe.Restarting,this.handleRestarting).on(fe.SignalRestarted,this.handleSignalRestarted).on(fe.DCBufferStatusChanged,(e,n)=>{this.emit(ee.DCBufferStatusChanged,e,n)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Mn.getInstance().getDevices(e,n)}prepareConnection(e,n){return B(this,void 0,void 0,function*(){if(this.state===je.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(o0(new URL(e))&&n){this.regionUrlProvider=new uw(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===je.Disconnected&&(this.regionUrl=r,yield fetch(ew(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(ew(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){if(this.localParticipant.identity===e)return this.localParticipant;const n=this.identityToSid.get(e);if(n)return this.participants.get(n)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return B(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new sn({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new sn({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new sn({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new sn({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>B(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new sn({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>B(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new sn({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new sn({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>B(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new Fr({reason:Wo.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new sn({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveAudioOutputDevice(){var e,n;return(n=(e=this.options.audioOutput)===null||e===void 0?void 0:e.deviceId)!==null&&n!==void 0?n:""}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var i,o,s;return B(this,void 0,void 0,function*(){let a=!1,c=!0;const l=r?{exact:n}:n;if(e==="audioinput"){const u=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.audioTracks.values()).filter(h=>h.source===X.Source.Microphone);try{c=(yield Promise.all(d.map(h=>{var f;return(f=h.audioTrack)===null||f===void 0?void 0:f.setDeviceId(l)}))).every(h=>h===!0)}catch(h){throw this.options.audioCaptureDefaults.deviceId=u,h}}else if(e==="videoinput"){const u=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.videoTracks.values()).filter(h=>h.source===X.Source.Camera);try{c=(yield Promise.all(d.map(h=>{var f;return(f=h.videoTrack)===null||f===void 0?void 0:f.setDeviceId(l)}))).every(h=>h===!0)}catch(h){throw this.options.videoCaptureDefaults.deviceId=u,h}}else if(e==="audiooutput"){if(!i0()&&!this.options.expWebAudioMix||this.options.expWebAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(i=(s=this.options).audioOutput)!==null&&i!==void 0||(s.audioOutput={});const u=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=n,a=u!==l;try{this.options.expWebAudioMix?(o=this.audioContext)===null||o===void 0||o.setSinkId(n):yield Promise.all(Array.from(this.participants.values()).map(d=>d.setAudioOutput({deviceId:n})))}catch(d){throw this.options.audioOutput.deviceId=u,d}}return a&&c&&(this.localParticipant.activeDeviceMap.set(e,n),this.emit(ee.ActiveDeviceChanged,e,n)),c})}setupLocalParticipantEvents(){this.localParticipant.on(re.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(re.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(re.TrackMuted,this.onLocalTrackMuted).on(re.TrackUnmuted,this.onLocalTrackUnmuted).on(re.LocalTrackPublished,this.onLocalTrackPublished).on(re.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(re.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(re.MediaDevicesError,this.onMediaDevicesError).on(re.AudioStreamAcquired,this.startAudio).on(re.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.participants.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===je.Connecting||this.state===je.Reconnecting){const u=()=>{this.onTrackAdded(e,n,r),d()},d=()=>{this.off(ee.Reconnected,u),this.off(ee.Connected,u),this.off(ee.Disconnected,d)};this.once(ee.Reconnected,u),this.once(ee.Connected,u),this.once(ee.Disconnected,d);return}if(this.state===je.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=LG(n.id),o=i[0];let s=i[1],a=e.id;if(s&&s.startsWith("TR")&&(a=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=this.participants.get(o);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(e,a,n,r,l)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.bufferedEvents=[],this.state!==je.Disconnected){this.regionUrl=void 0;try{this.participants.forEach(i=>{i.tracks.forEach(o=>{i.unpublishTrack(o.trackSid)})}),this.localParticipant.tracks.forEach(i=>{var o,s;i.track&&this.localParticipant.unpublishTrack(i.track,e),e&&((o=i.track)===null||o===void 0||o.detach(),(s=i.track)===null||s===void 0||s.stop())}),this.localParticipant.off(re.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(re.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(re.TrackMuted,this.onLocalTrackMuted).off(re.TrackUnmuted,this.onLocalTrackUnmuted).off(re.LocalTrackPublished,this.onLocalTrackPublished).off(re.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(re.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(re.MediaDevicesError,this.onMediaDevicesError).off(re.AudioStreamAcquired,this.startAudio).off(re.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),ir()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(je.Disconnected),this.emit(ee.Disconnected,n)}}}handleParticipantDisconnected(e,n){this.participants.delete(e),n&&(this.identityToSid.delete(n.identity),n.tracks.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(ee.ParticipantDisconnected,n))}acquireAudioContext(){var e,n;return B(this,void 0,void 0,function*(){if(typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?this.audioContext=this.options.expWebAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=uC())!==null&&e!==void 0?e:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.expWebAudioMix&&this.participants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(ee.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=od.fromParticipantInfo(this.engine.client,n):i=new od(this.engine.client,e,"",void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.expWebAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.participants.has(e))return this.participants.get(e);const r=this.createParticipant(e,n);return this.participants.set(e,r),this.identityToSid.set(n.identity,n.sid),this.emitWhenConnected(ee.ParticipantConnected,r),r.on(re.TrackPublished,i=>{this.emitWhenConnected(ee.TrackPublished,i,r)}).on(re.TrackSubscribed,(i,o)=>{i.kind===X.Kind.Audio?(i.on(le.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(le.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===X.Kind.Video&&(i.on(le.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(le.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ee.TrackSubscribed,i,o,r)}).on(re.TrackUnpublished,i=>{this.emit(ee.TrackUnpublished,i,r)}).on(re.TrackUnsubscribed,(i,o)=>{this.emit(ee.TrackUnsubscribed,i,o,r)}).on(re.TrackSubscriptionFailed,i=>{this.emit(ee.TrackSubscriptionFailed,i,r)}).on(re.TrackMuted,i=>{this.emitWhenConnected(ee.TrackMuted,i,r)}).on(re.TrackUnmuted,i=>{this.emitWhenConnected(ee.TrackUnmuted,i,r)}).on(re.ParticipantMetadataChanged,i=>{this.emitWhenConnected(ee.ParticipantMetadataChanged,i,r)}).on(re.ParticipantNameChanged,i=>{this.emitWhenConnected(ee.ParticipantNameChanged,i,r)}).on(re.ConnectionQualityChanged,i=>{this.emitWhenConnected(ee.ConnectionQualityChanged,i,r)}).on(re.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(ee.ParticipantPermissionsChanged,i,r)}).on(re.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(ee.TrackSubscriptionStatusChanged,i,o,r)}).on(re.TrackSubscriptionFailed,(i,o)=>{this.emit(ee.TrackSubscriptionFailed,i,r,o)}).on(re.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(ee.TrackSubscriptionPermissionChanged,i,o,r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.participants.values()).reduce((r,i)=>(r.push(...i.getTracks()),r),[]),n=this.localParticipant.getTracks();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.participants.values())for(const n of e.videoTracks.values())n.isSubscribed&&n instanceof gC&&n.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=ln.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Wo.STATE_MISMATCH))):e=0},RW)}clearConnectionReconcile(){this.connectionReconcileInterval&&ln.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(ee.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.state===je.Connected?this.emit(e,...r):(this.state===je.Reconnecting&&this.bufferedEvents.push([e,r]),!1)}simulateParticipants(e){var n,r;return B(this,void 0,void 0,function*(){const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Al({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:_e.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new wr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ee.SignalConnected),this.emit(ee.Connected),this.setAndEmitConnectionState(je.Connected),i.video){const s=new id(X.Kind.Video,new er({source:Ot.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:wn.AUDIO,name:"video-dummy"}),new Nr(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:qb(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(re.LocalTrackPublished,s)}if(i.audio){const s=new id(X.Kind.Audio,new er({source:Ot.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:wn.AUDIO}),new Kn(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Hg(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(re.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let a=new wr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:Fa.ACTIVE,tracks:[],joinedAt:_e.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(o.video){const l=qb(160*((r=o.aspectRatios[s%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new er({source:Ot.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:wn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}if(o.audio){const l=Hg(),u=new er({source:Ot.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:wn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==ee.ActiveSpeakersChanged){const o=pR(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...r)}}function pR(t){return t.map(e=>{if(e)return Array.isArray(e)?pR(e):typeof e=="object"?"logContext"in e&&e.logContext:e})}var oi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(oi||(oi={}));class El extends io.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=oi.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Xf(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(e){return B(this,void 0,void 0,function*(){if(this.status!==oi.IDLE)throw Error("check is running already");this.setStatus(oi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==oi.SKIPPED&&this.setStatus(this.isSuccess()?oi.SUCCESS:oi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(){return B(this,void 0,void 0,function*(){return this.room.state===je.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return B(this,void 0,void 0,function*(){this.room&&this.room.state!==je.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(oi.SKIPPED)}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function gR(t){var e,n;return B(this,void 0,void 0,function*(){t??(t={}),(e=t.audio)!==null&&e!==void 0||(t.audio=!0),(n=t.video)!==null&&n!==void 0||(t.video=!0);const r=Qx(t,aR,cR),i=Mp(r),o=navigator.mediaDevices.getUserMedia(i);t.audio&&(Mn.userMediaPromiseMap.set("audioinput",o),o.catch(()=>Mn.userMediaPromiseMap.delete("audioinput"))),t.video&&(Mn.userMediaPromiseMap.set("videoinput",o),o.catch(()=>Mn.userMediaPromiseMap.delete("videoinput")));const s=yield o;return s.getTracks().map(a=>{const c=a.kind==="audio";c?t.audio:t.video;let l;const u=c?i.audio:i.video;typeof u!="boolean"&&(l=u),l?l.deviceId=a.getSettings().deviceId:l={deviceId:a.getSettings().deviceId};const d=lR(a,l);return d.kind===X.Kind.Video?d.source=X.Source.Camera:d.kind===X.Kind.Audio&&(d.source=X.Source.Microphone),d.mediaStream=s,d})})}function PW(t){return B(this,void 0,void 0,function*(){return(yield gR({audio:!1,video:t}))[0]})}function NW(t){return B(this,void 0,void 0,function*(){return(yield gR({audio:t,video:!1}))[0]})}class _W extends El{get description(){return"Can publish audio"}perform(){var e;return B(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield NW();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="audio"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class MW extends El{get description(){return"Can publish video"}perform(){var e;return B(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield PW();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="video"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class OW extends El{get description(){return"Resuming connection after interruption"}perform(){var e;return B(this,void 0,void 0,function*(){const n=yield this.connect();let r=!1,i=!1,o;const s=new Promise(c=>{setTimeout(c,5e3),o=c});n.on(ee.Reconnecting,()=>{r=!0}).on(ee.Reconnected,()=>{i=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const a=n.engine.client.onClose;if(a&&a(""),yield s,r){if(!i||n.state!==je.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class DW extends El{get description(){return"Can connect via TURN"}perform(){var e,n;return B(this,void 0,void 0,function*(){const r=new hC,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,a=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(s=!0,a=!0):l.startsWith("turns:")&&(s=!0,a=!0,o=!0),l.startsWith("stun:")&&(a=!0);a?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class LW extends El{get description(){return"Establishing WebRTC connection"}perform(){return B(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(ee.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,o)=>{if(i.candidate){const s=new RTCIceCandidate(i);let a="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(BW(s.address)?a+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(e=!0,a+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Be.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function BW(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class FW extends El{get description(){return"Connecting to signal connection via WebSocket"}perform(){var e,n,r;return B(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new hC;const o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===al.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class N7 extends io.EventEmitter{constructor(e,n){super(),this.checkResults=new Map,this.url=e,this.token=n}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:oi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==oi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return B(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token),i=s=>{this.updateCheck(n,s)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(FW)})}checkWebRTC(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(LW)})}checkTURN(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(DW)})}checkReconnect(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(OW)})}checkPublishAudio(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(_W)})}checkPublishVideo(){return B(this,void 0,void 0,function*(){return this.createAndRunCheck(MW)})}}function UW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=t instanceof ul?t.mediaStreamTrack:t,i=r.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;Be.debug("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&WW(s)&&(o={facingMode:s,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Be.debug("Try to get facing mode from device label: (".concat(r.label,")"));const s=GW(r.label);s!==void 0&&(o=s)}return o}const mw=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),VW=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function GW(t){var e;const n=t.trim().toLowerCase();if(n!=="")return mw.has(n)?mw.get(n):(e=Array.from(VW.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function WW(t){return t===void 0||["user","environment","left","right"].includes(t)}const u0=Math.min,Wc=Math.max,$f=Math.round,Xs=t=>({x:t,y:t}),ZW={left:"right",right:"left",bottom:"top",top:"bottom"},jW={start:"end",end:"start"};function vw(t,e,n){return Wc(t,u0(e,n))}function Dp(t,e){return typeof t=="function"?t(e):t}function Wa(t){return t.split("-")[0]}function Lp(t){return t.split("-")[1]}function mR(t){return t==="x"?"y":"x"}function vR(t){return t==="y"?"height":"width"}function Bp(t){return["top","bottom"].includes(Wa(t))?"y":"x"}function yR(t){return mR(Bp(t))}function zW(t,e,n){n===void 0&&(n=!1);const r=Lp(t),i=yR(t),o=vR(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Kf(s)),[s,Kf(s)]}function HW(t){const e=Kf(t);return[d0(t),e,d0(e)]}function d0(t){return t.replace(/start|end/g,e=>jW[e])}function XW(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function $W(t,e,n,r){const i=Lp(t);let o=XW(Wa(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(d0)))),o}function Kf(t){return t.replace(/left|right|bottom|top/g,e=>ZW[e])}function KW(t){return{top:0,right:0,bottom:0,left:0,...t}}function JW(t){return typeof t!="number"?KW(t):{top:t,right:t,bottom:t,left:t}}function Jf(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function yw(t,e,n){let{reference:r,floating:i}=t;const o=Bp(e),s=yR(e),a=vR(s),c=Wa(e),l=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(c){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Lp(e)){case"start":f[s]-=h*(n&&l?-1:1);break;case"end":f[s]+=h*(n&&l?-1:1);break}return f}const YW=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let l=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=yw(l,r,c),h=r,f={},g=0;for(let m=0;m<a.length;m++){const{name:C,fn:p}=a[m],{x:v,y:S,data:E,reset:w}=await p({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:l,platform:s,elements:{reference:t,floating:e}});u=v??u,d=S??d,f={...f,[C]:{...f[C],...E}},w&&g<=50&&(g++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(l=w.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:u,y:d}=yw(l,h,c)),m=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function CR(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Dp(e,t),g=JW(f),C=a[h?d==="floating"?"reference":"floating":d],p=Jf(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{...s.floating,x:r,y:i}:s.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},w=Jf(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:S,strategy:c}):v);return{top:(p.top-w.top+g.top)/E.y,bottom:(w.bottom-p.bottom+g.bottom)/E.y,left:(p.left-w.left+g.left)/E.x,right:(w.right-p.right+g.right)/E.x}}const QW=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:m=!0,...C}=Dp(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const p=Wa(i),v=Wa(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),E=h||(v||!m?[Kf(a)]:HW(a));!h&&g!=="none"&&E.push(...$W(a,m,g,S));const w=[a,...E],A=await CR(e,C),T=[];let x=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&T.push(A[p]),d){const F=zW(i,s,S);T.push(A[F[0]],A[F[1]])}if(x=[...x,{placement:i,overflows:T}],!T.every(F=>F<=0)){var _,M;const F=(((_=o.flip)==null?void 0:_.index)||0)+1,W=w[F];if(W)return{data:{index:F,overflows:x},reset:{placement:W}};let j=(M=x.filter(H=>H.overflows[0]<=0).sort((H,q)=>H.overflows[1]-q.overflows[1])[0])==null?void 0:M.placement;if(!j)switch(f){case"bestFit":{var D;const H=(D=x.map(q=>[q.placement,q.overflows.filter(te=>te>0).reduce((te,z)=>te+z,0)]).sort((q,te)=>q[1]-te[1])[0])==null?void 0:D[0];H&&(j=H);break}case"initialPlacement":j=a;break}if(i!==j)return{reset:{placement:j}}}return{}}}};async function qW(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Wa(n),a=Lp(n),c=Bp(n)==="y",l=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,d=Dp(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:g}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof g=="number"&&(f=a==="end"?g*-1:g),c?{x:f*u,y:h*l}:{x:h*l,y:f*u}}const e9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,c=await qW(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},t9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:C=>{let{x:p,y:v}=C;return{x:p,y:v}}},...c}=Dp(t,e),l={x:n,y:r},u=await CR(e,c),d=Bp(Wa(i)),h=mR(d);let f=l[h],g=l[d];if(o){const C=h==="y"?"top":"left",p=h==="y"?"bottom":"right",v=f+u[C],S=f-u[p];f=vw(v,f,S)}if(s){const C=d==="y"?"top":"left",p=d==="y"?"bottom":"right",v=g+u[C],S=g-u[p];g=vw(v,g,S)}const m=a.fn({...e,[h]:f,[d]:g});return{...m,data:{x:m.x-n,y:m.y-r}}}}};function $s(t){return IR(t)?(t.nodeName||"").toLowerCase():"#document"}function kr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function ra(t){var e;return(e=(IR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function IR(t){return t instanceof Node||t instanceof kr(t).Node}function qo(t){return t instanceof Element||t instanceof kr(t).Element}function qi(t){return t instanceof HTMLElement||t instanceof kr(t).HTMLElement}function Cw(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof kr(t).ShadowRoot}function Rd(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Wr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function n9(t){return["table","td","th"].includes($s(t))}function mC(t){const e=vC(),n=Wr(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function r9(t){let e=dl(t);for(;qi(e)&&!Fp(e);){if(mC(e))return e;e=dl(e)}return null}function vC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Fp(t){return["html","body","#document"].includes($s(t))}function Wr(t){return kr(t).getComputedStyle(t)}function Up(t){return qo(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function dl(t){if($s(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Cw(t)&&t.host||ra(t);return Cw(e)?e.host:e}function SR(t){const e=dl(t);return Fp(e)?t.ownerDocument?t.ownerDocument.body:t.body:qi(e)&&Rd(e)?e:SR(e)}function h0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=SR(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=kr(i);return o?e.concat(s,s.visualViewport||[],Rd(i)?i:[],s.frameElement&&n?h0(s.frameElement):[]):e.concat(i,h0(i,[],n))}function bR(t){const e=Wr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=qi(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=$f(n)!==o||$f(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function wR(t){return qo(t)?t:t.contextElement}function Zc(t){const e=wR(t);if(!qi(e))return Xs(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=bR(e);let s=(o?$f(n.width):n.width)/r,a=(o?$f(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const i9=Xs(0);function AR(t){const e=kr(t);return!vC()||!e.visualViewport?i9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function o9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==kr(t)?!1:e}function sd(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=wR(t);let s=Xs(1);e&&(r?qo(r)&&(s=Zc(r)):s=Zc(t));const a=o9(o,n,r)?AR(o):Xs(0);let c=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const h=kr(o),f=r&&qo(r)?kr(r):r;let g=h,m=g.frameElement;for(;m&&r&&f!==g;){const C=Zc(m),p=m.getBoundingClientRect(),v=Wr(m),S=p.left+(m.clientLeft+parseFloat(v.paddingLeft))*C.x,E=p.top+(m.clientTop+parseFloat(v.paddingTop))*C.y;c*=C.x,l*=C.y,u*=C.x,d*=C.y,c+=S,l+=E,g=kr(m),m=g.frameElement}}return Jf({width:u,height:d,x:c,y:l})}const s9=[":popover-open",":modal"];function kR(t){return s9.some(e=>{try{return t.matches(e)}catch{return!1}})}function a9(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=ra(r),a=e?kR(e.floating):!1;if(r===s||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=Xs(1);const u=Xs(0),d=qi(r);if((d||!d&&!o)&&(($s(r)!=="body"||Rd(s))&&(c=Up(r)),qi(r))){const h=sd(r);l=Zc(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function c9(t){return Array.from(t.getClientRects())}function ER(t){return sd(ra(t)).left+Up(t).scrollLeft}function l9(t){const e=ra(t),n=Up(t),r=t.ownerDocument.body,i=Wc(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Wc(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+ER(t);const a=-n.scrollTop;return Wr(r).direction==="rtl"&&(s+=Wc(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function u9(t,e){const n=kr(t),r=ra(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;const l=vC();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a,y:c}}function d9(t,e){const n=sd(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=qi(t)?Zc(t):Xs(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,c=i*o.x,l=r*o.y;return{width:s,height:a,x:c,y:l}}function Iw(t,e,n){let r;if(e==="viewport")r=u9(t,n);else if(e==="document")r=l9(ra(t));else if(qo(e))r=d9(e,n);else{const i=AR(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Jf(r)}function TR(t,e){const n=dl(t);return n===e||!qo(n)||Fp(n)?!1:Wr(n).position==="fixed"||TR(n,e)}function h9(t,e){const n=e.get(t);if(n)return n;let r=h0(t,[],!1).filter(a=>qo(a)&&$s(a)!=="body"),i=null;const o=Wr(t).position==="fixed";let s=o?dl(t):t;for(;qo(s)&&!Fp(s);){const a=Wr(s),c=mC(s);!c&&a.position==="fixed"&&(i=null),(o?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Rd(s)&&!c&&TR(t,s))?r=r.filter(u=>u!==s):i=a,s=dl(s)}return e.set(t,r),r}function f9(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?h9(e,this._c):[].concat(n),r],a=s[0],c=s.reduce((l,u)=>{const d=Iw(e,u,i);return l.top=Wc(d.top,l.top),l.right=u0(d.right,l.right),l.bottom=u0(d.bottom,l.bottom),l.left=Wc(d.left,l.left),l},Iw(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function p9(t){const{width:e,height:n}=bR(t);return{width:e,height:n}}function g9(t,e,n){const r=qi(e),i=ra(e),o=n==="fixed",s=sd(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const c=Xs(0);if(r||!r&&!o)if(($s(e)!=="body"||Rd(i))&&(a=Up(e)),r){const d=sd(e,!0,o,e);c.x=d.x+e.clientLeft,c.y=d.y+e.clientTop}else i&&(c.x=ER(i));const l=s.left+a.scrollLeft-c.x,u=s.top+a.scrollTop-c.y;return{x:l,y:u,width:s.width,height:s.height}}function Sw(t,e){return!qi(t)||Wr(t).position==="fixed"?null:e?e(t):t.offsetParent}function xR(t,e){const n=kr(t);if(!qi(t)||kR(t))return n;let r=Sw(t,e);for(;r&&n9(r)&&Wr(r).position==="static";)r=Sw(r,e);return r&&($s(r)==="html"||$s(r)==="body"&&Wr(r).position==="static"&&!mC(r))?n:r||r9(t)||n}const m9=async function(t){const e=this.getOffsetParent||xR,n=this.getDimensions;return{reference:g9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,...await n(t.floating)}}};function v9(t){return Wr(t).direction==="rtl"}const y9={convertOffsetParentRelativeRectToViewportRelativeRect:a9,getDocumentElement:ra,getClippingRect:f9,getOffsetParent:xR,getElementRects:m9,getClientRects:c9,getDimensions:p9,getScale:Zc,isElement:qo,isRTL:v9},C9=t9,I9=QW,S9=(t,e,n)=>{const r=new Map,i={platform:y9,...n},o={...i.platform,_c:r};return YW(t,e,{...i,platform:o})};var RR={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(xP,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(m,C){var p=m[C];if(typeof p.bind=="function")return p.bind(m);try{return Function.prototype.bind.call(p,m)}catch{return function(){return Function.prototype.apply.apply(p,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?c:console[m]!==void 0?a(console,m):console.log!==void 0?a(console,"log"):e}function u(){for(var m=this.getLevel(),C=0;C<i.length;C++){var p=i[C];this[p]=C<m?e:this.methodFactory(p,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function d(m){return function(){typeof console!==n&&(u.call(this),this[m].apply(this,arguments))}}function h(m,C,p){return l(m)||d.apply(this,arguments)}function f(m,C){var p=this,v,S,E,w="loglevel";typeof m=="string"?w+=":"+m:typeof m=="symbol"&&(w=void 0);function A(D){var F=(i[D]||"silent").toUpperCase();if(!(typeof window===n||!w)){try{window.localStorage[w]=F;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+F+";"}catch{}}}function T(){var D;if(!(typeof window===n||!w)){try{D=window.localStorage[w]}catch{}if(typeof D===n)try{var F=window.document.cookie,W=encodeURIComponent(w),j=F.indexOf(W+"=");j!==-1&&(D=/^([^;]+)/.exec(F.slice(j+W.length+1))[1])}catch{}return p.levels[D]===void 0&&(D=void 0),D}}function x(){if(!(typeof window===n||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(D){var F=D;if(typeof F=="string"&&p.levels[F.toUpperCase()]!==void 0&&(F=p.levels[F.toUpperCase()]),typeof F=="number"&&F>=0&&F<=p.levels.SILENT)return F;throw new TypeError("log.setLevel() called with invalid level: "+D)}p.name=m,p.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},p.methodFactory=C||h,p.getLevel=function(){return E??S??v},p.setLevel=function(D,F){return E=_(D),F!==!1&&A(E),u.call(p)},p.setDefaultLevel=function(D){S=_(D),T()||p.setLevel(D,!1)},p.resetLevel=function(){E=null,x(),u.call(p)},p.enableAll=function(D){p.setLevel(p.levels.TRACE,D)},p.disableAll=function(D){p.setLevel(p.levels.SILENT,D)},p.rebuild=function(){if(s!==p&&(v=_(s.getLevel())),u.call(p),s===p)for(var D in o)o[D].rebuild()},v=_(s?s.getLevel():"WARN");var M=T();M!=null&&(E=_(M)),u.call(p)}s=new f,s.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var p=o[C];return p||(p=o[C]=new f(C,s.methodFactory)),p};var g=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=g),s},s.getLoggers=function(){return o},s.default=s,s})})(RR);var b9=RR.exports;const w9=fd(b9);function Ht(t){return typeof t=="function"}function PR(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Yg=PR(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function f0(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Vp=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=ol(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(Ht(u))try{u()}catch(m){o=m instanceof Yg?m.errors:[m]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=ol(d),f=h.next();!f.done;f=h.next()){var g=f.value;try{bw(g)}catch(m){o=o??[],m instanceof Yg?o=Dv(Dv([],Ov(o)),Ov(m.errors)):o.push(m)}}}catch(m){r={error:m}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new Yg(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)bw(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&f0(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&f0(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),NR=Vp.EMPTY;function _R(t){return t instanceof Vp||t&&"closed"in t&&Ht(t.remove)&&Ht(t.add)&&Ht(t.unsubscribe)}function bw(t){Ht(t)?t():t.unsubscribe()}var MR={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},OR={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Dv([t,e],Ov(n)))},clearTimeout:function(t){var e=OR.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function DR(t){OR.setTimeout(function(){throw t})}function p0(){}function Xh(t){t()}var yC=function(t){wl(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,_R(n)&&n.add(r)):r.destination=T9,r}return e.create=function(n,r,i){return new g0(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Vp),A9=Function.prototype.bind;function Qg(t,e){return A9.call(t,e)}var k9=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){ah(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){ah(r)}else ah(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){ah(n)}},t}(),g0=function(t){wl(e,t);function e(n,r,i){var o=t.call(this)||this,s;if(Ht(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&MR.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&Qg(n.next,a),error:n.error&&Qg(n.error,a),complete:n.complete&&Qg(n.complete,a)}):s=n}return o.destination=new k9(s),o}return e}(yC);function ah(t){DR(t)}function E9(t){throw t}var T9={closed:!0,next:p0,error:E9,complete:p0},CC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function LR(t){return t}function x9(t){return t.length===0?LR:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var gn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=P9(e)?e:new g0(e,n,r);return Xh(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=ww(n),new n(function(i,o){var s=new g0({next:function(a){try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[CC]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return x9(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=ww(e),new e(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function ww(t){var e;return(e=t??MR.Promise)!==null&&e!==void 0?e:Promise}function R9(t){return t&&Ht(t.next)&&Ht(t.error)&&Ht(t.complete)}function P9(t){return t&&t instanceof yC||R9(t)&&_R(t)}function N9(t){return Ht(t==null?void 0:t.lift)}function is(t){return function(e){if(N9(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Za(t,e,n,r,i){return new _9(t,e,n,r,i)}var _9=function(t){wl(e,t);function e(n,r,i,o,s,a){var c=t.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(yC),M9=PR(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ks=function(t){wl(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Aw(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new M9},e.prototype.next=function(n){var r=this;Xh(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=ol(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;Xh(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;Xh(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?NR:(this.currentObservers=null,a.push(n),new Vp(function(){r.currentObservers=null,f0(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},e.prototype.asObservable=function(){var n=new gn;return n.source=this,n},e.create=function(n,r){return new Aw(n,r)},e}(gn),Aw=function(t){wl(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:NR},e}(Ks),BR=function(t){wl(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Ks);function O9(t){return t&&Ht(t.schedule)}function D9(t){return t[t.length-1]}function FR(t){return O9(D9(t))?t.pop():void 0}var UR=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function VR(t){return Ht(t==null?void 0:t.then)}function GR(t){return Ht(t[CC])}function WR(t){return Symbol.asyncIterator&&Ht(t==null?void 0:t[Symbol.asyncIterator])}function ZR(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function L9(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var jR=L9();function zR(t){return Ht(t==null?void 0:t[jR])}function HR(t){return GU(this,arguments,function(){var n,r,i,o;return CT(this,function(s){switch(s.label){case 0:n=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Dc(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Dc(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Dc(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function XR(t){return Ht(t==null?void 0:t.getReader)}function Tl(t){if(t instanceof gn)return t;if(t!=null){if(GR(t))return B9(t);if(UR(t))return F9(t);if(VR(t))return U9(t);if(WR(t))return $R(t);if(zR(t))return V9(t);if(XR(t))return G9(t)}throw ZR(t)}function B9(t){return new gn(function(e){var n=t[CC]();if(Ht(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function F9(t){return new gn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function U9(t){return new gn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,DR)})}function V9(t){return new gn(function(e){var n,r;try{for(var i=ol(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function $R(t){return new gn(function(e){W9(t,e).catch(function(n){return e.error(n)})})}function G9(t){return $R(HR(t))}function W9(t,e){var n,r,i,o;return VU(this,void 0,void 0,function(){var s,a;return CT(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=WU(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Zs(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function KR(t,e){return e===void 0&&(e=0),is(function(n,r){n.subscribe(Za(r,function(i){return Zs(r,t,function(){return r.next(i)},e)},function(){return Zs(r,t,function(){return r.complete()},e)},function(i){return Zs(r,t,function(){return r.error(i)},e)}))})}function JR(t,e){return e===void 0&&(e=0),is(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function Z9(t,e){return Tl(t).pipe(JR(e),KR(e))}function j9(t,e){return Tl(t).pipe(JR(e),KR(e))}function z9(t,e){return new gn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function H9(t,e){return new gn(function(n){var r;return Zs(n,e,function(){r=t[jR](),Zs(n,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return Ht(r==null?void 0:r.return)&&r.return()}})}function YR(t,e){if(!t)throw new Error("Iterable cannot be null");return new gn(function(n){Zs(n,e,function(){var r=t[Symbol.asyncIterator]();Zs(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function X9(t,e){return YR(HR(t),e)}function $9(t,e){if(t!=null){if(GR(t))return Z9(t,e);if(UR(t))return z9(t,e);if(VR(t))return j9(t,e);if(WR(t))return YR(t,e);if(zR(t))return H9(t,e);if(XR(t))return X9(t,e)}throw ZR(t)}function K9(t,e){return e?$9(t,e):Tl(t)}function Zn(t,e){return is(function(n,r){var i=0;n.subscribe(Za(r,function(o){r.next(t.call(e,o,i++))}))})}function J9(t,e,n,r,i,o,s,a){var c=[],l=0,u=0,d=!1,h=function(){d&&!c.length&&!l&&e.complete()},f=function(m){return l<r?g(m):c.push(m)},g=function(m){o&&e.next(m),l++;var C=!1;Tl(n(m,u++)).subscribe(Za(e,function(p){i==null||i(p),o?f(p):e.next(p)},function(){C=!0},void 0,function(){if(C)try{l--;for(var p=function(){var v=c.shift();s?Zs(e,s,function(){return g(v)}):g(v)};c.length&&l<r;)p();h()}catch(v){e.error(v)}}))};return t.subscribe(Za(e,f,function(){d=!0,h()})),function(){a==null||a()}}function QR(t,e,n){return n===void 0&&(n=1/0),Ht(e)?QR(function(r,i){return Zn(function(o,s){return e(r,o,i,s)})(Tl(t(r,i)))},n):(typeof e=="number"&&(n=e),is(function(r,i){return J9(r,i,t,n)}))}function Y9(t){return t===void 0&&(t=1/0),QR(LR,t)}function Q9(){return Y9(1)}function m0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Q9()(K9(t,FR(t)))}function qR(t,e){return is(function(n,r){var i=0;n.subscribe(Za(r,function(o){return t.call(e,o,i++)&&r.next(o)}))})}function q9(t,e,n,r,i){return function(o,s){var a=n,c=e,l=0;o.subscribe(Za(s,function(u){var d=l++;c=a?t(c,u,d):(a=!0,u),r&&s.next(c)},i&&function(){a&&s.next(c),s.complete()}))}}function e6(t){return is(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function t6(t,e){return is(q9(t,e,arguments.length>=2,!0))}function Si(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=FR(t);return is(function(r,i){(n?m0(t,r,n):m0(t,r)).subscribe(i)})}function kw(t){return is(function(e,n){Tl(t).subscribe(Za(n,function(){return n.complete()},p0)),!n.closed&&e.subscribe(n)})}var n6=Object.defineProperty,r6=Object.defineProperties,i6=Object.getOwnPropertyDescriptors,Yf=Object.getOwnPropertySymbols,eP=Object.prototype.hasOwnProperty,tP=Object.prototype.propertyIsEnumerable,Ew=(t,e,n)=>e in t?n6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,v0=(t,e)=>{for(var n in e||(e={}))eP.call(e,n)&&Ew(t,n,e[n]);if(Yf)for(var n of Yf(e))tP.call(e,n)&&Ew(t,n,e[n]);return t},o6=(t,e)=>r6(t,i6(e)),s6=(t,e)=>{var n={};for(var r in t)eP.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Yf)for(var r of Yf(t))e.indexOf(r)<0&&tP.call(t,r)&&(n[r]=t[r]);return n},os=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())}),nP="lk";function IC(t){return typeof t>"u"?!1:a6(t)||c6(t)}function a6(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function c6(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function l6(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function rP(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(l6(t))return`${t.participant.identity}_${t.source}_placeholder`;if(IC(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function u6(t){return t instanceof l0}function d6(t,e){return os(this,null,function*(){const{x:n,y:r}=yield S9(t,e,{placement:"top",middleware:[e9(6),I9(),C9({padding:5})]});return{x:n,y:r}})}function h6(t,e){return!t.contains(e.target)}var f6=[ee.ConnectionStateChanged,ee.RoomMetadataChanged,ee.ActiveSpeakersChanged,ee.ConnectionQualityChanged,ee.ParticipantConnected,ee.ParticipantDisconnected,ee.ParticipantPermissionsChanged,ee.ParticipantMetadataChanged,ee.TrackMuted,ee.TrackUnmuted,ee.TrackPublished,ee.TrackUnpublished,ee.TrackStreamStateChanged,ee.TrackSubscriptionFailed,ee.TrackSubscriptionPermissionChanged,ee.TrackSubscriptionStatusChanged],p6=[...f6,ee.LocalTrackPublished,ee.LocalTrackUnpublished],g6=[re.ConnectionQualityChanged,re.IsSpeakingChanged,re.ParticipantMetadataChanged,re.ParticipantPermissionsChanged,re.TrackMuted,re.TrackUnmuted,re.TrackPublished,re.TrackUnpublished,re.TrackStreamStateChanged,re.TrackSubscriptionFailed,re.TrackSubscriptionPermissionChanged,re.TrackSubscriptionStatusChanged];[...g6,re.LocalTrackPublished,re.LocalTrackUnpublished];var Ke=w9.getLogger("lk-components-js");Ke.setDefaultLevel("WARN");function m6(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var v6=[],y6={showChat:!1,unreadMessages:0};function SC(t,...e){return new gn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(Si(t))}function bC(t,e){return new gn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function C6(t){return bC(t,ee.ConnectionStateChanged).pipe(Zn(([e])=>e),Si(t.state))}function I6(t,e,n=!0){var r;const i=()=>os(this,null,function*(){try{const a=yield Xf.getLocalDevices(t,n);o.next(a)}catch(a){e==null||e(a)}}),o=new Ks,s=o.pipe(e6(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return m0(Xf.getLocalDevices(t,n).catch(a=>e==null?void 0:e(a)),s)}function S6(t){return bC(t,ee.DataReceived)}function b6(t){return SC(t,ee.AudioPlaybackStatusChanged).pipe(Zn(n=>({canPlayAudio:n.canPlaybackAudio})))}function w6(t){return SC(t,ee.VideoPlaybackStatusChanged).pipe(Zn(n=>({canPlayVideo:n.canPlaybackVideo})))}function A6(t,e){return bC(t,ee.ActiveDeviceChanged).pipe(qR(([n])=>n===e),Zn(([n,r])=>(Ke.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),Si(t.getActiveDevice(e)))}function Zr(t){return`${nP}-${t}`}function k6(t){const e=y0(t),n=AC(t.participant).pipe(Zn(()=>y0(t)),Si(e));return{className:Zr(t.source===X.Source.Camera||t.source===X.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function y0(t){if(IC(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTracks().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackByName(n);if(e)return r.getTrack(e);throw new Error("At least one of source and name needs to be defined")}}function wC(t,...e){return new gn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(Si(t))}function AC(t){return wC(t,re.TrackMuted,re.TrackUnmuted,re.ParticipantPermissionsChanged,re.TrackPublished,re.TrackUnpublished,re.LocalTrackPublished,re.LocalTrackUnpublished,re.MediaDevicesError,re.TrackSubscriptionStatusChanged).pipe(Zn(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:o}=n,s=n.getTrack(X.Source.Microphone),a=n.getTrack(X.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:o,cameraTrack:a,microphoneTrack:s,participant:n}}))}function E6(t){return wC(t,re.ParticipantMetadataChanged).pipe(Zn(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),Si({name:t.name,identity:t.identity,metadata:t.metadata}))}function T6(t){return kC(t,re.ConnectionQualityChanged).pipe(Zn(([n])=>n),Si(t.connectionQuality))}function kC(t,e){return new gn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function iP(t){var e,n,r,i;return wC(t.participant,re.TrackMuted,re.TrackUnmuted,re.TrackSubscribed,re.TrackUnsubscribed,re.LocalTrackPublished,re.LocalTrackUnpublished).pipe(Zn(o=>{var s,a;const c=(s=t.publication)!=null?s:o.getTrack(t.source);return(a=c==null?void 0:c.isMuted)!=null?a:!0}),Si((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrack(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function x6(t){return kC(t,re.IsSpeakingChanged).pipe(Zn(([e])=>e))}function R6(t,e={}){var n;let r;const i=new gn(c=>(r=c,()=>a.unsubscribe())).pipe(Si(Array.from(t.participants.values()))),o=(n=e.additionalRoomEvents)!=null?n:p6,s=Array.from(new Set([ee.ParticipantConnected,ee.ParticipantDisconnected,ee.ConnectionStateChanged,...o])),a=SC(t,...s).subscribe(c=>r==null?void 0:r.next(Array.from(c.participants.values())));return t.participants.size>0&&(r==null||r.next(Array.from(t.participants.values()))),i}function P6(t){return kC(t,re.ParticipantPermissionsChanged).pipe(Zn(()=>t.permissions),Si(t.permissions))}function N6(t,e,n){const{localParticipant:r}=e,i=(l,u)=>{let d=!1;switch(l){case X.Source.Camera:d=u.isCameraEnabled;break;case X.Source.Microphone:d=u.isMicrophoneEnabled;break;case X.Source.ScreenShare:d=u.isScreenShareEnabled;break}return d},o=AC(r).pipe(Zn(l=>i(t,l.participant)),Si(i(t,r))),s=new Ks,a=(l,u)=>os(this,null,function*(){try{switch(u??(u=n),s.next(!0),t){case X.Source.Camera:yield r.setCameraEnabled(l??!r.isCameraEnabled,u);break;case X.Source.Microphone:yield r.setMicrophoneEnabled(l??!r.isMicrophoneEnabled,u);break;case X.Source.ScreenShare:yield r.setScreenShareEnabled(l??!r.isScreenShareEnabled,u);break;default:break}}finally{s.next(!1)}});return{className:Zr("button"),toggle:a,enabledObserver:o,pendingObserver:s.asObservable()}}function _6(){let t=!1;const e=new Ks,n=new Ks,r=o=>{n.next(!0),t=o??!t,e.next(t),n.next(!1)};return{className:Zr("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function M6(t,e,n){const r=new BR(void 0),i=e?A6(e,t):r.asObservable(),o=(a,...c)=>os(this,[a,...c],function*(l,u={}){var d,h,f;if(e){Ke.debug(`Switching active device of kind "${t}" with id ${l}.`),yield e.switchActiveDevice(t,l,u.exact);const g=(d=e.getActiveDevice(t))!=null?d:l;g!==l&&l!=="default"&&Ke.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${g}) instead.`);let m;t==="audioinput"?m=(h=e.localParticipant.getTrack(X.Source.Microphone))==null?void 0:h.track:t==="videoinput"&&(m=(f=e.localParticipant.getTrack(X.Source.Camera))==null?void 0:f.track);const C=l==="default"&&!m||l==="default"&&(m==null?void 0:m.mediaStreamTrack.label.startsWith("Default"));r.next(C?l:g)}else if(n){yield n.setDeviceId(u.exact?{exact:l}:l);const g=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:g)}else r.value!==l&&(Ke.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:Zr("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}}function O6(t){const e=r=>{t.disconnect(r)};return{className:Zr("disconnect-button"),disconnect:e}}function D6(t){const e=Zr("connection-quality"),n=T6(t);return{className:e,connectionQualityObserver:n}}function L6(t){let e="track-muted-indicator-camera";switch(t.source){case X.Source.Camera:e="track-muted-indicator-camera";break;case X.Source.Microphone:e="track-muted-indicator-microphone";break}const n=Zr(e),r=iP(t);return{className:n,mediaMutedObserver:r}}function B6(t){return{className:"lk-participant-name",infoObserver:E6(t)}}function F6(){return{className:Zr("participant-tile")}}var U6={CHAT:"lk-chat-topic"};function oP(t,e,n){return os(this,arguments,function*(r,i,o,s={}){const{kind:a,destination:c}=s;yield r.publishData(i,a??Gt.RELIABLE,{destination:c,topic:o})})}function V6(t,e,n){const r=S6(t).pipe(qR(([,,,a])=>e===void 0||a===e),Zn(([a,c,,l])=>{const u={payload:a,topic:l,from:c};return n==null||n(u),u}));let i;const o=new gn(a=>{i=a});return{messageObservable:r,isSendingObservable:o,send:(a,...c)=>os(this,[a,...c],function*(l,u={}){i.next(!0);try{yield oP(t.localParticipant,l,e,u)}finally{i.next(!1)}})}}var G6=new TextEncoder,W6=new TextDecoder,ch=new Map,Z6=t=>G6.encode(JSON.stringify({message:t.message,timestamp:t.timestamp})),j6=t=>JSON.parse(W6.decode(t));function z6(t,e){var n,r;const i=new Ks,{messageDecoder:o,messageEncoder:s,channelTopic:a}=e??{},c=a??U6.CHAT;let l=!1;ch.has(t)||(l=!0);const u=(n=ch.get(t))!=null?n:new Map,d=(r=u.get(c))!=null?r:new Ks;if(u.set(c,d),ch.set(t,u),l){const{messageObservable:v}=V6(t,c);v.pipe(kw(i)).subscribe(d)}const h=o??j6,f=d.pipe(Zn(v=>{const S=h(v.payload);return o6(v0({},S),{from:v.from})}),t6((v,S)=>[...v,S],[]),kw(i)),g=new BR(!1),m=s??Z6,C=v=>os(this,null,function*(){const S=Date.now(),E=m({message:v,timestamp:S});g.next(!0);try{yield oP(t.localParticipant,E,c,{kind:Gt.RELIABLE}),d.next({payload:E,topic:c,from:t.localParticipant})}finally{g.next(!1)}});function p(){i.next(),i.complete(),ch.clear()}return t.once(ee.Disconnected,p),{messageObservable:f,isSendingObservable:g,send:C}}function H6(){const t=n=>os(this,null,function*(){Ke.info("Start Audio for room: ",n),yield n.startAudio()});return{className:Zr("start-audio-button"),roomAudioPlaybackAllowedObservable:b6,handleStartAudioPlayback:t}}function X6(){const t=n=>os(this,null,function*(){Ke.info("Start Video for room: ",n),yield n.startVideo()});return{className:Zr("start-audio-button"),roomVideoPlaybackAllowedObservable:w6,handleStartVideoPlayback:t}}function $6(){return{className:[Zr("button"),Zr("chat-toggle")].join(" ")}}function K6(){return{className:"lk-room-container"}}function J6(t,e){if(typeof localStorage>"u"){Ke.error("Local storage is not available.");return}try{localStorage.setItem(t,JSON.stringify(e))}catch(n){Ke.error(`Error setting item to local storage: ${n}`)}}function Y6(t){if(typeof localStorage>"u"){Ke.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){Ke.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){Ke.error(`Error getting item from local storage: ${e}`);return}}function Q6(t){return{load:()=>Y6(t),save:e=>J6(t,e)}}var q6=`${nP}-user-choices`,sa={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:"",e2ee:!1,sharedPassphrase:""},{load:eZ,save:tZ}=Q6(q6);function nZ(t,e=!1){if(e===!0)return;const n=t,r=s6(n,["e2ee","sharedPassphrase"]);tZ(r)}function rZ(t,e=!1){var n,r,i,o,s,a,c;const l={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:sa.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:sa.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:sa.videoDeviceId,audioDeviceId:(o=t==null?void 0:t.audioDeviceId)!=null?o:sa.audioDeviceId,username:(s=t==null?void 0:t.username)!=null?s:sa.username,e2ee:(a=t==null?void 0:t.e2ee)!=null?a:sa.e2ee,sharedPassphrase:(c=t==null?void 0:t.sharedPassphrase)!=null?c:sa.sharedPassphrase};if(e)return l;{const u=eZ();return v0(v0({},l),u??{})}}function sP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=sP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function iZ(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=sP(t))&&(r&&(r+=" "),r+=e);return r}var oZ=Object.defineProperty,sZ=Object.defineProperties,aZ=Object.getOwnPropertyDescriptors,Qf=Object.getOwnPropertySymbols,aP=Object.prototype.hasOwnProperty,cP=Object.prototype.propertyIsEnumerable,Tw=(t,e,n)=>e in t?oZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,be=(t,e)=>{for(var n in e||(e={}))aP.call(e,n)&&Tw(t,n,e[n]);if(Qf)for(var n of Qf(e))cP.call(e,n)&&Tw(t,n,e[n]);return t},kn=(t,e)=>sZ(t,aZ(e)),mn=(t,e)=>{var n={};for(var r in t)aP.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Qf)for(var r of Qf(t))e.indexOf(r)<0&&cP.call(t,r)&&(n[r]=t[r]);return n},lP=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});function Tr(t,e){const[n,r]=b.useState(e);return b.useEffect(()=>{if(typeof window>"u"||!t)return;const i=t.subscribe(r);return()=>i.unsubscribe()},[t]),n}function cZ(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=b.useState(e(t));function i(){r(e(t))}return b.useEffect(()=>{const o=window.matchMedia(t);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[t]),n}function lZ(t,e){if(e.msg==="show_chat")return kn(be({},t),{showChat:!0,unreadMessages:0});if(e.msg==="hide_chat")return kn(be({},t),{showChat:!1});if(e.msg==="toggle_chat"){const n=kn(be({},t),{showChat:!t.showChat});return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?kn(be({},t),{unreadMessages:e.count}):be({},t)}function uZ(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:be({},t)}var EC=b.createContext(void 0);function dZ(){const t=b.useContext(EC);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function hZ(t){const[e,n]=b.useReducer(uZ,v6),[r,i]=b.useReducer(lZ,y6);return t??{pin:{dispatch:n,state:e},widget:{dispatch:i,state:r}}}function uP(){return b.useContext(EC)}var fZ=b.createContext(void 0);function Pd(){return b.useContext(fZ)}var TC=b.createContext(void 0);function Gp(){return b.useContext(TC)}function Ya(t){var e;const n=Gp(),r=Pd(),i=(e=t??n)!=null?e:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var xC=b.createContext(void 0);function Wp(){const t=b.useContext(xC);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Zp(){return b.useContext(xC)}function Nd(t){const e=Zp(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var pZ=b.createContext(void 0);function gZ(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}function ia(...t){const e=be({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const o=e[i],s=r[i];typeof o=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=gZ(o,s):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?e[i]=iZ(o,s):e[i]=s!==void 0?s:o}}return e}function mZ(t={}){const e=Ya(t.participant),{className:n,connectionQualityObserver:r}=b.useMemo(()=>D6(e),[e]),i=Tr(r,Dr.Unknown);return{className:n,quality:i}}function vZ(t){const e=Nd(t),n=b.useMemo(()=>C6(e),[e]);return Tr(n,e.state)}function yZ(t){const e=Wp(),n=vZ(e);return{buttonProps:b.useMemo(()=>{const{className:i,disconnect:o}=O6(e);return ia(t,{className:i,onClick:()=>{var a;return o((a=t.stopTracks)!=null?a:!0)},disabled:n===je.Disconnected})},[e,t,n])}}function CZ(t){if(t.publication instanceof id){const e=t.publication.track;if(e){const{facingMode:n}=UW(e);return n}}return"undefined"}function xw(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,o=Ya(i),s=typeof t=="string"?{participant:o,source:t}:t,[a,c]=b.useState(!!((n=s.publication)!=null&&n.isMuted||(r=o.getTrack(s.source))!=null&&r.isMuted));return b.useEffect(()=>{const l=iP(s).subscribe(c);return()=>l.unsubscribe()},[rP(s)]),a}function IZ(t){const e=Ya(t),n=b.useMemo(()=>x6(e),[e]);return Tr(n,e.isSpeaking)}var SZ={connect:!0,audio:!1,video:!1};function bZ(t){const e=be(be({},SZ),t),{token:n,serverUrl:r,options:i,room:o,connectOptions:s,connect:a,audio:c,video:l,screen:u,onConnected:d,onDisconnected:h,onError:f,onMediaDeviceFailure:g,onEncryptionError:m,simulateParticipants:C}=e,p=mn(e,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&o&&Ke.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,S]=b.useState();b.useEffect(()=>{S(o??new Xf(i))},[o]);const E=b.useMemo(()=>{const{className:w}=K6();return ia(p,{className:w})},[p]);return b.useEffect(()=>{if(!v)return;const w=()=>{const x=v.localParticipant;Ke.debug("trying to publish local tracks"),Promise.all([x.setMicrophoneEnabled(!!c,typeof c!="boolean"?c:void 0),x.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),x.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(_=>{Ke.warn(_),f==null||f(_)})},A=x=>{const _=nd.getFailure(x);g==null||g(_)},T=x=>{m==null||m(x)};return v.on(ee.SignalConnected,w).on(ee.MediaDevicesError,A).on(ee.EncryptionError,T),()=>{v.off(ee.SignalConnected,w).off(ee.MediaDevicesError,A).off(ee.EncryptionError,T)}},[v,c,l,u,f,m,g]),b.useEffect(()=>{if(v){if(C){v.simulateParticipants({participants:{count:C},publish:{audio:!0,useRealTracks:!0}});return}if(!n){Ke.debug("no token yet");return}if(!r){Ke.warn("no livekit url provided"),f==null||f(Error("no livekit url provided"));return}a?(Ke.debug("connecting"),v.connect(r,n,s).catch(w=>{Ke.warn(w),f==null||f(w)})):(Ke.debug("disconnecting because connect is false"),v.disconnect())}},[a,n,JSON.stringify(s),v,f,r,C]),b.useEffect(()=>{if(!v)return;const w=A=>{switch(A){case je.Disconnected:h&&h();break;case je.Connected:d&&d();break}};return v.on(ee.ConnectionStateChanged,w),()=>{v.off(ee.ConnectionStateChanged,w)}},[n,d,h,v]),b.useEffect(()=>{if(v)return()=>{Ke.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:E}}function wZ(t={}){const e=Nd(t.room),[n,r]=b.useState(e.localParticipant),[i,o]=b.useState(n.isMicrophoneEnabled),[s,a]=b.useState(n.isMicrophoneEnabled),[c,l]=b.useState(n.lastMicrophoneError),[u,d]=b.useState(n.lastCameraError),[h,f]=b.useState(n.isMicrophoneEnabled),[g,m]=b.useState(void 0),[C,p]=b.useState(void 0),v=S=>{a(S.isCameraEnabled),o(S.isMicrophoneEnabled),f(S.isScreenShareEnabled),p(S.cameraTrack),m(S.microphoneTrack),l(S.participant.lastMicrophoneError),d(S.participant.lastCameraError),r(S.participant)};return b.useEffect(()=>{const S=AC(n).subscribe(v);return()=>S.unsubscribe()},[n]),{isMicrophoneEnabled:i,isScreenShareEnabled:h,isCameraEnabled:s,microphoneTrack:g,cameraTrack:C,lastMicrophoneError:c,lastCameraError:u,localParticipant:n}}function AZ(){const t=Wp(),e=b.useMemo(()=>P6(t.localParticipant),[t]);return Tr(e,t.localParticipant.permissions)}function kZ({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const o=Zp(),s=b.useMemo(()=>I6(t,i,r),[t,r,i]),a=Tr(s,[]),[c,l]=b.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:h}=b.useMemo(()=>M6(t,e??o,n),[t,e,o,n]);return b.useEffect(()=>{const f=d.subscribe(g=>{Ke.info("setCurrentDeviceId",g),g&&l(g)});return()=>{f==null||f.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:c,setActiveMediaDevice:h}}function EZ(t){return t!==void 0}function xl(...t){return ia(...t.filter(EZ))}function dP(t,e,n){return b.Children.map(t,r=>b.isValidElement(r)&&b.Children.only(t)?b.cloneElement(r,kn(be({},e),{key:n})):r)}function hP(t,e={}){var n;const[r,i]=b.useState(y0(t)),[o,s]=b.useState(r==null?void 0:r.isMuted),[a,c]=b.useState(r==null?void 0:r.isSubscribed),[l,u]=b.useState(r==null?void 0:r.track),[d,h]=b.useState("landscape"),f=b.useRef(),{className:g,trackObserver:m}=b.useMemo(()=>k6(t),[(n=t.participant.sid)!=null?n:t.participant.identity,t.source,IC(t)&&t.publication.trackSid]);return b.useEffect(()=>{const C=m.subscribe(p=>{Ke.debug("update track",p),i(p),s(p==null?void 0:p.isMuted),c(p==null?void 0:p.isSubscribed),u(p==null?void 0:p.track)});return()=>C==null?void 0:C.unsubscribe()},[m]),b.useEffect(()=>{var C,p;return l&&(f.current&&l.detach(f.current),(C=e.element)!=null&&C.current&&!(u6(t.participant)&&(l==null?void 0:l.kind)==="audio")&&l.attach(e.element.current)),f.current=(p=e.element)==null?void 0:p.current,()=>{f.current&&(l==null||l.detach(f.current))}},[l,e.element]),b.useEffect(()=>{var C,p;if(typeof((C=r==null?void 0:r.dimensions)==null?void 0:C.width)=="number"&&typeof((p=r==null?void 0:r.dimensions)==null?void 0:p.height)=="number"){const v=r.dimensions.width>r.dimensions.height?"landscape":"portrait";h(v)}},[r]),{publication:r,isMuted:o,isSubscribed:a,track:l,elementProps:xl(e.props,be({className:g,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}function TZ({trackRef:t,participant:e,source:n,publication:r,onParticipantClick:i,disableSpeakingIndicator:o,htmlProps:s}){const a=Pd(),c=Ya(e),l=b.useMemo(()=>{var m,C,p,v,S,E;const w=(C=(m=t==null?void 0:t.source)!=null?m:a==null?void 0:a.source)!=null?C:n;if(w===void 0)throw new Error("Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.");return{participant:(v=(p=t==null?void 0:t.participant)!=null?p:a==null?void 0:a.participant)!=null?v:c,publication:(E=(S=t==null?void 0:t.publication)!=null?S:a==null?void 0:a.publication)!=null?E:r,source:w}},[t==null?void 0:t.participant,t==null?void 0:t.source,t==null?void 0:t.publication,a==null?void 0:a.participant,a==null?void 0:a.source,a==null?void 0:a.publication,c,n,r]),u=b.useMemo(()=>{const{className:m}=F6();return ia(s,{className:m,onClick:C=>{var p,v;if((p=s.onClick)==null||p.call(s,C),typeof i=="function"){const S=(v=l.publication)!=null?v:l.participant.getTrack(l.source);i({participant:l.participant,track:S})}}})},[s,i,l.publication,l.source,l.participant]),d=xw(X.Source.Camera,{participant:l.participant}),h=xw(X.Source.Microphone,{participant:l.participant}),f=IZ(l.participant),g=CZ(l);return{elementProps:be({"data-lk-audio-muted":h,"data-lk-video-muted":d,"data-lk-speaking":o===!0?!1:f,"data-lk-local-participant":l.participant.isLocal,"data-lk-source":l.source,"data-lk-facing-mode":g},u)}}function xZ(t={}){const e=Nd(t.room),[n,r]=b.useState([]);return b.useEffect(()=>{const i=R6(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(r);return()=>i.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function RZ(t={}){const e=xZ(t),{localParticipant:n}=wZ(t);return[n,...e]}function PZ({room:t,props:e}){const n=Nd(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=b.useMemo(()=>H6(),[]),s=b.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=Tr(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:b.useMemo(()=>ia(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayAudio:a}}function NZ({room:t,props:e}){const n=Nd(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=b.useMemo(()=>X6(),[]),s=b.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=Tr(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:b.useMemo(()=>ia(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayVideo:a}}function _Z({props:t}){const{dispatch:e,state:n}=dZ().widget,{className:r}=b.useMemo(()=>$6(),[]);return{mergedProps:b.useMemo(()=>ia(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function MZ(t,e={}){var n,r,i,o;let s=Pd();const a=(r=(n=Gp())!=null?n:e.participant)!=null?r:s==null?void 0:s.participant;if(typeof t=="string"){if(!a)throw Error("Participant missing, either provide it via context or pass it in directly");s={participant:a,source:t}}else if(t)s=t;else throw Error("No track reference found, either provide it via context or pass it in directly");const{className:c,mediaMutedObserver:l}=b.useMemo(()=>L6(s),[rP(s)]);return{isMuted:Tr(l,!!((i=s.publication)!=null&&i.isMuted||(o=s.participant.getTrack(s.source))!=null&&o.isMuted)),className:c}}function OZ(t){var e=t,{source:n,onChange:r,initialState:i,captureOptions:o}=e,s=mn(e,["source","onChange","initialState","captureOptions"]),a;const c=Zp(),l=(a=c==null?void 0:c.localParticipant)==null?void 0:a.getTrack(n),{toggle:u,className:d,pendingObserver:h,enabledObserver:f}=b.useMemo(()=>c?N6(n,c,o):_6(),[c,n,JSON.stringify(o)]),g=Tr(h,!1),m=Tr(f,i??!!(l!=null&&l.isEnabled));b.useEffect(()=>{r==null||r(m)},[m,r]),b.useEffect(()=>{i!==void 0&&(Ke.debug("forcing initial toggle state",n,i),u(i))},[]);const C=b.useMemo(()=>ia(s,{className:d}),[s,d]),p=b.useCallback(v=>{var S;u(),(S=s.onClick)==null||S.call(s,v)},[s,u]);return{toggle:u,enabled:m,pending:g,track:l,buttonProps:kn(be({},C),{"aria-pressed":m,"data-lk-source":n,"data-lk-enabled":m,disabled:g,onClick:p})}}function DZ(t,e={}){return hP(t,e)}function LZ(t){const e=Wp(),[n,r]=b.useState(),i=Tr(n==null?void 0:n.isSendingObservable,!1),o=Tr(n==null?void 0:n.messageObservable,[]);return b.useEffect(()=>{const s=z6(e,t);r(s)},[e,t]),{send:n==null?void 0:n.send,chatMessages:o,isSending:i}}function BZ(t={}){var e;const[n,r]=b.useState(rZ(t.defaults,(e=t.preventLoad)!=null?e:!1)),i=b.useCallback(l=>{r(u=>kn(be({},u),{audioEnabled:l}))},[]),o=b.useCallback(l=>{r(u=>kn(be({},u),{videoEnabled:l}))},[]),s=b.useCallback(l=>{r(u=>kn(be({},u),{audioDeviceId:l}))},[]),a=b.useCallback(l=>{r(u=>kn(be({},u),{videoDeviceId:l}))},[]),c=b.useCallback(l=>{r(u=>kn(be({},u),{username:l}))},[]);return b.useEffect(()=>{var l;nZ(n,(l=t.preventSave)!=null?l:!1)},[n,t.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:o,saveAudioInputDeviceId:s,saveVideoInputDeviceId:a,saveUsername:c}}function FZ(t){const{mergedProps:e}=_Z({props:t});return b.createElement("button",be({},e),t.children)}function UZ(t){const{buttonProps:e}=yZ(t);return b.createElement("button",be({},e),t.children)}var VZ=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),b.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),GZ=VZ,WZ=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),ZZ=WZ,jZ=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),zZ=jZ,HZ=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),XZ=HZ,$Z=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),b.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),KZ=$Z,JZ=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),b.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),YZ=JZ,QZ=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),qZ=QZ,ej=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),tj=ej,nj=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),rj=nj,ij=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),oj=ij,sj=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),aj=sj,cj=t=>b.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),b.createElement("g",{fill:"currentColor"},b.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),b.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),lj=cj;function qg(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,onDeviceListChange:o,onDeviceSelectError:s,exactMatch:a,track:c,requestPermissions:l,onError:u}=e,d=mn(e,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const h=Zp(),f=b.useCallback(w=>{h&&h.emit(ee.MediaDevicesError,w),u==null||u(w)},[h,u]),{devices:g,activeDeviceId:m,setActiveMediaDevice:C,className:p}=kZ({kind:n,room:h,track:c,requestPermissions:l,onError:f});b.useEffect(()=>{r!==void 0&&C(r)},[C]),b.useEffect(()=>{typeof o=="function"&&o(g)},[o,g]),b.useEffect(()=>{m&&m!==""&&(i==null||i(m))},[m]);const v=w=>lP(this,null,function*(){try{yield C(w,{exact:a})}catch(A){if(A instanceof Error)s==null||s(A);else throw A}}),S=b.useMemo(()=>xl(d,{className:p},{className:"lk-list"}),[p,d]);function E(w,A,T){return w===A||T===0&&A==="default"}return b.createElement("ul",be({},S),g.map((w,A)=>b.createElement("li",{key:w.deviceId,id:w.deviceId,"data-lk-active":E(w.deviceId,m,A),"aria-selected":E(w.deviceId,m,A),role:"option"},b.createElement("button",{className:"lk-button",onClick:()=>v(w.deviceId)},w.label))))}function fP(t,e){switch(t){case X.Source.Microphone:return e?b.createElement(YZ,null):b.createElement(KZ,null);case X.Source.Camera:return e?b.createElement(ZZ,null):b.createElement(GZ,null);case X.Source.ScreenShare:return e?b.createElement(lj,null):b.createElement(aj,null);default:return}}function uj(t){switch(t){case Dr.Excellent:return b.createElement(qZ,null);case Dr.Good:return b.createElement(tj,null);case Dr.Poor:return b.createElement(rj,null);default:return b.createElement(oj,null)}}function em(t){var e=t,{showIcon:n}=e,r=mn(e,["showIcon"]);const{buttonProps:i,enabled:o}=OZ(r);return b.createElement("button",be({},i),(n??!0)&&fP(r.source,o),r.children)}function dj(t){var e;const{className:n,quality:r}=mZ(t),i=b.useMemo(()=>kn(be({},xl(t,{className:n})),{"data-lk-quality":r}),[r,t,n]);return b.createElement("div",be({},i),(e=t.children)!=null?e:uj(r))}function hj(t){var e=t,{participant:n}=e,r=mn(e,["participant"]);const i=Ya(n),{className:o,infoObserver:s}=b.useMemo(()=>B6(i),[i]),{identity:a,name:c}=Tr(s,{name:i.name,identity:i.identity,metadata:i.metadata}),l=b.useMemo(()=>xl(r,{className:o,"data-lk-participant-name":c}),[r,o,c]);return b.createElement("span",be({},l),c!==""?c:a,r.children)}function fj(t){var e=t,{source:n,participant:r,trackRef:i,show:o="always"}=e,s=mn(e,["source","participant","trackRef","show"]),a,c;const{className:l,isMuted:u}=MZ(i??n,{participant:r}),d=o==="always"||o==="muted"&&u||o==="unmuted"&&!u,h=b.useMemo(()=>xl(s,{className:l}),[l,s]);return d?b.createElement("div",kn(be({},h),{"data-lk-muted":u}),(c=s.children)!=null?c:fP((a=i==null?void 0:i.source)!=null?a:n,!u)):null}function pj(t){var e=t,{trackRef:n,onSubscriptionStatusChanged:r,volume:i,source:o,name:s,publication:a,participant:c}=e,l=mn(e,["trackRef","onSubscriptionStatusChanged","volume","source","name","publication","participant"]),u,d,h,f,g,m,C,p,v,S;const E=Pd(),w=(f=(h=(u=n==null?void 0:n.publication)==null?void 0:u.trackName)!=null?h:(d=E==null?void 0:E.publication)==null?void 0:d.trackName)!=null?f:s,A=(m=(g=n==null?void 0:n.source)!=null?g:E==null?void 0:E.source)!=null?m:o,T=(p=(C=n==null?void 0:n.publication)!=null?C:E==null?void 0:E.publication)!=null?p:a,x=(S=(v=n==null?void 0:n.participant)!=null?v:E==null?void 0:E.participant)!=null?S:c;if(A===void 0)throw new Error("The AudioTrack component expects a trackRef or source property.");const _=b.useRef(null),M=Ya(x),{elementProps:D,isSubscribed:F,track:W,publication:j}=hP({source:A,name:w,participant:M,publication:T},{element:_,props:l});return b.useEffect(()=>{r==null||r(!!F)},[F,r]),b.useEffect(()=>{W===void 0||i===void 0||(W instanceof Ra?W.setVolume(i):Ke.warn("Volume can only be set on remote audio tracks."))},[i,W]),b.useEffect(()=>{j===void 0||l.muted===void 0||(j instanceof gC?j.setEnabled(!l.muted):Ke.warn("Can only call setEnabled on remote track publications."))},[l.muted,j,W]),b.createElement("audio",be({ref:_},D))}function gj(t){const e=!!Gp();return t.participant&&!e?b.createElement(TC.Provider,{value:t.participant},t.children):b.createElement(b.Fragment,null,t.children)}function mj({value:t,onPinChange:e,onWidgetChange:n,children:r}){const i=hZ(t);return b.useEffect(()=>{Ke.debug("PinState Updated",{state:i.pin.state}),e&&i.pin.state&&e(i.pin.state)},[i.pin.state,e]),b.useEffect(()=>{Ke.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),b.createElement(EC.Provider,{value:i},r)}function vj(t){const{room:e,htmlProps:n}=bZ(t);return b.createElement("div",be({},n),e&&b.createElement(xC.Provider,{value:e},b.createElement(pZ.Provider,{value:t.featureFlags},t.children)))}function yj(t){var e=t,{participant:n,trackRef:r}=e,i=mn(e,["participant","trackRef"]),o,s;const[a,c]=b.useState([]),l=200,u=90,d=6,h=4,f=50,g=7,m=(o=Gp())!=null?o:n;let C=(s=Pd())!=null?s:r;if(!C){if(!m)throw Error("Participant missing, provide it directly or within a context");C={participant:m,source:X.Source.Microphone}}const{track:p}=DZ(C);return b.useEffect(()=>{if(!p||!(p instanceof Kn||p instanceof Ra))return;const{analyser:v,cleanup:S}=HG(p,{smoothingTimeConstant:.8,fftSize:64}),E=new Uint8Array(v.frequencyBinCount),w=()=>{v.getByteFrequencyData(E);const T=new Array(g).fill(0);E.slice(1);const x=6;for(let _=0;_<g/2;_+=1){const M=Math.floor(g/2-_);for(let D=0;D<x;D+=1)T[M]+=Math.pow(E[_*x+D]/255,2);T[M]/=x}for(let _=0;_<g/2;_+=1){const M=Math.floor(g/2+_);if(T[M]===0){for(let D=0;D<x;D+=1)T[M]+=Math.pow(E[_*x+D]/255,2);T[M]/=x}}return T.map(_=>_*f)},A=setInterval(()=>{const T=w();c(T)},100);return()=>{clearInterval(A),S()}},[p]),b.createElement("svg",kn(be({width:"100%",height:"100%",viewBox:`0 0 ${l} ${u}`},i),{className:"lk-audio-visualizer"}),b.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),b.createElement("g",{style:{transform:`translate(${(l-g*(d+h))/2}px, 0)`}},a.map((v,S)=>b.createElement("rect",{key:S,x:S*(d+h),y:u/2-v/2,width:d,height:v}))))}function Cj(t){var e=t,{participants:n}=e,r=mn(e,["participants"]);return b.createElement(b.Fragment,null,n.map(i=>b.createElement(TC.Provider,{value:i,key:i.identity},dP(r.children))))}function Ij(t){var e=t,{participant:n,children:r,source:i,publication:o,disableSpeakingIndicator:s,onParticipantClick:a}=e,c=mn(e,["participant","children","source","publication","disableSpeakingIndicator","onParticipantClick"]);const l=Ya(n),{elementProps:u}=TZ({participant:l,htmlProps:c,disableSpeakingIndicator:s,source:X.Source.Microphone,publication:o,onParticipantClick:a});return b.createElement("div",be({style:{position:"relative"}},u),b.createElement(gj,{participant:l},r??b.createElement(b.Fragment,null,b.createElement(pj,{source:i??X.Source.Microphone}),b.createElement(yj,null),b.createElement("div",{className:"lk-participant-metadata"},b.createElement("div",{className:"lk-participant-metadata-item"},b.createElement(fj,{source:X.Source.Microphone}),b.createElement(hj,null)),b.createElement(dj,{className:"lk-participant-metadata-item"})))))}function Sj(t){var e=t,{entry:n,hideName:r=!1,hideTimestamp:i=!1,messageFormatter:o}=e,s=mn(e,["entry","hideName","hideTimestamp","messageFormatter"]),a,c,l,u;const d=b.useMemo(()=>o?o(n.message):n.message,[n.message,o]),h=new Date(n.timestamp),f=navigator?navigator.language:"en-US";return b.createElement("li",be({className:"lk-chat-entry",title:h.toLocaleTimeString(f,{timeStyle:"full"}),"data-lk-message-origin":(a=n.from)!=null&&a.isLocal?"local":"remote"},s),(!i||!r)&&b.createElement("span",{className:"lk-meta-data"},!r&&b.createElement("strong",{className:"lk-participant-name"},(u=(c=n.from)==null?void 0:c.name)!=null?u:(l=n.from)==null?void 0:l.identity),!i&&b.createElement("span",{className:"lk-timestamp"},h.toLocaleTimeString(f,{timeStyle:"short"}))),b.createElement("span",{className:"lk-message-body"},d))}function bj(t){var e=t,{messageFormatter:n,messageDecoder:r,messageEncoder:i,channelTopic:o}=e,s=mn(e,["messageFormatter","messageDecoder","messageEncoder","channelTopic"]);const a=b.useRef(null),c=b.useRef(null),l=b.useMemo(()=>({messageDecoder:r,messageEncoder:i,channelTopic:o}),[r,i,o]),{send:u,chatMessages:d,isSending:h}=LZ(l),f=uP(),g=b.useRef(0);function m(C){return lP(this,null,function*(){C.preventDefault(),a.current&&a.current.value.trim()!==""&&u&&(yield u(a.current.value),a.current.value="",a.current.focus())})}return b.useEffect(()=>{var C;c&&((C=c.current)==null||C.scrollTo({top:c.current.scrollHeight}))},[c,d]),b.useEffect(()=>{var C,p,v,S,E;if(!f||d.length===0)return;if((C=f.widget.state)!=null&&C.showChat&&d.length>0&&g.current!==((p=d[d.length-1])==null?void 0:p.timestamp)){g.current=(v=d[d.length-1])==null?void 0:v.timestamp;return}const w=d.filter(T=>!g.current||T.timestamp>g.current).length,{widget:A}=f;w>0&&((S=A.state)==null?void 0:S.unreadMessages)!==w&&((E=A.dispatch)==null||E.call(A,{msg:"unread_msg",count:w}))},[d,f==null?void 0:f.widget]),b.createElement("div",kn(be({},s),{className:"lk-chat"}),b.createElement("ul",{className:"lk-list lk-chat-messages",ref:c},s.children?d.map((C,p)=>dP(s.children,{entry:C,key:p,messageFormatter:n})):d.map((C,p,v)=>{const S=p>=1&&v[p-1].from===C.from,E=p>=1&&C.timestamp-v[p-1].timestamp<6e4;return b.createElement(Sj,{key:p,hideName:S,hideTimestamp:S===!1?!1:E,entry:C,messageFormatter:n})})),b.createElement("form",{className:"lk-chat-form",onSubmit:m},b.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:h,ref:a,type:"text",placeholder:"Enter a message..."}),b.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:h},"Send")))}function Rw(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:o,requestPermissions:s=!1}=e,a=mn(e,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[c,l]=b.useState(!1),[u,d]=b.useState([]),[h,f]=b.useState(!0),g=(v,S)=>{Ke.debug("handle device change"),l(!1),i==null||i(v,S)},m=b.useRef(null),C=b.useRef(null);b.useLayoutEffect(()=>{m.current&&C.current&&(u||h)&&d6(m.current,C.current).then(({x:v,y:S})=>{C.current&&Object.assign(C.current.style,{left:`${v}px`,top:`${S}px`})}),f(!1)},[m,C,u,h]);const p=b.useCallback(v=>{C.current&&v.target!==m.current&&c&&h6(C.current,v)&&l(!1)},[c,C,m]);return b.useEffect(()=>(document.addEventListener("click",p),window.addEventListener("resize",()=>f(!0)),()=>{document.removeEventListener("click",p),window.removeEventListener("resize",()=>f(!0))}),[p,f]),b.createElement(b.Fragment,null,b.createElement("button",kn(be({className:"lk-button lk-button-menu","aria-pressed":c},a),{onClick:()=>l(!c),ref:m}),a.children),!a.disabled&&b.createElement("div",{className:"lk-device-menu",ref:C,style:{visibility:c?"visible":"hidden"}},n?b.createElement(qg,{initialSelection:r,onActiveDeviceChange:v=>g(n,v),onDeviceListChange:d,kind:n,track:o==null?void 0:o[n],requestPermissions:s}):b.createElement(b.Fragment,null,b.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),b.createElement(qg,{kind:"audioinput",onActiveDeviceChange:v=>g("audioinput",v),onDeviceListChange:d,track:o==null?void 0:o.audioinput,requestPermissions:s}),b.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),b.createElement(qg,{kind:"videoinput",onActiveDeviceChange:v=>g("videoinput",v),onDeviceListChange:d,track:o==null?void 0:o.videoinput,requestPermissions:s}))))}function wj(t){var e=t,{label:n}=e,r=mn(e,["label"]);const i=Wp(),{mergedProps:o,canPlayAudio:s}=PZ({room:i,props:r}),{mergedProps:a,canPlayVideo:c}=NZ({room:i,props:o}),l=a,{style:u}=l,d=mn(l,["style"]);return u.display=s&&c?"none":"block",b.createElement("button",be({style:u},d),n??`Start ${s?"Video":"Audio"}`)}function Aj(t){var e=t,{variation:n,controls:r,saveUserChoices:i=!0}=e,o=mn(e,["variation","controls","saveUserChoices"]),s,a,c,l,u;const[d,h]=b.useState(!1),f=uP();b.useEffect(()=>{var W,j;((W=f==null?void 0:f.widget.state)==null?void 0:W.showChat)!==void 0&&h((j=f==null?void 0:f.widget.state)==null?void 0:j.showChat)},[(s=f==null?void 0:f.widget.state)==null?void 0:s.showChat]);const m=cZ(`(max-width: ${d?1e3:760}px)`)?"minimal":"verbose";n??(n=m);const C=be({leave:!0},r),p=AZ();p?((a=C.camera)!=null||(C.camera=p.canPublish),(c=C.microphone)!=null||(C.microphone=p.canPublish),(l=C.screenShare)!=null||(C.screenShare=p.canPublish),(u=C.chat)!=null||(C.chat=p.canPublishData&&(r==null?void 0:r.chat))):(C.camera=!1,C.chat=!1,C.microphone=!1,C.screenShare=!1);const v=b.useMemo(()=>n==="minimal"||n==="verbose",[n]),S=b.useMemo(()=>n==="textOnly"||n==="verbose",[n]),E=m6(),[w,A]=b.useState(!1),T=W=>{A(W)},x=xl({className:"lk-control-bar"},o),{saveAudioInputEnabled:_,saveVideoInputEnabled:M,saveAudioInputDeviceId:D,saveVideoInputDeviceId:F}=BZ({preventSave:!i});return b.createElement("div",be({},x),C.microphone&&b.createElement("div",{className:"lk-button-group"},b.createElement(em,{source:X.Source.Microphone,showIcon:v,onChange:_},S&&"Microphone"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(Rw,{kind:"audioinput",onActiveDeviceChange:(W,j)=>D(j??"")}))),C.camera&&b.createElement("div",{className:"lk-button-group"},b.createElement(em,{source:X.Source.Camera,showIcon:v,onChange:M},S&&"Camera"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(Rw,{kind:"videoinput",onActiveDeviceChange:(W,j)=>F(j??"")}))),C.screenShare&&E&&b.createElement(em,{source:X.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:T},S&&(w?"Stop screen share":"Share screen")),C.chat&&b.createElement(FZ,null,v&&b.createElement(zZ,null),S&&"Chat"),C.leave&&b.createElement(UZ,null,v&&b.createElement(XZ,null),S&&"Leave"),b.createElement(wj,null))}function kj(t){var e=mn(t,[]);const[n,r]=b.useState({showChat:!1,unreadMessages:0}),i=RZ();return b.createElement(mj,{onWidgetChange:r},b.createElement("div",be({className:"lk-audio-conference"},e),b.createElement("div",{className:"lk-audio-conference-stage"},b.createElement(Cj,{participants:i},b.createElement(Ij,null))),b.createElement(Aj,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),n.showChat&&b.createElement(bj,null)))}const Ej="wss://mongoose-67t79p35.livekit.cloud",Tj=({client:t})=>{const[e,n]=b.useState([]),[r,i]=b.useState(!1);return b.useEffect(()=>{const o=a=>{n(c=>[...c,a]),i(!0)},s=a=>{n(c=>{const l=c.filter(u=>u!==a);return l.length===0&&i(!1),l})};return t.on("livekitToken",o),t.on("livekitLeave",s),()=>{t.off("livekitToken",o),t.off("livekitLeave",s)}},[t]),e.length?$.jsxs("div",{"data-lk-theme":"default",children:[e.map((o,s)=>$.jsx(vj,{video:!1,audio:!0,token:o,serverUrl:Ej,connect:!0,onDisconnected:()=>t.emit("livekitLeave",o),children:$.jsx(kj,{})},s)),$.jsx("div",{className:"audio-status","aria-live":"polite"})]}):null};function xj(){const[t,e]=b.useState(null),[n,r]=b.useState(!1),[i,o]=b.useState([]),s=rt.useRef(null),a=rt.useRef(null),c=rt.useRef(null),l=b.useRef(!1),u=()=>{s.current&&s.current.saveLog()},d=()=>{s.current&&s.current.clearLog()},h=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return b.useEffect(()=>{if(l.current)return;const f=new yU("mongoose.moo.mud.org",8765);f.registerGMCPPackage(iU),f.registerGMCPPackage(eU),f.registerGMCPPackage(tU),f.registerGMCPPackage(J2),f.registerGMCPPackage(oU),f.registerGMCPPackage(nU),f.registerGMCPPackage(rU),f.registerGMCPPackage($2),f.registerMcpPackage(lU),f.registerMcpPackage(uU),f.registerMcpPackage(hU),f.registerMcpPackage(fU),f.connect(),f.requestNotificationPermission(),e(f),r(!h),window.mudClient=f,l.current=!0;const g=C=>{f&&(C.key==="Control"&&f.cancelSpeech(),C.key==="Escape"&&f.stopAllSounds())};window.addEventListener("keydown",g);const m=()=>{var C;(C=a.current)==null||C.focus()};return document.addEventListener("focus",m),()=>{window.removeEventListener("keydown",g),document.removeEventListener("focus",m)}},[h]),b.useEffect(()=>{if(t){const f=m=>{o(m)},g=()=>{o([])};return t.on("userlist",f),t.on("disconnect",g),()=>{t.off("userlist",f),t.off("disconnect",g)}}},[t]),pk(f=>{t&&t.shutdown()}),t?$.jsxs("div",{className:"App",children:[$.jsx("header",{className:"App-header"}),$.jsx(lV,{client:t,onSaveLog:u,onClearLog:d,onToggleUsers:()=>r(!n),onOpenPrefs:()=>{var f;return(f=c.current)==null?void 0:f.open()}}),$.jsxs("div",{children:[$.jsx(hv,{client:t,ref:s}),n&&$.jsx(dV,{users:i}),$.jsx(Tj,{client:t})]}),$.jsx(IU,{onSend:t.sendCommand,inputRef:a}),$.jsx(uV,{client:t}),$.jsx(eV,{ref:c})]}):null}function Rj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Nw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pw(Object(n),!0).forEach(function(r){Rj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Pj(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Nj(t,e){if(t==null)return{};var n=Pj(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function _j(t,e){return Mj(t)||Oj(t,e)||Dj(t,e)||Lj()}function Mj(t){if(Array.isArray(t))return t}function Oj(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,o=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function Dj(t,e){if(t){if(typeof t=="string")return _w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _w(t,e)}}function _w(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bj(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ow(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mw(Object(n),!0).forEach(function(r){Bj(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fj(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,o){return o(i)},r)}}function lu(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function qf(t){return{}.toString.call(t).includes("Object")}function Uj(t){return!Object.keys(t).length}function ad(t){return typeof t=="function"}function Vj(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gj(t,e){return qf(e)||js("changeType"),Object.keys(e).some(function(n){return!Vj(t,n)})&&js("changeField"),e}function Wj(t){ad(t)||js("selectorType")}function Zj(t){ad(t)||qf(t)||js("handlerType"),qf(t)&&Object.values(t).some(function(e){return!ad(e)})&&js("handlersType")}function jj(t){t||js("initialIsRequired"),qf(t)||js("initialType"),Uj(t)&&js("initialContent")}function zj(t,e){throw new Error(t[e]||t.default)}var Hj={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},js=lu(zj)(Hj),lh={changes:Gj,selector:Wj,handler:Zj,initial:jj};function Xj(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lh.initial(t),lh.handler(e);var n={current:t},r=lu(Jj)(n,e),i=lu(Kj)(n),o=lu(lh.changes)(t),s=lu($j)(n);function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return lh.selector(l),l(n.current)}function c(l){Fj(r,i,o,s)(l)}return[a,c]}function $j(t,e){return ad(e)?e(t.current):e}function Kj(t,e){return t.current=Ow(Ow({},t.current),e),e}function Jj(t,e,n){return ad(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var Yj={create:Xj},Qj={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function qj(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function e8(t){return{}.toString.call(t).includes("Object")}function t8(t){return t||Dw("configIsRequired"),e8(t)||Dw("configType"),t.urls?(n8(),{paths:{vs:t.urls.monacoBase}}):t}function n8(){console.warn(pP.deprecation)}function r8(t,e){throw new Error(t[e]||t.default)}var pP={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Dw=qj(r8)(pP),i8={config:t8},o8=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,s){return s(o)},i)}};function gP(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],gP(t[n],e[n]))}),Nw(Nw({},t),e)}var s8={type:"cancelation",msg:"operation is manually canceled"};function tm(t){var e=!1,n=new Promise(function(r,i){t.then(function(o){return e?i(s8):r(o)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var a8=Yj.create({config:Qj,isInitialized:!1,resolve:null,reject:null,monaco:null}),mP=_j(a8,2),_d=mP[0],jp=mP[1];function c8(t){var e=i8.config(t),n=e.monaco,r=Nj(e,["monaco"]);jp(function(i){return{config:gP(i.config,r),monaco:n}})}function l8(){var t=_d(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(jp({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),tm(nm);if(window.monaco&&window.monaco.editor)return vP(window.monaco),t.resolve(window.monaco),tm(nm);o8(u8,h8)(f8)}return tm(nm)}function u8(t){return document.body.appendChild(t)}function d8(t){var e=document.createElement("script");return t&&(e.src=t),e}function h8(t){var e=_d(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=d8("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function f8(){var t=_d(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){vP(n),t.resolve(n)},function(n){t.reject(n)})}function vP(t){_d().monaco||jp({monaco:t})}function p8(){return _d(function(t){var e=t.monaco;return e})}var nm=new Promise(function(t,e){return jp({resolve:t,reject:e})}),yP={config:c8,init:l8,__getMonacoInstance:p8},g8={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},rm=g8,m8={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},v8=m8;function y8({children:t}){return rt.createElement("div",{style:v8.container},t)}var C8=y8,I8=C8;function S8({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:o,wrapperProps:s}){return rt.createElement("section",{style:{...rm.wrapper,width:t,height:e},...s},!n&&rt.createElement(I8,null,r),rt.createElement("div",{ref:i,style:{...rm.fullWidth,...!n&&rm.hide},className:o}))}var b8=S8,CP=b.memo(b8);function w8(t){b.useEffect(t,[])}var IP=w8;function A8(t,e,n=!0){let r=b.useRef(!0);b.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Sr=A8;function Eu(){}function Tc(t,e,n,r){return k8(t,r)||E8(t,e,n,r)}function k8(t,e){return t.editor.getModel(SP(t,e))}function E8(t,e,n,r){return t.editor.createModel(e,n,r?SP(t,r):void 0)}function SP(t,e){return t.Uri.parse(e)}function T8({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:s,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:c=!1,theme:l="light",loading:u="Loading...",options:d={},height:h="100%",width:f="100%",className:g,wrapperProps:m={},beforeMount:C=Eu,onMount:p=Eu}){let[v,S]=b.useState(!1),[E,w]=b.useState(!0),A=b.useRef(null),T=b.useRef(null),x=b.useRef(null),_=b.useRef(p),M=b.useRef(C),D=b.useRef(!1);IP(()=>{let H=yP.init();return H.then(q=>(T.current=q)&&w(!1)).catch(q=>(q==null?void 0:q.type)!=="cancelation"&&console.error("Monaco initialization: error:",q)),()=>A.current?j():H.cancel()}),Sr(()=>{if(A.current&&T.current){let H=A.current.getOriginalEditor(),q=Tc(T.current,t||"",r||n||"text",o||"");q!==H.getModel()&&H.setModel(q)}},[o],v),Sr(()=>{if(A.current&&T.current){let H=A.current.getModifiedEditor(),q=Tc(T.current,e||"",i||n||"text",s||"");q!==H.getModel()&&H.setModel(q)}},[s],v),Sr(()=>{let H=A.current.getModifiedEditor();H.getOption(T.current.editor.EditorOption.readOnly)?H.setValue(e||""):e!==H.getValue()&&(H.executeEdits("",[{range:H.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),H.pushUndoStop())},[e],v),Sr(()=>{var H,q;(q=(H=A.current)==null?void 0:H.getModel())==null||q.original.setValue(t||"")},[t],v),Sr(()=>{let{original:H,modified:q}=A.current.getModel();T.current.editor.setModelLanguage(H,r||n||"text"),T.current.editor.setModelLanguage(q,i||n||"text")},[n,r,i],v),Sr(()=>{var H;(H=T.current)==null||H.editor.setTheme(l)},[l],v),Sr(()=>{var H;(H=A.current)==null||H.updateOptions(d)},[d],v);let F=b.useCallback(()=>{var te;if(!T.current)return;M.current(T.current);let H=Tc(T.current,t||"",r||n||"text",o||""),q=Tc(T.current,e||"",i||n||"text",s||"");(te=A.current)==null||te.setModel({original:H,modified:q})},[n,e,i,t,r,o,s]),W=b.useCallback(()=>{var H;!D.current&&x.current&&(A.current=T.current.editor.createDiffEditor(x.current,{automaticLayout:!0,...d}),F(),(H=T.current)==null||H.editor.setTheme(l),S(!0),D.current=!0)},[d,l,F]);b.useEffect(()=>{v&&_.current(A.current,T.current)},[v]),b.useEffect(()=>{!E&&!v&&W()},[E,v,W]);function j(){var q,te,z,Y;let H=(q=A.current)==null?void 0:q.getModel();a||((te=H==null?void 0:H.original)==null||te.dispose()),c||((z=H==null?void 0:H.modified)==null||z.dispose()),(Y=A.current)==null||Y.dispose()}return rt.createElement(CP,{width:f,height:h,isEditorReady:v,loading:u,_ref:x,className:g,wrapperProps:m})}var x8=T8;b.memo(x8);function R8(t){let e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}var P8=R8,uh=new Map;function N8({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:o,theme:s="light",line:a,loading:c="Loading...",options:l={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:h=!1,width:f="100%",height:g="100%",className:m,wrapperProps:C={},beforeMount:p=Eu,onMount:v=Eu,onChange:S,onValidate:E=Eu}){let[w,A]=b.useState(!1),[T,x]=b.useState(!0),_=b.useRef(null),M=b.useRef(null),D=b.useRef(null),F=b.useRef(v),W=b.useRef(p),j=b.useRef(),H=b.useRef(r),q=P8(o),te=b.useRef(!1),z=b.useRef(!1);IP(()=>{let Z=yP.init();return Z.then(ne=>(_.current=ne)&&x(!1)).catch(ne=>(ne==null?void 0:ne.type)!=="cancelation"&&console.error("Monaco initialization: error:",ne)),()=>M.current?ie():Z.cancel()}),Sr(()=>{var ne,Ee,xe,me;let Z=Tc(_.current,t||r||"",e||i||"",o||n||"");Z!==((ne=M.current)==null?void 0:ne.getModel())&&(d&&uh.set(q,(Ee=M.current)==null?void 0:Ee.saveViewState()),(xe=M.current)==null||xe.setModel(Z),d&&((me=M.current)==null||me.restoreViewState(uh.get(o))))},[o],w),Sr(()=>{var Z;(Z=M.current)==null||Z.updateOptions(l)},[l],w),Sr(()=>{!M.current||r===void 0||(M.current.getOption(_.current.editor.EditorOption.readOnly)?M.current.setValue(r):r!==M.current.getValue()&&(z.current=!0,M.current.executeEdits("",[{range:M.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),M.current.pushUndoStop(),z.current=!1))},[r],w),Sr(()=>{var ne,Ee;let Z=(ne=M.current)==null?void 0:ne.getModel();Z&&i&&((Ee=_.current)==null||Ee.editor.setModelLanguage(Z,i))},[i],w),Sr(()=>{var Z;a!==void 0&&((Z=M.current)==null||Z.revealLine(a))},[a],w),Sr(()=>{var Z;(Z=_.current)==null||Z.editor.setTheme(s)},[s],w);let Y=b.useCallback(()=>{var Z;if(!(!D.current||!_.current)&&!te.current){W.current(_.current);let ne=o||n,Ee=Tc(_.current,r||t||"",e||i||"",ne||"");M.current=(Z=_.current)==null?void 0:Z.editor.create(D.current,{model:Ee,automaticLayout:!0,...l},u),d&&M.current.restoreViewState(uh.get(ne)),_.current.editor.setTheme(s),a!==void 0&&M.current.revealLine(a),A(!0),te.current=!0}},[t,e,n,r,i,o,l,u,d,s,a]);b.useEffect(()=>{w&&F.current(M.current,_.current)},[w]),b.useEffect(()=>{!T&&!w&&Y()},[T,w,Y]),H.current=r,b.useEffect(()=>{var Z,ne;w&&S&&((Z=j.current)==null||Z.dispose(),j.current=(ne=M.current)==null?void 0:ne.onDidChangeModelContent(Ee=>{z.current||S(M.current.getValue(),Ee)}))},[w,S]),b.useEffect(()=>{if(w){let Z=_.current.editor.onDidChangeMarkers(ne=>{var xe;let Ee=(xe=M.current.getModel())==null?void 0:xe.uri;if(Ee&&ne.find(me=>me.path===Ee.path)){let me=_.current.editor.getModelMarkers({resource:Ee});E==null||E(me)}});return()=>{Z==null||Z.dispose()}}return()=>{}},[w,E]);function ie(){var Z,ne;(Z=j.current)==null||Z.dispose(),h?d&&uh.set(o,M.current.saveViewState()):(ne=M.current.getModel())==null||ne.dispose(),M.current.dispose()}return rt.createElement(CP,{width:f,height:g,isEditorReady:w,loading:c,_ref:D,className:m,wrapperProps:C})}var _8=N8,M8=b.memo(_8),O8=M8,D8={restoreOnUnmount:!1};function L8(t,e){e===void 0&&(e=D8);var n=b.useRef(document.title);document.title!==t&&(document.title=t),b.useEffect(function(){if(e&&e.restoreOnUnmount)return function(){document.title=n.current}},[])}const B8=typeof document<"u"?L8:function(t){};function F8({onSave:t,onRevert:e,onDownload:n}){return $.jsx("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderBottom:"1px solid #e8e8e8"},children:$.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[$.jsxs("button",{onClick:t,accessKey:"s",children:[$.jsx($T,{}),"Save"]}),$.jsxs("button",{onClick:e,accessKey:"r",children:[$.jsx(sV,{}),"Revert"]}),$.jsxs("button",{onClick:n,accessKey:"d",children:[$.jsx(iV,{}),"Download"]})]})})}const U8=({docstate:t,session:e})=>$.jsxs("div",{"aria-live":"polite",className:"statusbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderTop:"1px solid #e8e8e8"},children:[$.jsx("span",{children:t}),$.jsx("span",{children:"|"}),$.jsx("span",{children:e.reference}),$.jsx("span",{children:"|"}),$.jsx("span",{children:e.type})]});function V8(){const t=fk(),e=rt.useRef(null),[n,r]=b.useState(""),[i,o]=b.useState(""),[s,a]=b.useState(""),[c,l]=b.useState(0),[u,d]=b.useState({name:"none",contents:[],reference:"",type:""}),h=(W,j)=>{e.current=W},[f,g]=na();console.log(f);const m=f.editor.accessibilityMode,C=f.editor.autocompleteEnabled;pk(W=>{w.postMessage({type:"close",id:T}),c===1&&W.preventDefault()});const[p,v]=b.useState(!1),S=p?`${u.name} - Mongoose Editor`:"Mongoose Editor";B8(S);const E=b.useMemo(()=>{switch(c){case 0:return"Unchanged";case 1:return"Changed";case 2:return"Saved"}},[c]),w=b.useMemo(()=>new BroadcastChannel("editor"),[]),A=new URLSearchParams(t.search),T=decodeURIComponent(A.get("reference")||"");b.useEffect(()=>{if(!T)return;console.log("ID: "+T),console.log("Sending ready message"),w.postMessage({type:"ready",id:T});const W=j=>{if(console.log(j.data),j.data.type==="load"){if(n!=="")return;const H=j.data.session.contents.join(`
`);o(H),a(H),d(j.data.session),l(0),r(j.data.clientId),setTimeout(F,100)}else if(j.data.type==="shutdown"){if(j.data.clientId!==n)return;w.close(),window.close()}};return w.addEventListener("message",W),()=>w.removeEventListener("message",W)},[w,n,T]);const x=()=>{o(s),l(0)},_=W=>{const j=i.split(/\r\n|\r|\n/),H={...u,contents:j};w.postMessage({type:"save",session:H,id:T}),l(2),F(),W.preventDefault()},M=W=>{W!==void 0&&(console.log("Original: "+s),console.log("New: "+W),o(W),W.split(/\r\n|\r|\n/).join(`
`)!==s?l(1):l(0),p||v(!0))},D=()=>{const W=new Blob([i],{type:"text/plain"}),j=URL.createObjectURL(W),H=document.createElement("a"),q=new Date,te=q.toLocaleDateString().replace(/\//g,"-"),z=q.toLocaleTimeString().replace(/:/g,"-"),Y=`${u.name}-${te}-${z}.txt`;H.download=Y,H.href=j,H.click(),URL.revokeObjectURL(j),H.remove()};return $.jsxs("div",{id:"editor",children:[$.jsx(F8,{onSave:_,onRevert:x,onDownload:D}),$.jsx(O8,{height:"80vh",defaultLanguage:"lambdamoo",value:i,onChange:M,options:{wordWrap:"on",accessibilitySupport:m?"on":"off",quickSuggestions:C},onMount:h,path:u.reference}),$.jsx(U8,{docstate:E,session:u})]});function F(){e.current!==null&&e.current.focus()}}const G8="modulepreload",W8=function(t){return"/"+t},Lw={},Z8=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.all(n.map(c=>{if(c=W8(c),c in Lw)return;Lw[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(!!r)for(let f=o.length-1;f>=0;f--){const g=o[f];if(g.href===c&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":G8,l||(h.as="script",h.crossOrigin=""),h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((f,g)=>{h.addEventListener("load",f),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},j8=t=>{t&&t instanceof Function&&Z8(()=>import("./web-vitals-BhWu73fZ.js"),[]).then(({getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o})=>{e(t),n(t),r(t),i(t),o(t)})};var Bw={};const z8=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function H8(t){if("serviceWorker"in navigator){if(new URL(Bw.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${Bw.PUBLIC_URL}/service-worker.js`;z8?(X8(n,t),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):bP(n,t)})}}function bP(t,e){navigator.serviceWorker.register(t).then(n=>{n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function X8(t,e){fetch(t).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):bP(t,e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}const $8=cO([{path:"/",element:$.jsx(xj,{})},{path:"/editor",element:$.jsx(V8,{})}]),K8=im.createRoot(document.getElementById("root"));K8.render($.jsx(rt.StrictMode,{children:$.jsx(vO,{router:$8})}));j8(console.log);H8();
