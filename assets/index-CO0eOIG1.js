var ON=Object.defineProperty;var mI=t=>{throw TypeError(t)};var MN=(t,e,n)=>e in t?ON(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>MN(t,typeof e!="symbol"?e+"":e,n),Ig=(t,e,n)=>e.has(t)||mI("Cannot "+n);var N=(t,e,n)=>(Ig(t,e,"read from private field"),n?n.call(t):e.get(t)),Ye=(t,e,n)=>e.has(t)?mI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ne=(t,e,n,r)=>(Ig(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),be=(t,e,n)=>(Ig(t,e,"access private method"),n);var ah=(t,e,n,r)=>({set _(i){Ne(t,e,i,n)},get _(){return N(t,e,r)}});function WA(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var DN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jA={exports:{}},Np={},ZA={exports:{}},ze={},Ud=Symbol.for("react.element"),LN=Symbol.for("react.portal"),BN=Symbol.for("react.fragment"),FN=Symbol.for("react.strict_mode"),UN=Symbol.for("react.profiler"),VN=Symbol.for("react.provider"),GN=Symbol.for("react.context"),WN=Symbol.for("react.forward_ref"),jN=Symbol.for("react.suspense"),ZN=Symbol.for("react.memo"),HN=Symbol.for("react.lazy"),vI=Symbol.iterator;function zN(t){return t===null||typeof t!="object"?null:(t=vI&&t[vI]||t["@@iterator"],typeof t=="function"?t:null)}var HA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},zA=Object.assign,XA={};function xl(t,e,n){this.props=t,this.context=e,this.refs=XA,this.updater=n||HA}xl.prototype.isReactComponent={};xl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};xl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function $A(){}$A.prototype=xl.prototype;function ey(t,e,n){this.props=t,this.context=e,this.refs=XA,this.updater=n||HA}var ty=ey.prototype=new $A;ty.constructor=ey;zA(ty,xl.prototype);ty.isPureReactComponent=!0;var yI=Array.isArray,KA=Object.prototype.hasOwnProperty,ny={current:null},JA={key:!0,ref:!0,__self:!0,__source:!0};function YA(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)KA.call(e,r)&&!JA.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Ud,type:t,key:o,ref:s,props:i,_owner:ny.current}}function XN(t,e){return{$$typeof:Ud,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ry(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ud}function $N(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var CI=/\/+/g;function Sg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$N(""+t.key):e.toString(36)}function Vh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Ud:case LN:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Sg(s,0):r,yI(i)?(n="",t!=null&&(n=t.replace(CI,"$&/")+"/"),Vh(i,e,n,"",function(l){return l})):i!=null&&(ry(i)&&(i=XN(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(CI,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",yI(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+Sg(o,a);s+=Vh(o,e,n,c,i)}else if(c=zN(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+Sg(o,a++),s+=Vh(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ch(t,e,n){if(t==null)return t;var r=[],i=0;return Vh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function KN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var or={current:null},Gh={transition:null},JN={ReactCurrentDispatcher:or,ReactCurrentBatchConfig:Gh,ReactCurrentOwner:ny};function QA(){throw Error("act(...) is not supported in production builds of React.")}ze.Children={map:ch,forEach:function(t,e,n){ch(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ch(t,function(){e++}),e},toArray:function(t){return ch(t,function(e){return e})||[]},only:function(t){if(!ry(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ze.Component=xl;ze.Fragment=BN;ze.Profiler=UN;ze.PureComponent=ey;ze.StrictMode=FN;ze.Suspense=jN;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JN;ze.act=QA;ze.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=zA({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=ny.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)KA.call(e,c)&&!JA.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Ud,type:t.type,key:i,ref:o,props:r,_owner:s}};ze.createContext=function(t){return t={$$typeof:GN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VN,_context:t},t.Consumer=t};ze.createElement=YA;ze.createFactory=function(t){var e=YA.bind(null,t);return e.type=t,e};ze.createRef=function(){return{current:null}};ze.forwardRef=function(t){return{$$typeof:WN,render:t}};ze.isValidElement=ry;ze.lazy=function(t){return{$$typeof:HN,_payload:{_status:-1,_result:t},_init:KN}};ze.memo=function(t,e){return{$$typeof:ZN,type:t,compare:e===void 0?null:e}};ze.startTransition=function(t){var e=Gh.transition;Gh.transition={};try{t()}finally{Gh.transition=e}};ze.unstable_act=QA;ze.useCallback=function(t,e){return or.current.useCallback(t,e)};ze.useContext=function(t){return or.current.useContext(t)};ze.useDebugValue=function(){};ze.useDeferredValue=function(t){return or.current.useDeferredValue(t)};ze.useEffect=function(t,e){return or.current.useEffect(t,e)};ze.useId=function(){return or.current.useId()};ze.useImperativeHandle=function(t,e,n){return or.current.useImperativeHandle(t,e,n)};ze.useInsertionEffect=function(t,e){return or.current.useInsertionEffect(t,e)};ze.useLayoutEffect=function(t,e){return or.current.useLayoutEffect(t,e)};ze.useMemo=function(t,e){return or.current.useMemo(t,e)};ze.useReducer=function(t,e,n){return or.current.useReducer(t,e,n)};ze.useRef=function(t){return or.current.useRef(t)};ze.useState=function(t){return or.current.useState(t)};ze.useSyncExternalStore=function(t,e,n){return or.current.useSyncExternalStore(t,e,n)};ze.useTransition=function(){return or.current.useTransition()};ze.version="18.3.1";ZA.exports=ze;var b=ZA.exports;const ct=Fd(b),YN=WA({__proto__:null,default:ct},[b]);var QN=b,qN=Symbol.for("react.element"),e_=Symbol.for("react.fragment"),t_=Object.prototype.hasOwnProperty,n_=QN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r_={key:!0,ref:!0,__self:!0,__source:!0};function qA(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)t_.call(e,r)&&!r_.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:qN,type:t,key:o,ref:s,props:i,_owner:n_.current}}Np.Fragment=e_;Np.jsx=qA;Np.jsxs=qA;jA.exports=Np;var K=jA.exports,Bm={},e1={exports:{}},zr={},t1={exports:{}},n1={};(function(t){function e(X,Y){var oe=X.length;X.push(Y);e:for(;0<oe;){var W=oe-1>>>1,se=X[W];if(0<i(se,Y))X[W]=Y,X[oe]=se,oe=W;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var Y=X[0],oe=X.pop();if(oe!==Y){X[0]=oe;e:for(var W=0,se=X.length,we=se>>>1;W<we;){var De=2*(W+1)-1,de=X[De],xe=De+1,rt=X[xe];if(0>i(de,oe))xe<se&&0>i(rt,de)?(X[W]=rt,X[xe]=oe,W=xe):(X[W]=de,X[De]=oe,W=De);else if(xe<se&&0>i(rt,oe))X[W]=rt,X[xe]=oe,W=xe;else break e}}return Y}function i(X,Y){var oe=X.sortIndex-Y.sortIndex;return oe!==0?oe:X.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,C=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(X){for(var Y=n(l);Y!==null;){if(Y.callback===null)r(l);else if(Y.startTime<=X)r(l),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(l)}}function E(X){if(g=!1,S(X),!p)if(n(c)!==null)p=!0,ee(w);else{var Y=n(l);Y!==null&&re(E,Y.startTime-X)}}function w(X,Y){p=!1,g&&(g=!1,m(T),T=-1),f=!0;var oe=h;try{for(S(Y),d=n(c);d!==null&&(!(d.expirationTime>Y)||X&&!L());){var W=d.callback;if(typeof W=="function"){d.callback=null,h=d.priorityLevel;var se=W(d.expirationTime<=Y);Y=t.unstable_now(),typeof se=="function"?d.callback=se:d===n(c)&&r(c),S(Y)}else r(c);d=n(c)}if(d!==null)var we=!0;else{var De=n(l);De!==null&&re(E,De.startTime-Y),we=!1}return we}finally{d=null,h=oe,f=!1}}var A=!1,x=null,T=-1,_=5,O=-1;function L(){return!(t.unstable_now()-O<_)}function U(){if(x!==null){var X=t.unstable_now();O=X;var Y=!0;try{Y=x(!0,X)}finally{Y?z():(A=!1,x=null)}}else A=!1}var z;if(typeof v=="function")z=function(){v(U)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,J=Z.port2;Z.port1.onmessage=U,z=function(){J.postMessage(null)}}else z=function(){C(U,0)};function ee(X){x=X,A||(A=!0,z())}function re(X,Y){T=C(function(){X(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(X){X.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ee(w))},t.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<X?Math.floor(1e3/X):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(X){switch(h){case 1:case 2:case 3:var Y=3;break;default:Y=h}var oe=h;h=Y;try{return X()}finally{h=oe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(X,Y){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var oe=h;h=X;try{return Y()}finally{h=oe}},t.unstable_scheduleCallback=function(X,Y,oe){var W=t.unstable_now();switch(typeof oe=="object"&&oe!==null?(oe=oe.delay,oe=typeof oe=="number"&&0<oe?W+oe:W):oe=W,X){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=oe+se,X={id:u++,callback:Y,priorityLevel:X,startTime:oe,expirationTime:se,sortIndex:-1},oe>W?(X.sortIndex=oe,e(l,X),n(c)===null&&X===n(l)&&(g?(m(T),T=-1):g=!0,re(E,oe-W))):(X.sortIndex=se,e(c,X),p||f||(p=!0,ee(w))),X},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(X){var Y=h;return function(){var oe=h;h=Y;try{return X.apply(this,arguments)}finally{h=oe}}}})(n1);t1.exports=n1;var i_=t1.exports,o_=b,jr=i_;function ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r1=new Set,qu={};function dc(t,e){dl(t,e),dl(t+"Capture",e)}function dl(t,e){for(qu[t]=e,t=0;t<e.length;t++)r1.add(e[t])}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fm=Object.prototype.hasOwnProperty,s_=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,II={},SI={};function a_(t){return Fm.call(SI,t)?!0:Fm.call(II,t)?!1:s_.test(t)?SI[t]=!0:(II[t]=!0,!1)}function c_(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function l_(t,e,n,r){if(e===null||typeof e>"u"||c_(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Rn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rn[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rn[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rn[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rn[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rn[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rn[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rn[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rn[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rn[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var iy=/[\-:]([a-z])/g;function oy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(iy,oy);Rn[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(iy,oy);Rn[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(iy,oy);Rn[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rn[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Rn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rn[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function sy(t,e,n,r){var i=Rn.hasOwnProperty(e)?Rn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(l_(e,n,i,r)&&(n=null),r||i===null?a_(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Is=o_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lh=Symbol.for("react.element"),Rc=Symbol.for("react.portal"),xc=Symbol.for("react.fragment"),ay=Symbol.for("react.strict_mode"),Um=Symbol.for("react.profiler"),i1=Symbol.for("react.provider"),o1=Symbol.for("react.context"),cy=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),Gm=Symbol.for("react.suspense_list"),ly=Symbol.for("react.memo"),Ls=Symbol.for("react.lazy"),s1=Symbol.for("react.offscreen"),bI=Symbol.iterator;function Ql(t){return t===null||typeof t!="object"?null:(t=bI&&t[bI]||t["@@iterator"],typeof t=="function"?t:null)}var Ft=Object.assign,bg;function Su(t){if(bg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bg=e&&e[1]||""}return`
`+bg+t}var wg=!1;function Ag(t,e){if(!t||wg)return"";wg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{wg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Su(t):""}function u_(t){switch(t.tag){case 5:return Su(t.type);case 16:return Su("Lazy");case 13:return Su("Suspense");case 19:return Su("SuspenseList");case 0:case 2:case 15:return t=Ag(t.type,!1),t;case 11:return t=Ag(t.type.render,!1),t;case 1:return t=Ag(t.type,!0),t;default:return""}}function Wm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xc:return"Fragment";case Rc:return"Portal";case Um:return"Profiler";case ay:return"StrictMode";case Vm:return"Suspense";case Gm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case o1:return(t.displayName||"Context")+".Consumer";case i1:return(t._context.displayName||"Context")+".Provider";case cy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ly:return e=t.displayName||null,e!==null?e:Wm(t.type)||"Memo";case Ls:e=t._payload,t=t._init;try{return Wm(t(e))}catch{}}return null}function d_(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wm(e);case 8:return e===ay?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ca(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function a1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function h_(t){var e=a1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function uh(t){t._valueTracker||(t._valueTracker=h_(t))}function c1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=a1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ef(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jm(t,e){var n=e.checked;return Ft({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wI(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ca(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function l1(t,e){e=e.checked,e!=null&&sy(t,"checked",e,!1)}function Zm(t,e){l1(t,e);var n=ca(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hm(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hm(t,e.type,ca(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function AI(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hm(t,e,n){(e!=="number"||Ef(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bu=Array.isArray;function Hc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ca(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ce(91));return Ft({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function kI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ce(92));if(bu(n)){if(1<n.length)throw Error(ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ca(n)}}function u1(t,e){var n=ca(e.value),r=ca(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function EI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function d1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?d1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var dh,h1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(dh=dh||document.createElement("div"),dh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=dh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Lu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f_=["Webkit","ms","Moz","O"];Object.keys(Lu).forEach(function(t){f_.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lu[e]=Lu[t]})});function f1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Lu.hasOwnProperty(t)&&Lu[t]?(""+e).trim():e+"px"}function p1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=f1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var p_=Ft({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $m(t,e){if(e){if(p_[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ce(62))}}function Km(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jm=null;function uy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ym=null,zc=null,Xc=null;function TI(t){if(t=Wd(t)){if(typeof Ym!="function")throw Error(ce(280));var e=t.stateNode;e&&(e=Lp(e),Ym(t.stateNode,t.type,e))}}function g1(t){zc?Xc?Xc.push(t):Xc=[t]:zc=t}function m1(){if(zc){var t=zc,e=Xc;if(Xc=zc=null,TI(t),e)for(t=0;t<e.length;t++)TI(e[t])}}function v1(t,e){return t(e)}function y1(){}var kg=!1;function C1(t,e,n){if(kg)return t(e,n);kg=!0;try{return v1(t,e,n)}finally{kg=!1,(zc!==null||Xc!==null)&&(y1(),m1())}}function td(t,e){var n=t.stateNode;if(n===null)return null;var r=Lp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ce(231,e,typeof n));return n}var Qm=!1;if(ds)try{var ql={};Object.defineProperty(ql,"passive",{get:function(){Qm=!0}}),window.addEventListener("test",ql,ql),window.removeEventListener("test",ql,ql)}catch{Qm=!1}function g_(t,e,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var Bu=!1,Tf=null,Rf=!1,qm=null,m_={onError:function(t){Bu=!0,Tf=t}};function v_(t,e,n,r,i,o,s,a,c){Bu=!1,Tf=null,g_.apply(m_,arguments)}function y_(t,e,n,r,i,o,s,a,c){if(v_.apply(this,arguments),Bu){if(Bu){var l=Tf;Bu=!1,Tf=null}else throw Error(ce(198));Rf||(Rf=!0,qm=l)}}function hc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function I1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function RI(t){if(hc(t)!==t)throw Error(ce(188))}function C_(t){var e=t.alternate;if(!e){if(e=hc(t),e===null)throw Error(ce(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return RI(i),t;if(o===r)return RI(i),e;o=o.sibling}throw Error(ce(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ce(189))}}if(n.alternate!==r)throw Error(ce(190))}if(n.tag!==3)throw Error(ce(188));return n.stateNode.current===n?t:e}function S1(t){return t=C_(t),t!==null?b1(t):null}function b1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=b1(t);if(e!==null)return e;t=t.sibling}return null}var w1=jr.unstable_scheduleCallback,xI=jr.unstable_cancelCallback,I_=jr.unstable_shouldYield,S_=jr.unstable_requestPaint,$t=jr.unstable_now,b_=jr.unstable_getCurrentPriorityLevel,dy=jr.unstable_ImmediatePriority,A1=jr.unstable_UserBlockingPriority,xf=jr.unstable_NormalPriority,w_=jr.unstable_LowPriority,k1=jr.unstable_IdlePriority,_p=null,go=null;function A_(t){if(go&&typeof go.onCommitFiberRoot=="function")try{go.onCommitFiberRoot(_p,t,void 0,(t.current.flags&128)===128)}catch{}}var Ni=Math.clz32?Math.clz32:T_,k_=Math.log,E_=Math.LN2;function T_(t){return t>>>=0,t===0?32:31-(k_(t)/E_|0)|0}var hh=64,fh=4194304;function wu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=wu(a):(o&=s,o!==0&&(r=wu(o)))}else s=n&~i,s!==0?r=wu(s):o!==0&&(r=wu(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ni(e),i=1<<n,r|=t[n],e&=~i;return r}function R_(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function x_(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Ni(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=R_(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function ev(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E1(){var t=hh;return hh<<=1,!(hh&4194240)&&(hh=64),t}function Eg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Vd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ni(e),t[e]=n}function P_(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ni(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function hy(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ni(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var lt=0;function T1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var R1,fy,x1,P1,N1,tv=!1,ph=[],Qs=null,qs=null,ea=null,nd=new Map,rd=new Map,Us=[],N_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PI(t,e){switch(t){case"focusin":case"focusout":Qs=null;break;case"dragenter":case"dragleave":qs=null;break;case"mouseover":case"mouseout":ea=null;break;case"pointerover":case"pointerout":nd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":rd.delete(e.pointerId)}}function eu(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=Wd(e),e!==null&&fy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function __(t,e,n,r,i){switch(e){case"focusin":return Qs=eu(Qs,t,e,n,r,i),!0;case"dragenter":return qs=eu(qs,t,e,n,r,i),!0;case"mouseover":return ea=eu(ea,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return nd.set(o,eu(nd.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,rd.set(o,eu(rd.get(o)||null,t,e,n,r,i)),!0}return!1}function _1(t){var e=Da(t.target);if(e!==null){var n=hc(e);if(n!==null){if(e=n.tag,e===13){if(e=I1(n),e!==null){t.blockedOn=e,N1(t.priority,function(){x1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=nv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Jm=r,n.target.dispatchEvent(r),Jm=null}else return e=Wd(n),e!==null&&fy(e),t.blockedOn=n,!1;e.shift()}return!0}function NI(t,e,n){Wh(t)&&n.delete(e)}function O_(){tv=!1,Qs!==null&&Wh(Qs)&&(Qs=null),qs!==null&&Wh(qs)&&(qs=null),ea!==null&&Wh(ea)&&(ea=null),nd.forEach(NI),rd.forEach(NI)}function tu(t,e){t.blockedOn===e&&(t.blockedOn=null,tv||(tv=!0,jr.unstable_scheduleCallback(jr.unstable_NormalPriority,O_)))}function id(t){function e(i){return tu(i,t)}if(0<ph.length){tu(ph[0],t);for(var n=1;n<ph.length;n++){var r=ph[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qs!==null&&tu(Qs,t),qs!==null&&tu(qs,t),ea!==null&&tu(ea,t),nd.forEach(e),rd.forEach(e),n=0;n<Us.length;n++)r=Us[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Us.length&&(n=Us[0],n.blockedOn===null);)_1(n),n.blockedOn===null&&Us.shift()}var $c=Is.ReactCurrentBatchConfig,Nf=!0;function M_(t,e,n,r){var i=lt,o=$c.transition;$c.transition=null;try{lt=1,py(t,e,n,r)}finally{lt=i,$c.transition=o}}function D_(t,e,n,r){var i=lt,o=$c.transition;$c.transition=null;try{lt=4,py(t,e,n,r)}finally{lt=i,$c.transition=o}}function py(t,e,n,r){if(Nf){var i=nv(t,e,n,r);if(i===null)Lg(t,e,r,_f,n),PI(t,r);else if(__(i,t,e,n,r))r.stopPropagation();else if(PI(t,r),e&4&&-1<N_.indexOf(t)){for(;i!==null;){var o=Wd(i);if(o!==null&&R1(o),o=nv(t,e,n,r),o===null&&Lg(t,e,r,_f,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else Lg(t,e,r,null,n)}}var _f=null;function nv(t,e,n,r){if(_f=null,t=uy(r),t=Da(t),t!==null)if(e=hc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=I1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _f=t,null}function O1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(b_()){case dy:return 1;case A1:return 4;case xf:case w_:return 16;case k1:return 536870912;default:return 16}default:return 16}}var Ws=null,gy=null,jh=null;function M1(){if(jh)return jh;var t,e=gy,n=e.length,r,i="value"in Ws?Ws.value:Ws.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return jh=i.slice(t,1<r?1-r:void 0)}function Zh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gh(){return!0}function _I(){return!1}function Xr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?gh:_I,this.isPropagationStopped=_I,this}return Ft(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gh)},persist:function(){},isPersistent:gh}),e}var Pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},my=Xr(Pl),Gd=Ft({},Pl,{view:0,detail:0}),L_=Xr(Gd),Tg,Rg,nu,Op=Ft({},Gd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==nu&&(nu&&t.type==="mousemove"?(Tg=t.screenX-nu.screenX,Rg=t.screenY-nu.screenY):Rg=Tg=0,nu=t),Tg)},movementY:function(t){return"movementY"in t?t.movementY:Rg}}),OI=Xr(Op),B_=Ft({},Op,{dataTransfer:0}),F_=Xr(B_),U_=Ft({},Gd,{relatedTarget:0}),xg=Xr(U_),V_=Ft({},Pl,{animationName:0,elapsedTime:0,pseudoElement:0}),G_=Xr(V_),W_=Ft({},Pl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),j_=Xr(W_),Z_=Ft({},Pl,{data:0}),MI=Xr(Z_),H_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},z_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=X_[t])?!!e[t]:!1}function vy(){return $_}var K_=Ft({},Gd,{key:function(t){if(t.key){var e=H_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?z_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vy,charCode:function(t){return t.type==="keypress"?Zh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),J_=Xr(K_),Y_=Ft({},Op,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),DI=Xr(Y_),Q_=Ft({},Gd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vy}),q_=Xr(Q_),eO=Ft({},Pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),tO=Xr(eO),nO=Ft({},Op,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rO=Xr(nO),iO=[9,13,27,32],yy=ds&&"CompositionEvent"in window,Fu=null;ds&&"documentMode"in document&&(Fu=document.documentMode);var oO=ds&&"TextEvent"in window&&!Fu,D1=ds&&(!yy||Fu&&8<Fu&&11>=Fu),LI=" ",BI=!1;function L1(t,e){switch(t){case"keyup":return iO.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Pc=!1;function sO(t,e){switch(t){case"compositionend":return B1(e);case"keypress":return e.which!==32?null:(BI=!0,LI);case"textInput":return t=e.data,t===LI&&BI?null:t;default:return null}}function aO(t,e){if(Pc)return t==="compositionend"||!yy&&L1(t,e)?(t=M1(),jh=gy=Ws=null,Pc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D1&&e.locale!=="ko"?null:e.data;default:return null}}var cO={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cO[t.type]:e==="textarea"}function F1(t,e,n,r){g1(r),e=Of(e,"onChange"),0<e.length&&(n=new my("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Uu=null,od=null;function lO(t){K1(t,0)}function Mp(t){var e=Oc(t);if(c1(e))return t}function uO(t,e){if(t==="change")return e}var U1=!1;if(ds){var Pg;if(ds){var Ng="oninput"in document;if(!Ng){var UI=document.createElement("div");UI.setAttribute("oninput","return;"),Ng=typeof UI.oninput=="function"}Pg=Ng}else Pg=!1;U1=Pg&&(!document.documentMode||9<document.documentMode)}function VI(){Uu&&(Uu.detachEvent("onpropertychange",V1),od=Uu=null)}function V1(t){if(t.propertyName==="value"&&Mp(od)){var e=[];F1(e,od,t,uy(t)),C1(lO,e)}}function dO(t,e,n){t==="focusin"?(VI(),Uu=e,od=n,Uu.attachEvent("onpropertychange",V1)):t==="focusout"&&VI()}function hO(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mp(od)}function fO(t,e){if(t==="click")return Mp(e)}function pO(t,e){if(t==="input"||t==="change")return Mp(e)}function gO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Mi=typeof Object.is=="function"?Object.is:gO;function sd(t,e){if(Mi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Fm.call(e,i)||!Mi(t[i],e[i]))return!1}return!0}function GI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function WI(t,e){var n=GI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=GI(n)}}function G1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function W1(){for(var t=window,e=Ef();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ef(t.document)}return e}function Cy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mO(t){var e=W1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&G1(n.ownerDocument.documentElement,n)){if(r!==null&&Cy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=WI(n,o);var s=WI(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vO=ds&&"documentMode"in document&&11>=document.documentMode,Nc=null,rv=null,Vu=null,iv=!1;function jI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;iv||Nc==null||Nc!==Ef(r)||(r=Nc,"selectionStart"in r&&Cy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vu&&sd(Vu,r)||(Vu=r,r=Of(rv,"onSelect"),0<r.length&&(e=new my("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Nc)))}function mh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var _c={animationend:mh("Animation","AnimationEnd"),animationiteration:mh("Animation","AnimationIteration"),animationstart:mh("Animation","AnimationStart"),transitionend:mh("Transition","TransitionEnd")},_g={},j1={};ds&&(j1=document.createElement("div").style,"AnimationEvent"in window||(delete _c.animationend.animation,delete _c.animationiteration.animation,delete _c.animationstart.animation),"TransitionEvent"in window||delete _c.transitionend.transition);function Dp(t){if(_g[t])return _g[t];if(!_c[t])return t;var e=_c[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j1)return _g[t]=e[n];return t}var Z1=Dp("animationend"),H1=Dp("animationiteration"),z1=Dp("animationstart"),X1=Dp("transitionend"),$1=new Map,ZI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pa(t,e){$1.set(t,e),dc(e,[t])}for(var Og=0;Og<ZI.length;Og++){var Mg=ZI[Og],yO=Mg.toLowerCase(),CO=Mg[0].toUpperCase()+Mg.slice(1);pa(yO,"on"+CO)}pa(Z1,"onAnimationEnd");pa(H1,"onAnimationIteration");pa(z1,"onAnimationStart");pa("dblclick","onDoubleClick");pa("focusin","onFocus");pa("focusout","onBlur");pa(X1,"onTransitionEnd");dl("onMouseEnter",["mouseout","mouseover"]);dl("onMouseLeave",["mouseout","mouseover"]);dl("onPointerEnter",["pointerout","pointerover"]);dl("onPointerLeave",["pointerout","pointerover"]);dc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));dc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));dc("onBeforeInput",["compositionend","keypress","textInput","paste"]);dc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));dc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Au="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IO=new Set("cancel close invalid load scroll toggle".split(" ").concat(Au));function HI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,y_(r,e,void 0,t),t.currentTarget=null}function K1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;HI(i,a,l),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;HI(i,a,l),o=c}}}if(Rf)throw t=qm,Rf=!1,qm=null,t}function St(t,e){var n=e[lv];n===void 0&&(n=e[lv]=new Set);var r=t+"__bubble";n.has(r)||(J1(e,t,2,!1),n.add(r))}function Dg(t,e,n){var r=0;e&&(r|=4),J1(n,t,r,e)}var vh="_reactListening"+Math.random().toString(36).slice(2);function ad(t){if(!t[vh]){t[vh]=!0,r1.forEach(function(n){n!=="selectionchange"&&(IO.has(n)||Dg(n,!1,t),Dg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vh]||(e[vh]=!0,Dg("selectionchange",!1,e))}}function J1(t,e,n,r){switch(O1(e)){case 1:var i=M_;break;case 4:i=D_;break;default:i=py}n=i.bind(null,e,n,t),i=void 0,!Qm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Lg(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Da(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}C1(function(){var l=o,u=uy(n),d=[];e:{var h=$1.get(t);if(h!==void 0){var f=my,p=t;switch(t){case"keypress":if(Zh(n)===0)break e;case"keydown":case"keyup":f=J_;break;case"focusin":p="focus",f=xg;break;case"focusout":p="blur",f=xg;break;case"beforeblur":case"afterblur":f=xg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=OI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=F_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=q_;break;case Z1:case H1:case z1:f=G_;break;case X1:f=tO;break;case"scroll":f=L_;break;case"wheel":f=rO;break;case"copy":case"cut":case"paste":f=j_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=DI}var g=(e&4)!==0,C=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,S;v!==null;){S=v;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,m!==null&&(E=td(v,m),E!=null&&g.push(cd(v,E,S)))),C)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Jm&&(p=n.relatedTarget||n.fromElement)&&(Da(p)||p[hs]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?Da(p):null,p!==null&&(C=hc(p),p!==C||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=OI,E="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=DI,E="onPointerLeave",m="onPointerEnter",v="pointer"),C=f==null?h:Oc(f),S=p==null?h:Oc(p),h=new g(E,v+"leave",f,n,u),h.target=C,h.relatedTarget=S,E=null,Da(u)===l&&(g=new g(m,v+"enter",p,n,u),g.target=S,g.relatedTarget=C,E=g),C=E,f&&p)t:{for(g=f,m=p,v=0,S=g;S;S=Ic(S))v++;for(S=0,E=m;E;E=Ic(E))S++;for(;0<v-S;)g=Ic(g),v--;for(;0<S-v;)m=Ic(m),S--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ic(g),m=Ic(m)}g=null}else g=null;f!==null&&zI(d,h,f,g,!1),p!==null&&C!==null&&zI(d,C,p,g,!0)}}e:{if(h=l?Oc(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=uO;else if(FI(h))if(U1)w=pO;else{w=hO;var A=dO}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=fO);if(w&&(w=w(t,l))){F1(d,w,n,u);break e}A&&A(t,h,l),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Hm(h,"number",h.value)}switch(A=l?Oc(l):window,t){case"focusin":(FI(A)||A.contentEditable==="true")&&(Nc=A,rv=l,Vu=null);break;case"focusout":Vu=rv=Nc=null;break;case"mousedown":iv=!0;break;case"contextmenu":case"mouseup":case"dragend":iv=!1,jI(d,n,u);break;case"selectionchange":if(vO)break;case"keydown":case"keyup":jI(d,n,u)}var x;if(yy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else Pc?L1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(D1&&n.locale!=="ko"&&(Pc||T!=="onCompositionStart"?T==="onCompositionEnd"&&Pc&&(x=M1()):(Ws=u,gy="value"in Ws?Ws.value:Ws.textContent,Pc=!0)),A=Of(l,T),0<A.length&&(T=new MI(T,t,null,n,u),d.push({event:T,listeners:A}),x?T.data=x:(x=B1(n),x!==null&&(T.data=x)))),(x=oO?sO(t,n):aO(t,n))&&(l=Of(l,"onBeforeInput"),0<l.length&&(u=new MI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}K1(d,e)})}function cd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Of(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=td(t,n),o!=null&&r.unshift(cd(t,o,i)),o=td(t,e),o!=null&&r.push(cd(t,o,i))),t=t.return}return r}function Ic(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zI(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=td(n,o),c!=null&&s.unshift(cd(n,c,a))):i||(c=td(n,o),c!=null&&s.push(cd(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var SO=/\r\n?/g,bO=/\u0000|\uFFFD/g;function XI(t){return(typeof t=="string"?t:""+t).replace(SO,`
`).replace(bO,"")}function yh(t,e,n){if(e=XI(e),XI(t)!==e&&n)throw Error(ce(425))}function Mf(){}var ov=null,sv=null;function av(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var cv=typeof setTimeout=="function"?setTimeout:void 0,wO=typeof clearTimeout=="function"?clearTimeout:void 0,$I=typeof Promise=="function"?Promise:void 0,AO=typeof queueMicrotask=="function"?queueMicrotask:typeof $I<"u"?function(t){return $I.resolve(null).then(t).catch(kO)}:cv;function kO(t){setTimeout(function(){throw t})}function Bg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),id(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);id(e)}function ta(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function KI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Nl=Math.random().toString(36).slice(2),Ki="__reactFiber$"+Nl,ld="__reactProps$"+Nl,hs="__reactContainer$"+Nl,lv="__reactEvents$"+Nl,EO="__reactListeners$"+Nl,TO="__reactHandles$"+Nl;function Da(t){var e=t[Ki];if(e)return e;for(var n=t.parentNode;n;){if(e=n[hs]||n[Ki]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=KI(t);t!==null;){if(n=t[Ki])return n;t=KI(t)}return e}t=n,n=t.parentNode}return null}function Wd(t){return t=t[Ki]||t[hs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Oc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ce(33))}function Lp(t){return t[ld]||null}var uv=[],Mc=-1;function ga(t){return{current:t}}function Et(t){0>Mc||(t.current=uv[Mc],uv[Mc]=null,Mc--)}function yt(t,e){Mc++,uv[Mc]=t.current,t.current=e}var la={},Wn=ga(la),yr=ga(!1),Ya=la;function hl(t,e){var n=t.type.contextTypes;if(!n)return la;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Cr(t){return t=t.childContextTypes,t!=null}function Df(){Et(yr),Et(Wn)}function JI(t,e,n){if(Wn.current!==la)throw Error(ce(168));yt(Wn,e),yt(yr,n)}function Y1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ce(108,d_(t)||"Unknown",i));return Ft({},n,r)}function Lf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||la,Ya=Wn.current,yt(Wn,t),yt(yr,yr.current),!0}function YI(t,e,n){var r=t.stateNode;if(!r)throw Error(ce(169));n?(t=Y1(t,e,Ya),r.__reactInternalMemoizedMergedChildContext=t,Et(yr),Et(Wn),yt(Wn,t)):Et(yr),yt(yr,n)}var Po=null,Bp=!1,Fg=!1;function Q1(t){Po===null?Po=[t]:Po.push(t)}function RO(t){Bp=!0,Q1(t)}function ma(){if(!Fg&&Po!==null){Fg=!0;var t=0,e=lt;try{var n=Po;for(lt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Po=null,Bp=!1}catch(i){throw Po!==null&&(Po=Po.slice(t+1)),w1(dy,ma),i}finally{lt=e,Fg=!1}}return null}var Dc=[],Lc=0,Bf=null,Ff=0,Jr=[],Yr=0,Qa=null,Do=1,Lo="";function Ea(t,e){Dc[Lc++]=Ff,Dc[Lc++]=Bf,Bf=t,Ff=e}function q1(t,e,n){Jr[Yr++]=Do,Jr[Yr++]=Lo,Jr[Yr++]=Qa,Qa=t;var r=Do;t=Lo;var i=32-Ni(r)-1;r&=~(1<<i),n+=1;var o=32-Ni(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Do=1<<32-Ni(e)+i|n<<i|r,Lo=o+t}else Do=1<<o|n<<i|r,Lo=t}function Iy(t){t.return!==null&&(Ea(t,1),q1(t,1,0))}function Sy(t){for(;t===Bf;)Bf=Dc[--Lc],Dc[Lc]=null,Ff=Dc[--Lc],Dc[Lc]=null;for(;t===Qa;)Qa=Jr[--Yr],Jr[Yr]=null,Lo=Jr[--Yr],Jr[Yr]=null,Do=Jr[--Yr],Jr[Yr]=null}var Gr=null,Ur=null,Nt=!1,wi=null;function ek(t,e){var n=qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function QI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gr=t,Ur=ta(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gr=t,Ur=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Qa!==null?{id:Do,overflow:Lo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gr=t,Ur=null,!0):!1;default:return!1}}function dv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hv(t){if(Nt){var e=Ur;if(e){var n=e;if(!QI(t,e)){if(dv(t))throw Error(ce(418));e=ta(n.nextSibling);var r=Gr;e&&QI(t,e)?ek(r,n):(t.flags=t.flags&-4097|2,Nt=!1,Gr=t)}}else{if(dv(t))throw Error(ce(418));t.flags=t.flags&-4097|2,Nt=!1,Gr=t}}}function qI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gr=t}function Ch(t){if(t!==Gr)return!1;if(!Nt)return qI(t),Nt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!av(t.type,t.memoizedProps)),e&&(e=Ur)){if(dv(t))throw tk(),Error(ce(418));for(;e;)ek(t,e),e=ta(e.nextSibling)}if(qI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ur=ta(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ur=null}}else Ur=Gr?ta(t.stateNode.nextSibling):null;return!0}function tk(){for(var t=Ur;t;)t=ta(t.nextSibling)}function fl(){Ur=Gr=null,Nt=!1}function by(t){wi===null?wi=[t]:wi.push(t)}var xO=Is.ReactCurrentBatchConfig;function ru(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ce(309));var r=n.stateNode}if(!r)throw Error(ce(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(ce(284));if(!n._owner)throw Error(ce(290,t))}return t}function Ih(t,e){throw t=Object.prototype.toString.call(e),Error(ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function eS(t){var e=t._init;return e(t._payload)}function nk(t){function e(m,v){if(t){var S=m.deletions;S===null?(m.deletions=[v],m.flags|=16):S.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=oa(m,v),m.index=0,m.sibling=null,m}function o(m,v,S){return m.index=S,t?(S=m.alternate,S!==null?(S=S.index,S<v?(m.flags|=2,v):S):(m.flags|=2,v)):(m.flags|=1048576,v)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,S,E){return v===null||v.tag!==6?(v=Hg(S,m.mode,E),v.return=m,v):(v=i(v,S),v.return=m,v)}function c(m,v,S,E){var w=S.type;return w===xc?u(m,v,S.props.children,E,S.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ls&&eS(w)===v.type)?(E=i(v,S.props),E.ref=ru(m,v,S),E.return=m,E):(E=Yh(S.type,S.key,S.props,null,m.mode,E),E.ref=ru(m,v,S),E.return=m,E)}function l(m,v,S,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=zg(S,m.mode,E),v.return=m,v):(v=i(v,S.children||[]),v.return=m,v)}function u(m,v,S,E,w){return v===null||v.tag!==7?(v=Ha(S,m.mode,E,w),v.return=m,v):(v=i(v,S),v.return=m,v)}function d(m,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Hg(""+v,m.mode,S),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case lh:return S=Yh(v.type,v.key,v.props,null,m.mode,S),S.ref=ru(m,null,v),S.return=m,S;case Rc:return v=zg(v,m.mode,S),v.return=m,v;case Ls:var E=v._init;return d(m,E(v._payload),S)}if(bu(v)||Ql(v))return v=Ha(v,m.mode,S,null),v.return=m,v;Ih(m,v)}return null}function h(m,v,S,E){var w=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return w!==null?null:a(m,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case lh:return S.key===w?c(m,v,S,E):null;case Rc:return S.key===w?l(m,v,S,E):null;case Ls:return w=S._init,h(m,v,w(S._payload),E)}if(bu(S)||Ql(S))return w!==null?null:u(m,v,S,E,null);Ih(m,S)}return null}function f(m,v,S,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(S)||null,a(v,m,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case lh:return m=m.get(E.key===null?S:E.key)||null,c(v,m,E,w);case Rc:return m=m.get(E.key===null?S:E.key)||null,l(v,m,E,w);case Ls:var A=E._init;return f(m,v,S,A(E._payload),w)}if(bu(E)||Ql(E))return m=m.get(S)||null,u(v,m,E,w,null);Ih(v,E)}return null}function p(m,v,S,E){for(var w=null,A=null,x=v,T=v=0,_=null;x!==null&&T<S.length;T++){x.index>T?(_=x,x=null):_=x.sibling;var O=h(m,x,S[T],E);if(O===null){x===null&&(x=_);break}t&&x&&O.alternate===null&&e(m,x),v=o(O,v,T),A===null?w=O:A.sibling=O,A=O,x=_}if(T===S.length)return n(m,x),Nt&&Ea(m,T),w;if(x===null){for(;T<S.length;T++)x=d(m,S[T],E),x!==null&&(v=o(x,v,T),A===null?w=x:A.sibling=x,A=x);return Nt&&Ea(m,T),w}for(x=r(m,x);T<S.length;T++)_=f(x,m,T,S[T],E),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?T:_.key),v=o(_,v,T),A===null?w=_:A.sibling=_,A=_);return t&&x.forEach(function(L){return e(m,L)}),Nt&&Ea(m,T),w}function g(m,v,S,E){var w=Ql(S);if(typeof w!="function")throw Error(ce(150));if(S=w.call(S),S==null)throw Error(ce(151));for(var A=w=null,x=v,T=v=0,_=null,O=S.next();x!==null&&!O.done;T++,O=S.next()){x.index>T?(_=x,x=null):_=x.sibling;var L=h(m,x,O.value,E);if(L===null){x===null&&(x=_);break}t&&x&&L.alternate===null&&e(m,x),v=o(L,v,T),A===null?w=L:A.sibling=L,A=L,x=_}if(O.done)return n(m,x),Nt&&Ea(m,T),w;if(x===null){for(;!O.done;T++,O=S.next())O=d(m,O.value,E),O!==null&&(v=o(O,v,T),A===null?w=O:A.sibling=O,A=O);return Nt&&Ea(m,T),w}for(x=r(m,x);!O.done;T++,O=S.next())O=f(x,m,T,O.value,E),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?T:O.key),v=o(O,v,T),A===null?w=O:A.sibling=O,A=O);return t&&x.forEach(function(U){return e(m,U)}),Nt&&Ea(m,T),w}function C(m,v,S,E){if(typeof S=="object"&&S!==null&&S.type===xc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case lh:e:{for(var w=S.key,A=v;A!==null;){if(A.key===w){if(w=S.type,w===xc){if(A.tag===7){n(m,A.sibling),v=i(A,S.props.children),v.return=m,m=v;break e}}else if(A.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Ls&&eS(w)===A.type){n(m,A.sibling),v=i(A,S.props),v.ref=ru(m,A,S),v.return=m,m=v;break e}n(m,A);break}else e(m,A);A=A.sibling}S.type===xc?(v=Ha(S.props.children,m.mode,E,S.key),v.return=m,m=v):(E=Yh(S.type,S.key,S.props,null,m.mode,E),E.ref=ru(m,v,S),E.return=m,m=E)}return s(m);case Rc:e:{for(A=S.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(m,v.sibling),v=i(v,S.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=zg(S,m.mode,E),v.return=m,m=v}return s(m);case Ls:return A=S._init,C(m,v,A(S._payload),E)}if(bu(S))return p(m,v,S,E);if(Ql(S))return g(m,v,S,E);Ih(m,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,S),v.return=m,m=v):(n(m,v),v=Hg(S,m.mode,E),v.return=m,m=v),s(m)):n(m,v)}return C}var pl=nk(!0),rk=nk(!1),Uf=ga(null),Vf=null,Bc=null,wy=null;function Ay(){wy=Bc=Vf=null}function ky(t){var e=Uf.current;Et(Uf),t._currentValue=e}function fv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Kc(t,e){Vf=t,wy=Bc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mr=!0),t.firstContext=null)}function ri(t){var e=t._currentValue;if(wy!==t)if(t={context:t,memoizedValue:e,next:null},Bc===null){if(Vf===null)throw Error(ce(308));Bc=t,Vf.dependencies={lanes:0,firstContext:t}}else Bc=Bc.next=t;return e}var La=null;function Ey(t){La===null?La=[t]:La.push(t)}function ik(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Ey(e)):(n.next=i.next,i.next=n),e.interleaved=n,fs(t,r)}function fs(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Bs=!1;function Ty(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ok(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function as(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function na(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Qe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,fs(t,n)}return i=r.interleaved,i===null?(e.next=e,Ey(r)):(e.next=i.next,i.next=e),r.interleaved=e,fs(t,n)}function Hh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hy(t,n)}}function tS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gf(t,e,n,r){var i=t.updateQueue;Bs=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,s===null?o=l:s.next=l,s=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;s=0,u=l=c=null,a=o;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Ft({},d,h);break e;case 2:Bs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ec|=s,t.lanes=s,t.memoizedState=d}}function nS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ce(191,i));i.call(r)}}}var jd={},mo=ga(jd),ud=ga(jd),dd=ga(jd);function Ba(t){if(t===jd)throw Error(ce(174));return t}function Ry(t,e){switch(yt(dd,e),yt(ud,t),yt(mo,jd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Xm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Xm(e,t)}Et(mo),yt(mo,e)}function gl(){Et(mo),Et(ud),Et(dd)}function sk(t){Ba(dd.current);var e=Ba(mo.current),n=Xm(e,t.type);e!==n&&(yt(ud,t),yt(mo,n))}function xy(t){ud.current===t&&(Et(mo),Et(ud))}var Lt=ga(0);function Wf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ug=[];function Py(){for(var t=0;t<Ug.length;t++)Ug[t]._workInProgressVersionPrimary=null;Ug.length=0}var zh=Is.ReactCurrentDispatcher,Vg=Is.ReactCurrentBatchConfig,qa=0,Bt=null,an=null,pn=null,jf=!1,Gu=!1,hd=0,PO=0;function Dn(){throw Error(ce(321))}function Ny(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Mi(t[n],e[n]))return!1;return!0}function _y(t,e,n,r,i,o){if(qa=o,Bt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zh.current=t===null||t.memoizedState===null?MO:DO,t=n(r,i),Gu){o=0;do{if(Gu=!1,hd=0,25<=o)throw Error(ce(301));o+=1,pn=an=null,e.updateQueue=null,zh.current=LO,t=n(r,i)}while(Gu)}if(zh.current=Zf,e=an!==null&&an.next!==null,qa=0,pn=an=Bt=null,jf=!1,e)throw Error(ce(300));return t}function Oy(){var t=hd!==0;return hd=0,t}function Xi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pn===null?Bt.memoizedState=pn=t:pn=pn.next=t,pn}function ii(){if(an===null){var t=Bt.alternate;t=t!==null?t.memoizedState:null}else t=an.next;var e=pn===null?Bt.memoizedState:pn.next;if(e!==null)pn=e,an=t;else{if(t===null)throw Error(ce(310));an=t,t={memoizedState:an.memoizedState,baseState:an.baseState,baseQueue:an.baseQueue,queue:an.queue,next:null},pn===null?Bt.memoizedState=pn=t:pn=pn.next=t}return pn}function fd(t,e){return typeof e=="function"?e(t):e}function Gg(t){var e=ii(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=an,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,l=o;do{var u=l.lane;if((qa&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,s=r):c=c.next=d,Bt.lanes|=u,ec|=u}l=l.next}while(l!==null&&l!==o);c===null?s=r:c.next=a,Mi(r,e.memoizedState)||(mr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Bt.lanes|=o,ec|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wg(t){var e=ii(),n=e.queue;if(n===null)throw Error(ce(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Mi(o,e.memoizedState)||(mr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function ak(){}function ck(t,e){var n=Bt,r=ii(),i=e(),o=!Mi(r.memoizedState,i);if(o&&(r.memoizedState=i,mr=!0),r=r.queue,My(dk.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||pn!==null&&pn.memoizedState.tag&1){if(n.flags|=2048,pd(9,uk.bind(null,n,r,i,e),void 0,null),mn===null)throw Error(ce(349));qa&30||lk(n,e,i)}return i}function lk(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function uk(t,e,n,r){e.value=n,e.getSnapshot=r,hk(e)&&fk(t)}function dk(t,e,n){return n(function(){hk(e)&&fk(t)})}function hk(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Mi(t,n)}catch{return!0}}function fk(t){var e=fs(t,1);e!==null&&_i(e,t,1,-1)}function rS(t){var e=Xi();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fd,lastRenderedState:t},e.queue=t,t=t.dispatch=OO.bind(null,Bt,t),[e.memoizedState,t]}function pd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Bt.updateQueue,e===null?(e={lastEffect:null,stores:null},Bt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function pk(){return ii().memoizedState}function Xh(t,e,n,r){var i=Xi();Bt.flags|=t,i.memoizedState=pd(1|e,n,void 0,r===void 0?null:r)}function Fp(t,e,n,r){var i=ii();r=r===void 0?null:r;var o=void 0;if(an!==null){var s=an.memoizedState;if(o=s.destroy,r!==null&&Ny(r,s.deps)){i.memoizedState=pd(e,n,o,r);return}}Bt.flags|=t,i.memoizedState=pd(1|e,n,o,r)}function iS(t,e){return Xh(8390656,8,t,e)}function My(t,e){return Fp(2048,8,t,e)}function gk(t,e){return Fp(4,2,t,e)}function mk(t,e){return Fp(4,4,t,e)}function vk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function yk(t,e,n){return n=n!=null?n.concat([t]):null,Fp(4,4,vk.bind(null,e,t),n)}function Dy(){}function Ck(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ny(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ik(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ny(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Sk(t,e,n){return qa&21?(Mi(n,e)||(n=E1(),Bt.lanes|=n,ec|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mr=!0),t.memoizedState=n)}function NO(t,e){var n=lt;lt=n!==0&&4>n?n:4,t(!0);var r=Vg.transition;Vg.transition={};try{t(!1),e()}finally{lt=n,Vg.transition=r}}function bk(){return ii().memoizedState}function _O(t,e,n){var r=ia(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},wk(t))Ak(e,n);else if(n=ik(t,e,n,r),n!==null){var i=rr();_i(n,t,r,i),kk(n,e,r)}}function OO(t,e,n){var r=ia(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(wk(t))Ak(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Mi(a,s)){var c=e.interleaved;c===null?(i.next=i,Ey(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=ik(t,e,i,r),n!==null&&(i=rr(),_i(n,t,r,i),kk(n,e,r))}}function wk(t){var e=t.alternate;return t===Bt||e!==null&&e===Bt}function Ak(t,e){Gu=jf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function kk(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hy(t,n)}}var Zf={readContext:ri,useCallback:Dn,useContext:Dn,useEffect:Dn,useImperativeHandle:Dn,useInsertionEffect:Dn,useLayoutEffect:Dn,useMemo:Dn,useReducer:Dn,useRef:Dn,useState:Dn,useDebugValue:Dn,useDeferredValue:Dn,useTransition:Dn,useMutableSource:Dn,useSyncExternalStore:Dn,useId:Dn,unstable_isNewReconciler:!1},MO={readContext:ri,useCallback:function(t,e){return Xi().memoizedState=[t,e===void 0?null:e],t},useContext:ri,useEffect:iS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xh(4194308,4,vk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xh(4,2,t,e)},useMemo:function(t,e){var n=Xi();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Xi();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=_O.bind(null,Bt,t),[r.memoizedState,t]},useRef:function(t){var e=Xi();return t={current:t},e.memoizedState=t},useState:rS,useDebugValue:Dy,useDeferredValue:function(t){return Xi().memoizedState=t},useTransition:function(){var t=rS(!1),e=t[0];return t=NO.bind(null,t[1]),Xi().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Bt,i=Xi();if(Nt){if(n===void 0)throw Error(ce(407));n=n()}else{if(n=e(),mn===null)throw Error(ce(349));qa&30||lk(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,iS(dk.bind(null,r,o,t),[t]),r.flags|=2048,pd(9,uk.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Xi(),e=mn.identifierPrefix;if(Nt){var n=Lo,r=Do;n=(r&~(1<<32-Ni(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=hd++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=PO++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DO={readContext:ri,useCallback:Ck,useContext:ri,useEffect:My,useImperativeHandle:yk,useInsertionEffect:gk,useLayoutEffect:mk,useMemo:Ik,useReducer:Gg,useRef:pk,useState:function(){return Gg(fd)},useDebugValue:Dy,useDeferredValue:function(t){var e=ii();return Sk(e,an.memoizedState,t)},useTransition:function(){var t=Gg(fd)[0],e=ii().memoizedState;return[t,e]},useMutableSource:ak,useSyncExternalStore:ck,useId:bk,unstable_isNewReconciler:!1},LO={readContext:ri,useCallback:Ck,useContext:ri,useEffect:My,useImperativeHandle:yk,useInsertionEffect:gk,useLayoutEffect:mk,useMemo:Ik,useReducer:Wg,useRef:pk,useState:function(){return Wg(fd)},useDebugValue:Dy,useDeferredValue:function(t){var e=ii();return an===null?e.memoizedState=t:Sk(e,an.memoizedState,t)},useTransition:function(){var t=Wg(fd)[0],e=ii().memoizedState;return[t,e]},useMutableSource:ak,useSyncExternalStore:ck,useId:bk,unstable_isNewReconciler:!1};function di(t,e){if(t&&t.defaultProps){e=Ft({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ft({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Up={isMounted:function(t){return(t=t._reactInternals)?hc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=rr(),i=ia(t),o=as(r,i);o.payload=e,n!=null&&(o.callback=n),e=na(t,o,i),e!==null&&(_i(e,t,i,r),Hh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=rr(),i=ia(t),o=as(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=na(t,o,i),e!==null&&(_i(e,t,i,r),Hh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=rr(),r=ia(t),i=as(n,r);i.tag=2,e!=null&&(i.callback=e),e=na(t,i,r),e!==null&&(_i(e,t,r,n),Hh(e,t,r))}};function oS(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!sd(n,r)||!sd(i,o):!0}function Ek(t,e,n){var r=!1,i=la,o=e.contextType;return typeof o=="object"&&o!==null?o=ri(o):(i=Cr(e)?Ya:Wn.current,r=e.contextTypes,o=(r=r!=null)?hl(t,i):la),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Up,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function sS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Up.enqueueReplaceState(e,e.state,null)}function gv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Ty(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ri(o):(o=Cr(e)?Ya:Wn.current,i.context=hl(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(pv(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Up.enqueueReplaceState(i,i.state,null),Gf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ml(t,e){try{var n="",r=e;do n+=u_(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function jg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BO=typeof WeakMap=="function"?WeakMap:Map;function Tk(t,e,n){n=as(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zf||(zf=!0,Ev=r),mv(t,e)},n}function Rk(t,e,n){n=as(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){mv(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){mv(t,e),typeof r!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function aS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new BO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=YO.bind(null,t,e,n),e.then(t,t))}function cS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function lS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=as(-1,1),e.tag=2,na(n,e,1))),n.lanes|=1),t)}var FO=Is.ReactCurrentOwner,mr=!1;function Jn(t,e,n,r){e.child=t===null?rk(e,null,n,r):pl(e,t.child,n,r)}function uS(t,e,n,r,i){n=n.render;var o=e.ref;return Kc(e,i),r=_y(t,e,n,r,o,i),n=Oy(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ps(t,e,i)):(Nt&&n&&Iy(e),e.flags|=1,Jn(t,e,r,i),e.child)}function dS(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!jy(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,xk(t,e,o,r,i)):(t=Yh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:sd,n(s,r)&&t.ref===e.ref)return ps(t,e,i)}return e.flags|=1,t=oa(o,r),t.ref=e.ref,t.return=e,e.child=t}function xk(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(sd(o,r)&&t.ref===e.ref)if(mr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(mr=!0);else return e.lanes=t.lanes,ps(t,e,i)}return vv(t,e,n,r,i)}function Pk(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},yt(Uc,_r),_r|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,yt(Uc,_r),_r|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,yt(Uc,_r),_r|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,yt(Uc,_r),_r|=r;return Jn(t,e,i,n),e.child}function Nk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function vv(t,e,n,r,i){var o=Cr(n)?Ya:Wn.current;return o=hl(e,o),Kc(e,i),n=_y(t,e,n,r,o,i),r=Oy(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,ps(t,e,i)):(Nt&&r&&Iy(e),e.flags|=1,Jn(t,e,n,i),e.child)}function hS(t,e,n,r,i){if(Cr(n)){var o=!0;Lf(e)}else o=!1;if(Kc(e,i),e.stateNode===null)$h(t,e),Ek(e,n,r),gv(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=ri(l):(l=Cr(n)?Ya:Wn.current,l=hl(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==l)&&sS(e,s,r,l),Bs=!1;var h=e.memoizedState;s.state=h,Gf(e,r,s,i),c=e.memoizedState,a!==r||h!==c||yr.current||Bs?(typeof u=="function"&&(pv(e,n,u,r),c=e.memoizedState),(a=Bs||oS(e,n,a,r,h,c,l))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,ok(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:di(e.type,a),s.props=l,d=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=ri(c):(c=Cr(n)?Ya:Wn.current,c=hl(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==c)&&sS(e,s,r,c),Bs=!1,h=e.memoizedState,s.state=h,Gf(e,r,s,i);var p=e.memoizedState;a!==d||h!==p||yr.current||Bs?(typeof f=="function"&&(pv(e,n,f,r),p=e.memoizedState),(l=Bs||oS(e,n,l,r,h,p,c)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=c,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return yv(t,e,n,r,o,i)}function yv(t,e,n,r,i,o){Nk(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&YI(e,n,!1),ps(t,e,o);r=e.stateNode,FO.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=pl(e,t.child,null,o),e.child=pl(e,null,a,o)):Jn(t,e,a,o),e.memoizedState=r.state,i&&YI(e,n,!0),e.child}function _k(t){var e=t.stateNode;e.pendingContext?JI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JI(t,e.context,!1),Ry(t,e.containerInfo)}function fS(t,e,n,r,i){return fl(),by(i),e.flags|=256,Jn(t,e,n,r),e.child}var Cv={dehydrated:null,treeContext:null,retryLane:0};function Iv(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ok(t,e,n){var r=e.pendingProps,i=Lt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),yt(Lt,i&1),t===null)return hv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Wp(s,r,0,null),t=Ha(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Iv(n),e.memoizedState=Cv,t):Ly(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return UO(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=oa(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=oa(a,o):(o=Ha(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Iv(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Cv,r}return o=t.child,t=o.sibling,r=oa(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ly(t,e){return e=Wp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Sh(t,e,n,r){return r!==null&&by(r),pl(e,t.child,null,n),t=Ly(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UO(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=jg(Error(ce(422))),Sh(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Wp({mode:"visible",children:r.children},i,0,null),o=Ha(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&pl(e,t.child,null,s),e.child.memoizedState=Iv(s),e.memoizedState=Cv,o);if(!(e.mode&1))return Sh(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ce(419)),r=jg(o,r,void 0),Sh(t,e,s,r)}if(a=(s&t.childLanes)!==0,mr||a){if(r=mn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,fs(t,i),_i(r,t,i,-1))}return Wy(),r=jg(Error(ce(421))),Sh(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=QO.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ur=ta(i.nextSibling),Gr=e,Nt=!0,wi=null,t!==null&&(Jr[Yr++]=Do,Jr[Yr++]=Lo,Jr[Yr++]=Qa,Do=t.id,Lo=t.overflow,Qa=e),e=Ly(e,r.children),e.flags|=4096,e)}function pS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fv(t.return,e,n)}function Zg(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Mk(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Jn(t,e,r.children,n),r=Lt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&pS(t,n,e);else if(t.tag===19)pS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(yt(Lt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Wf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Zg(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Wf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Zg(e,!0,n,null,o);break;case"together":Zg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $h(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ps(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ec|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ce(153));if(e.child!==null){for(t=e.child,n=oa(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=oa(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VO(t,e,n){switch(e.tag){case 3:_k(e),fl();break;case 5:sk(e);break;case 1:Cr(e.type)&&Lf(e);break;case 4:Ry(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;yt(Uf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(yt(Lt,Lt.current&1),e.flags|=128,null):n&e.child.childLanes?Ok(t,e,n):(yt(Lt,Lt.current&1),t=ps(t,e,n),t!==null?t.sibling:null);yt(Lt,Lt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Mk(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),yt(Lt,Lt.current),r)break;return null;case 22:case 23:return e.lanes=0,Pk(t,e,n)}return ps(t,e,n)}var Dk,Sv,Lk,Bk;Dk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Sv=function(){};Lk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ba(mo.current);var o=null;switch(n){case"input":i=jm(t,i),r=jm(t,r),o=[];break;case"select":i=Ft({},i,{value:void 0}),r=Ft({},r,{value:void 0}),o=[];break;case"textarea":i=zm(t,i),r=zm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Mf)}$m(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(qu.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(qu.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&St("scroll",t),o||a===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};Bk=function(t,e,n,r){n!==r&&(e.flags|=4)};function iu(t,e){if(!Nt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function GO(t,e,n){var r=e.pendingProps;switch(Sy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ln(e),null;case 1:return Cr(e.type)&&Df(),Ln(e),null;case 3:return r=e.stateNode,gl(),Et(yr),Et(Wn),Py(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ch(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wi!==null&&(xv(wi),wi=null))),Sv(t,e),Ln(e),null;case 5:xy(e);var i=Ba(dd.current);if(n=e.type,t!==null&&e.stateNode!=null)Lk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ce(166));return Ln(e),null}if(t=Ba(mo.current),Ch(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Ki]=e,r[ld]=o,t=(e.mode&1)!==0,n){case"dialog":St("cancel",r),St("close",r);break;case"iframe":case"object":case"embed":St("load",r);break;case"video":case"audio":for(i=0;i<Au.length;i++)St(Au[i],r);break;case"source":St("error",r);break;case"img":case"image":case"link":St("error",r),St("load",r);break;case"details":St("toggle",r);break;case"input":wI(r,o),St("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},St("invalid",r);break;case"textarea":kI(r,o),St("invalid",r)}$m(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&yh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&yh(r.textContent,a,t),i=["children",""+a]):qu.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&St("scroll",r)}switch(n){case"input":uh(r),AI(r,o,!0);break;case"textarea":uh(r),EI(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Mf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=d1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Ki]=e,t[ld]=r,Dk(t,e,!1,!1),e.stateNode=t;e:{switch(s=Km(n,r),n){case"dialog":St("cancel",t),St("close",t),i=r;break;case"iframe":case"object":case"embed":St("load",t),i=r;break;case"video":case"audio":for(i=0;i<Au.length;i++)St(Au[i],t);i=r;break;case"source":St("error",t),i=r;break;case"img":case"image":case"link":St("error",t),St("load",t),i=r;break;case"details":St("toggle",t),i=r;break;case"input":wI(t,r),i=jm(t,r),St("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Ft({},r,{value:void 0}),St("invalid",t);break;case"textarea":kI(t,r),i=zm(t,r),St("invalid",t);break;default:i=r}$m(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?p1(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&h1(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ed(t,c):typeof c=="number"&&ed(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(qu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&St("scroll",t):c!=null&&sy(t,o,c,s))}switch(n){case"input":uh(t),AI(t,r,!1);break;case"textarea":uh(t),EI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ca(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Hc(t,!!r.multiple,o,!1):r.defaultValue!=null&&Hc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Mf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ln(e),null;case 6:if(t&&e.stateNode!=null)Bk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ce(166));if(n=Ba(dd.current),Ba(mo.current),Ch(e)){if(r=e.stateNode,n=e.memoizedProps,r[Ki]=e,(o=r.nodeValue!==n)&&(t=Gr,t!==null))switch(t.tag){case 3:yh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yh(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Ki]=e,e.stateNode=r}return Ln(e),null;case 13:if(Et(Lt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Nt&&Ur!==null&&e.mode&1&&!(e.flags&128))tk(),fl(),e.flags|=98560,o=!1;else if(o=Ch(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ce(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ce(317));o[Ki]=e}else fl(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ln(e),o=!1}else wi!==null&&(xv(wi),wi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Lt.current&1?cn===0&&(cn=3):Wy())),e.updateQueue!==null&&(e.flags|=4),Ln(e),null);case 4:return gl(),Sv(t,e),t===null&&ad(e.stateNode.containerInfo),Ln(e),null;case 10:return ky(e.type._context),Ln(e),null;case 17:return Cr(e.type)&&Df(),Ln(e),null;case 19:if(Et(Lt),o=e.memoizedState,o===null)return Ln(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)iu(o,!1);else{if(cn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Wf(t),s!==null){for(e.flags|=128,iu(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return yt(Lt,Lt.current&1|2),e.child}t=t.sibling}o.tail!==null&&$t()>vl&&(e.flags|=128,r=!0,iu(o,!1),e.lanes=4194304)}else{if(!r)if(t=Wf(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),iu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Nt)return Ln(e),null}else 2*$t()-o.renderingStartTime>vl&&n!==1073741824&&(e.flags|=128,r=!0,iu(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=$t(),e.sibling=null,n=Lt.current,yt(Lt,r?n&1|2:n&1),e):(Ln(e),null);case 22:case 23:return Gy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?_r&1073741824&&(Ln(e),e.subtreeFlags&6&&(e.flags|=8192)):Ln(e),null;case 24:return null;case 25:return null}throw Error(ce(156,e.tag))}function WO(t,e){switch(Sy(e),e.tag){case 1:return Cr(e.type)&&Df(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gl(),Et(yr),Et(Wn),Py(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xy(e),null;case 13:if(Et(Lt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ce(340));fl()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Et(Lt),null;case 4:return gl(),null;case 10:return ky(e.type._context),null;case 22:case 23:return Gy(),null;case 24:return null;default:return null}}var bh=!1,Fn=!1,jO=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Fc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wt(t,e,r)}else n.current=null}function bv(t,e,n){try{n()}catch(r){Wt(t,e,r)}}var gS=!1;function ZO(t,e){if(ov=Nf,t=W1(),Cy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(c=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===i&&(a=s),h===o&&++u===r&&(c=s),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(sv={focusedElem:t,selectionRange:n},Nf=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,C=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:di(e.type,g),C);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ce(163))}}catch(E){Wt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return p=gS,gS=!1,p}function Wu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&bv(e,n,o)}i=i.next}while(i!==r)}}function Vp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Fk(t){var e=t.alternate;e!==null&&(t.alternate=null,Fk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ki],delete e[ld],delete e[lv],delete e[EO],delete e[TO])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uk(t){return t.tag===5||t.tag===3||t.tag===4}function mS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uk(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Av(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Mf));else if(r!==4&&(t=t.child,t!==null))for(Av(t,e,n),t=t.sibling;t!==null;)Av(t,e,n),t=t.sibling}function kv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(kv(t,e,n),t=t.sibling;t!==null;)kv(t,e,n),t=t.sibling}var Sn=null,Ii=!1;function ks(t,e,n){for(n=n.child;n!==null;)Vk(t,e,n),n=n.sibling}function Vk(t,e,n){if(go&&typeof go.onCommitFiberUnmount=="function")try{go.onCommitFiberUnmount(_p,n)}catch{}switch(n.tag){case 5:Fn||Fc(n,e);case 6:var r=Sn,i=Ii;Sn=null,ks(t,e,n),Sn=r,Ii=i,Sn!==null&&(Ii?(t=Sn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Sn.removeChild(n.stateNode));break;case 18:Sn!==null&&(Ii?(t=Sn,n=n.stateNode,t.nodeType===8?Bg(t.parentNode,n):t.nodeType===1&&Bg(t,n),id(t)):Bg(Sn,n.stateNode));break;case 4:r=Sn,i=Ii,Sn=n.stateNode.containerInfo,Ii=!0,ks(t,e,n),Sn=r,Ii=i;break;case 0:case 11:case 14:case 15:if(!Fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&bv(n,e,s),i=i.next}while(i!==r)}ks(t,e,n);break;case 1:if(!Fn&&(Fc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wt(n,e,a)}ks(t,e,n);break;case 21:ks(t,e,n);break;case 22:n.mode&1?(Fn=(r=Fn)||n.memoizedState!==null,ks(t,e,n),Fn=r):ks(t,e,n);break;default:ks(t,e,n)}}function vS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new jO),e.forEach(function(r){var i=qO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ai(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Sn=a.stateNode,Ii=!1;break e;case 3:Sn=a.stateNode.containerInfo,Ii=!0;break e;case 4:Sn=a.stateNode.containerInfo,Ii=!0;break e}a=a.return}if(Sn===null)throw Error(ce(160));Vk(o,s,i),Sn=null,Ii=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Wt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Gk(e,t),e=e.sibling}function Gk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ai(e,t),ji(t),r&4){try{Wu(3,t,t.return),Vp(3,t)}catch(g){Wt(t,t.return,g)}try{Wu(5,t,t.return)}catch(g){Wt(t,t.return,g)}}break;case 1:ai(e,t),ji(t),r&512&&n!==null&&Fc(n,n.return);break;case 5:if(ai(e,t),ji(t),r&512&&n!==null&&Fc(n,n.return),t.flags&32){var i=t.stateNode;try{ed(i,"")}catch(g){Wt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&l1(i,o),Km(a,s);var l=Km(a,o);for(s=0;s<c.length;s+=2){var u=c[s],d=c[s+1];u==="style"?p1(i,d):u==="dangerouslySetInnerHTML"?h1(i,d):u==="children"?ed(i,d):sy(i,u,d,l)}switch(a){case"input":Zm(i,o);break;case"textarea":u1(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Hc(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Hc(i,!!o.multiple,o.defaultValue,!0):Hc(i,!!o.multiple,o.multiple?[]:"",!1))}i[ld]=o}catch(g){Wt(t,t.return,g)}}break;case 6:if(ai(e,t),ji(t),r&4){if(t.stateNode===null)throw Error(ce(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Wt(t,t.return,g)}}break;case 3:if(ai(e,t),ji(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{id(e.containerInfo)}catch(g){Wt(t,t.return,g)}break;case 4:ai(e,t),ji(t);break;case 13:ai(e,t),ji(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Uy=$t())),r&4&&vS(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Fn=(l=Fn)||u,ai(e,t),Fn=l):ai(e,t),ji(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(h=Ie,f=h.child,h.tag){case 0:case 11:case 14:case 15:Wu(4,h,h.return);break;case 1:Fc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Wt(r,n,g)}}break;case 5:Fc(h,h.return);break;case 22:if(h.memoizedState!==null){CS(d);continue}}f!==null?(f.return=h,Ie=f):CS(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=f1("display",s))}catch(g){Wt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Wt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ai(e,t),ji(t),r&4&&vS(t);break;case 21:break;default:ai(e,t),ji(t)}}function ji(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Uk(n)){var r=n;break e}n=n.return}throw Error(ce(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ed(i,""),r.flags&=-33);var o=mS(t);kv(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=mS(t);Av(t,a,s);break;default:throw Error(ce(161))}}catch(c){Wt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HO(t,e,n){Ie=t,Wk(t)}function Wk(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||bh;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Fn;a=bh;var l=Fn;if(bh=s,(Fn=c)&&!l)for(Ie=i;Ie!==null;)s=Ie,c=s.child,s.tag===22&&s.memoizedState!==null?IS(i):c!==null?(c.return=s,Ie=c):IS(i);for(;o!==null;)Ie=o,Wk(o),o=o.sibling;Ie=i,bh=a,Fn=l}yS(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ie=o):yS(t)}}function yS(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Fn||Vp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Fn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:di(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&nS(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}nS(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&id(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ce(163))}Fn||e.flags&512&&wv(e)}catch(h){Wt(e,e.return,h)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function CS(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function IS(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vp(4,e)}catch(c){Wt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Wt(e,i,c)}}var o=e.return;try{wv(e)}catch(c){Wt(e,o,c)}break;case 5:var s=e.return;try{wv(e)}catch(c){Wt(e,s,c)}}}catch(c){Wt(e,e.return,c)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var zO=Math.ceil,Hf=Is.ReactCurrentDispatcher,By=Is.ReactCurrentOwner,ni=Is.ReactCurrentBatchConfig,Qe=0,mn=null,en=null,En=0,_r=0,Uc=ga(0),cn=0,gd=null,ec=0,Gp=0,Fy=0,ju=null,fr=null,Uy=0,vl=1/0,Ro=null,zf=!1,Ev=null,ra=null,wh=!1,js=null,Xf=0,Zu=0,Tv=null,Kh=-1,Jh=0;function rr(){return Qe&6?$t():Kh!==-1?Kh:Kh=$t()}function ia(t){return t.mode&1?Qe&2&&En!==0?En&-En:xO.transition!==null?(Jh===0&&(Jh=E1()),Jh):(t=lt,t!==0||(t=window.event,t=t===void 0?16:O1(t.type)),t):1}function _i(t,e,n,r){if(50<Zu)throw Zu=0,Tv=null,Error(ce(185));Vd(t,n,r),(!(Qe&2)||t!==mn)&&(t===mn&&(!(Qe&2)&&(Gp|=n),cn===4&&Vs(t,En)),Ir(t,r),n===1&&Qe===0&&!(e.mode&1)&&(vl=$t()+500,Bp&&ma()))}function Ir(t,e){var n=t.callbackNode;x_(t,e);var r=Pf(t,t===mn?En:0);if(r===0)n!==null&&xI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&xI(n),e===1)t.tag===0?RO(SS.bind(null,t)):Q1(SS.bind(null,t)),AO(function(){!(Qe&6)&&ma()}),n=null;else{switch(T1(r)){case 1:n=dy;break;case 4:n=A1;break;case 16:n=xf;break;case 536870912:n=k1;break;default:n=xf}n=Jk(n,jk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jk(t,e){if(Kh=-1,Jh=0,Qe&6)throw Error(ce(327));var n=t.callbackNode;if(Jc()&&t.callbackNode!==n)return null;var r=Pf(t,t===mn?En:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$f(t,r);else{e=r;var i=Qe;Qe|=2;var o=Hk();(mn!==t||En!==e)&&(Ro=null,vl=$t()+500,Za(t,e));do try{KO();break}catch(a){Zk(t,a)}while(!0);Ay(),Hf.current=o,Qe=i,en!==null?e=0:(mn=null,En=0,e=cn)}if(e!==0){if(e===2&&(i=ev(t),i!==0&&(r=i,e=Rv(t,i))),e===1)throw n=gd,Za(t,0),Vs(t,r),Ir(t,$t()),n;if(e===6)Vs(t,r);else{if(i=t.current.alternate,!(r&30)&&!XO(i)&&(e=$f(t,r),e===2&&(o=ev(t),o!==0&&(r=o,e=Rv(t,o))),e===1))throw n=gd,Za(t,0),Vs(t,r),Ir(t,$t()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ce(345));case 2:Ta(t,fr,Ro);break;case 3:if(Vs(t,r),(r&130023424)===r&&(e=Uy+500-$t(),10<e)){if(Pf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){rr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=cv(Ta.bind(null,t,fr,Ro),e);break}Ta(t,fr,Ro);break;case 4:if(Vs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Ni(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=$t()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*zO(r/1960))-r,10<r){t.timeoutHandle=cv(Ta.bind(null,t,fr,Ro),r);break}Ta(t,fr,Ro);break;case 5:Ta(t,fr,Ro);break;default:throw Error(ce(329))}}}return Ir(t,$t()),t.callbackNode===n?jk.bind(null,t):null}function Rv(t,e){var n=ju;return t.current.memoizedState.isDehydrated&&(Za(t,e).flags|=256),t=$f(t,e),t!==2&&(e=fr,fr=n,e!==null&&xv(e)),t}function xv(t){fr===null?fr=t:fr.push.apply(fr,t)}function XO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Mi(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vs(t,e){for(e&=~Fy,e&=~Gp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ni(e),r=1<<n;t[n]=-1,e&=~r}}function SS(t){if(Qe&6)throw Error(ce(327));Jc();var e=Pf(t,0);if(!(e&1))return Ir(t,$t()),null;var n=$f(t,e);if(t.tag!==0&&n===2){var r=ev(t);r!==0&&(e=r,n=Rv(t,r))}if(n===1)throw n=gd,Za(t,0),Vs(t,e),Ir(t,$t()),n;if(n===6)throw Error(ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ta(t,fr,Ro),Ir(t,$t()),null}function Vy(t,e){var n=Qe;Qe|=1;try{return t(e)}finally{Qe=n,Qe===0&&(vl=$t()+500,Bp&&ma())}}function tc(t){js!==null&&js.tag===0&&!(Qe&6)&&Jc();var e=Qe;Qe|=1;var n=ni.transition,r=lt;try{if(ni.transition=null,lt=1,t)return t()}finally{lt=r,ni.transition=n,Qe=e,!(Qe&6)&&ma()}}function Gy(){_r=Uc.current,Et(Uc)}function Za(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,wO(n)),en!==null)for(n=en.return;n!==null;){var r=n;switch(Sy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Df();break;case 3:gl(),Et(yr),Et(Wn),Py();break;case 5:xy(r);break;case 4:gl();break;case 13:Et(Lt);break;case 19:Et(Lt);break;case 10:ky(r.type._context);break;case 22:case 23:Gy()}n=n.return}if(mn=t,en=t=oa(t.current,null),En=_r=e,cn=0,gd=null,Fy=Gp=ec=0,fr=ju=null,La!==null){for(e=0;e<La.length;e++)if(n=La[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}La=null}return t}function Zk(t,e){do{var n=en;try{if(Ay(),zh.current=Zf,jf){for(var r=Bt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}jf=!1}if(qa=0,pn=an=Bt=null,Gu=!1,hd=0,By.current=null,n===null||n.return===null){cn=1,gd=e,en=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=En,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=cS(s);if(f!==null){f.flags&=-257,lS(f,s,a,o,e),f.mode&1&&aS(o,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){aS(o,l,e),Wy();break e}c=Error(ce(426))}}else if(Nt&&a.mode&1){var C=cS(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),lS(C,s,a,o,e),by(ml(c,a));break e}}o=c=ml(c,a),cn!==4&&(cn=2),ju===null?ju=[o]:ju.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=Tk(o,c,e);tS(o,m);break e;case 1:a=c;var v=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(ra===null||!ra.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=Rk(o,a,e);tS(o,E);break e}}o=o.return}while(o!==null)}Xk(n)}catch(w){e=w,en===n&&n!==null&&(en=n=n.return);continue}break}while(!0)}function Hk(){var t=Hf.current;return Hf.current=Zf,t===null?Zf:t}function Wy(){(cn===0||cn===3||cn===2)&&(cn=4),mn===null||!(ec&268435455)&&!(Gp&268435455)||Vs(mn,En)}function $f(t,e){var n=Qe;Qe|=2;var r=Hk();(mn!==t||En!==e)&&(Ro=null,Za(t,e));do try{$O();break}catch(i){Zk(t,i)}while(!0);if(Ay(),Qe=n,Hf.current=r,en!==null)throw Error(ce(261));return mn=null,En=0,cn}function $O(){for(;en!==null;)zk(en)}function KO(){for(;en!==null&&!I_();)zk(en)}function zk(t){var e=Kk(t.alternate,t,_r);t.memoizedProps=t.pendingProps,e===null?Xk(t):en=e,By.current=null}function Xk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WO(n,e),n!==null){n.flags&=32767,en=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{cn=6,en=null;return}}else if(n=GO(n,e,_r),n!==null){en=n;return}if(e=e.sibling,e!==null){en=e;return}en=e=t}while(e!==null);cn===0&&(cn=5)}function Ta(t,e,n){var r=lt,i=ni.transition;try{ni.transition=null,lt=1,JO(t,e,n,r)}finally{ni.transition=i,lt=r}return null}function JO(t,e,n,r){do Jc();while(js!==null);if(Qe&6)throw Error(ce(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ce(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(P_(t,o),t===mn&&(en=mn=null,En=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||wh||(wh=!0,Jk(xf,function(){return Jc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ni.transition,ni.transition=null;var s=lt;lt=1;var a=Qe;Qe|=4,By.current=null,ZO(t,n),Gk(n,t),mO(sv),Nf=!!ov,sv=ov=null,t.current=n,HO(n),S_(),Qe=a,lt=s,ni.transition=o}else t.current=n;if(wh&&(wh=!1,js=t,Xf=i),o=t.pendingLanes,o===0&&(ra=null),A_(n.stateNode),Ir(t,$t()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(zf)throw zf=!1,t=Ev,Ev=null,t;return Xf&1&&t.tag!==0&&Jc(),o=t.pendingLanes,o&1?t===Tv?Zu++:(Zu=0,Tv=t):Zu=0,ma(),null}function Jc(){if(js!==null){var t=T1(Xf),e=ni.transition,n=lt;try{if(ni.transition=null,lt=16>t?16:t,js===null)var r=!1;else{if(t=js,js=null,Xf=0,Qe&6)throw Error(ce(331));var i=Qe;for(Qe|=4,Ie=t.current;Ie!==null;){var o=Ie,s=o.child;if(Ie.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(Ie=l;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:Wu(8,u,o)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var h=u.sibling,f=u.return;if(Fk(u),u===l){Ie=null;break}if(h!==null){h.return=f,Ie=h;break}Ie=f}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var C=g.sibling;g.sibling=null,g=C}while(g!==null)}}Ie=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Ie=s;else e:for(;Ie!==null;){if(o=Ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Wu(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Ie=m;break e}Ie=o.return}}var v=t.current;for(Ie=v;Ie!==null;){s=Ie;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,Ie=S;else e:for(s=v;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vp(9,a)}}catch(w){Wt(a,a.return,w)}if(a===s){Ie=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Ie=E;break e}Ie=a.return}}if(Qe=i,ma(),go&&typeof go.onPostCommitFiberRoot=="function")try{go.onPostCommitFiberRoot(_p,t)}catch{}r=!0}return r}finally{lt=n,ni.transition=e}}return!1}function bS(t,e,n){e=ml(n,e),e=Tk(t,e,1),t=na(t,e,1),e=rr(),t!==null&&(Vd(t,1,e),Ir(t,e))}function Wt(t,e,n){if(t.tag===3)bS(t,t,n);else for(;e!==null;){if(e.tag===3){bS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ra===null||!ra.has(r))){t=ml(n,t),t=Rk(e,t,1),e=na(e,t,1),t=rr(),e!==null&&(Vd(e,1,t),Ir(e,t));break}}e=e.return}}function YO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=rr(),t.pingedLanes|=t.suspendedLanes&n,mn===t&&(En&n)===n&&(cn===4||cn===3&&(En&130023424)===En&&500>$t()-Uy?Za(t,0):Fy|=n),Ir(t,e)}function $k(t,e){e===0&&(t.mode&1?(e=fh,fh<<=1,!(fh&130023424)&&(fh=4194304)):e=1);var n=rr();t=fs(t,e),t!==null&&(Vd(t,e,n),Ir(t,n))}function QO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$k(t,n)}function qO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ce(314))}r!==null&&r.delete(e),$k(t,n)}var Kk;Kk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||yr.current)mr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mr=!1,VO(t,e,n);mr=!!(t.flags&131072)}else mr=!1,Nt&&e.flags&1048576&&q1(e,Ff,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$h(t,e),t=e.pendingProps;var i=hl(e,Wn.current);Kc(e,n),i=_y(null,e,r,t,i,n);var o=Oy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Cr(r)?(o=!0,Lf(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Ty(e),i.updater=Up,e.stateNode=i,i._reactInternals=e,gv(e,r,t,n),e=yv(null,e,r,!0,o,n)):(e.tag=0,Nt&&o&&Iy(e),Jn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch($h(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tM(r),t=di(r,t),i){case 0:e=vv(null,e,r,t,n);break e;case 1:e=hS(null,e,r,t,n);break e;case 11:e=uS(null,e,r,t,n);break e;case 14:e=dS(null,e,r,di(r.type,t),n);break e}throw Error(ce(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),vv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),hS(t,e,r,i,n);case 3:e:{if(_k(e),t===null)throw Error(ce(387));r=e.pendingProps,o=e.memoizedState,i=o.element,ok(t,e),Gf(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ml(Error(ce(423)),e),e=fS(t,e,r,n,i);break e}else if(r!==i){i=ml(Error(ce(424)),e),e=fS(t,e,r,n,i);break e}else for(Ur=ta(e.stateNode.containerInfo.firstChild),Gr=e,Nt=!0,wi=null,n=rk(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fl(),r===i){e=ps(t,e,n);break e}Jn(t,e,r,n)}e=e.child}return e;case 5:return sk(e),t===null&&hv(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,av(r,i)?s=null:o!==null&&av(r,o)&&(e.flags|=32),Nk(t,e),Jn(t,e,s,n),e.child;case 6:return t===null&&hv(e),null;case 13:return Ok(t,e,n);case 4:return Ry(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=pl(e,null,r,n):Jn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),uS(t,e,r,i,n);case 7:return Jn(t,e,e.pendingProps,n),e.child;case 8:return Jn(t,e,e.pendingProps.children,n),e.child;case 12:return Jn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,yt(Uf,r._currentValue),r._currentValue=s,o!==null)if(Mi(o.value,s)){if(o.children===i.children&&!yr.current){e=ps(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=as(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),fv(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ce(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),fv(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Jn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Kc(e,n),i=ri(i),r=r(i),e.flags|=1,Jn(t,e,r,n),e.child;case 14:return r=e.type,i=di(r,e.pendingProps),i=di(r.type,i),dS(t,e,r,i,n);case 15:return xk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:di(r,i),$h(t,e),e.tag=1,Cr(r)?(t=!0,Lf(e)):t=!1,Kc(e,n),Ek(e,r,i),gv(e,r,i,n),yv(null,e,r,!0,t,n);case 19:return Mk(t,e,n);case 22:return Pk(t,e,n)}throw Error(ce(156,e.tag))};function Jk(t,e){return w1(t,e)}function eM(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qr(t,e,n,r){return new eM(t,e,n,r)}function jy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tM(t){if(typeof t=="function")return jy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===cy)return 11;if(t===ly)return 14}return 2}function oa(t,e){var n=t.alternate;return n===null?(n=qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Yh(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")jy(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case xc:return Ha(n.children,i,o,e);case ay:s=8,i|=8;break;case Um:return t=qr(12,n,e,i|2),t.elementType=Um,t.lanes=o,t;case Vm:return t=qr(13,n,e,i),t.elementType=Vm,t.lanes=o,t;case Gm:return t=qr(19,n,e,i),t.elementType=Gm,t.lanes=o,t;case s1:return Wp(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case i1:s=10;break e;case o1:s=9;break e;case cy:s=11;break e;case ly:s=14;break e;case Ls:s=16,r=null;break e}throw Error(ce(130,t==null?t:typeof t,""))}return e=qr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ha(t,e,n,r){return t=qr(7,t,r,e),t.lanes=n,t}function Wp(t,e,n,r){return t=qr(22,t,r,e),t.elementType=s1,t.lanes=n,t.stateNode={isHidden:!1},t}function Hg(t,e,n){return t=qr(6,t,null,e),t.lanes=n,t}function zg(t,e,n){return e=qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nM(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eg(0),this.expirationTimes=Eg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Zy(t,e,n,r,i,o,s,a,c){return t=new nM(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=qr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ty(o),t}function rM(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Rc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Yk(t){if(!t)return la;t=t._reactInternals;e:{if(hc(t)!==t||t.tag!==1)throw Error(ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Cr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ce(171))}if(t.tag===1){var n=t.type;if(Cr(n))return Y1(t,n,e)}return e}function Qk(t,e,n,r,i,o,s,a,c){return t=Zy(n,r,!0,t,i,o,s,a,c),t.context=Yk(null),n=t.current,r=rr(),i=ia(n),o=as(r,i),o.callback=e??null,na(n,o,i),t.current.lanes=i,Vd(t,i,r),Ir(t,r),t}function jp(t,e,n,r){var i=e.current,o=rr(),s=ia(i);return n=Yk(n),e.context===null?e.context=n:e.pendingContext=n,e=as(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=na(i,e,s),t!==null&&(_i(t,i,s,o),Hh(t,i,s)),s}function Kf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Hy(t,e){wS(t,e),(t=t.alternate)&&wS(t,e)}function iM(){return null}var qk=typeof reportError=="function"?reportError:function(t){console.error(t)};function zy(t){this._internalRoot=t}Zp.prototype.render=zy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ce(409));jp(t,e,null,null)};Zp.prototype.unmount=zy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;tc(function(){jp(null,t,null,null)}),e[hs]=null}};function Zp(t){this._internalRoot=t}Zp.prototype.unstable_scheduleHydration=function(t){if(t){var e=P1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Us.length&&e!==0&&e<Us[n].priority;n++);Us.splice(n,0,t),n===0&&_1(t)}};function Xy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function AS(){}function oM(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Kf(s);o.call(l)}}var s=Qk(e,r,t,0,null,!1,!1,"",AS);return t._reactRootContainer=s,t[hs]=s.current,ad(t.nodeType===8?t.parentNode:t),tc(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Kf(c);a.call(l)}}var c=Zy(t,0,!1,null,null,!1,!1,"",AS);return t._reactRootContainer=c,t[hs]=c.current,ad(t.nodeType===8?t.parentNode:t),tc(function(){jp(e,c,n,r)}),c}function zp(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=Kf(s);a.call(c)}}jp(e,s,t,i)}else s=oM(n,e,t,i,r);return Kf(s)}R1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=wu(e.pendingLanes);n!==0&&(hy(e,n|1),Ir(e,$t()),!(Qe&6)&&(vl=$t()+500,ma()))}break;case 13:tc(function(){var r=fs(t,1);if(r!==null){var i=rr();_i(r,t,1,i)}}),Hy(t,1)}};fy=function(t){if(t.tag===13){var e=fs(t,134217728);if(e!==null){var n=rr();_i(e,t,134217728,n)}Hy(t,134217728)}};x1=function(t){if(t.tag===13){var e=ia(t),n=fs(t,e);if(n!==null){var r=rr();_i(n,t,e,r)}Hy(t,e)}};P1=function(){return lt};N1=function(t,e){var n=lt;try{return lt=t,e()}finally{lt=n}};Ym=function(t,e,n){switch(e){case"input":if(Zm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lp(r);if(!i)throw Error(ce(90));c1(r),Zm(r,i)}}}break;case"textarea":u1(t,n);break;case"select":e=n.value,e!=null&&Hc(t,!!n.multiple,e,!1)}};v1=Vy;y1=tc;var sM={usingClientEntryPoint:!1,Events:[Wd,Oc,Lp,g1,m1,Vy]},ou={findFiberByHostInstance:Da,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aM={bundleType:ou.bundleType,version:ou.version,rendererPackageName:ou.rendererPackageName,rendererConfig:ou.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Is.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=S1(t),t===null?null:t.stateNode},findFiberByHostInstance:ou.findFiberByHostInstance||iM,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{_p=Ah.inject(aM),go=Ah}catch{}}zr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sM;zr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Xy(e))throw Error(ce(200));return rM(t,e,null,n)};zr.createRoot=function(t,e){if(!Xy(t))throw Error(ce(299));var n=!1,r="",i=qk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Zy(t,1,!1,null,null,n,!1,r,i),t[hs]=e.current,ad(t.nodeType===8?t.parentNode:t),new zy(e)};zr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ce(188)):(t=Object.keys(t).join(","),Error(ce(268,t)));return t=S1(e),t=t===null?null:t.stateNode,t};zr.flushSync=function(t){return tc(t)};zr.hydrate=function(t,e,n){if(!Hp(e))throw Error(ce(200));return zp(null,t,e,!0,n)};zr.hydrateRoot=function(t,e,n){if(!Xy(t))throw Error(ce(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=qk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=Qk(e,null,t,1,n??null,i,!1,o,s),t[hs]=e.current,ad(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Zp(e)};zr.render=function(t,e,n){if(!Hp(e))throw Error(ce(200));return zp(null,t,e,!1,n)};zr.unmountComponentAtNode=function(t){if(!Hp(t))throw Error(ce(40));return t._reactRootContainer?(tc(function(){zp(null,null,t,!1,function(){t._reactRootContainer=null,t[hs]=null})}),!0):!1};zr.unstable_batchedUpdates=Vy;zr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Hp(n))throw Error(ce(200));if(t==null||t._reactInternals===void 0)throw Error(ce(38));return zp(t,e,n,!1,r)};zr.version="18.3.1-next-f1338f8080-20240426";function eE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(eE)}catch(t){console.error(t)}}eE(),e1.exports=zr;var $y=e1.exports;const cM=Fd($y),lM=WA({__proto__:null,default:cM},[$y]);var kS=$y;Bm.createRoot=kS.createRoot,Bm.hydrateRoot=kS.hydrateRoot;/**
 * @remix-run/router v1.18.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dt(){return Dt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dt.apply(this,arguments)}var qt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(qt||(qt={}));const ES="popstate";function uM(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return md("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Zd(i)}return hM(e,n,null,t)}function Ke(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function dM(){return Math.random().toString(36).substr(2,8)}function TS(t,e){return{usr:t.state,key:t.key,idx:e}}function md(t,e,n,r){return n===void 0&&(n=null),Dt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?va(e):e,{state:n,key:e&&e.key||r||dM()})}function Zd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function va(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function hM(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=qt.Pop,c=null,l=u();l==null&&(l=0,s.replaceState(Dt({},s.state,{idx:l}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=qt.Pop;let C=u(),m=C==null?null:C-l;l=C,c&&c({action:a,location:g.location,delta:m})}function h(C,m){a=qt.Push;let v=md(g.location,C,m);l=u()+1;let S=TS(v,l),E=g.createHref(v);try{s.pushState(S,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(E)}o&&c&&c({action:a,location:g.location,delta:1})}function f(C,m){a=qt.Replace;let v=md(g.location,C,m);l=u();let S=TS(v,l),E=g.createHref(v);s.replaceState(S,"",E),o&&c&&c({action:a,location:g.location,delta:0})}function p(C){let m=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof C=="string"?C:Zd(C);return v=v.replace(/ $/,"%20"),Ke(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let g={get action(){return a},get location(){return t(i,s)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(ES,d),c=C,()=>{i.removeEventListener(ES,d),c=null}},createHref(C){return e(i,C)},createURL:p,encodeLocation(C){let m=p(C);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(C){return s.go(C)}};return g}var mt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(mt||(mt={}));const fM=new Set(["lazy","caseSensitive","path","id","index","children"]);function pM(t){return t.index===!0}function vd(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,String(o)],a=typeof i.id=="string"?i.id:s.join("-");if(Ke(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ke(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),pM(i)){let c=Dt({},i,e(i),{id:a});return r[a]=c,c}else{let c=Dt({},i,e(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=vd(i.children,e,s,r)),c}})}function xa(t,e,n){return n===void 0&&(n="/"),Qh(t,e,n,!1)}function Qh(t,e,n,r){let i=typeof e=="string"?va(e):e,o=Hd(i.pathname||"/",n);if(o==null)return null;let s=tE(t);mM(s);let a=null;for(let c=0;a==null&&c<s.length;++c){let l=TM(o);a=kM(s[c],l,r)}return a}function gM(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function tE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=za([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(Ke(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),tE(o.children,e,u,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:wM(l,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let c of nE(o.path))i(o,s,c)}),e}function nE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=nE(r.join("/")),a=[];return a.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...s),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function mM(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:AM(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const vM=/^:[\w-]+$/,yM=3,CM=2,IM=1,SM=10,bM=-2,RS=t=>t==="*";function wM(t,e){let n=t.split("/"),r=n.length;return n.some(RS)&&(r+=bM),e&&(r+=CM),n.filter(i=>!RS(i)).reduce((i,o)=>i+(vM.test(o)?yM:o===""?IM:SM),r)}function AM(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function kM(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=xS({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=xS({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:za([o,d.pathname]),pathnameBase:_M(za([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=za([o,d.pathnameBase]))}return s}function xS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=EM(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:t}}function EM(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function TM(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Hd(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RM(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?va(t):t;return{pathname:n?n.startsWith("/")?n:xM(n,e):e,search:OM(r),hash:MM(i)}}function xM(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Xg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function rE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function PM(t,e){let n=rE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NM(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=va(t):(i=Dt({},t),Ke(!i.pathname||!i.pathname.includes("?"),Xg("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),Xg("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),Xg("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=RM(i,a),l=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const za=t=>t.join("/").replace(/\/\/+/g,"/"),_M=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),OM=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,MM=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Ky{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Xp(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const iE=["post","put","patch","delete"],DM=new Set(iE),LM=["get",...iE],BM=new Set(LM),FM=new Set([301,302,303,307,308]),UM=new Set([307,308]),$g={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},VM={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},su={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Jy=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,GM=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),oE="remix-router-transitions";function WM(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ke(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let D=t.detectErrorBoundary;i=F=>({hasErrorBoundary:D(F)})}else i=GM;let o={},s=vd(t.routes,i,void 0,o),a,c=t.basename||"/",l=t.unstable_dataStrategy||XM,u=t.unstable_patchRoutesOnMiss,d=Dt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,f=new Set,p=null,g=null,C=null,m=t.hydrationData!=null,v=xa(s,t.history.location,c),S=null;if(v==null&&!u){let D=Kn(404,{pathname:t.history.location.pathname}),{matches:F,route:H}=US(s);v=F,S={[H.id]:D}}v&&u&&!t.hydrationData&&yc(v,s,t.history.location.pathname).active&&(v=null);let E;if(!v)E=!1,v=[];else if(v.some(D=>D.route.lazy))E=!1;else if(!v.some(D=>D.route.loader))E=!0;else if(d.v7_partialHydration){let D=t.hydrationData?t.hydrationData.loaderData:null,F=t.hydrationData?t.hydrationData.errors:null,H=q=>q.route.loader?typeof q.route.loader=="function"&&q.route.loader.hydrate===!0?!1:D&&D[q.route.id]!==void 0||F&&F[q.route.id]!==void 0:!0;if(F){let q=v.findIndex(me=>F[me.route.id]!==void 0);E=v.slice(0,q+1).every(H)}else E=v.every(H)}else E=t.hydrationData!=null;let w,A={historyAction:t.history.action,location:t.history.location,matches:v,initialized:E,navigation:$g,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||S,fetchers:new Map,blockers:new Map},x=qt.Pop,T=!1,_,O=!1,L=new Map,U=null,z=!1,Z=!1,J=[],ee=[],re=new Map,X=0,Y=-1,oe=new Map,W=new Set,se=new Map,we=new Map,De=new Set,de=new Map,xe=new Map,rt=new Map,Ce=!1;function tn(){if(h=t.history.listen(D=>{let{action:F,location:H,delta:q}=D;if(Ce){Ce=!1;return}yl(xe.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=ih({currentLocation:A.location,nextLocation:H,historyAction:F});if(me&&q!=null){Ce=!0,t.history.go(q*-1),Gi(me,{state:"blocked",location:H,proceed(){Gi(me,{state:"proceeding",proceed:void 0,reset:void 0,location:H}),t.history.go(q)},reset(){let ke=new Map(A.blockers);ke.set(me,su),$e({blockers:ke})}});return}return ve(F,H)}),n){sD(e,L);let D=()=>aD(e,L);e.addEventListener("pagehide",D),U=()=>e.removeEventListener("pagehide",D)}return A.initialized||ve(qt.Pop,A.location,{initialHydration:!0}),w}function vn(){h&&h(),U&&U(),f.clear(),_&&_.abort(),A.fetchers.forEach((D,F)=>B(F)),A.blockers.forEach((D,F)=>et(F))}function Zn(D){return f.add(D),()=>f.delete(D)}function $e(D,F){F===void 0&&(F={}),A=Dt({},A,D);let H=[],q=[];d.v7_fetcherPersist&&A.fetchers.forEach((me,ke)=>{me.state==="idle"&&(De.has(ke)?q.push(ke):H.push(ke))}),[...f].forEach(me=>me(A,{deletedFetchers:q,unstable_viewTransitionOpts:F.viewTransitionOpts,unstable_flushSync:F.flushSync===!0})),d.v7_fetcherPersist&&(H.forEach(me=>A.fetchers.delete(me)),q.forEach(me=>B(me)))}function Zt(D,F,H){var q,me;let{flushSync:ke}=H===void 0?{}:H,Pe=A.actionData!=null&&A.navigation.formMethod!=null&&Si(A.navigation.formMethod)&&A.navigation.state==="loading"&&((q=D.state)==null?void 0:q._isRedirect)!==!0,le;F.actionData?Object.keys(F.actionData).length>0?le=F.actionData:le=null:Pe?le=A.actionData:le=null;let Le=F.loaderData?BS(A.loaderData,F.loaderData,F.matches||[],F.errors):A.loaderData,Te=A.blockers;Te.size>0&&(Te=new Map(Te),Te.forEach((st,ue)=>Te.set(ue,su)));let Re=T===!0||A.navigation.formMethod!=null&&Si(A.navigation.formMethod)&&((me=D.state)==null?void 0:me._isRedirect)!==!0;a&&(s=a,a=void 0),z||x===qt.Pop||(x===qt.Push?t.history.push(D,D.state):x===qt.Replace&&t.history.replace(D,D.state));let ot;if(x===qt.Pop){let st=L.get(A.location.pathname);st&&st.has(D.pathname)?ot={currentLocation:A.location,nextLocation:D}:L.has(D.pathname)&&(ot={currentLocation:D,nextLocation:A.location})}else if(O){let st=L.get(A.location.pathname);st?st.add(D.pathname):(st=new Set([D.pathname]),L.set(A.location.pathname,st)),ot={currentLocation:A.location,nextLocation:D}}$e(Dt({},F,{actionData:le,loaderData:Le,historyAction:x,location:D,initialized:!0,navigation:$g,revalidation:"idle",restoreScrollPosition:Yl(D,F.matches||A.matches),preventScrollReset:Re,blockers:Te}),{viewTransitionOpts:ot,flushSync:ke===!0}),x=qt.Pop,T=!1,O=!1,z=!1,Z=!1,J=[],ee=[]}async function Jt(D,F){if(typeof D=="number"){t.history.go(D);return}let H=Pv(A.location,A.matches,c,d.v7_prependBasename,D,d.v7_relativeSplatPath,F==null?void 0:F.fromRouteId,F==null?void 0:F.relative),{path:q,submission:me,error:ke}=PS(d.v7_normalizeFormMethod,!1,H,F),Pe=A.location,le=md(A.location,q,F&&F.state);le=Dt({},le,t.history.encodeLocation(le));let Le=F&&F.replace!=null?F.replace:void 0,Te=qt.Push;Le===!0?Te=qt.Replace:Le===!1||me!=null&&Si(me.formMethod)&&me.formAction===A.location.pathname+A.location.search&&(Te=qt.Replace);let Re=F&&"preventScrollReset"in F?F.preventScrollReset===!0:void 0,ot=(F&&F.unstable_flushSync)===!0,st=ih({currentLocation:Pe,nextLocation:le,historyAction:Te});if(st){Gi(st,{state:"blocked",location:le,proceed(){Gi(st,{state:"proceeding",proceed:void 0,reset:void 0,location:le}),Jt(D,F)},reset(){let ue=new Map(A.blockers);ue.set(st,su),$e({blockers:ue})}});return}return await ve(Te,le,{submission:me,pendingError:ke,preventScrollReset:Re,replace:F&&F.replace,enableViewTransition:F&&F.unstable_viewTransition,flushSync:ot})}function fe(){if(k(),$e({revalidation:"loading"}),A.navigation.state!=="submitting"){if(A.navigation.state==="idle"){ve(A.historyAction,A.location,{startUninterruptedRevalidation:!0});return}ve(x||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation})}}async function ve(D,F,H){_&&_.abort(),_=null,x=D,z=(H&&H.startUninterruptedRevalidation)===!0,Jl(A.location,A.matches),T=(H&&H.preventScrollReset)===!0,O=(H&&H.enableViewTransition)===!0;let q=a||s,me=H&&H.overrideNavigation,ke=xa(q,F,c),Pe=(H&&H.flushSync)===!0,le=yc(ke,q,F.pathname);if(le.active&&le.matches&&(ke=le.matches),!ke){let{error:M,notFoundMatches:ie,route:he}=$l(F.pathname);Zt(F,{matches:ie,loaderData:{},errors:{[he.id]:M}},{flushSync:Pe});return}if(A.initialized&&!Z&&qM(A.location,F)&&!(H&&H.submission&&Si(H.submission.formMethod))){Zt(F,{matches:ke},{flushSync:Pe});return}_=new AbortController;let Le=Sc(t.history,F,_.signal,H&&H.submission),Te;if(H&&H.pendingError)Te=[Vc(ke).route.id,{type:mt.error,error:H.pendingError}];else if(H&&H.submission&&Si(H.submission.formMethod)){let M=await Ge(Le,F,H.submission,ke,le.active,{replace:H.replace,flushSync:Pe});if(M.shortCircuited)return;if(M.pendingActionResult){let[ie,he]=M.pendingActionResult;if(Br(he)&&Xp(he.error)&&he.error.status===404){_=null,Zt(F,{matches:M.matches,loaderData:{},errors:{[ie]:he.error}});return}}ke=M.matches||ke,Te=M.pendingActionResult,me=Kg(F,H.submission),Pe=!1,le.active=!1,Le=Sc(t.history,Le.url,Le.signal)}let{shortCircuited:Re,matches:ot,loaderData:st,errors:ue}=await We(Le,F,ke,le.active,me,H&&H.submission,H&&H.fetcherSubmission,H&&H.replace,H&&H.initialHydration===!0,Pe,Te);Re||(_=null,Zt(F,Dt({matches:ot||ke},FS(Te),{loaderData:st,errors:ue})))}async function Ge(D,F,H,q,me,ke){ke===void 0&&(ke={}),k();let Pe=iD(F,H);if($e({navigation:Pe},{flushSync:ke.flushSync===!0}),me){let Te=await Cc(q,F.pathname,D.signal);if(Te.type==="aborted")return{shortCircuited:!0};if(Te.type==="error"){let{boundaryId:Re,error:ot}=Mt(F.pathname,Te);return{matches:Te.partialMatches,pendingActionResult:[Re,{type:mt.error,error:ot}]}}else if(Te.matches)q=Te.matches;else{let{notFoundMatches:Re,error:ot,route:st}=$l(F.pathname);return{matches:Re,pendingActionResult:[st.id,{type:mt.error,error:ot}]}}}let le,Le=ku(q,F);if(!Le.route.action&&!Le.route.lazy)le={type:mt.error,error:Kn(405,{method:D.method,pathname:F.pathname,routeId:Le.route.id})};else if(le=(await Ot("action",D,[Le],q))[0],D.signal.aborted)return{shortCircuited:!0};if(Ua(le)){let Te;return ke&&ke.replace!=null?Te=ke.replace:Te=MS(le.response.headers.get("Location"),new URL(D.url),c)===A.location.pathname+A.location.search,await yn(D,le,{submission:H,replace:Te}),{shortCircuited:!0}}if(Fa(le))throw Kn(400,{type:"defer-action"});if(Br(le)){let Te=Vc(q,Le.route.id);return(ke&&ke.replace)!==!0&&(x=qt.Push),{matches:q,pendingActionResult:[Te.route.id,le]}}return{matches:q,pendingActionResult:[Le.route.id,le]}}async function We(D,F,H,q,me,ke,Pe,le,Le,Te,Re){let ot=me||Kg(F,ke),st=ke||Pe||WS(ot),ue=!z&&(!d.v7_partialHydration||!Le);if(q){if(ue){let Vt=Oe(Re);$e(Dt({navigation:ot},Vt!==void 0?{actionData:Vt}:{}),{flushSync:Te})}let Ve=await Cc(H,F.pathname,D.signal);if(Ve.type==="aborted")return{shortCircuited:!0};if(Ve.type==="error"){let{boundaryId:Vt,error:kr}=Mt(F.pathname,Ve);return{matches:Ve.partialMatches,loaderData:{},errors:{[Vt]:kr}}}else if(Ve.matches)H=Ve.matches;else{let{error:Vt,notFoundMatches:kr,route:xt}=$l(F.pathname);return{matches:kr,loaderData:{},errors:{[xt.id]:Vt}}}}let M=a||s,[ie,he]=NS(t.history,A,H,st,F,d.v7_partialHydration&&Le===!0,d.v7_skipActionErrorRevalidation,Z,J,ee,De,se,W,M,c,Re);if(Wi(Ve=>!(H&&H.some(Vt=>Vt.route.id===Ve))||ie&&ie.some(Vt=>Vt.route.id===Ve)),Y=++X,ie.length===0&&he.length===0){let Ve=qe();return Zt(F,Dt({matches:H,loaderData:{},errors:Re&&Br(Re[1])?{[Re[0]]:Re[1].error}:null},FS(Re),Ve?{fetchers:new Map(A.fetchers)}:{}),{flushSync:Te}),{shortCircuited:!0}}if(ue){let Ve={};if(!q){Ve.navigation=ot;let Vt=Oe(Re);Vt!==void 0&&(Ve.actionData=Vt)}he.length>0&&(Ve.fetchers=Je(he)),$e(Ve,{flushSync:Te})}he.forEach(Ve=>{re.has(Ve.key)&&$(Ve.key),Ve.controller&&re.set(Ve.key,Ve.controller)});let tt=()=>he.forEach(Ve=>$(Ve.key));_&&_.signal.addEventListener("abort",tt);let{loaderResults:It,fetcherResults:Rt}=await Ar(A.matches,H,ie,he,D);if(D.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",tt),he.forEach(Ve=>re.delete(Ve.key));let Ht=VS([...It,...Rt]);if(Ht){if(Ht.idx>=ie.length){let Ve=he[Ht.idx-ie.length].key;W.add(Ve)}return await yn(D,Ht.result,{replace:le}),{shortCircuited:!0}}let{loaderData:Cn,errors:Mn}=LS(A,H,ie,It,Re,he,Rt,de);de.forEach((Ve,Vt)=>{Ve.subscribe(kr=>{(kr||Ve.done)&&de.delete(Vt)})}),d.v7_partialHydration&&Le&&A.errors&&Object.entries(A.errors).filter(Ve=>{let[Vt]=Ve;return!ie.some(kr=>kr.route.id===Vt)}).forEach(Ve=>{let[Vt,kr]=Ve;Mn=Object.assign(Mn||{},{[Vt]:kr})});let Yt=qe(),wa=it(Y),Aa=Yt||wa||he.length>0;return Dt({matches:H,loaderData:Cn,errors:Mn},Aa?{fetchers:new Map(A.fetchers)}:{})}function Oe(D){if(D&&!Br(D[1]))return{[D[0]]:D[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function Je(D){return D.forEach(F=>{let H=A.fetchers.get(F.key),q=au(void 0,H?H.data:void 0);A.fetchers.set(F.key,q)}),new Map(A.fetchers)}function Ut(D,F,H,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");re.has(D)&&$(D);let me=(q&&q.unstable_flushSync)===!0,ke=a||s,Pe=Pv(A.location,A.matches,c,d.v7_prependBasename,H,d.v7_relativeSplatPath,F,q==null?void 0:q.relative),le=xa(ke,Pe,c),Le=yc(le,ke,Pe);if(Le.active&&Le.matches&&(le=Le.matches),!le){I(D,F,Kn(404,{pathname:Pe}),{flushSync:me});return}let{path:Te,submission:Re,error:ot}=PS(d.v7_normalizeFormMethod,!0,Pe,q);if(ot){I(D,F,ot,{flushSync:me});return}let st=ku(le,Te);if(T=(q&&q.preventScrollReset)===!0,Re&&Si(Re.formMethod)){_t(D,F,Te,st,le,Le.active,me,Re);return}se.set(D,{routeId:F,path:Te}),Hn(D,F,Te,st,le,Le.active,me,Re)}async function _t(D,F,H,q,me,ke,Pe,le){k(),se.delete(D);function Le(xt){if(!xt.route.action&&!xt.route.lazy){let Eo=Kn(405,{method:le.formMethod,pathname:H,routeId:F});return I(D,F,Eo,{flushSync:Pe}),!0}return!1}if(!ke&&Le(q))return;let Te=A.fetchers.get(D);y(D,oD(le,Te),{flushSync:Pe});let Re=new AbortController,ot=Sc(t.history,H,Re.signal,le);if(ke){let xt=await Cc(me,H,ot.signal);if(xt.type==="aborted")return;if(xt.type==="error"){let{error:Eo}=Mt(H,xt);I(D,F,Eo,{flushSync:Pe});return}else if(xt.matches){if(me=xt.matches,q=ku(me,H),Le(q))return}else{I(D,F,Kn(404,{pathname:H}),{flushSync:Pe});return}}re.set(D,Re);let st=X,M=(await Ot("action",ot,[q],me))[0];if(ot.signal.aborted){re.get(D)===Re&&re.delete(D);return}if(d.v7_fetcherPersist&&De.has(D)){if(Ua(M)||Br(M)){y(D,xs(void 0));return}}else{if(Ua(M))if(re.delete(D),Y>st){y(D,xs(void 0));return}else return W.add(D),y(D,au(le)),yn(ot,M,{fetcherSubmission:le});if(Br(M)){I(D,F,M.error);return}}if(Fa(M))throw Kn(400,{type:"defer-action"});let ie=A.navigation.location||A.location,he=Sc(t.history,ie,Re.signal),tt=a||s,It=A.navigation.state!=="idle"?xa(tt,A.navigation.location,c):A.matches;Ke(It,"Didn't find any matches after fetcher action");let Rt=++X;oe.set(D,Rt);let Ht=au(le,M.data);A.fetchers.set(D,Ht);let[Cn,Mn]=NS(t.history,A,It,le,ie,!1,d.v7_skipActionErrorRevalidation,Z,J,ee,De,se,W,tt,c,[q.route.id,M]);Mn.filter(xt=>xt.key!==D).forEach(xt=>{let Eo=xt.key,gI=A.fetchers.get(Eo),_N=au(void 0,gI?gI.data:void 0);A.fetchers.set(Eo,_N),re.has(Eo)&&$(Eo),xt.controller&&re.set(Eo,xt.controller)}),$e({fetchers:new Map(A.fetchers)});let Yt=()=>Mn.forEach(xt=>$(xt.key));Re.signal.addEventListener("abort",Yt);let{loaderResults:wa,fetcherResults:Aa}=await Ar(A.matches,It,Cn,Mn,he);if(Re.signal.aborted)return;Re.signal.removeEventListener("abort",Yt),oe.delete(D),re.delete(D),Mn.forEach(xt=>re.delete(xt.key));let Ve=VS([...wa,...Aa]);if(Ve){if(Ve.idx>=Cn.length){let xt=Mn[Ve.idx-Cn.length].key;W.add(xt)}return yn(he,Ve.result)}let{loaderData:Vt,errors:kr}=LS(A,A.matches,Cn,wa,void 0,Mn,Aa,de);if(A.fetchers.has(D)){let xt=xs(M.data);A.fetchers.set(D,xt)}it(Rt),A.navigation.state==="loading"&&Rt>Y?(Ke(x,"Expected pending action"),_&&_.abort(),Zt(A.navigation.location,{matches:It,loaderData:Vt,errors:kr,fetchers:new Map(A.fetchers)})):($e({errors:kr,loaderData:BS(A.loaderData,Vt,It,kr),fetchers:new Map(A.fetchers)}),Z=!1)}async function Hn(D,F,H,q,me,ke,Pe,le){let Le=A.fetchers.get(D);y(D,au(le,Le?Le.data:void 0),{flushSync:Pe});let Te=new AbortController,Re=Sc(t.history,H,Te.signal);if(ke){let M=await Cc(me,H,Re.signal);if(M.type==="aborted")return;if(M.type==="error"){let{error:ie}=Mt(H,M);I(D,F,ie,{flushSync:Pe});return}else if(M.matches)me=M.matches,q=ku(me,H);else{I(D,F,Kn(404,{pathname:H}),{flushSync:Pe});return}}re.set(D,Te);let ot=X,ue=(await Ot("loader",Re,[q],me))[0];if(Fa(ue)&&(ue=await uE(ue,Re.signal,!0)||ue),re.get(D)===Te&&re.delete(D),!Re.signal.aborted){if(De.has(D)){y(D,xs(void 0));return}if(Ua(ue))if(Y>ot){y(D,xs(void 0));return}else{W.add(D),await yn(Re,ue);return}if(Br(ue)){I(D,F,ue.error);return}Ke(!Fa(ue),"Unhandled fetcher deferred data"),y(D,xs(ue.data))}}async function yn(D,F,H){let{submission:q,fetcherSubmission:me,replace:ke}=H===void 0?{}:H;F.response.headers.has("X-Remix-Revalidate")&&(Z=!0);let Pe=F.response.headers.get("Location");Ke(Pe,"Expected a Location header on the redirect Response"),Pe=MS(Pe,new URL(D.url),c);let le=md(A.location,Pe,{_isRedirect:!0});if(n){let ue=!1;if(F.response.headers.has("X-Remix-Reload-Document"))ue=!0;else if(Jy.test(Pe)){const M=t.history.createURL(Pe);ue=M.origin!==e.location.origin||Hd(M.pathname,c)==null}if(ue){ke?e.location.replace(Pe):e.location.assign(Pe);return}}_=null;let Le=ke===!0?qt.Replace:qt.Push,{formMethod:Te,formAction:Re,formEncType:ot}=A.navigation;!q&&!me&&Te&&Re&&ot&&(q=WS(A.navigation));let st=q||me;if(UM.has(F.response.status)&&st&&Si(st.formMethod))await ve(Le,le,{submission:Dt({},st,{formAction:Pe}),preventScrollReset:T});else{let ue=Kg(le,q);await ve(Le,le,{overrideNavigation:ue,fetcherSubmission:me,preventScrollReset:T})}}async function Ot(D,F,H,q){try{let me=await $M(l,D,F,H,q,o,i);return await Promise.all(me.map((ke,Pe)=>{if(tD(ke)){let le=ke.result;return{type:mt.redirect,response:YM(le,F,H[Pe].route.id,q,c,d.v7_relativeSplatPath)}}return JM(ke)}))}catch(me){return H.map(()=>({type:mt.error,error:me}))}}async function Ar(D,F,H,q,me){let[ke,...Pe]=await Promise.all([H.length?Ot("loader",me,H,F):[],...q.map(le=>{if(le.matches&&le.match&&le.controller){let Le=Sc(t.history,le.path,le.controller.signal);return Ot("loader",Le,[le.match],le.matches).then(Te=>Te[0])}else return Promise.resolve({type:mt.error,error:Kn(404,{pathname:le.path})})})]);return await Promise.all([GS(D,H,ke,ke.map(()=>me.signal),!1,A.loaderData),GS(D,q.map(le=>le.match),Pe,q.map(le=>le.controller?le.controller.signal:null),!0)]),{loaderResults:ke,fetcherResults:Pe}}function k(){Z=!0,J.push(...Wi()),se.forEach((D,F)=>{re.has(F)&&(ee.push(F),$(F))})}function y(D,F,H){H===void 0&&(H={}),A.fetchers.set(D,F),$e({fetchers:new Map(A.fetchers)},{flushSync:(H&&H.flushSync)===!0})}function I(D,F,H,q){q===void 0&&(q={});let me=Vc(A.matches,F);B(D),$e({errors:{[me.route.id]:H},fetchers:new Map(A.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function P(D){return d.v7_fetcherPersist&&(we.set(D,(we.get(D)||0)+1),De.has(D)&&De.delete(D)),A.fetchers.get(D)||VM}function B(D){let F=A.fetchers.get(D);re.has(D)&&!(F&&F.state==="loading"&&oe.has(D))&&$(D),se.delete(D),oe.delete(D),W.delete(D),De.delete(D),A.fetchers.delete(D)}function j(D){if(d.v7_fetcherPersist){let F=(we.get(D)||0)-1;F<=0?(we.delete(D),De.add(D)):we.set(D,F)}else B(D);$e({fetchers:new Map(A.fetchers)})}function $(D){let F=re.get(D);Ke(F,"Expected fetch controller: "+D),F.abort(),re.delete(D)}function _e(D){for(let F of D){let H=P(F),q=xs(H.data);A.fetchers.set(F,q)}}function qe(){let D=[],F=!1;for(let H of W){let q=A.fetchers.get(H);Ke(q,"Expected fetcher: "+H),q.state==="loading"&&(W.delete(H),D.push(H),F=!0)}return _e(D),F}function it(D){let F=[];for(let[H,q]of oe)if(q<D){let me=A.fetchers.get(H);Ke(me,"Expected fetcher: "+H),me.state==="loading"&&($(H),oe.delete(H),F.push(H))}return _e(F),F.length>0}function ut(D,F){let H=A.blockers.get(D)||su;return xe.get(D)!==F&&xe.set(D,F),H}function et(D){A.blockers.delete(D),xe.delete(D)}function Gi(D,F){let H=A.blockers.get(D)||su;Ke(H.state==="unblocked"&&F.state==="blocked"||H.state==="blocked"&&F.state==="blocked"||H.state==="blocked"&&F.state==="proceeding"||H.state==="blocked"&&F.state==="unblocked"||H.state==="proceeding"&&F.state==="unblocked","Invalid blocker state transition: "+H.state+" -> "+F.state);let q=new Map(A.blockers);q.set(D,F),$e({blockers:q})}function ih(D){let{currentLocation:F,nextLocation:H,historyAction:q}=D;if(xe.size===0)return;xe.size>1&&yl(!1,"A router only supports one blocker at a time");let me=Array.from(xe.entries()),[ke,Pe]=me[me.length-1],le=A.blockers.get(ke);if(!(le&&le.state==="proceeding")&&Pe({currentLocation:F,nextLocation:H,historyAction:q}))return ke}function $l(D){let F=Kn(404,{pathname:D}),H=a||s,{matches:q,route:me}=US(H);return Wi(),{notFoundMatches:q,route:me,error:F}}function Mt(D,F){return{boundaryId:Vc(F.partialMatches).route.id,error:Kn(400,{type:"route-discovery",pathname:D,message:F.error!=null&&"message"in F.error?F.error:String(F.error)})}}function Wi(D){let F=[];return de.forEach((H,q)=>{(!D||D(q))&&(H.cancel(),F.push(q),de.delete(q))}),F}function Cg(D,F,H){if(p=D,C=F,g=H||null,!m&&A.navigation===$g){m=!0;let q=Yl(A.location,A.matches);q!=null&&$e({restoreScrollPosition:q})}return()=>{p=null,C=null,g=null}}function Kl(D,F){return g&&g(D,F.map(q=>gM(q,A.loaderData)))||D.key}function Jl(D,F){if(p&&C){let H=Kl(D,F);p[H]=C()}}function Yl(D,F){if(p){let H=Kl(D,F),q=p[H];if(typeof q=="number")return q}return null}function yc(D,F,H){if(u)if(D){let q=D[D.length-1].route;if(q.path&&(q.path==="*"||q.path.endsWith("/*")))return{active:!0,matches:Qh(F,H,c,!0)}}else return{active:!0,matches:Qh(F,H,c,!0)||[]};return{active:!1,matches:null}}async function Cc(D,F,H){let q=D,me=q.length>0?q[q.length-1].route:null;for(;;){let ke=a==null,Pe=a||s;try{await zM(u,F,q,Pe,o,i,rt,H)}catch(Re){return{type:"error",error:Re,partialMatches:q}}finally{ke&&(s=[...s])}if(H.aborted)return{type:"aborted"};let le=xa(Pe,F,c),Le=!1;if(le){let Re=le[le.length-1].route;if(Re.index)return{type:"success",matches:le};if(Re.path&&Re.path.length>0)if(Re.path==="*")Le=!0;else return{type:"success",matches:le}}let Te=Qh(Pe,F,c,!0);if(!Te||q.map(Re=>Re.route.id).join("-")===Te.map(Re=>Re.route.id).join("-"))return{type:"success",matches:Le?le:null};if(q=Te,me=q[q.length-1].route,me.path==="*")return{type:"success",matches:q}}}function oh(D){o={},a=vd(D,i,void 0,o)}function sh(D,F){let H=a==null;aE(D,F,a||s,o,i),H&&(s=[...s],$e({}))}return w={get basename(){return c},get future(){return d},get state(){return A},get routes(){return s},get window(){return e},initialize:tn,subscribe:Zn,enableScrollRestoration:Cg,navigate:Jt,fetch:Ut,revalidate:fe,createHref:D=>t.history.createHref(D),encodeLocation:D=>t.history.encodeLocation(D),getFetcher:P,deleteFetcher:j,dispose:vn,getBlocker:ut,deleteBlocker:et,patchRoutes:sh,_internalFetchControllers:re,_internalActiveDeferreds:de,_internalSetRoutes:oh},w}function jM(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Pv(t,e,n,r,i,o,s,a){let c,l;if(s){c=[];for(let d of e)if(c.push(d),d.route.id===s){l=d;break}}else c=e,l=e[e.length-1];let u=NM(i||".",PM(c,o),Hd(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!Yy(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:za([n,u.pathname])),Zd(u)}function PS(t,e,n,r){if(!r||!jM(r))return{path:n};if(r.formMethod&&!rD(r.formMethod))return{path:n,error:Kn(405,{method:r.formMethod})};let i=()=>({path:n,error:Kn(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),a=cE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Si(s))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[g,C]=p;return""+f+g+"="+C+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!Si(s))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let c,l;if(r.formData)c=Nv(r.formData),l=r.formData;else if(r.body instanceof FormData)c=Nv(r.body),l=r.body;else if(r.body instanceof URLSearchParams)c=r.body,l=DS(c);else if(r.body==null)c=new URLSearchParams,l=new FormData;else try{c=new URLSearchParams(r.body),l=DS(c)}catch{return i()}let u={formMethod:s,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Si(u.formMethod))return{path:n,submission:u};let d=va(n);return e&&d.search&&Yy(d.search)&&c.append("index",""),d.search="?"+c,{path:Zd(d),submission:u}}function ZM(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function NS(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g){let C=g?Br(g[1])?g[1].error:g[1].data:void 0,m=t.createURL(e.location),v=t.createURL(i),S=g&&Br(g[1])?g[0]:void 0,E=S?ZM(n,S):n,w=g?g[1].statusCode:void 0,A=s&&w&&w>=400,x=E.filter((_,O)=>{let{route:L}=_;if(L.lazy)return!0;if(L.loader==null)return!1;if(o)return typeof L.loader!="function"||L.loader.hydrate?!0:e.loaderData[L.id]===void 0&&(!e.errors||e.errors[L.id]===void 0);if(HM(e.loaderData,e.matches[O],_)||c.some(Z=>Z===_.route.id))return!0;let U=e.matches[O],z=_;return _S(_,Dt({currentUrl:m,currentParams:U.params,nextUrl:v,nextParams:z.params},r,{actionResult:C,actionStatus:w,defaultShouldRevalidate:A?!1:a||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||sE(U,z)}))}),T=[];return d.forEach((_,O)=>{if(o||!n.some(J=>J.route.id===_.routeId)||u.has(O))return;let L=xa(f,_.path,p);if(!L){T.push({key:O,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let U=e.fetchers.get(O),z=ku(L,_.path),Z=!1;h.has(O)?Z=!1:l.includes(O)?Z=!0:U&&U.state!=="idle"&&U.data===void 0?Z=a:Z=_S(z,Dt({currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:C,actionStatus:w,defaultShouldRevalidate:A?!1:a})),Z&&T.push({key:O,routeId:_.routeId,path:_.path,matches:L,match:z,controller:new AbortController})}),[x,T]}function HM(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function sE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function _S(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function zM(t,e,n,r,i,o,s,a){let c=[e,...n.map(l=>l.route.id)].join("-");try{let l=s.get(c);l||(l=t({path:e,matches:n,patch:(u,d)=>{a.aborted||aE(u,d,r,i,o)}}),s.set(c,l)),l&&eD(l)&&await l}finally{s.delete(c)}}function aE(t,e,n,r,i){if(t){var o;let s=r[t];Ke(s,"No route found to patch children into: routeId = "+t);let a=vd(e,i,[t,"patch",String(((o=s.children)==null?void 0:o.length)||"0")],r);s.children?s.children.push(...a):s.children=a}else{let s=vd(e,i,["patch",String(n.length||"0")],r);n.push(...s)}}async function OS(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ke(i,"No route found in manifest");let o={};for(let s in r){let c=i[s]!==void 0&&s!=="hasErrorBoundary";yl(!c,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!c&&!fM.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,Dt({},e(i),{lazy:void 0}))}function XM(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function $M(t,e,n,r,i,o,s,a){let c=r.reduce((d,h)=>d.add(h.route.id),new Set),l=new Set,u=await t({matches:i.map(d=>{let h=c.has(d.route.id);return Dt({},d,{shouldLoad:h,resolve:p=>(l.add(d.route.id),h?KM(e,n,d,o,s,p,a):Promise.resolve({type:mt.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>Ke(l.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),u.filter((d,h)=>c.has(i[h].route.id))}async function KM(t,e,n,r,i,o,s){let a,c,l=u=>{let d,h=new Promise((g,C)=>d=C);c=()=>d(),e.signal.addEventListener("abort",c);let f=g=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...g!==void 0?[g]:[]),p;return o?p=o(g=>f(g)):p=(async()=>{try{return{type:"data",result:await f()}}catch(g){return{type:"error",result:g}}})(),Promise.race([p,h])};try{let u=n.route[t];if(n.route.lazy)if(u){let d,[h]=await Promise.all([l(u).catch(f=>{d=f}),OS(n.route,i,r)]);if(d!==void 0)throw d;a=h}else if(await OS(n.route,i,r),u=n.route[t],u)a=await l(u);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw Kn(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:mt.data,result:void 0};else if(u)a=await l(u);else{let d=new URL(e.url),h=d.pathname+d.search;throw Kn(404,{pathname:h})}Ke(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:mt.error,result:u}}finally{c&&e.signal.removeEventListener("abort",c)}return a}async function JM(t){let{result:e,type:n,status:r}=t;if(lE(e)){let s;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?s=null:s=await e.json():s=await e.text()}catch(a){return{type:mt.error,error:a}}return n===mt.error?{type:mt.error,error:new Ky(e.status,e.statusText,s),statusCode:e.status,headers:e.headers}:{type:mt.data,data:s,statusCode:e.status,headers:e.headers}}if(n===mt.error)return{type:mt.error,error:e,statusCode:Xp(e)?e.status:r};if(nD(e)){var i,o;return{type:mt.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}return{type:mt.data,data:e,statusCode:r}}function YM(t,e,n,r,i,o){let s=t.headers.get("Location");if(Ke(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!Jy.test(s)){let a=r.slice(0,r.findIndex(c=>c.route.id===n)+1);s=Pv(new URL(e.url),a,i,!0,s,o),t.headers.set("Location",s)}return t}function MS(t,e,n){if(Jy.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Hd(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function Sc(t,e,n,r){let i=t.createURL(cE(e)).toString(),o={signal:n};if(r&&Si(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=Nv(r.formData):o.body=r.formData}return new Request(i,o)}function Nv(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function DS(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function QM(t,e,n,r,i,o){let s={},a=null,c,l=!1,u={},d=r&&Br(r[1])?r[1].error:void 0;return n.forEach((h,f)=>{let p=e[f].route.id;if(Ke(!Ua(h),"Cannot handle redirect results in processLoaderData"),Br(h)){let g=h.error;d!==void 0&&(g=d,d=void 0),a=a||{};{let C=Vc(t,p);a[C.route.id]==null&&(a[C.route.id]=g)}s[p]=void 0,l||(l=!0,c=Xp(h.error)?h.error.status:500),h.headers&&(u[p]=h.headers)}else Fa(h)?(i.set(p,h.deferredData),s[p]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!l&&(c=h.statusCode),h.headers&&(u[p]=h.headers)):(s[p]=h.data,h.statusCode&&h.statusCode!==200&&!l&&(c=h.statusCode),h.headers&&(u[p]=h.headers))}),d!==void 0&&r&&(a={[r[0]]:d},s[r[0]]=void 0),{loaderData:s,errors:a,statusCode:c||200,loaderHeaders:u}}function LS(t,e,n,r,i,o,s,a){let{loaderData:c,errors:l}=QM(e,n,r,i,a);for(let u=0;u<o.length;u++){let{key:d,match:h,controller:f}=o[u];Ke(s!==void 0&&s[u]!==void 0,"Did not find corresponding fetcher result");let p=s[u];if(!(f&&f.signal.aborted))if(Br(p)){let g=Vc(t.matches,h==null?void 0:h.route.id);l&&l[g.route.id]||(l=Dt({},l,{[g.route.id]:p.error})),t.fetchers.delete(d)}else if(Ua(p))Ke(!1,"Unhandled fetcher revalidation redirect");else if(Fa(p))Ke(!1,"Unhandled fetcher deferred data");else{let g=xs(p.data);t.fetchers.set(d,g)}}return{loaderData:c,errors:l}}function BS(t,e,n,r){let i=Dt({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function FS(t){return t?Br(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Vc(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function US(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Kn(t,e){let{pathname:n,routeId:r,method:i,type:o,message:s}=e===void 0?{}:e,a="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(a="Bad Request",o==="route-discovery"?c='Unable to match URL "'+n+'" - the `unstable_patchRoutesOnMiss()` '+(`function threw the following error:
`+s):i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?c="defer() is not supported in actions":o==="invalid-body"&&(c="Unable to encode submission body")):t===403?(a="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",c='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new Ky(t||500,a,new Error(c),!0)}function VS(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Ua(n))return{result:n,idx:e}}}function cE(t){let e=typeof t=="string"?va(t):t;return Zd(Dt({},e,{hash:""}))}function qM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function eD(t){return typeof t=="object"&&t!=null&&"then"in t}function tD(t){return lE(t.result)&&FM.has(t.result.status)}function Fa(t){return t.type===mt.deferred}function Br(t){return t.type===mt.error}function Ua(t){return(t&&t.type)===mt.redirect}function nD(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function lE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function rD(t){return BM.has(t.toLowerCase())}function Si(t){return DM.has(t.toLowerCase())}async function GS(t,e,n,r,i,o){for(let s=0;s<n.length;s++){let a=n[s],c=e[s];if(!c)continue;let l=t.find(d=>d.route.id===c.route.id),u=l!=null&&!sE(l,c)&&(o&&o[c.route.id])!==void 0;if(Fa(a)&&(i||u)){let d=r[s];Ke(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await uE(a,d,i).then(h=>{h&&(n[s]=h||n[s])})}}}async function uE(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:mt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:mt.error,error:i}}return{type:mt.data,data:t.deferredData.data}}}function Yy(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function ku(t,e){let n=typeof e=="string"?va(e).search:e.search;if(t[t.length-1].route.index&&Yy(n||""))return t[t.length-1];let r=rE(t);return r[r.length-1]}function WS(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function Kg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function iD(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function au(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function oD(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function xs(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function sD(t,e){try{let n=t.sessionStorage.getItem(oE);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function aD(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(oE,JSON.stringify(n))}catch(r){yl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _v(){return _v=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_v.apply(this,arguments)}const dE=b.createContext(null),hE=b.createContext(null),fE=b.createContext(null),Qy=b.createContext(null),$p=b.createContext({outlet:null,matches:[],isDataRoute:!1}),pE=b.createContext(null);function qy(){return b.useContext(Qy)!=null}function gE(){return qy()||Ke(!1),b.useContext(Qy).location}function cD(t,e,n,r){qy()||Ke(!1);let{navigator:i}=b.useContext(fE),{matches:o}=b.useContext($p),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let l=gE(),u;u=l;let d=u.pathname||"/",h=d;if(c!=="/"){let g=c.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let f=xa(t,{pathname:h});return fD(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:za([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:za([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,r)}function lD(){let t=vD(),e=Xp(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:i},n):null,null)}const uD=b.createElement(lD,null);class dD extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement($p.Provider,{value:this.props.routeContext},b.createElement(pE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function hD(t){let{routeContext:e,match:n,children:r}=t,i=b.useContext(dE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement($p.Provider,{value:e},r)}function fD(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Ke(!1),s=s.slice(0,Math.min(s.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let f,p=!1,g=null,C=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||uD,c&&(l<0&&h===0?(yD("route-fallback"),p=!0,C=null):l===h&&(p=!0,C=d.route.hydrateFallbackElement||null)));let m=e.concat(s.slice(0,h+1)),v=()=>{let S;return f?S=g:p?S=C:d.route.Component?S=b.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,b.createElement(hD,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?b.createElement(dD,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var Ov=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ov||{});function pD(t){let e=b.useContext(hE);return e||Ke(!1),e}function gD(t){let e=b.useContext($p);return e||Ke(!1),e}function mD(t){let e=gD(),n=e.matches[e.matches.length-1];return n.route.id||Ke(!1),n.route.id}function vD(){var t;let e=b.useContext(pE),n=pD(Ov.UseRouteError),r=mD(Ov.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const jS={};function yD(t,e,n){jS[t]||(jS[t]=!0)}function CD(t){let{basename:e="/",children:n=null,location:r,navigationType:i=qt.Pop,navigator:o,static:s=!1,future:a}=t;qy()&&Ke(!1);let c=e.replace(/^\/*/,"/"),l=b.useMemo(()=>({basename:c,navigator:o,static:s,future:_v({v7_relativeSplatPath:!1},a)}),[c,a,o,s]);typeof r=="string"&&(r=va(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=b.useMemo(()=>{let C=Hd(u,c);return C==null?null:{location:{pathname:C,search:d,hash:h,state:f,key:p},navigationType:i}},[c,u,d,h,f,p,i]);return g==null?null:b.createElement(fE.Provider,{value:l},b.createElement(Qy.Provider,{children:n,value:g}))}new Promise(()=>{});function ID(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:b.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:b.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:b.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.25.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jf(){return Jf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jf.apply(this,arguments)}const SD="6";try{window.__reactRouterVersion=SD}catch{}function bD(t,e){return WM({basename:void 0,future:Jf({},void 0,{v7_prependBasename:!0}),history:uM({window:void 0}),hydrationData:wD(),routes:t,mapRouteProperties:ID,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function wD(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Jf({},e,{errors:AD(e.errors)})),e}function AD(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Ky(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const kD=b.createContext({isTransitioning:!1}),ED=b.createContext(new Map),TD="startTransition",ZS=YN[TD],RD="flushSync",HS=lM[RD];function xD(t){ZS?ZS(t):t()}function cu(t){HS?HS(t):t()}class PD{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function ND(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=b.useState(n.state),[s,a]=b.useState(),[c,l]=b.useState({isTransitioning:!1}),[u,d]=b.useState(),[h,f]=b.useState(),[p,g]=b.useState(),C=b.useRef(new Map),{v7_startTransition:m}=r||{},v=b.useCallback(T=>{m?xD(T):T()},[m]),S=b.useCallback((T,_)=>{let{deletedFetchers:O,unstable_flushSync:L,unstable_viewTransitionOpts:U}=_;O.forEach(Z=>C.current.delete(Z)),T.fetchers.forEach((Z,J)=>{Z.data!==void 0&&C.current.set(J,Z.data)});let z=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!U||z){L?cu(()=>o(T)):v(()=>o(T));return}if(L){cu(()=>{h&&(u&&u.resolve(),h.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:U.currentLocation,nextLocation:U.nextLocation})});let Z=n.window.document.startViewTransition(()=>{cu(()=>o(T))});Z.finished.finally(()=>{cu(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})})}),cu(()=>f(Z));return}h?(u&&u.resolve(),h.skipTransition(),g({state:T,currentLocation:U.currentLocation,nextLocation:U.nextLocation})):(a(T),l({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}))},[n.window,h,u,C,v]);b.useLayoutEffect(()=>n.subscribe(S),[n,S]),b.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new PD)},[c]),b.useEffect(()=>{if(u&&s&&n.window){let T=s,_=u.promise,O=n.window.document.startViewTransition(async()=>{v(()=>o(T)),await _});O.finished.finally(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})}),f(O)}},[v,s,u,n.window]),b.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,h,i.location,s]),b.useEffect(()=>{!c.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),g(void 0))},[c.isTransitioning,p]),b.useEffect(()=>{},[]);let E=b.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,_,O)=>n.navigate(T,{state:_,preventScrollReset:O==null?void 0:O.preventScrollReset}),replace:(T,_,O)=>n.navigate(T,{replace:!0,state:_,preventScrollReset:O==null?void 0:O.preventScrollReset})}),[n]),w=n.basename||"/",A=b.useMemo(()=>({router:n,navigator:E,static:!1,basename:w}),[n,E,w]),x=b.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return b.createElement(b.Fragment,null,b.createElement(dE.Provider,{value:A},b.createElement(hE.Provider,{value:i},b.createElement(ED.Provider,{value:C.current},b.createElement(kD.Provider,{value:c},b.createElement(CD,{basename:w,location:i.location,navigationType:i.historyAction,navigator:E,future:x},i.initialized||n.future.v7_partialHydration?b.createElement(_D,{routes:n.routes,future:n.future,state:i}):e))))),null)}const _D=b.memo(OD);function OD(t){let{routes:e,future:n,state:r}=t;return cD(e,void 0,r,n)}var zS;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(zS||(zS={}));var XS;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(XS||(XS={}));const mE=t=>{const e=typeof t=="function",n=b.useRef(t);b.useEffect(()=>{n.current=t}),b.useEffect(()=>{if(e){const r=i=>{const o=n.current(i);if(typeof o=="string")return i.preventDefault(),i.returnValue=o;if(i.defaultPrevented)return i.returnValue=""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}},[e])},vE=7e3;let Jg=null;function $S(t,e="assertive",n=vE){Jg||(Jg=new MD),Jg.announce(t,e,n)}class MD{createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=vE){if(!this.node)return;let i=document.createElement("div");i.textContent=e,n==="assertive"?this.assertiveLog.appendChild(i):this.politeLog.appendChild(i),e!==""&&setTimeout(()=>{i.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&(this.politeLog.innerHTML=""))}constructor(){this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node)}}var KS=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function DD(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Es=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],LD=function(){KS(t,null,[{key:"escapeForHtml",value:function(n){return new t().escapeForHtml(n)}},{key:"linkify",value:function(n){return new t().linkify(n)}},{key:"ansiToHtml",value:function(n,r){return new t().ansiToHtml(n,r)}},{key:"ansiToJson",value:function(n,r){return new t().ansiToJson(n,r)}},{key:"ansiToText",value:function(n){return new t().ansiToText(n)}}]);function t(){DD(this,t),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return KS(t,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var r=0;r<8;++r)this.PALETTE_COLORS.push(Es[n][r].color);for(var i=[0,95,135,175,215,255],o=function(h,f,p){return i[h]+", "+i[f]+", "+i[p]},s=0;s<6;++s)for(var a=0;a<6;++a)for(var c=0;c<6;++c)this.PALETTE_COLORS.push(o(s,a,c));for(var l=8,u=0;u<24;++u,l+=10)this.PALETTE_COLORS.push(o(l,l,l))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(r){return r=="&"?"&amp;":r=='"'?"&quot;":r=="<"?"&lt;":r==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(/(https?:\/\/[^\s]+)/gm,function(r){return'<a href="'+r+'">'+r+"</a>"})}},{key:"ansiToHtml",value:function(n,r){return this.process(n,r,!0)}},{key:"ansiToJson",value:function(n,r){return r=r||{},r.json=!0,r.clearLine=!1,this.process(n,r,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,r,i){var o=this,s=this,a=n.split(/\033\[/),c=a.shift();r==null&&(r={}),r.clearLine=/\r/.test(n);var l=a.map(function(d){return o.processChunk(d,r,i)});if(r&&r.json){var u=s.processChunkJson("");return u.content=c,u.clearLine=r.clearLine,l.unshift(u),r.remove_empty&&(l=l.filter(function(d){return!d.isEmpty()})),l}else l.unshift(c);return l.join("")}},{key:"processChunkJson",value:function(n,r,i){r=typeof r>"u"?{}:r;var o=r.use_classes=typeof r.use_classes<"u"&&r.use_classes,s=r.key=o?"class":"color",a={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:r.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},c=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!c)return a;a.content=c[4];var l=c[2].split(";");if(c[1]!==""||c[3]!=="m"||!i)return a;for(var u=this;l.length>0;){var d=l.shift(),h=parseInt(d);if(isNaN(h)||h===0)u.fg=u.bg=null,u.decorations=[];else if(h===1)u.decorations.push("bold");else if(h===2)u.decorations.push("dim");else if(h===3)u.decorations.push("italic");else if(h===4)u.decorations.push("underline");else if(h===5)u.decorations.push("blink");else if(h===7)u.decorations.push("reverse");else if(h===8)u.decorations.push("hidden");else if(h===9)u.decorations.push("strikethrough");else if(h===21)u.removeDecoration("bold");else if(h===22)u.removeDecoration("bold"),u.removeDecoration("dim");else if(h===23)u.removeDecoration("italic");else if(h===24)u.removeDecoration("underline");else if(h===25)u.removeDecoration("blink");else if(h===27)u.removeDecoration("reverse");else if(h===28)u.removeDecoration("hidden");else if(h===29)u.removeDecoration("strikethrough");else if(h===39)u.fg=null;else if(h===49)u.bg=null;else if(h>=30&&h<38)u.fg=Es[0][h%10][s];else if(h>=90&&h<98)u.fg=Es[1][h%10][s];else if(h>=40&&h<48)u.bg=Es[0][h%10][s];else if(h>=100&&h<108)u.bg=Es[1][h%10][s];else if(h===38||h===48){var f=h===38;if(l.length>=1){var p=l.shift();if(p==="5"&&l.length>=1){var g=parseInt(l.shift());if(g>=0&&g<=255)if(!o)this.PALETTE_COLORS||u.setupPalette(),f?u.fg=this.PALETTE_COLORS[g]:u.bg=this.PALETTE_COLORS[g];else{var C=g>=16?"ansi-palette-"+g:Es[g>7?1:0][g%8].class;f?u.fg=C:u.bg=C}}else if(p==="2"&&l.length>=3){var m=parseInt(l.shift()),v=parseInt(l.shift()),S=parseInt(l.shift());if(m>=0&&m<=255&&v>=0&&v<=255&&S>=0&&S<=255){var E=m+", "+v+", "+S;o?f?(u.fg="ansi-truecolor",u.fg_truecolor=E):(u.bg="ansi-truecolor",u.bg_truecolor=E):f?u.fg=E:u.bg=E}}}}}return u.fg===null&&u.bg===null&&u.decorations.length===0||(a.fg=u.fg,a.bg=u.bg,a.fg_truecolor=u.fg_truecolor,a.bg_truecolor=u.bg_truecolor,a.decorations=u.decorations,a.decoration=u.decorations.slice(-1).pop()||null,a.was_processed=!0),a}},{key:"processChunk",value:function(n,r,i){var o=this;r=r||{};var s=this.processChunkJson(n,r,i),a=r.use_classes;if(s.decorations=s.decorations.filter(function(f){if(f==="reverse"){s.fg||(s.fg=Es[0][7][a?"class":"color"]),s.bg||(s.bg=Es[0][0][a?"class":"color"]);var p=s.fg;s.fg=s.bg,s.bg=p;var g=s.fg_truecolor;return s.fg_truecolor=s.bg_truecolor,s.bg_truecolor=g,s.isInverted=!0,!1}return!0}),r.json)return s;if(s.isEmpty())return"";if(!s.was_processed)return s.content;var c=[],l=[],u=[],d={},h=function(p){var g=[],C=void 0;for(C in p)p.hasOwnProperty(C)&&g.push("data-"+C+'="'+o.escapeForHtml(p[C])+'"');return g.length>0?" "+g.join(" "):""};return s.isInverted&&(d["ansi-is-inverted"]="true"),s.fg&&(a?(c.push(s.fg+"-fg"),s.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=s.fg_truecolor,s.fg_truecolor=null)):c.push("color:rgb("+s.fg+")")),s.bg&&(a?(c.push(s.bg+"-bg"),s.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=s.bg_truecolor,s.bg_truecolor=null)):c.push("background-color:rgb("+s.bg+")")),s.decorations.forEach(function(f){if(a){l.push("ansi-"+f);return}f==="bold"?l.push("font-weight:bold"):f==="dim"?l.push("opacity:0.5"):f==="italic"?l.push("font-style:italic"):f==="hidden"?l.push("visibility:hidden"):f==="strikethrough"?u.push("line-through"):u.push(f)}),u.length&&l.push("text-decoration:"+u.join(" ")),a?'<span class="'+c.concat(l).join(" ")+'"'+h(d)+">"+s.content+"</span>":'<span style="'+c.concat(l).join(";")+'"'+h(d)+">"+s.content+"</span>"}},{key:"removeDecoration",value:function(n){var r=this.decorations.indexOf(n);r>=0&&this.decorations.splice(r,1)}}]),t}(),BD=LD;const FD=Fd(BD);function UD(t,e){let n=[];for(const r of t.split(`\r
`)){const i=FD.ansiToJson(r,{json:!0,remove_empty:!1});let o=[];for(const s of i){const a=jD(s,e);o=[...o,...a]}n=[...n,K.jsx("span",{children:o},n.length)]}return n}const VD=/(\s|^)((\w+):\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,GD=/(?<slorp1>\s|^)(?<name>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+[a-zA-Z])(?<slorp2>\s|$|\.)/g,WD=/@\[exit:([a-zA-Z]+)\]([a-zA-Z]+)@\[\/\]/g;function jD(t,e){const n=ZD(t),r=[];let i=0,o=0;function s(u,d){let h;for(;(h=u.exec(t.content))!==null;){const f=h.index;f>i&&r.push(t.content.substring(i,f)),r.push(d(h)),i=u.lastIndex}}function a(u){const[,d,h]=u,f=h;return K.jsxs(K.Fragment,{children:[d,K.jsx("a",{href:f,target:"_blank",rel:"noreferrer",children:h})]})}function c(u){const d=u.groups.name,h=`mailto:${d}`;return K.jsxs(K.Fragment,{children:[u.groups.slorp1,K.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:d}),u.groups.slorp2]})}function l(u){const[,d,h]=u;return K.jsx("a",{onClick:()=>e(d),className:"exit",children:h})}return s(VD,a),s(GD,c),s(WD,l),i<t.content.length&&r.push(t.content.substring(i)),r.map(u=>K.jsx("span",{style:n,children:u},o++))}function ZD(t){const e={};switch(t.bg&&(e.backgroundColor=`rgb(${t.bg})`),t.fg&&(e.color=`rgb(${t.fg})`),t.decoration){case"bold":e.fontWeight="bold";break;case"dim":e.opacity="0.5";break;case"italic":e.fontStyle="italic";break;case"hidden":e.visibility="hidden";break;case"strikethrough":e.textDecoration="line-through";break;case"underline":e.textDecoration="underline";break;case"blink":e.textDecoration="blink";break}return e}var ua={},_l={},yE=b;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ur=Object.prototype.hasOwnProperty,HD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,JS={},YS={};function CE(t){return ur.call(YS,t)?!0:ur.call(JS,t)?!1:HD.test(t)?YS[t]=!0:(JS[t]=!0,!1)}function ar(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var xn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xn[t]=new ar(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xn[e]=new ar(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xn[t]=new ar(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xn[t]=new ar(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xn[t]=new ar(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xn[t]=new ar(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xn[t]=new ar(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xn[t]=new ar(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xn[t]=new ar(t,5,!1,t.toLowerCase(),null,!1,!1)});var eC=/[\-:]([a-z])/g;function tC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(eC,tC);xn[e]=new ar(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(eC,tC);xn[e]=new ar(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(eC,tC);xn[e]=new ar(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xn[t]=new ar(t,1,!1,t.toLowerCase(),null,!1,!1)});xn.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xn[t]=new ar(t,1,!1,t.toLowerCase(),null,!0,!0)});var qh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zD=["Webkit","ms","Moz","O"];Object.keys(qh).forEach(function(t){zD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),qh[e]=qh[t]})});var XD=/["'&<>]/;function qn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=XD.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var $D=/([A-Z])/g,KD=/^ms-/,Mv=Array.isArray;function To(t,e){return{insertionMode:t,selectedValue:e}}function JD(t,e,n){switch(e){case"select":return To(1,n.value!=null?n.value:n.defaultValue);case"svg":return To(2,null);case"math":return To(3,null);case"foreignObject":return To(1,null);case"table":return To(4,null);case"thead":case"tbody":case"tfoot":return To(5,null);case"colgroup":return To(7,null);case"tr":return To(6,null)}return 4<=t.insertionMode||t.insertionMode===0?To(1,null):t}var QS=new Map;function IE(t,e,n){if(typeof n!="object")throw Error(Fe(62));e=!0;for(var r in n)if(ur.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=qn(r);i=qn((""+i).trim())}else{o=r;var s=QS.get(o);s!==void 0||(s=qn(o.replace($D,"-$1").toLowerCase().replace(KD,"-ms-")),QS.set(o,s)),o=s,i=typeof i=="number"?i===0||ur.call(qh,r)?""+i:i+"px":qn((""+i).trim())}e?(e=!1,t.push(' style="',o,":",i)):t.push(";",o,":",i)}}e||t.push('"')}function Er(t,e,n,r){switch(n){case"style":IE(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=xn.hasOwnProperty(n)?xn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',qn(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',qn(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',qn(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',qn(r),'"')}}else if(CE(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',qn(r),'"')}}}function ef(t,e,n){if(e!=null){if(n!=null)throw Error(Fe(60));if(typeof e!="object"||!("__html"in e))throw Error(Fe(61));e=e.__html,e!=null&&t.push(""+e)}}function YD(t){var e="";return yE.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Yg(t,e,n,r){t.push(Zi(n));var i=n=null,o;for(o in e)if(ur.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:Er(t,r,o,s)}}return t.push(">"),ef(t,i,n),typeof n=="string"?(t.push(qn(n)),null):n}var QD=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,qS=new Map;function Zi(t){var e=qS.get(t);if(e===void 0){if(!QD.test(t))throw Error(Fe(65,t));e="<"+t,qS.set(t,e)}return e}function qD(t,e,n,r,i){switch(e){case"select":t.push(Zi("select"));var o=null,s=null;for(u in n)if(ur.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:Er(t,r,u,a)}}return t.push(">"),ef(t,s,o),o;case"option":s=i.selectedValue,t.push(Zi("option"));var c=a=null,l=null,u=null;for(o in n)if(ur.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Er(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:YD(a),Mv(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(' selected=""');break}}else""+s===n&&t.push(' selected=""');else l&&t.push(' selected=""');return t.push(">"),ef(t,u,a),a;case"textarea":t.push(Zi("textarea")),u=s=o=null;for(a in n)if(ur.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(Fe(91));default:Er(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(">"),u!=null){if(o!=null)throw Error(Fe(92));if(Mv(u)&&1<u.length)throw Error(Fe(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o!==null&&t.push(qn(""+o)),null;case"input":t.push(Zi("input")),c=u=a=o=null;for(s in n)if(ur.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(Fe(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:Er(t,r,s,l)}return u!==null?Er(t,r,"checked",u):c!==null&&Er(t,r,"checked",c),o!==null?Er(t,r,"value",o):a!==null&&Er(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(Zi("menuitem"));for(var h in n)if(ur.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Fe(400));default:Er(t,r,h,o)}return t.push(">"),null;case"title":t.push(Zi("title")),o=null;for(d in n)if(ur.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(Fe(434));default:Er(t,r,d,s)}return t.push(">"),o;case"listing":case"pre":t.push(Zi(e)),s=o=null;for(c in n)if(ur.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:Er(t,r,c,a)}if(t.push(">"),s!=null){if(o!=null)throw Error(Fe(60));if(typeof s!="object"||!("__html"in s))throw Error(Fe(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Zi(e));for(var f in n)if(ur.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Fe(399,e));default:Er(t,r,f,o)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Yg(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),Yg(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Yg(t,n,e,r);t.push(Zi(e)),s=o=null;for(l in n)if(ur.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":IE(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:CE(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",l,'="',qn(a),'"')}return t.push(">"),ef(t,s,o),o}}function eb(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Fe(395));return t.push(n),t.push('"></template>')}function e2(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(Fe(397))}}function t2(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Fe(397))}}var n2=/[<\u2028\u2029]/g;function Qg(t){return JSON.stringify(t).replace(n2,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function r2(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function tb(t,e,n,r){return n.generateStaticMarkup?(t.push(qn(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(qn(e)),t=!0),t)}var Hu=Object.assign,i2=Symbol.for("react.element"),SE=Symbol.for("react.portal"),bE=Symbol.for("react.fragment"),wE=Symbol.for("react.strict_mode"),AE=Symbol.for("react.profiler"),kE=Symbol.for("react.provider"),EE=Symbol.for("react.context"),TE=Symbol.for("react.forward_ref"),RE=Symbol.for("react.suspense"),xE=Symbol.for("react.suspense_list"),PE=Symbol.for("react.memo"),nC=Symbol.for("react.lazy"),o2=Symbol.for("react.scope"),s2=Symbol.for("react.debug_trace_mode"),a2=Symbol.for("react.legacy_hidden"),c2=Symbol.for("react.default_value"),nb=Symbol.iterator;function Dv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case bE:return"Fragment";case SE:return"Portal";case AE:return"Profiler";case wE:return"StrictMode";case RE:return"Suspense";case xE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case EE:return(t.displayName||"Context")+".Consumer";case kE:return(t._context.displayName||"Context")+".Provider";case TE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case PE:return e=t.displayName||null,e!==null?e:Dv(t.type)||"Memo";case nC:e=t._payload,t=t._init;try{return Dv(t(e))}catch{}}return null}var NE={};function rb(t,e){if(t=t.contextTypes,!t)return NE;var n={},r;for(r in t)n[r]=e[r];return n}var Va=null;function Kp(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Fe(401))}else{if(n===null)throw Error(Fe(401));Kp(t,n)}e.context._currentValue2=e.value}}function _E(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&_E(t)}function OE(t){var e=t.parent;e!==null&&OE(e),t.context._currentValue2=t.value}function ME(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Fe(402));t.depth===e.depth?Kp(t,e):ME(t,e)}function DE(t,e){var n=e.parent;if(n===null)throw Error(Fe(402));t.depth===n.depth?Kp(t,n):DE(t,n),e.context._currentValue2=e.value}function Yf(t){var e=Va;e!==t&&(e===null?OE(t):t===null?_E(e):e.depth===t.depth?Kp(e,t):e.depth>t.depth?ME(e,t):DE(e,t),Va=t)}var ib={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function ob(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=ib,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue2:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:Hu({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&ib.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=Hu({},o,a)):Hu(o,a))}t.state=o}else o.queue=null}var l2={id:1,overflow:""};function Lv(t,e,n){var r=t.id;t=t.overflow;var i=32-tf(r)-1;r&=~(1<<i),n+=1;var o=32-tf(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-tf(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var tf=Math.clz32?Math.clz32:h2,u2=Math.log,d2=Math.LN2;function h2(t){return t>>>=0,t===0?32:31-(u2(t)/d2|0)|0}function f2(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var p2=typeof Object.is=="function"?Object.is:f2,gs=null,rC=null,nf=null,pt=null,Eu=!1,Qf=!1,yd=0,Zs=null,Jp=0;function Pa(){if(gs===null)throw Error(Fe(321));return gs}function sb(){if(0<Jp)throw Error(Fe(312));return{memoizedState:null,queue:null,next:null}}function iC(){return pt===null?nf===null?(Eu=!1,nf=pt=sb()):(Eu=!0,pt=nf):pt.next===null?(Eu=!1,pt=pt.next=sb()):(Eu=!0,pt=pt.next),pt}function oC(){rC=gs=null,Qf=!1,nf=null,Jp=0,pt=Zs=null}function LE(t,e){return typeof e=="function"?e(t):e}function ab(t,e,n){if(gs=Pa(),pt=iC(),Eu){var r=pt.queue;if(e=r.dispatch,Zs!==null&&(n=Zs.get(r),n!==void 0)){Zs.delete(r),r=pt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return pt.memoizedState=r,[r,e]}return[pt.memoizedState,e]}return t=t===LE?typeof e=="function"?e():e:n!==void 0?n(e):e,pt.memoizedState=t,t=pt.queue={last:null,dispatch:null},t=t.dispatch=g2.bind(null,gs,t),[pt.memoizedState,t]}function cb(t,e){if(gs=Pa(),pt=iC(),e=e===void 0?null:e,pt!==null){var n=pt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!p2(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),pt.memoizedState=[t,e],t}function g2(t,e,n){if(25<=Jp)throw Error(Fe(301));if(t===gs)if(Qf=!0,t={action:n,next:null},Zs===null&&(Zs=new Map),n=Zs.get(e),n===void 0)Zs.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function m2(){throw Error(Fe(394))}function kh(){}var lb={readContext:function(t){return t._currentValue2},useContext:function(t){return Pa(),t._currentValue2},useMemo:cb,useReducer:ab,useRef:function(t){gs=Pa(),pt=iC();var e=pt.memoizedState;return e===null?(t={current:t},pt.memoizedState=t):e},useState:function(t){return ab(LE,t)},useInsertionEffect:kh,useLayoutEffect:function(){},useCallback:function(t,e){return cb(function(){return t},e)},useImperativeHandle:kh,useEffect:kh,useDebugValue:kh,useDeferredValue:function(t){return Pa(),t},useTransition:function(){return Pa(),[!1,m2]},useId:function(){var t=rC.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-tf(t)-1)).toString(32)+e;var n=rf;if(n===null)throw Error(Fe(404));return e=yd++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return Pa(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Fe(407));return n()}},rf=null,qg=yE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function v2(t){return console.error(t),null}function Tu(){}function y2(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?v2:i,onAllReady:Tu,onShellReady:s===void 0?Tu:s,onShellError:Tu,onFatalError:Tu},n=qf(e,0,null,n,!1,!1),n.parentFlushed=!0,t=sC(e,t,null,n,u,NE,null,l2),l.push(t),e}function sC(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&UE(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function qf(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function Cd(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function ep(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function ub(t,e,n,r,i){for(gs={},rC=e,yd=0,t=n(r,i);Qf;)Qf=!1,yd=0,Jp+=1,pt=null,t=n(r,i);return oC(),t}function db(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(Fe(108,Dv(r)||"Unknown",a));r=Hu({},s,n)}e.legacyContext=r,Or(t,e,i),e.legacyContext=s}else Or(t,e,i)}function hb(t,e){if(t&&t.defaultProps){e=Hu({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Bv(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=rb(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue2:i),ob(o,n,r,i),db(t,e,o,n)}else{o=rb(n,e.legacyContext),i=ub(t,e,n,r,o);var s=yd!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)ob(i,n,r,o),db(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=Lv(r,1,0);try{Or(t,e,i)}finally{e.treeContext=r}}else Or(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=qD(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=JD(s,n,r),Fv(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case a2:case s2:case wE:case AE:case bE:Or(t,e,r.children);return;case xE:Or(t,e,r.children);return;case o2:throw Error(Fe(343));case RE:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=qf(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=qf(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(Fv(t,e,r),t.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),l.status=1,tp(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=Cd(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=sC(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case TE:if(r=ub(t,e,n.render,r,i),yd!==0){n=e.treeContext,e.treeContext=Lv(n,1,0);try{Or(t,e,r)}finally{e.treeContext=n}}else Or(t,e,r);return;case PE:n=n.type,r=hb(n,r),Bv(t,e,n,r,i);return;case kE:if(i=r.children,n=n._context,r=r.value,o=n._currentValue2,n._currentValue2=r,s=Va,Va=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,Or(t,e,i),t=Va,t===null)throw Error(Fe(403));r=t.parentValue,t.context._currentValue2=r===c2?t.context._defaultValue:r,t=Va=t.parent,e.context=t;return;case EE:r=r.children,r=r(n._currentValue2),Or(t,e,r);return;case nC:i=n._init,n=i(n._payload),r=hb(n,r),Bv(t,e,n,r,void 0);return}throw Error(Fe(130,n==null?n:typeof n,""))}}function Or(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case i2:Bv(t,e,n.type,n.props,n.ref);return;case SE:throw Error(Fe(257));case nC:var r=n._init;n=r(n._payload),Or(t,e,n);return}if(Mv(n)){fb(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=nb&&n[nb]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);fb(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=tb(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=tb(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function fb(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=Lv(o,r,i);try{Fv(t,e,n[i])}finally{e.treeContext=o}}}function Fv(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Or(t,e,n)}catch(c){if(oC(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=qf(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=sC(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Yf(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Yf(o),c}}function C2(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,FE(this,e,t)}function BE(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Fe(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return BE(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function tp(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&tp(t,n)}else t.completedSegments.push(e)}function FE(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Fe(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Tu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&tp(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(C2,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(tp(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function UE(t){if(t.status!==2){var e=Va,n=qg.current;qg.current=lb;var r=rf;rf=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){Yf(s.context);try{Or(a,s,s.node),a.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),s.abortSet.delete(s),c.status=1,FE(a,s.blockedBoundary,c)}catch(p){if(oC(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=s.ping;p.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=p,h=Cd(a,d);if(u===null?ep(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&aC(t,t.destination)}catch(p){Cd(t,p),ep(t,p)}finally{rf=r,qg.current=n,n===lb&&Yf(e)}}}function Eh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)e.push(r[o]);i=Yp(t,e,i)}for(;o<r.length-1;o++)e.push(r[o]);return o<r.length&&(i=e.push(r[o])),i;default:throw Error(Fe(390))}}function Yp(t,e,n){var r=n.boundary;if(r===null)return Eh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=qn(r),e.push(r),e.push('"')),e.push("></template>")),Eh(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;return i=i.boundaryPrefix+o.toString(16),r=r.id=i,eb(e,t.responseState,r),Eh(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),eb(e,t.responseState,r.id),Eh(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Fe(391));return Yp(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function pb(t,e,n){return e2(e,t.responseState,n.formatContext,n.id),Yp(t,e,n),t2(e,n.formatContext)}function gb(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)VE(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Fe(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function VE(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Fe(392));return pb(t,e,r)}return pb(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function aC(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Yp(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(Fe(395));if(r.push(c),r.push('"'),l||u||d){r.push(",");var h=Qg(l||"");r.push(h)}if(u||d){r.push(",");var f=Qg(u||"");r.push(f)}if(d){r.push(",");var p=Qg(d);r.push(p)}if(!r.push(")<\/script>")){t.destination=null,o++,i.splice(0,o);return}}i.splice(0,o);var g=t.completedBoundaries;for(o=0;o<g.length;o++)if(!gb(t,e,g[o])){t.destination=null,o++,g.splice(0,o);return}g.splice(0,o);var C=t.partialBoundaries;for(o=0;o<C.length;o++){var m=C[o];e:{i=t,s=e;var v=m.completedSegments;for(a=0;a<v.length;a++)if(!VE(i,s,m,v[a])){a++,v.splice(0,a);var S=!1;break e}v.splice(0,a),S=!0}if(!S){t.destination=null,o++,C.splice(0,o);return}}C.splice(0,o);var E=t.completedBoundaries;for(o=0;o<E.length;o++)if(!gb(t,e,E[o])){t.destination=null,o++,E.splice(0,o);return}E.splice(0,o)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function I2(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return BE(r,t,e)}),n.clear(),t.destination!==null&&aC(t,t.destination)}catch(r){Cd(t,r),ep(t,r)}}function S2(){}function GE(t,e,n,r){var i=!1,o=null,s="",a={push:function(l){return l!==null&&(s+=l),!0},destroy:function(l){i=!0,o=l}},c=!1;if(t=y2(t,r2(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,S2,void 0,function(){c=!0}),UE(t),I2(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{aC(t,a)}catch(l){Cd(t,l),ep(t,l)}}if(i)throw o;if(!c)throw Error(Fe(426));return s}_l.renderToNodeStream=function(){throw Error(Fe(207))};_l.renderToStaticMarkup=function(t,e){return GE(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};_l.renderToStaticNodeStream=function(){throw Error(Fe(208))};_l.renderToString=function(t,e){return GE(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};_l.version="18.3.1";var cC={},WE=b;function je(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Mr=null,Dr=0;function Ee(t,e){if(e.length!==0)if(512<e.length)0<Dr&&(t.enqueue(new Uint8Array(Mr.buffer,0,Dr)),Mr=new Uint8Array(512),Dr=0),t.enqueue(e);else{var n=Mr.length-Dr;n<e.length&&(n===0?t.enqueue(Mr):(Mr.set(e.subarray(0,n),Dr),t.enqueue(Mr),e=e.subarray(n)),Mr=new Uint8Array(512),Dr=0),Mr.set(e,Dr),Dr+=e.length}}function kt(t,e){return Ee(t,e),!0}function mb(t){Mr&&0<Dr&&(t.enqueue(new Uint8Array(Mr.buffer,0,Dr)),Mr=null,Dr=0)}var jE=new TextEncoder;function Ze(t){return jE.encode(t)}function ge(t){return jE.encode(t)}function ZE(t,e){typeof t.error=="function"?t.error(e):t.close()}var dr=Object.prototype.hasOwnProperty,b2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vb={},yb={};function HE(t){return dr.call(yb,t)?!0:dr.call(vb,t)?!1:b2.test(t)?yb[t]=!0:(vb[t]=!0,!1)}function cr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Pn[t]=new cr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Pn[e]=new cr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Pn[t]=new cr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Pn[t]=new cr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Pn[t]=new cr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Pn[t]=new cr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Pn[t]=new cr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Pn[t]=new cr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Pn[t]=new cr(t,5,!1,t.toLowerCase(),null,!1,!1)});var lC=/[\-:]([a-z])/g;function uC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(lC,uC);Pn[e]=new cr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(lC,uC);Pn[e]=new cr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(lC,uC);Pn[e]=new cr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Pn[t]=new cr(t,1,!1,t.toLowerCase(),null,!1,!1)});Pn.xlinkHref=new cr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Pn[t]=new cr(t,1,!1,t.toLowerCase(),null,!0,!0)});var of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w2=["Webkit","ms","Moz","O"];Object.keys(of).forEach(function(t){w2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),of[e]=of[t]})});var A2=/["'&<>]/;function An(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=A2.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var k2=/([A-Z])/g,E2=/^ms-/,Uv=Array.isArray,T2=ge("<script>"),R2=ge("<\/script>"),x2=ge('<script src="'),P2=ge('<script type="module" src="'),Cb=ge('" async=""><\/script>'),N2=/(<\/|<)(s)(cript)/gi;function _2(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function O2(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?T2:ge('<script nonce="'+An(e)+'">');var o=[];if(n!==void 0&&o.push(e,Ze((""+n).replace(N2,_2)),R2),r!==void 0)for(n=0;n<r.length;n++)o.push(x2,Ze(An(r[n])),Cb);if(i!==void 0)for(r=0;r<i.length;r++)o.push(P2,Ze(An(i[r])),Cb);return{bootstrapChunks:o,startInlineScript:e,placeholderPrefix:ge(t+"P:"),segmentPrefix:ge(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Hi(t,e){return{insertionMode:t,selectedValue:e}}function M2(t){return Hi(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function D2(t,e,n){switch(e){case"select":return Hi(1,n.value!=null?n.value:n.defaultValue);case"svg":return Hi(2,null);case"math":return Hi(3,null);case"foreignObject":return Hi(1,null);case"table":return Hi(4,null);case"thead":case"tbody":case"tfoot":return Hi(5,null);case"colgroup":return Hi(7,null);case"tr":return Hi(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Hi(1,null):t}var dC=ge("<!-- -->");function Ib(t,e,n,r){return e===""?r:(r&&t.push(dC),t.push(Ze(An(e))),!0)}var Sb=new Map,L2=ge(' style="'),bb=ge(":"),B2=ge(";");function zE(t,e,n){if(typeof n!="object")throw Error(je(62));e=!0;for(var r in n)if(dr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=Ze(An(r));i=Ze(An((""+i).trim()))}else{o=r;var s=Sb.get(o);s!==void 0||(s=ge(An(o.replace(k2,"-$1").toLowerCase().replace(E2,"-ms-"))),Sb.set(o,s)),o=s,i=typeof i=="number"?i===0||dr.call(of,r)?Ze(""+i):Ze(i+"px"):Ze(An((""+i).trim()))}e?(e=!1,t.push(L2,o,bb,i)):t.push(B2,o,bb,i)}}e||t.push(Na)}var Ps=ge(" "),Ec=ge('="'),Na=ge('"'),wb=ge('=""');function Tr(t,e,n,r){switch(n){case"style":zE(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Pn.hasOwnProperty(n)?Pn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=Ze(e.attributeName),e.type){case 3:r&&t.push(Ps,n,wb);break;case 4:r===!0?t.push(Ps,n,wb):r!==!1&&t.push(Ps,n,Ec,Ze(An(r)),Na);break;case 5:isNaN(r)||t.push(Ps,n,Ec,Ze(An(r)),Na);break;case 6:!isNaN(r)&&1<=r&&t.push(Ps,n,Ec,Ze(An(r)),Na);break;default:e.sanitizeURL&&(r=""+r),t.push(Ps,n,Ec,Ze(An(r)),Na)}}else if(HE(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(Ps,Ze(n),Ec,Ze(An(r)),Na)}}}var Ns=ge(">"),Ab=ge("/>");function sf(t,e,n){if(e!=null){if(n!=null)throw Error(je(60));if(typeof e!="object"||!("__html"in e))throw Error(je(61));e=e.__html,e!=null&&t.push(Ze(""+e))}}function F2(t){var e="";return WE.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var em=ge(' selected=""');function tm(t,e,n,r){t.push(zi(n));var i=n=null,o;for(o in e)if(dr.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:Tr(t,r,o,s)}}return t.push(Ns),sf(t,i,n),typeof n=="string"?(t.push(Ze(An(n))),null):n}var nm=ge(`
`),U2=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,kb=new Map;function zi(t){var e=kb.get(t);if(e===void 0){if(!U2.test(t))throw Error(je(65,t));e=ge("<"+t),kb.set(t,e)}return e}var V2=ge("<!DOCTYPE html>");function G2(t,e,n,r,i){switch(e){case"select":t.push(zi("select"));var o=null,s=null;for(u in n)if(dr.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:Tr(t,r,u,a)}}return t.push(Ns),sf(t,s,o),o;case"option":s=i.selectedValue,t.push(zi("option"));var c=a=null,l=null,u=null;for(o in n)if(dr.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Tr(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:F2(a),Uv(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(em);break}}else""+s===n&&t.push(em);else l&&t.push(em);return t.push(Ns),sf(t,u,a),a;case"textarea":t.push(zi("textarea")),u=s=o=null;for(a in n)if(dr.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(je(91));default:Tr(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(Ns),u!=null){if(o!=null)throw Error(je(92));if(Uv(u)&&1<u.length)throw Error(je(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(nm),o!==null&&t.push(Ze(An(""+o))),null;case"input":t.push(zi("input")),c=u=a=o=null;for(s in n)if(dr.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:Tr(t,r,s,l)}return u!==null?Tr(t,r,"checked",u):c!==null&&Tr(t,r,"checked",c),o!==null?Tr(t,r,"value",o):a!==null&&Tr(t,r,"value",a),t.push(Ab),null;case"menuitem":t.push(zi("menuitem"));for(var h in n)if(dr.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(je(400));default:Tr(t,r,h,o)}return t.push(Ns),null;case"title":t.push(zi("title")),o=null;for(d in n)if(dr.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(je(434));default:Tr(t,r,d,s)}return t.push(Ns),o;case"listing":case"pre":t.push(zi(e)),s=o=null;for(c in n)if(dr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:Tr(t,r,c,a)}if(t.push(Ns),s!=null){if(o!=null)throw Error(je(60));if(typeof s!="object"||!("__html"in s))throw Error(je(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(nm,Ze(n)):t.push(Ze(""+n)))}return typeof o=="string"&&o[0]===`
`&&t.push(nm),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(zi(e));for(var f in n)if(dr.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,e));default:Tr(t,r,f,o)}return t.push(Ab),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return tm(t,n,e,r);case"html":return i.insertionMode===0&&t.push(V2),tm(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return tm(t,n,e,r);t.push(zi(e)),s=o=null;for(l in n)if(dr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":zE(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:HE(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(Ps,Ze(l),Ec,Ze(An(a)),Na)}return t.push(Ns),sf(t,s,o),o}}var W2=ge("</"),j2=ge(">"),Z2=ge('<template id="'),H2=ge('"></template>'),z2=ge("<!--$-->"),X2=ge('<!--$?--><template id="'),$2=ge('"></template>'),K2=ge("<!--$!-->"),J2=ge("<!--/$-->"),Y2=ge("<template"),Q2=ge('"'),q2=ge(' data-dgst="');ge(' data-msg="');ge(' data-stck="');var eL=ge("></template>");function Eb(t,e,n){if(Ee(t,X2),n===null)throw Error(je(395));return Ee(t,n),kt(t,$2)}var tL=ge('<div hidden id="'),nL=ge('">'),rL=ge("</div>"),iL=ge('<svg aria-hidden="true" style="display:none" id="'),oL=ge('">'),sL=ge("</svg>"),aL=ge('<math aria-hidden="true" style="display:none" id="'),cL=ge('">'),lL=ge("</math>"),uL=ge('<table hidden id="'),dL=ge('">'),hL=ge("</table>"),fL=ge('<table hidden><tbody id="'),pL=ge('">'),gL=ge("</tbody></table>"),mL=ge('<table hidden><tr id="'),vL=ge('">'),yL=ge("</tr></table>"),CL=ge('<table hidden><colgroup id="'),IL=ge('">'),SL=ge("</colgroup></table>");function bL(t,e,n,r){switch(n.insertionMode){case 0:case 1:return Ee(t,tL),Ee(t,e.segmentPrefix),Ee(t,Ze(r.toString(16))),kt(t,nL);case 2:return Ee(t,iL),Ee(t,e.segmentPrefix),Ee(t,Ze(r.toString(16))),kt(t,oL);case 3:return Ee(t,aL),Ee(t,e.segmentPrefix),Ee(t,Ze(r.toString(16))),kt(t,cL);case 4:return Ee(t,uL),Ee(t,e.segmentPrefix),Ee(t,Ze(r.toString(16))),kt(t,dL);case 5:return Ee(t,fL),Ee(t,e.segmentPrefix),Ee(t,Ze(r.toString(16))),kt(t,pL);case 6:return Ee(t,mL),Ee(t,e.segmentPrefix),Ee(t,Ze(r.toString(16))),kt(t,vL);case 7:return Ee(t,CL),Ee(t,e.segmentPrefix),Ee(t,Ze(r.toString(16))),kt(t,IL);default:throw Error(je(397))}}function wL(t,e){switch(e.insertionMode){case 0:case 1:return kt(t,rL);case 2:return kt(t,sL);case 3:return kt(t,lL);case 4:return kt(t,hL);case 5:return kt(t,gL);case 6:return kt(t,yL);case 7:return kt(t,SL);default:throw Error(je(397))}}var AL=ge('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),kL=ge('$RS("'),EL=ge('","'),TL=ge('")<\/script>'),RL=ge('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),xL=ge('$RC("'),PL=ge('","'),NL=ge('")<\/script>'),_L=ge('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),OL=ge('$RX("'),ML=ge('"'),DL=ge(")<\/script>"),rm=ge(","),LL=/[<\u2028\u2029]/g;function im(t){return JSON.stringify(t).replace(LL,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var zu=Object.assign,BL=Symbol.for("react.element"),XE=Symbol.for("react.portal"),$E=Symbol.for("react.fragment"),KE=Symbol.for("react.strict_mode"),JE=Symbol.for("react.profiler"),YE=Symbol.for("react.provider"),QE=Symbol.for("react.context"),qE=Symbol.for("react.forward_ref"),eT=Symbol.for("react.suspense"),tT=Symbol.for("react.suspense_list"),nT=Symbol.for("react.memo"),hC=Symbol.for("react.lazy"),FL=Symbol.for("react.scope"),UL=Symbol.for("react.debug_trace_mode"),VL=Symbol.for("react.legacy_hidden"),GL=Symbol.for("react.default_value"),Tb=Symbol.iterator;function Vv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case $E:return"Fragment";case XE:return"Portal";case JE:return"Profiler";case KE:return"StrictMode";case eT:return"Suspense";case tT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case QE:return(t.displayName||"Context")+".Consumer";case YE:return(t._context.displayName||"Context")+".Provider";case qE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nT:return e=t.displayName||null,e!==null?e:Vv(t.type)||"Memo";case hC:e=t._payload,t=t._init;try{return Vv(t(e))}catch{}}return null}var rT={};function Rb(t,e){if(t=t.contextTypes,!t)return rT;var n={},r;for(r in t)n[r]=e[r];return n}var Ga=null;function Qp(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(je(401))}else{if(n===null)throw Error(je(401));Qp(t,n)}e.context._currentValue=e.value}}function iT(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&iT(t)}function oT(t){var e=t.parent;e!==null&&oT(e),t.context._currentValue=t.value}function sT(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(je(402));t.depth===e.depth?Qp(t,e):sT(t,e)}function aT(t,e){var n=e.parent;if(n===null)throw Error(je(402));t.depth===n.depth?Qp(t,n):aT(t,n),e.context._currentValue=e.value}function np(t){var e=Ga;e!==t&&(e===null?oT(t):t===null?iT(e):e.depth===t.depth?Qp(e,t):e.depth>t.depth?sT(e,t):aT(e,t),Ga=t)}var xb={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function Pb(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=xb,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:zu({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&xb.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=zu({},o,a)):zu(o,a))}t.state=o}else o.queue=null}var WL={id:1,overflow:""};function Gv(t,e,n){var r=t.id;t=t.overflow;var i=32-af(r)-1;r&=~(1<<i),n+=1;var o=32-af(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-af(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var af=Math.clz32?Math.clz32:HL,jL=Math.log,ZL=Math.LN2;function HL(t){return t>>>=0,t===0?32:31-(jL(t)/ZL|0)|0}function zL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XL=typeof Object.is=="function"?Object.is:zL,ms=null,fC=null,cf=null,gt=null,Ru=!1,rp=!1,Id=0,Hs=null,qp=0;function _a(){if(ms===null)throw Error(je(321));return ms}function Nb(){if(0<qp)throw Error(je(312));return{memoizedState:null,queue:null,next:null}}function pC(){return gt===null?cf===null?(Ru=!1,cf=gt=Nb()):(Ru=!0,gt=cf):gt.next===null?(Ru=!1,gt=gt.next=Nb()):(Ru=!0,gt=gt.next),gt}function gC(){fC=ms=null,rp=!1,cf=null,qp=0,gt=Hs=null}function cT(t,e){return typeof e=="function"?e(t):e}function _b(t,e,n){if(ms=_a(),gt=pC(),Ru){var r=gt.queue;if(e=r.dispatch,Hs!==null&&(n=Hs.get(r),n!==void 0)){Hs.delete(r),r=gt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return gt.memoizedState=r,[r,e]}return[gt.memoizedState,e]}return t=t===cT?typeof e=="function"?e():e:n!==void 0?n(e):e,gt.memoizedState=t,t=gt.queue={last:null,dispatch:null},t=t.dispatch=$L.bind(null,ms,t),[gt.memoizedState,t]}function Ob(t,e){if(ms=_a(),gt=pC(),e=e===void 0?null:e,gt!==null){var n=gt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!XL(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),gt.memoizedState=[t,e],t}function $L(t,e,n){if(25<=qp)throw Error(je(301));if(t===ms)if(rp=!0,t={action:n,next:null},Hs===null&&(Hs=new Map),n=Hs.get(e),n===void 0)Hs.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function KL(){throw Error(je(394))}function Th(){}var Mb={readContext:function(t){return t._currentValue},useContext:function(t){return _a(),t._currentValue},useMemo:Ob,useReducer:_b,useRef:function(t){ms=_a(),gt=pC();var e=gt.memoizedState;return e===null?(t={current:t},gt.memoizedState=t):e},useState:function(t){return _b(cT,t)},useInsertionEffect:Th,useLayoutEffect:function(){},useCallback:function(t,e){return Ob(function(){return t},e)},useImperativeHandle:Th,useEffect:Th,useDebugValue:Th,useDeferredValue:function(t){return _a(),t},useTransition:function(){return _a(),[!1,KL]},useId:function(){var t=fC.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-af(t)-1)).toString(32)+e;var n=lf;if(n===null)throw Error(je(404));return e=Id++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return _a(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(je(407));return n()}},lf=null,om=WE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function JL(t){return console.error(t),null}function xu(){}function YL(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?JL:i,onAllReady:o===void 0?xu:o,onShellReady:s===void 0?xu:s,onShellError:a===void 0?xu:a,onFatalError:c===void 0?xu:c},n=ip(e,0,null,n,!1,!1),n.parentFlushed=!0,t=mC(e,t,null,n,u,rT,null,WL),l.push(t),e}function mC(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&dT(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function ip(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function Sd(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function op(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,ZE(t.destination,e)):(t.status=1,t.fatalError=e)}function Db(t,e,n,r,i){for(ms={},fC=e,Id=0,t=n(r,i);rp;)rp=!1,Id=0,qp+=1,gt=null,t=n(r,i);return gC(),t}function Lb(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(je(108,Vv(r)||"Unknown",a));r=zu({},s,n)}e.legacyContext=r,Lr(t,e,i),e.legacyContext=s}else Lr(t,e,i)}function Bb(t,e){if(t&&t.defaultProps){e=zu({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wv(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=Rb(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue:i),Pb(o,n,r,i),Lb(t,e,o,n)}else{o=Rb(n,e.legacyContext),i=Db(t,e,n,r,o);var s=Id!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)Pb(i,n,r,o),Lb(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=Gv(r,1,0);try{Lr(t,e,i)}finally{e.treeContext=r}}else Lr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=G2(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=D2(s,n,r),jv(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(W2,Ze(n),j2)}i.lastPushedText=!1}else{switch(n){case VL:case UL:case KE:case JE:case $E:Lr(t,e,r.children);return;case tT:Lr(t,e,r.children);return;case FL:throw Error(je(343));case eT:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=ip(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=ip(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(jv(t,e,r),l.lastPushedText&&l.textEmbedded&&l.chunks.push(dC),l.status=1,sp(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=Sd(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=mC(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case qE:if(r=Db(t,e,n.render,r,i),Id!==0){n=e.treeContext,e.treeContext=Gv(n,1,0);try{Lr(t,e,r)}finally{e.treeContext=n}}else Lr(t,e,r);return;case nT:n=n.type,r=Bb(n,r),Wv(t,e,n,r,i);return;case YE:if(i=r.children,n=n._context,r=r.value,o=n._currentValue,n._currentValue=r,s=Ga,Ga=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,Lr(t,e,i),t=Ga,t===null)throw Error(je(403));r=t.parentValue,t.context._currentValue=r===GL?t.context._defaultValue:r,t=Ga=t.parent,e.context=t;return;case QE:r=r.children,r=r(n._currentValue),Lr(t,e,r);return;case hC:i=n._init,n=i(n._payload),r=Bb(n,r),Wv(t,e,n,r,void 0);return}throw Error(je(130,n==null?n:typeof n,""))}}function Lr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case BL:Wv(t,e,n.type,n.props,n.ref);return;case XE:throw Error(je(257));case hC:var r=n._init;n=r(n._payload),Lr(t,e,n);return}if(Uv(n)){Fb(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=Tb&&n[Tb]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);Fb(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(je(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=Ib(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=Ib(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function Fb(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=Gv(o,r,i);try{jv(t,e,n[i])}finally{e.treeContext=o}}}function jv(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Lr(t,e,n)}catch(c){if(gC(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=ip(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=mC(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,np(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,np(o),c}}function QL(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,uT(this,e,t)}function lT(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(je(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return lT(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function sp(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&sp(t,n)}else t.completedSegments.push(e)}function uT(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(je(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=xu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&sp(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(QL,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(sp(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function dT(t){if(t.status!==2){var e=Ga,n=om.current;om.current=Mb;var r=lf;lf=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){np(s.context);try{Lr(a,s,s.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(dC),s.abortSet.delete(s),c.status=1,uT(a,s.blockedBoundary,c)}catch(p){if(gC(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=s.ping;p.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=p,h=Sd(a,d);if(u===null?op(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&vC(t,t.destination)}catch(p){Sd(t,p),op(t,p)}finally{lf=r,om.current=n,n===Mb&&np(e)}}}function Rh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,Ee(e,Z2),Ee(e,t.placeholderPrefix),t=Ze(r.toString(16)),Ee(e,t),kt(e,H2);case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)Ee(e,r[o]);i=eg(t,e,i)}for(;o<r.length-1;o++)Ee(e,r[o]);return o<r.length&&(i=kt(e,r[o])),i;default:throw Error(je(390))}}function eg(t,e,n){var r=n.boundary;if(r===null)return Rh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,kt(e,K2),Ee(e,Y2),r&&(Ee(e,q2),Ee(e,Ze(An(r))),Ee(e,Q2)),kt(e,eL),Rh(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;i=ge(i.boundaryPrefix+o.toString(16)),r=r.id=i,Eb(e,t.responseState,r),Rh(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),Eb(e,t.responseState,r.id),Rh(t,e,n);else{if(kt(e,z2),n=r.completedSegments,n.length!==1)throw Error(je(391));eg(t,e,n[0])}return kt(e,J2)}function Ub(t,e,n){return bL(e,t.responseState,n.formatContext,n.id),eg(t,e,n),wL(e,n.formatContext)}function Vb(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)hT(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,Ee(e,t.startInlineScript),t.sentCompleteBoundaryFunction?Ee(e,xL):(t.sentCompleteBoundaryFunction=!0,Ee(e,RL)),r===null)throw Error(je(395));return n=Ze(n.toString(16)),Ee(e,r),Ee(e,PL),Ee(e,t.segmentPrefix),Ee(e,n),kt(e,NL)}function hT(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(je(392));return Ub(t,e,r)}return Ub(t,e,r),t=t.responseState,Ee(e,t.startInlineScript),t.sentCompleteSegmentFunction?Ee(e,kL):(t.sentCompleteSegmentFunction=!0,Ee(e,AL)),Ee(e,t.segmentPrefix),i=Ze(i.toString(16)),Ee(e,i),Ee(e,EL),Ee(e,t.placeholderPrefix),Ee(e,i),kt(e,TL)}function vC(t,e){Mr=new Uint8Array(512),Dr=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){eg(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)Ee(e,r[n]);n<r.length&&kt(e,r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(Ee(r,a.startInlineScript),a.sentClientRenderFunction?Ee(r,OL):(a.sentClientRenderFunction=!0,Ee(r,_L)),c===null)throw Error(je(395));Ee(r,c),Ee(r,ML),(l||u||d)&&(Ee(r,rm),Ee(r,Ze(im(l||"")))),(u||d)&&(Ee(r,rm),Ee(r,Ze(im(u||"")))),d&&(Ee(r,rm),Ee(r,Ze(im(d)))),kt(r,DL)}i.splice(0,o);var h=t.completedBoundaries;for(o=0;o<h.length;o++)Vb(t,e,h[o]);h.splice(0,o),mb(e),Mr=new Uint8Array(512),Dr=0;var f=t.partialBoundaries;for(o=0;o<f.length;o++){var p=f[o];e:{i=t,s=e;var g=p.completedSegments;for(a=0;a<g.length;a++)if(!hT(i,s,p,g[a])){a++,g.splice(0,a);var C=!1;break e}g.splice(0,a),C=!0}if(!C){t.destination=null,o++,f.splice(0,o);return}}f.splice(0,o);var m=t.completedBoundaries;for(o=0;o<m.length;o++)Vb(t,e,m[o]);m.splice(0,o)}finally{mb(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function Gb(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return lT(r,t,e)}),n.clear(),t.destination!==null&&vC(t,t.destination)}catch(r){Sd(t,r),op(t,r)}}cC.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,o,s=new Promise(function(u,d){o=u,i=d}),a=YL(t,O2(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),M2(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,ZE(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{vC(a,d)}catch(h){Sd(a,h),op(a,h)}}},cancel:function(){Gb(a)}},{highWaterMark:0});u.allReady=s,n(u)},function(u){s.catch(function(){}),r(u)},i);if(e&&e.signal){var c=e.signal,l=function(){Gb(a,c.reason),c.removeEventListener("abort",l)};c.addEventListener("abort",l)}dT(a)})};cC.version="18.3.1";var Ol,fT;Ol=_l,fT=cC;ua.version=Ol.version;ua.renderToString=Ol.renderToString;ua.renderToStaticMarkup=Ol.renderToStaticMarkup;ua.renderToNodeStream=Ol.renderToNodeStream;ua.renderToStaticNodeStream=Ol.renderToStaticNodeStream;ua.renderToReadableStream=fT.renderToReadableStream;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries:pT,setPrototypeOf:Wb,isFrozen:qL,getPrototypeOf:eB,getOwnPropertyDescriptor:tB}=Object;let{freeze:ir,seal:oi,create:gT}=Object,{apply:Zv,construct:Hv}=typeof Reflect<"u"&&Reflect;ir||(ir=function(e){return e});oi||(oi=function(e){return e});Zv||(Zv=function(e,n,r){return e.apply(n,r)});Hv||(Hv=function(e,n){return new e(...n)});const xh=Zr(Array.prototype.forEach),jb=Zr(Array.prototype.pop),lu=Zr(Array.prototype.push),uf=Zr(String.prototype.toLowerCase),sm=Zr(String.prototype.toString),Zb=Zr(String.prototype.match),uu=Zr(String.prototype.replace),nB=Zr(String.prototype.indexOf),rB=Zr(String.prototype.trim),li=Zr(Object.prototype.hasOwnProperty),zn=Zr(RegExp.prototype.test),du=iB(TypeError);function Zr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Zv(t,e,r)}}function iB(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Hv(t,n)}}function He(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:uf;Wb&&Wb(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(qL(e)||(e[r]=o),i=o)}t[i]=!0}return t}function oB(t){for(let e=0;e<t.length;e++)li(t,e)||(t[e]=null);return t}function Ra(t){const e=gT(null);for(const[n,r]of pT(t))li(t,n)&&(Array.isArray(r)?e[n]=oB(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Ra(r):e[n]=r);return e}function hu(t,e){for(;t!==null;){const r=tB(t,e);if(r){if(r.get)return Zr(r.get);if(typeof r.value=="function")return Zr(r.value)}t=eB(t)}function n(){return null}return n}const Hb=ir(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),am=ir(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),cm=ir(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sB=ir(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),lm=ir(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),aB=ir(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zb=ir(["#text"]),Xb=ir(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),um=ir(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),$b=ir(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ph=ir(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cB=oi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),lB=oi(/<%[\w\W]*|[\w\W]*%>/gm),uB=oi(/\${[\w\W]*}/gm),dB=oi(/^data-[\-\w.\u00B7-\uFFFF]/),hB=oi(/^aria-[\-\w]+$/),mT=oi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),fB=oi(/^(?:\w+script|data):/i),pB=oi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vT=oi(/^html$/i),gB=oi(/^[a-z][.\w]*(-[.\w]+)+$/i);var Kb=Object.freeze({__proto__:null,MUSTACHE_EXPR:cB,ERB_EXPR:lB,TMPLIT_EXPR:uB,DATA_ATTR:dB,ARIA_ATTR:hB,IS_ALLOWED_URI:mT,IS_SCRIPT_OR_DATA:fB,ATTR_WHITESPACE:pB,DOCTYPE_NAME:vT,CUSTOM_ELEMENT:gB});const fu={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},mB=function(){return typeof window>"u"?null:window},vB=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function yT(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mB();const e=ue=>yT(ue);if(e.version="3.1.6",e.removed=[],!t||!t.document||t.document.nodeType!==fu.document)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:c,NodeFilter:l,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=t,p=c.prototype,g=hu(p,"cloneNode"),C=hu(p,"remove"),m=hu(p,"nextSibling"),v=hu(p,"childNodes"),S=hu(p,"parentNode");if(typeof s=="function"){const ue=n.createElement("template");ue.content&&ue.content.ownerDocument&&(n=ue.content.ownerDocument)}let E,w="";const{implementation:A,createNodeIterator:x,createDocumentFragment:T,getElementsByTagName:_}=n,{importNode:O}=r;let L={};e.isSupported=typeof pT=="function"&&typeof S=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:U,ERB_EXPR:z,TMPLIT_EXPR:Z,DATA_ATTR:J,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:re,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:Y}=Kb;let{IS_ALLOWED_URI:oe}=Kb,W=null;const se=He({},[...Hb,...am,...cm,...lm,...zb]);let we=null;const De=He({},[...Xb,...um,...$b,...Ph]);let de=Object.seal(gT(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),xe=null,rt=null,Ce=!0,tn=!0,vn=!1,Zn=!0,$e=!1,Zt=!0,Jt=!1,fe=!1,ve=!1,Ge=!1,We=!1,Oe=!1,Je=!0,Ut=!1;const _t="user-content-";let Hn=!0,yn=!1,Ot={},Ar=null;const k=He({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let y=null;const I=He({},["audio","video","img","source","image","track"]);let P=null;const B=He({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),j="http://www.w3.org/1998/Math/MathML",$="http://www.w3.org/2000/svg",_e="http://www.w3.org/1999/xhtml";let qe=_e,it=!1,ut=null;const et=He({},[j,$,_e],sm);let Gi=null;const ih=["application/xhtml+xml","text/html"],$l="text/html";let Mt=null,Wi=null;const Cg=n.createElement("form"),Kl=function(M){return M instanceof RegExp||M instanceof Function},Jl=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Wi&&Wi===M)){if((!M||typeof M!="object")&&(M={}),M=Ra(M),Gi=ih.indexOf(M.PARSER_MEDIA_TYPE)===-1?$l:M.PARSER_MEDIA_TYPE,Mt=Gi==="application/xhtml+xml"?sm:uf,W=li(M,"ALLOWED_TAGS")?He({},M.ALLOWED_TAGS,Mt):se,we=li(M,"ALLOWED_ATTR")?He({},M.ALLOWED_ATTR,Mt):De,ut=li(M,"ALLOWED_NAMESPACES")?He({},M.ALLOWED_NAMESPACES,sm):et,P=li(M,"ADD_URI_SAFE_ATTR")?He(Ra(B),M.ADD_URI_SAFE_ATTR,Mt):B,y=li(M,"ADD_DATA_URI_TAGS")?He(Ra(I),M.ADD_DATA_URI_TAGS,Mt):I,Ar=li(M,"FORBID_CONTENTS")?He({},M.FORBID_CONTENTS,Mt):k,xe=li(M,"FORBID_TAGS")?He({},M.FORBID_TAGS,Mt):{},rt=li(M,"FORBID_ATTR")?He({},M.FORBID_ATTR,Mt):{},Ot=li(M,"USE_PROFILES")?M.USE_PROFILES:!1,Ce=M.ALLOW_ARIA_ATTR!==!1,tn=M.ALLOW_DATA_ATTR!==!1,vn=M.ALLOW_UNKNOWN_PROTOCOLS||!1,Zn=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,$e=M.SAFE_FOR_TEMPLATES||!1,Zt=M.SAFE_FOR_XML!==!1,Jt=M.WHOLE_DOCUMENT||!1,Ge=M.RETURN_DOM||!1,We=M.RETURN_DOM_FRAGMENT||!1,Oe=M.RETURN_TRUSTED_TYPE||!1,ve=M.FORCE_BODY||!1,Je=M.SANITIZE_DOM!==!1,Ut=M.SANITIZE_NAMED_PROPS||!1,Hn=M.KEEP_CONTENT!==!1,yn=M.IN_PLACE||!1,oe=M.ALLOWED_URI_REGEXP||mT,qe=M.NAMESPACE||_e,de=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&Kl(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(de.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&Kl(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(de.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(de.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),$e&&(tn=!1),We&&(Ge=!0),Ot&&(W=He({},zb),we=[],Ot.html===!0&&(He(W,Hb),He(we,Xb)),Ot.svg===!0&&(He(W,am),He(we,um),He(we,Ph)),Ot.svgFilters===!0&&(He(W,cm),He(we,um),He(we,Ph)),Ot.mathMl===!0&&(He(W,lm),He(we,$b),He(we,Ph))),M.ADD_TAGS&&(W===se&&(W=Ra(W)),He(W,M.ADD_TAGS,Mt)),M.ADD_ATTR&&(we===De&&(we=Ra(we)),He(we,M.ADD_ATTR,Mt)),M.ADD_URI_SAFE_ATTR&&He(P,M.ADD_URI_SAFE_ATTR,Mt),M.FORBID_CONTENTS&&(Ar===k&&(Ar=Ra(Ar)),He(Ar,M.FORBID_CONTENTS,Mt)),Hn&&(W["#text"]=!0),Jt&&He(W,["html","head","body"]),W.table&&(He(W,["tbody"]),delete xe.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw du('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw du('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=M.TRUSTED_TYPES_POLICY,w=E.createHTML("")}else E===void 0&&(E=vB(f,i)),E!==null&&typeof w=="string"&&(w=E.createHTML(""));ir&&ir(M),Wi=M}},Yl=He({},["mi","mo","mn","ms","mtext"]),yc=He({},["foreignobject","annotation-xml"]),Cc=He({},["title","style","font","a","script"]),oh=He({},[...am,...cm,...sB]),sh=He({},[...lm,...aB]),D=function(M){let ie=S(M);(!ie||!ie.tagName)&&(ie={namespaceURI:qe,tagName:"template"});const he=uf(M.tagName),tt=uf(ie.tagName);return ut[M.namespaceURI]?M.namespaceURI===$?ie.namespaceURI===_e?he==="svg":ie.namespaceURI===j?he==="svg"&&(tt==="annotation-xml"||Yl[tt]):!!oh[he]:M.namespaceURI===j?ie.namespaceURI===_e?he==="math":ie.namespaceURI===$?he==="math"&&yc[tt]:!!sh[he]:M.namespaceURI===_e?ie.namespaceURI===$&&!yc[tt]||ie.namespaceURI===j&&!Yl[tt]?!1:!sh[he]&&(Cc[he]||!oh[he]):!!(Gi==="application/xhtml+xml"&&ut[M.namespaceURI]):!1},F=function(M){lu(e.removed,{element:M});try{S(M).removeChild(M)}catch{C(M)}},H=function(M,ie){try{lu(e.removed,{attribute:ie.getAttributeNode(M),from:ie})}catch{lu(e.removed,{attribute:null,from:ie})}if(ie.removeAttribute(M),M==="is"&&!we[M])if(Ge||We)try{F(ie)}catch{}else try{ie.setAttribute(M,"")}catch{}},q=function(M){let ie=null,he=null;if(ve)M="<remove></remove>"+M;else{const Rt=Zb(M,/^[\r\n\t ]+/);he=Rt&&Rt[0]}Gi==="application/xhtml+xml"&&qe===_e&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");const tt=E?E.createHTML(M):M;if(qe===_e)try{ie=new h().parseFromString(tt,Gi)}catch{}if(!ie||!ie.documentElement){ie=A.createDocument(qe,"template",null);try{ie.documentElement.innerHTML=it?w:tt}catch{}}const It=ie.body||ie.documentElement;return M&&he&&It.insertBefore(n.createTextNode(he),It.childNodes[0]||null),qe===_e?_.call(ie,Jt?"html":"body")[0]:Jt?ie.documentElement:It},me=function(M){return x.call(M.ownerDocument||M,M,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},ke=function(M){return M instanceof d&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof u)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},Pe=function(M){return typeof a=="function"&&M instanceof a},le=function(M,ie,he){L[M]&&xh(L[M],tt=>{tt.call(e,ie,he,Wi)})},Le=function(M){let ie=null;if(le("beforeSanitizeElements",M,null),ke(M))return F(M),!0;const he=Mt(M.nodeName);if(le("uponSanitizeElement",M,{tagName:he,allowedTags:W}),M.hasChildNodes()&&!Pe(M.firstElementChild)&&zn(/<[/\w]/g,M.innerHTML)&&zn(/<[/\w]/g,M.textContent)||M.nodeType===fu.progressingInstruction||Zt&&M.nodeType===fu.comment&&zn(/<[/\w]/g,M.data))return F(M),!0;if(!W[he]||xe[he]){if(!xe[he]&&Re(he)&&(de.tagNameCheck instanceof RegExp&&zn(de.tagNameCheck,he)||de.tagNameCheck instanceof Function&&de.tagNameCheck(he)))return!1;if(Hn&&!Ar[he]){const tt=S(M)||M.parentNode,It=v(M)||M.childNodes;if(It&&tt){const Rt=It.length;for(let Ht=Rt-1;Ht>=0;--Ht){const Cn=g(It[Ht],!0);Cn.__removalCount=(M.__removalCount||0)+1,tt.insertBefore(Cn,m(M))}}}return F(M),!0}return M instanceof c&&!D(M)||(he==="noscript"||he==="noembed"||he==="noframes")&&zn(/<\/no(script|embed|frames)/i,M.innerHTML)?(F(M),!0):($e&&M.nodeType===fu.text&&(ie=M.textContent,xh([U,z,Z],tt=>{ie=uu(ie,tt," ")}),M.textContent!==ie&&(lu(e.removed,{element:M.cloneNode()}),M.textContent=ie)),le("afterSanitizeElements",M,null),!1)},Te=function(M,ie,he){if(Je&&(ie==="id"||ie==="name")&&(he in n||he in Cg))return!1;if(!(tn&&!rt[ie]&&zn(J,ie))){if(!(Ce&&zn(ee,ie))){if(!we[ie]||rt[ie]){if(!(Re(M)&&(de.tagNameCheck instanceof RegExp&&zn(de.tagNameCheck,M)||de.tagNameCheck instanceof Function&&de.tagNameCheck(M))&&(de.attributeNameCheck instanceof RegExp&&zn(de.attributeNameCheck,ie)||de.attributeNameCheck instanceof Function&&de.attributeNameCheck(ie))||ie==="is"&&de.allowCustomizedBuiltInElements&&(de.tagNameCheck instanceof RegExp&&zn(de.tagNameCheck,he)||de.tagNameCheck instanceof Function&&de.tagNameCheck(he))))return!1}else if(!P[ie]){if(!zn(oe,uu(he,X,""))){if(!((ie==="src"||ie==="xlink:href"||ie==="href")&&M!=="script"&&nB(he,"data:")===0&&y[M])){if(!(vn&&!zn(re,uu(he,X,"")))){if(he)return!1}}}}}}return!0},Re=function(M){return M!=="annotation-xml"&&Zb(M,Y)},ot=function(M){le("beforeSanitizeAttributes",M,null);const{attributes:ie}=M;if(!ie)return;const he={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};let tt=ie.length;for(;tt--;){const It=ie[tt],{name:Rt,namespaceURI:Ht,value:Cn}=It,Mn=Mt(Rt);let Yt=Rt==="value"?Cn:rB(Cn);if(he.attrName=Mn,he.attrValue=Yt,he.keepAttr=!0,he.forceKeepAttr=void 0,le("uponSanitizeAttribute",M,he),Yt=he.attrValue,Zt&&zn(/((--!?|])>)|<\/(style|title)/i,Yt)){H(Rt,M);continue}if(he.forceKeepAttr||(H(Rt,M),!he.keepAttr))continue;if(!Zn&&zn(/\/>/i,Yt)){H(Rt,M);continue}$e&&xh([U,z,Z],Aa=>{Yt=uu(Yt,Aa," ")});const wa=Mt(M.nodeName);if(Te(wa,Mn,Yt)){if(Ut&&(Mn==="id"||Mn==="name")&&(H(Rt,M),Yt=_t+Yt),E&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!Ht)switch(f.getAttributeType(wa,Mn)){case"TrustedHTML":{Yt=E.createHTML(Yt);break}case"TrustedScriptURL":{Yt=E.createScriptURL(Yt);break}}try{Ht?M.setAttributeNS(Ht,Rt,Yt):M.setAttribute(Rt,Yt),ke(M)?F(M):jb(e.removed)}catch{}}}le("afterSanitizeAttributes",M,null)},st=function ue(M){let ie=null;const he=me(M);for(le("beforeSanitizeShadowDOM",M,null);ie=he.nextNode();)le("uponSanitizeShadowNode",ie,null),!Le(ie)&&(ie.content instanceof o&&ue(ie.content),ot(ie));le("afterSanitizeShadowDOM",M,null)};return e.sanitize=function(ue){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ie=null,he=null,tt=null,It=null;if(it=!ue,it&&(ue="<!-->"),typeof ue!="string"&&!Pe(ue))if(typeof ue.toString=="function"){if(ue=ue.toString(),typeof ue!="string")throw du("dirty is not a string, aborting")}else throw du("toString is not a function");if(!e.isSupported)return ue;if(fe||Jl(M),e.removed=[],typeof ue=="string"&&(yn=!1),yn){if(ue.nodeName){const Cn=Mt(ue.nodeName);if(!W[Cn]||xe[Cn])throw du("root node is forbidden and cannot be sanitized in-place")}}else if(ue instanceof a)ie=q("<!---->"),he=ie.ownerDocument.importNode(ue,!0),he.nodeType===fu.element&&he.nodeName==="BODY"||he.nodeName==="HTML"?ie=he:ie.appendChild(he);else{if(!Ge&&!$e&&!Jt&&ue.indexOf("<")===-1)return E&&Oe?E.createHTML(ue):ue;if(ie=q(ue),!ie)return Ge?null:Oe?w:""}ie&&ve&&F(ie.firstChild);const Rt=me(yn?ue:ie);for(;tt=Rt.nextNode();)Le(tt)||(tt.content instanceof o&&st(tt.content),ot(tt));if(yn)return ue;if(Ge){if(We)for(It=T.call(ie.ownerDocument);ie.firstChild;)It.appendChild(ie.firstChild);else It=ie;return(we.shadowroot||we.shadowrootmode)&&(It=O.call(r,It,!0)),It}let Ht=Jt?ie.outerHTML:ie.innerHTML;return Jt&&W["!doctype"]&&ie.ownerDocument&&ie.ownerDocument.doctype&&ie.ownerDocument.doctype.name&&zn(vT,ie.ownerDocument.doctype.name)&&(Ht="<!DOCTYPE "+ie.ownerDocument.doctype.name+`>
`+Ht),$e&&xh([U,z,Z],Cn=>{Ht=uu(Ht,Cn," ")}),E&&Oe?E.createHTML(Ht):Ht},e.setConfig=function(){let ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Jl(ue),fe=!0},e.clearConfig=function(){Wi=null,fe=!1},e.isValidAttribute=function(ue,M,ie){Wi||Jl({});const he=Mt(ue),tt=Mt(M);return Te(he,tt,ie)},e.addHook=function(ue,M){typeof M=="function"&&(L[ue]=L[ue]||[],lu(L[ue],M))},e.removeHook=function(ue){if(L[ue])return jb(L[ue])},e.removeHooks=function(ue){L[ue]&&(L[ue]=[])},e.removeAllHooks=function(){L={}},e}var yB=yT();const Oa=class Oa extends ct.Component{constructor(n){super(n);V(this,"outputRef",ct.createRef());V(this,"messageKey",0);V(this,"saveOutput",()=>{const n=this.state.output.map(r=>ua.renderToStaticMarkup(r));localStorage.setItem(Oa.LOCAL_STORAGE_KEY,JSON.stringify(n))});V(this,"loadOutput",()=>{const n=localStorage.getItem(Oa.LOCAL_STORAGE_KEY);return n?JSON.parse(n).map(i=>ct.createElement("div",{dangerouslySetInnerHTML:{__html:i}})):[]});V(this,"addCommand",n=>{this.addToOutput([K.jsx("span",{className:"command","aria-live":"off",children:n})],!1)});V(this,"addError",n=>this.addToOutput([K.jsxs("h2",{children:[" Error: ",n.message]})]));V(this,"handleConnected",()=>this.addToOutput([K.jsx("h2",{children:" Connected"})]));V(this,"handleDisconnected",()=>{this.addToOutput([K.jsx("h2",{children:" Disconnected"})]),this.setState({sidebarVisible:!1})});V(this,"handleUserList",n=>this.setState({sidebarVisible:!!n}));V(this,"handleScroll",()=>{this.isScrolledToBottom()&&this.setState({newLinesCount:0})});V(this,"isScrolledToBottom",()=>{const n=this.outputRef.current;return n?n.scrollHeight-n.scrollTop<=n.clientHeight+1:!1});V(this,"handleScrollToBottom",()=>{this.scrollToBottom(),this.setState({newLinesCount:0})});V(this,"scrollToBottom",()=>{const n=this.outputRef.current;n&&(n.scrollTop=n.scrollHeight)});V(this,"handleMessage",n=>{if(!n)return;const r=UD(n,this.handleExitClick);this.addToOutput(r)});V(this,"handleHtml",n=>{const r=yB.sanitize(n),i=K.jsx("div",{style:{whiteSpace:"normal"},dangerouslySetInnerHTML:{__html:r}});this.addToOutput([i])});V(this,"handleExitClick",n=>{this.props.client.sendCommand(n)});this.state={output:this.loadOutput(),sidebarVisible:!1,newLinesCount:0}}getSnapshotBeforeUpdate(n,r){if(this.outputRef.current){const i=this.outputRef.current;return i.scrollHeight-i.scrollTop<=i.clientHeight}return null}componentDidUpdate(n,r,i){i&&this.scrollToBottom(),this.state.output.length>r.output.length&&(this.isScrolledToBottom()?this.setState({newLinesCount:0}):this.setState({newLinesCount:this.state.newLinesCount+(this.state.output.length-r.output.length)})),this.saveOutput()}componentDidMount(){const{client:n}=this.props;n.on("message",this.handleMessage),n.on("html",this.handleHtml),n.on("connect",this.handleConnected),n.on("disconnect",this.handleDisconnected),n.on("error",this.addError),n.on("command",this.addCommand),n.on("userlist",this.handleUserList)}componentWillUnmount(){const{client:n}=this.props;n.removeListener("message",this.handleMessage),n.removeListener("html",this.handleHtml),n.removeListener("connect",this.handleConnected),n.removeListener("disconnect",this.handleDisconnected),n.removeListener("error",this.addError),n.removeListener("command",this.addCommand),n.removeListener("userlist",this.handleUserList)}sanitizeHtml(n){return new DOMParser().parseFromString(n,"text/html").body.textContent||""}addToOutput(n,r=!0){r&&n.forEach(i=>{if(ct.isValidElement(i)){const o=ua.renderToString(i),s=this.sanitizeHtml(o);$S(s)}else typeof i=="string"&&$S(i)}),this.setState(i=>{const o=n.map((c,l)=>K.jsx("div",{children:c},this.messageKey+l));return this.messageKey+=n.length,{output:[...i.output,...o].slice(-Oa.MAX_OUTPUT_LENGTH)}})}saveLog(){const n=this.outputRef.current;if(n){const r=n.innerHTML,i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=new Date,c=a.toLocaleDateString(),l=a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=`${document.title.replace(/\s+/g,"-")}-log-${c}-${l}.html`;s.download=d,s.href=o,s.click(),URL.revokeObjectURL(o),s.remove()}}clearLog(){this.setState({output:[]})}render(){var n="output";this.state.sidebarVisible&&(n+=" sidebar-visible");const r=`${this.state.newLinesCount} new ${this.state.newLinesCount===1?"message":"messages"}`;return K.jsxs("div",{ref:this.outputRef,className:n,onScroll:this.handleScroll,children:[this.state.output,this.state.newLinesCount>0&&K.jsx("div",{className:"new-lines-notification",onClick:this.handleScrollToBottom,role:"button","aria-live":"off",children:r})]})}};V(Oa,"MAX_OUTPUT_LENGTH",5e3),V(Oa,"LOCAL_STORAGE_KEY","outputLog");let zv=Oa;var CT={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function o(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function s(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var C=this._events[g],m=arguments.length,v,S;if(C.fn){switch(C.once&&this.removeListener(l,C.fn,void 0,!0),m){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,u),!0;case 3:return C.fn.call(C.context,u,d),!0;case 4:return C.fn.call(C.context,u,d,h),!0;case 5:return C.fn.call(C.context,u,d,h,f),!0;case 6:return C.fn.call(C.context,u,d,h,f,p),!0}for(S=1,v=new Array(m-1);S<m;S++)v[S-1]=arguments[S];C.fn.apply(C.context,v)}else{var E=C.length,w;for(S=0;S<E;S++)switch(C[S].once&&this.removeListener(l,C[S].fn,void 0,!0),m){case 1:C[S].fn.call(C[S].context);break;case 2:C[S].fn.call(C[S].context,u);break;case 3:C[S].fn.call(C[S].context,u,d);break;case 4:C[S].fn.call(C[S].context,u,d,h);break;default:if(!v)for(w=1,v=new Array(m-1);w<m;w++)v[w-1]=arguments[w];C[S].fn.apply(C[S].context,v)}}return!0},a.prototype.on=function(l,u,d){return o(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return o(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return s(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&s(this,f);else{for(var g=0,C=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&C.push(p[g]);C.length?this._events[f]=C.length===1?C[0]:C:s(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(CT);var CB=CT.exports;const IT=Fd(CB);var In={},tg={};tg.byteLength=bB;tg.toByteArray=AB;tg.fromByteArray=TB;var Ji=[],$r=[],IB=typeof Uint8Array<"u"?Uint8Array:Array,dm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var bc=0,SB=dm.length;bc<SB;++bc)Ji[bc]=dm[bc],$r[dm.charCodeAt(bc)]=bc;$r[45]=62;$r[95]=63;function ST(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function bB(t){var e=ST(t),n=e[0],r=e[1];return(n+r)*3/4-r}function wB(t,e,n){return(e+n)*3/4-n}function AB(t){var e,n=ST(t),r=n[0],i=n[1],o=new IB(wB(t,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=$r[t.charCodeAt(c)]<<18|$r[t.charCodeAt(c+1)]<<12|$r[t.charCodeAt(c+2)]<<6|$r[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=$r[t.charCodeAt(c)]<<2|$r[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=$r[t.charCodeAt(c)]<<10|$r[t.charCodeAt(c+1)]<<4|$r[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function kB(t){return Ji[t>>18&63]+Ji[t>>12&63]+Ji[t>>6&63]+Ji[t&63]}function EB(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(kB(r));return i.join("")}function TB(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(EB(t,s,s+o>a?a:s+o));return r===1?(e=t[n-1],i.push(Ji[e>>2]+Ji[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Ji[e>>10]+Ji[e>>4&63]+Ji[e<<2&63]+"=")),i.join("")}var yC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */yC.read=function(t,e,n,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=o*256+t[e+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=s*256+t[e+d],d+=h,u-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:(f?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-l}return(f?-1:1)*s*Math.pow(2,o-r)};yC.write=function(t,e,n,r,i,o){var s,a,c,l=o*8-i-1,u=(1<<l)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(e*c-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=a&255,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=s&255,f+=p,s/=256,l-=8);t[n+f-p]|=g*128};(function(t){const e=tg,n=yC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const k=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(k,y),k.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(k){if(k>i)throw new RangeError('The value "'+k+'" is invalid for option "size"');const y=new Uint8Array(k);return Object.setPrototypeOf(y,a.prototype),y}function a(k,y,I){if(typeof k=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(k)}return c(k,y,I)}a.poolSize=8192;function c(k,y,I){if(typeof k=="string")return h(k,y);if(ArrayBuffer.isView(k))return p(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(_t(k,ArrayBuffer)||k&&_t(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(_t(k,SharedArrayBuffer)||k&&_t(k.buffer,SharedArrayBuffer)))return g(k,y,I);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=k.valueOf&&k.valueOf();if(P!=null&&P!==k)return a.from(P,y,I);const B=C(k);if(B)return B;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return a.from(k[Symbol.toPrimitive]("string"),y,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}a.from=function(k,y,I){return c(k,y,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function u(k,y,I){return l(k),k<=0?s(k):y!==void 0?typeof I=="string"?s(k).fill(y,I):s(k).fill(y):s(k)}a.alloc=function(k,y,I){return u(k,y,I)};function d(k){return l(k),s(k<0?0:m(k)|0)}a.allocUnsafe=function(k){return d(k)},a.allocUnsafeSlow=function(k){return d(k)};function h(k,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const I=S(k,y)|0;let P=s(I);const B=P.write(k,y);return B!==I&&(P=P.slice(0,B)),P}function f(k){const y=k.length<0?0:m(k.length)|0,I=s(y);for(let P=0;P<y;P+=1)I[P]=k[P]&255;return I}function p(k){if(_t(k,Uint8Array)){const y=new Uint8Array(k);return g(y.buffer,y.byteOffset,y.byteLength)}return f(k)}function g(k,y,I){if(y<0||k.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<y+(I||0))throw new RangeError('"length" is outside of buffer bounds');let P;return y===void 0&&I===void 0?P=new Uint8Array(k):I===void 0?P=new Uint8Array(k,y):P=new Uint8Array(k,y,I),Object.setPrototypeOf(P,a.prototype),P}function C(k){if(a.isBuffer(k)){const y=m(k.length)|0,I=s(y);return I.length===0||k.copy(I,0,0,y),I}if(k.length!==void 0)return typeof k.length!="number"||Hn(k.length)?s(0):f(k);if(k.type==="Buffer"&&Array.isArray(k.data))return f(k.data)}function m(k){if(k>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return k|0}function v(k){return+k!=k&&(k=0),a.alloc(+k)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,I){if(_t(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),_t(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(y)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===I)return 0;let P=y.length,B=I.length;for(let j=0,$=Math.min(P,B);j<$;++j)if(y[j]!==I[j]){P=y[j],B=I[j];break}return P<B?-1:B<P?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,I){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let P;if(I===void 0)for(I=0,P=0;P<y.length;++P)I+=y[P].length;const B=a.allocUnsafe(I);let j=0;for(P=0;P<y.length;++P){let $=y[P];if(_t($,Uint8Array))j+$.length>B.length?(a.isBuffer($)||($=a.from($)),$.copy(B,j)):Uint8Array.prototype.set.call(B,$,j);else if(a.isBuffer($))$.copy(B,j);else throw new TypeError('"list" argument must be an Array of Buffers');j+=$.length}return B};function S(k,y){if(a.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||_t(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const I=k.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&I===0)return 0;let B=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return Ge(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return Je(k).length;default:if(B)return P?-1:Ge(k).length;y=(""+y).toLowerCase(),B=!0}}a.byteLength=S;function E(k,y,I){let P=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,y>>>=0,I<=y))return"";for(k||(k="utf8");;)switch(k){case"hex":return Y(this,y,I);case"utf8":case"utf-8":return Z(this,y,I);case"ascii":return re(this,y,I);case"latin1":case"binary":return X(this,y,I);case"base64":return z(this,y,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return oe(this,y,I);default:if(P)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),P=!0}}a.prototype._isBuffer=!0;function w(k,y,I){const P=k[y];k[y]=k[I],k[I]=P}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<y;I+=2)w(this,I,I+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<y;I+=4)w(this,I,I+3),w(this,I+1,I+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<y;I+=8)w(this,I,I+7),w(this,I+1,I+6),w(this,I+2,I+5),w(this,I+3,I+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?Z(this,0,y):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const I=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,I,P,B,j){if(_t(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(I===void 0&&(I=0),P===void 0&&(P=y?y.length:0),B===void 0&&(B=0),j===void 0&&(j=this.length),I<0||P>y.length||B<0||j>this.length)throw new RangeError("out of range index");if(B>=j&&I>=P)return 0;if(B>=j)return-1;if(I>=P)return 1;if(I>>>=0,P>>>=0,B>>>=0,j>>>=0,this===y)return 0;let $=j-B,_e=P-I;const qe=Math.min($,_e),it=this.slice(B,j),ut=y.slice(I,P);for(let et=0;et<qe;++et)if(it[et]!==ut[et]){$=it[et],_e=ut[et];break}return $<_e?-1:_e<$?1:0};function A(k,y,I,P,B){if(k.length===0)return-1;if(typeof I=="string"?(P=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,Hn(I)&&(I=B?0:k.length-1),I<0&&(I=k.length+I),I>=k.length){if(B)return-1;I=k.length-1}else if(I<0)if(B)I=0;else return-1;if(typeof y=="string"&&(y=a.from(y,P)),a.isBuffer(y))return y.length===0?-1:x(k,y,I,P,B);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?B?Uint8Array.prototype.indexOf.call(k,y,I):Uint8Array.prototype.lastIndexOf.call(k,y,I):x(k,[y],I,P,B);throw new TypeError("val must be string, number or Buffer")}function x(k,y,I,P,B){let j=1,$=k.length,_e=y.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(k.length<2||y.length<2)return-1;j=2,$/=2,_e/=2,I/=2}function qe(ut,et){return j===1?ut[et]:ut.readUInt16BE(et*j)}let it;if(B){let ut=-1;for(it=I;it<$;it++)if(qe(k,it)===qe(y,ut===-1?0:it-ut)){if(ut===-1&&(ut=it),it-ut+1===_e)return ut*j}else ut!==-1&&(it-=it-ut),ut=-1}else for(I+_e>$&&(I=$-_e),it=I;it>=0;it--){let ut=!0;for(let et=0;et<_e;et++)if(qe(k,it+et)!==qe(y,et)){ut=!1;break}if(ut)return it}return-1}a.prototype.includes=function(y,I,P){return this.indexOf(y,I,P)!==-1},a.prototype.indexOf=function(y,I,P){return A(this,y,I,P,!0)},a.prototype.lastIndexOf=function(y,I,P){return A(this,y,I,P,!1)};function T(k,y,I,P){I=Number(I)||0;const B=k.length-I;P?(P=Number(P),P>B&&(P=B)):P=B;const j=y.length;P>j/2&&(P=j/2);let $;for($=0;$<P;++$){const _e=parseInt(y.substr($*2,2),16);if(Hn(_e))return $;k[I+$]=_e}return $}function _(k,y,I,P){return Ut(Ge(y,k.length-I),k,I,P)}function O(k,y,I,P){return Ut(We(y),k,I,P)}function L(k,y,I,P){return Ut(Je(y),k,I,P)}function U(k,y,I,P){return Ut(Oe(y,k.length-I),k,I,P)}a.prototype.write=function(y,I,P,B){if(I===void 0)B="utf8",P=this.length,I=0;else if(P===void 0&&typeof I=="string")B=I,P=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(P)?(P=P>>>0,B===void 0&&(B="utf8")):(B=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const j=this.length-I;if((P===void 0||P>j)&&(P=j),y.length>0&&(P<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");B||(B="utf8");let $=!1;for(;;)switch(B){case"hex":return T(this,y,I,P);case"utf8":case"utf-8":return _(this,y,I,P);case"ascii":case"latin1":case"binary":return O(this,y,I,P);case"base64":return L(this,y,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,y,I,P);default:if($)throw new TypeError("Unknown encoding: "+B);B=(""+B).toLowerCase(),$=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(k,y,I){return y===0&&I===k.length?e.fromByteArray(k):e.fromByteArray(k.slice(y,I))}function Z(k,y,I){I=Math.min(k.length,I);const P=[];let B=y;for(;B<I;){const j=k[B];let $=null,_e=j>239?4:j>223?3:j>191?2:1;if(B+_e<=I){let qe,it,ut,et;switch(_e){case 1:j<128&&($=j);break;case 2:qe=k[B+1],(qe&192)===128&&(et=(j&31)<<6|qe&63,et>127&&($=et));break;case 3:qe=k[B+1],it=k[B+2],(qe&192)===128&&(it&192)===128&&(et=(j&15)<<12|(qe&63)<<6|it&63,et>2047&&(et<55296||et>57343)&&($=et));break;case 4:qe=k[B+1],it=k[B+2],ut=k[B+3],(qe&192)===128&&(it&192)===128&&(ut&192)===128&&(et=(j&15)<<18|(qe&63)<<12|(it&63)<<6|ut&63,et>65535&&et<1114112&&($=et))}}$===null?($=65533,_e=1):$>65535&&($-=65536,P.push($>>>10&1023|55296),$=56320|$&1023),P.push($),B+=_e}return ee(P)}const J=4096;function ee(k){const y=k.length;if(y<=J)return String.fromCharCode.apply(String,k);let I="",P=0;for(;P<y;)I+=String.fromCharCode.apply(String,k.slice(P,P+=J));return I}function re(k,y,I){let P="";I=Math.min(k.length,I);for(let B=y;B<I;++B)P+=String.fromCharCode(k[B]&127);return P}function X(k,y,I){let P="";I=Math.min(k.length,I);for(let B=y;B<I;++B)P+=String.fromCharCode(k[B]);return P}function Y(k,y,I){const P=k.length;(!y||y<0)&&(y=0),(!I||I<0||I>P)&&(I=P);let B="";for(let j=y;j<I;++j)B+=yn[k[j]];return B}function oe(k,y,I){const P=k.slice(y,I);let B="";for(let j=0;j<P.length-1;j+=2)B+=String.fromCharCode(P[j]+P[j+1]*256);return B}a.prototype.slice=function(y,I){const P=this.length;y=~~y,I=I===void 0?P:~~I,y<0?(y+=P,y<0&&(y=0)):y>P&&(y=P),I<0?(I+=P,I<0&&(I=0)):I>P&&(I=P),I<y&&(I=y);const B=this.subarray(y,I);return Object.setPrototypeOf(B,a.prototype),B};function W(k,y,I){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+y>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,I,P){y=y>>>0,I=I>>>0,P||W(y,I,this.length);let B=this[y],j=1,$=0;for(;++$<I&&(j*=256);)B+=this[y+$]*j;return B},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,I,P){y=y>>>0,I=I>>>0,P||W(y,I,this.length);let B=this[y+--I],j=1;for(;I>0&&(j*=256);)B+=this[y+--I]*j;return B},a.prototype.readUint8=a.prototype.readUInt8=function(y,I){return y=y>>>0,I||W(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,I){return y=y>>>0,I||W(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,I){return y=y>>>0,I||W(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,I){return y=y>>>0,I||W(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,I){return y=y>>>0,I||W(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=Ot(function(y){y=y>>>0,Zt(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&Jt(y,this.length-8);const B=I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,j=this[++y]+this[++y]*2**8+this[++y]*2**16+P*2**24;return BigInt(B)+(BigInt(j)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ot(function(y){y=y>>>0,Zt(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&Jt(y,this.length-8);const B=I*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],j=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+P;return(BigInt(B)<<BigInt(32))+BigInt(j)}),a.prototype.readIntLE=function(y,I,P){y=y>>>0,I=I>>>0,P||W(y,I,this.length);let B=this[y],j=1,$=0;for(;++$<I&&(j*=256);)B+=this[y+$]*j;return j*=128,B>=j&&(B-=Math.pow(2,8*I)),B},a.prototype.readIntBE=function(y,I,P){y=y>>>0,I=I>>>0,P||W(y,I,this.length);let B=I,j=1,$=this[y+--B];for(;B>0&&(j*=256);)$+=this[y+--B]*j;return j*=128,$>=j&&($-=Math.pow(2,8*I)),$},a.prototype.readInt8=function(y,I){return y=y>>>0,I||W(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,I){y=y>>>0,I||W(y,2,this.length);const P=this[y]|this[y+1]<<8;return P&32768?P|4294901760:P},a.prototype.readInt16BE=function(y,I){y=y>>>0,I||W(y,2,this.length);const P=this[y+1]|this[y]<<8;return P&32768?P|4294901760:P},a.prototype.readInt32LE=function(y,I){return y=y>>>0,I||W(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,I){return y=y>>>0,I||W(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=Ot(function(y){y=y>>>0,Zt(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&Jt(y,this.length-8);const B=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(P<<24);return(BigInt(B)<<BigInt(32))+BigInt(I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=Ot(function(y){y=y>>>0,Zt(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&Jt(y,this.length-8);const B=(I<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(B)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+P)}),a.prototype.readFloatLE=function(y,I){return y=y>>>0,I||W(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,I){return y=y>>>0,I||W(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,I){return y=y>>>0,I||W(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,I){return y=y>>>0,I||W(y,8,this.length),n.read(this,y,!1,52,8)};function se(k,y,I,P,B,j){if(!a.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>B||y<j)throw new RangeError('"value" argument is out of bounds');if(I+P>k.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,I,P,B){if(y=+y,I=I>>>0,P=P>>>0,!B){const _e=Math.pow(2,8*P)-1;se(this,y,I,P,_e,0)}let j=1,$=0;for(this[I]=y&255;++$<P&&(j*=256);)this[I+$]=y/j&255;return I+P},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,I,P,B){if(y=+y,I=I>>>0,P=P>>>0,!B){const _e=Math.pow(2,8*P)-1;se(this,y,I,P,_e,0)}let j=P-1,$=1;for(this[I+j]=y&255;--j>=0&&($*=256);)this[I+j]=y/$&255;return I+P},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,1,255,0),this[I]=y&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,2,65535,0),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,2,65535,0),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,4,4294967295,0),this[I+3]=y>>>24,this[I+2]=y>>>16,this[I+1]=y>>>8,this[I]=y&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,4,4294967295,0),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4};function we(k,y,I,P,B){$e(y,P,B,k,I,7);let j=Number(y&BigInt(4294967295));k[I++]=j,j=j>>8,k[I++]=j,j=j>>8,k[I++]=j,j=j>>8,k[I++]=j;let $=Number(y>>BigInt(32)&BigInt(4294967295));return k[I++]=$,$=$>>8,k[I++]=$,$=$>>8,k[I++]=$,$=$>>8,k[I++]=$,I}function De(k,y,I,P,B){$e(y,P,B,k,I,7);let j=Number(y&BigInt(4294967295));k[I+7]=j,j=j>>8,k[I+6]=j,j=j>>8,k[I+5]=j,j=j>>8,k[I+4]=j;let $=Number(y>>BigInt(32)&BigInt(4294967295));return k[I+3]=$,$=$>>8,k[I+2]=$,$=$>>8,k[I+1]=$,$=$>>8,k[I]=$,I+8}a.prototype.writeBigUInt64LE=Ot(function(y,I=0){return we(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ot(function(y,I=0){return De(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,I,P,B){if(y=+y,I=I>>>0,!B){const qe=Math.pow(2,8*P-1);se(this,y,I,P,qe-1,-qe)}let j=0,$=1,_e=0;for(this[I]=y&255;++j<P&&($*=256);)y<0&&_e===0&&this[I+j-1]!==0&&(_e=1),this[I+j]=(y/$>>0)-_e&255;return I+P},a.prototype.writeIntBE=function(y,I,P,B){if(y=+y,I=I>>>0,!B){const qe=Math.pow(2,8*P-1);se(this,y,I,P,qe-1,-qe)}let j=P-1,$=1,_e=0;for(this[I+j]=y&255;--j>=0&&($*=256);)y<0&&_e===0&&this[I+j+1]!==0&&(_e=1),this[I+j]=(y/$>>0)-_e&255;return I+P},a.prototype.writeInt8=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,1,127,-128),y<0&&(y=255+y+1),this[I]=y&255,I+1},a.prototype.writeInt16LE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,2,32767,-32768),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeInt16BE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,2,32767,-32768),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeInt32LE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,4,2147483647,-2147483648),this[I]=y&255,this[I+1]=y>>>8,this[I+2]=y>>>16,this[I+3]=y>>>24,I+4},a.prototype.writeInt32BE=function(y,I,P){return y=+y,I=I>>>0,P||se(this,y,I,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4},a.prototype.writeBigInt64LE=Ot(function(y,I=0){return we(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ot(function(y,I=0){return De(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(k,y,I,P,B,j){if(I+P>k.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function xe(k,y,I,P,B){return y=+y,I=I>>>0,B||de(k,y,I,4),n.write(k,y,I,P,23,4),I+4}a.prototype.writeFloatLE=function(y,I,P){return xe(this,y,I,!0,P)},a.prototype.writeFloatBE=function(y,I,P){return xe(this,y,I,!1,P)};function rt(k,y,I,P,B){return y=+y,I=I>>>0,B||de(k,y,I,8),n.write(k,y,I,P,52,8),I+8}a.prototype.writeDoubleLE=function(y,I,P){return rt(this,y,I,!0,P)},a.prototype.writeDoubleBE=function(y,I,P){return rt(this,y,I,!1,P)},a.prototype.copy=function(y,I,P,B){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(P||(P=0),!B&&B!==0&&(B=this.length),I>=y.length&&(I=y.length),I||(I=0),B>0&&B<P&&(B=P),B===P||y.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(B<0)throw new RangeError("sourceEnd out of bounds");B>this.length&&(B=this.length),y.length-I<B-P&&(B=y.length-I+P);const j=B-P;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,P,B):Uint8Array.prototype.set.call(y,this.subarray(P,B),I),j},a.prototype.fill=function(y,I,P,B){if(typeof y=="string"){if(typeof I=="string"?(B=I,I=0,P=this.length):typeof P=="string"&&(B=P,P=this.length),B!==void 0&&typeof B!="string")throw new TypeError("encoding must be a string");if(typeof B=="string"&&!a.isEncoding(B))throw new TypeError("Unknown encoding: "+B);if(y.length===1){const $=y.charCodeAt(0);(B==="utf8"&&$<128||B==="latin1")&&(y=$)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(I<0||this.length<I||this.length<P)throw new RangeError("Out of range index");if(P<=I)return this;I=I>>>0,P=P===void 0?this.length:P>>>0,y||(y=0);let j;if(typeof y=="number")for(j=I;j<P;++j)this[j]=y;else{const $=a.isBuffer(y)?y:a.from(y,B),_e=$.length;if(_e===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(j=0;j<P-I;++j)this[j+I]=$[j%_e]}return this};const Ce={};function tn(k,y,I){Ce[k]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(B){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:B,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}tn("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),tn("ERR_INVALID_ARG_TYPE",function(k,y){return`The "${k}" argument must be of type number. Received type ${typeof y}`},TypeError),tn("ERR_OUT_OF_RANGE",function(k,y,I){let P=`The value of "${k}" is out of range.`,B=I;return Number.isInteger(I)&&Math.abs(I)>2**32?B=vn(String(I)):typeof I=="bigint"&&(B=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(B=vn(B)),B+="n"),P+=` It must be ${y}. Received ${B}`,P},RangeError);function vn(k){let y="",I=k.length;const P=k[0]==="-"?1:0;for(;I>=P+4;I-=3)y=`_${k.slice(I-3,I)}${y}`;return`${k.slice(0,I)}${y}`}function Zn(k,y,I){Zt(y,"offset"),(k[y]===void 0||k[y+I]===void 0)&&Jt(y,k.length-(I+1))}function $e(k,y,I,P,B,j){if(k>I||k<y){const $=typeof y=="bigint"?"n":"";let _e;throw y===0||y===BigInt(0)?_e=`>= 0${$} and < 2${$} ** ${(j+1)*8}${$}`:_e=`>= -(2${$} ** ${(j+1)*8-1}${$}) and < 2 ** ${(j+1)*8-1}${$}`,new Ce.ERR_OUT_OF_RANGE("value",_e,k)}Zn(P,B,j)}function Zt(k,y){if(typeof k!="number")throw new Ce.ERR_INVALID_ARG_TYPE(y,"number",k)}function Jt(k,y,I){throw Math.floor(k)!==k?(Zt(k,I),new Ce.ERR_OUT_OF_RANGE("offset","an integer",k)):y<0?new Ce.ERR_BUFFER_OUT_OF_BOUNDS:new Ce.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,k)}const fe=/[^+/0-9A-Za-z-_]/g;function ve(k){if(k=k.split("=")[0],k=k.trim().replace(fe,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function Ge(k,y){y=y||1/0;let I;const P=k.length;let B=null;const j=[];for(let $=0;$<P;++$){if(I=k.charCodeAt($),I>55295&&I<57344){if(!B){if(I>56319){(y-=3)>-1&&j.push(239,191,189);continue}else if($+1===P){(y-=3)>-1&&j.push(239,191,189);continue}B=I;continue}if(I<56320){(y-=3)>-1&&j.push(239,191,189),B=I;continue}I=(B-55296<<10|I-56320)+65536}else B&&(y-=3)>-1&&j.push(239,191,189);if(B=null,I<128){if((y-=1)<0)break;j.push(I)}else if(I<2048){if((y-=2)<0)break;j.push(I>>6|192,I&63|128)}else if(I<65536){if((y-=3)<0)break;j.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((y-=4)<0)break;j.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return j}function We(k){const y=[];for(let I=0;I<k.length;++I)y.push(k.charCodeAt(I)&255);return y}function Oe(k,y){let I,P,B;const j=[];for(let $=0;$<k.length&&!((y-=2)<0);++$)I=k.charCodeAt($),P=I>>8,B=I%256,j.push(B),j.push(P);return j}function Je(k){return e.toByteArray(ve(k))}function Ut(k,y,I,P){let B;for(B=0;B<P&&!(B+I>=y.length||B>=k.length);++B)y[B+I]=k[B];return B}function _t(k,y){return k instanceof y||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===y.name}function Hn(k){return k!==k}const yn=function(){const k="0123456789abcdef",y=new Array(256);for(let I=0;I<16;++I){const P=I*16;for(let B=0;B<16;++B)y[P+B]=k[I]+k[B]}return y}();function Ot(k){return typeof BigInt>"u"?Ar:k}function Ar(){throw new Error("BigInt not supported")}})(In);var Pu=(t=>(t[t.BINARY=0]="BINARY",t[t.ECHO=1]="ECHO",t[t.RCP=2]="RCP",t[t.SUPPRESS_GO_AHEAD=3]="SUPPRESS_GO_AHEAD",t[t.APPROX_MESSAGE_SIZE_NEGOTIATION=4]="APPROX_MESSAGE_SIZE_NEGOTIATION",t[t.STATUS=5]="STATUS",t[t.TIMING_MARK=6]="TIMING_MARK",t[t.REMOTE_CONTROLLED_TRANSMISSION_ECHO=7]="REMOTE_CONTROLLED_TRANSMISSION_ECHO",t[t.OUTPUT_LINE_WIDTH=8]="OUTPUT_LINE_WIDTH",t[t.OUTPUT_PAGE_SIZE=9]="OUTPUT_PAGE_SIZE",t[t.OUTPUT_CARRIAGE_RETURN_DISPOSITION=10]="OUTPUT_CARRIAGE_RETURN_DISPOSITION",t[t.OUTPUT_HORIZONTAL_TAB_STOPS=11]="OUTPUT_HORIZONTAL_TAB_STOPS",t[t.OUTPUT_HORIZONTAL_TAB_DISPOSITION=12]="OUTPUT_HORIZONTAL_TAB_DISPOSITION",t[t.OUTPUT_FORMFEED_DISPOSITION=13]="OUTPUT_FORMFEED_DISPOSITION",t[t.OUTPUT_VERTICAL_TAB_STOPS=14]="OUTPUT_VERTICAL_TAB_STOPS",t[t.OUTPUT_VERTICAL_TAB_DISPOSITION=15]="OUTPUT_VERTICAL_TAB_DISPOSITION",t[t.OUTPUT_LINEFEED_DISPOSITION=16]="OUTPUT_LINEFEED_DISPOSITION",t[t.EXTENDED_ASCII=17]="EXTENDED_ASCII",t[t.LOGOUT=18]="LOGOUT",t[t.BYTE_MACRO=19]="BYTE_MACRO",t[t.DATA_ENTRY_TERMINAL=20]="DATA_ENTRY_TERMINAL",t[t.SUPDUP=21]="SUPDUP",t[t.SUPDUP_OUTPUT=22]="SUPDUP_OUTPUT",t[t.SEND_LOCATION=23]="SEND_LOCATION",t[t.TERMINAL_TYPE=24]="TERMINAL_TYPE",t[t.END_OF_RECORD=25]="END_OF_RECORD",t[t.TACACS_USER_IDENTIFICATION=26]="TACACS_USER_IDENTIFICATION",t[t.OUTPUT_MARKING=27]="OUTPUT_MARKING",t[t.TERMINAL_LOCATION_NUMBER=28]="TERMINAL_LOCATION_NUMBER",t[t.TELNET_3270_REGIME=29]="TELNET_3270_REGIME",t[t.X_3_PAD=30]="X_3_PAD",t[t.NAWS=31]="NAWS",t[t.TERMINAL_SPEED=32]="TERMINAL_SPEED",t[t.REMOTE_FLOW_CONTROL=33]="REMOTE_FLOW_CONTROL",t[t.LINEMODE=34]="LINEMODE",t[t.X_DISPLAY_LOCATION=35]="X_DISPLAY_LOCATION",t[t.ENVIRONMENT_OPTION=36]="ENVIRONMENT_OPTION",t[t.AUTHENTICATION_OPTION=37]="AUTHENTICATION_OPTION",t[t.ENCRYPTION_OPTION=38]="ENCRYPTION_OPTION",t[t.NEW_ENVIRONMENT_OPTION=39]="NEW_ENVIRONMENT_OPTION",t[t.TN3270E=40]="TN3270E",t[t.XAUTH=41]="XAUTH",t[t.CHARSET=42]="CHARSET",t[t.RSP=43]="RSP",t[t.COM_PORT_OPTION=44]="COM_PORT_OPTION",t[t.SUPPRESS_LOCAL_ECHO=45]="SUPPRESS_LOCAL_ECHO",t[t.START_TLS=46]="START_TLS",t[t.KERMIT=47]="KERMIT",t[t.SEND_URL=48]="SEND_URL",t[t.FORWARD_X=49]="FORWARD_X",t[t.PRAGMA_LOGON=138]="PRAGMA_LOGON",t[t.GMCP=201]="GMCP",t))(Pu||{}),Nu=(t=>(t[t.SE=240]="SE",t[t.NOP=241]="NOP",t[t.DM=242]="DM",t[t.BRK=243]="BRK",t[t.IP=244]="IP",t[t.AO=245]="AO",t[t.AYT=246]="AYT",t[t.EC=247]="EC",t[t.EL=248]="EL",t[t.GA=249]="GA",t[t.SB=250]="SB",t[t.WILL=251]="WILL",t[t.WONT=252]="WONT",t[t.DO=253]="DO",t[t.DONT=254]="DONT",t[t.IAC=255]="IAC",t))(Nu||{});class RB{constructor(e){V(this,"ws");this.ws=e}on(e,n){if(e==="data"){this.ws.onmessage=i=>{n(i.data)};return}const r="on"+e;this[r]=n}write(e){this.ws.send(e)}}class xB extends IT{constructor(n){super();V(this,"state");V(this,"buffer");V(this,"subBuffer");V(this,"iacSEBuffer",In.Buffer.from([255,240]));V(this,"negotiationByte",0);V(this,"stream");this.state=0,this.buffer=In.Buffer.alloc(0),this.subBuffer=In.Buffer.alloc(0),n&&n.on("data",r=>this.parse(r)),this.stream=n}parse(n){for(this.buffer=In.Buffer.concat([this.buffer,In.Buffer.from(n)]);this.buffer.length>0;){let r;switch(this.state){case 0:this.handleData();break;case 1:if(r=this.handleCommand(),r)return;break;case 2:if(r=this.handleSubnegotiation(),r)return;break;case 3:if(r=this.handleNegotiation(),r)return;break}}}handleData(){const n=this.buffer.indexOf(255);if(n===-1){this.emit("data",this.buffer),this.buffer=In.Buffer.alloc(0);return}this.emit("data",this.buffer.slice(0,n)),this.buffer=this.buffer.slice(n),this.state=1}handleCommand(){if(this.buffer.length<2)return!0;const n=this.buffer[1];switch(this.buffer=this.buffer.slice(2),n){case 241:this.emit("command",241),this.state=0;break;case 250:this.subBuffer=In.Buffer.alloc(0),this.state=2;break;case 253:case 254:case 251:case 252:this.negotiationByte=n,this.state=3;break;default:this.state=0;break}return!1}handleNegotiation(){if(this.buffer.length<1)return!0;const n=this.negotiationByte,r=this.buffer[0];return this.buffer=this.buffer.slice(1),this.emit("negotiation",n,r),this.state=0,!1}handleSubnegotiation(){let n=this.buffer.indexOf(this.iacSEBuffer);if(n===-1)return!0;this.state=0;let r=this.buffer.slice(0,n);return r[0]===201?this.handleGmcp(r.slice(1)):this.emit("subnegotiation",r),this.buffer=this.buffer.slice(n+2),!1}handleGmcp(n){const r=n.toString(),[i,o]=r.split(/ +(.+?)$/,2);this.emit("gmcp",i,o)}sendNegotiation(n,r){this.stream.write(In.Buffer.from([255,n,r]))}sendGmcp(n,r){const i=n+" "+r,o=In.Buffer.from(i),s=In.Buffer.concat([In.Buffer.from([255,250]),In.Buffer.from([201]),o,this.iacSEBuffer]);this.stream.write(s)}sendTerminalType(n){const r=In.Buffer.from(n),i=In.Buffer.concat([In.Buffer.from([255,250]),In.Buffer.from([24,0]),r,this.iacSEBuffer]);this.stream.write(i)}}function PB({onlyFirst:t=!1}={}){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}const NB=PB();function _B(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(NB,"")}class Io{constructor(e){V(this,"packageName");V(this,"packageVersion",1);V(this,"client");this.client=e}sendData(e,n){this.client.sendGmcp(this.packageName+"."+e,JSON.stringify(n))}shutdown(){}}class OB extends Io{constructor(){super(...arguments);V(this,"packageName","Auth.Autologin")}handleToken(n){localStorage.setItem("LoginRefreshToken",n)}sendLogin(){var n=localStorage.getItem("LoginRefreshToken");n&&this.sendData("Login",n)}}class MB extends Io{constructor(){super(...arguments);V(this,"packageName","Char")}handleName(n){this.client.worldData.playerId=n.name,this.client.worldData.playerName=n.fullname,this.client.emit("statustext",`Logged in as ${n.fullname}`)}sendLogin(n,r){this.client.sendGmcp("Char.Login",JSON.stringify({name:n,password:r}))}}class DB extends Io{constructor(n){super(n);V(this,"packageName","Client.Keystrokes");V(this,"bindings",[]);V(this,"boundKeyUpHandler");document.addEventListener("keydown",r=>this.handleKeydown(r))}handleKeydown(n){const r=this.findBinding(n);if(r){n.preventDefault();const i=this.client.getInput(),o=this.parseCommand(r.command,i);r.autosend?this.client.sendCommand(o):this.placeInInputField(o)}}shutdown(){document.removeEventListener("keydown",n=>this.handleKeydown(n))}findBinding(n){try{return this.bindings.find(r=>{if(r.key.toLowerCase()!==n.key.toLowerCase())return!1;const i=new Set([n.altKey&&"Alt",n.ctrlKey&&"Control",n.shiftKey&&"Shift",n.metaKey&&"Meta"].filter(Boolean));return r.modifiers&&r.modifiers.every(o=>i.has(o))})}catch(r){console.error("Error in finding key binding: ",r);return}}parseCommand(n,r){const i=r.trim().split(/\s+/);return n.replace(/%(\d+|\*)/g,(o,s)=>{if(s==="*")return r;const a=parseInt(s,10)-1;return a>=0&&a<i.length?i[a]:o})}placeInInputField(n){this.client.setInput(n)}bindKey(n){const r={key:n.key,modifiers:n.modifiers,command:n.command,autosend:n.autosend};this.bindings.push(r)}unbindKey(n){this.bindings=this.bindings.filter(r=>!(r.key===n.key&&r.modifiers.length===n.modifiers.length&&r.modifiers.every(i=>n.modifiers.includes(i))))}unbindAll(){this.bindings=[]}handleBind(n){this.bindKey(n)}handleUnbind(n){this.unbindKey(n)}handleBind_all(n){this.bindings=n.bindings.map(r=>({...r}))}listBindings(){return[...this.bindings]}}const Jb=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),Yb=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),Xv=(t,e)=>({startTime:e,type:"setValue",value:t}),bT=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),wT=(t,e,{startTime:n,target:r,timeConstant:i})=>r+(e-r)*Math.exp((n-t)/i),Gc=t=>t.type==="exponentialRampToValue",ap=t=>t.type==="linearRampToValue",Fs=t=>Gc(t)||ap(t),CC=t=>t.type==="setValue",xo=t=>t.type==="setValueCurve",cp=(t,e,n,r)=>{const i=t[e];return i===void 0?r:Fs(i)||CC(i)?i.value:xo(i)?i.values[i.values.length-1]:wT(n,cp(t,e-1,i.startTime,r),i)},Qb=(t,e,n,r,i)=>n===void 0?[r.insertTime,i]:Fs(n)?[n.endTime,n.value]:CC(n)?[n.startTime,n.value]:xo(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,cp(t,e-1,n.startTime,i)],$v=t=>t.type==="cancelAndHold",Kv=t=>t.type==="cancelScheduledValues",Ts=t=>$v(t)||Kv(t)?t.cancelTime:Gc(t)||ap(t)?t.endTime:t.startTime,qb=(t,e,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(r-e)):0,ew=(t,e,n,{endTime:r,value:i})=>n+(t-e)/(r-e)*(i-n),LB=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},BB=(t,{duration:e,startTime:n,values:r})=>{const i=(t-n)/e*(r.length-1);return LB(r,i)},Nh=t=>t.type==="setTarget";class FB{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Ts(e);if($v(e)||Kv(e)){const r=this._automationEvents.findIndex(o=>Kv(e)&&xo(o)?o.startTime+o.duration>=n:Ts(o)>=n),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),$v(e)){const o=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&Fs(i)){if(o!==void 0&&Nh(o))throw new Error("The internal list is malformed.");const s=o===void 0?i.insertTime:xo(o)?o.startTime+o.duration:Ts(o),a=o===void 0?this._defaultValue:xo(o)?o.values[o.values.length-1]:o.value,c=Gc(i)?qb(n,s,a,i):ew(n,s,a,i),l=Gc(i)?Jb(c,n,this._currenTime):Yb(c,n,this._currenTime);this._automationEvents.push(l)}if(o!==void 0&&Nh(o)&&this._automationEvents.push(Xv(this.getValue(n),n)),o!==void 0&&xo(o)&&o.startTime+o.duration>n){const s=n-o.startTime,a=(o.values.length-1)/o.duration,c=Math.max(2,1+Math.ceil(s*a)),l=s/(c-1)*a,u=o.values.slice(0,c);if(l<1)for(let d=1;d<c;d+=1){const h=l*d%1;u[d]=o.values[d-1]*(1-h)+o.values[d]*h}this._automationEvents[this._automationEvents.length-1]=bT(u,o.startTime,s)}}}else{const r=this._automationEvents.findIndex(s=>Ts(s)>n),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&xo(i)&&Ts(i)+i.duration>n)return!1;const o=Gc(e)?Jb(e.value,e.endTime,this._currenTime):ap(e)?Yb(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(o);else{if(xo(e)&&n+e.duration>Ts(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,o)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Ts(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),i=r[0];Nh(i)&&r.unshift(Xv(cp(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(s=>Ts(s)>e),r=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,o=this._automationEvents[i];if(o!==void 0&&Nh(o)&&(r===void 0||!Fs(r)||r.insertTime>e))return wT(e,cp(this._automationEvents,i-1,o.startTime,this._defaultValue),o);if(o!==void 0&&CC(o)&&(r===void 0||!Fs(r)))return o.value;if(o!==void 0&&xo(o)&&(r===void 0||!Fs(r)||o.startTime+o.duration>e))return e<o.startTime+o.duration?BB(e,o):o.values[o.values.length-1];if(o!==void 0&&Fs(o)&&(r===void 0||!Fs(r)))return o.value;if(r!==void 0&&Gc(r)){const[s,a]=Qb(this._automationEvents,i,o,r,this._defaultValue);return qb(e,s,a,r)}if(r!==void 0&&ap(r)){const[s,a]=Qb(this._automationEvents,i,o,r,this._defaultValue);return ew(e,s,a,r)}return this._defaultValue}}const UB=t=>({cancelTime:t,type:"cancelAndHold"}),VB=t=>({cancelTime:t,type:"cancelScheduledValues"}),GB=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),WB=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),jB=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),ZB=()=>new DOMException("","AbortError"),HB=t=>(e,n,[r,i,o],s)=>{t(e[i],[n,r,o],a=>a[0]===n&&a[1]===r,s)},zB=t=>(e,n,r)=>{const i=[];for(let o=0;o<r.numberOfInputs;o+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},XB=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Cl=new WeakSet,AT=new WeakMap,kT=new WeakMap,ET=new WeakMap,TT=new WeakMap,RT=new WeakMap,xT=new WeakMap,Jv=new WeakMap,Yv=new WeakMap,Qv=new WeakMap,PT={construct(){return PT}},$B=t=>{try{const e=new Proxy(t,PT);new e}catch{return!1}return!0},tw=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,nw=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),i=r.match(tw);for(;i!==null;){const o=i[1].slice(1,-1),s=i[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());n.push(s),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(tw)}return[n.join(";"),r]},rw=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},iw=t=>{if(!$B(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},KB=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>{let f=0;return(p,g,C={credentials:"omit"})=>{const m=u.get(p);if(m!==void 0&&m.has(g))return Promise.resolve();const v=l.get(p);if(v!==void 0){const w=v.get(g);if(w!==void 0)return w}const S=o(p),E=S.audioWorklet===void 0?i(g).then(([w,A])=>{const[x,T]=nw(w,A),_=`${x};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return n(_)}).then(()=>{const w=h._AWGS.pop();if(w===void 0)throw new SyntaxError;r(S.currentTime,S.sampleRate,()=>w(class{},void 0,(A,x)=>{if(A.trim()==="")throw e();const T=Yv.get(S);if(T!==void 0){if(T.has(A))throw e();iw(x),rw(x.parameterDescriptors),T.set(A,x)}else iw(x),rw(x.parameterDescriptors),Yv.set(S,new Map([[A,x]]))},S.sampleRate,void 0,void 0))}):Promise.all([i(g),Promise.resolve(t(d,d))]).then(([[w,A],x])=>{const T=f+1;f=T;const[_,O]=nw(w,A),Z=`${_};((AudioWorkletProcessor,registerProcessor)=>{${O}
})(${x?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${x?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${x?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,J=new Blob([Z],{type:"application/javascript; charset=utf-8"}),ee=URL.createObjectURL(J);return S.audioWorklet.addModule(ee,C).then(()=>{if(a(S))return S;const re=s(S);return re.audioWorklet.addModule(ee,C).then(()=>re)}).then(re=>{if(c===null)throw new SyntaxError;try{new c(re,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(ee))});return v===void 0?l.set(p,new Map([[g,E]])):v.set(g,E),E.then(()=>{const w=u.get(p);w===void 0?u.set(p,new Set([g])):w.add(g)}).finally(()=>{const w=l.get(p);w!==void 0&&w.delete(g)}),E}},Di=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},ng=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},NT=(t,e,n,r)=>{const i=Di(t,e),o=ng(i,s=>s[0]===n&&s[1]===r);return i.size===0&&t.delete(e),o},zd=t=>Di(xT,t),Il=t=>{if(Cl.has(t))throw new Error("The AudioNode is already stored.");Cl.add(t),zd(t).forEach(e=>e(!0))},_T=t=>"port"in t,Xd=t=>{if(!Cl.has(t))throw new Error("The AudioNode is not stored.");Cl.delete(t),zd(t).forEach(e=>e(!1))},qv=(t,e)=>{!_T(t)&&e.every(n=>n.size===0)&&Xd(t)},JB=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>{const f=new WeakMap;return(p,g,C,m,v)=>{const{activeInputs:S,passiveInputs:E}=o(g),{outputs:w}=o(p),A=a(p),x=T=>{const _=c(g),O=c(p);if(T){const L=NT(E,p,C,m);t(S,p,L,!1),!v&&!d(p)&&n(O,_,C,m),h(g)&&Il(g)}else{const L=r(S,p,C,m);e(E,m,L,!1),!v&&!d(p)&&i(O,_,C,m);const U=s(g);if(U===0)u(g)&&qv(g,S);else{const z=f.get(g);z!==void 0&&clearTimeout(z),f.set(g,setTimeout(()=>{u(g)&&qv(g,S)},U*1e3))}}};return l(w,[g,C,m],T=>T[0]===g&&T[1]===C&&T[2]===m,!0)?(A.add(x),u(p)?t(S,p,[C,m,x],!0):e(E,m,[p,C,x],!0),!0):!1}},YB=t=>(e,n,[r,i,o],s)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,n,o]])):t(a,[i,n,o],c=>c[0]===i&&c[1]===n,s)},QB=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)},qB=t=>(e,n)=>{t(e).add(n)},eF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},tF=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...eF,...c},d=r(l,u),h=o(l)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},jn=(t,e)=>t.context===e,nF=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!jn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},e0=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},So=()=>new DOMException("","IndexSizeError"),OT=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?So():r}})(t.getChannelData)},rF={numberOfChannels:1},iF=(t,e,n,r,i,o,s,a)=>{let c=null;return class MT{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}={...rF,...u};c===null&&(c=new i(1,1,44100));const p=r!==null&&e(o,o)?new r({length:d,numberOfChannels:h,sampleRate:f}):c.createBuffer(h,d,f);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(s(p),OT(p)):e(e0,()=>e0(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===MT.prototype||t.has(u)}}},pr=-34028234663852886e22,Yn=-pr,cs=t=>Cl.has(t),oF={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},sF=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...oF,...u},f=i(d,h),p=s(d),g=p?e():null;super(l,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,p,f.playbackRate,Yn,pr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[l,u]:[l,u,d]),this.context.state!=="closed"){Il(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),cs(this)&&Xd(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},aF=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const h=jn(d,u);if(!h){const f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,f),s!==null&&d.start(...s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,l.playbackRate,d.playbackRate):await r(u,l.playbackRate,d.playbackRate),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},cF=t=>"playbackRate"in t,lF=t=>"frequency"in t&&"gain"in t,uF=t=>"offset"in t,dF=t=>!("frequency"in t)&&"gain"in t,hF=t=>"detune"in t&&"frequency"in t&&!("gain"in t),fF=t=>"pan"in t,er=t=>Di(AT,t),$d=t=>Di(ET,t),t0=(t,e)=>{const{activeInputs:n}=er(t);n.forEach(i=>i.forEach(([o])=>{e.includes(t)||t0(o,[...e,t])}));const r=cF(t)?[t.playbackRate]:_T(t)?Array.from(t.parameters.values()):lF(t)?[t.Q,t.detune,t.frequency,t.gain]:uF(t)?[t.offset]:dF(t)?[t.gain]:hF(t)?[t.detune,t.frequency]:fF(t)?[t.pan]:[];for(const i of r){const o=$d(i);o!==void 0&&o.activeInputs.forEach(([s])=>t0(s,e))}cs(t)&&Xd(t)},pF=t=>{t0(t.destination,[])},gF=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),mF=(t,e,n,r,i,o,s,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!gF(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),pF(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(u){return new s(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},vF=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h=s(d),f=i(d,u,h),p=h?e(a):null;super(l,!1,f,p),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},yF=t=>{const e=new WeakMap,n=async(r,i)=>{const o=i.destination;return e.set(i,o),await t(r,i,o),o};return{render(r,i){const o=e.get(i);return o!==void 0?Promise.resolve(o):n(r,i)}}},CF=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=l.listener,d=()=>{const w=new Float32Array(1),A=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),x=s(l);let T=!1,_=[0,0,-1,0,1,0],O=[0,0,0];const L=()=>{if(T)return;T=!0;const J=r(l,256,9,0);J.onaudioprocess=({inputBuffer:ee})=>{const re=[o(ee,w,0),o(ee,w,1),o(ee,w,2),o(ee,w,3),o(ee,w,4),o(ee,w,5)];re.some((Y,oe)=>Y!==_[oe])&&(u.setOrientation(...re),_=re);const X=[o(ee,w,6),o(ee,w,7),o(ee,w,8)];X.some((Y,oe)=>Y!==O[oe])&&(u.setPosition(...X),O=X)},A.connect(J)},U=J=>ee=>{ee!==_[J]&&(_[J]=ee,u.setOrientation(..._))},z=J=>ee=>{ee!==O[J]&&(O[J]=ee,u.setPosition(...O))},Z=(J,ee,re)=>{const X=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee});X.connect(A,0,J),X.start(),Object.defineProperty(X.offset,"defaultValue",{get(){return ee}});const Y=t({context:c},x,X.offset,Yn,pr);return a(Y,"value",oe=>()=>oe.call(Y),oe=>W=>{try{oe.call(Y,W)}catch(se){if(se.code!==9)throw se}L(),x&&re(W)}),Y.cancelAndHoldAtTime=(oe=>x?()=>{throw i()}:(...W)=>{const se=oe.apply(Y,W);return L(),se})(Y.cancelAndHoldAtTime),Y.cancelScheduledValues=(oe=>x?()=>{throw i()}:(...W)=>{const se=oe.apply(Y,W);return L(),se})(Y.cancelScheduledValues),Y.exponentialRampToValueAtTime=(oe=>x?()=>{throw i()}:(...W)=>{const se=oe.apply(Y,W);return L(),se})(Y.exponentialRampToValueAtTime),Y.linearRampToValueAtTime=(oe=>x?()=>{throw i()}:(...W)=>{const se=oe.apply(Y,W);return L(),se})(Y.linearRampToValueAtTime),Y.setTargetAtTime=(oe=>x?()=>{throw i()}:(...W)=>{const se=oe.apply(Y,W);return L(),se})(Y.setTargetAtTime),Y.setValueAtTime=(oe=>x?()=>{throw i()}:(...W)=>{const se=oe.apply(Y,W);return L(),se})(Y.setValueAtTime),Y.setValueCurveAtTime=(oe=>x?()=>{throw i()}:(...W)=>{const se=oe.apply(Y,W);return L(),se})(Y.setValueCurveAtTime),Y};return{forwardX:Z(0,0,U(0)),forwardY:Z(1,0,U(1)),forwardZ:Z(2,-1,U(2)),positionX:Z(6,0,z(0)),positionY:Z(7,0,z(1)),positionZ:Z(8,0,z(2)),upX:Z(3,0,U(3)),upY:Z(4,1,U(4)),upZ:Z(5,0,U(5))}},{forwardX:h,forwardY:f,forwardZ:p,positionX:g,positionY:C,positionZ:m,upX:v,upY:S,upZ:E}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return p},get positionX(){return g},get positionY(){return C},get positionZ(){return m},get upX(){return v},get upY(){return S},get upZ(){return E}}},lp=t=>"context"in t,Kd=t=>lp(t[0]),fc=(t,e,n,r)=>{for(const i of t)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},ow=(t,e,[n,r],i)=>{fc(t,[e,n,r],o=>o[0]===e&&o[1]===n,i)},sw=(t,[e,n,r],i)=>{const o=t.get(e);o===void 0?t.set(e,new Set([[n,r]])):fc(o,[n,r],s=>s[0]===n,i)},Ml=t=>"inputs"in t,up=(t,e,n,r)=>{if(Ml(e)){const i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},DT=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},IF=(t,e,n)=>ng(t,r=>r[0]===e&&r[1]===n),LT=(t,e)=>{if(!zd(t).delete(e))throw new Error("Missing the expected event listener.")},BT=(t,e,n)=>{const r=Di(t,e),i=ng(r,o=>o[0]===n);return r.size===0&&t.delete(e),i},dp=(t,e,n,r)=>{Ml(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Tt=t=>Di(kT,t),bd=t=>Di(TT,t),nc=t=>Jv.has(t),df=t=>!Cl.has(t),aw=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),i=t.createGain(),o=t.createBuffer(1,2,44100),s=o.getChannelData(0);s[0]=1,s[1]=1;const a=t.createBufferSource();a.buffer=o,a.loop=!0,a.connect(r).connect(t.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),hm=(t,e)=>{const n=new Map;for(const r of t)for(const i of r){const o=n.get(i);n.set(i,o===void 0?1:o+1)}n.forEach((r,i)=>e(i,r))},hp=t=>"context"in t,SF=t=>{const e=new Map;t.connect=(n=>(r,i=0,o=0)=>{const s=hp(r)?n(r,i,o):n(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:o,output:i}]):a.every(c=>c.input!==o||c.output!==i)&&a.push({input:o,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(r,i,o)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[s,a]of e){const c=a.filter(l=>l.output!==r);c.length===0?e.delete(s):e.set(s,c)}else if(e.has(r))if(i===void 0)e.delete(r);else{const s=e.get(r);if(s!==void 0){const a=s.filter(c=>c.output!==i&&(c.input!==o||o===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[s,a]of e)a.forEach(c=>{hp(s)?t.connect(s,c.output,c.input):t.connect(s,c.output)})})(t.disconnect)},bF=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=$d(e),{outputs:s}=er(t),a=zd(t),c=l=>{const u=Tt(t),d=bd(e);if(l){const h=BT(o,t,n);ow(i,t,h,!1),!r&&!nc(t)&&u.connect(d,n)}else{const h=IF(i,t,n);sw(o,h,!1),!r&&!nc(t)&&u.disconnect(d,n)}};return fc(s,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),cs(t)?ow(i,t,[n,c],!0):sw(o,[t,n,c],!0),!0):!1},wF=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=er(e),s=DT(i[r],t,n);return s===null?[NT(o,t,n,r)[2],!1]:[s[2],!0]},AF=(t,e,n)=>{const{activeInputs:r,passiveInputs:i}=$d(e),o=DT(r,t,n);return o===null?[BT(i,t,n)[1],!1]:[o[2],!0]},IC=(t,e,n,r,i)=>{const[o,s]=wF(t,n,r,i);if(o!==null&&(LT(t,o),s&&!e&&!nc(t)&&dp(Tt(t),Tt(n),r,i)),cs(n)){const{activeInputs:a}=er(n);qv(n,a)}},SC=(t,e,n,r)=>{const[i,o]=AF(t,n,r);i!==null&&(LT(t,i),o&&!e&&!nc(t)&&Tt(t).disconnect(bd(n),r))},kF=(t,e)=>{const n=er(t),r=[];for(const i of n.outputs)Kd(i)?IC(t,e,...i):SC(t,e,...i),r.push(i[0]);return n.outputs.clear(),r},EF=(t,e,n)=>{const r=er(t),i=[];for(const o of r.outputs)o[1]===n&&(Kd(o)?IC(t,e,...o):SC(t,e,...o),i.push(o[0]),r.outputs.delete(o));return i},TF=(t,e,n,r,i)=>{const o=er(t);return Array.from(o.outputs).filter(s=>s[0]===n&&(r===void 0||s[1]===r)&&(i===void 0||s[2]===i)).map(s=>(Kd(s)?IC(t,e,...s):SC(t,e,...s),o.outputs.delete(s),s[0]))},RF=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g)=>class extends l{constructor(m,v,S,E){super(S),this._context=m,this._nativeAudioNode=S;const w=u(m);d(w)&&n(aw,()=>aw(w,g))!==!0&&SF(S),kT.set(this,S),xT.set(this,new Set),m.state!=="closed"&&v&&Il(this),t(this,E,S)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(m){this._nativeAudioNode.channelCount=m}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(m){this._nativeAudioNode.channelCountMode=m}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(m){this._nativeAudioNode.channelInterpretation=m}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(m,v=0,S=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();const E=u(this._context),w=p(E);if(h(m)||f(m))throw o();if(lp(m)){const T=Tt(m);try{const O=up(this._nativeAudioNode,T,v,S),L=df(this);(w||L)&&this._nativeAudioNode.disconnect(...O),this.context.state!=="closed"&&!L&&df(m)&&Il(m)}catch(O){throw O.code===12?o():O}if(e(this,m,v,S,w)){const O=c([this],m);hm(O,r(w))}return m}const A=bd(m);if(A.name==="playbackRate"&&A.maxValue===1024)throw s();try{this._nativeAudioNode.connect(A,v),(w||df(this))&&this._nativeAudioNode.disconnect(A,v)}catch(T){throw T.code===12?o():T}if(bF(this,m,v,w)){const T=c([this],m);hm(T,r(w))}}disconnect(m,v,S){let E;const w=u(this._context),A=p(w);if(m===void 0)E=kF(this,A);else if(typeof m=="number"){if(m<0||m>=this.numberOfOutputs)throw i();E=EF(this,A,m)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||lp(m)&&S!==void 0&&(S<0||S>=m.numberOfInputs))throw i();if(E=TF(this,A,m,v,S),E.length===0)throw o()}for(const x of E){const T=c([this],x);hm(T,a)}}},xF=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>(f,p,g,C=null,m=null)=>{const v=g.value,S=new FB(v),E=p?r(S):null,w={get defaultValue(){return v},get maxValue(){return C===null?g.maxValue:C},get minValue(){return m===null?g.minValue:m},get value(){return g.value},set value(A){g.value=A,w.setValueAtTime(A,f.context.currentTime)},cancelAndHoldAtTime(A){if(typeof g.cancelAndHoldAtTime=="function")E===null&&S.flush(f.context.currentTime),S.add(i(A)),g.cancelAndHoldAtTime(A);else{const x=Array.from(S).pop();E===null&&S.flush(f.context.currentTime),S.add(i(A));const T=Array.from(S).pop();g.cancelScheduledValues(A),x!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?g.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?g.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&g.setValueCurveAtTime(T.values,T.startTime,T.duration))}return w},cancelScheduledValues(A){return E===null&&S.flush(f.context.currentTime),S.add(o(A)),g.cancelScheduledValues(A),w},exponentialRampToValueAtTime(A,x){if(A===0)throw new RangeError;if(!Number.isFinite(x)||x<0)throw new RangeError;const T=f.context.currentTime;return E===null&&S.flush(T),Array.from(S).length===0&&(S.add(l(v,T)),g.setValueAtTime(v,T)),S.add(s(A,x)),g.exponentialRampToValueAtTime(A,x),w},linearRampToValueAtTime(A,x){const T=f.context.currentTime;return E===null&&S.flush(T),Array.from(S).length===0&&(S.add(l(v,T)),g.setValueAtTime(v,T)),S.add(a(A,x)),g.linearRampToValueAtTime(A,x),w},setTargetAtTime(A,x,T){return E===null&&S.flush(f.context.currentTime),S.add(c(A,x,T)),g.setTargetAtTime(A,x,T),w},setValueAtTime(A,x){return E===null&&S.flush(f.context.currentTime),S.add(l(A,x)),g.setValueAtTime(A,x),w},setValueCurveAtTime(A,x,T){const _=A instanceof Float32Array?A:new Float32Array(A);if(d!==null&&d.name==="webkitAudioContext"){const O=x+T,L=f.context.sampleRate,U=Math.ceil(x*L),z=Math.floor(O*L),Z=z-U,J=new Float32Array(Z);for(let re=0;re<Z;re+=1){const X=(_.length-1)/T*((U+re)/L-x),Y=Math.floor(X),oe=Math.ceil(X);J[re]=Y===oe?_[Y]:(1-(X-Y))*_[Y]+(1-(oe-X))*_[oe]}E===null&&S.flush(f.context.currentTime),S.add(u(J,x,T)),g.setValueCurveAtTime(J,x,T);const ee=z/L;ee<O&&h(w,J[J.length-1],ee),h(w,_[_.length-1],O)}else E===null&&S.flush(f.context.currentTime),S.add(u(_,x,T)),g.setValueCurveAtTime(_,x,T);return w}};return n.set(w,g),e.set(w,f),t(w,E),w},PF=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:i}=n;e.exponentialRampToValueAtTime(i,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:i}=n;e.linearRampToValueAtTime(i,r)}else if(n.type==="setTarget"){const{startTime:r,target:i,timeConstant:o}=n;e.setTargetAtTime(i,r,o)}else if(n.type==="setValue"){const{startTime:r,value:i}=n;e.setValueAtTime(i,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:i,values:o}=n;e.setValueCurveAtTime(o,i,r)}else throw new Error("Can't apply an unknown automation.")}});class FT{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,i)=>e.call(n,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const NF={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},_F=(t,e,n,r,i,o,s,a,c,l,u,d,h,f)=>class extends e{constructor(g,C,m){var v;const S=a(g),E=c(S),w=u({...NF,...m});h(w);const A=Yv.get(S),x=A==null?void 0:A.get(C),T=E||S.state!=="closed"?S:(v=s(S))!==null&&v!==void 0?v:S,_=i(T,E?null:g.baseLatency,l,C,x,w),O=E?r(C,w,x):null;super(g,!0,_,O);const L=[];_.parameters.forEach((z,Z)=>{const J=n(this,E,z);L.push([Z,J])}),this._nativeAudioWorkletNode=_,this._onprocessorerror=null,this._parameters=new FT(L),E&&t(S,this);const{activeInputs:U}=o(this);d(_,U)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const C=typeof g=="function"?f(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=C;const m=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=m!==null&&m===C?g:m}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function fp(t,e,n,r,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{const o=t.getChannelData(r);if(e[n].byteLength===0)e[n]=o.slice(i,i+128);else{const s=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(s)}}}const UT=(t,e,n,r,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,i):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],i)},pp=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const i=[],o=typeof e=="number"?e:e[r];for(let s=0;s<o;s+=1)i.push(new Float32Array(128));n.push(i)}return n},OF=(t,e)=>{const n=Di(Qv,t),r=Tt(e);return Di(n,r)},MF=async(t,e,n,r,i,o,s)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,l=i.reduce((C,m)=>C+m,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const d=er(t),h=await OF(n,t),f=pp(r.numberOfInputs,r.channelCount),p=pp(r.numberOfOutputs,i),g=Array.from(t.parameters.keys()).reduce((C,m)=>({...C,[m]:new Float32Array(128)}),{});for(let C=0;C<a;C+=128){if(r.numberOfInputs>0&&e!==null)for(let m=0;m<r.numberOfInputs;m+=1)for(let v=0;v<r.channelCount;v+=1)fp(e,f[m],v,v,C);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:m},v)=>{fp(e,g,m,c+v,C)});for(let m=0;m<r.numberOfInputs;m+=1)for(let v=0;v<i[m];v+=1)p[m][v].byteLength===0&&(p[m][v]=new Float32Array(128));try{const m=f.map((S,E)=>d.activeInputs[E].size===0?[]:S),v=s(C/n.sampleRate,n.sampleRate,()=>h.process(m,p,g));if(u!==null)for(let S=0,E=0;S<r.numberOfOutputs;S+=1){for(let w=0;w<i[S];w+=1)UT(u,p[S],w,E+w,C);E+=i[S]}if(!v)break}catch(m){t.dispatchEvent(new ErrorEvent("processorerror",{colno:m.colno,filename:m.filename,lineno:m.lineno,message:m.message}));break}}return u},DF=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g)=>(C,m,v)=>{const S=new WeakMap;let E=null;const w=async(A,x)=>{let T=u(A),_=null;const O=jn(T,x),L=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(d===null){const U=L.reduce((ee,re)=>ee+re,0),z=i(x,{channelCount:Math.max(1,U),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,U)}),Z=[];for(let ee=0;ee<A.numberOfOutputs;ee+=1)Z.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:L[ee]}));const J=s(x,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1});J.connect=e.bind(null,Z),J.disconnect=c.bind(null,Z),_=[z,Z,J]}else O||(T=new d(x,C));if(S.set(x,_===null?T:_[2]),_!==null){if(E===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const re=A.channelCount*A.numberOfInputs,X=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,Y=re+X;E=MF(A,Y===0?null:await(async()=>{const W=new h(Y,Math.ceil(A.context.length/128)*128,x.sampleRate),se=[],we=[];for(let xe=0;xe<m.numberOfInputs;xe+=1)se.push(s(W,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),we.push(i(W,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const De=await Promise.all(Array.from(A.parameters.values()).map(async xe=>{const rt=o(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:xe.value});return await f(W,xe,rt.offset),rt})),de=r(W,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,re+X)});for(let xe=0;xe<m.numberOfInputs;xe+=1){se[xe].connect(we[xe]);for(let rt=0;rt<m.channelCount;rt+=1)we[xe].connect(de,rt,xe*m.channelCount+rt)}for(const[xe,rt]of De.entries())rt.connect(de,0,re+xe),rt.start(0);return de.connect(W.destination),await Promise.all(se.map(xe=>p(A,W,xe))),g(W)})(),x,m,L,v,l)}const U=await E,z=n(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Z,J,ee]=_;U!==null&&(z.buffer=U,z.start(0)),z.connect(Z);for(let re=0,X=0;re<A.numberOfOutputs;re+=1){const Y=J[re];for(let oe=0;oe<L[re];oe+=1)Z.connect(Y,X+oe,oe);X+=L[re]}return ee}if(O)for(const[U,z]of A.parameters.entries())await t(x,z,T.parameters.get(U));else for(const[U,z]of A.parameters.entries())await f(x,z,T.parameters.get(U));return await p(A,x,T),T};return{render(A,x){a(x,A);const T=S.get(x);return T!==void 0?Promise.resolve(T):w(A,x)}}},LF=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g,C,m,v,S)=>class extends p{constructor(w,A){super(w,A),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(x,T)=>t(this,x,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(w,A,x){return new n({length:A,numberOfChannels:w,sampleRate:x})}createBufferSource(){return new r(this)}createChannelMerger(w=6){return new o(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new s(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(w,A){return new f(this,{feedback:A,feedforward:w})}createOscillator(){return new g(this)}createPanner(){return new C(this)}createPeriodicWave(w,A,x={disableNormalization:!1}){return new m(this,{...x,imag:A,real:w})}createStereoPanner(){return new v(this)}createWaveShaper(){return new S(this)}decodeAudioData(w,A,x){return l(this._nativeContext,w).then(T=>(typeof A=="function"&&A(T),T),T=>{throw typeof x=="function"&&x(T),T})}},BF={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},FF=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...BF,...u},f=i(d,h),p=s(d),g=p?n():null;super(l,!1,f,g),this._Q=e(this,p,f.Q,Yn,pr),this._detune=e(this,p,f.detune,1200*Math.log2(Yn),-1200*Math.log2(Yn)),this._frequency=e(this,p,f.frequency,l.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Yn),pr),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(h){throw h.code===11?r():h}if(l.length!==u.length||u.length!==d.length)throw r()}},UF=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=jn(l,c);if(!u){const d={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,d)}return o.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await r(c,a.Q,l.Q),await r(c,a.detune,l.detune),await r(c,a.frequency,l.frequency),await r(c,a.gain,l.gain)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},VF=(t,e)=>(n,r)=>{const i=e.get(n);if(i!==void 0)return i;const o=t.get(n);if(o!==void 0)return o;try{const s=r();return s instanceof Promise?(t.set(n,s),s.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,s),s)}catch{return e.set(n,!1),!1}},GF={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},WF=(t,e,n,r,i)=>class extends t{constructor(s,a){const c=r(s),l={...GF,...a},u=n(c,l),d=i(c)?e():null;super(s,!1,u,d)}},jF=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!jn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},ZF={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},HF=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=o({...ZF,...c}),d=n(l,u),h=i(l)?e():null;super(a,!1,d,h)}},zF=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!jn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},XF=t=>(e,n,r)=>t(n,e,r),$F=t=>(e,n,r=0,i=0)=>{const o=e[r];if(o===void 0)throw t();return hp(n)?o.connect(n,0,i):o.connect(n,0)},KF=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},JF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},YF=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...JF,...l},h=r(u,d),f=o(u),p=f?n():null;super(c,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,Yn,pr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Il(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),cs(this)&&Xd(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},QF=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const h=jn(d,u);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,f),s!==null&&d.start(s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,l.offset,d.offset):await r(u,l.offset,d.offset),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},qF=t=>e=>(t[0]=e,t[0]),e3={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},t3=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u={...e3,...c},d=n(l,u),f=i(l)?e():null;super(a,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},n3=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!jn(a,s)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,l)}return r.set(s,a),Ml(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},r3=()=>new DOMException("","DataCloneError"),cw=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},i3=(t,e,n,r,i,o,s,a,c,l,u)=>(d,h)=>{const f=s(d)?d:o(d);if(i.has(h)){const p=n();return Promise.reject(p)}try{i.add(h)}catch{}return e(c,()=>c(f))?f.decodeAudioData(h).then(p=>(cw(h).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,g)=>{const C=async()=>{try{await cw(h)}catch{}},m=v=>{g(v),C()};try{f.decodeAudioData(h,v=>{typeof v.copyFromChannel!="function"&&(l(v),OT(v)),t.add(v),C().then(()=>p(v))},v=>{m(v===null?r():v)})}catch(v){m(v)}})},o3=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=o(c.context),h=a(d);if(u===l){if(e.delete(c),!h&&s(c)){const f=r(c),{outputs:p}=n(c);for(const g of p)if(Kd(g)){const C=r(g[0]);t(f,C,g[1],g[2])}else{const C=i(g[0]);f.connect(C,g[1])}}}else e.set(c,u-l)},s3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},a3=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...s3,...l},h=r(u,d),f=o(u),p=f?n(d.maxDelayTime):null;super(c,!1,h,p),this._delayTime=e(this,f,h.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},c3=(t,e,n,r,i)=>o=>{const s=new WeakMap,a=async(c,l)=>{let u=n(c);const d=jn(u,l);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:o};u=e(l,h)}return s.set(l,u),d?await t(l,c.delayTime,u.delayTime):await r(l,c.delayTime,u.delayTime),await i(c,l,u),u};return{render(c,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},l3=t=>(e,n,r,i)=>t(e[i],o=>o[0]===n&&o[1]===r),u3=t=>(e,n)=>{t(e).delete(n)},d3=t=>"delayTime"in t,h3=(t,e,n)=>function r(i,o){const s=lp(o)?o:n(t,o);if(d3(s))return[];if(i[0]===s)return[i];if(i.includes(s))return[];const{outputs:a}=e(s);return Array.from(a).map(c=>r([...i,s],c[0])).reduce((c,l)=>c.concat(l),[])},_h=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},f3=t=>(e,n=void 0,r=void 0,i=0)=>n===void 0?e.forEach(o=>o.disconnect()):typeof n=="number"?_h(t,e,n).disconnect():hp(n)?r===void 0?e.forEach(o=>o.disconnect(n)):i===void 0?_h(t,e,r).disconnect(n,0):_h(t,e,r).disconnect(n,0,i):r===void 0?e.forEach(o=>o.disconnect(n)):_h(t,e,r).disconnect(n,0),p3={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},g3=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...p3,...u},f=r(d,h),p=s(d),g=p?n():null;super(l,!1,f,g),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},m3=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=jn(l,c);if(!u){const d={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,d)}return o.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await r(c,a.attack,l.attack),await r(c,a.knee,l.knee),await r(c,a.ratio,l.ratio),await r(c,a.release,l.release),await r(c,a.threshold,l.threshold)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},v3=()=>new DOMException("","EncodingError"),y3=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const i=t.document.head;if(i===null)r(new SyntaxError);else{const o=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,d,h,f,p)=>{if(d===a||d===t.location.href&&h===1&&f===1)return l(),r(p),!1;if(c!==null)return c(u,d,h,f,p)},o.onerror=()=>{l(),r(new SyntaxError)},o.onload=()=>{l(),n()},o.src=a,o.type="module",i.appendChild(o)}}),C3=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,i){if(r!==null){let o=this._listeners.get(r);o===void 0&&(o=t(this,r),typeof r=="function"&&this._listeners.set(r,o)),this._nativeEventTarget.addEventListener(n,o,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,i){const o=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,o===void 0?null:o,i)}},I3=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},S3=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},b3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},w3=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...b3,...c},d=r(l,u),h=o(l),f=h?n():null;super(a,!1,d,f),this._gain=e(this,h,d.gain,Yn,pr)}get gain(){return this._gain}},A3=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=jn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.gain,l.gain):await r(c,a.gain,l.gain),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},k3=(t,e)=>n=>e(t,n),E3=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},T3=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},R3=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},x3=t=>e=>t.get(e),Tn=()=>new DOMException("","InvalidStateError"),P3=t=>e=>{const n=t.get(e);if(n===void 0)throw Tn();return n},N3=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},_3=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},rg=()=>new DOMException("","InvalidAccessError"),O3=t=>{t.getFrequencyResponse=(e=>(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw rg();return e.call(t,n,r,i)})(t.getFrequencyResponse)},M3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},D3=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=i(l),d={...M3,...c},h=e(l,u?null:a.baseLatency,d),f=u?n(d.feedback,d.feedforward):null;super(a,!1,h,f),O3(h),this._nativeIIRFilterNode=h,o(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},VT=(t,e,n,r,i,o,s,a,c,l,u)=>{const d=l.length;let h=a;for(let f=0;f<d;f+=1){let p=n[0]*l[f];for(let g=1;g<i;g+=1){const C=h-g&c-1;p+=n[g]*o[C],p-=t[g]*s[C]}for(let g=i;g<r;g+=1)p+=n[g]*o[h-g&c-1];for(let g=i;g<e;g+=1)p-=t[g]*s[h-g&c-1];o[h]=l[f],s[h]=p,h=h+1&c-1,u[f]=p}return h},L3=(t,e,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=r instanceof Float64Array?r:new Float64Array(r),s=i.length,a=o.length,c=Math.min(s,a);if(i[0]!==1){for(let p=0;p<s;p+=1)o[p]/=i[0];for(let p=1;p<a;p+=1)i[p]/=i[0]}const l=32,u=new Float32Array(l),d=new Float32Array(l),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){const g=t.getChannelData(p),C=h.getChannelData(p);u.fill(0),d.fill(0),VT(i,s,o,a,c,u,d,0,l,g,C)}return h},B3=(t,e,n,r,i)=>(o,s)=>{const a=new WeakMap;let c=null;const l=async(u,d)=>{let h=null,f=e(u);const p=jn(f,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=d.createIIRFilter(s,o)),a.set(d,h===null?f:h),h!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);c=(async()=>{await r(u,C,C.destination);const m=await i(C);return L3(m,d,o,s)})()}const g=await c;return h.buffer=g,h.start(0),h}return await r(u,d,f),f};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},F3=(t,e,n,r,i,o)=>s=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!s&&o(a)){const u=r(a),{outputs:d}=n(a);for(const h of d)if(Kd(h)){const f=r(h[0]);e(u,f,h[1],h[2])}else{const f=i(h[0]);u.disconnect(f,h[1])}}t.set(a,c)}else t.set(a,l+c)},U3=t=>e=>t!==null&&e instanceof t,V3=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,G3=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,W3=(t,e)=>n=>t(n)||e(n),j3=t=>e=>t!==null&&e instanceof t,Z3=t=>t!==null&&t.isSecureContext,H3=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw TypeError();super(o,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},z3={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},X3=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o);if(r(a))throw new TypeError;const c={...z3,...s},l=e(a,c);super(o,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},$3=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw new TypeError;super(o,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},K3=(t,e,n)=>class extends t{constructor(i,o){const s=n(i),a=e(s,o);super(i,!0,a,null)}},J3=(t,e,n,r,i,o)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,RT.set(this,a),r(a)&&i.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?o(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},n0=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},Y3=(t,e)=>(n,r,i)=>{const o=new Set;return n.connect=(s=>(a,c=0,l=0)=>{const u=o.size===0;if(e(a))return s.call(n,a,c,l),t(o,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;s.call(n,a,c),t(o,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(n.connect),n.disconnect=(s=>(a,c,l)=>{const u=o.size>0;if(a===void 0)s.apply(n),o.clear();else if(typeof a=="number"){s.call(n,a);for(const h of o)h[1]===a&&o.delete(h)}else{e(a)?s.call(n,a,c,l):s.call(n,a,c);for(const h of o)h[0]===a&&(c===void 0||h[1]===c)&&(l===void 0||h[2]===l)&&o.delete(h)}const d=o.size===0;u&&d&&i()})(n.disconnect),n},Pt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},dn=(t,e)=>{Pt(t,e,"channelCount"),Pt(t,e,"channelCountMode"),Pt(t,e,"channelInterpretation")},lw=t=>typeof t.getFloatTimeDomainData=="function",Q3=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let i=0;i<r;i+=1)e[i]=(n[i]-128)*.0078125;return e}},q3=(t,e)=>(n,r)=>{const i=n.createAnalyser();if(dn(i,r),!(r.maxDecibels>r.minDecibels))throw e();return Pt(i,r,"fftSize"),Pt(i,r,"maxDecibels"),Pt(i,r,"minDecibels"),Pt(i,r,"smoothingTimeConstant"),t(lw,()=>lw(i))||Q3(i),i},e5=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,jt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},t5=t=>{t.start=(e=>{let n=!1;return(r=0,i=0,o)=>{if(n)throw Tn();e.call(t,r,i,o),n=!0}})(t.start)},bC=t=>{t.start=(e=>(n=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})(t.start)},wC=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},n5=(t,e,n,r,i,o,s,a,c,l,u)=>(d,h)=>{const f=d.createBufferSource();return dn(f,h),jt(f,h,"playbackRate"),Pt(f,h,"buffer"),Pt(f,h,"loop"),Pt(f,h,"loopEnd"),Pt(f,h,"loopStart"),e(n,()=>n(d))||t5(f),e(r,()=>r(d))||c(f),e(i,()=>i(d))||l(f,d),e(o,()=>o(d))||bC(f),e(s,()=>s(d))||u(f,d),e(a,()=>a(d))||wC(f),t(d,f),f},r5=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,i5=(t,e)=>(n,r,i)=>{const o=n.destination;if(o.channelCount!==r)try{o.channelCount=r}catch{}i&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:r});const s=t(n,{channelCount:r,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>c=>{a.call(s,c);try{o.channelCount=c}catch(l){if(c>o.maxChannelCount)throw l}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelCountMode=c}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelInterpretation=c}),Object.defineProperty(s,"maxChannelCount",{get:()=>o.maxChannelCount}),s.connect(o),s},o5=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,s5=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},a5=(t,e,n,r,i)=>(o,s,a,c,l,u)=>{if(a!==null)try{const d=new a(o,c,u),h=new Map;let f=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&d.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(C!==null){const m=h.get(g[1]);m!==void 0?g[1]=m:(g[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),C(v)):C(new ErrorEvent(g[0],{...v}))},h.set(C,g[1]))}}return p.call(d,"error",g[1],g[2]),p.call(d,...g)})(d.addEventListener),d.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=h.get(g[1]);C!==void 0&&(h.delete(g[1]),g[1]=C)}return p.call(d,"error",g[1],g[2]),p.call(d,g[0],g[1],g[2])})(d.removeEventListener),u.numberOfOutputs!==0){const p=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(o.destination),i(d,()=>p.disconnect(),()=>p.connect(o.destination))}return d}catch(d){throw d.code===11?r():d}if(l===void 0)throw r();return s5(u),e(o,s,l,u)},GT=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),c5=t=>new Promise((e,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:o})=>{r.close(),i.close(),e(o)},r.onmessageerror=({data:o})=>{r.close(),i.close(),n(o)},i.postMessage(t)}),l5=async(t,e)=>{const n=await c5(e);return new t(n)},u5=(t,e,n,r)=>{let i=Qv.get(t);i===void 0&&(i=new WeakMap,Qv.set(t,i));const o=l5(n,r);return i.set(e,o),o},d5=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>(f,p,g,C)=>{if(C.numberOfInputs===0&&C.numberOfOutputs===0)throw c();const m=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(m.some(fe=>fe<1))throw c();if(m.length!==C.numberOfOutputs)throw e();if(C.channelCountMode!=="explicit")throw c();const v=C.channelCount*C.numberOfInputs,S=m.reduce((fe,ve)=>fe+ve,0),E=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(v+E>6||S>6)throw c();const w=new MessageChannel,A=[],x=[];for(let fe=0;fe<C.numberOfInputs;fe+=1)A.push(s(f,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),x.push(i(f,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const T=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:fe,maxValue:ve,minValue:Ge,name:We}of g.parameterDescriptors){const Oe=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.parameterData[We]!==void 0?C.parameterData[We]:fe===void 0?0:fe});Object.defineProperties(Oe.offset,{defaultValue:{get:()=>fe===void 0?0:fe},maxValue:{get:()=>ve===void 0?Yn:ve},minValue:{get:()=>Ge===void 0?pr:Ge}}),T.push(Oe)}const _=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+E)}),O=GT(p,f.sampleRate),L=a(f,O,v+E,Math.max(1,S)),U=i(f,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),z=[];for(let fe=0;fe<C.numberOfOutputs;fe+=1)z.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[fe]}));for(let fe=0;fe<C.numberOfInputs;fe+=1){A[fe].connect(x[fe]);for(let ve=0;ve<C.channelCount;ve+=1)x[fe].connect(_,ve,fe*C.channelCount+ve)}const Z=new FT(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:fe},ve)=>{const Ge=T[ve];return Ge.connect(_,0,v+ve),Ge.start(0),[fe,Ge.offset]}));_.connect(L);let J=C.channelInterpretation,ee=null;const re=C.numberOfOutputs===0?[L]:z,X={get bufferSize(){return O},get channelCount(){return C.channelCount},set channelCount(fe){throw n()},get channelCountMode(){return C.channelCountMode},set channelCountMode(fe){throw n()},get channelInterpretation(){return J},set channelInterpretation(fe){for(const ve of A)ve.channelInterpretation=fe;J=fe},get context(){return L.context},get inputs(){return A},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get onprocessorerror(){return ee},set onprocessorerror(fe){typeof ee=="function"&&X.removeEventListener("processorerror",ee),ee=typeof fe=="function"?fe:null,typeof ee=="function"&&X.addEventListener("processorerror",ee)},get parameters(){return Z},get port(){return w.port2},addEventListener(...fe){return L.addEventListener(fe[0],fe[1],fe[2])},connect:t.bind(null,re),disconnect:l.bind(null,re),dispatchEvent(...fe){return L.dispatchEvent(fe[0])},removeEventListener(...fe){return L.removeEventListener(fe[0],fe[1],fe[2])}},Y=new Map;w.port1.addEventListener=(fe=>(...ve)=>{if(ve[0]==="message"){const Ge=typeof ve[1]=="function"?ve[1]:typeof ve[1]=="object"&&ve[1]!==null&&typeof ve[1].handleEvent=="function"?ve[1].handleEvent:null;if(Ge!==null){const We=Y.get(ve[1]);We!==void 0?ve[1]=We:(ve[1]=Oe=>{u(f.currentTime,f.sampleRate,()=>Ge(Oe))},Y.set(Ge,ve[1]))}}return fe.call(w.port1,ve[0],ve[1],ve[2])})(w.port1.addEventListener),w.port1.removeEventListener=(fe=>(...ve)=>{if(ve[0]==="message"){const Ge=Y.get(ve[1]);Ge!==void 0&&(Y.delete(ve[1]),ve[1]=Ge)}return fe.call(w.port1,ve[0],ve[1],ve[2])})(w.port1.removeEventListener);let oe=null;Object.defineProperty(w.port1,"onmessage",{get:()=>oe,set:fe=>{typeof oe=="function"&&w.port1.removeEventListener("message",oe),oe=typeof fe=="function"?fe:null,typeof oe=="function"&&(w.port1.addEventListener("message",oe),w.port1.start())}}),g.prototype.port=w.port1;let W=null;u5(f,X,g,C).then(fe=>W=fe);const we=pp(C.numberOfInputs,C.channelCount),De=pp(C.numberOfOutputs,m),de=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((fe,{name:ve})=>({...fe,[ve]:new Float32Array(128)}),{});let xe=!0;const rt=()=>{C.numberOfOutputs>0&&L.disconnect(U);for(let fe=0,ve=0;fe<C.numberOfOutputs;fe+=1){const Ge=z[fe];for(let We=0;We<m[fe];We+=1)U.disconnect(Ge,ve+We,We);ve+=m[fe]}},Ce=new Map;L.onaudioprocess=({inputBuffer:fe,outputBuffer:ve})=>{if(W!==null){const Ge=d(X);for(let We=0;We<O;We+=128){for(let Oe=0;Oe<C.numberOfInputs;Oe+=1)for(let Je=0;Je<C.channelCount;Je+=1)fp(fe,we[Oe],Je,Je,We);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:Oe},Je)=>{fp(fe,de,Oe,v+Je,We)});for(let Oe=0;Oe<C.numberOfInputs;Oe+=1)for(let Je=0;Je<m[Oe];Je+=1)De[Oe][Je].byteLength===0&&(De[Oe][Je]=new Float32Array(128));try{const Oe=we.map((Ut,_t)=>{if(Ge[_t].size>0)return Ce.set(_t,O/128),Ut;const yn=Ce.get(_t);return yn===void 0?[]:(Ut.every(Ot=>Ot.every(Ar=>Ar===0))&&(yn===1?Ce.delete(_t):Ce.set(_t,yn-1)),Ut)});xe=u(f.currentTime+We/f.sampleRate,f.sampleRate,()=>W.process(Oe,De,de));for(let Ut=0,_t=0;Ut<C.numberOfOutputs;Ut+=1){for(let Hn=0;Hn<m[Ut];Hn+=1)UT(ve,De[Ut],Hn,_t+Hn,We);_t+=m[Ut]}}catch(Oe){xe=!1,X.dispatchEvent(new ErrorEvent("processorerror",{colno:Oe.colno,filename:Oe.filename,lineno:Oe.lineno,message:Oe.message}))}if(!xe){for(let Oe=0;Oe<C.numberOfInputs;Oe+=1){A[Oe].disconnect(x[Oe]);for(let Je=0;Je<C.channelCount;Je+=1)x[We].disconnect(_,Je,Oe*C.channelCount+Je)}if(g.parameterDescriptors!==void 0){const Oe=g.parameterDescriptors.length;for(let Je=0;Je<Oe;Je+=1){const Ut=T[Je];Ut.disconnect(_,0,v+Je),Ut.stop()}}_.disconnect(L),L.onaudioprocess=null,tn?rt():$e();break}}}};let tn=!1;const vn=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Zn=()=>L.connect(vn).connect(f.destination),$e=()=>{L.disconnect(vn),vn.disconnect()},Zt=()=>{if(xe){$e(),C.numberOfOutputs>0&&L.connect(U);for(let fe=0,ve=0;fe<C.numberOfOutputs;fe+=1){const Ge=z[fe];for(let We=0;We<m[fe];We+=1)U.connect(Ge,ve+We,We);ve+=m[fe]}}tn=!0},Jt=()=>{xe&&(Zn(),rt()),tn=!1};return Zn(),h(X,Zt,Jt)},WT=(t,e)=>{const n=t.createBiquadFilter();return dn(n,e),jt(n,e,"Q"),jt(n,e,"detune"),jt(n,e,"frequency"),jt(n,e,"gain"),Pt(n,e,"type"),n},h5=(t,e)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),dn(i,r),i},f5=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Tn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Tn()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Tn()}})},Jd=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return dn(n,e),f5(n),n},p5=(t,e,n,r,i)=>(o,s)=>{if(o.createConstantSource===void 0)return n(o,s);const a=o.createConstantSource();return dn(a,s),jt(a,s,"offset"),e(r,()=>r(o))||bC(a),e(i,()=>i(o))||wC(a),t(o,a),a},Dl=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),g5=(t,e,n,r)=>(i,{offset:o,...s})=>{const a=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...s,gain:o}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},h=()=>c.connect(l),f=()=>c.disconnect(l);return t(i,c),r(Dl(d,l),h,f)},m5=(t,e)=>(n,r)=>{const i=n.createConvolver();if(dn(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),Pt(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",o=>()=>o.call(i),o=>s=>{if(s>2)throw t();return o.call(i,s)}),r.channelCountMode==="max"))throw t();return e(i,"channelCountMode",o=>()=>o.call(i),o=>s=>{if(s==="max")throw t();return o.call(i,s)}),i},jT=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return dn(n,e),jt(n,e,"delayTime"),n},v5=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(dn(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return jt(r,n,"attack"),jt(r,n,"knee"),jt(r,n,"ratio"),jt(r,n,"release"),jt(r,n,"threshold"),r},br=(t,e)=>{const n=t.createGain();return dn(n,e),jt(n,e,"gain"),n},y5=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return dn(i,r),i};function C5(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function I5(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function uw(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=I5(n,e),n[0]+=t[r];return n}const S5=(t,e,n,r)=>(i,o,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=GT(o,i.sampleRate),h=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=h.length,g=f.length,C=Math.min(p,g);if(p===0||p>20)throw r();if(h[0]===0)throw e();if(g===0||g>20)throw r();if(f[0]===0)throw e();if(h[0]!==1){for(let T=0;T<g;T+=1)f[T]/=h[0];for(let T=1;T<p;T+=1)h[T]/=h[0]}const m=n(i,d,s,s);m.channelCount=s,m.channelCountMode=a,m.channelInterpretation=c;const v=32,S=[],E=[],w=[];for(let T=0;T<s;T+=1){S.push(0);const _=new Float32Array(v),O=new Float32Array(v);_.fill(0),O.fill(0),E.push(_),w.push(O)}m.onaudioprocess=T=>{const _=T.inputBuffer,O=T.outputBuffer,L=_.numberOfChannels;for(let U=0;U<L;U+=1){const z=_.getChannelData(U),Z=O.getChannelData(U);S[U]=VT(h,p,f,g,C,E[U],w[U],S[U],v,z,Z)}};const A=i.sampleRate/2;return Dl({get bufferSize(){return d},get channelCount(){return m.channelCount},set channelCount(T){m.channelCount=T},get channelCountMode(){return m.channelCountMode},set channelCountMode(T){m.channelCountMode=T},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(T){m.channelInterpretation=T},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener(...T){return m.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return m.dispatchEvent(T[0])},getFrequencyResponse(T,_,O){if(T.length!==_.length||_.length!==O.length)throw t();const L=T.length;for(let U=0;U<L;U+=1){const z=-Math.PI*(T[U]/A),Z=[Math.cos(z),Math.sin(z)],J=uw(f,Z),ee=uw(h,Z),re=C5(J,ee);_[U]=Math.sqrt(re[0]*re[0]+re[1]*re[1]),O[U]=Math.atan2(re[1],re[0])}},removeEventListener(...T){return m.removeEventListener(T[0],T[1],T[2])}},m)},b5=(t,e)=>t.createMediaElementSource(e.mediaElement),w5=(t,e)=>{const n=t.createMediaStreamDestination();return dn(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},A5=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((o,s)=>o.id<s.id?-1:o.id>s.id?1:0);const r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},k5=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),o=n.createMediaStreamSource(i);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return o},E5=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,T5=(t,e,n,r,i,o)=>(s,a)=>{const c=s.createOscillator();return dn(c,a),jt(c,a,"detune"),jt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Pt(c,a,"type"),e(n,()=>n(s))||bC(c),e(r,()=>r(s))||o(c,s),e(i,()=>i(s))||wC(c),t(s,c),c},R5=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(dn(r,n),jt(r,n,"orientationX"),jt(r,n,"orientationY"),jt(r,n,"orientationZ"),jt(r,n,"positionX"),jt(r,n,"positionY"),jt(r,n,"positionZ"),Pt(r,n,"coneInnerAngle"),Pt(r,n,"coneOuterAngle"),Pt(r,n,"coneOuterGain"),Pt(r,n,"distanceModel"),Pt(r,n,"maxDistance"),Pt(r,n,"panningModel"),Pt(r,n,"refDistance"),Pt(r,n,"rolloffFactor"),r)},x5=(t,e,n,r,i,o,s,a,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:g,orientationX:C,orientationY:m,orientationZ:v,panningModel:S,positionX:E,positionY:w,positionZ:A,refDistance:x,rolloffFactor:T,..._})=>{const O=u.createPanner();if(_.channelCount>2||_.channelCountMode==="max")throw s();dn(O,_);const L={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},U=n(u,{...L,channelInterpretation:"speakers",numberOfInputs:6}),z=r(u,{..._,gain:1}),Z=r(u,{...L,gain:1}),J=r(u,{...L,gain:0}),ee=r(u,{...L,gain:0}),re=r(u,{...L,gain:0}),X=r(u,{...L,gain:0}),Y=r(u,{...L,gain:0}),oe=i(u,256,6,1),W=o(u,{...L,curve:new Float32Array([1,1]),oversample:"none"});let se=[C,m,v],we=[E,w,A];const De=new Float32Array(1);oe.onaudioprocess=({inputBuffer:Ce})=>{const tn=[c(Ce,De,0),c(Ce,De,1),c(Ce,De,2)];tn.some((Zn,$e)=>Zn!==se[$e])&&(O.setOrientation(...tn),se=tn);const vn=[c(Ce,De,3),c(Ce,De,4),c(Ce,De,5)];vn.some((Zn,$e)=>Zn!==we[$e])&&(O.setPosition(...vn),we=vn)},Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Y.gain,"defaultValue",{get:()=>0});const de={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(Ce){if(Ce>2)throw s();z.channelCount=Ce,O.channelCount=Ce},get channelCountMode(){return O.channelCountMode},set channelCountMode(Ce){if(Ce==="max")throw s();z.channelCountMode=Ce,O.channelCountMode=Ce},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(Ce){z.channelInterpretation=Ce,O.channelInterpretation=Ce},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(Ce){O.coneInnerAngle=Ce},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(Ce){O.coneOuterAngle=Ce},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(Ce){if(Ce<0||Ce>1)throw e();O.coneOuterGain=Ce},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(Ce){O.distanceModel=Ce},get inputs(){return[z]},get maxDistance(){return O.maxDistance},set maxDistance(Ce){if(Ce<0)throw new RangeError;O.maxDistance=Ce},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return Z.gain},get orientationY(){return J.gain},get orientationZ(){return ee.gain},get panningModel(){return O.panningModel},set panningModel(Ce){O.panningModel=Ce},get positionX(){return re.gain},get positionY(){return X.gain},get positionZ(){return Y.gain},get refDistance(){return O.refDistance},set refDistance(Ce){if(Ce<0)throw new RangeError;O.refDistance=Ce},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(Ce){if(Ce<0)throw new RangeError;O.rolloffFactor=Ce},addEventListener(...Ce){return z.addEventListener(Ce[0],Ce[1],Ce[2])},dispatchEvent(...Ce){return z.dispatchEvent(Ce[0])},removeEventListener(...Ce){return z.removeEventListener(Ce[0],Ce[1],Ce[2])}};d!==de.coneInnerAngle&&(de.coneInnerAngle=d),h!==de.coneOuterAngle&&(de.coneOuterAngle=h),f!==de.coneOuterGain&&(de.coneOuterGain=f),p!==de.distanceModel&&(de.distanceModel=p),g!==de.maxDistance&&(de.maxDistance=g),C!==de.orientationX.value&&(de.orientationX.value=C),m!==de.orientationY.value&&(de.orientationY.value=m),v!==de.orientationZ.value&&(de.orientationZ.value=v),S!==de.panningModel&&(de.panningModel=S),E!==de.positionX.value&&(de.positionX.value=E),w!==de.positionY.value&&(de.positionY.value=w),A!==de.positionZ.value&&(de.positionZ.value=A),x!==de.refDistance&&(de.refDistance=x),T!==de.rolloffFactor&&(de.rolloffFactor=T),(se[0]!==1||se[1]!==0||se[2]!==0)&&O.setOrientation(...se),(we[0]!==0||we[1]!==0||we[2]!==0)&&O.setPosition(...we);const xe=()=>{z.connect(O),t(z,W,0,0),W.connect(Z).connect(U,0,0),W.connect(J).connect(U,0,1),W.connect(ee).connect(U,0,2),W.connect(re).connect(U,0,3),W.connect(X).connect(U,0,4),W.connect(Y).connect(U,0,5),U.connect(oe).connect(u.destination)},rt=()=>{z.disconnect(O),a(z,W,0,0),W.disconnect(Z),Z.disconnect(U),W.disconnect(J),J.disconnect(U),W.disconnect(ee),ee.disconnect(U),W.disconnect(re),re.disconnect(U),W.disconnect(X),X.disconnect(U),W.disconnect(Y),Y.disconnect(U),U.disconnect(oe),oe.disconnect(u.destination)};return l(Dl(de,O),xe,rt)},P5=t=>(e,{disableNormalization:n,imag:r,real:i})=>{const o=r instanceof Float32Array?r:new Float32Array(r),s=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(s,o,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},Yd=(t,e,n,r)=>t.createScriptProcessor(e,n,r),N5=(t,e)=>(n,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const o=n.createStereoPanner();return dn(o,r),jt(o,r,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:s=>{if(s!==i)throw e()}}),o},_5=(t,e,n,r,i,o)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(p,g,C,m)=>{const v=new Float32Array(16385),S=new Float32Array(16385);for(let _=0;_<16385;_+=1){const O=_/16384*c;v[_]=Math.cos(O),S[_]=Math.sin(O)}const E=n(p,{...l,gain:0}),w=r(p,{...u,curve:v}),A=r(p,{...u,curve:a}),x=n(p,{...l,gain:0}),T=r(p,{...u,curve:S});return{connectGraph(){g.connect(E),g.connect(A.inputs===void 0?A:A.inputs[0]),g.connect(x),A.connect(C),C.connect(w.inputs===void 0?w:w.inputs[0]),C.connect(T.inputs===void 0?T:T.inputs[0]),w.connect(E.gain),T.connect(x.gain),E.connect(m,0,0),x.connect(m,0,1)},disconnectGraph(){g.disconnect(E),g.disconnect(A.inputs===void 0?A:A.inputs[0]),g.disconnect(x),A.disconnect(C),C.disconnect(w.inputs===void 0?w:w.inputs[0]),C.disconnect(T.inputs===void 0?T:T.inputs[0]),w.disconnect(E.gain),T.disconnect(x.gain),E.disconnect(m,0,0),x.disconnect(m,0,1)}}},h=(p,g,C,m)=>{const v=new Float32Array(16385),S=new Float32Array(16385),E=new Float32Array(16385),w=new Float32Array(16385),A=Math.floor(16385/2);for(let re=0;re<16385;re+=1)if(re>A){const X=(re-A)/(16384-A)*c;v[re]=Math.cos(X),S[re]=Math.sin(X),E[re]=0,w[re]=1}else{const X=re/(16384-A)*c;v[re]=1,S[re]=0,E[re]=Math.cos(X),w[re]=Math.sin(X)}const x=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=n(p,{...l,gain:0}),_=r(p,{...u,curve:v}),O=n(p,{...l,gain:0}),L=r(p,{...u,curve:S}),U=r(p,{...u,curve:a}),z=n(p,{...l,gain:0}),Z=r(p,{...u,curve:E}),J=n(p,{...l,gain:0}),ee=r(p,{...u,curve:w});return{connectGraph(){g.connect(x),g.connect(U.inputs===void 0?U:U.inputs[0]),x.connect(T,0),x.connect(O,0),x.connect(z,1),x.connect(J,1),U.connect(C),C.connect(_.inputs===void 0?_:_.inputs[0]),C.connect(L.inputs===void 0?L:L.inputs[0]),C.connect(Z.inputs===void 0?Z:Z.inputs[0]),C.connect(ee.inputs===void 0?ee:ee.inputs[0]),_.connect(T.gain),L.connect(O.gain),Z.connect(z.gain),ee.connect(J.gain),T.connect(m,0,0),z.connect(m,0,0),O.connect(m,0,1),J.connect(m,0,1)},disconnectGraph(){g.disconnect(x),g.disconnect(U.inputs===void 0?U:U.inputs[0]),x.disconnect(T,0),x.disconnect(O,0),x.disconnect(z,1),x.disconnect(J,1),U.disconnect(C),C.disconnect(_.inputs===void 0?_:_.inputs[0]),C.disconnect(L.inputs===void 0?L:L.inputs[0]),C.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),C.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),_.disconnect(T.gain),L.disconnect(O.gain),Z.disconnect(z.gain),ee.disconnect(J.gain),T.disconnect(m,0,0),z.disconnect(m,0,0),O.disconnect(m,0,1),J.disconnect(m,0,1)}}},f=(p,g,C,m,v)=>{if(g===1)return d(p,C,m,v);if(g===2)return h(p,C,m,v);throw i()};return(p,{channelCount:g,channelCountMode:C,pan:m,...v})=>{if(C==="max")throw i();const S=t(p,{...v,channelCount:1,channelCountMode:C,numberOfInputs:2}),E=n(p,{...v,channelCount:g,channelCountMode:C,gain:1}),w=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:m});let{connectGraph:A,disconnectGraph:x}=f(p,g,E,w,S);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(U){E.channelCount!==U&&(_&&x(),{connectGraph:A,disconnectGraph:x}=f(p,U,E,w,S),_&&A()),E.channelCount=U},get channelCountMode(){return E.channelCountMode},set channelCountMode(U){if(U==="clamped-max"||U==="max")throw i();E.channelCountMode=U},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(U){E.channelInterpretation=U},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return w.gain},addEventListener(...U){return E.addEventListener(U[0],U[1],U[2])},dispatchEvent(...U){return E.dispatchEvent(U[0])},removeEventListener(...U){return E.removeEventListener(U[0],U[1],U[2])}};let _=!1;const O=()=>{A(),_=!0},L=()=>{x(),_=!1};return o(Dl(T,S),O,L)}},O5=(t,e,n,r,i,o,s)=>(a,c)=>{const l=a.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);dn(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Pt(l,{curve:u},"curve"),Pt(l,c,"oversample");let d=null,h=!1;return s(l,"curve",g=>()=>g.call(l),g=>C=>(g.call(l,C),h&&(r(C)&&d===null?d=t(a,l):!r(C)&&d!==null&&(d(),d=null)),C)),i(l,()=>{h=!0,r(l.curve)&&(d=t(a,l))},()=>{h=!1,d!==null&&(d(),d=null)})},M5=(t,e,n,r,i)=>(o,{curve:s,oversample:a,...c})=>{const l=o.createWaveShaper(),u=o.createWaveShaper();dn(l,c),dn(u,c);const d=n(o,{...c,gain:1}),h=n(o,{...c,gain:-1}),f=n(o,{...c,gain:1}),p=n(o,{...c,gain:-1});let g=null,C=!1,m=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(w){d.channelCount=w,h.channelCount=w,l.channelCount=w,f.channelCount=w,u.channelCount=w,p.channelCount=w},get channelCountMode(){return l.channelCountMode},set channelCountMode(w){d.channelCountMode=w,h.channelCountMode=w,l.channelCountMode=w,f.channelCountMode=w,u.channelCountMode=w,p.channelCountMode=w},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(w){d.channelInterpretation=w,h.channelInterpretation=w,l.channelInterpretation=w,f.channelInterpretation=w,u.channelInterpretation=w,p.channelInterpretation=w},get context(){return l.context},get curve(){return m},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)l.curve=w,u.curve=w;else{const A=w.length,x=new Float32Array(A+2-A%2),T=new Float32Array(A+2-A%2);x[0]=w[0],T[0]=-w[A-1];const _=Math.ceil((A+1)/2),O=(A+1)/2-1;for(let L=1;L<_;L+=1){const U=L/_*O,z=Math.floor(U),Z=Math.ceil(U);x[L]=z===Z?w[z]:(1-(U-z))*w[z]+(1-(Z-U))*w[Z],T[L]=z===Z?-w[A-1-z]:-((1-(U-z))*w[A-1-z])-(1-(Z-U))*w[A-1-Z]}x[_]=A%2===1?w[_-1]:(w[_-2]+w[_-1])/2,l.curve=x,u.curve=T}m=w,C&&(r(m)&&g===null?g=t(o,d):g!==null&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(w){l.oversample=w,u.oversample=w},addEventListener(...w){return d.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return d.dispatchEvent(w[0])},removeEventListener(...w){return d.removeEventListener(w[0],w[1],w[2])}};s!==null&&(v.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==v.oversample&&(v.oversample=a);const S=()=>{d.connect(l).connect(f),d.connect(h).connect(u).connect(p).connect(f),C=!0,r(m)&&(g=t(o,d))},E=()=>{d.disconnect(l),l.disconnect(f),d.disconnect(h),h.disconnect(u),u.disconnect(p),p.disconnect(f),C=!1,g!==null&&(g(),g=null)};return i(Dl(v,f),S,E)},wr=()=>new DOMException("","NotSupportedError"),D5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},L5=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...D5,...l},h=n(u,d),f=o(u),p=f?r():null,g=c.sampleRate/2;super(c,!1,h,p),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,g,-g),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Il(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),cs(this)&&Xd(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},B5=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null,c=null;const l=async(u,d)=>{let h=n(u);const f=jn(h,d);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:s===null?void 0:s,type:h.type};h=e(d,p),a!==null&&h.start(a),c!==null&&h.stop(c)}return o.set(d,h),f?(await t(d,u.detune,h.detune),await t(d,u.frequency,h.frequency)):(await r(d,u.detune,h.detune),await r(d,u.frequency,h.frequency)),await i(u,d,h),h};return{set periodicWave(u){s=u},set start(u){a=u},set stop(u){c=u},render(u,d){const h=o.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},F5={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},U5=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...F5,...l},h=n(u,d),f=o(u),p=f?r():null;super(c,!1,h,p),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,Yn,pr),this._orientationY=e(this,f,h.orientationY,Yn,pr),this._orientationZ=e(this,f,h.orientationZ,Yn,pr),this._positionX=e(this,f,h.positionX,Yn,pr),this._positionY=e(this,f,h.positionY,Yn,pr),this._positionZ=e(this,f,h.positionZ,Yn,pr),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},V5=(t,e,n,r,i,o,s,a,c,l)=>()=>{const u=new WeakMap;let d=null;const h=async(f,p)=>{let g=null,C=o(f);const m={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},v={...m,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},S=jn(C,p);if("bufferSize"in C)g=r(p,{...m,gain:1});else if(!S){const E={...v,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=i(p,E)}if(u.set(p,g===null?C:g),g!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const L=new s(6,f.context.length,p.sampleRate),U=e(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});U.connect(L.destination),d=(async()=>{const z=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(Z,J)=>{const ee=n(L,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:J===0?1:0});return await a(L,Z,ee.offset),ee}));for(let Z=0;Z<6;Z+=1)z[Z].connect(U,0,Z),z[Z].start(0);return l(L)})()}const E=await d,w=r(p,{...m,gain:1});await c(f,p,w);const A=[];for(let L=0;L<E.numberOfChannels;L+=1)A.push(E.getChannelData(L));let x=[A[0][0],A[1][0],A[2][0]],T=[A[3][0],A[4][0],A[5][0]],_=r(p,{...m,gain:1}),O=i(p,{...v,orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:T[0],positionY:T[1],positionZ:T[2]});w.connect(_).connect(O.inputs[0]),O.connect(g);for(let L=128;L<E.length;L+=128){const U=[A[0][L],A[1][L],A[2][L]],z=[A[3][L],A[4][L],A[5][L]];if(U.some((Z,J)=>Z!==x[J])||z.some((Z,J)=>Z!==T[J])){x=U,T=z;const Z=L/p.sampleRate;_.gain.setValueAtTime(0,Z),_=r(p,{...m,gain:0}),O=i(p,{...v,orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),_.gain.setValueAtTime(1,Z),w.connect(_).connect(O.inputs[0]),O.connect(g)}}return g}return S?(await t(p,f.orientationX,C.orientationX),await t(p,f.orientationY,C.orientationY),await t(p,f.orientationZ,C.orientationZ),await t(p,f.positionX,C.positionX),await t(p,f.positionY,C.positionY),await t(p,f.positionZ,C.positionZ)):(await a(p,f.orientationX,C.orientationX),await a(p,f.orientationY,C.orientationY),await a(p,f.orientationZ,C.orientationZ),await a(p,f.positionX,C.positionX),await a(p,f.positionY,C.positionY),await a(p,f.positionZ,C.positionZ)),Ml(C)?await c(f,p,C.inputs[0]):await c(f,p,C),C};return{render(f,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):h(f,p)}}},G5={disableNormalization:!1},W5=(t,e,n,r)=>class ZT{constructor(o,s){const a=e(o),c=r({...G5,...s}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===ZT.prototype||n.has(o)}},j5=(t,e)=>(n,r,i)=>(t(r).replay(i),e(r,n,i)),Z5=(t,e,n)=>async(r,i,o)=>{const s=t(r);await Promise.all(s.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const h=await e(l).render(l,i),f=r.context.destination;!n(l)&&(r!==f||!n(r))&&h.connect(o,u,c)})).reduce((a,c)=>[...a,...c],[]))},H5=(t,e,n)=>async(r,i,o)=>{const s=e(r);await Promise.all(Array.from(s.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,i);n(a)||u.connect(o,c)}))},z5=(t,e,n,r)=>i=>t(n0,()=>n0(i))?Promise.resolve(t(r,r)).then(o=>{if(!o){const s=n(i,512,0,1);i.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>i.currentTime,s.connect(i.destination)}return i.startRendering()}):new Promise(o=>{const s=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{s.disconnect(),o(a.renderedBuffer)},s.connect(i.destination),i.startRendering()}),X5=t=>(e,n)=>{t.set(e,n)},$5=t=>(e,n)=>t.set(e,n),K5={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},J5=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...K5,...c},d=n(l,u),h=o(l),f=h?r():null;super(a,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},Y5=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=jn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.pan,l.pan):await r(c,a.pan,l.pan),Ml(l)?await i(a,c,l.inputs[0]):await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},Q5=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},q5=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(n);let o=!1,s=!1;try{await r.audioWorklet.addModule(i);const a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>o=!0,a.onprocessorerror=()=>s=!0,c.connect(a),c.start(0),await r.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(i)}return o&&!s},eU=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{r.disconnect(),i(n.currentTime!==0)},n.startRendering()})},tU=()=>new DOMException("","UnknownError"),nU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},rU=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...nU,...l},h=n(u,d),p=o(u)?r():null;super(c,!0,h,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},iU=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!jn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,l)}return r.set(s,a),Ml(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},oU=()=>typeof window>"u"?null:window,sU=(t,e)=>n=>{n.copyFromChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)r[d]=l[d+s]},n.copyToChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)l[d+s]=r[d]}},aU=t=>e=>{e.copyFromChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyToChannel)},cU=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",i=>()=>{const o=i.call(e);return o===r?null:o},i=>o=>i.call(e,o===null?r:o))},lU=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)i.connect(r,0,c)},()=>i.disconnect(r))},HT=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),zT=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Qd=(t,e,n,r)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:s}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:r(s)})},uU=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),dU=t=>({...t,channelCount:t.numberOfOutputs}),hU=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},XT=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;XT(t,e,n+1e-7)}},fU=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},pU=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},gU=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},AC=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},$T=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},kC=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},mU=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},vU=t=>{t.start=(e=>(n=0,r=0,i)=>{const o=t.buffer,s=o===null?r:Math.min(o.duration,r);o!==null&&s>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,i)})(t.start)},KT=(t,e)=>{const n=e.createGain();t.connect(n);const r=(i=>()=>{i.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),Dl(t,n),t.stop=(i=>{let o=!1;return(s=0)=>{if(o)try{i.call(t,s)}catch{n.gain.setValueAtTime(0,s)}else i.call(t,s),o=!0}})(t.stop)},Ll=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},yU=HB(fc),CU=YB(fc),IU=l3(ng),JT=new WeakMap,SU=T3(JT),Ss=VF(new Map,new WeakMap),vo=oU(),YT=q3(Ss,So),QT=E3(er),On=Z5(er,QT,nc),bU=nF(YT,Tt,On),Ct=P3(RT),ya=E5(vo),ft=j3(ya),qT=new WeakMap,eR=C3(Ll),qd=r5(vo),tR=U3(qd),nR=V3(vo),wU=G3(vo),wd=o5(vo),Kt=RF(zB(AT),JB(yU,CU,up,IU,dp,er,SU,zd,Tt,fc,cs,nc,df),Ss,F3(Jv,dp,er,Tt,bd,cs),So,rg,wr,o3(up,Jv,er,Tt,bd,Ct,cs,ft),h3(qT,er,Di),eR,Ct,tR,nR,wU,ft,wd),AU=tF(Kt,bU,So,YT,Ct,ft),rR=new WeakSet,dw=e5(vo),iR=qF(new Uint32Array(1)),oR=sU(iR,So),sR=aU(iR),kU=iF(rR,Ss,wr,dw,ya,Q5(dw),oR,sR),ig=QB(br),aR=H5(QT,$d,nc),bo=XF(aR),Bl=n5(ig,Ss,fU,pU,gU,AC,$T,kC,vU,cU(Qd),KT),wo=j5(R3($d),aR),EU=aF(bo,Bl,Tt,wo,On),Ui=xF(XB(ET),qT,TT,PF,UB,VB,GB,WB,jB,Xv,bT,qd,XT),TU=sF(Kt,EU,Ui,Tn,Bl,Ct,ft,Ll),RU=vF(Kt,yF,So,Tn,i5(br,Qd),Ct,ft,On),xU=UF(bo,WT,Tt,wo,On),pc=$5(JT),PU=FF(Kt,Ui,xU,rg,WT,Ct,ft,pc),Ca=Y3(fc,nR),NU=lU(Tn,Ca),Ia=h5(qd,NU),_U=jF(Ia,Tt,On),OU=WF(Kt,_U,Ia,Ct,ft),MU=zF(Jd,Tt,On),DU=HF(Kt,MU,Jd,Ct,ft,dU),LU=g5(ig,Bl,br,Ca),Fl=p5(ig,Ss,LU,AC,kC),BU=QF(bo,Fl,Tt,wo,On),FU=YF(Kt,Ui,BU,Fl,Ct,ft,Ll),cR=m5(wr,Qd),UU=n3(cR,Tt,On),VU=t3(Kt,UU,cR,Ct,ft,pc),GU=c3(bo,jT,Tt,wo,On),WU=a3(Kt,Ui,GU,jT,Ct,ft,pc),lR=v5(wr),jU=m3(bo,lR,Tt,wo,On),ZU=g3(Kt,Ui,jU,lR,wr,Ct,ft,pc),HU=A3(bo,br,Tt,wo,On),zU=w3(Kt,Ui,HU,br,Ct,ft),XU=S5(rg,Tn,Yd,wr),EC=z5(Ss,br,Yd,eU(br,ya)),$U=B3(Bl,Tt,ya,On,EC),KU=y5(XU),JU=D3(Kt,KU,$U,Ct,ft,pc),YU=CF(Ui,Ia,Fl,Yd,wr,HT,ft,Qd),uR=new WeakMap,QU=J3(RU,YU,eR,ft,uR,Ll),dR=T5(ig,Ss,AC,$T,kC,KT),qU=B5(bo,dR,Tt,wo,On),e4=L5(Kt,Ui,dR,qU,Ct,ft,Ll),hR=KF(Bl),t4=M5(hR,Tn,br,zT,Ca),og=O5(hR,Tn,t4,zT,Ca,qd,Qd),n4=x5(up,Tn,Ia,br,Yd,og,wr,dp,HT,Ca),fR=R5(n4),r4=V5(bo,Ia,Fl,br,fR,Tt,ya,wo,On,EC),i4=U5(Kt,Ui,fR,r4,Ct,ft,pc),o4=P5(So),s4=W5(o4,Ct,new WeakSet,hU),a4=_5(Ia,Jd,br,og,wr,Ca),pR=N5(a4,wr),c4=Y5(bo,pR,Tt,wo,On),l4=J5(Kt,Ui,pR,c4,Ct,ft),u4=iU(og,Tt,On),d4=rU(Kt,Tn,og,u4,Ct,ft,pc),gR=Z3(vo),TC=I3(vo),mR=new WeakMap,h4=N3(mR,ya),f4=gR?KB(Ss,wr,y3(vo),TC,S3(ZB),Ct,h4,ft,wd,new WeakMap,new WeakMap,q5(wd,ya),vo):void 0,p4=W3(tR,ft),g4=i3(rR,Ss,r3,v3,new WeakSet,Ct,p4,e0,n0,oR,sR),m4=LF(f4,AU,kU,TU,PU,OU,DU,FU,VU,g4,WU,ZU,zU,JU,QU,e4,i4,s4,l4,d4),v4=H3(Kt,b5,Ct,ft),y4=X3(Kt,w5,Ct,ft),C4=$3(Kt,A5,Ct,ft),I4=k5(Tn,ft),S4=K3(Kt,I4,Ct),b4=mF(m4,Tn,wr,tU,v4,y4,C4,S4,qd),vR=_3(uR),w4=qB(vR),yR=$F(So),A4=u3(vR),CR=f3(So),IR=new WeakMap,k4=k3(IR,Di),E4=d5(yR,So,Tn,Ia,Jd,Fl,br,Yd,wr,CR,TC,k4,Ca),T4=a5(Tn,E4,br,wr,Ca),R4=DF(bo,yR,Bl,Ia,Jd,Fl,br,A4,CR,TC,Tt,wd,ya,wo,On,EC),x4=x3(mR),P4=X5(IR),hw=gR?_F(w4,Kt,Ui,R4,T4,er,x4,Ct,ft,wd,uU,P4,mU,Ll):void 0,N4="data:text/javascript;base64,KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgV0VCQVVESU9fQkxPQ0tfU0laRSA9IDEyODsKICAgIGNvbnN0IERFRkFVTFRfQkxPQ0tfU0laRSA9IDEwMjQ7IC8vIERlZmF1bHQgYmxvY2sgc2l6ZSBpZiBub3QgcHJvdmlkZWQgaW4gb3B0aW9ucwogICAgLyoqIE92ZXJsYXAtQWRkIE5vZGUgKi8KICAgIGNsYXNzIE9MQVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgICAgICAgbmJJbnB1dHM7CiAgICAgICAgbmJPdXRwdXRzOwogICAgICAgIGJsb2NrU2l6ZTsKICAgICAgICBob3BTaXplOwogICAgICAgIG5iT3ZlcmxhcHM7CiAgICAgICAgaW5wdXRCdWZmZXJzID0gW107CiAgICAgICAgaW5wdXRCdWZmZXJzSGVhZCA9IFtdOwogICAgICAgIGlucHV0QnVmZmVyc1RvU2VuZCA9IFtdOwogICAgICAgIG91dHB1dEJ1ZmZlcnMgPSBbXTsKICAgICAgICBvdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSA9IFtdOwogICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMubmJJbnB1dHMgPSBvcHRpb25zLm51bWJlck9mSW5wdXRzIHx8IDE7CiAgICAgICAgICAgIHRoaXMubmJPdXRwdXRzID0gb3B0aW9ucy5udW1iZXJPZk91dHB1dHMgfHwgMTsKICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBvcHRpb25zLnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplIHx8IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5ob3BTaXplID0gV0VCQVVESU9fQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5uYk92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLmJsb2NrU2l6ZSAvIHRoaXMuaG9wU2l6ZSk7CiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTsKICAgICAgICB9CiAgICAgICAgaW5pdGlhbGl6ZUJ1ZmZlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWQgPSBuZXcgQXJyYXkodGhpcy5uYklucHV0cyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMgPSBuZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlID0gbmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYk91dHB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFsbG9jYXRlSW5wdXRDaGFubmVscyhpbnB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWRbaW5wdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplICsgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc1tpbnB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW2lucHV0SW5kZXhdW2ldID0gdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0uc3ViYXJyYXkoMCwgdGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxvY2F0ZU91dHB1dENoYW5uZWxzKG91dHB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tvdXRwdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbb3V0cHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVtvdXRwdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZChpbnB1dHMsIG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gaW5wdXRzW2ldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYkNoYW5uZWxzICE9PSB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gb3V0cHV0c1tpXS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJDaGFubmVscyAhPT0gdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkSW5wdXRzKGlucHV0cykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gaW5wdXRzW2ldW2pdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLnNldCh3ZWJBdWRpb0Jsb2NrLCB0aGlzLmJsb2NrU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgd3JpdGVPdXRwdXRzKG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iT3V0cHV0czsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMub3V0cHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gb3V0cHV0c1tpXVtqXTsKICAgICAgICAgICAgICAgICAgICB3ZWJBdWRpb0Jsb2NrLnNldCh0aGlzLm91dHB1dEJ1ZmZlcnNbaV1bal0uc3ViYXJyYXkoMCwgV0VCQVVESU9fQkxPQ0tfU0laRSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0SW5wdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2hpZnRPdXRwdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmZpbGwoMCwgdGhpcy5ibG9ja1NpemUgLSBXRUJBVURJT19CTE9DS19TSVpFKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2ldW2pdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbaV1bal0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmJsb2NrU2l6ZTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tpXVtqXVtrXSArPSB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW2ldW2pdW2tdIC8gdGhpcy5uYk92ZXJsYXBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICB0aGlzLnJlYWxsb2NhdGVDaGFubmVsc0lmTmVlZGVkKGlucHV0cywgb3V0cHV0cyk7CiAgICAgICAgICAgIHRoaXMucmVhZElucHV0cyhpbnB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCk7CiAgICAgICAgICAgIHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpOwogICAgICAgICAgICB0aGlzLnByb2Nlc3NPTEEodGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQsIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUsIHBhcmFtZXRlcnMpOwogICAgICAgICAgICB0aGlzLmhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCk7CiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRzKG91dHB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgKHgpIHsKICAgIAlyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4OwogICAgfQoKICAgIGZ1bmN0aW9uIEZGVChzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfCAwOwogICAgICBpZiAodGhpcy5zaXplIDw9IDEgfHwgKHRoaXMuc2l6ZSAmICh0aGlzLnNpemUgLSAxKSkgIT09IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxJyk7CgogICAgICB0aGlzLl9jc2l6ZSA9IHNpemUgPDwgMTsKCiAgICAgIC8vIE5PVEU6IFVzZSBvZiBgdmFyYCBpcyBpbnRlbnRpb25hbCBmb3Igb2xkIFY4IHZlcnNpb25zCiAgICAgIHZhciB0YWJsZSA9IG5ldyBBcnJheSh0aGlzLnNpemUgKiAyKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSSAqIGkgLyB0aGlzLnNpemU7CiAgICAgICAgdGFibGVbaV0gPSBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgdGFibGVbaSArIDFdID0gLU1hdGguc2luKGFuZ2xlKTsKICAgICAgfQogICAgICB0aGlzLnRhYmxlID0gdGFibGU7CgogICAgICAvLyBGaW5kIHNpemUncyBwb3dlciBvZiB0d28KICAgICAgdmFyIHBvd2VyID0gMDsKICAgICAgZm9yICh2YXIgdCA9IDE7IHRoaXMuc2l6ZSA+IHQ7IHQgPDw9IDEpCiAgICAgICAgcG93ZXIrKzsKCiAgICAgIC8vIENhbGN1bGF0ZSBpbml0aWFsIHN0ZXAncyB3aWR0aDoKICAgICAgLy8gICAqIElmIHdlIGFyZSBmdWxsIHJhZGl4LTQgLSBpdCBpcyAyeCBzbWFsbGVyIHRvIGdpdmUgaW5pdGFsIGxlbj04CiAgICAgIC8vICAgKiBPdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgYHBvd2VyYCB0byBnaXZlIGxlbj00CiAgICAgIHRoaXMuX3dpZHRoID0gcG93ZXIgJSAyID09PSAwID8gcG93ZXIgLSAxIDogcG93ZXI7CgogICAgICAvLyBQcmUtY29tcHV0ZSBiaXQtcmV2ZXJzYWwgcGF0dGVybnMKICAgICAgdGhpcy5fYml0cmV2ID0gbmV3IEFycmF5KDEgPDwgdGhpcy5fd2lkdGgpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2JpdHJldi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuX2JpdHJldltqXSA9IDA7CiAgICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBzaGlmdCA8IHRoaXMuX3dpZHRoOyBzaGlmdCArPSAyKSB7CiAgICAgICAgICB2YXIgcmV2U2hpZnQgPSB0aGlzLl93aWR0aCAtIHNoaWZ0IC0gMjsKICAgICAgICAgIHRoaXMuX2JpdHJldltqXSB8PSAoKGogPj4+IHNoaWZ0KSAmIDMpIDw8IHJldlNoaWZ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fb3V0ID0gbnVsbDsKICAgICAgdGhpcy5fZGF0YSA9IG51bGw7CiAgICAgIHRoaXMuX2ludiA9IDA7CiAgICB9CiAgICB2YXIgZmZ0ID0gRkZUOwoKICAgIEZGVC5wcm90b3R5cGUuZnJvbUNvbXBsZXhBcnJheSA9IGZ1bmN0aW9uIGZyb21Db21wbGV4QXJyYXkoY29tcGxleCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCBuZXcgQXJyYXkoY29tcGxleC5sZW5ndGggPj4+IDEpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXgubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzW2kgPj4+IDFdID0gY29tcGxleFtpXTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5jcmVhdGVDb21wbGV4QXJyYXkgPSBmdW5jdGlvbiBjcmVhdGVDb21wbGV4QXJyYXkoKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudG9Db21wbGV4QXJyYXkgPSBmdW5jdGlvbiB0b0NvbXBsZXhBcnJheShpbnB1dCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCB0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHJlc1tpXSA9IGlucHV0W2kgPj4+IDFdOwogICAgICAgIHJlc1tpICsgMV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUuY29tcGxldGVTcGVjdHJ1bSA9IGZ1bmN0aW9uIGNvbXBsZXRlU3BlY3RydW0oc3BlY3RydW0pIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLl9jc2l6ZTsKICAgICAgdmFyIGhhbGYgPSBzaXplID4+PiAxOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGhhbGY7IGkgKz0gMikgewogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpXSA9IHNwZWN0cnVtW2ldOwogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpICsgMV0gPSAtc3BlY3RydW1baSArIDFdOwogICAgICB9CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl90cmFuc2Zvcm00KCk7CiAgICAgIHRoaXMuX291dCA9IG51bGw7CiAgICAgIHRoaXMuX2RhdGEgPSBudWxsOwogICAgfTsKCiAgICBGRlQucHJvdG90eXBlLnJlYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiByZWFsVHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl9yZWFsVHJhbnNmb3JtNCgpOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5pbnZlcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gaW52ZXJzZVRyYW5zZm9ybShvdXQsIGRhdGEpIHsKICAgICAgaWYgKG91dCA9PT0gZGF0YSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCcpOwoKICAgICAgdGhpcy5fb3V0ID0gb3V0OwogICAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgICAgdGhpcy5faW52ID0gMTsKICAgICAgdGhpcy5fdHJhbnNmb3JtNCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykKICAgICAgICBvdXRbaV0gLz0gdGhpcy5zaXplOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgLy8gcmFkaXgtNCBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IFVzZXMgb2YgYHZhcmAgYXJlIGludGVudGlvbmFsIGZvciBvbGRlciBWOCB2ZXJzaW9uIHRoYXQgZG8gbm90CiAgICAvLyBzdXBwb3J0IGJvdGggYGxldCBjb21wb3VuZCBhc3NpZ25tZW50c2AgYW5kIGBjb25zdCBwaGlgCiAgICBGRlQucHJvdG90eXBlLl90cmFuc2Zvcm00ID0gZnVuY3Rpb24gX3RyYW5zZm9ybTQoKSB7CiAgICAgIHZhciBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIHZhciBzaXplID0gdGhpcy5fY3NpemU7CgogICAgICAvLyBJbml0aWFsIHN0ZXAgKHBlcm11dGUgYW5kIHRyYW5zZm9ybSkKICAgICAgdmFyIHdpZHRoID0gdGhpcy5fd2lkdGg7CiAgICAgIHZhciBzdGVwID0gMSA8PCB3aWR0aDsKICAgICAgdmFyIGxlbiA9IChzaXplIC8gc3RlcCkgPDwgMTsKCiAgICAgIHZhciBvdXRPZmY7CiAgICAgIHZhciB0OwogICAgICB2YXIgYml0cmV2ID0gdGhpcy5fYml0cmV2OwogICAgICBpZiAobGVuID09PSA0KSB7CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGVuID09PSA4CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm00KG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gbGVuID4+PiAyOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgLy8gRnVsbCBjYXNlCiAgICAgICAgICB2YXIgbGltaXQgPSBvdXRPZmYgKyBxdWFydGVyTGVuOwogICAgICAgICAgZm9yICh2YXIgaSA9IG91dE9mZiwgayA9IDA7IGkgPCBsaW1pdDsgaSArPSAyLCBrICs9IHN0ZXApIHsKICAgICAgICAgICAgY29uc3QgQSA9IGk7CiAgICAgICAgICAgIGNvbnN0IEIgPSBBICsgcXVhcnRlckxlbjsKICAgICAgICAgICAgY29uc3QgQyA9IEIgKyBxdWFydGVyTGVuOwogICAgICAgICAgICBjb25zdCBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgQXIgPSBvdXRbQV07CiAgICAgICAgICAgIGNvbnN0IEFpID0gb3V0W0EgKyAxXTsKICAgICAgICAgICAgY29uc3QgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIGNvbnN0IEJpID0gb3V0W0IgKyAxXTsKICAgICAgICAgICAgY29uc3QgQ3IgPSBvdXRbQ107CiAgICAgICAgICAgIGNvbnN0IENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgY29uc3QgRHIgPSBvdXRbRF07CiAgICAgICAgICAgIGNvbnN0IERpID0gb3V0W0QgKyAxXTsKCiAgICAgICAgICAgIC8vIE1pZGRsZSB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgTUFyID0gQXI7CiAgICAgICAgICAgIGNvbnN0IE1BaSA9IEFpOwoKICAgICAgICAgICAgY29uc3QgdGFibGVCciA9IHRhYmxlW2tdOwogICAgICAgICAgICBjb25zdCB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICBjb25zdCBNQnIgPSBCciAqIHRhYmxlQnIgLSBCaSAqIHRhYmxlQmk7CiAgICAgICAgICAgIGNvbnN0IE1CaSA9IEJyICogdGFibGVCaSArIEJpICogdGFibGVCcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2kgPSBpbnYgKiB0YWJsZVsyICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNQ3IgPSBDciAqIHRhYmxlQ3IgLSBDaSAqIHRhYmxlQ2k7CiAgICAgICAgICAgIGNvbnN0IE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRHIgPSB0YWJsZVszICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGkgPSBpbnYgKiB0YWJsZVszICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIGNvbnN0IE1EaSA9IERyICogdGFibGVEaSArIERpICogdGFibGVEcjsKCiAgICAgICAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgVDByID0gTUFyICsgTUNyOwogICAgICAgICAgICBjb25zdCBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIGNvbnN0IFQxciA9IE1BciAtIE1DcjsKICAgICAgICAgICAgY29uc3QgVDFpID0gTUFpIC0gTUNpOwogICAgICAgICAgICBjb25zdCBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIGNvbnN0IFQyaSA9IE1CaSArIE1EaTsKICAgICAgICAgICAgY29uc3QgVDNyID0gaW52ICogKE1CciAtIE1Ecik7CiAgICAgICAgICAgIGNvbnN0IFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKICAgICAgICAgICAgY29uc3QgRkFpID0gVDBpICsgVDJpOwoKICAgICAgICAgICAgY29uc3QgRkNyID0gVDByIC0gVDJyOwogICAgICAgICAgICBjb25zdCBGQ2kgPSBUMGkgLSBUMmk7CgogICAgICAgICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgICAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgICAgICAgIGNvbnN0IEZEciA9IFQxciAtIFQzaTsKICAgICAgICAgICAgY29uc3QgRkRpID0gVDFpICsgVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CiAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgb3V0W0MgKyAxXSA9IEZDaTsKICAgICAgICAgICAgb3V0W0RdID0gRkRyOwogICAgICAgICAgICBvdXRbRCArIDFdID0gRkRpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyByYWRpeC0yIGltcGxlbWVudGF0aW9uCiAgICAvLwogICAgLy8gTk9URTogT25seSBjYWxsZWQgZm9yIGxlbj00CiAgICBGRlQucHJvdG90eXBlLl9zaW5nbGVUcmFuc2Zvcm0yID0gZnVuY3Rpb24gX3NpbmdsZVRyYW5zZm9ybTIob3V0T2ZmLCBvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IGV2ZW5JID0gZGF0YVtvZmYgKyAxXTsKICAgICAgY29uc3Qgb2RkUiA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IG9kZEkgPSBkYXRhW29mZiArIHN0ZXAgKyAxXTsKCiAgICAgIGNvbnN0IGxlZnRSID0gZXZlblIgKyBvZGRSOwogICAgICBjb25zdCBsZWZ0SSA9IGV2ZW5JICsgb2RkSTsKICAgICAgY29uc3QgcmlnaHRSID0gZXZlblIgLSBvZGRSOwogICAgICBjb25zdCByaWdodEkgPSBldmVuSSAtIG9kZEk7CgogICAgICBvdXRbb3V0T2ZmXSA9IGxlZnRSOwogICAgICBvdXRbb3V0T2ZmICsgMV0gPSBsZWZ0STsKICAgICAgb3V0W291dE9mZiArIDJdID0gcmlnaHRSOwogICAgICBvdXRbb3V0T2ZmICsgM10gPSByaWdodEk7CiAgICB9OwoKICAgIC8vIHJhZGl4LTQKICAgIC8vCiAgICAvLyBOT1RFOiBPbmx5IGNhbGxlZCBmb3IgbGVuPTgKICAgIEZGVC5wcm90b3R5cGUuX3NpbmdsZVRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlVHJhbnNmb3JtNChvdXRPZmYsIG9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuX291dDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7CiAgICAgIGNvbnN0IGludiA9IHRoaXMuX2ludiA/IC0xIDogMTsKICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwICogMjsKICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwICogMzsKCiAgICAgIC8vIE9yaWdpbmFsIHZhbHVlcwogICAgICBjb25zdCBBciA9IGRhdGFbb2ZmXTsKICAgICAgY29uc3QgQWkgPSBkYXRhW29mZiArIDFdOwogICAgICBjb25zdCBCciA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IEJpID0gZGF0YVtvZmYgKyBzdGVwICsgMV07CiAgICAgIGNvbnN0IENyID0gZGF0YVtvZmYgKyBzdGVwMl07CiAgICAgIGNvbnN0IENpID0gZGF0YVtvZmYgKyBzdGVwMiArIDFdOwogICAgICBjb25zdCBEciA9IGRhdGFbb2ZmICsgc3RlcDNdOwogICAgICBjb25zdCBEaSA9IGRhdGFbb2ZmICsgc3RlcDMgKyAxXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDBpID0gQWkgKyBDaTsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDFpID0gQWkgLSBDaTsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDJpID0gQmkgKyBEaTsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwogICAgICBjb25zdCBUM2kgPSBpbnYgKiAoQmkgLSBEaSk7CgogICAgICAvLyBGaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgRkFyID0gVDByICsgVDJyOwogICAgICBjb25zdCBGQWkgPSBUMGkgKyBUMmk7CgogICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKICAgICAgY29uc3QgRkNpID0gVDBpIC0gVDJpOwoKICAgICAgY29uc3QgRkRyID0gVDFyIC0gVDNpOwogICAgICBjb25zdCBGRGkgPSBUMWkgKyBUM3I7CgogICAgICBvdXRbb3V0T2ZmXSA9IEZBcjsKICAgICAgb3V0W291dE9mZiArIDFdID0gRkFpOwogICAgICBvdXRbb3V0T2ZmICsgMl0gPSBGQnI7CiAgICAgIG91dFtvdXRPZmYgKyAzXSA9IEZCaTsKICAgICAgb3V0W291dE9mZiArIDRdID0gRkNyOwogICAgICBvdXRbb3V0T2ZmICsgNV0gPSBGQ2k7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICAvLyBSZWFsIGlucHV0IHJhZGl4LTQgaW1wbGVtZW50YXRpb24KICAgIEZGVC5wcm90b3R5cGUuX3JlYWxUcmFuc2Zvcm00ID0gZnVuY3Rpb24gX3JlYWxUcmFuc2Zvcm00KCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5fb3V0OwogICAgICB2YXIgc2l6ZSA9IHRoaXMuX2NzaXplOwoKICAgICAgLy8gSW5pdGlhbCBzdGVwIChwZXJtdXRlIGFuZCB0cmFuc2Zvcm0pCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoOwogICAgICB2YXIgc3RlcCA9IDEgPDwgd2lkdGg7CiAgICAgIHZhciBsZW4gPSAoc2l6ZSAvIHN0ZXApIDw8IDE7CgogICAgICB2YXIgb3V0T2ZmOwogICAgICB2YXIgdDsKICAgICAgdmFyIGJpdHJldiA9IHRoaXMuX2JpdHJldjsKICAgICAgaWYgKGxlbiA9PT0gNCkgewogICAgICAgIGZvciAob3V0T2ZmID0gMCwgdCA9IDA7IG91dE9mZiA8IHNpemU7IG91dE9mZiArPSBsZW4sIHQrKykgewogICAgICAgICAgY29uc3Qgb2ZmID0gYml0cmV2W3RdOwogICAgICAgICAgdGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLCBvZmYgPj4+IDEsIHN0ZXAgPj4+IDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZW4gPT09IDgKICAgICAgICBmb3IgKG91dE9mZiA9IDAsIHQgPSAwOyBvdXRPZmYgPCBzaXplOyBvdXRPZmYgKz0gbGVuLCB0KyspIHsKICAgICAgICAgIGNvbnN0IG9mZiA9IGJpdHJldlt0XTsKICAgICAgICAgIHRoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG91dE9mZiwgb2ZmID4+PiAxLCBzdGVwID4+PiAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBoYWxmTGVuID0gbGVuID4+PiAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gaGFsZkxlbiA+Pj4gMTsKICAgICAgICB2YXIgaHF1YXJ0ZXJMZW4gPSBxdWFydGVyTGVuID4+PiAxOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDw9IGhxdWFydGVyTGVuOyBpICs9IDIsIGsgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgQSA9IG91dE9mZiArIGk7CiAgICAgICAgICAgIHZhciBCID0gQSArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBDID0gQiArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgdmFyIEFyID0gb3V0W0FdOwogICAgICAgICAgICB2YXIgQWkgPSBvdXRbQSArIDFdOwogICAgICAgICAgICB2YXIgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIHZhciBCaSA9IG91dFtCICsgMV07CiAgICAgICAgICAgIHZhciBDciA9IG91dFtDXTsKICAgICAgICAgICAgdmFyIENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgdmFyIERyID0gb3V0W0RdOwogICAgICAgICAgICB2YXIgRGkgPSBvdXRbRCArIDFdOwoKICAgICAgICAgICAgLy8gTWlkZGxlIHZhbHVlcwogICAgICAgICAgICB2YXIgTUFyID0gQXI7CiAgICAgICAgICAgIHZhciBNQWkgPSBBaTsKCiAgICAgICAgICAgIHZhciB0YWJsZUJyID0gdGFibGVba107CiAgICAgICAgICAgIHZhciB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICB2YXIgTUJyID0gQnIgKiB0YWJsZUJyIC0gQmkgKiB0YWJsZUJpOwogICAgICAgICAgICB2YXIgTUJpID0gQnIgKiB0YWJsZUJpICsgQmkgKiB0YWJsZUJyOwoKICAgICAgICAgICAgdmFyIHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIHZhciB0YWJsZUNpID0gaW52ICogdGFibGVbMiAqIGsgKyAxXTsKICAgICAgICAgICAgdmFyIE1DciA9IENyICogdGFibGVDciAtIENpICogdGFibGVDaTsKICAgICAgICAgICAgdmFyIE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIHZhciB0YWJsZURyID0gdGFibGVbMyAqIGtdOwogICAgICAgICAgICB2YXIgdGFibGVEaSA9IGludiAqIHRhYmxlWzMgKiBrICsgMV07CiAgICAgICAgICAgIHZhciBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIHZhciBNRGkgPSBEciAqIHRhYmxlRGkgKyBEaSAqIHRhYmxlRHI7CgogICAgICAgICAgICAvLyBQcmUtRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBUMHIgPSBNQXIgKyBNQ3I7CiAgICAgICAgICAgIHZhciBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIHZhciBUMXIgPSBNQXIgLSBNQ3I7CiAgICAgICAgICAgIHZhciBUMWkgPSBNQWkgLSBNQ2k7CiAgICAgICAgICAgIHZhciBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIHZhciBUMmkgPSBNQmkgKyBNRGk7CiAgICAgICAgICAgIHZhciBUM3IgPSBpbnYgKiAoTUJyIC0gTURyKTsKICAgICAgICAgICAgdmFyIFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBGQXIgPSBUMHIgKyBUMnI7CiAgICAgICAgICAgIHZhciBGQWkgPSBUMGkgKyBUMmk7CgogICAgICAgICAgICB2YXIgRkJyID0gVDFyICsgVDNpOwogICAgICAgICAgICB2YXIgRkJpID0gVDFpIC0gVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CgogICAgICAgICAgICAvLyBPdXRwdXQgZmluYWwgbWlkZGxlIHBvaW50CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyIEZDciA9IFQwciAtIFQycjsKICAgICAgICAgICAgICB2YXIgRkNpID0gVDBpIC0gVDJpOwogICAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgICBvdXRbQyArIDFdID0gRkNpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIG91cnNlbHZlcwogICAgICAgICAgICBpZiAoaSA9PT0gaHF1YXJ0ZXJMZW4pCiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBJbiB0aGUgZmxpcHBlZCBjYXNlOgogICAgICAgICAgICAvLyBNQWkgPSAtTUFpCiAgICAgICAgICAgIC8vIE1Ccj0tTUJpLCBNQmk9LU1CcgogICAgICAgICAgICAvLyBNQ3I9LU1DcgogICAgICAgICAgICAvLyBNRHI9TURpLCBNRGk9TURyCiAgICAgICAgICAgIHZhciBTVDByID0gVDFyOwogICAgICAgICAgICB2YXIgU1QwaSA9IC1UMWk7CiAgICAgICAgICAgIHZhciBTVDFyID0gVDByOwogICAgICAgICAgICB2YXIgU1QxaSA9IC1UMGk7CiAgICAgICAgICAgIHZhciBTVDJyID0gLWludiAqIFQzaTsKICAgICAgICAgICAgdmFyIFNUMmkgPSAtaW52ICogVDNyOwogICAgICAgICAgICB2YXIgU1QzciA9IC1pbnYgKiBUMmk7CiAgICAgICAgICAgIHZhciBTVDNpID0gLWludiAqIFQycjsKCiAgICAgICAgICAgIHZhciBTRkFyID0gU1QwciArIFNUMnI7CiAgICAgICAgICAgIHZhciBTRkFpID0gU1QwaSArIFNUMmk7CgogICAgICAgICAgICB2YXIgU0ZCciA9IFNUMXIgKyBTVDNpOwogICAgICAgICAgICB2YXIgU0ZCaSA9IFNUMWkgLSBTVDNyOwoKICAgICAgICAgICAgdmFyIFNBID0gb3V0T2ZmICsgcXVhcnRlckxlbiAtIGk7CiAgICAgICAgICAgIHZhciBTQiA9IG91dE9mZiArIGhhbGZMZW4gLSBpOwoKICAgICAgICAgICAgb3V0W1NBXSA9IFNGQXI7CiAgICAgICAgICAgIG91dFtTQSArIDFdID0gU0ZBaTsKICAgICAgICAgICAgb3V0W1NCXSA9IFNGQnI7CiAgICAgICAgICAgIG91dFtTQiArIDFdID0gU0ZCaTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gcmFkaXgtMiBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49NAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTIgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IG9kZFIgPSBkYXRhW29mZiArIHN0ZXBdOwoKICAgICAgY29uc3QgbGVmdFIgPSBldmVuUiArIG9kZFI7CiAgICAgIGNvbnN0IHJpZ2h0UiA9IGV2ZW5SIC0gb2RkUjsKCiAgICAgIG91dFtvdXRPZmZdID0gbGVmdFI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IHJpZ2h0UjsKICAgICAgb3V0W291dE9mZiArIDNdID0gMDsKICAgIH07CgogICAgLy8gcmFkaXgtNAogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49OAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTQob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwogICAgICBjb25zdCBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcCAqIDI7CiAgICAgIGNvbnN0IHN0ZXAzID0gc3RlcCAqIDM7CgogICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgQXIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IEJyID0gZGF0YVtvZmYgKyBzdGVwXTsKICAgICAgY29uc3QgQ3IgPSBkYXRhW29mZiArIHN0ZXAyXTsKICAgICAgY29uc3QgRHIgPSBkYXRhW29mZiArIHN0ZXAzXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwoKICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKCiAgICAgIGNvbnN0IEZCciA9IFQxcjsKICAgICAgY29uc3QgRkJpID0gLVQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKCiAgICAgIGNvbnN0IEZEciA9IFQxcjsKICAgICAgY29uc3QgRkRpID0gVDNyOwoKICAgICAgb3V0W291dE9mZl0gPSBGQXI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IEZCcjsKICAgICAgb3V0W291dE9mZiArIDNdID0gRkJpOwogICAgICBvdXRbb3V0T2ZmICsgNF0gPSBGQ3I7CiAgICAgIG91dFtvdXRPZmYgKyA1XSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICB2YXIgRkZUJDEgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmZ0KTsKCiAgICBjb25zdCBCVUZGRVJFRF9CTE9DS19TSVpFID0gMjA0ODsKICAgIGZ1bmN0aW9uIGdlbkhhbm5XaW5kb3cobGVuZ3RoKSB7CiAgICAgICAgbGV0IHdpbiA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdpbltpXSA9IDAuNSAqICgxIC0gTWF0aC5jb3MoMiAqIE1hdGguUEkgKiBpIC8gbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3aW47CiAgICB9CiAgICBjbGFzcyBQaGFzZVZvY29kZXJQcm9jZXNzb3IgZXh0ZW5kcyBPTEFQcm9jZXNzb3IgewogICAgICAgIGZmdFNpemU7CiAgICAgICAgdGltZUN1cnNvcjsKICAgICAgICBoYW5uV2luZG93OwogICAgICAgIGZmdDsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlcjsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ7CiAgICAgICAgdGltZUNvbXBsZXhCdWZmZXI7CiAgICAgICAgbWFnbml0dWRlczsKICAgICAgICBwZWFrSW5kZXhlczsKICAgICAgICBuYlBlYWtzOwogICAgICAgIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaXRjaEZhY3RvcicsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLjAKICAgICAgICAgICAgICAgIH1dOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMucHJvY2Vzc29yT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogQlVGRkVSRURfQkxPQ0tfU0laRSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMuZmZ0U2l6ZSA9IHRoaXMuYmxvY2tTaXplOwogICAgICAgICAgICB0aGlzLnRpbWVDdXJzb3IgPSAwOwogICAgICAgICAgICB0aGlzLmhhbm5XaW5kb3cgPSBnZW5IYW5uV2luZG93KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgLy8gcHJlcGFyZSBGRlQgYW5kIHByZS1hbGxvY2F0ZSBidWZmZXJzCiAgICAgICAgICAgIHRoaXMuZmZ0ID0gbmV3IEZGVCQxKHRoaXMuZmZ0U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy50aW1lQ29tcGxleEJ1ZmZlciA9IHRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICAgICAgICB0aGlzLm1hZ25pdHVkZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZSAvIDIgKyAxKTsKICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlcyA9IG5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLm5iUGVha3MgPSAwOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzT0xBKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIGNvbnN0IHBpdGNoRmFjdG9yID0gcGFyYW1ldGVycy5waXRjaEZhY3RvcltwYXJhbWV0ZXJzLnBpdGNoRmFjdG9yLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dHNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhhbm5XaW5kb3coaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlciwgaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQZWFrcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRQZWFrcyhwaXRjaEZhY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCBvdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIYW5uV2luZG93KG91dHB1dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lQ3Vyc29yICs9IHRoaXMuaG9wU2l6ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGFwcGx5SGFubldpbmRvdyhpbnB1dCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGlucHV0W2ldICo9IHRoaXMuaGFubldpbmRvd1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb21wdXRlTWFnbml0dWRlcygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdGhpcy5tYWduaXR1ZGVzLmxlbmd0aDsgaSsrLCBqICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2pdOwogICAgICAgICAgICAgICAgY29uc3QgaW1hZyA9IHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbaiArIDFdOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGVzW2ldID0gcmVhbCAqKiAyICsgaW1hZyAqKiAyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmRQZWFrcygpIHsKICAgICAgICAgICAgdGhpcy5uYlBlYWtzID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGVuZCA9IHRoaXMubWFnbml0dWRlcy5sZW5ndGggLSAyOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pdHVkZXNbaSAtIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSAtIDJdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDJdID49IG1hZykgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3MrK10gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0UGVha3MocGl0Y2hGYWN0b3IpIHsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iUGVha3M7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGVha0luZGV4ID0gdGhpcy5wZWFrSW5kZXhlc1tpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlYWtJbmRleFNoaWZ0ZWQgPSBNYXRoLnJvdW5kKHBlYWtJbmRleCAqIHBpdGNoRmFjdG9yKTsKICAgICAgICAgICAgICAgIGlmIChwZWFrSW5kZXhTaGlmdGVkID4gdGhpcy5tYWduaXR1ZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoaSA+IDApID8gcGVha0luZGV4IC0gTWF0aC5mbG9vcigocGVha0luZGV4IC0gdGhpcy5wZWFrSW5kZXhlc1tpIC0gMV0pIC8gMikgOiAwOwogICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKGkgPCB0aGlzLm5iUGVha3MgLSAxKSA/IHBlYWtJbmRleCArIE1hdGguY2VpbCgodGhpcy5wZWFrSW5kZXhlc1tpICsgMV0gLSBwZWFrSW5kZXgpIC8gMikgOiB0aGlzLmZmdFNpemU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJbmRleCAtIHBlYWtJbmRleDsgaiA8IGVuZEluZGV4IC0gcGVha0luZGV4OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5JbmRleCA9IHBlYWtJbmRleCArIGo7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluSW5kZXhTaGlmdGVkID0gcGVha0luZGV4U2hpZnRlZCArIGo7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbkluZGV4U2hpZnRlZCA+PSB0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWVnYURlbHRhID0gMiAqIE1hdGguUEkgKiAoYmluSW5kZXhTaGlmdGVkIC0gYmluSW5kZXgpIC8gdGhpcy5mZnRTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoYXNlU2hpZnRSZWFsID0gTWF0aC5jb3Mob21lZ2FEZWx0YSAqIHRoaXMudGltZUN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VTaGlmdEltYWcgPSBNYXRoLnNpbihvbWVnYURlbHRhICogdGhpcy50aW1lQ3Vyc29yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFJlYWwgPSBiaW5JbmRleCAqIDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbWFnID0gaW5kZXhSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2luZGV4UmVhbF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbWFnID0gdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltpbmRleEltYWddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZFJlYWwgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0UmVhbCAtIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRJbWFnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZEltYWcgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0SW1hZyArIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRSZWFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZFJlYWwgPSBiaW5JbmRleFNoaWZ0ZWQgKiAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZEltYWcgPSBpbmRleFNoaWZ0ZWRSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtpbmRleFNoaWZ0ZWRSZWFsXSArPSB2YWx1ZVNoaWZ0ZWRSZWFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2luZGV4U2hpZnRlZEltYWddICs9IHZhbHVlU2hpZnRlZEltYWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBAdHMtaWdub3JlCiAgICByZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2RlciIsIFBoYXNlVm9jb2RlclByb2Nlc3Nvcik7CiAgICBjb25zb2xlLmxvZygiUGhhc2VWb2NvZGVyUHJvY2Vzc29yIHJlZ2lzdGVyZWQiKTsKCiAgICBleHBvcnRzLlBoYXNlVm9jb2RlclByb2Nlc3NvciA9IFBoYXNlVm9jb2RlclByb2Nlc3NvcjsKCiAgICByZXR1cm4gZXhwb3J0czsKCn0pKHt9KTsK";class fw{constructor(e){V(this,"maxSize");V(this,"cache");this.maxSize=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}has(e){return this.cache.has(e)}}const pw=100;class Xu{static setCacheExpirationTime(e){this.cacheExpirationTime=e}static async openCache(){try{return await caches.open("audio-cache")}catch(e){throw console.error("Failed to open cache:",e),e}}static async getBufferFromCache(e,n){try{const r=await n.match(e);return r&&r.ok?await r.arrayBuffer():null}catch(r){return console.error("Failed to get data from cache:",r),null}}static async fetchAndCacheBuffer(e,n,r,i){try{const o=new Headers;r&&o.append("If-None-Match",r),i&&o.append("If-Modified-Since",i);const s=await fetch(e,{headers:o}),a=s.clone();if(s.status===200){const c=s.headers.get("ETag")||void 0,l=s.headers.get("Last-Modified")||void 0,u={url:e,etag:c,lastModified:l,timestamp:Date.now()};await n.put(e,a),await n.put(e+":meta",new Response(JSON.stringify(u),{headers:{"Content-Type":"application/json"}}))}else if(s.status===304){const c=await n.match(e);if(c)return await c.arrayBuffer()}return await s.arrayBuffer()}catch(o){throw console.error("Failed to fetch and cache data:",o),o}}static async decodeAudioData(e,n){try{return await e.decodeAudioData(n)}catch(r){throw console.error("Failed to decode audio data:",r),r}}static async getMetadataFromCache(e,n){try{const r=await n.match(e+":meta");return r&&r.ok?await r.json():null}catch(r){return console.error("Failed to get metadata from cache:",r),null}}static async getAudioBuffer(e,n){if(this.decodedBuffers.has(n))return this.decodedBuffers.get(n);if(n.startsWith("data:")){const a=n.split(",")[1],c=Uint8Array.from(atob(a),u=>u.charCodeAt(0)).buffer,l=await this.decodeAudioData(e,c);return this.decodedBuffers.set(n,l),l}const r=await this.openCache();let i=this.pendingRequests.get(n);if(i)return i;const o=await this.getMetadataFromCache(n,r);let s=!o;if(o&&(o.etag||o.lastModified?s=!1:o.timestamp?s=Date.now()-o.timestamp>this.cacheExpirationTime:s=!0),s)return i=this.fetchAndCacheBuffer(n,r,o==null?void 0:o.etag,o==null?void 0:o.lastModified).then(a=>this.decodeAudioData(e,a)).then(a=>(this.decodedBuffers.set(n,a),a)).finally(()=>{this.pendingRequests.delete(n)}),this.pendingRequests.set(n,i),i;{const a=await this.getBufferFromCache(n,r);if(a){const c=await this.decodeAudioData(e,a);return this.decodedBuffers.set(n,c),c}}throw new Error("Failed to retrieve audio buffer")}static clearMemoryCache(){this.decodedBuffers=new fw(pw),this.pendingRequests.clear()}}V(Xu,"pendingRequests",new Map),V(Xu,"decodedBuffers",new fw(pw)),V(Xu,"cacheExpirationTime",24*60*60*1e3);class gw{constructor(e=[]){V(this,"_position",[0,0,0]);V(this,"loopCount",0);V(this,"playIndex",0);this.sounds=e}preplayRandom(){return this.randomSound().preplay()[0]}playRandom(){const e=this.preplayRandom();return e.play(),e}preplayOrdered(e=!0){if(this.sounds.length===0)throw new Error("Cannot prepare an ordered sound from an empty group");const n=this.sounds[this.playIndex].preplay()[0];return this.playIndex++,this.playIndex>=this.sounds.length&&(e?this.playIndex=0:this.playIndex=this.sounds.length),n}playOrdered(e=!0){const n=this.preplayOrdered(e);return n.play(),n}get duration(){return this.sounds.map(e=>e.duration).reduce((e,n)=>Math.max(e,n),0)}seek(e){this.sounds.forEach(n=>n.seek&&n.seek(e))}addSound(e){this.sounds.push(e)}randomSound(){if(this.sounds.length===0)throw new Error("Cannot get a random sound from an empty group");const e=Math.floor(Math.random()*this.sounds.length);return this.sounds[e]}preplay(){return this.sounds.reduce((e,n)=>(n.loop&&n.loop(this.loopCount),e.concat(n.preplay())),[])}play(){return this.preplay().map(e=>e.play()[0])}get isPlaying(){return this.sounds.some(e=>e.isPlaying)}stop(){this.sounds.forEach(e=>e.stop())}pause(){this.sounds.forEach(e=>e.pause())}loop(e){return e===void 0?this.loopCount:(this.loopCount=e,this.sounds.forEach(n=>n.loop(e)),this.loopCount)}addFilter(e){this.sounds.forEach(n=>n.addFilter(e))}removeFilter(e){this.sounds.forEach(n=>n.removeFilter(e))}set position(e){this._position=e,this.sounds.forEach(n=>n.position=this._position)}get position(){return this._position}get volume(){return this.sounds.map(e=>e.volume).reduce((e,n)=>e+n,0)/this.sounds.length}set volume(e){this.sounds.forEach(n=>n.volume=e)}get playbackRate(){return this.sounds.length===0?1:this.sounds[0].playbackRate}set playbackRate(e){this.sounds.forEach(n=>n.playbackRate=e)}}let Ul=class{constructor(){V(this,"_filters",[])}addFilter(e){this._filters.push(e)}removeFilter(e){this._filters=this._filters.filter(n=>n.frequency.value!==e.frequency.value&&n.type!==e.type&&n.Q.value!==e.Q.value&&n.gain.value!==e.gain.value)}applyFilters(e){return this._filters.reduce((n,r)=>(n.connect(r),r),e),this._filters.length>0?this._filters[this._filters.length-1]:e}get filters(){return this._filters}addFilters(e){e.forEach(n=>this.addFilter(n))}removeFilters(e){e.forEach(n=>this.removeFilter(n))}},_4=class extends Ul{constructor(n,r,i,o=0){super();V(this,"context");V(this,"source");V(this,"gainNode");V(this,"panner");this.source=n,this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner).connect(this.gainNode),this.refreshFilters()}get duration(){return 0}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return[this]}get isPlaying(){return!!this.source}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.stop())}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!1)}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!0)}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,o]=n;this.panner.positionX.value=r,this.panner.positionY.value=i,this.panner.positionZ.value=o}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.source||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.source;this.source.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}get playbackRate(){return 1}set playbackRate(n){}},O4=class extends Ul{constructor(n){super();V(this,"context");V(this,"_position",[0,0,0]);V(this,"loopCount",0);V(this,"prevVolume",1);V(this,"microphoneGainNode");V(this,"streamPlayback");V(this,"stream");V(this,"streamSource");this.context=n,this.microphoneGainNode=this.context.createGain()}play(){return this.stream||navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{this.stream=n,this.streamSource=this.context.createMediaStreamSource(this.stream),this.streamPlayback=new _4(this.streamSource,this.microphoneGainNode,this.context),this.streamPlayback.play()}).catch(n=>{console.error("Error initializing microphone stream:",n)}),this.streamPlayback?[this.streamPlayback]:[]}get duration(){return 0}seek(n){}get isPlaying(){return!!this.streamPlayback}stop(){this.streamPlayback&&(this.streamPlayback.stop(),this.streamPlayback=void 0)}pause(){this.streamPlayback&&this.streamPlayback.pause()}resume(){this.streamPlayback&&this.streamPlayback.resume()}addFilter(n){this.streamPlayback&&this.streamPlayback.addFilter(n)}removeFilter(n){this.streamPlayback&&this.streamPlayback.removeFilter(n)}get volume(){return this.streamPlayback?this.streamPlayback.volume:0}set volume(n){this.streamPlayback&&(this.streamPlayback.volume=n)}get position(){return[0,0,0]}set position(n){}loop(n){return 0}get playbackRate(){return 1}set playbackRate(n){}};function SR(t){class e extends t{constructor(){super(...arguments);V(this,"playbacks",[]);V(this,"_position",[0,0,0]);V(this,"_stereoPan",0);V(this,"_threeDOptions",{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",panningModel:"HRTF",refDistance:1,rolloffFactor:1,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0});V(this,"_volume",1)}play(){const i=this.preplay();return i.forEach(o=>o.play()),i}stop(){this.playbacks.forEach(i=>i.stop()),this.playbacks=[]}pause(){this.playbacks.forEach(i=>i.pause())}addFilter(i){super.addFilter(i),this.playbacks.forEach(o=>o.addFilter(i))}removeFilter(i){super.removeFilter(i),this.playbacks.forEach(o=>o.removeFilter(i))}get isPlaying(){return this.playbacks.some(i=>i.isPlaying)}get position(){return[this._threeDOptions.positionX,this._threeDOptions.positionY,this._threeDOptions.positionZ]}set position(i){this._threeDOptions.positionX=i[0],this._threeDOptions.positionY=i[1],this._threeDOptions.positionZ=i[2],this.playbacks.forEach(o=>o.position=i)}get threeDOptions(){return this._threeDOptions}set threeDOptions(i){this._threeDOptions={...this._threeDOptions,...i},this.playbacks.forEach(o=>o.threeDOptions=this._threeDOptions)}get stereoPan(){return this._stereoPan}set stereoPan(i){this._stereoPan=i,this.playbacks.forEach(o=>o.stereoPan=i)}get volume(){return this._volume}set volume(i){this._volume=i,this.playbacks.forEach(o=>o.volume=i)}}return e}function bR(t){class e extends t{constructor(){super(...arguments);V(this,"panner");V(this,"_panType","stereo")}get panType(){return this._panType}setPanType(i,o){this._panType=i,i==="stereo"?this.panner=o.createStereoPanner():this.panner=o.createPanner()}setPannerNode(i){this.panner=i}get stereoPan(){return this.panType==="stereo"?this.panner.pan.value:null}set stereoPan(i){if(this.panType!=="stereo")throw new Error("Stereo panning is not available when using HRTF.");if(!this.panner)throw new Error("Cannot set stereo pan of a sound that has been cleaned up");i=mw(i,-1,1),this.panner.pan.setValueAtTime(mw(i,-1,1),this.panner.context.currentTime)}get threeDOptions(){if(!this.panner)throw new Error("Cannot get 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get 3D options of a sound that is not using HRTF");const i=this.panner;return{coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,channelCount:this.panner.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,panningModel:i.panningModel,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,positionX:i.positionX.value,positionY:i.positionY.value,positionZ:i.positionZ.value,orientationX:i.orientationX.value,orientationY:i.orientationY.value,orientationZ:i.orientationZ.value}}set threeDOptions(i){if(!this.panner)throw new Error("Cannot set 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot set 3D options of a sound that is not using HRTF");const o=this.panner;o.coneInnerAngle=i.coneInnerAngle!==void 0?i.coneInnerAngle:o.coneInnerAngle,o.coneOuterAngle=i.coneOuterAngle!==void 0?i.coneOuterAngle:o.coneOuterAngle,o.coneOuterGain=i.coneOuterGain!==void 0?i.coneOuterGain:o.coneOuterGain,o.distanceModel=i.distanceModel||o.distanceModel,o.maxDistance=i.maxDistance!==void 0?i.maxDistance:o.maxDistance,o.channelCount=i.channelCount!==void 0?i.channelCount:o.channelCount,o.channelCountMode=i.channelCountMode||o.channelCountMode,o.channelInterpretation=i.channelInterpretation||o.channelInterpretation,o.panningModel=i.panningModel||o.panningModel,o.refDistance=i.refDistance!==void 0?i.refDistance:o.refDistance,o.rolloffFactor=i.rolloffFactor!==void 0?i.rolloffFactor:o.rolloffFactor,o.positionX.value=i.positionX!==void 0?i.positionX:o.positionX.value,o.positionY.value=i.positionY!==void 0?i.positionY:o.positionY.value,o.positionZ.value=i.positionZ!==void 0?i.positionZ:o.positionZ.value,o.orientationX.value=i.orientationX!==void 0?i.orientationX:o.orientationX.value,o.orientationY.value=i.orientationY!==void 0?i.orientationY:o.orientationY.value,o.orientationZ.value=i.orientationZ!==void 0?i.orientationZ:o.orientationZ.value}set position(i){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot move a sound that is not using HRTF");const[o,s,a]=i,c=this.panner;c.positionX.value=o,c.positionY.value=s,c.positionZ.value=a}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get position of a sound that is not using HRTF");const i=this.panner;return[i.positionX.value,i.positionY.value,i.positionZ.value]}}return e}function mw(t,e,n){return Math.min(Math.max(t,e),n)}function wR(t){class e extends t{constructor(){super(...arguments);V(this,"gainNode")}setGainNode(i){this.gainNode=i}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(i){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=i}}return e}class AR extends bR(wR(Ul)){constructor(){super(...arguments);V(this,"source");V(this,"_playing",!1);V(this,"origin")}get isPlaying(){return this.source?this._playing:!1}}class RC extends AR{constructor(n,r,i){super();V(this,"context");V(this,"loopCount",0);V(this,"currentLoop",0);V(this,"buffer");V(this,"_startTime",0);V(this,"_offset",0);V(this,"_state",0);V(this,"_pauseTime",0);V(this,"loopEnded",()=>{if(this.source&&this._state===1){if(this.currentLoop++,this.loopCount!=="infinite"&&this.currentLoop>this.loopCount)return this.stop();this.buffer?(this.recreateSource(),this.source.start(0)):this.seek(0),this._state=1}});if(this.origin=n,this.context=n.context,this.loopCount=n.loopCount,this.setPanType(n.panType,n.context),this.source=r,"buffer"in r&&r.buffer&&(this.buffer=r.buffer),"mediaElement"in r&&r.mediaElement)r.mediaElement.onended=this.loopEnded;else if("onended"in r)r.onended=this.loopEnded;else throw new Error("Unsupported source type");this.source.connect(this.panner),this.setGainNode(i),this.panner.connect(this.gainNode),this.refreshFilters()}get isPlaying(){return this._state===1}get duration(){if(!this.buffer)throw new Error("Cannot get duration of a sound that has been cleaned up");return this.buffer.duration}get playbackRate(){if(!this.source)throw new Error("Cannot get playback rate of a sound that has been cleaned up");if("playbackRate"in this.source)return this.source.playbackRate.value;if("mediaElement"in this.source&&this.source.mediaElement)return this.source.mediaElement.playbackRate;throw new Error("Unsupported source type")}set playbackRate(n){if(!this.source)throw new Error("Cannot set playback rate of a sound that has been cleaned up");"playbackRate"in this.source&&(this.source.playbackRate.value=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.playbackRate=n)}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return this._state===2?this._offset+=this.context.currentTime-this._pauseTime:this._state!==1&&this.recreateSource(),"mediaElement"in this.source&&this.source.mediaElement?(this.source.mediaElement.currentTime=this._offset,this.source.mediaElement.play()):"start"in this.source&&this.source.start&&this.source.start(0,this._offset),this._startTime=this.context.currentTime-this._offset,this._state=1,[this]}pause(){!this.source||this._state!==1||(this._state=2,this._pauseTime=this.context.currentTime,"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.pause():"stop"in this.source&&this.source.stop())}seek(n){if(!this.source||!this.gainNode||!this.panner)throw new Error("Cannot seek a sound that has been cleaned up");const r=this.isPlaying;r&&this.stop(),this._offset=n,r&&this.play()}get currentTime(){switch(this._state){case 0:case 3:return this._offset;case 2:return this._pauseTime-this._startTime+this._offset;case 1:return this.context.currentTime-this._startTime+this._offset}}recreateSource(){if(!this.buffer||!this.panner||!this.context||!this.gainNode)throw new Error("Cannot recreate source of a sound that has been cleaned up");this.source&&this.source.disconnect(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.panner),this.source.onended=this.loopEnded,this.refreshFilters()}set sourceLoop(n){if(!this.source)throw new Error("Cannot set loop on a sound that has been cleaned up");"loop"in this.source&&(this.source.loop=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.loop=n)}cleanup(){this.source&&(this.source.disconnect(),this.source=void 0),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=void 0),this._filters.forEach(n=>{n&&n.disconnect()}),this._filters=[]}loop(n){if(!this.source)throw new Error("Cannot loop a sound that has been cleaned up");if(n!==void 0&&(this.isPlaying&&isFinite(Number(n))&&(n=Number(n)-1),this.loopCount=n,this.currentLoop=0),"mediaElement"in this.source&&this.source.mediaElement){const r=this.source.mediaElement;r.loop=this.loopCount==="infinite"}else if("loop"in this.source)this.source.loop=this.loopCount==="infinite",this.source.buffer&&(this.source.loopEnd=this.source.buffer.duration,this.source.loopStart=0);else throw new Error("Unsupported source type");return this.loopCount}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this._state===3||this._state===0||(this._state=3,this._offset=0,this._pauseTime=0,"stop"in this.source&&this.source.stop(),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.pause(),this.source.mediaElement.currentTime=0))}addFilter(n){const r=n.context.createBiquadFilter();r.type=n.type,r.frequency.value=n.frequency.value,r.Q.value=n.Q.value,super.addFilter(r),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}clone(n={}){if(!this.source||!this.gainNode||!this.context)throw new Error("Cannot clone a sound that has been cleaned up");const r=n.panType||this.panType,i=this.context.createGain();let o;if("buffer"in this.source&&this.source.buffer)o=this.context.createBufferSource(),o.buffer=this.source.buffer;else if("mediaElement"in this.source&&this.source.mediaElement)o=this.context.createMediaElementSource(this.source.mediaElement);else throw new Error("Unsupported source type");const s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=new RC(this.origin,o,i);return a.loopCount=s,a.setPanType(r,this.context),a.volume=this.volume,a}}let Oh=class kR extends SR(Ul){constructor(n,r,i,o,s=Ad.Buffer,a="HRTF"){super();V(this,"buffer");V(this,"context");V(this,"loopCount",0);V(this,"_playbackRate",1);this.url=n,this.globalGainNode=o,this.soundType=s,this.panType=a,this.buffer=r,this.context=i}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan,o=n.threeDOptions||this.threeDOptions,s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=n.playbackRate||this.playbackRate,c=n.volume!==void 0?n.volume:this.volume,l=n.position&&n.position.length?n.position:this.position,u=n.filters&&n.filters.length?n.filters:this._filters,d=new kR(this.url,this.buffer,this.context,this.globalGainNode,this.soundType,r);return d.loopCount=s,d._playbackRate=a,d._volume=c,d._position=l,d._stereoPan=i,d._threeDOptions=o,d.addFilters(u),d}preplay(){let n;if(this.buffer)n=this.context.createBufferSource(),n.buffer=this.buffer;else{const o=new Audio;o.crossOrigin="anonymous",o.src=this.url,o.preload="auto",n=this.context.createMediaElementSource(o)}const r=this.context.createGain();r.connect(this.globalGainNode);const i=new RC(this,n,r);return i.setGainNode(r),i.volume=this.volume,i.playbackRate=this.playbackRate,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}seek(n){this.playbacks.forEach(r=>r.seek(n))}get duration(){var n;return((n=this.buffer)==null?void 0:n.duration)||0}loop(n){return n===void 0?this.loopCount:(this.loopCount=n,this.playbacks.forEach(r=>r.loop(n)),this.loopCount)}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.playbacks.forEach(r=>r.playbackRate=n)}};const M4=(t,e)=>{var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n.buffer};function D4(t,e){const n=[];let r=0;fetch(t).then(function(o){if(!o.ok)throw new Error("HTTP error, status = "+o.status);if(!o.body)throw new Error("Missing body");var s=o.body.getReader();let a=new ArrayBuffer(0);function c(){return s.read().then(({value:l,done:u})=>{let d=null;if(l){if(a.byteLength?d=M4(a,l.buffer):(a=l.buffer.slice(0,44),d=l.buffer),e.decodeAudioData(d,function(h){n.push(h),n.length&&i()},function(h){console.log("err(decodeAudioData): "+h)}),u){console.log("done");return}c()}})}c()});function i(){for(;n.length;){let o=n.shift();const s=e.createBufferSource();if(!o)return;s.buffer=o,s.connect(e.destination),r==0&&(r=e.currentTime+.02),s.start(r),r+=s.buffer.duration}}}function L4(t){class e extends AR{constructor(){super(...arguments);V(this,"_oscillatorOptions",{})}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(i){this._oscillatorOptions=i,this.source&&this.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type))}play(){if(!this.source)throw new Error("No source node found");return this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type),this.source.start(),this._playing=!0,[this]}stop(){this.source&&this.source.stop&&(this.source.stop(),this._playing=!1)}pause(){this.stop()}get frequency(){return this.source.frequency.value}set frequency(i){this.source.frequency.value=i,this.oscillatorOptions.frequency=i}get detune(){return this.source.detune.value}set detune(i){this.source.detune.value=i,this.oscillatorOptions.detune=i}get type(){return this.source.type}set type(i){this.source.type=i,this.oscillatorOptions.type=i}}return e}class B4 extends L4(bR(wR(Ul))){constructor(n,r,i){super();V(this,"context");this.origin=n,this.source=r,this.context=n.context,this.setPanType(n.panType,n.context),this.source.connect(this.panner),this.setGainNode(i),this.panner.connect(this.gainNode),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}}class xC extends SR(Ul){constructor(n,r,i=Ad.Oscillator,o="HRTF",s={}){super();V(this,"_oscillatorOptions");V(this,"playbacks",[]);this.context=n,this.globalGainNode=r,this.soundType=i,this.panType=o,this.context=n,this._oscillatorOptions=s}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan??0,o=n.threeDOptions||this.threeDOptions,s=n.volume!==void 0?n.volume:this.volume,a=n.position&&n.position.length?n.position:this.position,c=n.filters&&n.filters.length?n.filters:this._filters,l=n.oscillatorOptions||this._oscillatorOptions,u=new xC(this.context,this.globalGainNode,this.soundType,r,l);return u._volume=s,u._position=a,u._stereoPan=i,u._threeDOptions=o,u.addFilters(c),u}preplay(){const n=this.context.createOscillator();this.oscillatorOptions.detune&&(n.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(n.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(n.type=this.oscillatorOptions.type);const r=this.context.createGain();r.connect(this.globalGainNode);const i=new B4(this,n,r);return i.volume=this.volume,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(n){this._oscillatorOptions=n,this.playbacks.forEach(r=>{r.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(r.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(r.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(r.source.type=this.oscillatorOptions.type))})}get frequency(){return this.oscillatorOptions.frequency||440}set frequency(n){this._oscillatorOptions.frequency=n,this.playbacks.forEach(r=>r.frequency=n)}get detune(){return this.oscillatorOptions.detune}set detune(n){this._oscillatorOptions.detune=n,this.playbacks.forEach(r=>r.detune=n)}get type(){return this.oscillatorOptions.type||"sine"}set type(n){this._oscillatorOptions.type=n,this.playbacks.forEach(r=>r.type=n)}}var Ad=(t=>(t.HTML="HTML",t.Streaming="Streaming",t.Buffer="Buffer",t.Oscillator="oscillator",t))(Ad||{});class F4{constructor(e){V(this,"context");V(this,"globalGainNode");V(this,"listener");V(this,"prevVolume",1);V(this,"finalizationRegistry");V(this,"createBiquadFilter",({type:e,frequency:n,gain:r,Q:i})=>{n===void 0&&(n=350);const o=this.context.createBiquadFilter();return o.type=e||"lowpass",o.frequency.value=n,o.gain.value=r||0,o.Q.value=i||1,o});this.context=e||new b4,this.listener=this.context.listener,this.globalGainNode=this.context.createGain(),this.globalGainNode.connect(this.context.destination),this.finalizationRegistry=new FinalizationRegistry(n=>{n.cleanup()})}async loadWorklets(){this.context.audioWorklet?await this.createWorkletNode("phase-vocoder",N4):console.warn("AudioWorklet not supported")}async createWorkletNode(e,n){if(!this.context.audioWorklet)throw new Error("AudioWorklet not supported");try{return new hw(this.context,e)}catch(r){console.error(r),console.log("Loading worklet from url",n);try{await this.context.audioWorklet.addModule(n)}catch(i){throw console.error(i),new Error(`Could not load worklet from url ${n}`)}return new hw(this.context,e)}}clearMemoryCache(){Xu.clearMemoryCache()}createOscillator(e,n="HRTF"){return new xC(this.context,this.globalGainNode,"oscillator",n,e)}async createSound(e,n="Buffer",r="HRTF"){if(typeof e=="object")return Promise.resolve(new Oh("",e,this.context,this.globalGainNode,"Buffer",r));const i=e;if(n==="HTML"){const o=new Audio;return o.src=i,o.crossOrigin="anonymous",new Oh(i,void 0,this.context,this.globalGainNode,"HTML",r)}return Xu.getAudioBuffer(this.context,i).then(o=>new Oh(i,o,this.context,this.globalGainNode,n,r))}async createGroup(e){const n=new gw;return e.forEach(r=>n.addSound(r)),n}async createGroupFromUrls(e,n="Buffer",r="HRTF"){const i=new gw;return(await Promise.all(e.map(o=>this.createSound(o,n,r)))).forEach(o=>i.addSound(o)),i}async createStream(e){return await D4(e,this.context),new Oh(e,void 0,this.context,this.globalGainNode,"Streaming")}createPanner({coneInnerAngle:e,coneOuterAngle:n,coneOuterGain:r,distanceModel:i,maxDistance:o,channelCount:s,channelCountMode:a,channelInterpretation:c,panningModel:l,refDistance:u,rolloffFactor:d,positionX:h,positionY:f,positionZ:p,orientationX:g,orientationY:C,orientationZ:m}){const v=this.context.createPanner();return v.coneInnerAngle=e||360,v.coneOuterAngle=n||360,v.coneOuterGain=r||0,v.distanceModel=i||"inverse",v.maxDistance=o||1e4,v.channelCount=s||2,v.channelCountMode=a||"clamped-max",v.channelInterpretation=c||"speakers",v.panningModel=l||"HRTF",v.refDistance=u||1,v.rolloffFactor=d||1,v.positionX.value=h||0,v.positionY.value=f||0,v.positionZ.value=p||0,v.orientationX.value=g||0,v.orientationY.value=C||0,v.orientationZ.value=m||0,v}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}setGlobalVolume(e){this.globalGainNode.gain.value=e}get volume(){return this.globalGainNode.gain.value}set volume(e){if(this.muted){this.prevVolume=e;return}this.setGlobalVolume(e)}mute(){this.muted||(this.prevVolume=this.globalGainNode.gain.value,this.setGlobalVolume(0))}unmute(){this.muted&&this.setGlobalVolume(this.prevVolume)}get muted(){return this.globalGainNode.gain.value===0}set muted(e){e!==this.muted&&(e?this.mute():this.unmute())}getMicrophoneStream(){return new Promise((e,n)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{const i=new O4(this.context);i.play(),e(i)}).catch(r=>{n(r)})})}get listenerOrientation(){return{forward:[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value],up:[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}}set listenerOrientation(e){const{forward:n,up:r}=e,[i,o,s]=n,[a,c,l]=r;this.listener.forwardX.value=i,this.listener.forwardY.value=o,this.listener.forwardZ.value=s,this.listener.upX.value=a,this.listener.upY.value=c,this.listener.upZ.value=l}get listenerUpOrientation(){return[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}set listenerUpOrientation(e){const[n,r,i]=e;this.listener.upX.value=n,this.listener.upY.value=r,this.listener.upZ.value=i}get listenerForwardOrientation(){return[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value]}set listenerForwardOrientation(e){const[n,r,i]=e;this.listener.forwardX.value=n,this.listener.forwardY.value=r,this.listener.forwardZ.value=i}get listenerPosition(){return[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}set listenerPosition(e){const[n,r,i]=e,o=this.context.currentTime;this.listener.positionX.setValueAtTime(n,o),this.listener.positionY.setValueAtTime(r,o),this.listener.positionZ.setValueAtTime(i,o)}}const U4="https://mongoose.world:9080/?url=";class V4 extends Io{constructor(){super(...arguments);V(this,"packageName","Client.Media");V(this,"sounds",{});V(this,"defaultUrl","")}handleDefault(n){this.defaultUrl=n}async handleLoad(n){const r=(n.url||this.defaultUrl)+n.name,i=n.url+n.name;if(!this.sounds[i]){let s=await this.client.cacophony.createSound(r);s.key=i,this.sounds[i]=s}}mediaUrl(n){var i;let r=(n.url||this.defaultUrl)+n.name;return((i=n.type)==null?void 0:i.toLowerCase())==="music"&&(r=U4+encodeURIComponent(r)),r}async handlePlay(n){let r=this.mediaUrl(n);n.key=n.key||r;let i=this.sounds[n.key];const o=n.is3d?"HRTF":"stereo";if((!i||i.url!==r)&&(n.type==="music"?i=await this.client.cacophony.createSound(r,Ad.HTML,o):i=await this.client.cacophony.createSound(r,Ad.Buffer,o)),n.volume!==void 0&&(i.volume=n.volume/100),n.loops!==void 0){const s=n.loops===-1?1/0:n.loops-1;i.loop(s)}if(n.start&&i.seek(n.start),n.end&&setTimeout(()=>{delete this.sounds[i.key],i.stop()},n.end),n.is3d&&(i.threeDOptions={coneInnerAngle:360,coneOuterAngle:0,panningModel:"HRTF",distanceModel:"inverse"},i.position=[n.position[0],n.position[1],n.position[2]]),n.priority){for(let s in this.sounds){const a=this.sounds[s];a.priority&&a.priority<n.priority&&a.stop()}i.priority=n.priority}if(!i.isPlaying){const s=i.play()[0];n.fadein&&s.fadeIn(n.fadein),n.fadeout&&s.fadeOut(n.fadeout)}i.key=n.key,this.sounds[i.key]=i}handleStop(n){n.name&&this.soundsByName(n.name).forEach(r=>this.stopSound(r)),n.type&&this.soundsByType(n.type).forEach(r=>this.stopSound(r)),n.tag&&this.soundsByTag(n.tag).forEach(r=>this.stopSound(r)),n.key&&this.soundsByKey(n.key).forEach(r=>this.stopSound(r)),!n.name&&!n.type&&!n.tag&&!n.key&&(this.allSounds.forEach(r=>r.stop()),this.sounds={})}stopSound(n){delete this.sounds[n.key],n.stop()}handleListenerPosition(n){var r;(r=n.position)!=null&&r.length&&(this.client.cacophony.listenerPosition=n.position)}handleListenerOrientation(n){n.up&&n.up.length&&(this.client.cacophony.listenerUpOrientation=n.up),n.forward&&n.forward.length&&(this.client.cacophony.listenerForwardOrientation=n.forward)}soundsByName(n){return Object.values(this.sounds).filter(r=>r.url&&r.url[r.url.length-1].endsWith(n))}soundsByKey(n){return Object.values(this.sounds).filter(r=>r.key===n)}soundsByTag(n){return Object.values(this.sounds).filter(r=>r.tag===n)}soundsByType(n){return Object.values(this.sounds).filter(r=>r.mediaType===n)}get allSounds(){return Object.values(this.sounds)}stopAllSounds(){this.allSounds.forEach(n=>n.stop()),this.sounds={}}}class G4 extends Io{constructor(){super(...arguments);V(this,"packageName","Client.Speech")}handleSpeak(n){const r=new SpeechSynthesisUtterance(n.text);r.rate=n.rate,r.pitch=n.pitch,r.volume=n.volume,speechSynthesis.speak(r)}}class W4 extends Io{constructor(){super(...arguments);V(this,"packageName","Comm.Channel");V(this,"channels",[])}handleList(n){this.channels=n}sendList(){this.sendData("List")}handleText(n){n.channel==="say_to_you"&&(document.hasFocus()||this.client.sendNotification(`Message from ${n.talker}`,`${n.text}`))}}class j4 extends Io{constructor(){super(...arguments);V(this,"packageName","Comm.LiveKit")}handleroom_token(n){this.client.worldData.liveKitTokens.push(n.token),this.client.emit("livekitToken",n.token)}handleroom_leave(n){this.client.worldData.liveKitTokens=this.client.worldData.liveKitTokens.filter(r=>r!==n.token),this.client.emit("livekitLeave",n.token)}}class Z4 extends Io{constructor(){super(...arguments);V(this,"packageName","Core")}sendHello(){this.sendData("Hello",{client:"Mongoose Client",version:"0.1"})}}class H4 extends Io{constructor(){super(...arguments);V(this,"packageName","Core.Supports")}sendSet(){const n=Object.values(this.client.gmcpHandlers).map(r=>r.packageName+" "+r.packageVersion.toString());this.sendData("Set",n)}}class z4 extends Io{constructor(n){super(n);V(this,"packageName","Client.Html")}handleAdd_html(n){this.client.emit("html",n.data.join(`
`))}}const wc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ER=new Set,r0=typeof process=="object"&&process?process:{},TR=(t,e,n,r)=>{typeof r0.emitWarning=="function"?r0.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let gp=globalThis.AbortController,vw=globalThis.AbortSignal;var UA;if(typeof gp>"u"){vw=class{constructor(){V(this,"onabort");V(this,"_onabort",[]);V(this,"reason");V(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},gp=class{constructor(){V(this,"signal",new vw);e()}abort(r){var i,o;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const s of this.signal._onabort)s(r);(o=(i=this.signal).onabort)==null||o.call(i,r)}}};let t=((UA=r0.env)==null?void 0:UA.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,TR("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const X4=t=>!ER.has(t),_s=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),RR=t=>_s(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?hf:null:null;class hf extends Array{constructor(e){super(e),this.fill(0)}}var al;const Ma=class Ma{constructor(e,n){V(this,"heap");V(this,"length");if(!N(Ma,al))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=RR(e);if(!n)return[];Ne(Ma,al,!0);const r=new Ma(e,n);return Ne(Ma,al,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};al=new WeakMap,Ye(Ma,al,!1);let i0=Ma;var VA,GA,hi,Rr,fi,pi,cl,ll,nn,gi,Qt,wt,Be,Xn,xr,Bn,hn,mi,fn,vi,yi,Pr,Ci,Gs,$n,pe,s0,Wa,Oo,Ld,Nr,xR,ja,ul,Bd,Os,Ms,a0,ff,pf,bt,c0,_u,Ds,l0;const pI=class pI{constructor(e){Ye(this,pe);Ye(this,hi);Ye(this,Rr);Ye(this,fi);Ye(this,pi);Ye(this,cl);Ye(this,ll);V(this,"ttl");V(this,"ttlResolution");V(this,"ttlAutopurge");V(this,"updateAgeOnGet");V(this,"updateAgeOnHas");V(this,"allowStale");V(this,"noDisposeOnSet");V(this,"noUpdateTTL");V(this,"maxEntrySize");V(this,"sizeCalculation");V(this,"noDeleteOnFetchRejection");V(this,"noDeleteOnStaleGet");V(this,"allowStaleOnFetchAbort");V(this,"allowStaleOnFetchRejection");V(this,"ignoreFetchAbort");Ye(this,nn);Ye(this,gi);Ye(this,Qt);Ye(this,wt);Ye(this,Be);Ye(this,Xn);Ye(this,xr);Ye(this,Bn);Ye(this,hn);Ye(this,mi);Ye(this,fn);Ye(this,vi);Ye(this,yi);Ye(this,Pr);Ye(this,Ci);Ye(this,Gs);Ye(this,$n);Ye(this,Wa,()=>{});Ye(this,Oo,()=>{});Ye(this,Ld,()=>{});Ye(this,Nr,()=>!1);Ye(this,ja,e=>{});Ye(this,ul,(e,n,r)=>{});Ye(this,Bd,(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});V(this,VA,"LRUCache");const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:h,maxSize:f=0,maxEntrySize:p=0,sizeCalculation:g,fetchMethod:C,memoMethod:m,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:S,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:w,ignoreFetchAbort:A}=e;if(n!==0&&!_s(n))throw new TypeError("max option must be a nonnegative integer");const x=n?RR(n):Array;if(!x)throw new Error("invalid max value: "+n);if(Ne(this,hi,n),Ne(this,Rr,f),this.maxEntrySize=p||N(this,Rr),this.sizeCalculation=g,this.sizeCalculation){if(!N(this,Rr)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(m!==void 0&&typeof m!="function")throw new TypeError("memoMethod must be a function if defined");if(Ne(this,ll,m),C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ne(this,cl,C),Ne(this,Gs,!!C),Ne(this,Qt,new Map),Ne(this,wt,new Array(n).fill(void 0)),Ne(this,Be,new Array(n).fill(void 0)),Ne(this,Xn,new x(n)),Ne(this,xr,new x(n)),Ne(this,Bn,0),Ne(this,hn,0),Ne(this,mi,i0.create(n)),Ne(this,nn,0),Ne(this,gi,0),typeof l=="function"&&Ne(this,fi,l),typeof u=="function"?(Ne(this,pi,u),Ne(this,fn,[])):(Ne(this,pi,void 0),Ne(this,fn,void 0)),Ne(this,Ci,!!N(this,fi)),Ne(this,$n,!!N(this,pi)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!E,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(N(this,Rr)!==0&&!_s(N(this,Rr)))throw new TypeError("maxSize must be a positive integer if specified");if(!_s(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");be(this,pe,xR).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!S,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=_s(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!_s(this.ttl))throw new TypeError("ttl must be a positive integer if specified");be(this,pe,s0).call(this)}if(N(this,hi)===0&&this.ttl===0&&N(this,Rr)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!N(this,hi)&&!N(this,Rr)){const T="LRU_CACHE_UNBOUNDED";X4(T)&&(ER.add(T),TR("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",T,pI))}}static unsafeExposeInternals(e){return{starts:N(e,yi),ttls:N(e,Pr),sizes:N(e,vi),keyMap:N(e,Qt),keyList:N(e,wt),valList:N(e,Be),next:N(e,Xn),prev:N(e,xr),get head(){return N(e,Bn)},get tail(){return N(e,hn)},free:N(e,mi),isBackgroundFetch:n=>{var r;return be(r=e,pe,bt).call(r,n)},backgroundFetch:(n,r,i,o)=>{var s;return be(s=e,pe,pf).call(s,n,r,i,o)},moveToTail:n=>{var r;return be(r=e,pe,_u).call(r,n)},indexes:n=>{var r;return be(r=e,pe,Os).call(r,n)},rindexes:n=>{var r;return be(r=e,pe,Ms).call(r,n)},isStale:n=>{var r;return N(r=e,Nr).call(r,n)}}}get max(){return N(this,hi)}get maxSize(){return N(this,Rr)}get calculatedSize(){return N(this,gi)}get size(){return N(this,nn)}get fetchMethod(){return N(this,cl)}get memoMethod(){return N(this,ll)}get dispose(){return N(this,fi)}get disposeAfter(){return N(this,pi)}getRemainingTTL(e){return N(this,Qt).has(e)?1/0:0}*entries(){for(const e of be(this,pe,Os).call(this))N(this,Be)[e]!==void 0&&N(this,wt)[e]!==void 0&&!be(this,pe,bt).call(this,N(this,Be)[e])&&(yield[N(this,wt)[e],N(this,Be)[e]])}*rentries(){for(const e of be(this,pe,Ms).call(this))N(this,Be)[e]!==void 0&&N(this,wt)[e]!==void 0&&!be(this,pe,bt).call(this,N(this,Be)[e])&&(yield[N(this,wt)[e],N(this,Be)[e]])}*keys(){for(const e of be(this,pe,Os).call(this)){const n=N(this,wt)[e];n!==void 0&&!be(this,pe,bt).call(this,N(this,Be)[e])&&(yield n)}}*rkeys(){for(const e of be(this,pe,Ms).call(this)){const n=N(this,wt)[e];n!==void 0&&!be(this,pe,bt).call(this,N(this,Be)[e])&&(yield n)}}*values(){for(const e of be(this,pe,Os).call(this))N(this,Be)[e]!==void 0&&!be(this,pe,bt).call(this,N(this,Be)[e])&&(yield N(this,Be)[e])}*rvalues(){for(const e of be(this,pe,Ms).call(this))N(this,Be)[e]!==void 0&&!be(this,pe,bt).call(this,N(this,Be)[e])&&(yield N(this,Be)[e])}[(GA=Symbol.iterator,VA=Symbol.toStringTag,GA)](){return this.entries()}find(e,n={}){for(const r of be(this,pe,Os).call(this)){const i=N(this,Be)[r],o=be(this,pe,bt).call(this,i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,N(this,wt)[r],this))return this.get(N(this,wt)[r],n)}}forEach(e,n=this){for(const r of be(this,pe,Os).call(this)){const i=N(this,Be)[r],o=be(this,pe,bt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,wt)[r],this)}}rforEach(e,n=this){for(const r of be(this,pe,Ms).call(this)){const i=N(this,Be)[r],o=be(this,pe,bt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,wt)[r],this)}}purgeStale(){let e=!1;for(const n of be(this,pe,Ms).call(this,{allowStale:!0}))N(this,Nr).call(this,n)&&(be(this,pe,Ds).call(this,N(this,wt)[n],"expire"),e=!0);return e}info(e){const n=N(this,Qt).get(e);if(n===void 0)return;const r=N(this,Be)[n],i=be(this,pe,bt).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const o={value:i};if(N(this,Pr)&&N(this,yi)){const s=N(this,Pr)[n],a=N(this,yi)[n];if(s&&a){const c=s-(wc.now()-a);o.ttl=c,o.start=Date.now()}}return N(this,vi)&&(o.size=N(this,vi)[n]),o}dump(){const e=[];for(const n of be(this,pe,Os).call(this,{allowStale:!0})){const r=N(this,wt)[n],i=N(this,Be)[n],o=be(this,pe,bt).call(this,i)?i.__staleWhileFetching:i;if(o===void 0||r===void 0)continue;const s={value:o};if(N(this,Pr)&&N(this,yi)){s.ttl=N(this,Pr)[n];const a=wc.now()-N(this,yi)[n];s.start=Math.floor(Date.now()-a)}N(this,vi)&&(s.size=N(this,vi)[n]),e.unshift([r,s])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=wc.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){var h,f,p,g,C;if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const u=N(this,Bd).call(this,e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),be(this,pe,Ds).call(this,e,"set"),this;let d=N(this,nn)===0?void 0:N(this,Qt).get(e);if(d===void 0)d=N(this,nn)===0?N(this,hn):N(this,mi).length!==0?N(this,mi).pop():N(this,nn)===N(this,hi)?be(this,pe,ff).call(this,!1):N(this,nn),N(this,wt)[d]=e,N(this,Be)[d]=n,N(this,Qt).set(e,d),N(this,Xn)[N(this,hn)]=d,N(this,xr)[d]=N(this,hn),Ne(this,hn,d),ah(this,nn)._++,N(this,ul).call(this,d,u,c),c&&(c.set="add"),l=!1;else{be(this,pe,_u).call(this,d);const m=N(this,Be)[d];if(n!==m){if(N(this,Gs)&&be(this,pe,bt).call(this,m)){m.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:v}=m;v!==void 0&&!s&&(N(this,Ci)&&((h=N(this,fi))==null||h.call(this,v,e,"set")),N(this,$n)&&((f=N(this,fn))==null||f.push([v,e,"set"])))}else s||(N(this,Ci)&&((p=N(this,fi))==null||p.call(this,m,e,"set")),N(this,$n)&&((g=N(this,fn))==null||g.push([m,e,"set"])));if(N(this,ja).call(this,d),N(this,ul).call(this,d,u,c),N(this,Be)[d]=n,c){c.set="replace";const v=m&&be(this,pe,bt).call(this,m)?m.__staleWhileFetching:m;v!==void 0&&(c.oldValue=v)}}else c&&(c.set="update")}if(i!==0&&!N(this,Pr)&&be(this,pe,s0).call(this),N(this,Pr)&&(l||N(this,Ld).call(this,d,i,o),c&&N(this,Oo).call(this,c,d)),!s&&N(this,$n)&&N(this,fn)){const m=N(this,fn);let v;for(;v=m==null?void 0:m.shift();)(C=N(this,pi))==null||C.call(this,...v)}return this}pop(){var e;try{for(;N(this,nn);){const n=N(this,Be)[N(this,Bn)];if(be(this,pe,ff).call(this,!0),be(this,pe,bt).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(N(this,$n)&&N(this,fn)){const n=N(this,fn);let r;for(;r=n==null?void 0:n.shift();)(e=N(this,pi))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,o=N(this,Qt).get(e);if(o!==void 0){const s=N(this,Be)[o];if(be(this,pe,bt).call(this,s)&&s.__staleWhileFetching===void 0)return!1;if(N(this,Nr).call(this,o))i&&(i.has="stale",N(this,Oo).call(this,i,o));else return r&&N(this,Wa).call(this,o),i&&(i.has="hit",N(this,Oo).call(this,i,o)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=N(this,Qt).get(e);if(i===void 0||!r&&N(this,Nr).call(this,i))return;const o=N(this,Be)[i];return be(this,pe,bt).call(this,o)?o.__staleWhileFetching:o}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:g,forceRefresh:C=!1,status:m,signal:v}=n;if(!N(this,Gs))return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:m});const S={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:m,signal:v};let E=N(this,Qt).get(e);if(E===void 0){m&&(m.fetch="miss");const w=be(this,pe,pf).call(this,e,E,S,g);return w.__returned=w}else{const w=N(this,Be)[E];if(be(this,pe,bt).call(this,w)){const O=r&&w.__staleWhileFetching!==void 0;return m&&(m.fetch="inflight",O&&(m.returnedStale=!0)),O?w.__staleWhileFetching:w.__returned=w}const A=N(this,Nr).call(this,E);if(!C&&!A)return m&&(m.fetch="hit"),be(this,pe,_u).call(this,E),i&&N(this,Wa).call(this,E),m&&N(this,Oo).call(this,m,E),w;const x=be(this,pe,pf).call(this,e,E,S,g),_=x.__staleWhileFetching!==void 0&&r;return m&&(m.fetch=A?"stale":"refresh",_&&A&&(m.returnedStale=!0)),_?x.__staleWhileFetching:x.__returned=x}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=N(this,ll);if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:o,...s}=n,a=this.get(e,s);if(!o&&a!==void 0)return a;const c=r(e,a,{options:s,context:i});return this.set(e,c,s),c}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=n,a=N(this,Qt).get(e);if(a!==void 0){const c=N(this,Be)[a],l=be(this,pe,bt).call(this,c);return s&&N(this,Oo).call(this,s,a),N(this,Nr).call(this,a)?(s&&(s.get="stale"),l?(s&&r&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),r?c.__staleWhileFetching:void 0):(o||be(this,pe,Ds).call(this,e,"expire"),s&&r&&(s.returnedStale=!0),r?c:void 0)):(s&&(s.get="hit"),l?c.__staleWhileFetching:(be(this,pe,_u).call(this,a),i&&N(this,Wa).call(this,a),c))}else s&&(s.get="miss")}delete(e){return be(this,pe,Ds).call(this,e,"delete")}clear(){return be(this,pe,l0).call(this,"delete")}};hi=new WeakMap,Rr=new WeakMap,fi=new WeakMap,pi=new WeakMap,cl=new WeakMap,ll=new WeakMap,nn=new WeakMap,gi=new WeakMap,Qt=new WeakMap,wt=new WeakMap,Be=new WeakMap,Xn=new WeakMap,xr=new WeakMap,Bn=new WeakMap,hn=new WeakMap,mi=new WeakMap,fn=new WeakMap,vi=new WeakMap,yi=new WeakMap,Pr=new WeakMap,Ci=new WeakMap,Gs=new WeakMap,$n=new WeakMap,pe=new WeakSet,s0=function(){const e=new hf(N(this,hi)),n=new hf(N(this,hi));Ne(this,Pr,e),Ne(this,yi,n),Ne(this,Ld,(o,s,a=wc.now())=>{if(n[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){const c=setTimeout(()=>{N(this,Nr).call(this,o)&&be(this,pe,Ds).call(this,N(this,wt)[o],"expire")},s+1);c.unref&&c.unref()}}),Ne(this,Wa,o=>{n[o]=e[o]!==0?wc.now():0}),Ne(this,Oo,(o,s)=>{if(e[s]){const a=e[s],c=n[s];if(!a||!c)return;o.ttl=a,o.start=c,o.now=r||i();const l=o.now-c;o.remainingTTL=a-l}});let r=0;const i=()=>{const o=wc.now();if(this.ttlResolution>0){r=o;const s=setTimeout(()=>r=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{const s=N(this,Qt).get(o);if(s===void 0)return 0;const a=e[s],c=n[s];if(!a||!c)return 1/0;const l=(r||i())-c;return a-l},Ne(this,Nr,o=>{const s=n[o],a=e[o];return!!a&&!!s&&(r||i())-s>a})},Wa=new WeakMap,Oo=new WeakMap,Ld=new WeakMap,Nr=new WeakMap,xR=function(){const e=new hf(N(this,hi));Ne(this,gi,0),Ne(this,vi,e),Ne(this,ja,n=>{Ne(this,gi,N(this,gi)-e[n]),e[n]=0}),Ne(this,Bd,(n,r,i,o)=>{if(be(this,pe,bt).call(this,r))return 0;if(!_s(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(r,n),!_s(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),Ne(this,ul,(n,r,i)=>{if(e[n]=r,N(this,Rr)){const o=N(this,Rr)-e[n];for(;N(this,gi)>o;)be(this,pe,ff).call(this,!0)}Ne(this,gi,N(this,gi)+e[n]),i&&(i.entrySize=r,i.totalCalculatedSize=N(this,gi))})},ja=new WeakMap,ul=new WeakMap,Bd=new WeakMap,Os=function*({allowStale:e=this.allowStale}={}){if(N(this,nn))for(let n=N(this,hn);!(!be(this,pe,a0).call(this,n)||((e||!N(this,Nr).call(this,n))&&(yield n),n===N(this,Bn)));)n=N(this,xr)[n]},Ms=function*({allowStale:e=this.allowStale}={}){if(N(this,nn))for(let n=N(this,Bn);!(!be(this,pe,a0).call(this,n)||((e||!N(this,Nr).call(this,n))&&(yield n),n===N(this,hn)));)n=N(this,Xn)[n]},a0=function(e){return e!==void 0&&N(this,Qt).get(N(this,wt)[e])===e},ff=function(e){var o,s;const n=N(this,Bn),r=N(this,wt)[n],i=N(this,Be)[n];return N(this,Gs)&&be(this,pe,bt).call(this,i)?i.__abortController.abort(new Error("evicted")):(N(this,Ci)||N(this,$n))&&(N(this,Ci)&&((o=N(this,fi))==null||o.call(this,i,r,"evict")),N(this,$n)&&((s=N(this,fn))==null||s.push([i,r,"evict"]))),N(this,ja).call(this,n),e&&(N(this,wt)[n]=void 0,N(this,Be)[n]=void 0,N(this,mi).push(n)),N(this,nn)===1?(Ne(this,Bn,Ne(this,hn,0)),N(this,mi).length=0):Ne(this,Bn,N(this,Xn)[n]),N(this,Qt).delete(r),ah(this,nn)._--,n},pf=function(e,n,r,i){const o=n===void 0?void 0:N(this,Be)[n];if(be(this,pe,bt).call(this,o))return o;const s=new gp,{signal:a}=r;a==null||a.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});const c={signal:s.signal,options:r,context:i},l=(g,C=!1)=>{const{aborted:m}=s.signal,v=r.ignoreFetchAbort&&g!==void 0;if(r.status&&(m&&!C?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,v&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),m&&!v&&!C)return d(s.signal.reason);const S=f;return N(this,Be)[n]===f&&(g===void 0?S.__staleWhileFetching?N(this,Be)[n]=S.__staleWhileFetching:be(this,pe,Ds).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,g,c.options))),g},u=g=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=g),d(g)),d=g=>{const{aborted:C}=s.signal,m=C&&r.allowStaleOnFetchAbort,v=m||r.allowStaleOnFetchRejection,S=v||r.noDeleteOnFetchRejection,E=f;if(N(this,Be)[n]===f&&(!S||E.__staleWhileFetching===void 0?be(this,pe,Ds).call(this,e,"fetch"):m||(N(this,Be)[n]=E.__staleWhileFetching)),v)return r.status&&E.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw g},h=(g,C)=>{var v;const m=(v=N(this,cl))==null?void 0:v.call(this,e,o,c);m&&m instanceof Promise&&m.then(S=>g(S===void 0?void 0:S),C),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(g(void 0),r.allowStaleOnFetchAbort&&(g=S=>l(S,!0)))})};r.status&&(r.status.fetchDispatched=!0);const f=new Promise(h).then(l,u),p=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return n===void 0?(this.set(e,p,{...c.options,status:void 0}),n=N(this,Qt).get(e)):N(this,Be)[n]=p,p},bt=function(e){if(!N(this,Gs))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof gp},c0=function(e,n){N(this,xr)[n]=e,N(this,Xn)[e]=n},_u=function(e){e!==N(this,hn)&&(e===N(this,Bn)?Ne(this,Bn,N(this,Xn)[e]):be(this,pe,c0).call(this,N(this,xr)[e],N(this,Xn)[e]),be(this,pe,c0).call(this,N(this,hn),e),Ne(this,hn,e))},Ds=function(e,n){var i,o,s,a;let r=!1;if(N(this,nn)!==0){const c=N(this,Qt).get(e);if(c!==void 0)if(r=!0,N(this,nn)===1)be(this,pe,l0).call(this,n);else{N(this,ja).call(this,c);const l=N(this,Be)[c];if(be(this,pe,bt).call(this,l)?l.__abortController.abort(new Error("deleted")):(N(this,Ci)||N(this,$n))&&(N(this,Ci)&&((i=N(this,fi))==null||i.call(this,l,e,n)),N(this,$n)&&((o=N(this,fn))==null||o.push([l,e,n]))),N(this,Qt).delete(e),N(this,wt)[c]=void 0,N(this,Be)[c]=void 0,c===N(this,hn))Ne(this,hn,N(this,xr)[c]);else if(c===N(this,Bn))Ne(this,Bn,N(this,Xn)[c]);else{const u=N(this,xr)[c];N(this,Xn)[u]=N(this,Xn)[c];const d=N(this,Xn)[c];N(this,xr)[d]=N(this,xr)[c]}ah(this,nn)._--,N(this,mi).push(c)}}if(N(this,$n)&&((s=N(this,fn))!=null&&s.length)){const c=N(this,fn);let l;for(;l=c==null?void 0:c.shift();)(a=N(this,pi))==null||a.call(this,...l)}return r},l0=function(e){var n,r,i;for(const o of be(this,pe,Ms).call(this,{allowStale:!0})){const s=N(this,Be)[o];if(be(this,pe,bt).call(this,s))s.__abortController.abort(new Error("deleted"));else{const a=N(this,wt)[o];N(this,Ci)&&((n=N(this,fi))==null||n.call(this,s,a,e)),N(this,$n)&&((r=N(this,fn))==null||r.push([s,a,e]))}}if(N(this,Qt).clear(),N(this,Be).fill(void 0),N(this,wt).fill(void 0),N(this,Pr)&&N(this,yi)&&(N(this,Pr).fill(0),N(this,yi).fill(0)),N(this,vi)&&N(this,vi).fill(0),Ne(this,Bn,0),Ne(this,hn,0),N(this,mi).length=0,Ne(this,gi,0),Ne(this,nn,0),N(this,$n)&&N(this,fn)){const o=N(this,fn);let s;for(;s=o==null?void 0:o.shift();)(i=N(this,pi))==null||i.call(this,...s)}};let o0=pI;function $4(t){const e=t.match(/^#\$#(\S+)(?:\s+(\S{6})\s+)?(.*)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#name [authKey] keyval*'\nGot `"+t+"`"),null;const n=e[1],r=e[2],i={},o=/(\S+)\s*:\s*"([^"]*)"|(\S+)\s*:\s*(\S+)/g;let s;for(;s=o.exec(e[3]);){const a=s[1]||s[3],c=s[2]||s[4];a in i?console.log(`Invalid message format: duplicate key ${a} detected`):i[a]=c}return{name:n,authKey:r,keyvals:i}}function yw(t){const e=t.match(/^#\$#\*\s(\S+)\s(\S+)\s*:\s*(.+)$|^#\$#:\s(\S+)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#* datatag keyval'\nGot `"+t+"`"),null;const n=e[1]||e[4],r=void 0,i=e[2],o=e[3],s={};return s[i]=o,{name:n,authKey:r,keyvals:s}}function u0(){return(Math.random()+1).toString(36).substring(3,9)}class Vl{constructor(e){V(this,"packageName");V(this,"minVersion",1);V(this,"maxVersion",1);V(this,"packageVersion",0);V(this,"client");this.client=e}handle(e){throw new Error("Method not implemented.")}handleMultiline(e){throw new Error("Method not implemented.")}closeMultiline(e){throw new Error("Method not implemented.")}shutdown(){}send(e,n){e.startsWith(this.packageName)||(e=this.packageName+"-"+e),this.client.sendMcp(e,n)}}class K4 extends Vl{constructor(){super(...arguments);V(this,"packageName","mcp-negotiate");V(this,"minVersion",2);V(this,"maxVersion",2)}handle(n){switch(n.name){}}sendNegotiate(){var n,r;for(const i of Object.values(this.client.mcpHandlers)){let o=(n=i.minVersion)==null?void 0:n.toFixed(1),s=(r=i.maxVersion)==null?void 0:r.toFixed(1);this.client.sendMcp("mcp-negotiate-can",{package:i.packageName,"min-version":o,"max-version":s})}this.client.sendCommand("#$#$mcp-negotiate-end")}}class J4 extends Vl{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-status")}handle(n){console.log(n),this.client.emit("statustext",n.keyvals.text)}}class Y4 extends Vl{constructor(n){super(n);V(this,"packageName","dns-org-mud-moo-simpleedit");V(this,"sessions",{});V(this,"clientId");this.clientId=u0()}handle(n){if(n.name==="dns-org-mud-moo-simpleedit-content"){const r={name:n.keyvals.name,reference:n.keyvals.reference,type:n.keyvals.type,contents:[]};this.sessions[n.keyvals["_data-tag"]]=r}else console.log(`Unexpected simpleedit message ${n}`)}handleMultiline(n){"content"in n.keyvals?this.sessions[n.name].contents.push(n.keyvals.content):console.log(`Unexpected simpleedit ML ${n}`)}closeMultiline(n){console.log(`Closing multiline ${n.name}`),this.client.openEditorWindow(this.sessions[n.name])}shutdown(){new BroadcastChannel("editor").postMessage({type:"shutdown"})}}class Q4 extends Vl{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-getset");V(this,"id",1);V(this,"cache",new o0({max:10}));V(this,"LocalCache",{})}handle(n){switch(n.name){case"dns-com-awns-getset-ack":const r=this.cache.get(n.keyvals.id);if(r===void 0){console.log(`Got ack for unknown id ${n.keyvals.id}`);break}const i=n.keyvals.value;console.log(`Got ${r} = ${i}`),this.LocalCache[r]=i,this.client.emit("getset",r,i);break}}sendGet(n){const r=(this.id++).toString();this.cache.set(r,n),this.client.sendMcp("dns-com-awns-getset-get",{id:r,property:n})}sendSet(n,r){this.client.sendMcp("dns-com-awns-getset-set",{id:this.id++,property:n,value:r})}sendDrop(n){this.client.sendMcp("dns-com-awns-getset-drop",{id:this.id++,property:n})}}class q4 extends Vl{constructor(){super(...arguments);V(this,"packageName","dns-com-vmoo-userlist");V(this,"maxVersion",1.1);V(this,"player");V(this,"fields",["Object","Name","Icon"]);V(this,"icons",["Idle","Away","Idle+Away","Friend","Newbie","Inhabitant","Inhabitant+","Schooled","Wizard","Key","Star"]);V(this,"players",[])}handle(n){switch(n.name){case"dns-com-vmoo-userlist-you":this.player=n.keyvals.nr;break}}handleMultiline(n){if("fields"in n.keyvals&&(this.fields=ci(n.keyvals.fields.trim())),"icons"in n.keyvals&&(this.icons=ci(n.keyvals.icons.trim())),"d"in n.keyvals){const o=n.keyvals.d[0];switch(o){case"=":var r=ci(n.keyvals.d.slice(1));this.players=r.map(a=>this.playerFromArray(a));break;case"+":this.players.push(this.playerFromArray(ci(n.keyvals.d.slice(1))));break;case"-":var i=ci(n.keyvals.d.slice(1));this.players=this.players.filter(a=>!i.includes(a.Object));break;case"*":const s=this.playerFromArray(ci(n.keyvals.d.slice(1)));this.updatePlayer(s);break;case"<":i=ci(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!0,this.players[c]=a)});break;case">":i=ci(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!1,this.players[c]=a)});break;case"[":i=ci(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!0,this.players[c]=a)});break;case"]":i=ci(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!1,this.players[c]=a)});break;default:console.log(`Unknown userlist mode ${o} in ${n.keyvals.d}`);break}this.update()}}updatePlayer(n){const r=this.players.findIndex(i=>i.Object===n.Object);r!==-1?this.players[r]=n:this.players.push(n)}update(){this.players.sort((r,i)=>n(i)-n(r)),this.client.emit("userlist",this.players);function n(r){return r.Icon-(r.idle?10:0)-(r.away?20:0)}}playerFromArray(n){const r={};return n.forEach((i,o)=>{r[this.fields[o]]=i}),r.away=!1,r.idle=!1,r}}function ci(t){t=t.slice(1,-1);let e=[],n="",r=0;for(let o=0;o<t.length;o++){const s=t[o];if(s==="{")r++;else if(s==="}")r--;else if(s===","&&r===0){i(),n="";continue}n+=s}return n.length>0&&i(),e;function i(){n=n.trim(),n.startsWith("{")&&n.endsWith("}")?e.push(ci(n)):Number.isNaN(Number(n))?n.startsWith('"')&&n.endsWith('"')?e.push(n.slice(1,-1)):e.push(n):e.push(Number(n))}}class eV extends Vl{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-ping");V(this,"id",1)}handle(n){switch(n.name){case"dns-com-awns-ping":this.send("reply",n.keyvals);break}}ping(){this.send("dns-com-awns-ping",{id:this.id++})}}var d0=(t=>(t.Off="off",t.Unfocused="unfocused",t.All="all",t))(d0||{}),vs=(t=>(t.SetGeneral="SET_GENERAL",t.SetSpeech="SET_SPEECH",t.SetChannels="SET_CHANNELS",t.SetEditorAutocompleteEnabled="SET_EDITOR_AUTOCOMPLETE_ENABLED",t.SetEditorAccessibilityMode="SET_EDITOR_ACCESSIBILITY_MODE",t))(vs||{});class tV{constructor(){V(this,"state");V(this,"listeners",new Set);V(this,"dispatch",e=>{this.state=this.reducer(this.state,e),localStorage.setItem("preferences",JSON.stringify(this.state)),this.listeners.forEach(n=>n())});const e=localStorage.getItem("preferences"),n=this.getInitialPreferences();this.state=e?this.mergePreferences(n,JSON.parse(e)):n}getInitialPreferences(){return{general:{localEcho:!1},speech:{autoreadMode:"off",voice:"",rate:1,pitch:1,volume:1},channels:{sayto:{autoreadMode:"off",notify:!0}},editor:{autocompleteEnabled:!0,accessibilityMode:!0}}}mergePreferences(e,n){return{...e,general:{...e.general,...n.general},speech:{...e.speech,...n.speech},channels:n.channels?{...e.channels,...n.channels}:e.channels,editor:{...e.editor,...n.editor}}}reducer(e,n){switch(n.type){case"SET_GENERAL":return{...e,general:n.data};case"SET_SPEECH":return{...e,speech:n.data};case"SET_CHANNELS":return{...e,channels:n.data};case"SET_EDITOR_AUTOCOMPLETE_ENABLED":return{...e,editor:{...e.editor,autocompleteEnabled:n.data}};case"SET_EDITOR_ACCESSIBILITY_MODE":return{...e,editor:{...e.editor,accessibilityMode:n.data}};default:return e}}getState(){return this.state}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}}const Yc=new tV;class nV extends IT{constructor(n,r){super();V(this,"ws");V(this,"decoder",new TextDecoder("utf8"));V(this,"telnet");V(this,"host");V(this,"port");V(this,"telnetNegotiation",!1);V(this,"telnetBuffer","");V(this,"gmcpHandlers",{});V(this,"mcpHandlers",{});V(this,"mcpMultilines",{});V(this,"mcpAuthKey",null);V(this,"mcp_negotiate");V(this,"mcp_getset");V(this,"gmcp_char");V(this,"worldData",{playerId:"",playerName:"",roomId:"",liveKitTokens:[]});V(this,"cacophony");V(this,"sendCommand",n=>{Yc.getState().general.localEcho&&this.emit("command",n),this.send(n+`\r
`),console.log("> "+n)});this.host=n,this.port=r,this.mcp_negotiate=this.registerMcpPackage(K4),this.mcp_getset=this.registerMcpPackage(Q4),this.gmcp_char=this.registerGMCPPackage(MB),this.cacophony=new F4}registerGMCPPackage(n){const r=new n(this);return this.gmcpHandlers[r.packageName]=r,console.log("Registered GMCP Package:",r.packageName),r}registerMcpPackage(n){const r=new n(this);return this.mcpHandlers[r.packageName]=r,r}connect(){this.ws=new window.WebSocket(`wss://${this.host}:${this.port}`),this.ws.binaryType="arraybuffer",this.telnet=new xB(new RB(this.ws)),this.ws.onopen=()=>{this.emit("connect")},this.telnet.on("data",n=>{this.handleData(n)}),this.telnet.on("negotiation",(n,r)=>{n===Nu.WILL&&r===Pu.GMCP?(console.log("GMCP Negotiation"),this.telnet.sendNegotiation(Nu.DO,Pu.GMCP),this.gmcpHandlers.Core.sendHello(),this.gmcpHandlers["Core.Supports"].sendSet(),this.gmcpHandlers["Auth.Autologin"].sendLogin()):n===Nu.DO&&r===Pu.TERMINAL_TYPE&&(console.log("TTYPE Negotiation"),this.telnet.sendNegotiation(Nu.WILL,Pu.TERMINAL_TYPE),this.telnet.sendTerminalType("Mongoose Client"),this.telnet.sendTerminalType("ANSI"),this.telnet.sendTerminalType("PROXY"))}),this.telnet.on("gmcp",(n,r)=>{console.log("GMCP Package:",n,r);try{this.handleGmcpData(n,r)}catch(i){console.error("Calling GMCP:",i)}}),this.ws.onclose=()=>{this.emit("disconnect"),this.mcpAuthKey=null,setTimeout(()=>{this.connect()},1e4)},this.ws.onerror=n=>{this.emit("error",n)}}send(n){this.ws.send(n)}close(){this.ws.close()}handleData(n){const r=this.decoder.decode(n).trimEnd();for(const i of r.split(`
`))i&&i.startsWith("#$#")?this.handleMcp(i):this.emitMessage(i)}handleMcp(n){if(n.startsWith("#$#*")){const i=yw(n.trimEnd());i&&(i.name in this.mcpMultilines?this.mcpMultilines[i.name].handleMultiline(i):console.warn("Received continuation for unknown multiline",i));return}if(n.startsWith("#$#:")){const i=yw(n.trimEnd());i&&(this.mcpMultilines[i.name].closeMultiline(i),delete this.mcpMultilines[i.name]);return}const r=$4(n.trimEnd());if(console.log("MCP Message:",r),(r==null?void 0:r.name.toLowerCase())==="mcp"&&r.authKey==null&&this.mcpAuthKey==null)this.mcpAuthKey=u0(),this.sendCommand(`#$#mcp authentication-key: ${this.mcpAuthKey} version: 2.1 to: 2.1`),this.mcp_negotiate.sendNegotiate();else if((r==null?void 0:r.name)!=="mcp-negotiate-end")if((r==null?void 0:r.authKey)===this.mcpAuthKey){let i=r.name;do{if(i in this.mcpHandlers){this.mcpHandlers[i].handle(r),"_data-tag"in r.keyvals&&(console.log("new multiline "+r.keyvals["_data-tag"]),this.mcpMultilines[r.keyvals["_data-tag"]]=this.mcpHandlers[i]);return}i=i.substring(0,i.lastIndexOf("-"))}while(i);console.log(`No handler for ${r.name}`)}else console.log(`Unexpected authkey "${r==null?void 0:r.authKey}", probably a spoofed message.`)}handleGmcpData(n,r){const i=n.lastIndexOf("."),o=n.substring(0,i),s=n.substring(i+1);console.log("GMCP Message:",o,s,r);const a=this.gmcpHandlers[o];if(!a){console.log("No handler for GMCP package:",o);return}const c=a["handle"+s];c?(console.log("Calling handler:",c),c.call(a,JSON.parse(r))):console.log("No handler on package:",o,s)}emitMessage(n){const r=Yc.getState().speech.autoreadMode;r===d0.All&&this.speak(n),r===d0.Unfocused&&!document.hasFocus()&&this.speak(n),this.emit("message",n)}sendGmcp(n,r){console.log("Sending GMCP:",n,r),this.telnet.sendGmcp(n,r)}sendMcp(n,r){if(typeof r=="object"){let o="";for(const[s,a]of Object.entries(r))o+=` ${s}: ${a||'""'}`;r=o}const i=`#$#${n} ${this.mcpAuthKey} ${r}\r
`;this.send(i)}sendMcpMLLine(n,r,i){this.send(`#$#* ${n} ${r}: ${i}\r
`)}closeMcpML(n){this.send(`#$#: ${n}\r
`)}openEditorWindow(n){console.log(n);const r=new BroadcastChannel("editor"),i=n.reference,o=encodeURIComponent(i),s=window.open(`/editor?reference=${o}`,"_blank");r.onmessage=a=>{console.log("editor window message",a),a.data.id===i&&(a.data.type==="ready"?(console.log("sending editor window session",n),r.postMessage({type:"load",session:n})):a.data.type==="save"?(console.log("saving editor window with session",a.data.session),this.saveEditorWindow(a.data.session)):a.data.type==="close"&&(console.log("closing editor window"),r.close(),r.onmessage=null))},s&&s.focus()}saveEditorWindow(n){const r={reference:n.reference,type:n.type};r["content*"]="",this.sendMCPMultiline("dns-org-mud-moo-simpleedit-set",r,n.contents)}sendMCPMultiline(n,r,i){const o=u0();r["_data-tag"]=o,this.sendMcp(n,r);for(const s of i)this.sendMcpMLLine(o,"content",s);this.closeMcpML(o)}shutdown(){Object.values(this.mcpHandlers).forEach(n=>{n.shutdown()}),Object.values(this.gmcpHandlers).forEach(n=>{n.shutdown()})}requestNotificationPermission(){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="default"&&Notification.requestPermission()}sendNotification(n,r){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="granted"&&new Notification(n,{body:r})}speak(n){if(!("speechSynthesis"in window)){console.log("This browser does not support speech synthesis");return}const r=new SpeechSynthesisUtterance(_B(n));r.lang="en-US";const{rate:i,pitch:o,voice:s,volume:a}=Yc.getState().speech;r.rate=i,r.pitch=o,r.volume=a;const l=speechSynthesis.getVoices().find(u=>u.name===s);l&&(r.voice=l),speechSynthesis.speak(r)}cancelSpeech(){speechSynthesis.cancel()}stopAllSounds(){this.gmcpHandlers["Client.Media"].stopAllSounds()}getInput(){var n;return((n=document.getElementById("command-input"))==null?void 0:n.textContent)||""}setInput(n){const r=document.getElementById("command-input");r&&(r.textContent=n)}}class rV{constructor(){V(this,"history",[]);V(this,"currentIndex",0);V(this,"unsentInput","")}addCommand(e){e.trim()!==""&&(this.history.length===0||this.history[this.history.length-1]!==e)&&(this.history.push(e.trim()),this.currentIndex=this.history.length),this.unsentInput=""}navigateUp(e){return this.currentIndex===this.history.length&&(this.unsentInput=e),this.history.length>0&&this.currentIndex>0&&this.currentIndex--,this.history.length>0?this.history[Math.max(0,this.currentIndex)]:""}navigateDown(e){return this.currentIndex===this.history.length&&(this.unsentInput=e),this.currentIndex<this.history.length-1?(this.currentIndex++,this.history[this.currentIndex]):(this.currentIndex=this.history.length,this.unsentInput)}getCurrentInput(){return this.currentIndex>=this.history.length?this.unsentInput:this.history[this.currentIndex]}}const iV=({onSend:t,inputRef:e})=>{const[n,r]=b.useState(""),i=b.useRef(new rV),o=s=>{const a=i.current;if(s.key==="Enter"&&!s.shiftKey)s.preventDefault(),t(n),a.addCommand(n),r("");else if(s.key==="ArrowUp"){s.preventDefault();const c=a.navigateUp(n);r(c)}else if(s.key==="ArrowDown"){s.preventDefault();const c=a.navigateDown(n);r(c)}};return K.jsx("textarea",{value:n,onChange:s=>r(s.target.value),onKeyDown:o,id:"command-input",ref:e,autoFocus:!0})},oV="46c031368cfdd0ac0f2608851aef2eb5da60b025",bs=()=>{const[,t]=b.useReducer(e=>e+1,0);return b.useEffect(()=>Yc.subscribe(t),[]),[Yc.getState(),Yc.dispatch]},sV=()=>{const[t,e]=b.useState([]);return b.useEffect(()=>{const n=()=>{e(window.speechSynthesis.getVoices())};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)},[]),t},aV=({tabs:t})=>{const[e,n]=b.useState(0),r=b.useRef([]);return b.useEffect(()=>{r.current=r.current.slice(0,t.length)},[t]),b.useEffect(()=>{const i=s=>{switch(s.key){case"ArrowLeft":n(a=>a>0?a-1:t.length-1);break;case"ArrowRight":n(a=>a<t.length-1?a+1:0);break}},o=r.current[e];return o==null||o.addEventListener("keydown",i),()=>{o==null||o.removeEventListener("keydown",i)}},[t.length,e]),b.useEffect(()=>{var i;(i=r.current[e])==null||i.focus()},[e]),K.jsxs("div",{children:[K.jsx("div",{role:"tablist","aria-label":"Tabs",children:t.map((i,o)=>K.jsx("button",{ref:s=>r.current[o]=s,role:"tab","aria-selected":e===o,id:`${i.label}-tab`,"aria-controls":`${i.label}-panel`,onClick:()=>n(o),tabIndex:e===o?void 0:-1,children:i.label},o))}),t.map((i,o)=>K.jsx("div",{role:"tabpanel",id:`${i.label}-panel`,"aria-labelledby":`${i.label}-tab`,hidden:e!==o,tabIndex:e===o?0:-1,children:i.content},o))]})},cV=()=>{const[t,e]=bs();return K.jsxs("label",{children:[K.jsx("input",{type:"checkbox",checked:t.general.localEcho,onChange:n=>e({type:vs.SetGeneral,data:{...t.general,localEcho:n.target.checked}})}),"Local Echo"]})},lV=()=>{const[t,e]=bs();return K.jsxs("label",{children:["Auto Read:",K.jsxs("select",{value:t.speech.autoreadMode,onChange:n=>e({type:vs.SetSpeech,data:{...t.speech,autoreadMode:n.target.value}}),children:[K.jsx("option",{value:"off",children:"Off"}),K.jsx("option",{value:"unfocused",children:"Unfocused"}),K.jsx("option",{value:"all",children:"Always"})]})]})},uV=()=>{const[t,e]=bs(),n=sV();return K.jsxs("label",{children:["Voice:",K.jsx("select",{value:t.speech.voice,onChange:r=>e({type:vs.SetSpeech,data:{...t.speech,voice:r.target.value}}),children:n.map(r=>K.jsx("option",{value:r.name,children:r.name},r.voiceURI))})]})},dV=()=>{const[t,e]=bs();return K.jsxs("label",{children:["Rate (0.1 - 10.0):",K.jsx("input",{type:"range",min:"0.1",max:"10.0",step:"0.1",value:t.speech.rate,onChange:n=>e({type:vs.SetSpeech,data:{...t.speech,rate:parseFloat(n.target.value)}})})]})},hV=()=>{const[t,e]=bs();return K.jsxs("label",{children:["Pitch (0 - 2):",K.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:t.speech.pitch,onChange:n=>e({type:vs.SetSpeech,data:{...t.speech,pitch:parseFloat(n.target.value)}})})]})},fV=()=>{const[t,e]=bs();return K.jsxs("label",{children:["Volume (0 - 1):",K.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.speech.volume,onChange:n=>e({type:vs.SetSpeech,data:{...t.speech,volume:parseFloat(n.target.value)}})})]})},pV=()=>{const[t]=bs(),[e,n]=b.useState(!1),r=()=>{n(!0),console.log("Preview button clicked");const i=()=>{const o=new SpeechSynthesisUtterance("This is a preview of the selected voice settings."),s=speechSynthesis.getVoices();console.log("Available voices:",s.map(c=>c.name));const a=s.find(c=>c.name===t.speech.voice);console.log("Selected voice:",a?a.name:"Not found"),o.voice=a||null,o.rate=t.speech.rate,o.pitch=t.speech.pitch,o.volume=t.speech.volume,console.log("Utterance settings:",{voice:o.voice?o.voice.name:"Default",rate:o.rate,pitch:o.pitch,volume:o.volume}),o.onend=()=>{console.log("Speech ended"),n(!1)},o.onerror=c=>{console.error("Speech synthesis error:",c),n(!1)},speechSynthesis.cancel(),speechSynthesis.speak(o),console.log("Speech started")};speechSynthesis.getVoices().length>0?i():speechSynthesis.onvoiceschanged=()=>{speechSynthesis.onvoiceschanged=null,i()}};return ct.useEffect(()=>()=>{speechSynthesis.cancel()},[]),K.jsx("button",{onClick:r,disabled:e,children:e?"Playing...":"Preview Voice"})},gV=()=>K.jsxs("div",{children:[K.jsx(lV,{}),K.jsx("br",{}),K.jsx(uV,{}),K.jsx("br",{}),K.jsx(dV,{}),K.jsx("br",{}),K.jsx(hV,{}),K.jsx("br",{}),K.jsx(fV,{}),K.jsx("br",{}),K.jsx(pV,{})]}),mV=()=>{const[t,e]=bs(),n=t.editor,r=o=>{e({type:vs.SetEditorAutocompleteEnabled,data:o.target.checked})},i=o=>{e({type:vs.SetEditorAccessibilityMode,data:o.target.checked})};return K.jsxs("div",{children:[K.jsxs("label",{children:[K.jsx("input",{type:"checkbox",checked:n.autocompleteEnabled,onChange:r}),"Enable Autocomplete"]}),K.jsx("br",{}),K.jsxs("label",{children:[K.jsx("input",{type:"checkbox",checked:n.accessibilityMode,onChange:i}),"Enable Accessibility Mode"]}),K.jsx("br",{})]})},vV=()=>{const t=[{label:"General",content:K.jsx(cV,{})},{label:"Speech",content:K.jsx(gV,{})},{label:"Editor",content:K.jsx(mV,{})}];return K.jsx(aV,{tabs:t})};function yV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function kd(){return kd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kd.apply(null,arguments)}var h0="data-focus-lock",PR="data-focus-lock-disabled",CV="data-no-focus-lock",IV="data-autofocus-inside",SV="data-no-autofocus";function fm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function bV(t,e){var n=b.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var wV=typeof window<"u"?b.useLayoutEffect:b.useEffect,Cw=new WeakMap;function AV(t,e){var n=bV(null,function(r){return t.forEach(function(i){return fm(i,r)})});return wV(function(){var r=Cw.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||fm(a,null)}),o.forEach(function(a){i.has(a)||fm(a,s)})}Cw.set(n,t)},[t]),n}var pm={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},f0=function(t,e){return f0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},f0(t,e)};function Gl(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var p0=function(){return p0=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p0.apply(this,arguments)};function kV(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function NR(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Sl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function g0(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function m0(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Qc(t){return this instanceof Qc?(this.v=t,this):new Qc(t)}function EV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(C,m){o.push([f,g,C,m])>1||c(f,g)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(g){h(o[0][3],g)}}function l(f){f.value instanceof Qc?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function TV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Sl=="function"?Sl(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function _R(t){return t}function OR(t,e){e===void 0&&(e=_R);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var c=function(){var u=s;s=[],u.forEach(o)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){s.push(u),l()},filter:function(u){return s=s.filter(u),n}}}};return i}function PC(t,e){return e===void 0&&(e=_R),OR(t,e)}function RV(t){t===void 0&&(t={});var e=OR(null);return e.options=p0({async:!0,ssr:!1},t),e}var MR=PC({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),DR=PC(),xV=PC(),PV=RV({async:!0,ssr:typeof document<"u"}),NV=b.createContext(void 0),_V=[],NC=b.forwardRef(function(e,n){var r,i=b.useState(),o=i[0],s=i[1],a=b.useRef(),c=b.useRef(!1),l=b.useRef(null),u=b.useState({}),d=u[1],h=e.children,f=e.disabled,p=f===void 0?!1:f,g=e.noFocusGuards,C=g===void 0?!1:g,m=e.persistentFocus,v=m===void 0?!1:m,S=e.crossFrame,E=S===void 0?!0:S,w=e.autoFocus,A=w===void 0?!0:w;e.allowTextSelection;var x=e.group,T=e.className,_=e.whiteList,O=e.hasPositiveIndices,L=e.shards,U=L===void 0?_V:L,z=e.as,Z=z===void 0?"div":z,J=e.lockProps,ee=J===void 0?{}:J,re=e.sideCar,X=e.returnFocus,Y=X===void 0?!1:X,oe=e.focusOptions,W=e.onActivation,se=e.onDeactivation,we=b.useState({}),De=we[0],de=b.useCallback(function(ve){var Ge=ve.captureFocusRestore;if(!l.current){var We,Oe=(We=document)==null?void 0:We.activeElement;l.current=Oe,Oe!==document.body&&(l.current=Ge(Oe))}a.current&&W&&W(a.current),c.current=!0,d()},[W]),xe=b.useCallback(function(){c.current=!1,se&&se(a.current),d()},[se]),rt=b.useCallback(function(ve){var Ge=l.current;if(Ge){var We=(typeof Ge=="function"?Ge():Ge)||document.body,Oe=typeof Y=="function"?Y(We):Y;if(Oe){var Je=typeof Oe=="object"?Oe:void 0;l.current=null,ve?Promise.resolve().then(function(){return We.focus(Je)}):We.focus(Je)}}},[Y]),Ce=b.useCallback(function(ve){c.current&&MR.useMedium(ve)},[]),tn=DR.useMedium,vn=b.useCallback(function(ve){a.current!==ve&&(a.current=ve,s(ve))},[]),Zn=kd((r={},r[PR]=p&&"disabled",r[h0]=x,r),ee),$e=C!==!0,Zt=$e&&C!=="tail",Jt=AV([n,vn]),fe=b.useMemo(function(){return{observed:a,shards:U,enabled:!p,active:c.current}},[p,c.current,U,o]);return b.createElement(b.Fragment,null,$e&&[b.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:pm}),O?b.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:pm}):null],!p&&b.createElement(re,{id:De,sideCar:PV,observed:o,disabled:p,persistentFocus:v,crossFrame:E,autoFocus:A,whiteList:_,shards:U,onActivation:de,onDeactivation:xe,returnFocus:rt,focusOptions:oe}),b.createElement(Z,kd({ref:Jt},Zn,{className:T,onBlur:tn,onFocus:Ce}),b.createElement(NV.Provider,{value:fe},h)),Zt&&b.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:pm}))});NC.propTypes={};function v0(t,e){return v0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},v0(t,e)}function OV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,v0(t,e)}function Ed(t){"@babel/helpers - typeof";return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ed(t)}function MV(t,e){if(Ed(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ed(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function DV(t){var e=MV(t,"string");return Ed(e)=="symbol"?e:e+""}function LV(t,e,n){return(e=DV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BV(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var o=[],s;function a(){s=t(o.map(function(l){return l.props})),e(s)}var c=function(l){OV(u,l);function u(){return l.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var f=o.indexOf(this);o.splice(f,1),a()},d.render=function(){return ct.createElement(i,this.props)},u}(b.PureComponent);return LV(c,"displayName","SideEffect("+n(i)+")"),c}}var Ao=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},rc=function(t){return Array.isArray(t)?t:[t]},LR=function(t){return Array.isArray(t)?t[0]:t},FV=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},BR=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},FR=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},UV=function(t){return t.hasAttribute("inert")},VV=function(t,e){return!t||FR(t)||!FV(t)&&!UV(t)&&e(BR(t))},UR=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=VV(e,UR.bind(void 0,t));return t.set(e,r),r},GV=function(t,e){return t&&!FR(t)?ZV(t)?e(BR(t)):!1:!0},VR=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=GV(e,VR.bind(void 0,t));return t.set(e,r),r},GR=function(t){return t.dataset},WV=function(t){return t.tagName==="BUTTON"},WR=function(t){return t.tagName==="INPUT"},jR=function(t){return WR(t)&&t.type==="radio"},jV=function(t){return!((WR(t)||WV(t))&&(t.type==="hidden"||t.disabled))},ZV=function(t){var e=t.getAttribute(SV);return![!0,"true",""].includes(e)},_C=function(t){var e;return!!(t&&(!((e=GR(t))===null||e===void 0)&&e.focusGuard))},y0=function(t){return!_C(t)},HV=function(t){return!!t},zV=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},XV=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},OC=function(t,e,n){return Ao(t).map(function(r,i){var o=XV(r);return{node:r,index:i,tabIndex:n&&o===-1?(r.dataset||{}).focusGuard?0:-1:o}}).filter(function(r){return!e||r.tabIndex>=0}).sort(zV)},$V=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],MC=$V.join(","),KV="".concat(MC,", [data-focus-guard]"),ZR=function(t,e){return Ao((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?KV:MC)?[r]:[],ZR(r))},[])},JV=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?bl([t.contentDocument.body],e):[t]},bl=function(t,e){return t.reduce(function(n,r){var i,o=ZR(r,e),s=(i=[]).concat.apply(i,o.map(function(a){return JV(a,e)}));return n.concat(s,r.parentNode?Ao(r.parentNode.querySelectorAll(MC)).filter(function(a){return a===r}):[])},[])},YV=function(t){var e=t.querySelectorAll("[".concat(IV,"]"));return Ao(e).map(function(n){return bl([n])}).reduce(function(n,r){return n.concat(r)},[])},DC=function(t,e){return Ao(t).filter(function(n){return UR(e,n)}).filter(function(n){return jV(n)})},Iw=function(t,e){return e===void 0&&(e=new Map),Ao(t).filter(function(n){return VR(e,n)})},LC=function(t,e,n){return OC(DC(bl(t,n),e),!0,n)},mp=function(t,e){return OC(DC(bl(t),e),!1)},QV=function(t,e){return DC(YV(t),e)},Xa=function(t,e){return t.shadowRoot?Xa(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:Ao(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?Xa(i,e):!1}return Xa(n,e)})},qV=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(s,a){return!e.has(a)})},HR=function(t){return t.parentNode?HR(t.parentNode):t},BC=function(t){var e=rc(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(h0);return n.push.apply(n,i?qV(Ao(HR(r).querySelectorAll("[".concat(h0,'="').concat(i,'"]:not([').concat(PR,'="disabled"])')))):[r]),n},[])},eG=function(t){try{return t()}catch{return}},Td=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?Td(e.shadowRoot):e instanceof HTMLIFrameElement&&eG(function(){return e.contentWindow.document})?Td(e.contentWindow.document):e}},tG=function(t,e){return t===e},nG=function(t,e){return!!Ao(t.querySelectorAll("iframe")).some(function(n){return tG(n,e)})},zR=function(t,e){return e===void 0&&(e=Td(LR(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:BC(t).some(function(n){return Xa(n,e)||nG(n,e)})},rG=function(t){t===void 0&&(t=document);var e=Td(t);return e?Ao(t.querySelectorAll("[".concat(CV,"]"))).some(function(n){return Xa(n,e)}):!1},iG=function(t,e){return e.filter(jR).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},FC=function(t,e){return jR(t)&&t.name?iG(t,e):t},oG=function(t){var e=new Set;return t.forEach(function(n){return e.add(FC(n,t))}),t.filter(function(n){return e.has(n)})},Sw=function(t){return t[0]&&t.length>1?FC(t[0],t):t[0]},bw=function(t,e){return t.indexOf(FC(e,t))},C0="NEW_FOCUS",sG=function(t,e,n,r,i){var o=t.length,s=t[0],a=t[o-1],c=_C(r);if(!(r&&t.indexOf(r)>=0)){var l=r!==void 0?n.indexOf(r):-1,u=i?n.indexOf(i):l,d=i?t.indexOf(i):-1;if(l===-1)return d!==-1?d:C0;if(d===-1)return C0;var h=l-u,f=n.indexOf(s),p=n.indexOf(a),g=oG(n),C=r!==void 0?g.indexOf(r):-1,m=C-(i?g.indexOf(i):l);if(!h&&d>=0||e.length===0)return d;var v=bw(t,e[0]),S=bw(t,e[e.length-1]);if(l<=f&&c&&Math.abs(h)>1)return S;if(l>=p&&c&&Math.abs(h)>1)return v;if(h&&Math.abs(m)>1)return d;if(l<=f)return S;if(l>p)return v;if(h)return Math.abs(h)>1?d:(o+d+h)%o}},aG=function(t){return function(e){var n,r=(n=GR(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},ww=function(t,e,n){var r=t.map(function(o){var s=o.node;return s}),i=Iw(r.filter(aG(n)));return i&&i.length?Sw(i):Sw(Iw(e))},I0=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&I0(t.parentNode.host||t.parentNode,e),e},gm=function(t,e){for(var n=I0(t),r=I0(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},XR=function(t,e,n){var r=rc(t),i=rc(e),o=r[0],s=!1;return i.filter(Boolean).forEach(function(a){s=gm(s||a,a)||s,n.filter(Boolean).forEach(function(c){var l=gm(o,c);l&&(!s||Xa(l,s)?s=l:s=gm(l,s))})}),s},Aw=function(t,e){return t.reduce(function(n,r){return n.concat(QV(r,e))},[])},cG=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(HV)},lG=function(t,e){var n=Td(rc(t).length>0?document:LR(t).ownerDocument),r=BC(t).filter(y0),i=XR(n||t,t,r),o=new Map,s=mp(r,o),a=s.filter(function(p){var g=p.node;return y0(g)});if(a[0]){var c=mp([i],o).map(function(p){var g=p.node;return g}),l=cG(c,a),u=l.map(function(p){var g=p.node;return g}),d=l.filter(function(p){var g=p.tabIndex;return g>=0}).map(function(p){var g=p.node;return g}),h=sG(u,d,c,n,e);if(h===C0){var f=ww(s,d,Aw(r,o))||ww(s,u,Aw(r,o));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return h===void 0?h:l[h]}},uG=function(t){var e=BC(t).filter(y0),n=XR(t,t,e),r=OC(bl([n],!0),!0,!0),i=bl(e,!1);return r.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:i.indexOf(s)>=0,guard:_C(s)}})},UC=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},mm=0,vm=!1,$R=function(t,e,n){n===void 0&&(n={});var r=lG(t,e);if(!vm&&r){if(mm>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),vm=!0,setTimeout(function(){vm=!1},1);return}mm++,UC(r.node,n.focusOptions),mm--}};function pu(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var dG=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:pu(n),parent:pu(n.parentElement),left:pu(n.previousElementSibling),right:pu(n.nextElementSibling)}),n=n.parentElement;return{element:pu(t),stack:e,ownerDocument:t.ownerDocument}},hG=function(t){var e,n,r,i,o;if(t)for(var s=t.stack,a=t.ownerDocument,c=new Map,l=0,u=s;l<u.length;l++){var d=u[l],h=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(h&&a.contains(h)){for(var f=(n=d.left)===null||n===void 0?void 0:n.call(d),p=d.current(),g=h.contains(p)?p:void 0,C=(r=d.right)===null||r===void 0?void 0:r.call(d),m=LC([h],c),v=(o=(i=g??(f==null?void 0:f.nextElementSibling))!==null&&i!==void 0?i:C)!==null&&o!==void 0?o:f;v;){for(var S=0,E=m;S<E.length;S++){var w=E[S];if(v!=null&&v.contains(w.node))return w.node}v=v.nextElementSibling}if(m.length)return m[0].node}}},fG=function(t){var e=dG(t);return function(){return hG(e)}},pG=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=rc(e);if(r.every(function(s){return!Xa(s,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?LC(r,new Map):mp(r,new Map),o=i.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},gG=function(t,e){var n=e?LC(rc(t),new Map):mp(rc(t),new Map);return{first:n[0],last:n[n.length-1]}},mG=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},KR=function(t,e,n){e===void 0&&(e={});var r=mG(e),i=pG(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&UC(o.node,r.focusOptions)}},vG=function(t,e){e===void 0&&(e={}),KR(t,e,function(n,r){var i=n.next,o=n.first;return i||r&&o})},yG=function(t,e){e===void 0&&(e={}),KR(t,e,function(n,r){var i=n.prev,o=n.last;return i||r&&o})},JR=function(t,e,n){var r,i=gG(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),o=i[n];o&&UC(o.node,e.focusOptions)},CG=function(t,e){e===void 0&&(e={}),JR(t,e,"first")},IG=function(t,e){e===void 0&&(e={}),JR(t,e,"last")};function VC(t){setTimeout(t,1)}var SG=function(e){return e&&"current"in e?e.current:e},bG=function(){return document&&document.activeElement===document.body},wG=function(){return bG()||rG()},qc=null,Wc=null,el=null,Rd=!1,AG=function(){return!0},kG=function(e){return(qc.whiteList||AG)(e)},EG=function(e,n){el={observerNode:e,portaledElement:n}},TG=function(e){return el&&el.portaledElement===e};function kw(t,e,n,r){var i=null,o=t;do{var s=r[o];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else if(s.lockItem){if(o!==t)return;i=null}else break}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var RG=function(e){return e?!!Rd:Rd==="meanwhile"},xG=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},PG=function(e,n){return n.some(function(r){return xG(e,r,r)})},vp=function(){var e=!1;if(qc){var n=qc,r=n.observed,i=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,c=n.focusOptions,l=r||el&&el.portaledElement,u=document&&document.activeElement;if(l){var d=[l].concat(s.map(SG).filter(Boolean));if((!u||kG(u))&&(i||RG(a)||!wG()||!Wc&&o)&&(l&&!(zR(d)||u&&PG(u,d)||TG(u))&&(document&&!Wc&&u&&!o?(u.blur&&u.blur(),document.body.focus()):(e=$R(d,Wc,{focusOptions:c}),el={})),Rd=!1,Wc=document&&document.activeElement),document&&u!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var h=document&&document.activeElement,f=uG(d),p=f.map(function(g){var C=g.node;return C}).indexOf(h);p>-1&&(f.filter(function(g){var C=g.guard,m=g.node;return C&&m.dataset.focusAutoGuard}).forEach(function(g){var C=g.node;return C.removeAttribute("tabIndex")}),kw(p,f.length,1,f),kw(p,-1,-1,f))}}}return e},YR=function(e){vp()&&e&&(e.stopPropagation(),e.preventDefault())},GC=function(){return VC(vp)},NG=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||EG(r,n)},_G=function(){return null},QR=function(){Rd="just",VC(function(){Rd="meanwhile"})},OG=function(){document.addEventListener("focusin",YR),document.addEventListener("focusout",GC),window.addEventListener("blur",QR)},MG=function(){document.removeEventListener("focusin",YR),document.removeEventListener("focusout",GC),window.removeEventListener("blur",QR)};function DG(t){return t.filter(function(e){var n=e.disabled;return!n})}var qR={moveFocusInside:$R,focusInside:zR,focusNextElement:vG,focusPrevElement:yG,focusFirstElement:CG,focusLastElement:IG,captureFocusRestore:fG};function LG(t){var e=t.slice(-1)[0];e&&!qc&&OG();var n=qc,r=n&&e&&e.id===n.id;qc=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!e)),e?(Wc=null,(!r||n.observed!==e.observed)&&e.onActivation(qR),vp(),VC(vp)):(MG(),Wc=null)}MR.assignSyncMedium(NG);DR.assignMedium(GC);xV.assignMedium(function(t){return t(qR)});const BG=BV(DG,LG)(_G);var ex=b.forwardRef(function(e,n){return b.createElement(NC,kd({sideCar:BG,ref:n},e))}),tx=NC.propTypes||{};tx.sideCar;yV(tx,["sideCar"]);ex.propTypes={};const FG=ct.forwardRef((t,e)=>{const[n,r]=b.useState(!1),i=b.useRef(null);return ct.useImperativeHandle(e,()=>({open(){r(!0)},close(){r(!1)}})),b.useEffect(()=>{var o;n&&((o=i.current)==null||o.focus())},[n]),b.useEffect(()=>{const o=s=>{s.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[]),K.jsx(ex,{disabled:!n,children:K.jsxs("dialog",{className:"preferences-dialog",open:n,ref:i,tabIndex:-1,"aria-label":"Preferences",children:[K.jsx("h1",{style:{color:"white",textAlign:"center",fontSize:"1.5em",padding:"0.5em",margin:"0.5em",border:"1px solid black",borderRadius:"0.5em",backgroundColor:"black"},children:"Preferences"}),n&&K.jsx(vV,{}),K.jsx("button",{onClick:()=>r(!1),children:"Close"}),K.jsx("br",{}),K.jsxs("span",{id:"commit-hash",children:["Version: ",oV]})]})})});var nx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Ew=ct.createContext&&ct.createContext(nx),UG=["attr","size","title"];function VG(t,e){if(t==null)return{};var n=GG(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function GG(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function yp(){return yp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yp.apply(this,arguments)}function Tw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Cp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tw(Object(n),!0).forEach(function(r){WG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function WG(t,e,n){return e=jG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jG(t){var e=ZG(t,"string");return typeof e=="symbol"?e:e+""}function ZG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rx(t){return t&&t.map((e,n)=>ct.createElement(e.tag,Cp({key:n},e.attr),rx(e.child)))}function gc(t){return e=>ct.createElement(HG,yp({attr:Cp({},t.attr)},e),rx(t.child))}function HG(t){var e=n=>{var{attr:r,size:i,title:o}=t,s=VG(t,UG),a=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),ct.createElement("svg",yp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:c,style:Cp(Cp({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&ct.createElement("title",null,o),t.children)};return Ew!==void 0?ct.createElement(Ew.Consumer,null,n=>e(n)):e(nx)}function zG(t){return gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function XG(t){return gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function $G(t){return gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"},child:[]}]})(t)}function ix(t){return gc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function KG(t){return gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function JG(t){return gc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function YG(t){return gc({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const QG=({client:t,onClearLog:e,onSaveLog:n,onToggleUsers:r,onOpenPrefs:i})=>{const[o,s]=ct.useState(t.cacophony.muted);return K.jsxs("div",{className:"toolbar",children:[K.jsxs("button",{onClick:n,accessKey:"l",children:[K.jsx(ix,{}),"Save Log"]}),K.jsxs("button",{onClick:e,accessKey:"c",children:[K.jsx($G,{}),"Clear Log"]}),K.jsxs("button",{onClick:i,accessKey:"p",children:[K.jsx(zG,{}),"Preferences"]}),K.jsxs("button",{onClick:()=>{s(!o),t.cacophony.muted=!o},accessKey:"m",children:[o?K.jsx(YG,{}):K.jsx(JG,{}),o?"Unmute":"Mute"]}),K.jsxs("label",{children:["Volume",K.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>t.cacophony.setGlobalVolume(Number(a.target.value)/100)})]}),K.jsx("button",{onClick:r,accessKey:"u",children:"Show/Hide Users"}),K.jsxs("label",{children:["Volume",K.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>t.cacophony.setGlobalVolume(Number(a.target.value)/100)})]})]})};class qG extends ct.Component{constructor(e){super(e),this.state={statusText:"Not connected"},e.client.on("statustext",n=>this.setState({statusText:n})),e.client.on("connect",()=>this.setState({statusText:"Connected"})),e.client.on("disconnect",()=>this.setState({statusText:"Disconnected"}))}render(){return K.jsx("div",{className:"statusbar",children:this.state.statusText})}}const eW=({users:t})=>K.jsxs("div",{className:"sidebar",children:[K.jsx("div",{className:"sidebar-header",role:"heading","aria-level":2,children:"Connected Players"}),K.jsx("div",{className:"sidebar-content",children:K.jsx("ul",{children:t.map(e=>{let n="";return e.away&&(n+=" away"),e.idle&&(n+=" idle"),K.jsx("li",{className:n,children:e.Name},e.Object)})})})]});var Rw={};function tW(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var nW=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function rW(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ox={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(nW,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function o(g,C){var m=g[C];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?s:console[g]!==void 0?o(console,g):console.log!==void 0?o(console,"log"):e}function c(g,C){for(var m=0;m<i.length;m++){var v=i[m];this[v]=m<g?e:this.methodFactory(v,g,C)}this.log=this.debug}function l(g,C,m){return function(){typeof console!==n&&(c.call(this,C,m),this[g].apply(this,arguments))}}function u(g,C,m){return a(g)||l.apply(this,arguments)}function d(g,C,m){var v=this,S;C=C??"WARN";var E="loglevel";typeof g=="string"?E+=":"+g:typeof g=="symbol"&&(E=void 0);function w(_){var O=(i[_]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=O;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+O+";"}catch{}}}function A(){var _;if(!(typeof window===n||!E)){try{_=window.localStorage[E]}catch{}if(typeof _===n)try{var O=window.document.cookie,L=O.indexOf(encodeURIComponent(E)+"=");L!==-1&&(_=/^([^;]+)/.exec(O.slice(L))[1])}catch{}return v.levels[_]===void 0&&(_=void 0),_}}function x(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E);return}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}v.name=g,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=m||u,v.getLevel=function(){return S},v.setLevel=function(_,O){if(typeof _=="string"&&v.levels[_.toUpperCase()]!==void 0&&(_=v.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=v.levels.SILENT){if(S=_,O!==!1&&w(_),c.call(v,_,g),typeof console===n&&_<v.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+_},v.setDefaultLevel=function(_){C=_,A()||v.setLevel(_,!1)},v.resetLevel=function(){v.setLevel(C,!1),x()},v.enableAll=function(_){v.setLevel(v.levels.TRACE,_)},v.disableAll=function(_){v.setLevel(v.levels.SILENT,_)};var T=A();T==null&&(T=C),v.setLevel(T,!1)}var h=new d,f={};h.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var m=f[C];return m||(m=f[C]=new d(C,h.getLevel(),h.methodFactory)),m};var p=typeof window!==n?window.log:void 0;return h.noConflict=function(){return typeof window!==n&&window.log===h&&(window.log=p),h},h.getLoggers=function(){return f},h.default=h,h})})(ox);var WC=ox.exports,S0;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(S0||(S0={}));var yo;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(yo||(yo={}));let Xe=WC.getLogger("livekit");Xe.setDefaultLevel(S0.info);function ys(t){const e=WC.getLogger(t);return e.setDefaultLevel(Xe.getLevel()),e}WC.getLogger("lk-e2ee");function gr(t,e){if(!t)throw new Error(e)}const iW=34028234663852886e22,oW=-34028234663852886e22,sW=4294967295,aW=2147483647,cW=-2147483648;function gf(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>aW||t<cW)throw new Error("invalid int 32: "+t)}function b0(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>sW||t<0)throw new Error("invalid uint 32: "+t)}function sx(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>iW||t<oW))throw new Error("invalid float 32: "+t)}const ax=Symbol("@bufbuild/protobuf/enum-type");function lW(t){const e=t[ax];return gr(e,"missing enum type on enum object"),e}function cx(t,e,n,r){t[ax]=lx(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function lx(t,e,n){const r=Object.create(null),i=Object.create(null),o=[];for(const s of e){const a=ux(s);o.push(a),r[s.name]=a,i[s.no]=a}return{typeName:t,values:o,findName(s){return r[s]},findNumber(s){return i[s]}}}function uW(t,e,n){const r={};for(const i of e){const o=ux(i);r[o.localName]=o.no,r[o.no]=o.localName}return cx(r,t,e),r}function ux(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Se{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function dW(t,e,n,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),s={[o]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(s.prototype,new Se),Object.assign(s,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new s().fromBinary(a,c)},fromJson(a,c){return new s().fromJson(a,c)},fromJsonString(a,c){return new s().fromJsonString(a,c)},equals(a,c){return t.util.equals(s,a,c)}}),s}function hW(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makeMessageType(i,o,s){return dW(this,i,o,s)},makeEnum:uW,makeEnumType:lx,getEnumType:lW}}var te;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(te||(te={}));var ic;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(ic||(ic={}));function fW(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function ym(t,e,n){for(let o=0;o<28;o=o+7){const s=t>>>o,a=!(!(s>>>7)&&e==0),c=(a?s|128:s)&255;if(n.push(c),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const s=e>>>o,a=!!(s>>>7),c=(a?s|128:s)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const mf=4294967296;function xw(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function o(s,a){const c=Number(t.slice(s,a));i*=n,r=r*n+c,r>=mf&&(i=i+(r/mf|0),r=r%mf)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?hx(r,i):jC(r,i)}function pW(t,e){let n=jC(t,e);const r=n.hi&2147483648;r&&(n=hx(n.lo,n.hi));const i=dx(n.lo,n.hi);return r?"-"+i:i}function dx(t,e){if({lo:t,hi:e}=gW(t,e),e<=2097151)return String(mf*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let o=n+r*6777216+i*6710656,s=r+i*8147497,a=i*2;const c=1e7;return o>=c&&(s+=Math.floor(o/c),o%=c),s>=c&&(a+=Math.floor(s/c),s%=c),a.toString()+Pw(s)+Pw(o)}function gW(t,e){return{lo:t>>>0,hi:e>>>0}}function jC(t,e){return{lo:t|0,hi:e|0}}function hx(t,e){return e=~e,t?t=~t+1:e+=1,jC(t,e)}const Pw=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Nw(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function mW(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function vW(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof Rw!="object"||Rw.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<s)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>gr(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>gr(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),xw(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),xw(i)},dec(i,o){return pW(i,o)},uDec(i,o){return dx(i,o)}}}const Ue=vW();var zt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(zt||(zt={}));class yW{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(b0(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return gf(e),Nw(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){sx(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){b0(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){gf(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return gf(e),e=(e<<1^e>>31)>>>0,Nw(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Ue.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Ue.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Ue.enc(e);return ym(n.lo,n.hi,this.buf),this}sint64(e){let n=Ue.enc(e),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return ym(i,o,this.buf),this}uint64(e){let n=Ue.uEnc(e);return ym(n.lo,n.hi,this.buf),this}}class CW{constructor(e,n){this.varint64=fW,this.uint32=mW,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case zt.Varint:for(;this.buf[this.pos++]&128;);break;case zt.Bit64:this.pos+=4;case zt.Bit32:this.pos+=4;break;case zt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case zt.StartGroup:let i;for(;(i=this.tag()[1])!==zt.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Ue.dec(...this.varint64())}uint64(){return Ue.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Ue.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ue.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ue.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function w0(t,e){return e instanceof Se||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}te.DOUBLE,te.FLOAT,te.INT64,te.UINT64,te.INT32,te.UINT32,te.BOOL,te.STRING,te.BYTES;function Rs(t,e,n){if(e===n)return!0;if(t==te.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case te.UINT64:case te.FIXED64:case te.INT64:case te.SFIXED64:case te.SINT64:return e==n}return!1}function A0(t,e){switch(t){case te.BOOL:return!1;case te.UINT64:case te.FIXED64:case te.INT64:case te.SFIXED64:case te.SINT64:return e==0?Ue.zero:"0";case te.DOUBLE:case te.FLOAT:return 0;case te.BYTES:return new Uint8Array(0);case te.STRING:return"";default:return 0}}function fx(t,e){const n=e===void 0;let r=zt.Varint,i=e===0;switch(t){case te.STRING:i=n||!e.length,r=zt.LengthDelimited;break;case te.BOOL:i=e===!1;break;case te.DOUBLE:r=zt.Bit64;break;case te.FLOAT:r=zt.Bit32;break;case te.INT64:i=n||e==0;break;case te.UINT64:i=n||e==0;break;case te.FIXED64:i=n||e==0,r=zt.Bit64;break;case te.BYTES:i=n||!e.byteLength,r=zt.LengthDelimited;break;case te.FIXED32:r=zt.Bit32;break;case te.SFIXED32:r=zt.Bit32;break;case te.SFIXED64:i=n||e==0,r=zt.Bit64;break;case te.SINT64:i=n||e==0;break}const o=te[t].toLowerCase();return[r,o,n||i]}const Ac=Symbol("@bufbuild/protobuf/unknown-fields"),_w={readUnknownFields:!0,readerFactory:t=>new CW(t)},Ow={writeUnknownFields:!0,writerFactory:()=>new yW};function IW(t){return t?Object.assign(Object.assign({},_w),t):_w}function SW(t){return t?Object.assign(Object.assign({},Ow),t):Ow}function bW(){return{makeReadOptions:IW,makeWriteOptions:SW,listUnknownFields(t){var e;return(e=t[Ac])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Ac]},writeUnknownFields(t,e){const r=t[Ac];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Ac])||(i[Ac]=[]),i[Ac].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r){const i=t.getType(),o=n===void 0?e.len:e.pos+n;for(;e.pos<o;){const[s,a]=e.tag(),c=i.fields.find(s);if(!c){const h=e.skip(a);r.readUnknownFields&&this.onUnknownField(t,s,a,h);continue}let l=t,u=c.repeated,d=c.localName;switch(c.oneof&&(l=l[c.oneof.localName],l.case!=d&&delete l.value,l.case=d,d="value"),c.kind){case"scalar":case"enum":const h=c.kind=="enum"?te.INT32:c.T;let f=Ip;if(c.kind=="scalar"&&c.L>0&&(f=AW),u){let m=l[d];if(a==zt.LengthDelimited&&h!=te.STRING&&h!=te.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)m.push(f(e,h))}else m.push(f(e,h))}else l[d]=f(e,h);break;case"message":const p=c.T;u?l[d].push(vf(e,new p,r)):l[d]instanceof Se?vf(e,l[d],r):(l[d]=vf(e,new p,r),p.fieldWrapper&&!c.oneof&&!c.repeated&&(l[d]=p.fieldWrapper.unwrapField(l[d])));break;case"map":let[g,C]=wW(c,e,r);l[d][g]=C;break}}}}}function vf(t,e,n){return e.getType().runtime.bin.readMessage(e,t,t.uint32(),n),e}function wW(t,e,n){const r=e.uint32(),i=e.pos+r;let o,s;for(;e.pos<i;){let[a]=e.tag();switch(a){case 1:o=Ip(e,t.K);break;case 2:switch(t.V.kind){case"scalar":s=Ip(e,t.V.T);break;case"enum":s=e.int32();break;case"message":s=vf(e,new t.V.T,n);break}break}}if(o===void 0){let a=A0(t.K,ic.BIGINT);o=t.K==te.BOOL?a.toString():a}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(t.V.kind){case"scalar":s=A0(t.V.T,ic.BIGINT);break;case"enum":s=0;break;case"message":s=new t.V.T;break}return[o,s]}function AW(t,e){const n=Ip(t,e);return typeof n=="bigint"?n.toString():n}function Ip(t,e){switch(e){case te.STRING:return t.string();case te.BOOL:return t.bool();case te.DOUBLE:return t.double();case te.FLOAT:return t.float();case te.INT32:return t.int32();case te.INT64:return t.int64();case te.UINT64:return t.uint64();case te.FIXED64:return t.fixed64();case te.BYTES:return t.bytes();case te.FIXED32:return t.fixed32();case te.SFIXED32:return t.sfixed32();case te.SFIXED64:return t.sfixed64();case te.SINT64:return t.sint64();case te.UINT32:return t.uint32();case te.SINT32:return t.sint32()}}function kW(t,e,n,r,i){t.tag(n.no,zt.LengthDelimited),t.fork();let o=r;switch(n.K){case te.INT32:case te.FIXED32:case te.UINT32:case te.SFIXED32:case te.SINT32:o=Number.parseInt(r);break;case te.BOOL:gr(r=="true"||r=="false"),o=r=="true";break}switch($u(t,n.K,1,o,!0),n.V.kind){case"scalar":$u(t,n.V.T,2,i,!0);break;case"enum":$u(t,te.INT32,2,i,!0);break;case"message":k0(t,e,n.V.T,2,i);break}t.join()}function k0(t,e,n,r,i){if(i!==void 0){const o=w0(n,i);t.tag(r,zt.LengthDelimited).bytes(o.toBinary(e))}}function $u(t,e,n,r,i){let[o,s,a]=fx(e,r);(!a||i)&&t.tag(n,o)[s](r)}function EW(t,e,n,r){if(!r.length)return;t.tag(n,zt.LengthDelimited).fork();let[,i]=fx(e);for(let o=0;o<r.length;o++)t[i](r[o]);t.join()}function TW(){return Object.assign(Object.assign({},bW()),{writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){let o,s=i.repeated,a=i.localName;if(i.oneof){const c=t[i.oneof.localName];if(c.case!==a)continue;o=c.value}else o=t[a];switch(i.kind){case"scalar":case"enum":let c=i.kind=="enum"?te.INT32:i.T;if(s)if(i.packed)EW(e,c,i.no,o);else for(const l of o)$u(e,c,i.no,l,!0);else o!==void 0&&$u(e,c,i.no,o,!!i.oneof||i.opt);break;case"message":if(s)for(const l of o)k0(e,n,i.T,i.no,l);else k0(e,n,i.T,i.no,o);break;case"map":for(const[l,u]of Object.entries(o))kW(e,n,i,l,u);break}}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}let Mo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),sg=[];for(let t=0;t<Mo.length;t++)sg[Mo[t].charCodeAt(0)]=t;sg[45]=Mo.indexOf("+");sg[95]=Mo.indexOf("/");const px={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,o,s=0;for(let a=0;a<t.length;a++){if(o=sg[t.charCodeAt(a)],o===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=o,i=1;break;case 1:n[r++]=s<<2|(o&48)>>4,s=o,i=2;break;case 2:n[r++]=(s&15)<<4|(o&60)>>2,s=o,i=3;break;case 3:n[r++]=(s&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=Mo[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Mo[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Mo[i|r>>6],e+=Mo[r&63],n=0;break}return n&&(e+=Mo[i],e+="=",n==1&&(e+="=")),e}},Mw={ignoreUnknownFields:!1},Dw={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function RW(t){return t?Object.assign(Object.assign({},Mw),t):Mw}function xW(t){return t?Object.assign(Object.assign({},Dw),t):Dw}function PW(t){const e=t(NW,Lw);return{makeReadOptions:RW,makeWriteOptions:xW,readMessage(n,r,i,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(this.debug(r)));o=o??new n;const s={};for(const[a,c]of Object.entries(r)){const l=n.fields.findJsonName(a);if(!l){if(!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(a,'" is unknown'));continue}let u=l.localName,d=o;if(l.oneof){if(c===null&&l.kind=="scalar")continue;const h=s[l.oneof.localName];if(h)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(h,'", "').concat(a,'"'));s[l.oneof.localName]=a,d=d[l.oneof.localName]={case:u},u="value"}if(l.repeated){if(c===null)continue;if(!Array.isArray(c))throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const h=d[u];for(const f of c){if(f===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(f)));let p;switch(l.kind){case"message":p=l.T.fromJson(f,i);break;case"enum":if(p=Cm(l.T,f,i.ignoreUnknownFields),p===void 0)continue;break;case"scalar":try{p=gu(l.T,f,l.L)}catch(g){let C="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(f));throw g instanceof Error&&g.message.length>0&&(C+=": ".concat(g.message)),new Error(C)}break}h.push(p)}}else if(l.kind=="map"){if(c===null)continue;if(Array.isArray(c)||typeof c!="object")throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const h=d[u];for(const[f,p]of Object.entries(c)){if(p===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: map value null"));let g;switch(l.V.kind){case"message":g=l.V.T.fromJson(p,i);break;case"enum":if(g=Cm(l.V.T,p,i.ignoreUnknownFields),g===void 0)continue;break;case"scalar":try{g=gu(l.V.T,p,ic.BIGINT)}catch(C){let m="cannot decode map value for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(m+=": ".concat(C.message)),new Error(m)}break}try{h[gu(l.K,l.K==te.BOOL?f=="true"?!0:f=="false"?!1:f:f,ic.BIGINT).toString()]=g}catch(C){let m="cannot decode map key for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(m+=": ".concat(C.message)),new Error(m)}}}else switch(l.kind){case"message":const h=l.T;if(c===null&&h.typeName!="google.protobuf.Value"){if(l.oneof)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name,' from JSON: null is invalid for oneof field "').concat(a,'"'));continue}d[u]instanceof Se?d[u].fromJson(c,i):(d[u]=h.fromJson(c,i),h.fieldWrapper&&!l.oneof&&(d[u]=h.fieldWrapper.unwrapField(d[u])));break;case"enum":const f=Cm(l.T,c,i.ignoreUnknownFields);f!==void 0&&(d[u]=f);break;case"scalar":try{d[u]=gu(l.T,c,l.L)}catch(p){let g="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw p instanceof Error&&p.message.length>0&&(g+=": ".concat(p.message)),new Error(g)}break}}return o},writeMessage(n,r){const i=n.getType(),o={};let s;try{for(const a of i.fields.byMember()){let c;if(a.kind=="oneof"){const l=n[a.localName];if(l.value===void 0)continue;if(s=a.findField(l.case),!s)throw"oneof case not found: "+l.case;c=e(s,l.value,r)}else s=a,c=e(s,n[s.localName],r);c!==void 0&&(o[r.useProtoFieldName?s.name:s.jsonName]=c)}}catch(a){const c=s?"cannot encode field ".concat(i.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return o},readScalar:gu,writeScalar:Lw,debug:gx}}function gx(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function gu(t,e,n){switch(t){case te.DOUBLE:case te.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==te.FLOAT&&sx(r),r;case te.INT32:case te.FIXED32:case te.SFIXED32:case te.SINT32:case te.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return t==te.UINT32?b0(i):gf(i),i;case te.INT64:case te.SFIXED64:case te.SINT64:if(e===null)return Ue.zero;if(typeof e!="number"&&typeof e!="string")break;const o=Ue.parse(e);return n?o.toString():o;case te.FIXED64:case te.UINT64:if(e===null)return Ue.zero;if(typeof e!="number"&&typeof e!="string")break;const s=Ue.uParse(e);return n?s.toString():s;case te.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case te.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case te.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return px.dec(e)}throw new Error}function Cm(t,e,n){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r||n)return r==null?void 0:r.no;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(gx(e)))}function NW(t,e,n,r){var i;if(e===void 0)return e;if(e===0&&!n)return;if(r)return e;if(t.typeName=="google.protobuf.NullValue")return null;const o=t.findNumber(e);return(i=o==null?void 0:o.name)!==null&&i!==void 0?i:e}function Lw(t,e,n){if(e!==void 0)switch(t){case te.INT32:case te.SFIXED32:case te.SINT32:case te.FIXED32:case te.UINT32:return gr(typeof e=="number"),e!=0||n?e:void 0;case te.FLOAT:case te.DOUBLE:return gr(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||n?e:void 0;case te.STRING:return gr(typeof e=="string"),e.length>0||n?e:void 0;case te.BOOL:return gr(typeof e=="boolean"),e||n?e:void 0;case te.UINT64:case te.FIXED64:case te.INT64:case te.SFIXED64:case te.SINT64:return gr(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.toString(10):void 0;case te.BYTES:return gr(e instanceof Uint8Array),n||e.byteLength>0?px.enc(e):void 0}}function _W(){return PW((t,e)=>function(r,i,o){if(r.kind=="map"){const s={};switch(r.V.kind){case"scalar":for(const[c,l]of Object.entries(i)){const u=e(r.V.T,l,!0);gr(u!==void 0),s[c.toString()]=u}break;case"message":for(const[c,l]of Object.entries(i))s[c.toString()]=l.toJson(o);break;case"enum":const a=r.V.T;for(const[c,l]of Object.entries(i)){gr(l===void 0||typeof l=="number");const u=t(a,l,!0,o.enumAsInteger);gr(u!==void 0),s[c.toString()]=u}break}return o.emitDefaultValues||Object.keys(s).length>0?s:void 0}else if(r.repeated){const s=[];switch(r.kind){case"scalar":for(let a=0;a<i.length;a++)s.push(e(r.T,i[a],!0));break;case"enum":for(let a=0;a<i.length;a++)s.push(t(r.T,i[a],!0,o.enumAsInteger));break;case"message":for(let a=0;a<i.length;a++)s.push(w0(r.T,i[a]).toJson(o));break}return o.emitDefaultValues||s.length>0?s:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return t(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return i!==void 0?w0(r.T,i).toJson(o):void 0}})}function OW(){return{setEnumType:cx,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,o=e,s=t;if(s[i]!==void 0)switch(r.kind){case"oneof":const a=s[i].case;if(a===void 0)continue;const c=r.findField(a);let l=s[i].value;c&&c.kind=="message"&&!(l instanceof c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===te.BYTES&&(l=mu(l)),o[i]={case:a,value:l};break;case"scalar":case"enum":let u=s[i];r.T===te.BYTES&&(u=r.repeated?u.map(mu):mu(u)),o[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===te.BYTES)for(const[f,p]of Object.entries(s[i]))o[i][f]=mu(p);else Object.assign(o[i],s[i]);break;case"message":const h=r.V.T;for(const f of Object.keys(s[i])){let p=s[i][f];h.fieldWrapper||(p=new h(p)),o[i][f]=p}break}break;case"message":const d=r.T;if(r.repeated)o[i]=s[i].map(h=>h instanceof d?h:new d(h));else if(s[i]!==void 0){const h=s[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[i]=mu(h):o[i]=h:o[i]=h instanceof d?h:new d(h)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((s,a)=>r.T.equals(s,o[a]));case"scalar":return i.every((s,a)=>Rs(r.T,s,o[a]));case"enum":return i.every((s,a)=>Rs(te.INT32,s,o[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return Rs(te.INT32,i,o);case"scalar":return Rs(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const s=r.findField(i.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(i.value,o.value);case"enum":return Rs(te.INT32,i.value,o.value);case"scalar":return Rs(s.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(s.kind));case"map":const a=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const c=r.V.T;return a.every(u=>c.equals(i[u],o[u]));case"enum":return a.every(u=>Rs(te.INT32,i[u],o[u]));case"scalar":const l=r.V.T;return a.every(u=>Rs(l,i[u],o[u]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const o=t[i.localName];let s;if(i.repeated)s=o.map(Mh);else if(i.kind=="map"){s=r[i.localName];for(const[a,c]of Object.entries(o))s[a]=Mh(c)}else i.kind=="oneof"?s=i.findField(o.case)?{case:o.case,value:Mh(o.value)}:{case:void 0}:s=Mh(o);r[i.localName]=s}return n}}}function Mh(t){if(t===void 0)return t;if(t instanceof Se)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function mu(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class MW{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function mx(t,e){const n=vx(t);return e?n:VW(UW(n))}function DW(t){return mx(t,!1)}const LW=vx;function vx(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const BW=new Set(["constructor","toString","toJSON","valueOf"]),FW=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),yx=t=>"".concat(t,"$"),UW=t=>FW.has(t)?yx(t):t,VW=t=>BW.has(t)?yx(t):t;class GW{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=DW(e)}addField(e){gr(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const R=hW("proto3",_W(),TW(),Object.assign(Object.assign({},OW()),{newFieldList(t){return new MW(t,WW)},initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=A0(e.T,e.L);break}}}}));function WW(t){var e,n,r,i;const o=[];let s;for(const a of typeof t=="function"?t():t){const c=a;if(c.localName=mx(a.name,a.oneof!==void 0),c.jsonName=(e=a.jsonName)!==null&&e!==void 0?e:LW(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.L=(r=a.L)!==null&&r!==void 0?r:ic.BIGINT),c.packed=(i=a.packed)!==null&&i!==void 0?i:a.kind=="enum"||a.kind=="scalar"&&a.T!=te.BYTES&&a.T!=te.STRING,a.oneof!==void 0){const l=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!s||s.name!=l)&&(s=new GW(l)),c.oneof=s,s.addField(c)}o.push(c)}return o}class gn extends Se{constructor(e){super(),this.seconds=Ue.zero,this.nanos=0,R.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(R.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Ue.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return gn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new gn({seconds:Ue.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new gn().fromBinary(e,n)}static fromJson(e,n){return new gn().fromJson(e,n)}static fromJsonString(e,n){return new gn().fromJsonString(e,n)}static equals(e,n){return R.util.equals(gn,e,n)}}gn.runtime=R;gn.typeName="google.protobuf.Timestamp";gn.fields=R.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var E0;(function(t){t[t.DEFAULT_AC=0]="DEFAULT_AC",t[t.OPUS=1]="OPUS",t[t.AAC=2]="AAC"})(E0||(E0={}));R.util.setEnumType(E0,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var T0;(function(t){t[t.DEFAULT_VC=0]="DEFAULT_VC",t[t.H264_BASELINE=1]="H264_BASELINE",t[t.H264_MAIN=2]="H264_MAIN",t[t.H264_HIGH=3]="H264_HIGH",t[t.VP8=4]="VP8"})(T0||(T0={}));R.util.setEnumType(T0,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var R0;(function(t){t[t.IC_DEFAULT=0]="IC_DEFAULT",t[t.IC_JPEG=1]="IC_JPEG"})(R0||(R0={}));R.util.setEnumType(R0,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var Un;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO",t[t.DATA=2]="DATA"})(Un||(Un={}));R.util.setEnumType(Un,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var Xt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CAMERA=1]="CAMERA",t[t.MICROPHONE=2]="MICROPHONE",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(Xt||(Xt={}));R.util.setEnumType(Xt,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var ln;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF"})(ln||(ln={}));R.util.setEnumType(ln,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var Bo;(function(t){t[t.POOR=0]="POOR",t[t.GOOD=1]="GOOD",t[t.EXCELLENT=2]="EXCELLENT",t[t.LOST=3]="LOST"})(Bo||(Bo={}));R.util.setEnumType(Bo,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var Li;(function(t){t[t.UNSET=0]="UNSET",t[t.DISABLED=1]="DISABLED",t[t.ENABLED=2]="ENABLED"})(Li||(Li={}));R.util.setEnumType(Li,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var ls;(function(t){t[t.UNKNOWN_REASON=0]="UNKNOWN_REASON",t[t.CLIENT_INITIATED=1]="CLIENT_INITIATED",t[t.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",t[t.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",t[t.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",t[t.ROOM_DELETED=5]="ROOM_DELETED",t[t.STATE_MISMATCH=6]="STATE_MISMATCH",t[t.JOIN_FAILURE=7]="JOIN_FAILURE"})(ls||(ls={}));R.util.setEnumType(ls,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"}]);var No;(function(t){t[t.RR_UNKNOWN=0]="RR_UNKNOWN",t[t.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",t[t.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",t[t.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",t[t.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(No||(No={}));R.util.setEnumType(No,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var xd;(function(t){t[t.SE_UNKNOWN=0]="SE_UNKNOWN",t[t.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",t[t.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(xd||(xd={}));R.util.setEnumType(xd,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let Wl=class Ou extends Se{constructor(e){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=Ue.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ou().fromBinary(e,n)}static fromJson(e,n){return new Ou().fromJson(e,n)}static fromJsonString(e,n){return new Ou().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ou,e,n)}};Wl.runtime=R;Wl.typeName="livekit.Room";Wl.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Ai,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8}]);class Ai extends Se{constructor(e){super(),this.mime="",this.fmtpLine="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Ai().fromBinary(e,n)}static fromJson(e,n){return new Ai().fromJson(e,n)}static fromJsonString(e,n){return new Ai().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ai,e,n)}}Ai.runtime=R;Ai.typeName="livekit.Codec";Ai.fields=R.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class zs extends Se{constructor(e){super(),this.enabled=!1,this.min=0,this.max=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new zs().fromBinary(e,n)}static fromJson(e,n){return new zs().fromJson(e,n)}static fromJsonString(e,n){return new zs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(zs,e,n)}}zs.runtime=R;zs.typeName="livekit.PlayoutDelay";zs.fields=R.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class Fo extends Se{constructor(e){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Fo().fromBinary(e,n)}static fromJson(e,n){return new Fo().fromJson(e,n)}static fromJsonString(e,n){return new Fo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Fo,e,n)}}Fo.runtime=R;Fo.typeName="livekit.ParticipantPermission";Fo.fields=R.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:R.getEnumType(Xt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class Vr extends Se{constructor(e){super(),this.sid="",this.identity="",this.state=oc.JOINING,this.tracks=[],this.metadata="",this.joinedAt=Ue.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Vr().fromBinary(e,n)}static fromJson(e,n){return new Vr().fromJson(e,n)}static fromJsonString(e,n){return new Vr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Vr,e,n)}}Vr.runtime=R;Vr.typeName="livekit.ParticipantInfo";Vr.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(oc)},{no:4,name:"tracks",kind:"message",T:vr,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:Fo},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8}]);var oc;(function(t){t[t.JOINING=0]="JOINING",t[t.JOINED=1]="JOINED",t[t.ACTIVE=2]="ACTIVE",t[t.DISCONNECTED=3]="DISCONNECTED"})(oc||(oc={}));R.util.setEnumType(oc,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);class Xs extends Se{constructor(e){super(),R.util.initPartial(e,this)}static fromBinary(e,n){return new Xs().fromBinary(e,n)}static fromJson(e,n){return new Xs().fromJson(e,n)}static fromJsonString(e,n){return new Xs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Xs,e,n)}}Xs.runtime=R;Xs.typeName="livekit.Encryption";Xs.fields=R.util.newFieldList(()=>[]);var wn;(function(t){t[t.NONE=0]="NONE",t[t.GCM=1]="GCM",t[t.CUSTOM=2]="CUSTOM"})(wn||(wn={}));R.util.setEnumType(wn,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class Uo extends Se{constructor(e){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Uo().fromBinary(e,n)}static fromJson(e,n){return new Uo().fromJson(e,n)}static fromJsonString(e,n){return new Uo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Uo,e,n)}}Uo.runtime=R;Uo.typeName="livekit.SimulcastCodecInfo";Uo.fields=R.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:tr,repeated:!0}]);class vr extends Se{constructor(e){super(),this.sid="",this.type=Un.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=Xt.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=wn.NONE,this.stream="",R.util.initPartial(e,this)}static fromBinary(e,n){return new vr().fromBinary(e,n)}static fromJson(e,n){return new vr().fromJson(e,n)}static fromJsonString(e,n){return new vr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(vr,e,n)}}vr.runtime=R;vr.typeName="livekit.TrackInfo";vr.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:R.getEnumType(Un)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:R.getEnumType(Xt)},{no:10,name:"layers",kind:"message",T:tr,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Uo,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:R.getEnumType(wn)},{no:17,name:"stream",kind:"scalar",T:9}]);class tr extends Se{constructor(e){super(),this.quality=ln.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new tr().fromBinary(e,n)}static fromJson(e,n){return new tr().fromJson(e,n)}static fromJsonString(e,n){return new tr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(tr,e,n)}}tr.runtime=R;tr.typeName="livekit.VideoLayer";tr.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(ln)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class Yi extends Se{constructor(e){super(),this.kind=on.RELIABLE,this.value={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new Yi().fromBinary(e,n)}static fromJson(e,n){return new Yi().fromJson(e,n)}static fromJsonString(e,n){return new Yi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Yi,e,n)}}Yi.runtime=R;Yi.typeName="livekit.DataPacket";Yi.fields=R.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:R.getEnumType(on)},{no:2,name:"user",kind:"message",T:qi,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Vo,oneof:"value"}]);var on;(function(t){t[t.RELIABLE=0]="RELIABLE",t[t.LOSSY=1]="LOSSY"})(on||(on={}));R.util.setEnumType(on,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class Vo extends Se{constructor(e){super(),this.speakers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Vo().fromBinary(e,n)}static fromJson(e,n){return new Vo().fromJson(e,n)}static fromJsonString(e,n){return new Vo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Vo,e,n)}}Vo.runtime=R;Vo.typeName="livekit.ActiveSpeakerUpdate";Vo.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Qi,repeated:!0}]);class Qi extends Se{constructor(e){super(),this.sid="",this.level=0,this.active=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Qi().fromBinary(e,n)}static fromJson(e,n){return new Qi().fromJson(e,n)}static fromJsonString(e,n){return new Qi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Qi,e,n)}}Qi.runtime=R;Qi.typeName="livekit.SpeakerInfo";Qi.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class qi extends Se{constructor(e){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new qi().fromBinary(e,n)}static fromJson(e,n){return new qi().fromJson(e,n)}static fromJsonString(e,n){return new qi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(qi,e,n)}}qi.runtime=R;qi.typeName="livekit.UserPacket";qi.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class eo extends Se{constructor(e){super(),this.participantSid="",this.trackSids=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new eo().fromBinary(e,n)}static fromJson(e,n){return new eo().fromJson(e,n)}static fromJsonString(e,n){return new eo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(eo,e,n)}}eo.runtime=R;eo.typeName="livekit.ParticipantTracks";eo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class Go extends Se{constructor(e){super(),this.edition=wl.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Go().fromBinary(e,n)}static fromJson(e,n){return new Go().fromJson(e,n)}static fromJsonString(e,n){return new Go().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Go,e,n)}}Go.runtime=R;Go.typeName="livekit.ServerInfo";Go.fields=R.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:R.getEnumType(wl)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var wl;(function(t){t[t.Standard=0]="Standard",t[t.Cloud=1]="Cloud"})(wl||(wl={}));R.util.setEnumType(wl,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class Wo extends Se{constructor(e){super(),this.sdk=Al.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Wo().fromBinary(e,n)}static fromJson(e,n){return new Wo().fromJson(e,n)}static fromJsonString(e,n){return new Wo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Wo,e,n)}}Wo.runtime=R;Wo.typeName="livekit.ClientInfo";Wo.fields=R.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:R.getEnumType(Al)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var Al;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JS=1]="JS",t[t.SWIFT=2]="SWIFT",t[t.ANDROID=3]="ANDROID",t[t.FLUTTER=4]="FLUTTER",t[t.GO=5]="GO",t[t.UNITY=6]="UNITY",t[t.REACT_NATIVE=7]="REACT_NATIVE",t[t.RUST=8]="RUST",t[t.PYTHON=9]="PYTHON",t[t.CPP=10]="CPP"})(Al||(Al={}));R.util.setEnumType(Al,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class to extends Se{constructor(e){super(),this.resumeConnection=Li.UNSET,this.forceRelay=Li.UNSET,R.util.initPartial(e,this)}static fromBinary(e,n){return new to().fromBinary(e,n)}static fromJson(e,n){return new to().fromJson(e,n)}static fromJsonString(e,n){return new to().fromJsonString(e,n)}static equals(e,n){return R.util.equals(to,e,n)}}to.runtime=R;to.typeName="livekit.ClientConfiguration";to.fields=R.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:no},{no:2,name:"screen",kind:"message",T:no},{no:3,name:"resume_connection",kind:"enum",T:R.getEnumType(Li)},{no:4,name:"disabled_codecs",kind:"message",T:jo},{no:5,name:"force_relay",kind:"enum",T:R.getEnumType(Li)}]);class no extends Se{constructor(e){super(),this.hardwareEncoder=Li.UNSET,R.util.initPartial(e,this)}static fromBinary(e,n){return new no().fromBinary(e,n)}static fromJson(e,n){return new no().fromJson(e,n)}static fromJsonString(e,n){return new no().fromJsonString(e,n)}static equals(e,n){return R.util.equals(no,e,n)}}no.runtime=R;no.typeName="livekit.VideoConfiguration";no.fields=R.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:R.getEnumType(Li)}]);class jo extends Se{constructor(e){super(),this.codecs=[],this.publish=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new jo().fromBinary(e,n)}static fromJson(e,n){return new jo().fromJson(e,n)}static fromJsonString(e,n){return new jo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(jo,e,n)}}jo.runtime=R;jo.typeName="livekit.DisabledCodecs";jo.fields=R.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:Ai,repeated:!0},{no:2,name:"publish",kind:"message",T:Ai,repeated:!0}]);class ro extends Se{constructor(e){super(),this.duration=0,this.startTimestamp=Ue.zero,this.endTimestamp=Ue.zero,this.rtpClockTicks=Ue.zero,this.driftSamples=Ue.zero,this.driftMs=0,this.clockRate=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new ro().fromBinary(e,n)}static fromJson(e,n){return new ro().fromJson(e,n)}static fromJsonString(e,n){return new ro().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ro,e,n)}}ro.runtime=R;ro.typeName="livekit.RTPDrift";ro.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:gn},{no:2,name:"end_time",kind:"message",T:gn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class $s extends Se{constructor(e){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=Ue.zero,this.headerBytes=Ue.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=Ue.zero,this.headerBytesDuplicate=Ue.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=Ue.zero,this.headerBytesPadding=Ue.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new $s().fromBinary(e,n)}static fromJson(e,n){return new $s().fromJson(e,n)}static fromJsonString(e,n){return new $s().fromJsonString(e,n)}static equals(e,n){return R.util.equals($s,e,n)}}$s.runtime=R;$s.typeName="livekit.RTPStats";$s.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:gn},{no:2,name:"end_time",kind:"message",T:gn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:gn},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:gn},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:gn},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:gn},{no:44,name:"packet_drift",kind:"message",T:ro},{no:45,name:"report_drift",kind:"message",T:ro}]);class Ks extends Se{constructor(e){super(),this.unixMicro=Ue.zero,this.ticks=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ks().fromBinary(e,n)}static fromJson(e,n){return new Ks().fromJson(e,n)}static fromJsonString(e,n){return new Ks().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ks,e,n)}}Ks.runtime=R;Ks.typeName="livekit.TimedVersion";Ks.fields=R.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const vu=7e3,jW=[0,300,2*2*300,3*3*300,4*4*300,vu,vu,vu,vu,vu];class ZW{constructor(e){this._retryDelays=e!==void 0?[...e]:jW}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function G(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,[])).next())})}function Bw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Bw=="function"?Bw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var ZC={exports:{}},tl=typeof Reflect=="object"?Reflect:null,Fw=tl&&typeof tl.apply=="function"?tl.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},yf;tl&&typeof tl.ownKeys=="function"?yf=tl.ownKeys:Object.getOwnPropertySymbols?yf=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:yf=function(e){return Object.getOwnPropertyNames(e)};function HW(t){console&&console.warn&&console.warn(t)}var Cx=Number.isNaN||function(e){return e!==e};function ht(){ht.init.call(this)}ZC.exports=ht;ZC.exports.once=KW;ht.EventEmitter=ht;ht.prototype._events=void 0;ht.prototype._eventsCount=0;ht.prototype._maxListeners=void 0;var Uw=10;function ag(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(ht,"defaultMaxListeners",{enumerable:!0,get:function(){return Uw},set:function(t){if(typeof t!="number"||t<0||Cx(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Uw=t}});ht.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};ht.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Cx(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Ix(t){return t._maxListeners===void 0?ht.defaultMaxListeners:t._maxListeners}ht.prototype.getMaxListeners=function(){return Ix(this)};ht.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")Fw(c,this,n);else for(var l=c.length,u=kx(c,l),r=0;r<l;++r)Fw(u[r],this,n);return!0};function Sx(t,e,n,r){var i,o,s;if(ag(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Ix(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,HW(a)}return t}ht.prototype.addListener=function(e,n){return Sx(this,e,n,!1)};ht.prototype.on=ht.prototype.addListener;ht.prototype.prependListener=function(e,n){return Sx(this,e,n,!0)};function zW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function bx(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=zW.bind(r);return i.listener=n,r.wrapFn=i,i}ht.prototype.once=function(e,n){return ag(n),this.on(e,bx(this,e,n)),this};ht.prototype.prependOnceListener=function(e,n){return ag(n),this.prependListener(e,bx(this,e,n)),this};ht.prototype.removeListener=function(e,n){var r,i,o,s,a;if(ag(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():XW(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};ht.prototype.off=ht.prototype.removeListener;ht.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function wx(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?$W(i):kx(i,i.length)}ht.prototype.listeners=function(e){return wx(this,e,!0)};ht.prototype.rawListeners=function(e){return wx(this,e,!1)};ht.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Ax.call(t,e)};ht.prototype.listenerCount=Ax;function Ax(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}ht.prototype.eventNames=function(){return this._eventsCount>0?yf(this._events):[]};function kx(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function XW(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function $W(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function KW(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Ex(t,e,o,{once:!0}),e!=="error"&&JW(t,i,{once:!0})})}function JW(t,e,n){typeof t.on=="function"&&Ex(t,"error",e,n)}function Ex(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ko=ZC.exports;let Tx=!0,Rx=!0;function Cf(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function mc(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[s,c])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(a))return o.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function YW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Tx=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function QW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Rx=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function xx(){if(typeof window=="object"){if(Tx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function HC(t,e){Rx&&console.warn(t+" is deprecated, please use "+e+" instead.")}function qW(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Cf(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=Cf(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Cf(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Vw(t){return Object.prototype.toString.call(t)==="[object Object]"}function Px(t){return Vw(t)?Object.keys(t).reduce(function(e,n){const r=Vw(t[n]),i=r?Px(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function x0(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?x0(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{x0(t,t.get(i),n)})}))}function Gw(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&o.push(s)}),o.forEach(s=>{t.forEach(a=>{a.type===r&&a.trackId===s.id&&x0(t,a,i)})}),i}const Ww=xx;function Nx(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,f){return h?h+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(u.ideal!==void 0){c.optional=c.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",l)]=u.ideal,c.optional.push(h),h={},h[d("max",l)]=u.ideal,c.optional.push(h)):(h[d("",l)]=u.ideal,c.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(h,l)]=u[h])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(p=>p.kind==="videoinput");let f=h.find(p=>d.some(g=>p.label.toLowerCase().includes(g)));return!f&&h.length&&d.includes("back")&&(f=h[h.length-1]),f&&(a.video.deviceId=l.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=r(a.video),Ww("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return Ww("chrome: "+JSON.stringify(a)),c(a)},o=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function e9(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),t.navigator.mediaDevices.getUserMedia(r)})}}}function _x(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Ox(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else mc(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Mx(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(c=>c.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Dx(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const s=function(c){const l={};return c.result().forEach(d=>{const h={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(f=>{h[f]=d.stat(f)}),l[h.id]=h}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){const c=function(l){i(a(s(l)))};return e.apply(this,[c,r])}return new Promise((c,l)=>{e.apply(this,[function(u){c(a(s(u)))},l])}).then(i,o)}}function Lx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>Gw(s,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),mc(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Gw(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Bx(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[s.id]=[s].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(s);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function Fx(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Bx(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(f=>f.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(g=>g===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new t.MediaStream([u]);this._streams[d.id]=g,this._reverseStreams[g.id]=d,this.addStream(g)}return this.getSenders().find(g=>g.track===u)};function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const f=l._reverseStreams[h],p=l._streams[f.id];d=d.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const f=l._reverseStreams[h],p=l._streams[f.id];d=d.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const g=o(this,p);h[0].apply(null,[g])},p=>{h[1]&&h[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>o(this,p))}};t.RTCPeerConnection.prototype[l]=d[l]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:o(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(g=>u.track===g)&&(h=this._streams[f])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function P0(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function Ux(t,e){mc(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var jw=Object.freeze({__proto__:null,fixNegotiationNeeded:Ux,shimAddTrackRemoveTrack:Fx,shimAddTrackRemoveTrackWithNative:Bx,shimGetDisplayMedia:e9,shimGetSendersWithDtmf:Mx,shimGetStats:Dx,shimGetUserMedia:Nx,shimMediaStream:_x,shimOnTrack:Ox,shimPeerConnection:P0,shimSenderReceiverGetStats:Lx});function Vx(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){HC("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function t9(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function Gx(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function N0(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(c=>{if(e.version<53&&!s)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(s,a)}}function Wx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function jx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),mc(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function Zx(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){HC("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function Hx(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function zx(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function Xx(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function $x(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Kx(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var Zw=Object.freeze({__proto__:null,shimAddTransceiver:zx,shimCreateAnswer:Kx,shimCreateOffer:$x,shimGetDisplayMedia:t9,shimGetParameters:Xx,shimGetUserMedia:Vx,shimOnTrack:Gx,shimPeerConnection:N0,shimRTCDataChannel:Hx,shimReceiverGetStats:jx,shimRemoveStream:Zx,shimSenderGetStats:Wx});function Jx(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function Yx(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function Qx(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function qx(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(eP(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function eP(t){return t&&t.video!==void 0?Object.assign({},t,{video:Px(t.video)}):t}function tP(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];a.urls===void 0&&a.url?(HC("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function nP(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function rP(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function iP(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var Hw=Object.freeze({__proto__:null,shimAudioContext:iP,shimCallbacksAPI:Qx,shimConstraints:eP,shimCreateOfferLegacy:rP,shimGetUserMedia:qx,shimLocalStreamsAPI:Jx,shimRTCIceServerUrls:tP,shimRemoteStreamsAPI:Yx,shimTrackEventTransceiver:nP}),oP={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let a=3;a<o.length;a++){const c=o[a],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const s=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{s.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let f={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&l&&(f.rtx={ssrc:l}),r.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(h=>{h.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(oP);var sP=oP.exports,nl=rW(sP),n9=tW({__proto__:null,default:nl},[sP]);function If(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),o=nl.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,mc(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function _0(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||mc(t,"icecandidate",e=>{if(e.candidate){const n=nl.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Sf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=nl.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=nl.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},o=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=nl.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=o(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return s.apply(this,arguments)}}function bf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},mc(t,"datachannel",r=>(e(r.channel,r.target),r))}function O0(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function M0(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function wf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Af(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var r9=Object.freeze({__proto__:null,removeExtmapAllowMixed:M0,shimAddIceCandidateNullOrEmpty:wf,shimConnectionState:O0,shimMaxMessageSize:Sf,shimParameterlessSetLocalDescription:Af,shimRTCIceCandidate:If,shimRTCIceCandidateRelayProtocol:_0,shimSendThrowTypeError:bf});function i9(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=xx,r=qW(t),i={browserDetails:r,commonShim:r9,extractVersion:Cf,disableLog:YW,disableWarnings:QW,sdp:n9};switch(r.browser){case"chrome":if(!jw||!P0||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=jw,wf(t,r),Af(t),Nx(t,r),_x(t),P0(t,r),Ox(t),Fx(t,r),Mx(t),Dx(t),Lx(t),Ux(t,r),If(t),_0(t),O0(t),Sf(t,r),bf(t),M0(t,r);break;case"firefox":if(!Zw||!N0||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=Zw,wf(t,r),Af(t),Vx(t,r),N0(t,r),Gx(t),Zx(t),Wx(t),jx(t),Hx(t),zx(t),Xx(t),$x(t),Kx(t),If(t),O0(t),Sf(t,r),bf(t);break;case"safari":if(!Hw||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Hw,wf(t,r),Af(t),tP(t),rP(t),Qx(t),Jx(t),Yx(t),nP(t),qx(t),iP(t),If(t),_0(t),Sf(t,r),bf(t),M0(t,r);break;default:n("Unsupported browser!");break}return i}i9({window:typeof window>"u"?void 0:window});const o9=10,Dh="lk_e2ee",s9="LKFrameEncryptionKey",a9={sharedKey:!1,ratchetSalt:s9,ratchetWindowSize:8,failureTolerance:o9};var sa;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(sa||(sa={}));var zw;(function(t){t.KeyRatcheted="keyRatcheted"})(zw||(zw={}));var Js;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Js||(Js={}));var Xw;(function(t){t.Error="cryptorError"})(Xw||(Xw={}));function c9(){return l9()||D0()}function D0(){return typeof window.RTCRtpScriptTransform<"u"}function l9(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class Cz extends ko.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{Xe.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},a9),e),this.on(sa.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(sa.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(sa.RatchetRequest,e,n)}}class jl extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}class vt extends jl{constructor(e,n,r){super(1,e),this.status=r,this.reason=n}}class zC extends jl{constructor(e){super(21,e??"device is unsupported")}}class $i extends jl{constructor(e){super(20,e??"track is invalid")}}class u9 extends jl{constructor(e){super(10,e??"unsupported server")}}class rn extends jl{constructor(e){super(12,e??"unexpected connection state")}}class L0 extends jl{constructor(e){super(13,e??"unable to negotiate")}}var Pd;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Pd||(Pd={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Pd||(Pd={}));var ne;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.StateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged"})(ne||(ne={}));var ae;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded"})(ae||(ae={}));var Ae;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished"})(Ae||(Ae={}));var ye;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed"})(ye||(ye={}));function XC(t,e,n){var r,i,o;e===void 0&&(e=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var f=Date.now()-l;if(f+e>=c)return c-f}return e}var h=function(){var f=[].slice.call(arguments),p=this;return new Promise(function(g,C){var m=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,l=Date.now(),!s){var S=t.apply(p,f);a&&a(S),u.forEach(function(E){return(0,E.resolve)(S)}),u=[]}},d()),m){var v=t.apply(p,f);return a&&a(v),g(v)}u.push({resolve:g,reject:C})})};return h.cancel=function(f){o!==void 0&&clearTimeout(o),u.forEach(function(p){return(0,p.reject)(f)}),u=[]},h}const d9=/version\/(\d+(\.?_?\d+)+)/i;let Im;function Cs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Im===void 0||e){const r=h9.find(i=>{let{test:o}=i;return o.test(n)});Im=r==null?void 0:r.describe(n)}return Im}const h9=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Sm(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Sm(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Sm(d9,t),os:t.includes("mobile/")?"iOS":"macOS"}}}];function Sm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}var f9="1.15.13";const p9=f9,g9=11;class kn{}kn.setTimeout=function(){return setTimeout(...arguments)};kn.setInterval=function(){return setInterval(...arguments)};kn.clearTimeout=function(){return clearTimeout(...arguments)};kn.clearInterval=function(){return clearInterval(...arguments)};class dt{constructor(e,n,r,i,o){this.width=e,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const m9=["vp8","h264"],aP=["vp8","h264","vp9","av1"];function v9(t){return!!m9.find(e=>e===t)}var Sp;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:2e4},t.music={maxBitrate:32e3},t.musicStereo={maxBitrate:48e3},t.musicHighQuality={maxBitrate:64e3},t.musicHighQualityStereo={maxBitrate:96e3}})(Sp||(Sp={}));const Nd={h90:new dt(160,90,9e4,20),h180:new dt(320,180,16e4,20),h216:new dt(384,216,18e4,20),h360:new dt(640,360,45e4,20),h540:new dt(960,540,8e5,25),h720:new dt(1280,720,17e5,30),h1080:new dt(1920,1080,3e6,30),h1440:new dt(2560,1440,5e6,30),h2160:new dt(3840,2160,8e6,30)},B0={h120:new dt(160,120,7e4,20),h180:new dt(240,180,125e3,20),h240:new dt(320,240,14e4,20),h360:new dt(480,360,33e4,20),h480:new dt(640,480,5e5,20),h540:new dt(720,540,6e5,25),h720:new dt(960,720,13e5,30),h1080:new dt(1440,1080,23e5,30),h1440:new dt(1920,1440,38e5,30)},$C={h360fps3:new dt(640,360,2e5,3,"medium"),h360fps15:new dt(640,360,4e5,15,"medium"),h720fps5:new dt(1280,720,8e5,5,"medium"),h720fps15:new dt(1280,720,15e5,15,"medium"),h720fps30:new dt(1280,720,2e6,30,"medium"),h1080fps15:new dt(1920,1080,25e5,15,"medium"),h1080fps30:new dt(1920,1080,5e6,30,"medium"),original:new dt(0,0,7e6,30,"medium")};var Vn;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(Vn||(Vn={}));R.util.setEnumType(Vn,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var sc;(function(t){t[t.ACTIVE=0]="ACTIVE",t[t.PAUSED=1]="PAUSED"})(sc||(sc={}));R.util.setEnumType(sc,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var bp;(function(t){t[t.UDP=0]="UDP",t[t.TCP=1]="TCP",t[t.TLS=2]="TLS"})(bp||(bp={}));R.util.setEnumType(bp,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class Zo extends Se{constructor(e){super(),this.message={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new Zo().fromBinary(e,n)}static fromJson(e,n){return new Zo().fromJson(e,n)}static fromJsonString(e,n){return new Zo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Zo,e,n)}}Zo.runtime=R;Zo.typeName="livekit.SignalRequest";Zo.fields=R.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:nr,oneof:"message"},{no:2,name:"answer",kind:"message",T:nr,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Ti,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Ei,oneof:"message"},{no:5,name:"mute",kind:"message",T:Ri,oneof:"message"},{no:6,name:"subscription",kind:"message",T:ei,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:oo,oneof:"message"},{no:8,name:"leave",kind:"message",T:ti,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:so,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:uo,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:ho,oneof:"message"},{no:13,name:"simulate",kind:"message",T:bn,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:ao,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:po,oneof:"message"}]);class io extends Se{constructor(e){super(),this.message={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new io().fromBinary(e,n)}static fromJson(e,n){return new io().fromJson(e,n)}static fromJsonString(e,n){return new io().fromJsonString(e,n)}static equals(e,n){return R.util.equals(io,e,n)}}io.runtime=R;io.typeName="livekit.SignalResponse";io.fields=R.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:Ho,oneof:"message"},{no:2,name:"answer",kind:"message",T:nr,oneof:"message"},{no:3,name:"offer",kind:"message",T:nr,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Ti,oneof:"message"},{no:5,name:"update",kind:"message",T:$o,oneof:"message"},{no:6,name:"track_published",kind:"message",T:xi,oneof:"message"},{no:8,name:"leave",kind:"message",T:ti,oneof:"message"},{no:9,name:"mute",kind:"message",T:Ri,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Ko,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Jo,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:Qo,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:es,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:ns,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:rs,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Xo,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:zo,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:is,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:ss,oneof:"message"}]);class ki extends Se{constructor(e){super(),this.codec="",this.cid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new ki().fromBinary(e,n)}static fromJson(e,n){return new ki().fromJson(e,n)}static fromJsonString(e,n){return new ki().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ki,e,n)}}ki.runtime=R;ki.typeName="livekit.SimulcastCodec";ki.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class Ei extends Se{constructor(e){super(),this.cid="",this.name="",this.type=Un.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=Xt.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=wn.NONE,this.stream="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Ei().fromBinary(e,n)}static fromJson(e,n){return new Ei().fromJson(e,n)}static fromJsonString(e,n){return new Ei().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ei,e,n)}}Ei.runtime=R;Ei.typeName="livekit.AddTrackRequest";Ei.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:R.getEnumType(Un)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:R.getEnumType(Xt)},{no:9,name:"layers",kind:"message",T:tr,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:ki,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:R.getEnumType(wn)},{no:15,name:"stream",kind:"scalar",T:9}]);class Ti extends Se{constructor(e){super(),this.candidateInit="",this.target=Vn.PUBLISHER,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ti().fromBinary(e,n)}static fromJson(e,n){return new Ti().fromJson(e,n)}static fromJsonString(e,n){return new Ti().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ti,e,n)}}Ti.runtime=R;Ti.typeName="livekit.TrickleRequest";Ti.fields=R.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:R.getEnumType(Vn)}]);class Ri extends Se{constructor(e){super(),this.sid="",this.muted=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ri().fromBinary(e,n)}static fromJson(e,n){return new Ri().fromJson(e,n)}static fromJsonString(e,n){return new Ri().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ri,e,n)}}Ri.runtime=R;Ri.typeName="livekit.MuteTrackRequest";Ri.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class Ho extends Se{constructor(e){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),R.util.initPartial(e,this)}static fromBinary(e,n){return new Ho().fromBinary(e,n)}static fromJson(e,n){return new Ho().fromJson(e,n)}static fromJsonString(e,n){return new Ho().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ho,e,n)}}Ho.runtime=R;Ho.typeName="livekit.JoinResponse";Ho.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Wl},{no:2,name:"participant",kind:"message",T:Vr},{no:3,name:"other_participants",kind:"message",T:Vr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:co,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:to},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Go},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class zo extends Se{constructor(e){super(),this.iceServers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new zo().fromBinary(e,n)}static fromJson(e,n){return new zo().fromJson(e,n)}static fromJsonString(e,n){return new zo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(zo,e,n)}}zo.runtime=R;zo.typeName="livekit.ReconnectResponse";zo.fields=R.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:co,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:to}]);class xi extends Se{constructor(e){super(),this.cid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new xi().fromBinary(e,n)}static fromJson(e,n){return new xi().fromJson(e,n)}static fromJsonString(e,n){return new xi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(xi,e,n)}}xi.runtime=R;xi.typeName="livekit.TrackPublishedResponse";xi.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:vr}]);class Xo extends Se{constructor(e){super(),this.trackSid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Xo().fromBinary(e,n)}static fromJson(e,n){return new Xo().fromJson(e,n)}static fromJsonString(e,n){return new Xo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Xo,e,n)}}Xo.runtime=R;Xo.typeName="livekit.TrackUnpublishedResponse";Xo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class nr extends Se{constructor(e){super(),this.type="",this.sdp="",R.util.initPartial(e,this)}static fromBinary(e,n){return new nr().fromBinary(e,n)}static fromJson(e,n){return new nr().fromJson(e,n)}static fromJsonString(e,n){return new nr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(nr,e,n)}}nr.runtime=R;nr.typeName="livekit.SessionDescription";nr.fields=R.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class $o extends Se{constructor(e){super(),this.participants=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new $o().fromBinary(e,n)}static fromJson(e,n){return new $o().fromJson(e,n)}static fromJsonString(e,n){return new $o().fromJsonString(e,n)}static equals(e,n){return R.util.equals($o,e,n)}}$o.runtime=R;$o.typeName="livekit.ParticipantUpdate";$o.fields=R.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:Vr,repeated:!0}]);class ei extends Se{constructor(e){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new ei().fromBinary(e,n)}static fromJson(e,n){return new ei().fromJson(e,n)}static fromJsonString(e,n){return new ei().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ei,e,n)}}ei.runtime=R;ei.typeName="livekit.UpdateSubscription";ei.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:eo,repeated:!0}]);class oo extends Se{constructor(e){super(),this.trackSids=[],this.disabled=!1,this.quality=ln.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new oo().fromBinary(e,n)}static fromJson(e,n){return new oo().fromJson(e,n)}static fromJsonString(e,n){return new oo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(oo,e,n)}}oo.runtime=R;oo.typeName="livekit.UpdateTrackSettings";oo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:R.getEnumType(ln)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class ti extends Se{constructor(e){super(),this.canReconnect=!1,this.reason=ls.UNKNOWN_REASON,R.util.initPartial(e,this)}static fromBinary(e,n){return new ti().fromBinary(e,n)}static fromJson(e,n){return new ti().fromJson(e,n)}static fromJsonString(e,n){return new ti().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ti,e,n)}}ti.runtime=R;ti.typeName="livekit.LeaveRequest";ti.fields=R.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:R.getEnumType(ls)}]);class so extends Se{constructor(e){super(),this.trackSid="",this.layers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new so().fromBinary(e,n)}static fromJson(e,n){return new so().fromJson(e,n)}static fromJsonString(e,n){return new so().fromJsonString(e,n)}static equals(e,n){return R.util.equals(so,e,n)}}so.runtime=R;so.typeName="livekit.UpdateVideoLayers";so.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:tr,repeated:!0}]);class ao extends Se{constructor(e){super(),this.metadata="",this.name="",R.util.initPartial(e,this)}static fromBinary(e,n){return new ao().fromBinary(e,n)}static fromJson(e,n){return new ao().fromJson(e,n)}static fromJsonString(e,n){return new ao().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ao,e,n)}}ao.runtime=R;ao.typeName="livekit.UpdateParticipantMetadata";ao.fields=R.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class co extends Se{constructor(e){super(),this.urls=[],this.username="",this.credential="",R.util.initPartial(e,this)}static fromBinary(e,n){return new co().fromBinary(e,n)}static fromJson(e,n){return new co().fromJson(e,n)}static fromJsonString(e,n){return new co().fromJsonString(e,n)}static equals(e,n){return R.util.equals(co,e,n)}}co.runtime=R;co.typeName="livekit.ICEServer";co.fields=R.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class Ko extends Se{constructor(e){super(),this.speakers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Ko().fromBinary(e,n)}static fromJson(e,n){return new Ko().fromJson(e,n)}static fromJsonString(e,n){return new Ko().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ko,e,n)}}Ko.runtime=R;Ko.typeName="livekit.SpeakersChanged";Ko.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Qi,repeated:!0}]);class Jo extends Se{constructor(e){super(),R.util.initPartial(e,this)}static fromBinary(e,n){return new Jo().fromBinary(e,n)}static fromJson(e,n){return new Jo().fromJson(e,n)}static fromJsonString(e,n){return new Jo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Jo,e,n)}}Jo.runtime=R;Jo.typeName="livekit.RoomUpdate";Jo.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Wl}]);class Yo extends Se{constructor(e){super(),this.participantSid="",this.quality=Bo.POOR,this.score=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Yo().fromBinary(e,n)}static fromJson(e,n){return new Yo().fromJson(e,n)}static fromJsonString(e,n){return new Yo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Yo,e,n)}}Yo.runtime=R;Yo.typeName="livekit.ConnectionQualityInfo";Yo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:R.getEnumType(Bo)},{no:3,name:"score",kind:"scalar",T:2}]);class Qo extends Se{constructor(e){super(),this.updates=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Qo().fromBinary(e,n)}static fromJson(e,n){return new Qo().fromJson(e,n)}static fromJsonString(e,n){return new Qo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Qo,e,n)}}Qo.runtime=R;Qo.typeName="livekit.ConnectionQualityUpdate";Qo.fields=R.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:Yo,repeated:!0}]);class qo extends Se{constructor(e){super(),this.participantSid="",this.trackSid="",this.state=sc.ACTIVE,R.util.initPartial(e,this)}static fromBinary(e,n){return new qo().fromBinary(e,n)}static fromJson(e,n){return new qo().fromJson(e,n)}static fromJsonString(e,n){return new qo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(qo,e,n)}}qo.runtime=R;qo.typeName="livekit.StreamStateInfo";qo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(sc)}]);class es extends Se{constructor(e){super(),this.streamStates=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new es().fromBinary(e,n)}static fromJson(e,n){return new es().fromJson(e,n)}static fromJsonString(e,n){return new es().fromJsonString(e,n)}static equals(e,n){return R.util.equals(es,e,n)}}es.runtime=R;es.typeName="livekit.StreamStateUpdate";es.fields=R.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:qo,repeated:!0}]);class Pi extends Se{constructor(e){super(),this.quality=ln.LOW,this.enabled=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Pi().fromBinary(e,n)}static fromJson(e,n){return new Pi().fromJson(e,n)}static fromJsonString(e,n){return new Pi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Pi,e,n)}}Pi.runtime=R;Pi.typeName="livekit.SubscribedQuality";Pi.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(ln)},{no:2,name:"enabled",kind:"scalar",T:8}]);class ts extends Se{constructor(e){super(),this.codec="",this.qualities=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new ts().fromBinary(e,n)}static fromJson(e,n){return new ts().fromJson(e,n)}static fromJsonString(e,n){return new ts().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ts,e,n)}}ts.runtime=R;ts.typeName="livekit.SubscribedCodec";ts.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Pi,repeated:!0}]);class ns extends Se{constructor(e){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new ns().fromBinary(e,n)}static fromJson(e,n){return new ns().fromJson(e,n)}static fromJsonString(e,n){return new ns().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ns,e,n)}}ns.runtime=R;ns.typeName="livekit.SubscribedQualityUpdate";ns.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Pi,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:ts,repeated:!0}]);class lo extends Se{constructor(e){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",R.util.initPartial(e,this)}static fromBinary(e,n){return new lo().fromBinary(e,n)}static fromJson(e,n){return new lo().fromJson(e,n)}static fromJsonString(e,n){return new lo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(lo,e,n)}}lo.runtime=R;lo.typeName="livekit.TrackPermission";lo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class uo extends Se{constructor(e){super(),this.allParticipants=!1,this.trackPermissions=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new uo().fromBinary(e,n)}static fromJson(e,n){return new uo().fromJson(e,n)}static fromJsonString(e,n){return new uo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(uo,e,n)}}uo.runtime=R;uo.typeName="livekit.SubscriptionPermission";uo.fields=R.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:lo,repeated:!0}]);class rs extends Se{constructor(e){super(),this.participantSid="",this.trackSid="",this.allowed=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new rs().fromBinary(e,n)}static fromJson(e,n){return new rs().fromJson(e,n)}static fromJsonString(e,n){return new rs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(rs,e,n)}}rs.runtime=R;rs.typeName="livekit.SubscriptionPermissionUpdate";rs.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class ho extends Se{constructor(e){super(),this.publishTracks=[],this.dataChannels=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new ho().fromBinary(e,n)}static fromJson(e,n){return new ho().fromJson(e,n)}static fromJsonString(e,n){return new ho().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ho,e,n)}}ho.runtime=R;ho.typeName="livekit.SyncState";ho.fields=R.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:nr},{no:2,name:"subscription",kind:"message",T:ei},{no:3,name:"publish_tracks",kind:"message",T:xi,repeated:!0},{no:4,name:"data_channels",kind:"message",T:fo,repeated:!0},{no:5,name:"offer",kind:"message",T:nr}]);class fo extends Se{constructor(e){super(),this.label="",this.id=0,this.target=Vn.PUBLISHER,R.util.initPartial(e,this)}static fromBinary(e,n){return new fo().fromBinary(e,n)}static fromJson(e,n){return new fo().fromJson(e,n)}static fromJsonString(e,n){return new fo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(fo,e,n)}}fo.runtime=R;fo.typeName="livekit.DataChannelInfo";fo.fields=R.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:R.getEnumType(Vn)}]);class bn extends Se{constructor(e){super(),this.scenario={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new bn().fromBinary(e,n)}static fromJson(e,n){return new bn().fromJson(e,n)}static fromJsonString(e,n){return new bn().fromJsonString(e,n)}static equals(e,n){return R.util.equals(bn,e,n)}}bn.runtime=R;bn.typeName="livekit.SimulateScenario";bn.fields=R.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:R.getEnumType(bp),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]);class po extends Se{constructor(e){super(),this.timestamp=Ue.zero,this.rtt=Ue.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new po().fromBinary(e,n)}static fromJson(e,n){return new po().fromJson(e,n)}static fromJsonString(e,n){return new po().fromJsonString(e,n)}static equals(e,n){return R.util.equals(po,e,n)}}po.runtime=R;po.typeName="livekit.Ping";po.fields=R.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class is extends Se{constructor(e){super(),this.lastPingTimestamp=Ue.zero,this.timestamp=Ue.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new is().fromBinary(e,n)}static fromJson(e,n){return new is().fromJson(e,n)}static fromJsonString(e,n){return new is().fromJsonString(e,n)}static equals(e,n){return R.util.equals(is,e,n)}}is.runtime=R;is.typeName="livekit.Pong";is.fields=R.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class Ys extends Se{constructor(e){super(),this.regions=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Ys().fromBinary(e,n)}static fromJson(e,n){return new Ys().fromJson(e,n)}static fromJsonString(e,n){return new Ys().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ys,e,n)}}Ys.runtime=R;Ys.typeName="livekit.RegionSettings";Ys.fields=R.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:os,repeated:!0}]);class os extends Se{constructor(e){super(),this.region="",this.url="",this.distance=Ue.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new os().fromBinary(e,n)}static fromJson(e,n){return new os().fromJson(e,n)}static fromJsonString(e,n){return new os().fromJsonString(e,n)}static equals(e,n){return R.util.equals(os,e,n)}}os.runtime=R;os.typeName="livekit.RegionInfo";os.fields=R.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class ss extends Se{constructor(e){super(),this.trackSid="",this.err=xd.SE_UNKNOWN,R.util.initPartial(e,this)}static fromBinary(e,n){return new ss().fromBinary(e,n)}static fromJson(e,n){return new ss().fromJson(e,n)}static fromJsonString(e,n){return new ss().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ss,e,n)}}ss.runtime=R;ss.typeName="livekit.SubscriptionResponse";ss.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:R.getEnumType(xd)}]);function y9(t){if(!(typeof t>"u"))return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const C9=5e3,yu=[];class Q extends ko.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Q.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Xe,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),C9):this.handleAppVisibilityChanged()},this.log=ys((i=r.loggerName)!==null&&i!==void 0?i:yo.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Q.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),At(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===Q.Kind.Video&&(n="video"),this.attachedElements.length===0&&Q.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(yu.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&yu.splice(yu.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),jc(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(i?ye.AudioPlaybackStarted:ye.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?ye.AudioPlaybackFailed:ye.VideoPlaybackFailed,o):o.name==="AbortError"?Xe.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Xe.warn("could not playback ".concat(i?"audio":"video"),o),i&&e&&r.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ye.ElementAttached,e),e}detach(e){try{if(e){rl(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(ye.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{rl(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(ye.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(e){e.loggerName&&(this.log=ys(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),yu.forEach(r=>{r.parentElement||(n=!1)}),n&&yu.push(e)}}handleAppVisibilityChanged(){return G(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){Sr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Sr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function jc(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!ac()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(ac()||kl())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function rl(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return Un.AUDIO;case e.Video:return Un.VIDEO;default:return Un.DATA}}t.kindToProto=i;function o(l){switch(l){case Un.AUDIO:return e.Audio;case Un.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function s(l){switch(l){case n.Camera:return Xt.CAMERA;case n.Microphone:return Xt.MICROPHONE;case n.ScreenShare:return Xt.SCREEN_SHARE;case n.ScreenShareAudio:return Xt.SCREEN_SHARE_AUDIO;default:return Xt.UNKNOWN}}t.sourceToProto=s;function a(l){switch(l){case Xt.CAMERA:return n.Camera;case Xt.MICROPHONE:return n.Microphone;case Xt.SCREEN_SHARE:return n.ScreenShare;case Xt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function c(l){switch(l){case sc.ACTIVE:return r.Active;case sc.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(Q||(Q={}));function cP(t,e,n){var r;const i=(r=y9(t))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&F0(i.audio,e),i.video&&F0(i.video,n),i}function F0(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function cg(t){const e={};if(t.video)if(typeof t.video=="object"){const n={},r=n,i=t.video;Object.keys(i).forEach(o=>{switch(o){case"resolution":F0(r,i.resolution);break;default:r[o]=i[o]}}),e.video=n}else e.video=t.video;else e.video=!1;return t.audio?typeof t.audio=="object"?e.audio=t.audio:e.audio=!0:e.audio=!1,e}function I9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return G(this,void 0,void 0,function*(){const n=KC();if(n){const r=n.createAnalyser();r.fftSize=2048;const i=r.frequencyBinCount,o=new Uint8Array(i);n.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield us(e),r.getByteTimeDomainData(o);const a=o.some(c=>c!==128&&c!==0);return n.close(),!a}return!1})}function KC(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}function S9(t){return t===Q.Source.Microphone?"audioinput":t===Q.Source.Camera?"videoinput":void 0}function b9(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,ac()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio}}function lP(t){const e=t.split("/")[1].toLowerCase();if(!aP.includes(e))throw Error("Video codec not supported: ".concat(e));return e}function w9(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new xi({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function At(t){return t instanceof Q?{trackSid:t.sid,trackSource:t.source,trackMuted:t.isMuted,trackEnabled:t.mediaStreamTrack.enabled,trackKind:t.kind}:{trackSid:t.trackSid,trackName:t.trackName,track:t.track?At(t.track):void 0,trackEnabled:t.isEnabled,trackEncrypted:t.isEncrypted,trackMimeType:t.mimeType}}const A9="|",$w="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function k9(t){const e=t.split(A9);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function us(t){return G(this,void 0,void 0,function*(){return new Promise(e=>kn.setTimeout(e,t))})}function Kw(){return"addTransceiver"in RTCPeerConnection.prototype}function Jw(){return"addTrack"in RTCPeerConnection.prototype}function E9(){if(!("getCapabilities"in RTCRtpSender)||ac())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function T9(){if(!("getCapabilities"in RTCRtpSender)||kl())return!1;if(ac()){const n=Cs();if(n!=null&&n.version&&JC(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function Ku(t){return t==="av1"||t==="vp9"}function U0(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}const R9={Chrome:"100",Safari:"15",Firefox:"100"};function x9(t){if(!Sr()||!("setCodecPreferences"in t))return!1;const e=Cs();if(!(e!=null&&e.name)||!e.version)return!1;const n=R9[e.name];return n?JC(e.version,n)>=0:!1}function kl(){var t;return((t=Cs())===null||t===void 0?void 0:t.name)==="Firefox"}function P9(){var t;return((t=Cs())===null||t===void 0?void 0:t.name)==="Chrome"}function ac(){var t;return((t=Cs())===null||t===void 0?void 0:t.name)==="Safari"}function N9(){const t=Cs();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function uP(){return Sr()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Sr(){return typeof document<"u"}function cc(){return navigator.product=="ReactNative"}function V0(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function dP(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function hP(){if(!cc())return;let t=dP();if(t)return t.platform}function Yw(){if(Sr())return window.devicePixelRatio;if(cc()){let t=dP();if(t)return t.devicePixelRatio}return 1}function JC(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const s=parseInt(n[o],10),a=parseInt(r[o],10);if(s>a)return 1;if(s<a)return-1;if(o===i-1&&s===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function _9(t){for(const e of t)e.target.handleResize(e)}function O9(t){for(const e of t)e.target.handleVisibilityChanged(e)}let bm=null;const Qw=()=>(bm||(bm=new ResizeObserver(_9)),bm);let wm=null;const qw=()=>(wm||(wm=new IntersectionObserver(O9,{root:null,rootMargin:"0px"})),wm);function M9(){var t;const e=new Wo({sdk:Al.JS,protocol:g9,version:p9});return cc()&&(e.os=(t=hP())!==null&&t!==void 0?t:""),e}function eA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const o=i.getContext("2d");o==null||o.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=i.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let Cu;function Am(){if(!Cu){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[Cu]=r.stream.getAudioTracks(),!Cu)throw Error("Could not get empty media stream audio track");Cu.enabled=!1}return Cu.clone()}class fP{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>G(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function D9(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),r=KC();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,o=r.createMediaStreamSource(new MediaStream([i])),s=r.createAnalyser();s.minDecibels=n.minDecibels,s.maxDecibels=n.maxDecibels,s.fftSize=n.fftSize,s.smoothingTimeConstant=n.smoothingTimeConstant,o.connect(s);const a=new Uint8Array(s.frequencyBinCount);return{calculateVolume:()=>{s.getByteFrequencyData(a);let u=0;for(const h of a)u+=Math.pow(h/255,2);return Math.sqrt(u/a.length)},analyser:s,cleanup:()=>G(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class Oi{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function L9(t){return aP.includes(t)}function $a(t){if(typeof t=="string")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function B9(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function tA(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}const nA="default";class Qn{static getInstance(){return this.instance===void 0&&(this.instance=new Qn),this.instance}getDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r;return G(this,void 0,void 0,function*(){if(((r=Qn.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){Xe.debug("awaiting getUserMedia promise");try{e?yield Qn.userMediaPromiseMap.get(e):yield Promise.all(Qn.userMediaPromiseMap.values())}catch{Xe.warn("error waiting for media permissons")}}let i=yield navigator.mediaDevices.enumerateDevices();if(n&&!(ac()&&this.hasDeviceInUse(e))&&(i.length===0||i.some(s=>{const a=s.label==="",c=e?s.kind===e:!0;return a&&c}))){const s={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},a=yield navigator.mediaDevices.getUserMedia(s);i=yield navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(c=>{c.stop()})}return e&&(i=i.filter(o=>o.kind===e)),i})}normalizeDeviceId(e,n,r){return G(this,void 0,void 0,function*(){if(n!==nA)return n;const o=(yield this.getDevices(e)).find(s=>s.groupId===r&&s.deviceId!==nA);return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?Qn.userMediaPromiseMap.has(e):Qn.userMediaPromiseMap.size>0}}Qn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Qn.userMediaPromiseMap=new Map;const F9=1e3;class El extends Q{get constraints(){return this._constraints}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=XC(()=>G(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>G(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ye.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Oi,this.pauseUpstreamLock=new Oi,this.processorLock=new Oi,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Q.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(e,n){return G(this,void 0,void 0,function*(){if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{rl(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e&&this.processorElement){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");jc(e,this.processorElement),this.processorElement.muted=!0,yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{jc(r??e,i)}))})}waitForDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:F9;var n;return G(this,void 0,void 0,function*(){if(this.kind===Q.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=Cs())===null||n===void 0?void 0:n.os)==="iOS"&&(yield us(10));const r=Date.now();for(;Date.now()-r<e;){const i=this.dimensions;if(i)return i;yield us(50)}throw new $i("unable to get track dimensions after timeout")})}getDeviceId(){return G(this,void 0,void 0,function*(){if(this.source===Q.Source.ScreenShare)return;const{deviceId:e,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===Q.Kind.Audio?"audioinput":"videoinput";return Qn.getInstance().normalizeDeviceId(r,e,n)})}mute(){return G(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return G(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(this,void 0,void 0,function*(){if(!this.sender)throw new $i("unable to replace an unpublished track");return this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),this.providedByUser=n,this.processor&&(yield this.stopProcessor()),this})}restart(e){return G(this,void 0,void 0,function*(){e||(e=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const n={audio:!1,video:!1};this.kind===Q.Kind.Video?n.video=e:n.audio=e,this.attachedElements.forEach(o=>{rl(this.mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const i=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return i.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(i),this._constraints=e,this.emit(ye.Restarted,this),this})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ye.Muted:ye.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),uP()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return G(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ye.UpstreamPaused,this);const n=Cs();if((n==null?void 0:n.name)==="Safari"&&JC(n.version,"12.0")<0)throw new zC("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{e()}})}resumeUpstream(){return G(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ye.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{e()}})}getRTCStatsReport(){var e;return G(this,void 0,void 0,function*(){return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r,i;return G(this,void 0,void 0,function*(){const o=yield this.processorLock.lock();try{if(this.log.debug("setting up processor",this.logContext),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(r=this.processorElement)!==null&&r!==void 0?r:document.createElement(this.kind),jc(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(a=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:a})));const s={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield e.init(s),this.processor=e,this.processor.processedTrack){for(const a of this.attachedElements)a!==this.processorElement&&n&&(rl(this._mediaStreamTrack,a),jc(this.processor.processedTrack,a));yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack)}}finally{o()}})}getProcessor(){return this.processor}stopProcessor(){var e,n;return G(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(e=this.processor.processedTrack)===null||e===void 0||e.stop(),yield this.processor.destroy(),this.processor=void 0,(n=this.processorElement)===null||n===void 0||n.remove(),this.processorElement=void 0,yield this.restart())})}}class U9 extends ko.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:o,data:s}=n.data;switch(o){case"error":Xe.error(s.error.message),this.emit(Js.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==s.enabled&&s.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Js.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(s.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(Js.ParticipantEncryptionStatusChanged,s.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(sa.KeyRatcheted,s.material,s.keyIndex);break}},this.onWorkerError=n=>{Xe.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Js.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!c9())throw new zC("tried to setup end-to-end encryption on an unsupported browser");if(Xe.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(Xe.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Xe.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Xe.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Ae.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(ne.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==wn.NONE,i.identity)),e.on(ne.ConnectionStateChanged,r=>{r===nt.Connected&&e.participants.forEach(i=>{i.tracks.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==wn.NONE,i.identity)})})}).on(ne.TrackUnsubscribed,(r,i,o)=>{var s;const a={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(a)}).on(ne.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(ne.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),e.localParticipant.on(ae.LocalTrackPublished,r=>G(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(sa.SetKey,r=>this.postKey(r)).on(sa.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?lP(r.mimeType):void 0)}}setupE2EESender(e,n){if(!(e instanceof El)||!n){n||Xe.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return G(this,void 0,void 0,function*(){if(this.worker){if(D0()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Dh in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let o=e.writableStream,s=e.readableStream;if(!o||!s){const c=e.createEncodedStreams();e.writableStream=c.writable,o=c.writable,e.readableStream=c.readable,s=c.readable}const a={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[s,o])}e[Dh]=!0}})}handleSender(e,n,r){var i;if(!(Dh in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(D0()){Xe.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{Xe.info("initialize encoded streams");const o=e.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s,[o.readable,o.writable])}e[Dh]=!0}}}var Ju;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Ju||(Ju={}));class V9{constructor(){this.pendingTasks=new Map,this.taskMutex=new Oi,this.nextTaskIndex=0}run(e){return G(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Ju.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Ju.RUNNING,yield e()}finally{n.status=Ju.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return G(this,void 0,void 0,function*(){return this.run(()=>G(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const G9=["syncState","trickle","offer","answer","simulate","leave"];function W9(t){const e=G9.indexOf(t.case)>=0;return Xe.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Gt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Gt||(Gt={}));class YC{get currentState(){return this.state}get isDisconnected(){return this.state===Gt.DISCONNECTING||this.state===Gt.DISCONNECTED}get isEstablishingConnection(){return this.state===Gt.CONNECTING||this.state===Gt.RECONNECTING}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Gt.DISCONNECTED,this.log=Xe,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=ys((r=n.loggerName)!==null&&r!==void 0?r:yo.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new V9,this.queuedRequests=[],this.closingLock=new Oi,this.connectionLock=new Oi,this.state=Gt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return G(this,void 0,void 0,function*(){return this.state=Gt.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return G(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Gt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r,e=B9(e),e=e.replace(/\/$/,""),e+="/rtc";const o=M9(),s=j9(n,o,r);return new Promise((a,c)=>G(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();try{const u=()=>G(this,void 0,void 0,function*(){this.close(),clearTimeout(d),c(new vt("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),c(new vt("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),this.log.debug("connecting to ".concat(e+s),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(e+s),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=h=>G(this,void 0,void 0,function*(){if(this.state!==Gt.CONNECTED){clearTimeout(d);try{const f=yield fetch("http".concat(e.substring(2),"/validate").concat(s));if(f.status.toFixed(0).startsWith("4")){const p=yield f.text();c(new vt(p,0,f.status))}else c(new vt("Internal error",2,f.status))}catch{c(new vt("server was not reachable",1))}return}this.handleWSError(h)}),this.ws.onmessage=h=>G(this,void 0,void 0,function*(){var f,p,g,C;let m;if(typeof h.data=="string"){const v=JSON.parse(h.data);m=io.fromJson(v)}else if(h.data instanceof ArrayBuffer)m=io.fromBinary(new Uint8Array(h.data));else{this.log.error("could not decode websocket message: ".concat(typeof h.data),this.logContext);return}if(this.state!==Gt.CONNECTED){let v=!1;if(((f=m.message)===null||f===void 0?void 0:f.case)==="join"?(this.state=Gt.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=m.message.value.pingTimeout,this.pingIntervalDuration=m.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(m.message.value)):this.state===Gt.RECONNECTING&&m.message.case!=="leave"?(this.state=Gt.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((p=m.message)===null||p===void 0?void 0:p.case)==="reconnect"?a((g=m.message)===null||g===void 0?void 0:g.value):(a(),v=!0)):this.isEstablishingConnection&&m.message.case==="leave"?c(new vt("Received leave request while trying to (re)connect",4)):r.reconnect||c(new vt("did not receive join response, got ".concat((C=m.message)===null||C===void 0?void 0:C.case," instead"))),!v)return}this.signalLatency&&(yield us(this.signalLatency)),this.handleSignalResponse(m)}),this.ws.onclose=h=>{this.isEstablishingConnection&&c(new vt("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:h.reason,state:this.state})),this.handleOnClose(h.reason)}}finally{l()}}))}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return G(this,void 0,void 0,function*(){const n=yield this.closingLock.lock();try{if(e&&(this.state=Gt.DISCONNECTING),this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const r=new Promise(i=>{this.ws?this.ws.onclose=()=>{i()}:i()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([r,us(250)])),this.ws=void 0}}finally{e&&(this.state=Gt.DISCONNECTED),this.clearPingInterval(),n()}})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:wp(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:wp(e)})}sendIceCandidate(e,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Ti({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Ri({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return this.sendRequest({case:"updateMetadata",value:new ao({metadata:e,name:n})})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new so({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new uo({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Ue.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new po({timestamp:Ue.parse(Date.now()),rtt:Ue.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new ti({canReconnect:!1,reason:ls.CLIENT_INITIATED})})}sendRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return G(this,void 0,void 0,function*(){if(!n&&!W9(e)&&this.state===Gt.RECONNECTING){this.queuedRequests.push(()=>G(this,void 0,void 0,function*(){yield this.sendRequest(e,!0)}));return}if(n||(yield this.requestQueue.flush()),this.signalLatency&&(yield us(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(e==null?void 0:e.case),this.logContext);return}const i=new Zo({message:e});try{this.useJSON?this.ws.send(i.toJsonString()):this.ws.send(i.toBinary())}catch(o){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:o}))}})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const s=rA(i.value);this.onAnswer&&this.onAnswer(s)}else if(i.case==="offer"){const s=rA(i.value);this.onOffer&&this.onOffer(s)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return G(this,void 0,void 0,function*(){if(this.state===Gt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=kn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&kn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=kn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&kn.clearInterval(this.pingInterval)}}function rA(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function wp(t){return new nr({sdp:t.sdp,type:t.type})}function j9(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",cc()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.publishOnly!==void 0&&i.set("publish",n.publishOnly),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var pP={},gP={exports:{}},iA=gP.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(iA).forEach(function(t){var e=iA[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var mP=gP.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=e(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=e(a[d+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=mP,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var h=d[0],f=d.slice(2);h==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var p=0;p<(i[h]||[]).length;p+=1){var g=i[h][p];if(g.reg.test(f))return r(g,u,f)}}),c.media=l,c};var s=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(pP);var km=mP,Z9=/%[sdv%]/g,H9=function(t){var e=1,n=arguments,r=n.length;return t.replace(Z9,function(i){if(e>=r)return i;var o=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},Iu=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var o=0;o<e.names.length;o+=1){var s=e.names[o];e.name?i.push(n[e.name][s]):i.push(n[e.names[o]])}else i.push(n[e.name]);return H9.apply(null,i)},z9=["v","o","s","i","u","e","p","c","b","t","r","z","a"],X9=["i","c","b","a"],$9=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var n=e.outerOrder||z9,r=e.innerOrder||X9,i=[];return n.forEach(function(o){km[o].forEach(function(s){s.name in t&&t[s.name]!=null?i.push(Iu(o,s,t)):s.push in t&&t[s.push]!=null&&t[s.push].forEach(function(a){i.push(Iu(o,s,a))})})}),t.media.forEach(function(o){i.push(Iu("m",km.m[0],o)),r.forEach(function(s){km[s].forEach(function(a){a.name in o&&o[a.name]!=null?i.push(Iu(s,a,o)):a.push in o&&o[a.push]!=null&&o[a.push].forEach(function(c){i.push(Iu(s,a,c))})})})}),i.join(`\r
`)+`\r
`},K9=pP,J9=$9,Em=J9,Mu=K9.parse;const oA=.7,il={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class sA extends ko.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.log=Xe,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=XC(o=>G(this,void 0,void 0,function*(){this.emit(il.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(o)o(s);else throw s}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=ys((i=r.loggerName)!==null&&i!==void 0?i:yo.PCTransport),this.loggerOptions=r,this.config=e,this.mediaConstraints=n,this._pc=this.createPC()}createPC(){const e=P9()?new RTCPeerConnection(this.config,this.mediaConstraints):new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return G(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){var n;return G(this,void 0,void 0,function*(){let r;if(e.type==="offer"){let{stereoMids:i,nackMids:o}=Q9(e);this.remoteStereoMids=i,this.remoteNackMids=o}else if(e.type==="answer"){const i=Mu((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(s=>{if(!s.transceiver||o.mid!=s.transceiver.mid)return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config=l.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),s.maxbr>0&&(l.config+=";maxaveragebitrate=".concat(s.maxbr*1e3)),c=!0;break}return c||s.maxbr>0&&o.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(s.maxbr*1e3)}),!0})}),r=Em(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(il.NegotiationComplete),e.sdp&&Mu(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(il.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(e){var n;return G(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e),i=Mu((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"?aA(o,[],[]):o.type==="video"&&(Y9(o),this.trackBitrates.some(s=>{if(!o.msid||!s.cid||!o.msid.includes(s.cid))return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config.includes("x-google-start-bitrate")||(l.config+=";x-google-start-bitrate=".concat(Math.round(s.maxbr*oA))),l.config.includes("x-google-max-bitrate")||(l.config+=";x-google-max-bitrate=".concat(s.maxbr)),c=!0;break}return c||o.fmtp.push({payload:a,config:"x-google-start-bitrate=".concat(Math.round(s.maxbr*oA),";x-google-max-bitrate=").concat(s.maxbr)}),!0}))}),yield this.setMungedSDP(r,Em(i)),this.onOffer(r)})}createAndSetAnswer(){var e;return G(this,void 0,void 0,function*(){const n=yield this.pc.createAnswer(),r=Mu((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{i.type==="audio"&&aA(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Em(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new rn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new rn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var e;return G(this,void 0,void 0,function*(){if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const s=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(e,n,r){return G(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const s={error:o,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new L0(o)}})}}function aA(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function Y9(t){var e,n,r,i;const o=(n=(e=t.rtp[0])===null||e===void 0?void 0:e.codec)===null||n===void 0?void 0:n.toLowerCase();if(!Ku(o))return;let s=0;((r=t.ext)===null||r===void 0?void 0:r.some(c=>c.uri===$w?!0:(c.value>s&&(s=c.value),!1)))||(i=t.ext)===null||i===void 0||i.push({value:s+1,uri:$w})}function Q9(t){var e;const n=[],r=[],i=Mu((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return i.media.forEach(s=>{var a;s.type==="audio"&&(s.rtp.some(c=>c.codec==="opus"?(o=c.payload,!0):!1),!((a=s.rtcpFb)===null||a===void 0)&&a.some(c=>c.payload===o&&c.type==="nack")&&r.push(s.mid),s.fmtp.some(c=>c.payload===o?(c.config.includes("sprop-stereo=1")&&n.push(s.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const G0="vp8",q9={audioBitrate:Sp.music.maxBitrate,audioPreset:Sp.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:$C.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:G0,backupCodec:!0},vP={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},yP={resolution:Nd.h720.resolution},e6={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new ZW,disconnectOnPageLeave:!0,expWebAudioMix:!1},QC={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var sn;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(sn||(sn={}));class t6{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=QC.peerConnectionTimeout,this.log=Xe,this.updateState=()=>{var s;const a=this.state,c=this.requiredTransports.map(l=>l.getConnectionState());c.every(l=>l==="connected")?this.state=sn.CONNECTED:c.some(l=>l==="failed")?this.state=sn.FAILED:c.some(l=>l==="connecting")?this.state=sn.CONNECTING:c.every(l=>l==="closed")?this.state=sn.CLOSED:c.some(l=>l==="closed")?this.state=sn.CLOSING:c.every(l=>l==="new")&&(this.state=sn.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(sn[a]," to ").concat(sn[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=ys((i=r.loggerName)!==null&&i!==void 0?i:yo.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n;const o={optional:[{googDscp:!0}]};this.publisher=new sA(e,o,r),this.subscriber=new sA(e,void 0,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Vn.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Vn.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=s=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s)},this.state=sn.NEW,this.connectionLock=new Oi}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return G(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return G(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return G(this,void 0,void 0,function*(){n===Vn.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return G(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){var r;return G(this,void 0,void 0,function*(){const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,e,n)))}finally{i()}})}negotiate(e){return G(this,void 0,void 0,function*(){return new Promise((n,r)=>G(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(il.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(il.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Vn.PUBLISHER?this.publisher.getConnectedAddress():e===Vn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return G(this,void 0,void 0,function*(){if(e.getConnectionState()!=="connected")return new Promise((o,s)=>G(this,void 0,void 0,function*(){const a=()=>{this.log.warn("abort transport connection",this.logContext),kn.clearTimeout(c),s(new vt("room connection has been cancelled",3))};n!=null&&n.signal.aborted&&a(),n==null||n.signal.addEventListener("abort",a);const c=kn.setTimeout(()=>{n==null||n.signal.removeEventListener("abort",a),s(new vt("could not establish pc connection"))},r);for(;this.state!==sn.CONNECTED;)if(yield us(50),n!=null&&n.signal.aborted){s(new vt("room connection has been cancelled",3));return}kn.clearTimeout(c),n==null||n.signal.removeEventListener("abort",a),o()}))})}}const cA="_lossy",lA="_reliable",n6=2*1e3,uA="leave-reconnect";var ui;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(ui||(ui={}));class r6 extends ko.EventEmitter{get isClosed(){return this._isClosed}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=QC.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=ui.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Xe,this.handleDataChannel=r=>{let{channel:i}=r;return G(this,void 0,void 0,function*(){if(i){if(i.label===lA)this.reliableDCSub=i;else if(i.label===cA)this.lossyDCSub=i;else return;this.log.debug("on data channel ".concat(i.id,", ").concat(i.label),this.logContext),i.onmessage=this.handleDataMessage}})},this.handleDataMessage=r=>G(this,void 0,void 0,function*(){var i,o;const s=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const c=Yi.fromBinary(new Uint8Array(a));((i=c.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(Ae.ActiveSpeakersUpdate,c.value.value.speakers):((o=c.value)===null||o===void 0?void 0:o.case)==="user"&&this.emit(Ae.DataPacketReceived,c.value.value,c.kind)}finally{s()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?on.LOSSY:on.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(Ae.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(a===null){o(s);return}r===uA&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=kn.setTimeout(()=>this.attemptReconnect(i),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===ui.Connected&&r();const o=()=>{this.off(Ae.Disconnected,s),r()},s=()=>{this.off(Ae.Restarted,o),i()};this.once(Ae.Restarted,o),this.once(Ae.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(Ae.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Gt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(No.RR_SIGNAL_DISCONNECTED))},this.log=ys((n=e.loggerName)!==null&&n!==void 0?n:yo.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new YC(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Oi,this.dataProcessLock=new Oi,this.dcBufferStatus=new Map([[on.LOSSY,!0],[on.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Ae.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Ae.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Ae.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Ae.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Ae.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Ae.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Ae.StreamStateChanged,r)}get logContext(){var e,n,r,i,o,s;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomSid:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,identity:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity}}join(e,n,r,i){return G(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof vt&&o.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw o}})}close(){return G(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.emit(Ae.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){var e;return G(this,void 0,void 0,function*(){yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return G(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new $i("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new vt("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){var e;return G(this,void 0,void 0,function*(){return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){var n;return G(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==sn.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new t6(r,e.subscriberPrimary,this.loggerOptions),this.emit(Ae.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(i,o)=>{this.client.sendIceCandidate(i,o)},this.pcManager.onPublisherOffer=i=>{this.client.sendOffer(i)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(i,o,s)=>G(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(i),this.logContext),i===sn.CONNECTED){const a=this.pcState===ui.New;this.pcState=ui.Connected,a&&this.emit(Ae.Connected,e)}else i===sn.FAILED&&this.pcState===ui.Connected&&(this.pcState=ui.Disconnected,this.handleDisconnect("peerconnection failed",s==="failed"?No.RR_SUBSCRIBER_FAILED:No.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=i=>{this.emit(Ae.MediaTrackAdded,i.track,i.streams[0],i.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>G(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>G(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Ae.LocalTrackUnpublished,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Ae.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Ae.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",No.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{e!=null&&e.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(uA)):(this.emit(Ae.Disconnected,e==null?void 0:e.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason}))}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),i.push(s)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Li.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(cA,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(lA,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(e,n,r){if(!("getCapabilities"in RTCRtpReceiver))return;const i=RTCRtpReceiver.getCapabilities(n);if(!i)return;this.log.debug("get receiver capabilities",Object.assign(Object.assign({},this.logContext),{cap:i}));const o=[],s=[],a=[];i.codecs.forEach(c=>{const l=c.mimeType.toLowerCase();if(l==="audio/opus"){o.push(c);return}if(!(l==="video/".concat(r))){a.push(c);return}if(r==="h264"){c.sdpFmtpLine&&c.sdpFmtpLine.includes("profile-level-id=42e01f")?o.push(c):s.push(c);return}o.push(c)}),x9(e)&&e.setCodecPreferences(o.concat(s,a))}createSender(e,n,r){return G(this,void 0,void 0,function*(){if(Kw())return yield this.createTransceiverRTCRtpSender(e,n,r);if(Jw())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new rn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return G(this,void 0,void 0,function*(){if(Kw())return this.createSimulcastTransceiverSender(e,n,r,i);if(Jw())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new rn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new rn("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream);const o={direction:"sendonly",streams:i};r&&(o.sendEncodings=r);const s=yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o);return e.kind===Q.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(s,e.kind,n.videoCodec),e.codec=n.videoCodec),s.sender})}createSimulcastTransceiverSender(e,n,r,i){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new rn("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return this.setPreferredCodec(s,e.kind,r.videoCodec),e.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(e){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new rn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){var n,r,i;return G(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){Xe.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Li.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:sn.NEW)===sn.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof rn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof kc||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",No.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Ae.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){var n,r,i;return G(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new rn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Ae.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new kc;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof vt&&s.reason===0?new rn("could not reconnect, token might be expired"):new kc}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Ae.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Gt.CONNECTED)throw new kc("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Ae.Restarted)}catch(o){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(e){var n;return G(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new rn("could not reconnect, url or token not saved");if(!this.pcManager)throw new rn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Ae.Resuming);try{this.setupSignalClientCallbacks();const r=yield this.client.reconnect(this.url,this.token,this.participantSid,e);if(r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}}catch(r){let i="";throw r instanceof Error&&(i=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof vt&&r.reason===0?new rn("could not reconnect, token might be expired"):r instanceof vt&&r.reason===4?r:new kc(i)}if(this.emit(Ae.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Gt.CONNECTED)throw new kc("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(Ae.Resumed)})}waitForPCInitialConnection(e,n){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new rn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return G(this,void 0,void 0,function*(){this.pcState=ui.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield us(n6),!this.pcManager)throw new rn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=ui.Connected}catch(e){throw this.pcState=ui.Disconnected,new vt("could not establish PC connection, ".concat(e.message))}})}sendDataPacket(e,n){return G(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var r;return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new rn("PC manager is closed");const i=n?this.pcManager.subscriber:this.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!i)throw new vt("".concat(o," connection not set"));!n&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const s=this.dataChannelForKind(e,n);if((s==null?void 0:s.readyState)==="open")return;const a=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<a;){if(i.isICEConnected&&((r=this.dataChannelForKind(e,n))===null||r===void 0?void 0:r.readyState)==="open")return;yield us(50)}throw new vt("could not establish ".concat(o," connection, state: ").concat(i.getICEConnectionState()))})}ensurePublisherConnected(e){return G(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(e,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==sn.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return G(this,void 0,void 0,function*(){return new Promise((e,n)=>G(this,void 0,void 0,function*(){if(!this.pcManager){n(new L0("PC manager is closed"));return}this.pcManager.requirePublisher();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Ae.Closing,i),this.pcManager.publisher.once(il.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(a=>{const c=a.codec.toLowerCase();L9(c)&&s.set(a.payload,c)}),this.emit(Ae.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),e()}catch(o){o instanceof L0&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",No.RR_UNKNOWN),n(o)}finally{this.off(Ae.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===on.LOSSY)return this.lossyDCSub;if(e===on.RELIABLE)return this.reliableDCSub}else{if(e===on.LOSSY)return this.lossyDC;if(e===on.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array;e.forEach(l=>{l.isDesired!==a&&c.push(l.trackSid)}),this.client.sendSyncState(new ho({answer:o?wp({sdp:o.sdp,type:o.type}):void 0,offer:s?wp({sdp:s.sdp,type:s.type}):void 0,subscription:new ei({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:w9(n),dataChannels:this.dataChannelsInfo()}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new fo({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(on.LOSSY),Vn.PUBLISHER),n(this.dataChannelForKind(on.RELIABLE),Vn.PUBLISHER),n(this.dataChannelForKind(on.LOSSY,!0),Vn.SUBSCRIBER),n(this.dataChannelForKind(on.RELIABLE,!0),Vn.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&kn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Sr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Sr()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class kc extends Error{}class dA{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return V0(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return G(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),Xe.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return G(this,void 0,void 0,function*(){const n=yield fetch("".concat(i6(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new vt("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}}function i6(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}const qC=2e3;function lg(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}class hr extends El{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,Q.Kind.Audio,n,r,o),this.stopOnMute=!1,this.monitorSender=()=>G(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}s&&this.prevStats&&(this._currentBitrate=lg(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.checkForSilence()}setDeviceId(e){return G(this,void 0,void 0,function*(){return this._constraints.deviceId===e?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||$a(e)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Q.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==$a(this._constraints.deviceId);return this.source===Q.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return G(this,void 0,void 0,function*(){let n;if(e){const r=cg({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return G(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){Sr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},qC)))}setProcessor(e){var n;return G(this,void 0,void 0,function*(){const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack))}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){var e;return G(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return G(this,void 0,void 0,function*(){const e=yield I9(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ye.AudioSilenceDetected)),e})}}function CP(t,e,n){switch(t.kind){case"audio":return new hr(t,e,!1,void 0,n);case"video":return new Kr(t,e,!1,n);default:throw new $i("unsupported track type: ".concat(t.kind))}}const o6=Object.values(Nd),s6=Object.values(B0),a6=Object.values($C),c6=[Nd.h180,Nd.h360],l6=[B0.h180,B0.h360],u6=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new dt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),W0=["q","h","f"];function j0(t,e,n,r){var i,o;let s=r==null?void 0:r.videoEncoding;t&&(s=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!s&&!a&&!c||!e||!n)return[{}];s||(s=h6(t,e,n,l),Xe.debug("using video encoding",s));const u=new dt(e,n,s.maxBitrate,s.maxFramerate,s.priority);if(c&&Ku(l)){Xe.debug("using svc with scalabilityMode ".concat(c));const f=new IP(c),p=[];if(f.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));for(let g=0;g<f.spatial;g+=1)p.push({rid:W0[2-g],maxBitrate:s.maxBitrate/Math.pow(3,g),maxFramerate:u.encoding.maxFramerate});return p[0].scalabilityMode=c,Xe.debug("encodings",p),p}if(!a)return[s];let d=[];t?d=(i=fA(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:hA(t,u):d=(o=fA(r==null?void 0:r.videoSimulcastLayers))!==null&&o!==void 0?o:hA(t,u);let h;if(d.length>0){const f=d[0];d.length>1&&([,h]=d);const p=Math.max(e,n);if(p>=960&&h)return Tm(e,n,[f,h,u]);if(p>=480)return Tm(e,n,[f,u])}return Tm(e,n,[u])}function d6(t,e,n){var r,i,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Xe.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(o=a.height)!==null&&o!==void 0?o:(s=t.dimensions)===null||s===void 0?void 0:s.height;return j0(t.source===Q.Source.ScreenShare,c,l,n)}function h6(t,e,n,r){const i=f6(t,e,n);let{encoding:o}=i[0];const s=Math.max(e,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(o=c.encoding,c.width>=s)break}if(r)switch(r){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function f6(t,e,n){if(t)return a6;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?o6:s6}function hA(t,e){if(t)return u6(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?c6:l6}function Tm(t,e,n){const r=[];if(n.forEach((i,o)=>{if(o>=W0.length)return;const s=Math.min(t,e),c={rid:W0[o],scaleResolutionDownBy:Math.max(1,s/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(c.maxFramerate=i.encoding.maxFramerate);const l=kl()||o===0;i.encoding.priority&&l&&(c.priority=i.encoding.priority,c.networkPriority=i.encoding.priority),r.push(c)}),cc()&&hP()==="ios"){let i;r.forEach(s=>{i?s.maxFramerate&&s.maxFramerate>i&&(i=s.maxFramerate):i=s.maxFramerate});let o=!0;r.forEach(s=>{var a;s.maxFramerate!=i&&(o&&(o=!1,Xe.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Xe.info('Setting framerate of encoding "'.concat((a=s.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),s.maxFramerate=i)})}return r}function fA(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class IP{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}const p6=5e3;class Kr extends El{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,Q.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.monitorSender=()=>G(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const s=new Map(o.map(a=>[a.rid,a]));if(this.prevStats){let a=0;s.forEach((c,l)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(l);a+=lg(c,d)}),this._currentBitrate=a}this.prevStats=s}),this.senderLock=new Oi}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Sr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},qC))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var n,r,i,o,s;return G(this,void 0,void 0,function*(){yield e.pauseUpstream.call(this);try{for(var a=!0,c=Tc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)o=l.value,a=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var n,r,i,o,s;return G(this,void 0,void 0,function*(){yield e.resumeUpstream.call(this);try{for(var a=!0,c=Tc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;yield(s=u.sender)===null||s===void 0?void 0:s.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Q.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Q.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){var e;return G(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,framesSent:i.framesSent,timestamp:i.timestamp,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges},a=r.get(i.remoteId);a&&(s.jitter=a.jitter,s.packetsLost=a.packetsLost,s.roundTripTime=a.roundTripTime),n.push(s)}}),n})}setPublishingQuality(e){const n=[];for(let r=ln.LOW;r<=ln.HIGH;r+=1)n.push(new Pi({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}setDeviceId(e){return G(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===$a(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||$a(e)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(e){var n,r,i,o;return G(this,void 0,void 0,function*(){let s;if(e){const u=cg({video:e});typeof u.video!="boolean"&&(s=u.video)}yield this.restart(s);try{for(var a=!0,c=Tc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var i,o,s,a,c,l;return G(this,void 0,void 0,function*(){if(yield r.setProcessor.call(this,e,n),!((c=this.processor)===null||c===void 0)&&c.processedTrack)try{for(var u=!0,d=Tc(this.simulcastCodecs.values()),h;h=yield d.next(),i=h.done,!i;u=!0)a=h.value,u=!1,yield(l=a.sender)===null||l===void 0?void 0:l.replaceTrack(this.processor.processedTrack)}catch(f){o={error:f}}finally{try{!u&&!i&&(s=d.return)&&(yield s.call(d))}finally{if(o)throw o.error}}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e))throw new Error("".concat(e," already added"));const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},p6))}setPublishingCodecs(e){var n,r,i,o,s,a,c;return G(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=Tc(e);i=yield r.next(),o=i.done,!o;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield pA(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){s={error:u}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return l})}setPublishingLayers(e){return G(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield pA(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),uP()&&this.isInBackground&&this.source===Q.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function pA(t,e,n,r,i,o){return G(this,void 0,void 0,function*(){const s=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const a=t.getParameters(),{encodings:c}=a;if(!c)return;if(c.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch");return}let l=!1;!1&&c[0].scalabilityMode||c.forEach((d,h)=>{var f;let p=(f=d.rid)!==null&&f!==void 0?f:"";p===""&&(p="q");const g=SP(p),C=n.find(m=>m.quality===g);C&&d.active!==C.enabled&&(l=!0,d.active=C.enabled,i.debug("setting layer ".concat(C.quality," to ").concat(d.active?"enabled":"disabled"),o),kl()&&(C.enabled?(d.scaleResolutionDownBy=e[h].scaleResolutionDownBy,d.maxBitrate=e[h].maxBitrate,d.maxFrameRate=e[h].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),l&&(a.encodings=c,i.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:a.encodings})),yield t.setParameters(a))}finally{s()}})}function SP(t){switch(t){case"f":return ln.HIGH;case"h":return ln.MEDIUM;case"q":return ln.LOW;default:return ln.HIGH}}function gA(t,e,n,r){if(!n)return[new tr({quality:ln.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new IP(i),s=[];for(let a=0;a<o.spatial;a+=1)s.push(new tr({quality:ln.HIGH-a,width:Math.ceil(t/Math.pow(2,a)),height:Math.ceil(e/Math.pow(2,a)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(3,a)):0,ssrc:0}));return s}return n.map(i=>{var o,s,a;const c=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let l=SP((s=i.rid)!==null&&s!==void 0?s:"");return new tr({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}class bP extends Q{constructor(e,n,r,i,o){super(e,r,o),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ye.Muted:ye.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver=void 0,this._currentBitrate=0,this.emit(ye.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var e;return G(this,void 0,void 0,function*(){return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),qC))}}class Ka extends bP{constructor(e,n,r,i,o,s){super(e,n,Q.Kind.Audio,r,s),this.monitorReceiver=()=>G(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=lg(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;cc()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(cc())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return G(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(U0(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&U0(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ye.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(ye.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return G(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Rm=100;class Yu extends bP{constructor(e,n,r,i,o){super(e,n,Q.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>G(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=lg(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=XC(()=>{this.updateDimensions()},Rm),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?rl(this._mediaStreamTrack,n):jc(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new g6(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return G(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((a,c)=>Math.max(a,c.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(a=>a.pictureInPicture),s=this.elementInfos.some(a=>a.visible)&&!i||o;if(this.lastVisible!==s){if(!s&&Date.now()-r<Rm){kn.setTimeout(()=>{this.updateVisibility()},Rm);return}this.lastVisible=s,this.emit(ye.VisibilityChanged,s,this)}}updateDimensions(){var e,n;let r=0,i=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const a=s.width()*o,c=s.height()*o;a+c>r+i&&(r=a,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(ye.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?Yw():n||(Yw()>2?2:1)}}class g6{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:s}=r;o===this.element&&(this.isIntersecting=s,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??mA(e),this.isPiP=Sr()&&document.pictureInPictureElement===e,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=mA(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var e;(e=this.handleResize)===null||e===void 0||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,qw().observe(this.element),Qw().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var e,n;(e=qw())===null||e===void 0||e.unobserve(this.element),(n=Qw())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function mA(t){let e=t.offsetTop,n=t.offsetLeft;const r=t.offsetWidth,i=t.offsetHeight,{hidden:o}=t,{opacity:s,display:a}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&e+i>window.pageYOffset&&n+r>window.pageXOffset&&!o&&(s!==""?parseFloat(s)>0:!0)&&a!=="none"}class _o extends ko.EventEmitter{constructor(e,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=wn.NONE,this.log=Xe,this.handleMuted=()=>{this.emit(ye.Muted)},this.handleUnmuted=()=>{this.emit(ye.Unmuted)},this.log=ys((o=i==null?void 0:i.loggerName)!==null&&o!==void 0?o:yo.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=Q.Source.Unknown}setTrack(e){this.track&&(this.track.off(ye.Muted,this.handleMuted),this.track.off(ye.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ye.Muted,this.handleMuted),e.on(ye.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),At(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==wn.NONE}get audioTrack(){if(this.track instanceof hr||this.track instanceof Ka)return this.track}get videoTrack(){if(this.track instanceof Kr||this.track instanceof Yu)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Q.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Q.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(_o||(_o={}));class _d extends _o{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ye.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(ye.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(ye.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var e;return G(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){var e;return G(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){var e;return G(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){var e;return G(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}}var Qr;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Qr||(Qr={}));function m6(t){switch(t){case Bo.EXCELLENT:return Qr.Excellent;case Bo.GOOD:return Qr.Good;case Bo.POOR:return Qr.Poor;case Bo.LOST:return Qr.Lost;default:return Qr.Unknown}}class wP extends ko.EventEmitter{get logContext(){var e,n;return Object.assign(Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e)),{participantSid:this.sid,participantId:this.identity})}get isEncrypted(){return this.tracks.size>0&&Array.from(this.tracks.values()).every(e=>e.isEncrypted)}get isAgent(){var e,n;return(n=(e=this.permissions)===null||e===void 0?void 0:e.agent)!==null&&n!==void 0?n:!1}constructor(e,n,r,i,o){var s;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Qr.Unknown,this.log=Xe,this.log=ys((s=o==null?void 0:o.loggerName)!==null&&s!==void 0?s:yo.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){for(const[,n]of this.tracks)if(n.source===e)return n}getTrackByName(e){for(const[,n]of this.tracks)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrack(Q.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrack(Q.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrack(Q.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(ae.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ae.ParticipantNameChanged,e)}setPermissions(e){var n,r,i,o,s;const a=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((l,u)=>{var d;return l!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=e,c&&this.emit(ae.ParticipantPermissionsChanged,a),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ae.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=m6(e),n!==this._connectionQuality&&this.emit(ae.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTracks.forEach(n=>(n.track instanceof Ka||n.track instanceof hr)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(ye.Muted,()=>{this.emit(ae.TrackMuted,e)}),e.on(ye.Unmuted,()=>{this.emit(ae.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case Q.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case Q.Kind.Video:this.videoTracks.set(e.trackSid,e);break}}}function v6(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new lo({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class eI extends _o{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=ln.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(ye.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new ei({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new eo({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ye.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?_o.SubscriptionStatus.Unsubscribed:super.isSubscribed?_o.SubscriptionStatus.Subscribed:_o.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?_o.PermissionStatus.Allowed:_o.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(this.track instanceof Yu&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&this.track instanceof Yu&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(ye.VisibilityChanged,this.handleVisibilityChange),i.off(ye.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(ye.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ye.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ye.VisibilityChanged,this.handleVisibilityChange),e.on(ye.Ended,this.handleEnded),this.emit(ye.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(ye.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?ye.Muted:ye.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(ye.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ye.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===Q.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof Yu&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new oo({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=ln.HIGH,this.emit(ye.UpdateSettings,e)}}class Od extends wP{static fromParticipantInfo(e,n){return new Od(e,n.sid,n.identity,n.name,n.metadata)}constructor(e,n,r,i,o,s){super(n,r||"",i,o,s),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ye.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),At(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(ye.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(ye.SubscriptionPermissionChanged,n=>{this.emit(ae.TrackSubscriptionPermissionChanged,e,n)}),e.on(ye.SubscriptionStatusChanged,n=>{this.emit(ae.TrackSubscriptionStatusChanged,e,n)}),e.on(ye.Subscribed,n=>{this.emit(ae.TrackSubscribed,n,e)}),e.on(ye.Unsubscribed,n=>{this.emit(ae.TrackUnsubscribed,n,e)}),e.on(ye.SubscriptionFailed,n=>{this.emit(ae.TrackSubscriptionFailed,e.trackSid,n)})}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrack(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q.Source.Microphone;const n=this.getTrack(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,o,s){let a=this.getTrackPublication(n);if(a||n.startsWith("TR")||this.tracks.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ae.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,o,s-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),At(a))),this.emit(ae.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new Yu(e,n,i,o):l=new Ka(e,n,i,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(r),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&l instanceof Ka&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var o,s;let a=this.getTrackPublication(i.sid);if(a)a.updateInfo(i);else{const c=Q.kindFromProto(i.type);if(!c)return;a=new eI(c,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),a.updateInfo(i),r.set(i.sid,a);const l=Array.from(this.tracks.values()).find(u=>u.source===(a==null?void 0:a.source));l&&a.source!==Q.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:At(l),newTrack:At(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.tracks.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),At(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(ae.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.tracks.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.tracks.delete(e),r.kind){case Q.Kind.Audio:this.audioTracks.delete(e);break;case Q.Kind.Video:this.videoTracks.delete(e);break}n&&this.emit(ae.TrackUnpublished,r)}setAudioOutput(e){return G(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTracks.forEach(r=>{var i;r.track instanceof Ka&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}class Z0 extends wP{constructor(e,n,r,i){super(e,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=wn.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new fP)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>v6(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),At(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),At(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),At(o))),this.onTrackMuted(o,o.isMuted)},this.handleSubscribedQualityUpdate=o=>G(this,void 0,void 0,function*(){var s,a,c,l,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const h=this.videoTracks.get(o.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!h.videoTrack)return;const C=yield h.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var f=!0,p=Tc(C),g;g=yield p.next(),s=g.done,!s;f=!0){l=g.value,f=!1;const m=l;v9(m)&&(this.log.debug("publish ".concat(m," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),At(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,m,h.options))}}catch(m){a={error:m}}finally{try{!f&&!s&&(c=p.return)&&(yield c.call(p))}finally{if(a)throw a.error}}}else o.subscribedQualities.length>0&&(yield(d=h.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.tracks.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>G(this,void 0,void 0,function*(){if(o.source===Q.Source.ScreenShare||o.source===Q.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),At(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof hr||o instanceof Kr)try{if(Sr())try{const s=yield navigator==null?void 0:navigator.permissions.query({name:o.source===Q.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),At(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),At(o))),yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),At(o))),yield o.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==wn.NONE}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(Ae.RemoteMute,(n,r)=>{const i=this.tracks.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(Ae.Connected,this.handleReconnected).on(Ae.SignalRestarted,this.handleReconnected).on(Ae.SignalResumed,this.handleReconnected).on(Ae.Restarting,this.handleReconnecting).on(Ae.Resuming,this.handleReconnecting).on(Ae.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Ae.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Ae.Disconnected,this.handleDisconnected)}setMetadata(e){var n;this.engine.client.sendUpdateLocalMetadata(e,(n=this.name)!==null&&n!==void 0?n:"")}setName(e){var n;this.engine.client.sendUpdateLocalMetadata((n=this.metadata)!==null&&n!==void 0?n:"",e)}setCameraEnabled(e,n,r){return this.setTrackEnabled(Q.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(Q.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(Q.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(ae.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return G(this,void 0,void 0,function*(){this.encryptionType=e?wn.GCM:wn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){var o,s;return G(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n}));let a=this.getTrack(e);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(e)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:e}));return}this.pendingPublishing.add(e);try{switch(e){case Q.Source.Camera:c=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case Q.Source.Microphone:c=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case Q.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new $i(e)}const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),At(d))),l.push(this.publishTrack(d,i));[a]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&!(l instanceof $i)&&this.emit(ae.MediaDevicesError,l),l}finally{this.pendingPublishing.delete(e)}}else if(a&&a.track)if(e===Q.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrack(Q.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return G(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Q.Source.Camera)||this.pendingPublishing.has(Q.Source.Microphone))){this.pendingPublishing.add(Q.Source.Camera),this.pendingPublishing.add(Q.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Q.Source.Camera),this.pendingPublishing.delete(Q.Source.Microphone)}}})}createTracks(e){var n,r;return G(this,void 0,void 0,function*(){const i=cP(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),o=cg(i);let s;try{s=yield navigator.mediaDevices.getUserMedia(o)}catch(a){throw a instanceof Error&&(o.audio&&(this.microphoneError=a),o.video&&(this.cameraError=a)),a}return o.audio&&(this.microphoneError=void 0,this.emit(ae.AudioStreamAcquired)),o.video&&(this.cameraError=void 0),s.getTracks().map(a=>{const c=a.kind==="audio";c?e.audio:e.video;let l;const u=c?o.audio:o.video;typeof u!="boolean"&&(l=u);const d=CP(a,l,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return d.kind===Q.Kind.Video?d.source=Q.Source.Camera:d.kind===Q.Kind.Audio&&(d.source=Q.Source.Microphone),d.mediaStream=s,d})})}createScreenTracks(e){return G(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new zC("getDisplayMedia not supported");e.resolution===void 0&&!N9()&&(e.resolution=$C.h1080fps30.resolution);const n=b9(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new $i("no video track found");const o=new Kr(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=Q.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const s=[o];if(r.getAudioTracks().length>0){this.emit(ae.AudioStreamAcquired);const a=new hr(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=Q.Source.ScreenShareAudio,s.push(a)}return s})}publishTrack(e,n){var r,i,o,s;return G(this,void 0,void 0,function*(){yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,e instanceof El&&this.pendingPublishPromises.has(e)&&(yield this.pendingPublishPromises.get(e));let a;if(e instanceof MediaStreamTrack)a=e.getConstraints();else{a=e.constraints;let f;switch(e.source){case Q.Source.Microphone:f="audioinput";break;case Q.Source.Camera:f="videoinput"}f&&this.activeDeviceMap.has(f)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(f)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new hr(e,a,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":e=new Kr(e,a,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new $i("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e instanceof hr&&e.setAudioContext(this.audioContext);let c;if(this.tracks.forEach(f=>{f.track&&f.track===e&&(c=f)}),c)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),At(c))),c;const l="channelCount"in e.mediaStreamTrack.getSettings()&&e.mediaStreamTrack.getSettings().channelCount===2||e.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:l;u&&(n||(n={}),n.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),At(e))),n.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(o=n.dtx)!==null&&o!==void 0||(n.dtx=!1),(s=n.red)!==null&&s!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);ac()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),d.simulcast=!1),d.source&&(e.source=d.source);const h=this.publish(e,d,u);this.pendingPublishPromises.set(e,h);try{return yield h}catch(f){throw f}finally{this.pendingPublishPromises.delete(e)}})}publish(e,n,r){var i,o,s,a,c,l,u,d,h,f,p,g,C;return G(this,void 0,void 0,function*(){Array.from(this.tracks.values()).find(T=>e instanceof El&&T.source===e.source)&&e.source!==Q.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),At(e))),n.stopMicTrackOnMute&&e instanceof hr&&(e.stopOnMute=!0),e.source===Q.Source.ScreenShare&&kl()&&(n.simulcast=!1),n.videoCodec==="av1"&&!E9()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!T9()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=G0);const v=n.videoCodec;e.on(ye.Muted,this.onTrackMuted),e.on(ye.Unmuted,this.onTrackUnmuted),e.on(ye.Ended,this.handleTrackEnded),e.on(ye.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ye.UpstreamResumed,this.onTrackUpstreamResumed);const S=new Ei({cid:e.mediaStreamTrack.id,name:n.name,type:Q.kindToProto(e.kind),muted:e.isMuted,source:Q.sourceToProto(e.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n==null?void 0:n.stream});let E;if(e.kind===Q.Kind.Video){let T={width:0,height:0};try{T=yield e.waitForDimensions()}catch{const O=(a=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&a!==void 0?a:Nd.h720.resolution;T={width:O.width,height:O.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),At(e)),{dims:T}))}S.width=T.width,S.height=T.height,e instanceof Kr&&(Ku(v)&&(e.source===Q.Source.ScreenShare&&v==="vp9"&&(n.scalabilityMode="L1T3"),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),S.simulcastCodecs=[new ki({codec:v,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:G0}),n.backupCodec&&v!==n.backupCodec.codec&&S.encryption===wn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),S.simulcastCodecs.push(new ki({codec:n.backupCodec.codec,cid:""})))),E=j0(e.source===Q.Source.ScreenShare,S.width,S.height,n),S.layers=gA(S.width,S.height,E,Ku(n.videoCodec))}else e.kind===Q.Kind.Audio&&(E=[{maxBitrate:(u=(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate)!==null&&u!==void 0?u:n.audioBitrate,priority:(h=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&h!==void 0?h:"high",networkPriority:(p=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new rn("cannot publish track when not connected");const w=yield this.engine.addTrack(S);let A;if(w.codecs.forEach(T=>{A===void 0&&(A=T.mimeType)}),A&&e.kind===Q.Kind.Video){const T=lP(A);T!==v&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),At(e)),{codec:T})),n.videoCodec=T,E=j0(e.source===Q.Source.ScreenShare,S.width,S.height,n))}const x=new _d(e.kind,w,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(x.options=n,e.sid=w.sid,!this.engine.pcManager)throw new rn("pcManager is not ready");if(this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:E,trackInfo:w})),e.sender=yield this.engine.createSender(e,n,E),E)if(kl()&&e.kind===Q.Kind.Audio){let T;for(const _ of this.engine.pcManager.publisher.getTransceivers())if(_.sender===e.sender){T=_;break}T&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:T,codec:"opus",maxbr:!((g=E[0])===null||g===void 0)&&g.maxBitrate?E[0].maxBitrate/1e3:0})}else e.codec&&Ku(e.codec)&&(!((C=E[0])===null||C===void 0)&&C.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:S.cid,codec:e.codec,maxbr:E[0].maxBitrate/1e3});return yield this.engine.negotiate(),e instanceof Kr?e.startMonitor(this.engine.client):e instanceof hr&&e.startMonitor(),this.addTrackPublication(x),this.emit(ae.LocalTrackPublished,x),x})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){var i;return G(this,void 0,void 0,function*(){if(this.encryptionType!==wn.NONE)return;let o;if(this.tracks.forEach(d=>{d.track&&d.track===e&&(o=d)}),!o)throw new $i("track is not published");if(!(e instanceof Kr))throw new $i("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=d6(e,n,s);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),At(e)));return}const c=e.addSimulcastTrack(n,a),l=new Ei({cid:c.mediaStreamTrack.id,type:Q.kindToProto(e.kind),muted:e.isMuted,source:Q.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:s.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=gA(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new rn("cannot publish track when not connected");const u=yield this.engine.addTrack(l);yield this.engine.createSimulcastSender(e,c,s,a),yield this.engine.negotiate(),this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:u}))})}unpublishTrack(e,n){var r,i;return G(this,void 0,void 0,function*(){const o=this.getPublicationForTrack(e),s=o?At(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}e=o.track,e.off(ye.Muted,this.onTrackMuted),e.off(ye.Unmuted,this.onTrackUnmuted),e.off(ye.Ended,this.handleTrackEnded),e.off(ye.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ye.UpstreamResumed,this.onTrackUpstreamResumed),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&e.stop();let a=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<sn.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),e instanceof Kr){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(a=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:l}))}switch(this.tracks.delete(o.trackSid),o.kind){case Q.Kind.Audio:this.audioTracks.delete(o.trackSid);break;case Q.Kind.Video:this.videoTracks.delete(o.trackSid);break}return this.emit(ae.LocalTrackUnpublished,o),o.setTrack(void 0),a&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return G(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof _d)})}republishAllTracks(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(this,void 0,void 0,function*(){const r=[];this.tracks.forEach(i=>{i.track&&(e&&(i.options=Object.assign(Object.assign({},i.options),e)),r.push(i))}),yield Promise.all(r.map(i=>G(this,void 0,void 0,function*(){const o=i.track;yield this.unpublishTrack(o,!1),n&&!o.isMuted&&o.source!==Q.Source.ScreenShare&&o.source!==Q.Source.ScreenShareAudio&&(o instanceof hr||o instanceof Kr)&&!o.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:i.trackSid})),yield o.restartTrack()),yield this.publishTrack(o,i.options)})))})}publishData(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return G(this,void 0,void 0,function*(){const i=Array.isArray(r)?r:r==null?void 0:r.destination,o=[],s=Array.isArray(r)?void 0:r.topic;i!==void 0&&i.forEach(c=>{c instanceof Od?o.push(c.sid):o.push(c)});const a=new Yi({kind:n,value:{case:"user",value:new qi({participantSid:this.sid,payload:e,destinationSids:o,topic:s})}});yield this.engine.sendDataPacket(a,n)})}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var r,i;const o=this.tracks.get(n.sid);if(o){const s=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),At(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0)}getPublicationForTrack(e){let n;return this.tracks.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(i instanceof hr||i instanceof Kr)&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}}var nt;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting"})(nt||(nt={}));const y6=2*1e3;class Ap extends ko.EventEmitter{constructor(e){var n,r,i;super(),n=this,this.state=nt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Xe,this.bufferedEvents=[],this.connect=(o,s,a)=>G(this,void 0,void 0,function*(){var c;const l=yield this.disconnectLock.lock();if(this.state===nt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),l(),Promise.resolve();if(this.connectFuture)return l(),this.connectFuture.promise;this.setAndEmitConnectionState(nt.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),V0(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new dA(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().catch(h=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:h}))}));const u=(h,f,p)=>G(this,void 0,void 0,function*(){var g;this.abortController&&this.abortController.abort();const C=new AbortController;this.abortController=C,l==null||l();try{yield this.attemptConnection(p??o,s,a,C),this.abortController=void 0,h()}catch(m){if(this.regionUrlProvider&&m instanceof vt&&m.reason!==3&&m.reason!==0){let v=null;try{v=yield this.regionUrlProvider.getNextBestRegionUrl((g=this.abortController)===null||g===void 0?void 0:g.signal)}catch(S){if(S instanceof vt&&(S.status===401||S.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(S);return}}v?(this.log.info("Initial connection failed with ConnectionError: ".concat(m.message,". Retrying with another region: ").concat(v),this.logContext),yield u(h,f,v)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(m))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(m)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new fP((h,f)=>{u(h,f,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,a,c,l,u)=>G(this,void 0,void 0,function*(){var d,h,f;const p=yield a.join(o,s,{autoSubscribe:c.autoSubscribe,publishOnly:c.publishOnly,adaptiveStream:typeof l.adaptiveStream=="object"?!0:l.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},u.signal);let g=p.serverInfo;if(g||(g={version:p.serverVersion,region:p.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(g).map(C=>{let[m,v]=C;return"".concat(m,": ").concat(v)}).join(", ")),{room:(d=p.room)===null||d===void 0?void 0:d.name,roomSid:(h=p.room)===null||h===void 0?void 0:h.sid,identity:(f=p.participant)===null||f===void 0?void 0:f.identity}),!p.serverVersion)throw new u9("unknown server version");return p.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),l.dynacast=!1),p}),this.applyJoinResponse=o=>{const s=o.participant;this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(o.sifTrailer)},this.attemptConnection=(o,s,a,c)=>G(this,void 0,void 0,function*(){var l,u;this.state===nt.Reconnecting?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((l=this.regionUrlProvider)===null||l===void 0)&&l.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},QC),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const d=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(d),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected)}catch(d){yield this.engine.close(),this.recreateEngine();const h=new vt("could not establish signal connection");throw d instanceof Error&&(h.message="".concat(h.message,": ").concat(d.message)),d instanceof vt&&(h.reason=d.reason,h.status=d.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:d})),h}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new vt("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(d){throw yield this.engine.close(),this.recreateEngine(),d}Sr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Sr()&&(document.addEventListener("freeze",this.onPageLeave),(u=navigator.mediaDevices)===null||u===void 0||u.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(nt.Connected),this.emit(ne.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return G(n,void 0,void 0,function*(){var s,a,c,l;const u=yield this.disconnectLock.lock();try{if(this.state===nt.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===nt.Connecting||this.state===nt.Reconnecting)&&(this.log.warn("abort connection attempt",this.logContext),(s=this.abortController)===null||s===void 0||s.abort(),(c=(a=this.connectFuture)===null||a===void 0?void 0:a.reject)===null||c===void 0||c.call(a,new vt("Client initiated disconnect")),this.connectFuture=void 0),!((l=this.engine)===null||l===void 0)&&l.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(o,ls.CLIENT_INITIATED),this.engine=void 0}finally{u()}})},this.onPageLeave=()=>G(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>G(this,void 0,void 0,function*(){const o=[],s=Cs();if(s&&s.os==="iOS"){const a="livekit-dummy-audio-el";let c=document.getElementById(a);if(!c){c=document.createElement("audio"),c.id=a,c.autoplay=!0,c.hidden=!0;const l=Am();l.enabled=!0;const u=new MediaStream([l]);c.srcObject=u,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:u,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(ne.Disconnected,()=>{c==null||c.remove(),c=null})}o.push(c)}this.participants.forEach(a=>{a.audioTracks.forEach(c=>{c.track&&c.track.attachedElements.forEach(l=>{o.push(l)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>G(this,void 0,void 0,function*(){const o=[];for(const s of this.participants.values())s.videoTracks.forEach(a=>{var c;(c=a.track)===null||c===void 0||c.attachedElements.forEach(l=>{o.includes(l)||o.push(l)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const o of this.participants.values())this.handleParticipantDisconnected(o.sid,o);this.setAndEmitConnectionState(nt.Reconnecting)&&this.emit(ne.Reconnecting)},this.handleSignalRestarted=o=>G(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(nt.Connected),this.emit(ne.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}const a=this.identityToSid.get(s.identity);a&&a!==s.sid&&this.handleParticipantDisconnected(a,this.participants.get(a));let c=this.participants.get(s.sid);const l=!c;s.state===oc.DISCONNECTED?this.handleParticipantDisconnected(s.sid,c):(c=this.getOrCreateParticipant(s.sid,s),l||c.updateInfo(s))})},this.handleActiveSpeakersUpdate=o=>{const s=[],a={};o.forEach(c=>{if(a[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const l=this.participants.get(c.sid);l&&(l.audioLevel=c.level,l.setIsSpeaking(!0),s.push(l))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(c=>{a[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(ne.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(c=>{s.set(c.sid,c)}),o.forEach(c=>{let l=this.participants.get(c.sid);c.sid===this.localParticipant.sid&&(l=this.localParticipant),l&&(l.audioLevel=c.level,l.setIsSpeaking(c.active),c.active?s.set(c.sid,l):s.delete(c.sid))});const a=Array.from(s.values());a.sort((c,l)=>l.audioLevel-c.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(ne.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const a=this.participants.get(s.participantSid);if(!a)return;const c=a.getTrackPublication(s.trackSid);!c||!c.track||(c.track.streamState=Q.streamStateFromProto(s.state),a.emit(ae.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(ne.TrackStreamStateChanged,c,c.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.participants.get(o.participantSid);if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.participants.values()).find(c=>c.tracks.has(o.trackSid));if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setSubscriptionError(o.err)},this.handleDataPacket=(o,s)=>{const a=this.participants.get(o.participantSid);this.emit(ne.DataReceived,o.payload,a,s,o.topic),a==null||a.emit(ae.DataReceived,o.payload,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ne.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ne.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ne.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ne.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>G(this,void 0,void 0,function*(){this.emit(ne.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(ne.RoomMetadataChanged,o.metadata),(s==null?void 0:s.activeRecording)!==o.activeRecording&&this.emitWhenConnected(ne.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const a=this.participants.get(s.participantSid);a&&a.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(ne.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(ne.ParticipantNameChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(ne.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(ne.TrackUnmuted,o,this.localParticipant)},this.onLocalTrackPublished=o=>G(this,void 0,void 0,function*(){var s;this.emit(ne.LocalTrackPublished,o,this.localParticipant),o.track instanceof hr&&(yield o.track.checkForSilence())&&this.emit(ne.LocalAudioSilenceDetected,o);const a=yield(s=o.track)===null||s===void 0?void 0:s.getDeviceId(),c=S9(o.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.localParticipant.activeDeviceMap.set(c,a),this.emit(ne.ActiveDeviceChanged,c,a))}),this.onLocalTrackUnpublished=o=>{this.emit(ne.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalConnectionQualityChanged=o=>{this.emit(ne.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(ne.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(ne.ParticipantPermissionsChanged,o,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.identityToSid=new Map,this.options=Object.assign(Object.assign({},e6),e),this.log=ys((r=this.options.loggerName)!==null&&r!==void 0?r:yo.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},vP),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},yP),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},q9),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Oi,this.localParticipant=new Z0("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",$a(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",$a(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",$a(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(e){return G(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&(this.e2eeManager=new U9(this.options.e2ee),this.e2eeManager.on(Js.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof Z0&&(this.isE2EEEnabled=n),this.emit(ne.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Js.EncryptionError,n=>this.emit(ne.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){return{room:this.name,roomSid:this.sid,identity:this.localParticipant.identity}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}get sid(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.sid)!==null&&n!==void 0?n:""}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new r6(this.options),this.engine.on(Ae.ParticipantUpdate,this.handleParticipantUpdates).on(Ae.RoomUpdate,this.handleRoomUpdate).on(Ae.SpeakersChanged,this.handleSpeakersChanged).on(Ae.StreamStateChanged,this.handleStreamStateUpdate).on(Ae.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Ae.SubscriptionError,this.handleSubscriptionError).on(Ae.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Ae.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Ae.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Ae.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Ae.DataPacketReceived,this.handleDataPacket).on(Ae.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(nt.Reconnecting)&&this.emit(ne.Reconnecting)}).on(Ae.Resumed,()=>{this.setAndEmitConnectionState(nt.Connected),this.emit(ne.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),this.emitBufferedEvents()}).on(Ae.SignalResumed,()=>{this.bufferedEvents=[],this.state===nt.Reconnecting&&this.sendSyncState()}).on(Ae.Restarting,this.handleRestarting).on(Ae.SignalRestarted,this.handleSignalRestarted).on(Ae.DCBufferStatusChanged,(e,n)=>{this.emit(ne.DCBufferStatusChanged,e,n)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Qn.getInstance().getDevices(e,n)}prepareConnection(e,n){return G(this,void 0,void 0,function*(){if(this.state===nt.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(V0(new URL(e))&&n){this.regionUrlProvider=new dA(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===nt.Disconnected&&(this.regionUrl=r,yield fetch(tA(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(tA(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){if(this.localParticipant.identity===e)return this.localParticipant;const n=this.identityToSid.get(e);if(n)return this.participants.get(n)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return G(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new bn({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new bn({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new bn({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new bn({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>G(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new bn({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>G(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new bn({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new bn({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>G(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new ti({reason:ls.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new bn({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveAudioOutputDevice(){var e,n;return(n=(e=this.options.audioOutput)===null||e===void 0?void 0:e.deviceId)!==null&&n!==void 0?n:""}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var i,o,s;return G(this,void 0,void 0,function*(){let a=!1,c=!0;const l=r?{exact:n}:n;if(e==="audioinput"){const u=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.audioTracks.values()).filter(h=>h.source===Q.Source.Microphone);try{c=(yield Promise.all(d.map(h=>{var f;return(f=h.audioTrack)===null||f===void 0?void 0:f.setDeviceId(l)}))).every(h=>h===!0)}catch(h){throw this.options.audioCaptureDefaults.deviceId=u,h}}else if(e==="videoinput"){const u=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.videoTracks.values()).filter(h=>h.source===Q.Source.Camera);try{c=(yield Promise.all(d.map(h=>{var f;return(f=h.videoTrack)===null||f===void 0?void 0:f.setDeviceId(l)}))).every(h=>h===!0)}catch(h){throw this.options.videoCaptureDefaults.deviceId=u,h}}else if(e==="audiooutput"){if(!U0()&&!this.options.expWebAudioMix||this.options.expWebAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(i=(s=this.options).audioOutput)!==null&&i!==void 0||(s.audioOutput={});const u=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=n,a=u!==l;try{this.options.expWebAudioMix?(o=this.audioContext)===null||o===void 0||o.setSinkId(n):yield Promise.all(Array.from(this.participants.values()).map(d=>d.setAudioOutput({deviceId:n})))}catch(d){throw this.options.audioOutput.deviceId=u,d}}return a&&c&&(this.localParticipant.activeDeviceMap.set(e,n),this.emit(ne.ActiveDeviceChanged,e,n)),c})}setupLocalParticipantEvents(){this.localParticipant.on(ae.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ae.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ae.TrackMuted,this.onLocalTrackMuted).on(ae.TrackUnmuted,this.onLocalTrackUnmuted).on(ae.LocalTrackPublished,this.onLocalTrackPublished).on(ae.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ae.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ae.MediaDevicesError,this.onMediaDevicesError).on(ae.AudioStreamAcquired,this.startAudio).on(ae.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.participants.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===nt.Connecting||this.state===nt.Reconnecting){const u=()=>{this.onTrackAdded(e,n,r),d()},d=()=>{this.off(ne.Reconnected,u),this.off(ne.Connected,u),this.off(ne.Disconnected,d)};this.once(ne.Reconnected,u),this.once(ne.Connected,u),this.once(ne.Disconnected,d);return}if(this.state===nt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=k9(n.id),o=i[0];let s=i[1],a=e.id;if(s&&s.startsWith("TR")&&(a=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=this.participants.get(o);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(e,a,n,r,l)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.bufferedEvents=[],this.state!==nt.Disconnected){this.regionUrl=void 0;try{this.participants.forEach(i=>{i.tracks.forEach(o=>{i.unpublishTrack(o.trackSid)})}),this.localParticipant.tracks.forEach(i=>{var o,s;i.track&&this.localParticipant.unpublishTrack(i.track,e),e&&((o=i.track)===null||o===void 0||o.detach(),(s=i.track)===null||s===void 0||s.stop())}),this.localParticipant.off(ae.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ae.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ae.TrackMuted,this.onLocalTrackMuted).off(ae.TrackUnmuted,this.onLocalTrackUnmuted).off(ae.LocalTrackPublished,this.onLocalTrackPublished).off(ae.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ae.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ae.MediaDevicesError,this.onMediaDevicesError).off(ae.AudioStreamAcquired,this.startAudio).off(ae.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Sr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(nt.Disconnected),this.emit(ne.Disconnected,n)}}}handleParticipantDisconnected(e,n){this.participants.delete(e),n&&(this.identityToSid.delete(n.identity),n.tracks.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(ne.ParticipantDisconnected,n))}acquireAudioContext(){var e,n;return G(this,void 0,void 0,function*(){if(typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?this.audioContext=this.options.expWebAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=KC())!==null&&e!==void 0?e:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.expWebAudioMix&&this.participants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(ne.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=Od.fromParticipantInfo(this.engine.client,n):i=new Od(this.engine.client,e,"",void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.expWebAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.participants.has(e))return this.participants.get(e);const r=this.createParticipant(e,n);return this.participants.set(e,r),this.identityToSid.set(n.identity,n.sid),this.emitWhenConnected(ne.ParticipantConnected,r),r.on(ae.TrackPublished,i=>{this.emitWhenConnected(ne.TrackPublished,i,r)}).on(ae.TrackSubscribed,(i,o)=>{i.kind===Q.Kind.Audio?(i.on(ye.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(ye.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===Q.Kind.Video&&(i.on(ye.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(ye.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ne.TrackSubscribed,i,o,r)}).on(ae.TrackUnpublished,i=>{this.emit(ne.TrackUnpublished,i,r)}).on(ae.TrackUnsubscribed,(i,o)=>{this.emit(ne.TrackUnsubscribed,i,o,r)}).on(ae.TrackSubscriptionFailed,i=>{this.emit(ne.TrackSubscriptionFailed,i,r)}).on(ae.TrackMuted,i=>{this.emitWhenConnected(ne.TrackMuted,i,r)}).on(ae.TrackUnmuted,i=>{this.emitWhenConnected(ne.TrackUnmuted,i,r)}).on(ae.ParticipantMetadataChanged,i=>{this.emitWhenConnected(ne.ParticipantMetadataChanged,i,r)}).on(ae.ParticipantNameChanged,i=>{this.emitWhenConnected(ne.ParticipantNameChanged,i,r)}).on(ae.ConnectionQualityChanged,i=>{this.emitWhenConnected(ne.ConnectionQualityChanged,i,r)}).on(ae.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(ne.ParticipantPermissionsChanged,i,r)}).on(ae.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(ne.TrackSubscriptionStatusChanged,i,o,r)}).on(ae.TrackSubscriptionFailed,(i,o)=>{this.emit(ne.TrackSubscriptionFailed,i,r,o)}).on(ae.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(ne.TrackSubscriptionPermissionChanged,i,o,r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.participants.values()).reduce((r,i)=>(r.push(...i.getTracks()),r),[]),n=this.localParticipant.getTracks();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.participants.values())for(const n of e.videoTracks.values())n.isSubscribed&&n instanceof eI&&n.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=kn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,ls.STATE_MISMATCH))):e=0},y6)}clearConnectionReconcile(){this.connectionReconcileInterval&&kn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(ne.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.state===nt.Connected?this.emit(e,...r):(this.state===nt.Reconnecting&&this.bufferedEvents.push([e,r]),!1)}simulateParticipants(e){var n,r;return G(this,void 0,void 0,function*(){const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new Wl({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Ue.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Vr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected),this.emit(ne.Connected),this.setAndEmitConnectionState(nt.Connected),i.video){const s=new _d(Q.Kind.Video,new vr({source:Xt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Un.AUDIO,name:"video-dummy"}),new Kr(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:eA(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(ae.LocalTrackPublished,s)}if(i.audio){const s=new _d(Q.Kind.Audio,new vr({source:Xt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Un.AUDIO}),new hr(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Am(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(ae.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let a=new Vr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:oc.ACTIVE,tracks:[],joinedAt:Ue.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(o.video){const l=eA(160*((r=o.aspectRatios[s%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new vr({source:Xt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Un.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}if(o.audio){const l=Am(),u=new vr({source:Xt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Un.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==ne.ActiveSpeakersChanged){const o=AP(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...r)}}function AP(t){return t.map(e=>{if(e)return Array.isArray(e)?AP(e):typeof e=="object"?"logContext"in e&&e.logContext:e})}var bi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(bi||(bi={}));class Zl extends ko.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=bi.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=e,this.token=n,this.name=this.constructor.name,this.room=new Ap(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(e){return G(this,void 0,void 0,function*(){if(this.status!==bi.IDLE)throw Error("check is running already");this.setStatus(bi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==bi.SKIPPED&&this.setStatus(this.isSuccess()?bi.SUCCESS:bi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(){return G(this,void 0,void 0,function*(){return this.room.state===nt.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return G(this,void 0,void 0,function*(){this.room&&this.room.state!==nt.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(bi.SKIPPED)}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function kP(t){var e,n;return G(this,void 0,void 0,function*(){t??(t={}),(e=t.audio)!==null&&e!==void 0||(t.audio=!0),(n=t.video)!==null&&n!==void 0||(t.video=!0);const r=cP(t,vP,yP),i=cg(r),o=navigator.mediaDevices.getUserMedia(i);t.audio&&(Qn.userMediaPromiseMap.set("audioinput",o),o.catch(()=>Qn.userMediaPromiseMap.delete("audioinput"))),t.video&&(Qn.userMediaPromiseMap.set("videoinput",o),o.catch(()=>Qn.userMediaPromiseMap.delete("videoinput")));const s=yield o;return s.getTracks().map(a=>{const c=a.kind==="audio";c?t.audio:t.video;let l;const u=c?i.audio:i.video;typeof u!="boolean"&&(l=u),l?l.deviceId=a.getSettings().deviceId:l={deviceId:a.getSettings().deviceId};const d=CP(a,l);return d.kind===Q.Kind.Video?d.source=Q.Source.Camera:d.kind===Q.Kind.Audio&&(d.source=Q.Source.Microphone),d.mediaStream=s,d})})}function C6(t){return G(this,void 0,void 0,function*(){return(yield kP({audio:!1,video:t}))[0]})}function I6(t){return G(this,void 0,void 0,function*(){return(yield kP({audio:t,video:!1}))[0]})}class S6 extends Zl{get description(){return"Can publish audio"}perform(){var e;return G(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield I6();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="audio"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class b6 extends Zl{get description(){return"Can publish video"}perform(){var e;return G(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield C6();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="video"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class w6 extends Zl{get description(){return"Resuming connection after interruption"}perform(){var e;return G(this,void 0,void 0,function*(){const n=yield this.connect();let r=!1,i=!1,o;const s=new Promise(c=>{setTimeout(c,5e3),o=c});n.on(ne.Reconnecting,()=>{r=!0}).on(ne.Reconnected,()=>{i=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const a=n.engine.client.onClose;if(a&&a(""),yield s,r){if(!i||n.state!==nt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class A6 extends Zl{get description(){return"Can connect via TURN"}perform(){var e,n;return G(this,void 0,void 0,function*(){const r=new YC,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,a=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(s=!0,a=!0):l.startsWith("turns:")&&(s=!0,a=!0,o=!0),l.startsWith("stun:")&&(a=!0);a?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class k6 extends Zl{get description(){return"Establishing WebRTC connection"}perform(){return G(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(ne.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,o)=>{if(i.candidate){const s=new RTCIceCandidate(i);let a="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(E6(s.address)?a+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(e=!0,a+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Xe.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function E6(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class T6 extends Zl{get description(){return"Connecting to signal connection via WebSocket"}perform(){var e,n,r;return G(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new YC;const o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===wl.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Iz extends ko.EventEmitter{constructor(e,n){super(),this.checkResults=new Map,this.url=e,this.token=n}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:bi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==bi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return G(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token),i=s=>{this.updateCheck(n,s)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(T6)})}checkWebRTC(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(k6)})}checkTURN(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(A6)})}checkReconnect(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(w6)})}checkPublishAudio(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(S6)})}checkPublishVideo(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(b6)})}}function R6(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=t instanceof El?t.mediaStreamTrack:t,i=r.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;Xe.debug("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&N6(s)&&(o={facingMode:s,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Xe.debug("Try to get facing mode from device label: (".concat(r.label,")"));const s=P6(r.label);s!==void 0&&(o=s)}return o}const vA=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),x6=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function P6(t){var e;const n=t.trim().toLowerCase();if(n!=="")return vA.has(n)?vA.get(n):(e=Array.from(x6.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function N6(t){return t===void 0||["user","environment","left","right"].includes(t)}const H0=Math.min,ol=Math.max,kp=Math.round,da=t=>({x:t,y:t}),_6={left:"right",right:"left",bottom:"top",top:"bottom"},O6={start:"end",end:"start"};function yA(t,e,n){return ol(t,H0(e,n))}function ug(t,e){return typeof t=="function"?t(e):t}function lc(t){return t.split("-")[0]}function dg(t){return t.split("-")[1]}function EP(t){return t==="x"?"y":"x"}function TP(t){return t==="y"?"height":"width"}function Tl(t){return["top","bottom"].includes(lc(t))?"y":"x"}function RP(t){return EP(Tl(t))}function M6(t,e,n){n===void 0&&(n=!1);const r=dg(t),i=RP(t),o=TP(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Ep(s)),[s,Ep(s)]}function D6(t){const e=Ep(t);return[z0(t),e,z0(e)]}function z0(t){return t.replace(/start|end/g,e=>O6[e])}function L6(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function B6(t,e,n,r){const i=dg(t);let o=L6(lc(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(z0)))),o}function Ep(t){return t.replace(/left|right|bottom|top/g,e=>_6[e])}function F6(t){return{top:0,right:0,bottom:0,left:0,...t}}function U6(t){return typeof t!="number"?F6(t):{top:t,right:t,bottom:t,left:t}}function Tp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function CA(t,e,n){let{reference:r,floating:i}=t;const o=Tl(e),s=RP(e),a=TP(s),c=lc(e),l=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(c){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(dg(e)){case"start":f[s]-=h*(n&&l?-1:1);break;case"end":f[s]+=h*(n&&l?-1:1);break}return f}const V6=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let l=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=CA(l,r,c),h=r,f={},p=0;for(let g=0;g<a.length;g++){const{name:C,fn:m}=a[g],{x:v,y:S,data:E,reset:w}=await m({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:l,platform:s,elements:{reference:t,floating:e}});u=v??u,d=S??d,f={...f,[C]:{...f[C],...E}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(l=w.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:u,y:d}=CA(l,h,c)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function xP(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=ug(e,t),p=U6(f),C=a[h?d==="floating"?"reference":"floating":d],m=Tp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,S=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(S))?await(o.getScale==null?void 0:o.getScale(S))||{x:1,y:1}:{x:1,y:1},w=Tp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:S,strategy:c}):v);return{top:(m.top-w.top+p.top)/E.y,bottom:(w.bottom-m.bottom+p.bottom)/E.y,left:(m.left-w.left+p.left)/E.x,right:(w.right-m.right+p.right)/E.x}}const G6=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...C}=ug(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const m=lc(i),v=Tl(a),S=lc(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(l.floating)),w=h||(S||!g?[Ep(a)]:D6(a)),A=p!=="none";!h&&A&&w.push(...B6(a,g,p,E));const x=[a,...w],T=await xP(e,C),_=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&_.push(T[m]),d){const Z=M6(i,s,E);_.push(T[Z[0]],T[Z[1]])}if(O=[...O,{placement:i,overflows:_}],!_.every(Z=>Z<=0)){var L,U;const Z=(((L=o.flip)==null?void 0:L.index)||0)+1,J=x[Z];if(J)return{data:{index:Z,overflows:O},reset:{placement:J}};let ee=(U=O.filter(re=>re.overflows[0]<=0).sort((re,X)=>re.overflows[1]-X.overflows[1])[0])==null?void 0:U.placement;if(!ee)switch(f){case"bestFit":{var z;const re=(z=O.filter(X=>{if(A){const Y=Tl(X.placement);return Y===v||Y==="y"}return!0}).map(X=>[X.placement,X.overflows.filter(Y=>Y>0).reduce((Y,oe)=>Y+oe,0)]).sort((X,Y)=>X[1]-Y[1])[0])==null?void 0:z[0];re&&(ee=re);break}case"initialPlacement":ee=a;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}};async function W6(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=lc(n),a=dg(n),c=Tl(n)==="y",l=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,d=ug(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),c?{x:f*u,y:h*l}:{x:h*l,y:f*u}}const j6=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,c=await W6(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},Z6=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:C=>{let{x:m,y:v}=C;return{x:m,y:v}}},...c}=ug(t,e),l={x:n,y:r},u=await xP(e,c),d=Tl(lc(i)),h=EP(d);let f=l[h],p=l[d];if(o){const C=h==="y"?"top":"left",m=h==="y"?"bottom":"right",v=f+u[C],S=f-u[m];f=yA(v,f,S)}if(s){const C=d==="y"?"top":"left",m=d==="y"?"bottom":"right",v=p+u[C],S=p-u[m];p=yA(v,p,S)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}};function Hl(t){return PP(t)?(t.nodeName||"").toLowerCase():"#document"}function Wr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Sa(t){var e;return(e=(PP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function PP(t){return t instanceof Node||t instanceof Wr(t).Node}function Bi(t){return t instanceof Element||t instanceof Wr(t).Element}function Co(t){return t instanceof HTMLElement||t instanceof Wr(t).HTMLElement}function IA(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Wr(t).ShadowRoot}function eh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Fi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function H6(t){return["table","td","th"].includes(Hl(t))}function hg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function tI(t){const e=nI(),n=Bi(t)?Fi(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function z6(t){let e=ha(t);for(;Co(e)&&!Rl(e);){if(tI(e))return e;if(hg(e))return null;e=ha(e)}return null}function nI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Rl(t){return["html","body","#document"].includes(Hl(t))}function Fi(t){return Wr(t).getComputedStyle(t)}function fg(t){return Bi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ha(t){if(Hl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||IA(t)&&t.host||Sa(t);return IA(e)?e.host:e}function NP(t){const e=ha(t);return Rl(e)?t.ownerDocument?t.ownerDocument.body:t.body:Co(e)&&eh(e)?e:NP(e)}function X0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=NP(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Wr(i);return o?e.concat(s,s.visualViewport||[],eh(i)?i:[],s.frameElement&&n?X0(s.frameElement):[]):e.concat(i,X0(i,[],n))}function _P(t){const e=Fi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Co(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=kp(n)!==o||kp(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function OP(t){return Bi(t)?t:t.contextElement}function sl(t){const e=OP(t);if(!Co(e))return da(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=_P(e);let s=(o?kp(n.width):n.width)/r,a=(o?kp(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const X6=da(0);function MP(t){const e=Wr(t);return!nI()||!e.visualViewport?X6:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function $6(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Wr(t)?!1:e}function Md(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=OP(t);let s=da(1);e&&(r?Bi(r)&&(s=sl(r)):s=sl(t));const a=$6(o,n,r)?MP(o):da(0);let c=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const h=Wr(o),f=r&&Bi(r)?Wr(r):r;let p=h,g=p.frameElement;for(;g&&r&&f!==p;){const C=sl(g),m=g.getBoundingClientRect(),v=Fi(g),S=m.left+(g.clientLeft+parseFloat(v.paddingLeft))*C.x,E=m.top+(g.clientTop+parseFloat(v.paddingTop))*C.y;c*=C.x,l*=C.y,u*=C.x,d*=C.y,c+=S,l+=E,p=Wr(g),g=p.frameElement}}return Tp({width:u,height:d,x:c,y:l})}function K6(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=Sa(r),a=e?hg(e.floating):!1;if(r===s||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=da(1);const u=da(0),d=Co(r);if((d||!d&&!o)&&((Hl(r)!=="body"||eh(s))&&(c=fg(r)),Co(r))){const h=Md(r);l=sl(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function J6(t){return Array.from(t.getClientRects())}function DP(t){return Md(Sa(t)).left+fg(t).scrollLeft}function Y6(t){const e=Sa(t),n=fg(t),r=t.ownerDocument.body,i=ol(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=ol(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+DP(t);const a=-n.scrollTop;return Fi(r).direction==="rtl"&&(s+=ol(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function Q6(t,e){const n=Wr(t),r=Sa(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;const l=nI();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a,y:c}}function q6(t,e){const n=Md(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Co(t)?sl(t):da(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,c=i*o.x,l=r*o.y;return{width:s,height:a,x:c,y:l}}function SA(t,e,n){let r;if(e==="viewport")r=Q6(t,n);else if(e==="document")r=Y6(Sa(t));else if(Bi(e))r=q6(e,n);else{const i=MP(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return Tp(r)}function LP(t,e){const n=ha(t);return n===e||!Bi(n)||Rl(n)?!1:Fi(n).position==="fixed"||LP(n,e)}function ej(t,e){const n=e.get(t);if(n)return n;let r=X0(t,[],!1).filter(a=>Bi(a)&&Hl(a)!=="body"),i=null;const o=Fi(t).position==="fixed";let s=o?ha(t):t;for(;Bi(s)&&!Rl(s);){const a=Fi(s),c=tI(s);!c&&a.position==="fixed"&&(i=null),(o?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||eh(s)&&!c&&LP(t,s))?r=r.filter(u=>u!==s):i=a,s=ha(s)}return e.set(t,r),r}function tj(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?hg(e)?[]:ej(e,this._c):[].concat(n),r],a=s[0],c=s.reduce((l,u)=>{const d=SA(e,u,i);return l.top=ol(d.top,l.top),l.right=H0(d.right,l.right),l.bottom=H0(d.bottom,l.bottom),l.left=ol(d.left,l.left),l},SA(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function nj(t){const{width:e,height:n}=_P(t);return{width:e,height:n}}function rj(t,e,n){const r=Co(e),i=Sa(e),o=n==="fixed",s=Md(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const c=da(0);if(r||!r&&!o)if((Hl(e)!=="body"||eh(i))&&(a=fg(e)),r){const d=Md(e,!0,o,e);c.x=d.x+e.clientLeft,c.y=d.y+e.clientTop}else i&&(c.x=DP(i));const l=s.left+a.scrollLeft-c.x,u=s.top+a.scrollTop-c.y;return{x:l,y:u,width:s.width,height:s.height}}function xm(t){return Fi(t).position==="static"}function bA(t,e){return!Co(t)||Fi(t).position==="fixed"?null:e?e(t):t.offsetParent}function BP(t,e){const n=Wr(t);if(hg(t))return n;if(!Co(t)){let i=ha(t);for(;i&&!Rl(i);){if(Bi(i)&&!xm(i))return i;i=ha(i)}return n}let r=bA(t,e);for(;r&&H6(r)&&xm(r);)r=bA(r,e);return r&&Rl(r)&&xm(r)&&!tI(r)?n:r||z6(t)||n}const ij=async function(t){const e=this.getOffsetParent||BP,n=this.getDimensions,r=await n(t.floating);return{reference:rj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function oj(t){return Fi(t).direction==="rtl"}const sj={convertOffsetParentRelativeRectToViewportRelativeRect:K6,getDocumentElement:Sa,getClippingRect:tj,getOffsetParent:BP,getElementRects:ij,getClientRects:J6,getDimensions:nj,getScale:sl,isElement:Bi,isRTL:oj},aj=j6,cj=Z6,lj=G6,uj=(t,e,n)=>{const r=new Map,i={platform:sj,...n},o={...i.platform,_c:r};return V6(t,e,{...i,platform:o})};var FP={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(DN,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(g,C){var m=g[C];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?c:console[g]!==void 0?a(console,g):console.log!==void 0?a(console,"log"):e}function u(){for(var g=this.getLevel(),C=0;C<i.length;C++){var m=i[C];this[m]=C<g?e:this.methodFactory(m,g,this.name)}if(this.log=this.debug,typeof console===n&&g<this.levels.SILENT)return"No console available for logging"}function d(g){return function(){typeof console!==n&&(u.call(this),this[g].apply(this,arguments))}}function h(g,C,m){return l(g)||d.apply(this,arguments)}function f(g,C){var m=this,v,S,E,w="loglevel";typeof g=="string"?w+=":"+g:typeof g=="symbol"&&(w=void 0);function A(L){var U=(i[L]||"silent").toUpperCase();if(!(typeof window===n||!w)){try{window.localStorage[w]=U;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+U+";"}catch{}}}function x(){var L;if(!(typeof window===n||!w)){try{L=window.localStorage[w]}catch{}if(typeof L===n)try{var U=window.document.cookie,z=encodeURIComponent(w),Z=U.indexOf(z+"=");Z!==-1&&(L=/^([^;]+)/.exec(U.slice(Z+z.length+1))[1])}catch{}return m.levels[L]===void 0&&(L=void 0),L}}function T(){if(!(typeof window===n||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(L){var U=L;if(typeof U=="string"&&m.levels[U.toUpperCase()]!==void 0&&(U=m.levels[U.toUpperCase()]),typeof U=="number"&&U>=0&&U<=m.levels.SILENT)return U;throw new TypeError("log.setLevel() called with invalid level: "+L)}m.name=g,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=C||h,m.getLevel=function(){return E??S??v},m.setLevel=function(L,U){return E=_(L),U!==!1&&A(E),u.call(m)},m.setDefaultLevel=function(L){S=_(L),x()||m.setLevel(L,!1)},m.resetLevel=function(){E=null,T(),u.call(m)},m.enableAll=function(L){m.setLevel(m.levels.TRACE,L)},m.disableAll=function(L){m.setLevel(m.levels.SILENT,L)},m.rebuild=function(){if(s!==m&&(v=_(s.getLevel())),u.call(m),s===m)for(var L in o)o[L].rebuild()},v=_(s?s.getLevel():"WARN");var O=x();O!=null&&(E=_(O)),u.call(m)}s=new f,s.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var m=o[C];return m||(m=o[C]=new f(C,s.methodFactory)),m};var p=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=p),s},s.getLoggers=function(){return o},s.default=s,s})})(FP);var dj=FP.exports;const hj=Fd(dj);function un(t){return typeof t=="function"}function UP(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Pm=UP(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function $0(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var pg=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Sl(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(un(u))try{u()}catch(g){o=g instanceof Pm?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=Sl(d),f=h.next();!f.done;f=h.next()){var p=f.value;try{wA(p)}catch(g){o=o??[],g instanceof Pm?o=m0(m0([],g0(o)),g0(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new Pm(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)wA(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&$0(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&$0(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),VP=pg.EMPTY;function GP(t){return t instanceof pg||t&&"closed"in t&&un(t.remove)&&un(t.add)&&un(t.unsubscribe)}function wA(t){un(t)?t():t.unsubscribe()}var WP={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},jP={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,m0([t,e],g0(n)))},clearTimeout:function(t){var e=jP.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function ZP(t){jP.setTimeout(function(){throw t})}function K0(){}function kf(t){t()}var rI=function(t){Gl(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,GP(n)&&n.add(r)):r.destination=mj,r}return e.create=function(n,r,i){return new J0(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(pg),fj=Function.prototype.bind;function Nm(t,e){return fj.call(t,e)}var pj=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Lh(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Lh(r)}else Lh(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Lh(n)}},t}(),J0=function(t){Gl(e,t);function e(n,r,i){var o=t.call(this)||this,s;if(un(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&WP.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&Nm(n.next,a),error:n.error&&Nm(n.error,a),complete:n.complete&&Nm(n.complete,a)}):s=n}return o.destination=new pj(s),o}return e}(rI);function Lh(t){ZP(t)}function gj(t){throw t}var mj={closed:!0,next:K0,error:gj,complete:K0},iI=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function HP(t){return t}function vj(t){return t.length===0?HP:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Nn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=Cj(e)?e:new J0(e,n,r);return kf(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=AA(n),new n(function(i,o){var s=new J0({next:function(a){try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[iI]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return vj(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=AA(e),new e(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function AA(t){var e;return(e=t??WP.Promise)!==null&&e!==void 0?e:Promise}function yj(t){return t&&un(t.next)&&un(t.error)&&un(t.complete)}function Cj(t){return t&&t instanceof rI||yj(t)&&GP(t)}function Ij(t){return un(t==null?void 0:t.lift)}function ws(t){return function(e){if(Ij(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function uc(t,e,n,r,i){return new Sj(t,e,n,r,i)}var Sj=function(t){Gl(e,t);function e(n,r,i,o,s,a){var c=t.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(rI),bj=UP(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),fa=function(t){Gl(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new kA(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new bj},e.prototype.next=function(n){var r=this;kf(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Sl(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;kf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;kf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?VP:(this.currentObservers=null,a.push(n),new pg(function(){r.currentObservers=null,$0(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},e.prototype.asObservable=function(){var n=new Nn;return n.source=this,n},e.create=function(n,r){return new kA(n,r)},e}(Nn),kA=function(t){Gl(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:VP},e}(fa),zP=function(t){Gl(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(fa);function wj(t){return t&&un(t.schedule)}function Aj(t){return t[t.length-1]}function XP(t){return wj(Aj(t))?t.pop():void 0}var $P=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function KP(t){return un(t==null?void 0:t.then)}function JP(t){return un(t[iI])}function YP(t){return Symbol.asyncIterator&&un(t==null?void 0:t[Symbol.asyncIterator])}function QP(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function kj(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var qP=kj();function eN(t){return un(t==null?void 0:t[qP])}function tN(t){return EV(this,arguments,function(){var n,r,i,o;return NR(this,function(s){switch(s.label){case 0:n=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Qc(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Qc(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Qc(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function nN(t){return un(t==null?void 0:t.getReader)}function zl(t){if(t instanceof Nn)return t;if(t!=null){if(JP(t))return Ej(t);if($P(t))return Tj(t);if(KP(t))return Rj(t);if(YP(t))return rN(t);if(eN(t))return xj(t);if(nN(t))return Pj(t)}throw QP(t)}function Ej(t){return new Nn(function(e){var n=t[iI]();if(un(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Tj(t){return new Nn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function Rj(t){return new Nn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,ZP)})}function xj(t){return new Nn(function(e){var n,r;try{for(var i=Sl(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function rN(t){return new Nn(function(e){Nj(t,e).catch(function(n){return e.error(n)})})}function Pj(t){return rN(tN(t))}function Nj(t,e){var n,r,i,o;return kV(this,void 0,void 0,function(){var s,a;return NR(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=TV(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Ja(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function iN(t,e){return e===void 0&&(e=0),ws(function(n,r){n.subscribe(uc(r,function(i){return Ja(r,t,function(){return r.next(i)},e)},function(){return Ja(r,t,function(){return r.complete()},e)},function(i){return Ja(r,t,function(){return r.error(i)},e)}))})}function oN(t,e){return e===void 0&&(e=0),ws(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function _j(t,e){return zl(t).pipe(oN(e),iN(e))}function Oj(t,e){return zl(t).pipe(oN(e),iN(e))}function Mj(t,e){return new Nn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function Dj(t,e){return new Nn(function(n){var r;return Ja(n,e,function(){r=t[qP](),Ja(n,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return un(r==null?void 0:r.return)&&r.return()}})}function sN(t,e){if(!t)throw new Error("Iterable cannot be null");return new Nn(function(n){Ja(n,e,function(){var r=t[Symbol.asyncIterator]();Ja(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function Lj(t,e){return sN(tN(t),e)}function Bj(t,e){if(t!=null){if(JP(t))return _j(t,e);if($P(t))return Mj(t,e);if(KP(t))return Oj(t,e);if(YP(t))return sN(t,e);if(eN(t))return Dj(t,e);if(nN(t))return Lj(t,e)}throw QP(t)}function Fj(t,e){return e?Bj(t,e):zl(t)}function lr(t,e){return ws(function(n,r){var i=0;n.subscribe(uc(r,function(o){r.next(t.call(e,o,i++))}))})}function Uj(t,e,n,r,i,o,s,a){var c=[],l=0,u=0,d=!1,h=function(){d&&!c.length&&!l&&e.complete()},f=function(g){return l<r?p(g):c.push(g)},p=function(g){l++;var C=!1;zl(n(g,u++)).subscribe(uc(e,function(m){e.next(m)},function(){C=!0},void 0,function(){if(C)try{l--;for(var m=function(){var v=c.shift();s||p(v)};c.length&&l<r;)m();h()}catch(v){e.error(v)}}))};return t.subscribe(uc(e,f,function(){d=!0,h()})),function(){}}function aN(t,e,n){return n===void 0&&(n=1/0),un(e)?aN(function(r,i){return lr(function(o,s){return e(r,o,i,s)})(zl(t(r,i)))},n):(typeof e=="number"&&(n=e),ws(function(r,i){return Uj(r,i,t,n)}))}function Vj(t){return aN(HP,t)}function Gj(){return Vj(1)}function Y0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Gj()(Fj(t,XP(t)))}function cN(t,e){return ws(function(n,r){var i=0;n.subscribe(uc(r,function(o){return t.call(e,o,i++)&&r.next(o)}))})}function Wj(t,e,n,r,i){return function(o,s){var a=n,c=e,l=0;o.subscribe(uc(s,function(u){var d=l++;c=a?t(c,u,d):(a=!0,u),s.next(c)},i))}}function jj(t){return ws(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function Zj(t,e){return ws(Wj(t,e,arguments.length>=2,!0))}function Vi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=XP(t);return ws(function(r,i){(n?Y0(t,r,n):Y0(t,r)).subscribe(i)})}function EA(t){return ws(function(e,n){zl(t).subscribe(uc(n,function(){return n.complete()},K0)),!n.closed&&e.subscribe(n)})}var Hj=Object.defineProperty,zj=Object.defineProperties,Xj=Object.getOwnPropertyDescriptors,Rp=Object.getOwnPropertySymbols,lN=Object.prototype.hasOwnProperty,uN=Object.prototype.propertyIsEnumerable,TA=(t,e,n)=>e in t?Hj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Q0=(t,e)=>{for(var n in e||(e={}))lN.call(e,n)&&TA(t,n,e[n]);if(Rp)for(var n of Rp(e))uN.call(e,n)&&TA(t,n,e[n]);return t},$j=(t,e)=>zj(t,Xj(e)),Kj=(t,e)=>{var n={};for(var r in t)lN.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Rp)for(var r of Rp(t))e.indexOf(r)<0&&uN.call(t,r)&&(n[r]=t[r]);return n},As=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())}),dN="lk";function oI(t){return typeof t>"u"?!1:Jj(t)||Yj(t)}function Jj(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function Yj(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function Qj(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function hN(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(Qj(t))return`${t.participant.identity}_${t.source}_placeholder`;if(oI(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function qj(t){return t instanceof Z0}function eZ(t,e){return As(this,null,function*(){const{x:n,y:r}=yield uj(t,e,{placement:"top",middleware:[aj(6),lj(),cj({padding:5})]});return{x:n,y:r}})}function tZ(t,e){return!t.contains(e.target)}var nZ=[ne.ConnectionStateChanged,ne.RoomMetadataChanged,ne.ActiveSpeakersChanged,ne.ConnectionQualityChanged,ne.ParticipantConnected,ne.ParticipantDisconnected,ne.ParticipantPermissionsChanged,ne.ParticipantMetadataChanged,ne.TrackMuted,ne.TrackUnmuted,ne.TrackPublished,ne.TrackUnpublished,ne.TrackStreamStateChanged,ne.TrackSubscriptionFailed,ne.TrackSubscriptionPermissionChanged,ne.TrackSubscriptionStatusChanged],rZ=[...nZ,ne.LocalTrackPublished,ne.LocalTrackUnpublished],iZ=[ae.ConnectionQualityChanged,ae.IsSpeakingChanged,ae.ParticipantMetadataChanged,ae.ParticipantPermissionsChanged,ae.TrackMuted,ae.TrackUnmuted,ae.TrackPublished,ae.TrackUnpublished,ae.TrackStreamStateChanged,ae.TrackSubscriptionFailed,ae.TrackSubscriptionPermissionChanged,ae.TrackSubscriptionStatusChanged];[...iZ,ae.LocalTrackPublished,ae.LocalTrackUnpublished];var at=hj.getLogger("lk-components-js");at.setDefaultLevel("WARN");function oZ(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var sZ=[],aZ={showChat:!1,unreadMessages:0};function sI(t,...e){return new Nn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(Vi(t))}function aI(t,e){return new Nn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function cZ(t){return aI(t,ne.ConnectionStateChanged).pipe(lr(([e])=>e),Vi(t.state))}function lZ(t,e,n=!0){var r;const i=()=>As(this,null,function*(){try{const a=yield Ap.getLocalDevices(t,n);o.next(a)}catch(a){e==null||e(a)}}),o=new fa,s=o.pipe(jj(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return Y0(Ap.getLocalDevices(t,n).catch(a=>e==null?void 0:e(a)),s)}function uZ(t){return aI(t,ne.DataReceived)}function dZ(t){return sI(t,ne.AudioPlaybackStatusChanged).pipe(lr(n=>({canPlayAudio:n.canPlaybackAudio})))}function hZ(t){return sI(t,ne.VideoPlaybackStatusChanged).pipe(lr(n=>({canPlayVideo:n.canPlaybackVideo})))}function fZ(t,e){return aI(t,ne.ActiveDeviceChanged).pipe(cN(([n])=>n===e),lr(([n,r])=>(at.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),Vi(t.getActiveDevice(e)))}function si(t){return`${dN}-${t}`}function pZ(t){const e=q0(t),n=lI(t.participant).pipe(lr(()=>q0(t)),Vi(e));return{className:si(t.source===Q.Source.Camera||t.source===Q.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function q0(t){if(oI(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTracks().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackByName(n);if(e)return r.getTrack(e);throw new Error("At least one of source and name needs to be defined")}}function cI(t,...e){return new Nn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(Vi(t))}function lI(t){return cI(t,ae.TrackMuted,ae.TrackUnmuted,ae.ParticipantPermissionsChanged,ae.TrackPublished,ae.TrackUnpublished,ae.LocalTrackPublished,ae.LocalTrackUnpublished,ae.MediaDevicesError,ae.TrackSubscriptionStatusChanged).pipe(lr(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:o}=n,s=n.getTrack(Q.Source.Microphone),a=n.getTrack(Q.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:o,cameraTrack:a,microphoneTrack:s,participant:n}}))}function gZ(t){return cI(t,ae.ParticipantMetadataChanged).pipe(lr(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),Vi({name:t.name,identity:t.identity,metadata:t.metadata}))}function mZ(t){return uI(t,ae.ConnectionQualityChanged).pipe(lr(([n])=>n),Vi(t.connectionQuality))}function uI(t,e){return new Nn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function fN(t){var e,n,r,i;return cI(t.participant,ae.TrackMuted,ae.TrackUnmuted,ae.TrackSubscribed,ae.TrackUnsubscribed,ae.LocalTrackPublished,ae.LocalTrackUnpublished).pipe(lr(o=>{var s,a;const c=(s=t.publication)!=null?s:o.getTrack(t.source);return(a=c==null?void 0:c.isMuted)!=null?a:!0}),Vi((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrack(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function vZ(t){return uI(t,ae.IsSpeakingChanged).pipe(lr(([e])=>e))}function yZ(t,e={}){var n;let r;const i=new Nn(c=>(r=c,()=>a.unsubscribe())).pipe(Vi(Array.from(t.participants.values()))),o=(n=e.additionalRoomEvents)!=null?n:rZ,s=Array.from(new Set([ne.ParticipantConnected,ne.ParticipantDisconnected,ne.ConnectionStateChanged,...o])),a=sI(t,...s).subscribe(c=>r==null?void 0:r.next(Array.from(c.participants.values())));return t.participants.size>0&&(r==null||r.next(Array.from(t.participants.values()))),i}function CZ(t){return uI(t,ae.ParticipantPermissionsChanged).pipe(lr(()=>t.permissions),Vi(t.permissions))}function IZ(t,e,n){const{localParticipant:r}=e,i=(l,u)=>{let d=!1;switch(l){case Q.Source.Camera:d=u.isCameraEnabled;break;case Q.Source.Microphone:d=u.isMicrophoneEnabled;break;case Q.Source.ScreenShare:d=u.isScreenShareEnabled;break}return d},o=lI(r).pipe(lr(l=>i(t,l.participant)),Vi(i(t,r))),s=new fa,a=(l,u)=>As(this,null,function*(){try{switch(u??(u=n),s.next(!0),t){case Q.Source.Camera:yield r.setCameraEnabled(l??!r.isCameraEnabled,u);break;case Q.Source.Microphone:yield r.setMicrophoneEnabled(l??!r.isMicrophoneEnabled,u);break;case Q.Source.ScreenShare:yield r.setScreenShareEnabled(l??!r.isScreenShareEnabled,u);break;default:break}}finally{s.next(!1)}});return{className:si("button"),toggle:a,enabledObserver:o,pendingObserver:s.asObservable()}}function SZ(){let t=!1;const e=new fa,n=new fa,r=o=>{n.next(!0),t=o??!t,e.next(t),n.next(!1)};return{className:si("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function bZ(t,e,n){const r=new zP(void 0),i=e?fZ(e,t):r.asObservable(),o=(a,...c)=>As(this,[a,...c],function*(l,u={}){var d,h,f;if(e){at.debug(`Switching active device of kind "${t}" with id ${l}.`),yield e.switchActiveDevice(t,l,u.exact);const p=(d=e.getActiveDevice(t))!=null?d:l;p!==l&&l!=="default"&&at.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${p}) instead.`);let g;t==="audioinput"?g=(h=e.localParticipant.getTrack(Q.Source.Microphone))==null?void 0:h.track:t==="videoinput"&&(g=(f=e.localParticipant.getTrack(Q.Source.Camera))==null?void 0:f.track);const C=l==="default"&&!g||l==="default"&&(g==null?void 0:g.mediaStreamTrack.label.startsWith("Default"));r.next(C?l:p)}else if(n){yield n.setDeviceId(u.exact?{exact:l}:l);const p=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:p)}else r.value!==l&&(at.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:si("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}}function wZ(t){const e=r=>{t.disconnect(r)};return{className:si("disconnect-button"),disconnect:e}}function AZ(t){const e=si("connection-quality"),n=mZ(t);return{className:e,connectionQualityObserver:n}}function kZ(t){let e="track-muted-indicator-camera";switch(t.source){case Q.Source.Camera:e="track-muted-indicator-camera";break;case Q.Source.Microphone:e="track-muted-indicator-microphone";break}const n=si(e),r=fN(t);return{className:n,mediaMutedObserver:r}}function EZ(t){return{className:"lk-participant-name",infoObserver:gZ(t)}}function TZ(){return{className:si("participant-tile")}}var RZ={CHAT:"lk-chat-topic"};function pN(t,e,n){return As(this,arguments,function*(r,i,o,s={}){const{kind:a,destination:c}=s;yield r.publishData(i,a??on.RELIABLE,{destination:c,topic:o})})}function xZ(t,e,n){const r=uZ(t).pipe(cN(([,,,a])=>e===void 0||a===e),lr(([a,c,,l])=>({payload:a,topic:l,from:c})));let i;const o=new Nn(a=>{i=a});return{messageObservable:r,isSendingObservable:o,send:(a,...c)=>As(this,[a,...c],function*(l,u={}){i.next(!0);try{yield pN(t.localParticipant,l,e,u)}finally{i.next(!1)}})}}var PZ=new TextEncoder,NZ=new TextDecoder,Bh=new Map,_Z=t=>PZ.encode(JSON.stringify({message:t.message,timestamp:t.timestamp})),OZ=t=>JSON.parse(NZ.decode(t));function MZ(t,e){var n,r;const i=new fa,{messageDecoder:o,messageEncoder:s,channelTopic:a}=e??{},c=a??RZ.CHAT;let l=!1;Bh.has(t)||(l=!0);const u=(n=Bh.get(t))!=null?n:new Map,d=(r=u.get(c))!=null?r:new fa;if(u.set(c,d),Bh.set(t,u),l){const{messageObservable:v}=xZ(t,c);v.pipe(EA(i)).subscribe(d)}const h=o??OZ,f=d.pipe(lr(v=>{const S=h(v.payload);return $j(Q0({},S),{from:v.from})}),Zj((v,S)=>[...v,S],[]),EA(i)),p=new zP(!1),g=s??_Z,C=v=>As(this,null,function*(){const S=Date.now(),E=g({message:v,timestamp:S});p.next(!0);try{yield pN(t.localParticipant,E,c,{kind:on.RELIABLE}),d.next({payload:E,topic:c,from:t.localParticipant})}finally{p.next(!1)}});function m(){i.next(),i.complete(),Bh.clear()}return t.once(ne.Disconnected,m),{messageObservable:f,isSendingObservable:p,send:C}}function DZ(){const t=n=>As(this,null,function*(){at.info("Start Audio for room: ",n),yield n.startAudio()});return{className:si("start-audio-button"),roomAudioPlaybackAllowedObservable:dZ,handleStartAudioPlayback:t}}function LZ(){const t=n=>As(this,null,function*(){at.info("Start Video for room: ",n),yield n.startVideo()});return{className:si("start-audio-button"),roomVideoPlaybackAllowedObservable:hZ,handleStartVideoPlayback:t}}function BZ(){return{className:[si("button"),si("chat-toggle")].join(" ")}}function FZ(){return{className:"lk-room-container"}}function UZ(t,e){if(typeof localStorage>"u"){at.error("Local storage is not available.");return}try{localStorage.setItem(t,JSON.stringify(e))}catch(n){at.error(`Error setting item to local storage: ${n}`)}}function VZ(t){if(typeof localStorage>"u"){at.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){at.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){at.error(`Error getting item from local storage: ${e}`);return}}function GZ(t){return{load:()=>VZ(t),save:e=>UZ(t,e)}}var WZ=`${dN}-user-choices`,ka={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:"",e2ee:!1,sharedPassphrase:""},{load:jZ,save:ZZ}=GZ(WZ);function HZ(t,e=!1){if(e===!0)return;const n=t,r=Kj(n,["e2ee","sharedPassphrase"]);ZZ(r)}function zZ(t,e=!1){var n,r,i,o,s,a,c;const l={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:ka.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:ka.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:ka.videoDeviceId,audioDeviceId:(o=t==null?void 0:t.audioDeviceId)!=null?o:ka.audioDeviceId,username:(s=t==null?void 0:t.username)!=null?s:ka.username,e2ee:(a=t==null?void 0:t.e2ee)!=null?a:ka.e2ee,sharedPassphrase:(c=t==null?void 0:t.sharedPassphrase)!=null?c:ka.sharedPassphrase};if(e)return l;{const u=jZ();return Q0(Q0({},l),u??{})}}function gN(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=gN(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function XZ(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=gN(t))&&(r&&(r+=" "),r+=e);return r}var $Z=Object.defineProperty,KZ=Object.defineProperties,JZ=Object.getOwnPropertyDescriptors,xp=Object.getOwnPropertySymbols,mN=Object.prototype.hasOwnProperty,vN=Object.prototype.propertyIsEnumerable,RA=(t,e,n)=>e in t?$Z(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Me=(t,e)=>{for(var n in e||(e={}))mN.call(e,n)&&RA(t,n,e[n]);if(xp)for(var n of xp(e))vN.call(e,n)&&RA(t,n,e[n]);return t},Gn=(t,e)=>KZ(t,JZ(e)),_n=(t,e)=>{var n={};for(var r in t)mN.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&xp)for(var r of xp(t))e.indexOf(r)<0&&vN.call(t,r)&&(n[r]=t[r]);return n},yN=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});function Hr(t,e){const[n,r]=b.useState(e);return b.useEffect(()=>{if(typeof window>"u"||!t)return;const i=t.subscribe(r);return()=>i.unsubscribe()},[t]),n}function YZ(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=b.useState(e(t));function i(){r(e(t))}return b.useEffect(()=>{const o=window.matchMedia(t);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[t]),n}function QZ(t,e){if(e.msg==="show_chat")return Gn(Me({},t),{showChat:!0,unreadMessages:0});if(e.msg==="hide_chat")return Gn(Me({},t),{showChat:!1});if(e.msg==="toggle_chat"){const n=Gn(Me({},t),{showChat:!t.showChat});return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?Gn(Me({},t),{unreadMessages:e.count}):Me({},t)}function qZ(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:Me({},t)}var dI=b.createContext(void 0);function e8(){const t=b.useContext(dI);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function t8(t){const[e,n]=b.useReducer(qZ,sZ),[r,i]=b.useReducer(QZ,aZ);return t??{pin:{dispatch:n,state:e},widget:{dispatch:i,state:r}}}function CN(){return b.useContext(dI)}var n8=b.createContext(void 0);function th(){return b.useContext(n8)}var hI=b.createContext(void 0);function gg(){return b.useContext(hI)}function vc(t){var e;const n=gg(),r=th(),i=(e=t??n)!=null?e:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var fI=b.createContext(void 0);function mg(){const t=b.useContext(fI);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function vg(){return b.useContext(fI)}function nh(t){const e=vg(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var r8=b.createContext(void 0);function i8(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}function ba(...t){const e=Me({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const o=e[i],s=r[i];typeof o=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=i8(o,s):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?e[i]=XZ(o,s):e[i]=s!==void 0?s:o}}return e}function o8(t={}){const e=vc(t.participant),{className:n,connectionQualityObserver:r}=b.useMemo(()=>AZ(e),[e]),i=Hr(r,Qr.Unknown);return{className:n,quality:i}}function s8(t){const e=nh(t),n=b.useMemo(()=>cZ(e),[e]);return Hr(n,e.state)}function a8(t){const e=mg(),n=s8(e);return{buttonProps:b.useMemo(()=>{const{className:i,disconnect:o}=wZ(e);return ba(t,{className:i,onClick:()=>{var a;return o((a=t.stopTracks)!=null?a:!0)},disabled:n===nt.Disconnected})},[e,t,n])}}function c8(t){if(t.publication instanceof _d){const e=t.publication.track;if(e){const{facingMode:n}=R6(e);return n}}return"undefined"}function xA(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,o=vc(i),s=typeof t=="string"?{participant:o,source:t}:t,[a,c]=b.useState(!!((n=s.publication)!=null&&n.isMuted||(r=o.getTrack(s.source))!=null&&r.isMuted));return b.useEffect(()=>{const l=fN(s).subscribe(c);return()=>l.unsubscribe()},[hN(s)]),a}function l8(t){const e=vc(t),n=b.useMemo(()=>vZ(e),[e]);return Hr(n,e.isSpeaking)}var u8={connect:!0,audio:!1,video:!1};function d8(t){const e=Me(Me({},u8),t),{token:n,serverUrl:r,options:i,room:o,connectOptions:s,connect:a,audio:c,video:l,screen:u,onConnected:d,onDisconnected:h,onError:f,onMediaDeviceFailure:p,onEncryptionError:g,simulateParticipants:C}=e,m=_n(e,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&o&&at.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,S]=b.useState();b.useEffect(()=>{S(o??new Ap(i))},[o]);const E=b.useMemo(()=>{const{className:w}=FZ();return ba(m,{className:w})},[m]);return b.useEffect(()=>{if(!v)return;const w=()=>{const T=v.localParticipant;at.debug("trying to publish local tracks"),Promise.all([T.setMicrophoneEnabled(!!c,typeof c!="boolean"?c:void 0),T.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),T.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(_=>{at.warn(_),f==null||f(_)})},A=T=>{const _=Pd.getFailure(T);p==null||p(_)},x=T=>{g==null||g(T)};return v.on(ne.SignalConnected,w).on(ne.MediaDevicesError,A).on(ne.EncryptionError,x),()=>{v.off(ne.SignalConnected,w).off(ne.MediaDevicesError,A).off(ne.EncryptionError,x)}},[v,c,l,u,f,g,p]),b.useEffect(()=>{if(v){if(C){v.simulateParticipants({participants:{count:C},publish:{audio:!0,useRealTracks:!0}});return}if(!n){at.debug("no token yet");return}if(!r){at.warn("no livekit url provided"),f==null||f(Error("no livekit url provided"));return}a?(at.debug("connecting"),v.connect(r,n,s).catch(w=>{at.warn(w),f==null||f(w)})):(at.debug("disconnecting because connect is false"),v.disconnect())}},[a,n,JSON.stringify(s),v,f,r,C]),b.useEffect(()=>{if(!v)return;const w=A=>{switch(A){case nt.Disconnected:h&&h();break;case nt.Connected:d&&d();break}};return v.on(ne.ConnectionStateChanged,w),()=>{v.off(ne.ConnectionStateChanged,w)}},[n,d,h,v]),b.useEffect(()=>{if(v)return()=>{at.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:E}}function h8(t={}){const e=nh(t.room),[n,r]=b.useState(e.localParticipant),[i,o]=b.useState(n.isMicrophoneEnabled),[s,a]=b.useState(n.isMicrophoneEnabled),[c,l]=b.useState(n.lastMicrophoneError),[u,d]=b.useState(n.lastCameraError),[h,f]=b.useState(n.isMicrophoneEnabled),[p,g]=b.useState(void 0),[C,m]=b.useState(void 0),v=S=>{a(S.isCameraEnabled),o(S.isMicrophoneEnabled),f(S.isScreenShareEnabled),m(S.cameraTrack),g(S.microphoneTrack),l(S.participant.lastMicrophoneError),d(S.participant.lastCameraError),r(S.participant)};return b.useEffect(()=>{const S=lI(n).subscribe(v);return()=>S.unsubscribe()},[n]),{isMicrophoneEnabled:i,isScreenShareEnabled:h,isCameraEnabled:s,microphoneTrack:p,cameraTrack:C,lastMicrophoneError:c,lastCameraError:u,localParticipant:n}}function f8(){const t=mg(),e=b.useMemo(()=>CZ(t.localParticipant),[t]);return Hr(e,t.localParticipant.permissions)}function p8({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const o=vg(),s=b.useMemo(()=>lZ(t,i,r),[t,r,i]),a=Hr(s,[]),[c,l]=b.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:h}=b.useMemo(()=>bZ(t,e??o,n),[t,e,o,n]);return b.useEffect(()=>{const f=d.subscribe(p=>{at.info("setCurrentDeviceId",p),p&&l(p)});return()=>{f==null||f.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:c,setActiveMediaDevice:h}}function g8(t){return t!==void 0}function Xl(...t){return ba(...t.filter(g8))}function IN(t,e,n){return b.Children.map(t,r=>b.isValidElement(r)&&b.Children.only(t)?b.cloneElement(r,Gn(Me({},e),{key:n})):r)}function SN(t,e={}){var n;const[r,i]=b.useState(q0(t)),[o,s]=b.useState(r==null?void 0:r.isMuted),[a,c]=b.useState(r==null?void 0:r.isSubscribed),[l,u]=b.useState(r==null?void 0:r.track),[d,h]=b.useState("landscape"),f=b.useRef(),{className:p,trackObserver:g}=b.useMemo(()=>pZ(t),[(n=t.participant.sid)!=null?n:t.participant.identity,t.source,oI(t)&&t.publication.trackSid]);return b.useEffect(()=>{const C=g.subscribe(m=>{at.debug("update track",m),i(m),s(m==null?void 0:m.isMuted),c(m==null?void 0:m.isSubscribed),u(m==null?void 0:m.track)});return()=>C==null?void 0:C.unsubscribe()},[g]),b.useEffect(()=>{var C,m;return l&&(f.current&&l.detach(f.current),(C=e.element)!=null&&C.current&&!(qj(t.participant)&&(l==null?void 0:l.kind)==="audio")&&l.attach(e.element.current)),f.current=(m=e.element)==null?void 0:m.current,()=>{f.current&&(l==null||l.detach(f.current))}},[l,e.element]),b.useEffect(()=>{var C,m;if(typeof((C=r==null?void 0:r.dimensions)==null?void 0:C.width)=="number"&&typeof((m=r==null?void 0:r.dimensions)==null?void 0:m.height)=="number"){const v=r.dimensions.width>r.dimensions.height?"landscape":"portrait";h(v)}},[r]),{publication:r,isMuted:o,isSubscribed:a,track:l,elementProps:Xl(e.props,Me({className:p,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}function m8({trackRef:t,participant:e,source:n,publication:r,onParticipantClick:i,disableSpeakingIndicator:o,htmlProps:s}){const a=th(),c=vc(e),l=b.useMemo(()=>{var g,C,m,v,S,E;const w=(C=(g=t==null?void 0:t.source)!=null?g:a==null?void 0:a.source)!=null?C:n;if(w===void 0)throw new Error("Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.");return{participant:(v=(m=t==null?void 0:t.participant)!=null?m:a==null?void 0:a.participant)!=null?v:c,publication:(E=(S=t==null?void 0:t.publication)!=null?S:a==null?void 0:a.publication)!=null?E:r,source:w}},[t==null?void 0:t.participant,t==null?void 0:t.source,t==null?void 0:t.publication,a==null?void 0:a.participant,a==null?void 0:a.source,a==null?void 0:a.publication,c,n,r]),u=b.useMemo(()=>{const{className:g}=TZ();return ba(s,{className:g,onClick:C=>{var m,v;if((m=s.onClick)==null||m.call(s,C),typeof i=="function"){const S=(v=l.publication)!=null?v:l.participant.getTrack(l.source);i({participant:l.participant,track:S})}}})},[s,i,l.publication,l.source,l.participant]),d=xA(Q.Source.Camera,{participant:l.participant}),h=xA(Q.Source.Microphone,{participant:l.participant}),f=l8(l.participant),p=c8(l);return{elementProps:Me({"data-lk-audio-muted":h,"data-lk-video-muted":d,"data-lk-speaking":o===!0?!1:f,"data-lk-local-participant":l.participant.isLocal,"data-lk-source":l.source,"data-lk-facing-mode":p},u)}}function v8(t={}){const e=nh(t.room),[n,r]=b.useState([]);return b.useEffect(()=>{const i=yZ(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(r);return()=>i.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function y8(t={}){const e=v8(t),{localParticipant:n}=h8(t);return[n,...e]}function C8({room:t,props:e}){const n=nh(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=b.useMemo(()=>DZ(),[]),s=b.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=Hr(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:b.useMemo(()=>ba(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayAudio:a}}function I8({room:t,props:e}){const n=nh(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=b.useMemo(()=>LZ(),[]),s=b.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=Hr(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:b.useMemo(()=>ba(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayVideo:a}}function S8({props:t}){const{dispatch:e,state:n}=e8().widget,{className:r}=b.useMemo(()=>BZ(),[]);return{mergedProps:b.useMemo(()=>ba(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function b8(t,e={}){var n,r,i,o;let s=th();const a=(r=(n=gg())!=null?n:e.participant)!=null?r:s==null?void 0:s.participant;if(typeof t=="string"){if(!a)throw Error("Participant missing, either provide it via context or pass it in directly");s={participant:a,source:t}}else if(t)s=t;else throw Error("No track reference found, either provide it via context or pass it in directly");const{className:c,mediaMutedObserver:l}=b.useMemo(()=>kZ(s),[hN(s)]);return{isMuted:Hr(l,!!((i=s.publication)!=null&&i.isMuted||(o=s.participant.getTrack(s.source))!=null&&o.isMuted)),className:c}}function w8(t){var e=t,{source:n,onChange:r,initialState:i,captureOptions:o}=e,s=_n(e,["source","onChange","initialState","captureOptions"]),a;const c=vg(),l=(a=c==null?void 0:c.localParticipant)==null?void 0:a.getTrack(n),{toggle:u,className:d,pendingObserver:h,enabledObserver:f}=b.useMemo(()=>c?IZ(n,c,o):SZ(),[c,n,JSON.stringify(o)]),p=Hr(h,!1),g=Hr(f,i??!!(l!=null&&l.isEnabled));b.useEffect(()=>{r==null||r(g)},[g,r]),b.useEffect(()=>{i!==void 0&&(at.debug("forcing initial toggle state",n,i),u(i))},[]);const C=b.useMemo(()=>ba(s,{className:d}),[s,d]),m=b.useCallback(v=>{var S;u(),(S=s.onClick)==null||S.call(s,v)},[s,u]);return{toggle:u,enabled:g,pending:p,track:l,buttonProps:Gn(Me({},C),{"aria-pressed":g,"data-lk-source":n,"data-lk-enabled":g,disabled:p,onClick:m})}}function A8(t,e={}){return SN(t,e)}function k8(t){const e=mg(),[n,r]=b.useState(),i=Hr(n==null?void 0:n.isSendingObservable,!1),o=Hr(n==null?void 0:n.messageObservable,[]);return b.useEffect(()=>{const s=MZ(e,t);r(s)},[e,t]),{send:n==null?void 0:n.send,chatMessages:o,isSending:i}}function E8(t={}){var e;const[n,r]=b.useState(zZ(t.defaults,(e=t.preventLoad)!=null?e:!1)),i=b.useCallback(l=>{r(u=>Gn(Me({},u),{audioEnabled:l}))},[]),o=b.useCallback(l=>{r(u=>Gn(Me({},u),{videoEnabled:l}))},[]),s=b.useCallback(l=>{r(u=>Gn(Me({},u),{audioDeviceId:l}))},[]),a=b.useCallback(l=>{r(u=>Gn(Me({},u),{videoDeviceId:l}))},[]),c=b.useCallback(l=>{r(u=>Gn(Me({},u),{username:l}))},[]);return b.useEffect(()=>{var l;HZ(n,(l=t.preventSave)!=null?l:!1)},[n,t.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:o,saveAudioInputDeviceId:s,saveVideoInputDeviceId:a,saveUsername:c}}function T8(t){const{mergedProps:e}=S8({props:t});return b.createElement("button",Me({},e),t.children)}function R8(t){const{buttonProps:e}=a8(t);return b.createElement("button",Me({},e),t.children)}var x8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),b.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),P8=x8,N8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),_8=N8,O8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),M8=O8,D8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),L8=D8,B8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),b.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),F8=B8,U8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),b.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),V8=U8,G8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),W8=G8,j8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),Z8=j8,H8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),b.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),z8=H8,X8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),b.createElement("g",{opacity:.25},b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),b.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),$8=X8,K8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),b.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),J8=K8,Y8=t=>b.createElement("svg",Me({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),b.createElement("g",{fill:"currentColor"},b.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),b.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),Q8=Y8;function _m(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,onDeviceListChange:o,onDeviceSelectError:s,exactMatch:a,track:c,requestPermissions:l,onError:u}=e,d=_n(e,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const h=vg(),f=b.useCallback(w=>{h&&h.emit(ne.MediaDevicesError,w),u==null||u(w)},[h,u]),{devices:p,activeDeviceId:g,setActiveMediaDevice:C,className:m}=p8({kind:n,room:h,track:c,requestPermissions:l,onError:f});b.useEffect(()=>{r!==void 0&&C(r)},[C]),b.useEffect(()=>{typeof o=="function"&&o(p)},[o,p]),b.useEffect(()=>{g&&g!==""&&(i==null||i(g))},[g]);const v=w=>yN(this,null,function*(){try{yield C(w,{exact:a})}catch(A){if(A instanceof Error)s==null||s(A);else throw A}}),S=b.useMemo(()=>Xl(d,{className:m},{className:"lk-list"}),[m,d]);function E(w,A,x){return w===A||x===0&&A==="default"}return b.createElement("ul",Me({},S),p.map((w,A)=>b.createElement("li",{key:w.deviceId,id:w.deviceId,"data-lk-active":E(w.deviceId,g,A),"aria-selected":E(w.deviceId,g,A),role:"option"},b.createElement("button",{className:"lk-button",onClick:()=>v(w.deviceId)},w.label))))}function bN(t,e){switch(t){case Q.Source.Microphone:return e?b.createElement(V8,null):b.createElement(F8,null);case Q.Source.Camera:return e?b.createElement(_8,null):b.createElement(P8,null);case Q.Source.ScreenShare:return e?b.createElement(Q8,null):b.createElement(J8,null);default:return}}function q8(t){switch(t){case Qr.Excellent:return b.createElement(W8,null);case Qr.Good:return b.createElement(Z8,null);case Qr.Poor:return b.createElement(z8,null);default:return b.createElement($8,null)}}function Om(t){var e=t,{showIcon:n}=e,r=_n(e,["showIcon"]);const{buttonProps:i,enabled:o}=w8(r);return b.createElement("button",Me({},i),(n??!0)&&bN(r.source,o),r.children)}function eH(t){var e;const{className:n,quality:r}=o8(t),i=b.useMemo(()=>Gn(Me({},Xl(t,{className:n})),{"data-lk-quality":r}),[r,t,n]);return b.createElement("div",Me({},i),(e=t.children)!=null?e:q8(r))}function tH(t){var e=t,{participant:n}=e,r=_n(e,["participant"]);const i=vc(n),{className:o,infoObserver:s}=b.useMemo(()=>EZ(i),[i]),{identity:a,name:c}=Hr(s,{name:i.name,identity:i.identity,metadata:i.metadata}),l=b.useMemo(()=>Xl(r,{className:o,"data-lk-participant-name":c}),[r,o,c]);return b.createElement("span",Me({},l),c!==""?c:a,r.children)}function nH(t){var e=t,{source:n,participant:r,trackRef:i,show:o="always"}=e,s=_n(e,["source","participant","trackRef","show"]),a,c;const{className:l,isMuted:u}=b8(i??n,{participant:r}),d=o==="always"||o==="muted"&&u||o==="unmuted"&&!u,h=b.useMemo(()=>Xl(s,{className:l}),[l,s]);return d?b.createElement("div",Gn(Me({},h),{"data-lk-muted":u}),(c=s.children)!=null?c:bN((a=i==null?void 0:i.source)!=null?a:n,!u)):null}function rH(t){var e=t,{trackRef:n,onSubscriptionStatusChanged:r,volume:i,source:o,name:s,publication:a,participant:c}=e,l=_n(e,["trackRef","onSubscriptionStatusChanged","volume","source","name","publication","participant"]),u,d,h,f,p,g,C,m,v,S;const E=th(),w=(f=(h=(u=n==null?void 0:n.publication)==null?void 0:u.trackName)!=null?h:(d=E==null?void 0:E.publication)==null?void 0:d.trackName)!=null?f:s,A=(g=(p=n==null?void 0:n.source)!=null?p:E==null?void 0:E.source)!=null?g:o,x=(m=(C=n==null?void 0:n.publication)!=null?C:E==null?void 0:E.publication)!=null?m:a,T=(S=(v=n==null?void 0:n.participant)!=null?v:E==null?void 0:E.participant)!=null?S:c;if(A===void 0)throw new Error("The AudioTrack component expects a trackRef or source property.");const _=b.useRef(null),O=vc(T),{elementProps:L,isSubscribed:U,track:z,publication:Z}=SN({source:A,name:w,participant:O,publication:x},{element:_,props:l});return b.useEffect(()=>{r==null||r(!!U)},[U,r]),b.useEffect(()=>{z===void 0||i===void 0||(z instanceof Ka?z.setVolume(i):at.warn("Volume can only be set on remote audio tracks."))},[i,z]),b.useEffect(()=>{Z===void 0||l.muted===void 0||(Z instanceof eI?Z.setEnabled(!l.muted):at.warn("Can only call setEnabled on remote track publications."))},[l.muted,Z,z]),b.createElement("audio",Me({ref:_},L))}function iH(t){const e=!!gg();return t.participant&&!e?b.createElement(hI.Provider,{value:t.participant},t.children):b.createElement(b.Fragment,null,t.children)}function oH({value:t,onPinChange:e,onWidgetChange:n,children:r}){const i=t8(t);return b.useEffect(()=>{at.debug("PinState Updated",{state:i.pin.state}),e&&i.pin.state&&e(i.pin.state)},[i.pin.state,e]),b.useEffect(()=>{at.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),b.createElement(dI.Provider,{value:i},r)}function sH(t){const{room:e,htmlProps:n}=d8(t);return b.createElement("div",Me({},n),e&&b.createElement(fI.Provider,{value:e},b.createElement(r8.Provider,{value:t.featureFlags},t.children)))}function aH(t){var e=t,{participant:n,trackRef:r}=e,i=_n(e,["participant","trackRef"]),o,s;const[a,c]=b.useState([]),l=200,u=90,d=6,h=4,f=50,p=7,g=(o=gg())!=null?o:n;let C=(s=th())!=null?s:r;if(!C){if(!g)throw Error("Participant missing, provide it directly or within a context");C={participant:g,source:Q.Source.Microphone}}const{track:m}=A8(C);return b.useEffect(()=>{if(!m||!(m instanceof hr||m instanceof Ka))return;const{analyser:v,cleanup:S}=D9(m,{smoothingTimeConstant:.8,fftSize:64}),E=new Uint8Array(v.frequencyBinCount),w=()=>{v.getByteFrequencyData(E);const x=new Array(p).fill(0);E.slice(1);const T=6;for(let _=0;_<p/2;_+=1){const O=Math.floor(p/2-_);for(let L=0;L<T;L+=1)x[O]+=Math.pow(E[_*T+L]/255,2);x[O]/=T}for(let _=0;_<p/2;_+=1){const O=Math.floor(p/2+_);if(x[O]===0){for(let L=0;L<T;L+=1)x[O]+=Math.pow(E[_*T+L]/255,2);x[O]/=T}}return x.map(_=>_*f)},A=setInterval(()=>{const x=w();c(x)},100);return()=>{clearInterval(A),S()}},[m]),b.createElement("svg",Gn(Me({width:"100%",height:"100%",viewBox:`0 0 ${l} ${u}`},i),{className:"lk-audio-visualizer"}),b.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),b.createElement("g",{style:{transform:`translate(${(l-p*(d+h))/2}px, 0)`}},a.map((v,S)=>b.createElement("rect",{key:S,x:S*(d+h),y:u/2-v/2,width:d,height:v}))))}function cH(t){var e=t,{participants:n}=e,r=_n(e,["participants"]);return b.createElement(b.Fragment,null,n.map(i=>b.createElement(hI.Provider,{value:i,key:i.identity},IN(r.children))))}function lH(t){var e=t,{participant:n,children:r,source:i,publication:o,disableSpeakingIndicator:s,onParticipantClick:a}=e,c=_n(e,["participant","children","source","publication","disableSpeakingIndicator","onParticipantClick"]);const l=vc(n),{elementProps:u}=m8({participant:l,htmlProps:c,disableSpeakingIndicator:s,source:Q.Source.Microphone,publication:o,onParticipantClick:a});return b.createElement("div",Me({style:{position:"relative"}},u),b.createElement(iH,{participant:l},r??b.createElement(b.Fragment,null,b.createElement(rH,{source:i??Q.Source.Microphone}),b.createElement(aH,null),b.createElement("div",{className:"lk-participant-metadata"},b.createElement("div",{className:"lk-participant-metadata-item"},b.createElement(nH,{source:Q.Source.Microphone}),b.createElement(tH,null)),b.createElement(eH,{className:"lk-participant-metadata-item"})))))}function uH(t){var e=t,{entry:n,hideName:r=!1,hideTimestamp:i=!1,messageFormatter:o}=e,s=_n(e,["entry","hideName","hideTimestamp","messageFormatter"]),a,c,l,u;const d=b.useMemo(()=>o?o(n.message):n.message,[n.message,o]),h=new Date(n.timestamp),f=navigator?navigator.language:"en-US";return b.createElement("li",Me({className:"lk-chat-entry",title:h.toLocaleTimeString(f,{timeStyle:"full"}),"data-lk-message-origin":(a=n.from)!=null&&a.isLocal?"local":"remote"},s),(!i||!r)&&b.createElement("span",{className:"lk-meta-data"},!r&&b.createElement("strong",{className:"lk-participant-name"},(u=(c=n.from)==null?void 0:c.name)!=null?u:(l=n.from)==null?void 0:l.identity),!i&&b.createElement("span",{className:"lk-timestamp"},h.toLocaleTimeString(f,{timeStyle:"short"}))),b.createElement("span",{className:"lk-message-body"},d))}function dH(t){var e=t,{messageFormatter:n,messageDecoder:r,messageEncoder:i,channelTopic:o}=e,s=_n(e,["messageFormatter","messageDecoder","messageEncoder","channelTopic"]);const a=b.useRef(null),c=b.useRef(null),l=b.useMemo(()=>({messageDecoder:r,messageEncoder:i,channelTopic:o}),[r,i,o]),{send:u,chatMessages:d,isSending:h}=k8(l),f=CN(),p=b.useRef(0);function g(C){return yN(this,null,function*(){C.preventDefault(),a.current&&a.current.value.trim()!==""&&u&&(yield u(a.current.value),a.current.value="",a.current.focus())})}return b.useEffect(()=>{var C;c&&((C=c.current)==null||C.scrollTo({top:c.current.scrollHeight}))},[c,d]),b.useEffect(()=>{var C,m,v,S,E;if(!f||d.length===0)return;if((C=f.widget.state)!=null&&C.showChat&&d.length>0&&p.current!==((m=d[d.length-1])==null?void 0:m.timestamp)){p.current=(v=d[d.length-1])==null?void 0:v.timestamp;return}const w=d.filter(x=>!p.current||x.timestamp>p.current).length,{widget:A}=f;w>0&&((S=A.state)==null?void 0:S.unreadMessages)!==w&&((E=A.dispatch)==null||E.call(A,{msg:"unread_msg",count:w}))},[d,f==null?void 0:f.widget]),b.createElement("div",Gn(Me({},s),{className:"lk-chat"}),b.createElement("ul",{className:"lk-list lk-chat-messages",ref:c},s.children?d.map((C,m)=>IN(s.children,{entry:C,key:m,messageFormatter:n})):d.map((C,m,v)=>{const S=m>=1&&v[m-1].from===C.from,E=m>=1&&C.timestamp-v[m-1].timestamp<6e4;return b.createElement(uH,{key:m,hideName:S,hideTimestamp:S===!1?!1:E,entry:C,messageFormatter:n})})),b.createElement("form",{className:"lk-chat-form",onSubmit:g},b.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:h,ref:a,type:"text",placeholder:"Enter a message..."}),b.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:h},"Send")))}function PA(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:o,requestPermissions:s=!1}=e,a=_n(e,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[c,l]=b.useState(!1),[u,d]=b.useState([]),[h,f]=b.useState(!0),p=(v,S)=>{at.debug("handle device change"),l(!1),i==null||i(v,S)},g=b.useRef(null),C=b.useRef(null);b.useLayoutEffect(()=>{g.current&&C.current&&(u||h)&&eZ(g.current,C.current).then(({x:v,y:S})=>{C.current&&Object.assign(C.current.style,{left:`${v}px`,top:`${S}px`})}),f(!1)},[g,C,u,h]);const m=b.useCallback(v=>{C.current&&v.target!==g.current&&c&&tZ(C.current,v)&&l(!1)},[c,C,g]);return b.useEffect(()=>(document.addEventListener("click",m),window.addEventListener("resize",()=>f(!0)),()=>{document.removeEventListener("click",m),window.removeEventListener("resize",()=>f(!0))}),[m,f]),b.createElement(b.Fragment,null,b.createElement("button",Gn(Me({className:"lk-button lk-button-menu","aria-pressed":c},a),{onClick:()=>l(!c),ref:g}),a.children),!a.disabled&&b.createElement("div",{className:"lk-device-menu",ref:C,style:{visibility:c?"visible":"hidden"}},n?b.createElement(_m,{initialSelection:r,onActiveDeviceChange:v=>p(n,v),onDeviceListChange:d,kind:n,track:o==null?void 0:o[n],requestPermissions:s}):b.createElement(b.Fragment,null,b.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),b.createElement(_m,{kind:"audioinput",onActiveDeviceChange:v=>p("audioinput",v),onDeviceListChange:d,track:o==null?void 0:o.audioinput,requestPermissions:s}),b.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),b.createElement(_m,{kind:"videoinput",onActiveDeviceChange:v=>p("videoinput",v),onDeviceListChange:d,track:o==null?void 0:o.videoinput,requestPermissions:s}))))}function hH(t){var e=t,{label:n}=e,r=_n(e,["label"]);const i=mg(),{mergedProps:o,canPlayAudio:s}=C8({room:i,props:r}),{mergedProps:a,canPlayVideo:c}=I8({room:i,props:o}),l=a,{style:u}=l,d=_n(l,["style"]);return u.display=s&&c?"none":"block",b.createElement("button",Me({style:u},d),n??`Start ${s?"Video":"Audio"}`)}function fH(t){var e=t,{variation:n,controls:r,saveUserChoices:i=!0}=e,o=_n(e,["variation","controls","saveUserChoices"]),s,a,c,l,u;const[d,h]=b.useState(!1),f=CN();b.useEffect(()=>{var z,Z;((z=f==null?void 0:f.widget.state)==null?void 0:z.showChat)!==void 0&&h((Z=f==null?void 0:f.widget.state)==null?void 0:Z.showChat)},[(s=f==null?void 0:f.widget.state)==null?void 0:s.showChat]);const g=YZ(`(max-width: ${d?1e3:760}px)`)?"minimal":"verbose";n??(n=g);const C=Me({leave:!0},r),m=f8();m?((a=C.camera)!=null||(C.camera=m.canPublish),(c=C.microphone)!=null||(C.microphone=m.canPublish),(l=C.screenShare)!=null||(C.screenShare=m.canPublish),(u=C.chat)!=null||(C.chat=m.canPublishData&&(r==null?void 0:r.chat))):(C.camera=!1,C.chat=!1,C.microphone=!1,C.screenShare=!1);const v=b.useMemo(()=>n==="minimal"||n==="verbose",[n]),S=b.useMemo(()=>n==="textOnly"||n==="verbose",[n]),E=oZ(),[w,A]=b.useState(!1),x=z=>{A(z)},T=Xl({className:"lk-control-bar"},o),{saveAudioInputEnabled:_,saveVideoInputEnabled:O,saveAudioInputDeviceId:L,saveVideoInputDeviceId:U}=E8({preventSave:!i});return b.createElement("div",Me({},T),C.microphone&&b.createElement("div",{className:"lk-button-group"},b.createElement(Om,{source:Q.Source.Microphone,showIcon:v,onChange:_},S&&"Microphone"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(PA,{kind:"audioinput",onActiveDeviceChange:(z,Z)=>L(Z??"")}))),C.camera&&b.createElement("div",{className:"lk-button-group"},b.createElement(Om,{source:Q.Source.Camera,showIcon:v,onChange:O},S&&"Camera"),b.createElement("div",{className:"lk-button-group-menu"},b.createElement(PA,{kind:"videoinput",onActiveDeviceChange:(z,Z)=>U(Z??"")}))),C.screenShare&&E&&b.createElement(Om,{source:Q.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:x},S&&(w?"Stop screen share":"Share screen")),C.chat&&b.createElement(T8,null,v&&b.createElement(M8,null),S&&"Chat"),C.leave&&b.createElement(R8,null,v&&b.createElement(L8,null),S&&"Leave"),b.createElement(hH,null))}function pH(t){var e=_n(t,[]);const[n,r]=b.useState({showChat:!1,unreadMessages:0}),i=y8();return b.createElement(oH,{onWidgetChange:r},b.createElement("div",Me({className:"lk-audio-conference"},e),b.createElement("div",{className:"lk-audio-conference-stage"},b.createElement(cH,{participants:i},b.createElement(lH,null))),b.createElement(fH,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),n.showChat&&b.createElement(dH,null)))}const gH="wss://mongoose-67t79p35.livekit.cloud",mH=({client:t})=>{const[e,n]=b.useState([]),[r,i]=b.useState(!1);return b.useEffect(()=>{const o=a=>{n(c=>[...c,a]),i(!0)},s=a=>{n(c=>{const l=c.filter(u=>u!==a);return l.length===0&&i(!1),l})};return t.on("livekitToken",o),t.on("livekitLeave",s),()=>{t.off("livekitToken",o),t.off("livekitLeave",s)}},[t]),e.length?K.jsxs("div",{"data-lk-theme":"default",children:[e.map((o,s)=>K.jsx(sH,{video:!1,audio:!0,token:o,serverUrl:gH,connect:!0,onDisconnected:()=>t.emit("livekitLeave",o),children:K.jsx(pH,{})},s)),K.jsx("div",{className:"audio-status","aria-live":"polite"})]}):null};function vH(){const[t,e]=b.useState(null),[n,r]=b.useState(!1),[i,o]=b.useState([]),s=ct.useRef(null),a=ct.useRef(null),c=ct.useRef(null),l=b.useRef(!1),u=()=>{s.current&&s.current.saveLog()},d=()=>{s.current&&s.current.clearLog()},h=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return b.useEffect(()=>{if(l.current)return;const f=new nV("mongoose.moo.mud.org",8765);f.registerGMCPPackage(Z4),f.registerGMCPPackage(V4),f.registerGMCPPackage(G4),f.registerGMCPPackage(DB),f.registerGMCPPackage(H4),f.registerGMCPPackage(W4),f.registerGMCPPackage(j4),f.registerGMCPPackage(OB),f.registerGMCPPackage(z4),f.registerMcpPackage(J4),f.registerMcpPackage(Y4),f.registerMcpPackage(q4),f.registerMcpPackage(eV),f.connect(),f.requestNotificationPermission(),e(f),r(!h),window.mudClient=f,l.current=!0;const p=C=>{f&&(C.key==="Control"&&f.cancelSpeech(),C.key==="Escape"&&f.stopAllSounds())};window.addEventListener("keydown",p);const g=()=>{var C;(C=a.current)==null||C.focus()};return document.addEventListener("focus",g),()=>{window.removeEventListener("keydown",p),document.removeEventListener("focus",g)}},[h]),b.useEffect(()=>{if(t){const f=g=>{o(g)},p=()=>{o([])};return t.on("userlist",f),t.on("disconnect",p),()=>{t.off("userlist",f),t.off("disconnect",p)}}},[t]),mE(f=>{t&&t.shutdown()}),t?K.jsxs("div",{className:"App",children:[K.jsx("header",{className:"App-header"}),K.jsx(QG,{client:t,onSaveLog:u,onClearLog:d,onToggleUsers:()=>r(!n),onOpenPrefs:()=>{var f;return(f=c.current)==null?void 0:f.open()}}),K.jsxs("div",{children:[K.jsx(zv,{client:t,ref:s}),n&&K.jsx(eW,{users:i}),K.jsx(mH,{client:t})]}),K.jsx(iV,{onSend:t.sendCommand,inputRef:a}),K.jsx(qG,{client:t}),K.jsx(FG,{ref:c})]}):null}function yH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function _A(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?NA(Object(n),!0).forEach(function(r){yH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function CH(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function IH(t,e){if(t==null)return{};var n=CH(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function SH(t,e){return bH(t)||wH(t,e)||AH(t,e)||kH()}function bH(t){if(Array.isArray(t))return t}function wH(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,o=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function AH(t,e){if(t){if(typeof t=="string")return OA(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return OA(t,e)}}function OA(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function kH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function DA(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?MA(Object(n),!0).forEach(function(r){EH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):MA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function TH(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,o){return o(i)},r)}}function Du(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function Pp(t){return{}.toString.call(t).includes("Object")}function RH(t){return!Object.keys(t).length}function Dd(t){return typeof t=="function"}function xH(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function PH(t,e){return Pp(e)||aa("changeType"),Object.keys(e).some(function(n){return!xH(t,n)})&&aa("changeField"),e}function NH(t){Dd(t)||aa("selectorType")}function _H(t){Dd(t)||Pp(t)||aa("handlerType"),Pp(t)&&Object.values(t).some(function(e){return!Dd(e)})&&aa("handlersType")}function OH(t){t||aa("initialIsRequired"),Pp(t)||aa("initialType"),RH(t)&&aa("initialContent")}function MH(t,e){throw new Error(t[e]||t.default)}var DH={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},aa=Du(MH)(DH),Fh={changes:PH,selector:NH,handler:_H,initial:OH};function LH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Fh.initial(t),Fh.handler(e);var n={current:t},r=Du(UH)(n,e),i=Du(FH)(n),o=Du(Fh.changes)(t),s=Du(BH)(n);function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return Fh.selector(l),l(n.current)}function c(l){TH(r,i,o,s)(l)}return[a,c]}function BH(t,e){return Dd(e)?e(t.current):e}function FH(t,e){return t.current=DA(DA({},t.current),e),e}function UH(t,e,n){return Dd(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var VH={create:LH},GH={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function WH(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function jH(t){return{}.toString.call(t).includes("Object")}function ZH(t){return t||LA("configIsRequired"),jH(t)||LA("configType"),t.urls?(HH(),{paths:{vs:t.urls.monacoBase}}):t}function HH(){console.warn(wN.deprecation)}function zH(t,e){throw new Error(t[e]||t.default)}var wN={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},LA=WH(zH)(wN),XH={config:ZH},$H=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,s){return s(o)},i)}};function AN(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],AN(t[n],e[n]))}),_A(_A({},t),e)}var KH={type:"cancelation",msg:"operation is manually canceled"};function Mm(t){var e=!1,n=new Promise(function(r,i){t.then(function(o){return e?i(KH):r(o)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var JH=VH.create({config:GH,isInitialized:!1,resolve:null,reject:null,monaco:null}),kN=SH(JH,2),rh=kN[0],yg=kN[1];function YH(t){var e=XH.config(t),n=e.monaco,r=IH(e,["monaco"]);yg(function(i){return{config:AN(i.config,r),monaco:n}})}function QH(){var t=rh(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(yg({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),Mm(Dm);if(window.monaco&&window.monaco.editor)return EN(window.monaco),t.resolve(window.monaco),Mm(Dm);$H(qH,t7)(n7)}return Mm(Dm)}function qH(t){return document.body.appendChild(t)}function e7(t){var e=document.createElement("script");return t&&(e.src=t),e}function t7(t){var e=rh(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=e7("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function n7(){var t=rh(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){EN(n),t.resolve(n)},function(n){t.reject(n)})}function EN(t){rh().monaco||yg({monaco:t})}function r7(){return rh(function(t){var e=t.monaco;return e})}var Dm=new Promise(function(t,e){return yg({resolve:t,reject:e})}),TN={config:YH,init:QH,__getMonacoInstance:r7},i7={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Lm=i7,o7={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},s7=o7;function a7({children:t}){return ct.createElement("div",{style:s7.container},t)}var c7=a7,l7=c7;function u7({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:o,wrapperProps:s}){return ct.createElement("section",{style:{...Lm.wrapper,width:t,height:e},...s},!n&&ct.createElement(l7,null,r),ct.createElement("div",{ref:i,style:{...Lm.fullWidth,...!n&&Lm.hide},className:o}))}var d7=u7,RN=b.memo(d7);function h7(t){b.useEffect(t,[])}var xN=h7;function f7(t,e,n=!0){let r=b.useRef(!0);b.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Fr=f7;function Qu(){}function Zc(t,e,n,r){return p7(t,r)||g7(t,e,n,r)}function p7(t,e){return t.editor.getModel(PN(t,e))}function g7(t,e,n,r){return t.editor.createModel(e,n,r?PN(t,r):void 0)}function PN(t,e){return t.Uri.parse(e)}function m7({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:s,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:c=!1,theme:l="light",loading:u="Loading...",options:d={},height:h="100%",width:f="100%",className:p,wrapperProps:g={},beforeMount:C=Qu,onMount:m=Qu}){let[v,S]=b.useState(!1),[E,w]=b.useState(!0),A=b.useRef(null),x=b.useRef(null),T=b.useRef(null),_=b.useRef(m),O=b.useRef(C),L=b.useRef(!1);xN(()=>{let J=TN.init();return J.then(ee=>(x.current=ee)&&w(!1)).catch(ee=>(ee==null?void 0:ee.type)!=="cancelation"&&console.error("Monaco initialization: error:",ee)),()=>A.current?Z():J.cancel()}),Fr(()=>{if(A.current&&x.current){let J=A.current.getOriginalEditor(),ee=Zc(x.current,t||"",r||n||"text",o||"");ee!==J.getModel()&&J.setModel(ee)}},[o],v),Fr(()=>{if(A.current&&x.current){let J=A.current.getModifiedEditor(),ee=Zc(x.current,e||"",i||n||"text",s||"");ee!==J.getModel()&&J.setModel(ee)}},[s],v),Fr(()=>{let J=A.current.getModifiedEditor();J.getOption(x.current.editor.EditorOption.readOnly)?J.setValue(e||""):e!==J.getValue()&&(J.executeEdits("",[{range:J.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),J.pushUndoStop())},[e],v),Fr(()=>{var J,ee;(ee=(J=A.current)==null?void 0:J.getModel())==null||ee.original.setValue(t||"")},[t],v),Fr(()=>{let{original:J,modified:ee}=A.current.getModel();x.current.editor.setModelLanguage(J,r||n||"text"),x.current.editor.setModelLanguage(ee,i||n||"text")},[n,r,i],v),Fr(()=>{var J;(J=x.current)==null||J.editor.setTheme(l)},[l],v),Fr(()=>{var J;(J=A.current)==null||J.updateOptions(d)},[d],v);let U=b.useCallback(()=>{var re;if(!x.current)return;O.current(x.current);let J=Zc(x.current,t||"",r||n||"text",o||""),ee=Zc(x.current,e||"",i||n||"text",s||"");(re=A.current)==null||re.setModel({original:J,modified:ee})},[n,e,i,t,r,o,s]),z=b.useCallback(()=>{var J;!L.current&&T.current&&(A.current=x.current.editor.createDiffEditor(T.current,{automaticLayout:!0,...d}),U(),(J=x.current)==null||J.editor.setTheme(l),S(!0),L.current=!0)},[d,l,U]);b.useEffect(()=>{v&&_.current(A.current,x.current)},[v]),b.useEffect(()=>{!E&&!v&&z()},[E,v,z]);function Z(){var ee,re,X,Y;let J=(ee=A.current)==null?void 0:ee.getModel();a||((re=J==null?void 0:J.original)==null||re.dispose()),c||((X=J==null?void 0:J.modified)==null||X.dispose()),(Y=A.current)==null||Y.dispose()}return ct.createElement(RN,{width:f,height:h,isEditorReady:v,loading:u,_ref:T,className:p,wrapperProps:g})}var v7=m7;b.memo(v7);function y7(t){let e=b.useRef();return b.useEffect(()=>{e.current=t},[t]),e.current}var C7=y7,Uh=new Map;function I7({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:o,theme:s="light",line:a,loading:c="Loading...",options:l={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:h=!1,width:f="100%",height:p="100%",className:g,wrapperProps:C={},beforeMount:m=Qu,onMount:v=Qu,onChange:S,onValidate:E=Qu}){let[w,A]=b.useState(!1),[x,T]=b.useState(!0),_=b.useRef(null),O=b.useRef(null),L=b.useRef(null),U=b.useRef(v),z=b.useRef(m),Z=b.useRef(),J=b.useRef(r),ee=C7(o),re=b.useRef(!1),X=b.useRef(!1);xN(()=>{let W=TN.init();return W.then(se=>(_.current=se)&&T(!1)).catch(se=>(se==null?void 0:se.type)!=="cancelation"&&console.error("Monaco initialization: error:",se)),()=>O.current?oe():W.cancel()}),Fr(()=>{var se,we,De,de;let W=Zc(_.current,t||r||"",e||i||"",o||n||"");W!==((se=O.current)==null?void 0:se.getModel())&&(d&&Uh.set(ee,(we=O.current)==null?void 0:we.saveViewState()),(De=O.current)==null||De.setModel(W),d&&((de=O.current)==null||de.restoreViewState(Uh.get(o))))},[o],w),Fr(()=>{var W;(W=O.current)==null||W.updateOptions(l)},[l],w),Fr(()=>{!O.current||r===void 0||(O.current.getOption(_.current.editor.EditorOption.readOnly)?O.current.setValue(r):r!==O.current.getValue()&&(X.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),O.current.pushUndoStop(),X.current=!1))},[r],w),Fr(()=>{var se,we;let W=(se=O.current)==null?void 0:se.getModel();W&&i&&((we=_.current)==null||we.editor.setModelLanguage(W,i))},[i],w),Fr(()=>{var W;a!==void 0&&((W=O.current)==null||W.revealLine(a))},[a],w),Fr(()=>{var W;(W=_.current)==null||W.editor.setTheme(s)},[s],w);let Y=b.useCallback(()=>{var W;if(!(!L.current||!_.current)&&!re.current){z.current(_.current);let se=o||n,we=Zc(_.current,r||t||"",e||i||"",se||"");O.current=(W=_.current)==null?void 0:W.editor.create(L.current,{model:we,automaticLayout:!0,...l},u),d&&O.current.restoreViewState(Uh.get(se)),_.current.editor.setTheme(s),a!==void 0&&O.current.revealLine(a),A(!0),re.current=!0}},[t,e,n,r,i,o,l,u,d,s,a]);b.useEffect(()=>{w&&U.current(O.current,_.current)},[w]),b.useEffect(()=>{!x&&!w&&Y()},[x,w,Y]),J.current=r,b.useEffect(()=>{var W,se;w&&S&&((W=Z.current)==null||W.dispose(),Z.current=(se=O.current)==null?void 0:se.onDidChangeModelContent(we=>{X.current||S(O.current.getValue(),we)}))},[w,S]),b.useEffect(()=>{if(w){let W=_.current.editor.onDidChangeMarkers(se=>{var De;let we=(De=O.current.getModel())==null?void 0:De.uri;if(we&&se.find(de=>de.path===we.path)){let de=_.current.editor.getModelMarkers({resource:we});E==null||E(de)}});return()=>{W==null||W.dispose()}}return()=>{}},[w,E]);function oe(){var W,se;(W=Z.current)==null||W.dispose(),h?d&&Uh.set(o,O.current.saveViewState()):(se=O.current.getModel())==null||se.dispose(),O.current.dispose()}return ct.createElement(RN,{width:f,height:p,isEditorReady:w,loading:c,_ref:L,className:g,wrapperProps:C})}var S7=I7,b7=b.memo(S7),w7=b7,A7={restoreOnUnmount:!1};function k7(t,e){e===void 0&&(e=A7);var n=b.useRef(document.title);document.title!==t&&(document.title=t),b.useEffect(function(){if(e&&e.restoreOnUnmount)return function(){document.title=n.current}},[])}const E7=typeof document<"u"?k7:function(t){};function T7({onSave:t,onRevert:e,onDownload:n}){return K.jsx("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderBottom:"1px solid #e8e8e8"},children:K.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[K.jsxs("button",{onClick:t,accessKey:"s",children:[K.jsx(ix,{}),"Save"]}),K.jsxs("button",{onClick:e,accessKey:"r",children:[K.jsx(KG,{}),"Revert"]}),K.jsxs("button",{onClick:n,accessKey:"d",children:[K.jsx(XG,{}),"Download"]})]})})}const R7=({docstate:t,session:e})=>K.jsxs("div",{"aria-live":"polite",className:"statusbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderTop:"1px solid #e8e8e8"},children:[K.jsx("span",{children:t}),K.jsx("span",{children:"|"}),K.jsx("span",{children:e.reference}),K.jsx("span",{children:"|"}),K.jsx("span",{children:e.type})]});function x7(){const t=gE(),e=ct.useRef(null),[n,r]=b.useState(""),[i,o]=b.useState(""),[s,a]=b.useState(""),[c,l]=b.useState(0),[u,d]=b.useState({name:"none",contents:[],reference:"",type:""}),h=(z,Z)=>{e.current=z},[f,p]=bs();console.log(f);const g=f.editor.accessibilityMode,C=f.editor.autocompleteEnabled;mE(z=>{w.postMessage({type:"close",id:x}),c===1&&z.preventDefault()});const[m,v]=b.useState(!1),S=m?`${u.name} - Mongoose Editor`:"Mongoose Editor";E7(S);const E=b.useMemo(()=>{switch(c){case 0:return"Unchanged";case 1:return"Changed";case 2:return"Saved"}},[c]),w=b.useMemo(()=>new BroadcastChannel("editor"),[]),A=new URLSearchParams(t.search),x=decodeURIComponent(A.get("reference")||"");b.useEffect(()=>{if(!x)return;console.log("ID: "+x),console.log("Sending ready message"),w.postMessage({type:"ready",id:x});const z=Z=>{if(console.log(Z.data),Z.data.type==="load"){if(n!=="")return;const J=Z.data.session.contents.join(`
`);o(J),a(J),d(Z.data.session),l(0),r(Z.data.clientId),setTimeout(U,100)}else if(Z.data.type==="shutdown"){if(Z.data.clientId!==n)return;w.close(),window.close()}};return w.addEventListener("message",z),()=>w.removeEventListener("message",z)},[w,n,x]);const T=()=>{o(s),l(0)},_=z=>{const Z=i.split(/\r\n|\r|\n/),J={...u,contents:Z};w.postMessage({type:"save",session:J,id:x}),l(2),U(),z.preventDefault()},O=z=>{z!==void 0&&(console.log("Original: "+s),console.log("New: "+z),o(z),z.split(/\r\n|\r|\n/).join(`
`)!==s?l(1):l(0),m||v(!0))},L=()=>{const z=new Blob([i],{type:"text/plain"}),Z=URL.createObjectURL(z),J=document.createElement("a"),ee=new Date,re=ee.toLocaleDateString().replace(/\//g,"-"),X=ee.toLocaleTimeString().replace(/:/g,"-"),Y=`${u.name}-${re}-${X}.txt`;J.download=Y,J.href=Z,J.click(),URL.revokeObjectURL(Z),J.remove()};return K.jsxs("div",{id:"editor",children:[K.jsx(T7,{onSave:_,onRevert:T,onDownload:L}),K.jsx(w7,{height:"80vh",defaultLanguage:"lambdamoo",value:i,onChange:O,options:{wordWrap:"on",accessibilitySupport:g?"on":"off",quickSuggestions:C},onMount:h,path:u.reference}),K.jsx(R7,{docstate:E,session:u})]});function U(){e.current!==null&&e.current.focus()}}const P7="modulepreload",N7=function(t){return"/"+t},BA={},_7=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(n.map(a=>{if(a=N7(a),a in BA)return;BA[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":P7,c||(u.as="script",u.crossOrigin=""),u.href=a,s&&u.setAttribute("nonce",s),document.head.appendChild(u),c)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},O7=t=>{t&&t instanceof Function&&_7(async()=>{const{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}=await import("./web-vitals-DdRmOIVa.js");return{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}},[]).then(({getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o})=>{e(t),n(t),r(t),i(t),o(t)})};var FA={};const M7=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function D7(t){if("serviceWorker"in navigator){if(new URL(FA.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${FA.PUBLIC_URL}/service-worker.js`;M7?(L7(n),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):NN(n)})}}function NN(t,e){navigator.serviceWorker.register(t).then(n=>{n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."):console.log("Content is cached for offline use."))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function L7(t,e){fetch(t).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):NN(t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}const B7=bD([{path:"/",element:K.jsx(vH,{})},{path:"/editor",element:K.jsx(x7,{})}]),F7=Bm.createRoot(document.getElementById("root"));F7.render(K.jsx(ct.StrictMode,{children:K.jsx(ND,{router:B7})}));O7(console.log);D7();
