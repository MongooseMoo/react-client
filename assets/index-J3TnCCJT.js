var bB=Object.defineProperty;var wB=(t,e,n)=>e in t?bB(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>(wB(t,typeof e!="symbol"?e+"":e,n),n),ty=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)};var M=(t,e,n)=>(ty(t,e,"read from private field"),n?n.call(t):e.get(t)),De=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ae=(t,e,n,r)=>(ty(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n);var Dh=(t,e,n,r)=>({set _(i){Ae(t,e,i,n)},get _(){return M(t,e,r)}}),Se=(t,e,n)=>(ty(t,e,"access private method"),n);function C_(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var kB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ah(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var I_={exports:{}},Nm={},S_={exports:{}},$e={},ch=Symbol.for("react.element"),AB=Symbol.for("react.portal"),EB=Symbol.for("react.fragment"),TB=Symbol.for("react.strict_mode"),_B=Symbol.for("react.profiler"),RB=Symbol.for("react.provider"),xB=Symbol.for("react.context"),NB=Symbol.for("react.forward_ref"),PB=Symbol.for("react.suspense"),MB=Symbol.for("react.memo"),OB=Symbol.for("react.lazy"),rk=Symbol.iterator;function DB(t){return t===null||typeof t!="object"?null:(t=rk&&t[rk]||t["@@iterator"],typeof t=="function"?t:null)}var b_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w_=Object.assign,k_={};function Vu(t,e,n){this.props=t,this.context=e,this.refs=k_,this.updater=n||b_}Vu.prototype.isReactComponent={};Vu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function A_(){}A_.prototype=Vu.prototype;function lS(t,e,n){this.props=t,this.context=e,this.refs=k_,this.updater=n||b_}var uS=lS.prototype=new A_;uS.constructor=lS;w_(uS,Vu.prototype);uS.isPureReactComponent=!0;var ik=Array.isArray,E_=Object.prototype.hasOwnProperty,dS={current:null},T_={key:!0,ref:!0,__self:!0,__source:!0};function __(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)E_.call(e,r)&&!T_.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ch,type:t,key:s,ref:o,props:i,_owner:dS.current}}function LB(t,e){return{$$typeof:ch,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function fS(t){return typeof t=="object"&&t!==null&&t.$$typeof===ch}function BB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sk=/\/+/g;function ny(t,e){return typeof t=="object"&&t!==null&&t.key!=null?BB(""+t.key):e.toString(36)}function kp(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ch:case AB:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ny(o,0):r,ik(i)?(n="",t!=null&&(n=t.replace(sk,"$&/")+"/"),kp(i,e,n,"",function(l){return l})):i!=null&&(fS(i)&&(i=LB(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(sk,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",ik(t))for(var a=0;a<t.length;a++){s=t[a];var c=r+ny(s,a);o+=kp(s,e,n,c,i)}else if(c=DB(t),typeof c=="function")for(t=c.call(t),a=0;!(s=t.next()).done;)s=s.value,c=r+ny(s,a++),o+=kp(s,e,n,c,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lh(t,e,n){if(t==null)return t;var r=[],i=0;return kp(t,r,"","",function(s){return e.call(n,s,i++)}),r}function FB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var gr={current:null},Ap={transition:null},UB={ReactCurrentDispatcher:gr,ReactCurrentBatchConfig:Ap,ReactCurrentOwner:dS};$e.Children={map:Lh,forEach:function(t,e,n){Lh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Lh(t,function(){e++}),e},toArray:function(t){return Lh(t,function(e){return e})||[]},only:function(t){if(!fS(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};$e.Component=Vu;$e.Fragment=EB;$e.Profiler=_B;$e.PureComponent=lS;$e.StrictMode=TB;$e.Suspense=PB;$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=UB;$e.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=w_({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=dS.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)E_.call(e,c)&&!T_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:ch,type:t.type,key:i,ref:s,props:r,_owner:o}};$e.createContext=function(t){return t={$$typeof:xB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:RB,_context:t},t.Consumer=t};$e.createElement=__;$e.createFactory=function(t){var e=__.bind(null,t);return e.type=t,e};$e.createRef=function(){return{current:null}};$e.forwardRef=function(t){return{$$typeof:NB,render:t}};$e.isValidElement=fS;$e.lazy=function(t){return{$$typeof:OB,_payload:{_status:-1,_result:t},_init:FB}};$e.memo=function(t,e){return{$$typeof:MB,type:t,compare:e===void 0?null:e}};$e.startTransition=function(t){var e=Ap.transition;Ap.transition={};try{t()}finally{Ap.transition=e}};$e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};$e.useCallback=function(t,e){return gr.current.useCallback(t,e)};$e.useContext=function(t){return gr.current.useContext(t)};$e.useDebugValue=function(){};$e.useDeferredValue=function(t){return gr.current.useDeferredValue(t)};$e.useEffect=function(t,e){return gr.current.useEffect(t,e)};$e.useId=function(){return gr.current.useId()};$e.useImperativeHandle=function(t,e,n){return gr.current.useImperativeHandle(t,e,n)};$e.useInsertionEffect=function(t,e){return gr.current.useInsertionEffect(t,e)};$e.useLayoutEffect=function(t,e){return gr.current.useLayoutEffect(t,e)};$e.useMemo=function(t,e){return gr.current.useMemo(t,e)};$e.useReducer=function(t,e,n){return gr.current.useReducer(t,e,n)};$e.useRef=function(t){return gr.current.useRef(t)};$e.useState=function(t){return gr.current.useState(t)};$e.useSyncExternalStore=function(t,e,n){return gr.current.useSyncExternalStore(t,e,n)};$e.useTransition=function(){return gr.current.useTransition()};$e.version="18.2.0";S_.exports=$e;var w=S_.exports;const mt=ah(w),VB=C_({__proto__:null,default:mt},[w]);var GB=w,WB=Symbol.for("react.element"),jB=Symbol.for("react.fragment"),HB=Object.prototype.hasOwnProperty,$B=GB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zB={key:!0,ref:!0,__self:!0,__source:!0};function R_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)HB.call(e,r)&&!zB.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:WB,type:t,key:s,ref:o,props:i,_owner:$B.current}}Nm.Fragment=jB;Nm.jsx=R_;Nm.jsxs=R_;I_.exports=Nm;var J=I_.exports,S0={},x_={exports:{}},ti={},N_={exports:{}},P_={};(function(t){function e(j,X){var re=j.length;j.push(X);e:for(;0<re;){var Z=re-1>>>1,ie=j[Z];if(0<i(ie,X))j[Z]=X,j[re]=ie,re=Z;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var X=j[0],re=j.pop();if(re!==X){j[0]=re;e:for(var Z=0,ie=j.length,ke=ie>>>1;Z<ke;){var Ee=2*(Z+1)-1,ge=j[Ee],Te=Ee+1,Qe=j[Te];if(0>i(ge,re))Te<ie&&0>i(Qe,ge)?(j[Z]=Qe,j[Te]=re,Z=Te):(j[Z]=ge,j[Ee]=re,Z=Ee);else if(Te<ie&&0>i(Qe,re))j[Z]=Qe,j[Te]=re,Z=Te;else break e}}return X}function i(j,X){var re=j.sortIndex-X.sortIndex;return re!==0?re:j.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(j){for(var X=n(l);X!==null;){if(X.callback===null)r(l);else if(X.startTime<=j)r(l),X.sortIndex=X.expirationTime,e(c,X);else break;X=n(l)}}function E(j){if(m=!1,S(j),!p)if(n(c)!==null)p=!0,$(k);else{var X=n(l);X!==null&&q(E,X.startTime-j)}}function k(j,X){p=!1,m&&(m=!1,g(_),_=-1),h=!0;var re=f;try{for(S(X),d=n(c);d!==null&&(!(d.expirationTime>X)||j&&!O());){var Z=d.callback;if(typeof Z=="function"){d.callback=null,f=d.priorityLevel;var ie=Z(d.expirationTime<=X);X=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(c)&&r(c),S(X)}else r(c);d=n(c)}if(d!==null)var ke=!0;else{var Ee=n(l);Ee!==null&&q(E,Ee.startTime-X),ke=!1}return ke}finally{d=null,f=re,h=!1}}var b=!1,A=null,_=-1,P=5,N=-1;function O(){return!(t.unstable_now()-N<P)}function D(){if(A!==null){var j=t.unstable_now();N=j;var X=!0;try{X=A(!0,j)}finally{X?U():(b=!1,A=null)}}else b=!1}var U;if(typeof v=="function")U=function(){v(D)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,z=G.port2;G.port1.onmessage=D,U=function(){z.postMessage(null)}}else U=function(){y(D,0)};function $(j){A=j,b||(b=!0,U())}function q(j,X){_=y(function(){j(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,$(k))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var re=f;f=X;try{return j()}finally{f=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,X){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var re=f;f=j;try{return X()}finally{f=re}},t.unstable_scheduleCallback=function(j,X,re){var Z=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?Z+re:Z):re=Z,j){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=re+ie,j={id:u++,callback:X,priorityLevel:j,startTime:re,expirationTime:ie,sortIndex:-1},re>Z?(j.sortIndex=re,e(l,j),n(c)===null&&j===n(l)&&(m?(g(_),_=-1):m=!0,q(E,re-Z))):(j.sortIndex=ie,e(c,j),p||h||(p=!0,$(k))),j},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(j){var X=f;return function(){var re=f;f=X;try{return j.apply(this,arguments)}finally{f=re}}}})(P_);N_.exports=P_;var ZB=N_.exports,M_=w,Qr=ZB;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O_=new Set,pf={};function Jc(t,e){vu(t,e),vu(t+"Capture",e)}function vu(t,e){for(pf[t]=e,t=0;t<e.length;t++)O_.add(e[t])}var Do=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),b0=Object.prototype.hasOwnProperty,XB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ok={},ak={};function KB(t){return b0.call(ak,t)?!0:b0.call(ok,t)?!1:XB.test(t)?ak[t]=!0:(ok[t]=!0,!1)}function JB(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function YB(t,e,n,r){if(e===null||typeof e>"u"||JB(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var hS=/[\-:]([a-z])/g;function pS(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(hS,pS);Gn[e]=new mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(hS,pS);Gn[e]=new mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(hS,pS);Gn[e]=new mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new mr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new mr(t,1,!1,t.toLowerCase(),null,!0,!0)});function gS(t,e,n,r){var i=Gn.hasOwnProperty(e)?Gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(YB(e,n,i,r)&&(n=null),r||i===null?KB(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Zo=M_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bh=Symbol.for("react.element"),bl=Symbol.for("react.portal"),wl=Symbol.for("react.fragment"),mS=Symbol.for("react.strict_mode"),w0=Symbol.for("react.profiler"),D_=Symbol.for("react.provider"),L_=Symbol.for("react.context"),vS=Symbol.for("react.forward_ref"),k0=Symbol.for("react.suspense"),A0=Symbol.for("react.suspense_list"),yS=Symbol.for("react.memo"),ua=Symbol.for("react.lazy"),B_=Symbol.for("react.offscreen"),ck=Symbol.iterator;function cd(t){return t===null||typeof t!="object"?null:(t=ck&&t[ck]||t["@@iterator"],typeof t=="function"?t:null)}var jt=Object.assign,ry;function xd(t){if(ry===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ry=e&&e[1]||""}return`
`+ry+t}var iy=!1;function sy(t,e){if(!t||iy)return"";iy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=a);break}}}finally{iy=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?xd(t):""}function qB(t){switch(t.tag){case 5:return xd(t.type);case 16:return xd("Lazy");case 13:return xd("Suspense");case 19:return xd("SuspenseList");case 0:case 2:case 15:return t=sy(t.type,!1),t;case 11:return t=sy(t.type.render,!1),t;case 1:return t=sy(t.type,!0),t;default:return""}}function E0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wl:return"Fragment";case bl:return"Portal";case w0:return"Profiler";case mS:return"StrictMode";case k0:return"Suspense";case A0:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case L_:return(t.displayName||"Context")+".Consumer";case D_:return(t._context.displayName||"Context")+".Provider";case vS:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yS:return e=t.displayName||null,e!==null?e:E0(t.type)||"Memo";case ua:e=t._payload,t=t._init;try{return E0(t(e))}catch{}}return null}function QB(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return E0(e);case 8:return e===mS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function za(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function F_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eF(t){var e=F_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Fh(t){t._valueTracker||(t._valueTracker=eF(t))}function U_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=F_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function dg(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function T0(t,e){var n=e.checked;return jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=za(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function V_(t,e){e=e.checked,e!=null&&gS(t,"checked",e,!1)}function _0(t,e){V_(t,e);var n=za(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?R0(t,e.type,n):e.hasOwnProperty("defaultValue")&&R0(t,e.type,za(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function R0(t,e,n){(e!=="number"||dg(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Nd=Array.isArray;function $l(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+za(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function x0(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(oe(92));if(Nd(n)){if(1<n.length)throw Error(oe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:za(n)}}function G_(t,e){var n=za(e.value),r=za(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function fk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function W_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function N0(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?W_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uh,j_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uh=Uh||document.createElement("div"),Uh.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uh.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function gf(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $d={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tF=["Webkit","ms","Moz","O"];Object.keys($d).forEach(function(t){tF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$d[e]=$d[t]})});function H_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$d.hasOwnProperty(t)&&$d[t]?(""+e).trim():e+"px"}function $_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=H_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var nF=jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function P0(t,e){if(e){if(nF[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function M0(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var O0=null;function CS(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var D0=null,zl=null,Zl=null;function hk(t){if(t=dh(t)){if(typeof D0!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=Lm(e),D0(t.stateNode,t.type,e))}}function z_(t){zl?Zl?Zl.push(t):Zl=[t]:zl=t}function Z_(){if(zl){var t=zl,e=Zl;if(Zl=zl=null,hk(t),e)for(t=0;t<e.length;t++)hk(e[t])}}function X_(t,e){return t(e)}function K_(){}var oy=!1;function J_(t,e,n){if(oy)return t(e,n);oy=!0;try{return X_(t,e,n)}finally{oy=!1,(zl!==null||Zl!==null)&&(K_(),Z_())}}function mf(t,e){var n=t.stateNode;if(n===null)return null;var r=Lm(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(oe(231,e,typeof n));return n}var L0=!1;if(Do)try{var ld={};Object.defineProperty(ld,"passive",{get:function(){L0=!0}}),window.addEventListener("test",ld,ld),window.removeEventListener("test",ld,ld)}catch{L0=!1}function rF(t,e,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var zd=!1,fg=null,hg=!1,B0=null,iF={onError:function(t){zd=!0,fg=t}};function sF(t,e,n,r,i,s,o,a,c){zd=!1,fg=null,rF.apply(iF,arguments)}function oF(t,e,n,r,i,s,o,a,c){if(sF.apply(this,arguments),zd){if(zd){var l=fg;zd=!1,fg=null}else throw Error(oe(198));hg||(hg=!0,B0=l)}}function Yc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Y_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function pk(t){if(Yc(t)!==t)throw Error(oe(188))}function aF(t){var e=t.alternate;if(!e){if(e=Yc(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return pk(i),t;if(s===r)return pk(i),e;s=s.sibling}throw Error(oe(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(oe(189))}}if(n.alternate!==r)throw Error(oe(190))}if(n.tag!==3)throw Error(oe(188));return n.stateNode.current===n?t:e}function q_(t){return t=aF(t),t!==null?Q_(t):null}function Q_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q_(t);if(e!==null)return e;t=t.sibling}return null}var eR=Qr.unstable_scheduleCallback,gk=Qr.unstable_cancelCallback,cF=Qr.unstable_shouldYield,lF=Qr.unstable_requestPaint,en=Qr.unstable_now,uF=Qr.unstable_getCurrentPriorityLevel,IS=Qr.unstable_ImmediatePriority,tR=Qr.unstable_UserBlockingPriority,pg=Qr.unstable_NormalPriority,dF=Qr.unstable_LowPriority,nR=Qr.unstable_IdlePriority,Pm=null,Bs=null;function fF(t){if(Bs&&typeof Bs.onCommitFiberRoot=="function")try{Bs.onCommitFiberRoot(Pm,t,void 0,(t.current.flags&128)===128)}catch{}}var $i=Math.clz32?Math.clz32:gF,hF=Math.log,pF=Math.LN2;function gF(t){return t>>>=0,t===0?32:31-(hF(t)/pF|0)|0}var Vh=64,Gh=4194304;function Pd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function gg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pd(a):(s&=o,s!==0&&(r=Pd(s)))}else o=n&~i,o!==0?r=Pd(o):s!==0&&(r=Pd(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-$i(e),i=1<<n,r|=t[n],e&=~i;return r}function mF(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vF(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-$i(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=mF(a,e)):c<=e&&(t.expiredLanes|=a),s&=~a}}function F0(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function rR(){var t=Vh;return Vh<<=1,!(Vh&4194240)&&(Vh=64),t}function ay(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function lh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-$i(e),t[e]=n}function yF(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-$i(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function SS(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-$i(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ot=0;function iR(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var sR,bS,oR,aR,cR,U0=!1,Wh=[],Pa=null,Ma=null,Oa=null,vf=new Map,yf=new Map,va=[],CF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mk(t,e){switch(t){case"focusin":case"focusout":Pa=null;break;case"dragenter":case"dragleave":Ma=null;break;case"mouseover":case"mouseout":Oa=null;break;case"pointerover":case"pointerout":vf.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yf.delete(e.pointerId)}}function ud(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=dh(e),e!==null&&bS(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function IF(t,e,n,r,i){switch(e){case"focusin":return Pa=ud(Pa,t,e,n,r,i),!0;case"dragenter":return Ma=ud(Ma,t,e,n,r,i),!0;case"mouseover":return Oa=ud(Oa,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vf.set(s,ud(vf.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yf.set(s,ud(yf.get(s)||null,t,e,n,r,i)),!0}return!1}function lR(t){var e=vc(t.target);if(e!==null){var n=Yc(e);if(n!==null){if(e=n.tag,e===13){if(e=Y_(n),e!==null){t.blockedOn=e,cR(t.priority,function(){oR(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ep(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=V0(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);O0=r,n.target.dispatchEvent(r),O0=null}else return e=dh(n),e!==null&&bS(e),t.blockedOn=n,!1;e.shift()}return!0}function vk(t,e,n){Ep(t)&&n.delete(e)}function SF(){U0=!1,Pa!==null&&Ep(Pa)&&(Pa=null),Ma!==null&&Ep(Ma)&&(Ma=null),Oa!==null&&Ep(Oa)&&(Oa=null),vf.forEach(vk),yf.forEach(vk)}function dd(t,e){t.blockedOn===e&&(t.blockedOn=null,U0||(U0=!0,Qr.unstable_scheduleCallback(Qr.unstable_NormalPriority,SF)))}function Cf(t){function e(i){return dd(i,t)}if(0<Wh.length){dd(Wh[0],t);for(var n=1;n<Wh.length;n++){var r=Wh[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pa!==null&&dd(Pa,t),Ma!==null&&dd(Ma,t),Oa!==null&&dd(Oa,t),vf.forEach(e),yf.forEach(e),n=0;n<va.length;n++)r=va[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<va.length&&(n=va[0],n.blockedOn===null);)lR(n),n.blockedOn===null&&va.shift()}var Xl=Zo.ReactCurrentBatchConfig,mg=!0;function bF(t,e,n,r){var i=ot,s=Xl.transition;Xl.transition=null;try{ot=1,wS(t,e,n,r)}finally{ot=i,Xl.transition=s}}function wF(t,e,n,r){var i=ot,s=Xl.transition;Xl.transition=null;try{ot=4,wS(t,e,n,r)}finally{ot=i,Xl.transition=s}}function wS(t,e,n,r){if(mg){var i=V0(t,e,n,r);if(i===null)vy(t,e,r,vg,n),mk(t,r);else if(IF(i,t,e,n,r))r.stopPropagation();else if(mk(t,r),e&4&&-1<CF.indexOf(t)){for(;i!==null;){var s=dh(i);if(s!==null&&sR(s),s=V0(t,e,n,r),s===null&&vy(t,e,r,vg,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else vy(t,e,r,null,n)}}var vg=null;function V0(t,e,n,r){if(vg=null,t=CS(r),t=vc(t),t!==null)if(e=Yc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Y_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return vg=t,null}function uR(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uF()){case IS:return 1;case tR:return 4;case pg:case dF:return 16;case nR:return 536870912;default:return 16}default:return 16}}var Sa=null,kS=null,Tp=null;function dR(){if(Tp)return Tp;var t,e=kS,n=e.length,r,i="value"in Sa?Sa.value:Sa.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Tp=i.slice(t,1<r?1-r:void 0)}function _p(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function jh(){return!0}function yk(){return!1}function ni(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jh:yk,this.isPropagationStopped=yk,this}return jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=jh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=jh)},persist:function(){},isPersistent:jh}),e}var Gu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},AS=ni(Gu),uh=jt({},Gu,{view:0,detail:0}),kF=ni(uh),cy,ly,fd,Mm=jt({},uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ES,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fd&&(fd&&t.type==="mousemove"?(cy=t.screenX-fd.screenX,ly=t.screenY-fd.screenY):ly=cy=0,fd=t),cy)},movementY:function(t){return"movementY"in t?t.movementY:ly}}),Ck=ni(Mm),AF=jt({},Mm,{dataTransfer:0}),EF=ni(AF),TF=jt({},uh,{relatedTarget:0}),uy=ni(TF),_F=jt({},Gu,{animationName:0,elapsedTime:0,pseudoElement:0}),RF=ni(_F),xF=jt({},Gu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),NF=ni(xF),PF=jt({},Gu,{data:0}),Ik=ni(PF),MF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},OF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},DF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=DF[t])?!!e[t]:!1}function ES(){return LF}var BF=jt({},uh,{key:function(t){if(t.key){var e=MF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_p(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?OF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ES,charCode:function(t){return t.type==="keypress"?_p(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_p(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FF=ni(BF),UF=jt({},Mm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sk=ni(UF),VF=jt({},uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ES}),GF=ni(VF),WF=jt({},Gu,{propertyName:0,elapsedTime:0,pseudoElement:0}),jF=ni(WF),HF=jt({},Mm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$F=ni(HF),zF=[9,13,27,32],TS=Do&&"CompositionEvent"in window,Zd=null;Do&&"documentMode"in document&&(Zd=document.documentMode);var ZF=Do&&"TextEvent"in window&&!Zd,fR=Do&&(!TS||Zd&&8<Zd&&11>=Zd),bk=" ",wk=!1;function hR(t,e){switch(t){case"keyup":return zF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pR(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var kl=!1;function XF(t,e){switch(t){case"compositionend":return pR(e);case"keypress":return e.which!==32?null:(wk=!0,bk);case"textInput":return t=e.data,t===bk&&wk?null:t;default:return null}}function KF(t,e){if(kl)return t==="compositionend"||!TS&&hR(t,e)?(t=dR(),Tp=kS=Sa=null,kl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fR&&e.locale!=="ko"?null:e.data;default:return null}}var JF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kk(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JF[t.type]:e==="textarea"}function gR(t,e,n,r){z_(r),e=yg(e,"onChange"),0<e.length&&(n=new AS("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xd=null,If=null;function YF(t){ER(t,0)}function Om(t){var e=Tl(t);if(U_(e))return t}function qF(t,e){if(t==="change")return e}var mR=!1;if(Do){var dy;if(Do){var fy="oninput"in document;if(!fy){var Ak=document.createElement("div");Ak.setAttribute("oninput","return;"),fy=typeof Ak.oninput=="function"}dy=fy}else dy=!1;mR=dy&&(!document.documentMode||9<document.documentMode)}function Ek(){Xd&&(Xd.detachEvent("onpropertychange",vR),If=Xd=null)}function vR(t){if(t.propertyName==="value"&&Om(If)){var e=[];gR(e,If,t,CS(t)),J_(YF,e)}}function QF(t,e,n){t==="focusin"?(Ek(),Xd=e,If=n,Xd.attachEvent("onpropertychange",vR)):t==="focusout"&&Ek()}function e3(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Om(If)}function t3(t,e){if(t==="click")return Om(e)}function n3(t,e){if(t==="input"||t==="change")return Om(e)}function r3(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ki=typeof Object.is=="function"?Object.is:r3;function Sf(t,e){if(Ki(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!b0.call(e,i)||!Ki(t[i],e[i]))return!1}return!0}function Tk(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function _k(t,e){var n=Tk(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Tk(n)}}function yR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?yR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function CR(){for(var t=window,e=dg();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=dg(t.document)}return e}function _S(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function i3(t){var e=CR(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&yR(n.ownerDocument.documentElement,n)){if(r!==null&&_S(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=_k(n,s);var o=_k(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var s3=Do&&"documentMode"in document&&11>=document.documentMode,Al=null,G0=null,Kd=null,W0=!1;function Rk(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;W0||Al==null||Al!==dg(r)||(r=Al,"selectionStart"in r&&_S(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kd&&Sf(Kd,r)||(Kd=r,r=yg(G0,"onSelect"),0<r.length&&(e=new AS("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Al)))}function Hh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var El={animationend:Hh("Animation","AnimationEnd"),animationiteration:Hh("Animation","AnimationIteration"),animationstart:Hh("Animation","AnimationStart"),transitionend:Hh("Transition","TransitionEnd")},hy={},IR={};Do&&(IR=document.createElement("div").style,"AnimationEvent"in window||(delete El.animationend.animation,delete El.animationiteration.animation,delete El.animationstart.animation),"TransitionEvent"in window||delete El.transitionend.transition);function Dm(t){if(hy[t])return hy[t];if(!El[t])return t;var e=El[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in IR)return hy[t]=e[n];return t}var SR=Dm("animationend"),bR=Dm("animationiteration"),wR=Dm("animationstart"),kR=Dm("transitionend"),AR=new Map,xk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(t,e){AR.set(t,e),Jc(e,[t])}for(var py=0;py<xk.length;py++){var gy=xk[py],o3=gy.toLowerCase(),a3=gy[0].toUpperCase()+gy.slice(1);qa(o3,"on"+a3)}qa(SR,"onAnimationEnd");qa(bR,"onAnimationIteration");qa(wR,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(kR,"onTransitionEnd");vu("onMouseEnter",["mouseout","mouseover"]);vu("onMouseLeave",["mouseout","mouseover"]);vu("onPointerEnter",["pointerout","pointerover"]);vu("onPointerLeave",["pointerout","pointerover"]);Jc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Md="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c3=new Set("cancel close invalid load scroll toggle".split(" ").concat(Md));function Nk(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oF(r,e,void 0,t),t.currentTarget=null}function ER(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;Nk(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;Nk(i,a,l),s=c}}}if(hg)throw t=B0,hg=!1,B0=null,t}function Rt(t,e){var n=e[Z0];n===void 0&&(n=e[Z0]=new Set);var r=t+"__bubble";n.has(r)||(TR(e,t,2,!1),n.add(r))}function my(t,e,n){var r=0;e&&(r|=4),TR(n,t,r,e)}var $h="_reactListening"+Math.random().toString(36).slice(2);function bf(t){if(!t[$h]){t[$h]=!0,O_.forEach(function(n){n!=="selectionchange"&&(c3.has(n)||my(n,!1,t),my(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[$h]||(e[$h]=!0,my("selectionchange",!1,e))}}function TR(t,e,n,r){switch(uR(e)){case 1:var i=bF;break;case 4:i=wF;break;default:i=wS}n=i.bind(null,e,n,t),i=void 0,!L0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function vy(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=vc(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}J_(function(){var l=s,u=CS(n),d=[];e:{var f=AR.get(t);if(f!==void 0){var h=AS,p=t;switch(t){case"keypress":if(_p(n)===0)break e;case"keydown":case"keyup":h=FF;break;case"focusin":p="focus",h=uy;break;case"focusout":p="blur",h=uy;break;case"beforeblur":case"afterblur":h=uy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Ck;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=EF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=GF;break;case SR:case bR:case wR:h=RF;break;case kR:h=jF;break;case"scroll":h=kF;break;case"wheel":h=$F;break;case"copy":case"cut":case"paste":h=NF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Sk}var m=(e&4)!==0,y=!m&&t==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var v=l,S;v!==null;){S=v;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=mf(v,g),E!=null&&m.push(wf(v,E,S)))),y)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==O0&&(p=n.relatedTarget||n.fromElement)&&(vc(p)||p[Lo]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?vc(p):null,p!==null&&(y=Yc(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Ck,E="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(m=Sk,E="onPointerLeave",g="onPointerEnter",v="pointer"),y=h==null?f:Tl(h),S=p==null?f:Tl(p),f=new m(E,v+"leave",h,n,u),f.target=y,f.relatedTarget=S,E=null,vc(u)===l&&(m=new m(g,v+"enter",p,n,u),m.target=S,m.relatedTarget=y,E=m),y=E,h&&p)t:{for(m=h,g=p,v=0,S=m;S;S=dl(S))v++;for(S=0,E=g;E;E=dl(E))S++;for(;0<v-S;)m=dl(m),v--;for(;0<S-v;)g=dl(g),S--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=dl(m),g=dl(g)}m=null}else m=null;h!==null&&Pk(d,f,h,m,!1),p!==null&&y!==null&&Pk(d,y,p,m,!0)}}e:{if(f=l?Tl(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=qF;else if(kk(f))if(mR)k=n3;else{k=e3;var b=QF}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=t3);if(k&&(k=k(t,l))){gR(d,k,n,u);break e}b&&b(t,f,l),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&R0(f,"number",f.value)}switch(b=l?Tl(l):window,t){case"focusin":(kk(b)||b.contentEditable==="true")&&(Al=b,G0=l,Kd=null);break;case"focusout":Kd=G0=Al=null;break;case"mousedown":W0=!0;break;case"contextmenu":case"mouseup":case"dragend":W0=!1,Rk(d,n,u);break;case"selectionchange":if(s3)break;case"keydown":case"keyup":Rk(d,n,u)}var A;if(TS)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else kl?hR(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(fR&&n.locale!=="ko"&&(kl||_!=="onCompositionStart"?_==="onCompositionEnd"&&kl&&(A=dR()):(Sa=u,kS="value"in Sa?Sa.value:Sa.textContent,kl=!0)),b=yg(l,_),0<b.length&&(_=new Ik(_,t,null,n,u),d.push({event:_,listeners:b}),A?_.data=A:(A=pR(n),A!==null&&(_.data=A)))),(A=ZF?XF(t,n):KF(t,n))&&(l=yg(l,"onBeforeInput"),0<l.length&&(u=new Ik("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}ER(d,e)})}function wf(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yg(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mf(t,n),s!=null&&r.unshift(wf(t,s,i)),s=mf(t,e),s!=null&&r.push(wf(t,s,i))),t=t.return}return r}function dl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pk(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=mf(n,s),c!=null&&o.unshift(wf(n,c,a))):i||(c=mf(n,s),c!=null&&o.push(wf(n,c,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var l3=/\r\n?/g,u3=/\u0000|\uFFFD/g;function Mk(t){return(typeof t=="string"?t:""+t).replace(l3,`
`).replace(u3,"")}function zh(t,e,n){if(e=Mk(e),Mk(t)!==e&&n)throw Error(oe(425))}function Cg(){}var j0=null,H0=null;function $0(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var z0=typeof setTimeout=="function"?setTimeout:void 0,d3=typeof clearTimeout=="function"?clearTimeout:void 0,Ok=typeof Promise=="function"?Promise:void 0,f3=typeof queueMicrotask=="function"?queueMicrotask:typeof Ok<"u"?function(t){return Ok.resolve(null).then(t).catch(h3)}:z0;function h3(t){setTimeout(function(){throw t})}function yy(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Cf(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Cf(e)}function Da(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dk(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wu=Math.random().toString(36).slice(2),gs="__reactFiber$"+Wu,kf="__reactProps$"+Wu,Lo="__reactContainer$"+Wu,Z0="__reactEvents$"+Wu,p3="__reactListeners$"+Wu,g3="__reactHandles$"+Wu;function vc(t){var e=t[gs];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lo]||n[gs]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dk(t);t!==null;){if(n=t[gs])return n;t=Dk(t)}return e}t=n,n=t.parentNode}return null}function dh(t){return t=t[gs]||t[Lo],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Tl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function Lm(t){return t[kf]||null}var X0=[],_l=-1;function Qa(t){return{current:t}}function Ot(t){0>_l||(t.current=X0[_l],X0[_l]=null,_l--)}function Tt(t,e){_l++,X0[_l]=t.current,t.current=e}var Za={},er=Qa(Za),Rr=Qa(!1),Mc=Za;function yu(t,e){var n=t.type.contextTypes;if(!n)return Za;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function xr(t){return t=t.childContextTypes,t!=null}function Ig(){Ot(Rr),Ot(er)}function Lk(t,e,n){if(er.current!==Za)throw Error(oe(168));Tt(er,e),Tt(Rr,n)}function _R(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(oe(108,QB(t)||"Unknown",i));return jt({},n,r)}function Sg(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Za,Mc=er.current,Tt(er,t),Tt(Rr,Rr.current),!0}function Bk(t,e,n){var r=t.stateNode;if(!r)throw Error(oe(169));n?(t=_R(t,e,Mc),r.__reactInternalMemoizedMergedChildContext=t,Ot(Rr),Ot(er),Tt(er,t)):Ot(Rr),Tt(Rr,n)}var Qs=null,Bm=!1,Cy=!1;function RR(t){Qs===null?Qs=[t]:Qs.push(t)}function m3(t){Bm=!0,RR(t)}function ec(){if(!Cy&&Qs!==null){Cy=!0;var t=0,e=ot;try{var n=Qs;for(ot=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Qs=null,Bm=!1}catch(i){throw Qs!==null&&(Qs=Qs.slice(t+1)),eR(IS,ec),i}finally{ot=e,Cy=!1}}return null}var Rl=[],xl=0,bg=null,wg=0,ci=[],li=0,Oc=null,io=1,so="";function uc(t,e){Rl[xl++]=wg,Rl[xl++]=bg,bg=t,wg=e}function xR(t,e,n){ci[li++]=io,ci[li++]=so,ci[li++]=Oc,Oc=t;var r=io;t=so;var i=32-$i(r)-1;r&=~(1<<i),n+=1;var s=32-$i(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,io=1<<32-$i(e)+i|n<<i|r,so=s+t}else io=1<<s|n<<i|r,so=t}function RS(t){t.return!==null&&(uc(t,1),xR(t,1,0))}function xS(t){for(;t===bg;)bg=Rl[--xl],Rl[xl]=null,wg=Rl[--xl],Rl[xl]=null;for(;t===Oc;)Oc=ci[--li],ci[li]=null,so=ci[--li],ci[li]=null,io=ci[--li],ci[li]=null}var Yr=null,Kr=null,Ft=!1,Li=null;function NR(t,e){var n=di(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Fk(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yr=t,Kr=Da(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yr=t,Kr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Oc!==null?{id:io,overflow:so}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=di(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Yr=t,Kr=null,!0):!1;default:return!1}}function K0(t){return(t.mode&1)!==0&&(t.flags&128)===0}function J0(t){if(Ft){var e=Kr;if(e){var n=e;if(!Fk(t,e)){if(K0(t))throw Error(oe(418));e=Da(n.nextSibling);var r=Yr;e&&Fk(t,e)?NR(r,n):(t.flags=t.flags&-4097|2,Ft=!1,Yr=t)}}else{if(K0(t))throw Error(oe(418));t.flags=t.flags&-4097|2,Ft=!1,Yr=t}}}function Uk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yr=t}function Zh(t){if(t!==Yr)return!1;if(!Ft)return Uk(t),Ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!$0(t.type,t.memoizedProps)),e&&(e=Kr)){if(K0(t))throw PR(),Error(oe(418));for(;e;)NR(t,e),e=Da(e.nextSibling)}if(Uk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Kr=Da(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Kr=null}}else Kr=Yr?Da(t.stateNode.nextSibling):null;return!0}function PR(){for(var t=Kr;t;)t=Da(t.nextSibling)}function Cu(){Kr=Yr=null,Ft=!1}function NS(t){Li===null?Li=[t]:Li.push(t)}var v3=Zo.ReactCurrentBatchConfig;function ki(t,e){if(t&&t.defaultProps){e=jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var kg=Qa(null),Ag=null,Nl=null,PS=null;function MS(){PS=Nl=Ag=null}function OS(t){var e=kg.current;Ot(kg),t._currentValue=e}function Y0(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Kl(t,e){Ag=t,PS=Nl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Er=!0),t.firstContext=null)}function mi(t){var e=t._currentValue;if(PS!==t)if(t={context:t,memoizedValue:e,next:null},Nl===null){if(Ag===null)throw Error(oe(308));Nl=t,Ag.dependencies={lanes:0,firstContext:t}}else Nl=Nl.next=t;return e}var yc=null;function DS(t){yc===null?yc=[t]:yc.push(t)}function MR(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,DS(e)):(n.next=i.next,i.next=n),e.interleaved=n,Bo(t,r)}function Bo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var da=!1;function LS(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function No(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function La(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Bo(t,n)}return i=r.interleaved,i===null?(e.next=e,DS(r)):(e.next=i.next,i.next=e),r.interleaved=e,Bo(t,n)}function Rp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,SS(t,n)}}function Vk(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Eg(t,e,n,r){var i=t.updateQueue;da=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(f=e,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=jt({},d,f);break e;case 2:da=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Lc|=o,t.lanes=o,t.memoizedState=d}}function Gk(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(oe(191,i));i.call(r)}}}var DR=new M_.Component().refs;function q0(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Fm={isMounted:function(t){return(t=t._reactInternals)?Yc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=pr(),i=Fa(t),s=No(r,i);s.payload=e,n!=null&&(s.callback=n),e=La(t,s,i),e!==null&&(zi(e,t,i,r),Rp(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=pr(),i=Fa(t),s=No(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=La(t,s,i),e!==null&&(zi(e,t,i,r),Rp(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=pr(),r=Fa(t),i=No(n,r);i.tag=2,e!=null&&(i.callback=e),e=La(t,i,r),e!==null&&(zi(e,t,r,n),Rp(e,t,r))}};function Wk(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Sf(n,r)||!Sf(i,s):!0}function LR(t,e,n){var r=!1,i=Za,s=e.contextType;return typeof s=="object"&&s!==null?s=mi(s):(i=xr(e)?Mc:er.current,r=e.contextTypes,s=(r=r!=null)?yu(t,i):Za),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Fm,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function jk(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Fm.enqueueReplaceState(e,e.state,null)}function Q0(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=DR,LS(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=mi(s):(s=xr(e)?Mc:er.current,i.context=yu(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(q0(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Fm.enqueueReplaceState(i,i.state,null),Eg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function hd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(oe(309));var r=n.stateNode}if(!r)throw Error(oe(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===DR&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(oe(284));if(!n._owner)throw Error(oe(290,t))}return t}function Xh(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Hk(t){var e=t._init;return e(t._payload)}function BR(t){function e(g,v){if(t){var S=g.deletions;S===null?(g.deletions=[v],g.flags|=16):S.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=Ua(g,v),g.index=0,g.sibling=null,g}function s(g,v,S){return g.index=S,t?(S=g.alternate,S!==null?(S=S.index,S<v?(g.flags|=2,v):S):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,v,S,E){return v===null||v.tag!==6?(v=Ey(S,g.mode,E),v.return=g,v):(v=i(v,S),v.return=g,v)}function c(g,v,S,E){var k=S.type;return k===wl?u(g,v,S.props.children,E,S.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ua&&Hk(k)===v.type)?(E=i(v,S.props),E.ref=hd(g,v,S),E.return=g,E):(E=Dp(S.type,S.key,S.props,null,g.mode,E),E.ref=hd(g,v,S),E.return=g,E)}function l(g,v,S,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=Ty(S,g.mode,E),v.return=g,v):(v=i(v,S.children||[]),v.return=g,v)}function u(g,v,S,E,k){return v===null||v.tag!==7?(v=Rc(S,g.mode,E,k),v.return=g,v):(v=i(v,S),v.return=g,v)}function d(g,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Ey(""+v,g.mode,S),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Bh:return S=Dp(v.type,v.key,v.props,null,g.mode,S),S.ref=hd(g,null,v),S.return=g,S;case bl:return v=Ty(v,g.mode,S),v.return=g,v;case ua:var E=v._init;return d(g,E(v._payload),S)}if(Nd(v)||cd(v))return v=Rc(v,g.mode,S,null),v.return=g,v;Xh(g,v)}return null}function f(g,v,S,E){var k=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:a(g,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bh:return S.key===k?c(g,v,S,E):null;case bl:return S.key===k?l(g,v,S,E):null;case ua:return k=S._init,f(g,v,k(S._payload),E)}if(Nd(S)||cd(S))return k!==null?null:u(g,v,S,E,null);Xh(g,S)}return null}function h(g,v,S,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(v,g,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Bh:return g=g.get(E.key===null?S:E.key)||null,c(v,g,E,k);case bl:return g=g.get(E.key===null?S:E.key)||null,l(v,g,E,k);case ua:var b=E._init;return h(g,v,S,b(E._payload),k)}if(Nd(E)||cd(E))return g=g.get(S)||null,u(v,g,E,k,null);Xh(v,E)}return null}function p(g,v,S,E){for(var k=null,b=null,A=v,_=v=0,P=null;A!==null&&_<S.length;_++){A.index>_?(P=A,A=null):P=A.sibling;var N=f(g,A,S[_],E);if(N===null){A===null&&(A=P);break}t&&A&&N.alternate===null&&e(g,A),v=s(N,v,_),b===null?k=N:b.sibling=N,b=N,A=P}if(_===S.length)return n(g,A),Ft&&uc(g,_),k;if(A===null){for(;_<S.length;_++)A=d(g,S[_],E),A!==null&&(v=s(A,v,_),b===null?k=A:b.sibling=A,b=A);return Ft&&uc(g,_),k}for(A=r(g,A);_<S.length;_++)P=h(A,g,_,S[_],E),P!==null&&(t&&P.alternate!==null&&A.delete(P.key===null?_:P.key),v=s(P,v,_),b===null?k=P:b.sibling=P,b=P);return t&&A.forEach(function(O){return e(g,O)}),Ft&&uc(g,_),k}function m(g,v,S,E){var k=cd(S);if(typeof k!="function")throw Error(oe(150));if(S=k.call(S),S==null)throw Error(oe(151));for(var b=k=null,A=v,_=v=0,P=null,N=S.next();A!==null&&!N.done;_++,N=S.next()){A.index>_?(P=A,A=null):P=A.sibling;var O=f(g,A,N.value,E);if(O===null){A===null&&(A=P);break}t&&A&&O.alternate===null&&e(g,A),v=s(O,v,_),b===null?k=O:b.sibling=O,b=O,A=P}if(N.done)return n(g,A),Ft&&uc(g,_),k;if(A===null){for(;!N.done;_++,N=S.next())N=d(g,N.value,E),N!==null&&(v=s(N,v,_),b===null?k=N:b.sibling=N,b=N);return Ft&&uc(g,_),k}for(A=r(g,A);!N.done;_++,N=S.next())N=h(A,g,_,N.value,E),N!==null&&(t&&N.alternate!==null&&A.delete(N.key===null?_:N.key),v=s(N,v,_),b===null?k=N:b.sibling=N,b=N);return t&&A.forEach(function(D){return e(g,D)}),Ft&&uc(g,_),k}function y(g,v,S,E){if(typeof S=="object"&&S!==null&&S.type===wl&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Bh:e:{for(var k=S.key,b=v;b!==null;){if(b.key===k){if(k=S.type,k===wl){if(b.tag===7){n(g,b.sibling),v=i(b,S.props.children),v.return=g,g=v;break e}}else if(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ua&&Hk(k)===b.type){n(g,b.sibling),v=i(b,S.props),v.ref=hd(g,b,S),v.return=g,g=v;break e}n(g,b);break}else e(g,b);b=b.sibling}S.type===wl?(v=Rc(S.props.children,g.mode,E,S.key),v.return=g,g=v):(E=Dp(S.type,S.key,S.props,null,g.mode,E),E.ref=hd(g,v,S),E.return=g,g=E)}return o(g);case bl:e:{for(b=S.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(g,v.sibling),v=i(v,S.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=Ty(S,g.mode,E),v.return=g,g=v}return o(g);case ua:return b=S._init,y(g,v,b(S._payload),E)}if(Nd(S))return p(g,v,S,E);if(cd(S))return m(g,v,S,E);Xh(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,S),v.return=g,g=v):(n(g,v),v=Ey(S,g.mode,E),v.return=g,g=v),o(g)):n(g,v)}return y}var Iu=BR(!0),FR=BR(!1),fh={},Fs=Qa(fh),Af=Qa(fh),Ef=Qa(fh);function Cc(t){if(t===fh)throw Error(oe(174));return t}function BS(t,e){switch(Tt(Ef,e),Tt(Af,t),Tt(Fs,fh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:N0(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=N0(e,t)}Ot(Fs),Tt(Fs,e)}function Su(){Ot(Fs),Ot(Af),Ot(Ef)}function UR(t){Cc(Ef.current);var e=Cc(Fs.current),n=N0(e,t.type);e!==n&&(Tt(Af,t),Tt(Fs,n))}function FS(t){Af.current===t&&(Ot(Fs),Ot(Af))}var Vt=Qa(0);function Tg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Iy=[];function US(){for(var t=0;t<Iy.length;t++)Iy[t]._workInProgressVersionPrimary=null;Iy.length=0}var xp=Zo.ReactCurrentDispatcher,Sy=Zo.ReactCurrentBatchConfig,Dc=0,Wt=null,fn=null,En=null,_g=!1,Jd=!1,Tf=0,y3=0;function Zn(){throw Error(oe(321))}function VS(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ki(t[n],e[n]))return!1;return!0}function GS(t,e,n,r,i,s){if(Dc=s,Wt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xp.current=t===null||t.memoizedState===null?b3:w3,t=n(r,i),Jd){s=0;do{if(Jd=!1,Tf=0,25<=s)throw Error(oe(301));s+=1,En=fn=null,e.updateQueue=null,xp.current=k3,t=n(r,i)}while(Jd)}if(xp.current=Rg,e=fn!==null&&fn.next!==null,Dc=0,En=fn=Wt=null,_g=!1,e)throw Error(oe(300));return t}function WS(){var t=Tf!==0;return Tf=0,t}function cs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Wt.memoizedState=En=t:En=En.next=t,En}function vi(){if(fn===null){var t=Wt.alternate;t=t!==null?t.memoizedState:null}else t=fn.next;var e=En===null?Wt.memoizedState:En.next;if(e!==null)En=e,fn=t;else{if(t===null)throw Error(oe(310));fn=t,t={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},En===null?Wt.memoizedState=En=t:En=En.next=t}return En}function _f(t,e){return typeof e=="function"?e(t):e}function by(t){var e=vi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=fn,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((Dc&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Wt.lanes|=u,Lc|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,Ki(r,e.memoizedState)||(Er=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Wt.lanes|=s,Lc|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function wy(t){var e=vi(),n=e.queue;if(n===null)throw Error(oe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Ki(s,e.memoizedState)||(Er=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function VR(){}function GR(t,e){var n=Wt,r=vi(),i=e(),s=!Ki(r.memoizedState,i);if(s&&(r.memoizedState=i,Er=!0),r=r.queue,jS(HR.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||En!==null&&En.memoizedState.tag&1){if(n.flags|=2048,Rf(9,jR.bind(null,n,r,i,e),void 0,null),Rn===null)throw Error(oe(349));Dc&30||WR(n,e,i)}return i}function WR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function jR(t,e,n,r){e.value=n,e.getSnapshot=r,$R(e)&&zR(t)}function HR(t,e,n){return n(function(){$R(e)&&zR(t)})}function $R(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ki(t,n)}catch{return!0}}function zR(t){var e=Bo(t,1);e!==null&&zi(e,t,1,-1)}function $k(t){var e=cs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_f,lastRenderedState:t},e.queue=t,t=t.dispatch=S3.bind(null,Wt,t),[e.memoizedState,t]}function Rf(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Wt.updateQueue,e===null?(e={lastEffect:null,stores:null},Wt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ZR(){return vi().memoizedState}function Np(t,e,n,r){var i=cs();Wt.flags|=t,i.memoizedState=Rf(1|e,n,void 0,r===void 0?null:r)}function Um(t,e,n,r){var i=vi();r=r===void 0?null:r;var s=void 0;if(fn!==null){var o=fn.memoizedState;if(s=o.destroy,r!==null&&VS(r,o.deps)){i.memoizedState=Rf(e,n,s,r);return}}Wt.flags|=t,i.memoizedState=Rf(1|e,n,s,r)}function zk(t,e){return Np(8390656,8,t,e)}function jS(t,e){return Um(2048,8,t,e)}function XR(t,e){return Um(4,2,t,e)}function KR(t,e){return Um(4,4,t,e)}function JR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YR(t,e,n){return n=n!=null?n.concat([t]):null,Um(4,4,JR.bind(null,e,t),n)}function HS(){}function qR(t,e){var n=vi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VS(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function QR(t,e){var n=vi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&VS(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ex(t,e,n){return Dc&21?(Ki(n,e)||(n=rR(),Wt.lanes|=n,Lc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Er=!0),t.memoizedState=n)}function C3(t,e){var n=ot;ot=n!==0&&4>n?n:4,t(!0);var r=Sy.transition;Sy.transition={};try{t(!1),e()}finally{ot=n,Sy.transition=r}}function tx(){return vi().memoizedState}function I3(t,e,n){var r=Fa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},nx(t))rx(e,n);else if(n=MR(t,e,n,r),n!==null){var i=pr();zi(n,t,r,i),ix(n,e,r)}}function S3(t,e,n){var r=Fa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(nx(t))rx(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Ki(a,o)){var c=e.interleaved;c===null?(i.next=i,DS(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=MR(t,e,i,r),n!==null&&(i=pr(),zi(n,t,r,i),ix(n,e,r))}}function nx(t){var e=t.alternate;return t===Wt||e!==null&&e===Wt}function rx(t,e){Jd=_g=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ix(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,SS(t,n)}}var Rg={readContext:mi,useCallback:Zn,useContext:Zn,useEffect:Zn,useImperativeHandle:Zn,useInsertionEffect:Zn,useLayoutEffect:Zn,useMemo:Zn,useReducer:Zn,useRef:Zn,useState:Zn,useDebugValue:Zn,useDeferredValue:Zn,useTransition:Zn,useMutableSource:Zn,useSyncExternalStore:Zn,useId:Zn,unstable_isNewReconciler:!1},b3={readContext:mi,useCallback:function(t,e){return cs().memoizedState=[t,e===void 0?null:e],t},useContext:mi,useEffect:zk,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Np(4194308,4,JR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Np(4194308,4,t,e)},useInsertionEffect:function(t,e){return Np(4,2,t,e)},useMemo:function(t,e){var n=cs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=cs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=I3.bind(null,Wt,t),[r.memoizedState,t]},useRef:function(t){var e=cs();return t={current:t},e.memoizedState=t},useState:$k,useDebugValue:HS,useDeferredValue:function(t){return cs().memoizedState=t},useTransition:function(){var t=$k(!1),e=t[0];return t=C3.bind(null,t[1]),cs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Wt,i=cs();if(Ft){if(n===void 0)throw Error(oe(407));n=n()}else{if(n=e(),Rn===null)throw Error(oe(349));Dc&30||WR(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,zk(HR.bind(null,r,s,t),[t]),r.flags|=2048,Rf(9,jR.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=cs(),e=Rn.identifierPrefix;if(Ft){var n=so,r=io;n=(r&~(1<<32-$i(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Tf++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=y3++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},w3={readContext:mi,useCallback:qR,useContext:mi,useEffect:jS,useImperativeHandle:YR,useInsertionEffect:XR,useLayoutEffect:KR,useMemo:QR,useReducer:by,useRef:ZR,useState:function(){return by(_f)},useDebugValue:HS,useDeferredValue:function(t){var e=vi();return ex(e,fn.memoizedState,t)},useTransition:function(){var t=by(_f)[0],e=vi().memoizedState;return[t,e]},useMutableSource:VR,useSyncExternalStore:GR,useId:tx,unstable_isNewReconciler:!1},k3={readContext:mi,useCallback:qR,useContext:mi,useEffect:jS,useImperativeHandle:YR,useInsertionEffect:XR,useLayoutEffect:KR,useMemo:QR,useReducer:wy,useRef:ZR,useState:function(){return wy(_f)},useDebugValue:HS,useDeferredValue:function(t){var e=vi();return fn===null?e.memoizedState=t:ex(e,fn.memoizedState,t)},useTransition:function(){var t=wy(_f)[0],e=vi().memoizedState;return[t,e]},useMutableSource:VR,useSyncExternalStore:GR,useId:tx,unstable_isNewReconciler:!1};function bu(t,e){try{var n="",r=e;do n+=qB(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function ky(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function eC(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var A3=typeof WeakMap=="function"?WeakMap:Map;function sx(t,e,n){n=No(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ng||(Ng=!0,uC=r),eC(t,e)},n}function ox(t,e,n){n=No(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){eC(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){eC(t,e),typeof r!="function"&&(Ba===null?Ba=new Set([this]):Ba.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Zk(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new A3;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=U3.bind(null,t,e,n),e.then(t,t))}function Xk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Kk(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=No(-1,1),e.tag=2,La(n,e,1))),n.lanes|=1),t)}var E3=Zo.ReactCurrentOwner,Er=!1;function sr(t,e,n,r){e.child=t===null?FR(e,null,n,r):Iu(e,t.child,n,r)}function Jk(t,e,n,r,i){n=n.render;var s=e.ref;return Kl(e,i),r=GS(t,e,n,r,s,i),n=WS(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fo(t,e,i)):(Ft&&n&&RS(e),e.flags|=1,sr(t,e,r,i),e.child)}function Yk(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!qS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,ax(t,e,s,r,i)):(t=Dp(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Sf,n(o,r)&&t.ref===e.ref)return Fo(t,e,i)}return e.flags|=1,t=Ua(s,r),t.ref=e.ref,t.return=e,e.child=t}function ax(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Sf(s,r)&&t.ref===e.ref)if(Er=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Er=!0);else return e.lanes=t.lanes,Fo(t,e,i)}return tC(t,e,n,r,i)}function cx(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tt(Ml,Wr),Wr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tt(Ml,Wr),Wr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Tt(Ml,Wr),Wr|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Tt(Ml,Wr),Wr|=r;return sr(t,e,i,n),e.child}function lx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tC(t,e,n,r,i){var s=xr(n)?Mc:er.current;return s=yu(e,s),Kl(e,i),n=GS(t,e,n,r,s,i),r=WS(),t!==null&&!Er?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Fo(t,e,i)):(Ft&&r&&RS(e),e.flags|=1,sr(t,e,n,i),e.child)}function qk(t,e,n,r,i){if(xr(n)){var s=!0;Sg(e)}else s=!1;if(Kl(e,i),e.stateNode===null)Pp(t,e),LR(e,n,r),Q0(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=mi(l):(l=xr(n)?Mc:er.current,l=yu(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&jk(e,o,r,l),da=!1;var f=e.memoizedState;o.state=f,Eg(e,r,o,i),c=e.memoizedState,a!==r||f!==c||Rr.current||da?(typeof u=="function"&&(q0(e,n,u,r),c=e.memoizedState),(a=da||Wk(e,n,a,r,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,OR(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:ki(e.type,a),o.props=l,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=mi(c):(c=xr(n)?Mc:er.current,c=yu(e,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&jk(e,o,r,c),da=!1,f=e.memoizedState,o.state=f,Eg(e,r,o,i);var p=e.memoizedState;a!==d||f!==p||Rr.current||da?(typeof h=="function"&&(q0(e,n,h,r),p=e.memoizedState),(l=da||Wk(e,n,l,r,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return nC(t,e,n,r,s,i)}function nC(t,e,n,r,i,s){lx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Bk(e,n,!1),Fo(t,e,s);r=e.stateNode,E3.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Iu(e,t.child,null,s),e.child=Iu(e,null,a,s)):sr(t,e,a,s),e.memoizedState=r.state,i&&Bk(e,n,!0),e.child}function ux(t){var e=t.stateNode;e.pendingContext?Lk(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Lk(t,e.context,!1),BS(t,e.containerInfo)}function Qk(t,e,n,r,i){return Cu(),NS(i),e.flags|=256,sr(t,e,n,r),e.child}var rC={dehydrated:null,treeContext:null,retryLane:0};function iC(t){return{baseLanes:t,cachePool:null,transitions:null}}function dx(t,e,n){var r=e.pendingProps,i=Vt.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Tt(Vt,i&1),t===null)return J0(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Wm(o,r,0,null),t=Rc(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=iC(n),e.memoizedState=rC,t):$S(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return T3(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ua(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Ua(a,s):(s=Rc(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?iC(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=rC,r}return s=t.child,t=s.sibling,r=Ua(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $S(t,e){return e=Wm({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kh(t,e,n,r){return r!==null&&NS(r),Iu(e,t.child,null,n),t=$S(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function T3(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=ky(Error(oe(422))),Kh(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Wm({mode:"visible",children:r.children},i,0,null),s=Rc(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Iu(e,t.child,null,o),e.child.memoizedState=iC(o),e.memoizedState=rC,s);if(!(e.mode&1))return Kh(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(oe(419)),r=ky(s,r,void 0),Kh(t,e,o,r)}if(a=(o&t.childLanes)!==0,Er||a){if(r=Rn,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Bo(t,i),zi(r,t,i,-1))}return YS(),r=ky(Error(oe(421))),Kh(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=V3.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Kr=Da(i.nextSibling),Yr=e,Ft=!0,Li=null,t!==null&&(ci[li++]=io,ci[li++]=so,ci[li++]=Oc,io=t.id,so=t.overflow,Oc=e),e=$S(e,r.children),e.flags|=4096,e)}function eA(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Y0(t.return,e,n)}function Ay(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function fx(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(sr(t,e,r.children,n),r=Vt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&eA(t,n,e);else if(t.tag===19)eA(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tt(Vt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Tg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ay(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Tg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ay(e,!0,n,null,s);break;case"together":Ay(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Pp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Fo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,n=Ua(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ua(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function _3(t,e,n){switch(e.tag){case 3:ux(e),Cu();break;case 5:UR(e);break;case 1:xr(e.type)&&Sg(e);break;case 4:BS(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Tt(kg,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tt(Vt,Vt.current&1),e.flags|=128,null):n&e.child.childLanes?dx(t,e,n):(Tt(Vt,Vt.current&1),t=Fo(t,e,n),t!==null?t.sibling:null);Tt(Vt,Vt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return fx(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Tt(Vt,Vt.current),r)break;return null;case 22:case 23:return e.lanes=0,cx(t,e,n)}return Fo(t,e,n)}var hx,sC,px,gx;hx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sC=function(){};px=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Cc(Fs.current);var s=null;switch(n){case"input":i=T0(t,i),r=T0(t,r),s=[];break;case"select":i=jt({},i,{value:void 0}),r=jt({},r,{value:void 0}),s=[];break;case"textarea":i=x0(t,i),r=x0(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cg)}P0(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(pf.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(pf.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Rt("scroll",t),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(e.updateQueue=l)&&(e.flags|=4)}};gx=function(t,e,n,r){n!==r&&(e.flags|=4)};function pd(t,e){if(!Ft)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Xn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function R3(t,e,n){var r=e.pendingProps;switch(xS(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(e),null;case 1:return xr(e.type)&&Ig(),Xn(e),null;case 3:return r=e.stateNode,Su(),Ot(Rr),Ot(er),US(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Zh(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Li!==null&&(hC(Li),Li=null))),sC(t,e),Xn(e),null;case 5:FS(e);var i=Cc(Ef.current);if(n=e.type,t!==null&&e.stateNode!=null)px(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(oe(166));return Xn(e),null}if(t=Cc(Fs.current),Zh(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[gs]=e,r[kf]=s,t=(e.mode&1)!==0,n){case"dialog":Rt("cancel",r),Rt("close",r);break;case"iframe":case"object":case"embed":Rt("load",r);break;case"video":case"audio":for(i=0;i<Md.length;i++)Rt(Md[i],r);break;case"source":Rt("error",r);break;case"img":case"image":case"link":Rt("error",r),Rt("load",r);break;case"details":Rt("toggle",r);break;case"input":lk(r,s),Rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Rt("invalid",r);break;case"textarea":dk(r,s),Rt("invalid",r)}P0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&zh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&zh(r.textContent,a,t),i=["children",""+a]):pf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Rt("scroll",r)}switch(n){case"input":Fh(r),uk(r,s,!0);break;case"textarea":Fh(r),fk(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Cg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=W_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gs]=e,t[kf]=r,hx(t,e,!1,!1),e.stateNode=t;e:{switch(o=M0(n,r),n){case"dialog":Rt("cancel",t),Rt("close",t),i=r;break;case"iframe":case"object":case"embed":Rt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Md.length;i++)Rt(Md[i],t);i=r;break;case"source":Rt("error",t),i=r;break;case"img":case"image":case"link":Rt("error",t),Rt("load",t),i=r;break;case"details":Rt("toggle",t),i=r;break;case"input":lk(t,r),i=T0(t,r),Rt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=jt({},r,{value:void 0}),Rt("invalid",t);break;case"textarea":dk(t,r),i=x0(t,r),Rt("invalid",t);break;default:i=r}P0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?$_(t,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&j_(t,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&gf(t,c):typeof c=="number"&&gf(t,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pf.hasOwnProperty(s)?c!=null&&s==="onScroll"&&Rt("scroll",t):c!=null&&gS(t,s,c,o))}switch(n){case"input":Fh(t),uk(t,r,!1);break;case"textarea":Fh(t),fk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+za(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?$l(t,!!r.multiple,s,!1):r.defaultValue!=null&&$l(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Cg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xn(e),null;case 6:if(t&&e.stateNode!=null)gx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(oe(166));if(n=Cc(Ef.current),Cc(Fs.current),Zh(e)){if(r=e.stateNode,n=e.memoizedProps,r[gs]=e,(s=r.nodeValue!==n)&&(t=Yr,t!==null))switch(t.tag){case 3:zh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zh(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gs]=e,e.stateNode=r}return Xn(e),null;case 13:if(Ot(Vt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ft&&Kr!==null&&e.mode&1&&!(e.flags&128))PR(),Cu(),e.flags|=98560,s=!1;else if(s=Zh(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(oe(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(oe(317));s[gs]=e}else Cu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xn(e),s=!1}else Li!==null&&(hC(Li),Li=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Vt.current&1?gn===0&&(gn=3):YS())),e.updateQueue!==null&&(e.flags|=4),Xn(e),null);case 4:return Su(),sC(t,e),t===null&&bf(e.stateNode.containerInfo),Xn(e),null;case 10:return OS(e.type._context),Xn(e),null;case 17:return xr(e.type)&&Ig(),Xn(e),null;case 19:if(Ot(Vt),s=e.memoizedState,s===null)return Xn(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)pd(s,!1);else{if(gn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tg(t),o!==null){for(e.flags|=128,pd(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tt(Vt,Vt.current&1|2),e.child}t=t.sibling}s.tail!==null&&en()>wu&&(e.flags|=128,r=!0,pd(s,!1),e.lanes=4194304)}else{if(!r)if(t=Tg(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),pd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ft)return Xn(e),null}else 2*en()-s.renderingStartTime>wu&&n!==1073741824&&(e.flags|=128,r=!0,pd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=en(),e.sibling=null,n=Vt.current,Tt(Vt,r?n&1|2:n&1),e):(Xn(e),null);case 22:case 23:return JS(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wr&1073741824&&(Xn(e),e.subtreeFlags&6&&(e.flags|=8192)):Xn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function x3(t,e){switch(xS(e),e.tag){case 1:return xr(e.type)&&Ig(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Su(),Ot(Rr),Ot(er),US(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return FS(e),null;case 13:if(Ot(Vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));Cu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ot(Vt),null;case 4:return Su(),null;case 10:return OS(e.type._context),null;case 22:case 23:return JS(),null;case 24:return null;default:return null}}var Jh=!1,Jn=!1,N3=typeof WeakSet=="function"?WeakSet:Set,he=null;function Pl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Zt(t,e,r)}else n.current=null}function oC(t,e,n){try{n()}catch(r){Zt(t,e,r)}}var tA=!1;function P3(t,e){if(j0=mg,t=CR(),_S(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===i&&(a=o),f===s&&++u===r&&(c=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(H0={focusedElem:t,selectionRange:n},mg=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:ki(e.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(E){Zt(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return p=tA,tA=!1,p}function Yd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&oC(e,n,s)}i=i.next}while(i!==r)}}function Vm(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function aC(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mx(t){var e=t.alternate;e!==null&&(t.alternate=null,mx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gs],delete e[kf],delete e[Z0],delete e[p3],delete e[g3])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function vx(t){return t.tag===5||t.tag===3||t.tag===4}function nA(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||vx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function cC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cg));else if(r!==4&&(t=t.child,t!==null))for(cC(t,e,n),t=t.sibling;t!==null;)cC(t,e,n),t=t.sibling}function lC(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(lC(t,e,n),t=t.sibling;t!==null;)lC(t,e,n),t=t.sibling}var On=null,Mi=!1;function ea(t,e,n){for(n=n.child;n!==null;)yx(t,e,n),n=n.sibling}function yx(t,e,n){if(Bs&&typeof Bs.onCommitFiberUnmount=="function")try{Bs.onCommitFiberUnmount(Pm,n)}catch{}switch(n.tag){case 5:Jn||Pl(n,e);case 6:var r=On,i=Mi;On=null,ea(t,e,n),On=r,Mi=i,On!==null&&(Mi?(t=On,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):On.removeChild(n.stateNode));break;case 18:On!==null&&(Mi?(t=On,n=n.stateNode,t.nodeType===8?yy(t.parentNode,n):t.nodeType===1&&yy(t,n),Cf(t)):yy(On,n.stateNode));break;case 4:r=On,i=Mi,On=n.stateNode.containerInfo,Mi=!0,ea(t,e,n),On=r,Mi=i;break;case 0:case 11:case 14:case 15:if(!Jn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&oC(n,e,o),i=i.next}while(i!==r)}ea(t,e,n);break;case 1:if(!Jn&&(Pl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Zt(n,e,a)}ea(t,e,n);break;case 21:ea(t,e,n);break;case 22:n.mode&1?(Jn=(r=Jn)||n.memoizedState!==null,ea(t,e,n),Jn=r):ea(t,e,n);break;default:ea(t,e,n)}}function rA(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new N3),e.forEach(function(r){var i=G3.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ii(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:On=a.stateNode,Mi=!1;break e;case 3:On=a.stateNode.containerInfo,Mi=!0;break e;case 4:On=a.stateNode.containerInfo,Mi=!0;break e}a=a.return}if(On===null)throw Error(oe(160));yx(s,o,i),On=null,Mi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Zt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Cx(e,t),e=e.sibling}function Cx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ii(e,t),rs(t),r&4){try{Yd(3,t,t.return),Vm(3,t)}catch(m){Zt(t,t.return,m)}try{Yd(5,t,t.return)}catch(m){Zt(t,t.return,m)}}break;case 1:Ii(e,t),rs(t),r&512&&n!==null&&Pl(n,n.return);break;case 5:if(Ii(e,t),rs(t),r&512&&n!==null&&Pl(n,n.return),t.flags&32){var i=t.stateNode;try{gf(i,"")}catch(m){Zt(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&V_(i,s),M0(a,o);var l=M0(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?$_(i,d):u==="dangerouslySetInnerHTML"?j_(i,d):u==="children"?gf(i,d):gS(i,u,d,l)}switch(a){case"input":_0(i,s);break;case"textarea":G_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?$l(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?$l(i,!!s.multiple,s.defaultValue,!0):$l(i,!!s.multiple,s.multiple?[]:"",!1))}i[kf]=s}catch(m){Zt(t,t.return,m)}}break;case 6:if(Ii(e,t),rs(t),r&4){if(t.stateNode===null)throw Error(oe(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Zt(t,t.return,m)}}break;case 3:if(Ii(e,t),rs(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Cf(e.containerInfo)}catch(m){Zt(t,t.return,m)}break;case 4:Ii(e,t),rs(t);break;case 13:Ii(e,t),rs(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(XS=en())),r&4&&rA(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Jn=(l=Jn)||u,Ii(e,t),Jn=l):Ii(e,t),rs(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(he=t,u=t.child;u!==null;){for(d=he=u;he!==null;){switch(f=he,h=f.child,f.tag){case 0:case 11:case 14:case 15:Yd(4,f,f.return);break;case 1:Pl(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Zt(r,n,m)}}break;case 5:Pl(f,f.return);break;case 22:if(f.memoizedState!==null){sA(d);continue}}h!==null?(h.return=f,he=h):sA(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=H_("display",o))}catch(m){Zt(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){Zt(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ii(e,t),rs(t),r&4&&rA(t);break;case 21:break;default:Ii(e,t),rs(t)}}function rs(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(vx(n)){var r=n;break e}n=n.return}throw Error(oe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gf(i,""),r.flags&=-33);var s=nA(t);lC(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=nA(t);cC(t,a,o);break;default:throw Error(oe(161))}}catch(c){Zt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function M3(t,e,n){he=t,Ix(t)}function Ix(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var i=he,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Jh;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Jn;a=Jh;var l=Jn;if(Jh=o,(Jn=c)&&!l)for(he=i;he!==null;)o=he,c=o.child,o.tag===22&&o.memoizedState!==null?oA(i):c!==null?(c.return=o,he=c):oA(i);for(;s!==null;)he=s,Ix(s),s=s.sibling;he=i,Jh=a,Jn=l}iA(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,he=s):iA(t)}}function iA(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Jn||Vm(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Jn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:ki(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Gk(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Gk(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Cf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}Jn||e.flags&512&&aC(e)}catch(f){Zt(e,e.return,f)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function sA(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function oA(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Vm(4,e)}catch(c){Zt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Zt(e,i,c)}}var s=e.return;try{aC(e)}catch(c){Zt(e,s,c)}break;case 5:var o=e.return;try{aC(e)}catch(c){Zt(e,o,c)}}}catch(c){Zt(e,e.return,c)}if(e===t){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var O3=Math.ceil,xg=Zo.ReactCurrentDispatcher,zS=Zo.ReactCurrentOwner,gi=Zo.ReactCurrentBatchConfig,qe=0,Rn=null,on=null,Un=0,Wr=0,Ml=Qa(0),gn=0,xf=null,Lc=0,Gm=0,ZS=0,qd=null,wr=null,XS=0,wu=1/0,Js=null,Ng=!1,uC=null,Ba=null,Yh=!1,ba=null,Pg=0,Qd=0,dC=null,Mp=-1,Op=0;function pr(){return qe&6?en():Mp!==-1?Mp:Mp=en()}function Fa(t){return t.mode&1?qe&2&&Un!==0?Un&-Un:v3.transition!==null?(Op===0&&(Op=rR()),Op):(t=ot,t!==0||(t=window.event,t=t===void 0?16:uR(t.type)),t):1}function zi(t,e,n,r){if(50<Qd)throw Qd=0,dC=null,Error(oe(185));lh(t,n,r),(!(qe&2)||t!==Rn)&&(t===Rn&&(!(qe&2)&&(Gm|=n),gn===4&&ya(t,Un)),Nr(t,r),n===1&&qe===0&&!(e.mode&1)&&(wu=en()+500,Bm&&ec()))}function Nr(t,e){var n=t.callbackNode;vF(t,e);var r=gg(t,t===Rn?Un:0);if(r===0)n!==null&&gk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&gk(n),e===1)t.tag===0?m3(aA.bind(null,t)):RR(aA.bind(null,t)),f3(function(){!(qe&6)&&ec()}),n=null;else{switch(iR(r)){case 1:n=IS;break;case 4:n=tR;break;case 16:n=pg;break;case 536870912:n=nR;break;default:n=pg}n=_x(n,Sx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Sx(t,e){if(Mp=-1,Op=0,qe&6)throw Error(oe(327));var n=t.callbackNode;if(Jl()&&t.callbackNode!==n)return null;var r=gg(t,t===Rn?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Mg(t,r);else{e=r;var i=qe;qe|=2;var s=wx();(Rn!==t||Un!==e)&&(Js=null,wu=en()+500,_c(t,e));do try{B3();break}catch(a){bx(t,a)}while(!0);MS(),xg.current=s,qe=i,on!==null?e=0:(Rn=null,Un=0,e=gn)}if(e!==0){if(e===2&&(i=F0(t),i!==0&&(r=i,e=fC(t,i))),e===1)throw n=xf,_c(t,0),ya(t,r),Nr(t,en()),n;if(e===6)ya(t,r);else{if(i=t.current.alternate,!(r&30)&&!D3(i)&&(e=Mg(t,r),e===2&&(s=F0(t),s!==0&&(r=s,e=fC(t,s))),e===1))throw n=xf,_c(t,0),ya(t,r),Nr(t,en()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(oe(345));case 2:dc(t,wr,Js);break;case 3:if(ya(t,r),(r&130023424)===r&&(e=XS+500-en(),10<e)){if(gg(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){pr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=z0(dc.bind(null,t,wr,Js),e);break}dc(t,wr,Js);break;case 4:if(ya(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-$i(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=en()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*O3(r/1960))-r,10<r){t.timeoutHandle=z0(dc.bind(null,t,wr,Js),r);break}dc(t,wr,Js);break;case 5:dc(t,wr,Js);break;default:throw Error(oe(329))}}}return Nr(t,en()),t.callbackNode===n?Sx.bind(null,t):null}function fC(t,e){var n=qd;return t.current.memoizedState.isDehydrated&&(_c(t,e).flags|=256),t=Mg(t,e),t!==2&&(e=wr,wr=n,e!==null&&hC(e)),t}function hC(t){wr===null?wr=t:wr.push.apply(wr,t)}function D3(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Ki(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ya(t,e){for(e&=~ZS,e&=~Gm,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-$i(e),r=1<<n;t[n]=-1,e&=~r}}function aA(t){if(qe&6)throw Error(oe(327));Jl();var e=gg(t,0);if(!(e&1))return Nr(t,en()),null;var n=Mg(t,e);if(t.tag!==0&&n===2){var r=F0(t);r!==0&&(e=r,n=fC(t,r))}if(n===1)throw n=xf,_c(t,0),ya(t,e),Nr(t,en()),n;if(n===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,dc(t,wr,Js),Nr(t,en()),null}function KS(t,e){var n=qe;qe|=1;try{return t(e)}finally{qe=n,qe===0&&(wu=en()+500,Bm&&ec())}}function Bc(t){ba!==null&&ba.tag===0&&!(qe&6)&&Jl();var e=qe;qe|=1;var n=gi.transition,r=ot;try{if(gi.transition=null,ot=1,t)return t()}finally{ot=r,gi.transition=n,qe=e,!(qe&6)&&ec()}}function JS(){Wr=Ml.current,Ot(Ml)}function _c(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,d3(n)),on!==null)for(n=on.return;n!==null;){var r=n;switch(xS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ig();break;case 3:Su(),Ot(Rr),Ot(er),US();break;case 5:FS(r);break;case 4:Su();break;case 13:Ot(Vt);break;case 19:Ot(Vt);break;case 10:OS(r.type._context);break;case 22:case 23:JS()}n=n.return}if(Rn=t,on=t=Ua(t.current,null),Un=Wr=e,gn=0,xf=null,ZS=Gm=Lc=0,wr=qd=null,yc!==null){for(e=0;e<yc.length;e++)if(n=yc[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}yc=null}return t}function bx(t,e){do{var n=on;try{if(MS(),xp.current=Rg,_g){for(var r=Wt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}_g=!1}if(Dc=0,En=fn=Wt=null,Jd=!1,Tf=0,zS.current=null,n===null||n.return===null){gn=1,xf=e,on=null;break}e:{var s=t,o=n.return,a=n,c=e;if(e=Un,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Xk(o);if(h!==null){h.flags&=-257,Kk(h,o,a,s,e),h.mode&1&&Zk(s,l,e),e=h,c=l;var p=e.updateQueue;if(p===null){var m=new Set;m.add(c),e.updateQueue=m}else p.add(c);break e}else{if(!(e&1)){Zk(s,l,e),YS();break e}c=Error(oe(426))}}else if(Ft&&a.mode&1){var y=Xk(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Kk(y,o,a,s,e),NS(bu(c,a));break e}}s=c=bu(c,a),gn!==4&&(gn=2),qd===null?qd=[s]:qd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=sx(s,c,e);Vk(s,g);break e;case 1:a=c;var v=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ba===null||!Ba.has(S)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=ox(s,a,e);Vk(s,E);break e}}s=s.return}while(s!==null)}Ax(n)}catch(k){e=k,on===n&&n!==null&&(on=n=n.return);continue}break}while(!0)}function wx(){var t=xg.current;return xg.current=Rg,t===null?Rg:t}function YS(){(gn===0||gn===3||gn===2)&&(gn=4),Rn===null||!(Lc&268435455)&&!(Gm&268435455)||ya(Rn,Un)}function Mg(t,e){var n=qe;qe|=2;var r=wx();(Rn!==t||Un!==e)&&(Js=null,_c(t,e));do try{L3();break}catch(i){bx(t,i)}while(!0);if(MS(),qe=n,xg.current=r,on!==null)throw Error(oe(261));return Rn=null,Un=0,gn}function L3(){for(;on!==null;)kx(on)}function B3(){for(;on!==null&&!cF();)kx(on)}function kx(t){var e=Tx(t.alternate,t,Wr);t.memoizedProps=t.pendingProps,e===null?Ax(t):on=e,zS.current=null}function Ax(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=x3(n,e),n!==null){n.flags&=32767,on=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{gn=6,on=null;return}}else if(n=R3(n,e,Wr),n!==null){on=n;return}if(e=e.sibling,e!==null){on=e;return}on=e=t}while(e!==null);gn===0&&(gn=5)}function dc(t,e,n){var r=ot,i=gi.transition;try{gi.transition=null,ot=1,F3(t,e,n,r)}finally{gi.transition=i,ot=r}return null}function F3(t,e,n,r){do Jl();while(ba!==null);if(qe&6)throw Error(oe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(yF(t,s),t===Rn&&(on=Rn=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Yh||(Yh=!0,_x(pg,function(){return Jl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=gi.transition,gi.transition=null;var o=ot;ot=1;var a=qe;qe|=4,zS.current=null,P3(t,n),Cx(n,t),i3(H0),mg=!!j0,H0=j0=null,t.current=n,M3(n),lF(),qe=a,ot=o,gi.transition=s}else t.current=n;if(Yh&&(Yh=!1,ba=t,Pg=i),s=t.pendingLanes,s===0&&(Ba=null),fF(n.stateNode),Nr(t,en()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ng)throw Ng=!1,t=uC,uC=null,t;return Pg&1&&t.tag!==0&&Jl(),s=t.pendingLanes,s&1?t===dC?Qd++:(Qd=0,dC=t):Qd=0,ec(),null}function Jl(){if(ba!==null){var t=iR(Pg),e=gi.transition,n=ot;try{if(gi.transition=null,ot=16>t?16:t,ba===null)var r=!1;else{if(t=ba,ba=null,Pg=0,qe&6)throw Error(oe(331));var i=qe;for(qe|=4,he=t.current;he!==null;){var s=he,o=s.child;if(he.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(he=l;he!==null;){var u=he;switch(u.tag){case 0:case 11:case 15:Yd(8,u,s)}var d=u.child;if(d!==null)d.return=u,he=d;else for(;he!==null;){u=he;var f=u.sibling,h=u.return;if(mx(u),u===l){he=null;break}if(f!==null){f.return=h,he=f;break}he=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}he=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,he=o;else e:for(;he!==null;){if(s=he,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Yd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,he=g;break e}he=s.return}}var v=t.current;for(he=v;he!==null;){o=he;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,he=S;else e:for(o=v;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Vm(9,a)}}catch(k){Zt(a,a.return,k)}if(a===o){he=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,he=E;break e}he=a.return}}if(qe=i,ec(),Bs&&typeof Bs.onPostCommitFiberRoot=="function")try{Bs.onPostCommitFiberRoot(Pm,t)}catch{}r=!0}return r}finally{ot=n,gi.transition=e}}return!1}function cA(t,e,n){e=bu(n,e),e=sx(t,e,1),t=La(t,e,1),e=pr(),t!==null&&(lh(t,1,e),Nr(t,e))}function Zt(t,e,n){if(t.tag===3)cA(t,t,n);else for(;e!==null;){if(e.tag===3){cA(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ba===null||!Ba.has(r))){t=bu(n,t),t=ox(e,t,1),e=La(e,t,1),t=pr(),e!==null&&(lh(e,1,t),Nr(e,t));break}}e=e.return}}function U3(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=pr(),t.pingedLanes|=t.suspendedLanes&n,Rn===t&&(Un&n)===n&&(gn===4||gn===3&&(Un&130023424)===Un&&500>en()-XS?_c(t,0):ZS|=n),Nr(t,e)}function Ex(t,e){e===0&&(t.mode&1?(e=Gh,Gh<<=1,!(Gh&130023424)&&(Gh=4194304)):e=1);var n=pr();t=Bo(t,e),t!==null&&(lh(t,e,n),Nr(t,n))}function V3(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Ex(t,n)}function G3(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(oe(314))}r!==null&&r.delete(e),Ex(t,n)}var Tx;Tx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rr.current)Er=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Er=!1,_3(t,e,n);Er=!!(t.flags&131072)}else Er=!1,Ft&&e.flags&1048576&&xR(e,wg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Pp(t,e),t=e.pendingProps;var i=yu(e,er.current);Kl(e,n),i=GS(null,e,r,t,i,n);var s=WS();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xr(r)?(s=!0,Sg(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,LS(e),i.updater=Fm,e.stateNode=i,i._reactInternals=e,Q0(e,r,t,n),e=nC(null,e,r,!0,s,n)):(e.tag=0,Ft&&s&&RS(e),sr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Pp(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=j3(r),t=ki(r,t),i){case 0:e=tC(null,e,r,t,n);break e;case 1:e=qk(null,e,r,t,n);break e;case 11:e=Jk(null,e,r,t,n);break e;case 14:e=Yk(null,e,r,ki(r.type,t),n);break e}throw Error(oe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),tC(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),qk(t,e,r,i,n);case 3:e:{if(ux(e),t===null)throw Error(oe(387));r=e.pendingProps,s=e.memoizedState,i=s.element,OR(t,e),Eg(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bu(Error(oe(423)),e),e=Qk(t,e,r,n,i);break e}else if(r!==i){i=bu(Error(oe(424)),e),e=Qk(t,e,r,n,i);break e}else for(Kr=Da(e.stateNode.containerInfo.firstChild),Yr=e,Ft=!0,Li=null,n=FR(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Cu(),r===i){e=Fo(t,e,n);break e}sr(t,e,r,n)}e=e.child}return e;case 5:return UR(e),t===null&&J0(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,$0(r,i)?o=null:s!==null&&$0(r,s)&&(e.flags|=32),lx(t,e),sr(t,e,o,n),e.child;case 6:return t===null&&J0(e),null;case 13:return dx(t,e,n);case 4:return BS(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Iu(e,null,r,n):sr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),Jk(t,e,r,i,n);case 7:return sr(t,e,e.pendingProps,n),e.child;case 8:return sr(t,e,e.pendingProps.children,n),e.child;case 12:return sr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Tt(kg,r._currentValue),r._currentValue=o,s!==null)if(Ki(s.value,o)){if(s.children===i.children&&!Rr.current){e=Fo(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=No(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),Y0(s.return,n,e),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(oe(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Y0(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}sr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Kl(e,n),i=mi(i),r=r(i),e.flags|=1,sr(t,e,r,n),e.child;case 14:return r=e.type,i=ki(r,e.pendingProps),i=ki(r.type,i),Yk(t,e,r,i,n);case 15:return ax(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:ki(r,i),Pp(t,e),e.tag=1,xr(r)?(t=!0,Sg(e)):t=!1,Kl(e,n),LR(e,r,i),Q0(e,r,i,n),nC(null,e,r,!0,t,n);case 19:return fx(t,e,n);case 22:return cx(t,e,n)}throw Error(oe(156,e.tag))};function _x(t,e){return eR(t,e)}function W3(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function di(t,e,n,r){return new W3(t,e,n,r)}function qS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function j3(t){if(typeof t=="function")return qS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===vS)return 11;if(t===yS)return 14}return 2}function Ua(t,e){var n=t.alternate;return n===null?(n=di(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dp(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")qS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wl:return Rc(n.children,i,s,e);case mS:o=8,i|=8;break;case w0:return t=di(12,n,e,i|2),t.elementType=w0,t.lanes=s,t;case k0:return t=di(13,n,e,i),t.elementType=k0,t.lanes=s,t;case A0:return t=di(19,n,e,i),t.elementType=A0,t.lanes=s,t;case B_:return Wm(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D_:o=10;break e;case L_:o=9;break e;case vS:o=11;break e;case yS:o=14;break e;case ua:o=16,r=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=di(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Rc(t,e,n,r){return t=di(7,t,r,e),t.lanes=n,t}function Wm(t,e,n,r){return t=di(22,t,r,e),t.elementType=B_,t.lanes=n,t.stateNode={isHidden:!1},t}function Ey(t,e,n){return t=di(6,t,null,e),t.lanes=n,t}function Ty(t,e,n){return e=di(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function H3(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ay(0),this.expirationTimes=ay(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ay(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function QS(t,e,n,r,i,s,o,a,c){return t=new H3(t,e,n,a,c),e===1?(e=1,s===!0&&(e|=8)):e=0,s=di(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},LS(s),t}function $3(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Rx(t){if(!t)return Za;t=t._reactInternals;e:{if(Yc(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var n=t.type;if(xr(n))return _R(t,n,e)}return e}function xx(t,e,n,r,i,s,o,a,c){return t=QS(n,r,!0,t,i,s,o,a,c),t.context=Rx(null),n=t.current,r=pr(),i=Fa(n),s=No(r,i),s.callback=e??null,La(n,s,i),t.current.lanes=i,lh(t,i,r),Nr(t,r),t}function jm(t,e,n,r){var i=e.current,s=pr(),o=Fa(i);return n=Rx(n),e.context===null?e.context=n:e.pendingContext=n,e=No(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=La(i,e,o),t!==null&&(zi(t,i,o,s),Rp(t,i,o)),o}function Og(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lA(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function eb(t,e){lA(t,e),(t=t.alternate)&&lA(t,e)}function z3(){return null}var Nx=typeof reportError=="function"?reportError:function(t){console.error(t)};function tb(t){this._internalRoot=t}Hm.prototype.render=tb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));jm(t,e,null,null)};Hm.prototype.unmount=tb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bc(function(){jm(null,t,null,null)}),e[Lo]=null}};function Hm(t){this._internalRoot=t}Hm.prototype.unstable_scheduleHydration=function(t){if(t){var e=aR();t={blockedOn:null,target:t,priority:e};for(var n=0;n<va.length&&e!==0&&e<va[n].priority;n++);va.splice(n,0,t),n===0&&lR(t)}};function nb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function $m(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uA(){}function Z3(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Og(o);s.call(l)}}var o=xx(e,r,t,0,null,!1,!1,"",uA);return t._reactRootContainer=o,t[Lo]=o.current,bf(t.nodeType===8?t.parentNode:t),Bc(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Og(c);a.call(l)}}var c=QS(t,0,!1,null,null,!1,!1,"",uA);return t._reactRootContainer=c,t[Lo]=c.current,bf(t.nodeType===8?t.parentNode:t),Bc(function(){jm(e,c,n,r)}),c}function zm(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Og(o);a.call(c)}}jm(e,o,t,i)}else o=Z3(n,e,t,i,r);return Og(o)}sR=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pd(e.pendingLanes);n!==0&&(SS(e,n|1),Nr(e,en()),!(qe&6)&&(wu=en()+500,ec()))}break;case 13:Bc(function(){var r=Bo(t,1);if(r!==null){var i=pr();zi(r,t,1,i)}}),eb(t,1)}};bS=function(t){if(t.tag===13){var e=Bo(t,134217728);if(e!==null){var n=pr();zi(e,t,134217728,n)}eb(t,134217728)}};oR=function(t){if(t.tag===13){var e=Fa(t),n=Bo(t,e);if(n!==null){var r=pr();zi(n,t,e,r)}eb(t,e)}};aR=function(){return ot};cR=function(t,e){var n=ot;try{return ot=t,e()}finally{ot=n}};D0=function(t,e,n){switch(e){case"input":if(_0(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lm(r);if(!i)throw Error(oe(90));U_(r),_0(r,i)}}}break;case"textarea":G_(t,n);break;case"select":e=n.value,e!=null&&$l(t,!!n.multiple,e,!1)}};X_=KS;K_=Bc;var X3={usingClientEntryPoint:!1,Events:[dh,Tl,Lm,z_,Z_,KS]},gd={findFiberByHostInstance:vc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},K3={bundleType:gd.bundleType,version:gd.version,rendererPackageName:gd.rendererPackageName,rendererConfig:gd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=q_(t),t===null?null:t.stateNode},findFiberByHostInstance:gd.findFiberByHostInstance||z3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qh.isDisabled&&qh.supportsFiber)try{Pm=qh.inject(K3),Bs=qh}catch{}}ti.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X3;ti.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!nb(e))throw Error(oe(200));return $3(t,e,null,n)};ti.createRoot=function(t,e){if(!nb(t))throw Error(oe(299));var n=!1,r="",i=Nx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=QS(t,1,!1,null,null,n,!1,r,i),t[Lo]=e.current,bf(t.nodeType===8?t.parentNode:t),new tb(e)};ti.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=q_(e),t=t===null?null:t.stateNode,t};ti.flushSync=function(t){return Bc(t)};ti.hydrate=function(t,e,n){if(!$m(e))throw Error(oe(200));return zm(null,t,e,!0,n)};ti.hydrateRoot=function(t,e,n){if(!nb(t))throw Error(oe(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Nx;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xx(e,null,t,1,n??null,i,!1,s,o),t[Lo]=e.current,bf(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Hm(e)};ti.render=function(t,e,n){if(!$m(e))throw Error(oe(200));return zm(null,t,e,!1,n)};ti.unmountComponentAtNode=function(t){if(!$m(t))throw Error(oe(40));return t._reactRootContainer?(Bc(function(){zm(null,null,t,!1,function(){t._reactRootContainer=null,t[Lo]=null})}),!0):!1};ti.unstable_batchedUpdates=KS;ti.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!$m(n))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return zm(t,e,n,!1,r)};ti.version="18.2.0-next-9e3b772b8-20220608";function Px(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Px)}catch(t){console.error(t)}}Px(),x_.exports=ti;var rb=x_.exports;const J3=ah(rb),Y3=C_({__proto__:null,default:J3},[rb]);var dA=rb;S0.createRoot=dA.createRoot,S0.hydrateRoot=dA.hydrateRoot;/**
 * @remix-run/router v1.14.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xt(){return Xt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xt.apply(this,arguments)}var Yt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Yt||(Yt={}));const fA="popstate";function q3(t){t===void 0&&(t={});function e(r,i){let{pathname:s,search:o,hash:a}=r.location;return Nf("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:hh(i)}return e5(e,n,null,t)}function Xe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Fc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q3(){return Math.random().toString(36).substr(2,8)}function hA(t,e){return{usr:t.state,key:t.key,idx:e}}function Nf(t,e,n,r){return n===void 0&&(n=null),Xt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xo(e):e,{state:n,key:e&&e.key||r||Q3()})}function hh(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function e5(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Yt.Pop,c=null,l=u();l==null&&(l=0,o.replaceState(Xt({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Yt.Pop;let y=u(),g=y==null?null:y-l;l=y,c&&c({action:a,location:m.location,delta:g})}function f(y,g){a=Yt.Push;let v=Nf(m.location,y,g);n&&n(v,y),l=u()+1;let S=hA(v,l),E=m.createHref(v);try{o.pushState(S,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(E)}s&&c&&c({action:a,location:m.location,delta:1})}function h(y,g){a=Yt.Replace;let v=Nf(m.location,y,g);n&&n(v,y),l=u();let S=hA(v,l),E=m.createHref(v);o.replaceState(S,"",E),s&&c&&c({action:a,location:m.location,delta:0})}function p(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof y=="string"?y:hh(y);return Xe(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let m={get action(){return a},get location(){return t(i,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(fA,d),c=y,()=>{i.removeEventListener(fA,d),c=null}},createHref(y){return e(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(y){return o.go(y)}};return m}var zt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zt||(zt={}));const t5=new Set(["lazy","caseSensitive","path","id","index","children"]);function n5(t){return t.index===!0}function pC(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Xe(i.index!==!0||!i.children,"Cannot specify children on an index route"),Xe(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),n5(i)){let c=Xt({},i,e(i),{id:a});return r[a]=c,c}else{let c=Xt({},i,e(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=pC(i.children,e,o,r)),c}})}function Ol(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xo(e):e,i=ph(r.pathname||"/",n);if(i==null)return null;let s=Mx(t);i5(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=h5(s[a],m5(i));return o}function r5(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Mx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Xe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=xc([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(Xe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Mx(s.children,e,u,l)),!(s.path==null&&!s.index)&&e.push({path:l,score:d5(l,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of Ox(s.path))i(s,o,c)}),e}function Ox(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Ox(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function i5(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:f5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const s5=/^:[\w-]+$/,o5=3,a5=2,c5=1,l5=10,u5=-2,pA=t=>t==="*";function d5(t,e){let n=t.split("/"),r=n.length;return n.some(pA)&&(r+=u5),e&&(r+=a5),n.filter(i=>!pA(i)).reduce((i,s)=>i+(s5.test(s)?o5:s===""?c5:l5),r)}function f5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function h5(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],c=o===n.length-1,l=i==="/"?e:e.slice(i.length)||"/",u=p5({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},l);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:xc([i,u.pathname]),pathnameBase:b5(xc([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=xc([i,u.pathnameBase]))}return s}function p5(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=g5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?l[f]=void 0:l[f]=v5(p||"",f),l},{}),pathname:s,pathnameBase:o,pattern:t}}function g5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Fc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function m5(t){try{return decodeURI(t)}catch(e){return Fc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function v5(t,e){try{return decodeURIComponent(t)}catch(n){return Fc(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function ph(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function y5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Xo(t):t;return{pathname:n?n.startsWith("/")?n:C5(n,e):e,search:w5(r),hash:k5(i)}}function C5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _y(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Dx(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function I5(t,e){let n=Dx(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function S5(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Xo(t):(i=Xt({},t),Xe(!i.pathname||!i.pathname.includes("?"),_y("?","pathname","search",i)),Xe(!i.pathname||!i.pathname.includes("#"),_y("#","pathname","hash",i)),Xe(!i.search||!i.search.includes("#"),_y("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=y5(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const xc=t=>t.join("/").replace(/\/\/+/g,"/"),b5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),w5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,k5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class ib{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Lx(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Bx=["post","put","patch","delete"],A5=new Set(Bx),E5=["get",...Bx],T5=new Set(E5),_5=new Set([301,302,303,307,308]),R5=new Set([307,308]),Ry={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},x5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},md={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Fx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,N5=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Ux="remix-router-transitions";function P5(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Xe(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let B=t.detectErrorBoundary;i=H=>({hasErrorBoundary:B(H)})}else i=N5;let s={},o=pC(t.routes,i,void 0,s),a,c=t.basename||"/",l=Xt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),u=null,d=new Set,f=null,h=null,p=null,m=t.hydrationData!=null,y=Ol(o,t.history.location,c),g=null;if(y==null){let B=ai(404,{pathname:t.history.location.pathname}),{matches:H,route:ee}=bA(o);y=H,g={[ee.id]:B}}let v,S=y.some(B=>B.route.lazy),E=y.some(B=>B.route.loader);if(S)v=!1;else if(!E)v=!0;else if(l.v7_partialHydration){let B=t.hydrationData?t.hydrationData.loaderData:null,H=t.hydrationData?t.hydrationData.errors:null;v=y.every(ee=>ee.route.loader&&ee.route.loader.hydrate!==!0&&(B&&B[ee.route.id]!==void 0||H&&H[ee.route.id]!==void 0))}else v=t.hydrationData!=null;let k,b={historyAction:t.history.action,location:t.history.location,matches:y,initialized:v,navigation:Ry,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||g,fetchers:new Map,blockers:new Map},A=Yt.Pop,_=!1,P,N=!1,O=new Map,D=null,U=!1,G=!1,z=[],$=[],q=new Map,j=0,X=-1,re=new Map,Z=new Set,ie=new Map,ke=new Map,Ee=new Set,ge=new Map,Te=new Map,Qe=!1;function ae(){if(u=t.history.listen(B=>{let{action:H,location:ee,delta:ue}=B;if(Qe){Qe=!1;return}Fc(Te.size===0||ue!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ye=ft({currentLocation:b.location,nextLocation:ee,historyAction:H});if(ye&&ue!=null){Qe=!0,t.history.go(ue*-1),dt(ye,{state:"blocked",location:ee,proceed(){dt(ye,{state:"proceeding",proceed:void 0,reset:void 0,location:ee}),t.history.go(ue)},reset(){let We=new Map(b.blockers);We.set(ye,md),Ct({blockers:We})}});return}return ce(H,ee)}),n){j5(e,O);let B=()=>H5(e,O);e.addEventListener("pagehide",B),D=()=>e.removeEventListener("pagehide",B)}return b.initialized||ce(Yt.Pop,b.location,{initialHydration:!0}),k}function nn(){u&&u(),D&&D(),d.clear(),P&&P.abort(),b.fetchers.forEach((B,H)=>T(H)),b.blockers.forEach((B,H)=>Oe(H))}function In(B){return d.add(B),()=>d.delete(B)}function Ct(B,H){H===void 0&&(H={}),b=Xt({},b,B);let ee=[],ue=[];l.v7_fetcherPersist&&b.fetchers.forEach((ye,We)=>{ye.state==="idle"&&(Ee.has(We)?ue.push(We):ee.push(We))}),[...d].forEach(ye=>ye(b,{deletedFetchers:ue,unstable_viewTransitionOpts:H.viewTransitionOpts,unstable_flushSync:H.flushSync===!0})),l.v7_fetcherPersist&&(ee.forEach(ye=>b.fetchers.delete(ye)),ue.forEach(ye=>T(ye)))}function an(B,H,ee){var ue,ye;let{flushSync:We}=ee===void 0?{}:ee,xe=b.actionData!=null&&b.navigation.formMethod!=null&&Oi(b.navigation.formMethod)&&b.navigation.state==="loading"&&((ue=B.state)==null?void 0:ue._isRedirect)!==!0,Re;H.actionData?Object.keys(H.actionData).length>0?Re=H.actionData:Re=null:xe?Re=b.actionData:Re=null;let we=H.loaderData?SA(b.loaderData,H.loaderData,H.matches||[],H.errors):b.loaderData,ze=b.blockers;ze.size>0&&(ze=new Map(ze),ze.forEach((St,Pn)=>ze.set(Pn,md)));let bn=_===!0||b.navigation.formMethod!=null&&Oi(b.navigation.formMethod)&&((ye=B.state)==null?void 0:ye._isRedirect)!==!0;a&&(o=a,a=void 0),U||A===Yt.Pop||(A===Yt.Push?t.history.push(B,B.state):A===Yt.Replace&&t.history.replace(B,B.state));let Be;if(A===Yt.Pop){let St=O.get(b.location.pathname);St&&St.has(B.pathname)?Be={currentLocation:b.location,nextLocation:B}:O.has(B.pathname)&&(Be={currentLocation:B,nextLocation:b.location})}else if(N){let St=O.get(b.location.pathname);St?St.add(B.pathname):(St=new Set([B.pathname]),O.set(b.location.pathname,St)),Be={currentLocation:b.location,nextLocation:B}}Ct(Xt({},H,{actionData:Re,loaderData:we,historyAction:A,location:B,initialized:!0,navigation:Ry,revalidation:"idle",restoreScrollPosition:nk(B,H.matches||b.matches),preventScrollReset:bn,blockers:ze}),{viewTransitionOpts:Be,flushSync:We===!0}),A=Yt.Pop,_=!1,N=!1,U=!1,G=!1,z=[],$=[]}async function ut(B,H){if(typeof B=="number"){t.history.go(B);return}let ee=gC(b.location,b.matches,c,l.v7_prependBasename,B,l.v7_relativeSplatPath,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:ue,submission:ye,error:We}=gA(l.v7_normalizeFormMethod,!1,ee,H),xe=b.location,Re=Nf(b.location,ue,H&&H.state);Re=Xt({},Re,t.history.encodeLocation(Re));let we=H&&H.replace!=null?H.replace:void 0,ze=Yt.Push;we===!0?ze=Yt.Replace:we===!1||ye!=null&&Oi(ye.formMethod)&&ye.formAction===b.location.pathname+b.location.search&&(ze=Yt.Replace);let bn=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,Be=(H&&H.unstable_flushSync)===!0,St=ft({currentLocation:xe,nextLocation:Re,historyAction:ze});if(St){dt(St,{state:"blocked",location:Re,proceed(){dt(St,{state:"proceeding",proceed:void 0,reset:void 0,location:Re}),ut(B,H)},reset(){let Pn=new Map(b.blockers);Pn.set(St,md),Ct({blockers:Pn})}});return}return await ce(ze,Re,{submission:ye,pendingError:We,preventScrollReset:bn,replace:H&&H.replace,enableViewTransition:H&&H.unstable_viewTransition,flushSync:Be})}function Ut(){if(Pe(),Ct({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){ce(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}ce(A||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation})}}async function ce(B,H,ee){P&&P.abort(),P=null,A=B,U=(ee&&ee.startUninterruptedRevalidation)===!0,CB(b.location,b.matches),_=(ee&&ee.preventScrollReset)===!0,N=(ee&&ee.enableViewTransition)===!0;let ue=a||o,ye=ee&&ee.overrideNavigation,We=Ol(ue,H,c),xe=(ee&&ee.flushSync)===!0;if(!We){let Pn=ai(404,{pathname:H.pathname}),{matches:ii,route:wn}=bA(ue);It(),an(H,{matches:ii,loaderData:{},errors:{[wn.id]:Pn}},{flushSync:xe});return}if(b.initialized&&!G&&B5(b.location,H)&&!(ee&&ee.submission&&Oi(ee.submission.formMethod))){an(H,{matches:We},{flushSync:xe});return}P=new AbortController;let Re=yd(t.history,H,P.signal,ee&&ee.submission),we,ze;if(ee&&ee.pendingError)ze={[ef(We).route.id]:ee.pendingError};else if(ee&&ee.submission&&Oi(ee.submission.formMethod)){let Pn=await Ce(Re,H,ee.submission,We,{replace:ee.replace,flushSync:xe});if(Pn.shortCircuited)return;we=Pn.pendingActionData,ze=Pn.pendingActionError,ye=xy(H,ee.submission),xe=!1,Re=new Request(Re.url,{signal:Re.signal})}let{shortCircuited:bn,loaderData:Be,errors:St}=await rt(Re,H,We,ye,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,xe,we,ze);bn||(P=null,an(H,Xt({matches:We},we?{actionData:we}:{},{loaderData:Be,errors:St})))}async function Ce(B,H,ee,ue,ye){ye===void 0&&(ye={}),Pe();let We=G5(H,ee);Ct({navigation:We},{flushSync:ye.flushSync===!0});let xe,Re=vC(ue,H);if(!Re.route.action&&!Re.route.lazy)xe={type:zt.error,error:ai(405,{method:B.method,pathname:H.pathname,routeId:Re.route.id})};else if(xe=await vd("action",B,Re,ue,s,i,c,l.v7_relativeSplatPath),B.signal.aborted)return{shortCircuited:!0};if(Sc(xe)){let we;return ye&&ye.replace!=null?we=ye.replace:we=xe.location===b.location.pathname+b.location.search,await Ie(b,xe,{submission:ee,replace:we}),{shortCircuited:!0}}if(Dl(xe)){let we=ef(ue,Re.route.id);return(ye&&ye.replace)!==!0&&(A=Yt.Push),{pendingActionData:{},pendingActionError:{[we.route.id]:xe.error}}}if(Ic(xe))throw ai(400,{type:"defer-action"});return{pendingActionData:{[Re.route.id]:xe.data}}}async function rt(B,H,ee,ue,ye,We,xe,Re,we,ze,bn){let Be=ue||xy(H,ye),St=ye||We||AA(Be),Pn=a||o,[ii,wn]=mA(t.history,b,ee,St,H,l.v7_partialHydration&&Re===!0,G,z,$,Ee,ie,Z,Pn,c,ze,bn);if(It(ht=>!(ee&&ee.some(Lt=>Lt.route.id===ht))||ii&&ii.some(Lt=>Lt.route.id===ht)),X=++j,ii.length===0&&wn.length===0){let ht=L();return an(H,Xt({matches:ee,loaderData:{},errors:bn||null},ze?{actionData:ze}:{},ht?{fetchers:new Map(b.fetchers)}:{}),{flushSync:we}),{shortCircuited:!0}}if(!U&&(!l.v7_partialHydration||!Re)){wn.forEach(Lt=>{let ns=b.fetchers.get(Lt.key),Oh=Cd(void 0,ns?ns.data:void 0);b.fetchers.set(Lt.key,Oh)});let ht=ze||b.actionData;Ct(Xt({navigation:Be},ht?Object.keys(ht).length===0?{actionData:null}:{actionData:ht}:{},wn.length>0?{fetchers:new Map(b.fetchers)}:{}),{flushSync:we})}wn.forEach(ht=>{q.has(ht.key)&&I(ht.key),ht.controller&&q.set(ht.key,ht.controller)});let cl=()=>wn.forEach(ht=>I(ht.key));P&&P.signal.addEventListener("abort",cl);let{results:Yv,loaderResults:ll,fetcherResults:Qo}=await Ze(b.matches,ee,ii,wn,B);if(B.signal.aborted)return{shortCircuited:!0};P&&P.signal.removeEventListener("abort",cl),wn.forEach(ht=>q.delete(ht.key));let cc=wA(Yv);if(cc){if(cc.idx>=ii.length){let ht=wn[cc.idx-ii.length].key;Z.add(ht)}return await Ie(b,cc.result,{replace:xe}),{shortCircuited:!0}}let{loaderData:qv,errors:Qv}=IA(b,ee,ii,ll,bn,wn,Qo,ge);ge.forEach((ht,Lt)=>{ht.subscribe(ns=>{(ns||ht.done)&&ge.delete(Lt)})});let ey=L(),ul=W(X),Mh=ey||ul||wn.length>0;return Xt({loaderData:qv,errors:Qv},Mh?{fetchers:new Map(b.fetchers)}:{})}function et(B,H,ee,ue){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");q.has(B)&&I(B);let ye=(ue&&ue.unstable_flushSync)===!0,We=a||o,xe=gC(b.location,b.matches,c,l.v7_prependBasename,ee,l.v7_relativeSplatPath,H,ue==null?void 0:ue.relative),Re=Ol(We,xe,c);if(!Re){Sn(B,H,ai(404,{pathname:xe}),{flushSync:ye});return}let{path:we,submission:ze,error:bn}=gA(l.v7_normalizeFormMethod,!0,xe,ue);if(bn){Sn(B,H,bn,{flushSync:ye});return}let Be=vC(Re,we);if(_=(ue&&ue.preventScrollReset)===!0,ze&&Oi(ze.formMethod)){le(B,H,we,Be,Re,ye,ze);return}ie.set(B,{routeId:H,path:we}),Fe(B,H,we,Be,Re,ye,ze)}async function le(B,H,ee,ue,ye,We,xe){if(Pe(),ie.delete(B),!ue.route.action&&!ue.route.lazy){let Lt=ai(405,{method:xe.formMethod,pathname:ee,routeId:H});Sn(B,H,Lt,{flushSync:We});return}let Re=b.fetchers.get(B);Ht(B,W5(xe,Re),{flushSync:We});let we=new AbortController,ze=yd(t.history,ee,we.signal,xe);q.set(B,we);let bn=j,Be=await vd("action",ze,ue,ye,s,i,c,l.v7_relativeSplatPath);if(ze.signal.aborted){q.get(B)===we&&q.delete(B);return}if(l.v7_fetcherPersist&&Ee.has(B)){if(Sc(Be)||Dl(Be)){Ht(B,ia(void 0));return}}else{if(Sc(Be))if(q.delete(B),X>bn){Ht(B,ia(void 0));return}else return Z.add(B),Ht(B,Cd(xe)),Ie(b,Be,{fetcherSubmission:xe});if(Dl(Be)){Sn(B,H,Be.error);return}}if(Ic(Be))throw ai(400,{type:"defer-action"});let St=b.navigation.location||b.location,Pn=yd(t.history,St,we.signal),ii=a||o,wn=b.navigation.state!=="idle"?Ol(ii,b.navigation.location,c):b.matches;Xe(wn,"Didn't find any matches after fetcher action");let cl=++j;re.set(B,cl);let Yv=Cd(xe,Be.data);b.fetchers.set(B,Yv);let[ll,Qo]=mA(t.history,b,wn,xe,St,!1,G,z,$,Ee,ie,Z,ii,c,{[ue.route.id]:Be.data},void 0);Qo.filter(Lt=>Lt.key!==B).forEach(Lt=>{let ns=Lt.key,Oh=b.fetchers.get(ns),SB=Cd(void 0,Oh?Oh.data:void 0);b.fetchers.set(ns,SB),q.has(ns)&&I(ns),Lt.controller&&q.set(ns,Lt.controller)}),Ct({fetchers:new Map(b.fetchers)});let cc=()=>Qo.forEach(Lt=>I(Lt.key));we.signal.addEventListener("abort",cc);let{results:qv,loaderResults:Qv,fetcherResults:ey}=await Ze(b.matches,wn,ll,Qo,Pn);if(we.signal.aborted)return;we.signal.removeEventListener("abort",cc),re.delete(B),q.delete(B),Qo.forEach(Lt=>q.delete(Lt.key));let ul=wA(qv);if(ul){if(ul.idx>=ll.length){let Lt=Qo[ul.idx-ll.length].key;Z.add(Lt)}return Ie(b,ul.result)}let{loaderData:Mh,errors:ht}=IA(b,b.matches,ll,Qv,void 0,Qo,ey,ge);if(b.fetchers.has(B)){let Lt=ia(Be.data);b.fetchers.set(B,Lt)}W(cl),b.navigation.state==="loading"&&cl>X?(Xe(A,"Expected pending action"),P&&P.abort(),an(b.navigation.location,{matches:wn,loaderData:Mh,errors:ht,fetchers:new Map(b.fetchers)})):(Ct({errors:ht,loaderData:SA(b.loaderData,Mh,wn,ht),fetchers:new Map(b.fetchers)}),G=!1)}async function Fe(B,H,ee,ue,ye,We,xe){let Re=b.fetchers.get(B);Ht(B,Cd(xe,Re?Re.data:void 0),{flushSync:We});let we=new AbortController,ze=yd(t.history,ee,we.signal);q.set(B,we);let bn=j,Be=await vd("loader",ze,ue,ye,s,i,c,l.v7_relativeSplatPath);if(Ic(Be)&&(Be=await Wx(Be,ze.signal,!0)||Be),q.get(B)===we&&q.delete(B),!ze.signal.aborted){if(Ee.has(B)){Ht(B,ia(void 0));return}if(Sc(Be))if(X>bn){Ht(B,ia(void 0));return}else{Z.add(B),await Ie(b,Be);return}if(Dl(Be)){Sn(B,H,Be.error);return}Xe(!Ic(Be),"Unhandled fetcher deferred data"),Ht(B,ia(Be.data))}}async function Ie(B,H,ee){let{submission:ue,fetcherSubmission:ye,replace:We}=ee===void 0?{}:ee;H.revalidate&&(G=!0);let xe=Nf(B.location,H.location,{_isRedirect:!0});if(Xe(xe,"Expected a location on the redirect navigation"),n){let St=!1;if(H.reloadDocument)St=!0;else if(Fx.test(H.location)){const Pn=t.history.createURL(H.location);St=Pn.origin!==e.location.origin||ph(Pn.pathname,c)==null}if(St){We?e.location.replace(H.location):e.location.assign(H.location);return}}P=null;let Re=We===!0?Yt.Replace:Yt.Push,{formMethod:we,formAction:ze,formEncType:bn}=B.navigation;!ue&&!ye&&we&&ze&&bn&&(ue=AA(B.navigation));let Be=ue||ye;if(R5.has(H.status)&&Be&&Oi(Be.formMethod))await ce(Re,xe,{submission:Xt({},Be,{formAction:H.location}),preventScrollReset:_});else{let St=xy(xe,ue);await ce(Re,xe,{overrideNavigation:St,fetcherSubmission:ye,preventScrollReset:_})}}async function Ze(B,H,ee,ue,ye){let We=await Promise.all([...ee.map(we=>vd("loader",ye,we,H,s,i,c,l.v7_relativeSplatPath)),...ue.map(we=>we.matches&&we.match&&we.controller?vd("loader",yd(t.history,we.path,we.controller.signal),we.match,we.matches,s,i,c,l.v7_relativeSplatPath):{type:zt.error,error:ai(404,{pathname:we.path})})]),xe=We.slice(0,ee.length),Re=We.slice(ee.length);return await Promise.all([kA(B,ee,xe,xe.map(()=>ye.signal),!1,b.loaderData),kA(B,ue.map(we=>we.match),Re,ue.map(we=>we.controller?we.controller.signal:null),!0)]),{results:We,loaderResults:xe,fetcherResults:Re}}function Pe(){G=!0,z.push(...It()),ie.forEach((B,H)=>{q.has(H)&&($.push(H),I(H))})}function Ht(B,H,ee){ee===void 0&&(ee={}),b.fetchers.set(B,H),Ct({fetchers:new Map(b.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function Sn(B,H,ee,ue){ue===void 0&&(ue={});let ye=ef(b.matches,H);T(B),Ct({errors:{[ye.route.id]:ee},fetchers:new Map(b.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function al(B){return l.v7_fetcherPersist&&(ke.set(B,(ke.get(B)||0)+1),Ee.has(B)&&Ee.delete(B)),b.fetchers.get(B)||x5}function T(B){let H=b.fetchers.get(B);q.has(B)&&!(H&&H.state==="loading"&&re.has(B))&&I(B),ie.delete(B),re.delete(B),Z.delete(B),Ee.delete(B),b.fetchers.delete(B)}function C(B){if(l.v7_fetcherPersist){let H=(ke.get(B)||0)-1;H<=0?(ke.delete(B),Ee.add(B)):ke.set(B,H)}else T(B);Ct({fetchers:new Map(b.fetchers)})}function I(B){let H=q.get(B);Xe(H,"Expected fetch controller: "+B),H.abort(),q.delete(B)}function x(B){for(let H of B){let ee=al(H),ue=ia(ee.data);b.fetchers.set(H,ue)}}function L(){let B=[],H=!1;for(let ee of Z){let ue=b.fetchers.get(ee);Xe(ue,"Expected fetcher: "+ee),ue.state==="loading"&&(Z.delete(ee),B.push(ee),H=!0)}return x(B),H}function W(B){let H=[];for(let[ee,ue]of re)if(ue<B){let ye=b.fetchers.get(ee);Xe(ye,"Expected fetcher: "+ee),ye.state==="loading"&&(I(ee),re.delete(ee),H.push(ee))}return x(H),H.length>0}function Q(B,H){let ee=b.blockers.get(B)||md;return Te.get(B)!==H&&Te.set(B,H),ee}function Oe(B){b.blockers.delete(B),Te.delete(B)}function dt(B,H){let ee=b.blockers.get(B)||md;Xe(ee.state==="unblocked"&&H.state==="blocked"||ee.state==="blocked"&&H.state==="blocked"||ee.state==="blocked"&&H.state==="proceeding"||ee.state==="blocked"&&H.state==="unblocked"||ee.state==="proceeding"&&H.state==="unblocked","Invalid blocker state transition: "+ee.state+" -> "+H.state);let ue=new Map(b.blockers);ue.set(B,H),Ct({blockers:ue})}function ft(B){let{currentLocation:H,nextLocation:ee,historyAction:ue}=B;if(Te.size===0)return;Te.size>1&&Fc(!1,"A router only supports one blocker at a time");let ye=Array.from(Te.entries()),[We,xe]=ye[ye.length-1],Re=b.blockers.get(We);if(!(Re&&Re.state==="proceeding")&&xe({currentLocation:H,nextLocation:ee,historyAction:ue}))return We}function It(B){let H=[];return ge.forEach((ee,ue)=>{(!B||B(ue))&&(ee.cancel(),H.push(ue),ge.delete(ue))}),H}function it(B,H,ee){if(f=B,p=H,h=ee||null,!m&&b.navigation===Ry){m=!0;let ue=nk(b.location,b.matches);ue!=null&&Ct({restoreScrollPosition:ue})}return()=>{f=null,p=null,h=null}}function tk(B,H){return h&&h(B,H.map(ue=>r5(ue,b.loaderData)))||B.key}function CB(B,H){if(f&&p){let ee=tk(B,H);f[ee]=p()}}function nk(B,H){if(f){let ee=tk(B,H),ue=f[ee];if(typeof ue=="number")return ue}return null}function IB(B){s={},a=pC(B,i,void 0,s)}return k={get basename(){return c},get future(){return l},get state(){return b},get routes(){return o},get window(){return e},initialize:ae,subscribe:In,enableScrollRestoration:it,navigate:ut,fetch:et,revalidate:Ut,createHref:B=>t.history.createHref(B),encodeLocation:B=>t.history.encodeLocation(B),getFetcher:al,deleteFetcher:C,dispose:nn,getBlocker:Q,deleteBlocker:Oe,_internalFetchControllers:q,_internalActiveDeferreds:ge,_internalSetRoutes:IB},k}function M5(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function gC(t,e,n,r,i,s,o,a){let c,l;if(o){c=[];for(let d of e)if(c.push(d),d.route.id===o){l=d;break}}else c=e,l=e[e.length-1];let u=S5(i||".",I5(c,s),ph(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!sb(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:xc([n,u.pathname])),hh(u)}function gA(t,e,n,r){if(!r||!M5(r))return{path:n};if(r.formMethod&&!V5(r.formMethod))return{path:n,error:ai(405,{method:r.formMethod})};let i=()=>({path:n,error:ai(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=Gx(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Oi(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,p)=>{let[m,y]=p;return""+h+m+"="+y+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Oi(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Xe(typeof FormData=="function","FormData is not available in this environment");let c,l;if(r.formData)c=mC(r.formData),l=r.formData;else if(r.body instanceof FormData)c=mC(r.body),l=r.body;else if(r.body instanceof URLSearchParams)c=r.body,l=CA(c);else if(r.body==null)c=new URLSearchParams,l=new FormData;else try{c=new URLSearchParams(r.body),l=CA(c)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Oi(u.formMethod))return{path:n,submission:u};let d=Xo(n);return e&&d.search&&sb(d.search)&&c.append("index",""),d.search="?"+c,{path:hh(d),submission:u}}function O5(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function mA(t,e,n,r,i,s,o,a,c,l,u,d,f,h,p,m){let y=m?Object.values(m)[0]:p?Object.values(p)[0]:void 0,g=t.createURL(e.location),v=t.createURL(i),S=m?Object.keys(m)[0]:void 0,k=O5(n,S).filter((A,_)=>{let{route:P}=A;if(P.lazy)return!0;if(P.loader==null)return!1;if(s)return P.loader.hydrate?!0:e.loaderData[P.id]===void 0&&(!e.errors||e.errors[P.id]===void 0);if(D5(e.loaderData,e.matches[_],A)||a.some(D=>D===A.route.id))return!0;let N=e.matches[_],O=A;return vA(A,Xt({currentUrl:g,currentParams:N.params,nextUrl:v,nextParams:O.params},r,{actionResult:y,defaultShouldRevalidate:o||g.pathname+g.search===v.pathname+v.search||g.search!==v.search||Vx(N,O)}))}),b=[];return u.forEach((A,_)=>{if(s||!n.some(U=>U.route.id===A.routeId)||l.has(_))return;let P=Ol(f,A.path,h);if(!P){b.push({key:_,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(_),O=vC(P,A.path),D=!1;d.has(_)?D=!1:c.includes(_)?D=!0:N&&N.state!=="idle"&&N.data===void 0?D=o:D=vA(O,Xt({currentUrl:g,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:y,defaultShouldRevalidate:o})),D&&b.push({key:_,routeId:A.routeId,path:A.path,matches:P,match:O,controller:new AbortController})}),[k,b]}function D5(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function Vx(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function vA(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function yA(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Xe(i,"No route found in manifest");let s={};for(let o in r){let c=i[o]!==void 0&&o!=="hasErrorBoundary";Fc(!c,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!c&&!t5.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,Xt({},e(i),{lazy:void 0}))}async function vd(t,e,n,r,i,s,o,a,c){c===void 0&&(c={});let l,u,d,f=m=>{let y,g=new Promise((v,S)=>y=S);return d=()=>y(),e.signal.addEventListener("abort",d),Promise.race([m({request:e,params:n.params,context:c.requestContext}),g])};try{let m=n.route[t];if(n.route.lazy)if(m){let y,g=await Promise.all([f(m).catch(v=>{y=v}),yA(n.route,s,i)]);if(y)throw y;u=g[0]}else if(await yA(n.route,s,i),m=n.route[t],m)u=await f(m);else if(t==="action"){let y=new URL(e.url),g=y.pathname+y.search;throw ai(405,{method:e.method,pathname:g,routeId:n.route.id})}else return{type:zt.data,data:void 0};else if(m)u=await f(m);else{let y=new URL(e.url),g=y.pathname+y.search;throw ai(404,{pathname:g})}Xe(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(m){l=zt.error,u=m}finally{d&&e.signal.removeEventListener("abort",d)}if(U5(u)){let m=u.status;if(_5.has(m)){let g=u.headers.get("Location");if(Xe(g,"Redirects returned/thrown from loaders/actions must have a Location header"),!Fx.test(g))g=gC(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,g,a);else if(!c.isStaticRequest){let v=new URL(e.url),S=g.startsWith("//")?new URL(v.protocol+g):new URL(g),E=ph(S.pathname,o)!=null;S.origin===v.origin&&E&&(g=S.pathname+S.search+S.hash)}if(c.isStaticRequest)throw u.headers.set("Location",g),u;return{type:zt.redirect,status:m,location:g,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(c.isRouteRequest)throw{type:l===zt.error?zt.error:zt.data,response:u};let y;try{let g=u.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?u.body==null?y=null:y=await u.json():y=await u.text()}catch(g){return{type:zt.error,error:g}}return l===zt.error?{type:l,error:new ib(m,u.statusText,y),headers:u.headers}:{type:zt.data,data:y,statusCode:u.status,headers:u.headers}}if(l===zt.error)return{type:l,error:u};if(F5(u)){var h,p;return{type:zt.deferred,deferredData:u,statusCode:(h=u.init)==null?void 0:h.status,headers:((p=u.init)==null?void 0:p.headers)&&new Headers(u.init.headers)}}return{type:zt.data,data:u}}function yd(t,e,n,r){let i=t.createURL(Gx(e)).toString(),s={signal:n};if(r&&Oi(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=mC(r.formData):s.body=r.formData}return new Request(i,s)}function mC(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function CA(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function L5(t,e,n,r,i){let s={},o=null,a,c=!1,l={};return n.forEach((u,d)=>{let f=e[d].route.id;if(Xe(!Sc(u),"Cannot handle redirect results in processLoaderData"),Dl(u)){let h=ef(t,f),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[h.route.id]==null&&(o[h.route.id]=p),s[f]=void 0,c||(c=!0,a=Lx(u.error)?u.error.status:500),u.headers&&(l[f]=u.headers)}else Ic(u)?(i.set(f,u.deferredData),s[f]=u.deferredData.data):s[f]=u.data,u.statusCode!=null&&u.statusCode!==200&&!c&&(a=u.statusCode),u.headers&&(l[f]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:l}}function IA(t,e,n,r,i,s,o,a){let{loaderData:c,errors:l}=L5(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:f,controller:h}=s[u];Xe(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(h&&h.signal.aborted))if(Dl(p)){let m=ef(t.matches,f==null?void 0:f.route.id);l&&l[m.route.id]||(l=Xt({},l,{[m.route.id]:p.error})),t.fetchers.delete(d)}else if(Sc(p))Xe(!1,"Unhandled fetcher revalidation redirect");else if(Ic(p))Xe(!1,"Unhandled fetcher deferred data");else{let m=ia(p.data);t.fetchers.set(d,m)}}return{loaderData:c,errors:l}}function SA(t,e,n,r){let i=Xt({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function ef(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function bA(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ai(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new ib(t||500,o,new Error(a),!0)}function wA(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Sc(n))return{result:n,idx:e}}}function Gx(t){let e=typeof t=="string"?Xo(t):t;return hh(Xt({},e,{hash:""}))}function B5(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Ic(t){return t.type===zt.deferred}function Dl(t){return t.type===zt.error}function Sc(t){return(t&&t.type)===zt.redirect}function F5(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function U5(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function V5(t){return T5.has(t.toLowerCase())}function Oi(t){return A5.has(t.toLowerCase())}async function kA(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],c=e[o];if(!c)continue;let l=t.find(d=>d.route.id===c.route.id),u=l!=null&&!Vx(l,c)&&(s&&s[c.route.id])!==void 0;if(Ic(a)&&(i||u)){let d=r[o];Xe(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await Wx(a,d,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function Wx(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:zt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:zt.error,error:i}}return{type:zt.data,data:t.deferredData.data}}}function sb(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function vC(t,e){let n=typeof e=="string"?Xo(e).search:e.search;if(t[t.length-1].route.index&&sb(n||""))return t[t.length-1];let r=Dx(t);return r[r.length-1]}function AA(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function xy(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function G5(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Cd(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function W5(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function ia(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function j5(t,e){try{let n=t.sessionStorage.getItem(Ux);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function H5(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Ux,JSON.stringify(n))}catch(r){Fc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dg(){return Dg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Dg.apply(this,arguments)}const jx=w.createContext(null),Hx=w.createContext(null),$x=w.createContext(null),Zm=w.createContext(null),Xm=w.createContext({outlet:null,matches:[],isDataRoute:!1}),zx=w.createContext(null);function ob(){return w.useContext(Zm)!=null}function Zx(){return ob()||Xe(!1),w.useContext(Zm).location}function $5(t,e,n,r){ob()||Xe(!1);let{navigator:i}=w.useContext($x),{matches:s}=w.useContext(Xm),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=Zx(),u;if(e){var d;let y=typeof e=="string"?Xo(e):e;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Xe(!1),u=y}else u=l;let f=u.pathname||"/",h=c==="/"?f:f.slice(c.length)||"/",p=Ol(t,{pathname:h}),m=J5(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:xc([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:xc([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return e&&m?w.createElement(Zm.Provider,{value:{location:Dg({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Yt.Pop}},m):m}function z5(){let t=eU(),e=Lx(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,null)}const Z5=w.createElement(z5,null);class X5 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(Xm.Provider,{value:this.props.routeContext},w.createElement(zx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function K5(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(jx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Xm.Provider,{value:e},r)}function J5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Xe(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,m=null,y=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||Z5,c&&(l<0&&f===0?(tU("route-fallback",!1),p=!0,y=null):l===f&&(p=!0,y=d.route.hydrateFallbackElement||null)));let g=e.concat(o.slice(0,f+1)),v=()=>{let S;return h?S=m:p?S=y:d.route.Component?S=w.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,w.createElement(K5,{match:d,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?w.createElement(X5,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var yC=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(yC||{});function Y5(t){let e=w.useContext(Hx);return e||Xe(!1),e}function q5(t){let e=w.useContext(Xm);return e||Xe(!1),e}function Q5(t){let e=q5(),n=e.matches[e.matches.length-1];return n.route.id||Xe(!1),n.route.id}function eU(){var t;let e=w.useContext(zx),n=Y5(yC.UseRouteError),r=Q5(yC.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const EA={};function tU(t,e,n){!e&&!EA[t]&&(EA[t]=!0)}function nU(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Yt.Pop,navigator:s,static:o=!1,future:a}=t;ob()&&Xe(!1);let c=e.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:c,navigator:s,static:o,future:Dg({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=Xo(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=w.useMemo(()=>{let y=ph(u,c);return y==null?null:{location:{pathname:y,search:d,hash:f,state:h,key:p},navigationType:i}},[c,u,d,f,h,p,i]);return m==null?null:w.createElement($x.Provider,{value:l},w.createElement(Zm.Provider,{children:n,value:m}))}new Promise(()=>{});function rU(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:w.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:w.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:w.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.21.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lg(){return Lg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Lg.apply(this,arguments)}function iU(t,e){return P5({basename:e==null?void 0:e.basename,future:Lg({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:q3({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||sU(),routes:t,mapRouteProperties:rU,window:e==null?void 0:e.window}).initialize()}function sU(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=Lg({},e,{errors:oU(e.errors)})),e}function oU(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new ib(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const aU=w.createContext({isTransitioning:!1}),cU=w.createContext(new Map),lU="startTransition",TA=VB[lU],uU="flushSync",_A=Y3[uU];function dU(t){TA?TA(t):t()}function Id(t){_A?_A(t):t()}class fU{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function hU(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=w.useState(n.state),[o,a]=w.useState(),[c,l]=w.useState({isTransitioning:!1}),[u,d]=w.useState(),[f,h]=w.useState(),[p,m]=w.useState(),y=w.useRef(new Map),{v7_startTransition:g}=r||{},v=w.useCallback(A=>{g?dU(A):A()},[g]),S=w.useCallback((A,_)=>{let{deletedFetchers:P,unstable_flushSync:N,unstable_viewTransitionOpts:O}=_;P.forEach(U=>y.current.delete(U)),A.fetchers.forEach((U,G)=>{U.data!==void 0&&y.current.set(G,U.data)});let D=n.window==null||typeof n.window.document.startViewTransition!="function";if(!O||D){N?Id(()=>s(A)):v(()=>s(A));return}if(N){Id(()=>{f&&(u&&u.resolve(),f.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:O.currentLocation,nextLocation:O.nextLocation})});let U=n.window.document.startViewTransition(()=>{Id(()=>s(A))});U.finished.finally(()=>{Id(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})})}),Id(()=>h(U));return}f?(u&&u.resolve(),f.skipTransition(),m({state:A,currentLocation:O.currentLocation,nextLocation:O.nextLocation})):(a(A),l({isTransitioning:!0,flushSync:!1,currentLocation:O.currentLocation,nextLocation:O.nextLocation}))},[n.window,f,u,y,v]);w.useLayoutEffect(()=>n.subscribe(S),[n,S]),w.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new fU)},[c]),w.useEffect(()=>{if(u&&o&&n.window){let A=o,_=u.promise,P=n.window.document.startViewTransition(async()=>{v(()=>s(A)),await _});P.finished.finally(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})}),h(P)}},[v,o,u,n.window]),w.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,f,i.location,o]),w.useEffect(()=>{!c.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[c.isTransitioning,p]),w.useEffect(()=>{},[]);let E=w.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,_,P)=>n.navigate(A,{state:_,preventScrollReset:P==null?void 0:P.preventScrollReset}),replace:(A,_,P)=>n.navigate(A,{replace:!0,state:_,preventScrollReset:P==null?void 0:P.preventScrollReset})}),[n]),k=n.basename||"/",b=w.useMemo(()=>({router:n,navigator:E,static:!1,basename:k}),[n,E,k]);return w.createElement(w.Fragment,null,w.createElement(jx.Provider,{value:b},w.createElement(Hx.Provider,{value:i},w.createElement(cU.Provider,{value:y.current},w.createElement(aU.Provider,{value:c},w.createElement(nU,{basename:k,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?w.createElement(pU,{routes:n.routes,future:n.future,state:i}):e))))),null)}function pU(t){let{routes:e,future:n,state:r}=t;return $5(e,void 0,r,n)}var RA;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(RA||(RA={}));var xA;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(xA||(xA={}));const Xx=t=>{const e=typeof t=="function",n=w.useRef(t);w.useEffect(()=>{n.current=t}),w.useEffect(()=>{if(e){const r=i=>{const s=n.current(i);if(typeof s=="string")return i.preventDefault(),i.returnValue=s;if(i.defaultPrevented)return i.returnValue=""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}},[e])};var NA=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function gU(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ta=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],mU=function(){NA(t,null,[{key:"escapeForHtml",value:function(n){return new t().escapeForHtml(n)}},{key:"linkify",value:function(n){return new t().linkify(n)}},{key:"ansiToHtml",value:function(n,r){return new t().ansiToHtml(n,r)}},{key:"ansiToJson",value:function(n,r){return new t().ansiToJson(n,r)}},{key:"ansiToText",value:function(n){return new t().ansiToText(n)}}]);function t(){gU(this,t),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return NA(t,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var r=0;r<8;++r)this.PALETTE_COLORS.push(ta[n][r].color);for(var i=[0,95,135,175,215,255],s=function(f,h,p){return i[f]+", "+i[h]+", "+i[p]},o=0;o<6;++o)for(var a=0;a<6;++a)for(var c=0;c<6;++c)this.PALETTE_COLORS.push(s(o,a,c));for(var l=8,u=0;u<24;++u,l+=10)this.PALETTE_COLORS.push(s(l,l,l))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(r){return r=="&"?"&amp;":r=='"'?"&quot;":r=="<"?"&lt;":r==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(/(https?:\/\/[^\s]+)/gm,function(r){return'<a href="'+r+'">'+r+"</a>"})}},{key:"ansiToHtml",value:function(n,r){return this.process(n,r,!0)}},{key:"ansiToJson",value:function(n,r){return r=r||{},r.json=!0,r.clearLine=!1,this.process(n,r,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,r,i){var s=this,o=this,a=n.split(/\033\[/),c=a.shift();r==null&&(r={}),r.clearLine=/\r/.test(n);var l=a.map(function(d){return s.processChunk(d,r,i)});if(r&&r.json){var u=o.processChunkJson("");return u.content=c,u.clearLine=r.clearLine,l.unshift(u),r.remove_empty&&(l=l.filter(function(d){return!d.isEmpty()})),l}else l.unshift(c);return l.join("")}},{key:"processChunkJson",value:function(n,r,i){r=typeof r>"u"?{}:r;var s=r.use_classes=typeof r.use_classes<"u"&&r.use_classes,o=r.key=s?"class":"color",a={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:r.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},c=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!c)return a;a.content=c[4];var l=c[2].split(";");if(c[1]!==""||c[3]!=="m"||!i)return a;for(var u=this;l.length>0;){var d=l.shift(),f=parseInt(d);if(isNaN(f)||f===0)u.fg=u.bg=null,u.decorations=[];else if(f===1)u.decorations.push("bold");else if(f===2)u.decorations.push("dim");else if(f===3)u.decorations.push("italic");else if(f===4)u.decorations.push("underline");else if(f===5)u.decorations.push("blink");else if(f===7)u.decorations.push("reverse");else if(f===8)u.decorations.push("hidden");else if(f===9)u.decorations.push("strikethrough");else if(f===21)u.removeDecoration("bold");else if(f===22)u.removeDecoration("bold"),u.removeDecoration("dim");else if(f===23)u.removeDecoration("italic");else if(f===24)u.removeDecoration("underline");else if(f===25)u.removeDecoration("blink");else if(f===27)u.removeDecoration("reverse");else if(f===28)u.removeDecoration("hidden");else if(f===29)u.removeDecoration("strikethrough");else if(f===39)u.fg=null;else if(f===49)u.bg=null;else if(f>=30&&f<38)u.fg=ta[0][f%10][o];else if(f>=90&&f<98)u.fg=ta[1][f%10][o];else if(f>=40&&f<48)u.bg=ta[0][f%10][o];else if(f>=100&&f<108)u.bg=ta[1][f%10][o];else if(f===38||f===48){var h=f===38;if(l.length>=1){var p=l.shift();if(p==="5"&&l.length>=1){var m=parseInt(l.shift());if(m>=0&&m<=255)if(!s)this.PALETTE_COLORS||u.setupPalette(),h?u.fg=this.PALETTE_COLORS[m]:u.bg=this.PALETTE_COLORS[m];else{var y=m>=16?"ansi-palette-"+m:ta[m>7?1:0][m%8].class;h?u.fg=y:u.bg=y}}else if(p==="2"&&l.length>=3){var g=parseInt(l.shift()),v=parseInt(l.shift()),S=parseInt(l.shift());if(g>=0&&g<=255&&v>=0&&v<=255&&S>=0&&S<=255){var E=g+", "+v+", "+S;s?h?(u.fg="ansi-truecolor",u.fg_truecolor=E):(u.bg="ansi-truecolor",u.bg_truecolor=E):h?u.fg=E:u.bg=E}}}}}return u.fg===null&&u.bg===null&&u.decorations.length===0||(a.fg=u.fg,a.bg=u.bg,a.fg_truecolor=u.fg_truecolor,a.bg_truecolor=u.bg_truecolor,a.decorations=u.decorations,a.decoration=u.decorations.slice(-1).pop()||null,a.was_processed=!0),a}},{key:"processChunk",value:function(n,r,i){var s=this;r=r||{};var o=this.processChunkJson(n,r,i),a=r.use_classes;if(o.decorations=o.decorations.filter(function(h){if(h==="reverse"){o.fg||(o.fg=ta[0][7][a?"class":"color"]),o.bg||(o.bg=ta[0][0][a?"class":"color"]);var p=o.fg;o.fg=o.bg,o.bg=p;var m=o.fg_truecolor;return o.fg_truecolor=o.bg_truecolor,o.bg_truecolor=m,o.isInverted=!0,!1}return!0}),r.json)return o;if(o.isEmpty())return"";if(!o.was_processed)return o.content;var c=[],l=[],u=[],d={},f=function(p){var m=[],y=void 0;for(y in p)p.hasOwnProperty(y)&&m.push("data-"+y+'="'+s.escapeForHtml(p[y])+'"');return m.length>0?" "+m.join(" "):""};return o.isInverted&&(d["ansi-is-inverted"]="true"),o.fg&&(a?(c.push(o.fg+"-fg"),o.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=o.fg_truecolor,o.fg_truecolor=null)):c.push("color:rgb("+o.fg+")")),o.bg&&(a?(c.push(o.bg+"-bg"),o.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=o.bg_truecolor,o.bg_truecolor=null)):c.push("background-color:rgb("+o.bg+")")),o.decorations.forEach(function(h){if(a){l.push("ansi-"+h);return}h==="bold"?l.push("font-weight:bold"):h==="dim"?l.push("opacity:0.5"):h==="italic"?l.push("font-style:italic"):h==="hidden"?l.push("visibility:hidden"):h==="strikethrough"?u.push("line-through"):u.push(h)}),u.length&&l.push("text-decoration:"+u.join(" ")),a?'<span class="'+c.concat(l).join(" ")+'"'+f(d)+">"+o.content+"</span>":'<span style="'+c.concat(l).join(";")+'"'+f(d)+">"+o.content+"</span>"}},{key:"removeDecoration",value:function(n){var r=this.decorations.indexOf(n);r>=0&&this.decorations.splice(r,1)}}]),t}(),vU=mU;const yU=ah(vU);function CU(t,e){let n=[];for(const r of t.split(`\r
`)){const i=yU.ansiToJson(r,{json:!0,remove_empty:!1});let s=[];for(const o of i){const a=wU(o,e);s=[...s,...a]}n=[...n,J.jsx("span",{children:s},n.length)]}return n}const IU=/(\s|^)((\w+):\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,SU=/(?<slorp1>\s|^)(?<name>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+[a-zA-Z])(?<slorp2>\s|$|\.)/g,bU=/@\[exit:([a-zA-Z]+)\]([a-zA-Z]+)@\[\/\]/g;function wU(t,e){const n=kU(t),r=[];let i=0,s=0;function o(u,d){let f;for(;(f=u.exec(t.content))!==null;){const h=f.index;h>i&&r.push(t.content.substring(i,h)),r.push(d(f)),i=u.lastIndex}}function a(u){const[,d,f]=u,h=f;return J.jsxs(J.Fragment,{children:[d,J.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:f})]})}function c(u){const d=u.groups.name,f=`mailto:${d}`;return J.jsxs(J.Fragment,{children:[u.groups.slorp1,J.jsx("a",{href:f,target:"_blank",rel:"noreferrer",children:d}),u.groups.slorp2]})}function l(u){const[,d,f]=u;return J.jsx("a",{onClick:()=>e(d),className:"exit",children:f})}return o(IU,a),o(SU,c),o(bU,l),i<t.content.length&&r.push(t.content.substring(i)),r.map(u=>J.jsx("span",{style:n,children:u},s++))}function kU(t){const e={};switch(t.bg&&(e.backgroundColor=`rgb(${t.bg})`),t.fg&&(e.color=`rgb(${t.fg})`),t.decoration){case"bold":e.fontWeight="bold";break;case"dim":e.opacity="0.5";break;case"italic":e.fontStyle="italic";break;case"hidden":e.visibility="hidden";break;case"strikethrough":e.textDecoration="line-through";break;case"underline":e.textDecoration="underline";break;case"blink":e.textDecoration="blink";break}return e}var qc={},ju={},Kx=w;function Me(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ir=Object.prototype.hasOwnProperty,AU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,PA={},MA={};function Jx(t){return Ir.call(MA,t)?!0:Ir.call(PA,t)?!1:AU.test(t)?MA[t]=!0:(PA[t]=!0,!1)}function vr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Wn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Wn[t]=new vr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Wn[e]=new vr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Wn[t]=new vr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Wn[t]=new vr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Wn[t]=new vr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Wn[t]=new vr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Wn[t]=new vr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Wn[t]=new vr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Wn[t]=new vr(t,5,!1,t.toLowerCase(),null,!1,!1)});var ab=/[\-:]([a-z])/g;function cb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ab,cb);Wn[e]=new vr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ab,cb);Wn[e]=new vr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ab,cb);Wn[e]=new vr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Wn[t]=new vr(t,1,!1,t.toLowerCase(),null,!1,!1)});Wn.xlinkHref=new vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Wn[t]=new vr(t,1,!1,t.toLowerCase(),null,!0,!0)});var Lp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EU=["Webkit","ms","Moz","O"];Object.keys(Lp).forEach(function(t){EU.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Lp[e]=Lp[t]})});var TU=/["'&<>]/;function lr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=TU.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var _U=/([A-Z])/g,RU=/^ms-/,CC=Array.isArray;function Xs(t,e){return{insertionMode:t,selectedValue:e}}function xU(t,e,n){switch(e){case"select":return Xs(1,n.value!=null?n.value:n.defaultValue);case"svg":return Xs(2,null);case"math":return Xs(3,null);case"foreignObject":return Xs(1,null);case"table":return Xs(4,null);case"thead":case"tbody":case"tfoot":return Xs(5,null);case"colgroup":return Xs(7,null);case"tr":return Xs(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Xs(1,null):t}var OA=new Map;function Yx(t,e,n){if(typeof n!="object")throw Error(Me(62));e=!0;for(var r in n)if(Ir.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=lr(r);i=lr((""+i).trim())}else{s=r;var o=OA.get(s);o!==void 0||(o=lr(s.replace(_U,"-$1").toLowerCase().replace(RU,"-ms-")),OA.set(s,o)),s=o,i=typeof i=="number"?i===0||Ir.call(Lp,r)?""+i:i+"px":lr((""+i).trim())}e?(e=!1,t.push(' style="',s,":",i)):t.push(";",s,":",i)}}e||t.push('"')}function Lr(t,e,n,r){switch(n){case"style":Yx(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Wn.hasOwnProperty(n)?Wn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',lr(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',lr(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',lr(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',lr(r),'"')}}else if(Jx(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',lr(r),'"')}}}function Bp(t,e,n){if(e!=null){if(n!=null)throw Error(Me(60));if(typeof e!="object"||!("__html"in e))throw Error(Me(61));e=e.__html,e!=null&&t.push(""+e)}}function NU(t){var e="";return Kx.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Ny(t,e,n,r){t.push(ss(n));var i=n=null,s;for(s in e)if(Ir.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Lr(t,r,s,o)}}return t.push(">"),Bp(t,i,n),typeof n=="string"?(t.push(lr(n)),null):n}var PU=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,DA=new Map;function ss(t){var e=DA.get(t);if(e===void 0){if(!PU.test(t))throw Error(Me(65,t));e="<"+t,DA.set(t,e)}return e}function MU(t,e,n,r,i){switch(e){case"select":t.push(ss("select"));var s=null,o=null;for(u in n)if(Ir.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Lr(t,r,u,a)}}return t.push(">"),Bp(t,o,s),s;case"option":o=i.selectedValue,t.push(ss("option"));var c=a=null,l=null,u=null;for(s in n)if(Ir.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Lr(t,r,s,d)}}if(o!=null)if(n=c!==null?""+c:NU(a),CC(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){t.push(' selected=""');break}}else""+o===n&&t.push(' selected=""');else l&&t.push(' selected=""');return t.push(">"),Bp(t,u,a),a;case"textarea":t.push(ss("textarea")),u=o=s=null;for(a in n)if(Ir.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":s=c;break;case"defaultValue":o=c;break;case"dangerouslySetInnerHTML":throw Error(Me(91));default:Lr(t,r,a,c)}if(s===null&&o!==null&&(s=o),t.push(">"),u!=null){if(s!=null)throw Error(Me(92));if(CC(u)&&1<u.length)throw Error(Me(93));s=""+u}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s!==null&&t.push(lr(""+s)),null;case"input":t.push(ss("input")),c=u=a=s=null;for(o in n)if(Ir.call(n,o)&&(l=n[o],l!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Me(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":s=l;break;default:Lr(t,r,o,l)}return u!==null?Lr(t,r,"checked",u):c!==null&&Lr(t,r,"checked",c),s!==null?Lr(t,r,"value",s):a!==null&&Lr(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(ss("menuitem"));for(var f in n)if(Ir.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Me(400));default:Lr(t,r,f,s)}return t.push(">"),null;case"title":t.push(ss("title")),s=null;for(d in n)if(Ir.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Me(434));default:Lr(t,r,d,o)}return t.push(">"),s;case"listing":case"pre":t.push(ss(e)),o=s=null;for(c in n)if(Ir.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Lr(t,r,c,a)}if(t.push(">"),o!=null){if(s!=null)throw Error(Me(60));if(typeof o!="object"||!("__html"in o))throw Error(Me(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof s=="string"&&s[0]===`
`&&t.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(ss(e));for(var h in n)if(Ir.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Me(399,e));default:Lr(t,r,h,s)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Ny(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),Ny(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Ny(t,n,e,r);t.push(ss(e)),o=s=null;for(l in n)if(Ir.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":Yx(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Jx(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",l,'="',lr(a),'"')}return t.push(">"),Bp(t,o,s),s}}function LA(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Me(395));return t.push(n),t.push('"></template>')}function OU(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(Me(397))}}function DU(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Me(397))}}var LU=/[<\u2028\u2029]/g;function Py(t){return JSON.stringify(t).replace(LU,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function BU(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function BA(t,e,n,r){return n.generateStaticMarkup?(t.push(lr(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(lr(e)),t=!0),t)}var tf=Object.assign,FU=Symbol.for("react.element"),qx=Symbol.for("react.portal"),Qx=Symbol.for("react.fragment"),eN=Symbol.for("react.strict_mode"),tN=Symbol.for("react.profiler"),nN=Symbol.for("react.provider"),rN=Symbol.for("react.context"),iN=Symbol.for("react.forward_ref"),sN=Symbol.for("react.suspense"),oN=Symbol.for("react.suspense_list"),aN=Symbol.for("react.memo"),lb=Symbol.for("react.lazy"),UU=Symbol.for("react.scope"),VU=Symbol.for("react.debug_trace_mode"),GU=Symbol.for("react.legacy_hidden"),WU=Symbol.for("react.default_value"),FA=Symbol.iterator;function IC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qx:return"Fragment";case qx:return"Portal";case tN:return"Profiler";case eN:return"StrictMode";case sN:return"Suspense";case oN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case rN:return(t.displayName||"Context")+".Consumer";case nN:return(t._context.displayName||"Context")+".Provider";case iN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case aN:return e=t.displayName||null,e!==null?e:IC(t.type)||"Memo";case lb:e=t._payload,t=t._init;try{return IC(t(e))}catch{}}return null}var cN={};function UA(t,e){if(t=t.contextTypes,!t)return cN;var n={},r;for(r in t)n[r]=e[r];return n}var bc=null;function Km(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Me(401))}else{if(n===null)throw Error(Me(401));Km(t,n)}e.context._currentValue2=e.value}}function lN(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&lN(t)}function uN(t){var e=t.parent;e!==null&&uN(e),t.context._currentValue2=t.value}function dN(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Me(402));t.depth===e.depth?Km(t,e):dN(t,e)}function fN(t,e){var n=e.parent;if(n===null)throw Error(Me(402));t.depth===n.depth?Km(t,n):fN(t,n),e.context._currentValue2=e.value}function Bg(t){var e=bc;e!==t&&(e===null?uN(t):t===null?lN(e):e.depth===t.depth?Km(e,t):e.depth>t.depth?dN(e,t):fN(e,t),bc=t)}var VA={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function GA(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=VA,t.props=n,t.state=i;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue2:r,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:tf({},i,o),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&VA.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,i=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,r):a,a!=null&&(i?(i=!1,s=tf({},s,a)):tf(s,a))}t.state=s}else s.queue=null}var jU={id:1,overflow:""};function SC(t,e,n){var r=t.id;t=t.overflow;var i=32-Fp(r)-1;r&=~(1<<i),n+=1;var s=32-Fp(e)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-Fp(e)+i|n<<i|r,overflow:s+t}}return{id:1<<s|n<<i|r,overflow:t}}var Fp=Math.clz32?Math.clz32:zU,HU=Math.log,$U=Math.LN2;function zU(t){return t>>>=0,t===0?32:31-(HU(t)/$U|0)|0}function ZU(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var XU=typeof Object.is=="function"?Object.is:ZU,Uo=null,ub=null,Up=null,kt=null,Od=!1,Fg=!1,Pf=0,wa=null,Jm=0;function fc(){if(Uo===null)throw Error(Me(321));return Uo}function WA(){if(0<Jm)throw Error(Me(312));return{memoizedState:null,queue:null,next:null}}function db(){return kt===null?Up===null?(Od=!1,Up=kt=WA()):(Od=!0,kt=Up):kt.next===null?(Od=!1,kt=kt.next=WA()):(Od=!0,kt=kt.next),kt}function fb(){ub=Uo=null,Fg=!1,Up=null,Jm=0,kt=wa=null}function hN(t,e){return typeof e=="function"?e(t):e}function jA(t,e,n){if(Uo=fc(),kt=db(),Od){var r=kt.queue;if(e=r.dispatch,wa!==null&&(n=wa.get(r),n!==void 0)){wa.delete(r),r=kt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return kt.memoizedState=r,[r,e]}return[kt.memoizedState,e]}return t=t===hN?typeof e=="function"?e():e:n!==void 0?n(e):e,kt.memoizedState=t,t=kt.queue={last:null,dispatch:null},t=t.dispatch=KU.bind(null,Uo,t),[kt.memoizedState,t]}function HA(t,e){if(Uo=fc(),kt=db(),e=e===void 0?null:e,kt!==null){var n=kt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!XU(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),kt.memoizedState=[t,e],t}function KU(t,e,n){if(25<=Jm)throw Error(Me(301));if(t===Uo)if(Fg=!0,t={action:n,next:null},wa===null&&(wa=new Map),n=wa.get(e),n===void 0)wa.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function JU(){throw Error(Me(394))}function Qh(){}var $A={readContext:function(t){return t._currentValue2},useContext:function(t){return fc(),t._currentValue2},useMemo:HA,useReducer:jA,useRef:function(t){Uo=fc(),kt=db();var e=kt.memoizedState;return e===null?(t={current:t},kt.memoizedState=t):e},useState:function(t){return jA(hN,t)},useInsertionEffect:Qh,useLayoutEffect:function(){},useCallback:function(t,e){return HA(function(){return t},e)},useImperativeHandle:Qh,useEffect:Qh,useDebugValue:Qh,useDeferredValue:function(t){return fc(),t},useTransition:function(){return fc(),[!1,JU]},useId:function(){var t=ub.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Fp(t)-1)).toString(32)+e;var n=Vp;if(n===null)throw Error(Me(404));return e=Pf++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return fc(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Me(407));return n()}},Vp=null,My=Kx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function YU(t){return console.error(t),null}function Dd(){}function qU(t,e,n,r,i,s,o,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?YU:i,onAllReady:s===void 0?Dd:s,onShellReady:o===void 0?Dd:o,onShellError:a===void 0?Dd:a,onFatalError:c===void 0?Dd:c},n=Ug(e,0,null,n,!1,!1),n.parentFlushed=!0,t=hb(e,t,null,n,u,cN,null,jU),l.push(t),e}function hb(t,e,n,r,i,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&mN(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(c),c}function Ug(t,e,n,r,i,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function Mf(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Vg(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function zA(t,e,n,r,i){for(Uo={},ub=e,Pf=0,t=n(r,i);Fg;)Fg=!1,Pf=0,Jm+=1,kt=null,t=n(r,i);return fb(),t}function ZA(t,e,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Me(108,IC(r)||"Unknown",a));r=tf({},o,n)}e.legacyContext=r,jr(t,e,i),e.legacyContext=o}else jr(t,e,i)}function XA(t,e){if(t&&t.defaultProps){e=tf({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function bC(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=UA(n,e.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue2:i),GA(s,n,r,i),ZA(t,e,s,n)}else{s=UA(n,e.legacyContext),i=zA(t,e,n,r,s);var o=Pf!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)GA(i,n,r,s),ZA(t,e,i,n);else if(o){r=e.treeContext,e.treeContext=SC(r,1,0);try{jr(t,e,i)}finally{e.treeContext=r}}else jr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,s=MU(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=xU(o,n,r),wC(t,e,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case GU:case VU:case eN:case tN:case Qx:jr(t,e,r.children);return;case oN:jr(t,e,r.children);return;case UU:throw Error(Me(343));case sN:e:{n=e.blockedBoundary,i=e.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},c=Ug(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=Ug(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(wC(t,e,r),t.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),l.status=1,Gg(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=Mf(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=hb(t,s,n,c,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case iN:if(r=zA(t,e,n.render,r,i),Pf!==0){n=e.treeContext,e.treeContext=SC(n,1,0);try{jr(t,e,r)}finally{e.treeContext=n}}else jr(t,e,r);return;case aN:n=n.type,r=XA(n,r),bC(t,e,n,r,i);return;case nN:if(i=r.children,n=n._context,r=r.value,s=n._currentValue2,n._currentValue2=r,o=bc,bc=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},e.context=r,jr(t,e,i),t=bc,t===null)throw Error(Me(403));r=t.parentValue,t.context._currentValue2=r===WU?t.context._defaultValue:r,t=bc=t.parent,e.context=t;return;case rN:r=r.children,r=r(n._currentValue2),jr(t,e,r);return;case lb:i=n._init,n=i(n._payload),r=XA(n,r),bC(t,e,n,r,void 0);return}throw Error(Me(130,n==null?n:typeof n,""))}}function jr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case FU:bC(t,e,n.type,n.props,n.ref);return;case qx:throw Error(Me(257));case lb:var r=n._init;n=r(n._payload),jr(t,e,n);return}if(CC(n)){KA(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=FA&&n[FA]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);KA(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Me(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=BA(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=BA(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function KA(t,e,n){for(var r=n.length,i=0;i<r;i++){var s=e.treeContext;e.treeContext=SC(s,r,i);try{wC(t,e,n[i])}finally{e.treeContext=s}}}function wC(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,s=e.context;try{return jr(t,e,n)}catch(c){if(fb(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var o=e.blockedSegment,a=Ug(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=hb(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Bg(s)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Bg(s),c}}function QU(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,gN(this,e,t)}function pN(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Me(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return pN(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function Gg(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Gg(t,n)}else t.completedSegments.push(e)}function gN(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Me(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Dd,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Gg(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(QU,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Gg(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function mN(t){if(t.status!==2){var e=bc,n=My.current;My.current=$A;var r=Vp;Vp=t.responseState;try{var i=t.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=t,c=o.blockedSegment;if(c.status===0){Bg(o.context);try{jr(a,o,o.node),a.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),o.abortSet.delete(o),c.status=1,gN(a,o.blockedBoundary,c)}catch(p){if(fb(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=o.ping;p.then(l,l)}else{o.abortSet.delete(o),c.status=4;var u=o.blockedBoundary,d=p,f=Mf(a,d);if(u===null?Vg(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var h=a.onAllReady;h()}}}finally{}}}i.splice(0,s),t.destination!==null&&pb(t,t.destination)}catch(p){Mf(t,p),Vg(t,p)}finally{Vp=r,My.current=n,n===$A&&Bg(e)}}}function ep(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)e.push(r[s]);i=Ym(t,e,i)}for(;s<r.length-1;s++)e.push(r[s]);return s<r.length&&(i=e.push(r[s])),i;default:throw Error(Me(390))}}function Ym(t,e,n){var r=n.boundary;if(r===null)return ep(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=lr(r),e.push(r),e.push('"')),e.push("></template>")),ep(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,s=i.nextSuspenseID++;return i=i.boundaryPrefix+s.toString(16),r=r.id=i,LA(e,t.responseState,r),ep(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),LA(e,t.responseState,r.id),ep(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Me(391));return Ym(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function JA(t,e,n){return OU(e,t.responseState,n.formatContext,n.id),Ym(t,e,n),DU(e,n.formatContext)}function YA(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)vN(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Me(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function vN(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Me(392));return JA(t,e,r)}return JA(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function pb(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Ym(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=e;var a=t.responseState,c=o.id,l=o.errorDigest,u=o.errorMessage,d=o.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(Me(395));if(r.push(c),r.push('"'),l||u||d){r.push(",");var f=Py(l||"");r.push(f)}if(u||d){r.push(",");var h=Py(u||"");r.push(h)}if(d){r.push(",");var p=Py(d);r.push(p)}if(!r.push(")<\/script>")){t.destination=null,s++,i.splice(0,s);return}}i.splice(0,s);var m=t.completedBoundaries;for(s=0;s<m.length;s++)if(!YA(t,e,m[s])){t.destination=null,s++,m.splice(0,s);return}m.splice(0,s);var y=t.partialBoundaries;for(s=0;s<y.length;s++){var g=y[s];e:{i=t,o=e;var v=g.completedSegments;for(a=0;a<v.length;a++)if(!vN(i,o,g,v[a])){a++,v.splice(0,a);var S=!1;break e}v.splice(0,a),S=!0}if(!S){t.destination=null,s++,y.splice(0,s);return}}y.splice(0,s);var E=t.completedBoundaries;for(s=0;s<E.length;s++)if(!YA(t,e,E[s])){t.destination=null,s++,E.splice(0,s);return}E.splice(0,s)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function e4(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return pN(r,t,e)}),n.clear(),t.destination!==null&&pb(t,t.destination)}catch(r){Mf(t,r),Vg(t,r)}}function t4(){}function yN(t,e,n,r){var i=!1,s=null,o="",a={push:function(l){return l!==null&&(o+=l),!0},destroy:function(l){i=!0,s=l}},c=!1;if(t=qU(t,BU(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,t4,void 0,function(){c=!0},void 0,void 0),mN(t),e4(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{pb(t,a)}catch(l){Mf(t,l),Vg(t,l)}}if(i)throw s;if(!c)throw Error(Me(426));return o}ju.renderToNodeStream=function(){throw Error(Me(207))};ju.renderToStaticMarkup=function(t,e){return yN(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};ju.renderToStaticNodeStream=function(){throw Error(Me(208))};ju.renderToString=function(t,e){return yN(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};ju.version="18.2.0";var gb={},CN=w;function Ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hr=null,$r=0;function ve(t,e){if(e.length!==0)if(512<e.length)0<$r&&(t.enqueue(new Uint8Array(Hr.buffer,0,$r)),Hr=new Uint8Array(512),$r=0),t.enqueue(e);else{var n=Hr.length-$r;n<e.length&&(n===0?t.enqueue(Hr):(Hr.set(e.subarray(0,n),$r),t.enqueue(Hr),e=e.subarray(n)),Hr=new Uint8Array(512),$r=0),Hr.set(e,$r),$r+=e.length}}function Mt(t,e){return ve(t,e),!0}function qA(t){Hr&&0<$r&&(t.enqueue(new Uint8Array(Hr.buffer,0,$r)),Hr=null,$r=0)}var IN=new TextEncoder;function je(t){return IN.encode(t)}function de(t){return IN.encode(t)}function SN(t,e){typeof t.error=="function"?t.error(e):t.close()}var Sr=Object.prototype.hasOwnProperty,n4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QA={},e1={};function bN(t){return Sr.call(e1,t)?!0:Sr.call(QA,t)?!1:n4.test(t)?e1[t]=!0:(QA[t]=!0,!1)}function yr(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jn[t]=new yr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jn[e]=new yr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jn[t]=new yr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jn[t]=new yr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jn[t]=new yr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jn[t]=new yr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jn[t]=new yr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jn[t]=new yr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jn[t]=new yr(t,5,!1,t.toLowerCase(),null,!1,!1)});var mb=/[\-:]([a-z])/g;function vb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mb,vb);jn[e]=new yr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mb,vb);jn[e]=new yr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mb,vb);jn[e]=new yr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jn[t]=new yr(t,1,!1,t.toLowerCase(),null,!1,!1)});jn.xlinkHref=new yr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jn[t]=new yr(t,1,!1,t.toLowerCase(),null,!0,!0)});var Gp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},r4=["Webkit","ms","Moz","O"];Object.keys(Gp).forEach(function(t){r4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gp[e]=Gp[t]})});var i4=/["'&<>]/;function Bn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=i4.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var s4=/([A-Z])/g,o4=/^ms-/,kC=Array.isArray,a4=de("<script>"),c4=de("<\/script>"),l4=de('<script src="'),u4=de('<script type="module" src="'),t1=de('" async=""><\/script>'),d4=/(<\/|<)(s)(cript)/gi;function f4(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function h4(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?a4:de('<script nonce="'+Bn(e)+'">');var s=[];if(n!==void 0&&s.push(e,je((""+n).replace(d4,f4)),c4),r!==void 0)for(n=0;n<r.length;n++)s.push(l4,je(Bn(r[n])),t1);if(i!==void 0)for(r=0;r<i.length;r++)s.push(u4,je(Bn(i[r])),t1);return{bootstrapChunks:s,startInlineScript:e,placeholderPrefix:de(t+"P:"),segmentPrefix:de(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function os(t,e){return{insertionMode:t,selectedValue:e}}function p4(t){return os(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function g4(t,e,n){switch(e){case"select":return os(1,n.value!=null?n.value:n.defaultValue);case"svg":return os(2,null);case"math":return os(3,null);case"foreignObject":return os(1,null);case"table":return os(4,null);case"thead":case"tbody":case"tfoot":return os(5,null);case"colgroup":return os(7,null);case"tr":return os(6,null)}return 4<=t.insertionMode||t.insertionMode===0?os(1,null):t}var yb=de("<!-- -->");function n1(t,e,n,r){return e===""?r:(r&&t.push(yb),t.push(je(Bn(e))),!0)}var r1=new Map,m4=de(' style="'),i1=de(":"),v4=de(";");function wN(t,e,n){if(typeof n!="object")throw Error(Ge(62));e=!0;for(var r in n)if(Sr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=je(Bn(r));i=je(Bn((""+i).trim()))}else{s=r;var o=r1.get(s);o!==void 0||(o=de(Bn(s.replace(s4,"-$1").toLowerCase().replace(o4,"-ms-"))),r1.set(s,o)),s=o,i=typeof i=="number"?i===0||Sr.call(Gp,r)?je(""+i):je(i+"px"):je(Bn((""+i).trim()))}e?(e=!1,t.push(m4,s,i1,i)):t.push(v4,s,i1,i)}}e||t.push(hc)}var sa=de(" "),yl=de('="'),hc=de('"'),s1=de('=""');function Br(t,e,n,r){switch(n){case"style":wN(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=jn.hasOwnProperty(n)?jn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=je(e.attributeName),e.type){case 3:r&&t.push(sa,n,s1);break;case 4:r===!0?t.push(sa,n,s1):r!==!1&&t.push(sa,n,yl,je(Bn(r)),hc);break;case 5:isNaN(r)||t.push(sa,n,yl,je(Bn(r)),hc);break;case 6:!isNaN(r)&&1<=r&&t.push(sa,n,yl,je(Bn(r)),hc);break;default:e.sanitizeURL&&(r=""+r),t.push(sa,n,yl,je(Bn(r)),hc)}}else if(bN(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(sa,je(n),yl,je(Bn(r)),hc)}}}var oa=de(">"),o1=de("/>");function Wp(t,e,n){if(e!=null){if(n!=null)throw Error(Ge(60));if(typeof e!="object"||!("__html"in e))throw Error(Ge(61));e=e.__html,e!=null&&t.push(je(""+e))}}function y4(t){var e="";return CN.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var Oy=de(' selected=""');function Dy(t,e,n,r){t.push(as(n));var i=n=null,s;for(s in e)if(Sr.call(e,s)){var o=e[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Br(t,r,s,o)}}return t.push(oa),Wp(t,i,n),typeof n=="string"?(t.push(je(Bn(n))),null):n}var Ly=de(`
`),C4=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,a1=new Map;function as(t){var e=a1.get(t);if(e===void 0){if(!C4.test(t))throw Error(Ge(65,t));e=de("<"+t),a1.set(t,e)}return e}var I4=de("<!DOCTYPE html>");function S4(t,e,n,r,i){switch(e){case"select":t.push(as("select"));var s=null,o=null;for(u in n)if(Sr.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Br(t,r,u,a)}}return t.push(oa),Wp(t,o,s),s;case"option":o=i.selectedValue,t.push(as("option"));var c=a=null,l=null,u=null;for(s in n)if(Sr.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Br(t,r,s,d)}}if(o!=null)if(n=c!==null?""+c:y4(a),kC(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){t.push(Oy);break}}else""+o===n&&t.push(Oy);else l&&t.push(Oy);return t.push(oa),Wp(t,u,a),a;case"textarea":t.push(as("textarea")),u=o=s=null;for(a in n)if(Sr.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":s=c;break;case"defaultValue":o=c;break;case"dangerouslySetInnerHTML":throw Error(Ge(91));default:Br(t,r,a,c)}if(s===null&&o!==null&&(s=o),t.push(oa),u!=null){if(s!=null)throw Error(Ge(92));if(kC(u)&&1<u.length)throw Error(Ge(93));s=""+u}return typeof s=="string"&&s[0]===`
`&&t.push(Ly),s!==null&&t.push(je(Bn(""+s))),null;case"input":t.push(as("input")),c=u=a=s=null;for(o in n)if(Sr.call(n,o)&&(l=n[o],l!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Ge(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":s=l;break;default:Br(t,r,o,l)}return u!==null?Br(t,r,"checked",u):c!==null&&Br(t,r,"checked",c),s!==null?Br(t,r,"value",s):a!==null&&Br(t,r,"value",a),t.push(o1),null;case"menuitem":t.push(as("menuitem"));for(var f in n)if(Sr.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Ge(400));default:Br(t,r,f,s)}return t.push(oa),null;case"title":t.push(as("title")),s=null;for(d in n)if(Sr.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Ge(434));default:Br(t,r,d,o)}return t.push(oa),s;case"listing":case"pre":t.push(as(e)),o=s=null;for(c in n)if(Sr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Br(t,r,c,a)}if(t.push(oa),o!=null){if(s!=null)throw Error(Ge(60));if(typeof o!="object"||!("__html"in o))throw Error(Ge(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(Ly,je(n)):t.push(je(""+n)))}return typeof s=="string"&&s[0]===`
`&&t.push(Ly),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(as(e));for(var h in n)if(Sr.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Ge(399,e));default:Br(t,r,h,s)}return t.push(o1),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Dy(t,n,e,r);case"html":return i.insertionMode===0&&t.push(I4),Dy(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Dy(t,n,e,r);t.push(as(e)),o=s=null;for(l in n)if(Sr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":wN(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:bN(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(sa,je(l),yl,je(Bn(a)),hc)}return t.push(oa),Wp(t,o,s),s}}var b4=de("</"),w4=de(">"),k4=de('<template id="'),A4=de('"></template>'),E4=de("<!--$-->"),T4=de('<!--$?--><template id="'),_4=de('"></template>'),R4=de("<!--$!-->"),x4=de("<!--/$-->"),N4=de("<template"),P4=de('"'),M4=de(' data-dgst="');de(' data-msg="');de(' data-stck="');var O4=de("></template>");function c1(t,e,n){if(ve(t,T4),n===null)throw Error(Ge(395));return ve(t,n),Mt(t,_4)}var D4=de('<div hidden id="'),L4=de('">'),B4=de("</div>"),F4=de('<svg aria-hidden="true" style="display:none" id="'),U4=de('">'),V4=de("</svg>"),G4=de('<math aria-hidden="true" style="display:none" id="'),W4=de('">'),j4=de("</math>"),H4=de('<table hidden id="'),$4=de('">'),z4=de("</table>"),Z4=de('<table hidden><tbody id="'),X4=de('">'),K4=de("</tbody></table>"),J4=de('<table hidden><tr id="'),Y4=de('">'),q4=de("</tr></table>"),Q4=de('<table hidden><colgroup id="'),eV=de('">'),tV=de("</colgroup></table>");function nV(t,e,n,r){switch(n.insertionMode){case 0:case 1:return ve(t,D4),ve(t,e.segmentPrefix),ve(t,je(r.toString(16))),Mt(t,L4);case 2:return ve(t,F4),ve(t,e.segmentPrefix),ve(t,je(r.toString(16))),Mt(t,U4);case 3:return ve(t,G4),ve(t,e.segmentPrefix),ve(t,je(r.toString(16))),Mt(t,W4);case 4:return ve(t,H4),ve(t,e.segmentPrefix),ve(t,je(r.toString(16))),Mt(t,$4);case 5:return ve(t,Z4),ve(t,e.segmentPrefix),ve(t,je(r.toString(16))),Mt(t,X4);case 6:return ve(t,J4),ve(t,e.segmentPrefix),ve(t,je(r.toString(16))),Mt(t,Y4);case 7:return ve(t,Q4),ve(t,e.segmentPrefix),ve(t,je(r.toString(16))),Mt(t,eV);default:throw Error(Ge(397))}}function rV(t,e){switch(e.insertionMode){case 0:case 1:return Mt(t,B4);case 2:return Mt(t,V4);case 3:return Mt(t,j4);case 4:return Mt(t,z4);case 5:return Mt(t,K4);case 6:return Mt(t,q4);case 7:return Mt(t,tV);default:throw Error(Ge(397))}}var iV=de('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),sV=de('$RS("'),oV=de('","'),aV=de('")<\/script>'),cV=de('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),lV=de('$RC("'),uV=de('","'),dV=de('")<\/script>'),fV=de('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),hV=de('$RX("'),pV=de('"'),gV=de(")<\/script>"),By=de(","),mV=/[<\u2028\u2029]/g;function Fy(t){return JSON.stringify(t).replace(mV,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var nf=Object.assign,vV=Symbol.for("react.element"),kN=Symbol.for("react.portal"),AN=Symbol.for("react.fragment"),EN=Symbol.for("react.strict_mode"),TN=Symbol.for("react.profiler"),_N=Symbol.for("react.provider"),RN=Symbol.for("react.context"),xN=Symbol.for("react.forward_ref"),NN=Symbol.for("react.suspense"),PN=Symbol.for("react.suspense_list"),MN=Symbol.for("react.memo"),Cb=Symbol.for("react.lazy"),yV=Symbol.for("react.scope"),CV=Symbol.for("react.debug_trace_mode"),IV=Symbol.for("react.legacy_hidden"),SV=Symbol.for("react.default_value"),l1=Symbol.iterator;function AC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case AN:return"Fragment";case kN:return"Portal";case TN:return"Profiler";case EN:return"StrictMode";case NN:return"Suspense";case PN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RN:return(t.displayName||"Context")+".Consumer";case _N:return(t._context.displayName||"Context")+".Provider";case xN:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case MN:return e=t.displayName||null,e!==null?e:AC(t.type)||"Memo";case Cb:e=t._payload,t=t._init;try{return AC(t(e))}catch{}}return null}var ON={};function u1(t,e){if(t=t.contextTypes,!t)return ON;var n={},r;for(r in t)n[r]=e[r];return n}var wc=null;function qm(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Ge(401))}else{if(n===null)throw Error(Ge(401));qm(t,n)}e.context._currentValue=e.value}}function DN(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&DN(t)}function LN(t){var e=t.parent;e!==null&&LN(e),t.context._currentValue=t.value}function BN(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(Ge(402));t.depth===e.depth?qm(t,e):BN(t,e)}function FN(t,e){var n=e.parent;if(n===null)throw Error(Ge(402));t.depth===n.depth?qm(t,n):FN(t,n),e.context._currentValue=e.value}function Wg(t){var e=wc;e!==t&&(e===null?LN(t):t===null?DN(e):e.depth===t.depth?qm(e,t):e.depth>t.depth?BN(e,t):FN(e,t),wc=t)}var d1={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function f1(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=d1,t.props=n,t.state=i;var s={queue:[],replace:!1};t._reactInternals=s;var o=e.contextType;if(t.context=typeof o=="object"&&o!==null?o._currentValue:r,o=e.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:nf({},i,o),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&d1.enqueueReplaceState(t,t.state,null),s.queue!==null&&0<s.queue.length)if(e=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&e.length===1)t.state=e[0];else{for(s=o?e[0]:t.state,i=!0,o=o?1:0;o<e.length;o++){var a=e[o];a=typeof a=="function"?a.call(t,s,n,r):a,a!=null&&(i?(i=!1,s=nf({},s,a)):nf(s,a))}t.state=s}else s.queue=null}var bV={id:1,overflow:""};function EC(t,e,n){var r=t.id;t=t.overflow;var i=32-jp(r)-1;r&=~(1<<i),n+=1;var s=32-jp(e)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-jp(e)+i|n<<i|r,overflow:s+t}}return{id:1<<s|n<<i|r,overflow:t}}var jp=Math.clz32?Math.clz32:AV,wV=Math.log,kV=Math.LN2;function AV(t){return t>>>=0,t===0?32:31-(wV(t)/kV|0)|0}function EV(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var TV=typeof Object.is=="function"?Object.is:EV,Vo=null,Ib=null,Hp=null,At=null,Ld=!1,jg=!1,Of=0,ka=null,Qm=0;function pc(){if(Vo===null)throw Error(Ge(321));return Vo}function h1(){if(0<Qm)throw Error(Ge(312));return{memoizedState:null,queue:null,next:null}}function Sb(){return At===null?Hp===null?(Ld=!1,Hp=At=h1()):(Ld=!0,At=Hp):At.next===null?(Ld=!1,At=At.next=h1()):(Ld=!0,At=At.next),At}function bb(){Ib=Vo=null,jg=!1,Hp=null,Qm=0,At=ka=null}function UN(t,e){return typeof e=="function"?e(t):e}function p1(t,e,n){if(Vo=pc(),At=Sb(),Ld){var r=At.queue;if(e=r.dispatch,ka!==null&&(n=ka.get(r),n!==void 0)){ka.delete(r),r=At.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return At.memoizedState=r,[r,e]}return[At.memoizedState,e]}return t=t===UN?typeof e=="function"?e():e:n!==void 0?n(e):e,At.memoizedState=t,t=At.queue={last:null,dispatch:null},t=t.dispatch=_V.bind(null,Vo,t),[At.memoizedState,t]}function g1(t,e){if(Vo=pc(),At=Sb(),e=e===void 0?null:e,At!==null){var n=At.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!TV(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),At.memoizedState=[t,e],t}function _V(t,e,n){if(25<=Qm)throw Error(Ge(301));if(t===Vo)if(jg=!0,t={action:n,next:null},ka===null&&(ka=new Map),n=ka.get(e),n===void 0)ka.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function RV(){throw Error(Ge(394))}function tp(){}var m1={readContext:function(t){return t._currentValue},useContext:function(t){return pc(),t._currentValue},useMemo:g1,useReducer:p1,useRef:function(t){Vo=pc(),At=Sb();var e=At.memoizedState;return e===null?(t={current:t},At.memoizedState=t):e},useState:function(t){return p1(UN,t)},useInsertionEffect:tp,useLayoutEffect:function(){},useCallback:function(t,e){return g1(function(){return t},e)},useImperativeHandle:tp,useEffect:tp,useDebugValue:tp,useDeferredValue:function(t){return pc(),t},useTransition:function(){return pc(),[!1,RV]},useId:function(){var t=Ib.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-jp(t)-1)).toString(32)+e;var n=$p;if(n===null)throw Error(Ge(404));return e=Of++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return pc(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Ge(407));return n()}},$p=null,Uy=CN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function xV(t){return console.error(t),null}function Bd(){}function NV(t,e,n,r,i,s,o,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?xV:i,onAllReady:s===void 0?Bd:s,onShellReady:o===void 0?Bd:o,onShellError:a===void 0?Bd:a,onFatalError:c===void 0?Bd:c},n=Hg(e,0,null,n,!1,!1),n.parentFlushed=!0,t=wb(e,t,null,n,u,ON,null,bV),l.push(t),e}function wb(t,e,n,r,i,s,o,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&WN(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(c),c}function Hg(t,e,n,r,i,s){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function Df(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function $g(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,SN(t.destination,e)):(t.status=1,t.fatalError=e)}function v1(t,e,n,r,i){for(Vo={},Ib=e,Of=0,t=n(r,i);jg;)jg=!1,Of=0,Qm+=1,At=null,t=n(r,i);return bb(),t}function y1(t,e,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=e.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Ge(108,AC(r)||"Unknown",a));r=nf({},o,n)}e.legacyContext=r,zr(t,e,i),e.legacyContext=o}else zr(t,e,i)}function C1(t,e){if(t&&t.defaultProps){e=nf({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function TC(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=u1(n,e.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue:i),f1(s,n,r,i),y1(t,e,s,n)}else{s=u1(n,e.legacyContext),i=v1(t,e,n,r,s);var o=Of!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)f1(i,n,r,s),y1(t,e,i,n);else if(o){r=e.treeContext,e.treeContext=EC(r,1,0);try{zr(t,e,i)}finally{e.treeContext=r}}else zr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,s=S4(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=g4(o,n,r),_C(t,e,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(b4,je(n),w4)}i.lastPushedText=!1}else{switch(n){case IV:case CV:case EN:case TN:case AN:zr(t,e,r.children);return;case PN:zr(t,e,r.children);return;case yV:throw Error(Ge(343));case NN:e:{n=e.blockedBoundary,i=e.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},c=Hg(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=Hg(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(_C(t,e,r),l.lastPushedText&&l.textEmbedded&&l.chunks.push(yb),l.status=1,zg(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=Df(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=wb(t,s,n,c,o,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case xN:if(r=v1(t,e,n.render,r,i),Of!==0){n=e.treeContext,e.treeContext=EC(n,1,0);try{zr(t,e,r)}finally{e.treeContext=n}}else zr(t,e,r);return;case MN:n=n.type,r=C1(n,r),TC(t,e,n,r,i);return;case _N:if(i=r.children,n=n._context,r=r.value,s=n._currentValue,n._currentValue=r,o=wc,wc=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},e.context=r,zr(t,e,i),t=wc,t===null)throw Error(Ge(403));r=t.parentValue,t.context._currentValue=r===SV?t.context._defaultValue:r,t=wc=t.parent,e.context=t;return;case RN:r=r.children,r=r(n._currentValue),zr(t,e,r);return;case Cb:i=n._init,n=i(n._payload),r=C1(n,r),TC(t,e,n,r,void 0);return}throw Error(Ge(130,n==null?n:typeof n,""))}}function zr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case vV:TC(t,e,n.type,n.props,n.ref);return;case kN:throw Error(Ge(257));case Cb:var r=n._init;n=r(n._payload),zr(t,e,n);return}if(kC(n)){I1(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=l1&&n[l1]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);I1(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Ge(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=n1(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=n1(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function I1(t,e,n){for(var r=n.length,i=0;i<r;i++){var s=e.treeContext;e.treeContext=EC(s,r,i);try{_C(t,e,n[i])}finally{e.treeContext=s}}}function _C(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,s=e.context;try{return zr(t,e,n)}catch(c){if(bb(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var o=e.blockedSegment,a=Hg(t,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,t=wb(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Wg(s)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=s,Wg(s),c}}function PV(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,GN(this,e,t)}function VN(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Ge(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return VN(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function zg(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&zg(t,n)}else t.completedSegments.push(e)}function GN(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Ge(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Bd,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&zg(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(PV,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(zg(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function WN(t){if(t.status!==2){var e=wc,n=Uy.current;Uy.current=m1;var r=$p;$p=t.responseState;try{var i=t.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=t,c=o.blockedSegment;if(c.status===0){Wg(o.context);try{zr(a,o,o.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(yb),o.abortSet.delete(o),c.status=1,GN(a,o.blockedBoundary,c)}catch(p){if(bb(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=o.ping;p.then(l,l)}else{o.abortSet.delete(o),c.status=4;var u=o.blockedBoundary,d=p,f=Df(a,d);if(u===null?$g(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var h=a.onAllReady;h()}}}finally{}}}i.splice(0,s),t.destination!==null&&kb(t,t.destination)}catch(p){Df(t,p),$g(t,p)}finally{$p=r,Uy.current=n,n===m1&&Wg(e)}}}function np(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,ve(e,k4),ve(e,t.placeholderPrefix),t=je(r.toString(16)),ve(e,t),Mt(e,A4);case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)ve(e,r[s]);i=ev(t,e,i)}for(;s<r.length-1;s++)ve(e,r[s]);return s<r.length&&(i=Mt(e,r[s])),i;default:throw Error(Ge(390))}}function ev(t,e,n){var r=n.boundary;if(r===null)return np(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,Mt(e,R4),ve(e,N4),r&&(ve(e,M4),ve(e,je(Bn(r))),ve(e,P4)),Mt(e,O4),np(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,s=i.nextSuspenseID++;i=de(i.boundaryPrefix+s.toString(16)),r=r.id=i,c1(e,t.responseState,r),np(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),c1(e,t.responseState,r.id),np(t,e,n);else{if(Mt(e,E4),n=r.completedSegments,n.length!==1)throw Error(Ge(391));ev(t,e,n[0])}return Mt(e,x4)}function S1(t,e,n){return nV(e,t.responseState,n.formatContext,n.id),ev(t,e,n),rV(e,n.formatContext)}function b1(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)jN(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,ve(e,t.startInlineScript),t.sentCompleteBoundaryFunction?ve(e,lV):(t.sentCompleteBoundaryFunction=!0,ve(e,cV)),r===null)throw Error(Ge(395));return n=je(n.toString(16)),ve(e,r),ve(e,uV),ve(e,t.segmentPrefix),ve(e,n),Mt(e,dV)}function jN(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Ge(392));return S1(t,e,r)}return S1(t,e,r),t=t.responseState,ve(e,t.startInlineScript),t.sentCompleteSegmentFunction?ve(e,sV):(t.sentCompleteSegmentFunction=!0,ve(e,iV)),ve(e,t.segmentPrefix),i=je(i.toString(16)),ve(e,i),ve(e,oV),ve(e,t.placeholderPrefix),ve(e,i),Mt(e,aV)}function kb(t,e){Hr=new Uint8Array(512),$r=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){ev(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)ve(e,r[n]);n<r.length&&Mt(e,r[n])}var i=t.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=e;var a=t.responseState,c=o.id,l=o.errorDigest,u=o.errorMessage,d=o.errorComponentStack;if(ve(r,a.startInlineScript),a.sentClientRenderFunction?ve(r,hV):(a.sentClientRenderFunction=!0,ve(r,fV)),c===null)throw Error(Ge(395));ve(r,c),ve(r,pV),(l||u||d)&&(ve(r,By),ve(r,je(Fy(l||"")))),(u||d)&&(ve(r,By),ve(r,je(Fy(u||"")))),d&&(ve(r,By),ve(r,je(Fy(d)))),Mt(r,gV)}i.splice(0,s);var f=t.completedBoundaries;for(s=0;s<f.length;s++)b1(t,e,f[s]);f.splice(0,s),qA(e),Hr=new Uint8Array(512),$r=0;var h=t.partialBoundaries;for(s=0;s<h.length;s++){var p=h[s];e:{i=t,o=e;var m=p.completedSegments;for(a=0;a<m.length;a++)if(!jN(i,o,p,m[a])){a++,m.splice(0,a);var y=!1;break e}m.splice(0,a),y=!0}if(!y){t.destination=null,s++,h.splice(0,s);return}}h.splice(0,s);var g=t.completedBoundaries;for(s=0;s<g.length;s++)b1(t,e,g[s]);g.splice(0,s)}finally{qA(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function w1(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return VN(r,t,e)}),n.clear(),t.destination!==null&&kb(t,t.destination)}catch(r){Df(t,r),$g(t,r)}}gb.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,s,o=new Promise(function(u,d){s=u,i=d}),a=NV(t,h4(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),p4(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,s,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,SN(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{kb(a,d)}catch(f){Df(a,f),$g(a,f)}}},cancel:function(){w1(a)}},{highWaterMark:0});u.allReady=o,n(u)},function(u){o.catch(function(){}),r(u)},i);if(e&&e.signal){var c=e.signal,l=function(){w1(a,c.reason),c.removeEventListener("abort",l)};c.addEventListener("abort",l)}WN(a)})};gb.version="18.2.0";var Hu,HN;Hu=ju,HN=gb;qc.version=Hu.version;qc.renderToString=Hu.renderToString;qc.renderToStaticMarkup=Hu.renderToStaticMarkup;qc.renderToNodeStream=Hu.renderToNodeStream;qc.renderToStaticNodeStream=Hu.renderToStaticNodeStream;qc.renderToReadableStream=HN.renderToReadableStream;const gc=class gc extends mt.Component{constructor(n){super(n);V(this,"outputRef",mt.createRef());V(this,"state",{output:[],sidebarVisible:!1,newLinesCount:0});V(this,"saveOutput",()=>{const n=this.state.output.map(r=>qc.renderToStaticMarkup(r));localStorage.setItem(gc.LOCAL_STORAGE_KEY,JSON.stringify(n))});V(this,"loadOutput",()=>{const n=localStorage.getItem(gc.LOCAL_STORAGE_KEY);if(n){const r=JSON.parse(n).map(i=>mt.createElement("div",{dangerouslySetInnerHTML:{__html:i}}));this.setState({output:r})}});V(this,"addCommand",n=>{this.addToOutput([J.jsx("span",{className:"command","aria-live":"off",children:n})])});V(this,"addError",n=>this.addToOutput([J.jsxs("h2",{children:[" Error: ",n.message]})]));V(this,"handleConnected",()=>this.addToOutput([J.jsx("h2",{children:" Connected"})]));V(this,"handleDisconnected",()=>{this.addToOutput([J.jsx("h2",{children:" Disconnected"})]),this.setState({sidebarVisible:!1})});V(this,"handleUserList",n=>this.setState({sidebarVisible:!!n}));V(this,"handleScroll",()=>{this.isScrolledToBottom()&&this.setState({newLinesCount:0})});V(this,"isScrolledToBottom",()=>{const n=this.outputRef.current;return n?n.scrollHeight-n.scrollTop<=n.clientHeight+1:!1});V(this,"handleScrollToBottom",()=>{this.scrollToBottom(),this.setState({newLinesCount:0})});V(this,"scrollToBottom",()=>{const n=this.outputRef.current;n&&(n.scrollTop=n.scrollHeight)});V(this,"handleMessage",n=>{if(!n)return;const r=CU(n,this.handleExitClick);this.addToOutput(r)});V(this,"handleExitClick",n=>{this.props.client.sendCommand(n)});this.loadOutput(),this.props.client.on("message",this.handleMessage),this.props.client.on("connect",this.handleConnected),this.props.client.on("disconnect",this.handleDisconnected),this.props.client.on("error",this.addError),this.props.client.on("command",this.addCommand),this.props.client.on("userlist",this.handleUserList)}getSnapshotBeforeUpdate(n,r){if(this.outputRef.current){const i=this.outputRef.current;return i.scrollHeight-i.scrollTop<=i.clientHeight}return null}componentDidUpdate(n,r,i){i&&this.scrollToBottom(),this.state.output.length>r.output.length&&(this.isScrolledToBottom()?this.setState({newLinesCount:0}):this.setState({newLinesCount:this.state.newLinesCount+(this.state.output.length-r.output.length)})),this.saveOutput()}componentWillUnmount(){this.props.client.removeListener("message",this.handleMessage)}addToOutput(n){this.setState(r=>{const i=r.output.length,s=n.map((c,l)=>J.jsx("div",{children:c},i+l));return{output:[...r.output,...s].slice(-gc.MAX_OUTPUT_LENGTH)}})}saveLog(){const n=this.outputRef.current;if(n){const r=n.innerHTML,i=new Blob([r],{type:"text/html"}),s=URL.createObjectURL(i),o=document.createElement("a"),a=new Date,c=a.toLocaleDateString(),l=a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=`${document.title.replace(/\s+/g,"-")}-log-${c}-${l}.html`;o.download=d,o.href=s,o.click(),URL.revokeObjectURL(s),o.remove()}}clearLog(){this.setState({output:[]})}render(){var n="output";this.state.sidebarVisible&&(n+=" sidebar-visible");const r=`${this.state.newLinesCount} new ${this.state.newLinesCount===1?"message":"messages"}`;return J.jsxs("div",{ref:this.outputRef,className:n,onScroll:this.handleScroll,"aria-live":"polite",role:"log",children:[this.state.output,this.state.newLinesCount>0&&J.jsx("div",{className:"new-lines-notification",onClick:this.handleScrollToBottom,role:"button","aria-live":"off",children:r})]})}};V(gc,"MAX_OUTPUT_LENGTH",5e3),V(gc,"LOCAL_STORAGE_KEY","outputLog");let RC=gc;var $N={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||c,f),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,f,h,p){var m=n?n+l:l;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,v,S;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,f),!0;case 5:return y.fn.call(y.context,u,d,f,h),!0;case 6:return y.fn.call(y.context,u,d,f,h,p),!0}for(S=1,v=new Array(g-1);S<g;S++)v[S-1]=arguments[S];y.fn.apply(y.context,v)}else{var E=y.length,k;for(S=0;S<E;S++)switch(y[S].once&&this.removeListener(l,y[S].fn,void 0,!0),g){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,u);break;case 3:y[S].fn.call(y[S].context,u,d);break;case 4:y[S].fn.call(y[S].context,u,d,f);break;default:if(!v)for(k=1,v=new Array(g-1);k<g;k++)v[k-1]=arguments[k];y[S].fn.apply(y[S].context,v)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==u||f&&!p[m].once||d&&p[m].context!==d)&&y.push(p[m]);y.length?this._events[h]=y.length===1?y[0]:y:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})($N);var MV=$N.exports;const zN=ah(MV);var Mn={},tv={};tv.byteLength=LV;tv.toByteArray=FV;tv.fromByteArray=GV;var ms=[],si=[],OV=typeof Uint8Array<"u"?Uint8Array:Array,Vy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var fl=0,DV=Vy.length;fl<DV;++fl)ms[fl]=Vy[fl],si[Vy.charCodeAt(fl)]=fl;si[45]=62;si[95]=63;function ZN(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function LV(t){var e=ZN(t),n=e[0],r=e[1];return(n+r)*3/4-r}function BV(t,e,n){return(e+n)*3/4-n}function FV(t){var e,n=ZN(t),r=n[0],i=n[1],s=new OV(BV(t,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=si[t.charCodeAt(c)]<<18|si[t.charCodeAt(c+1)]<<12|si[t.charCodeAt(c+2)]<<6|si[t.charCodeAt(c+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=si[t.charCodeAt(c)]<<2|si[t.charCodeAt(c+1)]>>4,s[o++]=e&255),i===1&&(e=si[t.charCodeAt(c)]<<10|si[t.charCodeAt(c+1)]<<4|si[t.charCodeAt(c+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function UV(t){return ms[t>>18&63]+ms[t>>12&63]+ms[t>>6&63]+ms[t&63]}function VV(t,e,n){for(var r,i=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(UV(r));return i.join("")}function GV(t){for(var e,n=t.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(VV(t,o,o+s>a?a:o+s));return r===1?(e=t[n-1],i.push(ms[e>>2]+ms[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(ms[e>>10]+ms[e>>4&63]+ms[e<<2&63]+"=")),i.join("")}var Ab={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */Ab.read=function(t,e,n,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=s*256+t[e+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+t[e+d],d+=f,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(h?-1:1)*o*Math.pow(2,s-r)};Ab.write=function(t,e,n,r,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,m=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?e+=f/c:e+=f*Math.pow(2,1-d),e*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(e*c-1)*Math.pow(2,i),o=o+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;t[n+h]=a&255,h+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;t[n+h]=o&255,h+=p,o/=256,l-=8);t[n+h-p]|=m*128};(function(t){const e=tv,n=Ab,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const T=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(T,C),T.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(T){if(T>i)throw new RangeError('The value "'+T+'" is invalid for option "size"');const C=new Uint8Array(T);return Object.setPrototypeOf(C,a.prototype),C}function a(T,C,I){if(typeof T=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(T)}return c(T,C,I)}a.poolSize=8192;function c(T,C,I){if(typeof T=="string")return f(T,C);if(ArrayBuffer.isView(T))return p(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(Ze(T,ArrayBuffer)||T&&Ze(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(T,SharedArrayBuffer)||T&&Ze(T.buffer,SharedArrayBuffer)))return m(T,C,I);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const x=T.valueOf&&T.valueOf();if(x!=null&&x!==T)return a.from(x,C,I);const L=y(T);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return a.from(T[Symbol.toPrimitive]("string"),C,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}a.from=function(T,C,I){return c(T,C,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function u(T,C,I){return l(T),T<=0?o(T):C!==void 0?typeof I=="string"?o(T).fill(C,I):o(T).fill(C):o(T)}a.alloc=function(T,C,I){return u(T,C,I)};function d(T){return l(T),o(T<0?0:g(T)|0)}a.allocUnsafe=function(T){return d(T)},a.allocUnsafeSlow=function(T){return d(T)};function f(T,C){if((typeof C!="string"||C==="")&&(C="utf8"),!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const I=S(T,C)|0;let x=o(I);const L=x.write(T,C);return L!==I&&(x=x.slice(0,L)),x}function h(T){const C=T.length<0?0:g(T.length)|0,I=o(C);for(let x=0;x<C;x+=1)I[x]=T[x]&255;return I}function p(T){if(Ze(T,Uint8Array)){const C=new Uint8Array(T);return m(C.buffer,C.byteOffset,C.byteLength)}return h(T)}function m(T,C,I){if(C<0||T.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<C+(I||0))throw new RangeError('"length" is outside of buffer bounds');let x;return C===void 0&&I===void 0?x=new Uint8Array(T):I===void 0?x=new Uint8Array(T,C):x=new Uint8Array(T,C,I),Object.setPrototypeOf(x,a.prototype),x}function y(T){if(a.isBuffer(T)){const C=g(T.length)|0,I=o(C);return I.length===0||T.copy(I,0,0,C),I}if(T.length!==void 0)return typeof T.length!="number"||Pe(T.length)?o(0):h(T);if(T.type==="Buffer"&&Array.isArray(T.data))return h(T.data)}function g(T){if(T>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return T|0}function v(T){return+T!=T&&(T=0),a.alloc(+T)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,I){if(Ze(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),Ze(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(C)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===I)return 0;let x=C.length,L=I.length;for(let W=0,Q=Math.min(x,L);W<Q;++W)if(C[W]!==I[W]){x=C[W],L=I[W];break}return x<L?-1:L<x?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,I){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let x;if(I===void 0)for(I=0,x=0;x<C.length;++x)I+=C[x].length;const L=a.allocUnsafe(I);let W=0;for(x=0;x<C.length;++x){let Q=C[x];if(Ze(Q,Uint8Array))W+Q.length>L.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(L,W)):Uint8Array.prototype.set.call(L,Q,W);else if(a.isBuffer(Q))Q.copy(L,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=Q.length}return L};function S(T,C){if(a.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||Ze(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const I=T.length,x=arguments.length>2&&arguments[2]===!0;if(!x&&I===0)return 0;let L=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return rt(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return Fe(T).length;default:if(L)return x?-1:rt(T).length;C=(""+C).toLowerCase(),L=!0}}a.byteLength=S;function E(T,C,I){let x=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,C>>>=0,I<=C))return"";for(T||(T="utf8");;)switch(T){case"hex":return X(this,C,I);case"utf8":case"utf-8":return G(this,C,I);case"ascii":return q(this,C,I);case"latin1":case"binary":return j(this,C,I);case"base64":return U(this,C,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,C,I);default:if(x)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),x=!0}}a.prototype._isBuffer=!0;function k(T,C,I){const x=T[C];T[C]=T[I],T[I]=x}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<C;I+=2)k(this,I,I+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<C;I+=4)k(this,I,I+3),k(this,I+1,I+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<C;I+=8)k(this,I,I+7),k(this,I+1,I+6),k(this,I+2,I+5),k(this,I+3,I+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?G(this,0,C):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const I=t.INSPECT_MAX_BYTES;return C=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(C+=" ... "),"<Buffer "+C+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(C,I,x,L,W){if(Ze(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(I===void 0&&(I=0),x===void 0&&(x=C?C.length:0),L===void 0&&(L=0),W===void 0&&(W=this.length),I<0||x>C.length||L<0||W>this.length)throw new RangeError("out of range index");if(L>=W&&I>=x)return 0;if(L>=W)return-1;if(I>=x)return 1;if(I>>>=0,x>>>=0,L>>>=0,W>>>=0,this===C)return 0;let Q=W-L,Oe=x-I;const dt=Math.min(Q,Oe),ft=this.slice(L,W),It=C.slice(I,x);for(let it=0;it<dt;++it)if(ft[it]!==It[it]){Q=ft[it],Oe=It[it];break}return Q<Oe?-1:Oe<Q?1:0};function b(T,C,I,x,L){if(T.length===0)return-1;if(typeof I=="string"?(x=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,Pe(I)&&(I=L?0:T.length-1),I<0&&(I=T.length+I),I>=T.length){if(L)return-1;I=T.length-1}else if(I<0)if(L)I=0;else return-1;if(typeof C=="string"&&(C=a.from(C,x)),a.isBuffer(C))return C.length===0?-1:A(T,C,I,x,L);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(T,C,I):Uint8Array.prototype.lastIndexOf.call(T,C,I):A(T,[C],I,x,L);throw new TypeError("val must be string, number or Buffer")}function A(T,C,I,x,L){let W=1,Q=T.length,Oe=C.length;if(x!==void 0&&(x=String(x).toLowerCase(),x==="ucs2"||x==="ucs-2"||x==="utf16le"||x==="utf-16le")){if(T.length<2||C.length<2)return-1;W=2,Q/=2,Oe/=2,I/=2}function dt(It,it){return W===1?It[it]:It.readUInt16BE(it*W)}let ft;if(L){let It=-1;for(ft=I;ft<Q;ft++)if(dt(T,ft)===dt(C,It===-1?0:ft-It)){if(It===-1&&(It=ft),ft-It+1===Oe)return It*W}else It!==-1&&(ft-=ft-It),It=-1}else for(I+Oe>Q&&(I=Q-Oe),ft=I;ft>=0;ft--){let It=!0;for(let it=0;it<Oe;it++)if(dt(T,ft+it)!==dt(C,it)){It=!1;break}if(It)return ft}return-1}a.prototype.includes=function(C,I,x){return this.indexOf(C,I,x)!==-1},a.prototype.indexOf=function(C,I,x){return b(this,C,I,x,!0)},a.prototype.lastIndexOf=function(C,I,x){return b(this,C,I,x,!1)};function _(T,C,I,x){I=Number(I)||0;const L=T.length-I;x?(x=Number(x),x>L&&(x=L)):x=L;const W=C.length;x>W/2&&(x=W/2);let Q;for(Q=0;Q<x;++Q){const Oe=parseInt(C.substr(Q*2,2),16);if(Pe(Oe))return Q;T[I+Q]=Oe}return Q}function P(T,C,I,x){return Ie(rt(C,T.length-I),T,I,x)}function N(T,C,I,x){return Ie(et(C),T,I,x)}function O(T,C,I,x){return Ie(Fe(C),T,I,x)}function D(T,C,I,x){return Ie(le(C,T.length-I),T,I,x)}a.prototype.write=function(C,I,x,L){if(I===void 0)L="utf8",x=this.length,I=0;else if(x===void 0&&typeof I=="string")L=I,x=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(x)?(x=x>>>0,L===void 0&&(L="utf8")):(L=x,x=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-I;if((x===void 0||x>W)&&(x=W),C.length>0&&(x<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let Q=!1;for(;;)switch(L){case"hex":return _(this,C,I,x);case"utf8":case"utf-8":return P(this,C,I,x);case"ascii":case"latin1":case"binary":return N(this,C,I,x);case"base64":return O(this,C,I,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,C,I,x);default:if(Q)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function U(T,C,I){return C===0&&I===T.length?e.fromByteArray(T):e.fromByteArray(T.slice(C,I))}function G(T,C,I){I=Math.min(T.length,I);const x=[];let L=C;for(;L<I;){const W=T[L];let Q=null,Oe=W>239?4:W>223?3:W>191?2:1;if(L+Oe<=I){let dt,ft,It,it;switch(Oe){case 1:W<128&&(Q=W);break;case 2:dt=T[L+1],(dt&192)===128&&(it=(W&31)<<6|dt&63,it>127&&(Q=it));break;case 3:dt=T[L+1],ft=T[L+2],(dt&192)===128&&(ft&192)===128&&(it=(W&15)<<12|(dt&63)<<6|ft&63,it>2047&&(it<55296||it>57343)&&(Q=it));break;case 4:dt=T[L+1],ft=T[L+2],It=T[L+3],(dt&192)===128&&(ft&192)===128&&(It&192)===128&&(it=(W&15)<<18|(dt&63)<<12|(ft&63)<<6|It&63,it>65535&&it<1114112&&(Q=it))}}Q===null?(Q=65533,Oe=1):Q>65535&&(Q-=65536,x.push(Q>>>10&1023|55296),Q=56320|Q&1023),x.push(Q),L+=Oe}return $(x)}const z=4096;function $(T){const C=T.length;if(C<=z)return String.fromCharCode.apply(String,T);let I="",x=0;for(;x<C;)I+=String.fromCharCode.apply(String,T.slice(x,x+=z));return I}function q(T,C,I){let x="";I=Math.min(T.length,I);for(let L=C;L<I;++L)x+=String.fromCharCode(T[L]&127);return x}function j(T,C,I){let x="";I=Math.min(T.length,I);for(let L=C;L<I;++L)x+=String.fromCharCode(T[L]);return x}function X(T,C,I){const x=T.length;(!C||C<0)&&(C=0),(!I||I<0||I>x)&&(I=x);let L="";for(let W=C;W<I;++W)L+=Ht[T[W]];return L}function re(T,C,I){const x=T.slice(C,I);let L="";for(let W=0;W<x.length-1;W+=2)L+=String.fromCharCode(x[W]+x[W+1]*256);return L}a.prototype.slice=function(C,I){const x=this.length;C=~~C,I=I===void 0?x:~~I,C<0?(C+=x,C<0&&(C=0)):C>x&&(C=x),I<0?(I+=x,I<0&&(I=0)):I>x&&(I=x),I<C&&(I=C);const L=this.subarray(C,I);return Object.setPrototypeOf(L,a.prototype),L};function Z(T,C,I){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+C>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,I,x){C=C>>>0,I=I>>>0,x||Z(C,I,this.length);let L=this[C],W=1,Q=0;for(;++Q<I&&(W*=256);)L+=this[C+Q]*W;return L},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,I,x){C=C>>>0,I=I>>>0,x||Z(C,I,this.length);let L=this[C+--I],W=1;for(;I>0&&(W*=256);)L+=this[C+--I]*W;return L},a.prototype.readUint8=a.prototype.readUInt8=function(C,I){return C=C>>>0,I||Z(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,I){return C=C>>>0,I||Z(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,I){return C=C>>>0,I||Z(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,I){return C=C>>>0,I||Z(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,I){return C=C>>>0,I||Z(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=Sn(function(C){C=C>>>0,ut(C,"offset");const I=this[C],x=this[C+7];(I===void 0||x===void 0)&&Ut(C,this.length-8);const L=I+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,W=this[++C]+this[++C]*2**8+this[++C]*2**16+x*2**24;return BigInt(L)+(BigInt(W)<<BigInt(32))}),a.prototype.readBigUInt64BE=Sn(function(C){C=C>>>0,ut(C,"offset");const I=this[C],x=this[C+7];(I===void 0||x===void 0)&&Ut(C,this.length-8);const L=I*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],W=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+x;return(BigInt(L)<<BigInt(32))+BigInt(W)}),a.prototype.readIntLE=function(C,I,x){C=C>>>0,I=I>>>0,x||Z(C,I,this.length);let L=this[C],W=1,Q=0;for(;++Q<I&&(W*=256);)L+=this[C+Q]*W;return W*=128,L>=W&&(L-=Math.pow(2,8*I)),L},a.prototype.readIntBE=function(C,I,x){C=C>>>0,I=I>>>0,x||Z(C,I,this.length);let L=I,W=1,Q=this[C+--L];for(;L>0&&(W*=256);)Q+=this[C+--L]*W;return W*=128,Q>=W&&(Q-=Math.pow(2,8*I)),Q},a.prototype.readInt8=function(C,I){return C=C>>>0,I||Z(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,I){C=C>>>0,I||Z(C,2,this.length);const x=this[C]|this[C+1]<<8;return x&32768?x|4294901760:x},a.prototype.readInt16BE=function(C,I){C=C>>>0,I||Z(C,2,this.length);const x=this[C+1]|this[C]<<8;return x&32768?x|4294901760:x},a.prototype.readInt32LE=function(C,I){return C=C>>>0,I||Z(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,I){return C=C>>>0,I||Z(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=Sn(function(C){C=C>>>0,ut(C,"offset");const I=this[C],x=this[C+7];(I===void 0||x===void 0)&&Ut(C,this.length-8);const L=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(x<<24);return(BigInt(L)<<BigInt(32))+BigInt(I+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=Sn(function(C){C=C>>>0,ut(C,"offset");const I=this[C],x=this[C+7];(I===void 0||x===void 0)&&Ut(C,this.length-8);const L=(I<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(L)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+x)}),a.prototype.readFloatLE=function(C,I){return C=C>>>0,I||Z(C,4,this.length),n.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,I){return C=C>>>0,I||Z(C,4,this.length),n.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,I){return C=C>>>0,I||Z(C,8,this.length),n.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,I){return C=C>>>0,I||Z(C,8,this.length),n.read(this,C,!1,52,8)};function ie(T,C,I,x,L,W){if(!a.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>L||C<W)throw new RangeError('"value" argument is out of bounds');if(I+x>T.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,I,x,L){if(C=+C,I=I>>>0,x=x>>>0,!L){const Oe=Math.pow(2,8*x)-1;ie(this,C,I,x,Oe,0)}let W=1,Q=0;for(this[I]=C&255;++Q<x&&(W*=256);)this[I+Q]=C/W&255;return I+x},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,I,x,L){if(C=+C,I=I>>>0,x=x>>>0,!L){const Oe=Math.pow(2,8*x)-1;ie(this,C,I,x,Oe,0)}let W=x-1,Q=1;for(this[I+W]=C&255;--W>=0&&(Q*=256);)this[I+W]=C/Q&255;return I+x},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,1,255,0),this[I]=C&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,2,65535,0),this[I]=C&255,this[I+1]=C>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,2,65535,0),this[I]=C>>>8,this[I+1]=C&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,4,4294967295,0),this[I+3]=C>>>24,this[I+2]=C>>>16,this[I+1]=C>>>8,this[I]=C&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,4,4294967295,0),this[I]=C>>>24,this[I+1]=C>>>16,this[I+2]=C>>>8,this[I+3]=C&255,I+4};function ke(T,C,I,x,L){an(C,x,L,T,I,7);let W=Number(C&BigInt(4294967295));T[I++]=W,W=W>>8,T[I++]=W,W=W>>8,T[I++]=W,W=W>>8,T[I++]=W;let Q=Number(C>>BigInt(32)&BigInt(4294967295));return T[I++]=Q,Q=Q>>8,T[I++]=Q,Q=Q>>8,T[I++]=Q,Q=Q>>8,T[I++]=Q,I}function Ee(T,C,I,x,L){an(C,x,L,T,I,7);let W=Number(C&BigInt(4294967295));T[I+7]=W,W=W>>8,T[I+6]=W,W=W>>8,T[I+5]=W,W=W>>8,T[I+4]=W;let Q=Number(C>>BigInt(32)&BigInt(4294967295));return T[I+3]=Q,Q=Q>>8,T[I+2]=Q,Q=Q>>8,T[I+1]=Q,Q=Q>>8,T[I]=Q,I+8}a.prototype.writeBigUInt64LE=Sn(function(C,I=0){return ke(this,C,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Sn(function(C,I=0){return Ee(this,C,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,I,x,L){if(C=+C,I=I>>>0,!L){const dt=Math.pow(2,8*x-1);ie(this,C,I,x,dt-1,-dt)}let W=0,Q=1,Oe=0;for(this[I]=C&255;++W<x&&(Q*=256);)C<0&&Oe===0&&this[I+W-1]!==0&&(Oe=1),this[I+W]=(C/Q>>0)-Oe&255;return I+x},a.prototype.writeIntBE=function(C,I,x,L){if(C=+C,I=I>>>0,!L){const dt=Math.pow(2,8*x-1);ie(this,C,I,x,dt-1,-dt)}let W=x-1,Q=1,Oe=0;for(this[I+W]=C&255;--W>=0&&(Q*=256);)C<0&&Oe===0&&this[I+W+1]!==0&&(Oe=1),this[I+W]=(C/Q>>0)-Oe&255;return I+x},a.prototype.writeInt8=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,1,127,-128),C<0&&(C=255+C+1),this[I]=C&255,I+1},a.prototype.writeInt16LE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,2,32767,-32768),this[I]=C&255,this[I+1]=C>>>8,I+2},a.prototype.writeInt16BE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,2,32767,-32768),this[I]=C>>>8,this[I+1]=C&255,I+2},a.prototype.writeInt32LE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,4,2147483647,-2147483648),this[I]=C&255,this[I+1]=C>>>8,this[I+2]=C>>>16,this[I+3]=C>>>24,I+4},a.prototype.writeInt32BE=function(C,I,x){return C=+C,I=I>>>0,x||ie(this,C,I,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[I]=C>>>24,this[I+1]=C>>>16,this[I+2]=C>>>8,this[I+3]=C&255,I+4},a.prototype.writeBigInt64LE=Sn(function(C,I=0){return ke(this,C,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Sn(function(C,I=0){return Ee(this,C,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(T,C,I,x,L,W){if(I+x>T.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Te(T,C,I,x,L){return C=+C,I=I>>>0,L||ge(T,C,I,4),n.write(T,C,I,x,23,4),I+4}a.prototype.writeFloatLE=function(C,I,x){return Te(this,C,I,!0,x)},a.prototype.writeFloatBE=function(C,I,x){return Te(this,C,I,!1,x)};function Qe(T,C,I,x,L){return C=+C,I=I>>>0,L||ge(T,C,I,8),n.write(T,C,I,x,52,8),I+8}a.prototype.writeDoubleLE=function(C,I,x){return Qe(this,C,I,!0,x)},a.prototype.writeDoubleBE=function(C,I,x){return Qe(this,C,I,!1,x)},a.prototype.copy=function(C,I,x,L){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(x||(x=0),!L&&L!==0&&(L=this.length),I>=C.length&&(I=C.length),I||(I=0),L>0&&L<x&&(L=x),L===x||C.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(x<0||x>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),C.length-I<L-x&&(L=C.length-I+x);const W=L-x;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,x,L):Uint8Array.prototype.set.call(C,this.subarray(x,L),I),W},a.prototype.fill=function(C,I,x,L){if(typeof C=="string"){if(typeof I=="string"?(L=I,I=0,x=this.length):typeof x=="string"&&(L=x,x=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(C.length===1){const Q=C.charCodeAt(0);(L==="utf8"&&Q<128||L==="latin1")&&(C=Q)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(I<0||this.length<I||this.length<x)throw new RangeError("Out of range index");if(x<=I)return this;I=I>>>0,x=x===void 0?this.length:x>>>0,C||(C=0);let W;if(typeof C=="number")for(W=I;W<x;++W)this[W]=C;else{const Q=a.isBuffer(C)?C:a.from(C,L),Oe=Q.length;if(Oe===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(W=0;W<x-I;++W)this[W+I]=Q[W%Oe]}return this};const ae={};function nn(T,C,I){ae[T]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}nn("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),nn("ERR_INVALID_ARG_TYPE",function(T,C){return`The "${T}" argument must be of type number. Received type ${typeof C}`},TypeError),nn("ERR_OUT_OF_RANGE",function(T,C,I){let x=`The value of "${T}" is out of range.`,L=I;return Number.isInteger(I)&&Math.abs(I)>2**32?L=In(String(I)):typeof I=="bigint"&&(L=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(L=In(L)),L+="n"),x+=` It must be ${C}. Received ${L}`,x},RangeError);function In(T){let C="",I=T.length;const x=T[0]==="-"?1:0;for(;I>=x+4;I-=3)C=`_${T.slice(I-3,I)}${C}`;return`${T.slice(0,I)}${C}`}function Ct(T,C,I){ut(C,"offset"),(T[C]===void 0||T[C+I]===void 0)&&Ut(C,T.length-(I+1))}function an(T,C,I,x,L,W){if(T>I||T<C){const Q=typeof C=="bigint"?"n":"";let Oe;throw W>3?C===0||C===BigInt(0)?Oe=`>= 0${Q} and < 2${Q} ** ${(W+1)*8}${Q}`:Oe=`>= -(2${Q} ** ${(W+1)*8-1}${Q}) and < 2 ** ${(W+1)*8-1}${Q}`:Oe=`>= ${C}${Q} and <= ${I}${Q}`,new ae.ERR_OUT_OF_RANGE("value",Oe,T)}Ct(x,L,W)}function ut(T,C){if(typeof T!="number")throw new ae.ERR_INVALID_ARG_TYPE(C,"number",T)}function Ut(T,C,I){throw Math.floor(T)!==T?(ut(T,I),new ae.ERR_OUT_OF_RANGE(I||"offset","an integer",T)):C<0?new ae.ERR_BUFFER_OUT_OF_BOUNDS:new ae.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${C}`,T)}const ce=/[^+/0-9A-Za-z-_]/g;function Ce(T){if(T=T.split("=")[0],T=T.trim().replace(ce,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function rt(T,C){C=C||1/0;let I;const x=T.length;let L=null;const W=[];for(let Q=0;Q<x;++Q){if(I=T.charCodeAt(Q),I>55295&&I<57344){if(!L){if(I>56319){(C-=3)>-1&&W.push(239,191,189);continue}else if(Q+1===x){(C-=3)>-1&&W.push(239,191,189);continue}L=I;continue}if(I<56320){(C-=3)>-1&&W.push(239,191,189),L=I;continue}I=(L-55296<<10|I-56320)+65536}else L&&(C-=3)>-1&&W.push(239,191,189);if(L=null,I<128){if((C-=1)<0)break;W.push(I)}else if(I<2048){if((C-=2)<0)break;W.push(I>>6|192,I&63|128)}else if(I<65536){if((C-=3)<0)break;W.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((C-=4)<0)break;W.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return W}function et(T){const C=[];for(let I=0;I<T.length;++I)C.push(T.charCodeAt(I)&255);return C}function le(T,C){let I,x,L;const W=[];for(let Q=0;Q<T.length&&!((C-=2)<0);++Q)I=T.charCodeAt(Q),x=I>>8,L=I%256,W.push(L),W.push(x);return W}function Fe(T){return e.toByteArray(Ce(T))}function Ie(T,C,I,x){let L;for(L=0;L<x&&!(L+I>=C.length||L>=T.length);++L)C[L+I]=T[L];return L}function Ze(T,C){return T instanceof C||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===C.name}function Pe(T){return T!==T}const Ht=function(){const T="0123456789abcdef",C=new Array(256);for(let I=0;I<16;++I){const x=I*16;for(let L=0;L<16;++L)C[x+L]=T[I]+T[L]}return C}();function Sn(T){return typeof BigInt>"u"?al:T}function al(){throw new Error("BigInt not supported")}})(Mn);var Fd=(t=>(t[t.BINARY=0]="BINARY",t[t.ECHO=1]="ECHO",t[t.RCP=2]="RCP",t[t.SUPPRESS_GO_AHEAD=3]="SUPPRESS_GO_AHEAD",t[t.APPROX_MESSAGE_SIZE_NEGOTIATION=4]="APPROX_MESSAGE_SIZE_NEGOTIATION",t[t.STATUS=5]="STATUS",t[t.TIMING_MARK=6]="TIMING_MARK",t[t.REMOTE_CONTROLLED_TRANSMISSION_ECHO=7]="REMOTE_CONTROLLED_TRANSMISSION_ECHO",t[t.OUTPUT_LINE_WIDTH=8]="OUTPUT_LINE_WIDTH",t[t.OUTPUT_PAGE_SIZE=9]="OUTPUT_PAGE_SIZE",t[t.OUTPUT_CARRIAGE_RETURN_DISPOSITION=10]="OUTPUT_CARRIAGE_RETURN_DISPOSITION",t[t.OUTPUT_HORIZONTAL_TAB_STOPS=11]="OUTPUT_HORIZONTAL_TAB_STOPS",t[t.OUTPUT_HORIZONTAL_TAB_DISPOSITION=12]="OUTPUT_HORIZONTAL_TAB_DISPOSITION",t[t.OUTPUT_FORMFEED_DISPOSITION=13]="OUTPUT_FORMFEED_DISPOSITION",t[t.OUTPUT_VERTICAL_TAB_STOPS=14]="OUTPUT_VERTICAL_TAB_STOPS",t[t.OUTPUT_VERTICAL_TAB_DISPOSITION=15]="OUTPUT_VERTICAL_TAB_DISPOSITION",t[t.OUTPUT_LINEFEED_DISPOSITION=16]="OUTPUT_LINEFEED_DISPOSITION",t[t.EXTENDED_ASCII=17]="EXTENDED_ASCII",t[t.LOGOUT=18]="LOGOUT",t[t.BYTE_MACRO=19]="BYTE_MACRO",t[t.DATA_ENTRY_TERMINAL=20]="DATA_ENTRY_TERMINAL",t[t.SUPDUP=21]="SUPDUP",t[t.SUPDUP_OUTPUT=22]="SUPDUP_OUTPUT",t[t.SEND_LOCATION=23]="SEND_LOCATION",t[t.TERMINAL_TYPE=24]="TERMINAL_TYPE",t[t.END_OF_RECORD=25]="END_OF_RECORD",t[t.TACACS_USER_IDENTIFICATION=26]="TACACS_USER_IDENTIFICATION",t[t.OUTPUT_MARKING=27]="OUTPUT_MARKING",t[t.TERMINAL_LOCATION_NUMBER=28]="TERMINAL_LOCATION_NUMBER",t[t.TELNET_3270_REGIME=29]="TELNET_3270_REGIME",t[t.X_3_PAD=30]="X_3_PAD",t[t.NAWS=31]="NAWS",t[t.TERMINAL_SPEED=32]="TERMINAL_SPEED",t[t.REMOTE_FLOW_CONTROL=33]="REMOTE_FLOW_CONTROL",t[t.LINEMODE=34]="LINEMODE",t[t.X_DISPLAY_LOCATION=35]="X_DISPLAY_LOCATION",t[t.ENVIRONMENT_OPTION=36]="ENVIRONMENT_OPTION",t[t.AUTHENTICATION_OPTION=37]="AUTHENTICATION_OPTION",t[t.ENCRYPTION_OPTION=38]="ENCRYPTION_OPTION",t[t.NEW_ENVIRONMENT_OPTION=39]="NEW_ENVIRONMENT_OPTION",t[t.TN3270E=40]="TN3270E",t[t.XAUTH=41]="XAUTH",t[t.CHARSET=42]="CHARSET",t[t.RSP=43]="RSP",t[t.COM_PORT_OPTION=44]="COM_PORT_OPTION",t[t.SUPPRESS_LOCAL_ECHO=45]="SUPPRESS_LOCAL_ECHO",t[t.START_TLS=46]="START_TLS",t[t.KERMIT=47]="KERMIT",t[t.SEND_URL=48]="SEND_URL",t[t.FORWARD_X=49]="FORWARD_X",t[t.PRAGMA_LOGON=138]="PRAGMA_LOGON",t[t.GMCP=201]="GMCP",t))(Fd||{}),Ud=(t=>(t[t.SE=240]="SE",t[t.NOP=241]="NOP",t[t.DM=242]="DM",t[t.BRK=243]="BRK",t[t.IP=244]="IP",t[t.AO=245]="AO",t[t.AYT=246]="AYT",t[t.EC=247]="EC",t[t.EL=248]="EL",t[t.GA=249]="GA",t[t.SB=250]="SB",t[t.WILL=251]="WILL",t[t.WONT=252]="WONT",t[t.DO=253]="DO",t[t.DONT=254]="DONT",t[t.IAC=255]="IAC",t))(Ud||{});class WV{constructor(e){V(this,"ws");this.ws=e}on(e,n){if(e==="data"){this.ws.onmessage=i=>{n(i.data)};return}const r="on"+e;this[r]=n}write(e){this.ws.send(e)}}class jV extends zN{constructor(n){super();V(this,"state");V(this,"buffer");V(this,"subBuffer");V(this,"iacSEBuffer",Mn.Buffer.from([255,240]));V(this,"negotiationByte",0);V(this,"stream");this.state=0,this.buffer=Mn.Buffer.alloc(0),this.subBuffer=Mn.Buffer.alloc(0),n&&n.on("data",r=>this.parse(r)),this.stream=n}parse(n){for(this.buffer=Mn.Buffer.concat([this.buffer,Mn.Buffer.from(n)]);this.buffer.length>0;){let r;switch(this.state){case 0:this.handleData();break;case 1:if(r=this.handleCommand(),r)return;break;case 2:if(r=this.handleSubnegotiation(),r)return;break;case 3:if(r=this.handleNegotiation(),r)return;break}}}handleData(){const n=this.buffer.indexOf(255);if(n===-1){this.emit("data",this.buffer),this.buffer=Mn.Buffer.alloc(0);return}this.emit("data",this.buffer.slice(0,n)),this.buffer=this.buffer.slice(n),this.state=1}handleCommand(){if(this.buffer.length<2)return!0;const n=this.buffer[1];switch(this.buffer=this.buffer.slice(2),n){case 241:this.emit("command",241),this.state=0;break;case 250:this.subBuffer=Mn.Buffer.alloc(0),this.state=2;break;case 253:case 254:case 251:case 252:this.negotiationByte=n,this.state=3;break;default:this.state=0;break}return!1}handleNegotiation(){if(this.buffer.length<1)return!0;const n=this.negotiationByte,r=this.buffer[0];return this.buffer=this.buffer.slice(1),this.emit("negotiation",n,r),this.state=0,!1}handleSubnegotiation(){let n=this.buffer.indexOf(this.iacSEBuffer);if(n===-1)return!0;this.state=0;let r=this.buffer.slice(0,n);return r[0]===201?this.handleGmcp(r.slice(1)):this.emit("subnegotiation",r),this.buffer=this.buffer.slice(n+2),!1}handleGmcp(n){const r=n.toString(),[i,s]=r.split(/ +(.+?)$/,2);this.emit("gmcp",i,s)}sendNegotiation(n,r){this.stream.write(Mn.Buffer.from([255,n,r]))}sendGmcp(n,r){const i=n+" "+r,s=Mn.Buffer.from(i),o=Mn.Buffer.concat([Mn.Buffer.from([255,250]),Mn.Buffer.from([201]),s,this.iacSEBuffer]);this.stream.write(o)}sendTerminalType(n){const r=Mn.Buffer.from(n),i=Mn.Buffer.concat([Mn.Buffer.from([255,250]),Mn.Buffer.from([24,0]),r,this.iacSEBuffer]);this.stream.write(i)}}class Ko{constructor(e){V(this,"packageName");V(this,"packageVersion",1);V(this,"client");this.client=e}sendData(e,n){this.client.sendGmcp(this.packageName+"."+e,JSON.stringify(n))}shutdown(){}}class HV extends Ko{constructor(){super(...arguments);V(this,"packageName","Auth.Autologin")}handleToken(n){localStorage.setItem("LoginRefreshToken",n)}sendLogin(){var n=localStorage.getItem("LoginRefreshToken");n&&this.sendData("Login",n)}}class $V extends Ko{constructor(){super(...arguments);V(this,"packageName","Char")}handleName(n){this.client.worldData.playerId=n.name,this.client.worldData.playerName=n.fullname,this.client.emit("statustext",`Logged in as ${n.fullname}`)}sendLogin(n,r){this.client.sendGmcp("Char.Login",JSON.stringify({name:n,password:r}))}}class zV extends Ko{constructor(n){super(n);V(this,"packageName","Client.Keystrokes");V(this,"bindings",[]);V(this,"boundKeyUpHandler");this.boundKeyUpHandler=this.handleKeyup.bind(this),document.addEventListener("keyup",this.boundKeyUpHandler)}handleKeyup(n){const r=this.findBinding(n);if(r){n.preventDefault();const i=this.client.getInput(),s=this.parseCommand(r.command,i);r.autosend?this.client.sendCommand(s):this.placeInInputField(s)}}shutdown(){document.removeEventListener("keyup",this.boundKeyUpHandler)}findBinding(n){try{return this.bindings.find(r=>{if(r.key.toLowerCase()!==n.key.toLowerCase())return!1;const i=new Set([n.altKey&&"Alt",n.ctrlKey&&"Control",n.shiftKey&&"Shift",n.metaKey&&"Meta"].filter(Boolean));return r.modifiers&&r.modifiers.every(s=>i.has(s))})}catch(r){console.error("Error in finding key binding: ",r);return}}parseCommand(n,r){const i=r.trim().split(/\s+/);return n.replace(/%(\d+|\*)/g,(s,o)=>{if(o==="*")return r;const a=parseInt(o,10)-1;return a>=0&&a<i.length?i[a]:s})}placeInInputField(n){this.client.setInput(n)}bindKey(n){const r={key:n.key,modifiers:n.modifiers,command:n.command,autosend:n.autosend};this.bindings.push(r)}unbindKey(n){this.bindings=this.bindings.filter(r=>!(r.key===n.key&&r.modifiers.length===n.modifiers.length&&r.modifiers.every(i=>n.modifiers.includes(i))))}unbindAll(){this.bindings=[]}handleBind(n){this.bindKey(n)}handleUnbind(n){this.unbindKey(n)}handleBind_all(n){this.bindings=n.bindings.map(r=>({...r}))}listBindings(){return[...this.bindings]}}const k1=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),A1=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),xC=(t,e)=>({startTime:e,type:"setValue",value:t}),XN=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),KN=(t,e,{startTime:n,target:r,timeConstant:i})=>r+(e-r)*Math.exp((n-t)/i),Ll=t=>t.type==="exponentialRampToValue",Zg=t=>t.type==="linearRampToValue",fa=t=>Ll(t)||Zg(t),Eb=t=>t.type==="setValue",Ys=t=>t.type==="setValueCurve",Xg=(t,e,n,r)=>{const i=t[e];return i===void 0?r:fa(i)||Eb(i)?i.value:Ys(i)?i.values[i.values.length-1]:KN(n,Xg(t,e-1,i.startTime,r),i)},E1=(t,e,n,r,i)=>n===void 0?[r.insertTime,i]:fa(n)?[n.endTime,n.value]:Eb(n)?[n.startTime,n.value]:Ys(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Xg(t,e-1,n.startTime,i)],NC=t=>t.type==="cancelAndHold",PC=t=>t.type==="cancelScheduledValues",na=t=>NC(t)||PC(t)?t.cancelTime:Ll(t)||Zg(t)?t.endTime:t.startTime,T1=(t,e,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(r-e)):0,_1=(t,e,n,{endTime:r,value:i})=>n+(t-e)/(r-e)*(i-n),ZV=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},XV=(t,{duration:e,startTime:n,values:r})=>{const i=(t-n)/e*(r.length-1);return ZV(r,i)},rp=t=>t.type==="setTarget";class KV{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=na(e);if(NC(e)||PC(e)){const r=this._automationEvents.findIndex(s=>PC(e)&&Ys(s)?s.startTime+s.duration>=n:na(s)>=n),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),NC(e)){const s=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&fa(i)){if(s!==void 0&&rp(s))throw new Error("The internal list is malformed.");const o=s===void 0?i.insertTime:Ys(s)?s.startTime+s.duration:na(s),a=s===void 0?this._defaultValue:Ys(s)?s.values[s.values.length-1]:s.value,c=Ll(i)?T1(n,o,a,i):_1(n,o,a,i),l=Ll(i)?k1(c,n,this._currenTime):A1(c,n,this._currenTime);this._automationEvents.push(l)}if(s!==void 0&&rp(s)&&this._automationEvents.push(xC(this.getValue(n),n)),s!==void 0&&Ys(s)&&s.startTime+s.duration>n){const o=n-s.startTime,a=(s.values.length-1)/s.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=s.values.slice(0,c);if(l<1)for(let d=1;d<c;d+=1){const f=l*d%1;u[d]=s.values[d-1]*(1-f)+s.values[d]*f}this._automationEvents[this._automationEvents.length-1]=XN(u,s.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>na(o)>n),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&Ys(i)&&na(i)+i.duration>n)return!1;const s=Ll(e)?k1(e.value,e.endTime,this._currenTime):Zg(e)?A1(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(s);else{if(Ys(e)&&n+e.duration>na(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,s)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>na(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),i=r[0];rp(i)&&r.unshift(xC(Xg(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>na(o)>e),r=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,s=this._automationEvents[i];if(s!==void 0&&rp(s)&&(r===void 0||!fa(r)||r.insertTime>e))return KN(e,Xg(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(s!==void 0&&Eb(s)&&(r===void 0||!fa(r)))return s.value;if(s!==void 0&&Ys(s)&&(r===void 0||!fa(r)||s.startTime+s.duration>e))return e<s.startTime+s.duration?XV(e,s):s.values[s.values.length-1];if(s!==void 0&&fa(s)&&(r===void 0||!fa(r)))return s.value;if(r!==void 0&&Ll(r)){const[o,a]=E1(this._automationEvents,i,s,r,this._defaultValue);return T1(e,o,a,r)}if(r!==void 0&&Zg(r)){const[o,a]=E1(this._automationEvents,i,s,r,this._defaultValue);return _1(e,o,a,r)}return this._defaultValue}}const JV=t=>({cancelTime:t,type:"cancelAndHold"}),YV=t=>({cancelTime:t,type:"cancelScheduledValues"}),qV=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),QV=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),eG=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),tG=()=>new DOMException("","AbortError"),nG=t=>(e,n,[r,i,s],o)=>{t(e[i],[n,r,s],a=>a[0]===n&&a[1]===r,o)},rG=t=>(e,n,r)=>{const i=[];for(let s=0;s<r.numberOfInputs;s+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},iG=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},ku=new WeakSet,JN=new WeakMap,YN=new WeakMap,qN=new WeakMap,QN=new WeakMap,eP=new WeakMap,tP=new WeakMap,MC=new WeakMap,OC=new WeakMap,DC=new WeakMap,nP={construct(){return nP}},sG=t=>{try{const e=new Proxy(t,nP);new e}catch{return!1}return!0},R1=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,x1=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),i=r.match(R1);for(;i!==null;){const s=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,e).toString());n.push(o),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(R1)}return[n.join(";"),r]},N1=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},P1=t=>{if(!sG(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},oG=(t,e,n,r,i,s,o,a,c,l,u,d,f)=>{let h=0;return(p,m,y={credentials:"omit"})=>{const g=u.get(p);if(g!==void 0&&g.has(m))return Promise.resolve();const v=l.get(p);if(v!==void 0){const k=v.get(m);if(k!==void 0)return k}const S=s(p),E=S.audioWorklet===void 0?i(m).then(([k,b])=>{const[A,_]=x1(k,b),P=`${A};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${_}
})})(window,'_AWGS')`;return n(P)}).then(()=>{const k=f._AWGS.pop();if(k===void 0)throw new SyntaxError;r(S.currentTime,S.sampleRate,()=>k(class{},void 0,(b,A)=>{if(b.trim()==="")throw e();const _=OC.get(S);if(_!==void 0){if(_.has(b))throw e();P1(A),N1(A.parameterDescriptors),_.set(b,A)}else P1(A),N1(A.parameterDescriptors),OC.set(S,new Map([[b,A]]))},S.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(t(d,d))]).then(([[k,b],A])=>{const _=h+1;h=_;const[P,N]=x1(k,b),G=`${P};((AudioWorkletProcessor,registerProcessor)=>{${N}
})(${A?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${A?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${A?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${_}',class extends AudioWorkletProcessor{process(){return !1}})`,z=new Blob([G],{type:"application/javascript; charset=utf-8"}),$=URL.createObjectURL(z);return S.audioWorklet.addModule($,y).then(()=>{if(a(S))return S;const q=o(S);return q.audioWorklet.addModule($,y).then(()=>q)}).then(q=>{if(c===null)throw new SyntaxError;try{new c(q,`__sac${_}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL($))});return v===void 0?l.set(p,new Map([[m,E]])):v.set(m,E),E.then(()=>{const k=u.get(p);k===void 0?u.set(p,new Set([m])):k.add(m)}).finally(()=>{const k=l.get(p);k!==void 0&&k.delete(m)}),E}},Ji=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},nv=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},rP=(t,e,n,r)=>{const i=Ji(t,e),s=nv(i,o=>o[0]===n&&o[1]===r);return i.size===0&&t.delete(e),s},gh=t=>Ji(tP,t),Au=t=>{if(ku.has(t))throw new Error("The AudioNode is already stored.");ku.add(t),gh(t).forEach(e=>e(!0))},iP=t=>"port"in t,mh=t=>{if(!ku.has(t))throw new Error("The AudioNode is not stored.");ku.delete(t),gh(t).forEach(e=>e(!1))},LC=(t,e)=>{!iP(t)&&e.every(n=>n.size===0)&&mh(t)},aG=(t,e,n,r,i,s,o,a,c,l,u,d,f)=>{const h=new WeakMap;return(p,m,y,g,v)=>{const{activeInputs:S,passiveInputs:E}=s(m),{outputs:k}=s(p),b=a(p),A=_=>{const P=c(m),N=c(p);if(_){const O=rP(E,p,y,g);t(S,p,O,!1),!v&&!d(p)&&n(N,P,y,g),f(m)&&Au(m)}else{const O=r(S,p,y,g);e(E,g,O,!1),!v&&!d(p)&&i(N,P,y,g);const D=o(m);if(D===0)u(m)&&LC(m,S);else{const U=h.get(m);U!==void 0&&clearTimeout(U),h.set(m,setTimeout(()=>{u(m)&&LC(m,S)},D*1e3))}}};return l(k,[m,y,g],_=>_[0]===m&&_[1]===y&&_[2]===g,!0)?(b.add(A),u(p)?t(S,p,[y,g,A],!0):e(E,g,[p,y,A],!0),!0):!1}},cG=t=>(e,n,[r,i,s],o)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,n,s]])):t(a,[i,n,s],c=>c[0]===i&&c[1]===n,o)},lG=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)},uG=t=>(e,n)=>{t(e).add(n)},dG={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},fG=(t,e,n,r,i,s)=>class extends t{constructor(a,c){const l=i(a),u={...dG,...c},d=r(l,u),f=s(l)?e():null;super(a,!1,d,f),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},tr=(t,e)=>t.context===e,hG=(t,e,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!tr(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(o,l)}return r.set(o,a),await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},BC=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},js=()=>new DOMException("","IndexSizeError"),sP=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?js():r}})(t.getChannelData)},pG={numberOfChannels:1},gG=(t,e,n,r,i,s,o,a)=>{let c=null;return class oP{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:f,sampleRate:h}={...pG,...u};c===null&&(c=new i(1,1,44100));const p=r!==null&&e(s,s)?new r({length:d,numberOfChannels:f,sampleRate:h}):c.createBuffer(f,d,h);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),sP(p)):e(BC,()=>BC(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===oP.prototype||t.has(u)}}},kr=-34028234663852886e22,ar=-kr,Po=t=>ku.has(t),mG={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},vG=(t,e,n,r,i,s,o,a)=>class extends t{constructor(l,u){const d=s(l),f={...mG,...u},h=i(d,f),p=o(d),m=p?e():null;super(l,!1,h,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=h,this._onended=null,this._playbackRate=n(this,p,h.playbackRate,ar,kr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[l,u]:[l,u,d]),this.context.state!=="closed"){Au(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Po(this)&&mh(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},yG=(t,e,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let d=n(l);const f=tr(d,u);if(!f){const h={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,h),o!==null&&d.start(...o),a!==null&&d.stop(a)}return s.set(u,d),f?await t(u,l.playbackRate,d.playbackRate):await r(u,l.playbackRate,d.playbackRate),await i(l,u,d),d};return{set start(l){o=l},set stop(l){a=l},render(l,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},CG=t=>"playbackRate"in t,IG=t=>"frequency"in t&&"gain"in t,SG=t=>"offset"in t,bG=t=>!("frequency"in t)&&"gain"in t,wG=t=>"detune"in t&&"frequency"in t,kG=t=>"pan"in t,dr=t=>Ji(JN,t),vh=t=>Ji(qN,t),FC=(t,e)=>{const{activeInputs:n}=dr(t);n.forEach(i=>i.forEach(([s])=>{e.includes(t)||FC(s,[...e,t])}));const r=CG(t)?[t.playbackRate]:iP(t)?Array.from(t.parameters.values()):IG(t)?[t.Q,t.detune,t.frequency,t.gain]:SG(t)?[t.offset]:bG(t)?[t.gain]:wG(t)?[t.detune,t.frequency]:kG(t)?[t.pan]:[];for(const i of r){const s=vh(i);s!==void 0&&s.activeInputs.forEach(([o])=>FC(o,e))}Po(t)&&mh(t)},AG=t=>{FC(t.destination,[])},EG=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),TG=(t,e,n,r,i,s,o,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!EG(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:f}=u,{sampleRate:h}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:f==="balanced"?512/h:f==="interactive"||f===void 0?256/h:f==="playback"?1024/h:Math.max(2,Math.min(128,Math.round(f*h/128)))*128/h,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),AG(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},_G=(t,e,n,r,i,s,o,a)=>class extends t{constructor(l,u){const d=s(l),f=o(d),h=i(d,u,f),p=f?e(a):null;super(l,!1,h,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},RG=t=>{const e=new WeakMap,n=async(r,i)=>{const s=i.destination;return e.set(i,s),await t(r,i,s),s};return{render(r,i){const s=e.get(i);return s!==void 0?Promise.resolve(s):n(r,i)}}},xG=(t,e,n,r,i,s,o,a)=>(c,l)=>{const u=l.listener,d=()=>{const k=new Float32Array(1),b=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=o(l);let _=!1,P=[0,0,-1,0,1,0],N=[0,0,0];const O=()=>{if(_)return;_=!0;const z=r(l,256,9,0);z.onaudioprocess=({inputBuffer:$})=>{const q=[s($,k,0),s($,k,1),s($,k,2),s($,k,3),s($,k,4),s($,k,5)];q.some((X,re)=>X!==P[re])&&(u.setOrientation(...q),P=q);const j=[s($,k,6),s($,k,7),s($,k,8)];j.some((X,re)=>X!==N[re])&&(u.setPosition(...j),N=j)},b.connect(z)},D=z=>$=>{$!==P[z]&&(P[z]=$,u.setOrientation(...P))},U=z=>$=>{$!==N[z]&&(N[z]=$,u.setPosition(...N))},G=(z,$,q)=>{const j=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:$});j.connect(b,0,z),j.start(),Object.defineProperty(j.offset,"defaultValue",{get(){return $}});const X=t({context:c},A,j.offset,ar,kr);return a(X,"value",re=>()=>re.call(X),re=>Z=>{try{re.call(X,Z)}catch(ie){if(ie.code!==9)throw ie}O(),A&&q(Z)}),X.cancelAndHoldAtTime=(re=>A?()=>{throw i()}:(...Z)=>{const ie=re.apply(X,Z);return O(),ie})(X.cancelAndHoldAtTime),X.cancelScheduledValues=(re=>A?()=>{throw i()}:(...Z)=>{const ie=re.apply(X,Z);return O(),ie})(X.cancelScheduledValues),X.exponentialRampToValueAtTime=(re=>A?()=>{throw i()}:(...Z)=>{const ie=re.apply(X,Z);return O(),ie})(X.exponentialRampToValueAtTime),X.linearRampToValueAtTime=(re=>A?()=>{throw i()}:(...Z)=>{const ie=re.apply(X,Z);return O(),ie})(X.linearRampToValueAtTime),X.setTargetAtTime=(re=>A?()=>{throw i()}:(...Z)=>{const ie=re.apply(X,Z);return O(),ie})(X.setTargetAtTime),X.setValueAtTime=(re=>A?()=>{throw i()}:(...Z)=>{const ie=re.apply(X,Z);return O(),ie})(X.setValueAtTime),X.setValueCurveAtTime=(re=>A?()=>{throw i()}:(...Z)=>{const ie=re.apply(X,Z);return O(),ie})(X.setValueCurveAtTime),X};return{forwardX:G(0,0,D(0)),forwardY:G(1,0,D(1)),forwardZ:G(2,-1,D(2)),positionX:G(6,0,U(0)),positionY:G(7,0,U(1)),positionZ:G(8,0,U(2)),upX:G(3,0,D(3)),upY:G(4,1,D(4)),upZ:G(5,0,D(5))}},{forwardX:f,forwardY:h,forwardZ:p,positionX:m,positionY:y,positionZ:g,upX:v,upY:S,upZ:E}=u.forwardX===void 0?d():u;return{get forwardX(){return f},get forwardY(){return h},get forwardZ(){return p},get positionX(){return m},get positionY(){return y},get positionZ(){return g},get upX(){return v},get upY(){return S},get upZ(){return E}}},Kg=t=>"context"in t,yh=t=>Kg(t[0]),Qc=(t,e,n,r)=>{for(const i of t)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},M1=(t,e,[n,r],i)=>{Qc(t,[e,n,r],s=>s[0]===e&&s[1]===n,i)},O1=(t,[e,n,r],i)=>{const s=t.get(e);s===void 0?t.set(e,new Set([[n,r]])):Qc(s,[n,r],o=>o[0]===n,i)},$u=t=>"inputs"in t,Jg=(t,e,n,r)=>{if($u(e)){const i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},aP=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},NG=(t,e,n)=>nv(t,r=>r[0]===e&&r[1]===n),cP=(t,e)=>{if(!gh(t).delete(e))throw new Error("Missing the expected event listener.")},lP=(t,e,n)=>{const r=Ji(t,e),i=nv(r,s=>s[0]===n);return r.size===0&&t.delete(e),i},Yg=(t,e,n,r)=>{$u(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Dt=t=>Ji(YN,t),Lf=t=>Ji(QN,t),Uc=t=>MC.has(t),zp=t=>!ku.has(t),D1=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),i=t.createGain(),s=t.createBuffer(1,2,44100),o=s.getChannelData(0);o[0]=1,o[1]=1;const a=t.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(t.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Gy=(t,e)=>{const n=new Map;for(const r of t)for(const i of r){const s=n.get(i);n.set(i,s===void 0?1:s+1)}n.forEach((r,i)=>e(i,r))},qg=t=>"context"in t,PG=t=>{const e=new Map;t.connect=(n=>(r,i=0,s=0)=>{const o=qg(r)?n(r,i,s):n(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:s,output:i}]):a.every(c=>c.input!==s||c.output!==i)&&a.push({input:s,output:i}),o})(t.connect.bind(t)),t.disconnect=(n=>(r,i,s)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[o,a]of e){const c=a.filter(l=>l.output!==r);c.length===0?e.delete(o):e.set(o,c)}else if(e.has(r))if(i===void 0)e.delete(r);else{const o=e.get(r);if(o!==void 0){const a=o.filter(c=>c.output!==i&&(c.input!==s||s===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[o,a]of e)a.forEach(c=>{qg(o)?t.connect(o,c.output,c.input):t.connect(o,c.output)})})(t.disconnect)},MG=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:s}=vh(e),{outputs:o}=dr(t),a=gh(t),c=l=>{const u=Dt(t),d=Lf(e);if(l){const f=lP(s,t,n);M1(i,t,f,!1),!r&&!Uc(t)&&u.connect(d,n)}else{const f=NG(i,t,n);O1(s,f,!1),!r&&!Uc(t)&&u.disconnect(d,n)}};return Qc(o,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),Po(t)?M1(i,t,[n,c],!0):O1(s,[t,n,c],!0),!0):!1},OG=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:s}=dr(e),o=aP(i[r],t,n);return o===null?[rP(s,t,n,r)[2],!1]:[o[2],!0]},DG=(t,e,n)=>{const{activeInputs:r,passiveInputs:i}=vh(e),s=aP(r,t,n);return s===null?[lP(i,t,n)[1],!1]:[s[2],!0]},Tb=(t,e,n,r,i)=>{const[s,o]=OG(t,n,r,i);if(s!==null&&(cP(t,s),o&&!e&&!Uc(t)&&Yg(Dt(t),Dt(n),r,i)),Po(n)){const{activeInputs:a}=dr(n);LC(n,a)}},_b=(t,e,n,r)=>{const[i,s]=DG(t,n,r);i!==null&&(cP(t,i),s&&!e&&!Uc(t)&&Dt(t).disconnect(Lf(n),r))},LG=(t,e)=>{const n=dr(t),r=[];for(const i of n.outputs)yh(i)?Tb(t,e,...i):_b(t,e,...i),r.push(i[0]);return n.outputs.clear(),r},BG=(t,e,n)=>{const r=dr(t),i=[];for(const s of r.outputs)s[1]===n&&(yh(s)?Tb(t,e,...s):_b(t,e,...s),i.push(s[0]),r.outputs.delete(s));return i},FG=(t,e,n,r,i)=>{const s=dr(t);return Array.from(s.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(i===void 0||o[2]===i)).map(o=>(yh(o)?Tb(t,e,...o):_b(t,e,...o),s.outputs.delete(o),o[0]))},UG=(t,e,n,r,i,s,o,a,c,l,u,d,f,h,p,m)=>class extends l{constructor(g,v,S,E){super(S),this._context=g,this._nativeAudioNode=S;const k=u(g);d(k)&&n(D1,()=>D1(k,m))!==!0&&PG(S),YN.set(this,S),tP.set(this,new Set),g.state!=="closed"&&v&&Au(this),t(this,E,S)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(g){this._nativeAudioNode.channelCount=g}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(g){this._nativeAudioNode.channelCountMode=g}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(g){this._nativeAudioNode.channelInterpretation=g}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(g,v=0,S=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();const E=u(this._context),k=p(E);if(f(g)||h(g))throw s();if(Kg(g)){const _=Dt(g);try{const N=Jg(this._nativeAudioNode,_,v,S),O=zp(this);(k||O)&&this._nativeAudioNode.disconnect(...N),this.context.state!=="closed"&&!O&&zp(g)&&Au(g)}catch(N){throw N.code===12?s():N}if(e(this,g,v,S,k)){const N=c([this],g);Gy(N,r(k))}return g}const b=Lf(g);if(b.name==="playbackRate"&&b.maxValue===1024)throw o();try{this._nativeAudioNode.connect(b,v),(k||zp(this))&&this._nativeAudioNode.disconnect(b,v)}catch(_){throw _.code===12?s():_}if(MG(this,g,v,k)){const _=c([this],g);Gy(_,r(k))}}disconnect(g,v,S){let E;const k=u(this._context),b=p(k);if(g===void 0)E=LG(this,b);else if(typeof g=="number"){if(g<0||g>=this.numberOfOutputs)throw i();E=BG(this,b,g)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Kg(g)&&S!==void 0&&(S<0||S>=g.numberOfInputs))throw i();if(E=FG(this,b,g,v,S),E.length===0)throw s()}for(const A of E){const _=c([this],A);Gy(_,a)}}},VG=(t,e,n,r,i,s,o,a,c,l,u,d,f)=>(h,p,m,y=null,g=null)=>{const v=m.value,S=new KV(v),E=p?r(S):null,k={get defaultValue(){return v},get maxValue(){return y===null?m.maxValue:y},get minValue(){return g===null?m.minValue:g},get value(){return m.value},set value(b){m.value=b,k.setValueAtTime(b,h.context.currentTime)},cancelAndHoldAtTime(b){if(typeof m.cancelAndHoldAtTime=="function")E===null&&S.flush(h.context.currentTime),S.add(i(b)),m.cancelAndHoldAtTime(b);else{const A=Array.from(S).pop();E===null&&S.flush(h.context.currentTime),S.add(i(b));const _=Array.from(S).pop();m.cancelScheduledValues(b),A!==_&&_!==void 0&&(_.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(_.value,_.endTime):_.type==="linearRampToValue"?m.linearRampToValueAtTime(_.value,_.endTime):_.type==="setValue"?m.setValueAtTime(_.value,_.startTime):_.type==="setValueCurve"&&m.setValueCurveAtTime(_.values,_.startTime,_.duration))}return k},cancelScheduledValues(b){return E===null&&S.flush(h.context.currentTime),S.add(s(b)),m.cancelScheduledValues(b),k},exponentialRampToValueAtTime(b,A){if(b===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;const _=h.context.currentTime;return E===null&&S.flush(_),Array.from(S).length===0&&(S.add(l(v,_)),m.setValueAtTime(v,_)),S.add(o(b,A)),m.exponentialRampToValueAtTime(b,A),k},linearRampToValueAtTime(b,A){const _=h.context.currentTime;return E===null&&S.flush(_),Array.from(S).length===0&&(S.add(l(v,_)),m.setValueAtTime(v,_)),S.add(a(b,A)),m.linearRampToValueAtTime(b,A),k},setTargetAtTime(b,A,_){return E===null&&S.flush(h.context.currentTime),S.add(c(b,A,_)),m.setTargetAtTime(b,A,_),k},setValueAtTime(b,A){return E===null&&S.flush(h.context.currentTime),S.add(l(b,A)),m.setValueAtTime(b,A),k},setValueCurveAtTime(b,A,_){const P=b instanceof Float32Array?b:new Float32Array(b);if(d!==null&&d.name==="webkitAudioContext"){const N=A+_,O=h.context.sampleRate,D=Math.ceil(A*O),U=Math.floor(N*O),G=U-D,z=new Float32Array(G);for(let q=0;q<G;q+=1){const j=(P.length-1)/_*((D+q)/O-A),X=Math.floor(j),re=Math.ceil(j);z[q]=X===re?P[X]:(1-(j-X))*P[X]+(1-(re-j))*P[re]}E===null&&S.flush(h.context.currentTime),S.add(u(z,A,_)),m.setValueCurveAtTime(z,A,_);const $=U/O;$<N&&f(k,z[z.length-1],$),f(k,P[P.length-1],N)}else E===null&&S.flush(h.context.currentTime),S.add(u(P,A,_)),m.setValueCurveAtTime(P,A,_);return k}};return n.set(k,m),e.set(k,h),t(k,E),k},GG=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:i}=n;e.exponentialRampToValueAtTime(i,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:i}=n;e.linearRampToValueAtTime(i,r)}else if(n.type==="setTarget"){const{startTime:r,target:i,timeConstant:s}=n;e.setTargetAtTime(i,r,s)}else if(n.type==="setValue"){const{startTime:r,value:i}=n;e.setValueAtTime(i,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:i,values:s}=n;e.setValueCurveAtTime(s,i,r)}else throw new Error("Can't apply an unknown automation.")}});class uP{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,i)=>e.call(n,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const WG={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},jG=(t,e,n,r,i,s,o,a,c,l,u,d,f,h)=>class extends e{constructor(m,y,g){var v;const S=a(m),E=c(S),k=u({...WG,...g});f(k);const b=OC.get(S),A=b==null?void 0:b.get(y),_=E||S.state!=="closed"?S:(v=o(S))!==null&&v!==void 0?v:S,P=i(_,E?null:m.baseLatency,l,y,A,k),N=E?r(y,k,A):null;super(m,!0,P,N);const O=[];P.parameters.forEach((U,G)=>{const z=n(this,E,U);O.push([G,z])}),this._nativeAudioWorkletNode=P,this._onprocessorerror=null,this._parameters=new uP(O),E&&t(S,this);const{activeInputs:D}=s(this);d(P,D)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const y=typeof m=="function"?h(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=y;const g=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=g!==null&&g===y?m:g}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Qg(t,e,n,r,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{const s=t.getChannelData(r);if(e[n].byteLength===0)e[n]=s.slice(i,i+128);else{const o=new Float32Array(s.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(o)}}}const dP=(t,e,n,r,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,i):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],i)},em=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const i=[],s=typeof e=="number"?e:e[r];for(let o=0;o<s;o+=1)i.push(new Float32Array(128));n.push(i)}return n},HG=(t,e)=>{const n=Ji(DC,t),r=Dt(e);return Ji(n,r)},$G=async(t,e,n,r,i,s,o)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,l=i.reduce((y,g)=>y+g,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const d=dr(t),f=await HG(n,t),h=em(r.numberOfInputs,r.channelCount),p=em(r.numberOfOutputs,i),m=Array.from(t.parameters.keys()).reduce((y,g)=>({...y,[g]:new Float32Array(128)}),{});for(let y=0;y<a;y+=128){if(r.numberOfInputs>0&&e!==null)for(let g=0;g<r.numberOfInputs;g+=1)for(let v=0;v<r.channelCount;v+=1)Qg(e,h[g],v,v,y);s.parameterDescriptors!==void 0&&e!==null&&s.parameterDescriptors.forEach(({name:g},v)=>{Qg(e,m,g,c+v,y)});for(let g=0;g<r.numberOfInputs;g+=1)for(let v=0;v<i[g];v+=1)p[g][v].byteLength===0&&(p[g][v]=new Float32Array(128));try{const g=h.map((S,E)=>d.activeInputs[E].size===0?[]:S),v=o(y/n.sampleRate,n.sampleRate,()=>f.process(g,p,m));if(u!==null)for(let S=0,E=0;S<r.numberOfOutputs;S+=1){for(let k=0;k<i[S];k+=1)dP(u,p[S],k,E+k,y);E+=i[S]}if(!v)break}catch(g){t.dispatchEvent(new ErrorEvent("processorerror",{colno:g.colno,filename:g.filename,lineno:g.lineno,message:g.message}));break}}return u},zG=(t,e,n,r,i,s,o,a,c,l,u,d,f,h,p,m)=>(y,g,v)=>{const S=new WeakMap;let E=null;const k=async(b,A)=>{let _=u(b),P=null;const N=tr(_,A),O=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(d===null){const D=O.reduce(($,q)=>$+q,0),U=i(A,{channelCount:Math.max(1,D),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,D)}),G=[];for(let $=0;$<b.numberOfOutputs;$+=1)G.push(r(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:O[$]}));const z=o(A,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});z.connect=e.bind(null,G),z.disconnect=c.bind(null,G),P=[U,G,z]}else N||(_=new d(A,y));if(S.set(A,P===null?_:P[2]),P!==null){if(E===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const q=b.channelCount*b.numberOfInputs,j=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,X=q+j;E=$G(b,X===0?null:await(async()=>{const Z=new f(X,Math.ceil(b.context.length/128)*128,A.sampleRate),ie=[],ke=[];for(let Te=0;Te<g.numberOfInputs;Te+=1)ie.push(o(Z,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),ke.push(i(Z,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const Ee=await Promise.all(Array.from(b.parameters.values()).map(async Te=>{const Qe=s(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Te.value});return await h(Z,Te,Qe.offset),Qe})),ge=r(Z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,q+j)});for(let Te=0;Te<g.numberOfInputs;Te+=1){ie[Te].connect(ke[Te]);for(let Qe=0;Qe<g.channelCount;Qe+=1)ke[Te].connect(ge,Qe,Te*g.channelCount+Qe)}for(const[Te,Qe]of Ee.entries())Qe.connect(ge,0,q+Te),Qe.start(0);return ge.connect(Z.destination),await Promise.all(ie.map(Te=>p(b,Z,Te))),m(Z)})(),A,g,O,v,l)}const D=await E,U=n(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[G,z,$]=P;D!==null&&(U.buffer=D,U.start(0)),U.connect(G);for(let q=0,j=0;q<b.numberOfOutputs;q+=1){const X=z[q];for(let re=0;re<O[q];re+=1)G.connect(X,j+re,re);j+=O[q]}return $}if(N)for(const[D,U]of b.parameters.entries())await t(A,U,_.parameters.get(D));else for(const[D,U]of b.parameters.entries())await h(A,U,_.parameters.get(D));return await p(b,A,_),_};return{render(b,A){a(A,b);const _=S.get(A);return _!==void 0?Promise.resolve(_):k(b,A)}}},ZG=(t,e,n,r,i,s,o,a,c,l,u,d,f,h,p,m,y,g,v,S)=>class extends p{constructor(k,b){super(k,b),this._nativeContext=k,this._audioWorklet=t===void 0?void 0:{addModule:(A,_)=>t(this,A,_)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(k,b,A){return new n({length:b,numberOfChannels:k,sampleRate:A})}createBufferSource(){return new r(this)}createChannelMerger(k=6){return new s(this,{numberOfInputs:k})}createChannelSplitter(k=6){return new o(this,{numberOfOutputs:k})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(k=1){return new u(this,{maxDelayTime:k})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(k,b){return new h(this,{feedback:b,feedforward:k})}createOscillator(){return new m(this)}createPanner(){return new y(this)}createPeriodicWave(k,b,A={disableNormalization:!1}){return new g(this,{...A,imag:b,real:k})}createStereoPanner(){return new v(this)}createWaveShaper(){return new S(this)}decodeAudioData(k,b,A){return l(this._nativeContext,k).then(_=>(typeof b=="function"&&b(_),_),_=>{throw typeof A=="function"&&A(_),_})}},XG={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},KG=(t,e,n,r,i,s,o,a)=>class extends t{constructor(l,u){const d=s(l),f={...XG,...u},h=i(d,f),p=o(d),m=p?n():null;super(l,!1,h,m),this._Q=e(this,p,h.Q,ar,kr),this._detune=e(this,p,h.detune,1200*Math.log2(ar),-1200*Math.log2(ar)),this._frequency=e(this,p,h.frequency,l.sampleRate/2,0),this._gain=e(this,p,h.gain,40*Math.log10(ar),kr),this._nativeBiquadFilterNode=h,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(f){throw f.code===11?r():f}if(l.length!==u.length||u.length!==d.length)throw r()}},JG=(t,e,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=tr(l,c);if(!u){const d={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,d)}return s.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await r(c,a.Q,l.Q),await r(c,a.detune,l.detune),await r(c,a.frequency,l.frequency),await r(c,a.gain,l.gain)),await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},YG=(t,e)=>(n,r)=>{const i=e.get(n);if(i!==void 0)return i;const s=t.get(n);if(s!==void 0)return s;try{const o=r();return o instanceof Promise?(t.set(n,o),o.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,o),o)}catch{return e.set(n,!1),!1}},qG={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},QG=(t,e,n,r,i)=>class extends t{constructor(o,a){const c=r(o),l={...qG,...a},u=n(c,l),d=i(c)?e():null;super(o,!1,u,d)}},eW=(t,e,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!tr(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(o,l)}return r.set(o,a),await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},tW={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},nW=(t,e,n,r,i,s)=>class extends t{constructor(a,c){const l=r(a),u=s({...tW,...c}),d=n(l,u),f=i(l)?e():null;super(a,!1,d,f)}},rW=(t,e,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!tr(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(o,l)}return r.set(o,a),await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},iW=t=>(e,n,r)=>t(n,e,r),sW=t=>(e,n,r=0,i=0)=>{const s=e[r];if(s===void 0)throw t();return qg(n)?s.connect(n,0,i):s.connect(n,0)},oW=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},aW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},cW=(t,e,n,r,i,s,o)=>class extends t{constructor(c,l){const u=i(c),d={...aW,...l},f=r(u,d),h=s(u),p=h?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=e(this,h,f.offset,ar,kr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){Au(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Po(this)&&mh(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},lW=(t,e,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let d=n(l);const f=tr(d,u);if(!f){const h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,h),o!==null&&d.start(o),a!==null&&d.stop(a)}return s.set(u,d),f?await t(u,l.offset,d.offset):await r(u,l.offset,d.offset),await i(l,u,d),d};return{set start(l){o=l},set stop(l){a=l},render(l,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},uW=t=>e=>(t[0]=e,t[0]),dW={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},fW=(t,e,n,r,i,s)=>class extends t{constructor(a,c){const l=r(a),u={...dW,...c},d=n(l,u),h=i(l)?e():null;super(a,!1,d,h),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},hW=(t,e,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!tr(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(o,l)}return r.set(o,a),$u(a)?await n(s,o,a.inputs[0]):await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},pW=()=>new DOMException("","DataCloneError"),L1=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},gW=(t,e,n,r,i,s,o,a,c,l,u)=>(d,f)=>{const h=o(d)?d:s(d);if(i.has(f)){const p=n();return Promise.reject(p)}try{i.add(f)}catch{}return e(c,()=>c(h))?h.decodeAudioData(f).then(p=>(L1(f).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,m)=>{const y=async()=>{try{await L1(f)}catch{}},g=v=>{m(v),y()};try{h.decodeAudioData(f,v=>{typeof v.copyFromChannel!="function"&&(l(v),sP(v)),t.add(v),y().then(()=>p(v))},v=>{g(v===null?r():v)})}catch(v){g(v)}})},mW=(t,e,n,r,i,s,o,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=s(c.context),f=a(d);if(u===l){if(e.delete(c),!f&&o(c)){const h=r(c),{outputs:p}=n(c);for(const m of p)if(yh(m)){const y=r(m[0]);t(h,y,m[1],m[2])}else{const y=i(m[0]);h.connect(y,m[1])}}}else e.set(c,u-l)},vW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},yW=(t,e,n,r,i,s,o)=>class extends t{constructor(c,l){const u=i(c),d={...vW,...l},f=r(u,d),h=s(u),p=h?n(d.maxDelayTime):null;super(c,!1,f,p),this._delayTime=e(this,h,f.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},CW=(t,e,n,r,i)=>s=>{const o=new WeakMap,a=async(c,l)=>{let u=n(c);const d=tr(u,l);if(!d){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:s};u=e(l,f)}return o.set(l,u),d?await t(l,c.delayTime,u.delayTime):await r(l,c.delayTime,u.delayTime),await i(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},IW=t=>(e,n,r,i)=>t(e[i],s=>s[0]===n&&s[1]===r),SW=t=>(e,n)=>{t(e).delete(n)},bW=t=>"delayTime"in t,wW=(t,e,n)=>function r(i,s){const o=Kg(s)?s:n(t,s);if(bW(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>r([...i,o],c[0])).reduce((c,l)=>c.concat(l),[])},ip=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},kW=t=>(e,n=void 0,r=void 0,i=0)=>n===void 0?e.forEach(s=>s.disconnect()):typeof n=="number"?ip(t,e,n).disconnect():qg(n)?r===void 0?e.forEach(s=>s.disconnect(n)):i===void 0?ip(t,e,r).disconnect(n,0):ip(t,e,r).disconnect(n,0,i):r===void 0?e.forEach(s=>s.disconnect(n)):ip(t,e,r).disconnect(n,0),AW={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},EW=(t,e,n,r,i,s,o,a)=>class extends t{constructor(l,u){const d=s(l),f={...AW,...u},h=r(d,f),p=o(d),m=p?n():null;super(l,!1,h,m),this._attack=e(this,p,h.attack),this._knee=e(this,p,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=e(this,p,h.ratio),this._release=e(this,p,h.release),this._threshold=e(this,p,h.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},TW=(t,e,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=tr(l,c);if(!u){const d={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,d)}return s.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await r(c,a.attack,l.attack),await r(c,a.knee,l.knee),await r(c,a.ratio,l.ratio),await r(c,a.release,l.release),await r(c,a.threshold,l.threshold)),await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},_W=()=>new DOMException("","EncodingError"),RW=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const i=t.document.head;if(i===null)r(new SyntaxError);else{const s=t.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,d,f,h,p)=>{if(d===a||d===t.location.href&&f===1&&h===1)return l(),r(p),!1;if(c!==null)return c(u,d,f,h,p)},s.onerror=()=>{l(),r(new SyntaxError)},s.onload=()=>{l(),n()},s.src=a,s.type="module",i.appendChild(s)}}),xW=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,i){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=t(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(n,s,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,i){const s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,s===void 0?null:s,i)}},NW=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},PW=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},MW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},OW=(t,e,n,r,i,s)=>class extends t{constructor(a,c){const l=i(a),u={...MW,...c},d=r(l,u),f=s(l),h=f?n():null;super(a,!1,d,h),this._gain=e(this,f,d.gain,ar,kr)}get gain(){return this._gain}},DW=(t,e,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=tr(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,d)}return s.set(c,l),u?await t(c,a.gain,l.gain):await r(c,a.gain,l.gain),await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},LW=(t,e)=>n=>e(t,n),BW=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},FW=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},UW=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},VW=t=>e=>t.get(e),Vn=()=>new DOMException("","InvalidStateError"),GW=t=>e=>{const n=t.get(e);if(n===void 0)throw Vn();return n},WW=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},jW=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},rv=()=>new DOMException("","InvalidAccessError"),HW=t=>{t.getFrequencyResponse=(e=>(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw rv();return e.call(t,n,r,i)})(t.getFrequencyResponse)},$W={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},zW=(t,e,n,r,i,s)=>class extends t{constructor(a,c){const l=r(a),u=i(l),d={...$W,...c},f=e(l,u?null:a.baseLatency,d),h=u?n(d.feedback,d.feedforward):null;super(a,!1,f,h),HW(f),this._nativeIIRFilterNode=f,s(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},fP=(t,e,n,r,i,s,o,a,c,l,u)=>{const d=l.length;let f=a;for(let h=0;h<d;h+=1){let p=n[0]*l[h];for(let m=1;m<i;m+=1){const y=f-m&c-1;p+=n[m]*s[y],p-=t[m]*o[y]}for(let m=i;m<r;m+=1)p+=n[m]*s[f-m&c-1];for(let m=i;m<e;m+=1)p-=t[m]*o[f-m&c-1];s[f]=l[h],o[f]=p,f=f+1&c-1,u[h]=p}return f},ZW=(t,e,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,c=Math.min(o,a);if(i[0]!==1){for(let p=0;p<o;p+=1)s[p]/=i[0];for(let p=1;p<a;p+=1)i[p]/=i[0]}const l=32,u=new Float32Array(l),d=new Float32Array(l),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),h=t.numberOfChannels;for(let p=0;p<h;p+=1){const m=t.getChannelData(p),y=f.getChannelData(p);u.fill(0),d.fill(0),fP(i,o,s,a,c,u,d,0,l,m,y)}return f},XW=(t,e,n,r,i)=>(s,o)=>{const a=new WeakMap;let c=null;const l=async(u,d)=>{let f=null,h=e(u);const p=tr(h,d);if(d.createIIRFilter===void 0?f=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(h=d.createIIRFilter(o,s)),a.set(d,f===null?h:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const y=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);c=(async()=>{await r(u,y,y.destination);const g=await i(y);return ZW(g,d,s,o)})()}const m=await c;return f.buffer=m,f.start(0),f}return await r(u,d,h),h};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},KW=(t,e,n,r,i,s)=>o=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!o&&s(a)){const u=r(a),{outputs:d}=n(a);for(const f of d)if(yh(f)){const h=r(f[0]);e(u,h,f[1],f[2])}else{const h=i(f[0]);u.disconnect(h,f[1])}}t.set(a,c)}else t.set(a,l+c)},JW=t=>e=>t!==null&&e instanceof t,YW=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,qW=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,QW=(t,e)=>n=>t(n)||e(n),ej=t=>e=>t!==null&&e instanceof t,tj=t=>t!==null&&t.isSecureContext,nj=(t,e,n,r)=>class extends t{constructor(s,o){const a=n(s),c=e(a,o);if(r(a))throw TypeError();super(s,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},rj={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ij=(t,e,n,r)=>class extends t{constructor(s,o){const a=n(s);if(r(a))throw new TypeError;const c={...rj,...o},l=e(a,c);super(s,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},sj=(t,e,n,r)=>class extends t{constructor(s,o){const a=n(s),c=e(a,o);if(r(a))throw new TypeError;super(s,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},oj=(t,e,n)=>class extends t{constructor(i,s){const o=n(i),a=e(o,s);super(i,!0,a,null)}},aj=(t,e,n,r,i,s)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,eP.set(this,a),r(a)&&i.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?s(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},UC=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},cj=(t,e)=>(n,r,i)=>{const s=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=s.size===0;if(e(a))return o.call(n,a,c,l),t(s,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;o.call(n,a,c),t(s,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=s.size>0;if(a===void 0)o.apply(n),s.clear();else if(typeof a=="number"){o.call(n,a);for(const f of s)f[1]===a&&s.delete(f)}else{e(a)?o.call(n,a,c,l):o.call(n,a,c);for(const f of s)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&s.delete(f)}const d=s.size===0;u&&d&&i()})(n.disconnect),n},Bt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Cn=(t,e)=>{Bt(t,e,"channelCount"),Bt(t,e,"channelCountMode"),Bt(t,e,"channelInterpretation")},B1=t=>typeof t.getFloatTimeDomainData=="function",lj=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let i=0;i<r;i+=1)e[i]=(n[i]-128)*.0078125;return e}},uj=(t,e)=>(n,r)=>{const i=n.createAnalyser();if(Cn(i,r),!(r.maxDecibels>r.minDecibels))throw e();return Bt(i,r,"fftSize"),Bt(i,r,"maxDecibels"),Bt(i,r,"minDecibels"),Bt(i,r,"smoothingTimeConstant"),t(B1,()=>B1(i))||lj(i),i},dj=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Kt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},fj=t=>{t.start=(e=>{let n=!1;return(r=0,i=0,s)=>{if(n)throw Vn();e.call(t,r,i,s),n=!0}})(t.start)},Rb=t=>{t.start=(e=>(n=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})(t.start)},xb=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},hj=(t,e,n,r,i,s,o,a,c,l,u)=>(d,f)=>{const h=d.createBufferSource();return Cn(h,f),Kt(h,f,"playbackRate"),Bt(h,f,"buffer"),Bt(h,f,"loop"),Bt(h,f,"loopEnd"),Bt(h,f,"loopStart"),e(n,()=>n(d))||fj(h),e(r,()=>r(d))||c(h),e(i,()=>i(d))||l(h,d),e(s,()=>s(d))||Rb(h),e(o,()=>o(d))||u(h,d),e(a,()=>a(d))||xb(h),t(d,h),h},pj=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,gj=(t,e)=>(n,r,i)=>{const s=n.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});const o=t(n,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{s.channelCount=c}catch(l){if(c>s.maxChannelCount)throw l}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),s.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),s.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o},mj=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,vj=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},yj=(t,e,n,r,i)=>(s,o,a,c,l,u)=>{if(a!==null)try{const d=new a(s,c,u),f=new Map;let h=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>h,set:p=>{typeof h=="function"&&d.removeEventListener("processorerror",h),h=typeof p=="function"?p:null,typeof h=="function"&&d.addEventListener("processorerror",h)}}}),d.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const y=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(y!==null){const g=f.get(m[1]);g!==void 0?m[1]=g:(m[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),y(v)):y(new ErrorEvent(m[0],{...v}))},f.set(y,m[1]))}}return p.call(d,"error",m[1],m[2]),p.call(d,...m)})(d.addEventListener),d.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const y=f.get(m[1]);y!==void 0&&(f.delete(m[1]),m[1]=y)}return p.call(d,"error",m[1],m[2]),p.call(d,m[0],m[1],m[2])})(d.removeEventListener),u.numberOfOutputs!==0){const p=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(s.destination),i(d,()=>p.disconnect(),()=>p.connect(s.destination))}return d}catch(d){throw d.code===11?r():d}if(l===void 0)throw r();return vj(u),e(s,o,l,u)},hP=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),Cj=t=>new Promise((e,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),i.close(),e(s)},r.onmessageerror=({data:s})=>{r.close(),i.close(),n(s)},i.postMessage(t)}),Ij=async(t,e)=>{const n=await Cj(e);return new t(n)},Sj=(t,e,n,r)=>{let i=DC.get(t);i===void 0&&(i=new WeakMap,DC.set(t,i));const s=Ij(n,r);return i.set(e,s),s},bj=(t,e,n,r,i,s,o,a,c,l,u,d,f)=>(h,p,m,y)=>{if(y.numberOfInputs===0&&y.numberOfOutputs===0)throw c();const g=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(g.some(ce=>ce<1))throw c();if(g.length!==y.numberOfOutputs)throw e();if(y.channelCountMode!=="explicit")throw c();const v=y.channelCount*y.numberOfInputs,S=g.reduce((ce,Ce)=>ce+Ce,0),E=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(v+E>6||S>6)throw c();const k=new MessageChannel,b=[],A=[];for(let ce=0;ce<y.numberOfInputs;ce+=1)b.push(o(h,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),A.push(i(h,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const _=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:ce,maxValue:Ce,minValue:rt,name:et}of m.parameterDescriptors){const le=s(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:y.parameterData[et]!==void 0?y.parameterData[et]:ce===void 0?0:ce});Object.defineProperties(le.offset,{defaultValue:{get:()=>ce===void 0?0:ce},maxValue:{get:()=>Ce===void 0?ar:Ce},minValue:{get:()=>rt===void 0?kr:rt}}),_.push(le)}const P=r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+E)}),N=hP(p,h.sampleRate),O=a(h,N,v+E,Math.max(1,S)),D=i(h,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),U=[];for(let ce=0;ce<y.numberOfOutputs;ce+=1)U.push(r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[ce]}));for(let ce=0;ce<y.numberOfInputs;ce+=1){b[ce].connect(A[ce]);for(let Ce=0;Ce<y.channelCount;Ce+=1)A[ce].connect(P,Ce,ce*y.channelCount+Ce)}const G=new uP(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:ce},Ce)=>{const rt=_[Ce];return rt.connect(P,0,v+Ce),rt.start(0),[ce,rt.offset]}));P.connect(O);let z=y.channelInterpretation,$=null;const q=y.numberOfOutputs===0?[O]:U,j={get bufferSize(){return N},get channelCount(){return y.channelCount},set channelCount(ce){throw n()},get channelCountMode(){return y.channelCountMode},set channelCountMode(ce){throw n()},get channelInterpretation(){return z},set channelInterpretation(ce){for(const Ce of b)Ce.channelInterpretation=ce;z=ce},get context(){return O.context},get inputs(){return b},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return $},set onprocessorerror(ce){typeof $=="function"&&j.removeEventListener("processorerror",$),$=typeof ce=="function"?ce:null,typeof $=="function"&&j.addEventListener("processorerror",$)},get parameters(){return G},get port(){return k.port2},addEventListener(...ce){return O.addEventListener(ce[0],ce[1],ce[2])},connect:t.bind(null,q),disconnect:l.bind(null,q),dispatchEvent(...ce){return O.dispatchEvent(ce[0])},removeEventListener(...ce){return O.removeEventListener(ce[0],ce[1],ce[2])}},X=new Map;k.port1.addEventListener=(ce=>(...Ce)=>{if(Ce[0]==="message"){const rt=typeof Ce[1]=="function"?Ce[1]:typeof Ce[1]=="object"&&Ce[1]!==null&&typeof Ce[1].handleEvent=="function"?Ce[1].handleEvent:null;if(rt!==null){const et=X.get(Ce[1]);et!==void 0?Ce[1]=et:(Ce[1]=le=>{u(h.currentTime,h.sampleRate,()=>rt(le))},X.set(rt,Ce[1]))}}return ce.call(k.port1,Ce[0],Ce[1],Ce[2])})(k.port1.addEventListener),k.port1.removeEventListener=(ce=>(...Ce)=>{if(Ce[0]==="message"){const rt=X.get(Ce[1]);rt!==void 0&&(X.delete(Ce[1]),Ce[1]=rt)}return ce.call(k.port1,Ce[0],Ce[1],Ce[2])})(k.port1.removeEventListener);let re=null;Object.defineProperty(k.port1,"onmessage",{get:()=>re,set:ce=>{typeof re=="function"&&k.port1.removeEventListener("message",re),re=typeof ce=="function"?ce:null,typeof re=="function"&&(k.port1.addEventListener("message",re),k.port1.start())}}),m.prototype.port=k.port1;let Z=null;Sj(h,j,m,y).then(ce=>Z=ce);const ke=em(y.numberOfInputs,y.channelCount),Ee=em(y.numberOfOutputs,g),ge=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((ce,{name:Ce})=>({...ce,[Ce]:new Float32Array(128)}),{});let Te=!0;const Qe=()=>{y.numberOfOutputs>0&&O.disconnect(D);for(let ce=0,Ce=0;ce<y.numberOfOutputs;ce+=1){const rt=U[ce];for(let et=0;et<g[ce];et+=1)D.disconnect(rt,Ce+et,et);Ce+=g[ce]}},ae=new Map;O.onaudioprocess=({inputBuffer:ce,outputBuffer:Ce})=>{if(Z!==null){const rt=d(j);for(let et=0;et<N;et+=128){for(let le=0;le<y.numberOfInputs;le+=1)for(let Fe=0;Fe<y.channelCount;Fe+=1)Qg(ce,ke[le],Fe,Fe,et);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:le},Fe)=>{Qg(ce,ge,le,v+Fe,et)});for(let le=0;le<y.numberOfInputs;le+=1)for(let Fe=0;Fe<g[le];Fe+=1)Ee[le][Fe].byteLength===0&&(Ee[le][Fe]=new Float32Array(128));try{const le=ke.map((Ie,Ze)=>{if(rt[Ze].size>0)return ae.set(Ze,N/128),Ie;const Ht=ae.get(Ze);return Ht===void 0?[]:(Ie.every(Sn=>Sn.every(al=>al===0))&&(Ht===1?ae.delete(Ze):ae.set(Ze,Ht-1)),Ie)});Te=u(h.currentTime+et/h.sampleRate,h.sampleRate,()=>Z.process(le,Ee,ge));for(let Ie=0,Ze=0;Ie<y.numberOfOutputs;Ie+=1){for(let Pe=0;Pe<g[Ie];Pe+=1)dP(Ce,Ee[Ie],Pe,Ze+Pe,et);Ze+=g[Ie]}}catch(le){Te=!1,j.dispatchEvent(new ErrorEvent("processorerror",{colno:le.colno,filename:le.filename,lineno:le.lineno,message:le.message}))}if(!Te){for(let le=0;le<y.numberOfInputs;le+=1){b[le].disconnect(A[le]);for(let Fe=0;Fe<y.channelCount;Fe+=1)A[et].disconnect(P,Fe,le*y.channelCount+Fe)}if(m.parameterDescriptors!==void 0){const le=m.parameterDescriptors.length;for(let Fe=0;Fe<le;Fe+=1){const Ie=_[Fe];Ie.disconnect(P,0,v+Fe),Ie.stop()}}P.disconnect(O),O.onaudioprocess=null,nn?Qe():an();break}}}};let nn=!1;const In=o(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Ct=()=>O.connect(In).connect(h.destination),an=()=>{O.disconnect(In),In.disconnect()},ut=()=>{if(Te){an(),y.numberOfOutputs>0&&O.connect(D);for(let ce=0,Ce=0;ce<y.numberOfOutputs;ce+=1){const rt=U[ce];for(let et=0;et<g[ce];et+=1)D.connect(rt,Ce+et,et);Ce+=g[ce]}}nn=!0},Ut=()=>{Te&&(Ct(),Qe()),nn=!1};return Ct(),f(j,ut,Ut)},pP=(t,e)=>{const n=t.createBiquadFilter();return Cn(n,e),Kt(n,e,"Q"),Kt(n,e,"detune"),Kt(n,e,"frequency"),Kt(n,e,"gain"),Bt(n,e,"type"),n},wj=(t,e)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),Cn(i,r),i},kj=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Vn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Vn()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Vn()}})},Ch=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Cn(n,e),kj(n),n},Aj=(t,e,n,r,i)=>(s,o)=>{if(s.createConstantSource===void 0)return n(s,o);const a=s.createConstantSource();return Cn(a,o),Kt(a,o,"offset"),e(r,()=>r(s))||Rb(a),e(i,()=>i(s))||xb(a),t(s,a),a},zu=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),Ej=(t,e,n,r)=>(i,{offset:s,...o})=>{const a=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...o,gain:s}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),h=()=>c.disconnect(l);return t(i,c),r(zu(d,l),f,h)},Tj=(t,e)=>(n,r)=>{const i=n.createConvolver();if(Cn(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),Bt(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",s=>()=>s.call(i),s=>o=>{if(o>2)throw t();return s.call(i,o)}),r.channelCountMode==="max"))throw t();return e(i,"channelCountMode",s=>()=>s.call(i),s=>o=>{if(o==="max")throw t();return s.call(i,o)}),i},gP=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Cn(n,e),Kt(n,e,"delayTime"),n},_j=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Cn(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Kt(r,n,"attack"),Kt(r,n,"knee"),Kt(r,n,"ratio"),Kt(r,n,"release"),Kt(r,n,"threshold"),r},Mr=(t,e)=>{const n=t.createGain();return Cn(n,e),Kt(n,e,"gain"),n},Rj=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return Cn(i,r),i};function xj(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function Nj(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function F1(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=Nj(n,e),n[0]+=t[r];return n}const Pj=(t,e,n,r)=>(i,s,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=hP(s,i.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),h=u instanceof Float64Array?u:new Float64Array(u),p=f.length,m=h.length,y=Math.min(p,m);if(p===0||p>20)throw r();if(f[0]===0)throw e();if(m===0||m>20)throw r();if(h[0]===0)throw e();if(f[0]!==1){for(let _=0;_<m;_+=1)h[_]/=f[0];for(let _=1;_<p;_+=1)f[_]/=f[0]}const g=n(i,d,o,o);g.channelCount=o,g.channelCountMode=a,g.channelInterpretation=c;const v=32,S=[],E=[],k=[];for(let _=0;_<o;_+=1){S.push(0);const P=new Float32Array(v),N=new Float32Array(v);P.fill(0),N.fill(0),E.push(P),k.push(N)}g.onaudioprocess=_=>{const P=_.inputBuffer,N=_.outputBuffer,O=P.numberOfChannels;for(let D=0;D<O;D+=1){const U=P.getChannelData(D),G=N.getChannelData(D);S[D]=fP(f,p,h,m,y,E[D],k[D],S[D],v,U,G)}};const b=i.sampleRate/2;return zu({get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(_){g.channelCount=_},get channelCountMode(){return g.channelCountMode},set channelCountMode(_){g.channelCountMode=_},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(_){g.channelInterpretation=_},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener(..._){return g.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return g.dispatchEvent(_[0])},getFrequencyResponse(_,P,N){if(_.length!==P.length||P.length!==N.length)throw t();const O=_.length;for(let D=0;D<O;D+=1){const U=-Math.PI*(_[D]/b),G=[Math.cos(U),Math.sin(U)],z=F1(h,G),$=F1(f,G),q=xj(z,$);P[D]=Math.sqrt(q[0]*q[0]+q[1]*q[1]),N[D]=Math.atan2(q[1],q[0])}},removeEventListener(..._){return g.removeEventListener(_[0],_[1],_[2])}},g)},Mj=(t,e)=>t.createMediaElementSource(e.mediaElement),Oj=(t,e)=>{const n=t.createMediaStreamDestination();return Cn(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},Dj=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((s,o)=>s.id<o.id?-1:s.id>o.id?1:0);const r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},Lj=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),s=n.createMediaStreamSource(i);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return s},Bj=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,Fj=(t,e,n,r,i,s)=>(o,a)=>{const c=o.createOscillator();return Cn(c,a),Kt(c,a,"detune"),Kt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Bt(c,a,"type"),e(n,()=>n(o))||Rb(c),e(r,()=>r(o))||s(c,o),e(i,()=>i(o))||xb(c),t(o,c),c},Uj=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Cn(r,n),Kt(r,n,"orientationX"),Kt(r,n,"orientationY"),Kt(r,n,"orientationZ"),Kt(r,n,"positionX"),Kt(r,n,"positionY"),Kt(r,n,"positionZ"),Bt(r,n,"coneInnerAngle"),Bt(r,n,"coneOuterAngle"),Bt(r,n,"coneOuterGain"),Bt(r,n,"distanceModel"),Bt(r,n,"maxDistance"),Bt(r,n,"panningModel"),Bt(r,n,"refDistance"),Bt(r,n,"rolloffFactor"),r)},Vj=(t,e,n,r,i,s,o,a,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:f,coneOuterGain:h,distanceModel:p,maxDistance:m,orientationX:y,orientationY:g,orientationZ:v,panningModel:S,positionX:E,positionY:k,positionZ:b,refDistance:A,rolloffFactor:_,...P})=>{const N=u.createPanner();if(P.channelCount>2||P.channelCountMode==="max")throw o();Cn(N,P);const O={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},D=n(u,{...O,channelInterpretation:"speakers",numberOfInputs:6}),U=r(u,{...P,gain:1}),G=r(u,{...O,gain:1}),z=r(u,{...O,gain:0}),$=r(u,{...O,gain:0}),q=r(u,{...O,gain:0}),j=r(u,{...O,gain:0}),X=r(u,{...O,gain:0}),re=i(u,256,6,1),Z=s(u,{...O,curve:new Float32Array([1,1]),oversample:"none"});let ie=[y,g,v],ke=[E,k,b];const Ee=new Float32Array(1);re.onaudioprocess=({inputBuffer:ae})=>{const nn=[c(ae,Ee,0),c(ae,Ee,1),c(ae,Ee,2)];nn.some((Ct,an)=>Ct!==ie[an])&&(N.setOrientation(...nn),ie=nn);const In=[c(ae,Ee,3),c(ae,Ee,4),c(ae,Ee,5)];In.some((Ct,an)=>Ct!==ke[an])&&(N.setPosition(...In),ke=In)},Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(X.gain,"defaultValue",{get:()=>0});const ge={get bufferSize(){},get channelCount(){return N.channelCount},set channelCount(ae){if(ae>2)throw o();U.channelCount=ae,N.channelCount=ae},get channelCountMode(){return N.channelCountMode},set channelCountMode(ae){if(ae==="max")throw o();U.channelCountMode=ae,N.channelCountMode=ae},get channelInterpretation(){return N.channelInterpretation},set channelInterpretation(ae){U.channelInterpretation=ae,N.channelInterpretation=ae},get coneInnerAngle(){return N.coneInnerAngle},set coneInnerAngle(ae){N.coneInnerAngle=ae},get coneOuterAngle(){return N.coneOuterAngle},set coneOuterAngle(ae){N.coneOuterAngle=ae},get coneOuterGain(){return N.coneOuterGain},set coneOuterGain(ae){if(ae<0||ae>1)throw e();N.coneOuterGain=ae},get context(){return N.context},get distanceModel(){return N.distanceModel},set distanceModel(ae){N.distanceModel=ae},get inputs(){return[U]},get maxDistance(){return N.maxDistance},set maxDistance(ae){if(ae<0)throw new RangeError;N.maxDistance=ae},get numberOfInputs(){return N.numberOfInputs},get numberOfOutputs(){return N.numberOfOutputs},get orientationX(){return G.gain},get orientationY(){return z.gain},get orientationZ(){return $.gain},get panningModel(){return N.panningModel},set panningModel(ae){N.panningModel=ae},get positionX(){return q.gain},get positionY(){return j.gain},get positionZ(){return X.gain},get refDistance(){return N.refDistance},set refDistance(ae){if(ae<0)throw new RangeError;N.refDistance=ae},get rolloffFactor(){return N.rolloffFactor},set rolloffFactor(ae){if(ae<0)throw new RangeError;N.rolloffFactor=ae},addEventListener(...ae){return U.addEventListener(ae[0],ae[1],ae[2])},dispatchEvent(...ae){return U.dispatchEvent(ae[0])},removeEventListener(...ae){return U.removeEventListener(ae[0],ae[1],ae[2])}};d!==ge.coneInnerAngle&&(ge.coneInnerAngle=d),f!==ge.coneOuterAngle&&(ge.coneOuterAngle=f),h!==ge.coneOuterGain&&(ge.coneOuterGain=h),p!==ge.distanceModel&&(ge.distanceModel=p),m!==ge.maxDistance&&(ge.maxDistance=m),y!==ge.orientationX.value&&(ge.orientationX.value=y),g!==ge.orientationY.value&&(ge.orientationY.value=g),v!==ge.orientationZ.value&&(ge.orientationZ.value=v),S!==ge.panningModel&&(ge.panningModel=S),E!==ge.positionX.value&&(ge.positionX.value=E),k!==ge.positionY.value&&(ge.positionY.value=k),b!==ge.positionZ.value&&(ge.positionZ.value=b),A!==ge.refDistance&&(ge.refDistance=A),_!==ge.rolloffFactor&&(ge.rolloffFactor=_),(ie[0]!==1||ie[1]!==0||ie[2]!==0)&&N.setOrientation(...ie),(ke[0]!==0||ke[1]!==0||ke[2]!==0)&&N.setPosition(...ke);const Te=()=>{U.connect(N),t(U,Z,0,0),Z.connect(G).connect(D,0,0),Z.connect(z).connect(D,0,1),Z.connect($).connect(D,0,2),Z.connect(q).connect(D,0,3),Z.connect(j).connect(D,0,4),Z.connect(X).connect(D,0,5),D.connect(re).connect(u.destination)},Qe=()=>{U.disconnect(N),a(U,Z,0,0),Z.disconnect(G),G.disconnect(D),Z.disconnect(z),z.disconnect(D),Z.disconnect($),$.disconnect(D),Z.disconnect(q),q.disconnect(D),Z.disconnect(j),j.disconnect(D),Z.disconnect(X),X.disconnect(D),D.disconnect(re),re.disconnect(u.destination)};return l(zu(ge,N),Te,Qe)},Gj=t=>(e,{disableNormalization:n,imag:r,real:i})=>{const s=r instanceof Float32Array?r:new Float32Array(r),o=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(o,s,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},Ih=(t,e,n,r)=>t.createScriptProcessor(e,n,r),Wj=(t,e)=>(n,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const s=n.createStereoPanner();return Cn(s,r),Kt(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:o=>{if(o!==i)throw e()}}),s},jj=(t,e,n,r,i,s)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(p,m,y,g)=>{const v=new Float32Array(16385),S=new Float32Array(16385);for(let P=0;P<16385;P+=1){const N=P/16384*c;v[P]=Math.cos(N),S[P]=Math.sin(N)}const E=n(p,{...l,gain:0}),k=r(p,{...u,curve:v}),b=r(p,{...u,curve:a}),A=n(p,{...l,gain:0}),_=r(p,{...u,curve:S});return{connectGraph(){m.connect(E),m.connect(b.inputs===void 0?b:b.inputs[0]),m.connect(A),b.connect(y),y.connect(k.inputs===void 0?k:k.inputs[0]),y.connect(_.inputs===void 0?_:_.inputs[0]),k.connect(E.gain),_.connect(A.gain),E.connect(g,0,0),A.connect(g,0,1)},disconnectGraph(){m.disconnect(E),m.disconnect(b.inputs===void 0?b:b.inputs[0]),m.disconnect(A),b.disconnect(y),y.disconnect(k.inputs===void 0?k:k.inputs[0]),y.disconnect(_.inputs===void 0?_:_.inputs[0]),k.disconnect(E.gain),_.disconnect(A.gain),E.disconnect(g,0,0),A.disconnect(g,0,1)}}},f=(p,m,y,g)=>{const v=new Float32Array(16385),S=new Float32Array(16385),E=new Float32Array(16385),k=new Float32Array(16385),b=Math.floor(16385/2);for(let q=0;q<16385;q+=1)if(q>b){const j=(q-b)/(16384-b)*c;v[q]=Math.cos(j),S[q]=Math.sin(j),E[q]=0,k[q]=1}else{const j=q/(16384-b)*c;v[q]=1,S[q]=0,E[q]=Math.cos(j),k[q]=Math.sin(j)}const A=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),_=n(p,{...l,gain:0}),P=r(p,{...u,curve:v}),N=n(p,{...l,gain:0}),O=r(p,{...u,curve:S}),D=r(p,{...u,curve:a}),U=n(p,{...l,gain:0}),G=r(p,{...u,curve:E}),z=n(p,{...l,gain:0}),$=r(p,{...u,curve:k});return{connectGraph(){m.connect(A),m.connect(D.inputs===void 0?D:D.inputs[0]),A.connect(_,0),A.connect(N,0),A.connect(U,1),A.connect(z,1),D.connect(y),y.connect(P.inputs===void 0?P:P.inputs[0]),y.connect(O.inputs===void 0?O:O.inputs[0]),y.connect(G.inputs===void 0?G:G.inputs[0]),y.connect($.inputs===void 0?$:$.inputs[0]),P.connect(_.gain),O.connect(N.gain),G.connect(U.gain),$.connect(z.gain),_.connect(g,0,0),U.connect(g,0,0),N.connect(g,0,1),z.connect(g,0,1)},disconnectGraph(){m.disconnect(A),m.disconnect(D.inputs===void 0?D:D.inputs[0]),A.disconnect(_,0),A.disconnect(N,0),A.disconnect(U,1),A.disconnect(z,1),D.disconnect(y),y.disconnect(P.inputs===void 0?P:P.inputs[0]),y.disconnect(O.inputs===void 0?O:O.inputs[0]),y.disconnect(G.inputs===void 0?G:G.inputs[0]),y.disconnect($.inputs===void 0?$:$.inputs[0]),P.disconnect(_.gain),O.disconnect(N.gain),G.disconnect(U.gain),$.disconnect(z.gain),_.disconnect(g,0,0),U.disconnect(g,0,0),N.disconnect(g,0,1),z.disconnect(g,0,1)}}},h=(p,m,y,g,v)=>{if(m===1)return d(p,y,g,v);if(m===2)return f(p,y,g,v);throw i()};return(p,{channelCount:m,channelCountMode:y,pan:g,...v})=>{if(y==="max")throw i();const S=t(p,{...v,channelCount:1,channelCountMode:y,numberOfInputs:2}),E=n(p,{...v,channelCount:m,channelCountMode:y,gain:1}),k=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:g});let{connectGraph:b,disconnectGraph:A}=h(p,m,E,k,S);Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"maxValue",{get:()=>1}),Object.defineProperty(k.gain,"minValue",{get:()=>-1});const _={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(D){E.channelCount!==D&&(P&&A(),{connectGraph:b,disconnectGraph:A}=h(p,D,E,k,S),P&&b()),E.channelCount=D},get channelCountMode(){return E.channelCountMode},set channelCountMode(D){if(D==="clamped-max"||D==="max")throw i();E.channelCountMode=D},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(D){E.channelInterpretation=D},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return k.gain},addEventListener(...D){return E.addEventListener(D[0],D[1],D[2])},dispatchEvent(...D){return E.dispatchEvent(D[0])},removeEventListener(...D){return E.removeEventListener(D[0],D[1],D[2])}};let P=!1;const N=()=>{b(),P=!0},O=()=>{A(),P=!1};return s(zu(_,S),N,O)}},Hj=(t,e,n,r,i,s,o)=>(a,c)=>{const l=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);Cn(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();Bt(l,{curve:u},"curve"),Bt(l,c,"oversample");let d=null,f=!1;return o(l,"curve",m=>()=>m.call(l),m=>y=>(m.call(l,y),f&&(r(y)&&d===null?d=t(a,l):!r(y)&&d!==null&&(d(),d=null)),y)),i(l,()=>{f=!0,r(l.curve)&&(d=t(a,l))},()=>{f=!1,d!==null&&(d(),d=null)})},$j=(t,e,n,r,i)=>(s,{curve:o,oversample:a,...c})=>{const l=s.createWaveShaper(),u=s.createWaveShaper();Cn(l,c),Cn(u,c);const d=n(s,{...c,gain:1}),f=n(s,{...c,gain:-1}),h=n(s,{...c,gain:1}),p=n(s,{...c,gain:-1});let m=null,y=!1,g=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(k){d.channelCount=k,f.channelCount=k,l.channelCount=k,h.channelCount=k,u.channelCount=k,p.channelCount=k},get channelCountMode(){return l.channelCountMode},set channelCountMode(k){d.channelCountMode=k,f.channelCountMode=k,l.channelCountMode=k,h.channelCountMode=k,u.channelCountMode=k,p.channelCountMode=k},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(k){d.channelInterpretation=k,f.channelInterpretation=k,l.channelInterpretation=k,h.channelInterpretation=k,u.channelInterpretation=k,p.channelInterpretation=k},get context(){return l.context},get curve(){return g},set curve(k){if(k!==null&&k.length<2)throw e();if(k===null)l.curve=k,u.curve=k;else{const b=k.length,A=new Float32Array(b+2-b%2),_=new Float32Array(b+2-b%2);A[0]=k[0],_[0]=-k[b-1];const P=Math.ceil((b+1)/2),N=(b+1)/2-1;for(let O=1;O<P;O+=1){const D=O/P*N,U=Math.floor(D),G=Math.ceil(D);A[O]=U===G?k[U]:(1-(D-U))*k[U]+(1-(G-D))*k[G],_[O]=U===G?-k[b-1-U]:-((1-(D-U))*k[b-1-U])-(1-(G-D))*k[b-1-G]}A[P]=b%2===1?k[P-1]:(k[P-2]+k[P-1])/2,l.curve=A,u.curve=_}g=k,y&&(r(g)&&m===null?m=t(s,d):m!==null&&(m(),m=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(k){l.oversample=k,u.oversample=k},addEventListener(...k){return d.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return d.dispatchEvent(k[0])},removeEventListener(...k){return d.removeEventListener(k[0],k[1],k[2])}};o!==null&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a);const S=()=>{d.connect(l).connect(h),d.connect(f).connect(u).connect(p).connect(h),y=!0,r(g)&&(m=t(s,d))},E=()=>{d.disconnect(l),l.disconnect(h),d.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(h),y=!1,m!==null&&(m(),m=null)};return i(zu(v,h),S,E)},Or=()=>new DOMException("","NotSupportedError"),zj={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Zj=(t,e,n,r,i,s,o)=>class extends t{constructor(c,l){const u=i(c),d={...zj,...l},f=n(u,d),h=s(u),p=h?r():null,m=c.sampleRate/2;super(c,!1,f,p),this._detune=e(this,h,f.detune,153600,-153600),this._frequency=e(this,h,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){Au(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Po(this)&&mh(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},Xj=(t,e,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null,c=null;const l=async(u,d)=>{let f=n(u);const h=tr(f,d);if(!h){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=e(d,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return s.set(d,f),h?(await t(d,u.detune,f.detune),await t(d,u.frequency,f.frequency)):(await r(d,u.detune,f.detune),await r(d,u.frequency,f.frequency)),await i(u,d,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,d){const f=s.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},Kj={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Jj=(t,e,n,r,i,s,o)=>class extends t{constructor(c,l){const u=i(c),d={...Kj,...l},f=n(u,d),h=s(u),p=h?r():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=e(this,h,f.orientationX,ar,kr),this._orientationY=e(this,h,f.orientationY,ar,kr),this._orientationZ=e(this,h,f.orientationZ,ar,kr),this._positionX=e(this,h,f.positionX,ar,kr),this._positionY=e(this,h,f.positionY,ar,kr),this._positionZ=e(this,h,f.positionZ,ar,kr),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},Yj=(t,e,n,r,i,s,o,a,c,l)=>()=>{const u=new WeakMap;let d=null;const f=async(h,p)=>{let m=null,y=s(h);const g={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation},v={...g,coneInnerAngle:y.coneInnerAngle,coneOuterAngle:y.coneOuterAngle,coneOuterGain:y.coneOuterGain,distanceModel:y.distanceModel,maxDistance:y.maxDistance,panningModel:y.panningModel,refDistance:y.refDistance,rolloffFactor:y.rolloffFactor},S=tr(y,p);if("bufferSize"in y)m=r(p,{...g,gain:1});else if(!S){const E={...v,orientationX:y.orientationX.value,orientationY:y.orientationY.value,orientationZ:y.orientationZ.value,positionX:y.positionX.value,positionY:y.positionY.value,positionZ:y.positionZ.value};y=i(p,E)}if(u.set(p,m===null?y:m),m!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const O=new o(6,h.context.length,p.sampleRate),D=e(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});D.connect(O.destination),d=(async()=>{const U=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map(async(G,z)=>{const $=n(O,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:z===0?1:0});return await a(O,G,$.offset),$}));for(let G=0;G<6;G+=1)U[G].connect(D,0,G),U[G].start(0);return l(O)})()}const E=await d,k=r(p,{...g,gain:1});await c(h,p,k);const b=[];for(let O=0;O<E.numberOfChannels;O+=1)b.push(E.getChannelData(O));let A=[b[0][0],b[1][0],b[2][0]],_=[b[3][0],b[4][0],b[5][0]],P=r(p,{...g,gain:1}),N=i(p,{...v,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:_[0],positionY:_[1],positionZ:_[2]});k.connect(P).connect(N.inputs[0]),N.connect(m);for(let O=128;O<E.length;O+=128){const D=[b[0][O],b[1][O],b[2][O]],U=[b[3][O],b[4][O],b[5][O]];if(D.some((G,z)=>G!==A[z])||U.some((G,z)=>G!==_[z])){A=D,_=U;const G=O/p.sampleRate;P.gain.setValueAtTime(0,G),P=r(p,{...g,gain:0}),N=i(p,{...v,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:_[0],positionY:_[1],positionZ:_[2]}),P.gain.setValueAtTime(1,G),k.connect(P).connect(N.inputs[0]),N.connect(m)}}return m}return S?(await t(p,h.orientationX,y.orientationX),await t(p,h.orientationY,y.orientationY),await t(p,h.orientationZ,y.orientationZ),await t(p,h.positionX,y.positionX),await t(p,h.positionY,y.positionY),await t(p,h.positionZ,y.positionZ)):(await a(p,h.orientationX,y.orientationX),await a(p,h.orientationY,y.orientationY),await a(p,h.orientationZ,y.orientationZ),await a(p,h.positionX,y.positionX),await a(p,h.positionY,y.positionY),await a(p,h.positionZ,y.positionZ)),$u(y)?await c(h,p,y.inputs[0]):await c(h,p,y),y};return{render(h,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):f(h,p)}}},qj={disableNormalization:!1},Qj=(t,e,n,r)=>class mP{constructor(s,o){const a=e(s),c=r({...qj,...o}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===mP.prototype||n.has(s)}},e6=(t,e)=>(n,r,i)=>(t(r).replay(i),e(r,n,i)),t6=(t,e,n)=>async(r,i,s)=>{const o=t(r);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await e(l).render(l,i),h=r.context.destination;!n(l)&&(r!==h||!n(r))&&f.connect(s,u,c)})).reduce((a,c)=>[...a,...c],[]))},n6=(t,e,n)=>async(r,i,s)=>{const o=e(r);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,i);n(a)||u.connect(s,c)}))},r6=(t,e,n,r)=>i=>t(UC,()=>UC(i))?Promise.resolve(t(r,r)).then(s=>{if(!s){const o=n(i,512,0,1);i.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>i.currentTime,o.connect(i.destination)}return i.startRendering()}):new Promise(s=>{const o=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{o.disconnect(),s(a.renderedBuffer)},o.connect(i.destination),i.startRendering()}),i6=t=>(e,n)=>{t.set(e,n)},s6=t=>(e,n)=>t.set(e,n),o6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},a6=(t,e,n,r,i,s)=>class extends t{constructor(a,c){const l=i(a),u={...o6,...c},d=n(l,u),f=s(l),h=f?r():null;super(a,!1,d,h),this._pan=e(this,f,d.pan)}get pan(){return this._pan}},c6=(t,e,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=tr(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,d)}return s.set(c,l),u?await t(c,a.pan,l.pan):await r(c,a.pan,l.pan),$u(l)?await i(a,c,l.inputs[0]):await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},l6=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},u6=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(n);let s=!1,o=!1;try{await r.audioWorklet.addModule(i);const a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await r.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(i)}return s&&!o},d6=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{r.disconnect(),i(n.currentTime!==0)},n.startRendering()})},f6=()=>new DOMException("","UnknownError"),h6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},p6=(t,e,n,r,i,s,o)=>class extends t{constructor(c,l){const u=i(c),d={...h6,...l},f=n(u,d),p=s(u)?r():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},g6=(t,e,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=e(s);if(!tr(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(o,l)}return r.set(o,a),$u(a)?await n(s,o,a.inputs[0]):await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},m6=()=>typeof window>"u"?null:window,v6=(t,e)=>n=>{n.copyFromChannel=(r,i,s=0)=>{const o=t(s),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<c&&d<u;d+=1)r[d]=l[d+o]},n.copyToChannel=(r,i,s=0)=>{const o=t(s),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<c&&d<u;d+=1)l[d+o]=r[d]}},y6=t=>e=>{e.copyFromChannel=(n=>(r,i,s=0)=>{const o=t(s),a=t(i);if(o<e.length)return n.call(e,r,a,o)})(e.copyFromChannel),e.copyToChannel=(n=>(r,i,s=0)=>{const o=t(s),a=t(i);if(o<e.length)return n.call(e,r,a,o)})(e.copyToChannel)},C6=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",i=>()=>{const s=i.call(e);return s===r?null:s},i=>s=>i.call(e,s===null?r:s))},I6=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)i.connect(r,0,c)},()=>i.disconnect(r))},vP=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),yP=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Sh=(t,e,n,r)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:s,set:o}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(s),set:r(o)})},S6=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),b6=t=>({...t,channelCount:t.numberOfOutputs}),w6=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},CP=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;CP(t,e,n+1e-7)}},k6=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},A6=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},E6=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Nb=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},IP=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Pb=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},T6=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},_6=t=>{t.start=(e=>(n=0,r=0,i)=>{const s=t.buffer,o=s===null?r:Math.min(s.duration,r);s!==null&&o>s.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,o,i)})(t.start)},SP=(t,e)=>{const n=e.createGain();t.connect(n);const r=(i=>()=>{i.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),zu(t,n),t.stop=(i=>{let s=!1;return(o=0)=>{if(s)try{i.call(t,o)}catch{n.gain.setValueAtTime(0,o)}else i.call(t,o),s=!0}})(t.stop)},Zu=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},R6=nG(Qc),x6=cG(Qc),N6=IW(nv),bP=new WeakMap,P6=FW(bP),Jo=YG(new Map,new WeakMap),Vs=m6(),wP=uj(Jo,js),kP=BW(dr),zn=t6(dr,kP,Uc),M6=hG(wP,Dt,zn),_t=GW(eP),tc=Bj(Vs),vt=ej(tc),AP=new WeakMap,EP=xW(Zu),bh=pj(Vs),TP=JW(bh),_P=YW(Vs),O6=qW(Vs),Bf=mj(Vs),tn=UG(rG(JN),aG(R6,x6,Jg,N6,Yg,dr,P6,gh,Dt,Qc,Po,Uc,zp),Jo,KW(MC,Yg,dr,Dt,Lf,Po),js,rv,Or,mW(Jg,MC,dr,Dt,Lf,_t,Po,vt),wW(AP,dr,Ji),EP,_t,TP,_P,O6,vt,Bf),D6=fG(tn,M6,js,wP,_t,vt),RP=new WeakSet,U1=dj(Vs),xP=uW(new Uint32Array(1)),NP=v6(xP,js),PP=y6(xP),L6=gG(RP,Jo,Or,U1,tc,l6(U1),NP,PP),iv=lG(Mr),MP=n6(kP,vh,Uc),Hs=iW(MP),Xu=hj(iv,Jo,k6,A6,E6,Nb,IP,Pb,_6,C6(Sh),SP),$s=e6(UW(vh),MP),B6=yG(Hs,Xu,Dt,$s,zn),Qi=VG(iG(qN),AP,QN,GG,JV,YV,qV,QV,eG,xC,XN,bh,CP),F6=vG(tn,B6,Qi,Vn,Xu,_t,vt,Zu),U6=_G(tn,RG,js,Vn,gj(Mr,Sh),_t,vt,zn),V6=JG(Hs,pP,Dt,$s,zn),el=s6(bP),G6=KG(tn,Qi,V6,rv,pP,_t,vt,el),nc=cj(Qc,_P),W6=I6(Vn,nc),rc=wj(bh,W6),j6=eW(rc,Dt,zn),H6=QG(tn,j6,rc,_t,vt),$6=rW(Ch,Dt,zn),z6=nW(tn,$6,Ch,_t,vt,b6),Z6=Ej(iv,Xu,Mr,nc),Ku=Aj(iv,Jo,Z6,Nb,Pb),X6=lW(Hs,Ku,Dt,$s,zn),K6=cW(tn,Qi,X6,Ku,_t,vt,Zu),OP=Tj(Or,Sh),J6=hW(OP,Dt,zn),Y6=fW(tn,J6,OP,_t,vt,el),q6=CW(Hs,gP,Dt,$s,zn),Q6=yW(tn,Qi,q6,gP,_t,vt,el),DP=_j(Or),e9=TW(Hs,DP,Dt,$s,zn),t9=EW(tn,Qi,e9,DP,Or,_t,vt,el),n9=DW(Hs,Mr,Dt,$s,zn),r9=OW(tn,Qi,n9,Mr,_t,vt),i9=Pj(rv,Vn,Ih,Or),Mb=r6(Jo,Mr,Ih,d6(Mr,tc)),s9=XW(Xu,Dt,tc,zn,Mb),o9=Rj(i9),a9=zW(tn,o9,s9,_t,vt,el),c9=xG(Qi,rc,Ku,Ih,Or,vP,vt,Sh),LP=new WeakMap,l9=aj(U6,c9,EP,vt,LP,Zu),BP=Fj(iv,Jo,Nb,IP,Pb,SP),u9=Xj(Hs,BP,Dt,$s,zn),d9=Zj(tn,Qi,BP,u9,_t,vt,Zu),FP=oW(Xu),f9=$j(FP,Vn,Mr,yP,nc),sv=Hj(FP,Vn,f9,yP,nc,bh,Sh),h9=Vj(Jg,Vn,rc,Mr,Ih,sv,Or,Yg,vP,nc),UP=Uj(h9),p9=Yj(Hs,rc,Ku,Mr,UP,Dt,tc,$s,zn,Mb),g9=Jj(tn,Qi,UP,p9,_t,vt,el),m9=Gj(js),v9=Qj(m9,_t,new WeakSet,w6),y9=jj(rc,Ch,Mr,sv,Or,nc),VP=Wj(y9,Or),C9=c6(Hs,VP,Dt,$s,zn),I9=a6(tn,Qi,VP,C9,_t,vt),S9=g6(sv,Dt,zn),b9=p6(tn,Vn,sv,S9,_t,vt,el),GP=tj(Vs),Ob=NW(Vs),WP=new WeakMap,w9=WW(WP,tc),k9=GP?oG(Jo,Or,RW(Vs),Ob,PW(tG),_t,w9,vt,Bf,new WeakMap,new WeakMap,u6(Bf,tc),Vs):void 0,A9=QW(TP,vt),E9=gW(RP,Jo,pW,_W,new WeakSet,_t,A9,BC,UC,NP,PP),T9=ZG(k9,D6,L6,F6,G6,H6,z6,K6,Y6,E9,Q6,t9,r9,a9,l9,d9,g9,v9,I9,b9),_9=nj(tn,Mj,_t,vt),R9=ij(tn,Oj,_t,vt),x9=sj(tn,Dj,_t,vt),N9=Lj(Vn,vt),P9=oj(tn,N9,_t),M9=TG(T9,Vn,Or,f6,_9,R9,x9,P9,bh),jP=jW(LP),O9=uG(jP),HP=sW(js),D9=SW(jP),$P=kW(js),zP=new WeakMap,L9=LW(zP,Ji),B9=bj(HP,js,Vn,rc,Ch,Ku,Mr,Ih,Or,$P,Ob,L9,nc),F9=yj(Vn,B9,Mr,Or,nc),U9=zG(Hs,HP,Xu,rc,Ch,Ku,Mr,D9,$P,Ob,Dt,Bf,tc,$s,zn,Mb),V9=VW(WP),G9=i6(zP),V1=GP?jG(O9,tn,Qi,U9,F9,dr,V9,_t,vt,Bf,S6,G9,T6,Zu):void 0;class ZP{static async openCache(){try{return await caches.open("audio-cache")}catch(e){throw console.error("Failed to open cache:",e),e}}static async getAudioBufferFromCache(e,n,r){try{const i=await n.match(e);if(i){const s=await i.arrayBuffer();return r.decodeAudioData(s)}return null}catch(i){throw console.error("Failed to get audio data from cache:",i),i}}static async fetchAndCacheAudioBuffer(e,n,r){try{const i=await fetch(e),s=i.clone();n.put(e,s);const o=await i.arrayBuffer();return r.decodeAudioData(o)}catch(i){throw console.error("Failed to fetch and cache audio data:",i),i}}static async getAudioBuffer(e,n){const r=await this.openCache();let i=this.pendingRequests.get(e);return i||await this.getAudioBufferFromCache(e,r,n)||(i=this.fetchAndCacheAudioBuffer(e,r,n),this.pendingRequests.set(e,i),i)}}V(ZP,"pendingRequests",new Map);const W9=(t,e)=>{var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n.buffer};function j9(t,e){const n=[];let r=0;fetch(t).then(function(s){if(!s.ok)throw new Error("HTTP error, status = "+s.status);if(!s.body)throw new Error("Missing body");var o=s.body.getReader();let a=new ArrayBuffer(0);function c(){return o.read().then(({value:l,done:u})=>{let d=null;if(l){if(a.byteLength?d=W9(a,l.buffer):(a=l.buffer.slice(0,44),d=l.buffer),e.decodeAudioData(d,function(f){n.push(f),n.length&&i()},function(f){console.log("err(decodeAudioData): "+f)}),u){console.log("done");return}c()}})}c()});function i(){for(;n.length;){let s=n.shift();const o=e.createBufferSource();if(!s)return;o.buffer=s,o.connect(e.destination),r==0&&(r=e.currentTime+.02),o.start(r),r+=o.buffer.duration}}}const H9="data:application/javascript;base64,KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgV0VCQVVESU9fQkxPQ0tfU0laRSA9IDEyODsKICAgIGNvbnN0IERFRkFVTFRfQkxPQ0tfU0laRSA9IDEwMjQ7IC8vIERlZmF1bHQgYmxvY2sgc2l6ZSBpZiBub3QgcHJvdmlkZWQgaW4gb3B0aW9ucwogICAgLyoqIE92ZXJsYXAtQWRkIE5vZGUgKi8KICAgIGNsYXNzIE9MQVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgICAgICAgbmJJbnB1dHM7CiAgICAgICAgbmJPdXRwdXRzOwogICAgICAgIGJsb2NrU2l6ZTsKICAgICAgICBob3BTaXplOwogICAgICAgIG5iT3ZlcmxhcHM7CiAgICAgICAgaW5wdXRCdWZmZXJzID0gW107CiAgICAgICAgaW5wdXRCdWZmZXJzSGVhZCA9IFtdOwogICAgICAgIGlucHV0QnVmZmVyc1RvU2VuZCA9IFtdOwogICAgICAgIG91dHB1dEJ1ZmZlcnMgPSBbXTsKICAgICAgICBvdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSA9IFtdOwogICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMubmJJbnB1dHMgPSBvcHRpb25zLm51bWJlck9mSW5wdXRzIHx8IDE7CiAgICAgICAgICAgIHRoaXMubmJPdXRwdXRzID0gb3B0aW9ucy5udW1iZXJPZk91dHB1dHMgfHwgMTsKICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBvcHRpb25zLnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplIHx8IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5ob3BTaXplID0gV0VCQVVESU9fQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5uYk92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLmJsb2NrU2l6ZSAvIHRoaXMuaG9wU2l6ZSk7CiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTsKICAgICAgICB9CiAgICAgICAgaW5pdGlhbGl6ZUJ1ZmZlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWQgPSBuZXcgQXJyYXkodGhpcy5uYklucHV0cyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMgPSBuZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlID0gbmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYk91dHB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFsbG9jYXRlSW5wdXRDaGFubmVscyhpbnB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWRbaW5wdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplICsgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc1tpbnB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW2lucHV0SW5kZXhdW2ldID0gdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0uc3ViYXJyYXkoMCwgdGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxvY2F0ZU91dHB1dENoYW5uZWxzKG91dHB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tvdXRwdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbb3V0cHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVtvdXRwdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZChpbnB1dHMsIG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gaW5wdXRzW2ldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYkNoYW5uZWxzICE9PSB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gb3V0cHV0c1tpXS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJDaGFubmVscyAhPT0gdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkSW5wdXRzKGlucHV0cykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gaW5wdXRzW2ldW2pdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLnNldCh3ZWJBdWRpb0Jsb2NrLCB0aGlzLmJsb2NrU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgd3JpdGVPdXRwdXRzKG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iT3V0cHV0czsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMub3V0cHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gb3V0cHV0c1tpXVtqXTsKICAgICAgICAgICAgICAgICAgICB3ZWJBdWRpb0Jsb2NrLnNldCh0aGlzLm91dHB1dEJ1ZmZlcnNbaV1bal0uc3ViYXJyYXkoMCwgV0VCQVVESU9fQkxPQ0tfU0laRSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0SW5wdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2hpZnRPdXRwdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmZpbGwoMCwgdGhpcy5ibG9ja1NpemUgLSBXRUJBVURJT19CTE9DS19TSVpFKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2ldW2pdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbaV1bal0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmJsb2NrU2l6ZTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tpXVtqXVtrXSArPSB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW2ldW2pdW2tdIC8gdGhpcy5uYk92ZXJsYXBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICB0aGlzLnJlYWxsb2NhdGVDaGFubmVsc0lmTmVlZGVkKGlucHV0cywgb3V0cHV0cyk7CiAgICAgICAgICAgIHRoaXMucmVhZElucHV0cyhpbnB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCk7CiAgICAgICAgICAgIHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpOwogICAgICAgICAgICB0aGlzLnByb2Nlc3NPTEEodGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQsIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUsIHBhcmFtZXRlcnMpOwogICAgICAgICAgICB0aGlzLmhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCk7CiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRzKG91dHB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgKHgpIHsKICAgIAlyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4OwogICAgfQoKICAgIGZ1bmN0aW9uIEZGVChzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfCAwOwogICAgICBpZiAodGhpcy5zaXplIDw9IDEgfHwgKHRoaXMuc2l6ZSAmICh0aGlzLnNpemUgLSAxKSkgIT09IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxJyk7CgogICAgICB0aGlzLl9jc2l6ZSA9IHNpemUgPDwgMTsKCiAgICAgIC8vIE5PVEU6IFVzZSBvZiBgdmFyYCBpcyBpbnRlbnRpb25hbCBmb3Igb2xkIFY4IHZlcnNpb25zCiAgICAgIHZhciB0YWJsZSA9IG5ldyBBcnJheSh0aGlzLnNpemUgKiAyKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSSAqIGkgLyB0aGlzLnNpemU7CiAgICAgICAgdGFibGVbaV0gPSBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgdGFibGVbaSArIDFdID0gLU1hdGguc2luKGFuZ2xlKTsKICAgICAgfQogICAgICB0aGlzLnRhYmxlID0gdGFibGU7CgogICAgICAvLyBGaW5kIHNpemUncyBwb3dlciBvZiB0d28KICAgICAgdmFyIHBvd2VyID0gMDsKICAgICAgZm9yICh2YXIgdCA9IDE7IHRoaXMuc2l6ZSA+IHQ7IHQgPDw9IDEpCiAgICAgICAgcG93ZXIrKzsKCiAgICAgIC8vIENhbGN1bGF0ZSBpbml0aWFsIHN0ZXAncyB3aWR0aDoKICAgICAgLy8gICAqIElmIHdlIGFyZSBmdWxsIHJhZGl4LTQgLSBpdCBpcyAyeCBzbWFsbGVyIHRvIGdpdmUgaW5pdGFsIGxlbj04CiAgICAgIC8vICAgKiBPdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgYHBvd2VyYCB0byBnaXZlIGxlbj00CiAgICAgIHRoaXMuX3dpZHRoID0gcG93ZXIgJSAyID09PSAwID8gcG93ZXIgLSAxIDogcG93ZXI7CgogICAgICAvLyBQcmUtY29tcHV0ZSBiaXQtcmV2ZXJzYWwgcGF0dGVybnMKICAgICAgdGhpcy5fYml0cmV2ID0gbmV3IEFycmF5KDEgPDwgdGhpcy5fd2lkdGgpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2JpdHJldi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuX2JpdHJldltqXSA9IDA7CiAgICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBzaGlmdCA8IHRoaXMuX3dpZHRoOyBzaGlmdCArPSAyKSB7CiAgICAgICAgICB2YXIgcmV2U2hpZnQgPSB0aGlzLl93aWR0aCAtIHNoaWZ0IC0gMjsKICAgICAgICAgIHRoaXMuX2JpdHJldltqXSB8PSAoKGogPj4+IHNoaWZ0KSAmIDMpIDw8IHJldlNoaWZ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fb3V0ID0gbnVsbDsKICAgICAgdGhpcy5fZGF0YSA9IG51bGw7CiAgICAgIHRoaXMuX2ludiA9IDA7CiAgICB9CiAgICB2YXIgZmZ0ID0gRkZUOwoKICAgIEZGVC5wcm90b3R5cGUuZnJvbUNvbXBsZXhBcnJheSA9IGZ1bmN0aW9uIGZyb21Db21wbGV4QXJyYXkoY29tcGxleCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCBuZXcgQXJyYXkoY29tcGxleC5sZW5ndGggPj4+IDEpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXgubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzW2kgPj4+IDFdID0gY29tcGxleFtpXTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5jcmVhdGVDb21wbGV4QXJyYXkgPSBmdW5jdGlvbiBjcmVhdGVDb21wbGV4QXJyYXkoKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudG9Db21wbGV4QXJyYXkgPSBmdW5jdGlvbiB0b0NvbXBsZXhBcnJheShpbnB1dCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCB0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHJlc1tpXSA9IGlucHV0W2kgPj4+IDFdOwogICAgICAgIHJlc1tpICsgMV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUuY29tcGxldGVTcGVjdHJ1bSA9IGZ1bmN0aW9uIGNvbXBsZXRlU3BlY3RydW0oc3BlY3RydW0pIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLl9jc2l6ZTsKICAgICAgdmFyIGhhbGYgPSBzaXplID4+PiAxOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGhhbGY7IGkgKz0gMikgewogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpXSA9IHNwZWN0cnVtW2ldOwogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpICsgMV0gPSAtc3BlY3RydW1baSArIDFdOwogICAgICB9CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl90cmFuc2Zvcm00KCk7CiAgICAgIHRoaXMuX291dCA9IG51bGw7CiAgICAgIHRoaXMuX2RhdGEgPSBudWxsOwogICAgfTsKCiAgICBGRlQucHJvdG90eXBlLnJlYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiByZWFsVHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl9yZWFsVHJhbnNmb3JtNCgpOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5pbnZlcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gaW52ZXJzZVRyYW5zZm9ybShvdXQsIGRhdGEpIHsKICAgICAgaWYgKG91dCA9PT0gZGF0YSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCcpOwoKICAgICAgdGhpcy5fb3V0ID0gb3V0OwogICAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgICAgdGhpcy5faW52ID0gMTsKICAgICAgdGhpcy5fdHJhbnNmb3JtNCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykKICAgICAgICBvdXRbaV0gLz0gdGhpcy5zaXplOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgLy8gcmFkaXgtNCBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IFVzZXMgb2YgYHZhcmAgYXJlIGludGVudGlvbmFsIGZvciBvbGRlciBWOCB2ZXJzaW9uIHRoYXQgZG8gbm90CiAgICAvLyBzdXBwb3J0IGJvdGggYGxldCBjb21wb3VuZCBhc3NpZ25tZW50c2AgYW5kIGBjb25zdCBwaGlgCiAgICBGRlQucHJvdG90eXBlLl90cmFuc2Zvcm00ID0gZnVuY3Rpb24gX3RyYW5zZm9ybTQoKSB7CiAgICAgIHZhciBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIHZhciBzaXplID0gdGhpcy5fY3NpemU7CgogICAgICAvLyBJbml0aWFsIHN0ZXAgKHBlcm11dGUgYW5kIHRyYW5zZm9ybSkKICAgICAgdmFyIHdpZHRoID0gdGhpcy5fd2lkdGg7CiAgICAgIHZhciBzdGVwID0gMSA8PCB3aWR0aDsKICAgICAgdmFyIGxlbiA9IChzaXplIC8gc3RlcCkgPDwgMTsKCiAgICAgIHZhciBvdXRPZmY7CiAgICAgIHZhciB0OwogICAgICB2YXIgYml0cmV2ID0gdGhpcy5fYml0cmV2OwogICAgICBpZiAobGVuID09PSA0KSB7CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGVuID09PSA4CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm00KG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gbGVuID4+PiAyOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgLy8gRnVsbCBjYXNlCiAgICAgICAgICB2YXIgbGltaXQgPSBvdXRPZmYgKyBxdWFydGVyTGVuOwogICAgICAgICAgZm9yICh2YXIgaSA9IG91dE9mZiwgayA9IDA7IGkgPCBsaW1pdDsgaSArPSAyLCBrICs9IHN0ZXApIHsKICAgICAgICAgICAgY29uc3QgQSA9IGk7CiAgICAgICAgICAgIGNvbnN0IEIgPSBBICsgcXVhcnRlckxlbjsKICAgICAgICAgICAgY29uc3QgQyA9IEIgKyBxdWFydGVyTGVuOwogICAgICAgICAgICBjb25zdCBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgQXIgPSBvdXRbQV07CiAgICAgICAgICAgIGNvbnN0IEFpID0gb3V0W0EgKyAxXTsKICAgICAgICAgICAgY29uc3QgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIGNvbnN0IEJpID0gb3V0W0IgKyAxXTsKICAgICAgICAgICAgY29uc3QgQ3IgPSBvdXRbQ107CiAgICAgICAgICAgIGNvbnN0IENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgY29uc3QgRHIgPSBvdXRbRF07CiAgICAgICAgICAgIGNvbnN0IERpID0gb3V0W0QgKyAxXTsKCiAgICAgICAgICAgIC8vIE1pZGRsZSB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgTUFyID0gQXI7CiAgICAgICAgICAgIGNvbnN0IE1BaSA9IEFpOwoKICAgICAgICAgICAgY29uc3QgdGFibGVCciA9IHRhYmxlW2tdOwogICAgICAgICAgICBjb25zdCB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICBjb25zdCBNQnIgPSBCciAqIHRhYmxlQnIgLSBCaSAqIHRhYmxlQmk7CiAgICAgICAgICAgIGNvbnN0IE1CaSA9IEJyICogdGFibGVCaSArIEJpICogdGFibGVCcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2kgPSBpbnYgKiB0YWJsZVsyICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNQ3IgPSBDciAqIHRhYmxlQ3IgLSBDaSAqIHRhYmxlQ2k7CiAgICAgICAgICAgIGNvbnN0IE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRHIgPSB0YWJsZVszICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGkgPSBpbnYgKiB0YWJsZVszICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIGNvbnN0IE1EaSA9IERyICogdGFibGVEaSArIERpICogdGFibGVEcjsKCiAgICAgICAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgVDByID0gTUFyICsgTUNyOwogICAgICAgICAgICBjb25zdCBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIGNvbnN0IFQxciA9IE1BciAtIE1DcjsKICAgICAgICAgICAgY29uc3QgVDFpID0gTUFpIC0gTUNpOwogICAgICAgICAgICBjb25zdCBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIGNvbnN0IFQyaSA9IE1CaSArIE1EaTsKICAgICAgICAgICAgY29uc3QgVDNyID0gaW52ICogKE1CciAtIE1Ecik7CiAgICAgICAgICAgIGNvbnN0IFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKICAgICAgICAgICAgY29uc3QgRkFpID0gVDBpICsgVDJpOwoKICAgICAgICAgICAgY29uc3QgRkNyID0gVDByIC0gVDJyOwogICAgICAgICAgICBjb25zdCBGQ2kgPSBUMGkgLSBUMmk7CgogICAgICAgICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgICAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgICAgICAgIGNvbnN0IEZEciA9IFQxciAtIFQzaTsKICAgICAgICAgICAgY29uc3QgRkRpID0gVDFpICsgVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CiAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgb3V0W0MgKyAxXSA9IEZDaTsKICAgICAgICAgICAgb3V0W0RdID0gRkRyOwogICAgICAgICAgICBvdXRbRCArIDFdID0gRkRpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyByYWRpeC0yIGltcGxlbWVudGF0aW9uCiAgICAvLwogICAgLy8gTk9URTogT25seSBjYWxsZWQgZm9yIGxlbj00CiAgICBGRlQucHJvdG90eXBlLl9zaW5nbGVUcmFuc2Zvcm0yID0gZnVuY3Rpb24gX3NpbmdsZVRyYW5zZm9ybTIob3V0T2ZmLCBvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IGV2ZW5JID0gZGF0YVtvZmYgKyAxXTsKICAgICAgY29uc3Qgb2RkUiA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IG9kZEkgPSBkYXRhW29mZiArIHN0ZXAgKyAxXTsKCiAgICAgIGNvbnN0IGxlZnRSID0gZXZlblIgKyBvZGRSOwogICAgICBjb25zdCBsZWZ0SSA9IGV2ZW5JICsgb2RkSTsKICAgICAgY29uc3QgcmlnaHRSID0gZXZlblIgLSBvZGRSOwogICAgICBjb25zdCByaWdodEkgPSBldmVuSSAtIG9kZEk7CgogICAgICBvdXRbb3V0T2ZmXSA9IGxlZnRSOwogICAgICBvdXRbb3V0T2ZmICsgMV0gPSBsZWZ0STsKICAgICAgb3V0W291dE9mZiArIDJdID0gcmlnaHRSOwogICAgICBvdXRbb3V0T2ZmICsgM10gPSByaWdodEk7CiAgICB9OwoKICAgIC8vIHJhZGl4LTQKICAgIC8vCiAgICAvLyBOT1RFOiBPbmx5IGNhbGxlZCBmb3IgbGVuPTgKICAgIEZGVC5wcm90b3R5cGUuX3NpbmdsZVRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlVHJhbnNmb3JtNChvdXRPZmYsIG9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuX291dDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7CiAgICAgIGNvbnN0IGludiA9IHRoaXMuX2ludiA/IC0xIDogMTsKICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwICogMjsKICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwICogMzsKCiAgICAgIC8vIE9yaWdpbmFsIHZhbHVlcwogICAgICBjb25zdCBBciA9IGRhdGFbb2ZmXTsKICAgICAgY29uc3QgQWkgPSBkYXRhW29mZiArIDFdOwogICAgICBjb25zdCBCciA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IEJpID0gZGF0YVtvZmYgKyBzdGVwICsgMV07CiAgICAgIGNvbnN0IENyID0gZGF0YVtvZmYgKyBzdGVwMl07CiAgICAgIGNvbnN0IENpID0gZGF0YVtvZmYgKyBzdGVwMiArIDFdOwogICAgICBjb25zdCBEciA9IGRhdGFbb2ZmICsgc3RlcDNdOwogICAgICBjb25zdCBEaSA9IGRhdGFbb2ZmICsgc3RlcDMgKyAxXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDBpID0gQWkgKyBDaTsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDFpID0gQWkgLSBDaTsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDJpID0gQmkgKyBEaTsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwogICAgICBjb25zdCBUM2kgPSBpbnYgKiAoQmkgLSBEaSk7CgogICAgICAvLyBGaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgRkFyID0gVDByICsgVDJyOwogICAgICBjb25zdCBGQWkgPSBUMGkgKyBUMmk7CgogICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKICAgICAgY29uc3QgRkNpID0gVDBpIC0gVDJpOwoKICAgICAgY29uc3QgRkRyID0gVDFyIC0gVDNpOwogICAgICBjb25zdCBGRGkgPSBUMWkgKyBUM3I7CgogICAgICBvdXRbb3V0T2ZmXSA9IEZBcjsKICAgICAgb3V0W291dE9mZiArIDFdID0gRkFpOwogICAgICBvdXRbb3V0T2ZmICsgMl0gPSBGQnI7CiAgICAgIG91dFtvdXRPZmYgKyAzXSA9IEZCaTsKICAgICAgb3V0W291dE9mZiArIDRdID0gRkNyOwogICAgICBvdXRbb3V0T2ZmICsgNV0gPSBGQ2k7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICAvLyBSZWFsIGlucHV0IHJhZGl4LTQgaW1wbGVtZW50YXRpb24KICAgIEZGVC5wcm90b3R5cGUuX3JlYWxUcmFuc2Zvcm00ID0gZnVuY3Rpb24gX3JlYWxUcmFuc2Zvcm00KCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5fb3V0OwogICAgICB2YXIgc2l6ZSA9IHRoaXMuX2NzaXplOwoKICAgICAgLy8gSW5pdGlhbCBzdGVwIChwZXJtdXRlIGFuZCB0cmFuc2Zvcm0pCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoOwogICAgICB2YXIgc3RlcCA9IDEgPDwgd2lkdGg7CiAgICAgIHZhciBsZW4gPSAoc2l6ZSAvIHN0ZXApIDw8IDE7CgogICAgICB2YXIgb3V0T2ZmOwogICAgICB2YXIgdDsKICAgICAgdmFyIGJpdHJldiA9IHRoaXMuX2JpdHJldjsKICAgICAgaWYgKGxlbiA9PT0gNCkgewogICAgICAgIGZvciAob3V0T2ZmID0gMCwgdCA9IDA7IG91dE9mZiA8IHNpemU7IG91dE9mZiArPSBsZW4sIHQrKykgewogICAgICAgICAgY29uc3Qgb2ZmID0gYml0cmV2W3RdOwogICAgICAgICAgdGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLCBvZmYgPj4+IDEsIHN0ZXAgPj4+IDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZW4gPT09IDgKICAgICAgICBmb3IgKG91dE9mZiA9IDAsIHQgPSAwOyBvdXRPZmYgPCBzaXplOyBvdXRPZmYgKz0gbGVuLCB0KyspIHsKICAgICAgICAgIGNvbnN0IG9mZiA9IGJpdHJldlt0XTsKICAgICAgICAgIHRoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG91dE9mZiwgb2ZmID4+PiAxLCBzdGVwID4+PiAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBoYWxmTGVuID0gbGVuID4+PiAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gaGFsZkxlbiA+Pj4gMTsKICAgICAgICB2YXIgaHF1YXJ0ZXJMZW4gPSBxdWFydGVyTGVuID4+PiAxOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDw9IGhxdWFydGVyTGVuOyBpICs9IDIsIGsgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgQSA9IG91dE9mZiArIGk7CiAgICAgICAgICAgIHZhciBCID0gQSArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBDID0gQiArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgdmFyIEFyID0gb3V0W0FdOwogICAgICAgICAgICB2YXIgQWkgPSBvdXRbQSArIDFdOwogICAgICAgICAgICB2YXIgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIHZhciBCaSA9IG91dFtCICsgMV07CiAgICAgICAgICAgIHZhciBDciA9IG91dFtDXTsKICAgICAgICAgICAgdmFyIENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgdmFyIERyID0gb3V0W0RdOwogICAgICAgICAgICB2YXIgRGkgPSBvdXRbRCArIDFdOwoKICAgICAgICAgICAgLy8gTWlkZGxlIHZhbHVlcwogICAgICAgICAgICB2YXIgTUFyID0gQXI7CiAgICAgICAgICAgIHZhciBNQWkgPSBBaTsKCiAgICAgICAgICAgIHZhciB0YWJsZUJyID0gdGFibGVba107CiAgICAgICAgICAgIHZhciB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICB2YXIgTUJyID0gQnIgKiB0YWJsZUJyIC0gQmkgKiB0YWJsZUJpOwogICAgICAgICAgICB2YXIgTUJpID0gQnIgKiB0YWJsZUJpICsgQmkgKiB0YWJsZUJyOwoKICAgICAgICAgICAgdmFyIHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIHZhciB0YWJsZUNpID0gaW52ICogdGFibGVbMiAqIGsgKyAxXTsKICAgICAgICAgICAgdmFyIE1DciA9IENyICogdGFibGVDciAtIENpICogdGFibGVDaTsKICAgICAgICAgICAgdmFyIE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIHZhciB0YWJsZURyID0gdGFibGVbMyAqIGtdOwogICAgICAgICAgICB2YXIgdGFibGVEaSA9IGludiAqIHRhYmxlWzMgKiBrICsgMV07CiAgICAgICAgICAgIHZhciBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIHZhciBNRGkgPSBEciAqIHRhYmxlRGkgKyBEaSAqIHRhYmxlRHI7CgogICAgICAgICAgICAvLyBQcmUtRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBUMHIgPSBNQXIgKyBNQ3I7CiAgICAgICAgICAgIHZhciBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIHZhciBUMXIgPSBNQXIgLSBNQ3I7CiAgICAgICAgICAgIHZhciBUMWkgPSBNQWkgLSBNQ2k7CiAgICAgICAgICAgIHZhciBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIHZhciBUMmkgPSBNQmkgKyBNRGk7CiAgICAgICAgICAgIHZhciBUM3IgPSBpbnYgKiAoTUJyIC0gTURyKTsKICAgICAgICAgICAgdmFyIFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBGQXIgPSBUMHIgKyBUMnI7CiAgICAgICAgICAgIHZhciBGQWkgPSBUMGkgKyBUMmk7CgogICAgICAgICAgICB2YXIgRkJyID0gVDFyICsgVDNpOwogICAgICAgICAgICB2YXIgRkJpID0gVDFpIC0gVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CgogICAgICAgICAgICAvLyBPdXRwdXQgZmluYWwgbWlkZGxlIHBvaW50CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyIEZDciA9IFQwciAtIFQycjsKICAgICAgICAgICAgICB2YXIgRkNpID0gVDBpIC0gVDJpOwogICAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgICBvdXRbQyArIDFdID0gRkNpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIG91cnNlbHZlcwogICAgICAgICAgICBpZiAoaSA9PT0gaHF1YXJ0ZXJMZW4pCiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBJbiB0aGUgZmxpcHBlZCBjYXNlOgogICAgICAgICAgICAvLyBNQWkgPSAtTUFpCiAgICAgICAgICAgIC8vIE1Ccj0tTUJpLCBNQmk9LU1CcgogICAgICAgICAgICAvLyBNQ3I9LU1DcgogICAgICAgICAgICAvLyBNRHI9TURpLCBNRGk9TURyCiAgICAgICAgICAgIHZhciBTVDByID0gVDFyOwogICAgICAgICAgICB2YXIgU1QwaSA9IC1UMWk7CiAgICAgICAgICAgIHZhciBTVDFyID0gVDByOwogICAgICAgICAgICB2YXIgU1QxaSA9IC1UMGk7CiAgICAgICAgICAgIHZhciBTVDJyID0gLWludiAqIFQzaTsKICAgICAgICAgICAgdmFyIFNUMmkgPSAtaW52ICogVDNyOwogICAgICAgICAgICB2YXIgU1QzciA9IC1pbnYgKiBUMmk7CiAgICAgICAgICAgIHZhciBTVDNpID0gLWludiAqIFQycjsKCiAgICAgICAgICAgIHZhciBTRkFyID0gU1QwciArIFNUMnI7CiAgICAgICAgICAgIHZhciBTRkFpID0gU1QwaSArIFNUMmk7CgogICAgICAgICAgICB2YXIgU0ZCciA9IFNUMXIgKyBTVDNpOwogICAgICAgICAgICB2YXIgU0ZCaSA9IFNUMWkgLSBTVDNyOwoKICAgICAgICAgICAgdmFyIFNBID0gb3V0T2ZmICsgcXVhcnRlckxlbiAtIGk7CiAgICAgICAgICAgIHZhciBTQiA9IG91dE9mZiArIGhhbGZMZW4gLSBpOwoKICAgICAgICAgICAgb3V0W1NBXSA9IFNGQXI7CiAgICAgICAgICAgIG91dFtTQSArIDFdID0gU0ZBaTsKICAgICAgICAgICAgb3V0W1NCXSA9IFNGQnI7CiAgICAgICAgICAgIG91dFtTQiArIDFdID0gU0ZCaTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gcmFkaXgtMiBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49NAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTIgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IG9kZFIgPSBkYXRhW29mZiArIHN0ZXBdOwoKICAgICAgY29uc3QgbGVmdFIgPSBldmVuUiArIG9kZFI7CiAgICAgIGNvbnN0IHJpZ2h0UiA9IGV2ZW5SIC0gb2RkUjsKCiAgICAgIG91dFtvdXRPZmZdID0gbGVmdFI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IHJpZ2h0UjsKICAgICAgb3V0W291dE9mZiArIDNdID0gMDsKICAgIH07CgogICAgLy8gcmFkaXgtNAogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49OAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTQob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwogICAgICBjb25zdCBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcCAqIDI7CiAgICAgIGNvbnN0IHN0ZXAzID0gc3RlcCAqIDM7CgogICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgQXIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IEJyID0gZGF0YVtvZmYgKyBzdGVwXTsKICAgICAgY29uc3QgQ3IgPSBkYXRhW29mZiArIHN0ZXAyXTsKICAgICAgY29uc3QgRHIgPSBkYXRhW29mZiArIHN0ZXAzXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwoKICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKCiAgICAgIGNvbnN0IEZCciA9IFQxcjsKICAgICAgY29uc3QgRkJpID0gLVQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKCiAgICAgIGNvbnN0IEZEciA9IFQxcjsKICAgICAgY29uc3QgRkRpID0gVDNyOwoKICAgICAgb3V0W291dE9mZl0gPSBGQXI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IEZCcjsKICAgICAgb3V0W291dE9mZiArIDNdID0gRkJpOwogICAgICBvdXRbb3V0T2ZmICsgNF0gPSBGQ3I7CiAgICAgIG91dFtvdXRPZmYgKyA1XSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICB2YXIgRkZUJDEgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmZ0KTsKCiAgICBjb25zdCBCVUZGRVJFRF9CTE9DS19TSVpFID0gMjA0ODsKICAgIGZ1bmN0aW9uIGdlbkhhbm5XaW5kb3cobGVuZ3RoKSB7CiAgICAgICAgbGV0IHdpbiA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdpbltpXSA9IDAuNSAqICgxIC0gTWF0aC5jb3MoMiAqIE1hdGguUEkgKiBpIC8gbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3aW47CiAgICB9CiAgICBjbGFzcyBQaGFzZVZvY29kZXJQcm9jZXNzb3IgZXh0ZW5kcyBPTEFQcm9jZXNzb3IgewogICAgICAgIGZmdFNpemU7CiAgICAgICAgdGltZUN1cnNvcjsKICAgICAgICBoYW5uV2luZG93OwogICAgICAgIGZmdDsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlcjsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ7CiAgICAgICAgdGltZUNvbXBsZXhCdWZmZXI7CiAgICAgICAgbWFnbml0dWRlczsKICAgICAgICBwZWFrSW5kZXhlczsKICAgICAgICBuYlBlYWtzOwogICAgICAgIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaXRjaEZhY3RvcicsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLjAKICAgICAgICAgICAgICAgIH1dOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMucHJvY2Vzc29yT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogQlVGRkVSRURfQkxPQ0tfU0laRSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMuZmZ0U2l6ZSA9IHRoaXMuYmxvY2tTaXplOwogICAgICAgICAgICB0aGlzLnRpbWVDdXJzb3IgPSAwOwogICAgICAgICAgICB0aGlzLmhhbm5XaW5kb3cgPSBnZW5IYW5uV2luZG93KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgLy8gcHJlcGFyZSBGRlQgYW5kIHByZS1hbGxvY2F0ZSBidWZmZXJzCiAgICAgICAgICAgIHRoaXMuZmZ0ID0gbmV3IEZGVCQxKHRoaXMuZmZ0U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy50aW1lQ29tcGxleEJ1ZmZlciA9IHRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICAgICAgICB0aGlzLm1hZ25pdHVkZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZSAvIDIgKyAxKTsKICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlcyA9IG5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLm5iUGVha3MgPSAwOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzT0xBKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIGNvbnN0IHBpdGNoRmFjdG9yID0gcGFyYW1ldGVycy5waXRjaEZhY3RvcltwYXJhbWV0ZXJzLnBpdGNoRmFjdG9yLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dHNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhhbm5XaW5kb3coaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlciwgaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQZWFrcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRQZWFrcyhwaXRjaEZhY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCBvdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIYW5uV2luZG93KG91dHB1dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lQ3Vyc29yICs9IHRoaXMuaG9wU2l6ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGFwcGx5SGFubldpbmRvdyhpbnB1dCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGlucHV0W2ldICo9IHRoaXMuaGFubldpbmRvd1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb21wdXRlTWFnbml0dWRlcygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdGhpcy5tYWduaXR1ZGVzLmxlbmd0aDsgaSsrLCBqICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2pdOwogICAgICAgICAgICAgICAgY29uc3QgaW1hZyA9IHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbaiArIDFdOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGVzW2ldID0gcmVhbCAqKiAyICsgaW1hZyAqKiAyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmRQZWFrcygpIHsKICAgICAgICAgICAgdGhpcy5uYlBlYWtzID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGVuZCA9IHRoaXMubWFnbml0dWRlcy5sZW5ndGggLSAyOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pdHVkZXNbaSAtIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSAtIDJdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDJdID49IG1hZykgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3MrK10gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0UGVha3MocGl0Y2hGYWN0b3IpIHsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iUGVha3M7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGVha0luZGV4ID0gdGhpcy5wZWFrSW5kZXhlc1tpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlYWtJbmRleFNoaWZ0ZWQgPSBNYXRoLnJvdW5kKHBlYWtJbmRleCAqIHBpdGNoRmFjdG9yKTsKICAgICAgICAgICAgICAgIGlmIChwZWFrSW5kZXhTaGlmdGVkID4gdGhpcy5tYWduaXR1ZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoaSA+IDApID8gcGVha0luZGV4IC0gTWF0aC5mbG9vcigocGVha0luZGV4IC0gdGhpcy5wZWFrSW5kZXhlc1tpIC0gMV0pIC8gMikgOiAwOwogICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKGkgPCB0aGlzLm5iUGVha3MgLSAxKSA/IHBlYWtJbmRleCArIE1hdGguY2VpbCgodGhpcy5wZWFrSW5kZXhlc1tpICsgMV0gLSBwZWFrSW5kZXgpIC8gMikgOiB0aGlzLmZmdFNpemU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJbmRleCAtIHBlYWtJbmRleDsgaiA8IGVuZEluZGV4IC0gcGVha0luZGV4OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5JbmRleCA9IHBlYWtJbmRleCArIGo7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluSW5kZXhTaGlmdGVkID0gcGVha0luZGV4U2hpZnRlZCArIGo7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbkluZGV4U2hpZnRlZCA+PSB0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWVnYURlbHRhID0gMiAqIE1hdGguUEkgKiAoYmluSW5kZXhTaGlmdGVkIC0gYmluSW5kZXgpIC8gdGhpcy5mZnRTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoYXNlU2hpZnRSZWFsID0gTWF0aC5jb3Mob21lZ2FEZWx0YSAqIHRoaXMudGltZUN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VTaGlmdEltYWcgPSBNYXRoLnNpbihvbWVnYURlbHRhICogdGhpcy50aW1lQ3Vyc29yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFJlYWwgPSBiaW5JbmRleCAqIDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbWFnID0gaW5kZXhSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2luZGV4UmVhbF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbWFnID0gdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltpbmRleEltYWddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZFJlYWwgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0UmVhbCAtIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRJbWFnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZEltYWcgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0SW1hZyArIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRSZWFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZFJlYWwgPSBiaW5JbmRleFNoaWZ0ZWQgKiAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZEltYWcgPSBpbmRleFNoaWZ0ZWRSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtpbmRleFNoaWZ0ZWRSZWFsXSArPSB2YWx1ZVNoaWZ0ZWRSZWFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2luZGV4U2hpZnRlZEltYWddICs9IHZhbHVlU2hpZnRlZEltYWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBAdHMtaWdub3JlCiAgICByZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2RlciIsIFBoYXNlVm9jb2RlclByb2Nlc3Nvcik7CiAgICBjb25zb2xlLmxvZygiUGhhc2VWb2NvZGVyUHJvY2Vzc29yIHJlZ2lzdGVyZWQiKTsKCiAgICBleHBvcnRzLlBoYXNlVm9jb2RlclByb2Nlc3NvciA9IFBoYXNlVm9jb2RlclByb2Nlc3NvcjsKCiAgICByZXR1cm4gZXhwb3J0czsKCn0pKHt9KTsK";var XP=(t=>(t.HTML="HTML",t.Streaming="Streaming",t.Buffer="Buffer",t))(XP||{});let $9=class{constructor(e){V(this,"context");V(this,"globalGainNode");V(this,"listener");V(this,"prevVolume",1);V(this,"finalizationRegistry");V(this,"createOscillator",({frequency:e,type:n,periodicWave:r})=>{const i=this.context.createOscillator();return i.type=n||"sine",i.setPeriodicWave(r),i.frequency.value=e,i.connect(this.globalGainNode),i});this.context=e||new M9,this.listener=this.context.listener,this.globalGainNode=this.context.createGain(),this.globalGainNode.connect(this.context.destination),this.finalizationRegistry=new FinalizationRegistry(n=>{n.cleanup()})}async loadWorklets(){this.context.audioWorklet?await this.createWorkletNode("phase-vocoder",H9):console.warn("AudioWorklet not supported")}async createWorkletNode(e,n){if(!this.context.audioWorklet)throw new Error("AudioWorklet not supported");try{return new V1(this.context,e)}catch(r){console.error(r),console.log("Loading worklet from url",n);try{await this.context.audioWorklet.addModule(n)}catch(i){throw console.error(i),new Error(`Could not load worklet from url ${n}`)}return new V1(this.context,e)}}async createSound(e,n="Buffer"){if(e instanceof AudioBuffer)return Promise.resolve(new sp("",e,this.context,this.globalGainNode,"Buffer"));const r=e;if(n==="HTML"){const i=new Audio;return i.src=r,i.crossOrigin="anonymous",new sp(r,void 0,this.context,this.globalGainNode,"HTML")}return ZP.getAudioBuffer(r,this.context).then(i=>new sp(r,i,this.context,this.globalGainNode,n))}async createGroup(e){const n=new G1;return e.forEach(r=>n.addSound(r)),n}async createGroupFromUrls(e){const n=new G1;return(await Promise.all(e.map(r=>this.createSound(r)))).forEach(r=>n.addSound(r)),n}async createStream(e){return await j9(e,this.context),new sp(e,void 0,this.context,this.globalGainNode,"Streaming")}createBiquadFilter({type:e,frequency:n,gain:r,Q:i}){const s=this.context.createBiquadFilter();return s.type=e||"lowpass",s.frequency.value=n||350,s.gain.value=r||0,s.Q.value=i||1,s}createPanner({coneInnerAngle:e,coneOuterAngle:n,coneOuterGain:r,distanceModel:i,maxDistance:s,channelCount:o,channelCountMode:a,channelInterpretation:c,panningModel:l,refDistance:u,rolloffFactor:d,positionX:f,positionY:h,positionZ:p,orientationX:m,orientationY:y,orientationZ:g}){const v=this.context.createPanner();return v.coneInnerAngle=e||360,v.coneOuterAngle=n||360,v.coneOuterGain=r||0,v.distanceModel=i||"inverse",v.maxDistance=s||1e4,v.channelCount=o||2,v.channelCountMode=a||"clamped-max",v.channelInterpretation=c||"speakers",v.panningModel=l||"HRTF",v.refDistance=u||1,v.rolloffFactor=d||1,v.positionX.value=f||0,v.positionY.value=h||0,v.positionZ.value=p||0,v.orientationX.value=m||0,v.orientationY.value=y||0,v.orientationZ.value=g||0,v}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}setGlobalVolume(e){this.globalGainNode.gain.value=e}get volume(){return this.globalGainNode.gain.value}set volume(e){if(this.muted){this.prevVolume=e;return}this.setGlobalVolume(e)}mute(){this.muted||(this.prevVolume=this.globalGainNode.gain.value,this.setGlobalVolume(0))}unmute(){this.muted&&this.setGlobalVolume(this.prevVolume)}get muted(){return this.globalGainNode.gain.value===0}set muted(e){e!==this.muted&&(e?this.mute():this.unmute())}getMicrophoneStream(){return new Promise((e,n)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{const i=new X9(this.context);i.play(),e(i)}).catch(r=>{n(r)})})}get listenerOrientation(){return{forward:[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value],up:[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}}set listenerOrientation(e){const{forward:n,up:r}=e,[i,s,o]=n,[a,c,l]=r;this.listener.forwardX.setValueAtTime(i,this.context.currentTime),this.listener.forwardY.setValueAtTime(s,this.context.currentTime),this.listener.forwardZ.setValueAtTime(o,this.context.currentTime),this.listener.upX.setValueAtTime(a,this.context.currentTime),this.listener.upY.setValueAtTime(c,this.context.currentTime),this.listener.upZ.setValueAtTime(l,this.context.currentTime)}get listenerUpOrientation(){return[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}set listenerUpOrientation(e){const[n,r,i]=e;this.listener.upX.setValueAtTime(n,this.context.currentTime),this.listener.upY.setValueAtTime(r,this.context.currentTime),this.listener.upZ.setValueAtTime(i,this.context.currentTime)}get listenerForwardOrientation(){return[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value]}set listenerForwardOrientation(e){const[n,r,i]=e;this.listener.forwardX.setValueAtTime(n,this.context.currentTime),this.listener.forwardY.setValueAtTime(r,this.context.currentTime),this.listener.forwardZ.setValueAtTime(i,this.context.currentTime)}get listenerPosition(){return[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}set listenerPosition(e){const[n,r,i]=e;this.listener.positionX.setValueAtTime(n,this.context.currentTime),this.listener.positionY.setValueAtTime(r,this.context.currentTime),this.listener.positionZ.setValueAtTime(i,this.context.currentTime)}},ov=class{constructor(){V(this,"filters",[])}addFilter(e){this.filters.push(e)}removeFilter(e){this.filters=this.filters.filter(n=>n!==e)}applyFilters(e){return this.filters.reduce((n,r)=>(n.connect(r),r),e),this.filters.length>0?this.filters[this.filters.length-1]:e}},sp=class KP extends ov{constructor(n,r,i,s,o="Buffer"){super();V(this,"buffer");V(this,"context");V(this,"playbacks",[]);V(this,"globalGainNode");V(this,"_position",[0,0,0]);V(this,"_threeDOptions",{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",panningModel:"HRTF",refDistance:1,rolloffFactor:1,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0});V(this,"loopCount",0);V(this,"_playbackRate",1);V(this,"_volume",1);this.url=n,this.type=o,this.buffer=r,this.context=i,this.globalGainNode=s,this._position=[0,0,0]}clone(){const n=new KP(this.url,this.buffer,this.context,this.globalGainNode,this.type);return n.loopCount=this.loopCount,n._playbackRate=this._playbackRate,n._volume=this._volume,n._position=this._position,n._threeDOptions=this._threeDOptions,n.filters=this.filters,n}preplay(){let n;if(this.buffer)n=this.context.createBufferSource(),n.buffer=this.buffer;else{const s=new Audio;s.crossOrigin="anonymous",s.src=this.url,s.preload="auto",n=this.context.createMediaElementSource(s)}const r=this.context.createGain();r.connect(this.globalGainNode);const i=new z9(n,r,this.context,this.loopCount);return i.volume=this.volume,i.playbackRate=this.playbackRate,this.filters.forEach(s=>i.addFilter(s)),i.threeDOptions=this.threeDOptions,i.position=this.position,this.playbacks.push(i),[i]}play(){const n=this.preplay();return n.forEach(r=>r.play()),n}stop(){this.playbacks.forEach(n=>n.stop())}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}seek(n){this.playbacks.forEach(r=>r.seek(n))}get duration(){var n;return((n=this.buffer)==null?void 0:n.duration)||0}set position(n){this._threeDOptions.positionX=n[0],this._threeDOptions.positionY=n[1],this._threeDOptions.positionZ=n[2],this.playbacks.forEach(r=>r.position=n)}get position(){return[this._threeDOptions.positionX,this._threeDOptions.positionY,this._threeDOptions.positionZ]}get threeDOptions(){return this._threeDOptions}set threeDOptions(n){this._threeDOptions={...this._threeDOptions,...n},this.playbacks.forEach(r=>r.threeDOptions=this._threeDOptions)}loop(n){return n===void 0?this.loopCount:(this.loopCount=n,this.playbacks.forEach(r=>r.sourceLoop=!0),this.loopCount)}addFilter(n){super.addFilter(n),this.playbacks.forEach(r=>r.addFilter(n))}removeFilter(n){super.removeFilter(n),this.playbacks.forEach(r=>r.removeFilter(n))}get volume(){return this._volume}set volume(n){this._volume=n,this.playbacks.forEach(r=>r.volume=n)}isPlaying(){return this.playbacks.some(n=>n.isPlaying())}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.playbacks.forEach(r=>r.playbackRate=n)}},z9=class extends ov{constructor(n,r,i,s=0){super();V(this,"context");V(this,"source");V(this,"gainNode");V(this,"panner");V(this,"loopCount",0);V(this,"currentLoop",0);V(this,"buffer");V(this,"playing",!1);this.loopCount=s,this.source=n,"buffer"in n&&n.buffer&&(this.buffer=n.buffer),"mediaElement"in n&&n.mediaElement?n.mediaElement.onended=this.handleLoop.bind(this):"onended"in n&&(n.onended=this.handleLoop.bind(this)),this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner),this.panner.connect(this.gainNode),this.refreshFilters()}get duration(){if(!this.buffer)throw new Error("Cannot get duration of a sound that has been cleaned up");return this.buffer.duration}get playbackRate(){if(!this.source)throw new Error("Cannot get playback rate of a sound that has been cleaned up");if("playbackRate"in this.source)return this.source.playbackRate.value;if("mediaElement"in this.source&&this.source.mediaElement)return this.source.mediaElement.playbackRate;throw new Error("Unsupported source type")}set playbackRate(n){if(!this.source)throw new Error("Cannot set playback rate of a sound that has been cleaned up");"playbackRate"in this.source&&(this.source.playbackRate.value=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.playbackRate=n)}handleLoop(){this.buffer?(this.source=this.context.createBufferSource(),this.source.buffer=this.buffer):this.seek(0),this.loopCount==="infinite"||this.currentLoop<this.loopCount?(this.currentLoop++,this.playing&&this.play()):this.playing=!1}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.play():"start"in this.source&&this.source.start&&this.source.start(),this.playing=!0,[this]}get threeDOptions(){if(!this.panner)throw new Error("Cannot get 3D options of a sound that has been cleaned up");return{coneInnerAngle:this.panner.coneInnerAngle,coneOuterAngle:this.panner.coneOuterAngle,coneOuterGain:this.panner.coneOuterGain,distanceModel:this.panner.distanceModel,maxDistance:this.panner.maxDistance,channelCount:this.panner.channelCount,channelCountMode:this.panner.channelCountMode,channelInterpretation:this.panner.channelInterpretation,panningModel:this.panner.panningModel,refDistance:this.panner.refDistance,rolloffFactor:this.panner.rolloffFactor,positionX:this.panner.positionX.value,positionY:this.panner.positionY.value,positionZ:this.panner.positionZ.value,orientationX:this.panner.orientationX.value,orientationY:this.panner.orientationY.value,orientationZ:this.panner.orientationZ.value}}set threeDOptions(n){if(!this.panner)throw new Error("Cannot set 3D options of a sound that has been cleaned up");this.panner.coneInnerAngle=n.coneInnerAngle||this.panner.coneInnerAngle,this.panner.coneOuterAngle=n.coneOuterAngle||this.panner.coneOuterAngle,this.panner.coneOuterGain=n.coneOuterGain||this.panner.coneOuterGain,this.panner.distanceModel=n.distanceModel||this.panner.distanceModel,this.panner.maxDistance=n.maxDistance||this.panner.maxDistance,this.panner.channelCount=n.channelCount||this.panner.channelCount,this.panner.channelCountMode=n.channelCountMode||this.panner.channelCountMode,this.panner.channelInterpretation=n.channelInterpretation||this.panner.channelInterpretation,this.panner.panningModel=n.panningModel||this.panner.panningModel,this.panner.refDistance=n.refDistance||this.panner.refDistance,this.panner.rolloffFactor=n.rolloffFactor||this.panner.rolloffFactor,this.panner.positionX.value=n.positionX||this.panner.positionX.value,this.panner.positionY.value=n.positionY||this.panner.positionY.value,this.panner.positionZ.value=n.positionZ||this.panner.positionZ.value,this.panner.orientationX.value=n.orientationX||this.panner.orientationX.value,this.panner.orientationY.value=n.orientationY||this.panner.orientationY.value,this.panner.orientationZ.value=n.orientationZ||this.panner.orientationZ.value}seek(n){if(!this.source||!this.buffer||!this.gainNode||!this.panner)throw new Error("Cannot seek a sound that has been cleaned up");const r=this.isPlaying();this.stop(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.refreshFilters(),this.source.connect(this.panner).connect(this.gainNode),r&&this.source.start(0,n)}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}set sourceLoop(n){if(!this.source)throw new Error("Cannot set loop on a sound that has been cleaned up");"loop"in this.source&&(this.source.loop=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.loop=n)}fadeIn(n,r="linear"){return new Promise(i=>{if(!this.gainNode)throw new Error("Cannot fade in a sound that has been cleaned up");this.gainNode.gain.value;const s=1;switch(this.gainNode.gain.value=0,r){case"exponential":this.gainNode.gain.setValueAtTime(.01,this.context.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(s,this.context.currentTime+n);break;case"linear":this.gainNode.gain.linearRampToValueAtTime(s,this.context.currentTime+n);break}setTimeout(()=>{if(!this.gainNode)throw new Error("Cannot fade in a sound that has been cleaned up");this.gainNode.gain.value=s,i()},n*1e3)})}fadeOut(n,r="linear"){return new Promise(i=>{if(!this.gainNode)throw new Error("Cannot fade out a sound that has been cleaned up");switch(this.gainNode.gain.value,r){case"exponential":this.gainNode.gain.exponentialRampToValueAtTime(.01,this.context.currentTime+n);break;case"linear":this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+n)}setTimeout(()=>i(),n*1e3)})}isPlaying(){if(!this.source)throw new Error("Cannot check if a sound is playing that has been cleaned up");return this.playing}cleanup(){this.source&&(this.source.disconnect(),this.source=void 0),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=void 0),this.filters.forEach(n=>{n&&n.disconnect()}),this.filters=[]}loop(n){var r;if(!this.source)throw new Error("Cannot loop a sound that has been cleaned up");if(this.source instanceof AudioBufferSourceNode)return n===void 0?this.source.loop===!0?"infinite":0:(this.source.loop=!0,this.source.loopEnd=((r=this.source.buffer)==null?void 0:r.duration)||0,this.source.loopStart=0,this.source.loop===!0?"infinite":0);if("mediaElement"in this.source&&this.source.mediaElement){const i=this.source.mediaElement;return n===void 0||(i.loop=!0),i.loop===!0?"infinite":0}throw new Error("Unsupported source type")}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.isPlaying()&&("stop"in this.source&&this.source.stop(),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.pause(),this.source.mediaElement.currentTime=0),this.playing=!1)}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");"suspend"in this.source.context&&this.source.context.suspend()}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");"resume"in this.source.context&&this.source.context.resume()}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,s]=n;this.panner.positionX.setValueAtTime(r,this.context.currentTime),this.panner.positionY.setValueAtTime(i,this.context.currentTime),this.panner.positionZ.setValueAtTime(s,this.context.currentTime)}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}},G1=class{constructor(){V(this,"sounds",[]);V(this,"_position",[0,0,0]);V(this,"loopCount",0)}get duration(){return this.sounds.map(e=>e.duration).reduce((e,n)=>Math.max(e,n),0)}seek(e){this.sounds.forEach(n=>n.seek&&n.seek(e))}addSound(e){this.sounds.push(e)}preplay(){return this.sounds.reduce((e,n)=>(n.loop&&n.loop(this.loopCount),e.concat(n.preplay())),[])}play(){return this.preplay().map(e=>(e.play(),e))}isPlaying(){return this.sounds.some(e=>e.isPlaying())}stop(){this.sounds.forEach(e=>e.stop())}pause(){this.sounds.forEach(e=>e.pause())}resume(){this.sounds.forEach(e=>e.resume())}loop(e){return e===void 0?this.loopCount:(this.loopCount=e,this.sounds.forEach(n=>n.loop&&n.loop(e)),this.loopCount)}addFilter(e){this.sounds.forEach(n=>n.addFilter(e))}removeFilter(e){this.sounds.forEach(n=>n.removeFilter(e))}set position(e){this._position=e,this.sounds.forEach(n=>n.position=this._position)}get position(){return this._position}get volume(){return this.sounds.map(e=>e.volume).reduce((e,n)=>e+n,0)/this.sounds.length}set volume(e){this.sounds.forEach(n=>n.volume=e)}get playbackRate(){return this.sounds.length===0?1:this.sounds[0].playbackRate}set playbackRate(e){this.sounds.forEach(n=>n.playbackRate=e)}};class Z9 extends ov{constructor(n,r,i,s=0){super();V(this,"context");V(this,"source");V(this,"gainNode");V(this,"panner");this.source=n,this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner).connect(this.gainNode),this.refreshFilters()}get duration(){return 0}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return[this]}isPlaying(){return!!this.source}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.stop())}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!1)}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!0)}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,s]=n;this.panner.positionX.value=r,this.panner.positionY.value=i,this.panner.positionZ.value=s}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.source||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.source;this.source.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}get playbackRate(){return 1}set playbackRate(n){}}let X9=class extends ov{constructor(n){super();V(this,"context");V(this,"_position",[0,0,0]);V(this,"loopCount",0);V(this,"prevVolume",1);V(this,"microphoneGainNode");V(this,"streamPlayback");V(this,"stream");V(this,"streamSource");this.context=n,this.microphoneGainNode=this.context.createGain()}play(){return this.stream||navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{this.stream=n,this.streamSource=this.context.createMediaStreamSource(this.stream),this.streamPlayback=new Z9(this.streamSource,this.microphoneGainNode,this.context),this.streamPlayback.play()}).catch(n=>{console.error("Error initializing microphone stream:",n)}),this.streamPlayback?[this.streamPlayback]:[]}get duration(){return 0}seek(n){}isPlaying(){return!!this.streamPlayback}stop(){this.streamPlayback&&(this.streamPlayback.stop(),this.streamPlayback=void 0)}pause(){this.streamPlayback&&this.streamPlayback.pause()}resume(){this.streamPlayback&&this.streamPlayback.resume()}addFilter(n){this.streamPlayback&&this.streamPlayback.addFilter(n)}removeFilter(n){this.streamPlayback&&this.streamPlayback.removeFilter(n)}get volume(){return this.streamPlayback?this.streamPlayback.volume:0}set volume(n){this.streamPlayback&&(this.streamPlayback.volume=n)}get position(){return[0,0,0]}set position(n){}loop(n){return 0}get playbackRate(){return 1}set playbackRate(n){}};const K9="https://mongoose.world:9080/?url=";class J9 extends Ko{constructor(){super(...arguments);V(this,"packageName","Client.Media");V(this,"sounds",{});V(this,"defaultUrl","")}handleDefault(n){this.defaultUrl=n}async handleLoad(n){const r=(n.url||this.defaultUrl)+n.name,i=n.url+n.name;if(!this.sounds[i]){let o=await this.client.cacophony.createSound(r);o.key=i,this.sounds[i]=o}}mediaUrl(n){var i;let r=(n.url||this.defaultUrl)+n.name;return((i=n.type)==null?void 0:i.toLowerCase())==="music"&&(r=K9+encodeURIComponent(r)),r}async handlePlay(n){let r=this.mediaUrl(n);n.key=n.key||r;let i=this.sounds[n.key];if((!i||i.url!==r)&&(n.type==="music"?i=await this.client.cacophony.createSound(r,XP.HTML):i=await this.client.cacophony.createSound(r)),n.volume!==void 0&&(i.volume=n.volume/100),n.loops!==void 0&&i.loop&&i.loop(n.loops===-1?"infinite":n.loops),n.start&&i.seek(n.start),n.end&&setTimeout(()=>{i.stop()},n.end),n.is3d&&(i.threeDOptions={coneInnerAngle:360,coneOuterAngle:0,panningModel:"HRTF",distanceModel:"inverse"},i.position=[n.position[0],n.position[1],n.position[2]]),n.priority){for(let s in this.sounds){const o=this.sounds[s];o.priority&&o.priority<n.priority&&o.stop()}i.priority=n.priority}if(!i.isPlaying()){const s=i.play()[0];n.fadein&&s.fadeIn(n.fadein),n.fadeout&&s.fadeOut(n.fadeout)}this.sounds[n.key]=i,i.key=n.key}handleStop(n){n.name&&this.soundsByName(n.name).forEach(r=>r.stop()),n.type&&this.soundsByType(n.type).forEach(r=>r.stop()),n.tag&&this.soundsByTag(n.tag).forEach(r=>r.stop()),n.key&&this.soundsByKey(n.key).forEach(r=>r.stop()),!n.name&&!n.type&&!n.tag&&!n.key&&this.allSounds.forEach(r=>r.stop())}handleListenerPosition(n){var r;(r=n.position)!=null&&r.length&&(this.client.cacophony.listenerPosition=n.position)}handleListenerOrientation(n){n.up&&n.up.length&&(this.client.cacophony.listenerUpOrientation=n.up),n.forward&&n.forward.length&&(this.client.cacophony.listenerForwardOrientation=n.forward)}soundsByName(n){return Object.values(this.sounds).filter(r=>r.url&&r.url[r.url.length-1].endsWith(n))}soundsByKey(n){return Object.values(this.sounds).filter(r=>r.key===n)}soundsByTag(n){return Object.values(this.sounds).filter(r=>r.tag===n)}soundsByType(n){return Object.values(this.sounds).filter(r=>r.mediaType===n)}get allSounds(){return Object.values(this.sounds)}stopAllSounds(){this.allSounds.forEach(n=>n.stop()),this.sounds={}}}class Y9 extends Ko{constructor(){super(...arguments);V(this,"packageName","Client.Speech")}handleSpeak(n){const r=new SpeechSynthesisUtterance(n.text);r.rate=n.rate,r.pitch=n.pitch,r.volume=n.volume,speechSynthesis.speak(r)}}class q9 extends Ko{constructor(){super(...arguments);V(this,"packageName","Comm.Channel");V(this,"channels",[])}handleList(n){this.channels=n}sendList(){this.sendData("List")}handleText(n){n.channel==="say_to_you"&&(document.hasFocus()||this.client.sendNotification(`Message from ${n.talker}`,`${n.text}`))}}class Q9 extends Ko{constructor(){super(...arguments);V(this,"packageName","Comm.LiveKit")}handleroom_token(n){this.client.worldData.liveKitTokens.push(n.token),this.client.emit("livekitToken",n.token)}handleroom_leave(n){this.client.worldData.liveKitTokens=this.client.worldData.liveKitTokens.filter(r=>r!==n.token),this.client.emit("livekitLeave",n.token)}}class eH extends Ko{constructor(){super(...arguments);V(this,"packageName","Core")}sendHello(){this.sendData("Hello",{client:"Mongoose Client",version:"0.1"})}}class tH extends Ko{constructor(){super(...arguments);V(this,"packageName","Core.Supports")}sendSet(){const n=Object.values(this.client.gmcpHandlers).map(r=>r.packageName+" "+r.packageVersion.toString());this.sendData("Set",n)}}const hl=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,JP=new Set,VC=typeof process=="object"&&process?process:{},YP=(t,e,n,r)=>{typeof VC.emitWarning=="function"?VC.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let tm=globalThis.AbortController,W1=globalThis.AbortSignal;var y_;if(typeof tm>"u"){W1=class{constructor(){V(this,"onabort");V(this,"_onabort",[]);V(this,"reason");V(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},tm=class{constructor(){V(this,"signal",new W1);e()}abort(r){var i,s;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const o of this.signal._onabort)o(r);(s=(i=this.signal).onabort)==null||s.call(i,r)}}};let t=((y_=VC.env)==null?void 0:y_.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,YP("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const nH=t=>!JP.has(t),aa=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),qP=t=>aa(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Zp:null:null;class Zp extends Array{constructor(e){super(e),this.fill(0)}}var fu;const mc=class mc{constructor(e,n){V(this,"heap");V(this,"length");if(!M(mc,fu))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=qP(e);if(!n)return[];Ae(mc,fu,!0);const r=new mc(e,n);return Ae(mc,fu,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};fu=new WeakMap,De(mc,fu,!1);let GC=mc;var Ai,Fr,Ei,Ti,hu,cn,_i,sn,Nt,Ne,rr,Ur,Kn,kn,Ri,An,xi,Ni,Vr,Pi,Ia,ir,nh,jC,Ac,no,rh,Gr,xm,QP,Ec,pu,ih,us,ca,ds,la,sh,HC,Jse,gu,Xp,mu,Kp,pt,xt,oh,$C,Tc,Vd;const ek=class ek{constructor(e){De(this,nh);De(this,xm);De(this,us);De(this,ds);De(this,sh);De(this,gu);De(this,mu);De(this,pt);De(this,oh);De(this,Tc);De(this,Ai,void 0);De(this,Fr,void 0);De(this,Ei,void 0);De(this,Ti,void 0);De(this,hu,void 0);V(this,"ttl");V(this,"ttlResolution");V(this,"ttlAutopurge");V(this,"updateAgeOnGet");V(this,"updateAgeOnHas");V(this,"allowStale");V(this,"noDisposeOnSet");V(this,"noUpdateTTL");V(this,"maxEntrySize");V(this,"sizeCalculation");V(this,"noDeleteOnFetchRejection");V(this,"noDeleteOnStaleGet");V(this,"allowStaleOnFetchAbort");V(this,"allowStaleOnFetchRejection");V(this,"ignoreFetchAbort");De(this,cn,void 0);De(this,_i,void 0);De(this,sn,void 0);De(this,Nt,void 0);De(this,Ne,void 0);De(this,rr,void 0);De(this,Ur,void 0);De(this,Kn,void 0);De(this,kn,void 0);De(this,Ri,void 0);De(this,An,void 0);De(this,xi,void 0);De(this,Ni,void 0);De(this,Vr,void 0);De(this,Pi,void 0);De(this,Ia,void 0);De(this,ir,void 0);De(this,Ac,()=>{});De(this,no,()=>{});De(this,rh,()=>{});De(this,Gr,()=>!1);De(this,Ec,e=>{});De(this,pu,(e,n,r)=>{});De(this,ih,(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});V(this,Jse,"LRUCache");const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:f,maxSize:h=0,maxEntrySize:p=0,sizeCalculation:m,fetchMethod:y,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:E,ignoreFetchAbort:k}=e;if(n!==0&&!aa(n))throw new TypeError("max option must be a nonnegative integer");const b=n?qP(n):Array;if(!b)throw new Error("invalid max value: "+n);if(Ae(this,Ai,n),Ae(this,Fr,h),this.maxEntrySize=p||M(this,Fr),this.sizeCalculation=m,this.sizeCalculation){if(!M(this,Fr)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ae(this,hu,y),Ae(this,Ia,!!y),Ae(this,sn,new Map),Ae(this,Nt,new Array(n).fill(void 0)),Ae(this,Ne,new Array(n).fill(void 0)),Ae(this,rr,new b(n)),Ae(this,Ur,new b(n)),Ae(this,Kn,0),Ae(this,kn,0),Ae(this,Ri,GC.create(n)),Ae(this,cn,0),Ae(this,_i,0),typeof l=="function"&&Ae(this,Ei,l),typeof u=="function"?(Ae(this,Ti,u),Ae(this,An,[])):(Ae(this,Ti,void 0),Ae(this,An,void 0)),Ae(this,Pi,!!M(this,Ei)),Ae(this,ir,!!M(this,Ti)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!k,this.maxEntrySize!==0){if(M(this,Fr)!==0&&!aa(M(this,Fr)))throw new TypeError("maxSize must be a positive integer if specified");if(!aa(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Se(this,xm,QP).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=aa(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!aa(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Se(this,nh,jC).call(this)}if(M(this,Ai)===0&&this.ttl===0&&M(this,Fr)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!M(this,Ai)&&!M(this,Fr)){const A="LRU_CACHE_UNBOUNDED";nH(A)&&(JP.add(A),YP("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",A,ek))}}static unsafeExposeInternals(e){return{starts:M(e,Ni),ttls:M(e,Vr),sizes:M(e,xi),keyMap:M(e,sn),keyList:M(e,Nt),valList:M(e,Ne),next:M(e,rr),prev:M(e,Ur),get head(){return M(e,Kn)},get tail(){return M(e,kn)},free:M(e,Ri),isBackgroundFetch:n=>{var r;return Se(r=e,pt,xt).call(r,n)},backgroundFetch:(n,r,i,s)=>{var o;return Se(o=e,mu,Kp).call(o,n,r,i,s)},moveToTail:n=>{var r;return Se(r=e,Tc,Vd).call(r,n)},indexes:n=>{var r;return Se(r=e,us,ca).call(r,n)},rindexes:n=>{var r;return Se(r=e,ds,la).call(r,n)},isStale:n=>{var r;return M(r=e,Gr).call(r,n)}}}get max(){return M(this,Ai)}get maxSize(){return M(this,Fr)}get calculatedSize(){return M(this,_i)}get size(){return M(this,cn)}get fetchMethod(){return M(this,hu)}get dispose(){return M(this,Ei)}get disposeAfter(){return M(this,Ti)}getRemainingTTL(e){return M(this,sn).has(e)?1/0:0}*entries(){for(const e of Se(this,us,ca).call(this))M(this,Ne)[e]!==void 0&&M(this,Nt)[e]!==void 0&&!Se(this,pt,xt).call(this,M(this,Ne)[e])&&(yield[M(this,Nt)[e],M(this,Ne)[e]])}*rentries(){for(const e of Se(this,ds,la).call(this))M(this,Ne)[e]!==void 0&&M(this,Nt)[e]!==void 0&&!Se(this,pt,xt).call(this,M(this,Ne)[e])&&(yield[M(this,Nt)[e],M(this,Ne)[e]])}*keys(){for(const e of Se(this,us,ca).call(this)){const n=M(this,Nt)[e];n!==void 0&&!Se(this,pt,xt).call(this,M(this,Ne)[e])&&(yield n)}}*rkeys(){for(const e of Se(this,ds,la).call(this)){const n=M(this,Nt)[e];n!==void 0&&!Se(this,pt,xt).call(this,M(this,Ne)[e])&&(yield n)}}*values(){for(const e of Se(this,us,ca).call(this))M(this,Ne)[e]!==void 0&&!Se(this,pt,xt).call(this,M(this,Ne)[e])&&(yield M(this,Ne)[e])}*rvalues(){for(const e of Se(this,ds,la).call(this))M(this,Ne)[e]!==void 0&&!Se(this,pt,xt).call(this,M(this,Ne)[e])&&(yield M(this,Ne)[e])}[Symbol.iterator](){return this.entries()}find(e,n={}){for(const r of Se(this,us,ca).call(this)){const i=M(this,Ne)[r],s=Se(this,pt,xt).call(this,i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,M(this,Nt)[r],this))return this.get(M(this,Nt)[r],n)}}forEach(e,n=this){for(const r of Se(this,us,ca).call(this)){const i=M(this,Ne)[r],s=Se(this,pt,xt).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,M(this,Nt)[r],this)}}rforEach(e,n=this){for(const r of Se(this,ds,la).call(this)){const i=M(this,Ne)[r],s=Se(this,pt,xt).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&e.call(n,s,M(this,Nt)[r],this)}}purgeStale(){let e=!1;for(const n of Se(this,ds,la).call(this,{allowStale:!0}))M(this,Gr).call(this,n)&&(this.delete(M(this,Nt)[n]),e=!0);return e}info(e){const n=M(this,sn).get(e);if(n===void 0)return;const r=M(this,Ne)[n],i=Se(this,pt,xt).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const s={value:i};if(M(this,Vr)&&M(this,Ni)){const o=M(this,Vr)[n],a=M(this,Ni)[n];if(o&&a){const c=o-(hl.now()-a);s.ttl=c,s.start=Date.now()}}return M(this,xi)&&(s.size=M(this,xi)[n]),s}dump(){const e=[];for(const n of Se(this,us,ca).call(this,{allowStale:!0})){const r=M(this,Nt)[n],i=M(this,Ne)[n],s=Se(this,pt,xt).call(this,i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;const o={value:s};if(M(this,Vr)&&M(this,Ni)){o.ttl=M(this,Vr)[n];const a=hl.now()-M(this,Ni)[n];o.start=Math.floor(Date.now()-a)}M(this,xi)&&(o.size=M(this,xi)[n]),e.unshift([r,o])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=hl.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){var f,h,p,m,y;if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const u=M(this,ih).call(this,e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(e),this;let d=M(this,cn)===0?void 0:M(this,sn).get(e);if(d===void 0)d=M(this,cn)===0?M(this,kn):M(this,Ri).length!==0?M(this,Ri).pop():M(this,cn)===M(this,Ai)?Se(this,gu,Xp).call(this,!1):M(this,cn),M(this,Nt)[d]=e,M(this,Ne)[d]=n,M(this,sn).set(e,d),M(this,rr)[M(this,kn)]=d,M(this,Ur)[d]=M(this,kn),Ae(this,kn,d),Dh(this,cn)._++,M(this,pu).call(this,d,u,c),c&&(c.set="add"),l=!1;else{Se(this,Tc,Vd).call(this,d);const g=M(this,Ne)[d];if(n!==g){if(M(this,Ia)&&Se(this,pt,xt).call(this,g)){g.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:v}=g;v!==void 0&&!o&&(M(this,Pi)&&((f=M(this,Ei))==null||f.call(this,v,e,"set")),M(this,ir)&&((h=M(this,An))==null||h.push([v,e,"set"])))}else o||(M(this,Pi)&&((p=M(this,Ei))==null||p.call(this,g,e,"set")),M(this,ir)&&((m=M(this,An))==null||m.push([g,e,"set"])));if(M(this,Ec).call(this,d),M(this,pu).call(this,d,u,c),M(this,Ne)[d]=n,c){c.set="replace";const v=g&&Se(this,pt,xt).call(this,g)?g.__staleWhileFetching:g;v!==void 0&&(c.oldValue=v)}}else c&&(c.set="update")}if(i!==0&&!M(this,Vr)&&Se(this,nh,jC).call(this),M(this,Vr)&&(l||M(this,rh).call(this,d,i,s),c&&M(this,no).call(this,c,d)),!o&&M(this,ir)&&M(this,An)){const g=M(this,An);let v;for(;v=g==null?void 0:g.shift();)(y=M(this,Ti))==null||y.call(this,...v)}return this}pop(){var e;try{for(;M(this,cn);){const n=M(this,Ne)[M(this,Kn)];if(Se(this,gu,Xp).call(this,!0),Se(this,pt,xt).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(M(this,ir)&&M(this,An)){const n=M(this,An);let r;for(;r=n==null?void 0:n.shift();)(e=M(this,Ti))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,s=M(this,sn).get(e);if(s!==void 0){const o=M(this,Ne)[s];if(Se(this,pt,xt).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(M(this,Gr).call(this,s))i&&(i.has="stale",M(this,no).call(this,i,s));else return r&&M(this,Ac).call(this,s),i&&(i.has="hit",M(this,no).call(this,i,s)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=M(this,sn).get(e);if(i===void 0||!r&&M(this,Gr).call(this,i))return;const s=M(this,Ne)[i];return Se(this,pt,xt).call(this,s)?s.__staleWhileFetching:s}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:h=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:g,signal:v}=n;if(!M(this,Ia))return g&&(g.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:g});const S={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:p,ignoreFetchAbort:h,status:g,signal:v};let E=M(this,sn).get(e);if(E===void 0){g&&(g.fetch="miss");const k=Se(this,mu,Kp).call(this,e,E,S,m);return k.__returned=k}else{const k=M(this,Ne)[E];if(Se(this,pt,xt).call(this,k)){const N=r&&k.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",N&&(g.returnedStale=!0)),N?k.__staleWhileFetching:k.__returned=k}const b=M(this,Gr).call(this,E);if(!y&&!b)return g&&(g.fetch="hit"),Se(this,Tc,Vd).call(this,E),i&&M(this,Ac).call(this,E),g&&M(this,no).call(this,g,E),k;const A=Se(this,mu,Kp).call(this,e,E,S,m),P=A.__staleWhileFetching!==void 0&&r;return g&&(g.fetch=b?"stale":"refresh",P&&b&&(g.returnedStale=!0)),P?A.__staleWhileFetching:A.__returned=A}}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=n,a=M(this,sn).get(e);if(a!==void 0){const c=M(this,Ne)[a],l=Se(this,pt,xt).call(this,c);return o&&M(this,no).call(this,o,a),M(this,Gr).call(this,a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.delete(e),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(Se(this,Tc,Vd).call(this,a),i&&M(this,Ac).call(this,a),c))}else o&&(o.get="miss")}delete(e){var r,i,s,o;let n=!1;if(M(this,cn)!==0){const a=M(this,sn).get(e);if(a!==void 0)if(n=!0,M(this,cn)===1)this.clear();else{M(this,Ec).call(this,a);const c=M(this,Ne)[a];if(Se(this,pt,xt).call(this,c)?c.__abortController.abort(new Error("deleted")):(M(this,Pi)||M(this,ir))&&(M(this,Pi)&&((r=M(this,Ei))==null||r.call(this,c,e,"delete")),M(this,ir)&&((i=M(this,An))==null||i.push([c,e,"delete"]))),M(this,sn).delete(e),M(this,Nt)[a]=void 0,M(this,Ne)[a]=void 0,a===M(this,kn))Ae(this,kn,M(this,Ur)[a]);else if(a===M(this,Kn))Ae(this,Kn,M(this,rr)[a]);else{const l=M(this,Ur)[a];M(this,rr)[l]=M(this,rr)[a];const u=M(this,rr)[a];M(this,Ur)[u]=M(this,Ur)[a]}Dh(this,cn)._--,M(this,Ri).push(a)}}if(M(this,ir)&&((s=M(this,An))!=null&&s.length)){const a=M(this,An);let c;for(;c=a==null?void 0:a.shift();)(o=M(this,Ti))==null||o.call(this,...c)}return n}clear(){var e,n,r;for(const i of Se(this,ds,la).call(this,{allowStale:!0})){const s=M(this,Ne)[i];if(Se(this,pt,xt).call(this,s))s.__abortController.abort(new Error("deleted"));else{const o=M(this,Nt)[i];M(this,Pi)&&((e=M(this,Ei))==null||e.call(this,s,o,"delete")),M(this,ir)&&((n=M(this,An))==null||n.push([s,o,"delete"]))}}if(M(this,sn).clear(),M(this,Ne).fill(void 0),M(this,Nt).fill(void 0),M(this,Vr)&&M(this,Ni)&&(M(this,Vr).fill(0),M(this,Ni).fill(0)),M(this,xi)&&M(this,xi).fill(0),Ae(this,Kn,0),Ae(this,kn,0),M(this,Ri).length=0,Ae(this,_i,0),Ae(this,cn,0),M(this,ir)&&M(this,An)){const i=M(this,An);let s;for(;s=i==null?void 0:i.shift();)(r=M(this,Ti))==null||r.call(this,...s)}}};Jse=Symbol.toStringTag,Ai=new WeakMap,Fr=new WeakMap,Ei=new WeakMap,Ti=new WeakMap,hu=new WeakMap,cn=new WeakMap,_i=new WeakMap,sn=new WeakMap,Nt=new WeakMap,Ne=new WeakMap,rr=new WeakMap,Ur=new WeakMap,Kn=new WeakMap,kn=new WeakMap,Ri=new WeakMap,An=new WeakMap,xi=new WeakMap,Ni=new WeakMap,Vr=new WeakMap,Pi=new WeakMap,Ia=new WeakMap,ir=new WeakMap,nh=new WeakSet,jC=function(){const e=new Zp(M(this,Ai)),n=new Zp(M(this,Ai));Ae(this,Vr,e),Ae(this,Ni,n),Ae(this,rh,(s,o,a=hl.now())=>{if(n[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){const c=setTimeout(()=>{M(this,Gr).call(this,s)&&this.delete(M(this,Nt)[s])},o+1);c.unref&&c.unref()}}),Ae(this,Ac,s=>{n[s]=e[s]!==0?hl.now():0}),Ae(this,no,(s,o)=>{if(e[o]){const a=e[o],c=n[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();const l=s.now-c;s.remainingTTL=a-l}});let r=0;const i=()=>{const s=hl.now();if(this.ttlResolution>0){r=s;const o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=M(this,sn).get(s);if(o===void 0)return 0;const a=e[o],c=n[o];if(!a||!c)return 1/0;const l=(r||i())-c;return a-l},Ae(this,Gr,s=>{const o=n[s],a=e[s];return!!a&&!!o&&(r||i())-o>a})},Ac=new WeakMap,no=new WeakMap,rh=new WeakMap,Gr=new WeakMap,xm=new WeakSet,QP=function(){const e=new Zp(M(this,Ai));Ae(this,_i,0),Ae(this,xi,e),Ae(this,Ec,n=>{Ae(this,_i,M(this,_i)-e[n]),e[n]=0}),Ae(this,ih,(n,r,i,s)=>{if(Se(this,pt,xt).call(this,r))return 0;if(!aa(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,n),!aa(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),Ae(this,pu,(n,r,i)=>{if(e[n]=r,M(this,Fr)){const s=M(this,Fr)-e[n];for(;M(this,_i)>s;)Se(this,gu,Xp).call(this,!0)}Ae(this,_i,M(this,_i)+e[n]),i&&(i.entrySize=r,i.totalCalculatedSize=M(this,_i))})},Ec=new WeakMap,pu=new WeakMap,ih=new WeakMap,us=new WeakSet,ca=function*({allowStale:e=this.allowStale}={}){if(M(this,cn))for(let n=M(this,kn);!(!Se(this,sh,HC).call(this,n)||((e||!M(this,Gr).call(this,n))&&(yield n),n===M(this,Kn)));)n=M(this,Ur)[n]},ds=new WeakSet,la=function*({allowStale:e=this.allowStale}={}){if(M(this,cn))for(let n=M(this,Kn);!(!Se(this,sh,HC).call(this,n)||((e||!M(this,Gr).call(this,n))&&(yield n),n===M(this,kn)));)n=M(this,rr)[n]},sh=new WeakSet,HC=function(e){return e!==void 0&&M(this,sn).get(M(this,Nt)[e])===e},gu=new WeakSet,Xp=function(e){var s,o;const n=M(this,Kn),r=M(this,Nt)[n],i=M(this,Ne)[n];return M(this,Ia)&&Se(this,pt,xt).call(this,i)?i.__abortController.abort(new Error("evicted")):(M(this,Pi)||M(this,ir))&&(M(this,Pi)&&((s=M(this,Ei))==null||s.call(this,i,r,"evict")),M(this,ir)&&((o=M(this,An))==null||o.push([i,r,"evict"]))),M(this,Ec).call(this,n),e&&(M(this,Nt)[n]=void 0,M(this,Ne)[n]=void 0,M(this,Ri).push(n)),M(this,cn)===1?(Ae(this,Kn,Ae(this,kn,0)),M(this,Ri).length=0):Ae(this,Kn,M(this,rr)[n]),M(this,sn).delete(r),Dh(this,cn)._--,n},mu=new WeakSet,Kp=function(e,n,r,i){const s=n===void 0?void 0:M(this,Ne)[n];if(Se(this,pt,xt).call(this,s))return s;const o=new tm,{signal:a}=r;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});const c={signal:o.signal,options:r,context:i},l=(m,y=!1)=>{const{aborted:g}=o.signal,v=r.ignoreFetchAbort&&m!==void 0;if(r.status&&(g&&!y?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,v&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),g&&!v&&!y)return d(o.signal.reason);const S=h;return M(this,Ne)[n]===h&&(m===void 0?S.__staleWhileFetching?M(this,Ne)[n]=S.__staleWhileFetching:this.delete(e):(r.status&&(r.status.fetchUpdated=!0),this.set(e,m,c.options))),m},u=m=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=m),d(m)),d=m=>{const{aborted:y}=o.signal,g=y&&r.allowStaleOnFetchAbort,v=g||r.allowStaleOnFetchRejection,S=v||r.noDeleteOnFetchRejection,E=h;if(M(this,Ne)[n]===h&&(!S||E.__staleWhileFetching===void 0?this.delete(e):g||(M(this,Ne)[n]=E.__staleWhileFetching)),v)return r.status&&E.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw m},f=(m,y)=>{var v;const g=(v=M(this,hu))==null?void 0:v.call(this,e,s,c);g&&g instanceof Promise&&g.then(S=>m(S===void 0?void 0:S),y),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(m(void 0),r.allowStaleOnFetchAbort&&(m=S=>l(S,!0)))})};r.status&&(r.status.fetchDispatched=!0);const h=new Promise(f).then(l,u),p=Object.assign(h,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(e,p,{...c.options,status:void 0}),n=M(this,sn).get(e)):M(this,Ne)[n]=p,p},pt=new WeakSet,xt=function(e){if(!M(this,Ia))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof tm},oh=new WeakSet,$C=function(e,n){M(this,Ur)[n]=e,M(this,rr)[e]=n},Tc=new WeakSet,Vd=function(e){e!==M(this,kn)&&(e===M(this,Kn)?Ae(this,Kn,M(this,rr)[e]):Se(this,oh,$C).call(this,M(this,Ur)[e],M(this,rr)[e]),Se(this,oh,$C).call(this,M(this,kn),e),Ae(this,kn,e))};let WC=ek;function rH(t){const e=t.match(/^#\$#(\S+)(?:\s+(\S{6})\s+)?(.*)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#name [authKey] keyval*'\nGot `"+t+"`"),null;const n=e[1],r=e[2],i={},s=/(\S+)\s*:\s*"([^"]*)"|(\S+)\s*:\s*(\S+)/g;let o;for(;o=s.exec(e[3]);){const a=o[1]||o[3],c=o[2]||o[4];a in i?console.log(`Invalid message format: duplicate key ${a} detected`):i[a]=c}return{name:n,authKey:r,keyvals:i}}function j1(t){const e=t.match(/^#\$#\*\s(\S+)\s(\S+)\s*:\s*(.+)$|^#\$#:\s(\S+)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#* datatag keyval'\nGot `"+t+"`"),null;const n=e[1]||e[4],r=void 0,i=e[2],s=e[3],o={};return o[i]=s,{name:n,authKey:r,keyvals:o}}function zC(){return(Math.random()+1).toString(36).substring(3,9)}class Ju{constructor(e){V(this,"packageName");V(this,"minVersion",1);V(this,"maxVersion",1);V(this,"packageVersion",0);V(this,"client");this.client=e}handle(e){throw new Error("Method not implemented.")}handleMultiline(e){throw new Error("Method not implemented.")}closeMultiline(e){throw new Error("Method not implemented.")}shutdown(){}send(e,n){e.startsWith(this.packageName)||(e=this.packageName+"-"+e),this.client.sendMcp(e,n)}}class iH extends Ju{constructor(){super(...arguments);V(this,"packageName","mcp-negotiate");V(this,"minVersion",2);V(this,"maxVersion",2)}handle(n){switch(n.name){}}sendNegotiate(){var n,r;for(const i of Object.values(this.client.mcpHandlers)){let s=(n=i.minVersion)==null?void 0:n.toFixed(1),o=(r=i.maxVersion)==null?void 0:r.toFixed(1);this.client.sendMcp("mcp-negotiate-can",{package:i.packageName,"min-version":s,"max-version":o})}this.client.sendCommand("#$#$mcp-negotiate-end")}}class sH extends Ju{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-status")}handle(n){console.log(n),this.client.emit("statustext",n.keyvals.text)}}class oH extends Ju{constructor(n){super(n);V(this,"packageName","dns-org-mud-moo-simpleedit");V(this,"sessions",{});V(this,"clientId");this.clientId=zC()}handle(n){if(n.name==="dns-org-mud-moo-simpleedit-content"){const r={name:n.keyvals.name,reference:n.keyvals.reference,type:n.keyvals.type,contents:[]};this.sessions[n.keyvals["_data-tag"]]=r}else console.log(`Unexpected simpleedit message ${n}`)}handleMultiline(n){"content"in n.keyvals?this.sessions[n.name].contents.push(n.keyvals.content):console.log(`Unexpected simpleedit ML ${n}`)}closeMultiline(n){console.log(`Closing multiline ${n.name}`),this.client.openEditorWindow(this.sessions[n.name])}shutdown(){new BroadcastChannel("editor").postMessage({type:"shutdown"})}}class aH extends Ju{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-getset");V(this,"id",1);V(this,"cache",new WC({max:10}));V(this,"LocalCache",{})}handle(n){switch(n.name){case"dns-com-awns-getset-ack":const r=this.cache.get(n.keyvals.id);if(r===void 0){console.log(`Got ack for unknown id ${n.keyvals.id}`);break}const i=n.keyvals.value;console.log(`Got ${r} = ${i}`),this.LocalCache[r]=i,this.client.emit("getset",r,i);break}}sendGet(n){const r=(this.id++).toString();this.cache.set(r,n),this.client.sendMcp("dns-com-awns-getset-get",{id:r,property:n})}sendSet(n,r){this.client.sendMcp("dns-com-awns-getset-set",{id:this.id++,property:n,value:r})}sendDrop(n){this.client.sendMcp("dns-com-awns-getset-drop",{id:this.id++,property:n})}}class cH extends Ju{constructor(){super(...arguments);V(this,"packageName","dns-com-vmoo-userlist");V(this,"maxVersion",1.1);V(this,"player");V(this,"fields",["Object","Name","Icon"]);V(this,"icons",["Idle","Away","Idle+Away","Friend","Newbie","Inhabitant","Inhabitant+","Schooled","Wizard","Key","Star"]);V(this,"players",[])}handle(n){switch(n.name){case"dns-com-vmoo-userlist-you":this.player=n.keyvals.nr;break}}handleMultiline(n){if("fields"in n.keyvals&&(this.fields=Si(n.keyvals.fields.trim())),"icons"in n.keyvals&&(this.icons=Si(n.keyvals.icons.trim())),"d"in n.keyvals){const s=n.keyvals.d[0];switch(s){case"=":var r=Si(n.keyvals.d.slice(1));this.players=r.map(a=>this.playerFromArray(a));break;case"+":this.players.push(this.playerFromArray(Si(n.keyvals.d.slice(1))));break;case"-":var i=Si(n.keyvals.d.slice(1));this.players=this.players.filter(a=>!i.includes(a.Object));break;case"*":const o=this.playerFromArray(Si(n.keyvals.d.slice(1)));this.updatePlayer(o);break;case"<":i=Si(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!0,this.players[c]=a)});break;case">":i=Si(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!1,this.players[c]=a)});break;case"[":i=Si(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!0,this.players[c]=a)});break;case"]":i=Si(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!1,this.players[c]=a)});break;default:console.log(`Unknown userlist mode ${s} in ${n.keyvals.d}`);break}this.update()}}updatePlayer(n){const r=this.players.findIndex(i=>i.Object===n.Object);r!==-1?this.players[r]=n:this.players.push(n)}update(){this.players.sort((r,i)=>n(i)-n(r)),this.client.emit("userlist",this.players);function n(r){return r.Icon-(r.idle?10:0)-(r.away?20:0)}}playerFromArray(n){const r={};return n.forEach((i,s)=>{r[this.fields[s]]=i}),r.away=!1,r.idle=!1,r}}function Si(t){t=t.slice(1,-1);let e=[],n="",r=0;for(let s=0;s<t.length;s++){const o=t[s];if(o==="{")r++;else if(o==="}")r--;else if(o===","&&r===0){i(),n="";continue}n+=o}return n.length>0&&i(),e;function i(){n=n.trim(),n.startsWith("{")&&n.endsWith("}")?e.push(Si(n)):Number.isNaN(Number(n))?n.startsWith('"')&&n.endsWith('"')?e.push(n.slice(1,-1)):e.push(n):e.push(Number(n))}}class lH extends Ju{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-ping");V(this,"id",1)}handle(n){switch(n.name){case"dns-com-awns-ping":this.send("reply",n.keyvals);break}}ping(){this.send("dns-com-awns-ping",{id:this.id++})}}function uH({onlyFirst:t=!1}={}){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}const dH=uH();function fH(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(dH,"")}var ZC=(t=>(t.Off="off",t.Unfocused="unfocused",t.All="all",t))(ZC||{}),Go=(t=>(t.SetGeneral="SET_GENERAL",t.SetSpeech="SET_SPEECH",t.SetChannels="SET_CHANNELS",t.SetEditorAutocompleteEnabled="SET_EDITOR_AUTOCOMPLETE_ENABLED",t.SetEditorAccessibilityMode="SET_EDITOR_ACCESSIBILITY_MODE",t))(Go||{});class hH{constructor(){V(this,"state");V(this,"listeners",new Set);V(this,"dispatch",e=>{this.state=this.reducer(this.state,e),localStorage.setItem("preferences",JSON.stringify(this.state)),this.listeners.forEach(n=>n())});const e=localStorage.getItem("preferences"),n=this.getInitialPreferences();this.state=e?this.mergePreferences(n,JSON.parse(e)):n}getInitialPreferences(){return{general:{localEcho:!1},speech:{autoreadMode:"off",voice:"",rate:1,pitch:1,volume:1},channels:{sayto:{autoreadMode:"off",notify:!0}},editor:{autocompleteEnabled:!0,accessibilityMode:!0}}}mergePreferences(e,n){return{...e,general:{...e.general,...n.general},speech:{...e.speech,...n.speech},channels:n.channels?{...e.channels,...n.channels}:e.channels,editor:{...e.editor,...n.editor}}}reducer(e,n){switch(n.type){case"SET_GENERAL":return{...e,general:n.data};case"SET_SPEECH":return{...e,speech:n.data};case"SET_CHANNELS":return{...e,channels:n.data};case"SET_EDITOR_AUTOCOMPLETE_ENABLED":return{...e,editor:{...e.editor,autocompleteEnabled:n.data}};case"SET_EDITOR_ACCESSIBILITY_MODE":return{...e,editor:{...e.editor,accessibilityMode:n.data}};default:return e}}getState(){return this.state}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}}const Yl=new hH;class pH extends zN{constructor(n,r){super();V(this,"ws");V(this,"decoder",new TextDecoder("utf8"));V(this,"telnet");V(this,"host");V(this,"port");V(this,"telnetNegotiation",!1);V(this,"telnetBuffer","");V(this,"gmcpHandlers",{});V(this,"mcpHandlers",{});V(this,"mcpMultilines",{});V(this,"mcpAuthKey",null);V(this,"mcp_negotiate");V(this,"mcp_getset");V(this,"gmcp_char");V(this,"worldData",{playerId:"",playerName:"",roomId:"",liveKitTokens:[]});V(this,"cacophony");V(this,"sendCommand",n=>{Yl.getState().general.localEcho&&this.emit("command",n),this.send(n+`\r
`),console.log("> "+n)});this.host=n,this.port=r,this.mcp_negotiate=this.registerMcpPackage(iH),this.mcp_getset=this.registerMcpPackage(aH),this.gmcp_char=this.registerGMCPPackage($V),this.cacophony=new $9}registerGMCPPackage(n){const r=new n(this);return this.gmcpHandlers[r.packageName]=r,console.log("Registered GMCP Package:",r.packageName),r}registerMcpPackage(n){const r=new n(this);return this.mcpHandlers[r.packageName]=r,r}connect(){this.ws=new window.WebSocket(`wss://${this.host}:${this.port}`),this.ws.binaryType="arraybuffer",this.telnet=new jV(new WV(this.ws)),this.ws.onopen=()=>{this.emit("connect")},this.telnet.on("data",n=>{this.handleData(n)}),this.telnet.on("negotiation",(n,r)=>{n===Ud.WILL&&r===Fd.GMCP?(console.log("GMCP Negotiation"),this.telnet.sendNegotiation(Ud.DO,Fd.GMCP),this.gmcpHandlers.Core.sendHello(),this.gmcpHandlers["Core.Supports"].sendSet(),this.gmcpHandlers["Auth.Autologin"].sendLogin()):n===Ud.DO&&r===Fd.TERMINAL_TYPE&&(console.log("TTYPE Negotiation"),this.telnet.sendNegotiation(Ud.WILL,Fd.TERMINAL_TYPE),this.telnet.sendTerminalType("Mongoose React Client"),this.telnet.sendTerminalType("ANSI"),this.telnet.sendTerminalType("PROXY"))}),this.telnet.on("gmcp",(n,r)=>{console.log("GMCP Package:",n,r),this.handleGmcpData(n,r)}),this.ws.onclose=()=>{this.emit("disconnect"),this.mcpAuthKey=null,setTimeout(()=>{this.connect()},1e4)},this.ws.onerror=n=>{this.emit("error",n)}}send(n){this.ws.send(n)}close(){this.ws.close()}handleData(n){const r=this.decoder.decode(n).trimEnd();for(const i of r.split(`
`))i&&i.startsWith("#$#")?this.handleMcp(i):this.emitMessage(i)}handleMcp(n){if(n.startsWith("#$#*")){const i=j1(n.trimEnd());i&&(i.name in this.mcpMultilines?this.mcpMultilines[i.name].handleMultiline(i):console.warn("Received continuation for unknown multiline",i));return}if(n.startsWith("#$#:")){const i=j1(n.trimEnd());i&&(this.mcpMultilines[i.name].closeMultiline(i),delete this.mcpMultilines[i.name]);return}const r=rH(n.trimEnd());if(console.log("MCP Message:",r),(r==null?void 0:r.name.toLowerCase())==="mcp"&&r.authKey==null&&this.mcpAuthKey==null)this.mcpAuthKey=zC(),this.sendCommand(`#$#mcp authentication-key: ${this.mcpAuthKey} version: 2.1 to: 2.1`),this.mcp_negotiate.sendNegotiate();else if((r==null?void 0:r.name)!=="mcp-negotiate-end")if((r==null?void 0:r.authKey)===this.mcpAuthKey){let i=r.name;do{if(i in this.mcpHandlers){this.mcpHandlers[i].handle(r),"_data-tag"in r.keyvals&&(console.log("new multiline "+r.keyvals["_data-tag"]),this.mcpMultilines[r.keyvals["_data-tag"]]=this.mcpHandlers[i]);return}i=i.substring(0,i.lastIndexOf("-"))}while(i);console.log(`No handler for ${r.name}`)}else console.log(`Unexpected authkey "${r==null?void 0:r.authKey}", probably a spoofed message.`)}handleGmcpData(n,r){const i=n.lastIndexOf("."),s=n.substring(0,i),o=n.substring(i+1);console.log("GMCP Message:",s,o,r);const a=this.gmcpHandlers[s];if(!a){console.log("No handler for GMCP package:",s);return}const c=a["handle"+o];c?(console.log("Calling handler:",c),c.call(a,JSON.parse(r))):console.log("No handler on package:",s,o)}emitMessage(n){const r=Yl.getState().speech.autoreadMode;r===ZC.All&&this.speak(n),r===ZC.Unfocused&&!document.hasFocus()&&this.speak(n),this.emit("message",n)}sendGmcp(n,r){console.log("Sending GMCP:",n,r),this.telnet.sendGmcp(n,r)}sendMcp(n,r){if(typeof r=="object"){let s="";for(const[o,a]of Object.entries(r))s+=` ${o}: ${a||'""'}`;r=s}const i=`#$#${n} ${this.mcpAuthKey} ${r}\r
`;this.send(i)}sendMcpMLLine(n,r,i){this.send(`#$#* ${n} ${r}: ${i}\r
`)}closeMcpML(n){this.send(`#$#: ${n}\r
`)}openEditorWindow(n){console.log(n);const r=new BroadcastChannel("editor"),i=n.reference,s=encodeURIComponent(i),o=window.open(`/editor?reference=${s}`,"_blank");r.onmessage=a=>{console.log("editor window message",a),a.data.id===i&&(a.data.type==="ready"?(console.log("sending editor window session",n),r.postMessage({type:"load",session:n})):a.data.type==="save"?(console.log("saving editor window with session",a.data.session),this.saveEditorWindow(a.data.session)):a.data.type==="close"&&(console.log("closing editor window"),r.close(),r.onmessage=null))},o&&o.focus()}saveEditorWindow(n){const r={reference:n.reference,type:n.type};r["content*"]="",this.sendMCPMultiline("dns-org-mud-moo-simpleedit-set",r,n.contents)}sendMCPMultiline(n,r,i){const s=zC();r["_data-tag"]=s,this.sendMcp(n,r);for(const o of i)this.sendMcpMLLine(s,"content",o);this.closeMcpML(s)}shutdown(){Object.values(this.mcpHandlers).forEach(n=>{n.shutdown()}),Object.values(this.gmcpHandlers).forEach(n=>{n.shutdown()})}requestNotificationPermission(){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="default"&&Notification.requestPermission()}sendNotification(n,r){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="granted"&&new Notification(n,{body:r})}speak(n){if(!("speechSynthesis"in window)){console.log("This browser does not support speech synthesis");return}const r=new SpeechSynthesisUtterance(fH(n));r.lang="en-US";const{rate:i,pitch:s,voice:o,volume:a}=Yl.getState().speech;r.rate=i,r.pitch=s,r.volume=a;const l=speechSynthesis.getVoices().find(u=>u.name===o);l&&(r.voice=l),speechSynthesis.speak(r)}cancelSpeech(){speechSynthesis.cancel()}stopAllSounds(){this.gmcpHandlers["Client.Media"].stopAllSounds()}getInput(){var n;return((n=document.getElementById("command-input"))==null?void 0:n.textContent)||""}setInput(n){const r=document.getElementById("command-input");r&&(r.textContent=n)}}class gH{constructor(){V(this,"history",[]);V(this,"currentIndex",null);V(this,"unsentInput","")}addCommand(e){e.trim()!==""&&(this.history.length===0||this.history[this.history.length-1]!==e)&&(this.history.push(e.trim()),this.unsentInput=""),this.currentIndex=null}navigateUp(e){return this.currentIndex===null&&(this.unsentInput=e),this.history.length>0&&(this.currentIndex==null||this.currentIndex>0)?(this.currentIndex=this.currentIndex==null?this.history.length-1:this.currentIndex-1,this.history[this.currentIndex]):this.currentIndex===null?"":this.history[this.currentIndex]}navigateDown(e){return this.currentIndex!==null?this.currentIndex<this.history.length-1?(this.currentIndex++,this.history[this.currentIndex]):(this.currentIndex=null,this.unsentInput):this.unsentInput}getCurrentInput(){return this.currentIndex===null?this.unsentInput:this.history[this.currentIndex]}}const mH=({onSend:t,inputRef:e})=>{const[n,r]=w.useState(""),i=w.useRef(new gH),s=o=>{const a=i.current;if(o.key==="Enter"&&!o.shiftKey)o.preventDefault(),t(n),a.addCommand(n),r("");else if(o.key==="ArrowUp"){o.preventDefault();const c=a.navigateUp(n);r(c)}else if(o.key==="ArrowDown"){o.preventDefault();const c=a.navigateDown(n);r(c)}};return J.jsx("textarea",{value:n,onChange:o=>r(o.target.value),onKeyDown:s,id:"command-input",ref:e,autoFocus:!0})},vH="2527823e41353289757b0d6e834f587bc95f0f46",ic=()=>{const[,t]=w.useReducer(e=>e+1,0);return w.useEffect(()=>Yl.subscribe(t),[]),[Yl.getState(),Yl.dispatch]},yH=()=>{const[t,e]=w.useState([]);return w.useEffect(()=>{const n=()=>{e(window.speechSynthesis.getVoices())};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)},[]),t},CH=({tabs:t})=>{const[e,n]=w.useState(0),r=w.useRef([]);return w.useEffect(()=>{r.current=r.current.slice(0,t.length)},[t]),w.useEffect(()=>{const i=o=>{switch(o.key){case"ArrowLeft":n(a=>a>0?a-1:t.length-1);break;case"ArrowRight":n(a=>a<t.length-1?a+1:0);break}},s=r.current[e];return s==null||s.addEventListener("keydown",i),()=>{s==null||s.removeEventListener("keydown",i)}},[t.length,e]),w.useEffect(()=>{var i;(i=r.current[e])==null||i.focus()},[e]),J.jsxs("div",{children:[J.jsx("div",{role:"tablist","aria-label":"Tabs",children:t.map((i,s)=>J.jsx("button",{ref:o=>r.current[s]=o,role:"tab","aria-selected":e===s,id:`${i.label}-tab`,"aria-controls":`${i.label}-panel`,onClick:()=>n(s),tabIndex:e===s?void 0:-1,children:i.label},s))}),t.map((i,s)=>J.jsx("div",{role:"tabpanel",id:`${i.label}-panel`,"aria-labelledby":`${i.label}-tab`,hidden:e!==s,tabIndex:e===s?0:-1,children:i.content},s))]})},IH=()=>{const[t,e]=ic();return J.jsxs("label",{children:[J.jsx("input",{type:"checkbox",checked:t.general.localEcho,onChange:n=>e({type:Go.SetGeneral,data:{...t.general,localEcho:n.target.checked}})}),"Local Echo"]})},SH=()=>{const[t,e]=ic();return J.jsxs("label",{children:["Auto Read:",J.jsxs("select",{value:t.speech.autoreadMode,onChange:n=>e({type:Go.SetSpeech,data:{...t.speech,autoreadMode:n.target.value}}),children:[J.jsx("option",{value:"off",children:"Off"}),J.jsx("option",{value:"unfocused",children:"Unfocused"}),J.jsx("option",{value:"all",children:"Always"})]})]})},bH=()=>{const[t,e]=ic(),n=yH();return J.jsxs("label",{children:["Voice:",J.jsx("select",{value:t.speech.voice,onChange:r=>e({type:Go.SetSpeech,data:{...t.speech,voice:r.target.value}}),children:n.map(r=>J.jsx("option",{value:r.name,children:r.name},r.voiceURI))})]})},wH=()=>{const[t,e]=ic();return J.jsxs("label",{children:["Rate (0.1 - 10.0):",J.jsx("input",{type:"range",min:"0.1",max:"10.0",step:"0.1",value:t.speech.rate,onChange:n=>e({type:Go.SetSpeech,data:{...t.speech,rate:parseFloat(n.target.value)}})})]})},kH=()=>{const[t,e]=ic();return J.jsxs("label",{children:["Pitch (0 - 2):",J.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:t.speech.pitch,onChange:n=>e({type:Go.SetSpeech,data:{...t.speech,pitch:parseFloat(n.target.value)}})})]})},AH=()=>{const[t,e]=ic();return J.jsxs("label",{children:["Volume (0 - 1):",J.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.speech.volume,onChange:n=>e({type:Go.SetSpeech,data:{...t.speech,volume:parseFloat(n.target.value)}})})]})},EH=()=>J.jsxs("div",{children:[J.jsx(SH,{}),J.jsx("br",{}),J.jsx(bH,{}),J.jsx("br",{}),J.jsx(wH,{}),J.jsx("br",{}),J.jsx(kH,{}),J.jsx("br",{}),J.jsx(AH,{}),J.jsx("br",{})]}),TH=()=>{const[t,e]=ic(),n=t.editor,r=s=>{e({type:Go.SetEditorAutocompleteEnabled,data:s.target.checked})},i=s=>{e({type:Go.SetEditorAccessibilityMode,data:s.target.checked})};return J.jsxs("div",{children:[J.jsxs("label",{children:[J.jsx("input",{type:"checkbox",checked:n.autocompleteEnabled,onChange:r}),"Enable Autocomplete"]}),J.jsx("br",{}),J.jsxs("label",{children:[J.jsx("input",{type:"checkbox",checked:n.accessibilityMode,onChange:i}),"Enable Accessibility Mode"]}),J.jsx("br",{})]})},_H=()=>{const t=[{label:"General",content:J.jsx(IH,{})},{label:"Speech",content:J.jsx(EH,{})},{label:"Editor",content:J.jsx(TH,{})}];return J.jsx(CH,{tabs:t})};function RH(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Ff(){return Ff=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ff.apply(this,arguments)}var XC="data-focus-lock",eM="data-focus-lock-disabled",xH="data-no-focus-lock",NH="data-autofocus-inside",PH="data-no-autofocus";function Wy(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function MH(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var H1=new WeakMap;function OH(t,e){var n=MH(e||null,function(r){return t.forEach(function(i){return Wy(i,r)})});return w.useLayoutEffect(function(){var r=H1.get(n);if(r){var i=new Set(r),s=new Set(t),o=n.current;i.forEach(function(a){s.has(a)||Wy(a,null)}),s.forEach(function(a){i.has(a)||Wy(a,o)})}H1.set(n,t)},[t]),n}var jy={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},KC=function(t,e){return KC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},KC(t,e)};function Yu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");KC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var JC=function(){return JC=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},JC.apply(this,arguments)};function DH(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function tM(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Eu(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function YC(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function qC(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))}function ql(t){return this instanceof ql?(this.v=t,this):new ql(t)}function LH(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,m){s.push([f,h,p,m])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(s[0][3],p)}}function c(f){f.value instanceof ql?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function BH(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Eu=="function"?Eu(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function nM(t){return t}function rM(t,e){e===void 0&&(e=nM);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(s){var o=e(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var u=o;o=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return i}function Db(t,e){return e===void 0&&(e=nM),rM(t,e)}function FH(t){t===void 0&&(t={});var e=rM(null);return e.options=JC({async:!0,ssr:!1},t),e}var iM=Db({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),sM=Db(),UH=Db(),VH=FH({async:!0}),GH=[],oM=w.forwardRef(function(e,n){var r,i=w.useState(),s=i[0],o=i[1],a=w.useRef(),c=w.useRef(!1),l=w.useRef(null),u=e.children,d=e.disabled,f=d===void 0?!1:d,h=e.noFocusGuards,p=h===void 0?!1:h,m=e.persistentFocus,y=m===void 0?!1:m,g=e.crossFrame,v=g===void 0?!0:g,S=e.autoFocus,E=S===void 0?!0:S;e.allowTextSelection;var k=e.group,b=e.className,A=e.whiteList,_=e.hasPositiveIndices,P=e.shards,N=P===void 0?GH:P,O=e.as,D=O===void 0?"div":O,U=e.lockProps,G=U===void 0?{}:U,z=e.sideCar,$=e.returnFocus,q=$===void 0?!1:$,j=e.focusOptions,X=e.onActivation,re=e.onDeactivation,Z=w.useState({}),ie=Z[0],ke=w.useCallback(function(){l.current=l.current||document&&document.activeElement,a.current&&X&&X(a.current),c.current=!0},[X]),Ee=w.useCallback(function(){c.current=!1,re&&re(a.current)},[re]);w.useEffect(function(){f||(l.current=null)},[]);var ge=w.useCallback(function(ut){var Ut=l.current;if(Ut&&Ut.focus){var ce=typeof q=="function"?q(Ut):q;if(ce){var Ce=typeof ce=="object"?ce:void 0;l.current=null,ut?Promise.resolve().then(function(){return Ut.focus(Ce)}):Ut.focus(Ce)}}},[q]),Te=w.useCallback(function(ut){c.current&&iM.useMedium(ut)},[]),Qe=sM.useMedium,ae=w.useCallback(function(ut){a.current!==ut&&(a.current=ut,o(ut))},[]),nn=Ff((r={},r[eM]=f&&"disabled",r[XC]=k,r),G),In=p!==!0,Ct=In&&p!=="tail",an=OH([n,ae]);return w.createElement(w.Fragment,null,In&&[w.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:f?-1:0,style:jy}),_?w.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:f?-1:1,style:jy}):null],!f&&w.createElement(z,{id:ie,sideCar:VH,observed:s,disabled:f,persistentFocus:y,crossFrame:v,autoFocus:E,whiteList:A,shards:N,onActivation:ke,onDeactivation:Ee,returnFocus:ge,focusOptions:j}),w.createElement(D,Ff({ref:an},nn,{className:b,onBlur:Qe,onFocus:Te}),u),Ct&&w.createElement("div",{"data-focus-guard":!0,tabIndex:f?-1:0,style:jy}))});oM.propTypes={};const aM=oM;function QC(t,e){return QC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},QC(t,e)}function WH(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,QC(t,e)}function Uf(t){"@babel/helpers - typeof";return Uf=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Uf(t)}function jH(t,e){if(Uf(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Uf(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function HH(t){var e=jH(t,"string");return Uf(e)=="symbol"?e:String(e)}function $H(t,e,n){return e=HH(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zH(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var s=[],o;function a(){o=t(s.map(function(l){return l.props})),e(o)}var c=function(l){WH(u,l);function u(){return l.apply(this,arguments)||this}u.peek=function(){return o};var d=u.prototype;return d.componentDidMount=function(){s.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var h=s.indexOf(this);s.splice(h,1),a()},d.render=function(){return mt.createElement(i,this.props)},u}(w.PureComponent);return $H(c,"displayName","SideEffect("+n(i)+")"),c}}var zs=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},nm=function(t){return Array.isArray(t)?t:[t]},cM=function(t){return Array.isArray(t)?t[0]:t},ZH=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},lM=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},uM=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},XH=function(t,e){return!t||uM(t)||!ZH(t)&&e(lM(t))},dM=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=XH(e,dM.bind(void 0,t));return t.set(e,r),r},KH=function(t,e){return t&&!uM(t)?qH(t)?e(lM(t)):!1:!0},fM=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=KH(e,fM.bind(void 0,t));return t.set(e,r),r},hM=function(t){return t.dataset},JH=function(t){return t.tagName==="BUTTON"},pM=function(t){return t.tagName==="INPUT"},gM=function(t){return pM(t)&&t.type==="radio"},YH=function(t){return!((pM(t)||JH(t))&&(t.type==="hidden"||t.disabled))},qH=function(t){var e=t.getAttribute(PH);return![!0,"true",""].includes(e)},Lb=function(t){var e;return!!(t&&(!((e=hM(t))===null||e===void 0)&&e.focusGuard))},rm=function(t){return!Lb(t)},QH=function(t){return!!t},e$=function(t,e){var n=t.tabIndex-e.tabIndex,r=t.index-e.index;if(n){if(!t.tabIndex)return 1;if(!e.tabIndex)return-1}return n||r},mM=function(t,e,n){return zs(t).map(function(r,i){return{node:r,index:i,tabIndex:n&&r.tabIndex===-1?(r.dataset||{}).focusGuard?0:-1:r.tabIndex}}).filter(function(r){return!e||r.tabIndex>=0}).sort(e$)},t$=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],Bb=t$.join(","),n$="".concat(Bb,", [data-focus-guard]"),vM=function(t,e){return zs((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?n$:Bb)?[r]:[],vM(r))},[])},r$=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?av([t.contentDocument.body],e):[t]},av=function(t,e){return t.reduce(function(n,r){var i,s=vM(r,e),o=(i=[]).concat.apply(i,s.map(function(a){return r$(a,e)}));return n.concat(o,r.parentNode?zs(r.parentNode.querySelectorAll(Bb)).filter(function(a){return a===r}):[])},[])},i$=function(t){var e=t.querySelectorAll("[".concat(NH,"]"));return zs(e).map(function(n){return av([n])}).reduce(function(n,r){return n.concat(r)},[])},Fb=function(t,e){return zs(t).filter(function(n){return dM(e,n)}).filter(function(n){return YH(n)})},$1=function(t,e){return e===void 0&&(e=new Map),zs(t).filter(function(n){return fM(e,n)})},eI=function(t,e,n){return mM(Fb(av(t,n),e),!0,n)},z1=function(t,e){return mM(Fb(av(t),e),!1)},s$=function(t,e){return Fb(i$(t),e)},Ql=function(t,e){return t.shadowRoot?Ql(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:zs(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?Ql(i,e):!1}return Ql(n,e)})},o$=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var s=t[r].compareDocumentPosition(t[i]);(s&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(s&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(o,a){return!e.has(a)})},yM=function(t){return t.parentNode?yM(t.parentNode):t},Ub=function(t){var e=nm(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(XC);return n.push.apply(n,i?o$(zs(yM(r).querySelectorAll("[".concat(XC,'="').concat(i,'"]:not([').concat(eM,'="disabled"])')))):[r]),n},[])},a$=function(t){try{return t()}catch{return}},Vf=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?Vf(e.shadowRoot):e instanceof HTMLIFrameElement&&a$(function(){return e.contentWindow.document})?Vf(e.contentWindow.document):e}},c$=function(t,e){return t===e},l$=function(t,e){return!!zs(t.querySelectorAll("iframe")).some(function(n){return c$(n,e)})},CM=function(t,e){return e===void 0&&(e=Vf(cM(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:Ub(t).some(function(n){return Ql(n,e)||l$(n,e)})},u$=function(t){t===void 0&&(t=document);var e=Vf(t);return e?zs(t.querySelectorAll("[".concat(xH,"]"))).some(function(n){return Ql(n,e)}):!1},d$=function(t,e){return e.filter(gM).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},Vb=function(t,e){return gM(t)&&t.name?d$(t,e):t},f$=function(t){var e=new Set;return t.forEach(function(n){return e.add(Vb(n,t))}),t.filter(function(n){return e.has(n)})},Z1=function(t){return t[0]&&t.length>1?Vb(t[0],t):t[0]},X1=function(t,e){return t.length>1?t.indexOf(Vb(t[e],t)):e},IM="NEW_FOCUS",h$=function(t,e,n,r){var i=t.length,s=t[0],o=t[i-1],a=Lb(n);if(!(n&&t.indexOf(n)>=0)){var c=n!==void 0?e.indexOf(n):-1,l=r?e.indexOf(r):c,u=r?t.indexOf(r):-1,d=c-l,f=e.indexOf(s),h=e.indexOf(o),p=f$(e),m=n!==void 0?p.indexOf(n):-1,y=m-(r?p.indexOf(r):c),g=X1(t,0),v=X1(t,i-1);if(c===-1||u===-1)return IM;if(!d&&u>=0)return u;if(c<=f&&a&&Math.abs(d)>1)return v;if(c>=h&&a&&Math.abs(d)>1)return g;if(d&&Math.abs(y)>1)return u;if(c<=f)return v;if(c>h)return g;if(d)return Math.abs(d)>1?u:(i+u+d)%i}},p$=function(t){return function(e){var n,r=(n=hM(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},g$=function(t,e,n){var r=t.map(function(s){var o=s.node;return o}),i=$1(r.filter(p$(n)));return i&&i.length?Z1(i):Z1($1(e))},tI=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&tI(t.parentNode.host||t.parentNode,e),e},Hy=function(t,e){for(var n=tI(t),r=tI(e),i=0;i<n.length;i+=1){var s=n[i];if(r.indexOf(s)>=0)return s}return!1},SM=function(t,e,n){var r=nm(t),i=nm(e),s=r[0],o=!1;return i.filter(Boolean).forEach(function(a){o=Hy(o||a,a)||o,n.filter(Boolean).forEach(function(c){var l=Hy(s,c);l&&(!o||Ql(l,o)?o=l:o=Hy(l,o))})}),o},m$=function(t,e){return t.reduce(function(n,r){return n.concat(s$(r,e))},[])},v$=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(QH)},y$=function(t,e){var n=Vf(nm(t).length>0?document:cM(t).ownerDocument),r=Ub(t).filter(rm),i=SM(n||t,t,r),s=new Map,o=z1(r,s),a=eI(r,s).filter(function(h){var p=h.node;return rm(p)});if(!(!a[0]&&(a=o,!a[0]))){var c=z1([i],s).map(function(h){var p=h.node;return p}),l=v$(c,a),u=l.map(function(h){var p=h.node;return p}),d=h$(u,c,n,e);if(d===IM){var f=g$(o,u,m$(r,s));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return d===void 0?d:l[d]}},C$=function(t){var e=Ub(t).filter(rm),n=SM(t,t,e),r=new Map,i=eI([n],r,!0),s=eI(e,r).filter(function(o){var a=o.node;return rm(a)}).map(function(o){var a=o.node;return a});return i.map(function(o){var a=o.node,c=o.index;return{node:a,index:c,lockItem:s.indexOf(a)>=0,guard:Lb(a)}})},I$=function(t,e){"focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus()},$y=0,zy=!1,bM=function(t,e,n){n===void 0&&(n={});var r=y$(t,e);if(!zy&&r){if($y>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),zy=!0,setTimeout(function(){zy=!1},1);return}$y++,I$(r.node,n.focusOptions),$y--}};function Gb(t){setTimeout(t,1)}var S$=function(){return document&&document.activeElement===document.body},b$=function(){return S$()||u$()},eu=null,Bl=null,tu=null,Gf=!1,w$=function(){return!0},k$=function(e){return(eu.whiteList||w$)(e)},A$=function(e,n){tu={observerNode:e,portaledElement:n}},E$=function(e){return tu&&tu.portaledElement===e};function K1(t,e,n,r){var i=null,s=t;do{var o=r[s];if(o.guard)o.node.dataset.focusAutoGuard&&(i=o);else if(o.lockItem){if(s!==t)return;i=null}else break}while((s+=n)!==e);i&&(i.node.tabIndex=0)}var T$=function(e){return e&&"current"in e?e.current:e},_$=function(e){return e?!!Gf:Gf==="meanwhile"},R$=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},x$=function(e,n){return n.some(function(r){return R$(e,r,r)})},im=function(){var e=!1;if(eu){var n=eu,r=n.observed,i=n.persistentFocus,s=n.autoFocus,o=n.shards,a=n.crossFrame,c=n.focusOptions,l=r||tu&&tu.portaledElement,u=document&&document.activeElement;if(l){var d=[l].concat(o.map(T$).filter(Boolean));if((!u||k$(u))&&(i||_$(a)||!b$()||!Bl&&s)&&(l&&!(CM(d)||u&&x$(u,d)||E$(u))&&(document&&!Bl&&u&&!s?(u.blur&&u.blur(),document.body.focus()):(e=bM(d,Bl,{focusOptions:c}),tu={})),Gf=!1,Bl=document&&document.activeElement),document){var f=document&&document.activeElement,h=C$(d),p=h.map(function(m){var y=m.node;return y}).indexOf(f);p>-1&&(h.filter(function(m){var y=m.guard,g=m.node;return y&&g.dataset.focusAutoGuard}).forEach(function(m){var y=m.node;return y.removeAttribute("tabIndex")}),K1(p,h.length,1,h),K1(p,-1,-1,h))}}}return e},wM=function(e){im()&&e&&(e.stopPropagation(),e.preventDefault())},Wb=function(){return Gb(im)},N$=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||A$(r,n)},P$=function(){return null},kM=function(){Gf="just",Gb(function(){Gf="meanwhile"})},M$=function(){document.addEventListener("focusin",wM),document.addEventListener("focusout",Wb),window.addEventListener("blur",kM)},O$=function(){document.removeEventListener("focusin",wM),document.removeEventListener("focusout",Wb),window.removeEventListener("blur",kM)};function D$(t){return t.filter(function(e){var n=e.disabled;return!n})}function L$(t){var e=t.slice(-1)[0];e&&!eu&&M$();var n=eu,r=n&&e&&e.id===n.id;eu=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var s=i.id;return s===n.id}).length||n.returnFocus(!e)),e?(Bl=null,(!r||n.observed!==e.observed)&&e.onActivation(),im(),Gb(im)):(O$(),Bl=null)}iM.assignSyncMedium(N$);sM.assignMedium(Wb);UH.assignMedium(function(t){return t({moveFocusInside:bM,focusInside:CM})});const B$=zH(D$,L$)(P$);var AM=w.forwardRef(function(e,n){return w.createElement(aM,Ff({sideCar:B$,ref:n},e))}),EM=aM.propTypes||{};EM.sideCar;RH(EM,["sideCar"]);AM.propTypes={};const F$=AM,U$=mt.forwardRef((t,e)=>{const[n,r]=w.useState(!1),i=w.useRef(null);return mt.useImperativeHandle(e,()=>({open(){r(!0)},close(){r(!1)}})),w.useEffect(()=>{var s;n&&((s=i.current)==null||s.focus())},[n]),w.useEffect(()=>{const s=o=>{o.key==="Escape"&&r(!1)};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[]),J.jsx(F$,{disabled:!n,children:J.jsxs("dialog",{className:"preferences-dialog",open:n,ref:i,tabIndex:-1,"aria-label":"Preferences",children:[J.jsx("h1",{style:{color:"white",textAlign:"center",fontSize:"1.5em",padding:"0.5em",margin:"0.5em",border:"1px solid black",borderRadius:"0.5em",backgroundColor:"black"},children:"Preferences"}),n&&J.jsx(_H,{}),J.jsx("button",{onClick:()=>r(!1),children:"Close"}),J.jsx("br",{}),J.jsxs("span",{id:"commit-hash",children:["Version: ",vH]})]})})});var TM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},J1=mt.createContext&&mt.createContext(TM),Va=function(){return Va=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Va.apply(this,arguments)},V$=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n};function _M(t){return t&&t.map(function(e,n){return mt.createElement(e.tag,Va({key:n},e.attr),_M(e.child))})}function tl(t){return function(e){return mt.createElement(G$,Va({attr:Va({},t.attr)},e),_M(t.child))}}function G$(t){var e=function(n){var r=t.attr,i=t.size,s=t.title,o=V$(t,["attr","size","title"]),a=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),mt.createElement("svg",Va({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:Va(Va({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&mt.createElement("title",null,s),t.children)};return J1!==void 0?mt.createElement(J1.Consumer,null,function(n){return e(n)}):e(TM)}function W$(t){return tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(t)}function j$(t){return tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(t)}function H$(t){return tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"}}]})(t)}function RM(t){return tl({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(t)}function $$(t){return tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"}}]})(t)}function z$(t){return tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"}}]})(t)}function Z$(t){return tl({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}}]})(t)}const X$=({client:t,onClearLog:e,onSaveLog:n,onToggleUsers:r,onOpenPrefs:i})=>{const[s,o]=mt.useState(t.cacophony.muted);return J.jsxs("div",{className:"toolbar",children:[J.jsxs("button",{onClick:n,accessKey:"l",children:[J.jsx(RM,{}),"Save Log"]}),J.jsxs("button",{onClick:e,accessKey:"c",children:[J.jsx(H$,{}),"Clear Log"]}),J.jsxs("button",{onClick:i,accessKey:"p",children:[J.jsx(W$,{}),"Preferences"]}),J.jsxs("button",{onClick:()=>{o(!s),t.cacophony.muted=!s},accessKey:"m",children:[s?J.jsx(Z$,{}):J.jsx(z$,{}),s?"Unmute":"Mute"]}),J.jsx("button",{onClick:r,accessKey:"u",children:"Show/Hide Users"}),J.jsxs("label",{children:["Volume",J.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>t.cacophony.setGlobalVolume(Number(a.target.value)/100)})]})]})};class K$ extends mt.Component{constructor(e){super(e),this.state={statusText:"Not connected"},e.client.on("statustext",n=>this.setState({statusText:n})),e.client.on("connect",()=>this.setState({statusText:"Connected"})),e.client.on("disconnect",()=>this.setState({statusText:"Disconnected"}))}render(){return J.jsx("div",{className:"statusbar",children:this.state.statusText})}}const J$=({users:t})=>J.jsxs("div",{className:"sidebar",children:[J.jsx("div",{className:"sidebar-header",role:"heading","aria-level":2,children:"Connected Players"}),J.jsx("div",{className:"sidebar-content",children:J.jsx("ul",{children:t.map(e=>{let n="";return e.away&&(n+=" away"),e.idle&&(n+=" idle"),J.jsx("li",{className:n,children:e.Name},e.Object)})})})]});var Y1={};function Y$(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var q$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Q$(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var xM={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(q$,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function s(m,y){var g=m[y];if(typeof g.bind=="function")return g.bind(m);try{return Function.prototype.bind.call(g,m)}catch{return function(){return Function.prototype.apply.apply(g,[m,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?o:console[m]!==void 0?s(console,m):console.log!==void 0?s(console,"log"):e}function c(m,y){for(var g=0;g<i.length;g++){var v=i[g];this[v]=g<m?e:this.methodFactory(v,m,y)}this.log=this.debug}function l(m,y,g){return function(){typeof console!==n&&(c.call(this,y,g),this[m].apply(this,arguments))}}function u(m,y,g){return a(m)||l.apply(this,arguments)}function d(m,y,g){var v=this,S;y=y??"WARN";var E="loglevel";typeof m=="string"?E+=":"+m:typeof m=="symbol"&&(E=void 0);function k(P){var N=(i[P]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=N;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+N+";"}catch{}}}function b(){var P;if(!(typeof window===n||!E)){try{P=window.localStorage[E]}catch{}if(typeof P===n)try{var N=window.document.cookie,O=N.indexOf(encodeURIComponent(E)+"=");O!==-1&&(P=/^([^;]+)/.exec(N.slice(O))[1])}catch{}return v.levels[P]===void 0&&(P=void 0),P}}function A(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E);return}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=g||u,v.getLevel=function(){return S},v.setLevel=function(P,N){if(typeof P=="string"&&v.levels[P.toUpperCase()]!==void 0&&(P=v.levels[P.toUpperCase()]),typeof P=="number"&&P>=0&&P<=v.levels.SILENT){if(S=P,N!==!1&&k(P),c.call(v,P,m),typeof console===n&&P<v.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+P},v.setDefaultLevel=function(P){y=P,b()||v.setLevel(P,!1)},v.resetLevel=function(){v.setLevel(y,!1),A()},v.enableAll=function(P){v.setLevel(v.levels.TRACE,P)},v.disableAll=function(P){v.setLevel(v.levels.SILENT,P)};var _=b();_==null&&(_=y),v.setLevel(_,!1)}var f=new d,h={};f.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var g=h[y];return g||(g=h[y]=new d(y,f.getLevel(),f.methodFactory)),g};var p=typeof window!==n?window.log:void 0;return f.noConflict=function(){return typeof window!==n&&window.log===f&&(window.log=p),f},f.getLoggers=function(){return h},f.default=f,f})})(xM);var jb=xM.exports,nI;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(nI||(nI={}));var Gs;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Gs||(Gs={}));let He=jb.getLogger("livekit");He.setDefaultLevel(nI.info);function Wo(t){const e=jb.getLogger(t);return e.setDefaultLevel(He.getLevel()),e}jb.getLogger("lk-e2ee");function Ar(t,e){if(!t)throw new Error(e)}const e8=34028234663852886e22,t8=-34028234663852886e22,n8=4294967295,r8=2147483647,i8=-2147483648;function Jp(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>r8||t<i8)throw new Error("invalid int 32: "+t)}function rI(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>n8||t<0)throw new Error("invalid uint 32: "+t)}function NM(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>e8||t<t8))throw new Error("invalid float 32: "+t)}const PM=Symbol("@bufbuild/protobuf/enum-type");function s8(t){const e=t[PM];return Ar(e,"missing enum type on enum object"),e}function MM(t,e,n,r){t[PM]=OM(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function OM(t,e,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of e){const a=DM(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:t,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function o8(t,e,n){const r={};for(const i of e){const s=DM(i);r[s.localName]=s.no,r[s.no]=s.localName}return MM(r,t,e),r}function DM(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class pe{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(e),e.byteLength,s),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,e,s,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function a8(t,e,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),o={[s]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new pe),Object.assign(o,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new o().fromBinary(a,c)},fromJson(a,c){return new o().fromJson(a,c)},fromJsonString(a,c){return new o().fromJsonString(a,c)},equals(a,c){return t.util.equals(o,a,c)}}),o}function c8(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makeMessageType(i,s,o){return a8(this,i,s,o)},makeEnum:o8,makeEnumType:OM,getEnumType:s8}}var ne;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(ne||(ne={}));var Vc;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Vc||(Vc={}));function l8(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Zy(t,e,n){for(let s=0;s<28;s=s+7){const o=t>>>s,a=!(!(o>>>7)&&e==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=e>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const Yp=4294967296;function q1(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const c=Number(t.slice(o,a));i*=n,r=r*n+c,r>=Yp&&(i=i+(r/Yp|0),r=r%Yp)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),e?BM(r,i):Hb(r,i)}function u8(t,e){let n=Hb(t,e);const r=n.hi&2147483648;r&&(n=BM(n.lo,n.hi));const i=LM(n.lo,n.hi);return r?"-"+i:i}function LM(t,e){if({lo:t,hi:e}=d8(t,e),e<=2097151)return String(Yp*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const c=1e7;return s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c),a.toString()+Q1(o)+Q1(s)}function d8(t,e){return{lo:t>>>0,hi:e>>>0}}function Hb(t,e){return{lo:t|0,hi:e|0}}function BM(t,e){return e=~e,t?t=~t+1:e+=1,Hb(t,e)}const Q1=t=>{const e=String(t);return"0000000".slice(e.length)+e};function eE(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function f8(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function h8(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof Y1!="object"||Y1.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>s||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<o)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>Ar(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>Ar(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),q1(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),q1(i)},dec(i,s){return u8(i,s)},uDec(i,s){return LM(i,s)}}}const Le=h8();var qt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(qt||(qt={}));class p8{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(rI(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Jp(e),eE(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){NM(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){rI(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Jp(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Jp(e),e=(e<<1^e>>31)>>>0,eE(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Le.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Le.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Le.enc(e);return Zy(n.lo,n.hi,this.buf),this}sint64(e){let n=Le.enc(e),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return Zy(i,s,this.buf),this}uint64(e){let n=Le.uEnc(e);return Zy(n.lo,n.hi,this.buf),this}}class g8{constructor(e,n){this.varint64=l8,this.uint32=f8,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case qt.Varint:for(;this.buf[this.pos++]&128;);break;case qt.Bit64:this.pos+=4;case qt.Bit32:this.pos+=4;break;case qt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case qt.StartGroup:let i;for(;(i=this.tag()[1])!==qt.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Le.dec(...this.varint64())}uint64(){return Le.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Le.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Le.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Le.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function iI(t,e){return e instanceof pe||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}ne.DOUBLE,ne.FLOAT,ne.INT64,ne.UINT64,ne.INT32,ne.UINT32,ne.BOOL,ne.STRING,ne.BYTES;function ra(t,e,n){if(e===n)return!0;if(t==ne.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return e==n}return!1}function sI(t,e){switch(t){case ne.BOOL:return!1;case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return e==0?Le.zero:"0";case ne.DOUBLE:case ne.FLOAT:return 0;case ne.BYTES:return new Uint8Array(0);case ne.STRING:return"";default:return 0}}function FM(t,e){const n=e===void 0;let r=qt.Varint,i=e===0;switch(t){case ne.STRING:i=n||!e.length,r=qt.LengthDelimited;break;case ne.BOOL:i=e===!1;break;case ne.DOUBLE:r=qt.Bit64;break;case ne.FLOAT:r=qt.Bit32;break;case ne.INT64:i=n||e==0;break;case ne.UINT64:i=n||e==0;break;case ne.FIXED64:i=n||e==0,r=qt.Bit64;break;case ne.BYTES:i=n||!e.byteLength,r=qt.LengthDelimited;break;case ne.FIXED32:r=qt.Bit32;break;case ne.SFIXED32:r=qt.Bit32;break;case ne.SFIXED64:i=n||e==0,r=qt.Bit64;break;case ne.SINT64:i=n||e==0;break}const s=ne[t].toLowerCase();return[r,s,n||i]}const pl=Symbol("@bufbuild/protobuf/unknown-fields"),tE={readUnknownFields:!0,readerFactory:t=>new g8(t)},nE={writeUnknownFields:!0,writerFactory:()=>new p8};function m8(t){return t?Object.assign(Object.assign({},tE),t):tE}function v8(t){return t?Object.assign(Object.assign({},nE),t):nE}function y8(){return{makeReadOptions:m8,makeWriteOptions:v8,listUnknownFields(t){var e;return(e=t[pl])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[pl]},writeUnknownFields(t,e){const r=t[pl];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[pl])||(i[pl]=[]),i[pl].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r){const i=t.getType(),s=n===void 0?e.len:e.pos+n;for(;e.pos<s;){const[o,a]=e.tag(),c=i.fields.find(o);if(!c){const f=e.skip(a);r.readUnknownFields&&this.onUnknownField(t,o,a,f);continue}let l=t,u=c.repeated,d=c.localName;switch(c.oneof&&(l=l[c.oneof.localName],l.case!=d&&delete l.value,l.case=d,d="value"),c.kind){case"scalar":case"enum":const f=c.kind=="enum"?ne.INT32:c.T;let h=sm;if(c.kind=="scalar"&&c.L>0&&(h=I8),u){let g=l[d];if(a==qt.LengthDelimited&&f!=ne.STRING&&f!=ne.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)g.push(h(e,f))}else g.push(h(e,f))}else l[d]=h(e,f);break;case"message":const p=c.T;u?l[d].push(qp(e,new p,r)):l[d]instanceof pe?qp(e,l[d],r):(l[d]=qp(e,new p,r),p.fieldWrapper&&!c.oneof&&!c.repeated&&(l[d]=p.fieldWrapper.unwrapField(l[d])));break;case"map":let[m,y]=C8(c,e,r);l[d][m]=y;break}}}}}function qp(t,e,n){return e.getType().runtime.bin.readMessage(e,t,t.uint32(),n),e}function C8(t,e,n){const r=e.uint32(),i=e.pos+r;let s,o;for(;e.pos<i;){let[a]=e.tag();switch(a){case 1:s=sm(e,t.K);break;case 2:switch(t.V.kind){case"scalar":o=sm(e,t.V.T);break;case"enum":o=e.int32();break;case"message":o=qp(e,new t.V.T,n);break}break}}if(s===void 0){let a=sI(t.K,Vc.BIGINT);s=t.K==ne.BOOL?a.toString():a}if(typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(t.V.kind){case"scalar":o=sI(t.V.T,Vc.BIGINT);break;case"enum":o=0;break;case"message":o=new t.V.T;break}return[s,o]}function I8(t,e){const n=sm(t,e);return typeof n=="bigint"?n.toString():n}function sm(t,e){switch(e){case ne.STRING:return t.string();case ne.BOOL:return t.bool();case ne.DOUBLE:return t.double();case ne.FLOAT:return t.float();case ne.INT32:return t.int32();case ne.INT64:return t.int64();case ne.UINT64:return t.uint64();case ne.FIXED64:return t.fixed64();case ne.BYTES:return t.bytes();case ne.FIXED32:return t.fixed32();case ne.SFIXED32:return t.sfixed32();case ne.SFIXED64:return t.sfixed64();case ne.SINT64:return t.sint64();case ne.UINT32:return t.uint32();case ne.SINT32:return t.sint32()}}function S8(t,e,n,r,i){t.tag(n.no,qt.LengthDelimited),t.fork();let s=r;switch(n.K){case ne.INT32:case ne.FIXED32:case ne.UINT32:case ne.SFIXED32:case ne.SINT32:s=Number.parseInt(r);break;case ne.BOOL:Ar(r=="true"||r=="false"),s=r=="true";break}switch(rf(t,n.K,1,s,!0),n.V.kind){case"scalar":rf(t,n.V.T,2,i,!0);break;case"enum":rf(t,ne.INT32,2,i,!0);break;case"message":oI(t,e,n.V.T,2,i);break}t.join()}function oI(t,e,n,r,i){if(i!==void 0){const s=iI(n,i);t.tag(r,qt.LengthDelimited).bytes(s.toBinary(e))}}function rf(t,e,n,r,i){let[s,o,a]=FM(e,r);(!a||i)&&t.tag(n,s)[o](r)}function b8(t,e,n,r){if(!r.length)return;t.tag(n,qt.LengthDelimited).fork();let[,i]=FM(e);for(let s=0;s<r.length;s++)t[i](r[s]);t.join()}function w8(){return Object.assign(Object.assign({},y8()),{writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){let s,o=i.repeated,a=i.localName;if(i.oneof){const c=t[i.oneof.localName];if(c.case!==a)continue;s=c.value}else s=t[a];switch(i.kind){case"scalar":case"enum":let c=i.kind=="enum"?ne.INT32:i.T;if(o)if(i.packed)b8(e,c,i.no,s);else for(const l of s)rf(e,c,i.no,l,!0);else s!==void 0&&rf(e,c,i.no,s,!!i.oneof||i.opt);break;case"message":if(o)for(const l of s)oI(e,n,i.T,i.no,l);else oI(e,n,i.T,i.no,s);break;case"map":for(const[l,u]of Object.entries(s))S8(e,n,i,l,u);break}}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}let ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),cv=[];for(let t=0;t<ro.length;t++)cv[ro[t].charCodeAt(0)]=t;cv[45]=ro.indexOf("+");cv[95]=ro.indexOf("/");const UM={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,s,o=0;for(let a=0;a<t.length;a++){if(s=cv[t.charCodeAt(a)],s===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let s=0;s<t.length;s++)switch(r=t[s],n){case 0:e+=ro[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=ro[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=ro[i|r>>6],e+=ro[r&63],n=0;break}return n&&(e+=ro[i],e+="=",n==1&&(e+="=")),e}},rE={ignoreUnknownFields:!1},iE={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function k8(t){return t?Object.assign(Object.assign({},rE),t):rE}function A8(t){return t?Object.assign(Object.assign({},iE),t):iE}function E8(t){const e=t(T8,sE);return{makeReadOptions:k8,makeWriteOptions:A8,readMessage(n,r,i,s){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(this.debug(r)));s=s??new n;const o={};for(const[a,c]of Object.entries(r)){const l=n.fields.findJsonName(a);if(!l){if(!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(a,'" is unknown'));continue}let u=l.localName,d=s;if(l.oneof){if(c===null&&l.kind=="scalar")continue;const f=o[l.oneof.localName];if(f)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(f,'", "').concat(a,'"'));o[l.oneof.localName]=a,d=d[l.oneof.localName]={case:u},u="value"}if(l.repeated){if(c===null)continue;if(!Array.isArray(c))throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const f=d[u];for(const h of c){if(h===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h)));let p;switch(l.kind){case"message":p=l.T.fromJson(h,i);break;case"enum":if(p=Xy(l.T,h,i.ignoreUnknownFields),p===void 0)continue;break;case"scalar":try{p=Sd(l.T,h,l.L)}catch(m){let y="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h));throw m instanceof Error&&m.message.length>0&&(y+=": ".concat(m.message)),new Error(y)}break}f.push(p)}}else if(l.kind=="map"){if(c===null)continue;if(Array.isArray(c)||typeof c!="object")throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const f=d[u];for(const[h,p]of Object.entries(c)){if(p===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: map value null"));let m;switch(l.V.kind){case"message":m=l.V.T.fromJson(p,i);break;case"enum":if(m=Xy(l.V.T,p,i.ignoreUnknownFields),m===void 0)continue;break;case"scalar":try{m=Sd(l.V.T,p,Vc.BIGINT)}catch(y){let g="cannot decode map value for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw y instanceof Error&&y.message.length>0&&(g+=": ".concat(y.message)),new Error(g)}break}try{f[Sd(l.K,l.K==ne.BOOL?h=="true"?!0:h=="false"?!1:h:h,Vc.BIGINT).toString()]=m}catch(y){let g="cannot decode map key for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw y instanceof Error&&y.message.length>0&&(g+=": ".concat(y.message)),new Error(g)}}}else switch(l.kind){case"message":const f=l.T;if(c===null&&f.typeName!="google.protobuf.Value"){if(l.oneof)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name,' from JSON: null is invalid for oneof field "').concat(a,'"'));continue}d[u]instanceof pe?d[u].fromJson(c,i):(d[u]=f.fromJson(c,i),f.fieldWrapper&&!l.oneof&&(d[u]=f.fieldWrapper.unwrapField(d[u])));break;case"enum":const h=Xy(l.T,c,i.ignoreUnknownFields);h!==void 0&&(d[u]=h);break;case"scalar":try{d[u]=Sd(l.T,c,l.L)}catch(p){let m="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw p instanceof Error&&p.message.length>0&&(m+=": ".concat(p.message)),new Error(m)}break}}return s},writeMessage(n,r){const i=n.getType(),s={};let o;try{for(const a of i.fields.byMember()){let c;if(a.kind=="oneof"){const l=n[a.localName];if(l.value===void 0)continue;if(o=a.findField(l.case),!o)throw"oneof case not found: "+l.case;c=e(o,l.value,r)}else o=a,c=e(o,n[o.localName],r);c!==void 0&&(s[r.useProtoFieldName?o.name:o.jsonName]=c)}}catch(a){const c=o?"cannot encode field ".concat(i.typeName,".").concat(o.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return s},readScalar:Sd,writeScalar:sE,debug:VM}}function VM(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function Sd(t,e,n){switch(t){case ne.DOUBLE:case ne.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==ne.FLOAT&&NM(r),r;case ne.INT32:case ne.FIXED32:case ne.SFIXED32:case ne.SINT32:case ne.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return t==ne.UINT32?rI(i):Jp(i),i;case ne.INT64:case ne.SFIXED64:case ne.SINT64:if(e===null)return Le.zero;if(typeof e!="number"&&typeof e!="string")break;const s=Le.parse(e);return n?s.toString():s;case ne.FIXED64:case ne.UINT64:if(e===null)return Le.zero;if(typeof e!="number"&&typeof e!="string")break;const o=Le.uParse(e);return n?o.toString():o;case ne.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case ne.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case ne.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return UM.dec(e)}throw new Error}function Xy(t,e,n){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r||n)return r==null?void 0:r.no;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(VM(e)))}function T8(t,e,n,r){var i;if(e===void 0)return e;if(e===0&&!n)return;if(r)return e;if(t.typeName=="google.protobuf.NullValue")return null;const s=t.findNumber(e);return(i=s==null?void 0:s.name)!==null&&i!==void 0?i:e}function sE(t,e,n){if(e!==void 0)switch(t){case ne.INT32:case ne.SFIXED32:case ne.SINT32:case ne.FIXED32:case ne.UINT32:return Ar(typeof e=="number"),e!=0||n?e:void 0;case ne.FLOAT:case ne.DOUBLE:return Ar(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||n?e:void 0;case ne.STRING:return Ar(typeof e=="string"),e.length>0||n?e:void 0;case ne.BOOL:return Ar(typeof e=="boolean"),e||n?e:void 0;case ne.UINT64:case ne.FIXED64:case ne.INT64:case ne.SFIXED64:case ne.SINT64:return Ar(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.toString(10):void 0;case ne.BYTES:return Ar(e instanceof Uint8Array),n||e.byteLength>0?UM.enc(e):void 0}}function _8(){return E8((t,e)=>function(r,i,s){if(r.kind=="map"){const o={};switch(r.V.kind){case"scalar":for(const[c,l]of Object.entries(i)){const u=e(r.V.T,l,!0);Ar(u!==void 0),o[c.toString()]=u}break;case"message":for(const[c,l]of Object.entries(i))o[c.toString()]=l.toJson(s);break;case"enum":const a=r.V.T;for(const[c,l]of Object.entries(i)){Ar(l===void 0||typeof l=="number");const u=t(a,l,!0,s.enumAsInteger);Ar(u!==void 0),o[c.toString()]=u}break}return s.emitDefaultValues||Object.keys(o).length>0?o:void 0}else if(r.repeated){const o=[];switch(r.kind){case"scalar":for(let a=0;a<i.length;a++)o.push(e(r.T,i[a],!0));break;case"enum":for(let a=0;a<i.length;a++)o.push(t(r.T,i[a],!0,s.enumAsInteger));break;case"message":for(let a=0;a<i.length;a++)o.push(iI(r.T,i[a]).toJson(s));break}return s.emitDefaultValues||o.length>0?o:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||s.emitDefaultValues);case"enum":return t(r.T,i,!!r.oneof||r.opt||s.emitDefaultValues,s.enumAsInteger);case"message":return i!==void 0?iI(r.T,i).toJson(s):void 0}})}function R8(){return{setEnumType:MM,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,s=e,o=t;if(o[i]!==void 0)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const c=r.findField(a);let l=o[i].value;c&&c.kind=="message"&&!(l instanceof c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===ne.BYTES&&(l=bd(l)),s[i]={case:a,value:l};break;case"scalar":case"enum":let u=o[i];r.T===ne.BYTES&&(u=r.repeated?u.map(bd):bd(u)),s[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===ne.BYTES)for(const[h,p]of Object.entries(o[i]))s[i][h]=bd(p);else Object.assign(s[i],o[i]);break;case"message":const f=r.V.T;for(const h of Object.keys(o[i])){let p=o[i][h];f.fieldWrapper||(p=new f(p)),s[i][h]=p}break}break;case"message":const d=r.T;if(r.repeated)s[i]=o[i].map(f=>f instanceof d?f:new d(f));else if(o[i]!==void 0){const f=o[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?s[i]=bd(f):s[i]=f:s[i]=f instanceof d?f:new d(f)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>ra(r.T,o,s[a]));case"enum":return i.every((o,a)=>ra(ne.INT32,o,s[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return ra(ne.INT32,i,s);case"scalar":return ra(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return ra(ne.INT32,i.value,s.value);case"scalar":return ra(o.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(o.kind));case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const c=r.V.T;return a.every(u=>c.equals(i[u],s[u]));case"enum":return a.every(u=>ra(ne.INT32,i[u],s[u]));case"scalar":const l=r.V.T;return a.every(u=>ra(l,i[u],s[u]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const s=t[i.localName];let o;if(i.repeated)o=s.map(op);else if(i.kind=="map"){o=r[i.localName];for(const[a,c]of Object.entries(s))o[a]=op(c)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:op(s.value)}:{case:void 0}:o=op(s);r[i.localName]=o}return n}}}function op(t){if(t===void 0)return t;if(t instanceof pe)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function bd(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class x8{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function GM(t,e){const n=WM(t);return e?n:L8(D8(n))}function N8(t){return GM(t,!1)}const P8=WM;function WM(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const M8=new Set(["constructor","toString","toJSON","valueOf"]),O8=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),jM=t=>"".concat(t,"$"),D8=t=>O8.has(t)?jM(t):t,L8=t=>M8.has(t)?jM(t):t;class B8{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=N8(e)}addField(e){Ar(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const R=c8("proto3",_8(),w8(),Object.assign(Object.assign({},R8()),{newFieldList(t){return new x8(t,F8)},initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=sI(e.T,e.L);break}}}}));function F8(t){var e,n,r,i;const s=[];let o;for(const a of typeof t=="function"?t():t){const c=a;if(c.localName=GM(a.name,a.oneof!==void 0),c.jsonName=(e=a.jsonName)!==null&&e!==void 0?e:P8(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.L=(r=a.L)!==null&&r!==void 0?r:Vc.BIGINT),c.packed=(i=a.packed)!==null&&i!==void 0?i:a.kind=="enum"||a.kind=="scalar"&&a.T!=ne.BYTES&&a.T!=ne.STRING,a.oneof!==void 0){const l=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!o||o.name!=l)&&(o=new B8(l)),c.oneof=o,o.addField(c)}s.push(c)}return s}class Tn extends pe{constructor(e){super(),this.seconds=Le.zero,this.nanos=0,R.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(R.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Le.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Tn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new Tn({seconds:Le.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new Tn().fromBinary(e,n)}static fromJson(e,n){return new Tn().fromJson(e,n)}static fromJsonString(e,n){return new Tn().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Tn,e,n)}}Tn.runtime=R;Tn.typeName="google.protobuf.Timestamp";Tn.fields=R.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var aI;(function(t){t[t.DEFAULT_AC=0]="DEFAULT_AC",t[t.OPUS=1]="OPUS",t[t.AAC=2]="AAC"})(aI||(aI={}));R.util.setEnumType(aI,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var cI;(function(t){t[t.DEFAULT_VC=0]="DEFAULT_VC",t[t.H264_BASELINE=1]="H264_BASELINE",t[t.H264_MAIN=2]="H264_MAIN",t[t.H264_HIGH=3]="H264_HIGH",t[t.VP8=4]="VP8"})(cI||(cI={}));R.util.setEnumType(cI,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var lI;(function(t){t[t.IC_DEFAULT=0]="IC_DEFAULT",t[t.IC_JPEG=1]="IC_JPEG"})(lI||(lI={}));R.util.setEnumType(lI,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var Yn;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO",t[t.DATA=2]="DATA"})(Yn||(Yn={}));R.util.setEnumType(Yn,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var Qt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CAMERA=1]="CAMERA",t[t.MICROPHONE=2]="MICROPHONE",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(Qt||(Qt={}));R.util.setEnumType(Qt,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var mn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF"})(mn||(mn={}));R.util.setEnumType(mn,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var oo;(function(t){t[t.POOR=0]="POOR",t[t.GOOD=1]="GOOD",t[t.EXCELLENT=2]="EXCELLENT",t[t.LOST=3]="LOST"})(oo||(oo={}));R.util.setEnumType(oo,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var Yi;(function(t){t[t.UNSET=0]="UNSET",t[t.DISABLED=1]="DISABLED",t[t.ENABLED=2]="ENABLED"})(Yi||(Yi={}));R.util.setEnumType(Yi,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var Mo;(function(t){t[t.UNKNOWN_REASON=0]="UNKNOWN_REASON",t[t.CLIENT_INITIATED=1]="CLIENT_INITIATED",t[t.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",t[t.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",t[t.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",t[t.ROOM_DELETED=5]="ROOM_DELETED",t[t.STATE_MISMATCH=6]="STATE_MISMATCH",t[t.JOIN_FAILURE=7]="JOIN_FAILURE"})(Mo||(Mo={}));R.util.setEnumType(Mo,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"}]);var eo;(function(t){t[t.RR_UNKNOWN=0]="RR_UNKNOWN",t[t.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",t[t.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",t[t.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",t[t.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(eo||(eo={}));R.util.setEnumType(eo,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var Wf;(function(t){t[t.SE_UNKNOWN=0]="SE_UNKNOWN",t[t.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",t[t.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(Wf||(Wf={}));R.util.setEnumType(Wf,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let qu=class Gd extends pe{constructor(e){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=Le.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Gd().fromBinary(e,n)}static fromJson(e,n){return new Gd().fromJson(e,n)}static fromJsonString(e,n){return new Gd().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Gd,e,n)}};qu.runtime=R;qu.typeName="livekit.Room";qu.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Fi,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8}]);class Fi extends pe{constructor(e){super(),this.mime="",this.fmtpLine="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Fi().fromBinary(e,n)}static fromJson(e,n){return new Fi().fromJson(e,n)}static fromJsonString(e,n){return new Fi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Fi,e,n)}}Fi.runtime=R;Fi.typeName="livekit.Codec";Fi.fields=R.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class Aa extends pe{constructor(e){super(),this.enabled=!1,this.min=0,this.max=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Aa().fromBinary(e,n)}static fromJson(e,n){return new Aa().fromJson(e,n)}static fromJsonString(e,n){return new Aa().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Aa,e,n)}}Aa.runtime=R;Aa.typeName="livekit.PlayoutDelay";Aa.fields=R.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class ao extends pe{constructor(e){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new ao().fromBinary(e,n)}static fromJson(e,n){return new ao().fromJson(e,n)}static fromJsonString(e,n){return new ao().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ao,e,n)}}ao.runtime=R;ao.typeName="livekit.ParticipantPermission";ao.fields=R.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:R.getEnumType(Qt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class Jr extends pe{constructor(e){super(),this.sid="",this.identity="",this.state=Gc.JOINING,this.tracks=[],this.metadata="",this.joinedAt=Le.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Jr().fromBinary(e,n)}static fromJson(e,n){return new Jr().fromJson(e,n)}static fromJsonString(e,n){return new Jr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Jr,e,n)}}Jr.runtime=R;Jr.typeName="livekit.ParticipantInfo";Jr.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(Gc)},{no:4,name:"tracks",kind:"message",T:Tr,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:ao},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8}]);var Gc;(function(t){t[t.JOINING=0]="JOINING",t[t.JOINED=1]="JOINED",t[t.ACTIVE=2]="ACTIVE",t[t.DISCONNECTED=3]="DISCONNECTED"})(Gc||(Gc={}));R.util.setEnumType(Gc,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);class Ea extends pe{constructor(e){super(),R.util.initPartial(e,this)}static fromBinary(e,n){return new Ea().fromBinary(e,n)}static fromJson(e,n){return new Ea().fromJson(e,n)}static fromJsonString(e,n){return new Ea().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ea,e,n)}}Ea.runtime=R;Ea.typeName="livekit.Encryption";Ea.fields=R.util.newFieldList(()=>[]);var Ln;(function(t){t[t.NONE=0]="NONE",t[t.GCM=1]="GCM",t[t.CUSTOM=2]="CUSTOM"})(Ln||(Ln={}));R.util.setEnumType(Ln,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class co extends pe{constructor(e){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new co().fromBinary(e,n)}static fromJson(e,n){return new co().fromJson(e,n)}static fromJsonString(e,n){return new co().fromJsonString(e,n)}static equals(e,n){return R.util.equals(co,e,n)}}co.runtime=R;co.typeName="livekit.SimulcastCodecInfo";co.fields=R.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:fr,repeated:!0}]);class Tr extends pe{constructor(e){super(),this.sid="",this.type=Yn.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=Qt.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=Ln.NONE,this.stream="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Tr().fromBinary(e,n)}static fromJson(e,n){return new Tr().fromJson(e,n)}static fromJsonString(e,n){return new Tr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Tr,e,n)}}Tr.runtime=R;Tr.typeName="livekit.TrackInfo";Tr.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:R.getEnumType(Yn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:R.getEnumType(Qt)},{no:10,name:"layers",kind:"message",T:fr,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:co,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:R.getEnumType(Ln)},{no:17,name:"stream",kind:"scalar",T:9}]);class fr extends pe{constructor(e){super(),this.quality=mn.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new fr().fromBinary(e,n)}static fromJson(e,n){return new fr().fromJson(e,n)}static fromJsonString(e,n){return new fr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(fr,e,n)}}fr.runtime=R;fr.typeName="livekit.VideoLayer";fr.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(mn)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class ys extends pe{constructor(e){super(),this.kind=un.RELIABLE,this.value={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new ys().fromBinary(e,n)}static fromJson(e,n){return new ys().fromJson(e,n)}static fromJsonString(e,n){return new ys().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ys,e,n)}}ys.runtime=R;ys.typeName="livekit.DataPacket";ys.fields=R.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:R.getEnumType(un)},{no:2,name:"user",kind:"message",T:Is,oneof:"value"},{no:3,name:"speaker",kind:"message",T:lo,oneof:"value"}]);var un;(function(t){t[t.RELIABLE=0]="RELIABLE",t[t.LOSSY=1]="LOSSY"})(un||(un={}));R.util.setEnumType(un,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class lo extends pe{constructor(e){super(),this.speakers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new lo().fromBinary(e,n)}static fromJson(e,n){return new lo().fromJson(e,n)}static fromJsonString(e,n){return new lo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(lo,e,n)}}lo.runtime=R;lo.typeName="livekit.ActiveSpeakerUpdate";lo.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Cs,repeated:!0}]);class Cs extends pe{constructor(e){super(),this.sid="",this.level=0,this.active=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Cs().fromBinary(e,n)}static fromJson(e,n){return new Cs().fromJson(e,n)}static fromJsonString(e,n){return new Cs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Cs,e,n)}}Cs.runtime=R;Cs.typeName="livekit.SpeakerInfo";Cs.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class Is extends pe{constructor(e){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Is().fromBinary(e,n)}static fromJson(e,n){return new Is().fromJson(e,n)}static fromJsonString(e,n){return new Is().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Is,e,n)}}Is.runtime=R;Is.typeName="livekit.UserPacket";Is.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class Ss extends pe{constructor(e){super(),this.participantSid="",this.trackSids=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Ss().fromBinary(e,n)}static fromJson(e,n){return new Ss().fromJson(e,n)}static fromJsonString(e,n){return new Ss().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ss,e,n)}}Ss.runtime=R;Ss.typeName="livekit.ParticipantTracks";Ss.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class uo extends pe{constructor(e){super(),this.edition=Tu.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",R.util.initPartial(e,this)}static fromBinary(e,n){return new uo().fromBinary(e,n)}static fromJson(e,n){return new uo().fromJson(e,n)}static fromJsonString(e,n){return new uo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(uo,e,n)}}uo.runtime=R;uo.typeName="livekit.ServerInfo";uo.fields=R.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:R.getEnumType(Tu)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var Tu;(function(t){t[t.Standard=0]="Standard",t[t.Cloud=1]="Cloud"})(Tu||(Tu={}));R.util.setEnumType(Tu,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class fo extends pe{constructor(e){super(),this.sdk=_u.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",R.util.initPartial(e,this)}static fromBinary(e,n){return new fo().fromBinary(e,n)}static fromJson(e,n){return new fo().fromJson(e,n)}static fromJsonString(e,n){return new fo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(fo,e,n)}}fo.runtime=R;fo.typeName="livekit.ClientInfo";fo.fields=R.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:R.getEnumType(_u)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var _u;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JS=1]="JS",t[t.SWIFT=2]="SWIFT",t[t.ANDROID=3]="ANDROID",t[t.FLUTTER=4]="FLUTTER",t[t.GO=5]="GO",t[t.UNITY=6]="UNITY",t[t.REACT_NATIVE=7]="REACT_NATIVE",t[t.RUST=8]="RUST",t[t.PYTHON=9]="PYTHON",t[t.CPP=10]="CPP"})(_u||(_u={}));R.util.setEnumType(_u,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class bs extends pe{constructor(e){super(),this.resumeConnection=Yi.UNSET,this.forceRelay=Yi.UNSET,R.util.initPartial(e,this)}static fromBinary(e,n){return new bs().fromBinary(e,n)}static fromJson(e,n){return new bs().fromJson(e,n)}static fromJsonString(e,n){return new bs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(bs,e,n)}}bs.runtime=R;bs.typeName="livekit.ClientConfiguration";bs.fields=R.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:ws},{no:2,name:"screen",kind:"message",T:ws},{no:3,name:"resume_connection",kind:"enum",T:R.getEnumType(Yi)},{no:4,name:"disabled_codecs",kind:"message",T:ho},{no:5,name:"force_relay",kind:"enum",T:R.getEnumType(Yi)}]);class ws extends pe{constructor(e){super(),this.hardwareEncoder=Yi.UNSET,R.util.initPartial(e,this)}static fromBinary(e,n){return new ws().fromBinary(e,n)}static fromJson(e,n){return new ws().fromJson(e,n)}static fromJsonString(e,n){return new ws().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ws,e,n)}}ws.runtime=R;ws.typeName="livekit.VideoConfiguration";ws.fields=R.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:R.getEnumType(Yi)}]);class ho extends pe{constructor(e){super(),this.codecs=[],this.publish=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new ho().fromBinary(e,n)}static fromJson(e,n){return new ho().fromJson(e,n)}static fromJsonString(e,n){return new ho().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ho,e,n)}}ho.runtime=R;ho.typeName="livekit.DisabledCodecs";ho.fields=R.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:Fi,repeated:!0},{no:2,name:"publish",kind:"message",T:Fi,repeated:!0}]);class ks extends pe{constructor(e){super(),this.duration=0,this.startTimestamp=Le.zero,this.endTimestamp=Le.zero,this.rtpClockTicks=Le.zero,this.driftSamples=Le.zero,this.driftMs=0,this.clockRate=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new ks().fromBinary(e,n)}static fromJson(e,n){return new ks().fromJson(e,n)}static fromJsonString(e,n){return new ks().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ks,e,n)}}ks.runtime=R;ks.typeName="livekit.RTPDrift";ks.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:Tn},{no:2,name:"end_time",kind:"message",T:Tn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class Ta extends pe{constructor(e){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=Le.zero,this.headerBytes=Le.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=Le.zero,this.headerBytesDuplicate=Le.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=Le.zero,this.headerBytesPadding=Le.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ta().fromBinary(e,n)}static fromJson(e,n){return new Ta().fromJson(e,n)}static fromJsonString(e,n){return new Ta().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ta,e,n)}}Ta.runtime=R;Ta.typeName="livekit.RTPStats";Ta.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:Tn},{no:2,name:"end_time",kind:"message",T:Tn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:Tn},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:Tn},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:Tn},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:Tn},{no:44,name:"packet_drift",kind:"message",T:ks},{no:45,name:"report_drift",kind:"message",T:ks}]);class _a extends pe{constructor(e){super(),this.unixMicro=Le.zero,this.ticks=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new _a().fromBinary(e,n)}static fromJson(e,n){return new _a().fromJson(e,n)}static fromJsonString(e,n){return new _a().fromJsonString(e,n)}static equals(e,n){return R.util.equals(_a,e,n)}}_a.runtime=R;_a.typeName="livekit.TimedVersion";_a.fields=R.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const wd=7e3,U8=[0,300,2*2*300,3*3*300,4*4*300,wd,wd,wd,wd,wd];class V8{constructor(e){this._retryDelays=e!==void 0?[...e]:U8}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function F(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function oE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Cl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof oE=="function"?oE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,c){o=t[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var $b={exports:{}},nu=typeof Reflect=="object"?Reflect:null,aE=nu&&typeof nu.apply=="function"?nu.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Qp;nu&&typeof nu.ownKeys=="function"?Qp=nu.ownKeys:Object.getOwnPropertySymbols?Qp=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Qp=function(e){return Object.getOwnPropertyNames(e)};function G8(t){console&&console.warn&&console.warn(t)}var HM=Number.isNaN||function(e){return e!==e};function lt(){lt.init.call(this)}$b.exports=lt;$b.exports.once=$8;lt.EventEmitter=lt;lt.prototype._events=void 0;lt.prototype._eventsCount=0;lt.prototype._maxListeners=void 0;var cE=10;function lv(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(lt,"defaultMaxListeners",{enumerable:!0,get:function(){return cE},set:function(t){if(typeof t!="number"||t<0||HM(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");cE=t}});lt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};lt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||HM(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function $M(t){return t._maxListeners===void 0?lt.defaultMaxListeners:t._maxListeners}lt.prototype.getMaxListeners=function(){return $M(this)};lt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[e];if(c===void 0)return!1;if(typeof c=="function")aE(c,this,n);else for(var l=c.length,u=JM(c,l),r=0;r<l;++r)aE(u[r],this,n);return!0};function zM(t,e,n,r){var i,s,o;if(lv(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=$M(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,G8(a)}return t}lt.prototype.addListener=function(e,n){return zM(this,e,n,!1)};lt.prototype.on=lt.prototype.addListener;lt.prototype.prependListener=function(e,n){return zM(this,e,n,!0)};function W8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function ZM(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=W8.bind(r);return i.listener=n,r.wrapFn=i,i}lt.prototype.once=function(e,n){return lv(n),this.on(e,ZM(this,e,n)),this};lt.prototype.prependOnceListener=function(e,n){return lv(n),this.prependListener(e,ZM(this,e,n)),this};lt.prototype.removeListener=function(e,n){var r,i,s,o,a;if(lv(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():j8(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};lt.prototype.off=lt.prototype.removeListener;lt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function XM(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?H8(i):JM(i,i.length)}lt.prototype.listeners=function(e){return XM(this,e,!0)};lt.prototype.rawListeners=function(e){return XM(this,e,!1)};lt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):KM.call(t,e)};lt.prototype.listenerCount=KM;function KM(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}lt.prototype.eventNames=function(){return this._eventsCount>0?Qp(this._events):[]};function JM(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function j8(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function H8(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function $8(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}YM(t,e,s,{once:!0}),e!=="error"&&z8(t,i,{once:!0})})}function z8(t,e,n){typeof t.on=="function"&&YM(t,"error",e,n)}function YM(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Zs=$b.exports;let qM=!0,QM=!0;function eg(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function nl(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(a))return s.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function Z8(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(qM=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function X8(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(QM=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function eO(){if(typeof window=="object"){if(qM)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function zb(t,e){QM&&console.warn(t+" is deprecated, please use "+e+" instead.")}function K8(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=eg(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=eg(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=eg(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function lE(t){return Object.prototype.toString.call(t)==="[object Object]"}function tO(t){return lE(t)?Object.keys(t).reduce(function(e,n){const r=lE(t[n]),i=r?tO(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function uI(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?uI(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{uI(t,t.get(i),n)})}))}function uE(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(a=>{a.type===r&&a.trackId===o.id&&uI(t,a,i)})}),i}const dE=eO;function nO(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),dE("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return dE("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function J8(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const s=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),t.navigator.mediaDevices.getUserMedia(r)})}}}function rO(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function iO(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else nl(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function sO(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function oO(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const o=function(c){const l={};return c.result().forEach(d=>{const f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(h=>{f[h]=d.stat(h)}),l[f.id]=f}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){const c=function(l){i(a(o(l)))};return e.apply(this,[c,r])}return new Promise((c,l)=>{e.apply(this,[function(u){c(a(o(u)))},l])}).then(i,s)}}function aO(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>uE(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),nl(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>uE(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function cO(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function lO(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return cO(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new t.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const m=s(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};t.RTCPeerConnection.prototype[l]=d[l]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function dI(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function uO(t,e){nl(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var fE=Object.freeze({__proto__:null,fixNegotiationNeeded:uO,shimAddTrackRemoveTrack:lO,shimAddTrackRemoveTrackWithNative:cO,shimGetDisplayMedia:J8,shimGetSendersWithDtmf:sO,shimGetStats:oO,shimGetUserMedia:nO,shimMediaStream:rO,shimOnTrack:iO,shimPeerConnection:dI,shimSenderReceiverGetStats:aO});function dO(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){zb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function Y8(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function fO(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function fI(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(e.version<53&&!o)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(o,a)}}function hO(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function pO(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),nl(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function gO(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){zb("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function mO(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function vO(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function yO(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function CO(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function IO(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var hE=Object.freeze({__proto__:null,shimAddTransceiver:vO,shimCreateAnswer:IO,shimCreateOffer:CO,shimGetDisplayMedia:Y8,shimGetParameters:yO,shimGetUserMedia:dO,shimOnTrack:fO,shimPeerConnection:fI,shimRTCDataChannel:mO,shimReceiverGetStats:pO,shimRemoveStream:gO,shimSenderGetStats:hO});function SO(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function bO(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function wO(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function kO(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(AO(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function AO(t){return t&&t.video!==void 0?Object.assign({},t,{video:tO(t.video)}):t}function EO(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(zb("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function TO(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _O(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function RO(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var pE=Object.freeze({__proto__:null,shimAudioContext:RO,shimCallbacksAPI:wO,shimConstraints:AO,shimCreateOfferLegacy:_O,shimGetUserMedia:kO,shimLocalStreamsAPI:SO,shimRTCIceServerUrls:EO,shimRemoteStreamsAPI:bO,shimTrackEventTransceiver:TO}),xO={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=e.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const o=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=e.matchPrefix(n,"a=ssrc:").map(o=>e.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(xO);var NO=xO.exports,ru=Q$(NO),q8=Y$({__proto__:null,default:ru},[NO]);function tg(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),s=ru.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,nl(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function hI(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||nl(t,"icecandidate",e=>{if(e.candidate){const n=ru.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function ng(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=ru.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=ru.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=ru.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function rg(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},nl(t,"datachannel",r=>(e(r.channel,r.target),r))}function pI(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function gI(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function ig(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function sg(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var Q8=Object.freeze({__proto__:null,removeExtmapAllowMixed:gI,shimAddIceCandidateNullOrEmpty:ig,shimConnectionState:pI,shimMaxMessageSize:ng,shimParameterlessSetLocalDescription:sg,shimRTCIceCandidate:tg,shimRTCIceCandidateRelayProtocol:hI,shimSendThrowTypeError:rg});function ez(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=eO,r=K8(t),i={browserDetails:r,commonShim:Q8,extractVersion:eg,disableLog:Z8,disableWarnings:X8,sdp:q8};switch(r.browser){case"chrome":if(!fE||!dI||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=fE,ig(t,r),sg(t),nO(t,r),rO(t),dI(t,r),iO(t),lO(t,r),sO(t),oO(t),aO(t),uO(t,r),tg(t),hI(t),pI(t),ng(t,r),rg(t),gI(t,r);break;case"firefox":if(!hE||!fI||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=hE,ig(t,r),sg(t),dO(t,r),fI(t,r),fO(t),gO(t),hO(t),pO(t),mO(t),vO(t),yO(t),CO(t),IO(t),tg(t),pI(t),ng(t,r),rg(t);break;case"safari":if(!pE||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=pE,ig(t,r),sg(t),EO(t),_O(t),wO(t),SO(t),bO(t),TO(t),kO(t),RO(t),tg(t),hI(t),ng(t,r),rg(t),gI(t,r);break;default:n("Unsupported browser!");break}return i}ez({window:typeof window>"u"?void 0:window});const tz=10,ap="lk_e2ee",nz="LKFrameEncryptionKey",rz={sharedKey:!1,ratchetSalt:nz,ratchetWindowSize:8,failureTolerance:tz};var Ga;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Ga||(Ga={}));var gE;(function(t){t.KeyRatcheted="keyRatcheted"})(gE||(gE={}));var Ra;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Ra||(Ra={}));var mE;(function(t){t.Error="cryptorError"})(mE||(mE={}));function iz(){return sz()||mI()}function mI(){return typeof window.RTCRtpScriptTransform<"u"}function sz(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class Moe extends Zs.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{He.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},rz),e),this.on(Ga.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Ga.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Ga.RatchetRequest,e,n)}}class Qu extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}class Et extends Qu{constructor(e,n,r){super(1,e),this.status=r,this.reason=n}}class Zb extends Qu{constructor(e){super(21,e??"device is unsupported")}}class fs extends Qu{constructor(e){super(20,e??"track is invalid")}}class oz extends Qu{constructor(e){super(10,e??"unsupported server")}}class ln extends Qu{constructor(e){super(12,e??"unexpected connection state")}}class vI extends Qu{constructor(e){super(13,e??"unable to negotiate")}}var jf;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(jf||(jf={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(jf||(jf={}));var te;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.StateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged"})(te||(te={}));var se;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded"})(se||(se={}));var me;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished"})(me||(me={}));var fe;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed"})(fe||(fe={}));function Xb(t,e,n){var r,i,s;e===void 0&&(e=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var h=Date.now()-l;if(h+e>=c)return c-h}return e}var f=function(){var h=[].slice.call(arguments),p=this;return new Promise(function(m,y){var g=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,l=Date.now(),!o){var S=t.apply(p,h);a&&a(S),u.forEach(function(E){return(0,E.resolve)(S)}),u=[]}},d()),g){var v=t.apply(p,h);return a&&a(v),m(v)}u.push({resolve:m,reject:y})})};return f.cancel=function(h){s!==void 0&&clearTimeout(s),u.forEach(function(p){return(0,p.reject)(h)}),u=[]},f}const az=/version\/(\d+(\.?_?\d+)+)/i;let Ky;function jo(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof t>"u"&&typeof navigator>"u")return;const n=(t??navigator.userAgent).toLowerCase();if(Ky===void 0||e){const r=cz.find(i=>{let{test:s}=i;return s.test(n)});Ky=r==null?void 0:r.describe(n)}return Ky}const cz=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Jy(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Jy(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Jy(az,t),os:t.includes("mobile/")?"iOS":"macOS"}}}];function Jy(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}var lz="1.15.10";const uz=lz,dz=11;class Fn{}Fn.setTimeout=function(){return setTimeout(...arguments)};Fn.setInterval=function(){return setInterval(...arguments)};Fn.clearTimeout=function(){return clearTimeout(...arguments)};Fn.clearInterval=function(){return clearInterval(...arguments)};class ct{constructor(e,n,r,i,s){this.width=e,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const fz=["vp8","h264"],PO=["vp8","h264","vp9","av1"];function hz(t){return!!fz.find(e=>e===t)}var om;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:2e4},t.music={maxBitrate:32e3},t.musicStereo={maxBitrate:48e3},t.musicHighQuality={maxBitrate:64e3},t.musicHighQualityStereo={maxBitrate:96e3}})(om||(om={}));const Hf={h90:new ct(160,90,9e4,20),h180:new ct(320,180,16e4,20),h216:new ct(384,216,18e4,20),h360:new ct(640,360,45e4,20),h540:new ct(960,540,8e5,25),h720:new ct(1280,720,17e5,30),h1080:new ct(1920,1080,3e6,30),h1440:new ct(2560,1440,5e6,30),h2160:new ct(3840,2160,8e6,30)},yI={h120:new ct(160,120,7e4,20),h180:new ct(240,180,125e3,20),h240:new ct(320,240,14e4,20),h360:new ct(480,360,33e4,20),h480:new ct(640,480,5e5,20),h540:new ct(720,540,6e5,25),h720:new ct(960,720,13e5,30),h1080:new ct(1440,1080,23e5,30),h1440:new ct(1920,1440,38e5,30)},Kb={h360fps3:new ct(640,360,2e5,3,"medium"),h360fps15:new ct(640,360,4e5,15,"medium"),h720fps5:new ct(1280,720,8e5,5,"medium"),h720fps15:new ct(1280,720,15e5,15,"medium"),h720fps30:new ct(1280,720,2e6,30,"medium"),h1080fps15:new ct(1920,1080,25e5,15,"medium"),h1080fps30:new ct(1920,1080,5e6,30,"medium"),original:new ct(0,0,7e6,30,"medium")};var qn;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(qn||(qn={}));R.util.setEnumType(qn,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var Wc;(function(t){t[t.ACTIVE=0]="ACTIVE",t[t.PAUSED=1]="PAUSED"})(Wc||(Wc={}));R.util.setEnumType(Wc,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var am;(function(t){t[t.UDP=0]="UDP",t[t.TCP=1]="TCP",t[t.TLS=2]="TLS"})(am||(am={}));R.util.setEnumType(am,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class po extends pe{constructor(e){super(),this.message={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new po().fromBinary(e,n)}static fromJson(e,n){return new po().fromJson(e,n)}static fromJsonString(e,n){return new po().fromJsonString(e,n)}static equals(e,n){return R.util.equals(po,e,n)}}po.runtime=R;po.typeName="livekit.SignalRequest";po.fields=R.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:hr,oneof:"message"},{no:2,name:"answer",kind:"message",T:hr,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Gi,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Vi,oneof:"message"},{no:5,name:"mute",kind:"message",T:Wi,oneof:"message"},{no:6,name:"subscription",kind:"message",T:fi,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Es,oneof:"message"},{no:8,name:"leave",kind:"message",T:hi,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Ts,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Ns,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Ps,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Dn,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:_s,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Os,oneof:"message"}]);class As extends pe{constructor(e){super(),this.message={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new As().fromBinary(e,n)}static fromJson(e,n){return new As().fromJson(e,n)}static fromJsonString(e,n){return new As().fromJsonString(e,n)}static equals(e,n){return R.util.equals(As,e,n)}}As.runtime=R;As.typeName="livekit.SignalResponse";As.fields=R.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:go,oneof:"message"},{no:2,name:"answer",kind:"message",T:hr,oneof:"message"},{no:3,name:"offer",kind:"message",T:hr,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Gi,oneof:"message"},{no:5,name:"update",kind:"message",T:yo,oneof:"message"},{no:6,name:"track_published",kind:"message",T:ji,oneof:"message"},{no:8,name:"leave",kind:"message",T:hi,oneof:"message"},{no:9,name:"mute",kind:"message",T:Wi,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:Co,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Io,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:bo,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:ko,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Eo,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:To,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:vo,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:mo,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:_o,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:xo,oneof:"message"}]);class Ui extends pe{constructor(e){super(),this.codec="",this.cid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Ui().fromBinary(e,n)}static fromJson(e,n){return new Ui().fromJson(e,n)}static fromJsonString(e,n){return new Ui().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ui,e,n)}}Ui.runtime=R;Ui.typeName="livekit.SimulcastCodec";Ui.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class Vi extends pe{constructor(e){super(),this.cid="",this.name="",this.type=Yn.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=Qt.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=Ln.NONE,this.stream="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Vi().fromBinary(e,n)}static fromJson(e,n){return new Vi().fromJson(e,n)}static fromJsonString(e,n){return new Vi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Vi,e,n)}}Vi.runtime=R;Vi.typeName="livekit.AddTrackRequest";Vi.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:R.getEnumType(Yn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:R.getEnumType(Qt)},{no:9,name:"layers",kind:"message",T:fr,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Ui,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:R.getEnumType(Ln)},{no:15,name:"stream",kind:"scalar",T:9}]);class Gi extends pe{constructor(e){super(),this.candidateInit="",this.target=qn.PUBLISHER,R.util.initPartial(e,this)}static fromBinary(e,n){return new Gi().fromBinary(e,n)}static fromJson(e,n){return new Gi().fromJson(e,n)}static fromJsonString(e,n){return new Gi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Gi,e,n)}}Gi.runtime=R;Gi.typeName="livekit.TrickleRequest";Gi.fields=R.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:R.getEnumType(qn)}]);class Wi extends pe{constructor(e){super(),this.sid="",this.muted=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Wi().fromBinary(e,n)}static fromJson(e,n){return new Wi().fromJson(e,n)}static fromJsonString(e,n){return new Wi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Wi,e,n)}}Wi.runtime=R;Wi.typeName="livekit.MuteTrackRequest";Wi.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class go extends pe{constructor(e){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),R.util.initPartial(e,this)}static fromBinary(e,n){return new go().fromBinary(e,n)}static fromJson(e,n){return new go().fromJson(e,n)}static fromJsonString(e,n){return new go().fromJsonString(e,n)}static equals(e,n){return R.util.equals(go,e,n)}}go.runtime=R;go.typeName="livekit.JoinResponse";go.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:qu},{no:2,name:"participant",kind:"message",T:Jr},{no:3,name:"other_participants",kind:"message",T:Jr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Rs,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:bs},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:uo},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class mo extends pe{constructor(e){super(),this.iceServers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new mo().fromBinary(e,n)}static fromJson(e,n){return new mo().fromJson(e,n)}static fromJsonString(e,n){return new mo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(mo,e,n)}}mo.runtime=R;mo.typeName="livekit.ReconnectResponse";mo.fields=R.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:Rs,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:bs}]);class ji extends pe{constructor(e){super(),this.cid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new ji().fromBinary(e,n)}static fromJson(e,n){return new ji().fromJson(e,n)}static fromJsonString(e,n){return new ji().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ji,e,n)}}ji.runtime=R;ji.typeName="livekit.TrackPublishedResponse";ji.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Tr}]);class vo extends pe{constructor(e){super(),this.trackSid="",R.util.initPartial(e,this)}static fromBinary(e,n){return new vo().fromBinary(e,n)}static fromJson(e,n){return new vo().fromJson(e,n)}static fromJsonString(e,n){return new vo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(vo,e,n)}}vo.runtime=R;vo.typeName="livekit.TrackUnpublishedResponse";vo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class hr extends pe{constructor(e){super(),this.type="",this.sdp="",R.util.initPartial(e,this)}static fromBinary(e,n){return new hr().fromBinary(e,n)}static fromJson(e,n){return new hr().fromJson(e,n)}static fromJsonString(e,n){return new hr().fromJsonString(e,n)}static equals(e,n){return R.util.equals(hr,e,n)}}hr.runtime=R;hr.typeName="livekit.SessionDescription";hr.fields=R.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class yo extends pe{constructor(e){super(),this.participants=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new yo().fromBinary(e,n)}static fromJson(e,n){return new yo().fromJson(e,n)}static fromJsonString(e,n){return new yo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(yo,e,n)}}yo.runtime=R;yo.typeName="livekit.ParticipantUpdate";yo.fields=R.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:Jr,repeated:!0}]);class fi extends pe{constructor(e){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new fi().fromBinary(e,n)}static fromJson(e,n){return new fi().fromJson(e,n)}static fromJsonString(e,n){return new fi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(fi,e,n)}}fi.runtime=R;fi.typeName="livekit.UpdateSubscription";fi.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Ss,repeated:!0}]);class Es extends pe{constructor(e){super(),this.trackSids=[],this.disabled=!1,this.quality=mn.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new Es().fromBinary(e,n)}static fromJson(e,n){return new Es().fromJson(e,n)}static fromJsonString(e,n){return new Es().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Es,e,n)}}Es.runtime=R;Es.typeName="livekit.UpdateTrackSettings";Es.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:R.getEnumType(mn)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class hi extends pe{constructor(e){super(),this.canReconnect=!1,this.reason=Mo.UNKNOWN_REASON,R.util.initPartial(e,this)}static fromBinary(e,n){return new hi().fromBinary(e,n)}static fromJson(e,n){return new hi().fromJson(e,n)}static fromJsonString(e,n){return new hi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(hi,e,n)}}hi.runtime=R;hi.typeName="livekit.LeaveRequest";hi.fields=R.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:R.getEnumType(Mo)}]);class Ts extends pe{constructor(e){super(),this.trackSid="",this.layers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Ts().fromBinary(e,n)}static fromJson(e,n){return new Ts().fromJson(e,n)}static fromJsonString(e,n){return new Ts().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ts,e,n)}}Ts.runtime=R;Ts.typeName="livekit.UpdateVideoLayers";Ts.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:fr,repeated:!0}]);class _s extends pe{constructor(e){super(),this.metadata="",this.name="",R.util.initPartial(e,this)}static fromBinary(e,n){return new _s().fromBinary(e,n)}static fromJson(e,n){return new _s().fromJson(e,n)}static fromJsonString(e,n){return new _s().fromJsonString(e,n)}static equals(e,n){return R.util.equals(_s,e,n)}}_s.runtime=R;_s.typeName="livekit.UpdateParticipantMetadata";_s.fields=R.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class Rs extends pe{constructor(e){super(),this.urls=[],this.username="",this.credential="",R.util.initPartial(e,this)}static fromBinary(e,n){return new Rs().fromBinary(e,n)}static fromJson(e,n){return new Rs().fromJson(e,n)}static fromJsonString(e,n){return new Rs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Rs,e,n)}}Rs.runtime=R;Rs.typeName="livekit.ICEServer";Rs.fields=R.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class Co extends pe{constructor(e){super(),this.speakers=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Co().fromBinary(e,n)}static fromJson(e,n){return new Co().fromJson(e,n)}static fromJsonString(e,n){return new Co().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Co,e,n)}}Co.runtime=R;Co.typeName="livekit.SpeakersChanged";Co.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Cs,repeated:!0}]);class Io extends pe{constructor(e){super(),R.util.initPartial(e,this)}static fromBinary(e,n){return new Io().fromBinary(e,n)}static fromJson(e,n){return new Io().fromJson(e,n)}static fromJsonString(e,n){return new Io().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Io,e,n)}}Io.runtime=R;Io.typeName="livekit.RoomUpdate";Io.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:qu}]);class So extends pe{constructor(e){super(),this.participantSid="",this.quality=oo.POOR,this.score=0,R.util.initPartial(e,this)}static fromBinary(e,n){return new So().fromBinary(e,n)}static fromJson(e,n){return new So().fromJson(e,n)}static fromJsonString(e,n){return new So().fromJsonString(e,n)}static equals(e,n){return R.util.equals(So,e,n)}}So.runtime=R;So.typeName="livekit.ConnectionQualityInfo";So.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:R.getEnumType(oo)},{no:3,name:"score",kind:"scalar",T:2}]);class bo extends pe{constructor(e){super(),this.updates=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new bo().fromBinary(e,n)}static fromJson(e,n){return new bo().fromJson(e,n)}static fromJsonString(e,n){return new bo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(bo,e,n)}}bo.runtime=R;bo.typeName="livekit.ConnectionQualityUpdate";bo.fields=R.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:So,repeated:!0}]);class wo extends pe{constructor(e){super(),this.participantSid="",this.trackSid="",this.state=Wc.ACTIVE,R.util.initPartial(e,this)}static fromBinary(e,n){return new wo().fromBinary(e,n)}static fromJson(e,n){return new wo().fromJson(e,n)}static fromJsonString(e,n){return new wo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(wo,e,n)}}wo.runtime=R;wo.typeName="livekit.StreamStateInfo";wo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(Wc)}]);class ko extends pe{constructor(e){super(),this.streamStates=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new ko().fromBinary(e,n)}static fromJson(e,n){return new ko().fromJson(e,n)}static fromJsonString(e,n){return new ko().fromJsonString(e,n)}static equals(e,n){return R.util.equals(ko,e,n)}}ko.runtime=R;ko.typeName="livekit.StreamStateUpdate";ko.fields=R.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:wo,repeated:!0}]);class Hi extends pe{constructor(e){super(),this.quality=mn.LOW,this.enabled=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new Hi().fromBinary(e,n)}static fromJson(e,n){return new Hi().fromJson(e,n)}static fromJsonString(e,n){return new Hi().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Hi,e,n)}}Hi.runtime=R;Hi.typeName="livekit.SubscribedQuality";Hi.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(mn)},{no:2,name:"enabled",kind:"scalar",T:8}]);class Ao extends pe{constructor(e){super(),this.codec="",this.qualities=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Ao().fromBinary(e,n)}static fromJson(e,n){return new Ao().fromJson(e,n)}static fromJsonString(e,n){return new Ao().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ao,e,n)}}Ao.runtime=R;Ao.typeName="livekit.SubscribedCodec";Ao.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Hi,repeated:!0}]);class Eo extends pe{constructor(e){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Eo().fromBinary(e,n)}static fromJson(e,n){return new Eo().fromJson(e,n)}static fromJsonString(e,n){return new Eo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Eo,e,n)}}Eo.runtime=R;Eo.typeName="livekit.SubscribedQualityUpdate";Eo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Hi,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Ao,repeated:!0}]);class xs extends pe{constructor(e){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",R.util.initPartial(e,this)}static fromBinary(e,n){return new xs().fromBinary(e,n)}static fromJson(e,n){return new xs().fromJson(e,n)}static fromJsonString(e,n){return new xs().fromJsonString(e,n)}static equals(e,n){return R.util.equals(xs,e,n)}}xs.runtime=R;xs.typeName="livekit.TrackPermission";xs.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class Ns extends pe{constructor(e){super(),this.allParticipants=!1,this.trackPermissions=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Ns().fromBinary(e,n)}static fromJson(e,n){return new Ns().fromJson(e,n)}static fromJsonString(e,n){return new Ns().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ns,e,n)}}Ns.runtime=R;Ns.typeName="livekit.SubscriptionPermission";Ns.fields=R.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:xs,repeated:!0}]);class To extends pe{constructor(e){super(),this.participantSid="",this.trackSid="",this.allowed=!1,R.util.initPartial(e,this)}static fromBinary(e,n){return new To().fromBinary(e,n)}static fromJson(e,n){return new To().fromJson(e,n)}static fromJsonString(e,n){return new To().fromJsonString(e,n)}static equals(e,n){return R.util.equals(To,e,n)}}To.runtime=R;To.typeName="livekit.SubscriptionPermissionUpdate";To.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class Ps extends pe{constructor(e){super(),this.publishTracks=[],this.dataChannels=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new Ps().fromBinary(e,n)}static fromJson(e,n){return new Ps().fromJson(e,n)}static fromJsonString(e,n){return new Ps().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ps,e,n)}}Ps.runtime=R;Ps.typeName="livekit.SyncState";Ps.fields=R.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:hr},{no:2,name:"subscription",kind:"message",T:fi},{no:3,name:"publish_tracks",kind:"message",T:ji,repeated:!0},{no:4,name:"data_channels",kind:"message",T:Ms,repeated:!0},{no:5,name:"offer",kind:"message",T:hr}]);class Ms extends pe{constructor(e){super(),this.label="",this.id=0,this.target=qn.PUBLISHER,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ms().fromBinary(e,n)}static fromJson(e,n){return new Ms().fromJson(e,n)}static fromJsonString(e,n){return new Ms().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ms,e,n)}}Ms.runtime=R;Ms.typeName="livekit.DataChannelInfo";Ms.fields=R.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:R.getEnumType(qn)}]);class Dn extends pe{constructor(e){super(),this.scenario={case:void 0},R.util.initPartial(e,this)}static fromBinary(e,n){return new Dn().fromBinary(e,n)}static fromJson(e,n){return new Dn().fromJson(e,n)}static fromJsonString(e,n){return new Dn().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Dn,e,n)}}Dn.runtime=R;Dn.typeName="livekit.SimulateScenario";Dn.fields=R.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:R.getEnumType(am),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]);class Os extends pe{constructor(e){super(),this.timestamp=Le.zero,this.rtt=Le.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new Os().fromBinary(e,n)}static fromJson(e,n){return new Os().fromJson(e,n)}static fromJsonString(e,n){return new Os().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Os,e,n)}}Os.runtime=R;Os.typeName="livekit.Ping";Os.fields=R.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class _o extends pe{constructor(e){super(),this.lastPingTimestamp=Le.zero,this.timestamp=Le.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new _o().fromBinary(e,n)}static fromJson(e,n){return new _o().fromJson(e,n)}static fromJsonString(e,n){return new _o().fromJsonString(e,n)}static equals(e,n){return R.util.equals(_o,e,n)}}_o.runtime=R;_o.typeName="livekit.Pong";_o.fields=R.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class xa extends pe{constructor(e){super(),this.regions=[],R.util.initPartial(e,this)}static fromBinary(e,n){return new xa().fromBinary(e,n)}static fromJson(e,n){return new xa().fromJson(e,n)}static fromJsonString(e,n){return new xa().fromJsonString(e,n)}static equals(e,n){return R.util.equals(xa,e,n)}}xa.runtime=R;xa.typeName="livekit.RegionSettings";xa.fields=R.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:Ro,repeated:!0}]);class Ro extends pe{constructor(e){super(),this.region="",this.url="",this.distance=Le.zero,R.util.initPartial(e,this)}static fromBinary(e,n){return new Ro().fromBinary(e,n)}static fromJson(e,n){return new Ro().fromJson(e,n)}static fromJsonString(e,n){return new Ro().fromJsonString(e,n)}static equals(e,n){return R.util.equals(Ro,e,n)}}Ro.runtime=R;Ro.typeName="livekit.RegionInfo";Ro.fields=R.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class xo extends pe{constructor(e){super(),this.trackSid="",this.err=Wf.SE_UNKNOWN,R.util.initPartial(e,this)}static fromBinary(e,n){return new xo().fromBinary(e,n)}static fromJson(e,n){return new xo().fromJson(e,n)}static fromJsonString(e,n){return new xo().fromJsonString(e,n)}static equals(e,n){return R.util.equals(xo,e,n)}}xo.runtime=R;xo.typeName="livekit.SubscriptionResponse";xo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:R.getEnumType(Wf)}]);function pz(t){if(!(typeof t>"u"))return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const gz=5e3,kd=[];class Y extends Zs.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Y.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=He,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),gz):this.handleAppVisibilityChanged()},this.log=Wo((i=r.loggerName)!==null&&i!==void 0?i:Gs.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Y.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Pt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===Y.Kind.Video&&(n="video"),this.attachedElements.length===0&&Y.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(kd.forEach(s=>{s.parentElement===null&&!e&&(e=s)}),e&&kd.splice(kd.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Fl(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return e.play().then(()=>{this.emit(i?fe.AudioPlaybackStarted:fe.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?fe.AudioPlaybackFailed:fe.VideoPlaybackFailed,s):s.name==="AbortError"?He.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):He.warn("could not playback ".concat(i?"audio":"video"),s),i&&e&&r.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(fe.ElementAttached,e),e}detach(e){try{if(e){iu(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(fe.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{iu(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(fe.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(e){e.loggerName&&(this.log=Wo(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),kd.forEach(r=>{r.parentElement||(n=!1)}),n&&kd.push(e)}}handleAppVisibilityChanged(){return F(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){Pr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Pr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Fl(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!jc()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(jc()||Ru())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function iu(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return Yn.AUDIO;case e.Video:return Yn.VIDEO;default:return Yn.DATA}}t.kindToProto=i;function s(l){switch(l){case Yn.AUDIO:return e.Audio;case Yn.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=s;function o(l){switch(l){case n.Camera:return Qt.CAMERA;case n.Microphone:return Qt.MICROPHONE;case n.ScreenShare:return Qt.SCREEN_SHARE;case n.ScreenShareAudio:return Qt.SCREEN_SHARE_AUDIO;default:return Qt.UNKNOWN}}t.sourceToProto=o;function a(l){switch(l){case Qt.CAMERA:return n.Camera;case Qt.MICROPHONE:return n.Microphone;case Qt.SCREEN_SHARE:return n.ScreenShare;case Qt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function c(l){switch(l){case Wc.ACTIVE:return r.Active;case Wc.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(Y||(Y={}));function MO(t,e,n){var r;const i=(r=pz(t))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&CI(i.audio,e),i.video&&CI(i.video,n),i}function CI(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function uv(t){const e={};if(t.video)if(typeof t.video=="object"){const n={},r=n,i=t.video;Object.keys(i).forEach(s=>{switch(s){case"resolution":CI(r,i.resolution);break;default:r[s]=i[s]}}),e.video=n}else e.video=t.video;else e.video=!1;return t.audio?typeof t.audio=="object"?e.audio=t.audio:e.audio=!0:e.audio=!1,e}function mz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return F(this,void 0,void 0,function*(){const n=Jb();if(n){const r=n.createAnalyser();r.fftSize=2048;const i=r.frequencyBinCount,s=new Uint8Array(i);n.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield Oo(e),r.getByteTimeDomainData(s);const a=s.some(c=>c!==128&&c!==0);return n.close(),!a}return!1})}function Jb(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}function vz(t){return t===Y.Source.Microphone?"audioinput":t===Y.Source.Camera?"videoinput":void 0}function yz(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,jc()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio}}function OO(t){const e=t.split("/")[1].toLowerCase();if(!PO.includes(e))throw Error("Video codec not supported: ".concat(e));return e}function Cz(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new ji({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Pt(t){return t instanceof Y?{trackSid:t.sid,trackSource:t.source,trackMuted:t.isMuted,trackEnabled:t.mediaStreamTrack.enabled,trackKind:t.kind}:{trackSid:t.trackSid,trackName:t.trackName,track:t.track?Pt(t.track):void 0,trackEnabled:t.isEnabled,trackEncrypted:t.isEncrypted,trackMimeType:t.mimeType}}const Iz="|",vE="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function Sz(t){const e=t.split(Iz);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Oo(t){return F(this,void 0,void 0,function*(){return new Promise(e=>Fn.setTimeout(e,t))})}function yE(){return"addTransceiver"in RTCPeerConnection.prototype}function CE(){return"addTrack"in RTCPeerConnection.prototype}function bz(){if(!("getCapabilities"in RTCRtpSender)||jc())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function wz(){if(!("getCapabilities"in RTCRtpSender)||Ru())return!1;if(jc()){const n=jo();if(n!=null&&n.version&&Yb(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function sf(t){return t==="av1"||t==="vp9"}function II(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}const kz={Chrome:"100",Safari:"15",Firefox:"100"};function Az(t){if(!Pr()||!("setCodecPreferences"in t))return!1;const e=jo();if(!(e!=null&&e.name)||!e.version)return!1;const n=kz[e.name];return n?Yb(e.version,n)>=0:!1}function Ru(){var t;return((t=jo())===null||t===void 0?void 0:t.name)==="Firefox"}function Ez(){var t;return((t=jo())===null||t===void 0?void 0:t.name)==="Chrome"}function jc(){var t;return((t=jo())===null||t===void 0?void 0:t.name)==="Safari"}function Tz(){const t=jo();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function DO(){return Pr()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Pr(){return typeof document<"u"}function Hc(){return navigator.product=="ReactNative"}function SI(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function LO(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function BO(){if(!Hc())return;let t=LO();if(t)return t.platform}function IE(){if(Pr())return window.devicePixelRatio;if(Hc()){let t=LO();if(t)return t.devicePixelRatio}return 1}function Yb(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const o=parseInt(n[s],10),a=parseInt(r[s],10);if(o>a)return 1;if(o<a)return-1;if(s===i-1&&o===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function _z(t){for(const e of t)e.target.handleResize(e)}function Rz(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Yy=null;const SE=()=>(Yy||(Yy=new ResizeObserver(_z)),Yy);let qy=null;const bE=()=>(qy||(qy=new IntersectionObserver(Rz,{root:null,rootMargin:"0px"})),qy);function xz(){var t;const e=new fo({sdk:_u.JS,protocol:dz,version:uz});return Hc()&&(e.os=(t=BO())!==null&&t!==void 0?t:""),e}function wE(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(t/2,e/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=i.captureStream(),[a]=o.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let Ad;function Qy(){if(!Ad){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[Ad]=r.stream.getAudioTracks(),!Ad)throw Error("Could not get empty media stream audio track");Ad.enabled=!1}return Ad.clone()}class FO{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>F(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function Nz(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),r=Jb();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,s=r.createMediaStreamSource(new MediaStream([i])),o=r.createAnalyser();o.minDecibels=n.minDecibels,o.maxDecibels=n.maxDecibels,o.fftSize=n.fftSize,o.smoothingTimeConstant=n.smoothingTimeConstant,s.connect(o);const a=new Uint8Array(o.frequencyBinCount);return{calculateVolume:()=>{o.getByteFrequencyData(a);let u=0;for(const f of a)u+=Math.pow(f/255,2);return Math.sqrt(u/a.length)},analyser:o,cleanup:()=>F(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class Zi{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function Pz(t){return PO.includes(t)}function Nc(t){if(typeof t=="string")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function Mz(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function kE(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}const AE="default";class cr{static getInstance(){return this.instance===void 0&&(this.instance=new cr),this.instance}getDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r;return F(this,void 0,void 0,function*(){if(((r=cr.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){He.debug("awaiting getUserMedia promise");try{e?yield cr.userMediaPromiseMap.get(e):yield Promise.all(cr.userMediaPromiseMap.values())}catch{He.warn("error waiting for media permissons")}}let i=yield navigator.mediaDevices.enumerateDevices();if(n&&!(jc()&&this.hasDeviceInUse(e))&&(i.length===0||i.some(o=>{const a=o.label==="",c=e?o.kind===e:!0;return a&&c}))){const o={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},a=yield navigator.mediaDevices.getUserMedia(o);i=yield navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(c=>{c.stop()})}return e&&(i=i.filter(s=>s.kind===e)),i})}normalizeDeviceId(e,n,r){return F(this,void 0,void 0,function*(){if(n!==AE)return n;const s=(yield this.getDevices(e)).find(o=>o.groupId===r&&o.deviceId!==AE);return s==null?void 0:s.deviceId})}hasDeviceInUse(e){return e?cr.userMediaPromiseMap.has(e):cr.userMediaPromiseMap.size>0}}cr.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];cr.userMediaPromiseMap=new Map;const Oz=1e3;class xu extends Y{get constraints(){return this._constraints}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,s=arguments.length>4?arguments[4]:void 0;super(e,n,s),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Xb(()=>F(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>F(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(fe.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Zi,this.pauseUpstreamLock=new Zi,this.processorLock=new Zi,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Y.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(e,n){return F(this,void 0,void 0,function*(){if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{iu(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e&&this.processorElement){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");Fl(e,this.processorElement),this.processorElement.muted=!0,yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{Fl(r??e,i)}))})}waitForDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Oz;var n;return F(this,void 0,void 0,function*(){if(this.kind===Y.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=jo())===null||n===void 0?void 0:n.os)==="iOS"&&(yield Oo(10));const r=Date.now();for(;Date.now()-r<e;){const i=this.dimensions;if(i)return i;yield Oo(50)}throw new fs("unable to get track dimensions after timeout")})}getDeviceId(){return F(this,void 0,void 0,function*(){if(this.source===Y.Source.ScreenShare)return;const{deviceId:e,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===Y.Kind.Audio?"audioinput":"videoinput";return cr.getInstance().normalizeDeviceId(r,e,n)})}mute(){return F(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return F(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return F(this,void 0,void 0,function*(){if(!this.sender)throw new fs("unable to replace an unpublished track");return this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),this.providedByUser=n,this.processor&&(yield this.stopProcessor()),this})}restart(e){return F(this,void 0,void 0,function*(){e||(e=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const n={audio:!1,video:!1};this.kind===Y.Kind.Video?n.video=e:n.audio=e,this.attachedElements.forEach(s=>{iu(this.mediaStreamTrack,s)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const i=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return i.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(i),this._constraints=e,this.emit(fe.Restarted,this),this})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?fe.Muted:fe.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return F(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),DO()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return F(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(fe.UpstreamPaused,this);const n=jo();if((n==null?void 0:n.name)==="Safari"&&Yb(n.version,"12.0")<0)throw new Zb("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{e()}})}resumeUpstream(){return F(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(fe.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{e()}})}getRTCStatsReport(){var e;return F(this,void 0,void 0,function*(){return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r,i;return F(this,void 0,void 0,function*(){const s=yield this.processorLock.lock();try{if(this.log.debug("setting up processor",this.logContext),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(r=this.processorElement)!==null&&r!==void 0?r:document.createElement(this.kind),Fl(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(a=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:a})));const o={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield e.init(o),this.processor=e,this.processor.processedTrack){for(const a of this.attachedElements)a!==this.processorElement&&n&&(iu(this._mediaStreamTrack,a),Fl(this.processor.processedTrack,a));yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack)}}finally{s()}})}getProcessor(){return this.processor}stopProcessor(){var e,n;return F(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(e=this.processor.processedTrack)===null||e===void 0||e.stop(),yield this.processor.destroy(),this.processor=void 0,(n=this.processorElement)===null||n===void 0||n.remove(),this.processorElement=void 0,yield this.restart())})}}class Dz extends Zs.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:s,data:o}=n.data;switch(s){case"error":He.error(o.error.message),this.emit(Ra.EncryptionError,o.error);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==o.enabled&&o.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Ra.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(o.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(Ra.ParticipantEncryptionStatusChanged,o.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(Ga.KeyRatcheted,o.material,o.keyIndex);break}},this.onWorkerError=n=>{He.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Ra.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!iz())throw new Zb("tried to setup end-to-end encryption on an unsupported browser");if(He.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(He.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){He.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?He.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(me.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(te.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Ln.NONE,i.identity)),e.on(te.ConnectionStateChanged,r=>{r===tt.Connected&&e.participants.forEach(i=>{i.tracks.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==Ln.NONE,i.identity)})})}).on(te.TrackUnsubscribed,(r,i,s)=>{var o;const a={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(a)}).on(te.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(te.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),e.localParticipant.on(se.LocalTrackPublished,r=>F(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Ga.SetKey,r=>this.postKey(r)).on(Ga.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(o)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?OO(r.mimeType):void 0)}}setupE2EESender(e,n){if(!(e instanceof xu)||!n){n||He.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return F(this,void 0,void 0,function*(){if(this.worker){if(mI()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(ap in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let s=e.writableStream,o=e.readableStream;if(!s||!o){const c=e.createEncodedStreams();e.writableStream=c.writable,s=c.writable,e.readableStream=c.readable,o=c.readable}const a={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[o,s])}e[ap]=!0}})}handleSender(e,n,r){var i;if(!(ap in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(mI()){He.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,s)}else{He.info("initialize encoded streams");const s=e.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(o,[s.readable,s.writable])}e[ap]=!0}}}var of;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(of||(of={}));class Lz{constructor(){this.pendingTasks=new Map,this.taskMutex=new Zi,this.nextTaskIndex=0}run(e){return F(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:of.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=of.RUNNING,yield e()}finally{n.status=of.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return F(this,void 0,void 0,function*(){return this.run(()=>F(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const Bz=["syncState","trickle","offer","answer","simulate","leave"];function Fz(t){const e=Bz.indexOf(t.case)>=0;return He.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var $t;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})($t||($t={}));class qb{get currentState(){return this.state}get isDisconnected(){return this.state===$t.DISCONNECTING||this.state===$t.DISCONNECTED}get isEstablishingConnection(){return this.state===$t.CONNECTING||this.state===$t.RECONNECTING}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=$t.DISCONNECTED,this.log=He,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Wo((r=n.loggerName)!==null&&r!==void 0?r:Gs.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new Lz,this.queuedRequests=[],this.closingLock=new Zi,this.connectionLock=new Zi,this.state=$t.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return F(this,void 0,void 0,function*(){return this.state=$t.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return F(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=$t.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r,e=Mz(e),e=e.replace(/\/$/,""),e+="/rtc";const s=xz(),o=Uz(n,s,r);return new Promise((a,c)=>F(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();try{const u=()=>F(this,void 0,void 0,function*(){this.close(),clearTimeout(d),c(new Et("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),c(new Et("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),this.log.debug("connecting to ".concat(e+o),this.logContext),this.ws&&(yield this.close()),this.ws=new WebSocket(e+o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=f=>F(this,void 0,void 0,function*(){if(this.state!==$t.CONNECTED){clearTimeout(d);try{const h=yield fetch("http".concat(e.substring(2),"/validate").concat(o));if(h.status.toFixed(0).startsWith("4")){const p=yield h.text();c(new Et(p,0,h.status))}else c(new Et("Internal error",2,h.status))}catch{c(new Et("server was not reachable",1))}return}this.handleWSError(f)}),this.ws.onmessage=f=>F(this,void 0,void 0,function*(){var h,p,m,y;let g;if(typeof f.data=="string"){const v=JSON.parse(f.data);g=As.fromJson(v)}else if(f.data instanceof ArrayBuffer)g=As.fromBinary(new Uint8Array(f.data));else{this.log.error("could not decode websocket message: ".concat(typeof f.data),this.logContext);return}if(this.state!==$t.CONNECTED){let v=!1;if(((h=g.message)===null||h===void 0?void 0:h.case)==="join"?(this.state=$t.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=g.message.value.pingTimeout,this.pingIntervalDuration=g.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(g.message.value)):this.state===$t.RECONNECTING&&g.message.case!=="leave"?(this.state=$t.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((p=g.message)===null||p===void 0?void 0:p.case)==="reconnect"?a((m=g.message)===null||m===void 0?void 0:m.value):(a(),v=!0)):this.isEstablishingConnection&&g.message.case==="leave"?c(new Et("Received leave request while trying to (re)connect",4)):r.reconnect||c(new Et("did not receive join response, got ".concat((y=g.message)===null||y===void 0?void 0:y.case," instead"))),!v)return}this.signalLatency&&(yield Oo(this.signalLatency)),this.handleSignalResponse(g)}),this.ws.onclose=f=>{this.isEstablishingConnection&&c(new Et("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:f.reason,state:this.state})),this.handleOnClose(f.reason)}}finally{l()}}))}close(){return F(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();try{if(this.state=$t.DISCONNECTING,this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const n=new Promise(r=>{this.ws?this.ws.onclose=()=>{r()}:r()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([n,Oo(250)])),this.ws=void 0}}finally{this.state=$t.DISCONNECTED,this.clearPingInterval(),e()}})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:cm(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:cm(e)})}sendIceCandidate(e,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Gi({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Wi({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return this.sendRequest({case:"updateMetadata",value:new _s({metadata:e,name:n})})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new Ts({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new Ns({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Le.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Os({timestamp:Le.parse(Date.now()),rtt:Le.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new hi({canReconnect:!1,reason:Mo.CLIENT_INITIATED})})}sendRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return F(this,void 0,void 0,function*(){if(!n&&!Fz(e)&&this.state===$t.RECONNECTING){this.queuedRequests.push(()=>F(this,void 0,void 0,function*(){yield this.sendRequest(e,!0)}));return}if(n||(yield this.requestQueue.flush()),this.signalLatency&&(yield Oo(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(e==null?void 0:e.case),this.logContext);return}const i=new po({message:e});try{this.useJSON?this.ws.send(i.toJsonString()):this.ws.send(i.toBinary())}catch(s){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:s}))}})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let s=!1;if(i.case==="answer"){const o=EE(i.value);this.onAnswer&&this.onAnswer(o)}else if(i.case==="offer"){const o=EE(i.value);this.onOffer&&this.onOffer(o)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return F(this,void 0,void 0,function*(){if(this.state===$t.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Fn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Fn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Fn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Fn.clearInterval(this.pingInterval)}}function EE(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function cm(t){return new hr({sdp:t.sdp,type:t.type})}function Uz(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Hc()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.publishOnly!==void 0&&i.set("publish",n.publishOnly),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var UO={},VO={exports:{}},TE=VO.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(TE).forEach(function(t){var e=TE[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var GO=VO.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=e(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=e(a[d+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=GO,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var f=d[0],h=d.slice(2);f==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var p=0;p<(i[f]||[]).length;p+=1){var m=i[f][p];if(m.reg.test(h))return r(m,u,h)}}),c.media=l,c};var o=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(o,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(UO);var e0=GO,Vz=/%[sdv%]/g,Gz=function(t){var e=1,n=arguments,r=n.length;return t.replace(Vz,function(i){if(e>=r)return i;var s=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},Ed=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var s=0;s<e.names.length;s+=1){var o=e.names[s];e.name?i.push(n[e.name][o]):i.push(n[e.names[s]])}else i.push(n[e.name]);return Gz.apply(null,i)},Wz=["v","o","s","i","u","e","p","c","b","t","r","z","a"],jz=["i","c","b","a"],Hz=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=e.outerOrder||Wz,r=e.innerOrder||jz,i=[];return n.forEach(function(s){e0[s].forEach(function(o){o.name in t&&t[o.name]!=null?i.push(Ed(s,o,t)):o.push in t&&t[o.push]!=null&&t[o.push].forEach(function(a){i.push(Ed(s,o,a))})})}),t.media.forEach(function(s){i.push(Ed("m",e0.m[0],s)),r.forEach(function(o){e0[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(Ed(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(Ed(o,a,c))})})})}),i.join(`\r
`)+`\r
`},$z=UO,zz=Hz,t0=zz,Wd=$z.parse;const _E=.7,su={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class RE extends Zs.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.log=He,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Xb(s=>F(this,void 0,void 0,function*(){this.emit(su.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(s)s(o);else throw o}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Wo((i=r.loggerName)!==null&&i!==void 0?i:Gs.PCTransport),this.loggerOptions=r,this.config=e,this.mediaConstraints=n,this._pc=this.createPC()}createPC(){const e=Ez()?new RTCPeerConnection(this.config,this.mediaConstraints):new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return F(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){var n;return F(this,void 0,void 0,function*(){let r;if(e.type==="offer"){let{stereoMids:i,nackMids:s}=Xz(e);this.remoteStereoMids=i,this.remoteNackMids=s}else if(e.type==="answer"){const i=Wd((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{s.type==="audio"&&this.trackBitrates.some(o=>{if(!o.transceiver||s.mid!=o.transceiver.mid)return!1;let a=0;if(s.rtp.some(l=>l.codec.toUpperCase()===o.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of s.fmtp)if(l.payload===a){l.config=l.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),o.maxbr>0&&(l.config+=";maxaveragebitrate=".concat(o.maxbr*1e3)),c=!0;break}return c||o.maxbr>0&&s.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(o.maxbr*1e3)}),!0})}),r=t0(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(su.NegotiationComplete),e.sdp&&Wd(e.sdp).media.forEach(s=>{s.type==="video"&&this.emit(su.RTPVideoPayloadTypes,s.rtp)}))})}createAndSendOffer(e){var n;return F(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const s=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&s)yield this._pc.setRemoteDescription(s);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e),i=Wd((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{s.type==="audio"?xE(s,[],[]):s.type==="video"&&(Zz(s),this.trackBitrates.some(o=>{if(!s.msid||!o.cid||!s.msid.includes(o.cid))return!1;let a=0;if(s.rtp.some(l=>l.codec.toUpperCase()===o.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of s.fmtp)if(l.payload===a){l.config.includes("x-google-start-bitrate")||(l.config+=";x-google-start-bitrate=".concat(Math.round(o.maxbr*_E))),l.config.includes("x-google-max-bitrate")||(l.config+=";x-google-max-bitrate=".concat(o.maxbr)),c=!0;break}return c||s.fmtp.push({payload:a,config:"x-google-start-bitrate=".concat(Math.round(o.maxbr*_E),";x-google-max-bitrate=").concat(o.maxbr)}),!0}))}),yield this.setMungedSDP(r,t0(i)),this.onOffer(r)})}createAndSetAnswer(){var e;return F(this,void 0,void 0,function*(){const n=yield this.pc.createAnswer(),r=Wd((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{i.type==="audio"&&xE(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,t0(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new ln("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new ln("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var e;return F(this,void 0,void 0,function*(){if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const o=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(e,n,r){return F(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(s){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:s,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const o={error:s,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:o})),new vI(s)}})}}function xE(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function Zz(t){var e,n,r,i;const s=(n=(e=t.rtp[0])===null||e===void 0?void 0:e.codec)===null||n===void 0?void 0:n.toLowerCase();if(!sf(s))return;let o=0;((r=t.ext)===null||r===void 0?void 0:r.some(c=>c.uri===vE?!0:(c.value>o&&(o=c.value),!1)))||(i=t.ext)===null||i===void 0||i.push({value:o+1,uri:vE})}function Xz(t){var e;const n=[],r=[],i=Wd((e=t.sdp)!==null&&e!==void 0?e:"");let s=0;return i.media.forEach(o=>{var a;o.type==="audio"&&(o.rtp.some(c=>c.codec==="opus"?(s=c.payload,!0):!1),!((a=o.rtcpFb)===null||a===void 0)&&a.some(c=>c.payload===s&&c.type==="nack")&&r.push(o.mid),o.fmtp.some(c=>c.payload===s?(c.config.includes("sprop-stereo=1")&&n.push(o.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const bI="vp8",Kz={audioBitrate:om.music.maxBitrate,audioPreset:om.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:Kb.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:bI,backupCodec:!0},WO={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},jO={resolution:Hf.h720.resolution},Jz={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new V8,disconnectOnPageLeave:!0,expWebAudioMix:!1},Qb={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var dn;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(dn||(dn={}));class Yz{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=Qb.peerConnectionTimeout,this.log=He,this.updateState=()=>{var o;const a=this.state,c=this.requiredTransports.map(l=>l.getConnectionState());c.every(l=>l==="connected")?this.state=dn.CONNECTED:c.some(l=>l==="failed")?this.state=dn.FAILED:c.some(l=>l==="connecting")?this.state=dn.CONNECTING:c.every(l=>l==="closed")?this.state=dn.CLOSED:c.some(l=>l==="closed")?this.state=dn.CLOSING:c.every(l=>l==="new")&&(this.state=dn.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(dn[a]," to ").concat(dn[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Wo((i=r.loggerName)!==null&&i!==void 0?i:Gs.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n;const s={optional:[{googDscp:!0}]};this.publisher=new RE(e,s,r),this.subscriber=new RE(e,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,o,qn.PUBLISHER)},this.subscriber.onIceCandidate=o=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,o,qn.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,o)},this.subscriber.onTrack=o=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,o)},this.publisher.onOffer=o=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,o)},this.state=dn.NEW,this.connectionLock=new Zi}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return F(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return F(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return F(this,void 0,void 0,function*(){n===qn.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return F(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){var r;return F(this,void 0,void 0,function*(){const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,e,n)))}finally{i()}})}negotiate(e){return F(this,void 0,void 0,function*(){return new Promise((n,r)=>F(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",s),this.publisher.once(su.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(su.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===qn.PUBLISHER?this.publisher.getConnectedAddress():e===qn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return F(this,void 0,void 0,function*(){if(e.getConnectionState()!=="connected")return new Promise((s,o)=>F(this,void 0,void 0,function*(){const a=()=>{this.log.warn("abort transport connection",this.logContext),Fn.clearTimeout(c),o(new Et("room connection has been cancelled",3))};n!=null&&n.signal.aborted&&a(),n==null||n.signal.addEventListener("abort",a);const c=Fn.setTimeout(()=>{n==null||n.signal.removeEventListener("abort",a),o(new Et("could not establish pc connection"))},r);for(;this.state!==dn.CONNECTED;)if(yield Oo(50),n!=null&&n.signal.aborted){o(new Et("room connection has been cancelled",3));return}Fn.clearTimeout(c),n==null||n.signal.removeEventListener("abort",a),s()}))})}}const NE="_lossy",PE="_reliable",qz=2*1e3,ME="leave-reconnect";var wi;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(wi||(wi={}));class Qz extends Zs.EventEmitter{get isClosed(){return this._isClosed}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=Qb.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=wi.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=He,this.handleDataChannel=r=>{let{channel:i}=r;return F(this,void 0,void 0,function*(){if(i){if(i.label===PE)this.reliableDCSub=i;else if(i.label===NE)this.lossyDCSub=i;else return;this.log.debug("on data channel ".concat(i.id,", ").concat(i.label),this.logContext),i.onmessage=this.handleDataMessage}})},this.handleDataMessage=r=>F(this,void 0,void 0,function*(){var i,s;const o=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const c=ys.fromBinary(new Uint8Array(a));((i=c.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(me.ActiveSpeakersUpdate,c.value.value.speakers):((s=c.value)===null||s===void 0?void 0:s.case)==="user"&&this.emit(me.DataPacketReceived,c.value.value,c.kind)}finally{o()}}),this.handleDataError=r=>{const s=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:o}=r.error;this.log.error("DataChannel error on ".concat(s,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:o}))}else this.log.error("Unknown DataChannel error on ".concat(s),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const s=r.currentTarget.maxRetransmits===0?un.LOSSY:un.RELIABLE;this.updateAndEmitDCBufferStatus(s)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const s=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(me.Disconnected),this.close()},o=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:o,retryCount:this.reconnectAttempts});if(a===null){s(o);return}r===ME&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Fn.setTimeout(()=>this.attemptReconnect(i),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===wi.Connected&&r();const s=()=>{this.off(me.Disconnected,o),r()},o=()=>{this.off(me.Restarted,s),i()};this.once(me.Restarted,s),this.once(me.Disconnected,o)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(me.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===$t.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(eo.RR_SIGNAL_DISCONNECTED))},this.log=Wo((n=e.loggerName)!==null&&n!==void 0?n:Gs.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new qb(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Zi,this.dataProcessLock=new Zi,this.dcBufferStatus=new Map([[un.LOSSY,!0],[un.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(me.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(me.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(me.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(me.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(me.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(me.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(me.StreamStateChanged,r)}get logContext(){var e,n,r,i,s,o;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomSid:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,identity:(o=(s=this.latestJoinResponse)===null||s===void 0?void 0:s.participant)===null||o===void 0?void 0:o.identity}}join(e,n,r,i){return F(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=s.clientConfiguration,s}catch(s){if(s instanceof Et&&s.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw s}})}close(){return F(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.emit(me.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){var e;return F(this,void 0,void 0,function*(){yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return F(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new fs("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new Et("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){var e;return F(this,void 0,void 0,function*(){return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){var n;return F(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==dn.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new Yz(r,e.subscriberPrimary,this.loggerOptions),this.emit(me.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(i,s)=>{this.client.sendIceCandidate(i,s)},this.pcManager.onPublisherOffer=i=>{this.client.sendOffer(i)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(i,s,o)=>F(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(i),this.logContext),i===dn.CONNECTED){const a=this.pcState===wi.New;this.pcState=wi.Connected,a&&this.emit(me.Connected,e)}else i===dn.FAILED&&this.pcState===wi.Connected&&(this.pcState=wi.Disconnected,this.handleDisconnect("peerconnection failed",o==="failed"?eo.RR_SUBSCRIBER_FAILED:eo.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=i=>{this.emit(me.MediaTrackAdded,i.track,i.streams[0],i.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>F(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>F(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(me.LocalTrackUnpublished,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(me.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(me.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",eo.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{e!=null&&e.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(ME)):(this.emit(me.Disconnected,e==null?void 0:e.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason}))}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),i.push(o)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Yi.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(NE,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(PE,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(e,n,r){if(!("getCapabilities"in RTCRtpSender))return;const i=RTCRtpSender.getCapabilities(n);if(!i)return;this.log.debug("get sender capabilities",Object.assign(Object.assign({},this.logContext),{cap:i}));const s=[],o=[],a=[];i.codecs.forEach(c=>{const l=c.mimeType.toLowerCase();if(l==="audio/opus"){s.push(c);return}if(!(l==="video/".concat(r))){a.push(c);return}if(r==="h264"){c.sdpFmtpLine&&c.sdpFmtpLine.includes("profile-level-id=42e01f")?s.push(c):o.push(c);return}s.push(c)}),Az(e)&&e.setCodecPreferences(s.concat(o,a))}createSender(e,n,r){return F(this,void 0,void 0,function*(){if(yE())return yield this.createTransceiverRTCRtpSender(e,n,r);if(CE())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new ln("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return F(this,void 0,void 0,function*(){if(yE())return this.createSimulcastTransceiverSender(e,n,r,i);if(CE())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new ln("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new ln("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream);const s={direction:"sendonly",streams:i};r&&(s.sendEncodings=r);const o=yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,s);return e.kind===Y.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(o,e.kind,n.videoCodec),e.codec=n.videoCodec),o.sender})}createSimulcastTransceiverSender(e,n,r,i){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new ln("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return this.setPreferredCodec(o,e.kind,r.videoCodec),e.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(e){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new ln("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){var n,r,i;return F(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){He.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Yi.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:dn.NEW)===dn.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof ln?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:s})),o=!1):s instanceof gl||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",eo.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(me.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){var n,r,i;return F(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new ln("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(me.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new gl;s=yield this.join(e??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof Et&&o.reason===0?new ln("could not reconnect, token might be expired"):new gl}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(me.SignalRestarted,s),yield this.waitForPCReconnected(),this.client.currentState!==$t.CONNECTED)throw new gl("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(me.Restarted)}catch(s){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(e){var n;return F(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new ln("could not reconnect, url or token not saved");if(!this.pcManager)throw new ln("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(me.Resuming);try{this.setupSignalClientCallbacks();const r=yield this.client.reconnect(this.url,this.token,this.participantSid,e);if(r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}}catch(r){let i="";throw r instanceof Error&&(i=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Et&&r.reason===0?new ln("could not reconnect, token might be expired"):r instanceof Et&&r.reason===4?r:new gl(i)}if(this.emit(me.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==$t.CONNECTED)throw new gl("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(me.Resumed)})}waitForPCInitialConnection(e,n){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new ln("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return F(this,void 0,void 0,function*(){this.pcState=wi.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Oo(qz),!this.pcManager)throw new ln("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=wi.Connected}catch(e){throw this.pcState=wi.Disconnected,new Et("could not establish PC connection, ".concat(e.message))}})}sendDataPacket(e,n){return F(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var r;return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new ln("PC manager is closed");const i=n?this.pcManager.subscriber:this.pcManager.publisher,s=n?"Subscriber":"Publisher";if(!i)throw new Et("".concat(s," connection not set"));!n&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const o=this.dataChannelForKind(e,n);if((o==null?void 0:o.readyState)==="open")return;const a=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<a;){if(i.isICEConnected&&((r=this.dataChannelForKind(e,n))===null||r===void 0?void 0:r.readyState)==="open")return;yield Oo(50)}throw new Et("could not establish ".concat(s," connection, state: ").concat(i.getICEConnectionState()))})}ensurePublisherConnected(e){return F(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(e,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==dn.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return F(this,void 0,void 0,function*(){return new Promise((e,n)=>F(this,void 0,void 0,function*(){if(!this.pcManager){n(new vI("PC manager is closed"));return}this.pcManager.requirePublisher();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(me.Closing,i),this.pcManager.publisher.once(su.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(a=>{const c=a.codec.toLowerCase();Pz(c)&&o.set(a.payload,c)}),this.emit(me.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),e()}catch(s){s instanceof vI&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",eo.RR_UNKNOWN),n(s)}finally{this.off(me.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===un.LOSSY)return this.lossyDCSub;if(e===un.RELIABLE)return this.reliableDCSub}else{if(e===un.LOSSY)return this.lossyDC;if(e===un.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const s=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array;e.forEach(l=>{l.isDesired!==a&&c.push(l.trackSid)}),this.client.sendSyncState(new Ps({answer:s?cm({sdp:s.sdp,type:s.type}):void 0,offer:o?cm({sdp:o.sdp,type:o.type}):void 0,subscription:new fi({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:Cz(n),dataChannels:this.dataChannelsInfo()}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new Ms({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(un.LOSSY),qn.PUBLISHER),n(this.dataChannelForKind(un.RELIABLE),qn.PUBLISHER),n(this.dataChannelForKind(un.LOSSY,!0),qn.SUBSCRIBER),n(this.dataChannelForKind(un.RELIABLE,!0),qn.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Fn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Pr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Pr()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class gl extends Error{}class OE{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return SI(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return F(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),He.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return F(this,void 0,void 0,function*(){const n=yield fetch("".concat(eZ(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new Et("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}}function eZ(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}const ew=2e3;function dv(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}class br extends xu{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;super(e,Y.Kind.Audio,n,r,s),this.stopOnMute=!1,this.monitorSender=()=>F(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}o&&this.prevStats&&(this._currentBitrate=dv(o,this.prevStats)),this.prevStats=o}),this.audioContext=i,this.checkForSilence()}setDeviceId(e){return F(this,void 0,void 0,function*(){return this._constraints.deviceId===e?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||Nc(e)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Y.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Nc(this._constraints.deviceId);return this.source===Y.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return F(this,void 0,void 0,function*(){let n;if(e){const r=uv({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return F(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){Pr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},ew)))}setProcessor(e){var n;return F(this,void 0,void 0,function*(){const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack))}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){var e;return F(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return F(this,void 0,void 0,function*(){const e=yield mz(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(fe.AudioSilenceDetected)),e})}}function HO(t,e,n){switch(t.kind){case"audio":return new br(t,e,!1,void 0,n);case"video":return new oi(t,e,!1,n);default:throw new fs("unsupported track type: ".concat(t.kind))}}const tZ=Object.values(Hf),nZ=Object.values(yI),rZ=Object.values(Kb),iZ=[Hf.h180,Hf.h360],sZ=[yI.h180,yI.h360],oZ=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new ct(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),wI=["q","h","f"];function kI(t,e,n,r){var i,s;let o=r==null?void 0:r.videoEncoding;t&&(o=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!o&&!a&&!c||!e||!n)return[{}];o||(o=cZ(t,e,n,l),He.debug("using video encoding",o));const u=new ct(e,n,o.maxBitrate,o.maxFramerate,o.priority);if(c&&sf(l)){He.debug("using svc with scalabilityMode ".concat(c));const h=new $O(c),p=[];if(h.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));for(let m=0;m<h.spatial;m+=1)p.push({rid:wI[2-m],maxBitrate:o.maxBitrate/Math.pow(3,m),maxFramerate:u.encoding.maxFramerate});return p[0].scalabilityMode=c,He.debug("encodings",p),p}if(!a)return[o];let d=[];t?d=(i=LE(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:DE(t,u):d=(s=LE(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:DE(t,u);let f;if(d.length>0){const h=d[0];d.length>1&&([,f]=d);const p=Math.max(e,n);if(p>=960&&f)return n0(e,n,[h,f,u]);if(p>=480)return n0(e,n,[h,u])}return n0(e,n,[u])}function aZ(t,e,n){var r,i,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&He.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(s=a.height)!==null&&s!==void 0?s:(o=t.dimensions)===null||o===void 0?void 0:o.height;return kI(t.source===Y.Source.ScreenShare,c,l,n)}function cZ(t,e,n,r){const i=lZ(t,e,n);let{encoding:s}=i[0];const o=Math.max(e,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(s=c.encoding,c.width>=o)break}if(r)switch(r){case"av1":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function lZ(t,e,n){if(t)return rZ;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?tZ:nZ}function DE(t,e){if(t)return oZ(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?iZ:sZ}function n0(t,e,n){const r=[];if(n.forEach((i,s)=>{if(s>=wI.length)return;const o=Math.min(t,e),c={rid:wI[s],scaleResolutionDownBy:Math.max(1,o/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(c.maxFramerate=i.encoding.maxFramerate);const l=Ru()||s===0;i.encoding.priority&&l&&(c.priority=i.encoding.priority,c.networkPriority=i.encoding.priority),r.push(c)}),Hc()&&BO()==="ios"){let i;r.forEach(o=>{i?o.maxFramerate&&o.maxFramerate>i&&(i=o.maxFramerate):i=o.maxFramerate});let s=!0;r.forEach(o=>{var a;o.maxFramerate!=i&&(s&&(s=!1,He.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),He.info('Setting framerate of encoding "'.concat((a=o.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),o.maxFramerate=i)})}return r}function LE(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class $O{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}const uZ=5e3;class oi extends xu{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,Y.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.monitorSender=()=>F(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const o=new Map(s.map(a=>[a.rid,a]));if(this.prevStats){let a=0;o.forEach((c,l)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(l);a+=dv(c,d)}),this._currentBitrate=a}this.prevStats=o}),this.senderLock=new Zi}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Pr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},ew))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var n,r,i,s,o;return F(this,void 0,void 0,function*(){yield e.pauseUpstream.call(this);try{for(var a=!0,c=Cl(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)s=l.value,a=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var n,r,i,s,o;return F(this,void 0,void 0,function*(){yield e.resumeUpstream.call(this);try{for(var a=!0,c=Cl(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){s=l.value,a=!1;const u=s;yield(o=u.sender)===null||o===void 0?void 0:o.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){var e;return F(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,framesSent:i.framesSent,timestamp:i.timestamp,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges},a=r.get(i.remoteId);a&&(o.jitter=a.jitter,o.packetsLost=a.packetsLost,o.roundTripTime=a.roundTripTime),n.push(o)}}),n})}setPublishingQuality(e){const n=[];for(let r=mn.LOW;r<=mn.HIGH;r+=1)n.push(new Hi({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}setDeviceId(e){return F(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Nc(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||Nc(e)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(e){var n,r,i,s;return F(this,void 0,void 0,function*(){let o;if(e){const u=uv({video:e});typeof u.video!="boolean"&&(o=u.video)}yield this.restart(o);try{for(var a=!0,c=Cl(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){s=l.value,a=!1;const u=s;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var i,s,o,a,c,l;return F(this,void 0,void 0,function*(){if(yield r.setProcessor.call(this,e,n),!((c=this.processor)===null||c===void 0)&&c.processedTrack)try{for(var u=!0,d=Cl(this.simulcastCodecs.values()),f;f=yield d.next(),i=f.done,!i;u=!0)a=f.value,u=!1,yield(l=a.sender)===null||l===void 0?void 0:l.replaceTrack(this.processor.processedTrack)}catch(h){s={error:h}}finally{try{!u&&!i&&(o=d.return)&&(yield o.call(d))}finally{if(s)throw s.error}}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e))throw new Error("".concat(e," already added"));const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},uZ))}setPublishingCodecs(e){var n,r,i,s,o,a,c;return F(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=Cl(e);i=yield r.next(),s=i.done,!s;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const f of u.qualities)if(f.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield BE(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return l})}setPublishingLayers(e){return F(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield BE(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return F(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),DO()&&this.isInBackground&&this.source===Y.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function BE(t,e,n,r,i,s){return F(this,void 0,void 0,function*(){const o=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},s),{sender:t,qualities:n,senderEncodings:e}));try{const a=t.getParameters(),{encodings:c}=a;if(!c)return;if(c.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch");return}let l=!1;!1&&c[0].scalabilityMode||c.forEach((d,f)=>{var h;let p=(h=d.rid)!==null&&h!==void 0?h:"";p===""&&(p="q");const m=zO(p),y=n.find(g=>g.quality===m);y&&d.active!==y.enabled&&(l=!0,d.active=y.enabled,i.debug("setting layer ".concat(y.quality," to ").concat(d.active?"enabled":"disabled"),s),Ru()&&(y.enabled?(d.scaleResolutionDownBy=e[f].scaleResolutionDownBy,d.maxBitrate=e[f].maxBitrate,d.maxFrameRate=e[f].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),l&&(a.encodings=c,i.debug("setting encodings",Object.assign(Object.assign({},s),{encodings:a.encodings})),yield t.setParameters(a))}finally{o()}})}function zO(t){switch(t){case"f":return mn.HIGH;case"h":return mn.MEDIUM;case"q":return mn.LOW;default:return mn.HIGH}}function FE(t,e,n,r){if(!n)return[new fr({quality:mn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new $O(i),o=[];for(let a=0;a<s.spatial;a+=1)o.push(new fr({quality:mn.HIGH-a,width:Math.ceil(t/Math.pow(2,a)),height:Math.ceil(e/Math.pow(2,a)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(3,a)):0,ssrc:0}));return o}return n.map(i=>{var s,o,a;const c=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let l=zO((o=i.rid)!==null&&o!==void 0?o:"");return new fr({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}class ZO extends Y{constructor(e,n,r,i,s){super(e,r,s),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?fe.Muted:fe.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver=void 0,this._currentBitrate=0,this.emit(fe.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var e;return F(this,void 0,void 0,function*(){return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),ew))}}class Pc extends ZO{constructor(e,n,r,i,s,o){super(e,n,Y.Kind.Audio,r,o),this.monitorReceiver=()=>F(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=dv(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;Hc()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Hc())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return F(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(II(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&II(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(fe.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(fe.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return F(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const r0=100;class af extends ZO{constructor(e,n,r,i,s){super(e,n,Y.Kind.Video,r,s),this.elementInfos=[],this.monitorReceiver=()=>F(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=dv(o,this.prevStats)),this.prevStats=o}),this.debouncedHandleResize=Xb(()=>{this.updateDimensions()},r0),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?iu(this._mediaStreamTrack,n):Fl(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new dZ(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return F(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return F(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((a,c)=>Math.max(a,c.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,s=this.elementInfos.some(a=>a.pictureInPicture),o=this.elementInfos.some(a=>a.visible)&&!i||s;if(this.lastVisible!==o){if(!o&&Date.now()-r<r0){Fn.setTimeout(()=>{this.updateVisibility()},r0);return}this.lastVisible=o,this.emit(fe.VisibilityChanged,o,this)}}updateDimensions(){var e,n;let r=0,i=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const a=o.width()*s,c=o.height()*s;a+c>r+i&&(r=a,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(fe.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?IE():n||(IE()>2?2:1)}}class dZ{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:o}=r;s===this.element&&(this.isIntersecting=o,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??UE(e),this.isPiP=Pr()&&document.pictureInPictureElement===e,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=UE(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var e;(e=this.handleResize)===null||e===void 0||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,bE().observe(this.element),SE().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var e,n;(e=bE())===null||e===void 0||e.unobserve(this.element),(n=SE())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function UE(t){let e=t.offsetTop,n=t.offsetLeft;const r=t.offsetWidth,i=t.offsetHeight,{hidden:s}=t,{opacity:o,display:a}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&e+i>window.pageYOffset&&n+r>window.pageXOffset&&!s&&(o!==""?parseFloat(o)>0:!0)&&a!=="none"}class to extends Zs.EventEmitter{constructor(e,n,r,i){var s;super(),this.metadataMuted=!1,this.encryption=Ln.NONE,this.log=He,this.handleMuted=()=>{this.emit(fe.Muted)},this.handleUnmuted=()=>{this.emit(fe.Unmuted)},this.log=Wo((s=i==null?void 0:i.loggerName)!==null&&s!==void 0?s:Gs.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=Y.Source.Unknown}setTrack(e){this.track&&(this.track.off(fe.Muted,this.handleMuted),this.track.off(fe.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(fe.Muted,this.handleMuted),e.on(fe.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Pt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Ln.NONE}get audioTrack(){if(this.track instanceof br||this.track instanceof Pc)return this.track}get videoTrack(){if(this.track instanceof oi||this.track instanceof af)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Y.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Y.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(to||(to={}));class $f extends to{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(fe.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(fe.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(fe.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var e;return F(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){var e;return F(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){var e;return F(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){var e;return F(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}}var ui;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(ui||(ui={}));function fZ(t){switch(t){case oo.EXCELLENT:return ui.Excellent;case oo.GOOD:return ui.Good;case oo.POOR:return ui.Poor;case oo.LOST:return ui.Lost;default:return ui.Unknown}}class XO extends Zs.EventEmitter{get logContext(){var e,n;return Object.assign(Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e)),{participantSid:this.sid,participantId:this.identity})}get isEncrypted(){return this.tracks.size>0&&Array.from(this.tracks.values()).every(e=>e.isEncrypted)}get isAgent(){var e,n;return(n=(e=this.permissions)===null||e===void 0?void 0:e.agent)!==null&&n!==void 0?n:!1}constructor(e,n,r,i,s){var o;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ui.Unknown,this.log=He,this.log=Wo((o=s==null?void 0:s.loggerName)!==null&&o!==void 0?o:Gs.Participant),this.loggerOptions=s,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){for(const[,n]of this.tracks)if(n.source===e)return n}getTrackByName(e){for(const[,n]of this.tracks)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrack(Y.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrack(Y.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrack(Y.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(se.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(se.ParticipantNameChanged,e)}setPermissions(e){var n,r,i,s,o;const a=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||e.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((l,u)=>{var d;return l!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=e,c&&this.emit(se.ParticipantPermissionsChanged,a),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(se.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=fZ(e),n!==this._connectionQuality&&this.emit(se.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTracks.forEach(n=>(n.track instanceof Pc||n.track instanceof br)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(fe.Muted,()=>{this.emit(se.TrackMuted,e)}),e.on(fe.Unmuted,()=>{this.emit(se.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case Y.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case Y.Kind.Video:this.videoTracks.set(e.trackSid,e);break}}}function hZ(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new xs({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class tw extends to{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=mn.HIGH,this.handleEnded=s=>{this.setTrack(void 0),this.emit(fe.Ended,s)},this.handleVisibilityChange=s=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(s),this.logContext),this.disabled=!s,this.emitTrackUpdate()},this.handleVideoDimensionsChange=s=>{this.log.debug("adaptivestream video dimensions ".concat(s.width,"x").concat(s.height),this.logContext),this.videoDimensions=s,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new fi({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Ss({participantSid:"",trackSids:[this.trackSid]})]});this.emit(fe.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?to.SubscriptionStatus.Unsubscribed:super.isSubscribed?to.SubscriptionStatus.Subscribed:to.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?to.PermissionStatus.Allowed:to.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(this.track instanceof af&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&this.track instanceof af&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(fe.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(fe.VisibilityChanged,this.handleVisibilityChange),i.off(fe.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(fe.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(fe.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(fe.VisibilityChanged,this.handleVisibilityChange),e.on(fe.Ended,this.handleEnded),this.emit(fe.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(fe.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?fe.Muted:fe.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(fe.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(fe.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===Y.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof af&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Es({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=mn.HIGH,this.emit(fe.UpdateSettings,e)}}class zf extends XO{static fromParticipantInfo(e,n){return new zf(e,n.sid,n.identity,n.name,n.metadata)}constructor(e,n,r,i,s,o){super(n,r||"",i,s,o),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(fe.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Pt(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(fe.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(fe.SubscriptionPermissionChanged,n=>{this.emit(se.TrackSubscriptionPermissionChanged,e,n)}),e.on(fe.SubscriptionStatusChanged,n=>{this.emit(se.TrackSubscriptionStatusChanged,e,n)}),e.on(fe.Subscribed,n=>{this.emit(se.TrackSubscribed,n,e)}),e.on(fe.Unsubscribed,n=>{this.emit(se.TrackUnsubscribed,n,e)}),e.on(fe.SubscriptionFailed,n=>{this.emit(se.TrackSubscriptionFailed,e.trackSid,n)})}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrack(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y.Source.Microphone;const n=this.getTrack(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,s,o){let a=this.getTrackPublication(n);if(a||n.startsWith("TR")||this.tracks.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(o===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(se.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,s,o-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Pt(a))),this.emit(se.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new af(e,n,i,s):l=new Pc(e,n,i,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(r),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&l instanceof Pc&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var s,o;let a=this.getTrackPublication(i.sid);if(a)a.updateInfo(i);else{const c=Y.kindFromProto(i.type);if(!c)return;a=new tw(c,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(o=this.loggerOptions)===null||o===void 0?void 0:o.loggerName}),a.updateInfo(i),r.set(i.sid,a);const l=Array.from(this.tracks.values()).find(u=>u.source===(a==null?void 0:a.source));l&&a.source!==Y.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Pt(l),newTrack:Pt(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.tracks.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Pt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(se.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.tracks.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.tracks.delete(e),r.kind){case Y.Kind.Audio:this.audioTracks.delete(e);break;case Y.Kind.Video:this.videoTracks.delete(e);break}n&&this.emit(se.TrackUnpublished,r)}setAudioOutput(e){return F(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTracks.forEach(r=>{var i;r.track instanceof Pc&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}class AI extends XO{constructor(e,n,r,i){super(e,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Ln.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new FO)},this.handleReconnected=()=>{var s,o;(o=(s=this.reconnectFuture)===null||s===void 0?void 0:s.resolve)===null||o===void 0||o.call(s),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var s,o;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(o=(s=this.reconnectFuture)===null||s===void 0?void 0:s.reject)===null||o===void 0||o.call(s,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(s=>hZ(s)))},this.onTrackUnmuted=s=>{this.onTrackMuted(s,s.isUpstreamPaused)},this.onTrackMuted=(s,o)=>{if(o===void 0&&(o=!0),!s.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Pt(s)));return}this.engine.updateMuteStatus(s.sid,o)},this.onTrackUpstreamPaused=s=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Pt(s))),this.onTrackMuted(s,!0)},this.onTrackUpstreamResumed=s=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Pt(s))),this.onTrackMuted(s,s.isMuted)},this.handleSubscribedQualityUpdate=s=>F(this,void 0,void 0,function*(){var o,a,c,l,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const f=this.videoTracks.get(s.trackSid);if(!f){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:s.trackSid}));return}if(s.subscribedCodecs.length>0){if(!f.videoTrack)return;const y=yield f.videoTrack.setPublishingCodecs(s.subscribedCodecs);try{for(var h=!0,p=Cl(y),m;m=yield p.next(),o=m.done,!o;h=!0){l=m.value,h=!1;const g=l;hz(g)&&(this.log.debug("publish ".concat(g," for ").concat(f.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Pt(f))),yield this.publishAdditionalCodecForTrack(f.videoTrack,g,f.options))}}catch(g){a={error:g}}finally{try{!h&&!o&&(c=p.return)&&(yield c.call(p))}finally{if(a)throw a.error}}}else s.subscribedQualities.length>0&&(yield(d=f.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(s.subscribedQualities))}),this.handleLocalTrackUnpublished=s=>{const o=this.tracks.get(s.trackSid);if(!o){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:s.trackSid}));return}this.unpublishTrack(o.track)},this.handleTrackEnded=s=>F(this,void 0,void 0,function*(){if(s.source===Y.Source.ScreenShare||s.source===Y.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Pt(s))),this.unpublishTrack(s);else if(s.isUserProvided)yield s.mute();else if(s instanceof br||s instanceof oi)try{if(Pr())try{const o=yield navigator==null?void 0:navigator.permissions.query({name:s.source===Y.Source.Camera?"camera":"microphone"});if(o&&o.state==="denied")throw this.log.warn("user has revoked access to ".concat(s.source),Object.assign(Object.assign({},this.logContext),Pt(s))),o.onchange=()=>{o.state!=="denied"&&(s.isMuted||s.restartTrack(),o.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}s.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Pt(s))),yield s.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Pt(s))),yield s.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Ln.NONE}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(me.RemoteMute,(n,r)=>{const i=this.tracks.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(me.Connected,this.handleReconnected).on(me.SignalRestarted,this.handleReconnected).on(me.SignalResumed,this.handleReconnected).on(me.Restarting,this.handleReconnecting).on(me.Resuming,this.handleReconnecting).on(me.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(me.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(me.Disconnected,this.handleDisconnected)}setMetadata(e){var n;this.engine.client.sendUpdateLocalMetadata(e,(n=this.name)!==null&&n!==void 0?n:"")}setName(e){var n;this.engine.client.sendUpdateLocalMetadata((n=this.metadata)!==null&&n!==void 0?n:"",e)}setCameraEnabled(e,n,r){return this.setTrackEnabled(Y.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(Y.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(Y.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(se.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return F(this,void 0,void 0,function*(){this.encryptionType=e?Ln.GCM:Ln.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){var s,o;return F(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n}));let a=this.getTrack(e);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(e)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:e}));return}this.pendingPublishing.add(e);try{switch(e){case Y.Source.Camera:c=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case Y.Source.Microphone:c=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case Y.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new fs(e)}const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Pt(d))),l.push(this.publishTrack(d,i));[a]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&!(l instanceof fs)&&this.emit(se.MediaDevicesError,l),l}finally{this.pendingPublishing.delete(e)}}else if(a&&a.track)if(e===Y.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrack(Y.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return F(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Y.Source.Camera)||this.pendingPublishing.has(Y.Source.Microphone))){this.pendingPublishing.add(Y.Source.Camera),this.pendingPublishing.add(Y.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Y.Source.Camera),this.pendingPublishing.delete(Y.Source.Microphone)}}})}createTracks(e){var n,r;return F(this,void 0,void 0,function*(){const i=MO(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),s=uv(i);let o;try{o=yield navigator.mediaDevices.getUserMedia(s)}catch(a){throw a instanceof Error&&(s.audio&&(this.microphoneError=a),s.video&&(this.cameraError=a)),a}return s.audio&&(this.microphoneError=void 0,this.emit(se.AudioStreamAcquired)),s.video&&(this.cameraError=void 0),o.getTracks().map(a=>{const c=a.kind==="audio";c?e.audio:e.video;let l;const u=c?s.audio:s.video;typeof u!="boolean"&&(l=u);const d=HO(a,l,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return d.kind===Y.Kind.Video?d.source=Y.Source.Camera:d.kind===Y.Kind.Audio&&(d.source=Y.Source.Microphone),d.mediaStream=o,d})})}createScreenTracks(e){return F(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new Zb("getDisplayMedia not supported");e.resolution===void 0&&!Tz()&&(e.resolution=Kb.h1080fps30.resolution);const n=yz(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new fs("no video track found");const s=new oi(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});s.source=Y.Source.ScreenShare,e.contentHint&&(s.mediaStreamTrack.contentHint=e.contentHint);const o=[s];if(r.getAudioTracks().length>0){this.emit(se.AudioStreamAcquired);const a=new br(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=Y.Source.ScreenShareAudio,o.push(a)}return o})}publishTrack(e,n){var r,i,s,o;return F(this,void 0,void 0,function*(){yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,e instanceof xu&&this.pendingPublishPromises.has(e)&&(yield this.pendingPublishPromises.get(e));let a;if(e instanceof MediaStreamTrack)a=e.getConstraints();else{a=e.constraints;let h;switch(e.source){case Y.Source.Microphone:h="audioinput";break;case Y.Source.Camera:h="videoinput"}h&&this.activeDeviceMap.has(h)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(h)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new br(e,a,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":e=new oi(e,a,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new fs("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e instanceof br&&e.setAudioContext(this.audioContext);let c;if(this.tracks.forEach(h=>{h.track&&h.track===e&&(c=h)}),c)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),Pt(c))),c;const l="channelCount"in e.mediaStreamTrack.getSettings()&&e.mediaStreamTrack.getSettings().channelCount===2||e.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:l;u&&(n||(n={}),n.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),Pt(e))),n.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(s=n.dtx)!==null&&s!==void 0||(n.dtx=!1),(o=n.red)!==null&&o!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);jc()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),d.simulcast=!1),d.source&&(e.source=d.source);const f=this.publish(e,d,u);this.pendingPublishPromises.set(e,f);try{return yield f}catch(h){throw h}finally{this.pendingPublishPromises.delete(e)}})}publish(e,n,r){var i,s,o,a,c,l,u,d,f,h,p,m,y;return F(this,void 0,void 0,function*(){Array.from(this.tracks.values()).find(_=>e instanceof xu&&_.source===e.source)&&e.source!==Y.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Pt(e))),n.stopMicTrackOnMute&&e instanceof br&&(e.stopOnMute=!0),e.source===Y.Source.ScreenShare&&Ru()&&(n.simulcast=!1),n.videoCodec==="av1"&&!bz()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!wz()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=bI);const v=n.videoCodec;e.on(fe.Muted,this.onTrackMuted),e.on(fe.Unmuted,this.onTrackUnmuted),e.on(fe.Ended,this.handleTrackEnded),e.on(fe.UpstreamPaused,this.onTrackUpstreamPaused),e.on(fe.UpstreamResumed,this.onTrackUpstreamResumed);const S=new Vi({cid:e.mediaStreamTrack.id,name:n.name,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream});let E;if(e.kind===Y.Kind.Video){let _={width:0,height:0};try{_=yield e.waitForDimensions()}catch{const N=(a=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&a!==void 0?a:Hf.h720.resolution;_={width:N.width,height:N.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Pt(e)),{dims:_}))}S.width=_.width,S.height=_.height,e instanceof oi&&(sf(v)&&(e.source===Y.Source.ScreenShare&&v==="vp9"&&(n.scalabilityMode="L1T3"),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),S.simulcastCodecs=[new Ui({codec:v,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:bI}),n.backupCodec&&v!==n.backupCodec.codec&&S.encryption===Ln.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),S.simulcastCodecs.push(new Ui({codec:n.backupCodec.codec,cid:""})))),E=kI(e.source===Y.Source.ScreenShare,S.width,S.height,n),S.layers=FE(S.width,S.height,E,sf(n.videoCodec))}else e.kind===Y.Kind.Audio&&(E=[{maxBitrate:(u=(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate)!==null&&u!==void 0?u:n.audioBitrate,priority:(f=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&f!==void 0?f:"high",networkPriority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new ln("cannot publish track when not connected");const k=yield this.engine.addTrack(S);let b;if(k.codecs.forEach(_=>{b===void 0&&(b=_.mimeType)}),b&&e.kind===Y.Kind.Video){const _=OO(b);_!==v&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Pt(e)),{codec:_})),n.videoCodec=_,E=kI(e.source===Y.Source.ScreenShare,S.width,S.height,n))}const A=new $f(e.kind,k,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(A.options=n,e.sid=k.sid,!this.engine.pcManager)throw new ln("pcManager is not ready");if(this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:E,trackInfo:k})),e.sender=yield this.engine.createSender(e,n,E),E)if(Ru()&&e.kind===Y.Kind.Audio){let _;for(const P of this.engine.pcManager.publisher.getTransceivers())if(P.sender===e.sender){_=P;break}_&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:_,codec:"opus",maxbr:!((m=E[0])===null||m===void 0)&&m.maxBitrate?E[0].maxBitrate/1e3:0})}else e.codec&&sf(e.codec)&&(!((y=E[0])===null||y===void 0)&&y.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:S.cid,codec:e.codec,maxbr:E[0].maxBitrate/1e3});return yield this.engine.negotiate(),e instanceof oi?e.startMonitor(this.engine.client):e instanceof br&&e.startMonitor(),this.addTrackPublication(A),this.emit(se.LocalTrackPublished,A),A})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){var i;return F(this,void 0,void 0,function*(){if(this.encryptionType!==Ln.NONE)return;let s;if(this.tracks.forEach(d=>{d.track&&d.track===e&&(s=d)}),!s)throw new fs("track is not published");if(!(e instanceof oi))throw new fs("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=aZ(e,n,o);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Pt(e)));return}const c=e.addSimulcastTrack(n,a),l=new Vi({cid:c.mediaStreamTrack.id,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:o.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=FE(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new ln("cannot publish track when not connected");const u=yield this.engine.addTrack(l);yield this.engine.createSimulcastSender(e,c,o,a),yield this.engine.negotiate(),this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:u}))})}unpublishTrack(e,n){var r,i;return F(this,void 0,void 0,function*(){const s=this.getPublicationForTrack(e),o=s?Pt(s):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),o)),!s||!s.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),o));return}e=s.track,e.off(fe.Muted,this.onTrackMuted),e.off(fe.Unmuted,this.onTrackUnmuted),e.off(fe.Ended,this.handleTrackEnded),e.off(fe.UpstreamPaused,this.onTrackUpstreamPaused),e.off(fe.UpstreamResumed,this.onTrackUpstreamResumed),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&e.stop();let a=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<dn.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),e instanceof oi){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(a=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),o),{error:l}))}switch(this.tracks.delete(s.trackSid),s.kind){case Y.Kind.Audio:this.audioTracks.delete(s.trackSid);break;case Y.Kind.Video:this.videoTracks.delete(s.trackSid);break}return this.emit(se.LocalTrackUnpublished,s),s.setTrack(void 0),a&&(yield this.engine.negotiate()),s})}unpublishTracks(e){return F(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof $f)})}republishAllTracks(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return F(this,void 0,void 0,function*(){const r=[];this.tracks.forEach(i=>{i.track&&(e&&(i.options=Object.assign(Object.assign({},i.options),e)),r.push(i))}),yield Promise.all(r.map(i=>F(this,void 0,void 0,function*(){const s=i.track;yield this.unpublishTrack(s,!1),n&&!s.isMuted&&s.source!==Y.Source.ScreenShare&&s.source!==Y.Source.ScreenShareAudio&&(s instanceof br||s instanceof oi)&&!s.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:i.trackSid})),yield s.restartTrack()),yield this.publishTrack(s,i.options)})))})}publishData(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F(this,void 0,void 0,function*(){const i=Array.isArray(r)?r:r==null?void 0:r.destination,s=[],o=Array.isArray(r)?void 0:r.topic;i!==void 0&&i.forEach(c=>{c instanceof zf?s.push(c.sid):s.push(c)});const a=new ys({kind:n,value:{case:"user",value:new Is({participantSid:this.sid,payload:e,destinationSids:s,topic:o})}});yield this.engine.sendDataPacket(a,n)})}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var r,i;const s=this.tracks.get(n.sid);if(s){const o=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Pt(s)),{mutedOnServer:o})),this.engine.client.sendMuteTrack(n.sid,o))}}),!0)}getPublicationForTrack(e){let n;return this.tracks.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(i instanceof br||i instanceof oi)&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}}var tt;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting"})(tt||(tt={}));const pZ=2*1e3;class lm extends Zs.EventEmitter{constructor(e){var n,r,i;super(),n=this,this.state=tt.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=He,this.connect=(s,o,a)=>F(this,void 0,void 0,function*(){var c;const l=yield this.disconnectLock.lock();if(this.state===tt.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),l(),Promise.resolve();if(this.connectFuture)return l(),this.connectFuture.promise;this.setAndEmitConnectionState(tt.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==s&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),SI(new URL(s))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new OE(s,o):this.regionUrlProvider.updateToken(o),this.regionUrlProvider.fetchRegionSettings().catch(f=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:f}))}));const u=(f,h,p)=>F(this,void 0,void 0,function*(){var m;this.abortController&&this.abortController.abort();const y=new AbortController;this.abortController=y,l==null||l();try{yield this.attemptConnection(p??s,o,a,y),this.abortController=void 0,f()}catch(g){if(this.regionUrlProvider&&g instanceof Et&&g.reason!==3&&g.reason!==0){let v=null;try{v=yield this.regionUrlProvider.getNextBestRegionUrl((m=this.abortController)===null||m===void 0?void 0:m.signal)}catch(S){if(S instanceof Et&&(S.status===401||S.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(S);return}}v?(this.log.info("Initial connection failed with ConnectionError: ".concat(g.message,". Retrying with another region: ").concat(v),this.logContext),yield u(f,h,v)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(g))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(g)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new FO((f,h)=>{u(f,h,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(s,o,a,c,l,u)=>F(this,void 0,void 0,function*(){var d,f,h;const p=yield a.join(s,o,{autoSubscribe:c.autoSubscribe,publishOnly:c.publishOnly,adaptiveStream:typeof l.adaptiveStream=="object"?!0:l.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},u.signal);let m=p.serverInfo;if(m||(m={version:p.serverVersion,region:p.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(m).map(y=>{let[g,v]=y;return"".concat(g,": ").concat(v)}).join(", ")),{room:(d=p.room)===null||d===void 0?void 0:d.name,roomSid:(f=p.room)===null||f===void 0?void 0:f.sid,identity:(h=p.participant)===null||h===void 0?void 0:h.identity}),!p.serverVersion)throw new oz("unknown server version");return p.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),l.dynacast=!1),p}),this.applyJoinResponse=s=>{const o=s.participant;this.localParticipant.sid=o.sid,this.localParticipant.identity=o.identity,this.handleParticipantUpdates([o,...s.otherParticipants]),s.room&&this.handleRoomUpdate(s.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(s.sifTrailer)},this.attemptConnection=(s,o,a,c)=>F(this,void 0,void 0,function*(){var l,u;this.state===tt.Reconnecting?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((l=this.regionUrlProvider)===null||l===void 0)&&l.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Qb),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const d=yield this.connectSignal(s,o,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(d),this.setupLocalParticipantEvents(),this.emit(te.SignalConnected)}catch(d){yield this.engine.close(),this.recreateEngine();const f=new Et("could not establish signal connection");throw d instanceof Error&&(f.message="".concat(f.message,": ").concat(d.message)),d instanceof Et&&(f.reason=d.reason,f.status=d.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:d})),f}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Et("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(d){throw yield this.engine.close(),this.recreateEngine(),d}Pr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Pr()&&(document.addEventListener("freeze",this.onPageLeave),(u=navigator.mediaDevices)===null||u===void 0||u.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(tt.Connected),this.emit(te.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return F(n,void 0,void 0,function*(){var o,a,c,l;const u=yield this.disconnectLock.lock();try{if(this.state===tt.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===tt.Connecting||this.state===tt.Reconnecting)&&(this.log.warn("abort connection attempt",this.logContext),(o=this.abortController)===null||o===void 0||o.abort(),(c=(a=this.connectFuture)===null||a===void 0?void 0:a.reject)===null||c===void 0||c.call(a,new Et("Client initiated disconnect")),this.connectFuture=void 0),!((l=this.engine)===null||l===void 0)&&l.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(s,Mo.CLIENT_INITIATED),this.engine=void 0}finally{u()}})},this.onPageLeave=()=>F(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>F(this,void 0,void 0,function*(){const s=[],o=jo();if(o&&o.os==="iOS"){const a="livekit-dummy-audio-el";let c=document.getElementById(a);if(!c){c=document.createElement("audio"),c.id=a,c.autoplay=!0,c.hidden=!0;const l=Qy();l.enabled=!0;const u=new MediaStream([l]);c.srcObject=u,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:u)}),document.body.append(c),this.once(te.Disconnected,()=>{c==null||c.remove()})}s.push(c)}this.participants.forEach(a=>{a.audioTracks.forEach(c=>{c.track&&c.track.attachedElements.forEach(l=>{s.push(l)})})});try{yield Promise.all([this.acquireAudioContext(),...s.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>F(this,void 0,void 0,function*(){const s=[];for(const o of this.participants.values())o.videoTracks.forEach(a=>{var c;(c=a.track)===null||c===void 0||c.attachedElements.forEach(l=>{s.includes(l)||s.push(l)})});yield Promise.all(s.map(o=>o.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(o=>{o.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const s of this.participants.values())this.handleParticipantDisconnected(s.sid,s);this.setAndEmitConnectionState(tt.Reconnecting)&&this.emit(te.Reconnecting)},this.handleSignalRestarted=s=>F(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(s.serverRegion),Object.assign(Object.assign({},this.logContext),{region:s.serverRegion})),this.cachedParticipantSids=[],this.applyJoinResponse(s);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(o){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:o}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:s.serverRegion}))}catch{return}this.setAndEmitConnectionState(tt.Connected),this.emit(te.Reconnected),this.registerConnectionReconcile(),this.participants.forEach(o=>{this.emit(te.ParticipantConnected,o)})}),this.handleParticipantUpdates=s=>{s.forEach(o=>{if(o.identity===this.localParticipant.identity){this.localParticipant.updateInfo(o);return}const a=this.identityToSid.get(o.identity);a&&a!==o.sid&&this.handleParticipantDisconnected(a,this.participants.get(a));let c=this.participants.get(o.sid);const l=!c;o.state===Gc.DISCONNECTED?this.handleParticipantDisconnected(o.sid,c):(c=this.getOrCreateParticipant(o.sid,o),l||c.updateInfo(o))})},this.handleActiveSpeakersUpdate=s=>{const o=[],a={};s.forEach(c=>{if(a[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),o.push(this.localParticipant);else{const l=this.participants.get(c.sid);l&&(l.audioLevel=c.level,l.setIsSpeaking(!0),o.push(l))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(c=>{a[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=o,this.emitWhenConnected(te.ActiveSpeakersChanged,o)},this.handleSpeakersChanged=s=>{const o=new Map;this.activeSpeakers.forEach(c=>{o.set(c.sid,c)}),s.forEach(c=>{let l=this.participants.get(c.sid);c.sid===this.localParticipant.sid&&(l=this.localParticipant),l&&(l.audioLevel=c.level,l.setIsSpeaking(c.active),c.active?o.set(c.sid,l):o.delete(c.sid))});const a=Array.from(o.values());a.sort((c,l)=>l.audioLevel-c.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(te.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=s=>{s.streamStates.forEach(o=>{const a=this.participants.get(o.participantSid);if(!a)return;const c=a.getTrackPublication(o.trackSid);!c||!c.track||(c.track.streamState=Y.streamStateFromProto(o.state),a.emit(se.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(te.TrackStreamStateChanged,c,c.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=s=>{const o=this.participants.get(s.participantSid);if(!o)return;const a=o.getTrackPublication(s.trackSid);a&&a.setAllowed(s.allowed)},this.handleSubscriptionError=s=>{const o=Array.from(this.participants.values()).find(c=>c.tracks.has(s.trackSid));if(!o)return;const a=o.getTrackPublication(s.trackSid);a&&a.setSubscriptionError(s.err)},this.handleDataPacket=(s,o)=>{const a=this.participants.get(s.participantSid);this.emit(te.DataReceived,s.payload,a,o,s.topic),a==null||a.emit(se.DataReceived,s.payload,o)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(te.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=s=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:s})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(te.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(te.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(te.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>F(this,void 0,void 0,function*(){this.emit(te.MediaDevicesChanged)}),this.handleRoomUpdate=s=>{const o=this.roomInfo;this.roomInfo=s,o&&o.metadata!==s.metadata&&this.emitWhenConnected(te.RoomMetadataChanged,s.metadata),(o==null?void 0:o.activeRecording)!==s.activeRecording&&this.emitWhenConnected(te.RecordingStatusChanged,s.activeRecording)},this.handleConnectionQualityUpdate=s=>{s.updates.forEach(o=>{if(o.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(o.quality);return}const a=this.participants.get(o.participantSid);a&&a.setConnectionQuality(o.quality)})},this.onLocalParticipantMetadataChanged=s=>{this.emit(te.ParticipantMetadataChanged,s,this.localParticipant)},this.onLocalParticipantNameChanged=s=>{this.emit(te.ParticipantNameChanged,s,this.localParticipant)},this.onLocalTrackMuted=s=>{this.emit(te.TrackMuted,s,this.localParticipant)},this.onLocalTrackUnmuted=s=>{this.emit(te.TrackUnmuted,s,this.localParticipant)},this.onLocalTrackPublished=s=>F(this,void 0,void 0,function*(){var o;this.emit(te.LocalTrackPublished,s,this.localParticipant),s.track instanceof br&&(yield s.track.checkForSilence())&&this.emit(te.LocalAudioSilenceDetected,s);const a=yield(o=s.track)===null||o===void 0?void 0:o.getDeviceId(),c=vz(s.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.localParticipant.activeDeviceMap.set(c,a),this.emit(te.ActiveDeviceChanged,c,a))}),this.onLocalTrackUnpublished=s=>{this.emit(te.LocalTrackUnpublished,s,this.localParticipant)},this.onLocalConnectionQualityChanged=s=>{this.emit(te.ConnectionQualityChanged,s,this.localParticipant)},this.onMediaDevicesError=s=>{this.emit(te.MediaDevicesError,s)},this.onLocalParticipantPermissionsChanged=s=>{this.emit(te.ParticipantPermissionsChanged,s,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.cachedParticipantSids=[],this.identityToSid=new Map,this.options=Object.assign(Object.assign({},Jz),e),this.log=Wo((r=this.options.loggerName)!==null&&r!==void 0?r:Gs.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},WO),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},jO),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Kz),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Zi,this.localParticipant=new AI("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Nc(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Nc(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Nc(this.options.audioOutput.deviceId)).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(e){return F(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&(this.e2eeManager=new Dz(this.options.e2ee),this.e2eeManager.on(Ra.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof AI&&(this.isE2EEEnabled=n),this.emit(te.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Ra.EncryptionError,n=>this.emit(te.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){return{room:this.name,roomSid:this.sid,identity:this.localParticipant.identity}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}get sid(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.sid)!==null&&n!==void 0?n:""}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Qz(this.options),this.engine.on(me.ParticipantUpdate,this.handleParticipantUpdates).on(me.RoomUpdate,this.handleRoomUpdate).on(me.SpeakersChanged,this.handleSpeakersChanged).on(me.StreamStateChanged,this.handleStreamStateUpdate).on(me.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(me.SubscriptionError,this.handleSubscriptionError).on(me.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(me.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(me.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(me.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(me.DataPacketReceived,this.handleDataPacket).on(me.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(tt.Reconnecting)&&this.emit(te.Reconnecting),this.cachedParticipantSids=Array.from(this.participants.keys())}).on(me.Resumed,()=>{this.setAndEmitConnectionState(tt.Connected),this.emit(te.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),Array.from(this.participants.values()).filter(n=>!this.cachedParticipantSids.includes(n.sid)).forEach(n=>this.emit(te.ParticipantConnected,n)),this.cachedParticipantSids=[]}).on(me.SignalResumed,()=>{this.state===tt.Reconnecting&&this.sendSyncState()}).on(me.Restarting,this.handleRestarting).on(me.SignalRestarted,this.handleSignalRestarted).on(me.DCBufferStatusChanged,(e,n)=>{this.emit(te.DCBufferStatusChanged,e,n)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cr.getInstance().getDevices(e,n)}prepareConnection(e,n){return F(this,void 0,void 0,function*(){if(this.state===tt.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(SI(new URL(e))&&n){this.regionUrlProvider=new OE(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===tt.Disconnected&&(this.regionUrl=r,yield fetch(kE(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(kE(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){if(this.localParticipant.identity===e)return this.localParticipant;const n=this.identityToSid.get(e);if(n)return this.participants.get(n)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return F(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Dn({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Dn({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Dn({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Dn({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>F(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Dn({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>F(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Dn({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Dn({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>F(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new hi({reason:Mo.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Dn({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveAudioOutputDevice(){var e,n;return(n=(e=this.options.audioOutput)===null||e===void 0?void 0:e.deviceId)!==null&&n!==void 0?n:""}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var i,s,o;return F(this,void 0,void 0,function*(){let a=!1,c=!0;const l=r?{exact:n}:n;if(e==="audioinput"){const u=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.audioTracks.values()).filter(f=>f.source===Y.Source.Microphone);try{c=(yield Promise.all(d.map(f=>{var h;return(h=f.audioTrack)===null||h===void 0?void 0:h.setDeviceId(l)}))).every(f=>f===!0)}catch(f){throw this.options.audioCaptureDefaults.deviceId=u,f}}else if(e==="videoinput"){const u=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.videoTracks.values()).filter(f=>f.source===Y.Source.Camera);try{c=(yield Promise.all(d.map(f=>{var h;return(h=f.videoTrack)===null||h===void 0?void 0:h.setDeviceId(l)}))).every(f=>f===!0)}catch(f){throw this.options.videoCaptureDefaults.deviceId=u,f}}else if(e==="audiooutput"){if(!II()&&!this.options.expWebAudioMix||this.options.expWebAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(i=(o=this.options).audioOutput)!==null&&i!==void 0||(o.audioOutput={});const u=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=n,a=u!==l;try{this.options.expWebAudioMix?(s=this.audioContext)===null||s===void 0||s.setSinkId(n):yield Promise.all(Array.from(this.participants.values()).map(d=>d.setAudioOutput({deviceId:n})))}catch(d){throw this.options.audioOutput.deviceId=u,d}}return a&&c&&(this.localParticipant.activeDeviceMap.set(e,n),this.emit(te.ActiveDeviceChanged,e,n)),c})}setupLocalParticipantEvents(){this.localParticipant.on(se.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(se.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(se.TrackMuted,this.onLocalTrackMuted).on(se.TrackUnmuted,this.onLocalTrackUnmuted).on(se.LocalTrackPublished,this.onLocalTrackPublished).on(se.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(se.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(se.MediaDevicesError,this.onMediaDevicesError).on(se.AudioStreamAcquired,this.startAudio).on(se.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.participants.clear(),this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===tt.Connecting||this.state===tt.Reconnecting){const u=()=>{this.onTrackAdded(e,n,r),d()},d=()=>{this.off(te.Reconnected,u),this.off(te.Connected,u),this.off(te.Disconnected,d)};this.once(te.Reconnected,u),this.once(te.Connected,u),this.once(te.Disconnected,d);return}if(this.state===tt.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=Sz(n.id),s=i[0];let o=i[1],a=e.id;if(o&&o.startsWith("TR")&&(a=o),s===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=this.participants.get(s);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(e,a,n,r,l)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.state!==tt.Disconnected){this.regionUrl=void 0;try{this.participants.forEach(i=>{i.tracks.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.tracks.forEach(i=>{var s,o;i.track&&this.localParticipant.unpublishTrack(i.track,e),e&&((s=i.track)===null||s===void 0||s.detach(),(o=i.track)===null||o===void 0||o.stop())}),this.localParticipant.off(se.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(se.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(se.TrackMuted,this.onLocalTrackMuted).off(se.TrackUnmuted,this.onLocalTrackUnmuted).off(se.LocalTrackPublished,this.onLocalTrackPublished).off(se.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(se.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(se.MediaDevicesError,this.onMediaDevicesError).off(se.AudioStreamAcquired,this.startAudio).off(se.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Pr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(tt.Disconnected),this.emit(te.Disconnected,n)}}}handleParticipantDisconnected(e,n){this.participants.delete(e),n&&(this.identityToSid.delete(n.identity),n.tracks.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(te.ParticipantDisconnected,n))}acquireAudioContext(){var e,n;return F(this,void 0,void 0,function*(){if(typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?this.audioContext=this.options.expWebAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=Jb())!==null&&e!==void 0?e:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.expWebAudioMix&&this.participants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(te.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=zf.fromParticipantInfo(this.engine.client,n):i=new zf(this.engine.client,e,"",void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.expWebAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>this.log.warn("Could not set audio output: ".concat(s.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.participants.has(e))return this.participants.get(e);const r=this.createParticipant(e,n);return this.participants.set(e,r),this.identityToSid.set(n.identity,n.sid),this.emitWhenConnected(te.ParticipantConnected,r),r.on(se.TrackPublished,i=>{this.emitWhenConnected(te.TrackPublished,i,r)}).on(se.TrackSubscribed,(i,s)=>{i.kind===Y.Kind.Audio?(i.on(fe.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(fe.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===Y.Kind.Video&&(i.on(fe.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(fe.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(te.TrackSubscribed,i,s,r)}).on(se.TrackUnpublished,i=>{this.emit(te.TrackUnpublished,i,r)}).on(se.TrackUnsubscribed,(i,s)=>{this.emit(te.TrackUnsubscribed,i,s,r)}).on(se.TrackSubscriptionFailed,i=>{this.emit(te.TrackSubscriptionFailed,i,r)}).on(se.TrackMuted,i=>{this.emitWhenConnected(te.TrackMuted,i,r)}).on(se.TrackUnmuted,i=>{this.emitWhenConnected(te.TrackUnmuted,i,r)}).on(se.ParticipantMetadataChanged,i=>{this.emitWhenConnected(te.ParticipantMetadataChanged,i,r)}).on(se.ParticipantNameChanged,i=>{this.emitWhenConnected(te.ParticipantNameChanged,i,r)}).on(se.ConnectionQualityChanged,i=>{this.emitWhenConnected(te.ConnectionQualityChanged,i,r)}).on(se.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(te.ParticipantPermissionsChanged,i,r)}).on(se.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(te.TrackSubscriptionStatusChanged,i,s,r)}).on(se.TrackSubscriptionFailed,(i,s)=>{this.emit(te.TrackSubscriptionFailed,i,r,s)}).on(se.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(te.TrackSubscriptionPermissionChanged,i,s,r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.participants.values()).reduce((r,i)=>(r.push(...i.getTracks()),r),[]),n=this.localParticipant.getTracks();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.participants.values())for(const n of e.videoTracks.values())n.isSubscribed&&n instanceof tw&&n.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Fn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Mo.STATE_MISMATCH))):e=0},pZ)}clearConnectionReconcile(){this.connectionReconcileInterval&&Fn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(te.ConnectionStateChanged,this.state),!0)}emitWhenConnected(e){if(this.state===tt.Connected){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.emit(e,...r)}return!1}simulateParticipants(e){var n,r;return F(this,void 0,void 0,function*(){const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new qu({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Le.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Jr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(te.SignalConnected),this.emit(te.Connected),this.setAndEmitConnectionState(tt.Connected),i.video){const o=new $f(Y.Kind.Video,new Tr({source:Qt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Yn.AUDIO,name:"video-dummy"}),new oi(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:wE(160*((n=s.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(se.LocalTrackPublished,o)}if(i.audio){const o=new $f(Y.Kind.Audio,new Tr({source:Qt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Yn.AUDIO}),new br(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Qy(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(o),this.localParticipant.emit(se.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let a=new Jr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:Gc.ACTIVE,tracks:[],joinedAt:Le.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(s.video){const l=wE(160*((r=s.aspectRatios[o%s.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new Tr({source:Qt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Yn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}if(s.audio){const l=Qy(),u=new Tr({source:Qt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Yn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==te.ActiveSpeakersChanged){const s=KO(r).filter(o=>o!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:s}))}return super.emit(e,...r)}}function KO(t){return t.map(e=>{if(e)return Array.isArray(e)?KO(e):typeof e=="object"?"logContext"in e&&e.logContext:e})}var Di;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Di||(Di={}));class ed extends Zs.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Di.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=e,this.token=n,this.name=this.constructor.name,this.room=new lm(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(e){return F(this,void 0,void 0,function*(){if(this.status!==Di.IDLE)throw Error("check is running already");this.setStatus(Di.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Di.SKIPPED&&this.setStatus(this.isSuccess()?Di.SUCCESS:Di.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(){return F(this,void 0,void 0,function*(){return this.room.state===tt.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return F(this,void 0,void 0,function*(){this.room&&this.room.state!==tt.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Di.SKIPPED)}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function JO(t){var e,n;return F(this,void 0,void 0,function*(){t??(t={}),(e=t.audio)!==null&&e!==void 0||(t.audio=!0),(n=t.video)!==null&&n!==void 0||(t.video=!0);const r=MO(t,WO,jO),i=uv(r),s=navigator.mediaDevices.getUserMedia(i);t.audio&&(cr.userMediaPromiseMap.set("audioinput",s),s.catch(()=>cr.userMediaPromiseMap.delete("audioinput"))),t.video&&(cr.userMediaPromiseMap.set("videoinput",s),s.catch(()=>cr.userMediaPromiseMap.delete("videoinput")));const o=yield s;return o.getTracks().map(a=>{const c=a.kind==="audio";c?t.audio:t.video;let l;const u=c?i.audio:i.video;typeof u!="boolean"&&(l=u),l?l.deviceId=a.getSettings().deviceId:l={deviceId:a.getSettings().deviceId};const d=HO(a,l);return d.kind===Y.Kind.Video?d.source=Y.Source.Camera:d.kind===Y.Kind.Audio&&(d.source=Y.Source.Microphone),d.mediaStream=o,d})})}function gZ(t){return F(this,void 0,void 0,function*(){return(yield JO({audio:!1,video:t}))[0]})}function mZ(t){return F(this,void 0,void 0,function*(){return(yield JO({audio:t,video:!1}))[0]})}class vZ extends ed{get description(){return"Can publish audio"}perform(){var e;return F(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield mZ();n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&o.mediaType==="audio"&&(s=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," audio packets"))})}}class yZ extends ed{get description(){return"Can publish video"}perform(){var e;return F(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield gZ();n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&o.mediaType==="video"&&(s=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}}class CZ extends ed{get description(){return"Resuming connection after interruption"}perform(){var e;return F(this,void 0,void 0,function*(){const n=yield this.connect();let r=!1,i=!1,s;const o=new Promise(c=>{setTimeout(c,5e3),s=c});n.on(te.Reconnecting,()=>{r=!0}).on(te.Reconnected,()=>{i=!0,s(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const a=n.engine.client.onClose;if(a&&a(""),yield o,r){if(!i||n.state!==tt.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class IZ extends ed{get description(){return"Can connect via TURN"}perform(){var e,n;return F(this,void 0,void 0,function*(){const r=new qb,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let s=!1,o=!1,a=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(o=!0,a=!0):l.startsWith("turns:")&&(o=!0,a=!0,s=!0),l.startsWith("stun:")&&(a=!0);a?o&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class SZ extends ed{get description(){return"Establishing WebRTC connection"}perform(){return F(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(te.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,s)=>{if(i.candidate){const o=new RTCIceCandidate(i);let a="".concat(o.protocol," ").concat(o.address,":").concat(o.port," ").concat(o.type);o.address&&(bZ(o.address)?a+=" (private)":o.protocol==="tcp"&&o.tcpType==="passive"?(e=!0,a+=" (passive)"):o.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,s)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),He.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function bZ(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class wZ extends ed{get description(){return"Connecting to signal connection via WebSocket"}perform(){var e,n,r;return F(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new qb;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((e=s.serverInfo)===null||e===void 0?void 0:e.edition)===Tu.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Ooe extends Zs.EventEmitter{constructor(e,n){super(),this.checkResults=new Map,this.url=e,this.token=n}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Di.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Di.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return F(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token),i=o=>{this.updateCheck(n,o)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(wZ)})}checkWebRTC(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(SZ)})}checkTURN(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(IZ)})}checkReconnect(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(CZ)})}checkPublishAudio(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(vZ)})}checkPublishVideo(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(yZ)})}}function kZ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=t instanceof xu?t.mediaStreamTrack:t,i=r.getSettings();let s={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const o=i.facingMode;He.debug("rawFacingMode",{rawFacingMode:o}),o&&typeof o=="string"&&TZ(o)&&(s={facingMode:o,confidence:"high"})}if(["low","medium"].includes(s.confidence)){He.debug("Try to get facing mode from device label: (".concat(r.label,")"));const o=EZ(r.label);o!==void 0&&(s=o)}return s}const VE=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),AZ=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function EZ(t){var e;const n=t.trim().toLowerCase();if(n!=="")return VE.has(n)?VE.get(n):(e=Array.from(AZ.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function TZ(t){return t===void 0||["user","environment","left","right"].includes(t)}const EI=Math.min,ou=Math.max,um=Math.round,Xa=t=>({x:t,y:t}),_Z={left:"right",right:"left",bottom:"top",top:"bottom"},RZ={start:"end",end:"start"};function GE(t,e,n){return ou(t,EI(e,n))}function fv(t,e){return typeof t=="function"?t(e):t}function $c(t){return t.split("-")[0]}function hv(t){return t.split("-")[1]}function YO(t){return t==="x"?"y":"x"}function qO(t){return t==="y"?"height":"width"}function pv(t){return["top","bottom"].includes($c(t))?"y":"x"}function QO(t){return YO(pv(t))}function xZ(t,e,n){n===void 0&&(n=!1);const r=hv(t),i=QO(t),s=qO(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(o=dm(o)),[o,dm(o)]}function NZ(t){const e=dm(t);return[TI(t),e,TI(e)]}function TI(t){return t.replace(/start|end/g,e=>RZ[e])}function PZ(t,e,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?s:o;default:return[]}}function MZ(t,e,n,r){const i=hv(t);let s=PZ($c(t),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),e&&(s=s.concat(s.map(TI)))),s}function dm(t){return t.replace(/left|right|bottom|top/g,e=>_Z[e])}function OZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function DZ(t){return typeof t!="number"?OZ(t):{top:t,right:t,bottom:t,left:t}}function fm(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}function WE(t,e,n){let{reference:r,floating:i}=t;const s=pv(e),o=QO(e),a=qO(o),c=$c(e),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(hv(e)){case"start":h[o]-=f*(n&&l?-1:1);break;case"end":h[o]+=f*(n&&l?-1:1);break}return h}const LZ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let l=await o.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=WE(l,r,c),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:g}=a[m],{x:v,y:S,data:E,reset:k}=await g({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:t,floating:e}});u=v??u,d=S??d,h={...h,[y]:{...h[y],...E}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(l=k.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:i}):k.rects),{x:u,y:d}=WE(l,f,c)),m=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function eD(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=fv(e,t),p=DZ(h),y=a[f?d==="floating"?"reference":"floating":d],g=fm(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{...o.floating,x:r,y:i}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},k=fm(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:S,strategy:c}):v);return{top:(g.top-k.top+p.top)/E.y,bottom:(k.bottom-g.bottom+p.bottom)/E.y,left:(g.left-k.left+p.left)/E.x,right:(k.right-g.right+p.right)/E.x}}const BZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=fv(t,e);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=$c(i),v=$c(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),E=f||(v||!m?[dm(a)]:NZ(a));!f&&p!=="none"&&E.push(...MZ(a,m,p,S));const k=[a,...E],b=await eD(e,y),A=[];let _=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(b[g]),d){const D=xZ(i,o,S);A.push(b[D[0]],b[D[1]])}if(_=[..._,{placement:i,overflows:A}],!A.every(D=>D<=0)){var P,N;const D=(((P=s.flip)==null?void 0:P.index)||0)+1,U=k[D];if(U)return{data:{index:D,overflows:_},reset:{placement:U}};let G=(N=_.filter(z=>z.overflows[0]<=0).sort((z,$)=>z.overflows[1]-$.overflows[1])[0])==null?void 0:N.placement;if(!G)switch(h){case"bestFit":{var O;const z=(O=_.map($=>[$.placement,$.overflows.filter(q=>q>0).reduce((q,j)=>q+j,0)]).sort(($,q)=>$[1]-q[1])[0])==null?void 0:O[0];z&&(G=z);break}case"initialPlacement":G=a;break}if(i!==G)return{reset:{placement:G}}}return{}}}};async function FZ(t,e){const{placement:n,platform:r,elements:i}=t,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=$c(n),a=hv(n),c=pv(n)==="y",l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,d=fv(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const UZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=e,c=await FZ(e,t);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},VZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:v}=y;return{x:g,y:v}}},...c}=fv(t,e),l={x:n,y:r},u=await eD(e,c),d=pv($c(i)),f=YO(d);let h=l[f],p=l[d];if(s){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",v=h+u[y],S=h-u[g];h=GE(v,h,S)}if(o){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",v=p+u[y],S=p-u[g];p=GE(v,p,S)}const m=a.fn({...e,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}};function Ka(t){return tD(t)?(t.nodeName||"").toLowerCase():"#document"}function qr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function sc(t){var e;return(e=(tD(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function tD(t){return t instanceof Node||t instanceof qr(t).Node}function Ho(t){return t instanceof Element||t instanceof qr(t).Element}function Ws(t){return t instanceof HTMLElement||t instanceof qr(t).HTMLElement}function jE(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof qr(t).ShadowRoot}function wh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=yi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function GZ(t){return["table","td","th"].includes(Ka(t))}function nw(t){const e=rw(),n=yi(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function nD(t){let e=Nu(t);for(;Ws(e)&&!gv(e);){if(nw(e))return e;e=Nu(e)}return null}function rw(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function gv(t){return["html","body","#document"].includes(Ka(t))}function yi(t){return qr(t).getComputedStyle(t)}function mv(t){return Ho(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Nu(t){if(Ka(t)==="html")return t;const e=t.assignedSlot||t.parentNode||jE(t)&&t.host||sc(t);return jE(e)?e.host:e}function rD(t){const e=Nu(t);return gv(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ws(e)&&wh(e)?e:rD(e)}function _I(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=rD(t),s=i===((r=t.ownerDocument)==null?void 0:r.body),o=qr(i);return s?e.concat(o,o.visualViewport||[],wh(i)?i:[],o.frameElement&&n?_I(o.frameElement):[]):e.concat(i,_I(i,[],n))}function iD(t){const e=yi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Ws(t),s=i?t.offsetWidth:n,o=i?t.offsetHeight:r,a=um(n)!==s||um(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function sD(t){return Ho(t)?t:t.contextElement}function au(t){const e=sD(t);if(!Ws(e))return Xa(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:s}=iD(e);let o=(s?um(n.width):n.width)/r,a=(s?um(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const WZ=Xa(0);function oD(t){const e=qr(t);return!rw()||!e.visualViewport?WZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function jZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==qr(t)?!1:e}function Zf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),s=sD(t);let o=Xa(1);e&&(r?Ho(r)&&(o=au(r)):o=au(t));const a=jZ(s,n,r)?oD(s):Xa(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=qr(s),h=r&&Ho(r)?qr(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const m=au(p),y=p.getBoundingClientRect(),g=yi(p),v=y.left+(p.clientLeft+parseFloat(g.paddingLeft))*m.x,S=y.top+(p.clientTop+parseFloat(g.paddingTop))*m.y;c*=m.x,l*=m.y,u*=m.x,d*=m.y,c+=v,l+=S,p=qr(p).frameElement}}return fm({width:u,height:d,x:c,y:l})}const HZ=[":popover-open",":modal"];function aD(t){let e=!1,n=0,r=0;function i(s){try{e=e||t.matches(s)}catch{}}if(HZ.forEach(s=>{i(s)}),e){const s=nD(t);if(s){const o=s.getBoundingClientRect();n=o.x,r=o.y}}return[e,n,r]}function $Z(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const s=sc(r),[o]=e?aD(e.floating):[!1];if(r===s||o)return n;let a={scrollLeft:0,scrollTop:0},c=Xa(1);const l=Xa(0),u=Ws(r);if((u||!u&&i!=="fixed")&&((Ka(r)!=="body"||wh(s))&&(a=mv(r)),Ws(r))){const d=Zf(r);c=au(r),l.x=d.x+r.clientLeft,l.y=d.y+r.clientTop}return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+l.x,y:n.y*c.y-a.scrollTop*c.y+l.y}}function zZ(t){return Array.from(t.getClientRects())}function cD(t){return Zf(sc(t)).left+mv(t).scrollLeft}function ZZ(t){const e=sc(t),n=mv(t),r=t.ownerDocument.body,i=ou(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),s=ou(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+cD(t);const a=-n.scrollTop;return yi(r).direction==="rtl"&&(o+=ou(e.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function XZ(t,e){const n=qr(t),r=sc(t),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=rw();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function KZ(t,e){const n=Zf(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,s=Ws(t)?au(t):Xa(1),o=t.clientWidth*s.x,a=t.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function HE(t,e,n){let r;if(e==="viewport")r=XZ(t,n);else if(e==="document")r=ZZ(sc(t));else if(Ho(e))r=KZ(e,n);else{const i=oD(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return fm(r)}function lD(t,e){const n=Nu(t);return n===e||!Ho(n)||gv(n)?!1:yi(n).position==="fixed"||lD(n,e)}function JZ(t,e){const n=e.get(t);if(n)return n;let r=_I(t,[],!1).filter(a=>Ho(a)&&Ka(a)!=="body"),i=null;const s=yi(t).position==="fixed";let o=s?Nu(t):t;for(;Ho(o)&&!gv(o);){const a=yi(o),c=nw(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||wh(o)&&!c&&lD(t,o))?r=r.filter(u=>u!==o):i=a,o=Nu(o)}return e.set(t,r),r}function YZ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o=[...n==="clippingAncestors"?JZ(e,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=HE(e,u,i);return l.top=ou(d.top,l.top),l.right=EI(d.right,l.right),l.bottom=EI(d.bottom,l.bottom),l.left=ou(d.left,l.left),l},HE(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function qZ(t){const{width:e,height:n}=iD(t);return{width:e,height:n}}function QZ(t,e,n,r){const i=Ws(e),s=sc(e),o=n==="fixed",a=Zf(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const l=Xa(0);if(i||!i&&!o)if((Ka(e)!=="body"||wh(s))&&(c=mv(e)),i){const m=Zf(e,!0,o,e);l.x=m.x+e.clientLeft,l.y=m.y+e.clientTop}else s&&(l.x=cD(s));let u=a.left+c.scrollLeft-l.x,d=a.top+c.scrollTop-l.y;const[f,h,p]=aD(r);return f&&(u+=h,d+=p,i&&(u+=e.clientLeft,d+=e.clientTop)),{x:u,y:d,width:a.width,height:a.height}}function $E(t,e){return!Ws(t)||yi(t).position==="fixed"?null:e?e(t):t.offsetParent}function uD(t,e){const n=qr(t);if(!Ws(t))return n;let r=$E(t,e);for(;r&&GZ(r)&&yi(r).position==="static";)r=$E(r,e);return r&&(Ka(r)==="html"||Ka(r)==="body"&&yi(r).position==="static"&&!nw(r))?n:r||nD(t)||n}const e7=async function(t){const e=this.getOffsetParent||uD,n=this.getDimensions;return{reference:QZ(t.reference,await e(t.floating),t.strategy,t.floating),floating:{x:0,y:0,...await n(t.floating)}}};function t7(t){return yi(t).direction==="rtl"}const n7={convertOffsetParentRelativeRectToViewportRelativeRect:$Z,getDocumentElement:sc,getClippingRect:YZ,getOffsetParent:uD,getElementRects:e7,getClientRects:zZ,getDimensions:qZ,getScale:au,isElement:Ho,isRTL:t7},r7=VZ,i7=BZ,s7=(t,e,n)=>{const r=new Map,i={platform:n7,...n},s={...i.platform,_c:r};return LZ(t,e,{...i,platform:s})};var dD={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(kB,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],s={},o=null;function a(m,y){var g=m[y];if(typeof g.bind=="function")return g.bind(m);try{return Function.prototype.bind.call(g,m)}catch{return function(){return Function.prototype.apply.apply(g,[m,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?c:console[m]!==void 0?a(console,m):console.log!==void 0?a(console,"log"):e}function u(){for(var m=this.getLevel(),y=0;y<i.length;y++){var g=i[y];this[g]=y<m?e:this.methodFactory(g,m,this.name)}if(this.log=this.debug,typeof console===n&&m<this.levels.SILENT)return"No console available for logging"}function d(m){return function(){typeof console!==n&&(u.call(this),this[m].apply(this,arguments))}}function f(m,y,g){return l(m)||d.apply(this,arguments)}function h(m,y){var g=this,v,S,E,k="loglevel";typeof m=="string"?k+=":"+m:typeof m=="symbol"&&(k=void 0);function b(O){var D=(i[O]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=D;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+D+";"}catch{}}}function A(){var O;if(!(typeof window===n||!k)){try{O=window.localStorage[k]}catch{}if(typeof O===n)try{var D=window.document.cookie,U=encodeURIComponent(k),G=D.indexOf(U+"=");G!==-1&&(O=/^([^;]+)/.exec(D.slice(G+U.length+1))[1])}catch{}return g.levels[O]===void 0&&(O=void 0),O}}function _(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k)}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function P(O){var D=O;if(typeof D=="string"&&g.levels[D.toUpperCase()]!==void 0&&(D=g.levels[D.toUpperCase()]),typeof D=="number"&&D>=0&&D<=g.levels.SILENT)return D;throw new TypeError("log.setLevel() called with invalid level: "+O)}g.name=m,g.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},g.methodFactory=y||f,g.getLevel=function(){return E??S??v},g.setLevel=function(O,D){return E=P(O),D!==!1&&b(E),u.call(g)},g.setDefaultLevel=function(O){S=P(O),A()||g.setLevel(O,!1)},g.resetLevel=function(){E=null,_(),u.call(g)},g.enableAll=function(O){g.setLevel(g.levels.TRACE,O)},g.disableAll=function(O){g.setLevel(g.levels.SILENT,O)},g.rebuild=function(){if(o!==g&&(v=P(o.getLevel())),u.call(g),o===g)for(var O in s)s[O].rebuild()},v=P(o?o.getLevel():"WARN");var N=A();N!=null&&(E=P(N)),u.call(g)}o=new h,o.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var g=s[y];return g||(g=s[y]=new h(y,o.methodFactory)),g};var p=typeof window!==n?window.log:void 0;return o.noConflict=function(){return typeof window!==n&&window.log===o&&(window.log=p),o},o.getLoggers=function(){return s},o.default=o,o})})(dD);var o7=dD.exports;const a7=ah(o7);function vn(t){return typeof t=="function"}function fD(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var i0=fD(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function RI(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var vv=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Eu(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(m){e={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var u=this.initialTeardown;if(vn(u))try{u()}catch(m){s=m instanceof i0?m.errors:[m]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=Eu(d),h=f.next();!h.done;h=f.next()){var p=h.value;try{zE(p)}catch(m){s=s??[],m instanceof i0?s=qC(qC([],YC(s)),YC(m.errors)):s.push(m)}}}catch(m){r={error:m}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(s)throw new i0(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)zE(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&RI(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&RI(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),hD=vv.EMPTY;function pD(t){return t instanceof vv||t&&"closed"in t&&vn(t.remove)&&vn(t.add)&&vn(t.unsubscribe)}function zE(t){vn(t)?t():t.unsubscribe()}var gD={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},mD={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,qC([t,e],YC(n)))},clearTimeout:function(t){var e=mD.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function vD(t){mD.setTimeout(function(){throw t})}function xI(){}function og(t){t()}var iw=function(t){Yu(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,pD(n)&&n.add(r)):r.destination=d7,r}return e.create=function(n,r,i){return new NI(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(vv),c7=Function.prototype.bind;function s0(t,e){return c7.call(t,e)}var l7=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){cp(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){cp(r)}else cp(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){cp(n)}},t}(),NI=function(t){Yu(e,t);function e(n,r,i){var s=t.call(this)||this,o;if(vn(n)||!n)o={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;s&&gD.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},o={next:n.next&&s0(n.next,a),error:n.error&&s0(n.error,a),complete:n.complete&&s0(n.complete,a)}):o=n}return s.destination=new l7(o),s}return e}(iw);function cp(t){vD(t)}function u7(t){throw t}var d7={closed:!0,next:xI,error:u7,complete:xI},sw=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function yD(t){return t}function f7(t){return t.length===0?yD:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Hn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,s=p7(e)?e:new NI(e,n,r);return og(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=ZE(n),new n(function(i,s){var o=new NI({next:function(a){try{e(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[sw]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return f7(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=ZE(e),new e(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},t.create=function(e){return new t(e)},t}();function ZE(t){var e;return(e=t??gD.Promise)!==null&&e!==void 0?e:Promise}function h7(t){return t&&vn(t.next)&&vn(t.error)&&vn(t.complete)}function p7(t){return t&&t instanceof iw||h7(t)&&pD(t)}function g7(t){return vn(t==null?void 0:t.lift)}function Yo(t){return function(e){if(g7(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function zc(t,e,n,r,i){return new m7(t,e,n,r,i)}var m7=function(t){Yu(e,t);function e(n,r,i,s,o,a){var c=t.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=s?function(l){try{s(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(iw),v7=fD(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ja=function(t){Yu(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new XE(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new v7},e.prototype.next=function(n){var r=this;og(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=Eu(r.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;og(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;og(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?hD:(this.currentObservers=null,a.push(n),new vv(function(){r.currentObservers=null,RI(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new Hn;return n.source=this,n},e.create=function(n,r){return new XE(n,r)},e}(Hn),XE=function(t){Yu(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:hD},e}(Ja),CD=function(t){Yu(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Ja);function y7(t){return t&&vn(t.schedule)}function C7(t){return t[t.length-1]}function ID(t){return y7(C7(t))?t.pop():void 0}var SD=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function bD(t){return vn(t==null?void 0:t.then)}function wD(t){return vn(t[sw])}function kD(t){return Symbol.asyncIterator&&vn(t==null?void 0:t[Symbol.asyncIterator])}function AD(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function I7(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ED=I7();function TD(t){return vn(t==null?void 0:t[ED])}function _D(t){return LH(this,arguments,function(){var n,r,i,s;return tM(this,function(o){switch(o.label){case 0:n=t.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,ql(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,ql(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,ql(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function RD(t){return vn(t==null?void 0:t.getReader)}function td(t){if(t instanceof Hn)return t;if(t!=null){if(wD(t))return S7(t);if(SD(t))return b7(t);if(bD(t))return w7(t);if(kD(t))return xD(t);if(TD(t))return k7(t);if(RD(t))return A7(t)}throw AD(t)}function S7(t){return new Hn(function(e){var n=t[sw]();if(vn(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function b7(t){return new Hn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function w7(t){return new Hn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,vD)})}function k7(t){return new Hn(function(e){var n,r;try{for(var i=Eu(t),s=i.next();!s.done;s=i.next()){var o=s.value;if(e.next(o),e.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function xD(t){return new Hn(function(e){E7(t,e).catch(function(n){return e.error(n)})})}function A7(t){return xD(_D(t))}function E7(t,e){var n,r,i,s;return DH(this,void 0,void 0,function(){var o,a;return tM(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=BH(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,e.next(o),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function Wa(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function ND(t,e){return e===void 0&&(e=0),Yo(function(n,r){n.subscribe(zc(r,function(i){return Wa(r,t,function(){return r.next(i)},e)},function(){return Wa(r,t,function(){return r.complete()},e)},function(i){return Wa(r,t,function(){return r.error(i)},e)}))})}function PD(t,e){return e===void 0&&(e=0),Yo(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function T7(t,e){return td(t).pipe(PD(e),ND(e))}function _7(t,e){return td(t).pipe(PD(e),ND(e))}function R7(t,e){return new Hn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function x7(t,e){return new Hn(function(n){var r;return Wa(n,e,function(){r=t[ED](),Wa(n,e,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return vn(r==null?void 0:r.return)&&r.return()}})}function MD(t,e){if(!t)throw new Error("Iterable cannot be null");return new Hn(function(n){Wa(n,e,function(){var r=t[Symbol.asyncIterator]();Wa(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function N7(t,e){return MD(_D(t),e)}function P7(t,e){if(t!=null){if(wD(t))return T7(t,e);if(SD(t))return R7(t,e);if(bD(t))return _7(t,e);if(kD(t))return MD(t,e);if(TD(t))return x7(t,e);if(RD(t))return N7(t,e)}throw AD(t)}function M7(t,e){return e?P7(t,e):td(t)}function Cr(t,e){return Yo(function(n,r){var i=0;n.subscribe(zc(r,function(s){r.next(t.call(e,s,i++))}))})}function O7(t,e,n,r,i,s,o,a){var c=[],l=0,u=0,d=!1,f=function(){d&&!c.length&&!l&&e.complete()},h=function(m){return l<r?p(m):c.push(m)},p=function(m){s&&e.next(m),l++;var y=!1;td(n(m,u++)).subscribe(zc(e,function(g){i==null||i(g),s?h(g):e.next(g)},function(){y=!0},void 0,function(){if(y)try{l--;for(var g=function(){var v=c.shift();o?Wa(e,o,function(){return p(v)}):p(v)};c.length&&l<r;)g();f()}catch(v){e.error(v)}}))};return t.subscribe(zc(e,h,function(){d=!0,f()})),function(){a==null||a()}}function OD(t,e,n){return n===void 0&&(n=1/0),vn(e)?OD(function(r,i){return Cr(function(s,o){return e(r,s,i,o)})(td(t(r,i)))},n):(typeof e=="number"&&(n=e),Yo(function(r,i){return O7(r,i,t,n)}))}function D7(t){return t===void 0&&(t=1/0),OD(yD,t)}function L7(){return D7(1)}function PI(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return L7()(M7(t,ID(t)))}function DD(t,e){return Yo(function(n,r){var i=0;n.subscribe(zc(r,function(s){return t.call(e,s,i++)&&r.next(s)}))})}function B7(t,e,n,r,i){return function(s,o){var a=n,c=e,l=0;s.subscribe(zc(o,function(u){var d=l++;c=a?t(c,u,d):(a=!0,u),r&&o.next(c)},i&&function(){a&&o.next(c),o.complete()}))}}function F7(t){return Yo(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function U7(t,e){return Yo(B7(t,e,arguments.length>=2,!0))}function es(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=ID(t);return Yo(function(r,i){(n?PI(t,r,n):PI(t,r)).subscribe(i)})}function KE(t){return Yo(function(e,n){td(t).subscribe(zc(n,function(){return n.complete()},xI)),!n.closed&&e.subscribe(n)})}var V7=Object.defineProperty,G7=Object.defineProperties,W7=Object.getOwnPropertyDescriptors,hm=Object.getOwnPropertySymbols,LD=Object.prototype.hasOwnProperty,BD=Object.prototype.propertyIsEnumerable,JE=(t,e,n)=>e in t?V7(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MI=(t,e)=>{for(var n in e||(e={}))LD.call(e,n)&&JE(t,n,e[n]);if(hm)for(var n of hm(e))BD.call(e,n)&&JE(t,n,e[n]);return t},j7=(t,e)=>G7(t,W7(e)),H7=(t,e)=>{var n={};for(var r in t)LD.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&hm)for(var r of hm(t))e.indexOf(r)<0&&BD.call(t,r)&&(n[r]=t[r]);return n},qo=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())}),FD="lk";function ow(t){return typeof t>"u"?!1:$7(t)||z7(t)}function $7(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function z7(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function Z7(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function UD(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(Z7(t))return`${t.participant.identity}_${t.source}_placeholder`;if(ow(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function X7(t){return t instanceof AI}function K7(t,e){return qo(this,null,function*(){const{x:n,y:r}=yield s7(t,e,{placement:"top",middleware:[UZ(6),i7(),r7({padding:5})]});return{x:n,y:r}})}function J7(t,e){return!t.contains(e.target)}var Y7=[te.ConnectionStateChanged,te.RoomMetadataChanged,te.ActiveSpeakersChanged,te.ConnectionQualityChanged,te.ParticipantConnected,te.ParticipantDisconnected,te.ParticipantPermissionsChanged,te.ParticipantMetadataChanged,te.TrackMuted,te.TrackUnmuted,te.TrackPublished,te.TrackUnpublished,te.TrackStreamStateChanged,te.TrackSubscriptionFailed,te.TrackSubscriptionPermissionChanged,te.TrackSubscriptionStatusChanged],q7=[...Y7,te.LocalTrackPublished,te.LocalTrackUnpublished],Q7=[se.ConnectionQualityChanged,se.IsSpeakingChanged,se.ParticipantMetadataChanged,se.ParticipantPermissionsChanged,se.TrackMuted,se.TrackUnmuted,se.TrackPublished,se.TrackUnpublished,se.TrackStreamStateChanged,se.TrackSubscriptionFailed,se.TrackSubscriptionPermissionChanged,se.TrackSubscriptionStatusChanged];[...Q7,se.LocalTrackPublished,se.LocalTrackUnpublished];var st=a7.getLogger("lk-components-js");st.setDefaultLevel("WARN");function eX(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var tX=[],nX={showChat:!1,unreadMessages:0};function aw(t,...e){return new Hn(r=>{const i=()=>{r.next(t)};return e.forEach(o=>{t.on(o,i)}),()=>{e.forEach(o=>{t.off(o,i)})}}).pipe(es(t))}function cw(t,e){return new Hn(r=>{const i=(...o)=>{r.next(o)};return t.on(e,i),()=>{t.off(e,i)}})}function rX(t){return cw(t,te.ConnectionStateChanged).pipe(Cr(([e])=>e),es(t.state))}function iX(t,e,n=!0){var r;const i=()=>qo(this,null,function*(){try{const a=yield lm.getLocalDevices(t,n);s.next(a)}catch(a){e==null||e(a)}}),s=new Ja,o=s.pipe(F7(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return PI(lm.getLocalDevices(t,n).catch(a=>e==null?void 0:e(a)),o)}function sX(t){return cw(t,te.DataReceived)}function oX(t){return aw(t,te.AudioPlaybackStatusChanged).pipe(Cr(n=>({canPlayAudio:n.canPlaybackAudio})))}function aX(t){return aw(t,te.VideoPlaybackStatusChanged).pipe(Cr(n=>({canPlayVideo:n.canPlaybackVideo})))}function cX(t,e){return cw(t,te.ActiveDeviceChanged).pipe(DD(([n])=>n===e),Cr(([n,r])=>(st.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),es(t.getActiveDevice(e)))}function Ci(t){return`${FD}-${t}`}function lX(t){const e=OI(t),n=uw(t.participant).pipe(Cr(()=>OI(t)),es(e));return{className:Ci(t.source===Y.Source.Camera||t.source===Y.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function OI(t){if(ow(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTracks().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackByName(n);if(e)return r.getTrack(e);throw new Error("At least one of source and name needs to be defined")}}function lw(t,...e){return new Hn(r=>{const i=()=>{r.next(t)};return e.forEach(o=>{t.on(o,i)}),()=>{e.forEach(o=>{t.off(o,i)})}}).pipe(es(t))}function uw(t){return lw(t,se.TrackMuted,se.TrackUnmuted,se.ParticipantPermissionsChanged,se.TrackPublished,se.TrackUnpublished,se.LocalTrackPublished,se.LocalTrackUnpublished,se.MediaDevicesError,se.TrackSubscriptionStatusChanged).pipe(Cr(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:s}=n,o=n.getTrack(Y.Source.Microphone),a=n.getTrack(Y.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:s,cameraTrack:a,microphoneTrack:o,participant:n}}))}function uX(t){return lw(t,se.ParticipantMetadataChanged).pipe(Cr(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),es({name:t.name,identity:t.identity,metadata:t.metadata}))}function dX(t){return dw(t,se.ConnectionQualityChanged).pipe(Cr(([n])=>n),es(t.connectionQuality))}function dw(t,e){return new Hn(r=>{const i=(...o)=>{r.next(o)};return t.on(e,i),()=>{t.off(e,i)}})}function VD(t){var e,n,r,i;return lw(t.participant,se.TrackMuted,se.TrackUnmuted,se.TrackSubscribed,se.TrackUnsubscribed,se.LocalTrackPublished,se.LocalTrackUnpublished).pipe(Cr(s=>{var o,a;const c=(o=t.publication)!=null?o:s.getTrack(t.source);return(a=c==null?void 0:c.isMuted)!=null?a:!0}),es((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrack(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function fX(t){return dw(t,se.IsSpeakingChanged).pipe(Cr(([e])=>e))}function hX(t,e={}){var n;let r;const i=new Hn(c=>(r=c,()=>a.unsubscribe())).pipe(es(Array.from(t.participants.values()))),s=(n=e.additionalRoomEvents)!=null?n:q7,o=Array.from(new Set([te.ParticipantConnected,te.ParticipantDisconnected,te.ConnectionStateChanged,...s])),a=aw(t,...o).subscribe(c=>r==null?void 0:r.next(Array.from(c.participants.values())));return t.participants.size>0&&(r==null||r.next(Array.from(t.participants.values()))),i}function pX(t){return dw(t,se.ParticipantPermissionsChanged).pipe(Cr(()=>t.permissions),es(t.permissions))}function gX(t,e,n){const{localParticipant:r}=e,i=(l,u)=>{let d=!1;switch(l){case Y.Source.Camera:d=u.isCameraEnabled;break;case Y.Source.Microphone:d=u.isMicrophoneEnabled;break;case Y.Source.ScreenShare:d=u.isScreenShareEnabled;break}return d},s=uw(r).pipe(Cr(l=>i(t,l.participant)),es(i(t,r))),o=new Ja,a=(l,u)=>qo(this,null,function*(){try{switch(u??(u=n),o.next(!0),t){case Y.Source.Camera:yield r.setCameraEnabled(l??!r.isCameraEnabled,u);break;case Y.Source.Microphone:yield r.setMicrophoneEnabled(l??!r.isMicrophoneEnabled,u);break;case Y.Source.ScreenShare:yield r.setScreenShareEnabled(l??!r.isScreenShareEnabled,u);break;default:break}}finally{o.next(!1)}});return{className:Ci("button"),toggle:a,enabledObserver:s,pendingObserver:o.asObservable()}}function mX(){let t=!1;const e=new Ja,n=new Ja,r=s=>{n.next(!0),t=s??!t,e.next(t),n.next(!1)};return{className:Ci("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function vX(t,e,n){const r=new CD(void 0),i=e?cX(e,t):r.asObservable(),s=(a,...c)=>qo(this,[a,...c],function*(l,u={}){var d,f,h;if(e){st.debug(`Switching active device of kind "${t}" with id ${l}.`),yield e.switchActiveDevice(t,l,u.exact);const p=(d=e.getActiveDevice(t))!=null?d:l;p!==l&&l!=="default"&&st.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${p}) instead.`);let m;t==="audioinput"?m=(f=e.localParticipant.getTrack(Y.Source.Microphone))==null?void 0:f.track:t==="videoinput"&&(m=(h=e.localParticipant.getTrack(Y.Source.Camera))==null?void 0:h.track);const y=l==="default"&&!m||l==="default"&&(m==null?void 0:m.mediaStreamTrack.label.startsWith("Default"));r.next(y?l:p)}else if(n){yield n.setDeviceId(u.exact?{exact:l}:l);const p=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:p)}else r.value!==l&&(st.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:Ci("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:s}}function yX(t){const e=r=>{t.disconnect(r)};return{className:Ci("disconnect-button"),disconnect:e}}function CX(t){const e=Ci("connection-quality"),n=dX(t);return{className:e,connectionQualityObserver:n}}function IX(t){let e="track-muted-indicator-camera";switch(t.source){case Y.Source.Camera:e="track-muted-indicator-camera";break;case Y.Source.Microphone:e="track-muted-indicator-microphone";break}const n=Ci(e),r=VD(t);return{className:n,mediaMutedObserver:r}}function SX(t){return{className:"lk-participant-name",infoObserver:uX(t)}}function bX(){return{className:Ci("participant-tile")}}var wX={CHAT:"lk-chat-topic"};function GD(t,e,n){return qo(this,arguments,function*(r,i,s,o={}){const{kind:a,destination:c}=o;yield r.publishData(i,a??un.RELIABLE,{destination:c,topic:s})})}function kX(t,e,n){const r=sX(t).pipe(DD(([,,,a])=>e===void 0||a===e),Cr(([a,c,,l])=>{const u={payload:a,topic:l,from:c};return n==null||n(u),u}));let i;const s=new Hn(a=>{i=a});return{messageObservable:r,isSendingObservable:s,send:(a,...c)=>qo(this,[a,...c],function*(l,u={}){i.next(!0);try{yield GD(t.localParticipant,l,e,u)}finally{i.next(!1)}})}}var AX=new TextEncoder,EX=new TextDecoder,lp=new Map,TX=t=>AX.encode(JSON.stringify({message:t.message,timestamp:t.timestamp})),_X=t=>JSON.parse(EX.decode(t));function RX(t,e){var n,r;const i=new Ja,{messageDecoder:s,messageEncoder:o,channelTopic:a}=e??{},c=a??wX.CHAT;let l=!1;lp.has(t)||(l=!0);const u=(n=lp.get(t))!=null?n:new Map,d=(r=u.get(c))!=null?r:new Ja;if(u.set(c,d),lp.set(t,u),l){const{messageObservable:v}=kX(t,c);v.pipe(KE(i)).subscribe(d)}const f=s??_X,h=d.pipe(Cr(v=>{const S=f(v.payload);return j7(MI({},S),{from:v.from})}),U7((v,S)=>[...v,S],[]),KE(i)),p=new CD(!1),m=o??TX,y=v=>qo(this,null,function*(){const S=Date.now(),E=m({message:v,timestamp:S});p.next(!0);try{yield GD(t.localParticipant,E,c,{kind:un.RELIABLE}),d.next({payload:E,topic:c,from:t.localParticipant})}finally{p.next(!1)}});function g(){i.next(),i.complete(),lp.clear()}return t.once(te.Disconnected,g),{messageObservable:h,isSendingObservable:p,send:y}}function xX(){const t=n=>qo(this,null,function*(){st.info("Start Audio for room: ",n),yield n.startAudio()});return{className:Ci("start-audio-button"),roomAudioPlaybackAllowedObservable:oX,handleStartAudioPlayback:t}}function NX(){const t=n=>qo(this,null,function*(){st.info("Start Video for room: ",n),yield n.startVideo()});return{className:Ci("start-audio-button"),roomVideoPlaybackAllowedObservable:aX,handleStartVideoPlayback:t}}function PX(){return{className:[Ci("button"),Ci("chat-toggle")].join(" ")}}function MX(){return{className:"lk-room-container"}}function OX(t,e){if(typeof localStorage>"u"){st.error("Local storage is not available.");return}try{localStorage.setItem(t,JSON.stringify(e))}catch(n){st.error(`Error setting item to local storage: ${n}`)}}function DX(t){if(typeof localStorage>"u"){st.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){st.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){st.error(`Error getting item from local storage: ${e}`);return}}function LX(t){return{load:()=>DX(t),save:e=>OX(t,e)}}var BX=`${FD}-user-choices`,lc={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:"",e2ee:!1,sharedPassphrase:""},{load:FX,save:UX}=LX(BX);function VX(t,e=!1){if(e===!0)return;const n=t,r=H7(n,["e2ee","sharedPassphrase"]);UX(r)}function GX(t,e=!1){var n,r,i,s,o,a,c;const l={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:lc.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:lc.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:lc.videoDeviceId,audioDeviceId:(s=t==null?void 0:t.audioDeviceId)!=null?s:lc.audioDeviceId,username:(o=t==null?void 0:t.username)!=null?o:lc.username,e2ee:(a=t==null?void 0:t.e2ee)!=null?a:lc.e2ee,sharedPassphrase:(c=t==null?void 0:t.sharedPassphrase)!=null?c:lc.sharedPassphrase};if(e)return l;{const u=FX();return MI(MI({},l),u??{})}}function WD(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=WD(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function WX(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=WD(t))&&(r&&(r+=" "),r+=e);return r}var jX=Object.defineProperty,HX=Object.defineProperties,$X=Object.getOwnPropertyDescriptors,pm=Object.getOwnPropertySymbols,jD=Object.prototype.hasOwnProperty,HD=Object.prototype.propertyIsEnumerable,YE=(t,e,n)=>e in t?jX(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_e=(t,e)=>{for(var n in e||(e={}))jD.call(e,n)&&YE(t,n,e[n]);if(pm)for(var n of pm(e))HD.call(e,n)&&YE(t,n,e[n]);return t},Qn=(t,e)=>HX(t,$X(e)),$n=(t,e)=>{var n={};for(var r in t)jD.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&pm)for(var r of pm(t))e.indexOf(r)<0&&HD.call(t,r)&&(n[r]=t[r]);return n},$D=(t,e,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(t,e)).next())});function ei(t,e){const[n,r]=w.useState(e);return w.useEffect(()=>{if(typeof window>"u"||!t)return;const i=t.subscribe(r);return()=>i.unsubscribe()},[t]),n}function zX(t){const e=s=>typeof window<"u"?window.matchMedia(s).matches:!1,[n,r]=w.useState(e(t));function i(){r(e(t))}return w.useEffect(()=>{const s=window.matchMedia(t);return i(),s.addListener?s.addListener(i):s.addEventListener("change",i),()=>{s.removeListener?s.removeListener(i):s.removeEventListener("change",i)}},[t]),n}function ZX(t,e){if(e.msg==="show_chat")return Qn(_e({},t),{showChat:!0,unreadMessages:0});if(e.msg==="hide_chat")return Qn(_e({},t),{showChat:!1});if(e.msg==="toggle_chat"){const n=Qn(_e({},t),{showChat:!t.showChat});return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?Qn(_e({},t),{unreadMessages:e.count}):_e({},t)}function XX(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:_e({},t)}var fw=w.createContext(void 0);function KX(){const t=w.useContext(fw);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function JX(t){const[e,n]=w.useReducer(XX,tX),[r,i]=w.useReducer(ZX,nX);return t??{pin:{dispatch:n,state:e},widget:{dispatch:i,state:r}}}function zD(){return w.useContext(fw)}var YX=w.createContext(void 0);function kh(){return w.useContext(YX)}var hw=w.createContext(void 0);function yv(){return w.useContext(hw)}function rl(t){var e;const n=yv(),r=kh(),i=(e=t??n)!=null?e:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var pw=w.createContext(void 0);function Cv(){const t=w.useContext(pw);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Iv(){return w.useContext(pw)}function Ah(t){const e=Iv(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var qX=w.createContext(void 0);function QX(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}function oc(...t){const e=_e({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const s=e[i],o=r[i];typeof s=="function"&&typeof o=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=QX(s,o):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?e[i]=WX(s,o):e[i]=o!==void 0?o:s}}return e}function eK(t={}){const e=rl(t.participant),{className:n,connectionQualityObserver:r}=w.useMemo(()=>CX(e),[e]),i=ei(r,ui.Unknown);return{className:n,quality:i}}function tK(t){const e=Ah(t),n=w.useMemo(()=>rX(e),[e]);return ei(n,e.state)}function nK(t){const e=Cv(),n=tK(e);return{buttonProps:w.useMemo(()=>{const{className:i,disconnect:s}=yX(e);return oc(t,{className:i,onClick:()=>{var a;return s((a=t.stopTracks)!=null?a:!0)},disabled:n===tt.Disconnected})},[e,t,n])}}function rK(t){if(t.publication instanceof $f){const e=t.publication.track;if(e){const{facingMode:n}=kZ(e);return n}}return"undefined"}function qE(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,s=rl(i),o=typeof t=="string"?{participant:s,source:t}:t,[a,c]=w.useState(!!((n=o.publication)!=null&&n.isMuted||(r=s.getTrack(o.source))!=null&&r.isMuted));return w.useEffect(()=>{const l=VD(o).subscribe(c);return()=>l.unsubscribe()},[UD(o)]),a}function iK(t){const e=rl(t),n=w.useMemo(()=>fX(e),[e]);return ei(n,e.isSpeaking)}var sK={connect:!0,audio:!1,video:!1};function oK(t){const e=_e(_e({},sK),t),{token:n,serverUrl:r,options:i,room:s,connectOptions:o,connect:a,audio:c,video:l,screen:u,onConnected:d,onDisconnected:f,onError:h,onMediaDeviceFailure:p,onEncryptionError:m,simulateParticipants:y}=e,g=$n(e,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&s&&st.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,S]=w.useState();w.useEffect(()=>{S(s??new lm(i))},[s]);const E=w.useMemo(()=>{const{className:k}=MX();return oc(g,{className:k})},[g]);return w.useEffect(()=>{if(!v)return;const k=()=>{const _=v.localParticipant;st.debug("trying to publish local tracks"),Promise.all([_.setMicrophoneEnabled(!!c,typeof c!="boolean"?c:void 0),_.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),_.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(P=>{st.warn(P),h==null||h(P)})},b=_=>{const P=jf.getFailure(_);p==null||p(P)},A=_=>{m==null||m(_)};return v.on(te.SignalConnected,k).on(te.MediaDevicesError,b).on(te.EncryptionError,A),()=>{v.off(te.SignalConnected,k).off(te.MediaDevicesError,b).off(te.EncryptionError,A)}},[v,c,l,u,h,m,p]),w.useEffect(()=>{if(v){if(y){v.simulateParticipants({participants:{count:y},publish:{audio:!0,useRealTracks:!0}});return}if(!n){st.debug("no token yet");return}if(!r){st.warn("no livekit url provided"),h==null||h(Error("no livekit url provided"));return}a?(st.debug("connecting"),v.connect(r,n,o).catch(k=>{st.warn(k),h==null||h(k)})):(st.debug("disconnecting because connect is false"),v.disconnect())}},[a,n,JSON.stringify(o),v,h,r,y]),w.useEffect(()=>{if(!v)return;const k=b=>{switch(b){case tt.Disconnected:f&&f();break;case tt.Connected:d&&d();break}};return v.on(te.ConnectionStateChanged,k),()=>{v.off(te.ConnectionStateChanged,k)}},[n,d,f,v]),w.useEffect(()=>{if(v)return()=>{st.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:E}}function aK(t={}){const e=Ah(t.room),[n,r]=w.useState(e.localParticipant),[i,s]=w.useState(n.isMicrophoneEnabled),[o,a]=w.useState(n.isMicrophoneEnabled),[c,l]=w.useState(n.lastMicrophoneError),[u,d]=w.useState(n.lastCameraError),[f,h]=w.useState(n.isMicrophoneEnabled),[p,m]=w.useState(void 0),[y,g]=w.useState(void 0),v=S=>{a(S.isCameraEnabled),s(S.isMicrophoneEnabled),h(S.isScreenShareEnabled),g(S.cameraTrack),m(S.microphoneTrack),l(S.participant.lastMicrophoneError),d(S.participant.lastCameraError),r(S.participant)};return w.useEffect(()=>{const S=uw(n).subscribe(v);return()=>S.unsubscribe()},[n]),{isMicrophoneEnabled:i,isScreenShareEnabled:f,isCameraEnabled:o,microphoneTrack:p,cameraTrack:y,lastMicrophoneError:c,lastCameraError:u,localParticipant:n}}function cK(){const t=Cv(),e=w.useMemo(()=>pX(t.localParticipant),[t]);return ei(e,t.localParticipant.permissions)}function lK({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const s=Iv(),o=w.useMemo(()=>iX(t,i,r),[t,r,i]),a=ei(o,[]),[c,l]=w.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:f}=w.useMemo(()=>vX(t,e??s,n),[t,e,s,n]);return w.useEffect(()=>{const h=d.subscribe(p=>{st.info("setCurrentDeviceId",p),p&&l(p)});return()=>{h==null||h.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:c,setActiveMediaDevice:f}}function uK(t){return t!==void 0}function nd(...t){return oc(...t.filter(uK))}function ZD(t,e,n){return w.Children.map(t,r=>w.isValidElement(r)&&w.Children.only(t)?w.cloneElement(r,Qn(_e({},e),{key:n})):r)}function XD(t,e={}){var n;const[r,i]=w.useState(OI(t)),[s,o]=w.useState(r==null?void 0:r.isMuted),[a,c]=w.useState(r==null?void 0:r.isSubscribed),[l,u]=w.useState(r==null?void 0:r.track),[d,f]=w.useState("landscape"),h=w.useRef(),{className:p,trackObserver:m}=w.useMemo(()=>lX(t),[(n=t.participant.sid)!=null?n:t.participant.identity,t.source,ow(t)&&t.publication.trackSid]);return w.useEffect(()=>{const y=m.subscribe(g=>{st.debug("update track",g),i(g),o(g==null?void 0:g.isMuted),c(g==null?void 0:g.isSubscribed),u(g==null?void 0:g.track)});return()=>y==null?void 0:y.unsubscribe()},[m]),w.useEffect(()=>{var y,g;return l&&(h.current&&l.detach(h.current),(y=e.element)!=null&&y.current&&!(X7(t.participant)&&(l==null?void 0:l.kind)==="audio")&&l.attach(e.element.current)),h.current=(g=e.element)==null?void 0:g.current,()=>{h.current&&(l==null||l.detach(h.current))}},[l,e.element]),w.useEffect(()=>{var y,g;if(typeof((y=r==null?void 0:r.dimensions)==null?void 0:y.width)=="number"&&typeof((g=r==null?void 0:r.dimensions)==null?void 0:g.height)=="number"){const v=r.dimensions.width>r.dimensions.height?"landscape":"portrait";f(v)}},[r]),{publication:r,isMuted:s,isSubscribed:a,track:l,elementProps:nd(e.props,_e({className:p,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}function dK({trackRef:t,participant:e,source:n,publication:r,onParticipantClick:i,disableSpeakingIndicator:s,htmlProps:o}){const a=kh(),c=rl(e),l=w.useMemo(()=>{var m,y,g,v,S,E;const k=(y=(m=t==null?void 0:t.source)!=null?m:a==null?void 0:a.source)!=null?y:n;if(k===void 0)throw new Error("Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.");return{participant:(v=(g=t==null?void 0:t.participant)!=null?g:a==null?void 0:a.participant)!=null?v:c,publication:(E=(S=t==null?void 0:t.publication)!=null?S:a==null?void 0:a.publication)!=null?E:r,source:k}},[t==null?void 0:t.participant,t==null?void 0:t.source,t==null?void 0:t.publication,a==null?void 0:a.participant,a==null?void 0:a.source,a==null?void 0:a.publication,c,n,r]),u=w.useMemo(()=>{const{className:m}=bX();return oc(o,{className:m,onClick:y=>{var g,v;if((g=o.onClick)==null||g.call(o,y),typeof i=="function"){const S=(v=l.publication)!=null?v:l.participant.getTrack(l.source);i({participant:l.participant,track:S})}}})},[o,i,l.publication,l.source,l.participant]),d=qE(Y.Source.Camera,{participant:l.participant}),f=qE(Y.Source.Microphone,{participant:l.participant}),h=iK(l.participant),p=rK(l);return{elementProps:_e({"data-lk-audio-muted":f,"data-lk-video-muted":d,"data-lk-speaking":s===!0?!1:h,"data-lk-local-participant":l.participant.isLocal,"data-lk-source":l.source,"data-lk-facing-mode":p},u)}}function fK(t={}){const e=Ah(t.room),[n,r]=w.useState([]);return w.useEffect(()=>{const i=hX(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(r);return()=>i.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function hK(t={}){const e=fK(t),{localParticipant:n}=aK(t);return[n,...e]}function pK({room:t,props:e}){const n=Ah(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:s}=w.useMemo(()=>xX(),[]),o=w.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=ei(o,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:w.useMemo(()=>oc(e,{className:r,onClick:()=>{s(n)},style:{display:a?"none":"block"}}),[e,r,a,s,n]),canPlayAudio:a}}function gK({room:t,props:e}){const n=Ah(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:s}=w.useMemo(()=>NX(),[]),o=w.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=ei(o,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:w.useMemo(()=>oc(e,{className:r,onClick:()=>{s(n)},style:{display:a?"none":"block"}}),[e,r,a,s,n]),canPlayVideo:a}}function mK({props:t}){const{dispatch:e,state:n}=KX().widget,{className:r}=w.useMemo(()=>PX(),[]);return{mergedProps:w.useMemo(()=>oc(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function vK(t,e={}){var n,r,i,s;let o=kh();const a=(r=(n=yv())!=null?n:e.participant)!=null?r:o==null?void 0:o.participant;if(typeof t=="string"){if(!a)throw Error("Participant missing, either provide it via context or pass it in directly");o={participant:a,source:t}}else if(t)o=t;else throw Error("No track reference found, either provide it via context or pass it in directly");const{className:c,mediaMutedObserver:l}=w.useMemo(()=>IX(o),[UD(o)]);return{isMuted:ei(l,!!((i=o.publication)!=null&&i.isMuted||(s=o.participant.getTrack(o.source))!=null&&s.isMuted)),className:c}}function yK(t){var e=t,{source:n,onChange:r,initialState:i,captureOptions:s}=e,o=$n(e,["source","onChange","initialState","captureOptions"]),a;const c=Iv(),l=(a=c==null?void 0:c.localParticipant)==null?void 0:a.getTrack(n),{toggle:u,className:d,pendingObserver:f,enabledObserver:h}=w.useMemo(()=>c?gX(n,c,s):mX(),[c,n,JSON.stringify(s)]),p=ei(f,!1),m=ei(h,i??!!(l!=null&&l.isEnabled));w.useEffect(()=>{r==null||r(m)},[m,r]),w.useEffect(()=>{i!==void 0&&(st.debug("forcing initial toggle state",n,i),u(i))},[]);const y=w.useMemo(()=>oc(o,{className:d}),[o,d]),g=w.useCallback(v=>{var S;u(),(S=o.onClick)==null||S.call(o,v)},[o,u]);return{toggle:u,enabled:m,pending:p,track:l,buttonProps:Qn(_e({},y),{"aria-pressed":m,"data-lk-source":n,"data-lk-enabled":m,disabled:p,onClick:g})}}function CK(t,e={}){return XD(t,e)}function IK(t){const e=Cv(),[n,r]=w.useState(),i=ei(n==null?void 0:n.isSendingObservable,!1),s=ei(n==null?void 0:n.messageObservable,[]);return w.useEffect(()=>{const o=RX(e,t);r(o)},[e,t]),{send:n==null?void 0:n.send,chatMessages:s,isSending:i}}function SK(t={}){var e;const[n,r]=w.useState(GX(t.defaults,(e=t.preventLoad)!=null?e:!1)),i=w.useCallback(l=>{r(u=>Qn(_e({},u),{audioEnabled:l}))},[]),s=w.useCallback(l=>{r(u=>Qn(_e({},u),{videoEnabled:l}))},[]),o=w.useCallback(l=>{r(u=>Qn(_e({},u),{audioDeviceId:l}))},[]),a=w.useCallback(l=>{r(u=>Qn(_e({},u),{videoDeviceId:l}))},[]),c=w.useCallback(l=>{r(u=>Qn(_e({},u),{username:l}))},[]);return w.useEffect(()=>{var l;VX(n,(l=t.preventSave)!=null?l:!1)},[n,t.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:s,saveAudioInputDeviceId:o,saveVideoInputDeviceId:a,saveUsername:c}}function bK(t){const{mergedProps:e}=mK({props:t});return w.createElement("button",_e({},e),t.children)}function wK(t){const{buttonProps:e}=nK(t);return w.createElement("button",_e({},e),t.children)}var kK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),w.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),AK=kK,EK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),TK=EK,_K=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),RK=_K,xK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),NK=xK,PK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),w.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),MK=PK,OK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),w.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),DK=OK,LK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),BK=LK,FK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),UK=FK,VK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),GK=VK,WK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),jK=WK,HK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),$K=HK,zK=t=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),w.createElement("g",{fill:"currentColor"},w.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),w.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),ZK=zK;function o0(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,onDeviceListChange:s,onDeviceSelectError:o,exactMatch:a,track:c,requestPermissions:l,onError:u}=e,d=$n(e,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const f=Iv(),h=w.useCallback(k=>{f&&f.emit(te.MediaDevicesError,k),u==null||u(k)},[f,u]),{devices:p,activeDeviceId:m,setActiveMediaDevice:y,className:g}=lK({kind:n,room:f,track:c,requestPermissions:l,onError:h});w.useEffect(()=>{r!==void 0&&y(r)},[y]),w.useEffect(()=>{typeof s=="function"&&s(p)},[s,p]),w.useEffect(()=>{m&&m!==""&&(i==null||i(m))},[m]);const v=k=>$D(this,null,function*(){try{yield y(k,{exact:a})}catch(b){if(b instanceof Error)o==null||o(b);else throw b}}),S=w.useMemo(()=>nd(d,{className:g},{className:"lk-list"}),[g,d]);function E(k,b,A){return k===b||A===0&&b==="default"}return w.createElement("ul",_e({},S),p.map((k,b)=>w.createElement("li",{key:k.deviceId,id:k.deviceId,"data-lk-active":E(k.deviceId,m,b),"aria-selected":E(k.deviceId,m,b),role:"option"},w.createElement("button",{className:"lk-button",onClick:()=>v(k.deviceId)},k.label))))}function KD(t,e){switch(t){case Y.Source.Microphone:return e?w.createElement(DK,null):w.createElement(MK,null);case Y.Source.Camera:return e?w.createElement(TK,null):w.createElement(AK,null);case Y.Source.ScreenShare:return e?w.createElement(ZK,null):w.createElement($K,null);default:return}}function XK(t){switch(t){case ui.Excellent:return w.createElement(BK,null);case ui.Good:return w.createElement(UK,null);case ui.Poor:return w.createElement(GK,null);default:return w.createElement(jK,null)}}function a0(t){var e=t,{showIcon:n}=e,r=$n(e,["showIcon"]);const{buttonProps:i,enabled:s}=yK(r);return w.createElement("button",_e({},i),(n??!0)&&KD(r.source,s),r.children)}function KK(t){var e;const{className:n,quality:r}=eK(t),i=w.useMemo(()=>Qn(_e({},nd(t,{className:n})),{"data-lk-quality":r}),[r,t,n]);return w.createElement("div",_e({},i),(e=t.children)!=null?e:XK(r))}function JK(t){var e=t,{participant:n}=e,r=$n(e,["participant"]);const i=rl(n),{className:s,infoObserver:o}=w.useMemo(()=>SX(i),[i]),{identity:a,name:c}=ei(o,{name:i.name,identity:i.identity,metadata:i.metadata}),l=w.useMemo(()=>nd(r,{className:s,"data-lk-participant-name":c}),[r,s,c]);return w.createElement("span",_e({},l),c!==""?c:a,r.children)}function YK(t){var e=t,{source:n,participant:r,trackRef:i,show:s="always"}=e,o=$n(e,["source","participant","trackRef","show"]),a,c;const{className:l,isMuted:u}=vK(i??n,{participant:r}),d=s==="always"||s==="muted"&&u||s==="unmuted"&&!u,f=w.useMemo(()=>nd(o,{className:l}),[l,o]);return d?w.createElement("div",Qn(_e({},f),{"data-lk-muted":u}),(c=o.children)!=null?c:KD((a=i==null?void 0:i.source)!=null?a:n,!u)):null}function qK(t){var e=t,{trackRef:n,onSubscriptionStatusChanged:r,volume:i,source:s,name:o,publication:a,participant:c}=e,l=$n(e,["trackRef","onSubscriptionStatusChanged","volume","source","name","publication","participant"]),u,d,f,h,p,m,y,g,v,S;const E=kh(),k=(h=(f=(u=n==null?void 0:n.publication)==null?void 0:u.trackName)!=null?f:(d=E==null?void 0:E.publication)==null?void 0:d.trackName)!=null?h:o,b=(m=(p=n==null?void 0:n.source)!=null?p:E==null?void 0:E.source)!=null?m:s,A=(g=(y=n==null?void 0:n.publication)!=null?y:E==null?void 0:E.publication)!=null?g:a,_=(S=(v=n==null?void 0:n.participant)!=null?v:E==null?void 0:E.participant)!=null?S:c;if(b===void 0)throw new Error("The AudioTrack component expects a trackRef or source property.");const P=w.useRef(null),N=rl(_),{elementProps:O,isSubscribed:D,track:U,publication:G}=XD({source:b,name:k,participant:N,publication:A},{element:P,props:l});return w.useEffect(()=>{r==null||r(!!D)},[D,r]),w.useEffect(()=>{U===void 0||i===void 0||(U instanceof Pc?U.setVolume(i):st.warn("Volume can only be set on remote audio tracks."))},[i,U]),w.useEffect(()=>{G===void 0||l.muted===void 0||(G instanceof tw?G.setEnabled(!l.muted):st.warn("Can only call setEnabled on remote track publications."))},[l.muted,G,U]),w.createElement("audio",_e({ref:P},O))}function QK(t){const e=!!yv();return t.participant&&!e?w.createElement(hw.Provider,{value:t.participant},t.children):w.createElement(w.Fragment,null,t.children)}function eJ({value:t,onPinChange:e,onWidgetChange:n,children:r}){const i=JX(t);return w.useEffect(()=>{st.debug("PinState Updated",{state:i.pin.state}),e&&i.pin.state&&e(i.pin.state)},[i.pin.state,e]),w.useEffect(()=>{st.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),w.createElement(fw.Provider,{value:i},r)}function tJ(t){const{room:e,htmlProps:n}=oK(t);return w.createElement("div",_e({},n),e&&w.createElement(pw.Provider,{value:e},w.createElement(qX.Provider,{value:t.featureFlags},t.children)))}function nJ(t){var e=t,{participant:n,trackRef:r}=e,i=$n(e,["participant","trackRef"]),s,o;const[a,c]=w.useState([]),l=200,u=90,d=6,f=4,h=50,p=7,m=(s=yv())!=null?s:n;let y=(o=kh())!=null?o:r;if(!y){if(!m)throw Error("Participant missing, provide it directly or within a context");y={participant:m,source:Y.Source.Microphone}}const{track:g}=CK(y);return w.useEffect(()=>{if(!g||!(g instanceof br||g instanceof Pc))return;const{analyser:v,cleanup:S}=Nz(g,{smoothingTimeConstant:.8,fftSize:64}),E=new Uint8Array(v.frequencyBinCount),k=()=>{v.getByteFrequencyData(E);const A=new Array(p).fill(0);E.slice(1);const _=6;for(let P=0;P<p/2;P+=1){const N=Math.floor(p/2-P);for(let O=0;O<_;O+=1)A[N]+=Math.pow(E[P*_+O]/255,2);A[N]/=_}for(let P=0;P<p/2;P+=1){const N=Math.floor(p/2+P);if(A[N]===0){for(let O=0;O<_;O+=1)A[N]+=Math.pow(E[P*_+O]/255,2);A[N]/=_}}return A.map(P=>P*h)},b=setInterval(()=>{const A=k();c(A)},100);return()=>{clearInterval(b),S()}},[g]),w.createElement("svg",Qn(_e({width:"100%",height:"100%",viewBox:`0 0 ${l} ${u}`},i),{className:"lk-audio-visualizer"}),w.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),w.createElement("g",{style:{transform:`translate(${(l-p*(d+f))/2}px, 0)`}},a.map((v,S)=>w.createElement("rect",{key:S,x:S*(d+f),y:u/2-v/2,width:d,height:v}))))}function rJ(t){var e=t,{participants:n}=e,r=$n(e,["participants"]);return w.createElement(w.Fragment,null,n.map(i=>w.createElement(hw.Provider,{value:i,key:i.identity},ZD(r.children))))}function iJ(t){var e=t,{participant:n,children:r,source:i,publication:s,disableSpeakingIndicator:o,onParticipantClick:a}=e,c=$n(e,["participant","children","source","publication","disableSpeakingIndicator","onParticipantClick"]);const l=rl(n),{elementProps:u}=dK({participant:l,htmlProps:c,disableSpeakingIndicator:o,source:Y.Source.Microphone,publication:s,onParticipantClick:a});return w.createElement("div",_e({style:{position:"relative"}},u),w.createElement(QK,{participant:l},r??w.createElement(w.Fragment,null,w.createElement(qK,{source:i??Y.Source.Microphone}),w.createElement(nJ,null),w.createElement("div",{className:"lk-participant-metadata"},w.createElement("div",{className:"lk-participant-metadata-item"},w.createElement(YK,{source:Y.Source.Microphone}),w.createElement(JK,null)),w.createElement(KK,{className:"lk-participant-metadata-item"})))))}function sJ(t){var e=t,{entry:n,hideName:r=!1,hideTimestamp:i=!1,messageFormatter:s}=e,o=$n(e,["entry","hideName","hideTimestamp","messageFormatter"]),a,c,l,u;const d=w.useMemo(()=>s?s(n.message):n.message,[n.message,s]),f=new Date(n.timestamp),h=navigator?navigator.language:"en-US";return w.createElement("li",_e({className:"lk-chat-entry",title:f.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":(a=n.from)!=null&&a.isLocal?"local":"remote"},o),(!i||!r)&&w.createElement("span",{className:"lk-meta-data"},!r&&w.createElement("strong",{className:"lk-participant-name"},(u=(c=n.from)==null?void 0:c.name)!=null?u:(l=n.from)==null?void 0:l.identity),!i&&w.createElement("span",{className:"lk-timestamp"},f.toLocaleTimeString(h,{timeStyle:"short"}))),w.createElement("span",{className:"lk-message-body"},d))}function oJ(t){var e=t,{messageFormatter:n,messageDecoder:r,messageEncoder:i,channelTopic:s}=e,o=$n(e,["messageFormatter","messageDecoder","messageEncoder","channelTopic"]);const a=w.useRef(null),c=w.useRef(null),l=w.useMemo(()=>({messageDecoder:r,messageEncoder:i,channelTopic:s}),[r,i,s]),{send:u,chatMessages:d,isSending:f}=IK(l),h=zD(),p=w.useRef(0);function m(y){return $D(this,null,function*(){y.preventDefault(),a.current&&a.current.value.trim()!==""&&u&&(yield u(a.current.value),a.current.value="",a.current.focus())})}return w.useEffect(()=>{var y;c&&((y=c.current)==null||y.scrollTo({top:c.current.scrollHeight}))},[c,d]),w.useEffect(()=>{var y,g,v,S,E;if(!h||d.length===0)return;if((y=h.widget.state)!=null&&y.showChat&&d.length>0&&p.current!==((g=d[d.length-1])==null?void 0:g.timestamp)){p.current=(v=d[d.length-1])==null?void 0:v.timestamp;return}const k=d.filter(A=>!p.current||A.timestamp>p.current).length,{widget:b}=h;k>0&&((S=b.state)==null?void 0:S.unreadMessages)!==k&&((E=b.dispatch)==null||E.call(b,{msg:"unread_msg",count:k}))},[d,h==null?void 0:h.widget]),w.createElement("div",Qn(_e({},o),{className:"lk-chat"}),w.createElement("ul",{className:"lk-list lk-chat-messages",ref:c},o.children?d.map((y,g)=>ZD(o.children,{entry:y,key:g,messageFormatter:n})):d.map((y,g,v)=>{const S=g>=1&&v[g-1].from===y.from,E=g>=1&&y.timestamp-v[g-1].timestamp<6e4;return w.createElement(sJ,{key:g,hideName:S,hideTimestamp:S===!1?!1:E,entry:y,messageFormatter:n})})),w.createElement("form",{className:"lk-chat-form",onSubmit:m},w.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:f,ref:a,type:"text",placeholder:"Enter a message..."}),w.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:f},"Send")))}function QE(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:s,requestPermissions:o=!1}=e,a=$n(e,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[c,l]=w.useState(!1),[u,d]=w.useState([]),[f,h]=w.useState(!0),p=(v,S)=>{st.debug("handle device change"),l(!1),i==null||i(v,S)},m=w.useRef(null),y=w.useRef(null);w.useLayoutEffect(()=>{m.current&&y.current&&(u||f)&&K7(m.current,y.current).then(({x:v,y:S})=>{y.current&&Object.assign(y.current.style,{left:`${v}px`,top:`${S}px`})}),h(!1)},[m,y,u,f]);const g=w.useCallback(v=>{y.current&&v.target!==m.current&&c&&J7(y.current,v)&&l(!1)},[c,y,m]);return w.useEffect(()=>(document.addEventListener("click",g),window.addEventListener("resize",()=>h(!0)),()=>{document.removeEventListener("click",g),window.removeEventListener("resize",()=>h(!0))}),[g,h]),w.createElement(w.Fragment,null,w.createElement("button",Qn(_e({className:"lk-button lk-button-menu","aria-pressed":c},a),{onClick:()=>l(!c),ref:m}),a.children),!a.disabled&&w.createElement("div",{className:"lk-device-menu",ref:y,style:{visibility:c?"visible":"hidden"}},n?w.createElement(o0,{initialSelection:r,onActiveDeviceChange:v=>p(n,v),onDeviceListChange:d,kind:n,track:s==null?void 0:s[n],requestPermissions:o}):w.createElement(w.Fragment,null,w.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),w.createElement(o0,{kind:"audioinput",onActiveDeviceChange:v=>p("audioinput",v),onDeviceListChange:d,track:s==null?void 0:s.audioinput,requestPermissions:o}),w.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),w.createElement(o0,{kind:"videoinput",onActiveDeviceChange:v=>p("videoinput",v),onDeviceListChange:d,track:s==null?void 0:s.videoinput,requestPermissions:o}))))}function aJ(t){var e=t,{label:n}=e,r=$n(e,["label"]);const i=Cv(),{mergedProps:s,canPlayAudio:o}=pK({room:i,props:r}),{mergedProps:a,canPlayVideo:c}=gK({room:i,props:s}),l=a,{style:u}=l,d=$n(l,["style"]);return u.display=o&&c?"none":"block",w.createElement("button",_e({style:u},d),n??`Start ${o?"Video":"Audio"}`)}function cJ(t){var e=t,{variation:n,controls:r,saveUserChoices:i=!0}=e,s=$n(e,["variation","controls","saveUserChoices"]),o,a,c,l,u;const[d,f]=w.useState(!1),h=zD();w.useEffect(()=>{var U,G;((U=h==null?void 0:h.widget.state)==null?void 0:U.showChat)!==void 0&&f((G=h==null?void 0:h.widget.state)==null?void 0:G.showChat)},[(o=h==null?void 0:h.widget.state)==null?void 0:o.showChat]);const m=zX(`(max-width: ${d?1e3:760}px)`)?"minimal":"verbose";n??(n=m);const y=_e({leave:!0},r),g=cK();g?((a=y.camera)!=null||(y.camera=g.canPublish),(c=y.microphone)!=null||(y.microphone=g.canPublish),(l=y.screenShare)!=null||(y.screenShare=g.canPublish),(u=y.chat)!=null||(y.chat=g.canPublishData&&(r==null?void 0:r.chat))):(y.camera=!1,y.chat=!1,y.microphone=!1,y.screenShare=!1);const v=w.useMemo(()=>n==="minimal"||n==="verbose",[n]),S=w.useMemo(()=>n==="textOnly"||n==="verbose",[n]),E=eX(),[k,b]=w.useState(!1),A=U=>{b(U)},_=nd({className:"lk-control-bar"},s),{saveAudioInputEnabled:P,saveVideoInputEnabled:N,saveAudioInputDeviceId:O,saveVideoInputDeviceId:D}=SK({preventSave:!i});return w.createElement("div",_e({},_),y.microphone&&w.createElement("div",{className:"lk-button-group"},w.createElement(a0,{source:Y.Source.Microphone,showIcon:v,onChange:P},S&&"Microphone"),w.createElement("div",{className:"lk-button-group-menu"},w.createElement(QE,{kind:"audioinput",onActiveDeviceChange:(U,G)=>O(G??"")}))),y.camera&&w.createElement("div",{className:"lk-button-group"},w.createElement(a0,{source:Y.Source.Camera,showIcon:v,onChange:N},S&&"Camera"),w.createElement("div",{className:"lk-button-group-menu"},w.createElement(QE,{kind:"videoinput",onActiveDeviceChange:(U,G)=>D(G??"")}))),y.screenShare&&E&&w.createElement(a0,{source:Y.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:A},S&&(k?"Stop screen share":"Share screen")),y.chat&&w.createElement(bK,null,v&&w.createElement(RK,null),S&&"Chat"),y.leave&&w.createElement(wK,null,v&&w.createElement(NK,null),S&&"Leave"),w.createElement(aJ,null))}function lJ(t){var e=$n(t,[]);const[n,r]=w.useState({showChat:!1,unreadMessages:0}),i=hK();return w.createElement(eJ,{onWidgetChange:r},w.createElement("div",_e({className:"lk-audio-conference"},e),w.createElement("div",{className:"lk-audio-conference-stage"},w.createElement(rJ,{participants:i},w.createElement(iJ,null))),w.createElement(cJ,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),n.showChat&&w.createElement(oJ,null)))}const uJ="wss://mongoose-67t79p35.livekit.cloud",dJ=({client:t})=>{const[e,n]=w.useState([]),[r,i]=w.useState(!1);return w.useEffect(()=>{const s=a=>{n(c=>[...c,a]),i(!0)},o=a=>{n(c=>{const l=c.filter(u=>u!==a);return l.length===0&&i(!1),l})};return t.on("livekitToken",s),t.on("livekitLeave",o),()=>{t.off("livekitToken",s),t.off("livekitLeave",o)}},[t]),e.length?J.jsxs("div",{"data-lk-theme":"default",children:[e.map((s,o)=>J.jsx(tJ,{video:!1,audio:!0,token:s,serverUrl:uJ,connect:!0,onDisconnected:()=>t.emit("livekitLeave",s),children:J.jsx(lJ,{})},o)),J.jsx("div",{className:"audio-status","aria-live":"polite"})]}):null},JD=Object.prototype.toString;function gw(t){switch(JD.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return $o(t,Error)}}function rd(t,e){return JD.call(t)===`[object ${e}]`}function mw(t){return rd(t,"ErrorEvent")}function eT(t){return rd(t,"DOMError")}function fJ(t){return rd(t,"DOMException")}function Us(t){return rd(t,"String")}function vw(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function yw(t){return t===null||vw(t)||typeof t!="object"&&typeof t!="function"}function Pu(t){return rd(t,"Object")}function Sv(t){return typeof Event<"u"&&$o(t,Event)}function hJ(t){return typeof Element<"u"&&$o(t,Element)}function pJ(t){return rd(t,"RegExp")}function bv(t){return!!(t&&t.then&&typeof t.then=="function")}function gJ(t){return Pu(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function YD(t){return typeof t=="number"&&t!==t}function $o(t,e){try{return t instanceof e}catch{return!1}}function qD(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function cu(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function tT(t,e){if(!Array.isArray(t))return"";const n=[];for(let r=0;r<t.length;r++){const i=t[r];try{qD(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(e)}function mJ(t,e,n=!1){return Us(t)?pJ(e)?e.test(t):Us(e)?n?t===e:t.includes(e):!1:!1}function id(t,e=[],n=!1){return e.some(r=>mJ(t,r,n))}function vJ(t,e,n=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!$o(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=yJ(DI(t,e,i,o.originalException,r,s.exception.values,a,0),n))}function DI(t,e,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if($o(r[i],Error)){nT(o,a);const l=t(e,r[i]),u=c.length;rT(l,i,u,a),c=DI(t,e,n,r[i],i,[l,...c],l,u)}return Array.isArray(r.errors)&&r.errors.forEach((l,u)=>{if($o(l,Error)){nT(o,a);const d=t(e,l),f=c.length;rT(d,`errors[${u}]`,f,a),c=DI(t,e,n,l,i,[d,...c],d,f)}}),c}function nT(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,is_exception_group:!0,exception_id:e}}function rT(t,e,n,r){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:n,parent_id:r}}function yJ(t,e){return t.map(n=>(n.value&&(n.value=cu(n.value,e)),n))}function up(t){return t&&t.Math==Math?t:void 0}const Je=typeof globalThis=="object"&&up(globalThis)||typeof window=="object"&&up(window)||typeof self=="object"&&up(self)||typeof global=="object"&&up(global)||function(){return this}()||{};function Cw(){return Je}function QD(t,e,n){const r=n||Je,i=r.__SENTRY__=r.__SENTRY__||{};return i[t]||(i[t]=e())}const lu=Cw(),CJ=80;function Zc(t,e={}){if(!t)return"<unknown>";try{let n=t;const r=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let l;const u=Array.isArray(e)?e:e.keyAttrs,d=!Array.isArray(e)&&e.maxStringLength||CJ;for(;n&&s++<r&&(l=IJ(n,u),!(l==="html"||s>1&&o+i.length*c+l.length>=d));)i.push(l),o+=l.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function IJ(t,e){const n=t,r=[];let i,s,o,a,c;if(!n||!n.tagName)return"";if(lu.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=e&&e.length?e.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(l&&l.length)l.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Us(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)o=u[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function SJ(){try{return lu.document.location.href}catch{return""}}function bJ(t){return lu.document&&lu.document.querySelector?lu.document.querySelector(t):null}function eL(t){if(!lu.HTMLElement)return null;let e=t;const n=5;for(let r=0;r<n;r++){if(!e)return null;if(e instanceof HTMLElement&&e.dataset.sentryComponent)return e.dataset.sentryComponent;e=e.parentNode}return null}const sd=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,wJ="Sentry Logger ",LI=["debug","info","warn","error","log","assert","trace"],gm={};function Xc(t){if(!("console"in Je))return t();const e=Je.console,n={},r=Object.keys(gm);r.forEach(i=>{const s=gm[i];n[i]=e[i],e[i]=s});try{return t()}finally{r.forEach(i=>{e[i]=n[i]})}}function kJ(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return sd?LI.forEach(n=>{e[n]=(...r)=>{t&&Xc(()=>{Je.console[n](`${wJ}[${n}]:`,...r)})}}):LI.forEach(n=>{e[n]=()=>{}}),e}const K=kJ(),AJ=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function EJ(t){return t==="http"||t==="https"}function od(t,e=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function TJ(t){const e=AJ.exec(t);if(!e){Xc(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[n,r,i="",s,o="",a]=e.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const d=l.match(/^\d+/);d&&(l=d[0])}return tL({host:s,pass:i,path:c,projectId:l,port:o,protocol:n,publicKey:r})}function tL(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function _J(t){if(!sd)return!0;const{port:e,projectId:n,protocol:r}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(K.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?EJ(r)?e&&isNaN(parseInt(e,10))?(K.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(K.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(K.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function nL(t){const e=typeof t=="string"?TJ(t):tL(t);if(!(!e||!_J(e)))return e}class vs extends Error{constructor(e,n="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function _n(t,e,n){if(!(e in t))return;const r=t[e],i=n(r);typeof i=="function"&&rL(i,r),t[e]=i}function Xf(t,e,n){try{Object.defineProperty(t,e,{value:n,writable:!0,configurable:!0})}catch{sd&&K.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function rL(t,e){try{const n=e.prototype||{};t.prototype=e.prototype=n,Xf(t,"__sentry_original__",e)}catch{}}function Iw(t){return t.__sentry_original__}function RJ(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}function iL(t){if(gw(t))return{message:t.message,name:t.name,stack:t.stack,...sT(t)};if(Sv(t)){const e={type:t.type,target:iT(t.target),currentTarget:iT(t.currentTarget),...sT(t)};return typeof CustomEvent<"u"&&$o(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function iT(t){try{return hJ(t)?Zc(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function sT(t){if(typeof t=="object"&&t!==null){const e={};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}else return{}}function xJ(t,e=40){const n=Object.keys(iL(t));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=e)return cu(n[0],e);for(let r=n.length;r>0;r--){const i=n.slice(0,r).join(", ");if(!(i.length>e))return r===n.length?i:cu(i,e)}return""}function _r(t){return BI(t,new Map)}function BI(t,e){if(NJ(t)){const n=e.get(t);if(n!==void 0)return n;const r={};e.set(t,r);for(const i of Object.keys(t))typeof t[i]<"u"&&(r[i]=BI(t[i],e));return r}if(Array.isArray(t)){const n=e.get(t);if(n!==void 0)return n;const r=[];return e.set(t,r),t.forEach(i=>{r.push(BI(i,e))}),r}return t}function NJ(t){if(!Pu(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}const sL=50,oT=/\(error: (.*)\)/,aT=/captureMessage|captureException/;function oL(...t){const e=t.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const i=[],s=n.split(`
`);for(let o=r;o<s.length;o++){const a=s[o];if(a.length>1024)continue;const c=oT.test(a)?a.replace(oT,"$1"):a;if(!c.match(/\S*Error: /)){for(const l of e){const u=l(c);if(u){i.push(u);break}}if(i.length>=sL)break}}return MJ(i)}}function PJ(t){return Array.isArray(t)?oL(...t):t}function MJ(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(e[e.length-1].function||"")&&e.pop(),e.reverse(),aT.test(e[e.length-1].function||"")&&(e.pop(),aT.test(e[e.length-1].function||"")&&e.pop()),e.slice(0,sL).map(n=>({...n,filename:n.filename||e[e.length-1].filename,function:n.function||"?"}))}const c0="<anonymous>";function zo(t){try{return!t||typeof t!="function"?c0:t.name||c0}catch{return c0}}const ag={},cT={};function il(t,e){ag[t]=ag[t]||[],ag[t].push(e)}function sl(t,e){cT[t]||(e(),cT[t]=!0)}function Xi(t,e){const n=t&&ag[t];if(n)for(const r of n)try{r(e)}catch(i){sd&&K.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${zo(r)}
Error:`,i)}}function OJ(t){const e="console";il(e,t),sl(e,DJ)}function DJ(){"console"in Je&&LI.forEach(function(t){t in Je.console&&_n(Je.console,t,function(e){return gm[t]=e,function(...n){Xi("console",{args:n,level:t});const i=gm[t];i&&i.apply(Je.console,n)}})})}function yn(){const t=Je,e=t.crypto||t.msCrypto;let n=()=>Math.random()*16;try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return e.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function aL(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}function Ca(t){const{message:e,event_id:n}=t;if(e)return e;const r=aL(t);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function FI(t,e,n){const r=t.exception=t.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=e||""),s.type||(s.type=n||"Error")}function Kf(t,e){const n=aL(t);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...e},e&&"data"in e){const s={...i&&i.data,...e.data};n.mechanism.data=s}}function lT(t){if(t&&t.__sentry_captured__)return!0;try{Xf(t,"__sentry_captured__",!0)}catch{}return!1}function cL(t){return Array.isArray(t)?t:[t]}const Il=Je,LJ=1e3;let uT,UI,VI;function lL(t){const e="dom";il(e,t),sl(e,BJ)}function BJ(){if(!Il.document)return;const t=Xi.bind(null,"dom"),e=dT(t,!0);Il.document.addEventListener("click",e,!1),Il.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(n=>{const r=Il[n]&&Il[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(_n(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,l=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},u=l[s]=l[s]||{refCount:0};if(!u.handler){const d=dT(t);u.handler=d,i.call(this,s,d,a)}u.refCount++}catch{}return i.call(this,s,o,a)}}),_n(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,l=c.__sentry_instrumentation_handlers__||{},u=l[s];u&&(u.refCount--,u.refCount<=0&&(i.call(this,s,u.handler,a),u.handler=void 0,delete l[s]),Object.keys(l).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}function FJ(t){if(t.type!==UI)return!1;try{if(!t.target||t.target._sentryId!==VI)return!1}catch{}return!0}function UJ(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}function dT(t,e=!1){return n=>{if(!n||n._sentryCaptured)return;const r=VJ(n);if(UJ(n.type,r))return;Xf(n,"_sentryCaptured",!0),r&&!r._sentryId&&Xf(r,"_sentryId",yn());const i=n.type==="keypress"?"input":n.type;FJ(n)||(t({event:n,name:i,global:e}),UI=n.type,VI=r?r._sentryId:void 0),clearTimeout(uT),uT=Il.setTimeout(()=>{VI=void 0,UI=void 0},LJ)}}function VJ(t){try{return t.target}catch{return null}}const GI=Cw();function uL(){if(!("fetch"in GI))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function WI(t){return t&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function GJ(){if(typeof EdgeRuntime=="string")return!0;if(!uL())return!1;if(WI(GI.fetch))return!0;let t=!1;const e=GI.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(t=WI(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){sd&&K.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Sw(t){const e="fetch";il(e,t),sl(e,WJ)}function WJ(){GJ()&&_n(Je,"fetch",function(t){return function(...e){const{method:n,url:r}=jJ(e),i={args:e,fetchData:{method:n,url:r},startTimestamp:Date.now()};return Xi("fetch",{...i}),t.apply(Je,e).then(s=>{const o={...i,endTimestamp:Date.now(),response:s};return Xi("fetch",o),s},s=>{const o={...i,endTimestamp:Date.now(),error:s};throw Xi("fetch",o),s})}})}function jI(t,e){return!!t&&typeof t=="object"&&!!t[e]}function fT(t){return typeof t=="string"?t:t?jI(t,"url")?t.url:t.toString?t.toString():"":""}function jJ(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[n,r]=t;return{url:fT(n),method:jI(r,"method")?String(r.method).toUpperCase():"GET"}}const e=t[0];return{url:fT(e),method:jI(e,"method")?String(e.method).toUpperCase():"GET"}}let dp=null;function dL(t){const e="error";il(e,t),sl(e,HJ)}function HJ(){dp=Je.onerror,Je.onerror=function(t,e,n,r,i){return Xi("error",{column:r,error:i,line:n,msg:t,url:e}),dp&&!dp.__SENTRY_LOADER__?dp.apply(this,arguments):!1},Je.onerror.__SENTRY_INSTRUMENTED__=!0}let fp=null;function fL(t){const e="unhandledrejection";il(e,t),sl(e,$J)}function $J(){fp=Je.onunhandledrejection,Je.onunhandledrejection=function(t){return Xi("unhandledrejection",t),fp&&!fp.__SENTRY_LOADER__?fp.apply(this,arguments):!0},Je.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const hp=Cw();function zJ(){const t=hp.chrome,e=t&&t.app&&t.app.runtime,n="history"in hp&&!!hp.history.pushState&&!!hp.history.replaceState;return!e&&n}const Td=Je;let pp;function wv(t){const e="history";il(e,t),sl(e,ZJ)}function ZJ(){if(!zJ())return;const t=Td.onpopstate;Td.onpopstate=function(...n){const r=Td.location.href,i=pp;if(pp=r,Xi("history",{from:i,to:r}),t)try{return t.apply(this,n)}catch{}};function e(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=pp,o=String(i);pp=o,Xi("history",{from:s,to:o})}return n.apply(this,r)}}_n(Td.history,"pushState",e),_n(Td.history,"replaceState",e)}const XJ=Je,Na="__sentry_xhr_v3__";function bw(t){const e="xhr";il(e,t),sl(e,KJ)}function KJ(){if(!XJ.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;_n(t,"open",function(e){return function(...n){const r=Date.now(),i=Us(n[0])?n[0].toUpperCase():void 0,s=JJ(n[1]);if(!i||!s)return e.apply(this,n);this[Na]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[Na];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const c={args:[i,s],endTimestamp:Date.now(),startTimestamp:r,xhr:this};Xi("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?_n(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),_n(this,"setRequestHeader",function(a){return function(...c){const[l,u]=c,d=this[Na];return d&&Us(l)&&Us(u)&&(d.request_headers[l.toLowerCase()]=u),a.apply(this,c)}}),e.apply(this,n)}}),_n(t,"send",function(e){return function(...n){const r=this[Na];if(!r)return e.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return Xi("xhr",i),e.apply(this,n)}})}function JJ(t){if(Us(t))return t;try{return t.toString()}catch{}}function YJ(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function qJ(){return"npm"}function QJ(){return!YJ()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function hT(){return typeof window<"u"&&(!QJ()||eY())}function eY(){return Je.process!==void 0&&Je.process.type==="renderer"}function tY(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function n(i){if(t)return e.has(i)?!0:(e.add(i),!1);for(let s=0;s<e.length;s++)if(e[s]===i)return!0;return e.push(i),!1}function r(i){if(t)e.delete(i);else for(let s=0;s<e.length;s++)if(e[s]===i){e.splice(s,1);break}}return[n,r]}function hs(t,e=100,n=1/0){try{return HI("",t,e,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function hL(t,e=3,n=100*1024){const r=hs(t,e);return sY(r)>n?hL(t,e-1,n):r}function HI(t,e,n=1/0,r=1/0,i=tY()){const[s,o]=i;if(e==null||["number","boolean","string"].includes(typeof e)&&!YD(e))return e;const a=nY(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(e))return"[Circular ~]";const l=e;if(l&&typeof l.toJSON=="function")try{const h=l.toJSON();return HI("",h,c-1,r,i)}catch{}const u=Array.isArray(e)?[]:{};let d=0;const f=iL(e);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=r){u[h]="[MaxProperties ~]";break}const p=f[h];u[h]=HI(h,p,c-1,r,i),d++}return o(e),u}function nY(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(qD(e))return"[VueViewModel]";if(gJ(e))return"[SyntheticEvent]";if(typeof e=="number"&&e!==e)return"[NaN]";if(typeof e=="function")return`[Function: ${zo(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const n=rY(e);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function rY(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}function iY(t){return~-encodeURI(t).split(/%..|./).length}function sY(t){return iY(JSON.stringify(t))}var qs;(function(t){t[t.PENDING=0]="PENDING";const n=1;t[t.RESOLVED=n]="RESOLVED";const r=2;t[t.REJECTED=r]="REJECTED"})(qs||(qs={}));function Mu(t){return new Xr(e=>{e(t)})}function ww(t){return new Xr((e,n)=>{n(t)})}class Xr{constructor(e){Xr.prototype.__init.call(this),Xr.prototype.__init2.call(this),Xr.prototype.__init3.call(this),Xr.prototype.__init4.call(this),this._state=qs.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(n){this._reject(n)}}then(e,n){return new Xr((r,i)=>{this._handlers.push([!1,s=>{if(!e)r(s);else try{r(e(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(e){return this.then(n=>n,e)}finally(e){return new Xr((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,e&&e()},o=>{s=!0,i=o,e&&e()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=e=>{this._setResult(qs.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(qs.REJECTED,e)}}__init3(){this._setResult=(e,n)=>{if(this._state===qs.PENDING){if(bv(n)){n.then(this._resolve,this._reject);return}this._state=e,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===qs.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(n=>{n[0]||(this._state===qs.RESOLVED&&n[1](this._value),this._state===qs.REJECTED&&n[2](this._value),n[0]=!0)})}}}function oY(t){const e=[];function n(){return t===void 0||e.length<t}function r(o){return e.splice(e.indexOf(o),1)[0]}function i(o){if(!n())return ww(new vs("Not adding Promise because buffer limit was reached."));const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new Xr((a,c)=>{let l=e.length;if(!l)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(d=>{Mu(d).then(()=>{--l||(clearTimeout(u),a(!0))},c)})})}return{$:e,add:i,drain:s}}function cg(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const n=e[6]||"",r=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:n,hash:r,relative:e[5]+n+r}}const aY=["fatal","error","warning","log","info","debug"];function cY(t){return t==="warn"?"warning":aY.includes(t)?t:"log"}const pL=1e3;function Eh(){return Date.now()/pL}function lY(){const{performance:t}=Je;if(!t||!t.now)return Eh;const e=Date.now()-t.now(),n=t.timeOrigin==null?e:t.timeOrigin;return()=>(n+t.now())/pL}const Th=lY(),qi=(()=>{const{performance:t}=Je;if(!t||!t.now)return;const e=3600*1e3,n=t.now(),r=Date.now(),i=t.timeOrigin?Math.abs(t.timeOrigin+n-r):e,s=i<e,o=t.timing&&t.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):e,l=c<e;return s||l?i<=c?t.timeOrigin:o:r})(),$I="baggage",gL="sentry-",uY=/^sentry-/,dY=8192;function fY(t){if(!Us(t)&&!Array.isArray(t))return;let e={};if(Array.isArray(t))e=t.reduce((r,i)=>{const s=pT(i);for(const o of Object.keys(s))r[o]=s[o];return r},{});else{if(!t)return;e=pT(t)}const n=Object.entries(e).reduce((r,[i,s])=>{if(i.match(uY)){const o=i.slice(gL.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function zI(t){if(!t)return;const e=Object.entries(t).reduce((n,[r,i])=>(i&&(n[`${gL}${r}`]=i),n),{});return hY(e)}function pT(t){return t.split(",").map(e=>e.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((e,[n,r])=>(e[n]=r,e),{})}function hY(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[n,r],i)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=i===0?s:`${e},${s}`;return o.length>dY?(sd&&K.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),e):o},"")}const pY=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function gY(t){if(!t)return;const e=t.match(pY);if(!e)return;let n;return e[3]==="1"?n=!0:e[3]==="0"&&(n=!1),{traceId:e[1],parentSampled:n,parentSpanId:e[2]}}function mY(t,e){const n=gY(t),r=fY(e),{traceId:i,parentSpanId:s,parentSampled:o}=n||{},a={traceId:i||yn(),spanId:yn().substring(16),sampled:o};return s&&(a.parentSpanId=s),r&&(a.dsc=r),{traceparentData:n,dynamicSamplingContext:r,propagationContext:a}}function kw(t=yn(),e=yn().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${t}-${e}${r}`}function ol(t,e=[]){return[t,e]}function vY(t,e){const[n,r]=t;return[n,[...r,e]]}function gT(t,e){const n=t[1];for(const r of n){const i=r[0].type;if(e(r,i))return!0}return!1}function ZI(t,e){return(e||new TextEncoder).encode(t)}function yY(t,e){const[n,r]=t;let i=JSON.stringify(n);function s(o){typeof i=="string"?i=typeof o=="string"?i+o:[ZI(i,e),o]:i.push(typeof o=="string"?ZI(o,e):o)}for(const o of r){const[a,c]=o;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let l;try{l=JSON.stringify(c)}catch{l=JSON.stringify(hs(c))}s(l)}}return typeof i=="string"?i:CY(i)}function CY(t){const e=t.reduce((i,s)=>i+s.length,0),n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}function IY(t,e){const n=typeof t.data=="string"?ZI(t.data,e):t.data;return[_r({type:"attachment",length:n.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),n]}const SY={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function mT(t){return SY[t]}function Aw(t){if(!t||!t.sdk)return;const{name:e,version:n}=t.sdk;return{name:e,version:n}}function mL(t,e,n,r){const i=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!n&&r&&{dsn:od(r)},...i&&{trace:_r({...i})}}}function bY(t,e,n){const r=[{type:"client_report"},{timestamp:n||Eh(),discarded_events:t}];return ol(e?{dsn:e}:{},[r])}const wY=60*1e3;function kY(t,e=Date.now()){const n=parseInt(`${t}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${t}`);return isNaN(r)?wY:r-e}function AY(t,e){return t[e]||t.all||0}function vL(t,e,n=Date.now()){return AY(t,e)>n}function yL(t,{statusCode:e,headers:n},r=Date.now()){const i={...t},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,l]=a.split(":",2),u=parseInt(c,10),d=(isNaN(u)?60:u)*1e3;if(!l)i.all=r+d;else for(const f of l.split(";"))i[f]=r+d}else o?i.all=r+kY(o,r):e===429&&(i.all=r+60*1e3);return i}function EY(t,e){return t??e()}function l0(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}const be=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,kv="production";function Ew(){return QD("globalEventProcessors",()=>[])}function TY(t){Ew().push(t)}function mm(t,e,n,r=0){return new Xr((i,s)=>{const o=t[r];if(e===null||typeof o!="function")i(e);else{const a=o({...e},n);be&&o.id&&a===null&&K.log(`Event processor "${o.id}" dropped event`),bv(a)?a.then(c=>mm(t,c,n,r+1).then(i)).then(null,s):mm(t,a,n,r+1).then(i).then(null,s)}})}function CL(t){const e=Th(),n={sid:yn(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>_Y(n)};return t&&Kc(n,t),n}function Kc(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Th(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:yn()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const n=t.timestamp-t.started;t.duration=n>=0?n:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function IL(t,e){let n={};e?n={status:e}:t.status==="ok"&&(n={status:"exited"}),Kc(t,n)}function _Y(t){return _r({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}const RY=0,SL=1;function Tw(t){const{spanId:e,traceId:n}=t.spanContext(),{data:r,op:i,parent_span_id:s,status:o,tags:a,origin:c}=xn(t);return _r({data:r,op:i,parent_span_id:s,span_id:e,status:o,tags:a,trace_id:n,origin:c})}function Av(t){const{traceId:e,spanId:n}=t.spanContext(),r=_w(t);return kw(e,n,r)}function Ev(t){return typeof t=="number"?vT(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?vT(t.getTime()):Th()}function vT(t){return t>9999999999?t/1e3:t}function xn(t){return xY(t)?t.getSpanJSON():typeof t.toJSON=="function"?t.toJSON():{}}function xY(t){return typeof t.getSpanJSON=="function"}function _w(t){const{traceFlags:e}=t.spanContext();return!!(e&SL)}function bL(t,e,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||n.event_id||yn(),timestamp:e.timestamp||Eh()},l=n.integrations||t.integrations.map(y=>y.name);NY(c,t),OY(c,l),e.type===void 0&&PY(c,t.stackParser);const u=LY(r,n.captureContext);n.mechanism&&Kf(c,n.mechanism);const d=i&&i.getEventProcessors?i.getEventProcessors():[],f=XY().getScopeData();if(s){const y=s.getScopeData();ST(f,y)}if(u){const y=u.getScopeData();ST(f,y)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),TL(c,f);const p=[...d,...Ew(),...f.eventProcessors];return mm(p,c,n).then(y=>(y&&MY(y),typeof o=="number"&&o>0?DY(y,o,a):y))}function NY(t,e){const{environment:n,release:r,dist:i,maxValueLength:s=250}=e;"environment"in t||(t.environment="environment"in e?n:kv),t.release===void 0&&r!==void 0&&(t.release=r),t.dist===void 0&&i!==void 0&&(t.dist=i),t.message&&(t.message=cu(t.message,s));const o=t.exception&&t.exception.values&&t.exception.values[0];o&&o.value&&(o.value=cu(o.value,s));const a=t.request;a&&a.url&&(a.url=cu(a.url,s))}const yT=new WeakMap;function PY(t,e){const n=Je._sentryDebugIds;if(!n)return;let r;const i=yT.get(e);i?r=i:(r=new Map,yT.set(e,r));const s=Object.keys(n).reduce((o,a)=>{let c;const l=r.get(a);l?c=l:(c=e(a),r.set(a,c));for(let u=c.length-1;u>=0;u--){const d=c[u];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{t.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function MY(t){const e={};try{t.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?e[i.abs_path]=i.debug_id:i.filename&&(e[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const n=t.debug_meta.images;Object.keys(e).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:e[r]})})}function OY(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function DY(t,e,n){if(!t)return null;const r={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(i=>({...i,...i.data&&{data:hs(i.data,e,n)}}))},...t.user&&{user:hs(t.user,e,n)},...t.contexts&&{contexts:hs(t.contexts,e,n)},...t.extra&&{extra:hs(t.extra,e,n)}};return t.contexts&&t.contexts.trace&&r.contexts&&(r.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(r.contexts.trace.data=hs(t.contexts.trace.data,e,n))),t.spans&&(r.spans=t.spans.map(i=>{const s=xn(i).data;return s&&(i.data=hs(s,e,n)),i})),r}function LY(t,e){if(!e)return t;const n=t?t.clone():new Ds;return n.update(e),n}function BY(t){if(t)return FY(t)?{captureContext:t}:VY(t)?{captureContext:t}:t}function FY(t){return t instanceof Ds||typeof t=="function"}const UY=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function VY(t){return Object.keys(t).some(e=>UY.includes(e))}function Tv(t,e){return Dr().captureException(t,BY(e))}function wL(t,e){return Dr().captureEvent(t,e)}function Ya(t,e){Dr().addBreadcrumb(t,e)}function GY(t,e){Dr().setContext(t,e)}function kL(...t){const e=Dr();if(t.length===2){const[n,r]=t;return n?e.withScope(()=>(e.getStackTop().scope=n,r(n))):e.withScope(r)}return e.withScope(t[0])}function yt(){return Dr().getClient()}function ts(){return Dr().getScope()}function CT(t){const e=yt(),n=Rh(),r=ts(),{release:i,environment:s=kv}=e&&e.getOptions()||{},{userAgent:o}=Je.navigator||{},a=CL({release:i,environment:s,user:r.getUser()||n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession();return c&&c.status==="ok"&&Kc(c,{status:"exited"}),AL(),n.setSession(a),r.setSession(a),a}function AL(){const t=Rh(),e=ts(),n=e.getSession()||t.getSession();n&&IL(n),EL(),t.setSession(),e.setSession()}function EL(){const t=Rh(),e=ts(),n=yt(),r=e.getSession()||t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}function IT(t=!1){if(t){AL();return}EL()}function Ou(t){return t.transaction}function _v(t,e,n){const r=e.getOptions(),{publicKey:i}=e.getDsn()||{},{segment:s}=n&&n.getUser()||{},o=_r({environment:r.environment||kv,release:r.release,user_segment:s,public_key:i,trace_id:t});return e.emit&&e.emit("createDsc",o),o}function Jf(t){const e=yt();if(!e)return{};const n=_v(xn(t).trace_id||"",e,ts()),r=Ou(t);if(!r)return n;const i=r&&r._frozenDynamicSamplingContext;if(i)return i;const{sampleRate:s,source:o}=r.metadata;s!=null&&(n.sample_rate=`${s}`);const a=xn(r);return o&&o!=="url"&&(n.transaction=a.description),n.sampled=String(_w(r)),e.emit&&e.emit("createDsc",n),n}function TL(t,e){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s,propagationContext:o}=e;WY(t,e),r&&$Y(t,r),zY(t,n),jY(t,i),HY(t,s,o)}function ST(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:p}=e;_d(t,"extra",n),_d(t,"tags",r),_d(t,"user",i),_d(t,"contexts",s),_d(t,"sdkProcessingMetadata",a),o&&(t.level=o),h&&(t.transactionName=h),p&&(t.span=p),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),u.length&&(t.eventProcessors=[...t.eventProcessors,...u]),d.length&&(t.attachments=[...t.attachments,...d]),t.propagationContext={...t.propagationContext,...f}}function _d(t,e,n){if(n&&Object.keys(n).length){t[e]={...t[e]};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[e][r]=n[r])}}function WY(t,e){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=e,c=_r(n);c&&Object.keys(c).length&&(t.extra={...c,...t.extra});const l=_r(r);l&&Object.keys(l).length&&(t.tags={...l,...t.tags});const u=_r(i);u&&Object.keys(u).length&&(t.user={...u,...t.user});const d=_r(s);d&&Object.keys(d).length&&(t.contexts={...d,...t.contexts}),o&&(t.level=o),a&&(t.transaction=a)}function jY(t,e){const n=[...t.breadcrumbs||[],...e];t.breadcrumbs=n.length?n:void 0}function HY(t,e,n){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e,propagationContext:n}}function $Y(t,e){t.contexts={trace:Tw(e),...t.contexts};const n=Ou(e);if(n){t.sdkProcessingMetadata={dynamicSamplingContext:Jf(e),...t.sdkProcessingMetadata};const r=xn(n).description;r&&(t.tags={transaction:r,...t.tags})}}function zY(t,e){t.fingerprint=t.fingerprint?cL(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}const ZY=100;let u0;class Ds{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=bT()}static clone(e){return e?e.clone():new Ds}clone(){const e=new Ds;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&Kc(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,n){return this._tags={...this._tags,[e]:n},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,n){return this._extra={...this._extra,[e]:n},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,n){return n===null?delete this._contexts[e]:this._contexts[e]=n,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;if(typeof e=="function"){const n=e(this);return n instanceof Ds?n:this}return e instanceof Ds?(this._tags={...this._tags,...e._tags},this._extra={...this._extra,...e._extra},this._contexts={...this._contexts,...e._contexts},e._user&&Object.keys(e._user).length&&(this._user=e._user),e._level&&(this._level=e._level),e._fingerprint&&(this._fingerprint=e._fingerprint),e._requestSession&&(this._requestSession=e._requestSession),e._propagationContext&&(this._propagationContext=e._propagationContext)):Pu(e)&&(e=e,this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint&&(this._fingerprint=e.fingerprint),e.requestSession&&(this._requestSession=e.requestSession),e.propagationContext&&(this._propagationContext=e.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=bT(),this}addBreadcrumb(e,n){const r=typeof n=="number"?n:ZY;if(r<=0)return this;const i={timestamp:Eh(),...e},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:o,_level:a,_fingerprint:c,_eventProcessors:l,_propagationContext:u,_sdkProcessingMetadata:d,_transactionName:f,_span:h}=this;return{breadcrumbs:e,attachments:n,contexts:r,tags:i,extra:s,user:o,level:a,fingerprint:c||[],eventProcessors:l,propagationContext:u,sdkProcessingMetadata:d,transactionName:f,span:h}}applyToEvent(e,n={},r=[]){TL(e,this.getScopeData());const i=[...r,...Ew(),...this._eventProcessors];return mm(i,e,n)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,n){const r=n&&n.event_id?n.event_id:yn();if(!this._client)return K.warn("No client configured on scope - will not capture exception!"),r;const i=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:i,...n,event_id:r},this),r}captureMessage(e,n,r){const i=r&&r.event_id?r.event_id:yn();if(!this._client)return K.warn("No client configured on scope - will not capture message!"),i;const s=new Error(e);return this._client.captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i},this),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:yn();return this._client?(this._client.captureEvent(e,{...n,event_id:r},this),r):(K.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function XY(){return u0||(u0=new Ds),u0}function bT(){return{traceId:yn(),spanId:yn().substring(16)}}const XI="7.98.0",_L=parseFloat(XI),KY=100;class RL{constructor(e,n,r,i=_L){this._version=i;let s;n?s=n:(s=new Ds,s.setClient(e));let o;r?o=r:(o=new Ds,o.setClient(e)),this._stack=[{scope:s}],e&&this.bindClient(e),this._isolationScope=o}isOlderThan(e){return this._version<e}bindClient(e){const n=this.getStackTop();n.client=e,n.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(e){const n=this.pushScope();let r;try{r=e(n)}catch(i){throw this.popScope(),i}return bv(r)?r.then(i=>(this.popScope(),i),i=>{throw this.popScope(),i}):(this.popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,n){const r=this._lastEventId=n&&n.event_id?n.event_id:yn(),i=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:i,...n,event_id:r}),r}captureMessage(e,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:yn(),s=new Error(e);return this.getScope().captureMessage(e,n,{originalException:e,syntheticException:s,...r,event_id:i}),i}captureEvent(e,n){const r=n&&n.event_id?n.event_id:yn();return e.type||(this._lastEventId=r),this.getScope().captureEvent(e,{...n,event_id:r}),r}lastEventId(){return this._lastEventId}addBreadcrumb(e,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=KY}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const c={timestamp:Eh(),...e},l=s?Xc(()=>s(c,n)):c;l!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",l,n),r.addBreadcrumb(l,o))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,n){this.getScope().setTag(e,n),this.getIsolationScope().setTag(e,n)}setExtra(e,n){this.getScope().setExtra(e,n),this.getIsolationScope().setExtra(e,n)}setContext(e,n){this.getScope().setContext(e,n),this.getIsolationScope().setContext(e,n)}configureScope(e){const{scope:n,client:r}=this.getStackTop();r&&e(n)}run(e){const n=wT(this);try{e(this)}finally{wT(n)}}getIntegration(e){const n=this.getClient();if(!n)return null;try{return n.getIntegration(e)}catch{return be&&K.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,n){const r=this._callExtensionMethod("startTransaction",e,n);return be&&!r&&(this.getClient()?K.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):K.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&IL(r),this._sendSessionUpdate(),n.setSession()}startSession(e){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=kv}=r&&r.getOptions()||{},{userAgent:o}=Je.navigator||{},a=CL({release:i,environment:s,user:n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&Kc(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const e=this.getClient(),n=e&&e.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:n}=this.getStackTop(),r=e.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_callExtensionMethod(e,...n){const i=_h().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[e]=="function")return i.extensions[e].apply(this,n);be&&K.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function _h(){return Je.__SENTRY__=Je.__SENTRY__||{extensions:{},hub:void 0},Je}function wT(t){const e=_h(),n=KI(e);return xL(e,t),n}function Dr(){const t=_h();if(t.__SENTRY__&&t.__SENTRY__.acs){const e=t.__SENTRY__.acs.getCurrentHub();if(e)return e}return JY(t)}function Rh(){return Dr().getIsolationScope()}function JY(t=_h()){return(!YY(t)||KI(t).isOlderThan(_L))&&xL(t,new RL),KI(t)}function YY(t){return!!(t&&t.__SENTRY__&&t.__SENTRY__.hub)}function KI(t){return QD("hub",()=>new RL,t)}function xL(t,e){if(!t)return!1;const n=t.__SENTRY__=t.__SENTRY__||{};return n.hub=e,!0}function ad(t){return(t||Dr()).getScope().getTransaction()}let kT=!1;function qY(){kT||(kT=!0,dL(JI),fL(JI))}function JI(){const t=ad();if(t){const e="internal_error";be&&K.log(`[Tracing] Transaction: ${e} -> Global error occured`),t.setStatus(e)}}JI.tag="sentry_tracingErrorCallback";const uu="sentry.source",Ul="sentry.sample_rate",gp="sentry.op",mp="sentry.origin";class NL{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class Rw{constructor(e={}){this._traceId=e.traceId||yn(),this._spanId=e.spanId||yn().substring(16),this._startTime=e.startTimestamp||Th(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this._attributes=e.attributes?{...e.attributes}:{},this.instrumenter=e.instrumenter||"sentry",this.setAttribute(mp,e.origin||"manual"),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.op&&this.setAttribute(gp,e.op),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp)}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[gp]}set op(e){this.setAttribute(gp,e)}get origin(){return this._attributes[mp]}set origin(e){this.setAttribute(mp,e)}spanContext(){const{_spanId:e,_traceId:n,_sampled:r}=this;return{spanId:e,traceId:n,traceFlags:r?SL:RY}}startChild(e){const n=new Rw({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n);const r=Ou(this);if(n.transaction=r,be&&r){const i=e&&e.op||"< unknown op >",s=xn(n).description||"< unknown name >",o=r.spanContext().spanId,a=`[Tracing] Starting '${i}' span on transaction '${s}' (${o}).`;K.log(a),this._logMessage=a}return n}setTag(e,n){return this.tags={...this.tags,[e]:n},this}setData(e,n){return this.data={...this.data,[e]:n},this}setAttribute(e,n){n===void 0?delete this._attributes[e]:this._attributes[e]=n}setAttributes(e){Object.keys(e).forEach(n=>this.setAttribute(n,e[n]))}setStatus(e){return this._status=e,this}setHttpStatus(e){this.setTag("http.status_code",String(e)),this.setData("http.response.status_code",e);const n=QY(e);return n!=="unknown_error"&&this.setStatus(n),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return this._status==="ok"}finish(e){return this.end(e)}end(e){if(this._endTime)return;const n=Ou(this);if(be&&n&&n.spanContext().spanId!==this._spanId){const r=this._logMessage;r&&K.log(r.replace("Starting","Finishing"))}this._endTime=Ev(e)}toTraceparent(){return Av(this)}toContext(){return _r({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return Tw(this)}getSpanJSON(){return _r({data:this._getData(),description:this._name,op:this._attributes[gp],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[mp]})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:n}=this,r=Object.keys(e).length>0,i=Object.keys(n).length>0;if(!(!r&&!i))return r&&i?{...e,...n}:r?e:n}}function QY(t){if(t<400&&t>=100)return"ok";if(t>=400&&t<500)switch(t){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(t>=500&&t<600)switch(t){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}class PL extends Rw{constructor(e,n){super(e),this._measurements={},this._contexts={},this._hub=n||Dr(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const r=this._metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[uu]&&{source:this._attributes[uu]},...this._attributes[Ul]&&{sampleRate:this._attributes[Ul]}}}set metadata(e){this._metadata=e}setName(e,n="custom"){this._name=e,this.setAttribute(uu,n)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new NL(e)),this.spanRecorder.add(this)}setContext(e,n){n===null?delete this._contexts[e]:this._contexts[e]=n}setMeasurement(e,n,r=""){this._measurements[e]={value:n,unit:r}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const n=Ev(e),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const e=super.toContext();return _r({...e,name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return Jf(this)}setHub(e){this._hub=e}_finishTransaction(e){if(this._endTime!==void 0)return;this._name||(be&&K.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this._sampled!==!0){be&&K.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(c=>c!==this&&xn(c).timestamp):[];if(this._trimEnd&&r.length>0){const c=r.map(l=>xn(l).timestamp).filter(Boolean);this._endTime=c.reduce((l,u)=>l>u?l:u)}const{metadata:i}=this,{source:s}=i,o={contexts:{...this._contexts,trace:Tw(this)},spans:r,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...i,dynamicSamplingContext:Jf(this)},...s&&{transaction_info:{source:s}}};return Object.keys(this._measurements).length>0&&(be&&K.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),o.measurements=this._measurements),be&&K.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),o}}const lg={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},eq="finishReason",ml=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class tq extends NL{constructor(e,n,r,i){super(i),this._pushActivity=e,this._popActivity=n,this.transactionSpanId=r}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const n=e.end;e.end=(...r)=>(this._popActivity(e.spanContext().spanId),n.apply(e,r)),xn(e).timestamp===void 0&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class nq extends PL{constructor(e,n,r=lg.idleTimeout,i=lg.finalTimeout,s=lg.heartbeatInterval,o=!1,a=!1){super(e,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=ml[4],this._autoFinishAllowed=!a,o&&(be&&K.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),n.getScope().setSpan(this)),a||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=ml[3],this.end())},this._finalTimeout)}end(e){const n=Ev(e);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setAttribute(eq,this._finishReason),this.spanRecorder){be&&K.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,n);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanContext().spanId===this.spanContext().spanId)return!0;xn(r).timestamp||(r.setStatus("cancelled"),r.end(n),be&&K.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const{start_timestamp:i,timestamp:s}=xn(r),o=i&&i<n,a=(this._finalTimeout+this._idleTimeout)/1e3,c=s&&i&&s-i<a;if(be){const l=JSON.stringify(r,void 0,2);o?c||K.log("[Tracing] discarding Span since it finished after Transaction final timeout",l):K.log("[Tracing] discarding Span since it happened after Transaction was finished",l)}return o&&c}),be&&K.log("[Tracing] flushing IdleTransaction")}else be&&K.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const n=i=>{this._finished||this._pushActivity(i)},r=i=>{this._finished||this._popActivity(i)};this.spanRecorder=new tq(n,r,this.spanContext().spanId,e),be&&K.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=ml[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(be&&K.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=ml[1],this.end(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),be&&K.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,be&&K.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(be&&K.log(`[Tracing] popActivity ${e}`),delete this.activities[e],be&&K.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=Th();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=ml[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(be&&K.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=ml[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){be&&K.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function Rv(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=yt(),n=t||e&&e.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function ML(t,e,n){if(!Rv(e))return t.sampled=!1,t;if(t.sampled!==void 0)return t.setAttribute(Ul,Number(t.sampled)),t;let r;return typeof e.tracesSampler=="function"?(r=e.tracesSampler(n),t.setAttribute(Ul,Number(r))):n.parentSampled!==void 0?r=n.parentSampled:typeof e.tracesSampleRate<"u"?(r=e.tracesSampleRate,t.setAttribute(Ul,Number(r))):(r=1,t.setAttribute(Ul,r)),rq(r)?r?(t.sampled=Math.random()<r,t.sampled?(be&&K.log(`[Tracing] starting ${t.op} transaction - ${xn(t).description}`),t):(be&&K.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),t)):(be&&K.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),t.sampled=!1,t):(be&&K.warn("[Tracing] Discarding transaction because of invalid sample rate."),t.sampled=!1,t)}function rq(t){return YD(t)||!(typeof t=="number"||typeof t=="boolean")?(be&&K.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`),!1):t<0||t>1?(be&&K.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${t}.`),!1):!0}function iq(){const e=this.getScope().getSpan();return e?{"sentry-trace":Av(e)}:{}}function sq(t,e){const n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",s=t.instrumenter||"sentry";i!==s&&(be&&K.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),t.sampled=!1);let o=new PL(t,this);return o=ML(o,r,{parentSampled:t.parentSampled,transactionContext:t,...e}),o.isRecording()&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function AT(t,e,n,r,i,s,o,a=!1){const c=t.getClient(),l=c&&c.getOptions()||{};let u=new nq(e,t,n,r,o,i,a);return u=ML(u,l,{parentSampled:e.parentSampled,transactionContext:e,...s}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function oq(){const t=_h();t.__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=sq),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=iq),qY())}function OL(t){if(!Rv())return;const e=cq(t),n=Dr(),r=t.scope?t.scope.getSpan():aq();return r?r.startChild(e):n.startTransaction(e)}function aq(){return ts().getSpan()}function cq(t){if(t.startTime){const e={...t};return e.startTimestamp=Ev(t.startTime),delete e.startTime,e}return t}function lq(t,e,n){const r=ad();r&&r.setMeasurement(t,e,n)}function uq(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}function dq(t,e,n,r){const i=Aw(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&e&&{dsn:od(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return ol(s,[o])}function fq(t,e,n,r){const i=Aw(n),s=t.type&&t.type!=="replay_event"?t.type:"event";uq(t,n&&n.sdk);const o=mL(t,i,r,e);return delete t.sdkProcessingMetadata,ol(o,[[{type:s},t]])}const hq="7";function DL(t){const e=t.protocol?`${t.protocol}:`:"",n=t.port?`:${t.port}`:"";return`${e}//${t.host}${n}${t.path?`/${t.path}`:""}/api/`}function pq(t){return`${DL(t)}${t.projectId}/envelope/`}function gq(t,e){return RJ({sentry_key:t.publicKey,sentry_version:hq,...e&&{sentry_client:`${e.name}/${e.version}`}})}function mq(t,e={}){const n=typeof e=="string"?e:e.tunnel,r=typeof e=="string"||!e._metadata?void 0:e._metadata.sdk;return n||`${pq(t)}?${gq(t,r)}`}function vq(t,e){const n=nL(t);if(!n)return"";const r=`${DL(n)}embed/error-page/`;let i=`dsn=${od(n)}`;for(const s in e)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const o=e.user;if(!o)continue;o.name&&(i+=`&name=${encodeURIComponent(o.name)}`),o.email&&(i+=`&email=${encodeURIComponent(o.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(e[s])}`;return`${r}?${i}`}const ET=[];function yq(t){const e={};return t.forEach(n=>{const{name:r}=n,i=e[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(e[r]=n)}),Object.keys(e).map(n=>e[n])}function Cq(t){const e=t.defaultIntegrations||[],n=t.integrations;e.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...e,...n]:typeof n=="function"?r=cL(n(e)):r=e;const i=yq(r),s=Sq(i,o=>o.name==="Debug");if(s!==-1){const[o]=i.splice(s,1);i.push(o)}return i}function Iq(t,e){const n={};return e.forEach(r=>{r&&LL(t,r,n)}),n}function LL(t,e,n){if(n[e.name]){be&&K.log(`Integration skipped because it was already installed: ${e.name}`);return}if(n[e.name]=e,ET.indexOf(e.name)===-1&&(e.setupOnce(TY,Dr),ET.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),t.on&&typeof e.preprocessEvent=="function"){const r=e.preprocessEvent.bind(e);t.on("preprocessEvent",(i,s)=>r(i,s,t))}if(t.addEventProcessor&&typeof e.processEvent=="function"){const r=e.processEvent.bind(e),i=Object.assign((s,o)=>r(s,o,t),{id:e.name});t.addEventProcessor(i)}be&&K.log(`Integration installed: ${e.name}`)}function Sq(t,e){for(let n=0;n<t.length;n++)if(e(t[n])===!0)return n;return-1}function ac(t,e){return Object.assign(function(...r){return e(...r)},{id:t})}function bq(t){let e="";for(const n of t){const r=Object.entries(n.tags),i=r.length>0?`|#${r.map(([s,o])=>`${s}:${o}`).join(",")}`:"";e+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}
`}return e}function wq(t,e,n,r){const i={sent_at:new Date().toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&e&&(i.dsn=od(e));const s=kq(t);return ol(i,[s])}function kq(t){const e=bq(t);return[{type:"statsd",length:e.length},e]}const TT="Not capturing exception because it's already been captured.";class Aq{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=nL(e.dsn):be&&K.warn("No DSN provided, client will not send events."),this._dsn){const n=mq(this._dsn,e);this._transport=e.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:n})}}captureException(e,n,r){if(lT(e)){be&&K.log(TT);return}let i=n&&n.event_id;return this._process(this.eventFromException(e,n).then(s=>this._captureEvent(s,n,r)).then(s=>{i=s})),i}captureMessage(e,n,r,i){let s=r&&r.event_id;const o=vw(e)?e:String(e),a=yw(e)?this.eventFromMessage(o,n,r):this.eventFromException(e,r);return this._process(a.then(c=>this._captureEvent(c,r,i)).then(c=>{s=c})),s}captureEvent(e,n,r){if(n&&n.originalException&&lT(n.originalException)){be&&K.log(TT);return}let i=n&&n.event_id;return this._process(this._captureEvent(e,n,r).then(s=>{i=s})),i}captureSession(e){typeof e.release!="string"?be&&K.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Kc(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then(r=>n.flush(e).then(i=>r&&i))):Mu(!0)}close(e){return this.flush(e).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch{return be&&K.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){LL(this,e,this._integrations)}sendEvent(e,n={}){this.emit("beforeSendEvent",e,n);let r=fq(e,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=vY(r,IY(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",e,s),null)}sendSession(e){const n=dq(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(e,n,r){if(this._options.sendClientReports){const i=`${e}:${n}`;be&&K.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}captureAggregateMetrics(e){be&&K.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const n=wq(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(e,n){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(n)}emit(e,...n){this._hooks[e]&&this._hooks[e].forEach(r=>r(...n))}_setupIntegrations(){this._integrations=Iq(this,this._options.integrations),this._integrationsInitialized=!0}_updateSessionFromEvent(e,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const c of s){const l=c.mechanism;if(l&&l.handled===!1){r=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&r)&&(Kc(e,{...r&&{status:"crashed"},errors:e.errors||Number(i||r)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Xr(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,e&&r>=e&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,n,r,i=Rh()){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",e,n),bL(s,e,n,r,this,i).then(a=>{if(a===null)return a;const{propagationContext:c}=a.sdkProcessingMetadata||{};if(!(a.contexts&&a.contexts.trace)&&c){const{traceId:u,spanId:d,parentSpanId:f,dsc:h}=c;a.contexts={trace:{trace_id:u,span_id:d,parent_span_id:f},...a.contexts};const p=h||_v(u,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:p,...a.sdkProcessingMetadata}}return a})}_captureEvent(e,n={},r){return this._processEvent(e,n,r).then(i=>i.event_id,i=>{if(be){const s=i;s.logLevel==="log"?K.log(s.message):K.warn(s)}})}_processEvent(e,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=FL(e),a=BL(e),c=e.type||"error",l=`before send for type \`${c}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",e),ww(new vs(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const u=c==="replay_event"?"replay":c;return this._prepareEvent(e,n,r).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",u,e),new vs("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;const h=Tq(i,d,n);return Eq(h,l)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",u,e),new vs(`${l} returned \`null\`, will not send event.`,"log");const f=r&&r.getSession();!o&&f&&this._updateSessionFromEvent(f,d);const h=d.transaction_info;if(o&&h&&d.transaction!==e.transaction){const p="custom";d.transaction_info={...h,source:p}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof vs?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new vs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(e){this._numProcessing++,e.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,n=>{be&&K.error("Error while sending event:",n)});be&&K.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:e[n]}})}}function Eq(t,e){const n=`${e} must return \`null\` or a valid event.`;if(bv(t))return t.then(r=>{if(!Pu(r)&&r!==null)throw new vs(n);return r},r=>{throw new vs(`${e} rejected with ${r}`)});if(!Pu(t)&&t!==null)throw new vs(n);return t}function Tq(t,e,n){const{beforeSend:r,beforeSendTransaction:i}=t;return BL(e)&&r?r(e,n):FL(e)&&i?i(e,n):e}function BL(t){return t.type===void 0}function FL(t){return t.type==="transaction"}function _q(t){const e=yt();!e||!e.addEventProcessor||e.addEventProcessor(t)}function Rq(t,e){e.debug===!0&&(be?K.enable():Xc(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ts().update(e.initialScope);const r=new t(e);xq(r),Nq(r)}function xq(t){const n=Dr().getStackTop();n.client=t,n.scope.setClient(t)}function Nq(t){t.init?t.init():t.setupIntegrations&&t.setupIntegrations()}const Pq=30;function UL(t,e,n=oY(t.bufferSize||Pq)){let r={};const i=o=>n.drain(o);function s(o){const a=[];if(gT(o,(d,f)=>{const h=mT(f);if(vL(r,h)){const p=_T(d,f);t.recordDroppedEvent("ratelimit_backoff",h,p)}else a.push(d)}),a.length===0)return Mu();const c=ol(o[0],a),l=d=>{gT(c,(f,h)=>{const p=_T(f,h);t.recordDroppedEvent(d,mT(h),p)})},u=()=>e({body:yY(c,t.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&be&&K.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=yL(r,d),d),d=>{throw l("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof vs)return be&&K.error("Skipped sending event because buffer is full."),l("queue_overflow"),Mu();throw d})}return s.__sentry__baseTransport__=!0,{send:s,flush:i}}function _T(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}function Mq(t,e){const n=e&&Lq(e)?e.getClient():e,r=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return Dq(t,r)||Oq(t,i)}function Oq(t,e){return e?RT(t)===RT(e):!1}function Dq(t,e){return e?t.includes(e.host):!1}function RT(t){return t[t.length-1]==="/"?t.slice(0,-1):t}function Lq(t){return t.getClient!==void 0}function VL(t,e,n=[e],r="npm"){const i=t._metadata||{};i.sdk||(i.sdk={name:`sentry.javascript.${e}`,packages:n.map(s=>({name:`${r}:@sentry/${s}`,version:XI})),version:XI}),t._metadata=i}const Bq=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Fq=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],GL="InboundFilters",Uq=(t={})=>({name:GL,setupOnce(){},processEvent(e,n,r){const i=r.getOptions(),s=Vq(t,i);return Gq(e,s)?null:e}}),WL=Uq;ac(GL,WL);function Vq(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Bq],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[],...t.disableTransactionDefaults?[]:Fq],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}function Gq(t,e){return e.ignoreInternal&&Zq(t)?(be&&K.warn(`Event dropped due to being internal Sentry Error.
Event: ${Ca(t)}`),!0):Wq(t,e.ignoreErrors)?(be&&K.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Ca(t)}`),!0):jq(t,e.ignoreTransactions)?(be&&K.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Ca(t)}`),!0):Hq(t,e.denyUrls)?(be&&K.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Ca(t)}.
Url: ${vm(t)}`),!0):$q(t,e.allowUrls)?!1:(be&&K.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Ca(t)}.
Url: ${vm(t)}`),!0)}function Wq(t,e){return t.type||!e||!e.length?!1:zq(t).some(n=>id(n,e))}function jq(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const n=t.transaction;return n?id(n,e):!1}function Hq(t,e){if(!e||!e.length)return!1;const n=vm(t);return n?id(n,e):!1}function $q(t,e){if(!e||!e.length)return!0;const n=vm(t);return n?id(n,e):!0}function zq(t){const e=[];t.message&&e.push(t.message);let n;try{n=t.exception.values[t.exception.values.length-1]}catch{}return n&&n.value&&(e.push(n.value),n.type&&e.push(`${n.type}: ${n.value}`)),be&&e.length===0&&K.error(`Could not extract message for event ${Ca(t)}`),e}function Zq(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}function Xq(t=[]){for(let e=t.length-1;e>=0;e--){const n=t[e];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function vm(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?Xq(e):null}catch{return be&&K.error(`Cannot extract url for event ${Ca(t)}`),null}}let xT;const jL="FunctionToString",Kq=()=>({name:jL,setupOnce(){xT=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Iw(this)||this;return xT.apply(e,t)}}catch{}}}),HL=Kq;ac(jL,HL);const Ye=Je;let YI=0;function $L(){return YI>0}function Jq(){YI++,setTimeout(()=>{YI--})}function Du(t,e={},n){if(typeof t!="function")return t;try{const i=t.__sentry_wrapped__;if(i)return i;if(Iw(t))return t}catch{return t}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(o=>Du(o,e));return t.apply(this,s)}catch(s){throw Jq(),kL(o=>{o.addEventProcessor(a=>(e.mechanism&&(FI(a,void 0,void 0),Kf(a,e.mechanism)),a.extra={...a.extra,arguments:i},a)),Tv(s)}),s}};try{for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=t[i])}catch{}rL(r,t),Xf(t,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return t.name}})}catch{}return r}const pi=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function zL(t,e){const n=xw(t,e),r={type:e&&e.name,value:eQ(e)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Yq(t,e,n,r){const i=yt(),s=i&&i.getOptions().normalizeDepth,o={exception:{values:[{type:Sv(e)?e.constructor.name:r?"UnhandledRejection":"Error",value:rQ(e,{isUnhandledRejection:r})}]},extra:{__serialized__:hL(e,s)}};if(n){const a=xw(t,n);a.length&&(o.exception.values[0].stacktrace={frames:a})}return o}function d0(t,e){return{exception:{values:[zL(t,e)]}}}function xw(t,e){const n=e.stacktrace||e.stack||"",r=Qq(e);try{return t(n,r)}catch{}return[]}const qq=/Minified React error #\d+;/i;function Qq(t){if(t){if(typeof t.framesToPop=="number")return t.framesToPop;if(qq.test(t.message))return 1}return 0}function eQ(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function tQ(t,e,n,r){const i=n&&n.syntheticException||void 0,s=Nw(t,e,i,r);return Kf(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),Mu(s)}function nQ(t,e,n="info",r,i){const s=r&&r.syntheticException||void 0,o=qI(t,e,s,i);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),Mu(o)}function Nw(t,e,n,r,i){let s;if(mw(e)&&e.error)return d0(t,e.error);if(eT(e)||fJ(e)){const o=e;if("stack"in e)s=d0(t,e);else{const a=o.name||(eT(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;s=qI(t,c,n,r),FI(s,c)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return gw(e)?d0(t,e):Pu(e)||Sv(e)?(s=Yq(t,e,n,i),Kf(s,{synthetic:!0}),s):(s=qI(t,e,n,r),FI(s,`${e}`,void 0),Kf(s,{synthetic:!0}),s)}function qI(t,e,n,r){const i={};if(r&&n){const s=xw(t,n);s.length&&(i.exception={values:[{value:e,stacktrace:{frames:s}}]})}if(vw(e)){const{__sentry_template_string__:s,__sentry_template_values__:o}=e;return i.logentry={message:s,params:o},i}return i.message=e,i}function rQ(t,{isUnhandledRejection:e}){const n=xJ(t),r=e?"promise rejection":"exception";return mw(t)?`Event \`ErrorEvent\` captured as ${r} with message \`${t.message}\``:Sv(t)?`Event \`${iQ(t)}\` (type=${t.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function iQ(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function sQ(t,{metadata:e,tunnel:n,dsn:r}){const i={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!n&&!!r&&{dsn:od(r)}},s=oQ(t);return ol(i,[s])}function oQ(t){return[{type:"user_report"},t]}class aQ extends Aq{constructor(e){const n=Ye.SENTRY_SDK_SOURCE||qJ();VL(e,"browser",["browser"],n),super(e),e.sendClientReports&&Ye.document&&Ye.document.addEventListener("visibilitychange",()=>{Ye.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,n){return tQ(this._options.stackParser,e,n,this._options.attachStacktrace)}eventFromMessage(e,n="info",r){return nQ(this._options.stackParser,e,n,r,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){pi&&K.warn("SDK not enabled, will not capture user feedback.");return}const n=sQ(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(e,n,r){return e.platform=e.platform||"javascript",super._prepareEvent(e,n,r)}_flushOutcomes(){const e=this._clearOutcomes();if(e.length===0){pi&&K.log("No outcomes to send");return}if(!this._dsn){pi&&K.log("No dsn provided, will not send outcomes");return}pi&&K.log("Sending outcomes:",e);const n=bY(e,this._options.tunnel&&od(this._dsn));this._sendEnvelope(n)}}let jd;function cQ(){if(jd)return jd;if(WI(Ye.fetch))return jd=Ye.fetch.bind(Ye);const t=Ye.document;let e=Ye.fetch;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(e=r.fetch),t.head.removeChild(n)}catch(n){pi&&K.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return jd=e.bind(Ye)}function lQ(){jd=void 0}function uQ(t,e=cQ()){let n=0,r=0;function i(s){const o=s.body.length;n+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:n<=6e4&&r<15,...t.fetchOptions};try{return e(t.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return lQ(),n-=o,r--,ww(c)}}return UL(t,i)}const dQ=4;function fQ(t){function e(n){return new Xr((r,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===dQ&&r({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",t.url);for(const o in t.headers)Object.prototype.hasOwnProperty.call(t.headers,o)&&s.setRequestHeader(o,t.headers[o]);s.send(n.body)})}return UL(t,e)}const xv="?",hQ=30,pQ=40,gQ=50;function Pw(t,e,n,r){const i={filename:t,function:e,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const mQ=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,vQ=/\((\S*)(?::(\d+))(?::(\d+))\)/,yQ=t=>{const e=mQ.exec(t);if(e){if(e[2]&&e[2].indexOf("eval")===0){const s=vQ.exec(e[2]);s&&(e[2]=s[1],e[3]=s[2],e[4]=s[3])}const[r,i]=ZL(e[1]||xv,e[2]);return Pw(i,r,e[3]?+e[3]:void 0,e[4]?+e[4]:void 0)}},CQ=[hQ,yQ],IQ=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,SQ=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,bQ=t=>{const e=IQ.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const s=SQ.exec(e[3]);s&&(e[1]=e[1]||"eval",e[3]=s[1],e[4]=s[2],e[5]="")}let r=e[3],i=e[1]||xv;return[i,r]=ZL(i,r),Pw(r,i,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},wQ=[gQ,bQ],kQ=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,AQ=t=>{const e=kQ.exec(t);return e?Pw(e[2],e[1]||xv,+e[3],e[4]?+e[4]:void 0):void 0},EQ=[pQ,AQ],TQ=[CQ,wQ,EQ],_Q=oL(...TQ),ZL=(t,e)=>{const n=t.indexOf("safari-extension")!==-1,r=t.indexOf("safari-web-extension")!==-1;return n||r?[t.indexOf("@")!==-1?t.split("@")[0]:xv,n?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},vp=1024,XL="Breadcrumbs",RQ=(t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:XL,setupOnce(){},setup(n){e.console&&OJ(PQ(n)),e.dom&&lL(NQ(n,e.dom)),e.xhr&&bw(MQ(n)),e.fetch&&Sw(OQ(n)),e.history&&wv(DQ(n)),e.sentry&&n.on&&n.on("beforeSendEvent",xQ(n))}}},KL=RQ;ac(XL,KL);function xQ(t){return function(n){yt()===t&&Ya({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:Ca(n)},{event:n})}}function NQ(t,e){return function(r){if(yt()!==t)return;let i,s,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>vp&&(pi&&K.warn(`\`dom.maxStringLength\` cannot exceed ${vp}, but a value of ${a} was configured. Sentry will use ${vp} instead.`),a=vp),typeof o=="string"&&(o=[o]);try{const l=r.event,u=LQ(l)?l.target:l;i=Zc(u,{keyAttrs:o,maxStringLength:a}),s=eL(u)}catch{i="<unknown>"}if(i.length===0)return;const c={category:`ui.${r.name}`,message:i};s&&(c.data={"ui.component_name":s}),Ya(c,{event:r.event,name:r.name,global:r.global})}}function PQ(t){return function(n){if(yt()!==t)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:cY(n.level),message:tT(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${tT(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ya(r,{input:n.args,level:n.level})}}function MQ(t){return function(n){if(yt()!==t)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[Na];if(!r||!i||!s)return;const{method:o,url:a,status_code:c,body:l}=s,u={method:o,url:a,status_code:c},d={xhr:n.xhr,input:l,startTimestamp:r,endTimestamp:i};Ya({category:"xhr",data:u,type:"http"},d)}}function OQ(t){return function(n){if(yt()!==t)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const s=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};Ya({category:"fetch",data:s,level:"error",type:"http"},o)}else{const s=n.response,o={...n.fetchData,status_code:s&&s.status},a={input:n.args,response:s,startTimestamp:r,endTimestamp:i};Ya({category:"fetch",data:o,type:"http"},a)}}}function DQ(t){return function(n){if(yt()!==t)return;let r=n.from,i=n.to;const s=cg(Ye.location.href);let o=r?cg(r):void 0;const a=cg(i);(!o||!o.path)&&(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),Ya({category:"navigation",data:{from:r,to:i}})}}function LQ(t){return!!t&&!!t.target}const JL="Dedupe",BQ=()=>{let t;return{name:JL,setupOnce(){},processEvent(e){if(e.type)return e;try{if(FQ(e,t))return pi&&K.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},YL=BQ;ac(JL,YL);function FQ(t,e){return e?!!(UQ(t,e)||VQ(t,e)):!1}function UQ(t,e){const n=t.message,r=e.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!QL(t,e)||!qL(t,e))}function VQ(t,e){const n=NT(e),r=NT(t);return!(!n||!r||n.type!==r.type||n.value!==r.value||!QL(t,e)||!qL(t,e))}function qL(t,e){let n=PT(t),r=PT(e);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function QL(t,e){let n=t.fingerprint,r=e.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function NT(t){return t.exception&&t.exception.values&&t.exception.values[0]}function PT(t){const e=t.exception;if(e)try{return e.values[0].stacktrace.frames}catch{return}}const e2="GlobalHandlers",GQ=(t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:e2,setupOnce(){Error.stackTraceLimit=50},setup(n){e.onerror&&(WQ(n),MT("onerror")),e.onunhandledrejection&&(jQ(n),MT("onunhandledrejection"))}}},t2=GQ;ac(e2,t2);function WQ(t){dL(e=>{const{stackParser:n,attachStacktrace:r}=r2();if(yt()!==t||$L())return;const{msg:i,url:s,line:o,column:a,error:c}=e,l=c===void 0&&Us(i)?zQ(i,s,o,a):n2(Nw(n,c||i,void 0,r,!1),s,o,a);l.level="error",wL(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function jQ(t){fL(e=>{const{stackParser:n,attachStacktrace:r}=r2();if(yt()!==t||$L())return;const i=HQ(e),s=yw(i)?$Q(i):Nw(n,i,void 0,r,!0);s.level="error",wL(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function HQ(t){if(yw(t))return t;const e=t;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return t}function $Q(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function zQ(t,e,n,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=mw(t)?t.message:t,o="Error";const a=s.match(i);return a&&(o=a[1],s=a[2]),n2({exception:{values:[{type:o,value:s}]}},e,n,r)}function n2(t,e,n,r){const i=t.exception=t.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Us(e)&&e.length>0?e:SJ();return c.length===0&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),t}function MT(t){pi&&K.log(`Global Handler attached: ${t}`)}function r2(){const t=yt();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const i2="HttpContext",ZQ=()=>({name:i2,setupOnce(){},preprocessEvent(t){if(!Ye.navigator&&!Ye.location&&!Ye.document)return;const e=t.request&&t.request.url||Ye.location&&Ye.location.href,{referrer:n}=Ye.document||{},{userAgent:r}=Ye.navigator||{},i={...t.request&&t.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...t.request,...e&&{url:e},headers:i};t.request=s}}),s2=ZQ;ac(i2,s2);const XQ="cause",KQ=5,o2="LinkedErrors",JQ=(t={})=>{const e=t.limit||KQ,n=t.key||XQ;return{name:o2,setupOnce(){},preprocessEvent(r,i,s){const o=s.getOptions();vJ(zL,o.stackParser,o.maxValueLength,n,e,r,i)}}},a2=JQ;ac(o2,a2);const YQ=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],c2="TryCatch",qQ=(t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:c2,setupOnce(){e.setTimeout&&_n(Ye,"setTimeout",OT),e.setInterval&&_n(Ye,"setInterval",OT),e.requestAnimationFrame&&_n(Ye,"requestAnimationFrame",QQ),e.XMLHttpRequest&&"XMLHttpRequest"in Ye&&_n(XMLHttpRequest.prototype,"send",eee);const n=e.eventTarget;n&&(Array.isArray(n)?n:YQ).forEach(tee)}}},l2=qQ;ac(c2,l2);function OT(t){return function(...e){const n=e[0];return e[0]=Du(n,{mechanism:{data:{function:zo(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}function QQ(t){return function(e){return t.apply(this,[Du(e,{mechanism:{data:{function:"requestAnimationFrame",handler:zo(t)},handled:!1,type:"instrument"}})])}}function eee(t){return function(...e){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&_n(n,i,function(s){const o={mechanism:{data:{function:i,handler:zo(s)},handled:!1,type:"instrument"}},a=Iw(s);return a&&(o.mechanism.data.handler=zo(a)),Du(s,o)})}),t.apply(this,e)}}function tee(t){const e=Ye,n=e[t]&&e[t].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(_n(n,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=Du(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:zo(s),target:t},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Du(s,{mechanism:{data:{function:"addEventListener",handler:zo(s),target:t},handled:!1,type:"instrument"}}),o])}}),_n(n,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,i,c,o)}catch{}return r.call(this,i,a,o)}}))}const nee=[WL(),HL(),l2(),KL(),t2(),a2(),YL(),s2()];function ree(t){return[...nee]}function iee(t={}){t.defaultIntegrations===void 0&&(t.defaultIntegrations=ree()),t.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(t.release=__SENTRY_RELEASE__),Ye.SENTRY_RELEASE&&Ye.SENTRY_RELEASE.id&&(t.release=Ye.SENTRY_RELEASE.id)),t.autoSessionTracking===void 0&&(t.autoSessionTracking=!0),t.sendClientReports===void 0&&(t.sendClientReports=!0);const e={...t,stackParser:PJ(t.stackParser||_Q),integrations:Cq(t),transport:t.transport||(uL()?uQ:fQ)};Rq(aQ,e),t.autoSessionTracking&&see()}const DT=(t={},e=Dr())=>{if(!Ye.document){pi&&K.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=e.getStackTop(),i=t.dsn||n&&n.getDsn();if(!i){pi&&K.error("DSN not configured for showReportDialog call");return}r&&(t.user={...r.getUser(),...t.user}),t.eventId||(t.eventId=e.lastEventId());const s=Ye.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=vq(i,t),t.onLoad&&(s.onload=t.onLoad);const{onClose:o}=t;if(o){const c=l=>{if(l.data==="__sentry_reportdialog_closed__")try{o()}finally{Ye.removeEventListener("message",c)}};Ye.addEventListener("message",c)}const a=Ye.document.head||Ye.document.body;a?a.appendChild(s):pi&&K.error("Not injecting report dialog. No injection point found in HTML")};function see(){if(typeof Ye.document>"u"){pi&&K.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}CT({ignoreDuration:!0}),IT(),wv(({from:t,to:e})=>{t!==void 0&&t!==e&&(CT({ignoreDuration:!0}),IT())})}const Gt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,nt=Je;function oee(){nt&&nt.document?nt.document.addEventListener("visibilitychange",()=>{const t=ad();if(nt.document.hidden&&t){const e="cancelled",{op:n,status:r}=xn(t);Gt&&K.log(`[Tracing] Transaction: ${e} -> since tab moved to the background, op: ${n}`),r||t.setStatus(e),t.setTag("visibilitychange","document.hidden"),t.end()}}):Gt&&K.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const Mw=(t,e,n)=>{let r,i;return s=>{e.value>=0&&(s||n)&&(i=e.value-(r||0),(i||r===void 0)&&(r=e.value,e.delta=i,t(e)))}},aee=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,cee=()=>{const t=nt.performance.timing,e=nt.performance.navigation.type,n={entryType:"navigation",startTime:0,type:e==2?"back_forward":e===1?"reload":"navigate"};for(const r in t)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(t[r]-t.navigationStart,0));return n},u2=()=>nt.__WEB_VITALS_POLYFILL__?nt.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||cee()):nt.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],d2=()=>{const t=u2();return t&&t.activationStart||0},Ow=(t,e)=>{const n=u2();let r="navigate";return n&&(nt.document.prerendering||d2()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:aee(),navigationType:r}},Nv=(t,e,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(i=>{e(i.getEntries())});return r.observe(Object.assign({type:t,buffered:!0},n||{})),r}}catch{}},Pv=(t,e)=>{const n=r=>{(r.type==="pagehide"||nt.document.visibilityState==="hidden")&&(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},lee=t=>{const e=Ow("CLS",0);let n,r=0,i=[];const s=a=>{a.forEach(c=>{if(!c.hadRecentInput){const l=i[0],u=i[i.length-1];r&&i.length!==0&&c.startTime-u.startTime<1e3&&c.startTime-l.startTime<5e3?(r+=c.value,i.push(c)):(r=c.value,i=[c]),r>e.value&&(e.value=r,e.entries=i,n&&n())}})},o=Nv("layout-shift",s);if(o){n=Mw(t,e);const a=()=>{s(o.takeRecords()),n(!0)};return Pv(a),a}};let ug=-1;const uee=()=>nt.document.visibilityState==="hidden"&&!nt.document.prerendering?0:1/0,dee=()=>{Pv(({timeStamp:t})=>{ug=t},!0)},Dw=()=>(ug<0&&(ug=uee(),dee()),{get firstHiddenTime(){return ug}}),fee=t=>{const e=Dw(),n=Ow("FID");let r;const i=a=>{a.startTime<e.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},s=a=>{a.forEach(i)},o=Nv("first-input",s);r=Mw(t,n),o&&Pv(()=>{s(o.takeRecords()),o.disconnect()},!0)},LT={},hee=t=>{const e=Dw(),n=Ow("LCP");let r;const i=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-d2(),0);c<e.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},s=Nv("largest-contentful-paint",i);if(s){r=Mw(t,n);const o=()=>{LT[n.id]||(i(s.takeRecords()),s.disconnect(),LT[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),Pv(o,!0),o}},cf={},ym={};let f2,h2,p2;function pee(t,e=!1){return Lw("cls",t,mee,f2,e)}function g2(t,e=!1){return Lw("lcp",t,yee,p2,e)}function gee(t){return Lw("fid",t,vee,h2)}function Mv(t,e){return m2(t,e),ym[t]||(Cee(t),ym[t]=!0),v2(t,e)}function Ov(t,e){const n=cf[t];if(!(!n||!n.length))for(const r of n)try{r(e)}catch(i){Gt&&K.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${zo(r)}
Error:`,i)}}function mee(){return lee(t=>{Ov("cls",{metric:t}),f2=t})}function vee(){return fee(t=>{Ov("fid",{metric:t}),h2=t})}function yee(){return hee(t=>{Ov("lcp",{metric:t}),p2=t})}function Lw(t,e,n,r,i=!1){m2(t,e);let s;return ym[t]||(s=n(),ym[t]=!0),r&&e({metric:r}),v2(t,e,i?s:void 0)}function Cee(t){const e={};t==="event"&&(e.durationThreshold=0),Nv(t,n=>{Ov(t,{entries:n})},e)}function m2(t,e){cf[t]=cf[t]||[],cf[t].push(e)}function v2(t,e,n){return()=>{n&&n();const r=cf[t];if(!r)return;const i=r.indexOf(e);i!==-1&&r.splice(i,1)}}function f0(t){return typeof t=="number"&&isFinite(t)}function Lu(t,{startTimestamp:e,...n}){return e&&t.startTimestamp>e&&(t.startTimestamp=e),t.startChild({startTimestamp:e,...n})}const Iee=2147483647;function hn(t){return t/1e3}function y2(){return nt&&nt.addEventListener&&nt.performance}let BT=0,Jt={},ls,lf;function See(){const t=y2();if(t&&qi){t.mark&&nt.performance.mark("sentry-tracing-init");const e=Eee(),n=kee(),r=Aee();return()=>{e(),n(),r()}}return()=>{}}function bee(){Mv("longtask",({entries:t})=>{for(const e of t){const n=ad();if(!n)return;const r=hn(qi+e.startTime),i=hn(e.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i})}})}function wee(){Mv("event",({entries:t})=>{for(const e of t){const n=ad();if(!n)return;if(e.name==="click"){const r=hn(qi+e.startTime),i=hn(e.duration),s={description:Zc(e.target),op:`ui.interaction.${e.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i},o=eL(e.target);o&&(s.attributes={"ui.component_name":o}),n.startChild(s)}}})}function kee(){return pee(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Gt&&K.log("[Measurements] Adding CLS"),Jt.cls={value:t.value,unit:""},lf=e)},!0)}function Aee(){return g2(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(Gt&&K.log("[Measurements] Adding LCP"),Jt.lcp={value:t.value,unit:"millisecond"},ls=e)},!0)}function Eee(){return gee(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const n=hn(qi),r=hn(e.startTime);Gt&&K.log("[Measurements] Adding FID"),Jt.fid={value:t.value,unit:"millisecond"},Jt["mark.fid"]={value:n+r,unit:"second"}})}function Tee(t){const e=y2();if(!e||!nt.performance.getEntries||!qi)return;Gt&&K.log("[Tracing] Adding & adjusting spans using Performance API");const n=hn(qi),r=e.getEntries();let i,s;const{op:o,start_timestamp:a}=xn(t);if(r.slice(BT).forEach(c=>{const l=hn(c.startTime),u=hn(c.duration);if(!(t.op==="navigation"&&a&&n+l<a))switch(c.entryType){case"navigation":{Ree(t,c,n),i=n+hn(c.responseStart),s=n+hn(c.requestStart);break}case"mark":case"paint":case"measure":{_ee(t,c,l,u,n);const d=Dw(),f=c.startTime<d.firstHiddenTime;c.name==="first-paint"&&f&&(Gt&&K.log("[Measurements] Adding FP"),Jt.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(Gt&&K.log("[Measurements] Adding FCP"),Jt.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{Nee(t,c,c.name,l,u,n);break}}}),BT=Math.max(r.length-1,0),Pee(t),o==="pageload"){Oee(Jt,i,s,a),["fcp","fp","lcp"].forEach(l=>{if(!Jt[l]||!a||n>=a)return;const u=Jt[l].value,d=n+hn(u),f=Math.abs((d-a)*1e3),h=f-u;Gt&&K.log(`[Measurements] Normalized ${l} from ${u} to ${f} (${h})`),Jt[l].value=f});const c=Jt["mark.fid"];c&&Jt.fid&&(Lu(t,{description:"first input delay",endTimestamp:c.value+hn(Jt.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:c.value}),delete Jt["mark.fid"]),"fcp"in Jt||delete Jt.cls,Object.keys(Jt).forEach(l=>{lq(l,Jt[l].value,Jt[l].unit)}),Mee(t)}ls=void 0,lf=void 0,Jt={}}function _ee(t,e,n,r,i){const s=i+n,o=s+r;return Lu(t,{description:e.name,endTimestamp:o,op:e.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s}),s}function Ree(t,e,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{yp(t,e,r,n)}),yp(t,e,"secureConnection",n,"TLS/SSL","connectEnd"),yp(t,e,"fetch",n,"cache","domainLookupStart"),yp(t,e,"domainLookup",n,"DNS"),xee(t,e,n)}function yp(t,e,n,r,i,s){const o=s?e[s]:e[`${n}End`],a=e[`${n}Start`];!a||!o||Lu(t,{op:"browser",origin:"auto.browser.browser.metrics",description:i||n,startTimestamp:r+hn(a),endTimestamp:r+hn(o)})}function xee(t,e,n){e.responseEnd&&(Lu(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+hn(e.requestStart),endTimestamp:n+hn(e.responseEnd)}),Lu(t,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+hn(e.responseStart),endTimestamp:n+hn(e.responseEnd)}))}function Nee(t,e,n,r,i,s){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const o=cg(n),a={};h0(a,e,"transferSize","http.response_transfer_size"),h0(a,e,"encodedBodySize","http.response_content_length"),h0(a,e,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in e&&(a["resource.render_blocking_status"]=e.renderBlockingStatus),o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop()),o.host&&(a["server.address"]=o.host),a["url.same_origin"]=n.includes(nt.location.origin);const c=s+r,l=c+i;Lu(t,{description:n.replace(nt.location.origin,""),endTimestamp:l,op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}function Pee(t){const e=nt.navigator;if(!e)return;const n=e.connection;n&&(n.effectiveType&&t.setTag("effectiveConnectionType",n.effectiveType),n.type&&t.setTag("connectionType",n.type),f0(n.rtt)&&(Jt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),f0(e.deviceMemory)&&t.setTag("deviceMemory",`${e.deviceMemory} GB`),f0(e.hardwareConcurrency)&&t.setTag("hardwareConcurrency",String(e.hardwareConcurrency))}function Mee(t){ls&&(Gt&&K.log("[Measurements] Adding LCP Data"),ls.element&&t.setTag("lcp.element",Zc(ls.element)),ls.id&&t.setTag("lcp.id",ls.id),ls.url&&t.setTag("lcp.url",ls.url.trim().slice(0,200)),t.setTag("lcp.size",ls.size)),lf&&lf.sources&&(Gt&&K.log("[Measurements] Adding CLS Data"),lf.sources.forEach((e,n)=>t.setTag(`cls.source.${n+1}`,Zc(e.node))))}function h0(t,e,n,r){const i=e[n];i!=null&&i<Iee&&(t[r]=i)}function Oee(t,e,n,r){typeof e=="number"&&r&&(Gt&&K.log("[Measurements] Adding TTFB"),t.ttfb={value:Math.max(e-r,0)*1e3,unit:"millisecond"},typeof n=="number"&&n<=e&&(t["ttfb.requestTime"]={value:(e-n)*1e3,unit:"millisecond"}))}function Dee(t,e,n,r,i="auto.http.browser"){if(!Rv()||!t.fetchData)return;const s=e(t.fetchData.url);if(t.endTimestamp&&s){const d=t.fetchData.__span;if(!d)return;const f=r[d];if(f){if(t.response){f.setHttpStatus(t.response.status);const h=t.response&&t.response.headers&&t.response.headers.get("content-length");if(h){const p=parseInt(h);p>0&&f.setAttribute("http.response_content_length",p)}}else t.error&&f.setStatus("internal_error");f.end(),delete r[d]}return}const o=ts(),a=yt(),{method:c,url:l}=t.fetchData,u=s?OL({attributes:{url:l,type:"fetch","http.method":c},name:`${c} ${l}`,op:"http.client",origin:i}):void 0;if(u&&(t.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u),n(t.fetchData.url)&&a){const d=t.args[0];t.args[1]=t.args[1]||{};const f=t.args[1];f.headers=Lee(d,a,o,f,u)}return u}function Lee(t,e,n,r,i){const s=i||n.getSpan(),o=s&&Ou(s),{traceId:a,sampled:c,dsc:l}=n.getPropagationContext(),u=s?Av(s):kw(a,void 0,c),d=o?Jf(o):l||_v(a,e,n),f=zI(d),h=r.headers||(typeof Request<"u"&&$o(t,Request)?t.headers:void 0);if(h)if(typeof Headers<"u"&&$o(h,Headers)){const p=new Headers(h);return p.append("sentry-trace",u),f&&p.append($I,f),p}else if(Array.isArray(h)){const p=[...h,["sentry-trace",u]];return f&&p.push([$I,f]),p}else{const p="baggage"in h?h.baggage:void 0,m=[];return Array.isArray(p)?m.push(...p):p&&m.push(p),f&&m.push(f),{...h,"sentry-trace":u,baggage:m.length>0?m.join(","):void 0}}else return{"sentry-trace":u,baggage:f}}const QI=["localhost",/^\/(?!\/)/],eS={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:QI,tracePropagationTargets:QI};function Bee(t){const{traceFetch:e,traceXHR:n,tracePropagationTargets:r,tracingOrigins:i,shouldCreateSpanForRequest:s,enableHTTPTimings:o}={traceFetch:eS.traceFetch,traceXHR:eS.traceXHR,...t},a=typeof s=="function"?s:u=>!0,c=u=>Gee(u,r||i),l={};e&&Sw(u=>{const d=Dee(u,a,c,l);o&&d&&FT(d)}),n&&bw(u=>{const d=Wee(u,a,c,l);o&&d&&FT(d)})}function Fee(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function FT(t){const{url:e}=xn(t).data||{};if(!e||typeof e!="string")return;const n=Mv("resource",({entries:r})=>{r.forEach(i=>{Fee(i)&&i.name.endsWith(e)&&(Vee(i).forEach(o=>t.setAttribute(...o)),setTimeout(n))})})}function Uee(t){let e="unknown",n="unknown",r="";for(const i of t){if(i==="/"){[e,n]=t.split("/");break}if(!isNaN(Number(i))){e=r==="h"?"http":r,n=t.split(r)[1];break}r+=i}return r===t&&(e=r),{name:e,version:n}}function is(t=0){return((qi||performance.timeOrigin)+t)/1e3}function Vee(t){const{name:e,version:n}=Uee(t.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",e]),qi?[...r,["http.request.redirect_start",is(t.redirectStart)],["http.request.fetch_start",is(t.fetchStart)],["http.request.domain_lookup_start",is(t.domainLookupStart)],["http.request.domain_lookup_end",is(t.domainLookupEnd)],["http.request.connect_start",is(t.connectStart)],["http.request.secure_connection_start",is(t.secureConnectionStart)],["http.request.connection_end",is(t.connectEnd)],["http.request.request_start",is(t.requestStart)],["http.request.response_start",is(t.responseStart)],["http.request.response_end",is(t.responseEnd)]]:r}function Gee(t,e){return id(t,e||QI)}function Wee(t,e,n,r){const i=t.xhr,s=i&&i[Na];if(!Rv()||!i||i.__sentry_own_request__||!s)return;const o=e(s.url);if(t.endTimestamp&&o){const l=i.__sentry_xhr_span_id__;if(!l)return;const u=r[l];u&&s.status_code!==void 0&&(u.setHttpStatus(s.status_code),u.end(),delete r[l]);return}const a=ts(),c=o?OL({attributes:{type:"xhr","http.method":s.method,url:s.url},name:`${s.method} ${s.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(c&&(i.__sentry_xhr_span_id__=c.spanContext().spanId,r[i.__sentry_xhr_span_id__]=c),i.setRequestHeader&&n(s.url))if(c){const l=c&&Ou(c),u=l&&Jf(l),d=zI(u);UT(i,Av(c),d)}else{const l=yt(),{traceId:u,sampled:d,dsc:f}=a.getPropagationContext(),h=kw(u,void 0,d),p=f||(l?_v(u,l,a):void 0),m=zI(p);UT(i,h,m)}return c}function UT(t,e,n){try{t.setRequestHeader("sentry-trace",e),n&&t.setRequestHeader($I,n)}catch{}}function jee(t,e=!0,n=!0){if(!nt||!nt.location){Gt&&K.warn("Could not initialize routing instrumentation due to invalid location");return}let r=nt.location.href,i;e&&(i=t({name:nt.location.pathname,startTimestamp:qi?qi/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&wv(({to:s,from:o})=>{if(o===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}o!==s&&(r=void 0,i&&(Gt&&K.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.end()),i=t({name:nt.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const Hee="BrowserTracing",$ee={...lg,markBackgroundTransactions:!0,routingInstrumentation:jee,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...eS};class zee{constructor(e){this.name=Hee,this._hasSetTracePropagationTargets=!1,oq(),Gt&&(this._hasSetTracePropagationTargets=!!(e&&(e.tracePropagationTargets||e.tracingOrigins))),this.options={...$ee,...e},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=See(),this.options.enableLongTask&&bee(),this.options._experiments.enableInteractions&&wee()}setupOnce(e,n){this._getCurrentHub=n;const i=n().getClient(),s=i&&i.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:l,traceFetch:u,traceXHR:d,shouldCreateSpanForRequest:f,enableHTTPTimings:h,_experiments:p}=this.options,m=s&&s.tracePropagationTargets,y=m||this.options.tracePropagationTargets;Gt&&this._hasSetTracePropagationTargets&&m&&K.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(g=>{const v=this._createRouteTransaction(g);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(v,g,n),v},c,a),l&&oee(),p.enableInteractions&&this._registerInteractionListener(),Bee({traceFetch:u,traceXHR:d,tracePropagationTargets:y,shouldCreateSpanForRequest:f,enableHTTPTimings:h})}_createRouteTransaction(e){if(!this._getCurrentHub){Gt&&K.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:i,finalTimeout:s,heartbeatInterval:o}=this.options,a=e.op==="pageload",c=a?VT("sentry-trace"):"",l=a?VT("baggage"):"",{traceparentData:u,dynamicSamplingContext:d,propagationContext:f}=mY(c,l),h={...e,...u,metadata:{...e.metadata,dynamicSamplingContext:u&&!d?{}:d},trimEnd:!0},p=typeof r=="function"?r(h):h,m=p===void 0?{...h,sampled:!1}:p;m.metadata=m.name!==h.name?{...m.metadata,source:"custom"}:m.metadata,this._latestRouteName=m.name;const y=e.data&&e.data[uu],g=m.metadata&&m.metadata.source;this._latestRouteSource=y||g,m.sampled===!1&&Gt&&K.log(`[Tracing] Will not send ${m.op} transaction because of beforeNavigate.`),Gt&&K.log(`[Tracing] Starting ${m.op} transaction on scope`);const{location:v}=nt,S=AT(n,m,i,s,!0,{location:v},o,a);a&&(nt.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(nt.document.readyState)&&S.sendAutoFinishSignal()}),["interactive","complete"].includes(nt.document.readyState)&&S.sendAutoFinishSignal());const E=n.getScope();return a&&u?E.setPropagationContext(f):E.setPropagationContext({traceId:S.spanContext().traceId,spanId:S.spanContext().spanId,parentSpanId:xn(S).parent_span_id,sampled:_w(S)}),S.registerBeforeFinishCallback(k=>{this._collectWebVitals(),Tee(k)}),S}_registerInteractionListener(){let e;const n=()=>{const{idleTimeout:r,finalTimeout:i,heartbeatInterval:s}=this.options,o="ui.action.click",a=ad();if(a&&a.op&&["navigation","pageload"].includes(a.op)){Gt&&K.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub){Gt&&K.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){Gt&&K.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:l}=nt,u={name:this._latestRouteName,op:o,trimEnd:!0,data:{[uu]:this._latestRouteSource||"url"}};e=AT(c,u,r,i,!0,{location:l},s)};["click"].forEach(r=>{addEventListener(r,n,{once:!1,capture:!0})})}}function VT(t){const e=bJ(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}const wt=Je,Bw="sentryReplaySession",Zee="replay_event",Fw="Unable to send Replay",Xee=3e5,Kee=9e5,Jee=5e3,Yee=5500,qee=6e4,Qee=5e3,ete=3,GT=15e4,Cp=5e3,tte=3e3,nte=300,Uw=2e7,rte=4999,ite=15e3,WT=36e5;function ste(t,e){return t??e()}function Cm(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}var pn;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(pn||(pn={}));function ote(t){return t.nodeType===t.ELEMENT_NODE}function uf(t){const e=Cm([t,"optionalAccess",n=>n.host]);return Cm([e,"optionalAccess",n=>n.shadowRoot])===t}function df(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}function ate(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t}function cte(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const n=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?n.push("layer"):t.layerName&&n.push(`layer(${t.layerName})`),t.supportsText&&n.push(`supports(${t.supportsText})`),t.media.length&&n.push(t.media.mediaText),n.join(" ")+";"}function Im(t){try{const e=t.rules||t.cssRules;return e?ate(Array.from(e,C2).join("")):null}catch{return null}}function C2(t){let e;if(ute(t))try{e=Im(t.styleSheet)||cte(t)}catch{}else if(dte(t)&&t.selectorText.includes(":"))return lte(t.cssText);return e||t.cssText}function lte(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}function ute(t){return"styleSheet"in t}function dte(t){return"selectorText"in t}class I2{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const n=Cm([this,"access",r=>r.getMeta,"call",r=>r(e),"optionalAccess",r=>r.id]);return ste(n,()=>-1)}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const n=this.getId(e);this.idNodeMap.delete(n),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,n){const r=n.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,n)}replace(e,n){const r=this.getNode(e);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(n,i)}this.idNodeMap.set(e,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function fte(){return new I2}function Dv({maskInputOptions:t,tagName:e,type:n}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||n&&t[n]||n==="password"||e==="INPUT"&&!n&&t.text)}function Yf({isMasked:t,element:e,value:n,maskInputFn:r}){let i=n||"";return t?(r&&(i=r(i,e)),"*".repeat(i.length)):i}function Bu(t){return t.toLowerCase()}function tS(t){return t.toUpperCase()}const jT="__rrweb_original__";function hte(t){const e=t.getContext("2d");if(!e)return!0;const n=50;for(let r=0;r<t.width;r+=n)for(let i=0;i<t.height;i+=n){const s=e.getImageData,o=jT in s?s[jT]:s;if(new Uint32Array(o.call(e,r,i,Math.min(n,t.width-r),Math.min(n,t.height-i)).data.buffer).some(c=>c!==0))return!1}return!0}function Vw(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?Bu(e):null}function Sm(t,e,n){return e==="INPUT"&&(n==="radio"||n==="checkbox")?t.getAttribute("value")||"":t.value}let pte=1;const gte=new RegExp("[^a-z0-9-_:]"),qf=-2;function Gw(){return pte++}function mte(t){if(t instanceof HTMLFormElement)return"form";const e=Bu(t.tagName);return gte.test(e)?"div":e}function vte(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}let vl,HT;const yte=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Cte=/^(?:[a-z+]+:)?\/\//i,Ite=/^www\..*/i,Ste=/^(data:)([^,]*),(.*)/i;function bm(t,e){return(t||"").replace(yte,(n,r,i,s,o,a)=>{const c=i||o||a,l=r||s||"";if(!c)return n;if(Cte.test(c)||Ite.test(c))return`url(${l}${c}${l})`;if(Ste.test(c))return`url(${l}${c}${l})`;if(c[0]==="/")return`url(${l}${vte(e)+c}${l})`;const u=e.split("/"),d=c.split("/");u.pop();for(const f of d)f!=="."&&(f===".."?u.pop():u.push(f));return`url(${l}${u.join("/")}${l})`})}const bte=/^[^ \t\n\r\u000c]+/,wte=/^[, \t\n\r\u000c]+/;function kte(t,e){if(e.trim()==="")return e;let n=0;function r(s){let o;const a=s.exec(e.substring(n));return a?(o=a[0],n+=o.length,o):""}const i=[];for(;r(wte),!(n>=e.length);){let s=r(bte);if(s.slice(-1)===",")s=Vl(t,s.substring(0,s.length-1)),i.push(s);else{let o="";s=Vl(t,s);let a=!1;for(;;){const c=e.charAt(n);if(c===""){i.push((s+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,i.push((s+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return i.join(", ")}function Vl(t,e){if(!e||e.trim()==="")return e;const n=t.createElement("a");return n.href=e,n.href}function Ate(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}function Ww(){const t=document.createElement("a");return t.href="",t.href}function S2(t,e,n,r,i,s){return r&&(n==="src"||n==="href"&&!(e==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(e==="table"||e==="td"||e==="th")?Vl(t,r):n==="srcset"?kte(t,r):n==="style"?bm(r,Ww()):e==="object"&&n==="data"?Vl(t,r):typeof s=="function"?s(n,r,i):r)}function b2(t,e,n){return(t==="video"||t==="audio")&&e==="autoplay"}function Ete(t,e,n,r){try{if(r&&t.matches(r))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let i=t.classList.length;i--;){const s=t.classList[i];if(e.test(s))return!0}if(n)return t.matches(n)}catch{}return!1}function Tte(t,e){for(let n=t.classList.length;n--;){const r=t.classList[n];if(e.test(r))return!0}return!1}function kc(t,e,n=1/0,r=0){return!t||t.nodeType!==t.ELEMENT_NODE||r>n?-1:e(t)?r:kc(t.parentNode,e,n,r+1)}function Gl(t,e){return n=>{const r=n;if(r===null)return!1;try{if(t){if(typeof t=="string"){if(r.matches(`.${t}`))return!0}else if(Tte(r,t))return!0}return!!(e&&r.matches(e))}catch{return!1}}}function Fu(t,e,n,r,i,s){try{const o=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(o===null)return!1;let a=-1,c=-1;if(s){if(c=kc(o,Gl(r,i)),c<0)return!0;a=kc(o,Gl(e,n),c>=0?c:1/0)}else{if(a=kc(o,Gl(e,n)),a<0)return!1;c=kc(o,Gl(r,i),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!s}catch{}return!!s}function _te(t,e,n){const r=t.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=setTimeout(()=>{i||(e(),i=!0)},n);t.addEventListener("load",()=>{clearTimeout(a),i=!0,e()});return}const o="about:blank";if(r.location.href!==o||t.src===o||t.src==="")return setTimeout(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}function Rte(t,e,n){let r=!1,i;try{i=t.sheet}catch{return}if(i)return;const s=setTimeout(()=>{r||(e(),r=!0)},n);t.addEventListener("load",()=>{clearTimeout(s),r=!0,e()})}function xte(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:p={},maskTextFn:m,maskInputFn:y,dataURLOptions:g={},inlineImages:v,recordCanvas:S,keepIframeSrcFn:E,newlyAddedElement:k=!1}=e,b=Nte(n,r);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:pn.Document,childNodes:[],compatMode:t.compatMode}:{type:pn.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:pn.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:b};case t.ELEMENT_NODE:return Mte(t,{doc:n,blockClass:i,blockSelector:s,unblockSelector:o,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:p,maskInputFn:y,dataURLOptions:g,inlineImages:v,recordCanvas:S,keepIframeSrcFn:E,newlyAddedElement:k,rootId:b,maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f});case t.TEXT_NODE:return Pte(t,{maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:p,maskInputFn:y,rootId:b});case t.CDATA_SECTION_NODE:return{type:pn.CDATA,textContent:"",rootId:b};case t.COMMENT_NODE:return{type:pn.Comment,textContent:t.textContent||"",rootId:b};default:return!1}}function Nte(t,e){if(!e.hasNode(t))return;const n=e.getId(t);return n===1?void 0:n}function Pte(t,e){const{maskAllText:n,maskTextClass:r,unmaskTextClass:i,maskTextSelector:s,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:l,rootId:u}=e,d=t.parentNode&&t.parentNode.tagName;let f=t.textContent;const h=d==="STYLE"?!0:void 0,p=d==="SCRIPT"?!0:void 0,m=d==="TEXTAREA"?!0:void 0;if(h&&f){try{t.nextSibling||t.previousSibling||Cm([t,"access",g=>g.parentNode,"access",g=>g.sheet,"optionalAccess",g=>g.cssRules])&&(f=Im(t.parentNode.sheet))}catch(g){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${g}`,t)}f=bm(f,Ww())}p&&(f="SCRIPT_PLACEHOLDER");const y=Fu(t,r,s,i,o,n);if(!h&&!p&&!m&&f&&y&&(f=a?a(f):f.replace(/[\S]/g,"*")),m&&f&&(c.textarea||y)&&(f=l?l(f,t.parentNode):f.replace(/[\S]/g,"*")),d==="OPTION"&&f){const g=Dv({type:null,tagName:d,maskInputOptions:c});f=Yf({isMasked:Fu(t,r,s,i,o,g),element:t,value:f,maskInputFn:l})}return{type:pn.Text,textContent:f||"",isStyle:h,rootId:u}}function Mte(t,e){const{doc:n,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:p=!1,rootId:m,maskAllText:y,maskTextClass:g,unmaskTextClass:v,maskTextSelector:S,unmaskTextSelector:E}=e,k=Ete(t,r,i,s),b=mte(t);let A={};const _=t.attributes.length;for(let N=0;N<_;N++){const O=t.attributes[N];b2(b,O.name,O.value)||(A[O.name]=S2(n,b,Bu(O.name),O.value,t,c))}if(b==="link"&&o){const N=Array.from(n.styleSheets).find(D=>D.href===t.href);let O=null;N&&(O=Im(N)),O&&(delete A.rel,delete A.href,A._cssText=bm(O,N.href))}if(b==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const N=Im(t.sheet);N&&(A._cssText=bm(N,Ww()))}if(b==="input"||b==="textarea"||b==="select"||b==="option"){const N=t,O=Vw(N),D=Sm(N,tS(b),O),U=N.checked;if(O!=="submit"&&O!=="button"&&D){const G=Fu(N,g,S,v,E,Dv({type:O,tagName:tS(b),maskInputOptions:a}));A.value=Yf({isMasked:G,element:N,value:D,maskInputFn:l})}U&&(A.checked=U)}if(b==="option"&&(t.selected&&!a.select?A.selected=!0:delete A.selected),b==="canvas"&&f){if(t.__context==="2d")hte(t)||(A.rr_dataURL=t.toDataURL(u.type,u.quality));else if(!("__context"in t)){const N=t.toDataURL(u.type,u.quality),O=document.createElement("canvas");O.width=t.width,O.height=t.height;const D=O.toDataURL(u.type,u.quality);N!==D&&(A.rr_dataURL=N)}}if(b==="img"&&d){vl||(vl=n.createElement("canvas"),HT=vl.getContext("2d"));const N=t,O=N.crossOrigin;N.crossOrigin="anonymous";const D=()=>{N.removeEventListener("load",D);try{vl.width=N.naturalWidth,vl.height=N.naturalHeight,HT.drawImage(N,0,0),A.rr_dataURL=vl.toDataURL(u.type,u.quality)}catch(U){console.warn(`Cannot inline img src=${N.currentSrc}! Error: ${U}`)}O?A.crossOrigin=O:N.removeAttribute("crossorigin")};N.complete&&N.naturalWidth!==0?D():N.addEventListener("load",D)}if((b==="audio"||b==="video")&&(A.rr_mediaState=t.paused?"paused":"played",A.rr_mediaCurrentTime=t.currentTime),p||(t.scrollLeft&&(A.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(A.rr_scrollTop=t.scrollTop)),k){const{width:N,height:O}=t.getBoundingClientRect();A={class:A.class,rr_width:`${N}px`,rr_height:`${O}px`}}b==="iframe"&&!h(A.src)&&(t.contentDocument||(A.rr_src=A.src),delete A.src);let P;try{customElements.get(b)&&(P=!0)}catch{}return{type:pn.Element,tagName:b,attributes:A,childNodes:[],isSVG:Ate(t)||void 0,needBlock:k,rootId:m,isCustom:P}}function bt(t){return t==null?"":t.toLowerCase()}function Ote(t,e){if(e.comment&&t.type===pn.Comment)return!0;if(t.type===pn.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&t.attributes.href.endsWith(".js")))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(bt(t.attributes.name).match(/^msapplication-tile(image|color)$/)||bt(t.attributes.name)==="application-name"||bt(t.attributes.rel)==="icon"||bt(t.attributes.rel)==="apple-touch-icon"||bt(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&bt(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(bt(t.attributes.property).match(/^(og|twitter|fb):/)||bt(t.attributes.name).match(/^(og|twitter):/)||bt(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(bt(t.attributes.name)==="robots"||bt(t.attributes.name)==="googlebot"||bt(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(bt(t.attributes.name)==="author"||bt(t.attributes.name)==="generator"||bt(t.attributes.name)==="framework"||bt(t.attributes.name)==="publisher"||bt(t.attributes.name)==="progid"||bt(t.attributes.property).match(/^article:/)||bt(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(bt(t.attributes.name)==="google-site-verification"||bt(t.attributes.name)==="yandex-verification"||bt(t.attributes.name)==="csrf-token"||bt(t.attributes.name)==="p:domain_verify"||bt(t.attributes.name)==="verify-v1"||bt(t.attributes.name)==="verification"||bt(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Wl(t,e){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:p={},maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S={},inlineImages:E=!1,recordCanvas:k=!1,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_=5e3,onStylesheetLoad:P,stylesheetLoadTimeout:N=5e3,keepIframeSrcFn:O=()=>!1,newlyAddedElement:D=!1}=e;let{preserveWhiteSpace:U=!0}=e;const G=xte(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,dataURLOptions:S,inlineImages:E,recordCanvas:k,keepIframeSrcFn:O,newlyAddedElement:D});if(!G)return console.warn(t,"not serialized"),null;let z;r.hasNode(t)?z=r.getId(t):Ote(G,v)||!U&&G.type===pn.Text&&!G.isStyle&&!G.textContent.replace(/^\s+|\s+$/gm,"").length?z=qf:z=Gw();const $=Object.assign(G,{id:z});if(r.add(t,$),z===qf)return null;b&&b(t);let q=!f;if($.type===pn.Element){q=q&&!$.needBlock,delete $.needBlock;const j=t.shadowRoot;j&&df(j)&&($.isShadowHost=!0)}if(($.type===pn.Document||$.type===pn.Element)&&q){v.headWhitespace&&$.type===pn.Element&&$.tagName==="head"&&(U=!1);const j={doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:f,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S,inlineImages:E,recordCanvas:k,preserveWhiteSpace:U,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:P,stylesheetLoadTimeout:N,keepIframeSrcFn:O};for(const X of Array.from(t.childNodes)){const re=Wl(X,j);re&&$.childNodes.push(re)}if(ote(t)&&t.shadowRoot)for(const X of Array.from(t.shadowRoot.childNodes)){const re=Wl(X,j);re&&(df(t.shadowRoot)&&(re.isShadow=!0),$.childNodes.push(re))}}return t.parentNode&&uf(t.parentNode)&&df(t.parentNode)&&($.isShadow=!0),$.type===pn.Element&&$.tagName==="iframe"&&_te(t,()=>{const j=t.contentDocument;if(j&&A){const X=Wl(j,{doc:j,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S,inlineImages:E,recordCanvas:k,preserveWhiteSpace:U,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:P,stylesheetLoadTimeout:N,keepIframeSrcFn:O});X&&A(t,X)}},_),$.type===pn.Element&&$.tagName==="link"&&$.attributes.rel==="stylesheet"&&Rte(t,()=>{if(P){const j=Wl(t,{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S,inlineImages:E,recordCanvas:k,preserveWhiteSpace:U,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:P,stylesheetLoadTimeout:N,keepIframeSrcFn:O});j&&P(t,j)}},N),$}function Dte(t,e){const{mirror:n=new I2,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:p=!1,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOM:v=!1,dataURLOptions:S,preserveWhiteSpace:E,onSerialize:k,onIframeLoad:b,iframeLoadTimeout:A,onStylesheetLoad:_,stylesheetLoadTimeout:P,keepIframeSrcFn:N=()=>!1}=e||{};return Wl(t,{doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:p===!1?{}:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v===!0||v==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:v==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:v===!1?{}:v,dataURLOptions:S,inlineImages:f,recordCanvas:h,preserveWhiteSpace:E,onSerialize:k,onIframeLoad:b,iframeLoadTimeout:A,onStylesheetLoad:_,stylesheetLoadTimeout:P,keepIframeSrcFn:N,newlyAddedElement:!1})}function ha(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}function ur(t,e,n=document){const r={capture:!0,passive:!0};return n.addEventListener(t,e,r),()=>n.removeEventListener(t,e,r)}const Sl=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let $T={map:{},getId(){return console.error(Sl),-1},getNode(){return console.error(Sl),null},removeNodeFromMap(){console.error(Sl)},has(){return console.error(Sl),!1},reset(){console.error(Sl)}};typeof window<"u"&&window.Proxy&&window.Reflect&&($T=new Proxy($T,{get(t,e,n){return e==="map"&&console.error(Sl),Reflect.get(t,e,n)}}));function Qf(t,e,n={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&n.leading===!1&&(i=o);const a=e-(o-i),c=this;a<=0||a>e?(r&&(clearTimeout(r),r=null),i=o,t.apply(c,s)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{i=n.leading===!1?0:Date.now(),r=null,t.apply(c,s)},a))}}function w2(t,e,n,r,i=window){const s=i.Object.getOwnPropertyDescriptor(t,e);return i.Object.defineProperty(t,e,r?n:{set(o){setTimeout(()=>{n.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>w2(t,e,s||{},!0)}function jw(t,e,n){try{if(!(e in t))return()=>{};const r=t[e],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),t[e]=i,()=>{t[e]=r}}catch{return()=>{}}}let wm=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(wm=()=>new Date().getTime());function k2(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:ha([e,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollLeft])||ha([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollLeft])||ha([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:ha([e,"optionalAccess",n=>n.documentElement,"access",n=>n.scrollTop])||ha([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.parentElement,"optionalAccess",n=>n.scrollTop])||ha([e,"optionalAccess",n=>n.body,"optionalAccess",n=>n.scrollTop])||0}}function A2(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function E2(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Bi(t,e,n,r,i){if(!t)return!1;const s=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(!s)return!1;const o=Gl(e,n);if(!i){const l=r&&s.matches(r);return o(s)&&!l}const a=kc(s,o);let c=-1;return a<0?!1:(r&&(c=kc(s,Gl(null,r))),a>-1&&c<0?!0:a<c)}function Lte(t,e){return e.getId(t)!==-1}function p0(t,e){return e.getId(t)===qf}function T2(t,e){if(uf(t))return!1;const n=e.getId(t);return e.has(n)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?T2(t.parentNode,e):!0:!0}function nS(t){return!!t.changedTouches}function Bte(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let n=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function _2(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}function R2(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}function rS(t){return!!ha([t,"optionalAccess",e=>e.shadowRoot])}class Fte{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return EY(this.styleIDMap.get(e),()=>-1)}has(e){return this.styleIDMap.has(e)}add(e,n){if(this.has(e))return this.getId(e);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function x2(t){let e=null;return ha([t,"access",n=>n.getRootNode,"optionalCall",n=>n(),"optionalAccess",n=>n.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}function Ute(t){let e=t,n;for(;n=x2(e);)e=n;return e}function Vte(t){const e=t.ownerDocument;if(!e)return!1;const n=Ute(t);return e.contains(n)}function N2(t){const e=t.ownerDocument;return e?e.contains(t)||Vte(t):!1}let g0;function Gte(){if(g0)return g0;const t=window.document;let e=window.requestAnimationFrame;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n);const r=n.contentWindow;r&&r.requestAnimationFrame&&(e=r.requestAnimationFrame),t.head.removeChild(n)}catch{}return g0=e.bind(window)}function Wte(...t){return Gte()(...t)}var Ue=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Ue||{}),Ve=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))(Ve||{}),nr=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(nr||{}),Ks=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(Ks||{});function jte(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}function zT(t){return"__ln"in t}class Hte{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<e;r++)n=jte([n,"optionalAccess",i=>i.next])||null;return n}addNode(e){const n={value:e,previous:null,next:null};if(e.__ln=n,e.previousSibling&&zT(e.previousSibling)){const r=e.previousSibling.__ln.next;n.next=r,n.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(e.nextSibling&&zT(e.nextSibling)&&e.nextSibling.__ln.previous){const r=e.nextSibling.__ln.previous;n.previous=r,n.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(e){const n=e.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const ZT=(t,e)=>`${t}@${e}`;class $te{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],n=new Set,r=new Hte,i=c=>{let l=c,u=qf;for(;u===qf;)l=l&&l.nextSibling,u=l&&this.mirror.getId(l);return u},s=c=>{if(!c.parentNode||!N2(c))return;const l=uf(c.parentNode)?this.mirror.getId(x2(c)):this.mirror.getId(c.parentNode),u=i(c);if(l===-1||u===-1)return r.addNode(c);const d=Wl(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{_2(f,this.mirror)&&this.iframeManager.addIframe(f),R2(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),rS(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,h)=>{this.iframeManager.attachIframe(f,h),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,h)=>{this.stylesheetManager.attachLinkElement(f,h)}});d&&(e.push({parentId:l,nextId:u,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)XT(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||s(c);for(const c of this.addedSet)!KT(this.droppedSet,c)&&!XT(this.removes,c,this.mirror)||KT(this.movedSet,c)?s(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const l=this.mirror.getId(o.value.parentNode),u=i(o.value);l!==-1&&u!==-1&&(c=o)}if(!c){let l=r.tail;for(;l;){const u=l;if(l=l.previous,u){const d=this.mirror.getId(u.value.parentNode);if(i(u.value)===-1)continue;if(d!==-1){c=u;break}else{const h=u.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const p=h.parentNode.host;if(this.mirror.getId(p)!==-1){c=u;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),s(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:l}=c;if(typeof l.style=="string"){const u=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);u.length<l.style.length&&(u+d).split("var(").length===l.style.split("var(").length&&(l.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:l}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:e};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=e=>{if(p0(e.target,this.mirror))return;let n;try{n=document.implementation.createHTMLDocument()}catch{n=this.doc}switch(e.type){case"characterData":{const r=e.target.textContent;!Bi(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:Fu(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{const r=e.target;let i=e.attributeName,s=e.target.getAttribute(i);if(i==="value"){const a=Vw(r),c=r.tagName;s=Sm(r,c,a);const l=Dv({maskInputOptions:this.maskInputOptions,tagName:c,type:a}),u=Fu(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l);s=Yf({isMasked:u,element:r,value:s,maskInputFn:this.maskInputFn})}if(Bi(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===e.oldValue)return;let o=this.attributes.find(a=>a.node===e.target);if(r.tagName==="IFRAME"&&i==="src"&&!this.keepIframeSrcFn(s))if(!r.contentDocument)i="rr_src";else return;if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),i==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!b2(r.tagName,i)&&(o.attributes[i]=S2(this.doc,Bu(r.tagName),Bu(i),s,r,this.maskAttributeFn),i==="style")){const a=n.createElement("span");e.oldValue&&a.setAttribute("style",e.oldValue);for(const c of Array.from(r.style)){const l=r.style.getPropertyValue(c),u=r.style.getPropertyPriority(c);l!==a.style.getPropertyValue(c)||u!==a.style.getPropertyPriority(c)?u===""?o.styleDiff[c]=l:o.styleDiff[c]=[l,u]:o._unchangedStyles[c]=[l,u]}for(const c of Array.from(a.style))r.style.getPropertyValue(c)===""&&(o.styleDiff[c]=!1)}break}case"childList":{if(Bi(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{const i=this.mirror.getId(r),s=uf(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);Bi(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||p0(r,this.mirror)||!Lte(r,this.mirror)||(this.addedSet.has(r)?(iS(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&i===-1||T2(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[ZT(i,s)]?iS(this.movedSet,r):this.removes.push({parentId:s,id:i,isShadow:uf(e.target)&&df(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,n)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(p0(e,this.mirror))return;this.movedSet.add(e);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[ZT(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);Bi(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(r=>this.genAdds(r)),rS(e)&&e.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=e[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function iS(t,e){t.delete(e),e.childNodes.forEach(n=>iS(t,n))}function XT(t,e,n){return t.length===0?!1:P2(t,e,n)}function P2(t,e,n){const{parentNode:r}=e;if(!r)return!1;const i=n.getId(r);return t.some(s=>s.id===i)?!0:P2(t,r,n)}function KT(t,e){return t.size===0?!1:M2(t,e)}function M2(t,e){const{parentNode:n}=e;return n?t.has(n)?!0:M2(t,n):!1}let ff;function zte(t){ff=t}function Zte(){ff=void 0}const Ke=t=>ff?(...n)=>{try{return t(...n)}catch(r){if(ff&&ff(r)===!0)return()=>{};throw r}}:t;function ps(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}const jl=[];function xh(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}function O2(t,e){const n=new $te;jl.push(n),n.init(t);let r=window.MutationObserver||window.__rrMutationObserver;const i=ps([window,"optionalAccess",o=>o.Zone,"optionalAccess",o=>o.__symbol__,"optionalCall",o=>o("MutationObserver")]);i&&window[i]&&(r=window[i]);const s=new r(Ke(o=>{t.onMutation&&t.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return s.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),s}function Xte({mousemoveCb:t,sampling:e,doc:n,mirror:r}){if(e.mousemove===!1)return()=>{};const i=typeof e.mousemove=="number"?e.mousemove:50,s=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let o=[],a;const c=Qf(Ke(d=>{const f=Date.now()-a;t(o.map(h=>(h.timeOffset-=f,h)),d),o=[],a=null}),s),l=Ke(Qf(Ke(d=>{const f=xh(d),{clientX:h,clientY:p}=nS(d)?d.changedTouches[0]:d;a||(a=wm()),o.push({x:h,y:p,id:r.getId(f),timeOffset:wm()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?Ve.Drag:d instanceof MouseEvent?Ve.MouseMove:Ve.TouchMove)}),i,{trailing:!1})),u=[ur("mousemove",l,n),ur("touchmove",l,n),ur("drag",l,n)];return Ke(()=>{u.forEach(d=>d())})}function Kte({mouseInteractionCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let l=null;const u=d=>f=>{const h=xh(f);if(Bi(h,r,i,s,!0))return;let p=null,m=d;if("pointerType"in f){switch(f.pointerType){case"mouse":p=Ks.Mouse;break;case"touch":p=Ks.Touch;break;case"pen":p=Ks.Pen;break}p===Ks.Touch?nr[d]===nr.MouseDown?m="TouchStart":nr[d]===nr.MouseUp&&(m="TouchEnd"):Ks.Pen}else nS(f)&&(p=Ks.Touch);p!==null?(l=p,(m.startsWith("Touch")&&p===Ks.Touch||m.startsWith("Mouse")&&p===Ks.Mouse)&&(p=null)):nr[d]===nr.Click&&(p=l,l=null);const y=nS(f)?f.changedTouches[0]:f;if(!y)return;const g=n.getId(h),{clientX:v,clientY:S}=y;Ke(t)({type:nr[m],id:g,x:v,y:S,...p!==null&&{pointerType:p}})};return Object.keys(nr).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let f=Bu(d);const h=u(d);if(window.PointerEvent)switch(nr[d]){case nr.MouseDown:case nr.MouseUp:f=f.replace("mouse","pointer");break;case nr.TouchStart:case nr.TouchEnd:return}c.push(ur(f,h,e))}),Ke(()=>{c.forEach(d=>d())})}function D2({scrollCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){const a=Ke(Qf(Ke(c=>{const l=xh(c);if(!l||Bi(l,r,i,s,!0))return;const u=n.getId(l);if(l===e&&e.defaultView){const d=k2(e.defaultView);t({id:u,x:d.left,y:d.top})}else t({id:u,x:l.scrollLeft,y:l.scrollTop})}),o.scroll||100));return ur("scroll",a,e)}function Jte({viewportResizeCb:t},{win:e}){let n=-1,r=-1;const i=Ke(Qf(Ke(()=>{const s=A2(),o=E2();(n!==s||r!==o)&&(t({width:Number(o),height:Number(s)}),n=s,r=o)}),200));return ur("resize",i,e)}const Yte=["INPUT","TEXTAREA","SELECT"],JT=new WeakMap;function qte({inputCb:t,doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:m}){function y(A){let _=xh(A);const P=A.isTrusted,N=_&&tS(_.tagName);if(N==="OPTION"&&(_=_.parentElement),!_||!N||Yte.indexOf(N)<0||Bi(_,r,i,s,!0))return;const O=_;if(O.classList.contains(o)||a&&O.matches(a))return;const D=Vw(_);let U=Sm(O,N,D),G=!1;const z=Dv({maskInputOptions:c,tagName:N,type:D}),$=Fu(_,f,p,h,m,z);(D==="radio"||D==="checkbox")&&(G=_.checked),U=Yf({isMasked:$,element:_,value:U,maskInputFn:l}),g(_,d?{text:U,isChecked:G,userTriggered:P}:{text:U,isChecked:G});const q=_.name;D==="radio"&&q&&G&&e.querySelectorAll(`input[type="radio"][name="${q}"]`).forEach(j=>{if(j!==_){const X=Yf({isMasked:$,element:j,value:Sm(j,N,D),maskInputFn:l});g(j,d?{text:X,isChecked:!G,userTriggered:!1}:{text:X,isChecked:!G})}})}function g(A,_){const P=JT.get(A);if(!P||P.text!==_.text||P.isChecked!==_.isChecked){JT.set(A,_);const N=n.getId(A);Ke(t)({..._,id:N})}}const S=(u.input==="last"?["change"]:["input","change"]).map(A=>ur(A,Ke(y),e)),E=e.defaultView;if(!E)return()=>{S.forEach(A=>A())};const k=E.Object.getOwnPropertyDescriptor(E.HTMLInputElement.prototype,"value"),b=[[E.HTMLInputElement.prototype,"value"],[E.HTMLInputElement.prototype,"checked"],[E.HTMLSelectElement.prototype,"value"],[E.HTMLTextAreaElement.prototype,"value"],[E.HTMLSelectElement.prototype,"selectedIndex"],[E.HTMLOptionElement.prototype,"selected"]];return k&&k.set&&S.push(...b.map(A=>w2(A[0],A[1],{set(){Ke(y)({target:this,isTrusted:!1})}},!1,E))),Ke(()=>{S.forEach(A=>A())})}function km(t){const e=[];function n(r,i){if(Ip("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Ip("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Ip("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Ip("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(o)}return i}return n(t,e)}function pa(t,e,n){let r,i;return t?(t.ownerNode?r=e.getId(t.ownerNode):i=n.getId(t),{styleId:i,id:r}):{}}function Qte({styleSheetRuleCb:t,mirror:e,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Ke((u,d,f)=>{const[h,p]=f,{id:m,styleId:y}=pa(d,e,n.styleMirror);return(m&&m!==-1||y&&y!==-1)&&t({id:m,styleId:y,adds:[{rule:h,index:p}]}),u.apply(d,f)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Ke((u,d,f)=>{const[h]=f,{id:p,styleId:m}=pa(d,e,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&t({id:p,styleId:m,removes:[{index:h}]}),u.apply(d,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Ke((u,d,f)=>{const[h]=f,{id:p,styleId:m}=pa(d,e,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&t({id:p,styleId:m,replace:h}),u.apply(d,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Ke((u,d,f)=>{const[h]=f,{id:p,styleId:m}=pa(d,e,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&t({id:p,styleId:m,replaceSync:h}),u.apply(d,f)})}));const c={};Sp("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Sp("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Sp("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Sp("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach(([u,d])=>{l[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(l[u].insertRule,{apply:Ke((f,h,p)=>{const[m,y]=p,{id:g,styleId:v}=pa(h.parentStyleSheet,e,n.styleMirror);return(g&&g!==-1||v&&v!==-1)&&t({id:g,styleId:v,adds:[{rule:m,index:[...km(h),y||0]}]}),f.apply(h,p)})}),d.prototype.deleteRule=new Proxy(l[u].deleteRule,{apply:Ke((f,h,p)=>{const[m]=p,{id:y,styleId:g}=pa(h.parentStyleSheet,e,n.styleMirror);return(y&&y!==-1||g&&g!==-1)&&t({id:y,styleId:g,removes:[{index:[...km(h),m]}]}),f.apply(h,p)})})}),Ke(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([u,d])=>{d.prototype.insertRule=l[u].insertRule,d.prototype.deleteRule=l[u].deleteRule})})}function L2({mirror:t,stylesheetManager:e},n){let r=null;n.nodeName==="#document"?r=t.getId(n):r=t.getId(n.host);const i=n.nodeName==="#document"?ps([n,"access",o=>o.defaultView,"optionalAccess",o=>o.Document]):ps([n,"access",o=>o.ownerDocument,"optionalAccess",o=>o.defaultView,"optionalAccess",o=>o.ShadowRoot]),s=ps([i,"optionalAccess",o=>o.prototype])?Object.getOwnPropertyDescriptor(ps([i,"optionalAccess",o=>o.prototype]),"adoptedStyleSheets"):void 0;return r===null||r===-1||!i||!s?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get(){return ps([s,"access",o=>o.get,"optionalAccess",o=>o.call,"call",o=>o(this)])},set(o){const a=ps([s,"access",c=>c.set,"optionalAccess",c=>c.call,"call",c=>c(this,o)]);if(r!==null&&r!==-1)try{e.adoptStyleSheets(o,r)}catch{}return a}}),Ke(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:s.configurable,enumerable:s.enumerable,get:s.get,set:s.set})}))}function ene({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Ke((a,c,l)=>{const[u,d,f]=l;if(n.has(u))return s.apply(c,[u,d,f]);const{id:h,styleId:p}=pa(ps([c,"access",m=>m.parentRule,"optionalAccess",m=>m.parentStyleSheet]),e,r.styleMirror);return(h&&h!==-1||p&&p!==-1)&&t({id:h,styleId:p,set:{property:u,value:d,priority:f},index:km(c.parentRule)}),a.apply(c,l)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Ke((a,c,l)=>{const[u]=l;if(n.has(u))return o.apply(c,[u]);const{id:d,styleId:f}=pa(ps([c,"access",h=>h.parentRule,"optionalAccess",h=>h.parentStyleSheet]),e,r.styleMirror);return(d&&d!==-1||f&&f!==-1)&&t({id:d,styleId:f,remove:{property:u},index:km(c.parentRule)}),a.apply(c,l)})}),Ke(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function tne({mediaInteractionCb:t,blockClass:e,blockSelector:n,unblockSelector:r,mirror:i,sampling:s,doc:o}){const a=Ke(l=>Qf(Ke(u=>{const d=xh(u);if(!d||Bi(d,e,n,r,!0))return;const{currentTime:f,volume:h,muted:p,playbackRate:m}=d;t({type:l,id:i.getId(d),currentTime:f,volume:h,muted:p,playbackRate:m})}),s.media||500)),c=[ur("play",a(0),o),ur("pause",a(1),o),ur("seeked",a(2),o),ur("volumechange",a(3),o),ur("ratechange",a(4),o)];return Ke(()=>{c.forEach(l=>l())})}function nne({fontCb:t,doc:e}){const n=e.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,s=n.FontFace;n.FontFace=function(c,l,u){const d=new s(c,l,u);return i.set(d,{family:c,buffer:typeof l!="string",descriptors:u,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),d};const o=jw(e.fonts,"add",function(a){return function(c){return setTimeout(Ke(()=>{const l=i.get(c);l&&(t(l),i.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=s}),r.push(o),Ke(()=>{r.forEach(a=>a())})}function rne(t){const{doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,selectionCb:o}=t;let a=!0;const c=Ke(()=>{const l=e.getSelection();if(!l||a&&ps([l,"optionalAccess",f=>f.isCollapsed]))return;a=l.isCollapsed||!1;const u=[],d=l.rangeCount||0;for(let f=0;f<d;f++){const h=l.getRangeAt(f),{startContainer:p,startOffset:m,endContainer:y,endOffset:g}=h;Bi(p,r,i,s,!0)||Bi(y,r,i,s,!0)||u.push({start:n.getId(p),startOffset:m,end:n.getId(y),endOffset:g})}o({ranges:u})});return c(),ur("selectionchange",c)}function ine({doc:t,customElementCb:e}){const n=t.defaultView;return!n||!n.customElements?()=>{}:jw(n.customElements,"define",function(i){return function(s,o,a){try{e({define:{name:s}})}catch{}return i.apply(this,[s,o,a])}})}function sne(t,e={}){const n=t.doc.defaultView;if(!n)return()=>{};const r=O2(t,t.doc),i=Xte(t),s=Kte(t),o=D2(t),a=Jte(t,{win:n}),c=qte(t),l=tne(t),u=Qte(t,{win:n}),d=L2(t,t.doc),f=ene(t,{win:n}),h=t.collectFonts?nne(t):()=>{},p=rne(t),m=ine(t),y=[];for(const g of t.plugins)y.push(g.observer(g.callback,n,g.options));return Ke(()=>{jl.forEach(g=>g.reset()),r.disconnect(),i(),s(),o(),a(),c(),l(),u(),d(),f(),h(),p(),m(),y.forEach(g=>g())})}function Ip(t){return typeof window[t]<"u"}function Sp(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}class sS{constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,n,r,i){const s=r||this.getIdToRemoteIdMap(e),o=i||this.getRemoteIdToIdMap(e);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),o.set(a,n)),a}getIds(e,n){const r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return n.map(s=>this.getId(e,s,r,i))}getRemoteId(e,n,r){const i=r||this.getRemoteIdToIdMap(e);if(typeof n!="number")return n;const s=i.get(n);return s||-1}getRemoteIds(e,n){const r=this.getRemoteIdToIdMap(e);return n.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let n=this.iframeIdToRemoteIdMap.get(e);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(e,n)),n}getRemoteIdToIdMap(e){let n=this.iframeRemoteIdToIdMap.get(e);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(e,n)),n}}function YT(t){let e,n=t[0],r=1;for(;r<t.length;){const i=t[r],s=t[r+1];if(r+=2,(i==="optionalAccess"||i==="optionalCall")&&n==null)return;i==="access"||i==="optionalAccess"?(e=n,n=s(n)):(i==="call"||i==="optionalCall")&&(n=s((...o)=>n.call(e,...o)),e=void 0)}return n}class one{constructor(){this.crossOriginIframeMirror=new sS(Gw),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class ane{constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new sS(Gw),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new sS(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,n){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),YT([this,"access",r=>r.loadListener,"optionalCall",r=>r(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const n=e;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!e.source)return;const i=this.crossOriginIframeMap.get(e.source);if(!i)return;const s=this.transformCrossOriginEvent(i,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(e,n){switch(n.type){case Ue.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(n.data.node,e);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(e,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:Ue.IncrementalSnapshot,data:{source:Ve.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ue.Meta:case Ue.Load:case Ue.DomContentLoaded:return!1;case Ue.Plugin:return n;case Ue.Custom:return this.replaceIds(n.data.payload,e,["id","parentId","previousId","nextId"]),n;case Ue.IncrementalSnapshot:switch(n.data.source){case Ve.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,e);const i=this.crossOriginIframeRootIdMap.get(e);i&&this.patchRootIdOnNode(r.node,i)}),n.data.removes.forEach(r=>{this.replaceIds(r,e,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,e,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case Ve.Drag:case Ve.TouchMove:case Ve.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,e,["id"])}),n;case Ve.ViewportResize:return!1;case Ve.MediaInteraction:case Ve.MouseInteraction:case Ve.Scroll:case Ve.CanvasMutation:case Ve.Input:return this.replaceIds(n.data,e,["id"]),n;case Ve.StyleSheetRule:case Ve.StyleDeclaration:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleId"]),n;case Ve.Font:return n;case Ve.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,e,["start","end"])}),n;case Ve.AdoptedStyleSheet:return this.replaceIds(n.data,e,["id"]),this.replaceStyleIds(n.data,e,["styleIds"]),YT([n,"access",r=>r.data,"access",r=>r.styles,"optionalAccess",r=>r.forEach,"call",r=>r(i=>{this.replaceStyleIds(i,e,["styleId"])})]),n}}return!1}replace(e,n,r,i){for(const s of i)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=e.getIds(r,n[s]):n[s]=e.getId(r,n[s]));return n}replaceIds(e,n,r){return this.replace(this.crossOriginIframeMirror,e,n,r)}replaceStyleIds(e,n,r){return this.replace(this.crossOriginIframeStyleMirror,e,n,r)}replaceIdOnNode(e,n){this.replaceIds(e,n,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(e,n){e.type!==pn.Document&&!e.rootId&&(e.rootId=n),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class cne{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class lne{constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,n){if(!df(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);const r=O2({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(D2({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(L2({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,n){const r=this;this.restoreHandlers.push(jw(e.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s);return this.shadowRoot&&N2(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class qT{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class une{constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Fte,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,n){if(e.length===0)return;const r={id:n,styleIds:[]},i=[];for(const s of e){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(a,c)=>({rule:C2(a),index:c}))})),r.styleIds.push(o)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class dne{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){Wte(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,n){const r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==n)}add(e,n){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function rn(t){const e=t;return e.timestamp=wm(),e}let Am;const bi=fte();function ja(t={}){const{emit:e,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:h=null,inlineStylesheet:p=!0,maskAllInputs:m,maskInputOptions:y,slimDOMOptions:g,maskAttributeFn:v,maskInputFn:S,maskTextFn:E,packFn:k,sampling:b={},dataURLOptions:A={},mousemoveWait:_,recordCanvas:P=!1,recordCrossOriginIframes:N=!1,recordAfter:O=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:D=!1,collectFonts:U=!1,inlineImages:G=!1,plugins:z,keepIframeSrcFn:$=()=>!1,ignoreCSSAttributes:q=new Set([]),errorHandler:j,onMutation:X,getCanvasManager:re}=t;zte(j);const Z=N?window.parent===window:!0;let ie=!1;if(!Z)try{window.parent.document&&(ie=!1)}catch{ie=!0}if(Z&&!e)throw new Error("emit function is required");_!==void 0&&b.mousemove===void 0&&(b.mousemove=_),bi.reset();const ke=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:y!==void 0?y:{},Ee=g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:g==="all",headMetaDescKeywords:g==="all"}:g||{};Bte();let ge,Te=0;const Qe=le=>{for(const Fe of z||[])Fe.eventProcessor&&(le=Fe.eventProcessor(le));return k&&!ie&&(le=k(le)),le},ae=(le,Fe)=>{if(l0([jl,"access",Ie=>Ie[0],"optionalAccess",Ie=>Ie.isFrozen,"call",Ie=>Ie()])&&le.type!==Ue.FullSnapshot&&!(le.type===Ue.IncrementalSnapshot&&le.data.source===Ve.Mutation)&&jl.forEach(Ie=>Ie.unfreeze()),Z)l0([e,"optionalCall",Ie=>Ie(Qe(le),Fe)]);else if(ie){const Ie={type:"rrweb",event:Qe(le),origin:window.location.origin,isCheckout:Fe};window.parent.postMessage(Ie,"*")}if(le.type===Ue.FullSnapshot)ge=le,Te=0;else if(le.type===Ue.IncrementalSnapshot){if(le.data.source===Ve.Mutation&&le.data.isAttachIframe)return;Te++;const Ie=r&&Te>=r,Ze=n&&le.timestamp-ge.timestamp>n;(Ie||Ze)&&et(!0)}},nn=le=>{ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.Mutation,...le}}))},In=le=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.Scroll,...le}})),Ct=le=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.CanvasMutation,...le}})),an=le=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.AdoptedStyleSheet,...le}})),ut=new une({mutationCb:nn,adoptedStyleSheetCb:an}),Ut=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new one:new ane({mirror:bi,mutationCb:nn,stylesheetManager:ut,recordCrossOriginIframes:N,wrappedEmit:ae});for(const le of z||[])le.getMirror&&le.getMirror({nodeMirror:bi,crossOriginIframeMirror:Ut.crossOriginIframeMirror,crossOriginIframeStyleMirror:Ut.crossOriginIframeStyleMirror});const ce=new dne,Ce=hne(re,{mirror:bi,win:window,mutationCb:le=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.CanvasMutation,...le}})),recordCanvas:P,blockClass:i,blockSelector:s,unblockSelector:o,sampling:b.canvas,dataURLOptions:A}),rt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new cne:new lne({mutationCb:nn,scrollCb:In,bypassOptions:{onMutation:X,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:ke,dataURLOptions:A,maskAttributeFn:v,maskTextFn:E,maskInputFn:S,recordCanvas:P,inlineImages:G,sampling:b,slimDOMOptions:Ee,iframeManager:Ut,stylesheetManager:ut,canvasManager:Ce,keepIframeSrcFn:$,processedNodeManager:ce},mirror:bi}),et=(le=!1)=>{ae(rn({type:Ue.Meta,data:{href:window.location.href,width:E2(),height:A2()}}),le),ut.reset(),rt.init(),jl.forEach(Ie=>Ie.lock());const Fe=Dte(document,{mirror:bi,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:p,maskAllInputs:ke,maskAttributeFn:v,maskInputFn:S,maskTextFn:E,slimDOM:Ee,dataURLOptions:A,recordCanvas:P,inlineImages:G,onSerialize:Ie=>{_2(Ie,bi)&&Ut.addIframe(Ie),R2(Ie,bi)&&ut.trackLinkElement(Ie),rS(Ie)&&rt.addShadowRoot(Ie.shadowRoot,document)},onIframeLoad:(Ie,Ze)=>{Ut.attachIframe(Ie,Ze),rt.observeAttachShadow(Ie)},onStylesheetLoad:(Ie,Ze)=>{ut.attachLinkElement(Ie,Ze)},keepIframeSrcFn:$});if(!Fe)return console.warn("Failed to snapshot the document");ae(rn({type:Ue.FullSnapshot,data:{node:Fe,initialOffset:k2(window)}})),jl.forEach(Ie=>Ie.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&ut.adoptStyleSheets(document.adoptedStyleSheets,bi.getId(document))};Am=et;try{const le=[],Fe=Ze=>Ke(sne)({onMutation:X,mutationCb:nn,mousemoveCb:(Pe,Ht)=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ht,positions:Pe}})),mouseInteractionCb:Pe=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.MouseInteraction,...Pe}})),scrollCb:In,viewportResizeCb:Pe=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.ViewportResize,...Pe}})),inputCb:Pe=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.Input,...Pe}})),mediaInteractionCb:Pe=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.MediaInteraction,...Pe}})),styleSheetRuleCb:Pe=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.StyleSheetRule,...Pe}})),styleDeclarationCb:Pe=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.StyleDeclaration,...Pe}})),canvasMutationCb:Ct,fontCb:Pe=>ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.Font,...Pe}})),selectionCb:Pe=>{ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.Selection,...Pe}}))},customElementCb:Pe=>{ae(rn({type:Ue.IncrementalSnapshot,data:{source:Ve.CustomElement,...Pe}}))},blockClass:i,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,maskInputOptions:ke,inlineStylesheet:p,sampling:b,recordCanvas:P,inlineImages:G,userTriggeredOnInput:D,collectFonts:U,doc:Ze,maskAttributeFn:v,maskInputFn:S,maskTextFn:E,keepIframeSrcFn:$,blockSelector:s,unblockSelector:o,slimDOMOptions:Ee,dataURLOptions:A,mirror:bi,iframeManager:Ut,stylesheetManager:ut,shadowDomManager:rt,processedNodeManager:ce,canvasManager:Ce,ignoreCSSAttributes:q,plugins:l0([z,"optionalAccess",Pe=>Pe.filter,"call",Pe=>Pe(Ht=>Ht.observer),"optionalAccess",Pe=>Pe.map,"call",Pe=>Pe(Ht=>({observer:Ht.observer,options:Ht.options,callback:Sn=>ae(rn({type:Ue.Plugin,data:{plugin:Ht.name,payload:Sn}}))}))])||[]},{});Ut.addLoadListener(Ze=>{try{le.push(Fe(Ze.contentDocument))}catch(Pe){console.warn(Pe)}});const Ie=()=>{et(),le.push(Fe(document))};return document.readyState==="interactive"||document.readyState==="complete"?Ie():(le.push(ur("DOMContentLoaded",()=>{ae(rn({type:Ue.DomContentLoaded,data:{}})),O==="DOMContentLoaded"&&Ie()})),le.push(ur("load",()=>{ae(rn({type:Ue.Load,data:{}})),O==="load"&&Ie()},window))),()=>{le.forEach(Ze=>Ze()),ce.destroy(),Am=void 0,Zte()}}catch(le){console.warn(le)}}function fne(t){if(!Am)throw new Error("please take full snapshot after start recording");Am(t)}ja.mirror=bi;ja.takeFullSnapshot=fne;function hne(t,e){try{return t?t(e):new qT}catch{return console.warn("Unable to initialize CanvasManager"),new qT}}const pne=3,gne=5;function Hw(t){return t>9999999999?t:t*1e3}function m0(t){return t>9999999999?t/1e3:t}function Nh(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:Ue.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:hs(e,10,1e3)}}),e.category==="console")))}const mne="button,a";function B2(t){return t.closest(mne)||t}function F2(t){const e=U2(t);return!e||!(e instanceof Element)?e:B2(e)}function U2(t){return vne(t)?t.target:t}function vne(t){return typeof t=="object"&&!!t&&"target"in t}let ga;function yne(t){return ga||(ga=[],Cne()),ga.push(t),()=>{const e=ga?ga.indexOf(t):-1;e>-1&&ga.splice(e,1)}}function Cne(){_n(wt,"open",function(t){return function(...e){if(ga)try{ga.forEach(n=>n())}catch{}return t.apply(wt,e)}})}function Ine(t,e,n){t.handleClick(e,n)}class Sne{constructor(e,n,r=Nh){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const e=yne(()=>{this._lastMutation=QT()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,n){if(wne(n,this._ignoreSelector)||!kne(e))return;const r={timestamp:m0(e.timestamp),clickBreadcrumb:e,clickCount:0,node:n};this._clicks.some(i=>i.node===r.node&&Math.abs(i.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=m0(e)}registerScroll(e=Date.now()){this._lastScroll=m0(e)}registerClick(e){const n=B2(e);this._handleMultiClick(n)}_handleMultiClick(e){this._getClicks(e).forEach(n=>{n.clickCount++})}_getClicks(e){return this._clicks.filter(n=>n.node===e)}_checkClicks(){const e=[],n=QT();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&e.push(r)});for(const r of e){const i=this._clicks.indexOf(r);i>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const n=this._replay,r=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,i=e.mutationAfter&&e.mutationAfter<=this._threshold,s=!r&&!i,{clickCount:o,clickBreadcrumb:a}=e;if(s){const c=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,l=c<this._timeout*1e3?"mutation":"timeout",u={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:wt.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:l,clickCount:o||1}};this._addBreadcrumbEvent(n,u);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:wt.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const bne=["A","BUTTON","INPUT"];function wne(t,e){return!!(!bne.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}function kne(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}function QT(){return Date.now()/1e3}function Ane(t,e){try{if(!Ene(e))return;const{source:n}=e.data;if(n===Ve.Mutation&&t.registerMutation(e.timestamp),n===Ve.Scroll&&t.registerScroll(e.timestamp),Tne(e)){const{type:r,id:i}=e.data,s=ja.mirror.getNode(i);s instanceof HTMLElement&&r===nr.Click&&t.registerClick(s)}}catch{}}function Ene(t){return t.type===pne}function Tne(t){return t.data.source===Ve.MouseInteraction}function Ls(t){return{timestamp:Date.now()/1e3,type:"default",...t}}var Em;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(Em||(Em={}));const _ne=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Rne(t){const e={};for(const n in t)if(_ne.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),e[r]=t[n]}return e}const xne=t=>e=>{if(!t.isEnabled())return;const n=Nne(e);if(!n)return;const r=e.name==="click",i=r?e.event:void 0;r&&t.clickDetector&&i&&i.target&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&Ine(t.clickDetector,n,F2(e.event)),Nh(t,n)};function V2(t,e){const n=ja.mirror.getId(t),r=n&&ja.mirror.getNode(n),i=r&&ja.mirror.getMeta(r),s=i&&Mne(i)?i:null;return{message:e,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map(o=>o.type===Em.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:Rne(s.attributes)}}:{}}}function Nne(t){const{target:e,message:n}=Pne(t);return Ls({category:`ui.${t.name}`,...V2(e,n)})}function Pne(t){const e=t.name==="click";let n,r=null;try{r=e?F2(t.event):U2(t.event),n=Zc(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function Mne(t){return t.type===Em.Element}function One(t,e){if(!t.isEnabled())return;t.updateUserActivity();const n=Dne(e);n&&Nh(t,n)}function Dne(t){const{metaKey:e,shiftKey:n,ctrlKey:r,altKey:i,key:s,target:o}=t;if(!o||Lne(o)||!s)return null;const a=e||r||i,c=s.length===1;if(!a&&c)return null;const l=Zc(o,{maxStringLength:200})||"<unknown>",u=V2(o,l);return Ls({category:"ui.keyDown",message:l,data:{...u.data,metaKey:e,shiftKey:n,ctrlKey:r,altKey:i,key:s}})}function Lne(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}const e_={resource:Gne,paint:Une,navigation:Vne};function Bne(t){return t.map(Fne).filter(Boolean)}function Fne(t){return e_[t.entryType]?e_[t.entryType](t):null}function Uu(t){return((qi||wt.performance.timeOrigin)+t)/1e3}function Une(t){const{duration:e,entryType:n,name:r,startTime:i}=t,s=Uu(i);return{type:n,name:r,start:s,end:s+e,data:void 0}}function Vne(t){const{entryType:e,name:n,decodedBodySize:r,duration:i,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:f,startTime:h,transferSize:p,type:m}=t;return i===0?null:{type:`${e}.${m}`,start:Uu(h),end:Uu(s),name:n,data:{size:p,decodedBodySize:r,encodedBodySize:o,duration:i,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:f}}}function Gne(t){const{entryType:e,initiatorType:n,name:r,responseEnd:i,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:l}=t;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${e}.${n}`,start:Uu(s),end:Uu(i),name:r,data:{size:l,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function Wne(t){const e=t.entries,n=e[e.length-1],r=n?n.element:void 0,i=t.value,s=Uu(i);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:i,size:i,nodeId:r?ja.mirror.getId(r):void 0}}}function jne(t){function e(i){t.performanceEntries.includes(i)||t.performanceEntries.push(i)}function n({entries:i}){i.forEach(e)}const r=[];return["navigation","paint","resource"].forEach(i=>{r.push(Mv(i,n))}),r.push(g2(({metric:i})=>{t.replayPerformanceEntries.push(Wne(i))})),()=>{r.forEach(i=>i())}}const gt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Hne='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function $ne(){const t=new Blob([Hne]);return URL.createObjectURL(t)}function or(t,e){gt&&(K.info(t),e&&G2(t))}function du(t,e){gt&&(K.info(t),e&&setTimeout(()=>{G2(t)},0))}function G2(t){Ya({category:"console",data:{logger:"replay"},level:"info",message:t},{level:"info"})}class $w extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Uw}.`)}}class W2{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const n=JSON.stringify(e).length;if(this._totalSize+=n,this._totalSize>Uw)throw new $w;this.events.push(e)}finish(){return new Promise(e=>{const n=this.events;this.clear(),e(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(n=>n.timestamp).sort()[0];return e?Hw(e):null}}class zne{constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?e():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){or("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,n){const r=this._getAndIncrementId();return new Promise((i,s)=>{const o=({data:a})=>{const c=a;if(c.method===e&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){gt&&K.error("[Replay]",c.response),s(new Error("Error in compression worker"));return}i(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:e,arg:n})})}_getAndIncrementId(){return this._id++}}class Zne{constructor(e){this._worker=new zne(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const n=Hw(e.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(e);return this._totalSize+=r.length,this._totalSize>Uw?Promise.reject(new $w):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{gt&&K.warn('[Replay] Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Xne{constructor(e){this._fallback=new W2,this._compression=new Zne(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{or("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:n}=this._fallback,r=[];for(const i of e)r.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(i){gt&&K.warn("[Replay] Failed to add events when switching buffers.",i)}}}function Kne({useCompression:t,workerUrl:e}){if(t&&window.Worker){const n=Jne(e);if(n)return n}return or("[Replay] Using simple buffer"),new W2}function Jne(t){try{const e=t||Yne();if(!e)return;or(`[Replay] Using compression worker${t?` from ${t}`:""}`);const n=new Worker(e);return new Xne(n)}catch{or("[Replay] Failed to create compression worker")}}function Yne(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?$ne():""}function zw(){try{return"sessionStorage"in wt&&!!wt.sessionStorage}catch{return!1}}function qne(t){Qne(),t.session=void 0}function Qne(){if(zw())try{wt.sessionStorage.removeItem(Bw)}catch{}}function j2(t){return t===void 0?!1:Math.random()<t}function H2(t){const e=Date.now(),n=t.id||yn(),r=t.started||e,i=t.lastActivity||e,s=t.segmentId||0,o=t.sampled,a=t.previousSessionId;return{id:n,started:r,lastActivity:i,segmentId:s,sampled:o,previousSessionId:a}}function Zw(t){if(zw())try{wt.sessionStorage.setItem(Bw,JSON.stringify(t))}catch{}}function ere(t,e){return j2(t)?"session":e?"buffer":!1}function t_({sessionSampleRate:t,allowBuffering:e,stickySession:n=!1},{previousSessionId:r}={}){const i=ere(t,e),s=H2({sampled:i,previousSessionId:r});return n&&Zw(s),s}function tre(t){if(!zw())return null;try{const e=wt.sessionStorage.getItem(Bw);if(!e)return null;const n=JSON.parse(e);return du("[Replay] Loading existing session",t),H2(n)}catch{return null}}function oS(t,e,n=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=n}function $2(t,{maxReplayDuration:e,sessionIdleExpire:n,targetTime:r=Date.now()}){return oS(t.started,e,r)||oS(t.lastActivity,n,r)}function z2(t,{sessionIdleExpire:e,maxReplayDuration:n}){return!(!$2(t,{sessionIdleExpire:e,maxReplayDuration:n})||t.sampled==="buffer"&&t.segmentId===0)}function v0({traceInternals:t,sessionIdleExpire:e,maxReplayDuration:n,previousSessionId:r},i){const s=i.stickySession&&tre(t);return s?z2(s,{sessionIdleExpire:e,maxReplayDuration:n})?(du("[Replay] Session in sessionStorage is expired, creating new one..."),t_(i,{previousSessionId:s.id})):s:(du("[Replay] Creating new session",t),t_(i,{previousSessionId:r}))}function nre(t){return t.type===Ue.Custom}function Xw(t,e,n){return X2(t,e)?(Z2(t,e,n),!0):!1}function rre(t,e,n){return X2(t,e)?Z2(t,e,n):Promise.resolve(null)}async function Z2(t,e,n){if(!t.eventBuffer)return null;try{n&&t.recordingMode==="buffer"&&t.eventBuffer.clear(),n&&(t.eventBuffer.hasCheckout=!0);const r=t.getOptions(),i=ire(e,r.beforeAddRecordingEvent);return i?await t.eventBuffer.addEvent(i):void 0}catch(r){const i=r&&r instanceof $w?"addEventSizeExceeded":"addEvent";gt&&K.error(r),await t.stop({reason:i});const s=yt();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function X2(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const n=Hw(e.timestamp);return n+t.timeouts.sessionIdlePause<Date.now()?!1:n>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(or(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,t.getOptions()._experiments.traceInternals),!1):!0}function ire(t,e){try{if(typeof e=="function"&&nre(t))return e(t)}catch(n){return gt&&K.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return t}function Kw(t){return!t.type}function aS(t){return t.type==="transaction"}function sre(t){return t.type==="replay_event"}function n_(t){return t.type==="feedback"}function K2(t){const e=cre();return(n,r)=>{if(!t.isEnabled()||!Kw(n)&&!aS(n))return;const i=r&&r.statusCode;if(!(e&&(!i||i<200||i>=300))){if(aS(n)){ore(t,n);return}are(t,n)}}}function ore(t,e){const n=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(e.contexts.trace.trace_id)}function are(t,e){const n=t.getContext();if(e.event_id&&n.errorIds.size<100&&n.errorIds.add(e.event_id),t.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:r}=t.getOptions();typeof r=="function"&&!r(e)||setTimeout(()=>{t.sendBufferedReplayOrFlush()})}function cre(){const t=yt();if(!t)return!1;const e=t.getTransport();return e&&e.send.__sentry__baseTransport__||!1}function lre(t){return e=>{!t.isEnabled()||!Kw(e)||ure(t,e)}}function ure(t,e){const n=e.exception&&e.exception.values&&e.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Ls({category:"replay.hydrate-error"});Nh(t,r)}}function dre(t,e){return t.type||!t.exception||!t.exception.values||!t.exception.values.length?!1:!!(e.originalException&&e.originalException.__rrweb__)}function fre(t,e){t.triggerUserActivity(),t.addUpdate(()=>e.timestamp?(t.throttledAddEvent({type:Ue.Custom,timestamp:e.timestamp*1e3,data:{timestamp:e.timestamp,tag:"breadcrumb",payload:{category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}function hre(t,e){return t.recordingMode!=="buffer"||e.message===Fw||!e.exception||e.type?!1:j2(t.getOptions().errorSampleRate)}function pre(t,e=!1){const n=e?K2(t):void 0;return Object.assign((r,i)=>t.isEnabled()?sre(r)?(delete r.breadcrumbs,r):!Kw(r)&&!aS(r)&&!n_(r)||!t.checkAndHandleExpiredSession()?r:n_(r)?(t.flush(),r.contexts.feedback.replay_id=t.getSessionId(),fre(t,r),r):dre(r,i)&&!t.getOptions()._experiments.captureExceptions?(gt&&K.log("[Replay] Ignoring error from rrweb internals",r),null):((hre(t,r)||t.recordingMode==="session")&&(r.tags={...r.tags,replayId:t.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function Lv(t,e){return e.map(({type:n,start:r,end:i,name:s,data:o})=>{const a=t.throttledAddEvent({type:Ue.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:s,startTimestamp:r,endTimestamp:i,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function gre(t){const{from:e,to:n}=t,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:e}}}function mre(t){return e=>{if(!t.isEnabled())return;const n=gre(e);n!==null&&(t.getContext().urls.push(n.name),t.triggerUserActivity(),t.addUpdate(()=>(Lv(t,[n]),!1)))}}function vre(t,e){return gt&&t.getOptions()._experiments.traceInternals?!1:Mq(e,yt())}function Bv(t,e){t.isEnabled()&&e!==null&&(vre(t,e.name)||t.addUpdate(()=>(Lv(t,[e]),!0)))}function yre(t){const{startTimestamp:e,endTimestamp:n,fetchData:r,response:i}=t;if(!n)return null;const{method:s,url:o}=r;return{type:"resource.fetch",start:e/1e3,end:n/1e3,name:o,data:{method:s,statusCode:i?i.status:void 0}}}function Cre(t){return e=>{if(!t.isEnabled())return;const n=yre(e);Bv(t,n)}}function Ire(t){const{startTimestamp:e,endTimestamp:n,xhr:r}=t,i=r[Na];if(!e||!n||!i)return null;const{method:s,url:o,status_code:a}=i;return o===void 0?null:{type:"resource.xhr",name:o,start:e/1e3,end:n/1e3,data:{method:s,statusCode:a}}}function Sre(t){return e=>{if(!t.isEnabled())return;const n=Ire(e);Bv(t,n)}}function Fv(t,e){if(t)try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const n=Q2(t);return e.encode(n).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}function J2(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}function Y2(t){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Q2(t)];if(!t)return[void 0]}catch{return gt&&K.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return gt&&K.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Tm(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const n={...t._meta},r=n.warnings||[];return n.warnings=[...r,e],t._meta=n,t}function q2(t,e){if(!e)return null;const{startTimestamp:n,endTimestamp:r,url:i,method:s,statusCode:o,request:a,response:c}=e;return{type:t,start:n/1e3,end:r/1e3,name:i,data:_r({method:s,statusCode:o,request:a,response:c})}}function eh(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}function Ha(t,e,n){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!n)return{headers:t,size:e};const r={headers:t,size:e},{body:i,warnings:s}=bre(n);return r.body=i,s&&s.length>0&&(r._meta={warnings:s}),r}function cS(t,e){return Object.keys(t).reduce((n,r)=>{const i=r.toLowerCase();return e.includes(i)&&t[r]&&(n[i]=t[r]),n},{})}function Q2(t){return new URLSearchParams(t).toString()}function bre(t){if(!t||typeof t!="string")return{body:t};const e=t.length>GT,n=wre(t);if(e){const r=t.slice(0,GT);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(t)}}catch{}return{body:t}}function wre(t){const e=t[0],n=t[t.length-1];return e==="["&&n==="]"||e==="{"&&n==="}"}function _m(t,e){const n=kre(t);return id(n,e)}function kre(t,e=wt.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(wt.location.origin))return t;const n=new URL(t,e);if(n.origin!==new URL(e).origin)return t;const r=n.href;return!t.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Are(t,e,n){try{const r=await Tre(t,e,n),i=q2("resource.fetch",r);Bv(n.replay,i)}catch(r){gt&&K.error("[Replay] Failed to capture fetch breadcrumb",r)}}function Ere(t,e,n){const{input:r,response:i}=e,s=r?eB(r):void 0,o=Fv(s,n.textEncoder),a=i?J2(i.headers.get("content-length")):void 0;o!==void 0&&(t.data.request_body_size=o),a!==void 0&&(t.data.response_body_size=a)}async function Tre(t,e,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r}=e,{url:o,method:a,status_code:c=0,request_body_size:l,response_body_size:u}=t.data,d=_m(o,n.networkDetailAllowUrls)&&!_m(o,n.networkDetailDenyUrls),f=d?_re(n,e.input,l):eh(l),h=await Rre(d,n,e.response,u);return{startTimestamp:i,endTimestamp:s,url:o,method:a,statusCode:c,request:f,response:h}}function _re({networkCaptureBodies:t,networkRequestHeaders:e},n,r){const i=n?Pre(n,e):{};if(!t)return Ha(i,r,void 0);const s=eB(n),[o,a]=Y2(s),c=Ha(i,r,o);return a?Tm(c,a):c}async function Rre(t,{networkCaptureBodies:e,textEncoder:n,networkResponseHeaders:r},i,s){if(!t&&s!==void 0)return eh(s);const o=i?tB(i.headers,r):{};if(!i||!e&&s!==void 0)return Ha(o,s,void 0);const[a,c]=await Nre(i),l=xre(a,{networkCaptureBodies:e,textEncoder:n,responseBodySize:s,captureDetails:t,headers:o});return c?Tm(l,c):l}function xre(t,{networkCaptureBodies:e,textEncoder:n,responseBodySize:r,captureDetails:i,headers:s}){try{const o=t&&t.length&&r===void 0?Fv(t,n):r;return i?e?Ha(s,o,t):Ha(s,o,void 0):eh(o)}catch(o){return gt&&K.warn("[Replay] Failed to serialize response body",o),Ha(s,r,void 0)}}async function Nre(t){const e=Mre(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await Ore(e)]}catch(n){return gt&&K.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function eB(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}function tB(t,e){const n={};return e.forEach(r=>{t.get(r)&&(n[r]=t.get(r))}),n}function Pre(t,e){return t.length===1&&typeof t[0]!="string"?r_(t[0],e):t.length===2?r_(t[1],e):{}}function r_(t,e){if(!t)return{};const n=t.headers;return n?n instanceof Headers?tB(n,e):Array.isArray(n)?{}:cS(n,e):{}}function Mre(t){try{return t.clone()}catch(e){gt&&K.warn("[Replay] Failed to clone response body",e)}}function Ore(t){return new Promise((e,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);Dre(t).then(i=>e(i),i=>n(i)).finally(()=>clearTimeout(r))})}async function Dre(t){return await t.text()}async function Lre(t,e,n){try{const r=Fre(t,e,n),i=q2("resource.xhr",r);Bv(n.replay,i)}catch(r){gt&&K.error("[Replay] Failed to capture xhr breadcrumb",r)}}function Bre(t,e,n){const{xhr:r,input:i}=e;if(!r)return;const s=Fv(i,n.textEncoder),o=r.getResponseHeader("content-length")?J2(r.getResponseHeader("content-length")):Wre(r.response,r.responseType,n.textEncoder);s!==void 0&&(t.data.request_body_size=s),o!==void 0&&(t.data.response_body_size=o)}function Fre(t,e,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r,input:o,xhr:a}=e,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:f}=t.data;if(!c)return null;if(!a||!_m(c,n.networkDetailAllowUrls)||_m(c,n.networkDetailDenyUrls)){const b=eh(d),A=eh(f);return{startTimestamp:i,endTimestamp:s,url:c,method:l,statusCode:u,request:b,response:A}}const h=a[Na],p=h?cS(h.request_headers,n.networkRequestHeaders):{},m=cS(Ure(a),n.networkResponseHeaders),[y,g]=n.networkCaptureBodies?Y2(o):[void 0],[v,S]=n.networkCaptureBodies?Vre(a):[void 0],E=Ha(p,d,y),k=Ha(m,f,v);return{startTimestamp:i,endTimestamp:s,url:c,method:l,statusCode:u,request:g?Tm(E,g):E,response:S?Tm(k,S):k}}function Ure(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((n,r)=>{const[i,s]=r.split(": ");return n[i.toLowerCase()]=s,n},{}):{}}function Vre(t){const e=[];try{return[t.responseText]}catch(n){e.push(n)}try{return Gre(t.response,t.responseType)}catch(n){e.push(n)}return gt&&K.warn("[Replay] Failed to get xhr response body",...e),[void 0]}function Gre(t,e){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(e==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch{return gt&&K.warn("[Replay] Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return gt&&K.info("[Replay] Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Wre(t,e,n){try{const r=e==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return Fv(r,n)}catch{return}}function jre(t){const e=yt();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a}=t.getOptions(),c={replay:t,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a};e&&e.on?e.on("beforeAddBreadcrumb",(l,u)=>Hre(c,l,u)):(Sw(Cre(t)),bw(Sre(t)))}catch{}}function Hre(t,e,n){if(e.data)try{$re(e)&&Zre(n)&&(Bre(e,n,t),Lre(e,n,t)),zre(e)&&Xre(n)&&(Ere(e,n,t),Are(e,n,t))}catch{gt&&K.warn("Error when enriching network breadcrumb")}}function $re(t){return t.category==="xhr"}function zre(t){return t.category==="fetch"}function Zre(t){return t&&t.xhr}function Xre(t){return t&&t.response}let i_=null;function Kre(t){return!!t.category}const Jre=t=>e=>{if(!t.isEnabled())return;const n=Yre(e);n&&Nh(t,n)};function Yre(t){const e=t.getLastBreadcrumb&&t.getLastBreadcrumb();return i_===e||!e||(i_=e,!Kre(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui."))?null:e.category==="console"?qre(e):Ls(e)}function qre(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||e.length===0)return Ls(t);let n=!1;const r=e.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>Cp?(n=!0,`${i.slice(0,Cp)}…`):i;if(typeof i=="object")try{const s=hs(i,7);return JSON.stringify(s).length>Cp?(n=!0,`${JSON.stringify(s,null,2).slice(0,Cp)}…`):s}catch{}return i});return Ls({...t,data:{...t.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function Qre(t){const e=ts(),n=yt();e.addScopeListener(Jre(t)),lL(xne(t)),wv(mre(t)),jre(t);const r=pre(t,!s_(n));n&&n.addEventProcessor?n.addEventProcessor(r):_q(r),s_(n)&&(n.on("beforeSendEvent",lre(t)),n.on("afterSendEvent",K2(t)),n.on("createDsc",i=>{const s=t.getSessionId();s&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(i.replay_id=s)}),n.on("startTransaction",i=>{t.lastTransaction=i}),n.on("finishTransaction",i=>{t.lastTransaction=i}),n.on("beforeSendFeedback",(i,s)=>{const o=t.getSessionId();s&&s.includeReplay&&t.isEnabled()&&o&&(t.flush(),i.contexts&&i.contexts.feedback&&(i.contexts.feedback.replay_id=o))}))}function s_(t){return!!(t&&t.on)}async function eie(t){try{return Promise.all(Lv(t,[tie(wt.performance.memory)]))}catch{return[]}}function tie(t){const{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}=t,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:n,usedJSHeapSize:r}}}}function nie(t,e,n){let r,i,s;const o=n&&n.maxWait?Math.max(n.maxWait,e):0;function a(){return c(),r=t(),r}function c(){i!==void 0&&clearTimeout(i),s!==void 0&&clearTimeout(s),i=s=void 0}function l(){return i!==void 0||s!==void 0?a():r}function u(){return i&&clearTimeout(i),i=setTimeout(a,e),o&&s===void 0&&(s=setTimeout(a,o)),r}return u.cancel=c,u.flush=l,u}function rie(t){let e=!1;return(n,r)=>{if(!t.checkAndHandleExpiredSession()){gt&&K.warn("[Replay] Received replay event after session expired.");return}const i=r||!e;e=!0,t.clickDetector&&Ane(t.clickDetector,n),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&i&&t.setInitialState(),!Xw(t,n,i))return!0;if(!i)return!1;if(sie(t,i),t.session&&t.session.previousSessionId)return!0;if(t.recordingMode==="buffer"&&t.session&&t.eventBuffer){const s=t.eventBuffer.getEarliestTimestamp();s&&(or(`[Replay] Updating session start time to earliest event in buffer to ${new Date(s)}`,t.getOptions()._experiments.traceInternals),t.session.started=s,t.getOptions().stickySession&&Zw(t.session))}return t.recordingMode==="session"&&t.flush(),!0})}}function iie(t){const e=t.getOptions();return{type:Ue.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}function sie(t,e){!e||!t.session||t.session.segmentId!==0||Xw(t,iie(t),!1)}function oie(t,e,n,r){return ol(mL(t,Aw(t),r,n),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}function aie({recordingData:t,headers:e}){let n;const r=`${JSON.stringify(e)}
`;if(typeof t=="string")n=`${r}${t}`;else{const s=new TextEncoder().encode(r);n=new Uint8Array(s.length+t.length),n.set(s),n.set(t,s.length)}return n}async function cie({client:t,scope:e,replayId:n,event:r}){const i=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,s={event_id:n,integrations:i};t.emit&&t.emit("preprocessEvent",r,s);const o=await bL(t.getOptions(),r,s,e,t,Rh());if(!o)return null;o.platform=o.platform||"javascript";const a=t.getSdkMetadata&&t.getSdkMetadata(),{name:c,version:l}=a&&a.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:l||"0.0.0"},o}async function lie({recordingData:t,replayId:e,segmentId:n,eventContext:r,timestamp:i,session:s}){const o=aie({recordingData:t,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=yt(),f=ts(),h=d&&d.getTransport(),p=d&&d.getDsn();if(!d||!h||!p||!s.sampled)return;const m={type:Zee,replay_start_timestamp:u/1e3,timestamp:i/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:e,segment_id:n,replay_type:s.sampled},y=await cie({scope:f,client:d,replayId:e,event:m});if(!y){d.recordDroppedEvent("event_processor","replay",m),or("An event processor returned `null`, will not send event.");return}delete y.sdkProcessingMetadata;const g=oie(y,o,p,d.getOptions().tunnel);let v;try{v=await h.send(g)}catch(E){const k=new Error(Fw);try{k.cause=E}catch{}throw k}if(!v)return v;if(typeof v.statusCode=="number"&&(v.statusCode<200||v.statusCode>=300))throw new nB(v.statusCode);const S=yL({},v);if(vL(S,"replay"))throw new rB(S);return v}class nB extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class rB extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function iB(t,e={count:0,interval:Qee}){const{recordingData:n,options:r}=t;if(n.length)try{return await lie(t),!0}catch(i){if(i instanceof nB||i instanceof rB)throw i;if(GY("Replays",{_retryCount:e.count}),gt&&r._experiments&&r._experiments.captureExceptions&&Tv(i),e.count>=ete){const s=new Error(`${Fw} - max retries exceeded`);try{s.cause=i}catch{}throw s}return e.interval*=++e.count,new Promise((s,o)=>{setTimeout(async()=>{try{await iB(t,e),s(!0)}catch(a){o(a)}},e.interval)})}}const sB="__THROTTLED",uie="__SKIPPED";function die(t,e,n){const r=new Map,i=a=>{const c=a-n;r.forEach((l,u)=>{u<c&&r.delete(u)})},s=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(i(c),s()>=e){const u=o;return o=!0,u?uie:sB}o=!1;const l=r.get(c)||0;return r.set(c,l+1),t(...a)}}class ma{constructor({options:e,recordingOptions:n}){ma.prototype.__init.call(this),ma.prototype.__init2.call(this),ma.prototype.__init3.call(this),ma.prototype.__init4.call(this),ma.prototype.__init5.call(this),ma.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:Xee,sessionIdleExpire:Kee},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=e,this._debouncedFlush=nie(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=die((o,a)=>rre(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:i}=this.getOptions(),s=r?{threshold:Math.min(tte,r),timeout:r,scrollTimeout:nte,ignoreSelector:i?i.join(","):""}:void 0;s&&(this.clickDetector=new Sne(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(e),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",du(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");du("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const e=v0({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");du("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=v0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=ja({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:qee},emit:rie(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{or(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,qne(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),or("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),or("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();or("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!e||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const n=e();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&oS(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${wt.location.pathname}${wt.location.hash}${wt.location.search}`,n=`${wt.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(e,n){const r=this._throttledAddEvent(e,n);if(r===sB){const i=Ls({category:"replay.throttled"});this.addUpdate(()=>!Xw(this,{type:gne,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return r}getCurrentRoute(){const e=this.lastTransaction||ts().getTransaction(),r=(e&&xn(e).data||{})[uu];if(!(!e||!r||!["route","custom"].includes(r)))return xn(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=Kne({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){gt&&K.error("[Replay]",e),gt&&this._options._experiments&&this._options._experiments.captureExceptions&&Tv(e)}_initializeSessionForSampling(e){const n=this._options.errorSampleRate>0,r=v0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const e=this.session;return z2(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{wt.document.addEventListener("visibilitychange",this._handleVisibilityChange),wt.addEventListener("blur",this._handleWindowBlur),wt.addEventListener("focus",this._handleWindowFocus),wt.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Qre(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=jne(this)}_removeListeners(){try{wt.document.removeEventListener("visibilitychange",this._handleVisibilityChange),wt.removeEventListener("blur",this._handleWindowBlur),wt.removeEventListener("focus",this._handleWindowFocus),wt.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{wt.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=Ls({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=Ls({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{One(this,e)}}_doChangeToBackgroundTasks(e){!this.session||$2(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){or("[Replay] Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:Ue.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){const e=Bne(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Lv(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:n}=this;if(!e||!n||e.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){gt&&K.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await eie(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await iB({replayId:e,recordingData:s,segmentId:i,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=yt();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){gt&&K.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,i=Date.now()-n;this._debouncedFlush.cancel();const s=i<this._options.minReplayDuration,o=i>this._options.maxReplayDuration+5e3;if(s||o){or(`[Replay] Session duration (${Math.floor(i/1e3)}s) is too ${s?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),s&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&or("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){gt&&K.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Zw(this.session)}__init6(){this._onMutationHandler=e=>{const n=e.length,r=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=r&&n>r;if(n>i||s){const o=Ls({category:"replay.mutations",data:{count:n,limit:s}});this._createCustomBreadcrumb(o)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function Rd(t,e,n,r){const i=typeof r=="string"?r.split(","):[],s=[...t,...i,...e];return typeof n<"u"&&(typeof n=="string"&&s.push(`.${n}`),Xc(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),s.join(",")}function fie({mask:t,unmask:e,block:n,unblock:r,ignore:i,blockClass:s,blockSelector:o,maskTextClass:a,maskTextSelector:c,ignoreClass:l}){const u=['base[href="/"]'],d=Rd(t,[".sentry-mask","[data-sentry-mask]"],a,c),f=Rd(e,[".sentry-unmask","[data-sentry-unmask]"]),h={maskTextSelector:d,unmaskTextSelector:f,blockSelector:Rd(n,[".sentry-block","[data-sentry-block]",...u],s,o),unblockSelector:Rd(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Rd(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return s instanceof RegExp&&(h.blockClass=s),a instanceof RegExp&&(h.maskTextClass=a),h}function hie({el:t,key:e,maskAttributes:n,maskAllText:r,privacyOptions:i,value:s}){return!r||i.unmaskTextSelector&&t.matches(i.unmaskTextSelector)?s:n.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const o_='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',pie=["content-length","content-type","accept"];let a_=!1;class Uv{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=Jee,flushMaxDelay:n=Yee,minReplayDuration:r=rte,maxReplayDuration:i=WT,stickySession:s=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},sessionSampleRate:l,errorSampleRate:u,maskAllText:d=!0,maskAllInputs:f=!0,blockAllMedia:h=!0,mutationBreadcrumbLimit:p=750,mutationLimit:m=1e4,slowClickTimeout:y=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:S=[],networkCaptureBodies:E=!0,networkRequestHeaders:k=[],networkResponseHeaders:b=[],mask:A=[],maskAttributes:_=["title","placeholder"],unmask:P=[],block:N=[],unblock:O=[],ignore:D=[],maskFn:U,beforeAddRecordingEvent:G,beforeErrorSampling:z,blockClass:$,blockSelector:q,maskInputOptions:j,maskTextClass:X,maskTextSelector:re,ignoreClass:Z}={}){this.name=Uv.id;const ie=fie({mask:A,unmask:P,block:N,unblock:O,ignore:D,blockClass:$,blockSelector:q,maskTextClass:X,maskTextSelector:re,ignoreClass:Z});if(this._recordingOptions={maskAllInputs:f,maskAllText:d,maskInputOptions:{...j||{},password:!0},maskTextFn:U,maskInputFn:U,maskAttributeFn:(ke,Ee,ge)=>hie({maskAttributes:_,maskAllText:d,privacyOptions:ie,key:ke,value:Ee,el:ge}),...ie,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ke=>{try{ke.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:n,minReplayDuration:Math.min(r,ite),maxReplayDuration:Math.min(i,WT),stickySession:s,sessionSampleRate:l,errorSampleRate:u,useCompression:o,workerUrl:a,blockAllMedia:h,maskAllInputs:f,maskAllText:d,mutationBreadcrumbLimit:p,mutationLimit:m,slowClickTimeout:y,slowClickIgnoreSelectors:g,networkDetailAllowUrls:v,networkDetailDenyUrls:S,networkCaptureBodies:E,networkRequestHeaders:c_(k),networkResponseHeaders:c_(b),beforeAddRecordingEvent:G,beforeErrorSampling:z,_experiments:c},typeof l=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${l} })`),this._initialOptions.sessionSampleRate=l),typeof u=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${o_}`:o_),this._isInitialized&&hT())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return a_}set _isInitialized(e){a_=e}setupOnce(){hT()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(e)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=gie(this._initialOptions);this._replay=new ma({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const n=yt().getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}Uv.__initStatic();function gie(t){const e=yt(),n=e&&e.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,..._r(t)};return n?(t.sessionSampleRate==null&&t.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&Xc(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(Xc(()=>{console.warn("SDK client is not available.")}),r)}function c_(t){return[...pie,...t.map(e=>e.toLowerCase())]}function mie(t){const e={...t};VL(e,"react"),iee(e)}var oB={exports:{}},at={},Nn=typeof Symbol=="function"&&Symbol.for,Jw=Nn?Symbol.for("react.element"):60103,Yw=Nn?Symbol.for("react.portal"):60106,Vv=Nn?Symbol.for("react.fragment"):60107,Gv=Nn?Symbol.for("react.strict_mode"):60108,Wv=Nn?Symbol.for("react.profiler"):60114,jv=Nn?Symbol.for("react.provider"):60109,Hv=Nn?Symbol.for("react.context"):60110,qw=Nn?Symbol.for("react.async_mode"):60111,$v=Nn?Symbol.for("react.concurrent_mode"):60111,zv=Nn?Symbol.for("react.forward_ref"):60112,Zv=Nn?Symbol.for("react.suspense"):60113,vie=Nn?Symbol.for("react.suspense_list"):60120,Xv=Nn?Symbol.for("react.memo"):60115,Kv=Nn?Symbol.for("react.lazy"):60116,yie=Nn?Symbol.for("react.block"):60121,Cie=Nn?Symbol.for("react.fundamental"):60117,Iie=Nn?Symbol.for("react.responder"):60118,Sie=Nn?Symbol.for("react.scope"):60119;function ri(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Jw:switch(t=t.type,t){case qw:case $v:case Vv:case Wv:case Gv:case Zv:return t;default:switch(t=t&&t.$$typeof,t){case Hv:case zv:case Kv:case Xv:case jv:return t;default:return e}}case Yw:return e}}}function aB(t){return ri(t)===$v}at.AsyncMode=qw;at.ConcurrentMode=$v;at.ContextConsumer=Hv;at.ContextProvider=jv;at.Element=Jw;at.ForwardRef=zv;at.Fragment=Vv;at.Lazy=Kv;at.Memo=Xv;at.Portal=Yw;at.Profiler=Wv;at.StrictMode=Gv;at.Suspense=Zv;at.isAsyncMode=function(t){return aB(t)||ri(t)===qw};at.isConcurrentMode=aB;at.isContextConsumer=function(t){return ri(t)===Hv};at.isContextProvider=function(t){return ri(t)===jv};at.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jw};at.isForwardRef=function(t){return ri(t)===zv};at.isFragment=function(t){return ri(t)===Vv};at.isLazy=function(t){return ri(t)===Kv};at.isMemo=function(t){return ri(t)===Xv};at.isPortal=function(t){return ri(t)===Yw};at.isProfiler=function(t){return ri(t)===Wv};at.isStrictMode=function(t){return ri(t)===Gv};at.isSuspense=function(t){return ri(t)===Zv};at.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Vv||t===$v||t===Wv||t===Gv||t===Zv||t===vie||typeof t=="object"&&t!==null&&(t.$$typeof===Kv||t.$$typeof===Xv||t.$$typeof===jv||t.$$typeof===Hv||t.$$typeof===zv||t.$$typeof===Cie||t.$$typeof===Iie||t.$$typeof===Sie||t.$$typeof===yie)};at.typeOf=ri;oB.exports=at;var bie=oB.exports,cB=bie,wie={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},kie={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lB={};lB[cB.ForwardRef]=wie;lB[cB.Memo]=kie;const Aie=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Eie(t){const e=t.match(/^([^.]+)/);return e!==null&&parseInt(e[0])>=17}const l_={componentStack:null,error:null,eventId:null};function Tie(t,e){const n=new WeakMap;function r(i,s){if(!n.has(i)){if(i.cause)return n.set(i,!0),r(i.cause,s);i.cause=s}}r(t,e)}class Qw extends w.Component{constructor(e){super(e),Qw.prototype.__init.call(this),this.state=l_,this._openFallbackReportDialog=!0;const n=yt();n&&n.on&&e.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&DT({...e.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(e,{componentStack:n}){const{beforeCapture:r,onError:i,showDialog:s,dialogOptions:o}=this.props;kL(a=>{if(Eie(w.version)&&gw(e)){const l=new Error(e.message);l.name=`React ErrorBoundary ${e.name}`,l.stack=n,Tie(e,l)}r&&r(a,e,n);const c=Tv(e,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!1}});i&&i(e,n,c),s&&(this._lastEventId=c,this._openFallbackReportDialog&&DT({...o,eventId:c})),this.setState({error:e,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:e}=this.props;e&&e()}componentWillUnmount(){const{error:e,componentStack:n,eventId:r}=this.state,{onUnmount:i}=this.props;i&&i(e,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:e}=this.props,{error:n,componentStack:r,eventId:i}=this.state;e&&e(n,r,i),this.setState(l_)}}render(){const{fallback:e,children:n}=this.props,r=this.state;if(r.error){let i;return typeof e=="function"?i=e({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):i=e,w.isValidElement(i)?i:(e&&Aie&&K.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}function _ie(){const[t,e]=w.useState(null),[n,r]=w.useState(!1),[i,s]=w.useState([]),o=mt.useRef(null),a=mt.useRef(null),c=mt.useRef(null),l=w.useRef(!1),u=()=>{o.current&&o.current.saveLog()},d=()=>{o.current&&o.current.clearLog()},f=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return w.useEffect(()=>{if(l.current)return;const h=new pH("mongoose.moo.mud.org",8765);h.registerGMCPPackage(eH),h.registerGMCPPackage(J9),h.registerGMCPPackage(Y9),h.registerGMCPPackage(zV),h.registerGMCPPackage(tH),h.registerGMCPPackage(q9),h.registerGMCPPackage(Q9),h.registerGMCPPackage(HV),h.registerMcpPackage(sH),h.registerMcpPackage(oH),h.registerMcpPackage(cH),h.registerMcpPackage(lH),h.connect(),h.requestNotificationPermission(),e(h),r(!f),window.mudClient=h,l.current=!0;const p=y=>{h&&(y.key==="Control"&&h.cancelSpeech(),y.key==="Escape"&&h.stopAllSounds())};window.addEventListener("keydown",p);const m=()=>{var y;(y=a.current)==null||y.focus()};return document.addEventListener("focus",m),()=>{window.removeEventListener("keydown",p),document.removeEventListener("focus",m)}},[f]),w.useEffect(()=>{if(t){const h=m=>{s(m)},p=()=>{s([])};return t.on("userlist",h),t.on("disconnect",p),()=>{t.off("userlist",h),t.off("disconnect",p)}}},[t]),Xx(h=>{t&&t.shutdown()}),t?J.jsx(Qw,{fallback:J.jsx("p",{children:"An error has occurred"}),children:J.jsxs("div",{className:"App",children:[J.jsx("header",{className:"App-header"}),J.jsx(X$,{client:t,onSaveLog:u,onClearLog:d,onToggleUsers:()=>r(!n),onOpenPrefs:()=>{var h;return(h=c.current)==null?void 0:h.open()}}),J.jsxs("div",{children:[J.jsx(RC,{client:t,ref:o}),n&&J.jsx(J$,{users:i}),J.jsx(dJ,{client:t})]}),J.jsx(mH,{onSend:t.sendCommand,inputRef:a}),J.jsx(K$,{client:t}),J.jsx(U$,{ref:c})]})}):null}function Rie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function u_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function d_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?u_(Object(n),!0).forEach(function(r){Rie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xie(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Nie(t,e){if(t==null)return{};var n=xie(t,e),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function Pie(t,e){return Mie(t)||Oie(t,e)||Die(t,e)||Lie()}function Mie(t){if(Array.isArray(t))return t}function Oie(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function Die(t,e){if(t){if(typeof t=="string")return f_(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f_(t,e)}}function f_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Lie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bie(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h_(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function p_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?h_(Object(n),!0).forEach(function(r){Bie(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h_(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fie(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,s){return s(i)},r)}}function Hd(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function Rm(t){return{}.toString.call(t).includes("Object")}function Uie(t){return!Object.keys(t).length}function th(t){return typeof t=="function"}function Vie(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Gie(t,e){return Rm(e)||$a("changeType"),Object.keys(e).some(function(n){return!Vie(t,n)})&&$a("changeField"),e}function Wie(t){th(t)||$a("selectorType")}function jie(t){th(t)||Rm(t)||$a("handlerType"),Rm(t)&&Object.values(t).some(function(e){return!th(e)})&&$a("handlersType")}function Hie(t){t||$a("initialIsRequired"),Rm(t)||$a("initialType"),Uie(t)&&$a("initialContent")}function $ie(t,e){throw new Error(t[e]||t.default)}var zie={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},$a=Hd($ie)(zie),bp={changes:Gie,selector:Wie,handler:jie,initial:Hie};function Zie(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bp.initial(t),bp.handler(e);var n={current:t},r=Hd(Jie)(n,e),i=Hd(Kie)(n),s=Hd(bp.changes)(t),o=Hd(Xie)(n);function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return bp.selector(l),l(n.current)}function c(l){Fie(r,i,s,o)(l)}return[a,c]}function Xie(t,e){return th(e)?e(t.current):e}function Kie(t,e){return t.current=p_(p_({},t.current),e),e}function Jie(t,e,n){return th(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var Yie={create:Zie},qie={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function Qie(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=t.length?t.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function ese(t){return{}.toString.call(t).includes("Object")}function tse(t){return t||g_("configIsRequired"),ese(t)||g_("configType"),t.urls?(nse(),{paths:{vs:t.urls.monacoBase}}):t}function nse(){console.warn(uB.deprecation)}function rse(t,e){throw new Error(t[e]||t.default)}var uB={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},g_=Qie(rse)(uB),ise={config:tse},sse=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(s,o){return o(s)},i)}};function dB(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],dB(t[n],e[n]))}),d_(d_({},t),e)}var ose={type:"cancelation",msg:"operation is manually canceled"};function y0(t){var e=!1,n=new Promise(function(r,i){t.then(function(s){return e?i(ose):r(s)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var ase=Yie.create({config:qie,isInitialized:!1,resolve:null,reject:null,monaco:null}),fB=Pie(ase,2),Ph=fB[0],Jv=fB[1];function cse(t){var e=ise.config(t),n=e.monaco,r=Nie(e,["monaco"]);Jv(function(i){return{config:dB(i.config,r),monaco:n}})}function lse(){var t=Ph(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(Jv({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),y0(C0);if(window.monaco&&window.monaco.editor)return hB(window.monaco),t.resolve(window.monaco),y0(C0);sse(use,fse)(hse)}return y0(C0)}function use(t){return document.body.appendChild(t)}function dse(t){var e=document.createElement("script");return t&&(e.src=t),e}function fse(t){var e=Ph(function(r){var i=r.config,s=r.reject;return{config:i,reject:s}}),n=dse("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function hse(){var t=Ph(function(n){var r=n.config,i=n.resolve,s=n.reject;return{config:r,resolve:i,reject:s}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){hB(n),t.resolve(n)},function(n){t.reject(n)})}function hB(t){Ph().monaco||Jv({monaco:t})}function pse(){return Ph(function(t){var e=t.monaco;return e})}var C0=new Promise(function(t,e){return Jv({resolve:t,reject:e})}),pB={config:cse,init:lse,__getMonacoInstance:pse},gse={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},I0=gse,mse={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},vse=mse;function yse({children:t}){return mt.createElement("div",{style:vse.container},t)}var Cse=yse,Ise=Cse;function Sse({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:s,wrapperProps:o}){return mt.createElement("section",{style:{...I0.wrapper,width:t,height:e},...o},!n&&mt.createElement(Ise,null,r),mt.createElement("div",{ref:i,style:{...I0.fullWidth,...!n&&I0.hide},className:s}))}var bse=Sse,gB=w.memo(bse);function wse(t){w.useEffect(t,[])}var mB=wse;function kse(t,e,n=!0){let r=w.useRef(!0);w.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Zr=kse;function hf(){}function Hl(t,e,n,r){return Ase(t,r)||Ese(t,e,n,r)}function Ase(t,e){return t.editor.getModel(vB(t,e))}function Ese(t,e,n,r){return t.editor.createModel(e,n,r?vB(t,r):void 0)}function vB(t,e){return t.Uri.parse(e)}function Tse({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:c=!1,theme:l="light",loading:u="Loading...",options:d={},height:f="100%",width:h="100%",className:p,wrapperProps:m={},beforeMount:y=hf,onMount:g=hf}){let[v,S]=w.useState(!1),[E,k]=w.useState(!0),b=w.useRef(null),A=w.useRef(null),_=w.useRef(null),P=w.useRef(g),N=w.useRef(y),O=w.useRef(!1);mB(()=>{let z=pB.init();return z.then($=>(A.current=$)&&k(!1)).catch($=>($==null?void 0:$.type)!=="cancelation"&&console.error("Monaco initialization: error:",$)),()=>b.current?G():z.cancel()}),Zr(()=>{if(b.current&&A.current){let z=b.current.getOriginalEditor(),$=Hl(A.current,t||"",r||n||"text",s||"");$!==z.getModel()&&z.setModel($)}},[s],v),Zr(()=>{if(b.current&&A.current){let z=b.current.getModifiedEditor(),$=Hl(A.current,e||"",i||n||"text",o||"");$!==z.getModel()&&z.setModel($)}},[o],v),Zr(()=>{let z=b.current.getModifiedEditor();z.getOption(A.current.editor.EditorOption.readOnly)?z.setValue(e||""):e!==z.getValue()&&(z.executeEdits("",[{range:z.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),z.pushUndoStop())},[e],v),Zr(()=>{var z,$;($=(z=b.current)==null?void 0:z.getModel())==null||$.original.setValue(t||"")},[t],v),Zr(()=>{let{original:z,modified:$}=b.current.getModel();A.current.editor.setModelLanguage(z,r||n||"text"),A.current.editor.setModelLanguage($,i||n||"text")},[n,r,i],v),Zr(()=>{var z;(z=A.current)==null||z.editor.setTheme(l)},[l],v),Zr(()=>{var z;(z=b.current)==null||z.updateOptions(d)},[d],v);let D=w.useCallback(()=>{var q;if(!A.current)return;N.current(A.current);let z=Hl(A.current,t||"",r||n||"text",s||""),$=Hl(A.current,e||"",i||n||"text",o||"");(q=b.current)==null||q.setModel({original:z,modified:$})},[n,e,i,t,r,s,o]),U=w.useCallback(()=>{var z;!O.current&&_.current&&(b.current=A.current.editor.createDiffEditor(_.current,{automaticLayout:!0,...d}),D(),(z=A.current)==null||z.editor.setTheme(l),S(!0),O.current=!0)},[d,l,D]);w.useEffect(()=>{v&&P.current(b.current,A.current)},[v]),w.useEffect(()=>{!E&&!v&&U()},[E,v,U]);function G(){var $,q,j,X;let z=($=b.current)==null?void 0:$.getModel();a||((q=z==null?void 0:z.original)==null||q.dispose()),c||((j=z==null?void 0:z.modified)==null||j.dispose()),(X=b.current)==null||X.dispose()}return mt.createElement(gB,{width:h,height:f,isEditorReady:v,loading:u,_ref:_,className:p,wrapperProps:m})}var _se=Tse;w.memo(_se);function Rse(t){let e=w.useRef();return w.useEffect(()=>{e.current=t},[t]),e.current}var xse=Rse,wp=new Map;function Nse({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:s,theme:o="light",line:a,loading:c="Loading...",options:l={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:f=!1,width:h="100%",height:p="100%",className:m,wrapperProps:y={},beforeMount:g=hf,onMount:v=hf,onChange:S,onValidate:E=hf}){let[k,b]=w.useState(!1),[A,_]=w.useState(!0),P=w.useRef(null),N=w.useRef(null),O=w.useRef(null),D=w.useRef(v),U=w.useRef(g),G=w.useRef(),z=w.useRef(r),$=xse(s),q=w.useRef(!1),j=w.useRef(!1);mB(()=>{let Z=pB.init();return Z.then(ie=>(P.current=ie)&&_(!1)).catch(ie=>(ie==null?void 0:ie.type)!=="cancelation"&&console.error("Monaco initialization: error:",ie)),()=>N.current?re():Z.cancel()}),Zr(()=>{var ie,ke,Ee,ge;let Z=Hl(P.current,t||r||"",e||i||"",s||n||"");Z!==((ie=N.current)==null?void 0:ie.getModel())&&(d&&wp.set($,(ke=N.current)==null?void 0:ke.saveViewState()),(Ee=N.current)==null||Ee.setModel(Z),d&&((ge=N.current)==null||ge.restoreViewState(wp.get(s))))},[s],k),Zr(()=>{var Z;(Z=N.current)==null||Z.updateOptions(l)},[l],k),Zr(()=>{!N.current||r===void 0||(N.current.getOption(P.current.editor.EditorOption.readOnly)?N.current.setValue(r):r!==N.current.getValue()&&(j.current=!0,N.current.executeEdits("",[{range:N.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),N.current.pushUndoStop(),j.current=!1))},[r],k),Zr(()=>{var ie,ke;let Z=(ie=N.current)==null?void 0:ie.getModel();Z&&i&&((ke=P.current)==null||ke.editor.setModelLanguage(Z,i))},[i],k),Zr(()=>{var Z;a!==void 0&&((Z=N.current)==null||Z.revealLine(a))},[a],k),Zr(()=>{var Z;(Z=P.current)==null||Z.editor.setTheme(o)},[o],k);let X=w.useCallback(()=>{var Z;if(!(!O.current||!P.current)&&!q.current){U.current(P.current);let ie=s||n,ke=Hl(P.current,r||t||"",e||i||"",ie||"");N.current=(Z=P.current)==null?void 0:Z.editor.create(O.current,{model:ke,automaticLayout:!0,...l},u),d&&N.current.restoreViewState(wp.get(ie)),P.current.editor.setTheme(o),a!==void 0&&N.current.revealLine(a),b(!0),q.current=!0}},[t,e,n,r,i,s,l,u,d,o,a]);w.useEffect(()=>{k&&D.current(N.current,P.current)},[k]),w.useEffect(()=>{!A&&!k&&X()},[A,k,X]),z.current=r,w.useEffect(()=>{var Z,ie;k&&S&&((Z=G.current)==null||Z.dispose(),G.current=(ie=N.current)==null?void 0:ie.onDidChangeModelContent(ke=>{j.current||S(N.current.getValue(),ke)}))},[k,S]),w.useEffect(()=>{if(k){let Z=P.current.editor.onDidChangeMarkers(ie=>{var Ee;let ke=(Ee=N.current.getModel())==null?void 0:Ee.uri;if(ke&&ie.find(ge=>ge.path===ke.path)){let ge=P.current.editor.getModelMarkers({resource:ke});E==null||E(ge)}});return()=>{Z==null||Z.dispose()}}return()=>{}},[k,E]);function re(){var Z,ie;(Z=G.current)==null||Z.dispose(),f?d&&wp.set(s,N.current.saveViewState()):(ie=N.current.getModel())==null||ie.dispose(),N.current.dispose()}return mt.createElement(gB,{width:h,height:p,isEditorReady:k,loading:c,_ref:O,className:m,wrapperProps:y})}var Pse=Nse,Mse=w.memo(Pse),Ose=Mse,Dse={restoreOnUnmount:!1};function Lse(t,e){e===void 0&&(e=Dse);var n=w.useRef(document.title);document.title!==t&&(document.title=t),w.useEffect(function(){if(e&&e.restoreOnUnmount)return function(){document.title=n.current}},[])}const Bse=typeof document<"u"?Lse:function(t){};function Fse({onSave:t,onRevert:e,onDownload:n}){return J.jsx("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderBottom:"1px solid #e8e8e8"},children:J.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[J.jsxs("button",{onClick:t,accessKey:"s",children:[J.jsx(RM,{}),"Save"]}),J.jsxs("button",{onClick:e,accessKey:"r",children:[J.jsx($$,{}),"Revert"]}),J.jsxs("button",{onClick:n,accessKey:"d",children:[J.jsx(j$,{}),"Download"]})]})})}const Use=({docstate:t,session:e})=>J.jsxs("div",{"aria-live":"polite",className:"statusbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderTop:"1px solid #e8e8e8"},children:[J.jsx("span",{children:t}),J.jsx("span",{children:"|"}),J.jsx("span",{children:e.reference}),J.jsx("span",{children:"|"}),J.jsx("span",{children:e.type})]});function Vse(){const t=Zx(),e=mt.useRef(null),[n,r]=w.useState(""),[i,s]=w.useState(""),[o,a]=w.useState(""),[c,l]=w.useState(0),[u,d]=w.useState({name:"none",contents:[],reference:"",type:""}),f=(U,G)=>{e.current=U},[h,p]=ic();console.log(h);const m=h.editor.accessibilityMode,y=h.editor.autocompleteEnabled;Xx(U=>{k.postMessage({type:"close",id:A}),c===1&&U.preventDefault()});const[g,v]=w.useState(!1),S=g?`${u.name} - Mongoose Editor`:"Mongoose Editor";Bse(S);const E=w.useMemo(()=>{switch(c){case 0:return"Unchanged";case 1:return"Changed";case 2:return"Saved"}},[c]),k=w.useMemo(()=>new BroadcastChannel("editor"),[]),b=new URLSearchParams(t.search),A=decodeURIComponent(b.get("reference")||"");w.useEffect(()=>{if(!A)return;console.log("ID: "+A),console.log("Sending ready message"),k.postMessage({type:"ready",id:A});const U=G=>{if(console.log(G.data),G.data.type==="load"){if(n!=="")return;const z=G.data.session.contents.join(`
`);s(z),a(z),d(G.data.session),l(0),r(G.data.clientId),setTimeout(D,100)}else if(G.data.type==="shutdown"){if(G.data.clientId!==n)return;k.close(),window.close()}};return k.addEventListener("message",U),()=>k.removeEventListener("message",U)},[k,n,A]);const _=()=>{s(o),l(0)},P=U=>{const G=i.split(/\r\n|\r|\n/),z={...u,contents:G};k.postMessage({type:"save",session:z,id:A}),l(2),D(),U.preventDefault()},N=U=>{U!==void 0&&(console.log("Original: "+o),console.log("New: "+U),s(U),U.split(/\r\n|\r|\n/).join(`
`)!==o?l(1):l(0),g||v(!0))},O=()=>{const U=new Blob([i],{type:"text/plain"}),G=URL.createObjectURL(U),z=document.createElement("a"),$=new Date,q=$.toLocaleDateString().replace(/\//g,"-"),j=$.toLocaleTimeString().replace(/:/g,"-"),X=`${u.name}-${q}-${j}.txt`;z.download=X,z.href=G,z.click(),URL.revokeObjectURL(G),z.remove()};return J.jsxs("div",{id:"editor",children:[J.jsx(Fse,{onSave:P,onRevert:_,onDownload:O}),J.jsx(Ose,{height:"80vh",defaultLanguage:"lambdamoo",value:i,onChange:N,options:{wordWrap:"on",accessibilitySupport:m?"on":"off",quickSuggestions:y},onMount:f,path:u.reference}),J.jsx(Use,{docstate:E,session:u})]});function D(){e.current!==null&&e.current.focus()}}const Gse="modulepreload",Wse=function(t){return"/"+t},m_={},jse=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=Wse(o),o in m_)return;m_[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":Gse,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Hse=t=>{t&&t instanceof Function&&jse(()=>import("./web-vitals-BptxjviT.js"),__vite__mapDeps([])).then(({getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:s})=>{e(t),n(t),r(t),i(t),s(t)})};var v_={};const $se=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function zse(t){if("serviceWorker"in navigator){if(new URL(v_.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${v_.PUBLIC_URL}/service-worker.js`;$se?(Zse(n,t),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):yB(n,t)})}}function yB(t,e){navigator.serviceWorker.register(t).then(n=>{n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function Zse(t,e){fetch(t).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):yB(t,e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}mie({dsn:"https://2356c3ef12dad1afcb30defd749d96f1@new.q-continuum.net/2",integrations:[new zee({tracePropagationTargets:["localhost",/^https:\/\/client\.rustytelephone\.net\//]}),new Uv],tracesSampleRate:1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});const Xse=iU([{path:"/",element:J.jsx(_ie,{})},{path:"/editor",element:J.jsx(Vse,{})}]),Kse=S0.createRoot(document.getElementById("root"));Kse.render(J.jsx(mt.StrictMode,{children:J.jsx(hU,{router:Xse})}));Hse(console.log);zse();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
