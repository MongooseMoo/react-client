var p3=Object.defineProperty;var Hx=t=>{throw TypeError(t)};var g3=(t,e,n)=>e in t?p3(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>g3(t,typeof e!="symbol"?e+"":e,n),Qp=(t,e,n)=>e.has(t)||Hx("Cannot "+n);var O=(t,e,n)=>(Qp(t,e,"read from private field"),n?n.call(t):e.get(t)),at=(t,e,n)=>e.has(t)?Hx("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Be=(t,e,n,r)=>(Qp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ee=(t,e,n)=>(Qp(t,e,"access private method"),n);var Pf=(t,e,n,r)=>({set _(i){Be(t,e,i,n)},get _(){return O(t,e,r)}});function ck(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ql(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function m3(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var lk={exports:{}},ap={},uk={exports:{}},Je={},ff=Symbol.for("react.element"),v3=Symbol.for("react.portal"),C3=Symbol.for("react.fragment"),y3=Symbol.for("react.strict_mode"),x3=Symbol.for("react.profiler"),I3=Symbol.for("react.provider"),b3=Symbol.for("react.context"),A3=Symbol.for("react.forward_ref"),w3=Symbol.for("react.suspense"),S3=Symbol.for("react.memo"),k3=Symbol.for("react.lazy"),Zx=Symbol.iterator;function E3(t){return t===null||typeof t!="object"?null:(t=Zx&&t[Zx]||t["@@iterator"],typeof t=="function"?t:null)}var dk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},fk=Object.assign,hk={};function eu(t,e,n){this.props=t,this.context=e,this.refs=hk,this.updater=n||dk}eu.prototype.isReactComponent={};eu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function pk(){}pk.prototype=eu.prototype;function my(t,e,n){this.props=t,this.context=e,this.refs=hk,this.updater=n||dk}var vy=my.prototype=new pk;vy.constructor=my;fk(vy,eu.prototype);vy.isPureReactComponent=!0;var $x=Array.isArray,gk=Object.prototype.hasOwnProperty,Cy={current:null},mk={key:!0,ref:!0,__self:!0,__source:!0};function vk(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)gk.call(e,r)&&!mk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:ff,type:t,key:o,ref:s,props:i,_owner:Cy.current}}function T3(t,e){return{$$typeof:ff,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yy(t){return typeof t=="object"&&t!==null&&t.$$typeof===ff}function R3(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xx=/\/+/g;function eg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?R3(""+t.key):e.toString(36)}function hh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case ff:case v3:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+eg(s,0):r,$x(i)?(n="",t!=null&&(n=t.replace(Xx,"$&/")+"/"),hh(i,e,n,"",function(l){return l})):i!=null&&(yy(i)&&(i=T3(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Xx,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",$x(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+eg(o,a);s+=hh(o,e,n,c,i)}else if(c=E3(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+eg(o,a++),s+=hh(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Nf(t,e,n){if(t==null)return t;var r=[],i=0;return hh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function _3(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var hr={current:null},ph={transition:null},D3={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:ph,ReactCurrentOwner:Cy};function Ck(){throw Error("act(...) is not supported in production builds of React.")}Je.Children={map:Nf,forEach:function(t,e,n){Nf(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Nf(t,function(){e++}),e},toArray:function(t){return Nf(t,function(e){return e})||[]},only:function(t){if(!yy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Je.Component=eu;Je.Fragment=C3;Je.Profiler=x3;Je.PureComponent=my;Je.StrictMode=y3;Je.Suspense=w3;Je.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=D3;Je.act=Ck;Je.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=fk({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Cy.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)gk.call(e,c)&&!mk.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:ff,type:t.type,key:i,ref:o,props:r,_owner:s}};Je.createContext=function(t){return t={$$typeof:b3,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:I3,_context:t},t.Consumer=t};Je.createElement=vk;Je.createFactory=function(t){var e=vk.bind(null,t);return e.type=t,e};Je.createRef=function(){return{current:null}};Je.forwardRef=function(t){return{$$typeof:A3,render:t}};Je.isValidElement=yy;Je.lazy=function(t){return{$$typeof:k3,_payload:{_status:-1,_result:t},_init:_3}};Je.memo=function(t,e){return{$$typeof:S3,type:t,compare:e===void 0?null:e}};Je.startTransition=function(t){var e=ph.transition;ph.transition={};try{t()}finally{ph.transition=e}};Je.unstable_act=Ck;Je.useCallback=function(t,e){return hr.current.useCallback(t,e)};Je.useContext=function(t){return hr.current.useContext(t)};Je.useDebugValue=function(){};Je.useDeferredValue=function(t){return hr.current.useDeferredValue(t)};Je.useEffect=function(t,e){return hr.current.useEffect(t,e)};Je.useId=function(){return hr.current.useId()};Je.useImperativeHandle=function(t,e,n){return hr.current.useImperativeHandle(t,e,n)};Je.useInsertionEffect=function(t,e){return hr.current.useInsertionEffect(t,e)};Je.useLayoutEffect=function(t,e){return hr.current.useLayoutEffect(t,e)};Je.useMemo=function(t,e){return hr.current.useMemo(t,e)};Je.useReducer=function(t,e,n){return hr.current.useReducer(t,e,n)};Je.useRef=function(t){return hr.current.useRef(t)};Je.useState=function(t){return hr.current.useState(t)};Je.useSyncExternalStore=function(t,e,n){return hr.current.useSyncExternalStore(t,e,n)};Je.useTransition=function(){return hr.current.useTransition()};Je.version="18.3.1";uk.exports=Je;var S=uk.exports;const gt=Ql(S),P3=ck({__proto__:null,default:gt},[S]);var N3=S,B3=Symbol.for("react.element"),F3=Symbol.for("react.fragment"),O3=Object.prototype.hasOwnProperty,M3=N3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,L3={key:!0,ref:!0,__self:!0,__source:!0};function yk(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)O3.call(e,r)&&!L3.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:B3,type:t,key:o,ref:s,props:i,_owner:M3.current}}ap.Fragment=F3;ap.jsx=yk;ap.jsxs=yk;lk.exports=ap;var Y=lk.exports,Jm={},xk={exports:{}},ei={},Ik={exports:{}},bk={};(function(t){function e($,q){var ne=$.length;$.push(q);e:for(;0<ne;){var F=ne-1>>>1,z=$[F];if(0<i(z,q))$[F]=q,$[ne]=z,ne=F;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],ne=$.pop();if(ne!==q){$[0]=ne;e:for(var F=0,z=$.length,K=z>>>1;F<K;){var ee=2*(F+1)-1,ae=$[ee],ge=ee+1,Fe=$[ge];if(0>i(ae,ne))ge<z&&0>i(Fe,ae)?($[F]=Fe,$[ge]=ne,F=ge):($[F]=ae,$[ee]=ne,F=ee);else if(ge<z&&0>i(Fe,ne))$[F]=Fe,$[ge]=ne,F=ge;else break e}}return q}function i($,q){var ne=$.sortIndex-q.sortIndex;return ne!==0?ne:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],l=[],u=1,d=null,f=3,h=!1,p=!1,g=!1,C=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var q=n(l);q!==null;){if(q.callback===null)r(l);else if(q.startTime<=$)r(l),q.sortIndex=q.expirationTime,e(c,q);else break;q=n(l)}}function I($){if(g=!1,y($),!p)if(n(c)!==null)p=!0,Q(b);else{var q=n(l);q!==null&&te(I,q.startTime-$)}}function b($,q){p=!1,g&&(g=!1,v(k),k=-1),h=!0;var ne=f;try{for(y(q),d=n(c);d!==null&&(!(d.expirationTime>q)||$&&!R());){var F=d.callback;if(typeof F=="function"){d.callback=null,f=d.priorityLevel;var z=F(d.expirationTime<=q);q=t.unstable_now(),typeof z=="function"?d.callback=z:d===n(c)&&r(c),y(q)}else r(c);d=n(c)}if(d!==null)var K=!0;else{var ee=n(l);ee!==null&&te(I,ee.startTime-q),K=!1}return K}finally{d=null,f=ne,h=!1}}var A=!1,E=null,k=-1,D=5,T=-1;function R(){return!(t.unstable_now()-T<D)}function P(){if(E!==null){var $=t.unstable_now();T=$;var q=!0;try{q=E(!0,$)}finally{q?M():(A=!1,E=null)}}else A=!1}var M;if(typeof m=="function")M=function(){m(P)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,j=G.port2;G.port1.onmessage=P,M=function(){j.postMessage(null)}}else M=function(){C(P,0)};function Q($){E=$,A||(A=!0,M())}function te($,q){k=C(function(){$(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,Q(b))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var ne=f;f=q;try{return $()}finally{f=ne}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ne=f;f=$;try{return q()}finally{f=ne}},t.unstable_scheduleCallback=function($,q,ne){var F=t.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?F+ne:F):ne=F,$){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ne+z,$={id:u++,callback:q,priorityLevel:$,startTime:ne,expirationTime:z,sortIndex:-1},ne>F?($.sortIndex=ne,e(l,$),n(c)===null&&$===n(l)&&(g?(v(k),k=-1):g=!0,te(I,ne-F))):($.sortIndex=z,e(c,$),p||h||(p=!0,Q(b))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var q=f;return function(){var ne=f;f=q;try{return $.apply(this,arguments)}finally{f=ne}}}})(bk);Ik.exports=bk;var U3=Ik.exports,V3=S,Yr=U3;function fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ak=new Set,kd={};function Nc(t,e){Fl(t,e),Fl(t+"Capture",e)}function Fl(t,e){for(kd[t]=e,t=0;t<e.length;t++)Ak.add(e[t])}var _s=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ym=Object.prototype.hasOwnProperty,G3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Kx={},Jx={};function W3(t){return Ym.call(Jx,t)?!0:Ym.call(Kx,t)?!1:G3.test(t)?Jx[t]=!0:(Kx[t]=!0,!1)}function z3(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function j3(t,e,n,r){if(e===null||typeof e>"u"||z3(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Un[t]=new pr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Un[e]=new pr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Un[t]=new pr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Un[t]=new pr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Un[t]=new pr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Un[t]=new pr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Un[t]=new pr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Un[t]=new pr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Un[t]=new pr(t,5,!1,t.toLowerCase(),null,!1,!1)});var xy=/[\-:]([a-z])/g;function Iy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(xy,Iy);Un[e]=new pr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(xy,Iy);Un[e]=new pr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(xy,Iy);Un[e]=new pr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Un[t]=new pr(t,1,!1,t.toLowerCase(),null,!1,!1)});Un.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Un[t]=new pr(t,1,!1,t.toLowerCase(),null,!0,!0)});function by(t,e,n,r){var i=Un.hasOwnProperty(e)?Un[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(j3(e,n,i,r)&&(n=null),r||i===null?W3(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ls=V3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bf=Symbol.for("react.element"),tl=Symbol.for("react.portal"),nl=Symbol.for("react.fragment"),Ay=Symbol.for("react.strict_mode"),qm=Symbol.for("react.profiler"),wk=Symbol.for("react.provider"),Sk=Symbol.for("react.context"),wy=Symbol.for("react.forward_ref"),Qm=Symbol.for("react.suspense"),ev=Symbol.for("react.suspense_list"),Sy=Symbol.for("react.memo"),na=Symbol.for("react.lazy"),kk=Symbol.for("react.offscreen"),Yx=Symbol.iterator;function Iu(t){return t===null||typeof t!="object"?null:(t=Yx&&t[Yx]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,tg;function Zu(t){if(tg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);tg=e&&e[1]||""}return`
`+tg+t}var ng=!1;function rg(t,e){if(!t||ng)return"";ng=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{ng=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zu(t):""}function H3(t){switch(t.tag){case 5:return Zu(t.type);case 16:return Zu("Lazy");case 13:return Zu("Suspense");case 19:return Zu("SuspenseList");case 0:case 2:case 15:return t=rg(t.type,!1),t;case 11:return t=rg(t.type.render,!1),t;case 1:return t=rg(t.type,!0),t;default:return""}}function tv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nl:return"Fragment";case tl:return"Portal";case qm:return"Profiler";case Ay:return"StrictMode";case Qm:return"Suspense";case ev:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sk:return(t.displayName||"Context")+".Consumer";case wk:return(t._context.displayName||"Context")+".Provider";case wy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sy:return e=t.displayName||null,e!==null?e:tv(t.type)||"Memo";case na:e=t._payload,t=t._init;try{return tv(t(e))}catch{}}return null}function Z3(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return tv(e);case 8:return e===Ay?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ra(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Ek(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $3(t){var e=Ek(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ff(t){t._valueTracker||(t._valueTracker=$3(t))}function Tk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Ek(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function nv(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function qx(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ra(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Rk(t,e){e=e.checked,e!=null&&by(t,"checked",e,!1)}function rv(t,e){Rk(t,e);var n=Ra(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?iv(t,e.type,n):e.hasOwnProperty("defaultValue")&&iv(t,e.type,Ra(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qx(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function iv(t,e,n){(e!=="number"||qh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var $u=Array.isArray;function ml(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ra(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ov(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(fe(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function eI(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(fe(92));if($u(n)){if(1<n.length)throw Error(fe(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ra(n)}}function _k(t,e){var n=Ra(e.value),r=Ra(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function tI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Dk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Dk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Of,Pk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Of=Of||document.createElement("div"),Of.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Of.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ed(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ad={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},X3=["Webkit","ms","Moz","O"];Object.keys(ad).forEach(function(t){X3.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ad[e]=ad[t]})});function Nk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ad.hasOwnProperty(t)&&ad[t]?(""+e).trim():e+"px"}function Bk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Nk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var K3=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function av(t,e){if(e){if(K3[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(fe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(fe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(fe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(fe(62))}}function cv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lv=null;function ky(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uv=null,vl=null,Cl=null;function nI(t){if(t=gf(t)){if(typeof uv!="function")throw Error(fe(280));var e=t.stateNode;e&&(e=fp(e),uv(t.stateNode,t.type,e))}}function Fk(t){vl?Cl?Cl.push(t):Cl=[t]:vl=t}function Ok(){if(vl){var t=vl,e=Cl;if(Cl=vl=null,nI(t),e)for(t=0;t<e.length;t++)nI(e[t])}}function Mk(t,e){return t(e)}function Lk(){}var ig=!1;function Uk(t,e,n){if(ig)return t(e,n);ig=!0;try{return Mk(t,e,n)}finally{ig=!1,(vl!==null||Cl!==null)&&(Lk(),Ok())}}function Td(t,e){var n=t.stateNode;if(n===null)return null;var r=fp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(fe(231,e,typeof n));return n}var dv=!1;if(_s)try{var bu={};Object.defineProperty(bu,"passive",{get:function(){dv=!0}}),window.addEventListener("test",bu,bu),window.removeEventListener("test",bu,bu)}catch{dv=!1}function J3(t,e,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var cd=!1,Qh=null,e0=!1,fv=null,Y3={onError:function(t){cd=!0,Qh=t}};function q3(t,e,n,r,i,o,s,a,c){cd=!1,Qh=null,J3.apply(Y3,arguments)}function Q3(t,e,n,r,i,o,s,a,c){if(q3.apply(this,arguments),cd){if(cd){var l=Qh;cd=!1,Qh=null}else throw Error(fe(198));e0||(e0=!0,fv=l)}}function Bc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Vk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function rI(t){if(Bc(t)!==t)throw Error(fe(188))}function eN(t){var e=t.alternate;if(!e){if(e=Bc(t),e===null)throw Error(fe(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return rI(i),t;if(o===r)return rI(i),e;o=o.sibling}throw Error(fe(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(fe(189))}}if(n.alternate!==r)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?t:e}function Gk(t){return t=eN(t),t!==null?Wk(t):null}function Wk(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Wk(t);if(e!==null)return e;t=t.sibling}return null}var zk=Yr.unstable_scheduleCallback,iI=Yr.unstable_cancelCallback,tN=Yr.unstable_shouldYield,nN=Yr.unstable_requestPaint,sn=Yr.unstable_now,rN=Yr.unstable_getCurrentPriorityLevel,Ey=Yr.unstable_ImmediatePriority,jk=Yr.unstable_UserBlockingPriority,t0=Yr.unstable_NormalPriority,iN=Yr.unstable_LowPriority,Hk=Yr.unstable_IdlePriority,cp=null,No=null;function oN(t){if(No&&typeof No.onCommitFiberRoot=="function")try{No.onCommitFiberRoot(cp,t,void 0,(t.current.flags&128)===128)}catch{}}var ji=Math.clz32?Math.clz32:cN,sN=Math.log,aN=Math.LN2;function cN(t){return t>>>=0,t===0?32:31-(sN(t)/aN|0)|0}var Mf=64,Lf=4194304;function Xu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function n0(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Xu(a):(o&=s,o!==0&&(r=Xu(o)))}else s=n&~i,s!==0?r=Xu(s):o!==0&&(r=Xu(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ji(e),i=1<<n,r|=t[n],e&=~i;return r}function lN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-ji(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=lN(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function hv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zk(){var t=Mf;return Mf<<=1,!(Mf&4194240)&&(Mf=64),t}function og(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ji(e),t[e]=n}function dN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ji(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Ty(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ji(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var yt=0;function $k(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Xk,Ry,Kk,Jk,Yk,pv=!1,Uf=[],ya=null,xa=null,Ia=null,Rd=new Map,_d=new Map,oa=[],fN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function oI(t,e){switch(t){case"focusin":case"focusout":ya=null;break;case"dragenter":case"dragleave":xa=null;break;case"mouseover":case"mouseout":Ia=null;break;case"pointerover":case"pointerout":Rd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_d.delete(e.pointerId)}}function Au(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=gf(e),e!==null&&Ry(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function hN(t,e,n,r,i){switch(e){case"focusin":return ya=Au(ya,t,e,n,r,i),!0;case"dragenter":return xa=Au(xa,t,e,n,r,i),!0;case"mouseover":return Ia=Au(Ia,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Rd.set(o,Au(Rd.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,_d.set(o,Au(_d.get(o)||null,t,e,n,r,i)),!0}return!1}function qk(t){var e=rc(t.target);if(e!==null){var n=Bc(e);if(n!==null){if(e=n.tag,e===13){if(e=Vk(n),e!==null){t.blockedOn=e,Yk(t.priority,function(){Kk(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=gv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lv=r,n.target.dispatchEvent(r),lv=null}else return e=gf(n),e!==null&&Ry(e),t.blockedOn=n,!1;e.shift()}return!0}function sI(t,e,n){gh(t)&&n.delete(e)}function pN(){pv=!1,ya!==null&&gh(ya)&&(ya=null),xa!==null&&gh(xa)&&(xa=null),Ia!==null&&gh(Ia)&&(Ia=null),Rd.forEach(sI),_d.forEach(sI)}function wu(t,e){t.blockedOn===e&&(t.blockedOn=null,pv||(pv=!0,Yr.unstable_scheduleCallback(Yr.unstable_NormalPriority,pN)))}function Dd(t){function e(i){return wu(i,t)}if(0<Uf.length){wu(Uf[0],t);for(var n=1;n<Uf.length;n++){var r=Uf[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ya!==null&&wu(ya,t),xa!==null&&wu(xa,t),Ia!==null&&wu(Ia,t),Rd.forEach(e),_d.forEach(e),n=0;n<oa.length;n++)r=oa[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<oa.length&&(n=oa[0],n.blockedOn===null);)qk(n),n.blockedOn===null&&oa.shift()}var yl=Ls.ReactCurrentBatchConfig,r0=!0;function gN(t,e,n,r){var i=yt,o=yl.transition;yl.transition=null;try{yt=1,_y(t,e,n,r)}finally{yt=i,yl.transition=o}}function mN(t,e,n,r){var i=yt,o=yl.transition;yl.transition=null;try{yt=4,_y(t,e,n,r)}finally{yt=i,yl.transition=o}}function _y(t,e,n,r){if(r0){var i=gv(t,e,n,r);if(i===null)gg(t,e,r,i0,n),oI(t,r);else if(hN(i,t,e,n,r))r.stopPropagation();else if(oI(t,r),e&4&&-1<fN.indexOf(t)){for(;i!==null;){var o=gf(i);if(o!==null&&Xk(o),o=gv(t,e,n,r),o===null&&gg(t,e,r,i0,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else gg(t,e,r,null,n)}}var i0=null;function gv(t,e,n,r){if(i0=null,t=ky(r),t=rc(t),t!==null)if(e=Bc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Vk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return i0=t,null}function Qk(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rN()){case Ey:return 1;case jk:return 4;case t0:case iN:return 16;case Hk:return 536870912;default:return 16}default:return 16}}var ca=null,Dy=null,mh=null;function eE(){if(mh)return mh;var t,e=Dy,n=e.length,r,i="value"in ca?ca.value:ca.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return mh=i.slice(t,1<r?1-r:void 0)}function vh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Vf(){return!0}function aI(){return!1}function ti(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Vf:aI,this.isPropagationStopped=aI,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vf)},persist:function(){},isPersistent:Vf}),e}var tu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Py=ti(tu),pf=Jt({},tu,{view:0,detail:0}),vN=ti(pf),sg,ag,Su,lp=Jt({},pf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ny,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Su&&(Su&&t.type==="mousemove"?(sg=t.screenX-Su.screenX,ag=t.screenY-Su.screenY):ag=sg=0,Su=t),sg)},movementY:function(t){return"movementY"in t?t.movementY:ag}}),cI=ti(lp),CN=Jt({},lp,{dataTransfer:0}),yN=ti(CN),xN=Jt({},pf,{relatedTarget:0}),cg=ti(xN),IN=Jt({},tu,{animationName:0,elapsedTime:0,pseudoElement:0}),bN=ti(IN),AN=Jt({},tu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),wN=ti(AN),SN=Jt({},tu,{data:0}),lI=ti(SN),kN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},TN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=TN[t])?!!e[t]:!1}function Ny(){return RN}var _N=Jt({},pf,{key:function(t){if(t.key){var e=kN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?EN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ny,charCode:function(t){return t.type==="keypress"?vh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),DN=ti(_N),PN=Jt({},lp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uI=ti(PN),NN=Jt({},pf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ny}),BN=ti(NN),FN=Jt({},tu,{propertyName:0,elapsedTime:0,pseudoElement:0}),ON=ti(FN),MN=Jt({},lp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),LN=ti(MN),UN=[9,13,27,32],By=_s&&"CompositionEvent"in window,ld=null;_s&&"documentMode"in document&&(ld=document.documentMode);var VN=_s&&"TextEvent"in window&&!ld,tE=_s&&(!By||ld&&8<ld&&11>=ld),dI=" ",fI=!1;function nE(t,e){switch(t){case"keyup":return UN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var rl=!1;function GN(t,e){switch(t){case"compositionend":return rE(e);case"keypress":return e.which!==32?null:(fI=!0,dI);case"textInput":return t=e.data,t===dI&&fI?null:t;default:return null}}function WN(t,e){if(rl)return t==="compositionend"||!By&&nE(t,e)?(t=eE(),mh=Dy=ca=null,rl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return tE&&e.locale!=="ko"?null:e.data;default:return null}}var zN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zN[t.type]:e==="textarea"}function iE(t,e,n,r){Fk(r),e=o0(e,"onChange"),0<e.length&&(n=new Py("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ud=null,Pd=null;function jN(t){gE(t,0)}function up(t){var e=sl(t);if(Tk(e))return t}function HN(t,e){if(t==="change")return e}var oE=!1;if(_s){var lg;if(_s){var ug="oninput"in document;if(!ug){var pI=document.createElement("div");pI.setAttribute("oninput","return;"),ug=typeof pI.oninput=="function"}lg=ug}else lg=!1;oE=lg&&(!document.documentMode||9<document.documentMode)}function gI(){ud&&(ud.detachEvent("onpropertychange",sE),Pd=ud=null)}function sE(t){if(t.propertyName==="value"&&up(Pd)){var e=[];iE(e,Pd,t,ky(t)),Uk(jN,e)}}function ZN(t,e,n){t==="focusin"?(gI(),ud=e,Pd=n,ud.attachEvent("onpropertychange",sE)):t==="focusout"&&gI()}function $N(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return up(Pd)}function XN(t,e){if(t==="click")return up(e)}function KN(t,e){if(t==="input"||t==="change")return up(e)}function JN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $i=typeof Object.is=="function"?Object.is:JN;function Nd(t,e){if($i(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ym.call(e,i)||!$i(t[i],e[i]))return!1}return!0}function mI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vI(t,e){var n=mI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mI(n)}}function aE(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?aE(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cE(){for(var t=window,e=qh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qh(t.document)}return e}function Fy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function YN(t){var e=cE(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&aE(n.ownerDocument.documentElement,n)){if(r!==null&&Fy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=vI(n,o);var s=vI(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var qN=_s&&"documentMode"in document&&11>=document.documentMode,il=null,mv=null,dd=null,vv=!1;function CI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vv||il==null||il!==qh(r)||(r=il,"selectionStart"in r&&Fy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),dd&&Nd(dd,r)||(dd=r,r=o0(mv,"onSelect"),0<r.length&&(e=new Py("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=il)))}function Gf(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ol={animationend:Gf("Animation","AnimationEnd"),animationiteration:Gf("Animation","AnimationIteration"),animationstart:Gf("Animation","AnimationStart"),transitionend:Gf("Transition","TransitionEnd")},dg={},lE={};_s&&(lE=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function dp(t){if(dg[t])return dg[t];if(!ol[t])return t;var e=ol[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in lE)return dg[t]=e[n];return t}var uE=dp("animationend"),dE=dp("animationiteration"),fE=dp("animationstart"),hE=dp("transitionend"),pE=new Map,yI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(t,e){pE.set(t,e),Nc(e,[t])}for(var fg=0;fg<yI.length;fg++){var hg=yI[fg],QN=hg.toLowerCase(),eB=hg[0].toUpperCase()+hg.slice(1);Ba(QN,"on"+eB)}Ba(uE,"onAnimationEnd");Ba(dE,"onAnimationIteration");Ba(fE,"onAnimationStart");Ba("dblclick","onDoubleClick");Ba("focusin","onFocus");Ba("focusout","onBlur");Ba(hE,"onTransitionEnd");Fl("onMouseEnter",["mouseout","mouseover"]);Fl("onMouseLeave",["mouseout","mouseover"]);Fl("onPointerEnter",["pointerout","pointerover"]);Fl("onPointerLeave",["pointerout","pointerover"]);Nc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tB=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ku));function xI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Q3(r,e,void 0,t),t.currentTarget=null}function gE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;xI(i,a,l),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;xI(i,a,l),o=c}}}if(e0)throw t=fv,e0=!1,fv=null,t}function Bt(t,e){var n=e[bv];n===void 0&&(n=e[bv]=new Set);var r=t+"__bubble";n.has(r)||(mE(e,t,2,!1),n.add(r))}function pg(t,e,n){var r=0;e&&(r|=4),mE(n,t,r,e)}var Wf="_reactListening"+Math.random().toString(36).slice(2);function Bd(t){if(!t[Wf]){t[Wf]=!0,Ak.forEach(function(n){n!=="selectionchange"&&(tB.has(n)||pg(n,!1,t),pg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wf]||(e[Wf]=!0,pg("selectionchange",!1,e))}}function mE(t,e,n,r){switch(Qk(e)){case 1:var i=gN;break;case 4:i=mN;break;default:i=_y}n=i.bind(null,e,n,t),i=void 0,!dv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function gg(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=rc(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}Uk(function(){var l=o,u=ky(n),d=[];e:{var f=pE.get(t);if(f!==void 0){var h=Py,p=t;switch(t){case"keypress":if(vh(n)===0)break e;case"keydown":case"keyup":h=DN;break;case"focusin":p="focus",h=cg;break;case"focusout":p="blur",h=cg;break;case"beforeblur":case"afterblur":h=cg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=cI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=yN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=BN;break;case uE:case dE:case fE:h=bN;break;case hE:h=ON;break;case"scroll":h=vN;break;case"wheel":h=LN;break;case"copy":case"cut":case"paste":h=wN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=uI}var g=(e&4)!==0,C=!g&&t==="scroll",v=g?f!==null?f+"Capture":null:f;g=[];for(var m=l,y;m!==null;){y=m;var I=y.stateNode;if(y.tag===5&&I!==null&&(y=I,v!==null&&(I=Td(m,v),I!=null&&g.push(Fd(m,I,y)))),C)break;m=m.return}0<g.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==lv&&(p=n.relatedTarget||n.fromElement)&&(rc(p)||p[Ds]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?rc(p):null,p!==null&&(C=Bc(p),p!==C||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(g=cI,I="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(g=uI,I="onPointerLeave",v="onPointerEnter",m="pointer"),C=h==null?f:sl(h),y=p==null?f:sl(p),f=new g(I,m+"leave",h,n,u),f.target=C,f.relatedTarget=y,I=null,rc(u)===l&&(g=new g(v,m+"enter",p,n,u),g.target=y,g.relatedTarget=C,I=g),C=I,h&&p)t:{for(g=h,v=p,m=0,y=g;y;y=Zc(y))m++;for(y=0,I=v;I;I=Zc(I))y++;for(;0<m-y;)g=Zc(g),m--;for(;0<y-m;)v=Zc(v),y--;for(;m--;){if(g===v||v!==null&&g===v.alternate)break t;g=Zc(g),v=Zc(v)}g=null}else g=null;h!==null&&II(d,f,h,g,!1),p!==null&&C!==null&&II(d,C,p,g,!0)}}e:{if(f=l?sl(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var b=HN;else if(hI(f))if(oE)b=KN;else{b=$N;var A=ZN}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=XN);if(b&&(b=b(t,l))){iE(d,b,n,u);break e}A&&A(t,f,l),t==="focusout"&&(A=f._wrapperState)&&A.controlled&&f.type==="number"&&iv(f,"number",f.value)}switch(A=l?sl(l):window,t){case"focusin":(hI(A)||A.contentEditable==="true")&&(il=A,mv=l,dd=null);break;case"focusout":dd=mv=il=null;break;case"mousedown":vv=!0;break;case"contextmenu":case"mouseup":case"dragend":vv=!1,CI(d,n,u);break;case"selectionchange":if(qN)break;case"keydown":case"keyup":CI(d,n,u)}var E;if(By)e:{switch(t){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else rl?nE(t,n)&&(k="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(tE&&n.locale!=="ko"&&(rl||k!=="onCompositionStart"?k==="onCompositionEnd"&&rl&&(E=eE()):(ca=u,Dy="value"in ca?ca.value:ca.textContent,rl=!0)),A=o0(l,k),0<A.length&&(k=new lI(k,t,null,n,u),d.push({event:k,listeners:A}),E?k.data=E:(E=rE(n),E!==null&&(k.data=E)))),(E=VN?GN(t,n):WN(t,n))&&(l=o0(l,"onBeforeInput"),0<l.length&&(u=new lI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=E))}gE(d,e)})}function Fd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function o0(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Td(t,n),o!=null&&r.unshift(Fd(t,o,i)),o=Td(t,e),o!=null&&r.push(Fd(t,o,i))),t=t.return}return r}function Zc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function II(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=Td(n,o),c!=null&&s.unshift(Fd(n,c,a))):i||(c=Td(n,o),c!=null&&s.push(Fd(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var nB=/\r\n?/g,rB=/\u0000|\uFFFD/g;function bI(t){return(typeof t=="string"?t:""+t).replace(nB,`
`).replace(rB,"")}function zf(t,e,n){if(e=bI(e),bI(t)!==e&&n)throw Error(fe(425))}function s0(){}var Cv=null,yv=null;function xv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Iv=typeof setTimeout=="function"?setTimeout:void 0,iB=typeof clearTimeout=="function"?clearTimeout:void 0,AI=typeof Promise=="function"?Promise:void 0,oB=typeof queueMicrotask=="function"?queueMicrotask:typeof AI<"u"?function(t){return AI.resolve(null).then(t).catch(sB)}:Iv;function sB(t){setTimeout(function(){throw t})}function mg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Dd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Dd(e)}function ba(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var nu=Math.random().toString(36).slice(2),ho="__reactFiber$"+nu,Od="__reactProps$"+nu,Ds="__reactContainer$"+nu,bv="__reactEvents$"+nu,aB="__reactListeners$"+nu,cB="__reactHandles$"+nu;function rc(t){var e=t[ho];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ds]||n[ho]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wI(t);t!==null;){if(n=t[ho])return n;t=wI(t)}return e}t=n,n=t.parentNode}return null}function gf(t){return t=t[ho]||t[Ds],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function sl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(fe(33))}function fp(t){return t[Od]||null}var Av=[],al=-1;function Fa(t){return{current:t}}function Ut(t){0>al||(t.current=Av[al],Av[al]=null,al--)}function _t(t,e){al++,Av[al]=t.current,t.current=e}var _a={},qn=Fa(_a),Er=Fa(!1),Cc=_a;function Ol(t,e){var n=t.type.contextTypes;if(!n)return _a;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Tr(t){return t=t.childContextTypes,t!=null}function a0(){Ut(Er),Ut(qn)}function SI(t,e,n){if(qn.current!==_a)throw Error(fe(168));_t(qn,e),_t(Er,n)}function vE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(fe(108,Z3(t)||"Unknown",i));return Jt({},n,r)}function c0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||_a,Cc=qn.current,_t(qn,t),_t(Er,Er.current),!0}function kI(t,e,n){var r=t.stateNode;if(!r)throw Error(fe(169));n?(t=vE(t,e,Cc),r.__reactInternalMemoizedMergedChildContext=t,Ut(Er),Ut(qn),_t(qn,t)):Ut(Er),_t(Er,n)}var Ko=null,hp=!1,vg=!1;function CE(t){Ko===null?Ko=[t]:Ko.push(t)}function lB(t){hp=!0,CE(t)}function Oa(){if(!vg&&Ko!==null){vg=!0;var t=0,e=yt;try{var n=Ko;for(yt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ko=null,hp=!1}catch(i){throw Ko!==null&&(Ko=Ko.slice(t+1)),zk(Ey,Oa),i}finally{yt=e,vg=!1}}return null}var cl=[],ll=0,l0=null,u0=0,oi=[],si=0,yc=null,es=1,ts="";function $a(t,e){cl[ll++]=u0,cl[ll++]=l0,l0=t,u0=e}function yE(t,e,n){oi[si++]=es,oi[si++]=ts,oi[si++]=yc,yc=t;var r=es;t=ts;var i=32-ji(r)-1;r&=~(1<<i),n+=1;var o=32-ji(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,es=1<<32-ji(e)+i|n<<i|r,ts=o+t}else es=1<<o|n<<i|r,ts=t}function Oy(t){t.return!==null&&($a(t,1),yE(t,1,0))}function My(t){for(;t===l0;)l0=cl[--ll],cl[ll]=null,u0=cl[--ll],cl[ll]=null;for(;t===yc;)yc=oi[--si],oi[si]=null,ts=oi[--si],oi[si]=null,es=oi[--si],oi[si]=null}var Kr=null,$r=null,jt=!1,Oi=null;function xE(t,e){var n=ci(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function EI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kr=t,$r=ba(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kr=t,$r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=yc!==null?{id:es,overflow:ts}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ci(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kr=t,$r=null,!0):!1;default:return!1}}function wv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sv(t){if(jt){var e=$r;if(e){var n=e;if(!EI(t,e)){if(wv(t))throw Error(fe(418));e=ba(n.nextSibling);var r=Kr;e&&EI(t,e)?xE(r,n):(t.flags=t.flags&-4097|2,jt=!1,Kr=t)}}else{if(wv(t))throw Error(fe(418));t.flags=t.flags&-4097|2,jt=!1,Kr=t}}}function TI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kr=t}function jf(t){if(t!==Kr)return!1;if(!jt)return TI(t),jt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!xv(t.type,t.memoizedProps)),e&&(e=$r)){if(wv(t))throw IE(),Error(fe(418));for(;e;)xE(t,e),e=ba(e.nextSibling)}if(TI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(fe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$r=ba(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$r=null}}else $r=Kr?ba(t.stateNode.nextSibling):null;return!0}function IE(){for(var t=$r;t;)t=ba(t.nextSibling)}function Ml(){$r=Kr=null,jt=!1}function Ly(t){Oi===null?Oi=[t]:Oi.push(t)}var uB=Ls.ReactCurrentBatchConfig;function ku(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var r=n.stateNode}if(!r)throw Error(fe(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,t))}return t}function Hf(t,e){throw t=Object.prototype.toString.call(e),Error(fe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function RI(t){var e=t._init;return e(t._payload)}function bE(t){function e(v,m){if(t){var y=v.deletions;y===null?(v.deletions=[m],v.flags|=16):y.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=ka(v,m),v.index=0,v.sibling=null,v}function o(v,m,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<m?(v.flags|=2,m):y):(v.flags|=2,m)):(v.flags|=1048576,m)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function a(v,m,y,I){return m===null||m.tag!==6?(m=wg(y,v.mode,I),m.return=v,m):(m=i(m,y),m.return=v,m)}function c(v,m,y,I){var b=y.type;return b===nl?u(v,m,y.props.children,I,y.key):m!==null&&(m.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===na&&RI(b)===m.type)?(I=i(m,y.props),I.ref=ku(v,m,y),I.return=v,I):(I=wh(y.type,y.key,y.props,null,v.mode,I),I.ref=ku(v,m,y),I.return=v,I)}function l(v,m,y,I){return m===null||m.tag!==4||m.stateNode.containerInfo!==y.containerInfo||m.stateNode.implementation!==y.implementation?(m=Sg(y,v.mode,I),m.return=v,m):(m=i(m,y.children||[]),m.return=v,m)}function u(v,m,y,I,b){return m===null||m.tag!==7?(m=fc(y,v.mode,I,b),m.return=v,m):(m=i(m,y),m.return=v,m)}function d(v,m,y){if(typeof m=="string"&&m!==""||typeof m=="number")return m=wg(""+m,v.mode,y),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Bf:return y=wh(m.type,m.key,m.props,null,v.mode,y),y.ref=ku(v,null,m),y.return=v,y;case tl:return m=Sg(m,v.mode,y),m.return=v,m;case na:var I=m._init;return d(v,I(m._payload),y)}if($u(m)||Iu(m))return m=fc(m,v.mode,y,null),m.return=v,m;Hf(v,m)}return null}function f(v,m,y,I){var b=m!==null?m.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return b!==null?null:a(v,m,""+y,I);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Bf:return y.key===b?c(v,m,y,I):null;case tl:return y.key===b?l(v,m,y,I):null;case na:return b=y._init,f(v,m,b(y._payload),I)}if($u(y)||Iu(y))return b!==null?null:u(v,m,y,I,null);Hf(v,y)}return null}function h(v,m,y,I,b){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(y)||null,a(m,v,""+I,b);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case Bf:return v=v.get(I.key===null?y:I.key)||null,c(m,v,I,b);case tl:return v=v.get(I.key===null?y:I.key)||null,l(m,v,I,b);case na:var A=I._init;return h(v,m,y,A(I._payload),b)}if($u(I)||Iu(I))return v=v.get(y)||null,u(m,v,I,b,null);Hf(m,I)}return null}function p(v,m,y,I){for(var b=null,A=null,E=m,k=m=0,D=null;E!==null&&k<y.length;k++){E.index>k?(D=E,E=null):D=E.sibling;var T=f(v,E,y[k],I);if(T===null){E===null&&(E=D);break}t&&E&&T.alternate===null&&e(v,E),m=o(T,m,k),A===null?b=T:A.sibling=T,A=T,E=D}if(k===y.length)return n(v,E),jt&&$a(v,k),b;if(E===null){for(;k<y.length;k++)E=d(v,y[k],I),E!==null&&(m=o(E,m,k),A===null?b=E:A.sibling=E,A=E);return jt&&$a(v,k),b}for(E=r(v,E);k<y.length;k++)D=h(E,v,k,y[k],I),D!==null&&(t&&D.alternate!==null&&E.delete(D.key===null?k:D.key),m=o(D,m,k),A===null?b=D:A.sibling=D,A=D);return t&&E.forEach(function(R){return e(v,R)}),jt&&$a(v,k),b}function g(v,m,y,I){var b=Iu(y);if(typeof b!="function")throw Error(fe(150));if(y=b.call(y),y==null)throw Error(fe(151));for(var A=b=null,E=m,k=m=0,D=null,T=y.next();E!==null&&!T.done;k++,T=y.next()){E.index>k?(D=E,E=null):D=E.sibling;var R=f(v,E,T.value,I);if(R===null){E===null&&(E=D);break}t&&E&&R.alternate===null&&e(v,E),m=o(R,m,k),A===null?b=R:A.sibling=R,A=R,E=D}if(T.done)return n(v,E),jt&&$a(v,k),b;if(E===null){for(;!T.done;k++,T=y.next())T=d(v,T.value,I),T!==null&&(m=o(T,m,k),A===null?b=T:A.sibling=T,A=T);return jt&&$a(v,k),b}for(E=r(v,E);!T.done;k++,T=y.next())T=h(E,v,k,T.value,I),T!==null&&(t&&T.alternate!==null&&E.delete(T.key===null?k:T.key),m=o(T,m,k),A===null?b=T:A.sibling=T,A=T);return t&&E.forEach(function(P){return e(v,P)}),jt&&$a(v,k),b}function C(v,m,y,I){if(typeof y=="object"&&y!==null&&y.type===nl&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Bf:e:{for(var b=y.key,A=m;A!==null;){if(A.key===b){if(b=y.type,b===nl){if(A.tag===7){n(v,A.sibling),m=i(A,y.props.children),m.return=v,v=m;break e}}else if(A.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===na&&RI(b)===A.type){n(v,A.sibling),m=i(A,y.props),m.ref=ku(v,A,y),m.return=v,v=m;break e}n(v,A);break}else e(v,A);A=A.sibling}y.type===nl?(m=fc(y.props.children,v.mode,I,y.key),m.return=v,v=m):(I=wh(y.type,y.key,y.props,null,v.mode,I),I.ref=ku(v,m,y),I.return=v,v=I)}return s(v);case tl:e:{for(A=y.key;m!==null;){if(m.key===A)if(m.tag===4&&m.stateNode.containerInfo===y.containerInfo&&m.stateNode.implementation===y.implementation){n(v,m.sibling),m=i(m,y.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=Sg(y,v.mode,I),m.return=v,v=m}return s(v);case na:return A=y._init,C(v,m,A(y._payload),I)}if($u(y))return p(v,m,y,I);if(Iu(y))return g(v,m,y,I);Hf(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,m!==null&&m.tag===6?(n(v,m.sibling),m=i(m,y),m.return=v,v=m):(n(v,m),m=wg(y,v.mode,I),m.return=v,v=m),s(v)):n(v,m)}return C}var Ll=bE(!0),AE=bE(!1),d0=Fa(null),f0=null,ul=null,Uy=null;function Vy(){Uy=ul=f0=null}function Gy(t){var e=d0.current;Ut(d0),t._currentValue=e}function kv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function xl(t,e){f0=t,Uy=ul=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Sr=!0),t.firstContext=null)}function pi(t){var e=t._currentValue;if(Uy!==t)if(t={context:t,memoizedValue:e,next:null},ul===null){if(f0===null)throw Error(fe(308));ul=t,f0.dependencies={lanes:0,firstContext:t}}else ul=ul.next=t;return e}var ic=null;function Wy(t){ic===null?ic=[t]:ic.push(t)}function wE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Wy(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ps(t,r)}function Ps(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ra=!1;function zy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function SE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ks(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Aa(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,lt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ps(t,n)}return i=r.interleaved,i===null?(e.next=e,Wy(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ps(t,n)}function Ch(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ty(t,n)}}function _I(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function h0(t,e,n,r){var i=t.updateQueue;ra=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,s===null?o=l:s.next=l,s=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;s=0,u=l=c=null,a=o;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(f=e,h=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Jt({},d,f);break e;case 2:ra=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Ic|=s,t.lanes=s,t.memoizedState=d}}function DI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(fe(191,i));i.call(r)}}}var mf={},Bo=Fa(mf),Md=Fa(mf),Ld=Fa(mf);function oc(t){if(t===mf)throw Error(fe(174));return t}function jy(t,e){switch(_t(Ld,e),_t(Md,t),_t(Bo,mf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sv(e,t)}Ut(Bo),_t(Bo,e)}function Ul(){Ut(Bo),Ut(Md),Ut(Ld)}function kE(t){oc(Ld.current);var e=oc(Bo.current),n=sv(e,t.type);e!==n&&(_t(Md,t),_t(Bo,n))}function Hy(t){Md.current===t&&(Ut(Bo),Ut(Md))}var Xt=Fa(0);function p0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Cg=[];function Zy(){for(var t=0;t<Cg.length;t++)Cg[t]._workInProgressVersionPrimary=null;Cg.length=0}var yh=Ls.ReactCurrentDispatcher,yg=Ls.ReactCurrentBatchConfig,xc=0,Kt=null,yn=null,En=null,g0=!1,fd=!1,Ud=0,dB=0;function Hn(){throw Error(fe(321))}function $y(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$i(t[n],e[n]))return!1;return!0}function Xy(t,e,n,r,i,o){if(xc=o,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yh.current=t===null||t.memoizedState===null?gB:mB,t=n(r,i),fd){o=0;do{if(fd=!1,Ud=0,25<=o)throw Error(fe(301));o+=1,En=yn=null,e.updateQueue=null,yh.current=vB,t=n(r,i)}while(fd)}if(yh.current=m0,e=yn!==null&&yn.next!==null,xc=0,En=yn=Kt=null,g0=!1,e)throw Error(fe(300));return t}function Ky(){var t=Ud!==0;return Ud=0,t}function uo(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?Kt.memoizedState=En=t:En=En.next=t,En}function gi(){if(yn===null){var t=Kt.alternate;t=t!==null?t.memoizedState:null}else t=yn.next;var e=En===null?Kt.memoizedState:En.next;if(e!==null)En=e,yn=t;else{if(t===null)throw Error(fe(310));yn=t,t={memoizedState:yn.memoizedState,baseState:yn.baseState,baseQueue:yn.baseQueue,queue:yn.queue,next:null},En===null?Kt.memoizedState=En=t:En=En.next=t}return En}function Vd(t,e){return typeof e=="function"?e(t):e}function xg(t){var e=gi(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=yn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,l=o;do{var u=l.lane;if((xc&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,s=r):c=c.next=d,Kt.lanes|=u,Ic|=u}l=l.next}while(l!==null&&l!==o);c===null?s=r:c.next=a,$i(r,e.memoizedState)||(Sr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Kt.lanes|=o,Ic|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ig(t){var e=gi(),n=e.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);$i(o,e.memoizedState)||(Sr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function EE(){}function TE(t,e){var n=Kt,r=gi(),i=e(),o=!$i(r.memoizedState,i);if(o&&(r.memoizedState=i,Sr=!0),r=r.queue,Jy(DE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||En!==null&&En.memoizedState.tag&1){if(n.flags|=2048,Gd(9,_E.bind(null,n,r,i,e),void 0,null),Rn===null)throw Error(fe(349));xc&30||RE(n,e,i)}return i}function RE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _E(t,e,n,r){e.value=n,e.getSnapshot=r,PE(e)&&NE(t)}function DE(t,e,n){return n(function(){PE(e)&&NE(t)})}function PE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$i(t,n)}catch{return!0}}function NE(t){var e=Ps(t,1);e!==null&&Hi(e,t,1,-1)}function PI(t){var e=uo();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vd,lastRenderedState:t},e.queue=t,t=t.dispatch=pB.bind(null,Kt,t),[e.memoizedState,t]}function Gd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function BE(){return gi().memoizedState}function xh(t,e,n,r){var i=uo();Kt.flags|=t,i.memoizedState=Gd(1|e,n,void 0,r===void 0?null:r)}function pp(t,e,n,r){var i=gi();r=r===void 0?null:r;var o=void 0;if(yn!==null){var s=yn.memoizedState;if(o=s.destroy,r!==null&&$y(r,s.deps)){i.memoizedState=Gd(e,n,o,r);return}}Kt.flags|=t,i.memoizedState=Gd(1|e,n,o,r)}function NI(t,e){return xh(8390656,8,t,e)}function Jy(t,e){return pp(2048,8,t,e)}function FE(t,e){return pp(4,2,t,e)}function OE(t,e){return pp(4,4,t,e)}function ME(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LE(t,e,n){return n=n!=null?n.concat([t]):null,pp(4,4,ME.bind(null,e,t),n)}function Yy(){}function UE(t,e){var n=gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$y(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function VE(t,e){var n=gi();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&$y(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function GE(t,e,n){return xc&21?($i(n,e)||(n=Zk(),Kt.lanes|=n,Ic|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Sr=!0),t.memoizedState=n)}function fB(t,e){var n=yt;yt=n!==0&&4>n?n:4,t(!0);var r=yg.transition;yg.transition={};try{t(!1),e()}finally{yt=n,yg.transition=r}}function WE(){return gi().memoizedState}function hB(t,e,n){var r=Sa(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zE(t))jE(e,n);else if(n=wE(t,e,n,r),n!==null){var i=dr();Hi(n,t,r,i),HE(n,e,r)}}function pB(t,e,n){var r=Sa(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zE(t))jE(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,$i(a,s)){var c=e.interleaved;c===null?(i.next=i,Wy(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=wE(t,e,i,r),n!==null&&(i=dr(),Hi(n,t,r,i),HE(n,e,r))}}function zE(t){var e=t.alternate;return t===Kt||e!==null&&e===Kt}function jE(t,e){fd=g0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function HE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Ty(t,n)}}var m0={readContext:pi,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},gB={readContext:pi,useCallback:function(t,e){return uo().memoizedState=[t,e===void 0?null:e],t},useContext:pi,useEffect:NI,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xh(4194308,4,ME.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xh(4194308,4,t,e)},useInsertionEffect:function(t,e){return xh(4,2,t,e)},useMemo:function(t,e){var n=uo();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=uo();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=hB.bind(null,Kt,t),[r.memoizedState,t]},useRef:function(t){var e=uo();return t={current:t},e.memoizedState=t},useState:PI,useDebugValue:Yy,useDeferredValue:function(t){return uo().memoizedState=t},useTransition:function(){var t=PI(!1),e=t[0];return t=fB.bind(null,t[1]),uo().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Kt,i=uo();if(jt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=e(),Rn===null)throw Error(fe(349));xc&30||RE(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,NI(DE.bind(null,r,o,t),[t]),r.flags|=2048,Gd(9,_E.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=uo(),e=Rn.identifierPrefix;if(jt){var n=ts,r=es;n=(r&~(1<<32-ji(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ud++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},mB={readContext:pi,useCallback:UE,useContext:pi,useEffect:Jy,useImperativeHandle:LE,useInsertionEffect:FE,useLayoutEffect:OE,useMemo:VE,useReducer:xg,useRef:BE,useState:function(){return xg(Vd)},useDebugValue:Yy,useDeferredValue:function(t){var e=gi();return GE(e,yn.memoizedState,t)},useTransition:function(){var t=xg(Vd)[0],e=gi().memoizedState;return[t,e]},useMutableSource:EE,useSyncExternalStore:TE,useId:WE,unstable_isNewReconciler:!1},vB={readContext:pi,useCallback:UE,useContext:pi,useEffect:Jy,useImperativeHandle:LE,useInsertionEffect:FE,useLayoutEffect:OE,useMemo:VE,useReducer:Ig,useRef:BE,useState:function(){return Ig(Vd)},useDebugValue:Yy,useDeferredValue:function(t){var e=gi();return yn===null?e.memoizedState=t:GE(e,yn.memoizedState,t)},useTransition:function(){var t=Ig(Vd)[0],e=gi().memoizedState;return[t,e]},useMutableSource:EE,useSyncExternalStore:TE,useId:WE,unstable_isNewReconciler:!1};function wi(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ev(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gp={isMounted:function(t){return(t=t._reactInternals)?Bc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dr(),i=Sa(t),o=ks(r,i);o.payload=e,n!=null&&(o.callback=n),e=Aa(t,o,i),e!==null&&(Hi(e,t,i,r),Ch(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dr(),i=Sa(t),o=ks(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Aa(t,o,i),e!==null&&(Hi(e,t,i,r),Ch(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dr(),r=Sa(t),i=ks(n,r);i.tag=2,e!=null&&(i.callback=e),e=Aa(t,i,r),e!==null&&(Hi(e,t,r,n),Ch(e,t,r))}};function BI(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Nd(n,r)||!Nd(i,o):!0}function ZE(t,e,n){var r=!1,i=_a,o=e.contextType;return typeof o=="object"&&o!==null?o=pi(o):(i=Tr(e)?Cc:qn.current,r=e.contextTypes,o=(r=r!=null)?Ol(t,i):_a),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function FI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gp.enqueueReplaceState(e,e.state,null)}function Tv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},zy(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=pi(o):(o=Tr(e)?Cc:qn.current,i.context=Ol(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Ev(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gp.enqueueReplaceState(i,i.state,null),h0(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Vl(t,e){try{var n="",r=e;do n+=H3(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function bg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CB=typeof WeakMap=="function"?WeakMap:Map;function $E(t,e,n){n=ks(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){C0||(C0=!0,Uv=r),Rv(t,e)},n}function XE(t,e,n){n=ks(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Rv(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Rv(t,e),typeof r!="function"&&(wa===null?wa=new Set([this]):wa.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function OI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CB;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=PB.bind(null,t,e,n),e.then(t,t))}function MI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ks(-1,1),e.tag=2,Aa(n,e,1))),n.lanes|=1),t)}var yB=Ls.ReactCurrentOwner,Sr=!1;function rr(t,e,n,r){e.child=t===null?AE(e,null,n,r):Ll(e,t.child,n,r)}function UI(t,e,n,r,i){n=n.render;var o=e.ref;return xl(e,i),r=Xy(t,e,n,r,o,i),n=Ky(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ns(t,e,i)):(jt&&n&&Oy(e),e.flags|=1,rr(t,e,r,i),e.child)}function VI(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!o1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,KE(t,e,o,r,i)):(t=wh(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Nd,n(s,r)&&t.ref===e.ref)return Ns(t,e,i)}return e.flags|=1,t=ka(o,r),t.ref=e.ref,t.return=e,e.child=t}function KE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Nd(o,r)&&t.ref===e.ref)if(Sr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(Sr=!0);else return e.lanes=t.lanes,Ns(t,e,i)}return _v(t,e,n,r,i)}function JE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_t(fl,Vr),Vr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_t(fl,Vr),Vr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,_t(fl,Vr),Vr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,_t(fl,Vr),Vr|=r;return rr(t,e,i,n),e.child}function YE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function _v(t,e,n,r,i){var o=Tr(n)?Cc:qn.current;return o=Ol(e,o),xl(e,i),n=Xy(t,e,n,r,o,i),r=Ky(),t!==null&&!Sr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ns(t,e,i)):(jt&&r&&Oy(e),e.flags|=1,rr(t,e,n,i),e.child)}function GI(t,e,n,r,i){if(Tr(n)){var o=!0;c0(e)}else o=!1;if(xl(e,i),e.stateNode===null)Ih(t,e),ZE(e,n,r),Tv(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=pi(l):(l=Tr(n)?Cc:qn.current,l=Ol(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==l)&&FI(e,s,r,l),ra=!1;var f=e.memoizedState;s.state=f,h0(e,r,s,i),c=e.memoizedState,a!==r||f!==c||Er.current||ra?(typeof u=="function"&&(Ev(e,n,u,r),c=e.memoizedState),(a=ra||BI(e,n,a,r,f,c,l))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,SE(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:wi(e.type,a),s.props=l,d=e.pendingProps,f=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=pi(c):(c=Tr(n)?Cc:qn.current,c=Ol(e,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||f!==c)&&FI(e,s,r,c),ra=!1,f=e.memoizedState,s.state=f,h0(e,r,s,i);var p=e.memoizedState;a!==d||f!==p||Er.current||ra?(typeof h=="function"&&(Ev(e,n,h,r),p=e.memoizedState),(l=ra||BI(e,n,l,r,f,p,c)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=c,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Dv(t,e,n,r,o,i)}function Dv(t,e,n,r,i,o){YE(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&kI(e,n,!1),Ns(t,e,o);r=e.stateNode,yB.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Ll(e,t.child,null,o),e.child=Ll(e,null,a,o)):rr(t,e,a,o),e.memoizedState=r.state,i&&kI(e,n,!0),e.child}function qE(t){var e=t.stateNode;e.pendingContext?SI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&SI(t,e.context,!1),jy(t,e.containerInfo)}function WI(t,e,n,r,i){return Ml(),Ly(i),e.flags|=256,rr(t,e,n,r),e.child}var Pv={dehydrated:null,treeContext:null,retryLane:0};function Nv(t){return{baseLanes:t,cachePool:null,transitions:null}}function QE(t,e,n){var r=e.pendingProps,i=Xt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),_t(Xt,i&1),t===null)return Sv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Cp(s,r,0,null),t=fc(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Nv(n),e.memoizedState=Pv,t):qy(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return xB(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ka(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ka(a,o):(o=fc(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Nv(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Pv,r}return o=t.child,t=o.sibling,r=ka(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function qy(t,e){return e=Cp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zf(t,e,n,r){return r!==null&&Ly(r),Ll(e,t.child,null,n),t=qy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xB(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=bg(Error(fe(422))),Zf(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Cp({mode:"visible",children:r.children},i,0,null),o=fc(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Ll(e,t.child,null,s),e.child.memoizedState=Nv(s),e.memoizedState=Pv,o);if(!(e.mode&1))return Zf(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(fe(419)),r=bg(o,r,void 0),Zf(t,e,s,r)}if(a=(s&t.childLanes)!==0,Sr||a){if(r=Rn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ps(t,i),Hi(r,t,i,-1))}return i1(),r=bg(Error(fe(421))),Zf(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=NB.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,$r=ba(i.nextSibling),Kr=e,jt=!0,Oi=null,t!==null&&(oi[si++]=es,oi[si++]=ts,oi[si++]=yc,es=t.id,ts=t.overflow,yc=e),e=qy(e,r.children),e.flags|=4096,e)}function zI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),kv(t.return,e,n)}function Ag(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function eT(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(rr(t,e,r.children,n),r=Xt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&zI(t,n,e);else if(t.tag===19)zI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_t(Xt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&p0(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ag(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&p0(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ag(e,!0,n,null,o);break;case"together":Ag(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ih(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ns(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ic|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(fe(153));if(e.child!==null){for(t=e.child,n=ka(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ka(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function IB(t,e,n){switch(e.tag){case 3:qE(e),Ml();break;case 5:kE(e);break;case 1:Tr(e.type)&&c0(e);break;case 4:jy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;_t(d0,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_t(Xt,Xt.current&1),e.flags|=128,null):n&e.child.childLanes?QE(t,e,n):(_t(Xt,Xt.current&1),t=Ns(t,e,n),t!==null?t.sibling:null);_t(Xt,Xt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return eT(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),_t(Xt,Xt.current),r)break;return null;case 22:case 23:return e.lanes=0,JE(t,e,n)}return Ns(t,e,n)}var tT,Bv,nT,rT;tT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bv=function(){};nT=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,oc(Bo.current);var o=null;switch(n){case"input":i=nv(t,i),r=nv(t,r),o=[];break;case"select":i=Jt({},i,{value:void 0}),r=Jt({},r,{value:void 0}),o=[];break;case"textarea":i=ov(t,i),r=ov(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=s0)}av(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(kd.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(kd.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&Bt("scroll",t),o||a===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};rT=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eu(t,e){if(!jt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bB(t,e,n){var r=e.pendingProps;switch(My(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Tr(e.type)&&a0(),Zn(e),null;case 3:return r=e.stateNode,Ul(),Ut(Er),Ut(qn),Zy(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(jf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Oi!==null&&(Wv(Oi),Oi=null))),Bv(t,e),Zn(e),null;case 5:Hy(e);var i=oc(Ld.current);if(n=e.type,t!==null&&e.stateNode!=null)nT(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(fe(166));return Zn(e),null}if(t=oc(Bo.current),jf(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ho]=e,r[Od]=o,t=(e.mode&1)!==0,n){case"dialog":Bt("cancel",r),Bt("close",r);break;case"iframe":case"object":case"embed":Bt("load",r);break;case"video":case"audio":for(i=0;i<Ku.length;i++)Bt(Ku[i],r);break;case"source":Bt("error",r);break;case"img":case"image":case"link":Bt("error",r),Bt("load",r);break;case"details":Bt("toggle",r);break;case"input":qx(r,o),Bt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Bt("invalid",r);break;case"textarea":eI(r,o),Bt("invalid",r)}av(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&zf(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&zf(r.textContent,a,t),i=["children",""+a]):kd.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Bt("scroll",r)}switch(n){case"input":Ff(r),Qx(r,o,!0);break;case"textarea":Ff(r),tI(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=s0)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Dk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[ho]=e,t[Od]=r,tT(t,e,!1,!1),e.stateNode=t;e:{switch(s=cv(n,r),n){case"dialog":Bt("cancel",t),Bt("close",t),i=r;break;case"iframe":case"object":case"embed":Bt("load",t),i=r;break;case"video":case"audio":for(i=0;i<Ku.length;i++)Bt(Ku[i],t);i=r;break;case"source":Bt("error",t),i=r;break;case"img":case"image":case"link":Bt("error",t),Bt("load",t),i=r;break;case"details":Bt("toggle",t),i=r;break;case"input":qx(t,r),i=nv(t,r),Bt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Jt({},r,{value:void 0}),Bt("invalid",t);break;case"textarea":eI(t,r),i=ov(t,r),Bt("invalid",t);break;default:i=r}av(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?Bk(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Pk(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ed(t,c):typeof c=="number"&&Ed(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(kd.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Bt("scroll",t):c!=null&&by(t,o,c,s))}switch(n){case"input":Ff(t),Qx(t,r,!1);break;case"textarea":Ff(t),tI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ra(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?ml(t,!!r.multiple,o,!1):r.defaultValue!=null&&ml(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=s0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)rT(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(fe(166));if(n=oc(Ld.current),oc(Bo.current),jf(e)){if(r=e.stateNode,n=e.memoizedProps,r[ho]=e,(o=r.nodeValue!==n)&&(t=Kr,t!==null))switch(t.tag){case 3:zf(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&zf(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ho]=e,e.stateNode=r}return Zn(e),null;case 13:if(Ut(Xt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&$r!==null&&e.mode&1&&!(e.flags&128))IE(),Ml(),e.flags|=98560,o=!1;else if(o=jf(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(fe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(fe(317));o[ho]=e}else Ml(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),o=!1}else Oi!==null&&(Wv(Oi),Oi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xt.current&1?xn===0&&(xn=3):i1())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return Ul(),Bv(t,e),t===null&&Bd(e.stateNode.containerInfo),Zn(e),null;case 10:return Gy(e.type._context),Zn(e),null;case 17:return Tr(e.type)&&a0(),Zn(e),null;case 19:if(Ut(Xt),o=e.memoizedState,o===null)return Zn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Eu(o,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=p0(t),s!==null){for(e.flags|=128,Eu(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _t(Xt,Xt.current&1|2),e.child}t=t.sibling}o.tail!==null&&sn()>Gl&&(e.flags|=128,r=!0,Eu(o,!1),e.lanes=4194304)}else{if(!r)if(t=p0(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!jt)return Zn(e),null}else 2*sn()-o.renderingStartTime>Gl&&n!==1073741824&&(e.flags|=128,r=!0,Eu(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=sn(),e.sibling=null,n=Xt.current,_t(Xt,r?n&1|2:n&1),e):(Zn(e),null);case 22:case 23:return r1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vr&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(fe(156,e.tag))}function AB(t,e){switch(My(e),e.tag){case 1:return Tr(e.type)&&a0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ul(),Ut(Er),Ut(qn),Zy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hy(e),null;case 13:if(Ut(Xt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(fe(340));Ml()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(Xt),null;case 4:return Ul(),null;case 10:return Gy(e.type._context),null;case 22:case 23:return r1(),null;case 24:return null;default:return null}}var $f=!1,Xn=!1,wB=typeof WeakSet=="function"?WeakSet:Set,we=null;function dl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qt(t,e,r)}else n.current=null}function Fv(t,e,n){try{n()}catch(r){Qt(t,e,r)}}var jI=!1;function SB(t,e){if(Cv=r0,t=cE(),Fy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,l=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(c=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++l===i&&(a=s),f===o&&++u===r&&(c=s),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(yv={focusedElem:t,selectionRange:n},r0=!1,we=e;we!==null;)if(e=we,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,we=t;else for(;we!==null;){e=we;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,C=p.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?g:wi(e.type,g),C);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(I){Qt(e,e.return,I)}if(t=e.sibling,t!==null){t.return=e.return,we=t;break}we=e.return}return p=jI,jI=!1,p}function hd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Fv(e,n,o)}i=i.next}while(i!==r)}}function mp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ov(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function iT(t){var e=t.alternate;e!==null&&(t.alternate=null,iT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ho],delete e[Od],delete e[bv],delete e[aB],delete e[cB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function oT(t){return t.tag===5||t.tag===3||t.tag===4}function HI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||oT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=s0));else if(r!==4&&(t=t.child,t!==null))for(Mv(t,e,n),t=t.sibling;t!==null;)Mv(t,e,n),t=t.sibling}function Lv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lv(t,e,n),t=t.sibling;t!==null;)Lv(t,e,n),t=t.sibling}var Pn=null,Ni=!1;function Hs(t,e,n){for(n=n.child;n!==null;)sT(t,e,n),n=n.sibling}function sT(t,e,n){if(No&&typeof No.onCommitFiberUnmount=="function")try{No.onCommitFiberUnmount(cp,n)}catch{}switch(n.tag){case 5:Xn||dl(n,e);case 6:var r=Pn,i=Ni;Pn=null,Hs(t,e,n),Pn=r,Ni=i,Pn!==null&&(Ni?(t=Pn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Pn.removeChild(n.stateNode));break;case 18:Pn!==null&&(Ni?(t=Pn,n=n.stateNode,t.nodeType===8?mg(t.parentNode,n):t.nodeType===1&&mg(t,n),Dd(t)):mg(Pn,n.stateNode));break;case 4:r=Pn,i=Ni,Pn=n.stateNode.containerInfo,Ni=!0,Hs(t,e,n),Pn=r,Ni=i;break;case 0:case 11:case 14:case 15:if(!Xn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Fv(n,e,s),i=i.next}while(i!==r)}Hs(t,e,n);break;case 1:if(!Xn&&(dl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qt(n,e,a)}Hs(t,e,n);break;case 21:Hs(t,e,n);break;case 22:n.mode&1?(Xn=(r=Xn)||n.memoizedState!==null,Hs(t,e,n),Xn=r):Hs(t,e,n);break;default:Hs(t,e,n)}}function ZI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new wB),e.forEach(function(r){var i=BB.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function xi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:Pn=a.stateNode,Ni=!1;break e;case 3:Pn=a.stateNode.containerInfo,Ni=!0;break e;case 4:Pn=a.stateNode.containerInfo,Ni=!0;break e}a=a.return}if(Pn===null)throw Error(fe(160));sT(o,s,i),Pn=null,Ni=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){Qt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)aT(e,t),e=e.sibling}function aT(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xi(e,t),ro(t),r&4){try{hd(3,t,t.return),mp(3,t)}catch(g){Qt(t,t.return,g)}try{hd(5,t,t.return)}catch(g){Qt(t,t.return,g)}}break;case 1:xi(e,t),ro(t),r&512&&n!==null&&dl(n,n.return);break;case 5:if(xi(e,t),ro(t),r&512&&n!==null&&dl(n,n.return),t.flags&32){var i=t.stateNode;try{Ed(i,"")}catch(g){Qt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Rk(i,o),cv(a,s);var l=cv(a,o);for(s=0;s<c.length;s+=2){var u=c[s],d=c[s+1];u==="style"?Bk(i,d):u==="dangerouslySetInnerHTML"?Pk(i,d):u==="children"?Ed(i,d):by(i,u,d,l)}switch(a){case"input":rv(i,o);break;case"textarea":_k(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var h=o.value;h!=null?ml(i,!!o.multiple,h,!1):f!==!!o.multiple&&(o.defaultValue!=null?ml(i,!!o.multiple,o.defaultValue,!0):ml(i,!!o.multiple,o.multiple?[]:"",!1))}i[Od]=o}catch(g){Qt(t,t.return,g)}}break;case 6:if(xi(e,t),ro(t),r&4){if(t.stateNode===null)throw Error(fe(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){Qt(t,t.return,g)}}break;case 3:if(xi(e,t),ro(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Dd(e.containerInfo)}catch(g){Qt(t,t.return,g)}break;case 4:xi(e,t),ro(t);break;case 13:xi(e,t),ro(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(t1=sn())),r&4&&ZI(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Xn=(l=Xn)||u,xi(e,t),Xn=l):xi(e,t),ro(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(we=t,u=t.child;u!==null;){for(d=we=u;we!==null;){switch(f=we,h=f.child,f.tag){case 0:case 11:case 14:case 15:hd(4,f,f.return);break;case 1:dl(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Qt(r,n,g)}}break;case 5:dl(f,f.return);break;case 22:if(f.memoizedState!==null){XI(d);continue}}h!==null?(h.return=f,we=h):XI(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=Nk("display",s))}catch(g){Qt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){Qt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:xi(e,t),ro(t),r&4&&ZI(t);break;case 21:break;default:xi(e,t),ro(t)}}function ro(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(oT(n)){var r=n;break e}n=n.return}throw Error(fe(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ed(i,""),r.flags&=-33);var o=HI(t);Lv(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=HI(t);Mv(t,a,s);break;default:throw Error(fe(161))}}catch(c){Qt(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kB(t,e,n){we=t,cT(t)}function cT(t,e,n){for(var r=(t.mode&1)!==0;we!==null;){var i=we,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||$f;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Xn;a=$f;var l=Xn;if($f=s,(Xn=c)&&!l)for(we=i;we!==null;)s=we,c=s.child,s.tag===22&&s.memoizedState!==null?KI(i):c!==null?(c.return=s,we=c):KI(i);for(;o!==null;)we=o,cT(o),o=o.sibling;we=i,$f=a,Xn=l}$I(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,we=o):$I(t)}}function $I(t){for(;we!==null;){var e=we;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Xn||mp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Xn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:wi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&DI(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}DI(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Dd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Xn||e.flags&512&&Ov(e)}catch(f){Qt(e,e.return,f)}}if(e===t){we=null;break}if(n=e.sibling,n!==null){n.return=e.return,we=n;break}we=e.return}}function XI(t){for(;we!==null;){var e=we;if(e===t){we=null;break}var n=e.sibling;if(n!==null){n.return=e.return,we=n;break}we=e.return}}function KI(t){for(;we!==null;){var e=we;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mp(4,e)}catch(c){Qt(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){Qt(e,i,c)}}var o=e.return;try{Ov(e)}catch(c){Qt(e,o,c)}break;case 5:var s=e.return;try{Ov(e)}catch(c){Qt(e,s,c)}}}catch(c){Qt(e,e.return,c)}if(e===t){we=null;break}var a=e.sibling;if(a!==null){a.return=e.return,we=a;break}we=e.return}}var EB=Math.ceil,v0=Ls.ReactCurrentDispatcher,Qy=Ls.ReactCurrentOwner,hi=Ls.ReactCurrentBatchConfig,lt=0,Rn=null,pn=null,Mn=0,Vr=0,fl=Fa(0),xn=0,Wd=null,Ic=0,vp=0,e1=0,pd=null,br=null,t1=0,Gl=1/0,$o=null,C0=!1,Uv=null,wa=null,Xf=!1,la=null,y0=0,gd=0,Vv=null,bh=-1,Ah=0;function dr(){return lt&6?sn():bh!==-1?bh:bh=sn()}function Sa(t){return t.mode&1?lt&2&&Mn!==0?Mn&-Mn:uB.transition!==null?(Ah===0&&(Ah=Zk()),Ah):(t=yt,t!==0||(t=window.event,t=t===void 0?16:Qk(t.type)),t):1}function Hi(t,e,n,r){if(50<gd)throw gd=0,Vv=null,Error(fe(185));hf(t,n,r),(!(lt&2)||t!==Rn)&&(t===Rn&&(!(lt&2)&&(vp|=n),xn===4&&sa(t,Mn)),Rr(t,r),n===1&&lt===0&&!(e.mode&1)&&(Gl=sn()+500,hp&&Oa()))}function Rr(t,e){var n=t.callbackNode;uN(t,e);var r=n0(t,t===Rn?Mn:0);if(r===0)n!==null&&iI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&iI(n),e===1)t.tag===0?lB(JI.bind(null,t)):CE(JI.bind(null,t)),oB(function(){!(lt&6)&&Oa()}),n=null;else{switch($k(r)){case 1:n=Ey;break;case 4:n=jk;break;case 16:n=t0;break;case 536870912:n=Hk;break;default:n=t0}n=mT(n,lT.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function lT(t,e){if(bh=-1,Ah=0,lt&6)throw Error(fe(327));var n=t.callbackNode;if(Il()&&t.callbackNode!==n)return null;var r=n0(t,t===Rn?Mn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=x0(t,r);else{e=r;var i=lt;lt|=2;var o=dT();(Rn!==t||Mn!==e)&&($o=null,Gl=sn()+500,dc(t,e));do try{_B();break}catch(a){uT(t,a)}while(!0);Vy(),v0.current=o,lt=i,pn!==null?e=0:(Rn=null,Mn=0,e=xn)}if(e!==0){if(e===2&&(i=hv(t),i!==0&&(r=i,e=Gv(t,i))),e===1)throw n=Wd,dc(t,0),sa(t,r),Rr(t,sn()),n;if(e===6)sa(t,r);else{if(i=t.current.alternate,!(r&30)&&!TB(i)&&(e=x0(t,r),e===2&&(o=hv(t),o!==0&&(r=o,e=Gv(t,o))),e===1))throw n=Wd,dc(t,0),sa(t,r),Rr(t,sn()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(fe(345));case 2:Xa(t,br,$o);break;case 3:if(sa(t,r),(r&130023424)===r&&(e=t1+500-sn(),10<e)){if(n0(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){dr(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Iv(Xa.bind(null,t,br,$o),e);break}Xa(t,br,$o);break;case 4:if(sa(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-ji(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=sn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*EB(r/1960))-r,10<r){t.timeoutHandle=Iv(Xa.bind(null,t,br,$o),r);break}Xa(t,br,$o);break;case 5:Xa(t,br,$o);break;default:throw Error(fe(329))}}}return Rr(t,sn()),t.callbackNode===n?lT.bind(null,t):null}function Gv(t,e){var n=pd;return t.current.memoizedState.isDehydrated&&(dc(t,e).flags|=256),t=x0(t,e),t!==2&&(e=br,br=n,e!==null&&Wv(e)),t}function Wv(t){br===null?br=t:br.push.apply(br,t)}function TB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!$i(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sa(t,e){for(e&=~e1,e&=~vp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ji(e),r=1<<n;t[n]=-1,e&=~r}}function JI(t){if(lt&6)throw Error(fe(327));Il();var e=n0(t,0);if(!(e&1))return Rr(t,sn()),null;var n=x0(t,e);if(t.tag!==0&&n===2){var r=hv(t);r!==0&&(e=r,n=Gv(t,r))}if(n===1)throw n=Wd,dc(t,0),sa(t,e),Rr(t,sn()),n;if(n===6)throw Error(fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Xa(t,br,$o),Rr(t,sn()),null}function n1(t,e){var n=lt;lt|=1;try{return t(e)}finally{lt=n,lt===0&&(Gl=sn()+500,hp&&Oa())}}function bc(t){la!==null&&la.tag===0&&!(lt&6)&&Il();var e=lt;lt|=1;var n=hi.transition,r=yt;try{if(hi.transition=null,yt=1,t)return t()}finally{yt=r,hi.transition=n,lt=e,!(lt&6)&&Oa()}}function r1(){Vr=fl.current,Ut(fl)}function dc(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,iB(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(My(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&a0();break;case 3:Ul(),Ut(Er),Ut(qn),Zy();break;case 5:Hy(r);break;case 4:Ul();break;case 13:Ut(Xt);break;case 19:Ut(Xt);break;case 10:Gy(r.type._context);break;case 22:case 23:r1()}n=n.return}if(Rn=t,pn=t=ka(t.current,null),Mn=Vr=e,xn=0,Wd=null,e1=vp=Ic=0,br=pd=null,ic!==null){for(e=0;e<ic.length;e++)if(n=ic[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ic=null}return t}function uT(t,e){do{var n=pn;try{if(Vy(),yh.current=m0,g0){for(var r=Kt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}g0=!1}if(xc=0,En=yn=Kt=null,fd=!1,Ud=0,Qy.current=null,n===null||n.return===null){xn=1,Wd=e,pn=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=Mn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=MI(s);if(h!==null){h.flags&=-257,LI(h,s,a,o,e),h.mode&1&&OI(o,l,e),e=h,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){OI(o,l,e),i1();break e}c=Error(fe(426))}}else if(jt&&a.mode&1){var C=MI(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),LI(C,s,a,o,e),Ly(Vl(c,a));break e}}o=c=Vl(c,a),xn!==4&&(xn=2),pd===null?pd=[o]:pd.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=$E(o,c,e);_I(o,v);break e;case 1:a=c;var m=o.type,y=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(wa===null||!wa.has(y)))){o.flags|=65536,e&=-e,o.lanes|=e;var I=XE(o,a,e);_I(o,I);break e}}o=o.return}while(o!==null)}hT(n)}catch(b){e=b,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function dT(){var t=v0.current;return v0.current=m0,t===null?m0:t}function i1(){(xn===0||xn===3||xn===2)&&(xn=4),Rn===null||!(Ic&268435455)&&!(vp&268435455)||sa(Rn,Mn)}function x0(t,e){var n=lt;lt|=2;var r=dT();(Rn!==t||Mn!==e)&&($o=null,dc(t,e));do try{RB();break}catch(i){uT(t,i)}while(!0);if(Vy(),lt=n,v0.current=r,pn!==null)throw Error(fe(261));return Rn=null,Mn=0,xn}function RB(){for(;pn!==null;)fT(pn)}function _B(){for(;pn!==null&&!tN();)fT(pn)}function fT(t){var e=gT(t.alternate,t,Vr);t.memoizedProps=t.pendingProps,e===null?hT(t):pn=e,Qy.current=null}function hT(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=AB(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,pn=null;return}}else if(n=bB(n,e,Vr),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);xn===0&&(xn=5)}function Xa(t,e,n){var r=yt,i=hi.transition;try{hi.transition=null,yt=1,DB(t,e,n,r)}finally{hi.transition=i,yt=r}return null}function DB(t,e,n,r){do Il();while(la!==null);if(lt&6)throw Error(fe(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(fe(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(dN(t,o),t===Rn&&(pn=Rn=null,Mn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xf||(Xf=!0,mT(t0,function(){return Il(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=hi.transition,hi.transition=null;var s=yt;yt=1;var a=lt;lt|=4,Qy.current=null,SB(t,n),aT(n,t),YN(yv),r0=!!Cv,yv=Cv=null,t.current=n,kB(n),nN(),lt=a,yt=s,hi.transition=o}else t.current=n;if(Xf&&(Xf=!1,la=t,y0=i),o=t.pendingLanes,o===0&&(wa=null),oN(n.stateNode),Rr(t,sn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(C0)throw C0=!1,t=Uv,Uv=null,t;return y0&1&&t.tag!==0&&Il(),o=t.pendingLanes,o&1?t===Vv?gd++:(gd=0,Vv=t):gd=0,Oa(),null}function Il(){if(la!==null){var t=$k(y0),e=hi.transition,n=yt;try{if(hi.transition=null,yt=16>t?16:t,la===null)var r=!1;else{if(t=la,la=null,y0=0,lt&6)throw Error(fe(331));var i=lt;for(lt|=4,we=t.current;we!==null;){var o=we,s=o.child;if(we.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(we=l;we!==null;){var u=we;switch(u.tag){case 0:case 11:case 15:hd(8,u,o)}var d=u.child;if(d!==null)d.return=u,we=d;else for(;we!==null;){u=we;var f=u.sibling,h=u.return;if(iT(u),u===l){we=null;break}if(f!==null){f.return=h,we=f;break}we=h}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var C=g.sibling;g.sibling=null,g=C}while(g!==null)}}we=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,we=s;else e:for(;we!==null;){if(o=we,o.flags&2048)switch(o.tag){case 0:case 11:case 15:hd(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,we=v;break e}we=o.return}}var m=t.current;for(we=m;we!==null;){s=we;var y=s.child;if(s.subtreeFlags&2064&&y!==null)y.return=s,we=y;else e:for(s=m;we!==null;){if(a=we,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mp(9,a)}}catch(b){Qt(a,a.return,b)}if(a===s){we=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,we=I;break e}we=a.return}}if(lt=i,Oa(),No&&typeof No.onPostCommitFiberRoot=="function")try{No.onPostCommitFiberRoot(cp,t)}catch{}r=!0}return r}finally{yt=n,hi.transition=e}}return!1}function YI(t,e,n){e=Vl(n,e),e=$E(t,e,1),t=Aa(t,e,1),e=dr(),t!==null&&(hf(t,1,e),Rr(t,e))}function Qt(t,e,n){if(t.tag===3)YI(t,t,n);else for(;e!==null;){if(e.tag===3){YI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wa===null||!wa.has(r))){t=Vl(n,t),t=XE(e,t,1),e=Aa(e,t,1),t=dr(),e!==null&&(hf(e,1,t),Rr(e,t));break}}e=e.return}}function PB(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dr(),t.pingedLanes|=t.suspendedLanes&n,Rn===t&&(Mn&n)===n&&(xn===4||xn===3&&(Mn&130023424)===Mn&&500>sn()-t1?dc(t,0):e1|=n),Rr(t,e)}function pT(t,e){e===0&&(t.mode&1?(e=Lf,Lf<<=1,!(Lf&130023424)&&(Lf=4194304)):e=1);var n=dr();t=Ps(t,e),t!==null&&(hf(t,e,n),Rr(t,n))}function NB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),pT(t,n)}function BB(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(fe(314))}r!==null&&r.delete(e),pT(t,n)}var gT;gT=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Er.current)Sr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Sr=!1,IB(t,e,n);Sr=!!(t.flags&131072)}else Sr=!1,jt&&e.flags&1048576&&yE(e,u0,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ih(t,e),t=e.pendingProps;var i=Ol(e,qn.current);xl(e,n),i=Xy(null,e,r,t,i,n);var o=Ky();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tr(r)?(o=!0,c0(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,zy(e),i.updater=gp,e.stateNode=i,i._reactInternals=e,Tv(e,r,t,n),e=Dv(null,e,r,!0,o,n)):(e.tag=0,jt&&o&&Oy(e),rr(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ih(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=OB(r),t=wi(r,t),i){case 0:e=_v(null,e,r,t,n);break e;case 1:e=GI(null,e,r,t,n);break e;case 11:e=UI(null,e,r,t,n);break e;case 14:e=VI(null,e,r,wi(r.type,t),n);break e}throw Error(fe(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),_v(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),GI(t,e,r,i,n);case 3:e:{if(qE(e),t===null)throw Error(fe(387));r=e.pendingProps,o=e.memoizedState,i=o.element,SE(t,e),h0(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Vl(Error(fe(423)),e),e=WI(t,e,r,n,i);break e}else if(r!==i){i=Vl(Error(fe(424)),e),e=WI(t,e,r,n,i);break e}else for($r=ba(e.stateNode.containerInfo.firstChild),Kr=e,jt=!0,Oi=null,n=AE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ml(),r===i){e=Ns(t,e,n);break e}rr(t,e,r,n)}e=e.child}return e;case 5:return kE(e),t===null&&Sv(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,xv(r,i)?s=null:o!==null&&xv(r,o)&&(e.flags|=32),YE(t,e),rr(t,e,s,n),e.child;case 6:return t===null&&Sv(e),null;case 13:return QE(t,e,n);case 4:return jy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ll(e,null,r,n):rr(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),UI(t,e,r,i,n);case 7:return rr(t,e,e.pendingProps,n),e.child;case 8:return rr(t,e,e.pendingProps.children,n),e.child;case 12:return rr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,_t(d0,r._currentValue),r._currentValue=s,o!==null)if($i(o.value,s)){if(o.children===i.children&&!Er.current){e=Ns(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=ks(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),kv(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(fe(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),kv(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}rr(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,xl(e,n),i=pi(i),r=r(i),e.flags|=1,rr(t,e,r,n),e.child;case 14:return r=e.type,i=wi(r,e.pendingProps),i=wi(r.type,i),VI(t,e,r,i,n);case 15:return KE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:wi(r,i),Ih(t,e),e.tag=1,Tr(r)?(t=!0,c0(e)):t=!1,xl(e,n),ZE(e,r,i),Tv(e,r,i,n),Dv(null,e,r,!0,t,n);case 19:return eT(t,e,n);case 22:return JE(t,e,n)}throw Error(fe(156,e.tag))};function mT(t,e){return zk(t,e)}function FB(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(t,e,n,r){return new FB(t,e,n,r)}function o1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function OB(t){if(typeof t=="function")return o1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===wy)return 11;if(t===Sy)return 14}return 2}function ka(t,e){var n=t.alternate;return n===null?(n=ci(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wh(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")o1(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case nl:return fc(n.children,i,o,e);case Ay:s=8,i|=8;break;case qm:return t=ci(12,n,e,i|2),t.elementType=qm,t.lanes=o,t;case Qm:return t=ci(13,n,e,i),t.elementType=Qm,t.lanes=o,t;case ev:return t=ci(19,n,e,i),t.elementType=ev,t.lanes=o,t;case kk:return Cp(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case wk:s=10;break e;case Sk:s=9;break e;case wy:s=11;break e;case Sy:s=14;break e;case na:s=16,r=null;break e}throw Error(fe(130,t==null?t:typeof t,""))}return e=ci(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function fc(t,e,n,r){return t=ci(7,t,r,e),t.lanes=n,t}function Cp(t,e,n,r){return t=ci(22,t,r,e),t.elementType=kk,t.lanes=n,t.stateNode={isHidden:!1},t}function wg(t,e,n){return t=ci(6,t,null,e),t.lanes=n,t}function Sg(t,e,n){return e=ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MB(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=og(0),this.expirationTimes=og(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=og(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function s1(t,e,n,r,i,o,s,a,c){return t=new MB(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ci(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},zy(o),t}function LB(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function vT(t){if(!t)return _a;t=t._reactInternals;e:{if(Bc(t)!==t||t.tag!==1)throw Error(fe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(fe(171))}if(t.tag===1){var n=t.type;if(Tr(n))return vE(t,n,e)}return e}function CT(t,e,n,r,i,o,s,a,c){return t=s1(n,r,!0,t,i,o,s,a,c),t.context=vT(null),n=t.current,r=dr(),i=Sa(n),o=ks(r,i),o.callback=e??null,Aa(n,o,i),t.current.lanes=i,hf(t,i,r),Rr(t,r),t}function yp(t,e,n,r){var i=e.current,o=dr(),s=Sa(i);return n=vT(n),e.context===null?e.context=n:e.pendingContext=n,e=ks(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Aa(i,e,s),t!==null&&(Hi(t,i,s,o),Ch(t,i,s)),s}function I0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function a1(t,e){qI(t,e),(t=t.alternate)&&qI(t,e)}function UB(){return null}var yT=typeof reportError=="function"?reportError:function(t){console.error(t)};function c1(t){this._internalRoot=t}xp.prototype.render=c1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(fe(409));yp(t,e,null,null)};xp.prototype.unmount=c1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bc(function(){yp(null,t,null,null)}),e[Ds]=null}};function xp(t){this._internalRoot=t}xp.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jk();t={blockedOn:null,target:t,priority:e};for(var n=0;n<oa.length&&e!==0&&e<oa[n].priority;n++);oa.splice(n,0,t),n===0&&qk(t)}};function l1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ip(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function QI(){}function VB(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=I0(s);o.call(l)}}var s=CT(e,r,t,0,null,!1,!1,"",QI);return t._reactRootContainer=s,t[Ds]=s.current,Bd(t.nodeType===8?t.parentNode:t),bc(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=I0(c);a.call(l)}}var c=s1(t,0,!1,null,null,!1,!1,"",QI);return t._reactRootContainer=c,t[Ds]=c.current,Bd(t.nodeType===8?t.parentNode:t),bc(function(){yp(e,c,n,r)}),c}function bp(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=I0(s);a.call(c)}}yp(e,s,t,i)}else s=VB(n,e,t,i,r);return I0(s)}Xk=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xu(e.pendingLanes);n!==0&&(Ty(e,n|1),Rr(e,sn()),!(lt&6)&&(Gl=sn()+500,Oa()))}break;case 13:bc(function(){var r=Ps(t,1);if(r!==null){var i=dr();Hi(r,t,1,i)}}),a1(t,1)}};Ry=function(t){if(t.tag===13){var e=Ps(t,134217728);if(e!==null){var n=dr();Hi(e,t,134217728,n)}a1(t,134217728)}};Kk=function(t){if(t.tag===13){var e=Sa(t),n=Ps(t,e);if(n!==null){var r=dr();Hi(n,t,e,r)}a1(t,e)}};Jk=function(){return yt};Yk=function(t,e){var n=yt;try{return yt=t,e()}finally{yt=n}};uv=function(t,e,n){switch(e){case"input":if(rv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=fp(r);if(!i)throw Error(fe(90));Tk(r),rv(r,i)}}}break;case"textarea":_k(t,n);break;case"select":e=n.value,e!=null&&ml(t,!!n.multiple,e,!1)}};Mk=n1;Lk=bc;var GB={usingClientEntryPoint:!1,Events:[gf,sl,fp,Fk,Ok,n1]},Tu={findFiberByHostInstance:rc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WB={bundleType:Tu.bundleType,version:Tu.version,rendererPackageName:Tu.rendererPackageName,rendererConfig:Tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ls.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gk(t),t===null?null:t.stateNode},findFiberByHostInstance:Tu.findFiberByHostInstance||UB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{cp=Kf.inject(WB),No=Kf}catch{}}ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GB;ei.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l1(e))throw Error(fe(200));return LB(t,e,null,n)};ei.createRoot=function(t,e){if(!l1(t))throw Error(fe(299));var n=!1,r="",i=yT;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=s1(t,1,!1,null,null,n,!1,r,i),t[Ds]=e.current,Bd(t.nodeType===8?t.parentNode:t),new c1(e)};ei.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(fe(188)):(t=Object.keys(t).join(","),Error(fe(268,t)));return t=Gk(e),t=t===null?null:t.stateNode,t};ei.flushSync=function(t){return bc(t)};ei.hydrate=function(t,e,n){if(!Ip(e))throw Error(fe(200));return bp(null,t,e,!0,n)};ei.hydrateRoot=function(t,e,n){if(!l1(t))throw Error(fe(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=yT;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=CT(e,null,t,1,n??null,i,!1,o,s),t[Ds]=e.current,Bd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new xp(e)};ei.render=function(t,e,n){if(!Ip(e))throw Error(fe(200));return bp(null,t,e,!1,n)};ei.unmountComponentAtNode=function(t){if(!Ip(t))throw Error(fe(40));return t._reactRootContainer?(bc(function(){bp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ds]=null})}),!0):!1};ei.unstable_batchedUpdates=n1;ei.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ip(n))throw Error(fe(200));if(t==null||t._reactInternals===void 0)throw Error(fe(38));return bp(t,e,n,!1,r)};ei.version="18.3.1-next-f1338f8080-20240426";function xT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(xT)}catch(t){console.error(t)}}xT(),xk.exports=ei;var u1=xk.exports;const zB=Ql(u1),jB=ck({__proto__:null,default:zB},[u1]);var eb=u1;Jm.createRoot=eb.createRoot,Jm.hydrateRoot=eb.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wt(){return Wt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wt.apply(this,arguments)}var hn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(hn||(hn={}));const tb="popstate";function HB(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return zd("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:vf(i)}return $B(e,n,null,t)}function ct(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Wl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZB(){return Math.random().toString(36).substr(2,8)}function nb(t,e){return{usr:t.state,key:t.key,idx:e}}function zd(t,e,n,r){return n===void 0&&(n=null),Wt({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ma(e):e,{state:n,key:e&&e.key||r||ZB()})}function vf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ma(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function $B(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=hn.Pop,c=null,l=u();l==null&&(l=0,s.replaceState(Wt({},s.state,{idx:l}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=hn.Pop;let C=u(),v=C==null?null:C-l;l=C,c&&c({action:a,location:g.location,delta:v})}function f(C,v){a=hn.Push;let m=zd(g.location,C,v);l=u()+1;let y=nb(m,l),I=g.createHref(m);try{s.pushState(y,"",I)}catch(b){if(b instanceof DOMException&&b.name==="DataCloneError")throw b;i.location.assign(I)}o&&c&&c({action:a,location:g.location,delta:1})}function h(C,v){a=hn.Replace;let m=zd(g.location,C,v);l=u();let y=nb(m,l),I=g.createHref(m);s.replaceState(y,"",I),o&&c&&c({action:a,location:g.location,delta:0})}function p(C){let v=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof C=="string"?C:vf(C);return m=m.replace(/ $/,"%20"),ct(v,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,v)}let g={get action(){return a},get location(){return t(i,s)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(tb,d),c=C,()=>{i.removeEventListener(tb,d),c=null}},createHref(C){return e(i,C)},createURL:p,encodeLocation(C){let v=p(C);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:h,go(C){return s.go(C)}};return g}var It;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(It||(It={}));const XB=new Set(["lazy","caseSensitive","path","id","index","children"]);function KB(t){return t.index===!0}function b0(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,String(o)],a=typeof i.id=="string"?i.id:s.join("-");if(ct(i.index!==!0||!i.children,"Cannot specify children on an index route"),ct(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),KB(i)){let c=Wt({},i,e(i),{id:a});return r[a]=c,c}else{let c=Wt({},i,e(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=b0(i.children,e,s,r)),c}})}function Ja(t,e,n){return n===void 0&&(n="/"),Sh(t,e,n,!1)}function Sh(t,e,n,r){let i=typeof e=="string"?Ma(e):e,o=Cf(i.pathname||"/",n);if(o==null)return null;let s=IT(t);YB(s);let a=null;for(let c=0;a==null&&c<s.length;++c){let l=c5(o);a=s5(s[c],l,r)}return a}function JB(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function IT(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};c.relativePath.startsWith("/")&&(ct(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=hc([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(ct(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),IT(o.children,e,u,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:i5(l,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let c of bT(o.path))i(o,s,c)}),e}function bT(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=bT(r.join("/")),a=[];return a.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...s),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function YB(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:o5(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qB=/^:[\w-]+$/,QB=3,e5=2,t5=1,n5=10,r5=-2,rb=t=>t==="*";function i5(t,e){let n=t.split("/"),r=n.length;return n.some(rb)&&(r+=r5),e&&(r+=e5),n.filter(i=>!rb(i)).reduce((i,o)=>i+(qB.test(o)?QB:o===""?t5:n5),r)}function o5(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function s5(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=ib({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=ib({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:hc([o,d.pathname]),pathnameBase:h5(hc([o,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(o=hc([o,d.pathnameBase]))}return s}function ib(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=a5(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let g=a[d]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?l[f]=void 0:l[f]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:t}}function a5(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Wl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function c5(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Cf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function l5(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ma(t):t;return{pathname:n?n.startsWith("/")?n:u5(n,e):e,search:p5(r),hash:g5(i)}}function u5(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function kg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function d5(t,e){let n=AT(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function f5(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ma(t):(i=Wt({},t),ct(!i.pathname||!i.pathname.includes("?"),kg("?","pathname","search",i)),ct(!i.pathname||!i.pathname.includes("#"),kg("#","pathname","hash",i)),ct(!i.search||!i.search.includes("#"),kg("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?e[d]:"/"}let c=l5(i,a),l=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const hc=t=>t.join("/").replace(/\/\/+/g,"/"),h5=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),p5=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,g5=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class A0{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function Ap(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wT=["post","put","patch","delete"],m5=new Set(wT),v5=["get",...wT],C5=new Set(v5),y5=new Set([301,302,303,307,308]),x5=new Set([307,308]),Eg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},I5={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ru={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},d1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,b5=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),ST="remix-router-transitions";function A5(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;ct(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let U=t.detectErrorBoundary;i=H=>({hasErrorBoundary:U(H)})}else i=b5;let o={},s=b0(t.routes,i,void 0,o),a,c=t.basename||"/",l=t.dataStrategy||E5,u=t.patchRoutesOnNavigation,d=Wt({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),f=null,h=new Set,p=null,g=null,C=null,v=t.hydrationData!=null,m=Ja(s,t.history.location,c),y=null;if(m==null&&!u){let U=Cr(404,{pathname:t.history.location.pathname}),{matches:H,route:J}=gb(s);m=H,y={[J.id]:U}}m&&!t.hydrationData&&yi(m,s,t.history.location.pathname).active&&(m=null);let I;if(m)if(m.some(U=>U.route.lazy))I=!1;else if(!m.some(U=>U.route.loader))I=!0;else if(d.v7_partialHydration){let U=t.hydrationData?t.hydrationData.loaderData:null,H=t.hydrationData?t.hydrationData.errors:null;if(H){let J=m.findIndex(oe=>H[oe.route.id]!==void 0);I=m.slice(0,J+1).every(oe=>!jv(oe.route,U,H))}else I=m.every(J=>!jv(J.route,U,H))}else I=t.hydrationData!=null;else if(I=!1,m=[],d.v7_partialHydration){let U=yi(null,s,t.history.location.pathname);U.active&&U.matches&&(m=U.matches)}let b,A={historyAction:t.history.action,location:t.history.location,matches:m,initialized:I,navigation:Eg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},E=hn.Pop,k=!1,D,T=!1,R=new Map,P=null,M=!1,G=!1,j=[],Q=new Set,te=new Map,$=0,q=-1,ne=new Map,F=new Set,z=new Map,K=new Map,ee=new Set,ae=new Map,ge=new Map,Fe;function le(){if(f=t.history.listen(U=>{let{action:H,location:J,delta:oe}=U;if(Fe){Fe(),Fe=void 0;return}Wl(ge.size===0||oe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ce=to({currentLocation:A.location,nextLocation:J,historyAction:H});if(Ce&&oe!=null){let Re=new Promise(Me=>{Fe=Me});t.history.go(oe*-1),Xe(Ce,{state:"blocked",location:J,proceed(){Xe(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:J}),Re.then(()=>t.history.go(oe))},reset(){let Me=new Map(A.blockers);Me.set(Ce,Ru),ot({blockers:Me})}});return}return he(H,J)}),n){G5(e,R);let U=()=>W5(e,R);e.addEventListener("pagehide",U),P=()=>e.removeEventListener("pagehide",U)}return A.initialized||he(hn.Pop,A.location,{initialHydration:!0}),b}function Pt(){f&&f(),P&&P(),h.clear(),D&&D.abort(),A.fetchers.forEach((U,H)=>B(H)),A.blockers.forEach((U,H)=>ht(H))}function Gt(U){return h.add(U),()=>h.delete(U)}function ot(U,H){H===void 0&&(H={}),A=Wt({},A,U);let J=[],oe=[];d.v7_fetcherPersist&&A.fetchers.forEach((Ce,Re)=>{Ce.state==="idle"&&(ee.has(Re)?oe.push(Re):J.push(Re))}),[...h].forEach(Ce=>Ce(A,{deletedFetchers:oe,viewTransitionOpts:H.viewTransitionOpts,flushSync:H.flushSync===!0})),d.v7_fetcherPersist&&(J.forEach(Ce=>A.fetchers.delete(Ce)),oe.forEach(Ce=>B(Ce)))}function ut(U,H,J){var oe,Ce;let{flushSync:Re}=J===void 0?{}:J,Me=A.actionData!=null&&A.navigation.formMethod!=null&&Bi(A.navigation.formMethod)&&A.navigation.state==="loading"&&((oe=U.state)==null?void 0:oe._isRedirect)!==!0,be;H.actionData?Object.keys(H.actionData).length>0?be=H.actionData:be=null:Me?be=A.actionData:be=null;let ke=H.loaderData?hb(A.loaderData,H.loaderData,H.matches||[],H.errors):A.loaderData,ve=A.blockers;ve.size>0&&(ve=new Map(ve),ve.forEach((qe,cn)=>ve.set(cn,Ru)));let De=k===!0||A.navigation.formMethod!=null&&Bi(A.navigation.formMethod)&&((Ce=U.state)==null?void 0:Ce._isRedirect)!==!0;a&&(s=a,a=void 0),M||E===hn.Pop||(E===hn.Push?t.history.push(U,U.state):E===hn.Replace&&t.history.replace(U,U.state));let He;if(E===hn.Pop){let qe=R.get(A.location.pathname);qe&&qe.has(U.pathname)?He={currentLocation:A.location,nextLocation:U}:R.has(U.pathname)&&(He={currentLocation:U,nextLocation:A.location})}else if(T){let qe=R.get(A.location.pathname);qe?qe.add(U.pathname):(qe=new Set([U.pathname]),R.set(A.location.pathname,qe)),He={currentLocation:A.location,nextLocation:U}}ot(Wt({},H,{actionData:be,loaderData:ke,historyAction:E,location:U,initialized:!0,navigation:Eg,revalidation:"idle",restoreScrollPosition:Ha(U,H.matches||A.matches),preventScrollReset:De,blockers:ve}),{viewTransitionOpts:He,flushSync:Re===!0}),E=hn.Pop,k=!1,T=!1,M=!1,G=!1,j=[]}async function mt(U,H){if(typeof U=="number"){t.history.go(U);return}let J=zv(A.location,A.matches,c,d.v7_prependBasename,U,d.v7_relativeSplatPath,H==null?void 0:H.fromRouteId,H==null?void 0:H.relative),{path:oe,submission:Ce,error:Re}=ob(d.v7_normalizeFormMethod,!1,J,H),Me=A.location,be=zd(A.location,oe,H&&H.state);be=Wt({},be,t.history.encodeLocation(be));let ke=H&&H.replace!=null?H.replace:void 0,ve=hn.Push;ke===!0?ve=hn.Replace:ke===!1||Ce!=null&&Bi(Ce.formMethod)&&Ce.formAction===A.location.pathname+A.location.search&&(ve=hn.Replace);let De=H&&"preventScrollReset"in H?H.preventScrollReset===!0:void 0,He=(H&&H.flushSync)===!0,qe=to({currentLocation:Me,nextLocation:be,historyAction:ve});if(qe){Xe(qe,{state:"blocked",location:be,proceed(){Xe(qe,{state:"proceeding",proceed:void 0,reset:void 0,location:be}),mt(U,H)},reset(){let cn=new Map(A.blockers);cn.set(qe,Ru),ot({blockers:cn})}});return}return await he(ve,be,{submission:Ce,pendingError:Re,preventScrollReset:De,replace:H&&H.replace,enableViewTransition:H&&H.viewTransition,flushSync:He})}function st(){if(tn(),ot({revalidation:"loading"}),A.navigation.state!=="submitting"){if(A.navigation.state==="idle"){he(A.historyAction,A.location,{startUninterruptedRevalidation:!0});return}he(E||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:T===!0})}}async function he(U,H,J){D&&D.abort(),D=null,E=U,M=(J&&J.startUninterruptedRevalidation)===!0,yu(A.location,A.matches),k=(J&&J.preventScrollReset)===!0,T=(J&&J.enableViewTransition)===!0;let oe=a||s,Ce=J&&J.overrideNavigation,Re=Ja(oe,H,c),Me=(J&&J.flushSync)===!0,be=yi(Re,oe,H.pathname);if(be.active&&be.matches&&(Re=be.matches),!Re){let{error:xt,notFoundMatches:pe,route:V}=js(H.pathname);ut(H,{matches:pe,loaderData:{},errors:{[V.id]:xt}},{flushSync:Me});return}if(A.initialized&&!G&&N5(A.location,H)&&!(J&&J.submission&&Bi(J.submission.formMethod))){ut(H,{matches:Re},{flushSync:Me});return}D=new AbortController;let ke=$c(t.history,H,D.signal,J&&J.submission),ve;if(J&&J.pendingError)ve=[Ya(Re).route.id,{type:It.error,error:J.pendingError}];else if(J&&J.submission&&Bi(J.submission.formMethod)){let xt=await xe(ke,H,J.submission,Re,be.active,{replace:J.replace,flushSync:Me});if(xt.shortCircuited)return;if(xt.pendingActionResult){let[pe,V]=xt.pendingActionResult;if(Hr(V)&&Ap(V.error)&&V.error.status===404){D=null,ut(H,{matches:xt.matches,loaderData:{},errors:{[pe]:V.error}});return}}Re=xt.matches||Re,ve=xt.pendingActionResult,Ce=Tg(H,J.submission),Me=!1,be.active=!1,ke=$c(t.history,ke.url,ke.signal)}let{shortCircuited:De,matches:He,loaderData:qe,errors:cn}=await Ue(ke,H,Re,be.active,Ce,J&&J.submission,J&&J.fetcherSubmission,J&&J.replace,J&&J.initialHydration===!0,Me,ve);De||(D=null,ut(H,Wt({matches:He||Re},pb(ve),{loaderData:qe,errors:cn})))}async function xe(U,H,J,oe,Ce,Re){Re===void 0&&(Re={}),tn();let Me=U5(H,J);if(ot({navigation:Me},{flushSync:Re.flushSync===!0}),Ce){let ve=await Ho(oe,H.pathname,U.signal);if(ve.type==="aborted")return{shortCircuited:!0};if(ve.type==="error"){let De=Ya(ve.partialMatches).route.id;return{matches:ve.partialMatches,pendingActionResult:[De,{type:It.error,error:ve.error}]}}else if(ve.matches)oe=ve.matches;else{let{notFoundMatches:De,error:He,route:qe}=js(H.pathname);return{matches:De,pendingActionResult:[qe.id,{type:It.error,error:He}]}}}let be,ke=Ju(oe,H);if(!ke.route.action&&!ke.route.lazy)be={type:It.error,error:Cr(405,{method:U.method,pathname:H.pathname,routeId:ke.route.id})};else if(be=(await Yt("action",A,U,[ke],oe,null))[ke.route.id],U.signal.aborted)return{shortCircuited:!0};if(sc(be)){let ve;return Re&&Re.replace!=null?ve=Re.replace:ve=ub(be.response.headers.get("Location"),new URL(U.url),c)===A.location.pathname+A.location.search,await pt(U,be,!0,{submission:J,replace:ve}),{shortCircuited:!0}}if(ua(be))throw Cr(400,{type:"defer-action"});if(Hr(be)){let ve=Ya(oe,ke.route.id);return(Re&&Re.replace)!==!0&&(E=hn.Push),{matches:oe,pendingActionResult:[ve.route.id,be]}}return{matches:oe,pendingActionResult:[ke.route.id,be]}}async function Ue(U,H,J,oe,Ce,Re,Me,be,ke,ve,De){let He=Ce||Tg(H,Re),qe=Re||Me||vb(He),cn=!M&&(!d.v7_partialHydration||!ke);if(oe){if(cn){let Nt=Le(De);ot(Wt({navigation:He},Nt!==void 0?{actionData:Nt}:{}),{flushSync:ve})}let nt=await Ho(J,H.pathname,U.signal);if(nt.type==="aborted")return{shortCircuited:!0};if(nt.type==="error"){let Nt=Ya(nt.partialMatches).route.id;return{matches:nt.partialMatches,loaderData:{},errors:{[Nt]:nt.error}}}else if(nt.matches)J=nt.matches;else{let{error:Nt,notFoundMatches:jc,route:xu}=js(H.pathname);return{matches:jc,loaderData:{},errors:{[xu.id]:Nt}}}}let xt=a||s,[pe,V]=ab(t.history,A,J,qe,H,d.v7_partialHydration&&ke===!0,d.v7_skipActionErrorRevalidation,G,j,Q,ee,z,F,xt,c,De);if(ja(nt=>!(J&&J.some(Nt=>Nt.route.id===nt))||pe&&pe.some(Nt=>Nt.route.id===nt)),q=++$,pe.length===0&&V.length===0){let nt=Pe();return ut(H,Wt({matches:J,loaderData:{},errors:De&&Hr(De[1])?{[De[0]]:De[1].error}:null},pb(De),nt?{fetchers:new Map(A.fetchers)}:{}),{flushSync:ve}),{shortCircuited:!0}}if(cn){let nt={};if(!oe){nt.navigation=He;let Nt=Le(De);Nt!==void 0&&(nt.actionData=Nt)}V.length>0&&(nt.fetchers=Ne(V)),ot(nt,{flushSync:ve})}V.forEach(nt=>{X(nt.key),nt.controller&&te.set(nt.key,nt.controller)});let de=()=>V.forEach(nt=>X(nt.key));D&&D.signal.addEventListener("abort",de);let{loaderResults:Ae,fetcherResults:Qe}=await Ht(A,J,pe,V,U);if(U.signal.aborted)return{shortCircuited:!0};D&&D.signal.removeEventListener("abort",de),V.forEach(nt=>te.delete(nt.key));let St=Jf(Ae);if(St)return await pt(U,St.result,!0,{replace:be}),{shortCircuited:!0};if(St=Jf(Qe),St)return F.add(St.key),await pt(U,St.result,!0,{replace:be}),{shortCircuited:!0};let{loaderData:nn,errors:ln}=fb(A,J,Ae,De,V,Qe,ae);ae.forEach((nt,Nt)=>{nt.subscribe(jc=>{(jc||nt.done)&&ae.delete(Nt)})}),d.v7_partialHydration&&ke&&A.errors&&(ln=Wt({},A.errors,ln));let wn=Pe(),no=tt(q),un=wn||no||V.length>0;return Wt({matches:J,loaderData:nn,errors:ln},un?{fetchers:new Map(A.fetchers)}:{})}function Le(U){if(U&&!Hr(U[1]))return{[U[0]]:U[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function Ne(U){return U.forEach(H=>{let J=A.fetchers.get(H.key),oe=_u(void 0,J?J.data:void 0);A.fetchers.set(H.key,oe)}),new Map(A.fetchers)}function je(U,H,J,oe){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");X(U);let Ce=(oe&&oe.flushSync)===!0,Re=a||s,Me=zv(A.location,A.matches,c,d.v7_prependBasename,J,d.v7_relativeSplatPath,H,oe==null?void 0:oe.relative),be=Ja(Re,Me,c),ke=yi(be,Re,Me);if(ke.active&&ke.matches&&(be=ke.matches),!be){x(U,H,Cr(404,{pathname:Me}),{flushSync:Ce});return}let{path:ve,submission:De,error:He}=ob(d.v7_normalizeFormMethod,!0,Me,oe);if(He){x(U,H,He,{flushSync:Ce});return}let qe=Ju(be,ve),cn=(oe&&oe.preventScrollReset)===!0;if(De&&Bi(De.formMethod)){it(U,H,ve,qe,be,ke.active,Ce,cn,De);return}z.set(U,{routeId:H,path:ve}),Ye(U,H,ve,qe,be,ke.active,Ce,cn,De)}async function it(U,H,J,oe,Ce,Re,Me,be,ke){tn(),z.delete(U);function ve(dn){if(!dn.route.action&&!dn.route.lazy){let Hc=Cr(405,{method:ke.formMethod,pathname:J,routeId:H});return x(U,H,Hc,{flushSync:Me}),!0}return!1}if(!Re&&ve(oe))return;let De=A.fetchers.get(U);_(U,V5(ke,De),{flushSync:Me});let He=new AbortController,qe=$c(t.history,J,He.signal,ke);if(Re){let dn=await Ho(Ce,J,qe.signal);if(dn.type==="aborted")return;if(dn.type==="error"){x(U,H,dn.error,{flushSync:Me});return}else if(dn.matches){if(Ce=dn.matches,oe=Ju(Ce,J),ve(oe))return}else{x(U,H,Cr(404,{pathname:J}),{flushSync:Me});return}}te.set(U,He);let cn=$,pe=(await Yt("action",A,qe,[oe],Ce,U))[oe.route.id];if(qe.signal.aborted){te.get(U)===He&&te.delete(U);return}if(d.v7_fetcherPersist&&ee.has(U)){if(sc(pe)||Hr(pe)){_(U,Ks(void 0));return}}else{if(sc(pe))if(te.delete(U),q>cn){_(U,Ks(void 0));return}else return F.add(U),_(U,_u(ke)),pt(qe,pe,!1,{fetcherSubmission:ke,preventScrollReset:be});if(Hr(pe)){x(U,H,pe.error);return}}if(ua(pe))throw Cr(400,{type:"defer-action"});let V=A.navigation.location||A.location,de=$c(t.history,V,He.signal),Ae=a||s,Qe=A.navigation.state!=="idle"?Ja(Ae,A.navigation.location,c):A.matches;ct(Qe,"Didn't find any matches after fetcher action");let St=++$;ne.set(U,St);let nn=_u(ke,pe.data);A.fetchers.set(U,nn);let[ln,wn]=ab(t.history,A,Qe,ke,V,!1,d.v7_skipActionErrorRevalidation,G,j,Q,ee,z,F,Ae,c,[oe.route.id,pe]);wn.filter(dn=>dn.key!==U).forEach(dn=>{let Hc=dn.key,jx=A.fetchers.get(Hc),h3=_u(void 0,jx?jx.data:void 0);A.fetchers.set(Hc,h3),X(Hc),dn.controller&&te.set(Hc,dn.controller)}),ot({fetchers:new Map(A.fetchers)});let no=()=>wn.forEach(dn=>X(dn.key));He.signal.addEventListener("abort",no);let{loaderResults:un,fetcherResults:nt}=await Ht(A,Qe,ln,wn,de);if(He.signal.aborted)return;He.signal.removeEventListener("abort",no),ne.delete(U),te.delete(U),wn.forEach(dn=>te.delete(dn.key));let Nt=Jf(un);if(Nt)return pt(de,Nt.result,!1,{preventScrollReset:be});if(Nt=Jf(nt),Nt)return F.add(Nt.key),pt(de,Nt.result,!1,{preventScrollReset:be});let{loaderData:jc,errors:xu}=fb(A,Qe,un,void 0,wn,nt,ae);if(A.fetchers.has(U)){let dn=Ks(pe.data);A.fetchers.set(U,dn)}tt(St),A.navigation.state==="loading"&&St>q?(ct(E,"Expected pending action"),D&&D.abort(),ut(A.navigation.location,{matches:Qe,loaderData:jc,errors:xu,fetchers:new Map(A.fetchers)})):(ot({errors:xu,loaderData:hb(A.loaderData,jc,Qe,xu),fetchers:new Map(A.fetchers)}),G=!1)}async function Ye(U,H,J,oe,Ce,Re,Me,be,ke){let ve=A.fetchers.get(U);_(U,_u(ke,ve?ve.data:void 0),{flushSync:Me});let De=new AbortController,He=$c(t.history,J,De.signal);if(Re){let pe=await Ho(Ce,J,He.signal);if(pe.type==="aborted")return;if(pe.type==="error"){x(U,H,pe.error,{flushSync:Me});return}else if(pe.matches)Ce=pe.matches,oe=Ju(Ce,J);else{x(U,H,Cr(404,{pathname:J}),{flushSync:Me});return}}te.set(U,De);let qe=$,xt=(await Yt("loader",A,He,[oe],Ce,U))[oe.route.id];if(ua(xt)&&(xt=await f1(xt,He.signal,!0)||xt),te.get(U)===De&&te.delete(U),!He.signal.aborted){if(ee.has(U)){_(U,Ks(void 0));return}if(sc(xt))if(q>qe){_(U,Ks(void 0));return}else{F.add(U),await pt(He,xt,!1,{preventScrollReset:be});return}if(Hr(xt)){x(U,H,xt.error);return}ct(!ua(xt),"Unhandled fetcher deferred data"),_(U,Ks(xt.data))}}async function pt(U,H,J,oe){let{submission:Ce,fetcherSubmission:Re,preventScrollReset:Me,replace:be}=oe===void 0?{}:oe;H.response.headers.has("X-Remix-Revalidate")&&(G=!0);let ke=H.response.headers.get("Location");ct(ke,"Expected a Location header on the redirect Response"),ke=ub(ke,new URL(U.url),c);let ve=zd(A.location,ke,{_isRedirect:!0});if(n){let pe=!1;if(H.response.headers.has("X-Remix-Reload-Document"))pe=!0;else if(d1.test(ke)){const V=t.history.createURL(ke);pe=V.origin!==e.location.origin||Cf(V.pathname,c)==null}if(pe){be?e.location.replace(ke):e.location.assign(ke);return}}D=null;let De=be===!0||H.response.headers.has("X-Remix-Replace")?hn.Replace:hn.Push,{formMethod:He,formAction:qe,formEncType:cn}=A.navigation;!Ce&&!Re&&He&&qe&&cn&&(Ce=vb(A.navigation));let xt=Ce||Re;if(x5.has(H.response.status)&&xt&&Bi(xt.formMethod))await he(De,ve,{submission:Wt({},xt,{formAction:ke}),preventScrollReset:Me||k,enableViewTransition:J?T:void 0});else{let pe=Tg(ve,Ce);await he(De,ve,{overrideNavigation:pe,fetcherSubmission:Re,preventScrollReset:Me||k,enableViewTransition:J?T:void 0})}}async function Yt(U,H,J,oe,Ce,Re){let Me,be={};try{Me=await T5(l,U,H,J,oe,Ce,Re,o,i)}catch(ke){return oe.forEach(ve=>{be[ve.route.id]={type:It.error,error:ke}}),be}for(let[ke,ve]of Object.entries(Me))if(B5(ve)){let De=ve.result;be[ke]={type:It.redirect,response:D5(De,J,ke,Ce,c,d.v7_relativeSplatPath)}}else be[ke]=await _5(ve);return be}async function Ht(U,H,J,oe,Ce){let Re=U.matches,Me=Yt("loader",U,Ce,J,H,null),be=Promise.all(oe.map(async De=>{if(De.matches&&De.match&&De.controller){let qe=(await Yt("loader",U,$c(t.history,De.path,De.controller.signal),[De.match],De.matches,De.key))[De.match.route.id];return{[De.key]:qe}}else return Promise.resolve({[De.key]:{type:It.error,error:Cr(404,{pathname:De.path})}})})),ke=await Me,ve=(await be).reduce((De,He)=>Object.assign(De,He),{});return await Promise.all([M5(H,ke,Ce.signal,Re,U.loaderData),L5(H,ve,oe)]),{loaderResults:ke,fetcherResults:ve}}function tn(){G=!0,j.push(...ja()),z.forEach((U,H)=>{te.has(H)&&Q.add(H),X(H)})}function _(U,H,J){J===void 0&&(J={}),A.fetchers.set(U,H),ot({fetchers:new Map(A.fetchers)},{flushSync:(J&&J.flushSync)===!0})}function x(U,H,J,oe){oe===void 0&&(oe={});let Ce=Ya(A.matches,H);B(U),ot({errors:{[Ce.route.id]:J},fetchers:new Map(A.fetchers)},{flushSync:(oe&&oe.flushSync)===!0})}function w(U){return d.v7_fetcherPersist&&(K.set(U,(K.get(U)||0)+1),ee.has(U)&&ee.delete(U)),A.fetchers.get(U)||I5}function B(U){let H=A.fetchers.get(U);te.has(U)&&!(H&&H.state==="loading"&&ne.has(U))&&X(U),z.delete(U),ne.delete(U),F.delete(U),ee.delete(U),Q.delete(U),A.fetchers.delete(U)}function W(U){if(d.v7_fetcherPersist){let H=(K.get(U)||0)-1;H<=0?(K.delete(U),ee.add(U)):K.set(U,H)}else B(U);ot({fetchers:new Map(A.fetchers)})}function X(U){let H=te.get(U);H&&(H.abort(),te.delete(U))}function re(U){for(let H of U){let J=w(H),oe=Ks(J.data);A.fetchers.set(H,oe)}}function Pe(){let U=[],H=!1;for(let J of F){let oe=A.fetchers.get(J);ct(oe,"Expected fetcher: "+J),oe.state==="loading"&&(F.delete(J),U.push(J),H=!0)}return re(U),H}function tt(U){let H=[];for(let[J,oe]of ne)if(oe<U){let Ce=A.fetchers.get(J);ct(Ce,"Expected fetcher: "+J),Ce.state==="loading"&&(X(J),ne.delete(J),H.push(J))}return re(H),H.length>0}function dt(U,H){let J=A.blockers.get(U)||Ru;return ge.get(U)!==H&&ge.set(U,H),J}function ht(U){A.blockers.delete(U),ge.delete(U)}function Xe(U,H){let J=A.blockers.get(U)||Ru;ct(J.state==="unblocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="blocked"||J.state==="blocked"&&H.state==="proceeding"||J.state==="blocked"&&H.state==="unblocked"||J.state==="proceeding"&&H.state==="unblocked","Invalid blocker state transition: "+J.state+" -> "+H.state);let oe=new Map(A.blockers);oe.set(U,H),ot({blockers:oe})}function to(U){let{currentLocation:H,nextLocation:J,historyAction:oe}=U;if(ge.size===0)return;ge.size>1&&Wl(!1,"A router only supports one blocker at a time");let Ce=Array.from(ge.entries()),[Re,Me]=Ce[Ce.length-1],be=A.blockers.get(Re);if(!(be&&be.state==="proceeding")&&Me({currentLocation:H,nextLocation:J,historyAction:oe}))return Re}function js(U){let H=Cr(404,{pathname:U}),J=a||s,{matches:oe,route:Ce}=gb(J);return ja(),{notFoundMatches:oe,route:Ce,error:H}}function ja(U){let H=[];return ae.forEach((J,oe)=>{(!U||U(oe))&&(J.cancel(),H.push(oe),ae.delete(oe))}),H}function Zt(U,H,J){if(p=U,C=H,g=J||null,!v&&A.navigation===Eg){v=!0;let oe=Ha(A.location,A.matches);oe!=null&&ot({restoreScrollPosition:oe})}return()=>{p=null,C=null,g=null}}function Ci(U,H){return g&&g(U,H.map(oe=>JB(oe,A.loaderData)))||U.key}function yu(U,H){if(p&&C){let J=Ci(U,H);p[J]=C()}}function Ha(U,H){if(p){let J=Ci(U,H),oe=p[J];if(typeof oe=="number")return oe}return null}function yi(U,H,J){if(u)if(U){if(Object.keys(U[0].params).length>0)return{active:!0,matches:Sh(H,J,c,!0)}}else return{active:!0,matches:Sh(H,J,c,!0)||[]};return{active:!1,matches:null}}async function Ho(U,H,J){if(!u)return{type:"success",matches:U};let oe=U;for(;;){let Ce=a==null,Re=a||s,Me=o;try{await u({path:H,matches:oe,patch:(ve,De)=>{J.aborted||lb(ve,De,Re,Me,i)}})}catch(ve){return{type:"error",error:ve,partialMatches:oe}}finally{Ce&&!J.aborted&&(s=[...s])}if(J.aborted)return{type:"aborted"};let be=Ja(Re,H,c);if(be)return{type:"success",matches:be};let ke=Sh(Re,H,c,!0);if(!ke||oe.length===ke.length&&oe.every((ve,De)=>ve.route.id===ke[De].route.id))return{type:"success",matches:null};oe=ke}}function Wc(U){o={},a=b0(U,i,void 0,o)}function zc(U,H){let J=a==null;lb(U,H,a||s,o,i),J&&(s=[...s],ot({}))}return b={get basename(){return c},get future(){return d},get state(){return A},get routes(){return s},get window(){return e},initialize:le,subscribe:Gt,enableScrollRestoration:Zt,navigate:mt,fetch:je,revalidate:st,createHref:U=>t.history.createHref(U),encodeLocation:U=>t.history.encodeLocation(U),getFetcher:w,deleteFetcher:W,dispose:Pt,getBlocker:dt,deleteBlocker:ht,patchRoutes:zc,_internalFetchControllers:te,_internalActiveDeferreds:ae,_internalSetRoutes:Wc},b}function w5(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function zv(t,e,n,r,i,o,s,a){let c,l;if(s){c=[];for(let d of e)if(c.push(d),d.route.id===s){l=d;break}}else c=e,l=e[e.length-1];let u=f5(i||".",d5(c,o),Cf(t.pathname,n)||t.pathname,a==="path");if(i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l){let d=h1(u.search);if(l.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!l.route.index&&d){let f=new URLSearchParams(u.search),h=f.getAll("index");f.delete("index"),h.filter(g=>g).forEach(g=>f.append("index",g));let p=f.toString();u.search=p?"?"+p:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:hc([n,u.pathname])),vf(u)}function ob(t,e,n,r){if(!r||!w5(r))return{path:n};if(r.formMethod&&!O5(r.formMethod))return{path:n,error:Cr(405,{method:r.formMethod})};let i=()=>({path:n,error:Cr(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),a=TT(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Bi(s))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,p)=>{let[g,C]=p;return""+h+g+"="+C+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Bi(s))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}ct(typeof FormData=="function","FormData is not available in this environment");let c,l;if(r.formData)c=Hv(r.formData),l=r.formData;else if(r.body instanceof FormData)c=Hv(r.body),l=r.body;else if(r.body instanceof URLSearchParams)c=r.body,l=db(c);else if(r.body==null)c=new URLSearchParams,l=new FormData;else try{c=new URLSearchParams(r.body),l=db(c)}catch{return i()}let u={formMethod:s,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Bi(u.formMethod))return{path:n,submission:u};let d=Ma(n);return e&&d.search&&h1(d.search)&&c.append("index",""),d.search="?"+c,{path:vf(d),submission:u}}function sb(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function ab(t,e,n,r,i,o,s,a,c,l,u,d,f,h,p,g){let C=g?Hr(g[1])?g[1].error:g[1].data:void 0,v=t.createURL(e.location),m=t.createURL(i),y=n;o&&e.errors?y=sb(n,Object.keys(e.errors)[0],!0):g&&Hr(g[1])&&(y=sb(n,g[0]));let I=g?g[1].statusCode:void 0,b=s&&I&&I>=400,A=y.filter((k,D)=>{let{route:T}=k;if(T.lazy)return!0;if(T.loader==null)return!1;if(o)return jv(T,e.loaderData,e.errors);if(S5(e.loaderData,e.matches[D],k)||c.some(M=>M===k.route.id))return!0;let R=e.matches[D],P=k;return cb(k,Wt({currentUrl:v,currentParams:R.params,nextUrl:m,nextParams:P.params},r,{actionResult:C,actionStatus:I,defaultShouldRevalidate:b?!1:a||v.pathname+v.search===m.pathname+m.search||v.search!==m.search||kT(R,P)}))}),E=[];return d.forEach((k,D)=>{if(o||!n.some(G=>G.route.id===k.routeId)||u.has(D))return;let T=Ja(h,k.path,p);if(!T){E.push({key:D,routeId:k.routeId,path:k.path,matches:null,match:null,controller:null});return}let R=e.fetchers.get(D),P=Ju(T,k.path),M=!1;f.has(D)?M=!1:l.has(D)?(l.delete(D),M=!0):R&&R.state!=="idle"&&R.data===void 0?M=a:M=cb(P,Wt({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:m,nextParams:n[n.length-1].params},r,{actionResult:C,actionStatus:I,defaultShouldRevalidate:b?!1:a})),M&&E.push({key:D,routeId:k.routeId,path:k.path,matches:T,match:P,controller:new AbortController})}),[A,E]}function jv(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function S5(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function kT(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function cb(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function lb(t,e,n,r,i){var o;let s;if(t){let l=r[t];ct(l,"No route found to patch children into: routeId = "+t),l.children||(l.children=[]),s=l.children}else s=n;let a=e.filter(l=>!s.some(u=>ET(l,u))),c=b0(a,i,[t||"_","patch",String(((o=s)==null?void 0:o.length)||"0")],r);s.push(...c)}function ET(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>ET(n,o))}):!1}async function k5(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];ct(i,"No route found in manifest");let o={};for(let s in r){let c=i[s]!==void 0&&s!=="hasErrorBoundary";Wl(!c,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!c&&!XB.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,Wt({},e(i),{lazy:void 0}))}async function E5(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,o,s)=>Object.assign(i,{[n[s].route.id]:o}),{})}async function T5(t,e,n,r,i,o,s,a,c,l){let u=o.map(h=>h.route.lazy?k5(h.route,c,a):void 0),d=o.map((h,p)=>{let g=u[p],C=i.some(m=>m.route.id===h.route.id);return Wt({},h,{shouldLoad:C,resolve:async m=>(m&&r.method==="GET"&&(h.route.lazy||h.route.loader)&&(C=!0),C?R5(e,r,h,g,m,l):Promise.resolve({type:It.data,result:void 0}))})}),f=await t({matches:d,request:r,params:o[0].params,fetcherKey:s,context:l});try{await Promise.all(u)}catch{}return f}async function R5(t,e,n,r,i,o){let s,a,c=l=>{let u,d=new Promise((p,g)=>u=g);a=()=>u(),e.signal.addEventListener("abort",a);let f=p=>typeof l!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):l({request:e,params:n.params,context:o},...p!==void 0?[p]:[]),h=(async()=>{try{return{type:"data",result:await(i?i(g=>f(g)):f())}}catch(p){return{type:"error",result:p}}})();return Promise.race([h,d])};try{let l=n.route[t];if(r)if(l){let u,[d]=await Promise.all([c(l).catch(f=>{u=f}),r]);if(u!==void 0)throw u;s=d}else if(await r,l=n.route[t],l)s=await c(l);else if(t==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw Cr(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:It.data,result:void 0};else if(l)s=await c(l);else{let u=new URL(e.url),d=u.pathname+u.search;throw Cr(404,{pathname:d})}ct(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(l){return{type:It.error,result:l}}finally{a&&e.signal.removeEventListener("abort",a)}return s}async function _5(t){let{result:e,type:n}=t;if(RT(e)){let l;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?l=null:l=await e.json():l=await e.text()}catch(u){return{type:It.error,error:u}}return n===It.error?{type:It.error,error:new A0(e.status,e.statusText,l),statusCode:e.status,headers:e.headers}:{type:It.data,data:l,statusCode:e.status,headers:e.headers}}if(n===It.error){if(mb(e)){var r;if(e.data instanceof Error){var i;return{type:It.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new A0(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:It.error,error:e,statusCode:Ap(e)?e.status:void 0}}if(F5(e)){var o,s;return{type:It.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}if(mb(e)){var a,c;return{type:It.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}}return{type:It.data,data:e}}function D5(t,e,n,r,i,o){let s=t.headers.get("Location");if(ct(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!d1.test(s)){let a=r.slice(0,r.findIndex(c=>c.route.id===n)+1);s=zv(new URL(e.url),a,i,!0,s,o),t.headers.set("Location",s)}return t}function ub(t,e,n){if(d1.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Cf(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function $c(t,e,n,r){let i=t.createURL(TT(e)).toString(),o={signal:n};if(r&&Bi(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=Hv(r.formData):o.body=r.formData}return new Request(i,o)}function Hv(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function db(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function P5(t,e,n,r,i){let o={},s=null,a,c=!1,l={},u=n&&Hr(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let f=d.route.id,h=e[f];if(ct(!sc(h),"Cannot handle redirect results in processLoaderData"),Hr(h)){let p=h.error;u!==void 0&&(p=u,u=void 0),s=s||{};{let g=Ya(t,f);s[g.route.id]==null&&(s[g.route.id]=p)}o[f]=void 0,c||(c=!0,a=Ap(h.error)?h.error.status:500),h.headers&&(l[f]=h.headers)}else ua(h)?(r.set(f,h.deferredData),o[f]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!c&&(a=h.statusCode),h.headers&&(l[f]=h.headers)):(o[f]=h.data,h.statusCode&&h.statusCode!==200&&!c&&(a=h.statusCode),h.headers&&(l[f]=h.headers))}),u!==void 0&&n&&(s={[n[0]]:u},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:l}}function fb(t,e,n,r,i,o,s){let{loaderData:a,errors:c}=P5(e,n,r,s);return i.forEach(l=>{let{key:u,match:d,controller:f}=l,h=o[u];if(ct(h,"Did not find corresponding fetcher result"),!(f&&f.signal.aborted))if(Hr(h)){let p=Ya(t.matches,d==null?void 0:d.route.id);c&&c[p.route.id]||(c=Wt({},c,{[p.route.id]:h.error})),t.fetchers.delete(u)}else if(sc(h))ct(!1,"Unhandled fetcher revalidation redirect");else if(ua(h))ct(!1,"Unhandled fetcher deferred data");else{let p=Ks(h.data);t.fetchers.set(u,p)}}),{loaderData:a,errors:c}}function hb(t,e,n,r){let i=Wt({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function pb(t){return t?Hr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ya(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function gb(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Cr(t,e){let{pathname:n,routeId:r,method:i,type:o,message:s}=e===void 0?{}:e,a="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?c="defer() is not supported in actions":o==="invalid-body"&&(c="Unable to encode submission body")):t===403?(a="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",c='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new A0(t||500,a,new Error(c),!0)}function Jf(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(sc(i))return{key:r,result:i}}}function TT(t){let e=typeof t=="string"?Ma(t):t;return vf(Wt({},e,{hash:""}))}function N5(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function B5(t){return RT(t.result)&&y5.has(t.result.status)}function ua(t){return t.type===It.deferred}function Hr(t){return t.type===It.error}function sc(t){return(t&&t.type)===It.redirect}function mb(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function F5(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function RT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function O5(t){return C5.has(t.toLowerCase())}function Bi(t){return m5.has(t.toLowerCase())}async function M5(t,e,n,r,i){let o=Object.entries(e);for(let s=0;s<o.length;s++){let[a,c]=o[s],l=t.find(f=>(f==null?void 0:f.route.id)===a);if(!l)continue;let u=r.find(f=>f.route.id===l.route.id),d=u!=null&&!kT(u,l)&&(i&&i[l.route.id])!==void 0;ua(c)&&d&&await f1(c,n,!1).then(f=>{f&&(e[a]=f)})}}async function L5(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:s}=n[r],a=e[i];t.find(l=>(l==null?void 0:l.route.id)===o)&&ua(a)&&(ct(s,"Expected an AbortController for revalidating fetcher deferred result"),await f1(a,s.signal,!0).then(l=>{l&&(e[i]=l)}))}}async function f1(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:It.data,data:t.deferredData.unwrappedData}}catch(i){return{type:It.error,error:i}}return{type:It.data,data:t.deferredData.data}}}function h1(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Ju(t,e){let n=typeof e=="string"?Ma(e).search:e.search;if(t[t.length-1].route.index&&h1(n||""))return t[t.length-1];let r=AT(t);return r[r.length-1]}function vb(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function Tg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function U5(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function _u(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function V5(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Ks(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function G5(t,e){try{let n=t.sessionStorage.getItem(ST);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function W5(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(ST,JSON.stringify(n))}catch(r){Wl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Zv(){return Zv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zv.apply(this,arguments)}const _T=S.createContext(null),DT=S.createContext(null),PT=S.createContext(null),p1=S.createContext(null),wp=S.createContext({outlet:null,matches:[],isDataRoute:!1}),NT=S.createContext(null);function g1(){return S.useContext(p1)!=null}function BT(){return g1()||ct(!1),S.useContext(p1).location}function z5(t,e,n,r){g1()||ct(!1);let{navigator:i}=S.useContext(PT),{matches:o}=S.useContext(wp),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let l=BT(),u;u=l;let d=u.pathname||"/",f=d;if(c!=="/"){let g=c.replace(/^\//,"").split("/");f="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let h=Ja(t,{pathname:f});return X5(h&&h.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:hc([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:hc([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,r)}function j5(){let t=q5(),e=Ap(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:i},n):null,null)}const H5=S.createElement(j5,null);class Z5 extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(wp.Provider,{value:this.props.routeContext},S.createElement(NT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $5(t){let{routeContext:e,match:n,children:r}=t,i=S.useContext(_T);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(wp.Provider,{value:e},r)}function X5(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||ct(!1),s=s.slice(0,Math.min(s.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,f)=>{let h,p=!1,g=null,C=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||H5,c&&(l<0&&f===0?(Q5("route-fallback"),p=!0,C=null):l===f&&(p=!0,C=d.route.hydrateFallbackElement||null)));let v=e.concat(s.slice(0,f+1)),m=()=>{let y;return h?y=g:p?y=C:d.route.Component?y=S.createElement(d.route.Component,null):d.route.element?y=d.route.element:y=u,S.createElement($5,{match:d,routeContext:{outlet:u,matches:v,isDataRoute:n!=null},children:y})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?S.createElement(Z5,{location:n.location,revalidation:n.revalidation,component:g,error:h,children:m(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):m()},null)}var $v=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}($v||{});function K5(t){let e=S.useContext(DT);return e||ct(!1),e}function J5(t){let e=S.useContext(wp);return e||ct(!1),e}function Y5(t){let e=J5(),n=e.matches[e.matches.length-1];return n.route.id||ct(!1),n.route.id}function q5(){var t;let e=S.useContext(NT),n=K5($v.UseRouteError),r=Y5($v.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const Cb={};function Q5(t,e,n){Cb[t]||(Cb[t]=!0)}const yb={};function e4(t,e){yb[e]||(yb[e]=!0,console.warn(e))}const Xc=(t,e,n)=>e4(t,"⚠️ React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function t4(t,e){t!=null&&t.v7_startTransition||Xc("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&Xc("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||Xc("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||Xc("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||Xc("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||Xc("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function n4(t){let{basename:e="/",children:n=null,location:r,navigationType:i=hn.Pop,navigator:o,static:s=!1,future:a}=t;g1()&&ct(!1);let c=e.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:c,navigator:o,static:s,future:Zv({v7_relativeSplatPath:!1},a)}),[c,a,o,s]);typeof r=="string"&&(r=Ma(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,g=S.useMemo(()=>{let C=Cf(u,c);return C==null?null:{location:{pathname:C,search:d,hash:f,state:h,key:p},navigationType:i}},[c,u,d,f,h,p,i]);return g==null?null:S.createElement(PT.Provider,{value:l},S.createElement(p1.Provider,{children:n,value:g}))}new Promise(()=>{});function r4(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:S.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:S.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:S.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function w0(){return w0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},w0.apply(this,arguments)}const i4="6";try{window.__reactRouterVersion=i4}catch{}function o4(t,e){return A5({basename:void 0,future:w0({},void 0,{v7_prependBasename:!0}),history:HB({window:void 0}),hydrationData:s4(),routes:t,mapRouteProperties:r4,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function s4(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=w0({},e,{errors:a4(e.errors)})),e}function a4(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new A0(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const c4=S.createContext({isTransitioning:!1}),l4=S.createContext(new Map),u4="startTransition",xb=P3[u4],d4="flushSync",Ib=jB[d4];function f4(t){xb?xb(t):t()}function Du(t){Ib?Ib(t):t()}class h4{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function p4(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=S.useState(n.state),[s,a]=S.useState(),[c,l]=S.useState({isTransitioning:!1}),[u,d]=S.useState(),[f,h]=S.useState(),[p,g]=S.useState(),C=S.useRef(new Map),{v7_startTransition:v}=r||{},m=S.useCallback(k=>{v?f4(k):k()},[v]),y=S.useCallback((k,D)=>{let{deletedFetchers:T,flushSync:R,viewTransitionOpts:P}=D;T.forEach(G=>C.current.delete(G)),k.fetchers.forEach((G,j)=>{G.data!==void 0&&C.current.set(j,G.data)});let M=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!P||M){R?Du(()=>o(k)):m(()=>o(k));return}if(R){Du(()=>{f&&(u&&u.resolve(),f.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:P.currentLocation,nextLocation:P.nextLocation})});let G=n.window.document.startViewTransition(()=>{Du(()=>o(k))});G.finished.finally(()=>{Du(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})})}),Du(()=>h(G));return}f?(u&&u.resolve(),f.skipTransition(),g({state:k,currentLocation:P.currentLocation,nextLocation:P.nextLocation})):(a(k),l({isTransitioning:!0,flushSync:!1,currentLocation:P.currentLocation,nextLocation:P.nextLocation}))},[n.window,f,u,C,m]);S.useLayoutEffect(()=>n.subscribe(y),[n,y]),S.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new h4)},[c]),S.useEffect(()=>{if(u&&s&&n.window){let k=s,D=u.promise,T=n.window.document.startViewTransition(async()=>{m(()=>o(k)),await D});T.finished.finally(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})}),h(T)}},[m,s,u,n.window]),S.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,f,i.location,s]),S.useEffect(()=>{!c.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),g(void 0))},[c.isTransitioning,p]),S.useEffect(()=>{},[]);let I=S.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:k=>n.navigate(k),push:(k,D,T)=>n.navigate(k,{state:D,preventScrollReset:T==null?void 0:T.preventScrollReset}),replace:(k,D,T)=>n.navigate(k,{replace:!0,state:D,preventScrollReset:T==null?void 0:T.preventScrollReset})}),[n]),b=n.basename||"/",A=S.useMemo(()=>({router:n,navigator:I,static:!1,basename:b}),[n,I,b]),E=S.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return S.useEffect(()=>t4(r,n.future),[r,n.future]),S.createElement(S.Fragment,null,S.createElement(_T.Provider,{value:A},S.createElement(DT.Provider,{value:i},S.createElement(l4.Provider,{value:C.current},S.createElement(c4.Provider,{value:c},S.createElement(n4,{basename:b,location:i.location,navigationType:i.historyAction,navigator:I,future:E},i.initialized||n.future.v7_partialHydration?S.createElement(g4,{routes:n.routes,future:n.future,state:i}):e))))),null)}const g4=S.memo(m4);function m4(t){let{routes:e,future:n,state:r}=t;return z5(e,void 0,r,n)}var bb;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(bb||(bb={}));var Ab;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ab||(Ab={}));function md(t,e,n){const[r,i]=S.useState(n);return S.useEffect(()=>{if(!t)return;const o=s=>i(s);return t.on(e,o),()=>t.off(e,o)},[t,e]),r}const FT=t=>{const e=typeof t=="function",n=S.useRef(t);S.useEffect(()=>{n.current=t}),S.useEffect(()=>{if(e){const r=i=>{const o=n.current(i);if(typeof o=="string")return i.preventDefault(),i.returnValue=o;if(i.defaultPrevented)return i.returnValue=""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}},[e])},OT=7e3;let io=null;function wb(t,e="assertive",n=OT){io?io.announce(t,e,n):(io=new v4,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?io.announce(t,e,n):setTimeout(()=>{io!=null&&io.isAttached()&&(io==null||io.announce(t,e,n))},100))}class v4{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=OT){var i,o;if(!this.node)return;let s=document.createElement("div");typeof e=="object"?(s.setAttribute("role","img"),s.setAttribute("aria-labelledby",e["aria-labelledby"])):s.textContent=e,n==="assertive"?(i=this.assertiveLog)===null||i===void 0||i.appendChild(s):(o=this.politeLog)===null||o===void 0||o.appendChild(s),e!==""&&setTimeout(()=>{s.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}var Sb=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function C4(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Zs=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],y4=/(https?:\/\/(?:[A-Za-z0-9#;/?:@=+$',_.!~*()[\]-]|&amp;|%[A-Fa-f0-9]{2})+)/gm,x4=function(){Sb(t,null,[{key:"escapeForHtml",value:function(n){return new t().escapeForHtml(n)}},{key:"linkify",value:function(n){return new t().linkify(n)}},{key:"ansiToHtml",value:function(n,r){return new t().ansiToHtml(n,r)}},{key:"ansiToJson",value:function(n,r){return new t().ansiToJson(n,r)}},{key:"ansiToText",value:function(n){return new t().ansiToText(n)}}]);function t(){C4(this,t),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return Sb(t,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var r=0;r<8;++r)this.PALETTE_COLORS.push(Zs[n][r].color);for(var i=[0,95,135,175,215,255],o=function(f,h,p){return i[f]+", "+i[h]+", "+i[p]},s=0;s<6;++s)for(var a=0;a<6;++a)for(var c=0;c<6;++c)this.PALETTE_COLORS.push(o(s,a,c));for(var l=8,u=0;u<24;++u,l+=10)this.PALETTE_COLORS.push(o(l,l,l))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(r){return r=="&"?"&amp;":r=='"'?"&quot;":r=="<"?"&lt;":r==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(y4,function(r){return'<a href="'+r+'">'+r+"</a>"})}},{key:"ansiToHtml",value:function(n,r){return this.process(n,r,!0)}},{key:"ansiToJson",value:function(n,r){return r=r||{},r.json=!0,r.clearLine=!1,this.process(n,r,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,r,i){var o=this,s=this,a=n.split(/\033\[/),c=a.shift();r==null&&(r={}),r.clearLine=/\r/.test(n);var l=a.map(function(d){return o.processChunk(d,r,i)});if(r&&r.json){var u=s.processChunkJson("");return u.content=c,u.clearLine=r.clearLine,l.unshift(u),r.remove_empty&&(l=l.filter(function(d){return!d.isEmpty()})),l}else l.unshift(c);return l.join("")}},{key:"processChunkJson",value:function(n,r,i){r=typeof r>"u"?{}:r;var o=r.use_classes=typeof r.use_classes<"u"&&r.use_classes,s=r.key=o?"class":"color",a={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:r.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},c=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!c)return a;a.content=c[4];var l=c[2].split(";");if(c[1]!==""||c[3]!=="m"||!i)return a;for(var u=this;l.length>0;){var d=l.shift(),f=parseInt(d);if(isNaN(f)||f===0)u.fg=u.bg=null,u.decorations=[];else if(f===1)u.decorations.push("bold");else if(f===2)u.decorations.push("dim");else if(f===3)u.decorations.push("italic");else if(f===4)u.decorations.push("underline");else if(f===5)u.decorations.push("blink");else if(f===7)u.decorations.push("reverse");else if(f===8)u.decorations.push("hidden");else if(f===9)u.decorations.push("strikethrough");else if(f===21)u.removeDecoration("bold");else if(f===22)u.removeDecoration("bold"),u.removeDecoration("dim");else if(f===23)u.removeDecoration("italic");else if(f===24)u.removeDecoration("underline");else if(f===25)u.removeDecoration("blink");else if(f===27)u.removeDecoration("reverse");else if(f===28)u.removeDecoration("hidden");else if(f===29)u.removeDecoration("strikethrough");else if(f===39)u.fg=null;else if(f===49)u.bg=null;else if(f>=30&&f<38)u.fg=Zs[0][f%10][s];else if(f>=90&&f<98)u.fg=Zs[1][f%10][s];else if(f>=40&&f<48)u.bg=Zs[0][f%10][s];else if(f>=100&&f<108)u.bg=Zs[1][f%10][s];else if(f===38||f===48){var h=f===38;if(l.length>=1){var p=l.shift();if(p==="5"&&l.length>=1){var g=parseInt(l.shift());if(g>=0&&g<=255)if(!o)this.PALETTE_COLORS||u.setupPalette(),h?u.fg=this.PALETTE_COLORS[g]:u.bg=this.PALETTE_COLORS[g];else{var C=g>=16?"ansi-palette-"+g:Zs[g>7?1:0][g%8].class;h?u.fg=C:u.bg=C}}else if(p==="2"&&l.length>=3){var v=parseInt(l.shift()),m=parseInt(l.shift()),y=parseInt(l.shift());if(v>=0&&v<=255&&m>=0&&m<=255&&y>=0&&y<=255){var I=v+", "+m+", "+y;o?h?(u.fg="ansi-truecolor",u.fg_truecolor=I):(u.bg="ansi-truecolor",u.bg_truecolor=I):h?u.fg=I:u.bg=I}}}}}return u.fg===null&&u.bg===null&&u.decorations.length===0||(a.fg=u.fg,a.bg=u.bg,a.fg_truecolor=u.fg_truecolor,a.bg_truecolor=u.bg_truecolor,a.decorations=u.decorations,a.decoration=u.decorations.slice(-1).pop()||null,a.was_processed=!0),a}},{key:"processChunk",value:function(n,r,i){var o=this;r=r||{};var s=this.processChunkJson(n,r,i),a=r.use_classes;if(s.decorations=s.decorations.filter(function(h){if(h==="reverse"){s.fg||(s.fg=Zs[0][7][a?"class":"color"]),s.bg||(s.bg=Zs[0][0][a?"class":"color"]);var p=s.fg;s.fg=s.bg,s.bg=p;var g=s.fg_truecolor;return s.fg_truecolor=s.bg_truecolor,s.bg_truecolor=g,s.isInverted=!0,!1}return!0}),r.json)return s;if(s.isEmpty())return"";if(!s.was_processed)return s.content;var c=[],l=[],u=[],d={},f=function(p){var g=[],C=void 0;for(C in p)p.hasOwnProperty(C)&&g.push("data-"+C+'="'+o.escapeForHtml(p[C])+'"');return g.length>0?" "+g.join(" "):""};return s.isInverted&&(d["ansi-is-inverted"]="true"),s.fg&&(a?(c.push(s.fg+"-fg"),s.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=s.fg_truecolor,s.fg_truecolor=null)):c.push("color:rgb("+s.fg+")")),s.bg&&(a?(c.push(s.bg+"-bg"),s.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=s.bg_truecolor,s.bg_truecolor=null)):c.push("background-color:rgb("+s.bg+")")),s.decorations.forEach(function(h){if(a){l.push("ansi-"+h);return}h==="bold"?l.push("font-weight:bold"):h==="dim"?l.push("opacity:0.5"):h==="italic"?l.push("font-style:italic"):h==="hidden"?l.push("visibility:hidden"):h==="strikethrough"?u.push("line-through"):u.push(h)}),u.length&&l.push("text-decoration:"+u.join(" ")),a?'<span class="'+c.concat(l).join(" ")+'"'+f(d)+">"+s.content+"</span>":'<span style="'+c.concat(l).join(";")+'"'+f(d)+">"+s.content+"</span>"}},{key:"removeDecoration",value:function(n){var r=this.decorations.indexOf(n);r>=0&&this.decorations.splice(r,1)}}]),t}(),I4=x4;const b4=Ql(I4);function A4(t,e){let n=[];for(const r of t.split(`\r
`)){const i=b4.ansiToJson(r,{json:!0,remove_empty:!1});let o=[];for(const s of i){const a=E4(s,e);o=[...o,...a]}n=[...n,Y.jsx("span",{children:o},n.length)]}return n}const w4=/(\s|^)((\w+):\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,S4=/(?<slorp1>\s|^)(?<name>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+[a-zA-Z])(?<slorp2>\s|$|\.)/g,k4=/@\[exit:([a-zA-Z]+)\]([a-zA-Z]+)@\[\/\]/g;function E4(t,e){const n=T4(t),r=[];let i=0,o=0;function s(u,d){let f;for(;(f=u.exec(t.content))!==null;){const h=f.index;h>i&&r.push(t.content.substring(i,h)),r.push(d(f)),i=u.lastIndex}}function a(u){const[,d,f]=u,h=f;return Y.jsxs(Y.Fragment,{children:[d,Y.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:f})]})}function c(u){const d=u.groups.name,f=`mailto:${d}`;return Y.jsxs(Y.Fragment,{children:[u.groups.slorp1,Y.jsx("a",{href:f,target:"_blank",rel:"noreferrer",children:d}),u.groups.slorp2]})}function l(u){const[,d,f]=u;return Y.jsx("a",{onClick:()=>e(d),className:"exit",children:f})}return s(w4,a),s(S4,c),s(k4,l),i<t.content.length&&r.push(t.content.substring(i)),r.map(u=>Y.jsx("span",{style:n,children:u},o++))}function T4(t){const e={};switch(t.bg&&(e.backgroundColor=`rgb(${t.bg})`),t.fg&&(e.color=`rgb(${t.fg})`),t.decoration){case"bold":e.fontWeight="bold";break;case"dim":e.opacity="0.5";break;case"italic":e.fontStyle="italic";break;case"hidden":e.visibility="hidden";break;case"strikethrough":e.textDecoration="line-through";break;case"underline":e.textDecoration="underline";break;case"blink":e.textDecoration="blink";break}return e}var Da={},ru={},MT=S;function Ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yr=Object.prototype.hasOwnProperty,R4=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kb={},Eb={};function LT(t){return yr.call(Eb,t)?!0:yr.call(kb,t)?!1:R4.test(t)?Eb[t]=!0:(kb[t]=!0,!1)}function gr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Vn[t]=new gr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Vn[e]=new gr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Vn[t]=new gr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Vn[t]=new gr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Vn[t]=new gr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Vn[t]=new gr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Vn[t]=new gr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Vn[t]=new gr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Vn[t]=new gr(t,5,!1,t.toLowerCase(),null,!1,!1)});var m1=/[\-:]([a-z])/g;function v1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(m1,v1);Vn[e]=new gr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(m1,v1);Vn[e]=new gr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(m1,v1);Vn[e]=new gr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Vn[t]=new gr(t,1,!1,t.toLowerCase(),null,!1,!1)});Vn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Vn[t]=new gr(t,1,!1,t.toLowerCase(),null,!0,!0)});var kh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_4=["Webkit","ms","Moz","O"];Object.keys(kh).forEach(function(t){_4.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),kh[e]=kh[t]})});var D4=/["'&<>]/;function sr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=D4.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var P4=/([A-Z])/g,N4=/^ms-/,Xv=Array.isArray;function Zo(t,e){return{insertionMode:t,selectedValue:e}}function B4(t,e,n){switch(e){case"select":return Zo(1,n.value!=null?n.value:n.defaultValue);case"svg":return Zo(2,null);case"math":return Zo(3,null);case"foreignObject":return Zo(1,null);case"table":return Zo(4,null);case"thead":case"tbody":case"tfoot":return Zo(5,null);case"colgroup":return Zo(7,null);case"tr":return Zo(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Zo(1,null):t}var Tb=new Map;function UT(t,e,n){if(typeof n!="object")throw Error(Ge(62));e=!0;for(var r in n)if(yr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=sr(r);i=sr((""+i).trim())}else{o=r;var s=Tb.get(o);s!==void 0||(s=sr(o.replace(P4,"-$1").toLowerCase().replace(N4,"-ms-")),Tb.set(o,s)),o=s,i=typeof i=="number"?i===0||yr.call(kh,r)?""+i:i+"px":sr((""+i).trim())}e?(e=!1,t.push(' style="',o,":",i)):t.push(";",o,":",i)}}e||t.push('"')}function Nr(t,e,n,r){switch(n){case"style":UT(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Vn.hasOwnProperty(n)?Vn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',sr(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',sr(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',sr(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',sr(r),'"')}}else if(LT(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',sr(r),'"')}}}function Eh(t,e,n){if(e!=null){if(n!=null)throw Error(Ge(60));if(typeof e!="object"||!("__html"in e))throw Error(Ge(61));e=e.__html,e!=null&&t.push(""+e)}}function F4(t){var e="";return MT.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Rg(t,e,n,r){t.push(so(n));var i=n=null,o;for(o in e)if(yr.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:Nr(t,r,o,s)}}return t.push(">"),Eh(t,i,n),typeof n=="string"?(t.push(sr(n)),null):n}var O4=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Rb=new Map;function so(t){var e=Rb.get(t);if(e===void 0){if(!O4.test(t))throw Error(Ge(65,t));e="<"+t,Rb.set(t,e)}return e}function M4(t,e,n,r,i){switch(e){case"select":t.push(so("select"));var o=null,s=null;for(u in n)if(yr.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:Nr(t,r,u,a)}}return t.push(">"),Eh(t,s,o),o;case"option":s=i.selectedValue,t.push(so("option"));var c=a=null,l=null,u=null;for(o in n)if(yr.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Nr(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:F4(a),Xv(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(' selected=""');break}}else""+s===n&&t.push(' selected=""');else l&&t.push(' selected=""');return t.push(">"),Eh(t,u,a),a;case"textarea":t.push(so("textarea")),u=s=o=null;for(a in n)if(yr.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(Ge(91));default:Nr(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(">"),u!=null){if(o!=null)throw Error(Ge(92));if(Xv(u)&&1<u.length)throw Error(Ge(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o!==null&&t.push(sr(""+o)),null;case"input":t.push(so("input")),c=u=a=o=null;for(s in n)if(yr.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(Ge(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:Nr(t,r,s,l)}return u!==null?Nr(t,r,"checked",u):c!==null&&Nr(t,r,"checked",c),o!==null?Nr(t,r,"value",o):a!==null&&Nr(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(so("menuitem"));for(var f in n)if(yr.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Ge(400));default:Nr(t,r,f,o)}return t.push(">"),null;case"title":t.push(so("title")),o=null;for(d in n)if(yr.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(Ge(434));default:Nr(t,r,d,s)}return t.push(">"),o;case"listing":case"pre":t.push(so(e)),s=o=null;for(c in n)if(yr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:Nr(t,r,c,a)}if(t.push(">"),s!=null){if(o!=null)throw Error(Ge(60));if(typeof s!="object"||!("__html"in s))throw Error(Ge(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(so(e));for(var h in n)if(yr.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Ge(399,e));default:Nr(t,r,h,o)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Rg(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),Rg(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Rg(t,n,e,r);t.push(so(e)),s=o=null;for(l in n)if(yr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":UT(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:LT(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",l,'="',sr(a),'"')}return t.push(">"),Eh(t,s,o),o}}function _b(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Ge(395));return t.push(n),t.push('"></template>')}function L4(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(Ge(397))}}function U4(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Ge(397))}}var V4=/[<\u2028\u2029]/g;function _g(t){return JSON.stringify(t).replace(V4,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function G4(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function Db(t,e,n,r){return n.generateStaticMarkup?(t.push(sr(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(sr(e)),t=!0),t)}var vd=Object.assign,W4=Symbol.for("react.element"),VT=Symbol.for("react.portal"),GT=Symbol.for("react.fragment"),WT=Symbol.for("react.strict_mode"),zT=Symbol.for("react.profiler"),jT=Symbol.for("react.provider"),HT=Symbol.for("react.context"),ZT=Symbol.for("react.forward_ref"),$T=Symbol.for("react.suspense"),XT=Symbol.for("react.suspense_list"),KT=Symbol.for("react.memo"),C1=Symbol.for("react.lazy"),z4=Symbol.for("react.scope"),j4=Symbol.for("react.debug_trace_mode"),H4=Symbol.for("react.legacy_hidden"),Z4=Symbol.for("react.default_value"),Pb=Symbol.iterator;function Kv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case GT:return"Fragment";case VT:return"Portal";case zT:return"Profiler";case WT:return"StrictMode";case $T:return"Suspense";case XT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HT:return(t.displayName||"Context")+".Consumer";case jT:return(t._context.displayName||"Context")+".Provider";case ZT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case KT:return e=t.displayName||null,e!==null?e:Kv(t.type)||"Memo";case C1:e=t._payload,t=t._init;try{return Kv(t(e))}catch{}}return null}var JT={};function Nb(t,e){if(t=t.contextTypes,!t)return JT;var n={},r;for(r in t)n[r]=e[r];return n}var ac=null;function Sp(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Ge(401))}else{if(n===null)throw Error(Ge(401));Sp(t,n)}e.context._currentValue2=e.value}}function YT(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&YT(t)}function qT(t){var e=t.parent;e!==null&&qT(e),t.context._currentValue2=t.value}function QT(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Ge(402));t.depth===e.depth?Sp(t,e):QT(t,e)}function e2(t,e){var n=e.parent;if(n===null)throw Error(Ge(402));t.depth===n.depth?Sp(t,n):e2(t,n),e.context._currentValue2=e.value}function S0(t){var e=ac;e!==t&&(e===null?qT(t):t===null?YT(e):e.depth===t.depth?Sp(e,t):e.depth>t.depth?QT(e,t):e2(e,t),ac=t)}var Bb={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function Fb(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=Bb,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue2:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:vd({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&Bb.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=vd({},o,a)):vd(o,a))}t.state=o}else o.queue=null}var $4={id:1,overflow:""};function Jv(t,e,n){var r=t.id;t=t.overflow;var i=32-Th(r)-1;r&=~(1<<i),n+=1;var o=32-Th(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-Th(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var Th=Math.clz32?Math.clz32:J4,X4=Math.log,K4=Math.LN2;function J4(t){return t>>>=0,t===0?32:31-(X4(t)/K4|0)|0}function Y4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var q4=typeof Object.is=="function"?Object.is:Y4,Bs=null,y1=null,Rh=null,Et=null,Yu=!1,k0=!1,jd=0,da=null,kp=0;function qa(){if(Bs===null)throw Error(Ge(321));return Bs}function Ob(){if(0<kp)throw Error(Ge(312));return{memoizedState:null,queue:null,next:null}}function x1(){return Et===null?Rh===null?(Yu=!1,Rh=Et=Ob()):(Yu=!0,Et=Rh):Et.next===null?(Yu=!1,Et=Et.next=Ob()):(Yu=!0,Et=Et.next),Et}function I1(){y1=Bs=null,k0=!1,Rh=null,kp=0,Et=da=null}function t2(t,e){return typeof e=="function"?e(t):e}function Mb(t,e,n){if(Bs=qa(),Et=x1(),Yu){var r=Et.queue;if(e=r.dispatch,da!==null&&(n=da.get(r),n!==void 0)){da.delete(r),r=Et.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return Et.memoizedState=r,[r,e]}return[Et.memoizedState,e]}return t=t===t2?typeof e=="function"?e():e:n!==void 0?n(e):e,Et.memoizedState=t,t=Et.queue={last:null,dispatch:null},t=t.dispatch=Q4.bind(null,Bs,t),[Et.memoizedState,t]}function Lb(t,e){if(Bs=qa(),Et=x1(),e=e===void 0?null:e,Et!==null){var n=Et.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!q4(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),Et.memoizedState=[t,e],t}function Q4(t,e,n){if(25<=kp)throw Error(Ge(301));if(t===Bs)if(k0=!0,t={action:n,next:null},da===null&&(da=new Map),n=da.get(e),n===void 0)da.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function eF(){throw Error(Ge(394))}function Yf(){}var Ub={readContext:function(t){return t._currentValue2},useContext:function(t){return qa(),t._currentValue2},useMemo:Lb,useReducer:Mb,useRef:function(t){Bs=qa(),Et=x1();var e=Et.memoizedState;return e===null?(t={current:t},Et.memoizedState=t):e},useState:function(t){return Mb(t2,t)},useInsertionEffect:Yf,useLayoutEffect:function(){},useCallback:function(t,e){return Lb(function(){return t},e)},useImperativeHandle:Yf,useEffect:Yf,useDebugValue:Yf,useDeferredValue:function(t){return qa(),t},useTransition:function(){return qa(),[!1,eF]},useId:function(){var t=y1.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Th(t)-1)).toString(32)+e;var n=_h;if(n===null)throw Error(Ge(404));return e=jd++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return qa(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Ge(407));return n()}},_h=null,Dg=MT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function tF(t){return console.error(t),null}function qu(){}function nF(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?tF:i,onAllReady:qu,onShellReady:s===void 0?qu:s,onShellError:qu,onFatalError:qu},n=E0(e,0,null,n,!1,!1),n.parentFlushed=!0,t=b1(e,t,null,n,u,JT,null,$4),l.push(t),e}function b1(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&i2(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function E0(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function Hd(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function T0(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function Vb(t,e,n,r,i){for(Bs={},y1=e,jd=0,t=n(r,i);k0;)k0=!1,jd=0,kp+=1,Et=null,t=n(r,i);return I1(),t}function Gb(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(Ge(108,Kv(r)||"Unknown",a));r=vd({},s,n)}e.legacyContext=r,Gr(t,e,i),e.legacyContext=s}else Gr(t,e,i)}function Wb(t,e){if(t&&t.defaultProps){e=vd({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Yv(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=Nb(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue2:i),Fb(o,n,r,i),Gb(t,e,o,n)}else{o=Nb(n,e.legacyContext),i=Vb(t,e,n,r,o);var s=jd!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)Fb(i,n,r,o),Gb(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=Jv(r,1,0);try{Gr(t,e,i)}finally{e.treeContext=r}}else Gr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=M4(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=B4(s,n,r),qv(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case H4:case j4:case WT:case zT:case GT:Gr(t,e,r.children);return;case XT:Gr(t,e,r.children);return;case z4:throw Error(Ge(343));case $T:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=E0(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=E0(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(qv(t,e,r),t.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),l.status=1,R0(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=Hd(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=b1(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case ZT:if(r=Vb(t,e,n.render,r,i),jd!==0){n=e.treeContext,e.treeContext=Jv(n,1,0);try{Gr(t,e,r)}finally{e.treeContext=n}}else Gr(t,e,r);return;case KT:n=n.type,r=Wb(n,r),Yv(t,e,n,r,i);return;case jT:if(i=r.children,n=n._context,r=r.value,o=n._currentValue2,n._currentValue2=r,s=ac,ac=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,Gr(t,e,i),t=ac,t===null)throw Error(Ge(403));r=t.parentValue,t.context._currentValue2=r===Z4?t.context._defaultValue:r,t=ac=t.parent,e.context=t;return;case HT:r=r.children,r=r(n._currentValue2),Gr(t,e,r);return;case C1:i=n._init,n=i(n._payload),r=Wb(n,r),Yv(t,e,n,r,void 0);return}throw Error(Ge(130,n==null?n:typeof n,""))}}function Gr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case W4:Yv(t,e,n.type,n.props,n.ref);return;case VT:throw Error(Ge(257));case C1:var r=n._init;n=r(n._payload),Gr(t,e,n);return}if(Xv(n)){zb(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=Pb&&n[Pb]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);zb(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Ge(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=Db(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=Db(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function zb(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=Jv(o,r,i);try{qv(t,e,n[i])}finally{e.treeContext=o}}}function qv(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Gr(t,e,n)}catch(c){if(I1(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=E0(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=b1(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,S0(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,S0(o),c}}function rF(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,r2(this,e,t)}function n2(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Ge(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return n2(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function R0(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&R0(t,n)}else t.completedSegments.push(e)}function r2(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Ge(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=qu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&R0(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(rF,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(R0(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function i2(t){if(t.status!==2){var e=ac,n=Dg.current;Dg.current=Ub;var r=_h;_h=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){S0(s.context);try{Gr(a,s,s.node),a.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),s.abortSet.delete(s),c.status=1,r2(a,s.blockedBoundary,c)}catch(p){if(I1(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=s.ping;p.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=p,f=Hd(a,d);if(u===null?T0(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var h=a.onAllReady;h()}}}finally{}}}i.splice(0,o),t.destination!==null&&A1(t,t.destination)}catch(p){Hd(t,p),T0(t,p)}finally{_h=r,Dg.current=n,n===Ub&&S0(e)}}}function qf(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)e.push(r[o]);i=Ep(t,e,i)}for(;o<r.length-1;o++)e.push(r[o]);return o<r.length&&(i=e.push(r[o])),i;default:throw Error(Ge(390))}}function Ep(t,e,n){var r=n.boundary;if(r===null)return qf(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=sr(r),e.push(r),e.push('"')),e.push("></template>")),qf(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;return i=i.boundaryPrefix+o.toString(16),r=r.id=i,_b(e,t.responseState,r),qf(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),_b(e,t.responseState,r.id),qf(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Ge(391));return Ep(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function jb(t,e,n){return L4(e,t.responseState,n.formatContext,n.id),Ep(t,e,n),U4(e,n.formatContext)}function Hb(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)o2(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Ge(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function o2(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Ge(392));return jb(t,e,r)}return jb(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function A1(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Ep(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(Ge(395));if(r.push(c),r.push('"'),l||u||d){r.push(",");var f=_g(l||"");r.push(f)}if(u||d){r.push(",");var h=_g(u||"");r.push(h)}if(d){r.push(",");var p=_g(d);r.push(p)}if(!r.push(")<\/script>")){t.destination=null,o++,i.splice(0,o);return}}i.splice(0,o);var g=t.completedBoundaries;for(o=0;o<g.length;o++)if(!Hb(t,e,g[o])){t.destination=null,o++,g.splice(0,o);return}g.splice(0,o);var C=t.partialBoundaries;for(o=0;o<C.length;o++){var v=C[o];e:{i=t,s=e;var m=v.completedSegments;for(a=0;a<m.length;a++)if(!o2(i,s,v,m[a])){a++,m.splice(0,a);var y=!1;break e}m.splice(0,a),y=!0}if(!y){t.destination=null,o++,C.splice(0,o);return}}C.splice(0,o);var I=t.completedBoundaries;for(o=0;o<I.length;o++)if(!Hb(t,e,I[o])){t.destination=null,o++,I.splice(0,o);return}I.splice(0,o)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function iF(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return n2(r,t,e)}),n.clear(),t.destination!==null&&A1(t,t.destination)}catch(r){Hd(t,r),T0(t,r)}}function oF(){}function s2(t,e,n,r){var i=!1,o=null,s="",a={push:function(l){return l!==null&&(s+=l),!0},destroy:function(l){i=!0,o=l}},c=!1;if(t=nF(t,G4(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,oF,void 0,function(){c=!0}),i2(t),iF(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{A1(t,a)}catch(l){Hd(t,l),T0(t,l)}}if(i)throw o;if(!c)throw Error(Ge(426));return s}ru.renderToNodeStream=function(){throw Error(Ge(207))};ru.renderToStaticMarkup=function(t,e){return s2(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};ru.renderToStaticNodeStream=function(){throw Error(Ge(208))};ru.renderToString=function(t,e){return s2(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};ru.version="18.3.1";var w1={},a2=S;function Ze(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wr=null,zr=0;function _e(t,e){if(e.length!==0)if(512<e.length)0<zr&&(t.enqueue(new Uint8Array(Wr.buffer,0,zr)),Wr=new Uint8Array(512),zr=0),t.enqueue(e);else{var n=Wr.length-zr;n<e.length&&(n===0?t.enqueue(Wr):(Wr.set(e.subarray(0,n),zr),t.enqueue(Wr),e=e.subarray(n)),Wr=new Uint8Array(512),zr=0),Wr.set(e,zr),zr+=e.length}}function Lt(t,e){return _e(t,e),!0}function Zb(t){Wr&&0<zr&&(t.enqueue(new Uint8Array(Wr.buffer,0,zr)),Wr=null,zr=0)}var c2=new TextEncoder;function $e(t){return c2.encode(t)}function ye(t){return c2.encode(t)}function l2(t,e){typeof t.error=="function"?t.error(e):t.close()}var xr=Object.prototype.hasOwnProperty,sF=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$b={},Xb={};function u2(t){return xr.call(Xb,t)?!0:xr.call($b,t)?!1:sF.test(t)?Xb[t]=!0:($b[t]=!0,!1)}function mr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Gn[t]=new mr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Gn[e]=new mr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Gn[t]=new mr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Gn[t]=new mr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Gn[t]=new mr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Gn[t]=new mr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Gn[t]=new mr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Gn[t]=new mr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Gn[t]=new mr(t,5,!1,t.toLowerCase(),null,!1,!1)});var S1=/[\-:]([a-z])/g;function k1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(S1,k1);Gn[e]=new mr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(S1,k1);Gn[e]=new mr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(S1,k1);Gn[e]=new mr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Gn[t]=new mr(t,1,!1,t.toLowerCase(),null,!1,!1)});Gn.xlinkHref=new mr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Gn[t]=new mr(t,1,!1,t.toLowerCase(),null,!0,!0)});var Dh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aF=["Webkit","ms","Moz","O"];Object.keys(Dh).forEach(function(t){aF.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dh[e]=Dh[t]})});var cF=/["'&<>]/;function Fn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=cF.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var lF=/([A-Z])/g,uF=/^ms-/,Qv=Array.isArray,dF=ye("<script>"),fF=ye("<\/script>"),hF=ye('<script src="'),pF=ye('<script type="module" src="'),Kb=ye('" async=""><\/script>'),gF=/(<\/|<)(s)(cript)/gi;function mF(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function vF(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?dF:ye('<script nonce="'+Fn(e)+'">');var o=[];if(n!==void 0&&o.push(e,$e((""+n).replace(gF,mF)),fF),r!==void 0)for(n=0;n<r.length;n++)o.push(hF,$e(Fn(r[n])),Kb);if(i!==void 0)for(r=0;r<i.length;r++)o.push(pF,$e(Fn(i[r])),Kb);return{bootstrapChunks:o,startInlineScript:e,placeholderPrefix:ye(t+"P:"),segmentPrefix:ye(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function ao(t,e){return{insertionMode:t,selectedValue:e}}function CF(t){return ao(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function yF(t,e,n){switch(e){case"select":return ao(1,n.value!=null?n.value:n.defaultValue);case"svg":return ao(2,null);case"math":return ao(3,null);case"foreignObject":return ao(1,null);case"table":return ao(4,null);case"thead":case"tbody":case"tfoot":return ao(5,null);case"colgroup":return ao(7,null);case"tr":return ao(6,null)}return 4<=t.insertionMode||t.insertionMode===0?ao(1,null):t}var E1=ye("<!-- -->");function Jb(t,e,n,r){return e===""?r:(r&&t.push(E1),t.push($e(Fn(e))),!0)}var Yb=new Map,xF=ye(' style="'),qb=ye(":"),IF=ye(";");function d2(t,e,n){if(typeof n!="object")throw Error(Ze(62));e=!0;for(var r in n)if(xr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=$e(Fn(r));i=$e(Fn((""+i).trim()))}else{o=r;var s=Yb.get(o);s!==void 0||(s=ye(Fn(o.replace(lF,"-$1").toLowerCase().replace(uF,"-ms-"))),Yb.set(o,s)),o=s,i=typeof i=="number"?i===0||xr.call(Dh,r)?$e(""+i):$e(i+"px"):$e(Fn((""+i).trim()))}e?(e=!1,t.push(xF,o,qb,i)):t.push(IF,o,qb,i)}}e||t.push(Qa)}var Js=ye(" "),Qc=ye('="'),Qa=ye('"'),Qb=ye('=""');function Br(t,e,n,r){switch(n){case"style":d2(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Gn.hasOwnProperty(n)?Gn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=$e(e.attributeName),e.type){case 3:r&&t.push(Js,n,Qb);break;case 4:r===!0?t.push(Js,n,Qb):r!==!1&&t.push(Js,n,Qc,$e(Fn(r)),Qa);break;case 5:isNaN(r)||t.push(Js,n,Qc,$e(Fn(r)),Qa);break;case 6:!isNaN(r)&&1<=r&&t.push(Js,n,Qc,$e(Fn(r)),Qa);break;default:e.sanitizeURL&&(r=""+r),t.push(Js,n,Qc,$e(Fn(r)),Qa)}}else if(u2(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(Js,$e(n),Qc,$e(Fn(r)),Qa)}}}var Ys=ye(">"),eA=ye("/>");function Ph(t,e,n){if(e!=null){if(n!=null)throw Error(Ze(60));if(typeof e!="object"||!("__html"in e))throw Error(Ze(61));e=e.__html,e!=null&&t.push($e(""+e))}}function bF(t){var e="";return a2.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var Pg=ye(' selected=""');function Ng(t,e,n,r){t.push(co(n));var i=n=null,o;for(o in e)if(xr.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:Br(t,r,o,s)}}return t.push(Ys),Ph(t,i,n),typeof n=="string"?(t.push($e(Fn(n))),null):n}var Bg=ye(`
`),AF=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,tA=new Map;function co(t){var e=tA.get(t);if(e===void 0){if(!AF.test(t))throw Error(Ze(65,t));e=ye("<"+t),tA.set(t,e)}return e}var wF=ye("<!DOCTYPE html>");function SF(t,e,n,r,i){switch(e){case"select":t.push(co("select"));var o=null,s=null;for(u in n)if(xr.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:Br(t,r,u,a)}}return t.push(Ys),Ph(t,s,o),o;case"option":s=i.selectedValue,t.push(co("option"));var c=a=null,l=null,u=null;for(o in n)if(xr.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Br(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:bF(a),Qv(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(Pg);break}}else""+s===n&&t.push(Pg);else l&&t.push(Pg);return t.push(Ys),Ph(t,u,a),a;case"textarea":t.push(co("textarea")),u=s=o=null;for(a in n)if(xr.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(Ze(91));default:Br(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(Ys),u!=null){if(o!=null)throw Error(Ze(92));if(Qv(u)&&1<u.length)throw Error(Ze(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(Bg),o!==null&&t.push($e(Fn(""+o))),null;case"input":t.push(co("input")),c=u=a=o=null;for(s in n)if(xr.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(Ze(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:Br(t,r,s,l)}return u!==null?Br(t,r,"checked",u):c!==null&&Br(t,r,"checked",c),o!==null?Br(t,r,"value",o):a!==null&&Br(t,r,"value",a),t.push(eA),null;case"menuitem":t.push(co("menuitem"));for(var f in n)if(xr.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Ze(400));default:Br(t,r,f,o)}return t.push(Ys),null;case"title":t.push(co("title")),o=null;for(d in n)if(xr.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(Ze(434));default:Br(t,r,d,s)}return t.push(Ys),o;case"listing":case"pre":t.push(co(e)),s=o=null;for(c in n)if(xr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:Br(t,r,c,a)}if(t.push(Ys),s!=null){if(o!=null)throw Error(Ze(60));if(typeof s!="object"||!("__html"in s))throw Error(Ze(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(Bg,$e(n)):t.push($e(""+n)))}return typeof o=="string"&&o[0]===`
`&&t.push(Bg),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(co(e));for(var h in n)if(xr.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Ze(399,e));default:Br(t,r,h,o)}return t.push(eA),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Ng(t,n,e,r);case"html":return i.insertionMode===0&&t.push(wF),Ng(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Ng(t,n,e,r);t.push(co(e)),s=o=null;for(l in n)if(xr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":d2(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:u2(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(Js,$e(l),Qc,$e(Fn(a)),Qa)}return t.push(Ys),Ph(t,s,o),o}}var kF=ye("</"),EF=ye(">"),TF=ye('<template id="'),RF=ye('"></template>'),_F=ye("<!--$-->"),DF=ye('<!--$?--><template id="'),PF=ye('"></template>'),NF=ye("<!--$!-->"),BF=ye("<!--/$-->"),FF=ye("<template"),OF=ye('"'),MF=ye(' data-dgst="');ye(' data-msg="');ye(' data-stck="');var LF=ye("></template>");function nA(t,e,n){if(_e(t,DF),n===null)throw Error(Ze(395));return _e(t,n),Lt(t,PF)}var UF=ye('<div hidden id="'),VF=ye('">'),GF=ye("</div>"),WF=ye('<svg aria-hidden="true" style="display:none" id="'),zF=ye('">'),jF=ye("</svg>"),HF=ye('<math aria-hidden="true" style="display:none" id="'),ZF=ye('">'),$F=ye("</math>"),XF=ye('<table hidden id="'),KF=ye('">'),JF=ye("</table>"),YF=ye('<table hidden><tbody id="'),qF=ye('">'),QF=ye("</tbody></table>"),eO=ye('<table hidden><tr id="'),tO=ye('">'),nO=ye("</tr></table>"),rO=ye('<table hidden><colgroup id="'),iO=ye('">'),oO=ye("</colgroup></table>");function sO(t,e,n,r){switch(n.insertionMode){case 0:case 1:return _e(t,UF),_e(t,e.segmentPrefix),_e(t,$e(r.toString(16))),Lt(t,VF);case 2:return _e(t,WF),_e(t,e.segmentPrefix),_e(t,$e(r.toString(16))),Lt(t,zF);case 3:return _e(t,HF),_e(t,e.segmentPrefix),_e(t,$e(r.toString(16))),Lt(t,ZF);case 4:return _e(t,XF),_e(t,e.segmentPrefix),_e(t,$e(r.toString(16))),Lt(t,KF);case 5:return _e(t,YF),_e(t,e.segmentPrefix),_e(t,$e(r.toString(16))),Lt(t,qF);case 6:return _e(t,eO),_e(t,e.segmentPrefix),_e(t,$e(r.toString(16))),Lt(t,tO);case 7:return _e(t,rO),_e(t,e.segmentPrefix),_e(t,$e(r.toString(16))),Lt(t,iO);default:throw Error(Ze(397))}}function aO(t,e){switch(e.insertionMode){case 0:case 1:return Lt(t,GF);case 2:return Lt(t,jF);case 3:return Lt(t,$F);case 4:return Lt(t,JF);case 5:return Lt(t,QF);case 6:return Lt(t,nO);case 7:return Lt(t,oO);default:throw Error(Ze(397))}}var cO=ye('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),lO=ye('$RS("'),uO=ye('","'),dO=ye('")<\/script>'),fO=ye('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),hO=ye('$RC("'),pO=ye('","'),gO=ye('")<\/script>'),mO=ye('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),vO=ye('$RX("'),CO=ye('"'),yO=ye(")<\/script>"),Fg=ye(","),xO=/[<\u2028\u2029]/g;function Og(t){return JSON.stringify(t).replace(xO,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Cd=Object.assign,IO=Symbol.for("react.element"),f2=Symbol.for("react.portal"),h2=Symbol.for("react.fragment"),p2=Symbol.for("react.strict_mode"),g2=Symbol.for("react.profiler"),m2=Symbol.for("react.provider"),v2=Symbol.for("react.context"),C2=Symbol.for("react.forward_ref"),y2=Symbol.for("react.suspense"),x2=Symbol.for("react.suspense_list"),I2=Symbol.for("react.memo"),T1=Symbol.for("react.lazy"),bO=Symbol.for("react.scope"),AO=Symbol.for("react.debug_trace_mode"),wO=Symbol.for("react.legacy_hidden"),SO=Symbol.for("react.default_value"),rA=Symbol.iterator;function eC(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case h2:return"Fragment";case f2:return"Portal";case g2:return"Profiler";case p2:return"StrictMode";case y2:return"Suspense";case x2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case v2:return(t.displayName||"Context")+".Consumer";case m2:return(t._context.displayName||"Context")+".Provider";case C2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I2:return e=t.displayName||null,e!==null?e:eC(t.type)||"Memo";case T1:e=t._payload,t=t._init;try{return eC(t(e))}catch{}}return null}var b2={};function iA(t,e){if(t=t.contextTypes,!t)return b2;var n={},r;for(r in t)n[r]=e[r];return n}var cc=null;function Tp(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Ze(401))}else{if(n===null)throw Error(Ze(401));Tp(t,n)}e.context._currentValue=e.value}}function A2(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&A2(t)}function w2(t){var e=t.parent;e!==null&&w2(e),t.context._currentValue=t.value}function S2(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(Ze(402));t.depth===e.depth?Tp(t,e):S2(t,e)}function k2(t,e){var n=e.parent;if(n===null)throw Error(Ze(402));t.depth===n.depth?Tp(t,n):k2(t,n),e.context._currentValue=e.value}function _0(t){var e=cc;e!==t&&(e===null?w2(t):t===null?A2(e):e.depth===t.depth?Tp(e,t):e.depth>t.depth?S2(e,t):k2(e,t),cc=t)}var oA={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function sA(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=oA,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:Cd({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&oA.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=Cd({},o,a)):Cd(o,a))}t.state=o}else o.queue=null}var kO={id:1,overflow:""};function tC(t,e,n){var r=t.id;t=t.overflow;var i=32-Nh(r)-1;r&=~(1<<i),n+=1;var o=32-Nh(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-Nh(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var Nh=Math.clz32?Math.clz32:RO,EO=Math.log,TO=Math.LN2;function RO(t){return t>>>=0,t===0?32:31-(EO(t)/TO|0)|0}function _O(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var DO=typeof Object.is=="function"?Object.is:_O,Fs=null,R1=null,Bh=null,Tt=null,Qu=!1,D0=!1,Zd=0,fa=null,Rp=0;function ec(){if(Fs===null)throw Error(Ze(321));return Fs}function aA(){if(0<Rp)throw Error(Ze(312));return{memoizedState:null,queue:null,next:null}}function _1(){return Tt===null?Bh===null?(Qu=!1,Bh=Tt=aA()):(Qu=!0,Tt=Bh):Tt.next===null?(Qu=!1,Tt=Tt.next=aA()):(Qu=!0,Tt=Tt.next),Tt}function D1(){R1=Fs=null,D0=!1,Bh=null,Rp=0,Tt=fa=null}function E2(t,e){return typeof e=="function"?e(t):e}function cA(t,e,n){if(Fs=ec(),Tt=_1(),Qu){var r=Tt.queue;if(e=r.dispatch,fa!==null&&(n=fa.get(r),n!==void 0)){fa.delete(r),r=Tt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return Tt.memoizedState=r,[r,e]}return[Tt.memoizedState,e]}return t=t===E2?typeof e=="function"?e():e:n!==void 0?n(e):e,Tt.memoizedState=t,t=Tt.queue={last:null,dispatch:null},t=t.dispatch=PO.bind(null,Fs,t),[Tt.memoizedState,t]}function lA(t,e){if(Fs=ec(),Tt=_1(),e=e===void 0?null:e,Tt!==null){var n=Tt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!DO(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),Tt.memoizedState=[t,e],t}function PO(t,e,n){if(25<=Rp)throw Error(Ze(301));if(t===Fs)if(D0=!0,t={action:n,next:null},fa===null&&(fa=new Map),n=fa.get(e),n===void 0)fa.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function NO(){throw Error(Ze(394))}function Qf(){}var uA={readContext:function(t){return t._currentValue},useContext:function(t){return ec(),t._currentValue},useMemo:lA,useReducer:cA,useRef:function(t){Fs=ec(),Tt=_1();var e=Tt.memoizedState;return e===null?(t={current:t},Tt.memoizedState=t):e},useState:function(t){return cA(E2,t)},useInsertionEffect:Qf,useLayoutEffect:function(){},useCallback:function(t,e){return lA(function(){return t},e)},useImperativeHandle:Qf,useEffect:Qf,useDebugValue:Qf,useDeferredValue:function(t){return ec(),t},useTransition:function(){return ec(),[!1,NO]},useId:function(){var t=R1.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Nh(t)-1)).toString(32)+e;var n=Fh;if(n===null)throw Error(Ze(404));return e=Zd++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return ec(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Ze(407));return n()}},Fh=null,Mg=a2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function BO(t){return console.error(t),null}function ed(){}function FO(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?BO:i,onAllReady:o===void 0?ed:o,onShellReady:s===void 0?ed:s,onShellError:a===void 0?ed:a,onFatalError:c===void 0?ed:c},n=P0(e,0,null,n,!1,!1),n.parentFlushed=!0,t=P1(e,t,null,n,u,b2,null,kO),l.push(t),e}function P1(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&_2(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function P0(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function $d(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function N0(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,l2(t.destination,e)):(t.status=1,t.fatalError=e)}function dA(t,e,n,r,i){for(Fs={},R1=e,Zd=0,t=n(r,i);D0;)D0=!1,Zd=0,Rp+=1,Tt=null,t=n(r,i);return D1(),t}function fA(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(Ze(108,eC(r)||"Unknown",a));r=Cd({},s,n)}e.legacyContext=r,jr(t,e,i),e.legacyContext=s}else jr(t,e,i)}function hA(t,e){if(t&&t.defaultProps){e=Cd({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function nC(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=iA(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue:i),sA(o,n,r,i),fA(t,e,o,n)}else{o=iA(n,e.legacyContext),i=dA(t,e,n,r,o);var s=Zd!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)sA(i,n,r,o),fA(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=tC(r,1,0);try{jr(t,e,i)}finally{e.treeContext=r}}else jr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=SF(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=yF(s,n,r),rC(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(kF,$e(n),EF)}i.lastPushedText=!1}else{switch(n){case wO:case AO:case p2:case g2:case h2:jr(t,e,r.children);return;case x2:jr(t,e,r.children);return;case bO:throw Error(Ze(343));case y2:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=P0(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=P0(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(rC(t,e,r),l.lastPushedText&&l.textEmbedded&&l.chunks.push(E1),l.status=1,B0(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=$d(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=P1(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case C2:if(r=dA(t,e,n.render,r,i),Zd!==0){n=e.treeContext,e.treeContext=tC(n,1,0);try{jr(t,e,r)}finally{e.treeContext=n}}else jr(t,e,r);return;case I2:n=n.type,r=hA(n,r),nC(t,e,n,r,i);return;case m2:if(i=r.children,n=n._context,r=r.value,o=n._currentValue,n._currentValue=r,s=cc,cc=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,jr(t,e,i),t=cc,t===null)throw Error(Ze(403));r=t.parentValue,t.context._currentValue=r===SO?t.context._defaultValue:r,t=cc=t.parent,e.context=t;return;case v2:r=r.children,r=r(n._currentValue),jr(t,e,r);return;case T1:i=n._init,n=i(n._payload),r=hA(n,r),nC(t,e,n,r,void 0);return}throw Error(Ze(130,n==null?n:typeof n,""))}}function jr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case IO:nC(t,e,n.type,n.props,n.ref);return;case f2:throw Error(Ze(257));case T1:var r=n._init;n=r(n._payload),jr(t,e,n);return}if(Qv(n)){pA(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=rA&&n[rA]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);pA(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Ze(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=Jb(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=Jb(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function pA(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=tC(o,r,i);try{rC(t,e,n[i])}finally{e.treeContext=o}}}function rC(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return jr(t,e,n)}catch(c){if(D1(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=P0(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=P1(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,_0(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,_0(o),c}}function OO(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,R2(this,e,t)}function T2(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Ze(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return T2(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function B0(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&B0(t,n)}else t.completedSegments.push(e)}function R2(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Ze(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=ed,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&B0(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(OO,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(B0(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function _2(t){if(t.status!==2){var e=cc,n=Mg.current;Mg.current=uA;var r=Fh;Fh=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){_0(s.context);try{jr(a,s,s.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(E1),s.abortSet.delete(s),c.status=1,R2(a,s.blockedBoundary,c)}catch(p){if(D1(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=s.ping;p.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=p,f=$d(a,d);if(u===null?N0(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var h=a.onAllReady;h()}}}finally{}}}i.splice(0,o),t.destination!==null&&N1(t,t.destination)}catch(p){$d(t,p),N0(t,p)}finally{Fh=r,Mg.current=n,n===uA&&_0(e)}}}function eh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,_e(e,TF),_e(e,t.placeholderPrefix),t=$e(r.toString(16)),_e(e,t),Lt(e,RF);case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)_e(e,r[o]);i=_p(t,e,i)}for(;o<r.length-1;o++)_e(e,r[o]);return o<r.length&&(i=Lt(e,r[o])),i;default:throw Error(Ze(390))}}function _p(t,e,n){var r=n.boundary;if(r===null)return eh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,Lt(e,NF),_e(e,FF),r&&(_e(e,MF),_e(e,$e(Fn(r))),_e(e,OF)),Lt(e,LF),eh(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;i=ye(i.boundaryPrefix+o.toString(16)),r=r.id=i,nA(e,t.responseState,r),eh(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),nA(e,t.responseState,r.id),eh(t,e,n);else{if(Lt(e,_F),n=r.completedSegments,n.length!==1)throw Error(Ze(391));_p(t,e,n[0])}return Lt(e,BF)}function gA(t,e,n){return sO(e,t.responseState,n.formatContext,n.id),_p(t,e,n),aO(e,n.formatContext)}function mA(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)D2(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,_e(e,t.startInlineScript),t.sentCompleteBoundaryFunction?_e(e,hO):(t.sentCompleteBoundaryFunction=!0,_e(e,fO)),r===null)throw Error(Ze(395));return n=$e(n.toString(16)),_e(e,r),_e(e,pO),_e(e,t.segmentPrefix),_e(e,n),Lt(e,gO)}function D2(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Ze(392));return gA(t,e,r)}return gA(t,e,r),t=t.responseState,_e(e,t.startInlineScript),t.sentCompleteSegmentFunction?_e(e,lO):(t.sentCompleteSegmentFunction=!0,_e(e,cO)),_e(e,t.segmentPrefix),i=$e(i.toString(16)),_e(e,i),_e(e,uO),_e(e,t.placeholderPrefix),_e(e,i),Lt(e,dO)}function N1(t,e){Wr=new Uint8Array(512),zr=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){_p(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)_e(e,r[n]);n<r.length&&Lt(e,r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(_e(r,a.startInlineScript),a.sentClientRenderFunction?_e(r,vO):(a.sentClientRenderFunction=!0,_e(r,mO)),c===null)throw Error(Ze(395));_e(r,c),_e(r,CO),(l||u||d)&&(_e(r,Fg),_e(r,$e(Og(l||"")))),(u||d)&&(_e(r,Fg),_e(r,$e(Og(u||"")))),d&&(_e(r,Fg),_e(r,$e(Og(d)))),Lt(r,yO)}i.splice(0,o);var f=t.completedBoundaries;for(o=0;o<f.length;o++)mA(t,e,f[o]);f.splice(0,o),Zb(e),Wr=new Uint8Array(512),zr=0;var h=t.partialBoundaries;for(o=0;o<h.length;o++){var p=h[o];e:{i=t,s=e;var g=p.completedSegments;for(a=0;a<g.length;a++)if(!D2(i,s,p,g[a])){a++,g.splice(0,a);var C=!1;break e}g.splice(0,a),C=!0}if(!C){t.destination=null,o++,h.splice(0,o);return}}h.splice(0,o);var v=t.completedBoundaries;for(o=0;o<v.length;o++)mA(t,e,v[o]);v.splice(0,o)}finally{Zb(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function vA(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return T2(r,t,e)}),n.clear(),t.destination!==null&&N1(t,t.destination)}catch(r){$d(t,r),N0(t,r)}}w1.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,o,s=new Promise(function(u,d){o=u,i=d}),a=FO(t,vF(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),CF(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,l2(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{N1(a,d)}catch(f){$d(a,f),N0(a,f)}}},cancel:function(){vA(a)}},{highWaterMark:0});u.allReady=s,n(u)},function(u){s.catch(function(){}),r(u)},i);if(e&&e.signal){var c=e.signal,l=function(){vA(a,c.reason),c.removeEventListener("abort",l)};c.addEventListener("abort",l)}_2(a)})};w1.version="18.3.1";var iu,P2;iu=ru,P2=w1;Da.version=iu.version;Da.renderToString=iu.renderToString;Da.renderToStaticMarkup=iu.renderToStaticMarkup;Da.renderToNodeStream=iu.renderToNodeStream;Da.renderToStaticNodeStream=iu.renderToStaticNodeStream;Da.renderToReadableStream=P2.renderToReadableStream;/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:N2,setPrototypeOf:CA,isFrozen:MO,getPrototypeOf:LO,getOwnPropertyDescriptor:UO}=Object;let{freeze:fr,seal:mi,create:B2}=Object,{apply:iC,construct:oC}=typeof Reflect<"u"&&Reflect;fr||(fr=function(e){return e});mi||(mi=function(e){return e});iC||(iC=function(e,n,r){return e.apply(n,r)});oC||(oC=function(e,n){return new e(...n)});const th=qr(Array.prototype.forEach),yA=qr(Array.prototype.pop),Pu=qr(Array.prototype.push),Oh=qr(String.prototype.toLowerCase),Lg=qr(String.prototype.toString),xA=qr(String.prototype.match),Nu=qr(String.prototype.replace),VO=qr(String.prototype.indexOf),GO=qr(String.prototype.trim),bi=qr(Object.prototype.hasOwnProperty),er=qr(RegExp.prototype.test),Bu=WO(TypeError);function qr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return iC(t,e,r)}}function WO(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return oC(t,n)}}function Ke(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Oh;CA&&CA(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(MO(e)||(e[r]=o),i=o)}t[i]=!0}return t}function zO(t){for(let e=0;e<t.length;e++)bi(t,e)||(t[e]=null);return t}function Ka(t){const e=B2(null);for(const[n,r]of N2(t))bi(t,n)&&(Array.isArray(r)?e[n]=zO(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Ka(r):e[n]=r);return e}function Fu(t,e){for(;t!==null;){const r=UO(t,e);if(r){if(r.get)return qr(r.get);if(typeof r.value=="function")return qr(r.value)}t=LO(t)}function n(){return null}return n}const IA=fr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ug=fr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Vg=fr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),jO=fr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Gg=fr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),HO=fr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),bA=fr(["#text"]),AA=fr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Wg=fr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),wA=fr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),nh=fr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZO=mi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$O=mi(/<%[\w\W]*|[\w\W]*%>/gm),XO=mi(/\${[\w\W]*}/gm),KO=mi(/^data-[\-\w.\u00B7-\uFFFF]/),JO=mi(/^aria-[\-\w]+$/),F2=mi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),YO=mi(/^(?:\w+script|data):/i),qO=mi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),O2=mi(/^html$/i),QO=mi(/^[a-z][.\w]*(-[.\w]+)+$/i);var SA=Object.freeze({__proto__:null,MUSTACHE_EXPR:ZO,ERB_EXPR:$O,TMPLIT_EXPR:XO,DATA_ATTR:KO,ARIA_ATTR:JO,IS_ALLOWED_URI:F2,IS_SCRIPT_OR_DATA:YO,ATTR_WHITESPACE:qO,DOCTYPE_NAME:O2,CUSTOM_ELEMENT:QO});const Ou={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},eM=function(){return typeof window>"u"?null:window},tM=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function M2(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eM();const e=pe=>M2(pe);if(e.version="3.1.7",e.removed=[],!t||!t.document||t.document.nodeType!==Ou.document)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:c,NodeFilter:l,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:f,trustedTypes:h}=t,p=c.prototype,g=Fu(p,"cloneNode"),C=Fu(p,"remove"),v=Fu(p,"nextSibling"),m=Fu(p,"childNodes"),y=Fu(p,"parentNode");if(typeof s=="function"){const pe=n.createElement("template");pe.content&&pe.content.ownerDocument&&(n=pe.content.ownerDocument)}let I,b="";const{implementation:A,createNodeIterator:E,createDocumentFragment:k,getElementsByTagName:D}=n,{importNode:T}=r;let R={};e.isSupported=typeof N2=="function"&&typeof y=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:M,TMPLIT_EXPR:G,DATA_ATTR:j,ARIA_ATTR:Q,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:q}=SA;let{IS_ALLOWED_URI:ne}=SA,F=null;const z=Ke({},[...IA,...Ug,...Vg,...Gg,...bA]);let K=null;const ee=Ke({},[...AA,...Wg,...wA,...nh]);let ae=Object.seal(B2(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,Fe=null,le=!0,Pt=!0,Gt=!1,ot=!0,ut=!1,mt=!0,st=!1,he=!1,xe=!1,Ue=!1,Le=!1,Ne=!1,je=!0,it=!1;const Ye="user-content-";let pt=!0,Yt=!1,Ht={},tn=null;const _=Ke({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let x=null;const w=Ke({},["audio","video","img","source","image","track"]);let B=null;const W=Ke({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),X="http://www.w3.org/1998/Math/MathML",re="http://www.w3.org/2000/svg",Pe="http://www.w3.org/1999/xhtml";let tt=Pe,dt=!1,ht=null;const Xe=Ke({},[X,re,Pe],Lg);let to=null;const js=["application/xhtml+xml","text/html"],ja="text/html";let Zt=null,Ci=null;const yu=n.createElement("form"),Ha=function(V){return V instanceof RegExp||V instanceof Function},yi=function(){let V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ci&&Ci===V)){if((!V||typeof V!="object")&&(V={}),V=Ka(V),to=js.indexOf(V.PARSER_MEDIA_TYPE)===-1?ja:V.PARSER_MEDIA_TYPE,Zt=to==="application/xhtml+xml"?Lg:Oh,F=bi(V,"ALLOWED_TAGS")?Ke({},V.ALLOWED_TAGS,Zt):z,K=bi(V,"ALLOWED_ATTR")?Ke({},V.ALLOWED_ATTR,Zt):ee,ht=bi(V,"ALLOWED_NAMESPACES")?Ke({},V.ALLOWED_NAMESPACES,Lg):Xe,B=bi(V,"ADD_URI_SAFE_ATTR")?Ke(Ka(W),V.ADD_URI_SAFE_ATTR,Zt):W,x=bi(V,"ADD_DATA_URI_TAGS")?Ke(Ka(w),V.ADD_DATA_URI_TAGS,Zt):w,tn=bi(V,"FORBID_CONTENTS")?Ke({},V.FORBID_CONTENTS,Zt):_,ge=bi(V,"FORBID_TAGS")?Ke({},V.FORBID_TAGS,Zt):{},Fe=bi(V,"FORBID_ATTR")?Ke({},V.FORBID_ATTR,Zt):{},Ht=bi(V,"USE_PROFILES")?V.USE_PROFILES:!1,le=V.ALLOW_ARIA_ATTR!==!1,Pt=V.ALLOW_DATA_ATTR!==!1,Gt=V.ALLOW_UNKNOWN_PROTOCOLS||!1,ot=V.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ut=V.SAFE_FOR_TEMPLATES||!1,mt=V.SAFE_FOR_XML!==!1,st=V.WHOLE_DOCUMENT||!1,Ue=V.RETURN_DOM||!1,Le=V.RETURN_DOM_FRAGMENT||!1,Ne=V.RETURN_TRUSTED_TYPE||!1,xe=V.FORCE_BODY||!1,je=V.SANITIZE_DOM!==!1,it=V.SANITIZE_NAMED_PROPS||!1,pt=V.KEEP_CONTENT!==!1,Yt=V.IN_PLACE||!1,ne=V.ALLOWED_URI_REGEXP||F2,tt=V.NAMESPACE||Pe,ae=V.CUSTOM_ELEMENT_HANDLING||{},V.CUSTOM_ELEMENT_HANDLING&&Ha(V.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ae.tagNameCheck=V.CUSTOM_ELEMENT_HANDLING.tagNameCheck),V.CUSTOM_ELEMENT_HANDLING&&Ha(V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ae.attributeNameCheck=V.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),V.CUSTOM_ELEMENT_HANDLING&&typeof V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ae.allowCustomizedBuiltInElements=V.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ut&&(Pt=!1),Le&&(Ue=!0),Ht&&(F=Ke({},bA),K=[],Ht.html===!0&&(Ke(F,IA),Ke(K,AA)),Ht.svg===!0&&(Ke(F,Ug),Ke(K,Wg),Ke(K,nh)),Ht.svgFilters===!0&&(Ke(F,Vg),Ke(K,Wg),Ke(K,nh)),Ht.mathMl===!0&&(Ke(F,Gg),Ke(K,wA),Ke(K,nh))),V.ADD_TAGS&&(F===z&&(F=Ka(F)),Ke(F,V.ADD_TAGS,Zt)),V.ADD_ATTR&&(K===ee&&(K=Ka(K)),Ke(K,V.ADD_ATTR,Zt)),V.ADD_URI_SAFE_ATTR&&Ke(B,V.ADD_URI_SAFE_ATTR,Zt),V.FORBID_CONTENTS&&(tn===_&&(tn=Ka(tn)),Ke(tn,V.FORBID_CONTENTS,Zt)),pt&&(F["#text"]=!0),st&&Ke(F,["html","head","body"]),F.table&&(Ke(F,["tbody"]),delete ge.tbody),V.TRUSTED_TYPES_POLICY){if(typeof V.TRUSTED_TYPES_POLICY.createHTML!="function")throw Bu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof V.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Bu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=V.TRUSTED_TYPES_POLICY,b=I.createHTML("")}else I===void 0&&(I=tM(h,i)),I!==null&&typeof b=="string"&&(b=I.createHTML(""));fr&&fr(V),Ci=V}},Ho=Ke({},["mi","mo","mn","ms","mtext"]),Wc=Ke({},["annotation-xml"]),zc=Ke({},["title","style","font","a","script"]),U=Ke({},[...Ug,...Vg,...jO]),H=Ke({},[...Gg,...HO]),J=function(V){let de=y(V);(!de||!de.tagName)&&(de={namespaceURI:tt,tagName:"template"});const Ae=Oh(V.tagName),Qe=Oh(de.tagName);return ht[V.namespaceURI]?V.namespaceURI===re?de.namespaceURI===Pe?Ae==="svg":de.namespaceURI===X?Ae==="svg"&&(Qe==="annotation-xml"||Ho[Qe]):!!U[Ae]:V.namespaceURI===X?de.namespaceURI===Pe?Ae==="math":de.namespaceURI===re?Ae==="math"&&Wc[Qe]:!!H[Ae]:V.namespaceURI===Pe?de.namespaceURI===re&&!Wc[Qe]||de.namespaceURI===X&&!Ho[Qe]?!1:!H[Ae]&&(zc[Ae]||!U[Ae]):!!(to==="application/xhtml+xml"&&ht[V.namespaceURI]):!1},oe=function(V){Pu(e.removed,{element:V});try{y(V).removeChild(V)}catch{C(V)}},Ce=function(V,de){try{Pu(e.removed,{attribute:de.getAttributeNode(V),from:de})}catch{Pu(e.removed,{attribute:null,from:de})}if(de.removeAttribute(V),V==="is"&&!K[V])if(Ue||Le)try{oe(de)}catch{}else try{de.setAttribute(V,"")}catch{}},Re=function(V){let de=null,Ae=null;if(xe)V="<remove></remove>"+V;else{const nn=xA(V,/^[\r\n\t ]+/);Ae=nn&&nn[0]}to==="application/xhtml+xml"&&tt===Pe&&(V='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+V+"</body></html>");const Qe=I?I.createHTML(V):V;if(tt===Pe)try{de=new f().parseFromString(Qe,to)}catch{}if(!de||!de.documentElement){de=A.createDocument(tt,"template",null);try{de.documentElement.innerHTML=dt?b:Qe}catch{}}const St=de.body||de.documentElement;return V&&Ae&&St.insertBefore(n.createTextNode(Ae),St.childNodes[0]||null),tt===Pe?D.call(de,st?"html":"body")[0]:st?de.documentElement:St},Me=function(V){return E.call(V.ownerDocument||V,V,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT|l.SHOW_PROCESSING_INSTRUCTION|l.SHOW_CDATA_SECTION,null)},be=function(V){return V instanceof d&&(typeof V.nodeName!="string"||typeof V.textContent!="string"||typeof V.removeChild!="function"||!(V.attributes instanceof u)||typeof V.removeAttribute!="function"||typeof V.setAttribute!="function"||typeof V.namespaceURI!="string"||typeof V.insertBefore!="function"||typeof V.hasChildNodes!="function")},ke=function(V){return typeof a=="function"&&V instanceof a},ve=function(V,de,Ae){R[V]&&th(R[V],Qe=>{Qe.call(e,de,Ae,Ci)})},De=function(V){let de=null;if(ve("beforeSanitizeElements",V,null),be(V))return oe(V),!0;const Ae=Zt(V.nodeName);if(ve("uponSanitizeElement",V,{tagName:Ae,allowedTags:F}),V.hasChildNodes()&&!ke(V.firstElementChild)&&er(/<[/\w]/g,V.innerHTML)&&er(/<[/\w]/g,V.textContent)||V.nodeType===Ou.progressingInstruction||mt&&V.nodeType===Ou.comment&&er(/<[/\w]/g,V.data))return oe(V),!0;if(!F[Ae]||ge[Ae]){if(!ge[Ae]&&qe(Ae)&&(ae.tagNameCheck instanceof RegExp&&er(ae.tagNameCheck,Ae)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(Ae)))return!1;if(pt&&!tn[Ae]){const Qe=y(V)||V.parentNode,St=m(V)||V.childNodes;if(St&&Qe){const nn=St.length;for(let ln=nn-1;ln>=0;--ln){const wn=g(St[ln],!0);wn.__removalCount=(V.__removalCount||0)+1,Qe.insertBefore(wn,v(V))}}}return oe(V),!0}return V instanceof c&&!J(V)||(Ae==="noscript"||Ae==="noembed"||Ae==="noframes")&&er(/<\/no(script|embed|frames)/i,V.innerHTML)?(oe(V),!0):(ut&&V.nodeType===Ou.text&&(de=V.textContent,th([P,M,G],Qe=>{de=Nu(de,Qe," ")}),V.textContent!==de&&(Pu(e.removed,{element:V.cloneNode()}),V.textContent=de)),ve("afterSanitizeElements",V,null),!1)},He=function(V,de,Ae){if(je&&(de==="id"||de==="name")&&(Ae in n||Ae in yu))return!1;if(!(Pt&&!Fe[de]&&er(j,de))){if(!(le&&er(Q,de))){if(!K[de]||Fe[de]){if(!(qe(V)&&(ae.tagNameCheck instanceof RegExp&&er(ae.tagNameCheck,V)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(V))&&(ae.attributeNameCheck instanceof RegExp&&er(ae.attributeNameCheck,de)||ae.attributeNameCheck instanceof Function&&ae.attributeNameCheck(de))||de==="is"&&ae.allowCustomizedBuiltInElements&&(ae.tagNameCheck instanceof RegExp&&er(ae.tagNameCheck,Ae)||ae.tagNameCheck instanceof Function&&ae.tagNameCheck(Ae))))return!1}else if(!B[de]){if(!er(ne,Nu(Ae,$,""))){if(!((de==="src"||de==="xlink:href"||de==="href")&&V!=="script"&&VO(Ae,"data:")===0&&x[V])){if(!(Gt&&!er(te,Nu(Ae,$,"")))){if(Ae)return!1}}}}}}return!0},qe=function(V){return V!=="annotation-xml"&&xA(V,q)},cn=function(V){ve("beforeSanitizeAttributes",V,null);const{attributes:de}=V;if(!de)return;const Ae={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:K};let Qe=de.length;for(;Qe--;){const St=de[Qe],{name:nn,namespaceURI:ln,value:wn}=St,no=Zt(nn);let un=nn==="value"?wn:GO(wn);if(Ae.attrName=no,Ae.attrValue=un,Ae.keepAttr=!0,Ae.forceKeepAttr=void 0,ve("uponSanitizeAttribute",V,Ae),un=Ae.attrValue,Ae.forceKeepAttr||(Ce(nn,V),!Ae.keepAttr))continue;if(!ot&&er(/\/>/i,un)){Ce(nn,V);continue}ut&&th([P,M,G],Nt=>{un=Nu(un,Nt," ")});const nt=Zt(V.nodeName);if(He(nt,no,un)){if(it&&(no==="id"||no==="name")&&(Ce(nn,V),un=Ye+un),mt&&er(/((--!?|])>)|<\/(style|title)/i,un)){Ce(nn,V);continue}if(I&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!ln)switch(h.getAttributeType(nt,no)){case"TrustedHTML":{un=I.createHTML(un);break}case"TrustedScriptURL":{un=I.createScriptURL(un);break}}try{ln?V.setAttributeNS(ln,nn,un):V.setAttribute(nn,un),be(V)?oe(V):yA(e.removed)}catch{}}}ve("afterSanitizeAttributes",V,null)},xt=function pe(V){let de=null;const Ae=Me(V);for(ve("beforeSanitizeShadowDOM",V,null);de=Ae.nextNode();)ve("uponSanitizeShadowNode",de,null),!De(de)&&(de.content instanceof o&&pe(de.content),cn(de));ve("afterSanitizeShadowDOM",V,null)};return e.sanitize=function(pe){let V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},de=null,Ae=null,Qe=null,St=null;if(dt=!pe,dt&&(pe="<!-->"),typeof pe!="string"&&!ke(pe))if(typeof pe.toString=="function"){if(pe=pe.toString(),typeof pe!="string")throw Bu("dirty is not a string, aborting")}else throw Bu("toString is not a function");if(!e.isSupported)return pe;if(he||yi(V),e.removed=[],typeof pe=="string"&&(Yt=!1),Yt){if(pe.nodeName){const wn=Zt(pe.nodeName);if(!F[wn]||ge[wn])throw Bu("root node is forbidden and cannot be sanitized in-place")}}else if(pe instanceof a)de=Re("<!---->"),Ae=de.ownerDocument.importNode(pe,!0),Ae.nodeType===Ou.element&&Ae.nodeName==="BODY"||Ae.nodeName==="HTML"?de=Ae:de.appendChild(Ae);else{if(!Ue&&!ut&&!st&&pe.indexOf("<")===-1)return I&&Ne?I.createHTML(pe):pe;if(de=Re(pe),!de)return Ue?null:Ne?b:""}de&&xe&&oe(de.firstChild);const nn=Me(Yt?pe:de);for(;Qe=nn.nextNode();)De(Qe)||(Qe.content instanceof o&&xt(Qe.content),cn(Qe));if(Yt)return pe;if(Ue){if(Le)for(St=k.call(de.ownerDocument);de.firstChild;)St.appendChild(de.firstChild);else St=de;return(K.shadowroot||K.shadowrootmode)&&(St=T.call(r,St,!0)),St}let ln=st?de.outerHTML:de.innerHTML;return st&&F["!doctype"]&&de.ownerDocument&&de.ownerDocument.doctype&&de.ownerDocument.doctype.name&&er(O2,de.ownerDocument.doctype.name)&&(ln="<!DOCTYPE "+de.ownerDocument.doctype.name+`>
`+ln),ut&&th([P,M,G],wn=>{ln=Nu(ln,wn," ")}),I&&Ne?I.createHTML(ln):ln},e.setConfig=function(){let pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};yi(pe),he=!0},e.clearConfig=function(){Ci=null,he=!1},e.isValidAttribute=function(pe,V,de){Ci||yi({});const Ae=Zt(pe),Qe=Zt(V);return He(Ae,Qe,de)},e.addHook=function(pe,V){typeof V=="function"&&(R[pe]=R[pe]||[],Pu(R[pe],V))},e.removeHook=function(pe){if(R[pe])return yA(R[pe])},e.removeHooks=function(pe){R[pe]&&(R[pe]=[])},e.removeAllHooks=function(){R={}},e}var nM=M2();const tc=class tc extends gt.Component{constructor(n){super(n);L(this,"outputRef",gt.createRef());L(this,"messageKey",0);L(this,"saveOutput",()=>{const n=this.state.output.map(r=>Da.renderToStaticMarkup(r));localStorage.setItem(tc.LOCAL_STORAGE_KEY,JSON.stringify(n))});L(this,"loadOutput",()=>{const n=localStorage.getItem(tc.LOCAL_STORAGE_KEY);return n?JSON.parse(n).map(i=>gt.createElement("div",{dangerouslySetInnerHTML:{__html:i}})):[]});L(this,"addCommand",n=>{this.addToOutput([Y.jsx("span",{className:"command","aria-live":"off",children:n})],!1)});L(this,"addError",n=>this.addToOutput([Y.jsxs("h2",{children:[" Error: ",n.message]})]));L(this,"handleConnected",()=>this.addToOutput([Y.jsx("h2",{children:" Connected"})]));L(this,"handleDisconnected",()=>{this.addToOutput([Y.jsx("h2",{children:" Disconnected"})]),this.setState({sidebarVisible:!1})});L(this,"handleUserList",n=>this.setState({sidebarVisible:!!n}));L(this,"handleScroll",()=>{this.isScrolledToBottom()&&this.setState({newLinesCount:0})});L(this,"isScrolledToBottom",()=>{const n=this.outputRef.current;return n?n.scrollHeight-n.scrollTop<=n.clientHeight+1:!1});L(this,"handleScrollToBottom",()=>{this.scrollToBottom(),this.setState({newLinesCount:0})});L(this,"scrollToBottom",()=>{const n=this.outputRef.current;n&&(n.scrollTop=n.scrollHeight)});L(this,"handleMessage",n=>{if(!n)return;const r=A4(n,this.handleExitClick);this.addToOutput(r)});L(this,"handleHtml",n=>{const r=nM.sanitize(n),i=Y.jsx("div",{style:{whiteSpace:"normal"},dangerouslySetInnerHTML:{__html:r}});this.addToOutput([i])});L(this,"handleExitClick",n=>{this.props.client.sendCommand(n)});this.state={output:this.loadOutput(),sidebarVisible:!1,newLinesCount:0}}getSnapshotBeforeUpdate(n,r){if(this.outputRef.current){const i=this.outputRef.current;return i.scrollHeight-i.scrollTop<=i.clientHeight}return null}componentDidUpdate(n,r,i){i&&this.scrollToBottom(),this.state.output.length>r.output.length&&(this.isScrolledToBottom()?this.setState({newLinesCount:0}):this.setState({newLinesCount:this.state.newLinesCount+(this.state.output.length-r.output.length)})),this.saveOutput()}componentDidMount(){const{client:n}=this.props;n.on("message",this.handleMessage),n.on("html",this.handleHtml),n.on("connect",this.handleConnected),n.on("disconnect",this.handleDisconnected),n.on("error",this.addError),n.on("command",this.addCommand),n.on("userlist",this.handleUserList)}componentWillUnmount(){const{client:n}=this.props;n.removeListener("message",this.handleMessage),n.removeListener("html",this.handleHtml),n.removeListener("connect",this.handleConnected),n.removeListener("disconnect",this.handleDisconnected),n.removeListener("error",this.addError),n.removeListener("command",this.addCommand),n.removeListener("userlist",this.handleUserList)}sanitizeHtml(n){return new DOMParser().parseFromString(n,"text/html").body.textContent||""}addToOutput(n,r=!0){r&&n.forEach(i=>{if(gt.isValidElement(i)){const o=Da.renderToString(i),s=this.sanitizeHtml(o);wb(s)}else typeof i=="string"&&wb(i)}),this.setState(i=>{const o=n.map((c,l)=>Y.jsx("div",{children:c},this.messageKey+l));return this.messageKey+=n.length,{output:[...i.output,...o].slice(-tc.MAX_OUTPUT_LENGTH)}})}saveLog(){const n=this.outputRef.current;if(n){const r=n.innerHTML,i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=new Date,c=a.toLocaleDateString(),l=a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=`${document.title.replace(/\s+/g,"-")}-log-${c}-${l}.html`;s.download=d,s.href=o,s.click(),URL.revokeObjectURL(o),s.remove()}}clearLog(){this.setState({output:[]})}render(){var n="output";this.state.sidebarVisible&&(n+=" sidebar-visible");const r=`${this.state.newLinesCount} new ${this.state.newLinesCount===1?"message":"messages"}`;return Y.jsxs("div",{ref:this.outputRef,className:n,onScroll:this.handleScroll,children:[this.state.output,this.state.newLinesCount>0&&Y.jsx("div",{className:"new-lines-notification",onClick:this.handleScrollToBottom,role:"button","aria-live":"off",children:r})]})}};L(tc,"MAX_OUTPUT_LENGTH",7500),L(tc,"LOCAL_STORAGE_KEY","outputLog");let sC=tc;var L2={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function o(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||c,f),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function s(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,f,h,p){var g=n?n+l:l;if(!this._events[g])return!1;var C=this._events[g],v=arguments.length,m,y;if(C.fn){switch(C.once&&this.removeListener(l,C.fn,void 0,!0),v){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,u),!0;case 3:return C.fn.call(C.context,u,d),!0;case 4:return C.fn.call(C.context,u,d,f),!0;case 5:return C.fn.call(C.context,u,d,f,h),!0;case 6:return C.fn.call(C.context,u,d,f,h,p),!0}for(y=1,m=new Array(v-1);y<v;y++)m[y-1]=arguments[y];C.fn.apply(C.context,m)}else{var I=C.length,b;for(y=0;y<I;y++)switch(C[y].once&&this.removeListener(l,C[y].fn,void 0,!0),v){case 1:C[y].fn.call(C[y].context);break;case 2:C[y].fn.call(C[y].context,u);break;case 3:C[y].fn.call(C[y].context,u,d);break;case 4:C[y].fn.call(C[y].context,u,d,f);break;default:if(!m)for(b=1,m=new Array(v-1);b<v;b++)m[b-1]=arguments[b];C[y].fn.apply(C[y].context,m)}}return!0},a.prototype.on=function(l,u,d){return o(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return o(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return s(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&s(this,h);else{for(var g=0,C=[],v=p.length;g<v;g++)(p[g].fn!==u||f&&!p[g].once||d&&p[g].context!==d)&&C.push(p[g]);C.length?this._events[h]=C.length===1?C[0]:C:s(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(L2);var rM=L2.exports;const B1=Ql(rM);var Dn={},Dp={};Dp.byteLength=sM;Dp.toByteArray=cM;Dp.fromByteArray=dM;var po=[],ri=[],iM=typeof Uint8Array<"u"?Uint8Array:Array,zg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Kc=0,oM=zg.length;Kc<oM;++Kc)po[Kc]=zg[Kc],ri[zg.charCodeAt(Kc)]=Kc;ri[45]=62;ri[95]=63;function U2(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function sM(t){var e=U2(t),n=e[0],r=e[1];return(n+r)*3/4-r}function aM(t,e,n){return(e+n)*3/4-n}function cM(t){var e,n=U2(t),r=n[0],i=n[1],o=new iM(aM(t,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=ri[t.charCodeAt(c)]<<18|ri[t.charCodeAt(c+1)]<<12|ri[t.charCodeAt(c+2)]<<6|ri[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=ri[t.charCodeAt(c)]<<2|ri[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=ri[t.charCodeAt(c)]<<10|ri[t.charCodeAt(c+1)]<<4|ri[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function lM(t){return po[t>>18&63]+po[t>>12&63]+po[t>>6&63]+po[t&63]}function uM(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(lM(r));return i.join("")}function dM(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(uM(t,s,s+o>a?a:s+o));return r===1?(e=t[n-1],i.push(po[e>>2]+po[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(po[e>>10]+po[e>>4&63]+po[e<<2&63]+"=")),i.join("")}var F1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */F1.read=function(t,e,n,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=t[e+d];for(d+=f,o=h&(1<<-u)-1,h>>=-u,u+=a;u>0;o=o*256+t[e+d],d+=f,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=s*256+t[e+d],d+=f,u-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:(h?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-l}return(h?-1:1)*s*Math.pow(2,o-r)};F1.write=function(t,e,n,r,i,o){var s,a,c,l=o*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=f/c:e+=f*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(e*c-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+h]=a&255,h+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+h]=s&255,h+=p,s/=256,l-=8);t[n+h-p]|=g*128};(function(t){const e=Dp,n=F1,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=m,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const _=new Uint8Array(1),x={foo:function(){return 42}};return Object.setPrototypeOf(x,Uint8Array.prototype),Object.setPrototypeOf(_,x),_.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(_){if(_>i)throw new RangeError('The value "'+_+'" is invalid for option "size"');const x=new Uint8Array(_);return Object.setPrototypeOf(x,a.prototype),x}function a(_,x,w){if(typeof _=="number"){if(typeof x=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(_)}return c(_,x,w)}a.poolSize=8192;function c(_,x,w){if(typeof _=="string")return f(_,x);if(ArrayBuffer.isView(_))return p(_);if(_==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _);if(Ye(_,ArrayBuffer)||_&&Ye(_.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ye(_,SharedArrayBuffer)||_&&Ye(_.buffer,SharedArrayBuffer)))return g(_,x,w);if(typeof _=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const B=_.valueOf&&_.valueOf();if(B!=null&&B!==_)return a.from(B,x,w);const W=C(_);if(W)return W;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof _[Symbol.toPrimitive]=="function")return a.from(_[Symbol.toPrimitive]("string"),x,w);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof _)}a.from=function(_,x,w){return c(_,x,w)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(_){if(typeof _!="number")throw new TypeError('"size" argument must be of type number');if(_<0)throw new RangeError('The value "'+_+'" is invalid for option "size"')}function u(_,x,w){return l(_),_<=0?s(_):x!==void 0?typeof w=="string"?s(_).fill(x,w):s(_).fill(x):s(_)}a.alloc=function(_,x,w){return u(_,x,w)};function d(_){return l(_),s(_<0?0:v(_)|0)}a.allocUnsafe=function(_){return d(_)},a.allocUnsafeSlow=function(_){return d(_)};function f(_,x){if((typeof x!="string"||x==="")&&(x="utf8"),!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);const w=y(_,x)|0;let B=s(w);const W=B.write(_,x);return W!==w&&(B=B.slice(0,W)),B}function h(_){const x=_.length<0?0:v(_.length)|0,w=s(x);for(let B=0;B<x;B+=1)w[B]=_[B]&255;return w}function p(_){if(Ye(_,Uint8Array)){const x=new Uint8Array(_);return g(x.buffer,x.byteOffset,x.byteLength)}return h(_)}function g(_,x,w){if(x<0||_.byteLength<x)throw new RangeError('"offset" is outside of buffer bounds');if(_.byteLength<x+(w||0))throw new RangeError('"length" is outside of buffer bounds');let B;return x===void 0&&w===void 0?B=new Uint8Array(_):w===void 0?B=new Uint8Array(_,x):B=new Uint8Array(_,x,w),Object.setPrototypeOf(B,a.prototype),B}function C(_){if(a.isBuffer(_)){const x=v(_.length)|0,w=s(x);return w.length===0||_.copy(w,0,0,x),w}if(_.length!==void 0)return typeof _.length!="number"||pt(_.length)?s(0):h(_);if(_.type==="Buffer"&&Array.isArray(_.data))return h(_.data)}function v(_){if(_>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return _|0}function m(_){return+_!=_&&(_=0),a.alloc(+_)}a.isBuffer=function(x){return x!=null&&x._isBuffer===!0&&x!==a.prototype},a.compare=function(x,w){if(Ye(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),Ye(w,Uint8Array)&&(w=a.from(w,w.offset,w.byteLength)),!a.isBuffer(x)||!a.isBuffer(w))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(x===w)return 0;let B=x.length,W=w.length;for(let X=0,re=Math.min(B,W);X<re;++X)if(x[X]!==w[X]){B=x[X],W=w[X];break}return B<W?-1:W<B?1:0},a.isEncoding=function(x){switch(String(x).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(x,w){if(!Array.isArray(x))throw new TypeError('"list" argument must be an Array of Buffers');if(x.length===0)return a.alloc(0);let B;if(w===void 0)for(w=0,B=0;B<x.length;++B)w+=x[B].length;const W=a.allocUnsafe(w);let X=0;for(B=0;B<x.length;++B){let re=x[B];if(Ye(re,Uint8Array))X+re.length>W.length?(a.isBuffer(re)||(re=a.from(re)),re.copy(W,X)):Uint8Array.prototype.set.call(W,re,X);else if(a.isBuffer(re))re.copy(W,X);else throw new TypeError('"list" argument must be an Array of Buffers');X+=re.length}return W};function y(_,x){if(a.isBuffer(_))return _.length;if(ArrayBuffer.isView(_)||Ye(_,ArrayBuffer))return _.byteLength;if(typeof _!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof _);const w=_.length,B=arguments.length>2&&arguments[2]===!0;if(!B&&w===0)return 0;let W=!1;for(;;)switch(x){case"ascii":case"latin1":case"binary":return w;case"utf8":case"utf-8":return Ue(_).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return w*2;case"hex":return w>>>1;case"base64":return je(_).length;default:if(W)return B?-1:Ue(_).length;x=(""+x).toLowerCase(),W=!0}}a.byteLength=y;function I(_,x,w){let B=!1;if((x===void 0||x<0)&&(x=0),x>this.length||((w===void 0||w>this.length)&&(w=this.length),w<=0)||(w>>>=0,x>>>=0,w<=x))return"";for(_||(_="utf8");;)switch(_){case"hex":return q(this,x,w);case"utf8":case"utf-8":return G(this,x,w);case"ascii":return te(this,x,w);case"latin1":case"binary":return $(this,x,w);case"base64":return M(this,x,w);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,x,w);default:if(B)throw new TypeError("Unknown encoding: "+_);_=(_+"").toLowerCase(),B=!0}}a.prototype._isBuffer=!0;function b(_,x,w){const B=_[x];_[x]=_[w],_[w]=B}a.prototype.swap16=function(){const x=this.length;if(x%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let w=0;w<x;w+=2)b(this,w,w+1);return this},a.prototype.swap32=function(){const x=this.length;if(x%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let w=0;w<x;w+=4)b(this,w,w+3),b(this,w+1,w+2);return this},a.prototype.swap64=function(){const x=this.length;if(x%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let w=0;w<x;w+=8)b(this,w,w+7),b(this,w+1,w+6),b(this,w+2,w+5),b(this,w+3,w+4);return this},a.prototype.toString=function(){const x=this.length;return x===0?"":arguments.length===0?G(this,0,x):I.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(x){if(!a.isBuffer(x))throw new TypeError("Argument must be a Buffer");return this===x?!0:a.compare(this,x)===0},a.prototype.inspect=function(){let x="";const w=t.INSPECT_MAX_BYTES;return x=this.toString("hex",0,w).replace(/(.{2})/g,"$1 ").trim(),this.length>w&&(x+=" ... "),"<Buffer "+x+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(x,w,B,W,X){if(Ye(x,Uint8Array)&&(x=a.from(x,x.offset,x.byteLength)),!a.isBuffer(x))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof x);if(w===void 0&&(w=0),B===void 0&&(B=x?x.length:0),W===void 0&&(W=0),X===void 0&&(X=this.length),w<0||B>x.length||W<0||X>this.length)throw new RangeError("out of range index");if(W>=X&&w>=B)return 0;if(W>=X)return-1;if(w>=B)return 1;if(w>>>=0,B>>>=0,W>>>=0,X>>>=0,this===x)return 0;let re=X-W,Pe=B-w;const tt=Math.min(re,Pe),dt=this.slice(W,X),ht=x.slice(w,B);for(let Xe=0;Xe<tt;++Xe)if(dt[Xe]!==ht[Xe]){re=dt[Xe],Pe=ht[Xe];break}return re<Pe?-1:Pe<re?1:0};function A(_,x,w,B,W){if(_.length===0)return-1;if(typeof w=="string"?(B=w,w=0):w>2147483647?w=2147483647:w<-2147483648&&(w=-2147483648),w=+w,pt(w)&&(w=W?0:_.length-1),w<0&&(w=_.length+w),w>=_.length){if(W)return-1;w=_.length-1}else if(w<0)if(W)w=0;else return-1;if(typeof x=="string"&&(x=a.from(x,B)),a.isBuffer(x))return x.length===0?-1:E(_,x,w,B,W);if(typeof x=="number")return x=x&255,typeof Uint8Array.prototype.indexOf=="function"?W?Uint8Array.prototype.indexOf.call(_,x,w):Uint8Array.prototype.lastIndexOf.call(_,x,w):E(_,[x],w,B,W);throw new TypeError("val must be string, number or Buffer")}function E(_,x,w,B,W){let X=1,re=_.length,Pe=x.length;if(B!==void 0&&(B=String(B).toLowerCase(),B==="ucs2"||B==="ucs-2"||B==="utf16le"||B==="utf-16le")){if(_.length<2||x.length<2)return-1;X=2,re/=2,Pe/=2,w/=2}function tt(ht,Xe){return X===1?ht[Xe]:ht.readUInt16BE(Xe*X)}let dt;if(W){let ht=-1;for(dt=w;dt<re;dt++)if(tt(_,dt)===tt(x,ht===-1?0:dt-ht)){if(ht===-1&&(ht=dt),dt-ht+1===Pe)return ht*X}else ht!==-1&&(dt-=dt-ht),ht=-1}else for(w+Pe>re&&(w=re-Pe),dt=w;dt>=0;dt--){let ht=!0;for(let Xe=0;Xe<Pe;Xe++)if(tt(_,dt+Xe)!==tt(x,Xe)){ht=!1;break}if(ht)return dt}return-1}a.prototype.includes=function(x,w,B){return this.indexOf(x,w,B)!==-1},a.prototype.indexOf=function(x,w,B){return A(this,x,w,B,!0)},a.prototype.lastIndexOf=function(x,w,B){return A(this,x,w,B,!1)};function k(_,x,w,B){w=Number(w)||0;const W=_.length-w;B?(B=Number(B),B>W&&(B=W)):B=W;const X=x.length;B>X/2&&(B=X/2);let re;for(re=0;re<B;++re){const Pe=parseInt(x.substr(re*2,2),16);if(pt(Pe))return re;_[w+re]=Pe}return re}function D(_,x,w,B){return it(Ue(x,_.length-w),_,w,B)}function T(_,x,w,B){return it(Le(x),_,w,B)}function R(_,x,w,B){return it(je(x),_,w,B)}function P(_,x,w,B){return it(Ne(x,_.length-w),_,w,B)}a.prototype.write=function(x,w,B,W){if(w===void 0)W="utf8",B=this.length,w=0;else if(B===void 0&&typeof w=="string")W=w,B=this.length,w=0;else if(isFinite(w))w=w>>>0,isFinite(B)?(B=B>>>0,W===void 0&&(W="utf8")):(W=B,B=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const X=this.length-w;if((B===void 0||B>X)&&(B=X),x.length>0&&(B<0||w<0)||w>this.length)throw new RangeError("Attempt to write outside buffer bounds");W||(W="utf8");let re=!1;for(;;)switch(W){case"hex":return k(this,x,w,B);case"utf8":case"utf-8":return D(this,x,w,B);case"ascii":case"latin1":case"binary":return T(this,x,w,B);case"base64":return R(this,x,w,B);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,x,w,B);default:if(re)throw new TypeError("Unknown encoding: "+W);W=(""+W).toLowerCase(),re=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function M(_,x,w){return x===0&&w===_.length?e.fromByteArray(_):e.fromByteArray(_.slice(x,w))}function G(_,x,w){w=Math.min(_.length,w);const B=[];let W=x;for(;W<w;){const X=_[W];let re=null,Pe=X>239?4:X>223?3:X>191?2:1;if(W+Pe<=w){let tt,dt,ht,Xe;switch(Pe){case 1:X<128&&(re=X);break;case 2:tt=_[W+1],(tt&192)===128&&(Xe=(X&31)<<6|tt&63,Xe>127&&(re=Xe));break;case 3:tt=_[W+1],dt=_[W+2],(tt&192)===128&&(dt&192)===128&&(Xe=(X&15)<<12|(tt&63)<<6|dt&63,Xe>2047&&(Xe<55296||Xe>57343)&&(re=Xe));break;case 4:tt=_[W+1],dt=_[W+2],ht=_[W+3],(tt&192)===128&&(dt&192)===128&&(ht&192)===128&&(Xe=(X&15)<<18|(tt&63)<<12|(dt&63)<<6|ht&63,Xe>65535&&Xe<1114112&&(re=Xe))}}re===null?(re=65533,Pe=1):re>65535&&(re-=65536,B.push(re>>>10&1023|55296),re=56320|re&1023),B.push(re),W+=Pe}return Q(B)}const j=4096;function Q(_){const x=_.length;if(x<=j)return String.fromCharCode.apply(String,_);let w="",B=0;for(;B<x;)w+=String.fromCharCode.apply(String,_.slice(B,B+=j));return w}function te(_,x,w){let B="";w=Math.min(_.length,w);for(let W=x;W<w;++W)B+=String.fromCharCode(_[W]&127);return B}function $(_,x,w){let B="";w=Math.min(_.length,w);for(let W=x;W<w;++W)B+=String.fromCharCode(_[W]);return B}function q(_,x,w){const B=_.length;(!x||x<0)&&(x=0),(!w||w<0||w>B)&&(w=B);let W="";for(let X=x;X<w;++X)W+=Yt[_[X]];return W}function ne(_,x,w){const B=_.slice(x,w);let W="";for(let X=0;X<B.length-1;X+=2)W+=String.fromCharCode(B[X]+B[X+1]*256);return W}a.prototype.slice=function(x,w){const B=this.length;x=~~x,w=w===void 0?B:~~w,x<0?(x+=B,x<0&&(x=0)):x>B&&(x=B),w<0?(w+=B,w<0&&(w=0)):w>B&&(w=B),w<x&&(w=x);const W=this.subarray(x,w);return Object.setPrototypeOf(W,a.prototype),W};function F(_,x,w){if(_%1!==0||_<0)throw new RangeError("offset is not uint");if(_+x>w)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(x,w,B){x=x>>>0,w=w>>>0,B||F(x,w,this.length);let W=this[x],X=1,re=0;for(;++re<w&&(X*=256);)W+=this[x+re]*X;return W},a.prototype.readUintBE=a.prototype.readUIntBE=function(x,w,B){x=x>>>0,w=w>>>0,B||F(x,w,this.length);let W=this[x+--w],X=1;for(;w>0&&(X*=256);)W+=this[x+--w]*X;return W},a.prototype.readUint8=a.prototype.readUInt8=function(x,w){return x=x>>>0,w||F(x,1,this.length),this[x]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(x,w){return x=x>>>0,w||F(x,2,this.length),this[x]|this[x+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(x,w){return x=x>>>0,w||F(x,2,this.length),this[x]<<8|this[x+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(x,w){return x=x>>>0,w||F(x,4,this.length),(this[x]|this[x+1]<<8|this[x+2]<<16)+this[x+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(x,w){return x=x>>>0,w||F(x,4,this.length),this[x]*16777216+(this[x+1]<<16|this[x+2]<<8|this[x+3])},a.prototype.readBigUInt64LE=Ht(function(x){x=x>>>0,mt(x,"offset");const w=this[x],B=this[x+7];(w===void 0||B===void 0)&&st(x,this.length-8);const W=w+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24,X=this[++x]+this[++x]*2**8+this[++x]*2**16+B*2**24;return BigInt(W)+(BigInt(X)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ht(function(x){x=x>>>0,mt(x,"offset");const w=this[x],B=this[x+7];(w===void 0||B===void 0)&&st(x,this.length-8);const W=w*2**24+this[++x]*2**16+this[++x]*2**8+this[++x],X=this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+B;return(BigInt(W)<<BigInt(32))+BigInt(X)}),a.prototype.readIntLE=function(x,w,B){x=x>>>0,w=w>>>0,B||F(x,w,this.length);let W=this[x],X=1,re=0;for(;++re<w&&(X*=256);)W+=this[x+re]*X;return X*=128,W>=X&&(W-=Math.pow(2,8*w)),W},a.prototype.readIntBE=function(x,w,B){x=x>>>0,w=w>>>0,B||F(x,w,this.length);let W=w,X=1,re=this[x+--W];for(;W>0&&(X*=256);)re+=this[x+--W]*X;return X*=128,re>=X&&(re-=Math.pow(2,8*w)),re},a.prototype.readInt8=function(x,w){return x=x>>>0,w||F(x,1,this.length),this[x]&128?(255-this[x]+1)*-1:this[x]},a.prototype.readInt16LE=function(x,w){x=x>>>0,w||F(x,2,this.length);const B=this[x]|this[x+1]<<8;return B&32768?B|4294901760:B},a.prototype.readInt16BE=function(x,w){x=x>>>0,w||F(x,2,this.length);const B=this[x+1]|this[x]<<8;return B&32768?B|4294901760:B},a.prototype.readInt32LE=function(x,w){return x=x>>>0,w||F(x,4,this.length),this[x]|this[x+1]<<8|this[x+2]<<16|this[x+3]<<24},a.prototype.readInt32BE=function(x,w){return x=x>>>0,w||F(x,4,this.length),this[x]<<24|this[x+1]<<16|this[x+2]<<8|this[x+3]},a.prototype.readBigInt64LE=Ht(function(x){x=x>>>0,mt(x,"offset");const w=this[x],B=this[x+7];(w===void 0||B===void 0)&&st(x,this.length-8);const W=this[x+4]+this[x+5]*2**8+this[x+6]*2**16+(B<<24);return(BigInt(W)<<BigInt(32))+BigInt(w+this[++x]*2**8+this[++x]*2**16+this[++x]*2**24)}),a.prototype.readBigInt64BE=Ht(function(x){x=x>>>0,mt(x,"offset");const w=this[x],B=this[x+7];(w===void 0||B===void 0)&&st(x,this.length-8);const W=(w<<24)+this[++x]*2**16+this[++x]*2**8+this[++x];return(BigInt(W)<<BigInt(32))+BigInt(this[++x]*2**24+this[++x]*2**16+this[++x]*2**8+B)}),a.prototype.readFloatLE=function(x,w){return x=x>>>0,w||F(x,4,this.length),n.read(this,x,!0,23,4)},a.prototype.readFloatBE=function(x,w){return x=x>>>0,w||F(x,4,this.length),n.read(this,x,!1,23,4)},a.prototype.readDoubleLE=function(x,w){return x=x>>>0,w||F(x,8,this.length),n.read(this,x,!0,52,8)},a.prototype.readDoubleBE=function(x,w){return x=x>>>0,w||F(x,8,this.length),n.read(this,x,!1,52,8)};function z(_,x,w,B,W,X){if(!a.isBuffer(_))throw new TypeError('"buffer" argument must be a Buffer instance');if(x>W||x<X)throw new RangeError('"value" argument is out of bounds');if(w+B>_.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(x,w,B,W){if(x=+x,w=w>>>0,B=B>>>0,!W){const Pe=Math.pow(2,8*B)-1;z(this,x,w,B,Pe,0)}let X=1,re=0;for(this[w]=x&255;++re<B&&(X*=256);)this[w+re]=x/X&255;return w+B},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(x,w,B,W){if(x=+x,w=w>>>0,B=B>>>0,!W){const Pe=Math.pow(2,8*B)-1;z(this,x,w,B,Pe,0)}let X=B-1,re=1;for(this[w+X]=x&255;--X>=0&&(re*=256);)this[w+X]=x/re&255;return w+B},a.prototype.writeUint8=a.prototype.writeUInt8=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,1,255,0),this[w]=x&255,w+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,2,65535,0),this[w]=x&255,this[w+1]=x>>>8,w+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,2,65535,0),this[w]=x>>>8,this[w+1]=x&255,w+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,4,4294967295,0),this[w+3]=x>>>24,this[w+2]=x>>>16,this[w+1]=x>>>8,this[w]=x&255,w+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,4,4294967295,0),this[w]=x>>>24,this[w+1]=x>>>16,this[w+2]=x>>>8,this[w+3]=x&255,w+4};function K(_,x,w,B,W){ut(x,B,W,_,w,7);let X=Number(x&BigInt(4294967295));_[w++]=X,X=X>>8,_[w++]=X,X=X>>8,_[w++]=X,X=X>>8,_[w++]=X;let re=Number(x>>BigInt(32)&BigInt(4294967295));return _[w++]=re,re=re>>8,_[w++]=re,re=re>>8,_[w++]=re,re=re>>8,_[w++]=re,w}function ee(_,x,w,B,W){ut(x,B,W,_,w,7);let X=Number(x&BigInt(4294967295));_[w+7]=X,X=X>>8,_[w+6]=X,X=X>>8,_[w+5]=X,X=X>>8,_[w+4]=X;let re=Number(x>>BigInt(32)&BigInt(4294967295));return _[w+3]=re,re=re>>8,_[w+2]=re,re=re>>8,_[w+1]=re,re=re>>8,_[w]=re,w+8}a.prototype.writeBigUInt64LE=Ht(function(x,w=0){return K(this,x,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ht(function(x,w=0){return ee(this,x,w,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(x,w,B,W){if(x=+x,w=w>>>0,!W){const tt=Math.pow(2,8*B-1);z(this,x,w,B,tt-1,-tt)}let X=0,re=1,Pe=0;for(this[w]=x&255;++X<B&&(re*=256);)x<0&&Pe===0&&this[w+X-1]!==0&&(Pe=1),this[w+X]=(x/re>>0)-Pe&255;return w+B},a.prototype.writeIntBE=function(x,w,B,W){if(x=+x,w=w>>>0,!W){const tt=Math.pow(2,8*B-1);z(this,x,w,B,tt-1,-tt)}let X=B-1,re=1,Pe=0;for(this[w+X]=x&255;--X>=0&&(re*=256);)x<0&&Pe===0&&this[w+X+1]!==0&&(Pe=1),this[w+X]=(x/re>>0)-Pe&255;return w+B},a.prototype.writeInt8=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,1,127,-128),x<0&&(x=255+x+1),this[w]=x&255,w+1},a.prototype.writeInt16LE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,2,32767,-32768),this[w]=x&255,this[w+1]=x>>>8,w+2},a.prototype.writeInt16BE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,2,32767,-32768),this[w]=x>>>8,this[w+1]=x&255,w+2},a.prototype.writeInt32LE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,4,2147483647,-2147483648),this[w]=x&255,this[w+1]=x>>>8,this[w+2]=x>>>16,this[w+3]=x>>>24,w+4},a.prototype.writeInt32BE=function(x,w,B){return x=+x,w=w>>>0,B||z(this,x,w,4,2147483647,-2147483648),x<0&&(x=4294967295+x+1),this[w]=x>>>24,this[w+1]=x>>>16,this[w+2]=x>>>8,this[w+3]=x&255,w+4},a.prototype.writeBigInt64LE=Ht(function(x,w=0){return K(this,x,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ht(function(x,w=0){return ee(this,x,w,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ae(_,x,w,B,W,X){if(w+B>_.length)throw new RangeError("Index out of range");if(w<0)throw new RangeError("Index out of range")}function ge(_,x,w,B,W){return x=+x,w=w>>>0,W||ae(_,x,w,4),n.write(_,x,w,B,23,4),w+4}a.prototype.writeFloatLE=function(x,w,B){return ge(this,x,w,!0,B)},a.prototype.writeFloatBE=function(x,w,B){return ge(this,x,w,!1,B)};function Fe(_,x,w,B,W){return x=+x,w=w>>>0,W||ae(_,x,w,8),n.write(_,x,w,B,52,8),w+8}a.prototype.writeDoubleLE=function(x,w,B){return Fe(this,x,w,!0,B)},a.prototype.writeDoubleBE=function(x,w,B){return Fe(this,x,w,!1,B)},a.prototype.copy=function(x,w,B,W){if(!a.isBuffer(x))throw new TypeError("argument should be a Buffer");if(B||(B=0),!W&&W!==0&&(W=this.length),w>=x.length&&(w=x.length),w||(w=0),W>0&&W<B&&(W=B),W===B||x.length===0||this.length===0)return 0;if(w<0)throw new RangeError("targetStart out of bounds");if(B<0||B>=this.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("sourceEnd out of bounds");W>this.length&&(W=this.length),x.length-w<W-B&&(W=x.length-w+B);const X=W-B;return this===x&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(w,B,W):Uint8Array.prototype.set.call(x,this.subarray(B,W),w),X},a.prototype.fill=function(x,w,B,W){if(typeof x=="string"){if(typeof w=="string"?(W=w,w=0,B=this.length):typeof B=="string"&&(W=B,B=this.length),W!==void 0&&typeof W!="string")throw new TypeError("encoding must be a string");if(typeof W=="string"&&!a.isEncoding(W))throw new TypeError("Unknown encoding: "+W);if(x.length===1){const re=x.charCodeAt(0);(W==="utf8"&&re<128||W==="latin1")&&(x=re)}}else typeof x=="number"?x=x&255:typeof x=="boolean"&&(x=Number(x));if(w<0||this.length<w||this.length<B)throw new RangeError("Out of range index");if(B<=w)return this;w=w>>>0,B=B===void 0?this.length:B>>>0,x||(x=0);let X;if(typeof x=="number")for(X=w;X<B;++X)this[X]=x;else{const re=a.isBuffer(x)?x:a.from(x,W),Pe=re.length;if(Pe===0)throw new TypeError('The value "'+x+'" is invalid for argument "value"');for(X=0;X<B-w;++X)this[X+w]=re[X%Pe]}return this};const le={};function Pt(_,x,w){le[_]=class extends w{constructor(){super(),Object.defineProperty(this,"message",{value:x.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${_}]`,this.stack,delete this.name}get code(){return _}set code(W){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:W,writable:!0})}toString(){return`${this.name} [${_}]: ${this.message}`}}}Pt("ERR_BUFFER_OUT_OF_BOUNDS",function(_){return _?`${_} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Pt("ERR_INVALID_ARG_TYPE",function(_,x){return`The "${_}" argument must be of type number. Received type ${typeof x}`},TypeError),Pt("ERR_OUT_OF_RANGE",function(_,x,w){let B=`The value of "${_}" is out of range.`,W=w;return Number.isInteger(w)&&Math.abs(w)>2**32?W=Gt(String(w)):typeof w=="bigint"&&(W=String(w),(w>BigInt(2)**BigInt(32)||w<-(BigInt(2)**BigInt(32)))&&(W=Gt(W)),W+="n"),B+=` It must be ${x}. Received ${W}`,B},RangeError);function Gt(_){let x="",w=_.length;const B=_[0]==="-"?1:0;for(;w>=B+4;w-=3)x=`_${_.slice(w-3,w)}${x}`;return`${_.slice(0,w)}${x}`}function ot(_,x,w){mt(x,"offset"),(_[x]===void 0||_[x+w]===void 0)&&st(x,_.length-(w+1))}function ut(_,x,w,B,W,X){if(_>w||_<x){const re=typeof x=="bigint"?"n":"";let Pe;throw x===0||x===BigInt(0)?Pe=`>= 0${re} and < 2${re} ** ${(X+1)*8}${re}`:Pe=`>= -(2${re} ** ${(X+1)*8-1}${re}) and < 2 ** ${(X+1)*8-1}${re}`,new le.ERR_OUT_OF_RANGE("value",Pe,_)}ot(B,W,X)}function mt(_,x){if(typeof _!="number")throw new le.ERR_INVALID_ARG_TYPE(x,"number",_)}function st(_,x,w){throw Math.floor(_)!==_?(mt(_,w),new le.ERR_OUT_OF_RANGE("offset","an integer",_)):x<0?new le.ERR_BUFFER_OUT_OF_BOUNDS:new le.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${x}`,_)}const he=/[^+/0-9A-Za-z-_]/g;function xe(_){if(_=_.split("=")[0],_=_.trim().replace(he,""),_.length<2)return"";for(;_.length%4!==0;)_=_+"=";return _}function Ue(_,x){x=x||1/0;let w;const B=_.length;let W=null;const X=[];for(let re=0;re<B;++re){if(w=_.charCodeAt(re),w>55295&&w<57344){if(!W){if(w>56319){(x-=3)>-1&&X.push(239,191,189);continue}else if(re+1===B){(x-=3)>-1&&X.push(239,191,189);continue}W=w;continue}if(w<56320){(x-=3)>-1&&X.push(239,191,189),W=w;continue}w=(W-55296<<10|w-56320)+65536}else W&&(x-=3)>-1&&X.push(239,191,189);if(W=null,w<128){if((x-=1)<0)break;X.push(w)}else if(w<2048){if((x-=2)<0)break;X.push(w>>6|192,w&63|128)}else if(w<65536){if((x-=3)<0)break;X.push(w>>12|224,w>>6&63|128,w&63|128)}else if(w<1114112){if((x-=4)<0)break;X.push(w>>18|240,w>>12&63|128,w>>6&63|128,w&63|128)}else throw new Error("Invalid code point")}return X}function Le(_){const x=[];for(let w=0;w<_.length;++w)x.push(_.charCodeAt(w)&255);return x}function Ne(_,x){let w,B,W;const X=[];for(let re=0;re<_.length&&!((x-=2)<0);++re)w=_.charCodeAt(re),B=w>>8,W=w%256,X.push(W),X.push(B);return X}function je(_){return e.toByteArray(xe(_))}function it(_,x,w,B){let W;for(W=0;W<B&&!(W+w>=x.length||W>=_.length);++W)x[W+w]=_[W];return W}function Ye(_,x){return _ instanceof x||_!=null&&_.constructor!=null&&_.constructor.name!=null&&_.constructor.name===x.name}function pt(_){return _!==_}const Yt=function(){const _="0123456789abcdef",x=new Array(256);for(let w=0;w<16;++w){const B=w*16;for(let W=0;W<16;++W)x[B+W]=_[w]+_[W]}return x}();function Ht(_){return typeof BigInt>"u"?tn:_}function tn(){throw new Error("BigInt not supported")}})(Dn);var td=(t=>(t[t.BINARY=0]="BINARY",t[t.ECHO=1]="ECHO",t[t.RCP=2]="RCP",t[t.SUPPRESS_GO_AHEAD=3]="SUPPRESS_GO_AHEAD",t[t.APPROX_MESSAGE_SIZE_NEGOTIATION=4]="APPROX_MESSAGE_SIZE_NEGOTIATION",t[t.STATUS=5]="STATUS",t[t.TIMING_MARK=6]="TIMING_MARK",t[t.REMOTE_CONTROLLED_TRANSMISSION_ECHO=7]="REMOTE_CONTROLLED_TRANSMISSION_ECHO",t[t.OUTPUT_LINE_WIDTH=8]="OUTPUT_LINE_WIDTH",t[t.OUTPUT_PAGE_SIZE=9]="OUTPUT_PAGE_SIZE",t[t.OUTPUT_CARRIAGE_RETURN_DISPOSITION=10]="OUTPUT_CARRIAGE_RETURN_DISPOSITION",t[t.OUTPUT_HORIZONTAL_TAB_STOPS=11]="OUTPUT_HORIZONTAL_TAB_STOPS",t[t.OUTPUT_HORIZONTAL_TAB_DISPOSITION=12]="OUTPUT_HORIZONTAL_TAB_DISPOSITION",t[t.OUTPUT_FORMFEED_DISPOSITION=13]="OUTPUT_FORMFEED_DISPOSITION",t[t.OUTPUT_VERTICAL_TAB_STOPS=14]="OUTPUT_VERTICAL_TAB_STOPS",t[t.OUTPUT_VERTICAL_TAB_DISPOSITION=15]="OUTPUT_VERTICAL_TAB_DISPOSITION",t[t.OUTPUT_LINEFEED_DISPOSITION=16]="OUTPUT_LINEFEED_DISPOSITION",t[t.EXTENDED_ASCII=17]="EXTENDED_ASCII",t[t.LOGOUT=18]="LOGOUT",t[t.BYTE_MACRO=19]="BYTE_MACRO",t[t.DATA_ENTRY_TERMINAL=20]="DATA_ENTRY_TERMINAL",t[t.SUPDUP=21]="SUPDUP",t[t.SUPDUP_OUTPUT=22]="SUPDUP_OUTPUT",t[t.SEND_LOCATION=23]="SEND_LOCATION",t[t.TERMINAL_TYPE=24]="TERMINAL_TYPE",t[t.END_OF_RECORD=25]="END_OF_RECORD",t[t.TACACS_USER_IDENTIFICATION=26]="TACACS_USER_IDENTIFICATION",t[t.OUTPUT_MARKING=27]="OUTPUT_MARKING",t[t.TERMINAL_LOCATION_NUMBER=28]="TERMINAL_LOCATION_NUMBER",t[t.TELNET_3270_REGIME=29]="TELNET_3270_REGIME",t[t.X_3_PAD=30]="X_3_PAD",t[t.NAWS=31]="NAWS",t[t.TERMINAL_SPEED=32]="TERMINAL_SPEED",t[t.REMOTE_FLOW_CONTROL=33]="REMOTE_FLOW_CONTROL",t[t.LINEMODE=34]="LINEMODE",t[t.X_DISPLAY_LOCATION=35]="X_DISPLAY_LOCATION",t[t.ENVIRONMENT_OPTION=36]="ENVIRONMENT_OPTION",t[t.AUTHENTICATION_OPTION=37]="AUTHENTICATION_OPTION",t[t.ENCRYPTION_OPTION=38]="ENCRYPTION_OPTION",t[t.NEW_ENVIRONMENT_OPTION=39]="NEW_ENVIRONMENT_OPTION",t[t.TN3270E=40]="TN3270E",t[t.XAUTH=41]="XAUTH",t[t.CHARSET=42]="CHARSET",t[t.RSP=43]="RSP",t[t.COM_PORT_OPTION=44]="COM_PORT_OPTION",t[t.SUPPRESS_LOCAL_ECHO=45]="SUPPRESS_LOCAL_ECHO",t[t.START_TLS=46]="START_TLS",t[t.KERMIT=47]="KERMIT",t[t.SEND_URL=48]="SEND_URL",t[t.FORWARD_X=49]="FORWARD_X",t[t.PRAGMA_LOGON=138]="PRAGMA_LOGON",t[t.GMCP=201]="GMCP",t))(td||{}),nd=(t=>(t[t.SE=240]="SE",t[t.NOP=241]="NOP",t[t.DM=242]="DM",t[t.BRK=243]="BRK",t[t.IP=244]="IP",t[t.AO=245]="AO",t[t.AYT=246]="AYT",t[t.EC=247]="EC",t[t.EL=248]="EL",t[t.GA=249]="GA",t[t.SB=250]="SB",t[t.WILL=251]="WILL",t[t.WONT=252]="WONT",t[t.DO=253]="DO",t[t.DONT=254]="DONT",t[t.IAC=255]="IAC",t))(nd||{});class fM{constructor(e){L(this,"ws");this.ws=e}on(e,n){if(e==="data"){this.ws.onmessage=i=>{n(i.data)};return}const r="on"+e;this[r]=n}write(e){this.ws.send(e)}}class hM extends B1{constructor(n){super();L(this,"state");L(this,"buffer");L(this,"subBuffer");L(this,"iacSEBuffer",Dn.Buffer.from([255,240]));L(this,"negotiationByte",0);L(this,"stream");this.state=0,this.buffer=Dn.Buffer.alloc(0),this.subBuffer=Dn.Buffer.alloc(0),n&&n.on("data",r=>this.parse(r)),this.stream=n}parse(n){for(this.buffer=Dn.Buffer.concat([this.buffer,Dn.Buffer.from(n)]);this.buffer.length>0;){let r;switch(this.state){case 0:this.handleData();break;case 1:if(r=this.handleCommand(),r)return;break;case 2:if(r=this.handleSubnegotiation(),r)return;break;case 3:if(r=this.handleNegotiation(),r)return;break}}}handleData(){const n=this.buffer.indexOf(255);if(n===-1){this.emit("data",this.buffer),this.buffer=Dn.Buffer.alloc(0);return}this.emit("data",this.buffer.slice(0,n)),this.buffer=this.buffer.slice(n),this.state=1}handleCommand(){if(this.buffer.length<2)return!0;const n=this.buffer[1];switch(this.buffer=this.buffer.slice(2),n){case 241:this.emit("command",241),this.state=0;break;case 250:this.subBuffer=Dn.Buffer.alloc(0),this.state=2;break;case 253:case 254:case 251:case 252:this.negotiationByte=n,this.state=3;break;default:this.state=0;break}return!1}handleNegotiation(){if(this.buffer.length<1)return!0;const n=this.negotiationByte,r=this.buffer[0];return this.buffer=this.buffer.slice(1),this.emit("negotiation",n,r),this.state=0,!1}handleSubnegotiation(){let n=this.buffer.indexOf(this.iacSEBuffer);if(n===-1)return!0;this.state=0;let r=this.buffer.slice(0,n);return r[0]===201?this.handleGmcp(r.slice(1)):this.emit("subnegotiation",r),this.buffer=this.buffer.slice(n+2),!1}handleGmcp(n){const r=n.toString(),[i,o]=r.split(/ +(.+?)$/,2);this.emit("gmcp",i,o)}sendNegotiation(n,r){this.stream.write(Dn.Buffer.from([255,n,r]))}sendGmcp(n,r){const i=n+" "+r,o=Dn.Buffer.from(i),s=Dn.Buffer.concat([Dn.Buffer.from([255,250]),Dn.Buffer.from([201]),o,this.iacSEBuffer]);this.stream.write(s)}sendTerminalType(n){const r=Dn.Buffer.from(n),i=Dn.Buffer.concat([Dn.Buffer.from([255,250]),Dn.Buffer.from([24,0]),r,this.iacSEBuffer]);this.stream.write(i)}}function pM({onlyFirst:t=!1}={}){const n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(n,t?void 0:"g")}const gM=pM();function mM(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(gM,"")}class vM{constructor(e){L(this,"editors");L(this,"channel");this.client=e,this.editors=new Map,this.channel=new BroadcastChannel("editor"),this.setupChannelListeners()}openEditorWindow(e){console.log("Opening editor window for session:",e);const n=e.reference,r=this.editors.get(n);if(r&&r.state===1&&r.window&&!r.window.closed)r.window.focus();else{const i=encodeURIComponent(n),o=window.open(`/editor?reference=${i}`,"_blank"),s={...e,window:o,state:0};this.editors.set(n,s),o&&o.focus()}}saveEditorWindow(e){const n={reference:e.reference,type:e.type,"content*":""};this.client.sendMCPMultiline("dns-org-mud-moo-simpleedit-set",n,e.contents)}setupChannelListeners(){this.channel.onmessage=e=>{console.log("Editor window message:",e);const{type:n,id:r,session:i}=e.data;switch(n){case"ready":console.log("Editor window ready, id:",r);const o=this.editors.get(r);if(o){o.state=1;const{window:a,...c}=o;this.channel.postMessage({type:"load",session:c})}else console.error(`No session found for id: ${r}`);break;case"save":console.log("Saving editor window with session:",i),this.saveEditorWindow(i);break;case"close":console.log("Closing editor window, id:",r);const s=this.editors.get(r);s&&(s.state=2);break}}}shutdown(){console.log("Shutting down EditorManager"),this.editors.forEach((e,n)=>{try{e.state===1&&e.window&&(console.log(`Closing editor window for ${n}`),e.window.close(),this.channel.postMessage({type:"shutdown",id:n}))}catch(r){console.error(`Error closing editor window ${n}:`,r)}}),this.editors.clear(),console.log("Closing broadcast channel"),this.channel.close(),console.log("EditorManager shutdown complete")}}class qi{constructor(e){L(this,"packageName");L(this,"packageVersion",1);L(this,"client");this.client=e}sendData(e,n){this.client.sendGmcp(this.packageName+"."+e,JSON.stringify(n))}shutdown(){}}class CM extends qi{constructor(){super(...arguments);L(this,"packageName","Auth.Autologin")}handleToken(n){localStorage.setItem("LoginRefreshToken",n)}sendLogin(){var n=localStorage.getItem("LoginRefreshToken");n&&this.sendData("Login",n)}}class yM extends qi{constructor(){super(...arguments);L(this,"packageName","Char")}handleName(n){this.client.worldData.playerId=n.name,this.client.worldData.playerName=n.fullname,this.client.emit("statustext",`Logged in as ${n.fullname}`)}sendLogin(n,r){this.client.sendGmcp("Char.Login",JSON.stringify({name:n,password:r}))}}class xM extends qi{constructor(n){super(n);L(this,"packageName","Client.Keystrokes");L(this,"bindings",[]);L(this,"boundKeyUpHandler",()=>{});document.addEventListener("keydown",r=>this.handleKeydown(r))}handleKeydown(n){const r=this.findBinding(n);if(r){n.preventDefault();const i=this.client.getInput(),o=this.parseCommand(r.command,i);r.autosend?this.client.sendCommand(o):this.placeInInputField(o)}}shutdown(){document.removeEventListener("keydown",n=>this.handleKeydown(n))}findBinding(n){try{return this.bindings.find(r=>{if(r.key.toLowerCase()!==n.key.toLowerCase())return!1;const i=new Set([n.altKey&&"Alt",n.ctrlKey&&"Control",n.shiftKey&&"Shift",n.metaKey&&"Meta"].filter(Boolean));return r.modifiers&&r.modifiers.every(o=>i.has(o))})}catch(r){console.error("Error in finding key binding: ",r);return}}parseCommand(n,r){const i=r.trim().split(/\s+/);return n.replace(/%(\d+|\*)/g,(o,s)=>{if(s==="*")return r;const a=parseInt(s,10)-1;return a>=0&&a<i.length?i[a]:o})}placeInInputField(n){this.client.setInput(n)}bindKey(n){const r={key:n.key,modifiers:n.modifiers,command:n.command,autosend:n.autosend};this.bindings.push(r)}unbindKey(n){this.bindings=this.bindings.filter(r=>!(r.key===n.key&&r.modifiers.length===n.modifiers.length&&r.modifiers.every(i=>n.modifiers.includes(i))))}unbindAll(){this.bindings=[]}handleBind(n){this.bindKey(n)}handleUnbind(n){this.unbindKey(n)}handleBind_all(n){this.bindings=n.bindings.map(r=>({...r}))}listBindings(){return[...this.bindings]}}const kA=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),EA=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),aC=(t,e)=>({startTime:e,type:"setValue",value:t}),V2=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),G2=(t,e,{startTime:n,target:r,timeConstant:i})=>r+(e-r)*Math.exp((n-t)/i),hl=t=>t.type==="exponentialRampToValue",F0=t=>t.type==="linearRampToValue",ia=t=>hl(t)||F0(t),O1=t=>t.type==="setValue",Xo=t=>t.type==="setValueCurve",O0=(t,e,n,r)=>{const i=t[e];return i===void 0?r:ia(i)||O1(i)?i.value:Xo(i)?i.values[i.values.length-1]:G2(n,O0(t,e-1,i.startTime,r),i)},TA=(t,e,n,r,i)=>n===void 0?[r.insertTime,i]:ia(n)?[n.endTime,n.value]:O1(n)?[n.startTime,n.value]:Xo(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,O0(t,e-1,n.startTime,i)],cC=t=>t.type==="cancelAndHold",lC=t=>t.type==="cancelScheduledValues",$s=t=>cC(t)||lC(t)?t.cancelTime:hl(t)||F0(t)?t.endTime:t.startTime,RA=(t,e,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(r-e)):0,_A=(t,e,n,{endTime:r,value:i})=>n+(t-e)/(r-e)*(i-n),IM=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},bM=(t,{duration:e,startTime:n,values:r})=>{const i=(t-n)/e*(r.length-1);return IM(r,i)},rh=t=>t.type==="setTarget";class AM{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=$s(e);if(cC(e)||lC(e)){const r=this._automationEvents.findIndex(o=>lC(e)&&Xo(o)?o.startTime+o.duration>=n:$s(o)>=n),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),cC(e)){const o=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&ia(i)){if(o!==void 0&&rh(o))throw new Error("The internal list is malformed.");const s=o===void 0?i.insertTime:Xo(o)?o.startTime+o.duration:$s(o),a=o===void 0?this._defaultValue:Xo(o)?o.values[o.values.length-1]:o.value,c=hl(i)?RA(n,s,a,i):_A(n,s,a,i),l=hl(i)?kA(c,n,this._currenTime):EA(c,n,this._currenTime);this._automationEvents.push(l)}if(o!==void 0&&rh(o)&&this._automationEvents.push(aC(this.getValue(n),n)),o!==void 0&&Xo(o)&&o.startTime+o.duration>n){const s=n-o.startTime,a=(o.values.length-1)/o.duration,c=Math.max(2,1+Math.ceil(s*a)),l=s/(c-1)*a,u=o.values.slice(0,c);if(l<1)for(let d=1;d<c;d+=1){const f=l*d%1;u[d]=o.values[d-1]*(1-f)+o.values[d]*f}this._automationEvents[this._automationEvents.length-1]=V2(u,o.startTime,s)}}}else{const r=this._automationEvents.findIndex(s=>$s(s)>n),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&Xo(i)&&$s(i)+i.duration>n)return!1;const o=hl(e)?kA(e.value,e.endTime,this._currenTime):F0(e)?EA(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(o);else{if(Xo(e)&&n+e.duration>$s(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,o)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>$s(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),i=r[0];rh(i)&&r.unshift(aC(O0(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(s=>$s(s)>e),r=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,o=this._automationEvents[i];if(o!==void 0&&rh(o)&&(r===void 0||!ia(r)||r.insertTime>e))return G2(e,O0(this._automationEvents,i-1,o.startTime,this._defaultValue),o);if(o!==void 0&&O1(o)&&(r===void 0||!ia(r)))return o.value;if(o!==void 0&&Xo(o)&&(r===void 0||!ia(r)||o.startTime+o.duration>e))return e<o.startTime+o.duration?bM(e,o):o.values[o.values.length-1];if(o!==void 0&&ia(o)&&(r===void 0||!ia(r)))return o.value;if(r!==void 0&&hl(r)){const[s,a]=TA(this._automationEvents,i,o,r,this._defaultValue);return RA(e,s,a,r)}if(r!==void 0&&F0(r)){const[s,a]=TA(this._automationEvents,i,o,r,this._defaultValue);return _A(e,s,a,r)}return this._defaultValue}}const wM=t=>({cancelTime:t,type:"cancelAndHold"}),SM=t=>({cancelTime:t,type:"cancelScheduledValues"}),kM=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),EM=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),TM=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),RM=()=>new DOMException("","AbortError"),_M=t=>(e,n,[r,i,o],s)=>{t(e[i],[n,r,o],a=>a[0]===n&&a[1]===r,s)},DM=t=>(e,n,r)=>{const i=[];for(let o=0;o<r.numberOfInputs;o+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},PM=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},zl=new WeakSet,W2=new WeakMap,z2=new WeakMap,j2=new WeakMap,H2=new WeakMap,Z2=new WeakMap,$2=new WeakMap,uC=new WeakMap,dC=new WeakMap,fC=new WeakMap,X2={construct(){return X2}},NM=t=>{try{const e=new Proxy(t,X2);new e}catch{return!1}return!0},DA=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,PA=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),i=r.match(DA);for(;i!==null;){const o=i[1].slice(1,-1),s=i[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());n.push(s),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(DA)}return[n.join(";"),r]},NA=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},BA=t=>{if(!NM(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},BM=(t,e,n,r,i,o,s,a,c,l,u,d,f)=>{let h=0;return(p,g,C={credentials:"omit"})=>{const v=u.get(p);if(v!==void 0&&v.has(g))return Promise.resolve();const m=l.get(p);if(m!==void 0){const b=m.get(g);if(b!==void 0)return b}const y=o(p),I=y.audioWorklet===void 0?i(g).then(([b,A])=>{const[E,k]=PA(b,A),D=`${E};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${k}
})})(window,'_AWGS')`;return n(D)}).then(()=>{const b=f._AWGS.pop();if(b===void 0)throw new SyntaxError;r(y.currentTime,y.sampleRate,()=>b(class{},void 0,(A,E)=>{if(A.trim()==="")throw e();const k=dC.get(y);if(k!==void 0){if(k.has(A))throw e();BA(E),NA(E.parameterDescriptors),k.set(A,E)}else BA(E),NA(E.parameterDescriptors),dC.set(y,new Map([[A,E]]))},y.sampleRate,void 0,void 0))}):Promise.all([i(g),Promise.resolve(t(d,d))]).then(([[b,A],E])=>{const k=h+1;h=k;const[D,T]=PA(b,A),G=`${D};((AudioWorkletProcessor,registerProcessor)=>{${T}
})(${E?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${E?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${E?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${k}',class extends AudioWorkletProcessor{process(){return !1}})`,j=new Blob([G],{type:"application/javascript; charset=utf-8"}),Q=URL.createObjectURL(j);return y.audioWorklet.addModule(Q,C).then(()=>{if(a(y))return y;const te=s(y);return te.audioWorklet.addModule(Q,C).then(()=>te)}).then(te=>{if(c===null)throw new SyntaxError;try{new c(te,`__sac${k}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(Q))});return m===void 0?l.set(p,new Map([[g,I]])):m.set(g,I),I.then(()=>{const b=u.get(p);b===void 0?u.set(p,new Set([g])):b.add(g)}).finally(()=>{const b=l.get(p);b!==void 0&&b.delete(g)}),I}},Xi=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Pp=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},K2=(t,e,n,r)=>{const i=Xi(t,e),o=Pp(i,s=>s[0]===n&&s[1]===r);return i.size===0&&t.delete(e),o},yf=t=>Xi($2,t),jl=t=>{if(zl.has(t))throw new Error("The AudioNode is already stored.");zl.add(t),yf(t).forEach(e=>e(!0))},J2=t=>"port"in t,xf=t=>{if(!zl.has(t))throw new Error("The AudioNode is not stored.");zl.delete(t),yf(t).forEach(e=>e(!1))},hC=(t,e)=>{!J2(t)&&e.every(n=>n.size===0)&&xf(t)},FM=(t,e,n,r,i,o,s,a,c,l,u,d,f)=>{const h=new WeakMap;return(p,g,C,v,m)=>{const{activeInputs:y,passiveInputs:I}=o(g),{outputs:b}=o(p),A=a(p),E=k=>{const D=c(g),T=c(p);if(k){const R=K2(I,p,C,v);t(y,p,R,!1),!m&&!d(p)&&n(T,D,C,v),f(g)&&jl(g)}else{const R=r(y,p,C,v);e(I,v,R,!1),!m&&!d(p)&&i(T,D,C,v);const P=s(g);if(P===0)u(g)&&hC(g,y);else{const M=h.get(g);M!==void 0&&clearTimeout(M),h.set(g,setTimeout(()=>{u(g)&&hC(g,y)},P*1e3))}}};return l(b,[g,C,v],k=>k[0]===g&&k[1]===C&&k[2]===v,!0)?(A.add(E),u(p)?t(y,p,[C,v,E],!0):e(I,v,[p,C,E],!0),!0):!1}},OM=t=>(e,n,[r,i,o],s)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,n,o]])):t(a,[i,n,o],c=>c[0]===i&&c[1]===n,s)},MM=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)},LM=t=>(e,n)=>{t(e).add(n)},UM={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},VM=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...UM,...c},d=r(l,u),f=o(l)?e():null;super(a,!1,d,f),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Qn=(t,e)=>t.context===e,GM=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Qn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},pC=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Vo=()=>new DOMException("","IndexSizeError"),Y2=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Vo():r}})(t.getChannelData)},WM={numberOfChannels:1},zM=(t,e,n,r,i,o,s,a)=>{let c=null;return class q2{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:f,sampleRate:h}={...WM,...u};c===null&&(c=new i(1,1,44100));const p=r!==null&&e(o,o)?new r({length:d,numberOfChannels:f,sampleRate:h}):c.createBuffer(f,d,h);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(s(p),Y2(p)):e(pC,()=>pC(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===q2.prototype||t.has(u)}}},Ar=-34028234663852886e22,ir=-Ar,Es=t=>zl.has(t),jM={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},HM=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),f={...jM,...u},h=i(d,f),p=s(d),g=p?e():null;super(l,!1,h,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=h,this._onended=null,this._playbackRate=n(this,p,h.playbackRate,ir,Ar)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[l,u]:[l,u,d]),this.context.state!=="closed"){jl(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),Es(this)&&xf(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},ZM=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const f=Qn(d,u);if(!f){const h={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,h),s!==null&&d.start(...s),a!==null&&d.stop(a)}return o.set(u,d),f?await t(u,l.playbackRate,d.playbackRate):await r(u,l.playbackRate,d.playbackRate),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},$M=t=>"playbackRate"in t,XM=t=>"frequency"in t&&"gain"in t,KM=t=>"offset"in t,JM=t=>!("frequency"in t)&&"gain"in t,YM=t=>"detune"in t&&"frequency"in t&&!("gain"in t),qM=t=>"pan"in t,ar=t=>Xi(W2,t),If=t=>Xi(j2,t),gC=(t,e)=>{const{activeInputs:n}=ar(t);n.forEach(i=>i.forEach(([o])=>{e.includes(t)||gC(o,[...e,t])}));const r=$M(t)?[t.playbackRate]:J2(t)?Array.from(t.parameters.values()):XM(t)?[t.Q,t.detune,t.frequency,t.gain]:KM(t)?[t.offset]:JM(t)?[t.gain]:YM(t)?[t.detune,t.frequency]:qM(t)?[t.pan]:[];for(const i of r){const o=If(i);o!==void 0&&o.activeInputs.forEach(([s])=>gC(s,e))}Es(t)&&xf(t)},QM=t=>{gC(t.destination,[])},e8=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),t8=(t,e,n,r,i,o,s,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!e8(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:f}=u,{sampleRate:h}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:f==="balanced"?512/h:f==="interactive"||f===void 0?256/h:f==="playback"?1024/h:Math.max(2,Math.min(128,Math.round(f*h/128)))*128/h,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),QM(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(u){return new s(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},n8=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),f=s(d),h=i(d,u,f),p=f?e(a):null;super(l,!1,h,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},r8=t=>{const e=new WeakMap,n=async(r,i)=>{const o=i.destination;return e.set(i,o),await t(r,i,o),o};return{render(r,i){const o=e.get(i);return o!==void 0?Promise.resolve(o):n(r,i)}}},i8=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=l.listener,d=()=>{const b=new Float32Array(1),A=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),E=s(l);let k=!1,D=[0,0,-1,0,1,0],T=[0,0,0];const R=()=>{if(k)return;k=!0;const j=r(l,256,9,0);j.onaudioprocess=({inputBuffer:Q})=>{const te=[o(Q,b,0),o(Q,b,1),o(Q,b,2),o(Q,b,3),o(Q,b,4),o(Q,b,5)];te.some((q,ne)=>q!==D[ne])&&(u.setOrientation(...te),D=te);const $=[o(Q,b,6),o(Q,b,7),o(Q,b,8)];$.some((q,ne)=>q!==T[ne])&&(u.setPosition(...$),T=$)},A.connect(j)},P=j=>Q=>{Q!==D[j]&&(D[j]=Q,u.setOrientation(...D))},M=j=>Q=>{Q!==T[j]&&(T[j]=Q,u.setPosition(...T))},G=(j,Q,te)=>{const $=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Q});$.connect(A,0,j),$.start(),Object.defineProperty($.offset,"defaultValue",{get(){return Q}});const q=t({context:c},E,$.offset,ir,Ar);return a(q,"value",ne=>()=>ne.call(q),ne=>F=>{try{ne.call(q,F)}catch(z){if(z.code!==9)throw z}R(),E&&te(F)}),q.cancelAndHoldAtTime=(ne=>E?()=>{throw i()}:(...F)=>{const z=ne.apply(q,F);return R(),z})(q.cancelAndHoldAtTime),q.cancelScheduledValues=(ne=>E?()=>{throw i()}:(...F)=>{const z=ne.apply(q,F);return R(),z})(q.cancelScheduledValues),q.exponentialRampToValueAtTime=(ne=>E?()=>{throw i()}:(...F)=>{const z=ne.apply(q,F);return R(),z})(q.exponentialRampToValueAtTime),q.linearRampToValueAtTime=(ne=>E?()=>{throw i()}:(...F)=>{const z=ne.apply(q,F);return R(),z})(q.linearRampToValueAtTime),q.setTargetAtTime=(ne=>E?()=>{throw i()}:(...F)=>{const z=ne.apply(q,F);return R(),z})(q.setTargetAtTime),q.setValueAtTime=(ne=>E?()=>{throw i()}:(...F)=>{const z=ne.apply(q,F);return R(),z})(q.setValueAtTime),q.setValueCurveAtTime=(ne=>E?()=>{throw i()}:(...F)=>{const z=ne.apply(q,F);return R(),z})(q.setValueCurveAtTime),q};return{forwardX:G(0,0,P(0)),forwardY:G(1,0,P(1)),forwardZ:G(2,-1,P(2)),positionX:G(6,0,M(0)),positionY:G(7,0,M(1)),positionZ:G(8,0,M(2)),upX:G(3,0,P(3)),upY:G(4,1,P(4)),upZ:G(5,0,P(5))}},{forwardX:f,forwardY:h,forwardZ:p,positionX:g,positionY:C,positionZ:v,upX:m,upY:y,upZ:I}=u.forwardX===void 0?d():u;return{get forwardX(){return f},get forwardY(){return h},get forwardZ(){return p},get positionX(){return g},get positionY(){return C},get positionZ(){return v},get upX(){return m},get upY(){return y},get upZ(){return I}}},M0=t=>"context"in t,bf=t=>M0(t[0]),Fc=(t,e,n,r)=>{for(const i of t)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},FA=(t,e,[n,r],i)=>{Fc(t,[e,n,r],o=>o[0]===e&&o[1]===n,i)},OA=(t,[e,n,r],i)=>{const o=t.get(e);o===void 0?t.set(e,new Set([[n,r]])):Fc(o,[n,r],s=>s[0]===n,i)},ou=t=>"inputs"in t,L0=(t,e,n,r)=>{if(ou(e)){const i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},Q2=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},o8=(t,e,n)=>Pp(t,r=>r[0]===e&&r[1]===n),eR=(t,e)=>{if(!yf(t).delete(e))throw new Error("Missing the expected event listener.")},tR=(t,e,n)=>{const r=Xi(t,e),i=Pp(r,o=>o[0]===n);return r.size===0&&t.delete(e),i},U0=(t,e,n,r)=>{ou(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},Vt=t=>Xi(z2,t),Xd=t=>Xi(H2,t),Ac=t=>uC.has(t),Mh=t=>!zl.has(t),MA=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),i=t.createGain(),o=t.createBuffer(1,2,44100),s=o.getChannelData(0);s[0]=1,s[1]=1;const a=t.createBufferSource();a.buffer=o,a.loop=!0,a.connect(r).connect(t.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),jg=(t,e)=>{const n=new Map;for(const r of t)for(const i of r){const o=n.get(i);n.set(i,o===void 0?1:o+1)}n.forEach((r,i)=>e(i,r))},V0=t=>"context"in t,s8=t=>{const e=new Map;t.connect=(n=>(r,i=0,o=0)=>{const s=V0(r)?n(r,i,o):n(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:o,output:i}]):a.every(c=>c.input!==o||c.output!==i)&&a.push({input:o,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(r,i,o)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[s,a]of e){const c=a.filter(l=>l.output!==r);c.length===0?e.delete(s):e.set(s,c)}else if(e.has(r))if(i===void 0)e.delete(r);else{const s=e.get(r);if(s!==void 0){const a=s.filter(c=>c.output!==i&&(c.input!==o||o===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[s,a]of e)a.forEach(c=>{V0(s)?t.connect(s,c.output,c.input):t.connect(s,c.output)})})(t.disconnect)},a8=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=If(e),{outputs:s}=ar(t),a=yf(t),c=l=>{const u=Vt(t),d=Xd(e);if(l){const f=tR(o,t,n);FA(i,t,f,!1),!r&&!Ac(t)&&u.connect(d,n)}else{const f=o8(i,t,n);OA(o,f,!1),!r&&!Ac(t)&&u.disconnect(d,n)}};return Fc(s,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),Es(t)?FA(i,t,[n,c],!0):OA(o,[t,n,c],!0),!0):!1},c8=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=ar(e),s=Q2(i[r],t,n);return s===null?[K2(o,t,n,r)[2],!1]:[s[2],!0]},l8=(t,e,n)=>{const{activeInputs:r,passiveInputs:i}=If(e),o=Q2(r,t,n);return o===null?[tR(i,t,n)[1],!1]:[o[2],!0]},M1=(t,e,n,r,i)=>{const[o,s]=c8(t,n,r,i);if(o!==null&&(eR(t,o),s&&!e&&!Ac(t)&&U0(Vt(t),Vt(n),r,i)),Es(n)){const{activeInputs:a}=ar(n);hC(n,a)}},L1=(t,e,n,r)=>{const[i,o]=l8(t,n,r);i!==null&&(eR(t,i),o&&!e&&!Ac(t)&&Vt(t).disconnect(Xd(n),r))},u8=(t,e)=>{const n=ar(t),r=[];for(const i of n.outputs)bf(i)?M1(t,e,...i):L1(t,e,...i),r.push(i[0]);return n.outputs.clear(),r},d8=(t,e,n)=>{const r=ar(t),i=[];for(const o of r.outputs)o[1]===n&&(bf(o)?M1(t,e,...o):L1(t,e,...o),i.push(o[0]),r.outputs.delete(o));return i},f8=(t,e,n,r,i)=>{const o=ar(t);return Array.from(o.outputs).filter(s=>s[0]===n&&(r===void 0||s[1]===r)&&(i===void 0||s[2]===i)).map(s=>(bf(s)?M1(t,e,...s):L1(t,e,...s),o.outputs.delete(s),s[0]))},h8=(t,e,n,r,i,o,s,a,c,l,u,d,f,h,p,g)=>class extends l{constructor(v,m,y,I){super(y),this._context=v,this._nativeAudioNode=y;const b=u(v);d(b)&&n(MA,()=>MA(b,g))!==!0&&s8(y),z2.set(this,y),$2.set(this,new Set),v.state!=="closed"&&m&&jl(this),t(this,I,y)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,m=0,y=0){if(m<0||m>=this._nativeAudioNode.numberOfOutputs)throw i();const I=u(this._context),b=p(I);if(f(v)||h(v))throw o();if(M0(v)){const k=Vt(v);try{const T=L0(this._nativeAudioNode,k,m,y),R=Mh(this);(b||R)&&this._nativeAudioNode.disconnect(...T),this.context.state!=="closed"&&!R&&Mh(v)&&jl(v)}catch(T){throw T.code===12?o():T}if(e(this,v,m,y,b)){const T=c([this],v);jg(T,r(b))}return v}const A=Xd(v);if(A.name==="playbackRate"&&A.maxValue===1024)throw s();try{this._nativeAudioNode.connect(A,m),(b||Mh(this))&&this._nativeAudioNode.disconnect(A,m)}catch(k){throw k.code===12?o():k}if(a8(this,v,m,b)){const k=c([this],v);jg(k,r(b))}}disconnect(v,m,y){let I;const b=u(this._context),A=p(b);if(v===void 0)I=u8(this,A);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw i();I=d8(this,A,v)}else{if(m!==void 0&&(m<0||m>=this.numberOfOutputs)||M0(v)&&y!==void 0&&(y<0||y>=v.numberOfInputs))throw i();if(I=f8(this,A,v,m,y),I.length===0)throw o()}for(const E of I){const k=c([this],E);jg(k,a)}}},p8=(t,e,n,r,i,o,s,a,c,l,u,d,f)=>(h,p,g,C=null,v=null)=>{const m=g.value,y=new AM(m),I=p?r(y):null,b={get defaultValue(){return m},get maxValue(){return C===null?g.maxValue:C},get minValue(){return v===null?g.minValue:v},get value(){return g.value},set value(A){g.value=A,b.setValueAtTime(A,h.context.currentTime)},cancelAndHoldAtTime(A){if(typeof g.cancelAndHoldAtTime=="function")I===null&&y.flush(h.context.currentTime),y.add(i(A)),g.cancelAndHoldAtTime(A);else{const E=Array.from(y).pop();I===null&&y.flush(h.context.currentTime),y.add(i(A));const k=Array.from(y).pop();g.cancelScheduledValues(A),E!==k&&k!==void 0&&(k.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(k.value,k.endTime):k.type==="linearRampToValue"?g.linearRampToValueAtTime(k.value,k.endTime):k.type==="setValue"?g.setValueAtTime(k.value,k.startTime):k.type==="setValueCurve"&&g.setValueCurveAtTime(k.values,k.startTime,k.duration))}return b},cancelScheduledValues(A){return I===null&&y.flush(h.context.currentTime),y.add(o(A)),g.cancelScheduledValues(A),b},exponentialRampToValueAtTime(A,E){if(A===0)throw new RangeError;if(!Number.isFinite(E)||E<0)throw new RangeError;const k=h.context.currentTime;return I===null&&y.flush(k),Array.from(y).length===0&&(y.add(l(m,k)),g.setValueAtTime(m,k)),y.add(s(A,E)),g.exponentialRampToValueAtTime(A,E),b},linearRampToValueAtTime(A,E){const k=h.context.currentTime;return I===null&&y.flush(k),Array.from(y).length===0&&(y.add(l(m,k)),g.setValueAtTime(m,k)),y.add(a(A,E)),g.linearRampToValueAtTime(A,E),b},setTargetAtTime(A,E,k){return I===null&&y.flush(h.context.currentTime),y.add(c(A,E,k)),g.setTargetAtTime(A,E,k),b},setValueAtTime(A,E){return I===null&&y.flush(h.context.currentTime),y.add(l(A,E)),g.setValueAtTime(A,E),b},setValueCurveAtTime(A,E,k){const D=A instanceof Float32Array?A:new Float32Array(A);if(d!==null&&d.name==="webkitAudioContext"){const T=E+k,R=h.context.sampleRate,P=Math.ceil(E*R),M=Math.floor(T*R),G=M-P,j=new Float32Array(G);for(let te=0;te<G;te+=1){const $=(D.length-1)/k*((P+te)/R-E),q=Math.floor($),ne=Math.ceil($);j[te]=q===ne?D[q]:(1-($-q))*D[q]+(1-(ne-$))*D[ne]}I===null&&y.flush(h.context.currentTime),y.add(u(j,E,k)),g.setValueCurveAtTime(j,E,k);const Q=M/R;Q<T&&f(b,j[j.length-1],Q),f(b,D[D.length-1],T)}else I===null&&y.flush(h.context.currentTime),y.add(u(D,E,k)),g.setValueCurveAtTime(D,E,k);return b}};return n.set(b,g),e.set(b,h),t(b,I),b},g8=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:i}=n;e.exponentialRampToValueAtTime(i,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:i}=n;e.linearRampToValueAtTime(i,r)}else if(n.type==="setTarget"){const{startTime:r,target:i,timeConstant:o}=n;e.setTargetAtTime(i,r,o)}else if(n.type==="setValue"){const{startTime:r,value:i}=n;e.setValueAtTime(i,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:i,values:o}=n;e.setValueCurveAtTime(o,i,r)}else throw new Error("Can't apply an unknown automation.")}});class nR{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,i)=>e.call(n,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const m8={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},v8=(t,e,n,r,i,o,s,a,c,l,u,d,f,h)=>class extends e{constructor(g,C,v){var m;const y=a(g),I=c(y),b=u({...m8,...v});f(b);const A=dC.get(y),E=A==null?void 0:A.get(C),k=I||y.state!=="closed"?y:(m=s(y))!==null&&m!==void 0?m:y,D=i(k,I?null:g.baseLatency,l,C,E,b),T=I?r(C,b,E):null;super(g,!0,D,T);const R=[];D.parameters.forEach((M,G)=>{const j=n(this,I,M);R.push([G,j])}),this._nativeAudioWorkletNode=D,this._onprocessorerror=null,this._parameters=new nR(R),I&&t(y,this);const{activeInputs:P}=o(this);d(D,P)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const C=typeof g=="function"?h(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=C;const v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===C?g:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function G0(t,e,n,r,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{const o=t.getChannelData(r);if(e[n].byteLength===0)e[n]=o.slice(i,i+128);else{const s=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(s)}}}const rR=(t,e,n,r,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,i):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],i)},W0=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const i=[],o=typeof e=="number"?e:e[r];for(let s=0;s<o;s+=1)i.push(new Float32Array(128));n.push(i)}return n},C8=(t,e)=>{const n=Xi(fC,t),r=Vt(e);return Xi(n,r)},y8=async(t,e,n,r,i,o,s)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,l=i.reduce((C,v)=>C+v,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const d=ar(t),f=await C8(n,t),h=W0(r.numberOfInputs,r.channelCount),p=W0(r.numberOfOutputs,i),g=Array.from(t.parameters.keys()).reduce((C,v)=>({...C,[v]:new Float32Array(128)}),{});for(let C=0;C<a;C+=128){if(r.numberOfInputs>0&&e!==null)for(let v=0;v<r.numberOfInputs;v+=1)for(let m=0;m<r.channelCount;m+=1)G0(e,h[v],m,m,C);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:v},m)=>{G0(e,g,v,c+m,C)});for(let v=0;v<r.numberOfInputs;v+=1)for(let m=0;m<i[v];m+=1)p[v][m].byteLength===0&&(p[v][m]=new Float32Array(128));try{const v=h.map((y,I)=>d.activeInputs[I].size===0?[]:y),m=s(C/n.sampleRate,n.sampleRate,()=>f.process(v,p,g));if(u!==null)for(let y=0,I=0;y<r.numberOfOutputs;y+=1){for(let b=0;b<i[y];b+=1)rR(u,p[y],b,I+b,C);I+=i[y]}if(!m)break}catch(v){t.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u},x8=(t,e,n,r,i,o,s,a,c,l,u,d,f,h,p,g)=>(C,v,m)=>{const y=new WeakMap;let I=null;const b=async(A,E)=>{let k=u(A),D=null;const T=Qn(k,E),R=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(d===null){const P=R.reduce((Q,te)=>Q+te,0),M=i(E,{channelCount:Math.max(1,P),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,P)}),G=[];for(let Q=0;Q<A.numberOfOutputs;Q+=1)G.push(r(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[Q]}));const j=s(E,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});j.connect=e.bind(null,G),j.disconnect=c.bind(null,G),D=[M,G,j]}else T||(k=new d(E,C));if(y.set(E,D===null?k:D[2]),D!==null){if(I===null){if(m===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const te=A.channelCount*A.numberOfInputs,$=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length,q=te+$;I=y8(A,q===0?null:await(async()=>{const F=new f(q,Math.ceil(A.context.length/128)*128,E.sampleRate),z=[],K=[];for(let ge=0;ge<v.numberOfInputs;ge+=1)z.push(s(F,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),K.push(i(F,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));const ee=await Promise.all(Array.from(A.parameters.values()).map(async ge=>{const Fe=o(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ge.value});return await h(F,ge,Fe.offset),Fe})),ae=r(F,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,te+$)});for(let ge=0;ge<v.numberOfInputs;ge+=1){z[ge].connect(K[ge]);for(let Fe=0;Fe<v.channelCount;Fe+=1)K[ge].connect(ae,Fe,ge*v.channelCount+Fe)}for(const[ge,Fe]of ee.entries())Fe.connect(ae,0,te+ge),Fe.start(0);return ae.connect(F.destination),await Promise.all(z.map(ge=>p(A,F,ge))),g(F)})(),E,v,R,m,l)}const P=await I,M=n(E,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[G,j,Q]=D;P!==null&&(M.buffer=P,M.start(0)),M.connect(G);for(let te=0,$=0;te<A.numberOfOutputs;te+=1){const q=j[te];for(let ne=0;ne<R[te];ne+=1)G.connect(q,$+ne,ne);$+=R[te]}return Q}if(T)for(const[P,M]of A.parameters.entries())await t(E,M,k.parameters.get(P));else for(const[P,M]of A.parameters.entries())await h(E,M,k.parameters.get(P));return await p(A,E,k),k};return{render(A,E){a(E,A);const k=y.get(E);return k!==void 0?Promise.resolve(k):b(A,E)}}},I8=(t,e,n,r,i,o,s,a,c,l,u,d,f,h,p,g,C,v,m,y)=>class extends p{constructor(b,A){super(b,A),this._nativeContext=b,this._audioWorklet=t===void 0?void 0:{addModule:(E,k)=>t(this,E,k)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(b,A,E){return new n({length:A,numberOfChannels:b,sampleRate:E})}createBufferSource(){return new r(this)}createChannelMerger(b=6){return new o(this,{numberOfInputs:b})}createChannelSplitter(b=6){return new s(this,{numberOfOutputs:b})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(b=1){return new u(this,{maxDelayTime:b})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(b,A){return new h(this,{feedback:A,feedforward:b})}createOscillator(){return new g(this)}createPanner(){return new C(this)}createPeriodicWave(b,A,E={disableNormalization:!1}){return new v(this,{...E,imag:A,real:b})}createStereoPanner(){return new m(this)}createWaveShaper(){return new y(this)}decodeAudioData(b,A,E){return l(this._nativeContext,b).then(k=>(typeof A=="function"&&A(k),k),k=>{throw typeof E=="function"&&E(k),k})}},b8={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},A8=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),f={...b8,...u},h=i(d,f),p=s(d),g=p?n():null;super(l,!1,h,g),this._Q=e(this,p,h.Q,ir,Ar),this._detune=e(this,p,h.detune,1200*Math.log2(ir),-1200*Math.log2(ir)),this._frequency=e(this,p,h.frequency,l.sampleRate/2,0),this._gain=e(this,p,h.gain,40*Math.log10(ir),Ar),this._nativeBiquadFilterNode=h,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(f){throw f.code===11?r():f}if(l.length!==u.length||u.length!==d.length)throw r()}},w8=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,d)}return o.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await r(c,a.Q,l.Q),await r(c,a.detune,l.detune),await r(c,a.frequency,l.frequency),await r(c,a.gain,l.gain)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},S8=(t,e)=>(n,r)=>{const i=e.get(n);if(i!==void 0)return i;const o=t.get(n);if(o!==void 0)return o;try{const s=r();return s instanceof Promise?(t.set(n,s),s.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,s),s)}catch{return e.set(n,!1),!1}},k8={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},E8=(t,e,n,r,i)=>class extends t{constructor(s,a){const c=r(s),l={...k8,...a},u=n(c,l),d=i(c)?e():null;super(s,!1,u,d)}},T8=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Qn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},R8={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},_8=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=o({...R8,...c}),d=n(l,u),f=i(l)?e():null;super(a,!1,d,f)}},D8=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Qn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},P8=t=>(e,n,r)=>t(n,e,r),N8=t=>(e,n,r=0,i=0)=>{const o=e[r];if(o===void 0)throw t();return V0(n)?o.connect(n,0,i):o.connect(n,0)},B8=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},F8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},O8=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...F8,...l},f=r(u,d),h=o(u),p=h?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=e(this,h,f.offset,ir,Ar),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){jl(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),Es(this)&&xf(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},M8=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const f=Qn(d,u);if(!f){const h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,h),s!==null&&d.start(s),a!==null&&d.stop(a)}return o.set(u,d),f?await t(u,l.offset,d.offset):await r(u,l.offset,d.offset),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},L8=t=>e=>(t[0]=e,t[0]),U8={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},V8=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u={...U8,...c},d=n(l,u),h=i(l)?e():null;super(a,!1,d,h),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},G8=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Qn(a,s)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,l)}return r.set(s,a),ou(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},W8=()=>new DOMException("","DataCloneError"),LA=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},z8=(t,e,n,r,i,o,s,a,c,l,u)=>(d,f)=>{const h=s(d)?d:o(d);if(i.has(f)){const p=n();return Promise.reject(p)}try{i.add(f)}catch{}return e(c,()=>c(h))?h.decodeAudioData(f).then(p=>(LA(f).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,g)=>{const C=async()=>{try{await LA(f)}catch{}},v=m=>{g(m),C()};try{h.decodeAudioData(f,m=>{typeof m.copyFromChannel!="function"&&(l(m),Y2(m)),t.add(m),C().then(()=>p(m))},m=>{v(m===null?r():m)})}catch(m){v(m)}})},j8=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=o(c.context),f=a(d);if(u===l){if(e.delete(c),!f&&s(c)){const h=r(c),{outputs:p}=n(c);for(const g of p)if(bf(g)){const C=r(g[0]);t(h,C,g[1],g[2])}else{const C=i(g[0]);h.connect(C,g[1])}}}else e.set(c,u-l)},H8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},Z8=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...H8,...l},f=r(u,d),h=o(u),p=h?n(d.maxDelayTime):null;super(c,!1,f,p),this._delayTime=e(this,h,f.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},$8=(t,e,n,r,i)=>o=>{const s=new WeakMap,a=async(c,l)=>{let u=n(c);const d=Qn(u,l);if(!d){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:o};u=e(l,f)}return s.set(l,u),d?await t(l,c.delayTime,u.delayTime):await r(l,c.delayTime,u.delayTime),await i(c,l,u),u};return{render(c,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},X8=t=>(e,n,r,i)=>t(e[i],o=>o[0]===n&&o[1]===r),K8=t=>(e,n)=>{t(e).delete(n)},J8=t=>"delayTime"in t,Y8=(t,e,n)=>function r(i,o){const s=M0(o)?o:n(t,o);if(J8(s))return[];if(i[0]===s)return[i];if(i.includes(s))return[];const{outputs:a}=e(s);return Array.from(a).map(c=>r([...i,s],c[0])).reduce((c,l)=>c.concat(l),[])},ih=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},q8=t=>(e,n=void 0,r=void 0,i=0)=>n===void 0?e.forEach(o=>o.disconnect()):typeof n=="number"?ih(t,e,n).disconnect():V0(n)?r===void 0?e.forEach(o=>o.disconnect(n)):i===void 0?ih(t,e,r).disconnect(n,0):ih(t,e,r).disconnect(n,0,i):r===void 0?e.forEach(o=>o.disconnect(n)):ih(t,e,r).disconnect(n,0),Q8={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},eL=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),f={...Q8,...u},h=r(d,f),p=s(d),g=p?n():null;super(l,!1,h,g),this._attack=e(this,p,h.attack),this._knee=e(this,p,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=e(this,p,h.ratio),this._release=e(this,p,h.release),this._threshold=e(this,p,h.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},tL=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,d)}return o.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await r(c,a.attack,l.attack),await r(c,a.knee,l.knee),await r(c,a.ratio,l.ratio),await r(c,a.release,l.release),await r(c,a.threshold,l.threshold)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},nL=()=>new DOMException("","EncodingError"),rL=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const i=t.document.head;if(i===null)r(new SyntaxError);else{const o=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,d,f,h,p)=>{if(d===a||d===t.location.href&&f===1&&h===1)return l(),r(p),!1;if(c!==null)return c(u,d,f,h,p)},o.onerror=()=>{l(),r(new SyntaxError)},o.onload=()=>{l(),n()},o.src=a,o.type="module",i.appendChild(o)}}),iL=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,i){if(r!==null){let o=this._listeners.get(r);o===void 0&&(o=t(this,r),typeof r=="function"&&this._listeners.set(r,o)),this._nativeEventTarget.addEventListener(n,o,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,i){const o=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,o===void 0?null:o,i)}},oL=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},sL=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},aL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},cL=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...aL,...c},d=r(l,u),f=o(l),h=f?n():null;super(a,!1,d,h),this._gain=e(this,f,d.gain,ir,Ar)}get gain(){return this._gain}},lL=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.gain,l.gain):await r(c,a.gain,l.gain),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},uL=(t,e)=>n=>e(t,n),dL=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},fL=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},hL=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},pL=t=>e=>t.get(e),Ln=()=>new DOMException("","InvalidStateError"),gL=t=>e=>{const n=t.get(e);if(n===void 0)throw Ln();return n},mL=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},vL=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Np=()=>new DOMException("","InvalidAccessError"),CL=t=>{t.getFrequencyResponse=(e=>(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw Np();return e.call(t,n,r,i)})(t.getFrequencyResponse)},yL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},xL=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=i(l),d={...yL,...c},f=e(l,u?null:a.baseLatency,d),h=u?n(d.feedback,d.feedforward):null;super(a,!1,f,h),CL(f),this._nativeIIRFilterNode=f,o(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},iR=(t,e,n,r,i,o,s,a,c,l,u)=>{const d=l.length;let f=a;for(let h=0;h<d;h+=1){let p=n[0]*l[h];for(let g=1;g<i;g+=1){const C=f-g&c-1;p+=n[g]*o[C],p-=t[g]*s[C]}for(let g=i;g<r;g+=1)p+=n[g]*o[f-g&c-1];for(let g=i;g<e;g+=1)p-=t[g]*s[f-g&c-1];o[f]=l[h],s[f]=p,f=f+1&c-1,u[h]=p}return f},IL=(t,e,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=r instanceof Float64Array?r:new Float64Array(r),s=i.length,a=o.length,c=Math.min(s,a);if(i[0]!==1){for(let p=0;p<s;p+=1)o[p]/=i[0];for(let p=1;p<a;p+=1)i[p]/=i[0]}const l=32,u=new Float32Array(l),d=new Float32Array(l),f=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),h=t.numberOfChannels;for(let p=0;p<h;p+=1){const g=t.getChannelData(p),C=f.getChannelData(p);u.fill(0),d.fill(0),iR(i,s,o,a,c,u,d,0,l,g,C)}return f},bL=(t,e,n,r,i)=>(o,s)=>{const a=new WeakMap;let c=null;const l=async(u,d)=>{let f=null,h=e(u);const p=Qn(h,d);if(d.createIIRFilter===void 0?f=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(h=d.createIIRFilter(s,o)),a.set(d,f===null?h:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);c=(async()=>{await r(u,C,C.destination);const v=await i(C);return IL(v,d,o,s)})()}const g=await c;return f.buffer=g,f.start(0),f}return await r(u,d,h),h};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},AL=(t,e,n,r,i,o)=>s=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!s&&o(a)){const u=r(a),{outputs:d}=n(a);for(const f of d)if(bf(f)){const h=r(f[0]);e(u,h,f[1],f[2])}else{const h=i(f[0]);u.disconnect(h,f[1])}}t.set(a,c)}else t.set(a,l+c)},wL=t=>e=>t!==null&&e instanceof t,SL=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,kL=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,EL=(t,e)=>n=>t(n)||e(n),TL=t=>e=>t!==null&&e instanceof t,RL=t=>t!==null&&t.isSecureContext,_L=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw TypeError();super(o,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DL={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},PL=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o);if(r(a))throw new TypeError;const c={...DL,...s},l=e(a,c);super(o,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},NL=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw new TypeError;super(o,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},BL=(t,e,n)=>class extends t{constructor(i,o){const s=n(i),a=e(s,o);super(i,!0,a,null)}},FL=(t,e,n,r,i,o)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,Z2.set(this,a),r(a)&&i.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?o(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},mC=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},OL=(t,e)=>(n,r,i)=>{const o=new Set;return n.connect=(s=>(a,c=0,l=0)=>{const u=o.size===0;if(e(a))return s.call(n,a,c,l),t(o,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;s.call(n,a,c),t(o,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(n.connect),n.disconnect=(s=>(a,c,l)=>{const u=o.size>0;if(a===void 0)s.apply(n),o.clear();else if(typeof a=="number"){s.call(n,a);for(const f of o)f[1]===a&&o.delete(f)}else{e(a)?s.call(n,a,c,l):s.call(n,a,c);for(const f of o)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&o.delete(f)}const d=o.size===0;u&&d&&i()})(n.disconnect),n},zt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},An=(t,e)=>{zt(t,e,"channelCount"),zt(t,e,"channelCountMode"),zt(t,e,"channelInterpretation")},UA=t=>typeof t.getFloatTimeDomainData=="function",ML=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let i=0;i<r;i+=1)e[i]=(n[i]-128)*.0078125;return e}},LL=(t,e)=>(n,r)=>{const i=n.createAnalyser();if(An(i,r),!(r.maxDecibels>r.minDecibels))throw e();return zt(i,r,"fftSize"),zt(i,r,"maxDecibels"),zt(i,r,"minDecibels"),zt(i,r,"smoothingTimeConstant"),t(UA,()=>UA(i))||ML(i),i},UL=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,en=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},VL=t=>{t.start=(e=>{let n=!1;return(r=0,i=0,o)=>{if(n)throw Ln();e.call(t,r,i,o),n=!0}})(t.start)},U1=t=>{t.start=(e=>(n=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})(t.start)},V1=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},GL=(t,e,n,r,i,o,s,a,c,l,u)=>(d,f)=>{const h=d.createBufferSource();return An(h,f),en(h,f,"playbackRate"),zt(h,f,"buffer"),zt(h,f,"loop"),zt(h,f,"loopEnd"),zt(h,f,"loopStart"),e(n,()=>n(d))||VL(h),e(r,()=>r(d))||c(h),e(i,()=>i(d))||l(h,d),e(o,()=>o(d))||U1(h),e(s,()=>s(d))||u(h,d),e(a,()=>a(d))||V1(h),t(d,h),h},WL=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,zL=(t,e)=>(n,r,i)=>{const o=n.destination;if(o.channelCount!==r)try{o.channelCount=r}catch{}i&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:r});const s=t(n,{channelCount:r,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>c=>{a.call(s,c);try{o.channelCount=c}catch(l){if(c>o.maxChannelCount)throw l}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelCountMode=c}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelInterpretation=c}),Object.defineProperty(s,"maxChannelCount",{get:()=>o.maxChannelCount}),s.connect(o),s},jL=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,HL=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},ZL=(t,e,n,r,i)=>(o,s,a,c,l,u)=>{if(a!==null)try{const d=new a(o,c,u),f=new Map;let h=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>h,set:p=>{typeof h=="function"&&d.removeEventListener("processorerror",h),h=typeof p=="function"?p:null,typeof h=="function"&&d.addEventListener("processorerror",h)}}}),d.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(C!==null){const v=f.get(g[1]);v!==void 0?g[1]=v:(g[1]=m=>{m.type==="error"?(Object.defineProperties(m,{type:{value:"processorerror"}}),C(m)):C(new ErrorEvent(g[0],{...m}))},f.set(C,g[1]))}}return p.call(d,"error",g[1],g[2]),p.call(d,...g)})(d.addEventListener),d.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=f.get(g[1]);C!==void 0&&(f.delete(g[1]),g[1]=C)}return p.call(d,"error",g[1],g[2]),p.call(d,g[0],g[1],g[2])})(d.removeEventListener),u.numberOfOutputs!==0){const p=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(o.destination),i(d,()=>p.disconnect(),()=>p.connect(o.destination))}return d}catch(d){throw d.code===11?r():d}if(l===void 0)throw r();return HL(u),e(o,s,l,u)},oR=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),$L=t=>new Promise((e,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:o})=>{r.close(),i.close(),e(o)},r.onmessageerror=({data:o})=>{r.close(),i.close(),n(o)},i.postMessage(t)}),XL=async(t,e)=>{const n=await $L(e);return new t(n)},KL=(t,e,n,r)=>{let i=fC.get(t);i===void 0&&(i=new WeakMap,fC.set(t,i));const o=XL(n,r);return i.set(e,o),o},JL=(t,e,n,r,i,o,s,a,c,l,u,d,f)=>(h,p,g,C)=>{if(C.numberOfInputs===0&&C.numberOfOutputs===0)throw c();const v=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(v.some(he=>he<1))throw c();if(v.length!==C.numberOfOutputs)throw e();if(C.channelCountMode!=="explicit")throw c();const m=C.channelCount*C.numberOfInputs,y=v.reduce((he,xe)=>he+xe,0),I=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(m+I>6||y>6)throw c();const b=new MessageChannel,A=[],E=[];for(let he=0;he<C.numberOfInputs;he+=1)A.push(s(h,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),E.push(i(h,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const k=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:he,maxValue:xe,minValue:Ue,name:Le}of g.parameterDescriptors){const Ne=o(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.parameterData[Le]!==void 0?C.parameterData[Le]:he===void 0?0:he});Object.defineProperties(Ne.offset,{defaultValue:{get:()=>he===void 0?0:he},maxValue:{get:()=>xe===void 0?ir:xe},minValue:{get:()=>Ue===void 0?Ar:Ue}}),k.push(Ne)}const D=r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,m+I)}),T=oR(p,h.sampleRate),R=a(h,T,m+I,Math.max(1,y)),P=i(h,{channelCount:Math.max(1,y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,y)}),M=[];for(let he=0;he<C.numberOfOutputs;he+=1)M.push(r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[he]}));for(let he=0;he<C.numberOfInputs;he+=1){A[he].connect(E[he]);for(let xe=0;xe<C.channelCount;xe+=1)E[he].connect(D,xe,he*C.channelCount+xe)}const G=new nR(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:he},xe)=>{const Ue=k[xe];return Ue.connect(D,0,m+xe),Ue.start(0),[he,Ue.offset]}));D.connect(R);let j=C.channelInterpretation,Q=null;const te=C.numberOfOutputs===0?[R]:M,$={get bufferSize(){return T},get channelCount(){return C.channelCount},set channelCount(he){throw n()},get channelCountMode(){return C.channelCountMode},set channelCountMode(he){throw n()},get channelInterpretation(){return j},set channelInterpretation(he){for(const xe of A)xe.channelInterpretation=he;j=he},get context(){return R.context},get inputs(){return A},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get onprocessorerror(){return Q},set onprocessorerror(he){typeof Q=="function"&&$.removeEventListener("processorerror",Q),Q=typeof he=="function"?he:null,typeof Q=="function"&&$.addEventListener("processorerror",Q)},get parameters(){return G},get port(){return b.port2},addEventListener(...he){return R.addEventListener(he[0],he[1],he[2])},connect:t.bind(null,te),disconnect:l.bind(null,te),dispatchEvent(...he){return R.dispatchEvent(he[0])},removeEventListener(...he){return R.removeEventListener(he[0],he[1],he[2])}},q=new Map;b.port1.addEventListener=(he=>(...xe)=>{if(xe[0]==="message"){const Ue=typeof xe[1]=="function"?xe[1]:typeof xe[1]=="object"&&xe[1]!==null&&typeof xe[1].handleEvent=="function"?xe[1].handleEvent:null;if(Ue!==null){const Le=q.get(xe[1]);Le!==void 0?xe[1]=Le:(xe[1]=Ne=>{u(h.currentTime,h.sampleRate,()=>Ue(Ne))},q.set(Ue,xe[1]))}}return he.call(b.port1,xe[0],xe[1],xe[2])})(b.port1.addEventListener),b.port1.removeEventListener=(he=>(...xe)=>{if(xe[0]==="message"){const Ue=q.get(xe[1]);Ue!==void 0&&(q.delete(xe[1]),xe[1]=Ue)}return he.call(b.port1,xe[0],xe[1],xe[2])})(b.port1.removeEventListener);let ne=null;Object.defineProperty(b.port1,"onmessage",{get:()=>ne,set:he=>{typeof ne=="function"&&b.port1.removeEventListener("message",ne),ne=typeof he=="function"?he:null,typeof ne=="function"&&(b.port1.addEventListener("message",ne),b.port1.start())}}),g.prototype.port=b.port1;let F=null;KL(h,$,g,C).then(he=>F=he);const K=W0(C.numberOfInputs,C.channelCount),ee=W0(C.numberOfOutputs,v),ae=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((he,{name:xe})=>({...he,[xe]:new Float32Array(128)}),{});let ge=!0;const Fe=()=>{C.numberOfOutputs>0&&R.disconnect(P);for(let he=0,xe=0;he<C.numberOfOutputs;he+=1){const Ue=M[he];for(let Le=0;Le<v[he];Le+=1)P.disconnect(Ue,xe+Le,Le);xe+=v[he]}},le=new Map;R.onaudioprocess=({inputBuffer:he,outputBuffer:xe})=>{if(F!==null){const Ue=d($);for(let Le=0;Le<T;Le+=128){for(let Ne=0;Ne<C.numberOfInputs;Ne+=1)for(let je=0;je<C.channelCount;je+=1)G0(he,K[Ne],je,je,Le);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:Ne},je)=>{G0(he,ae,Ne,m+je,Le)});for(let Ne=0;Ne<C.numberOfInputs;Ne+=1)for(let je=0;je<v[Ne];je+=1)ee[Ne][je].byteLength===0&&(ee[Ne][je]=new Float32Array(128));try{const Ne=K.map((it,Ye)=>{if(Ue[Ye].size>0)return le.set(Ye,T/128),it;const Yt=le.get(Ye);return Yt===void 0?[]:(it.every(Ht=>Ht.every(tn=>tn===0))&&(Yt===1?le.delete(Ye):le.set(Ye,Yt-1)),it)});ge=u(h.currentTime+Le/h.sampleRate,h.sampleRate,()=>F.process(Ne,ee,ae));for(let it=0,Ye=0;it<C.numberOfOutputs;it+=1){for(let pt=0;pt<v[it];pt+=1)rR(xe,ee[it],pt,Ye+pt,Le);Ye+=v[it]}}catch(Ne){ge=!1,$.dispatchEvent(new ErrorEvent("processorerror",{colno:Ne.colno,filename:Ne.filename,lineno:Ne.lineno,message:Ne.message}))}if(!ge){for(let Ne=0;Ne<C.numberOfInputs;Ne+=1){A[Ne].disconnect(E[Ne]);for(let je=0;je<C.channelCount;je+=1)E[Le].disconnect(D,je,Ne*C.channelCount+je)}if(g.parameterDescriptors!==void 0){const Ne=g.parameterDescriptors.length;for(let je=0;je<Ne;je+=1){const it=k[je];it.disconnect(D,0,m+je),it.stop()}}D.disconnect(R),R.onaudioprocess=null,Pt?Fe():ut();break}}}};let Pt=!1;const Gt=s(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),ot=()=>R.connect(Gt).connect(h.destination),ut=()=>{R.disconnect(Gt),Gt.disconnect()},mt=()=>{if(ge){ut(),C.numberOfOutputs>0&&R.connect(P);for(let he=0,xe=0;he<C.numberOfOutputs;he+=1){const Ue=M[he];for(let Le=0;Le<v[he];Le+=1)P.connect(Ue,xe+Le,Le);xe+=v[he]}}Pt=!0},st=()=>{ge&&(ot(),Fe()),Pt=!1};return ot(),f($,mt,st)},sR=(t,e)=>{const n=t.createBiquadFilter();return An(n,e),en(n,e,"Q"),en(n,e,"detune"),en(n,e,"frequency"),en(n,e,"gain"),zt(n,e,"type"),n},YL=(t,e)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),An(i,r),i},qL=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Ln()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Ln()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Ln()}})},Af=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return An(n,e),qL(n),n},QL=(t,e,n,r,i)=>(o,s)=>{if(o.createConstantSource===void 0)return n(o,s);const a=o.createConstantSource();return An(a,s),en(a,s,"offset"),e(r,()=>r(o))||U1(a),e(i,()=>i(o))||V1(a),t(o,a),a},su=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),e6=(t,e,n,r)=>(i,{offset:o,...s})=>{const a=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...s,gain:o}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),h=()=>c.disconnect(l);return t(i,c),r(su(d,l),f,h)},t6=(t,e)=>(n,r)=>{const i=n.createConvolver();if(An(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),zt(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",o=>()=>o.call(i),o=>s=>{if(s>2)throw t();return o.call(i,s)}),r.channelCountMode==="max"))throw t();return e(i,"channelCountMode",o=>()=>o.call(i),o=>s=>{if(s==="max")throw t();return o.call(i,s)}),i},aR=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return An(n,e),en(n,e,"delayTime"),n},n6=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(An(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return en(r,n,"attack"),en(r,n,"knee"),en(r,n,"ratio"),en(r,n,"release"),en(r,n,"threshold"),r},Dr=(t,e)=>{const n=t.createGain();return An(n,e),en(n,e,"gain"),n},r6=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return An(i,r),i};function i6(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function o6(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function VA(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=o6(n,e),n[0]+=t[r];return n}const s6=(t,e,n,r)=>(i,o,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=oR(o,i.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),h=u instanceof Float64Array?u:new Float64Array(u),p=f.length,g=h.length,C=Math.min(p,g);if(p===0||p>20)throw r();if(f[0]===0)throw e();if(g===0||g>20)throw r();if(h[0]===0)throw e();if(f[0]!==1){for(let k=0;k<g;k+=1)h[k]/=f[0];for(let k=1;k<p;k+=1)f[k]/=f[0]}const v=n(i,d,s,s);v.channelCount=s,v.channelCountMode=a,v.channelInterpretation=c;const m=32,y=[],I=[],b=[];for(let k=0;k<s;k+=1){y.push(0);const D=new Float32Array(m),T=new Float32Array(m);D.fill(0),T.fill(0),I.push(D),b.push(T)}v.onaudioprocess=k=>{const D=k.inputBuffer,T=k.outputBuffer,R=D.numberOfChannels;for(let P=0;P<R;P+=1){const M=D.getChannelData(P),G=T.getChannelData(P);y[P]=iR(f,p,h,g,C,I[P],b[P],y[P],m,M,G)}};const A=i.sampleRate/2;return su({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(k){v.channelCount=k},get channelCountMode(){return v.channelCountMode},set channelCountMode(k){v.channelCountMode=k},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(k){v.channelInterpretation=k},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...k){return v.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return v.dispatchEvent(k[0])},getFrequencyResponse(k,D,T){if(k.length!==D.length||D.length!==T.length)throw t();const R=k.length;for(let P=0;P<R;P+=1){const M=-Math.PI*(k[P]/A),G=[Math.cos(M),Math.sin(M)],j=VA(h,G),Q=VA(f,G),te=i6(j,Q);D[P]=Math.sqrt(te[0]*te[0]+te[1]*te[1]),T[P]=Math.atan2(te[1],te[0])}},removeEventListener(...k){return v.removeEventListener(k[0],k[1],k[2])}},v)},a6=(t,e)=>t.createMediaElementSource(e.mediaElement),c6=(t,e)=>{const n=t.createMediaStreamDestination();return An(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},l6=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((o,s)=>o.id<s.id?-1:o.id>s.id?1:0);const r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},u6=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),o=n.createMediaStreamSource(i);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return o},d6=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,f6=(t,e,n,r,i,o)=>(s,a)=>{const c=s.createOscillator();return An(c,a),en(c,a,"detune"),en(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):zt(c,a,"type"),e(n,()=>n(s))||U1(c),e(r,()=>r(s))||o(c,s),e(i,()=>i(s))||V1(c),t(s,c),c},h6=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(An(r,n),en(r,n,"orientationX"),en(r,n,"orientationY"),en(r,n,"orientationZ"),en(r,n,"positionX"),en(r,n,"positionY"),en(r,n,"positionZ"),zt(r,n,"coneInnerAngle"),zt(r,n,"coneOuterAngle"),zt(r,n,"coneOuterGain"),zt(r,n,"distanceModel"),zt(r,n,"maxDistance"),zt(r,n,"panningModel"),zt(r,n,"refDistance"),zt(r,n,"rolloffFactor"),r)},p6=(t,e,n,r,i,o,s,a,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:f,coneOuterGain:h,distanceModel:p,maxDistance:g,orientationX:C,orientationY:v,orientationZ:m,panningModel:y,positionX:I,positionY:b,positionZ:A,refDistance:E,rolloffFactor:k,...D})=>{const T=u.createPanner();if(D.channelCount>2||D.channelCountMode==="max")throw s();An(T,D);const R={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},P=n(u,{...R,channelInterpretation:"speakers",numberOfInputs:6}),M=r(u,{...D,gain:1}),G=r(u,{...R,gain:1}),j=r(u,{...R,gain:0}),Q=r(u,{...R,gain:0}),te=r(u,{...R,gain:0}),$=r(u,{...R,gain:0}),q=r(u,{...R,gain:0}),ne=i(u,256,6,1),F=o(u,{...R,curve:new Float32Array([1,1]),oversample:"none"});let z=[C,v,m],K=[I,b,A];const ee=new Float32Array(1);ne.onaudioprocess=({inputBuffer:le})=>{const Pt=[c(le,ee,0),c(le,ee,1),c(le,ee,2)];Pt.some((ot,ut)=>ot!==z[ut])&&(T.setOrientation(...Pt),z=Pt);const Gt=[c(le,ee,3),c(le,ee,4),c(le,ee,5)];Gt.some((ot,ut)=>ot!==K[ut])&&(T.setPosition(...Gt),K=Gt)},Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(Q.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(q.gain,"defaultValue",{get:()=>0});const ae={get bufferSize(){},get channelCount(){return T.channelCount},set channelCount(le){if(le>2)throw s();M.channelCount=le,T.channelCount=le},get channelCountMode(){return T.channelCountMode},set channelCountMode(le){if(le==="max")throw s();M.channelCountMode=le,T.channelCountMode=le},get channelInterpretation(){return T.channelInterpretation},set channelInterpretation(le){M.channelInterpretation=le,T.channelInterpretation=le},get coneInnerAngle(){return T.coneInnerAngle},set coneInnerAngle(le){T.coneInnerAngle=le},get coneOuterAngle(){return T.coneOuterAngle},set coneOuterAngle(le){T.coneOuterAngle=le},get coneOuterGain(){return T.coneOuterGain},set coneOuterGain(le){if(le<0||le>1)throw e();T.coneOuterGain=le},get context(){return T.context},get distanceModel(){return T.distanceModel},set distanceModel(le){T.distanceModel=le},get inputs(){return[M]},get maxDistance(){return T.maxDistance},set maxDistance(le){if(le<0)throw new RangeError;T.maxDistance=le},get numberOfInputs(){return T.numberOfInputs},get numberOfOutputs(){return T.numberOfOutputs},get orientationX(){return G.gain},get orientationY(){return j.gain},get orientationZ(){return Q.gain},get panningModel(){return T.panningModel},set panningModel(le){T.panningModel=le},get positionX(){return te.gain},get positionY(){return $.gain},get positionZ(){return q.gain},get refDistance(){return T.refDistance},set refDistance(le){if(le<0)throw new RangeError;T.refDistance=le},get rolloffFactor(){return T.rolloffFactor},set rolloffFactor(le){if(le<0)throw new RangeError;T.rolloffFactor=le},addEventListener(...le){return M.addEventListener(le[0],le[1],le[2])},dispatchEvent(...le){return M.dispatchEvent(le[0])},removeEventListener(...le){return M.removeEventListener(le[0],le[1],le[2])}};d!==ae.coneInnerAngle&&(ae.coneInnerAngle=d),f!==ae.coneOuterAngle&&(ae.coneOuterAngle=f),h!==ae.coneOuterGain&&(ae.coneOuterGain=h),p!==ae.distanceModel&&(ae.distanceModel=p),g!==ae.maxDistance&&(ae.maxDistance=g),C!==ae.orientationX.value&&(ae.orientationX.value=C),v!==ae.orientationY.value&&(ae.orientationY.value=v),m!==ae.orientationZ.value&&(ae.orientationZ.value=m),y!==ae.panningModel&&(ae.panningModel=y),I!==ae.positionX.value&&(ae.positionX.value=I),b!==ae.positionY.value&&(ae.positionY.value=b),A!==ae.positionZ.value&&(ae.positionZ.value=A),E!==ae.refDistance&&(ae.refDistance=E),k!==ae.rolloffFactor&&(ae.rolloffFactor=k),(z[0]!==1||z[1]!==0||z[2]!==0)&&T.setOrientation(...z),(K[0]!==0||K[1]!==0||K[2]!==0)&&T.setPosition(...K);const ge=()=>{M.connect(T),t(M,F,0,0),F.connect(G).connect(P,0,0),F.connect(j).connect(P,0,1),F.connect(Q).connect(P,0,2),F.connect(te).connect(P,0,3),F.connect($).connect(P,0,4),F.connect(q).connect(P,0,5),P.connect(ne).connect(u.destination)},Fe=()=>{M.disconnect(T),a(M,F,0,0),F.disconnect(G),G.disconnect(P),F.disconnect(j),j.disconnect(P),F.disconnect(Q),Q.disconnect(P),F.disconnect(te),te.disconnect(P),F.disconnect($),$.disconnect(P),F.disconnect(q),q.disconnect(P),P.disconnect(ne),ne.disconnect(u.destination)};return l(su(ae,T),ge,Fe)},g6=t=>(e,{disableNormalization:n,imag:r,real:i})=>{const o=r instanceof Float32Array?r:new Float32Array(r),s=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(s,o,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},wf=(t,e,n,r)=>t.createScriptProcessor(e,n,r),m6=(t,e)=>(n,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const o=n.createStereoPanner();return An(o,r),en(o,r,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:s=>{if(s!==i)throw e()}}),o},v6=(t,e,n,r,i,o)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(p,g,C,v)=>{const m=new Float32Array(16385),y=new Float32Array(16385);for(let D=0;D<16385;D+=1){const T=D/16384*c;m[D]=Math.cos(T),y[D]=Math.sin(T)}const I=n(p,{...l,gain:0}),b=r(p,{...u,curve:m}),A=r(p,{...u,curve:a}),E=n(p,{...l,gain:0}),k=r(p,{...u,curve:y});return{connectGraph(){g.connect(I),g.connect(A.inputs===void 0?A:A.inputs[0]),g.connect(E),A.connect(C),C.connect(b.inputs===void 0?b:b.inputs[0]),C.connect(k.inputs===void 0?k:k.inputs[0]),b.connect(I.gain),k.connect(E.gain),I.connect(v,0,0),E.connect(v,0,1)},disconnectGraph(){g.disconnect(I),g.disconnect(A.inputs===void 0?A:A.inputs[0]),g.disconnect(E),A.disconnect(C),C.disconnect(b.inputs===void 0?b:b.inputs[0]),C.disconnect(k.inputs===void 0?k:k.inputs[0]),b.disconnect(I.gain),k.disconnect(E.gain),I.disconnect(v,0,0),E.disconnect(v,0,1)}}},f=(p,g,C,v)=>{const m=new Float32Array(16385),y=new Float32Array(16385),I=new Float32Array(16385),b=new Float32Array(16385),A=Math.floor(16385/2);for(let te=0;te<16385;te+=1)if(te>A){const $=(te-A)/(16384-A)*c;m[te]=Math.cos($),y[te]=Math.sin($),I[te]=0,b[te]=1}else{const $=te/(16384-A)*c;m[te]=1,y[te]=0,I[te]=Math.cos($),b[te]=Math.sin($)}const E=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),k=n(p,{...l,gain:0}),D=r(p,{...u,curve:m}),T=n(p,{...l,gain:0}),R=r(p,{...u,curve:y}),P=r(p,{...u,curve:a}),M=n(p,{...l,gain:0}),G=r(p,{...u,curve:I}),j=n(p,{...l,gain:0}),Q=r(p,{...u,curve:b});return{connectGraph(){g.connect(E),g.connect(P.inputs===void 0?P:P.inputs[0]),E.connect(k,0),E.connect(T,0),E.connect(M,1),E.connect(j,1),P.connect(C),C.connect(D.inputs===void 0?D:D.inputs[0]),C.connect(R.inputs===void 0?R:R.inputs[0]),C.connect(G.inputs===void 0?G:G.inputs[0]),C.connect(Q.inputs===void 0?Q:Q.inputs[0]),D.connect(k.gain),R.connect(T.gain),G.connect(M.gain),Q.connect(j.gain),k.connect(v,0,0),M.connect(v,0,0),T.connect(v,0,1),j.connect(v,0,1)},disconnectGraph(){g.disconnect(E),g.disconnect(P.inputs===void 0?P:P.inputs[0]),E.disconnect(k,0),E.disconnect(T,0),E.disconnect(M,1),E.disconnect(j,1),P.disconnect(C),C.disconnect(D.inputs===void 0?D:D.inputs[0]),C.disconnect(R.inputs===void 0?R:R.inputs[0]),C.disconnect(G.inputs===void 0?G:G.inputs[0]),C.disconnect(Q.inputs===void 0?Q:Q.inputs[0]),D.disconnect(k.gain),R.disconnect(T.gain),G.disconnect(M.gain),Q.disconnect(j.gain),k.disconnect(v,0,0),M.disconnect(v,0,0),T.disconnect(v,0,1),j.disconnect(v,0,1)}}},h=(p,g,C,v,m)=>{if(g===1)return d(p,C,v,m);if(g===2)return f(p,C,v,m);throw i()};return(p,{channelCount:g,channelCountMode:C,pan:v,...m})=>{if(C==="max")throw i();const y=t(p,{...m,channelCount:1,channelCountMode:C,numberOfInputs:2}),I=n(p,{...m,channelCount:g,channelCountMode:C,gain:1}),b=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v});let{connectGraph:A,disconnectGraph:E}=h(p,g,I,b,y);Object.defineProperty(b.gain,"defaultValue",{get:()=>0}),Object.defineProperty(b.gain,"maxValue",{get:()=>1}),Object.defineProperty(b.gain,"minValue",{get:()=>-1});const k={get bufferSize(){},get channelCount(){return I.channelCount},set channelCount(P){I.channelCount!==P&&(D&&E(),{connectGraph:A,disconnectGraph:E}=h(p,P,I,b,y),D&&A()),I.channelCount=P},get channelCountMode(){return I.channelCountMode},set channelCountMode(P){if(P==="clamped-max"||P==="max")throw i();I.channelCountMode=P},get channelInterpretation(){return I.channelInterpretation},set channelInterpretation(P){I.channelInterpretation=P},get context(){return I.context},get inputs(){return[I]},get numberOfInputs(){return I.numberOfInputs},get numberOfOutputs(){return I.numberOfOutputs},get pan(){return b.gain},addEventListener(...P){return I.addEventListener(P[0],P[1],P[2])},dispatchEvent(...P){return I.dispatchEvent(P[0])},removeEventListener(...P){return I.removeEventListener(P[0],P[1],P[2])}};let D=!1;const T=()=>{A(),D=!0},R=()=>{E(),D=!1};return o(su(k,y),T,R)}},C6=(t,e,n,r,i,o,s)=>(a,c)=>{const l=a.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);An(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();zt(l,{curve:u},"curve"),zt(l,c,"oversample");let d=null,f=!1;return s(l,"curve",g=>()=>g.call(l),g=>C=>(g.call(l,C),f&&(r(C)&&d===null?d=t(a,l):!r(C)&&d!==null&&(d(),d=null)),C)),i(l,()=>{f=!0,r(l.curve)&&(d=t(a,l))},()=>{f=!1,d!==null&&(d(),d=null)})},y6=(t,e,n,r,i)=>(o,{curve:s,oversample:a,...c})=>{const l=o.createWaveShaper(),u=o.createWaveShaper();An(l,c),An(u,c);const d=n(o,{...c,gain:1}),f=n(o,{...c,gain:-1}),h=n(o,{...c,gain:1}),p=n(o,{...c,gain:-1});let g=null,C=!1,v=null;const m={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(b){d.channelCount=b,f.channelCount=b,l.channelCount=b,h.channelCount=b,u.channelCount=b,p.channelCount=b},get channelCountMode(){return l.channelCountMode},set channelCountMode(b){d.channelCountMode=b,f.channelCountMode=b,l.channelCountMode=b,h.channelCountMode=b,u.channelCountMode=b,p.channelCountMode=b},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(b){d.channelInterpretation=b,f.channelInterpretation=b,l.channelInterpretation=b,h.channelInterpretation=b,u.channelInterpretation=b,p.channelInterpretation=b},get context(){return l.context},get curve(){return v},set curve(b){if(b!==null&&b.length<2)throw e();if(b===null)l.curve=b,u.curve=b;else{const A=b.length,E=new Float32Array(A+2-A%2),k=new Float32Array(A+2-A%2);E[0]=b[0],k[0]=-b[A-1];const D=Math.ceil((A+1)/2),T=(A+1)/2-1;for(let R=1;R<D;R+=1){const P=R/D*T,M=Math.floor(P),G=Math.ceil(P);E[R]=M===G?b[M]:(1-(P-M))*b[M]+(1-(G-P))*b[G],k[R]=M===G?-b[A-1-M]:-((1-(P-M))*b[A-1-M])-(1-(G-P))*b[A-1-G]}E[D]=A%2===1?b[D-1]:(b[D-2]+b[D-1])/2,l.curve=E,u.curve=k}v=b,C&&(r(v)&&g===null?g=t(o,d):g!==null&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(b){l.oversample=b,u.oversample=b},addEventListener(...b){return d.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return d.dispatchEvent(b[0])},removeEventListener(...b){return d.removeEventListener(b[0],b[1],b[2])}};s!==null&&(m.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==m.oversample&&(m.oversample=a);const y=()=>{d.connect(l).connect(h),d.connect(f).connect(u).connect(p).connect(h),C=!0,r(v)&&(g=t(o,d))},I=()=>{d.disconnect(l),l.disconnect(h),d.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(h),C=!1,g!==null&&(g(),g=null)};return i(su(m,h),y,I)},Pr=()=>new DOMException("","NotSupportedError"),x6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},I6=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...x6,...l},f=n(u,d),h=o(u),p=h?r():null,g=c.sampleRate/2;super(c,!1,f,p),this._detune=e(this,h,f.detune,153600,-153600),this._frequency=e(this,h,f.frequency,g,-g),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){jl(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),Es(this)&&xf(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},b6=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null,c=null;const l=async(u,d)=>{let f=n(u);const h=Qn(f,d);if(!h){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:s===null?void 0:s,type:f.type};f=e(d,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return o.set(d,f),h?(await t(d,u.detune,f.detune),await t(d,u.frequency,f.frequency)):(await r(d,u.detune,f.detune),await r(d,u.frequency,f.frequency)),await i(u,d,f),f};return{set periodicWave(u){s=u},set start(u){a=u},set stop(u){c=u},render(u,d){const f=o.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},A6={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},w6=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...A6,...l},f=n(u,d),h=o(u),p=h?r():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=e(this,h,f.orientationX,ir,Ar),this._orientationY=e(this,h,f.orientationY,ir,Ar),this._orientationZ=e(this,h,f.orientationZ,ir,Ar),this._positionX=e(this,h,f.positionX,ir,Ar),this._positionY=e(this,h,f.positionY,ir,Ar),this._positionZ=e(this,h,f.positionZ,ir,Ar),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},S6=(t,e,n,r,i,o,s,a,c,l)=>()=>{const u=new WeakMap;let d=null;const f=async(h,p)=>{let g=null,C=o(h);const v={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},m={...v,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},y=Qn(C,p);if("bufferSize"in C)g=r(p,{...v,gain:1});else if(!y){const I={...m,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=i(p,I)}if(u.set(p,g===null?C:g),g!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const R=new s(6,h.context.length,p.sampleRate),P=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});P.connect(R.destination),d=(async()=>{const M=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map(async(G,j)=>{const Q=n(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:j===0?1:0});return await a(R,G,Q.offset),Q}));for(let G=0;G<6;G+=1)M[G].connect(P,0,G),M[G].start(0);return l(R)})()}const I=await d,b=r(p,{...v,gain:1});await c(h,p,b);const A=[];for(let R=0;R<I.numberOfChannels;R+=1)A.push(I.getChannelData(R));let E=[A[0][0],A[1][0],A[2][0]],k=[A[3][0],A[4][0],A[5][0]],D=r(p,{...v,gain:1}),T=i(p,{...m,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:k[0],positionY:k[1],positionZ:k[2]});b.connect(D).connect(T.inputs[0]),T.connect(g);for(let R=128;R<I.length;R+=128){const P=[A[0][R],A[1][R],A[2][R]],M=[A[3][R],A[4][R],A[5][R]];if(P.some((G,j)=>G!==E[j])||M.some((G,j)=>G!==k[j])){E=P,k=M;const G=R/p.sampleRate;D.gain.setValueAtTime(0,G),D=r(p,{...v,gain:0}),T=i(p,{...m,orientationX:E[0],orientationY:E[1],orientationZ:E[2],positionX:k[0],positionY:k[1],positionZ:k[2]}),D.gain.setValueAtTime(1,G),b.connect(D).connect(T.inputs[0]),T.connect(g)}}return g}return y?(await t(p,h.orientationX,C.orientationX),await t(p,h.orientationY,C.orientationY),await t(p,h.orientationZ,C.orientationZ),await t(p,h.positionX,C.positionX),await t(p,h.positionY,C.positionY),await t(p,h.positionZ,C.positionZ)):(await a(p,h.orientationX,C.orientationX),await a(p,h.orientationY,C.orientationY),await a(p,h.orientationZ,C.orientationZ),await a(p,h.positionX,C.positionX),await a(p,h.positionY,C.positionY),await a(p,h.positionZ,C.positionZ)),ou(C)?await c(h,p,C.inputs[0]):await c(h,p,C),C};return{render(h,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):f(h,p)}}},k6={disableNormalization:!1},E6=(t,e,n,r)=>class cR{constructor(o,s){const a=e(o),c=r({...k6,...s}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===cR.prototype||n.has(o)}},T6=(t,e)=>(n,r,i)=>(t(r).replay(i),e(r,n,i)),R6=(t,e,n)=>async(r,i,o)=>{const s=t(r);await Promise.all(s.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await e(l).render(l,i),h=r.context.destination;!n(l)&&(r!==h||!n(r))&&f.connect(o,u,c)})).reduce((a,c)=>[...a,...c],[]))},_6=(t,e,n)=>async(r,i,o)=>{const s=e(r);await Promise.all(Array.from(s.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,i);n(a)||u.connect(o,c)}))},D6=(t,e,n,r)=>i=>t(mC,()=>mC(i))?Promise.resolve(t(r,r)).then(o=>{if(!o){const s=n(i,512,0,1);i.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>i.currentTime,s.connect(i.destination)}return i.startRendering()}):new Promise(o=>{const s=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{s.disconnect(),o(a.renderedBuffer)},s.connect(i.destination),i.startRendering()}),P6=t=>(e,n)=>{t.set(e,n)},N6=t=>(e,n)=>t.set(e,n),B6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},F6=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...B6,...c},d=n(l,u),f=o(l),h=f?r():null;super(a,!1,d,h),this._pan=e(this,f,d.pan)}get pan(){return this._pan}},O6=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.pan,l.pan):await r(c,a.pan,l.pan),ou(l)?await i(a,c,l.inputs[0]):await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},M6=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},L6=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(n);let o=!1,s=!1;try{await r.audioWorklet.addModule(i);const a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>o=!0,a.onprocessorerror=()=>s=!0,c.connect(a),c.start(0),await r.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(i)}return o&&!s},U6=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{r.disconnect(),i(n.currentTime!==0)},n.startRendering()})},V6=()=>new DOMException("","UnknownError"),G6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},W6=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...G6,...l},f=n(u,d),p=o(u)?r():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},z6=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Qn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,l)}return r.set(s,a),ou(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},j6=()=>typeof window>"u"?null:window,H6=(t,e)=>n=>{n.copyFromChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)r[d]=l[d+s]},n.copyToChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)l[d+s]=r[d]}},Z6=t=>e=>{e.copyFromChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyToChannel)},$6=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",i=>()=>{const o=i.call(e);return o===r?null:o},i=>o=>i.call(e,o===null?r:o))},X6=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)i.connect(r,0,c)},()=>i.disconnect(r))},lR=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),uR=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Sf=(t,e,n,r)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:s}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:r(s)})},K6=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),J6=t=>({...t,channelCount:t.numberOfOutputs}),Y6=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},dR=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;dR(t,e,n+1e-7)}},q6=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},Q6=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},e9=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},G1=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},fR=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},W1=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},t9=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},n9=t=>{t.start=(e=>(n=0,r=0,i)=>{const o=t.buffer,s=o===null?r:Math.min(o.duration,r);o!==null&&s>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,i)})(t.start)},hR=(t,e)=>{const n=e.createGain();t.connect(n);const r=(i=>()=>{i.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),su(t,n),t.stop=(i=>{let o=!1;return(s=0)=>{if(o)try{i.call(t,s)}catch{n.gain.setValueAtTime(0,s)}else i.call(t,s),o=!0}})(t.stop)},au=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},r9=_M(Fc),i9=OM(Fc),o9=X8(Pp),pR=new WeakMap,s9=fL(pR),Us=S8(new Map,new WeakMap),Oo=j6(),gR=LL(Us,Vo),mR=dL(ar),jn=R6(ar,mR,Ac),a9=GM(gR,Vt,jn),Dt=gL(Z2),La=d6(Oo),kt=TL(La),vR=new WeakMap,CR=iL(au),kf=WL(Oo),yR=wL(kf),xR=SL(Oo),c9=kL(Oo),Kd=jL(Oo),an=h8(DM(W2),FM(r9,i9,L0,o9,U0,ar,s9,yf,Vt,Fc,Es,Ac,Mh),Us,AL(uC,U0,ar,Vt,Xd,Es),Vo,Np,Pr,j8(L0,uC,ar,Vt,Xd,Dt,Es,kt),Y8(vR,ar,Xi),CR,Dt,yR,xR,c9,kt,Kd),l9=VM(an,a9,Vo,gR,Dt,kt),IR=new WeakSet,GA=UL(Oo),bR=L8(new Uint32Array(1)),AR=H6(bR,Vo),wR=Z6(bR),u9=zM(IR,Us,Pr,GA,La,M6(GA),AR,wR),Bp=MM(Dr),SR=_6(mR,If,Ac),Go=P8(SR),cu=GL(Bp,Us,q6,Q6,e9,G1,fR,W1,n9,$6(Sf),hR),Wo=T6(hL(If),SR),d9=ZM(Go,cu,Vt,Wo,jn),Qi=p8(PM(j2),vR,H2,g8,wM,SM,kM,EM,TM,aC,V2,kf,dR),f9=HM(an,d9,Qi,Ln,cu,Dt,kt,au),h9=n8(an,r8,Vo,Ln,zL(Dr,Sf),Dt,kt,jn),p9=w8(Go,sR,Vt,Wo,jn),Oc=N6(pR),g9=A8(an,Qi,p9,Np,sR,Dt,kt,Oc),Ua=OL(Fc,xR),m9=X6(Ln,Ua),Va=YL(kf,m9),v9=T8(Va,Vt,jn),C9=E8(an,v9,Va,Dt,kt),y9=D8(Af,Vt,jn),x9=_8(an,y9,Af,Dt,kt,J6),I9=e6(Bp,cu,Dr,Ua),lu=QL(Bp,Us,I9,G1,W1),b9=M8(Go,lu,Vt,Wo,jn),A9=O8(an,Qi,b9,lu,Dt,kt,au),kR=t6(Pr,Sf),w9=G8(kR,Vt,jn),S9=V8(an,w9,kR,Dt,kt,Oc),k9=$8(Go,aR,Vt,Wo,jn),E9=Z8(an,Qi,k9,aR,Dt,kt,Oc),ER=n6(Pr),T9=tL(Go,ER,Vt,Wo,jn),R9=eL(an,Qi,T9,ER,Pr,Dt,kt,Oc),_9=lL(Go,Dr,Vt,Wo,jn),D9=cL(an,Qi,_9,Dr,Dt,kt),P9=s6(Np,Ln,wf,Pr),z1=D6(Us,Dr,wf,U6(Dr,La)),N9=bL(cu,Vt,La,jn,z1),B9=r6(P9),F9=xL(an,B9,N9,Dt,kt,Oc),O9=i8(Qi,Va,lu,wf,Pr,lR,kt,Sf),TR=new WeakMap,M9=FL(h9,O9,CR,kt,TR,au),RR=f6(Bp,Us,G1,fR,W1,hR),L9=b6(Go,RR,Vt,Wo,jn),U9=I6(an,Qi,RR,L9,Dt,kt,au),_R=B8(cu),V9=y6(_R,Ln,Dr,uR,Ua),Fp=C6(_R,Ln,V9,uR,Ua,kf,Sf),G9=p6(L0,Ln,Va,Dr,wf,Fp,Pr,U0,lR,Ua),DR=h6(G9),W9=S6(Go,Va,lu,Dr,DR,Vt,La,Wo,jn,z1),z9=w6(an,Qi,DR,W9,Dt,kt,Oc),j9=g6(Vo),H9=E6(j9,Dt,new WeakSet,Y6),Z9=v6(Va,Af,Dr,Fp,Pr,Ua),PR=m6(Z9,Pr),$9=O6(Go,PR,Vt,Wo,jn),X9=F6(an,Qi,PR,$9,Dt,kt),K9=z6(Fp,Vt,jn),J9=W6(an,Ln,Fp,K9,Dt,kt,Oc),NR=RL(Oo),j1=oL(Oo),BR=new WeakMap,Y9=mL(BR,La),q9=NR?BM(Us,Pr,rL(Oo),j1,sL(RM),Dt,Y9,kt,Kd,new WeakMap,new WeakMap,L6(Kd,La),Oo):void 0,Q9=EL(yR,kt),e7=z8(IR,Us,W8,nL,new WeakSet,Dt,Q9,pC,mC,AR,wR),t7=I8(q9,l9,u9,f9,g9,C9,x9,A9,S9,e7,E9,R9,D9,F9,M9,U9,z9,H9,X9,J9),n7=_L(an,a6,Dt,kt),r7=PL(an,c6,Dt,kt),i7=NL(an,l6,Dt,kt),o7=u6(Ln,kt),s7=BL(an,o7,Dt),a7=t8(t7,Ln,Pr,V6,n7,r7,i7,s7,kf),FR=vL(TR),c7=LM(FR),OR=N8(Vo),l7=K8(FR),MR=q8(Vo),LR=new WeakMap,u7=uL(LR,Xi),d7=JL(OR,Vo,Ln,Va,Af,lu,Dr,wf,Pr,MR,j1,u7,Ua),f7=ZL(Ln,d7,Dr,Pr,Ua),h7=x8(Go,OR,cu,Va,Af,lu,Dr,l7,MR,j1,Vt,Kd,La,Wo,jn,z1),p7=pL(BR),g7=P6(LR),WA=NR?v8(c7,an,Qi,h7,f7,ar,p7,Dt,kt,Kd,K6,g7,t9,au):void 0,m7="data:text/javascript;base64,KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgV0VCQVVESU9fQkxPQ0tfU0laRSA9IDEyODsKICAgIGNvbnN0IERFRkFVTFRfQkxPQ0tfU0laRSA9IDEwMjQ7IC8vIERlZmF1bHQgYmxvY2sgc2l6ZSBpZiBub3QgcHJvdmlkZWQgaW4gb3B0aW9ucwogICAgLyoqIE92ZXJsYXAtQWRkIE5vZGUgKi8KICAgIGNsYXNzIE9MQVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgICAgICAgbmJJbnB1dHM7CiAgICAgICAgbmJPdXRwdXRzOwogICAgICAgIGJsb2NrU2l6ZTsKICAgICAgICBob3BTaXplOwogICAgICAgIG5iT3ZlcmxhcHM7CiAgICAgICAgaW5wdXRCdWZmZXJzID0gW107CiAgICAgICAgaW5wdXRCdWZmZXJzSGVhZCA9IFtdOwogICAgICAgIGlucHV0QnVmZmVyc1RvU2VuZCA9IFtdOwogICAgICAgIG91dHB1dEJ1ZmZlcnMgPSBbXTsKICAgICAgICBvdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSA9IFtdOwogICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMubmJJbnB1dHMgPSBvcHRpb25zLm51bWJlck9mSW5wdXRzIHx8IDE7CiAgICAgICAgICAgIHRoaXMubmJPdXRwdXRzID0gb3B0aW9ucy5udW1iZXJPZk91dHB1dHMgfHwgMTsKICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBvcHRpb25zLnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplIHx8IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5ob3BTaXplID0gV0VCQVVESU9fQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5uYk92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLmJsb2NrU2l6ZSAvIHRoaXMuaG9wU2l6ZSk7CiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTsKICAgICAgICB9CiAgICAgICAgaW5pdGlhbGl6ZUJ1ZmZlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWQgPSBuZXcgQXJyYXkodGhpcy5uYklucHV0cyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMgPSBuZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlID0gbmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYk91dHB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFsbG9jYXRlSW5wdXRDaGFubmVscyhpbnB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWRbaW5wdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplICsgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc1tpbnB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW2lucHV0SW5kZXhdW2ldID0gdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0uc3ViYXJyYXkoMCwgdGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxvY2F0ZU91dHB1dENoYW5uZWxzKG91dHB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tvdXRwdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbb3V0cHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVtvdXRwdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZChpbnB1dHMsIG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gaW5wdXRzW2ldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYkNoYW5uZWxzICE9PSB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gb3V0cHV0c1tpXS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJDaGFubmVscyAhPT0gdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkSW5wdXRzKGlucHV0cykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gaW5wdXRzW2ldW2pdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLnNldCh3ZWJBdWRpb0Jsb2NrLCB0aGlzLmJsb2NrU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgd3JpdGVPdXRwdXRzKG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iT3V0cHV0czsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMub3V0cHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gb3V0cHV0c1tpXVtqXTsKICAgICAgICAgICAgICAgICAgICB3ZWJBdWRpb0Jsb2NrLnNldCh0aGlzLm91dHB1dEJ1ZmZlcnNbaV1bal0uc3ViYXJyYXkoMCwgV0VCQVVESU9fQkxPQ0tfU0laRSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0SW5wdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2hpZnRPdXRwdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmZpbGwoMCwgdGhpcy5ibG9ja1NpemUgLSBXRUJBVURJT19CTE9DS19TSVpFKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2ldW2pdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbaV1bal0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmJsb2NrU2l6ZTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tpXVtqXVtrXSArPSB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW2ldW2pdW2tdIC8gdGhpcy5uYk92ZXJsYXBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICB0aGlzLnJlYWxsb2NhdGVDaGFubmVsc0lmTmVlZGVkKGlucHV0cywgb3V0cHV0cyk7CiAgICAgICAgICAgIHRoaXMucmVhZElucHV0cyhpbnB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCk7CiAgICAgICAgICAgIHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpOwogICAgICAgICAgICB0aGlzLnByb2Nlc3NPTEEodGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQsIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUsIHBhcmFtZXRlcnMpOwogICAgICAgICAgICB0aGlzLmhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCk7CiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRzKG91dHB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgKHgpIHsKICAgIAlyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4OwogICAgfQoKICAgIGZ1bmN0aW9uIEZGVChzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfCAwOwogICAgICBpZiAodGhpcy5zaXplIDw9IDEgfHwgKHRoaXMuc2l6ZSAmICh0aGlzLnNpemUgLSAxKSkgIT09IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxJyk7CgogICAgICB0aGlzLl9jc2l6ZSA9IHNpemUgPDwgMTsKCiAgICAgIC8vIE5PVEU6IFVzZSBvZiBgdmFyYCBpcyBpbnRlbnRpb25hbCBmb3Igb2xkIFY4IHZlcnNpb25zCiAgICAgIHZhciB0YWJsZSA9IG5ldyBBcnJheSh0aGlzLnNpemUgKiAyKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSSAqIGkgLyB0aGlzLnNpemU7CiAgICAgICAgdGFibGVbaV0gPSBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgdGFibGVbaSArIDFdID0gLU1hdGguc2luKGFuZ2xlKTsKICAgICAgfQogICAgICB0aGlzLnRhYmxlID0gdGFibGU7CgogICAgICAvLyBGaW5kIHNpemUncyBwb3dlciBvZiB0d28KICAgICAgdmFyIHBvd2VyID0gMDsKICAgICAgZm9yICh2YXIgdCA9IDE7IHRoaXMuc2l6ZSA+IHQ7IHQgPDw9IDEpCiAgICAgICAgcG93ZXIrKzsKCiAgICAgIC8vIENhbGN1bGF0ZSBpbml0aWFsIHN0ZXAncyB3aWR0aDoKICAgICAgLy8gICAqIElmIHdlIGFyZSBmdWxsIHJhZGl4LTQgLSBpdCBpcyAyeCBzbWFsbGVyIHRvIGdpdmUgaW5pdGFsIGxlbj04CiAgICAgIC8vICAgKiBPdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgYHBvd2VyYCB0byBnaXZlIGxlbj00CiAgICAgIHRoaXMuX3dpZHRoID0gcG93ZXIgJSAyID09PSAwID8gcG93ZXIgLSAxIDogcG93ZXI7CgogICAgICAvLyBQcmUtY29tcHV0ZSBiaXQtcmV2ZXJzYWwgcGF0dGVybnMKICAgICAgdGhpcy5fYml0cmV2ID0gbmV3IEFycmF5KDEgPDwgdGhpcy5fd2lkdGgpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2JpdHJldi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuX2JpdHJldltqXSA9IDA7CiAgICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBzaGlmdCA8IHRoaXMuX3dpZHRoOyBzaGlmdCArPSAyKSB7CiAgICAgICAgICB2YXIgcmV2U2hpZnQgPSB0aGlzLl93aWR0aCAtIHNoaWZ0IC0gMjsKICAgICAgICAgIHRoaXMuX2JpdHJldltqXSB8PSAoKGogPj4+IHNoaWZ0KSAmIDMpIDw8IHJldlNoaWZ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fb3V0ID0gbnVsbDsKICAgICAgdGhpcy5fZGF0YSA9IG51bGw7CiAgICAgIHRoaXMuX2ludiA9IDA7CiAgICB9CiAgICB2YXIgZmZ0ID0gRkZUOwoKICAgIEZGVC5wcm90b3R5cGUuZnJvbUNvbXBsZXhBcnJheSA9IGZ1bmN0aW9uIGZyb21Db21wbGV4QXJyYXkoY29tcGxleCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCBuZXcgQXJyYXkoY29tcGxleC5sZW5ndGggPj4+IDEpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXgubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzW2kgPj4+IDFdID0gY29tcGxleFtpXTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5jcmVhdGVDb21wbGV4QXJyYXkgPSBmdW5jdGlvbiBjcmVhdGVDb21wbGV4QXJyYXkoKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudG9Db21wbGV4QXJyYXkgPSBmdW5jdGlvbiB0b0NvbXBsZXhBcnJheShpbnB1dCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCB0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHJlc1tpXSA9IGlucHV0W2kgPj4+IDFdOwogICAgICAgIHJlc1tpICsgMV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUuY29tcGxldGVTcGVjdHJ1bSA9IGZ1bmN0aW9uIGNvbXBsZXRlU3BlY3RydW0oc3BlY3RydW0pIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLl9jc2l6ZTsKICAgICAgdmFyIGhhbGYgPSBzaXplID4+PiAxOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGhhbGY7IGkgKz0gMikgewogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpXSA9IHNwZWN0cnVtW2ldOwogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpICsgMV0gPSAtc3BlY3RydW1baSArIDFdOwogICAgICB9CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl90cmFuc2Zvcm00KCk7CiAgICAgIHRoaXMuX291dCA9IG51bGw7CiAgICAgIHRoaXMuX2RhdGEgPSBudWxsOwogICAgfTsKCiAgICBGRlQucHJvdG90eXBlLnJlYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiByZWFsVHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl9yZWFsVHJhbnNmb3JtNCgpOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5pbnZlcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gaW52ZXJzZVRyYW5zZm9ybShvdXQsIGRhdGEpIHsKICAgICAgaWYgKG91dCA9PT0gZGF0YSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCcpOwoKICAgICAgdGhpcy5fb3V0ID0gb3V0OwogICAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgICAgdGhpcy5faW52ID0gMTsKICAgICAgdGhpcy5fdHJhbnNmb3JtNCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykKICAgICAgICBvdXRbaV0gLz0gdGhpcy5zaXplOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgLy8gcmFkaXgtNCBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IFVzZXMgb2YgYHZhcmAgYXJlIGludGVudGlvbmFsIGZvciBvbGRlciBWOCB2ZXJzaW9uIHRoYXQgZG8gbm90CiAgICAvLyBzdXBwb3J0IGJvdGggYGxldCBjb21wb3VuZCBhc3NpZ25tZW50c2AgYW5kIGBjb25zdCBwaGlgCiAgICBGRlQucHJvdG90eXBlLl90cmFuc2Zvcm00ID0gZnVuY3Rpb24gX3RyYW5zZm9ybTQoKSB7CiAgICAgIHZhciBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIHZhciBzaXplID0gdGhpcy5fY3NpemU7CgogICAgICAvLyBJbml0aWFsIHN0ZXAgKHBlcm11dGUgYW5kIHRyYW5zZm9ybSkKICAgICAgdmFyIHdpZHRoID0gdGhpcy5fd2lkdGg7CiAgICAgIHZhciBzdGVwID0gMSA8PCB3aWR0aDsKICAgICAgdmFyIGxlbiA9IChzaXplIC8gc3RlcCkgPDwgMTsKCiAgICAgIHZhciBvdXRPZmY7CiAgICAgIHZhciB0OwogICAgICB2YXIgYml0cmV2ID0gdGhpcy5fYml0cmV2OwogICAgICBpZiAobGVuID09PSA0KSB7CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGVuID09PSA4CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm00KG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gbGVuID4+PiAyOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgLy8gRnVsbCBjYXNlCiAgICAgICAgICB2YXIgbGltaXQgPSBvdXRPZmYgKyBxdWFydGVyTGVuOwogICAgICAgICAgZm9yICh2YXIgaSA9IG91dE9mZiwgayA9IDA7IGkgPCBsaW1pdDsgaSArPSAyLCBrICs9IHN0ZXApIHsKICAgICAgICAgICAgY29uc3QgQSA9IGk7CiAgICAgICAgICAgIGNvbnN0IEIgPSBBICsgcXVhcnRlckxlbjsKICAgICAgICAgICAgY29uc3QgQyA9IEIgKyBxdWFydGVyTGVuOwogICAgICAgICAgICBjb25zdCBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgQXIgPSBvdXRbQV07CiAgICAgICAgICAgIGNvbnN0IEFpID0gb3V0W0EgKyAxXTsKICAgICAgICAgICAgY29uc3QgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIGNvbnN0IEJpID0gb3V0W0IgKyAxXTsKICAgICAgICAgICAgY29uc3QgQ3IgPSBvdXRbQ107CiAgICAgICAgICAgIGNvbnN0IENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgY29uc3QgRHIgPSBvdXRbRF07CiAgICAgICAgICAgIGNvbnN0IERpID0gb3V0W0QgKyAxXTsKCiAgICAgICAgICAgIC8vIE1pZGRsZSB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgTUFyID0gQXI7CiAgICAgICAgICAgIGNvbnN0IE1BaSA9IEFpOwoKICAgICAgICAgICAgY29uc3QgdGFibGVCciA9IHRhYmxlW2tdOwogICAgICAgICAgICBjb25zdCB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICBjb25zdCBNQnIgPSBCciAqIHRhYmxlQnIgLSBCaSAqIHRhYmxlQmk7CiAgICAgICAgICAgIGNvbnN0IE1CaSA9IEJyICogdGFibGVCaSArIEJpICogdGFibGVCcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2kgPSBpbnYgKiB0YWJsZVsyICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNQ3IgPSBDciAqIHRhYmxlQ3IgLSBDaSAqIHRhYmxlQ2k7CiAgICAgICAgICAgIGNvbnN0IE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRHIgPSB0YWJsZVszICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGkgPSBpbnYgKiB0YWJsZVszICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIGNvbnN0IE1EaSA9IERyICogdGFibGVEaSArIERpICogdGFibGVEcjsKCiAgICAgICAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgVDByID0gTUFyICsgTUNyOwogICAgICAgICAgICBjb25zdCBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIGNvbnN0IFQxciA9IE1BciAtIE1DcjsKICAgICAgICAgICAgY29uc3QgVDFpID0gTUFpIC0gTUNpOwogICAgICAgICAgICBjb25zdCBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIGNvbnN0IFQyaSA9IE1CaSArIE1EaTsKICAgICAgICAgICAgY29uc3QgVDNyID0gaW52ICogKE1CciAtIE1Ecik7CiAgICAgICAgICAgIGNvbnN0IFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKICAgICAgICAgICAgY29uc3QgRkFpID0gVDBpICsgVDJpOwoKICAgICAgICAgICAgY29uc3QgRkNyID0gVDByIC0gVDJyOwogICAgICAgICAgICBjb25zdCBGQ2kgPSBUMGkgLSBUMmk7CgogICAgICAgICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgICAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgICAgICAgIGNvbnN0IEZEciA9IFQxciAtIFQzaTsKICAgICAgICAgICAgY29uc3QgRkRpID0gVDFpICsgVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CiAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgb3V0W0MgKyAxXSA9IEZDaTsKICAgICAgICAgICAgb3V0W0RdID0gRkRyOwogICAgICAgICAgICBvdXRbRCArIDFdID0gRkRpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyByYWRpeC0yIGltcGxlbWVudGF0aW9uCiAgICAvLwogICAgLy8gTk9URTogT25seSBjYWxsZWQgZm9yIGxlbj00CiAgICBGRlQucHJvdG90eXBlLl9zaW5nbGVUcmFuc2Zvcm0yID0gZnVuY3Rpb24gX3NpbmdsZVRyYW5zZm9ybTIob3V0T2ZmLCBvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IGV2ZW5JID0gZGF0YVtvZmYgKyAxXTsKICAgICAgY29uc3Qgb2RkUiA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IG9kZEkgPSBkYXRhW29mZiArIHN0ZXAgKyAxXTsKCiAgICAgIGNvbnN0IGxlZnRSID0gZXZlblIgKyBvZGRSOwogICAgICBjb25zdCBsZWZ0SSA9IGV2ZW5JICsgb2RkSTsKICAgICAgY29uc3QgcmlnaHRSID0gZXZlblIgLSBvZGRSOwogICAgICBjb25zdCByaWdodEkgPSBldmVuSSAtIG9kZEk7CgogICAgICBvdXRbb3V0T2ZmXSA9IGxlZnRSOwogICAgICBvdXRbb3V0T2ZmICsgMV0gPSBsZWZ0STsKICAgICAgb3V0W291dE9mZiArIDJdID0gcmlnaHRSOwogICAgICBvdXRbb3V0T2ZmICsgM10gPSByaWdodEk7CiAgICB9OwoKICAgIC8vIHJhZGl4LTQKICAgIC8vCiAgICAvLyBOT1RFOiBPbmx5IGNhbGxlZCBmb3IgbGVuPTgKICAgIEZGVC5wcm90b3R5cGUuX3NpbmdsZVRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlVHJhbnNmb3JtNChvdXRPZmYsIG9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuX291dDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7CiAgICAgIGNvbnN0IGludiA9IHRoaXMuX2ludiA/IC0xIDogMTsKICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwICogMjsKICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwICogMzsKCiAgICAgIC8vIE9yaWdpbmFsIHZhbHVlcwogICAgICBjb25zdCBBciA9IGRhdGFbb2ZmXTsKICAgICAgY29uc3QgQWkgPSBkYXRhW29mZiArIDFdOwogICAgICBjb25zdCBCciA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IEJpID0gZGF0YVtvZmYgKyBzdGVwICsgMV07CiAgICAgIGNvbnN0IENyID0gZGF0YVtvZmYgKyBzdGVwMl07CiAgICAgIGNvbnN0IENpID0gZGF0YVtvZmYgKyBzdGVwMiArIDFdOwogICAgICBjb25zdCBEciA9IGRhdGFbb2ZmICsgc3RlcDNdOwogICAgICBjb25zdCBEaSA9IGRhdGFbb2ZmICsgc3RlcDMgKyAxXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDBpID0gQWkgKyBDaTsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDFpID0gQWkgLSBDaTsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDJpID0gQmkgKyBEaTsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwogICAgICBjb25zdCBUM2kgPSBpbnYgKiAoQmkgLSBEaSk7CgogICAgICAvLyBGaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgRkFyID0gVDByICsgVDJyOwogICAgICBjb25zdCBGQWkgPSBUMGkgKyBUMmk7CgogICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKICAgICAgY29uc3QgRkNpID0gVDBpIC0gVDJpOwoKICAgICAgY29uc3QgRkRyID0gVDFyIC0gVDNpOwogICAgICBjb25zdCBGRGkgPSBUMWkgKyBUM3I7CgogICAgICBvdXRbb3V0T2ZmXSA9IEZBcjsKICAgICAgb3V0W291dE9mZiArIDFdID0gRkFpOwogICAgICBvdXRbb3V0T2ZmICsgMl0gPSBGQnI7CiAgICAgIG91dFtvdXRPZmYgKyAzXSA9IEZCaTsKICAgICAgb3V0W291dE9mZiArIDRdID0gRkNyOwogICAgICBvdXRbb3V0T2ZmICsgNV0gPSBGQ2k7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICAvLyBSZWFsIGlucHV0IHJhZGl4LTQgaW1wbGVtZW50YXRpb24KICAgIEZGVC5wcm90b3R5cGUuX3JlYWxUcmFuc2Zvcm00ID0gZnVuY3Rpb24gX3JlYWxUcmFuc2Zvcm00KCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5fb3V0OwogICAgICB2YXIgc2l6ZSA9IHRoaXMuX2NzaXplOwoKICAgICAgLy8gSW5pdGlhbCBzdGVwIChwZXJtdXRlIGFuZCB0cmFuc2Zvcm0pCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoOwogICAgICB2YXIgc3RlcCA9IDEgPDwgd2lkdGg7CiAgICAgIHZhciBsZW4gPSAoc2l6ZSAvIHN0ZXApIDw8IDE7CgogICAgICB2YXIgb3V0T2ZmOwogICAgICB2YXIgdDsKICAgICAgdmFyIGJpdHJldiA9IHRoaXMuX2JpdHJldjsKICAgICAgaWYgKGxlbiA9PT0gNCkgewogICAgICAgIGZvciAob3V0T2ZmID0gMCwgdCA9IDA7IG91dE9mZiA8IHNpemU7IG91dE9mZiArPSBsZW4sIHQrKykgewogICAgICAgICAgY29uc3Qgb2ZmID0gYml0cmV2W3RdOwogICAgICAgICAgdGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLCBvZmYgPj4+IDEsIHN0ZXAgPj4+IDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZW4gPT09IDgKICAgICAgICBmb3IgKG91dE9mZiA9IDAsIHQgPSAwOyBvdXRPZmYgPCBzaXplOyBvdXRPZmYgKz0gbGVuLCB0KyspIHsKICAgICAgICAgIGNvbnN0IG9mZiA9IGJpdHJldlt0XTsKICAgICAgICAgIHRoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG91dE9mZiwgb2ZmID4+PiAxLCBzdGVwID4+PiAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBoYWxmTGVuID0gbGVuID4+PiAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gaGFsZkxlbiA+Pj4gMTsKICAgICAgICB2YXIgaHF1YXJ0ZXJMZW4gPSBxdWFydGVyTGVuID4+PiAxOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDw9IGhxdWFydGVyTGVuOyBpICs9IDIsIGsgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgQSA9IG91dE9mZiArIGk7CiAgICAgICAgICAgIHZhciBCID0gQSArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBDID0gQiArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgdmFyIEFyID0gb3V0W0FdOwogICAgICAgICAgICB2YXIgQWkgPSBvdXRbQSArIDFdOwogICAgICAgICAgICB2YXIgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIHZhciBCaSA9IG91dFtCICsgMV07CiAgICAgICAgICAgIHZhciBDciA9IG91dFtDXTsKICAgICAgICAgICAgdmFyIENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgdmFyIERyID0gb3V0W0RdOwogICAgICAgICAgICB2YXIgRGkgPSBvdXRbRCArIDFdOwoKICAgICAgICAgICAgLy8gTWlkZGxlIHZhbHVlcwogICAgICAgICAgICB2YXIgTUFyID0gQXI7CiAgICAgICAgICAgIHZhciBNQWkgPSBBaTsKCiAgICAgICAgICAgIHZhciB0YWJsZUJyID0gdGFibGVba107CiAgICAgICAgICAgIHZhciB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICB2YXIgTUJyID0gQnIgKiB0YWJsZUJyIC0gQmkgKiB0YWJsZUJpOwogICAgICAgICAgICB2YXIgTUJpID0gQnIgKiB0YWJsZUJpICsgQmkgKiB0YWJsZUJyOwoKICAgICAgICAgICAgdmFyIHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIHZhciB0YWJsZUNpID0gaW52ICogdGFibGVbMiAqIGsgKyAxXTsKICAgICAgICAgICAgdmFyIE1DciA9IENyICogdGFibGVDciAtIENpICogdGFibGVDaTsKICAgICAgICAgICAgdmFyIE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIHZhciB0YWJsZURyID0gdGFibGVbMyAqIGtdOwogICAgICAgICAgICB2YXIgdGFibGVEaSA9IGludiAqIHRhYmxlWzMgKiBrICsgMV07CiAgICAgICAgICAgIHZhciBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIHZhciBNRGkgPSBEciAqIHRhYmxlRGkgKyBEaSAqIHRhYmxlRHI7CgogICAgICAgICAgICAvLyBQcmUtRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBUMHIgPSBNQXIgKyBNQ3I7CiAgICAgICAgICAgIHZhciBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIHZhciBUMXIgPSBNQXIgLSBNQ3I7CiAgICAgICAgICAgIHZhciBUMWkgPSBNQWkgLSBNQ2k7CiAgICAgICAgICAgIHZhciBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIHZhciBUMmkgPSBNQmkgKyBNRGk7CiAgICAgICAgICAgIHZhciBUM3IgPSBpbnYgKiAoTUJyIC0gTURyKTsKICAgICAgICAgICAgdmFyIFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBGQXIgPSBUMHIgKyBUMnI7CiAgICAgICAgICAgIHZhciBGQWkgPSBUMGkgKyBUMmk7CgogICAgICAgICAgICB2YXIgRkJyID0gVDFyICsgVDNpOwogICAgICAgICAgICB2YXIgRkJpID0gVDFpIC0gVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CgogICAgICAgICAgICAvLyBPdXRwdXQgZmluYWwgbWlkZGxlIHBvaW50CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyIEZDciA9IFQwciAtIFQycjsKICAgICAgICAgICAgICB2YXIgRkNpID0gVDBpIC0gVDJpOwogICAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgICBvdXRbQyArIDFdID0gRkNpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIG91cnNlbHZlcwogICAgICAgICAgICBpZiAoaSA9PT0gaHF1YXJ0ZXJMZW4pCiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBJbiB0aGUgZmxpcHBlZCBjYXNlOgogICAgICAgICAgICAvLyBNQWkgPSAtTUFpCiAgICAgICAgICAgIC8vIE1Ccj0tTUJpLCBNQmk9LU1CcgogICAgICAgICAgICAvLyBNQ3I9LU1DcgogICAgICAgICAgICAvLyBNRHI9TURpLCBNRGk9TURyCiAgICAgICAgICAgIHZhciBTVDByID0gVDFyOwogICAgICAgICAgICB2YXIgU1QwaSA9IC1UMWk7CiAgICAgICAgICAgIHZhciBTVDFyID0gVDByOwogICAgICAgICAgICB2YXIgU1QxaSA9IC1UMGk7CiAgICAgICAgICAgIHZhciBTVDJyID0gLWludiAqIFQzaTsKICAgICAgICAgICAgdmFyIFNUMmkgPSAtaW52ICogVDNyOwogICAgICAgICAgICB2YXIgU1QzciA9IC1pbnYgKiBUMmk7CiAgICAgICAgICAgIHZhciBTVDNpID0gLWludiAqIFQycjsKCiAgICAgICAgICAgIHZhciBTRkFyID0gU1QwciArIFNUMnI7CiAgICAgICAgICAgIHZhciBTRkFpID0gU1QwaSArIFNUMmk7CgogICAgICAgICAgICB2YXIgU0ZCciA9IFNUMXIgKyBTVDNpOwogICAgICAgICAgICB2YXIgU0ZCaSA9IFNUMWkgLSBTVDNyOwoKICAgICAgICAgICAgdmFyIFNBID0gb3V0T2ZmICsgcXVhcnRlckxlbiAtIGk7CiAgICAgICAgICAgIHZhciBTQiA9IG91dE9mZiArIGhhbGZMZW4gLSBpOwoKICAgICAgICAgICAgb3V0W1NBXSA9IFNGQXI7CiAgICAgICAgICAgIG91dFtTQSArIDFdID0gU0ZBaTsKICAgICAgICAgICAgb3V0W1NCXSA9IFNGQnI7CiAgICAgICAgICAgIG91dFtTQiArIDFdID0gU0ZCaTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gcmFkaXgtMiBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49NAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTIgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IG9kZFIgPSBkYXRhW29mZiArIHN0ZXBdOwoKICAgICAgY29uc3QgbGVmdFIgPSBldmVuUiArIG9kZFI7CiAgICAgIGNvbnN0IHJpZ2h0UiA9IGV2ZW5SIC0gb2RkUjsKCiAgICAgIG91dFtvdXRPZmZdID0gbGVmdFI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IHJpZ2h0UjsKICAgICAgb3V0W291dE9mZiArIDNdID0gMDsKICAgIH07CgogICAgLy8gcmFkaXgtNAogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49OAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTQob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwogICAgICBjb25zdCBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcCAqIDI7CiAgICAgIGNvbnN0IHN0ZXAzID0gc3RlcCAqIDM7CgogICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgQXIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IEJyID0gZGF0YVtvZmYgKyBzdGVwXTsKICAgICAgY29uc3QgQ3IgPSBkYXRhW29mZiArIHN0ZXAyXTsKICAgICAgY29uc3QgRHIgPSBkYXRhW29mZiArIHN0ZXAzXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwoKICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKCiAgICAgIGNvbnN0IEZCciA9IFQxcjsKICAgICAgY29uc3QgRkJpID0gLVQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKCiAgICAgIGNvbnN0IEZEciA9IFQxcjsKICAgICAgY29uc3QgRkRpID0gVDNyOwoKICAgICAgb3V0W291dE9mZl0gPSBGQXI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IEZCcjsKICAgICAgb3V0W291dE9mZiArIDNdID0gRkJpOwogICAgICBvdXRbb3V0T2ZmICsgNF0gPSBGQ3I7CiAgICAgIG91dFtvdXRPZmYgKyA1XSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICB2YXIgRkZUJDEgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmZ0KTsKCiAgICBjb25zdCBCVUZGRVJFRF9CTE9DS19TSVpFID0gMjA0ODsKICAgIGZ1bmN0aW9uIGdlbkhhbm5XaW5kb3cobGVuZ3RoKSB7CiAgICAgICAgbGV0IHdpbiA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdpbltpXSA9IDAuNSAqICgxIC0gTWF0aC5jb3MoMiAqIE1hdGguUEkgKiBpIC8gbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3aW47CiAgICB9CiAgICBjbGFzcyBQaGFzZVZvY29kZXJQcm9jZXNzb3IgZXh0ZW5kcyBPTEFQcm9jZXNzb3IgewogICAgICAgIGZmdFNpemU7CiAgICAgICAgdGltZUN1cnNvcjsKICAgICAgICBoYW5uV2luZG93OwogICAgICAgIGZmdDsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlcjsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ7CiAgICAgICAgdGltZUNvbXBsZXhCdWZmZXI7CiAgICAgICAgbWFnbml0dWRlczsKICAgICAgICBwZWFrSW5kZXhlczsKICAgICAgICBuYlBlYWtzOwogICAgICAgIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaXRjaEZhY3RvcicsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLjAKICAgICAgICAgICAgICAgIH1dOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMucHJvY2Vzc29yT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogQlVGRkVSRURfQkxPQ0tfU0laRSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMuZmZ0U2l6ZSA9IHRoaXMuYmxvY2tTaXplOwogICAgICAgICAgICB0aGlzLnRpbWVDdXJzb3IgPSAwOwogICAgICAgICAgICB0aGlzLmhhbm5XaW5kb3cgPSBnZW5IYW5uV2luZG93KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgLy8gcHJlcGFyZSBGRlQgYW5kIHByZS1hbGxvY2F0ZSBidWZmZXJzCiAgICAgICAgICAgIHRoaXMuZmZ0ID0gbmV3IEZGVCQxKHRoaXMuZmZ0U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy50aW1lQ29tcGxleEJ1ZmZlciA9IHRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICAgICAgICB0aGlzLm1hZ25pdHVkZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZSAvIDIgKyAxKTsKICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlcyA9IG5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLm5iUGVha3MgPSAwOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzT0xBKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIGNvbnN0IHBpdGNoRmFjdG9yID0gcGFyYW1ldGVycy5waXRjaEZhY3RvcltwYXJhbWV0ZXJzLnBpdGNoRmFjdG9yLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dHNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhhbm5XaW5kb3coaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlciwgaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQZWFrcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRQZWFrcyhwaXRjaEZhY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCBvdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIYW5uV2luZG93KG91dHB1dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lQ3Vyc29yICs9IHRoaXMuaG9wU2l6ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGFwcGx5SGFubldpbmRvdyhpbnB1dCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGlucHV0W2ldICo9IHRoaXMuaGFubldpbmRvd1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb21wdXRlTWFnbml0dWRlcygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdGhpcy5tYWduaXR1ZGVzLmxlbmd0aDsgaSsrLCBqICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2pdOwogICAgICAgICAgICAgICAgY29uc3QgaW1hZyA9IHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbaiArIDFdOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGVzW2ldID0gcmVhbCAqKiAyICsgaW1hZyAqKiAyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmRQZWFrcygpIHsKICAgICAgICAgICAgdGhpcy5uYlBlYWtzID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGVuZCA9IHRoaXMubWFnbml0dWRlcy5sZW5ndGggLSAyOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pdHVkZXNbaSAtIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSAtIDJdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDJdID49IG1hZykgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3MrK10gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0UGVha3MocGl0Y2hGYWN0b3IpIHsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iUGVha3M7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGVha0luZGV4ID0gdGhpcy5wZWFrSW5kZXhlc1tpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlYWtJbmRleFNoaWZ0ZWQgPSBNYXRoLnJvdW5kKHBlYWtJbmRleCAqIHBpdGNoRmFjdG9yKTsKICAgICAgICAgICAgICAgIGlmIChwZWFrSW5kZXhTaGlmdGVkID4gdGhpcy5tYWduaXR1ZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoaSA+IDApID8gcGVha0luZGV4IC0gTWF0aC5mbG9vcigocGVha0luZGV4IC0gdGhpcy5wZWFrSW5kZXhlc1tpIC0gMV0pIC8gMikgOiAwOwogICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKGkgPCB0aGlzLm5iUGVha3MgLSAxKSA/IHBlYWtJbmRleCArIE1hdGguY2VpbCgodGhpcy5wZWFrSW5kZXhlc1tpICsgMV0gLSBwZWFrSW5kZXgpIC8gMikgOiB0aGlzLmZmdFNpemU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJbmRleCAtIHBlYWtJbmRleDsgaiA8IGVuZEluZGV4IC0gcGVha0luZGV4OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5JbmRleCA9IHBlYWtJbmRleCArIGo7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluSW5kZXhTaGlmdGVkID0gcGVha0luZGV4U2hpZnRlZCArIGo7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbkluZGV4U2hpZnRlZCA+PSB0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWVnYURlbHRhID0gMiAqIE1hdGguUEkgKiAoYmluSW5kZXhTaGlmdGVkIC0gYmluSW5kZXgpIC8gdGhpcy5mZnRTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoYXNlU2hpZnRSZWFsID0gTWF0aC5jb3Mob21lZ2FEZWx0YSAqIHRoaXMudGltZUN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VTaGlmdEltYWcgPSBNYXRoLnNpbihvbWVnYURlbHRhICogdGhpcy50aW1lQ3Vyc29yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFJlYWwgPSBiaW5JbmRleCAqIDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbWFnID0gaW5kZXhSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2luZGV4UmVhbF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbWFnID0gdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltpbmRleEltYWddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZFJlYWwgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0UmVhbCAtIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRJbWFnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZEltYWcgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0SW1hZyArIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRSZWFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZFJlYWwgPSBiaW5JbmRleFNoaWZ0ZWQgKiAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZEltYWcgPSBpbmRleFNoaWZ0ZWRSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtpbmRleFNoaWZ0ZWRSZWFsXSArPSB2YWx1ZVNoaWZ0ZWRSZWFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2luZGV4U2hpZnRlZEltYWddICs9IHZhbHVlU2hpZnRlZEltYWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBAdHMtaWdub3JlCiAgICByZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2RlciIsIFBoYXNlVm9jb2RlclByb2Nlc3Nvcik7CiAgICBjb25zb2xlLmxvZygiUGhhc2VWb2NvZGVyUHJvY2Vzc29yIHJlZ2lzdGVyZWQiKTsKCiAgICBleHBvcnRzLlBoYXNlVm9jb2RlclByb2Nlc3NvciA9IFBoYXNlVm9jb2RlclByb2Nlc3NvcjsKCiAgICByZXR1cm4gZXhwb3J0czsKCn0pKHt9KTsK";let zA=class{constructor(e){L(this,"maxSize");L(this,"cache");this.maxSize=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}has(e){return this.cache.has(e)}};const jA=100,$t=class $t{static setCacheExpirationTime(e){this.cacheExpirationTime=e}static async openCache(){try{return await caches.open("audio-cache")}catch(e){throw console.error("Failed to open cache:",e),e}}static async getBufferFromCache(e,n){try{const r=await n.match(e);return r&&r.ok?await r.arrayBuffer():null}catch(r){return console.error("Failed to get data from cache:",r),null}}static async fetchAndCacheBuffer(e,n,r,i){try{const o=new Headers;r&&o.append("If-None-Match",r),i&&o.append("If-Modified-Since",i);const s=await fetch(e,{headers:o}),a=s.clone();if(s.status===200){const c=s.headers.get("ETag")||void 0,l=s.headers.get("Last-Modified")||void 0,u={url:e,etag:c,lastModified:l,timestamp:Date.now()};await n.put(e,a),await n.put(e+":meta",new Response(JSON.stringify(u),{headers:{"Content-Type":"application/json"}}))}else if(s.status===304){const c=await n.match(e);if(c)return await c.arrayBuffer()}return await s.arrayBuffer()}catch(o){throw console.error("Failed to fetch and cache data:",o),o}}static async decodeAudioData(e,n){try{return await e.decodeAudioData(n)}catch(r){throw console.error("Failed to decode audio data:",r),r}}static async getMetadataFromCache(e,n){try{const r=await n.match(e+":meta");return r&&r.ok?await r.json():null}catch(r){return console.error("Failed to get metadata from cache:",r),null}}async getAudioBuffer(e,n){if($t.decodedBuffers.has(n))return $t.decodedBuffers.get(n);if(n.startsWith("data:")){const a=n.split(",")[1],c=Uint8Array.from(atob(a),u=>u.charCodeAt(0)).buffer,l=await $t.decodeAudioData(e,c);return $t.decodedBuffers.set(n,l),l}const r=await $t.openCache();let i=$t.pendingRequests.get(n);if(i)return i;const o=await $t.getMetadataFromCache(n,r);let s=!o;if(o&&(o.etag||o.lastModified?s=!1:o.timestamp?s=Date.now()-o.timestamp>$t.cacheExpirationTime:s=!0),s)return i=$t.fetchAndCacheBuffer(n,r,o==null?void 0:o.etag,o==null?void 0:o.lastModified).then(a=>$t.decodeAudioData(e,a)).then(a=>($t.decodedBuffers.set(n,a),a)).finally(()=>{$t.pendingRequests.delete(n)}),$t.pendingRequests.set(n,i),i;{const a=await $t.getBufferFromCache(n,r);if(a){const c=await $t.decodeAudioData(e,a);return $t.decodedBuffers.set(n,c),c}}throw new Error("Failed to retrieve audio buffer")}clearMemoryCache(){$t.decodedBuffers=new zA(jA),$t.pendingRequests.clear()}};L($t,"pendingRequests",new Map),L($t,"decodedBuffers",new zA(jA)),L($t,"cacheExpirationTime",24*60*60*1e3);let vC=$t;class HA{constructor(e=[]){L(this,"_position",[0,0,0]);L(this,"loopCount",0);L(this,"playIndex",0);this.sounds=e}preplayRandom(){if(this.sounds.length===0)return;const e=this.randomSound().preplay();return e.length>0?e[0]:void 0}playRandom(){const e=this.preplayRandom();return e&&e.play(),e}preplayOrdered(e=!0){if(this.sounds.length===0)return;const n=this.sounds[this.playIndex].preplay();if(n.length!==0)return this.playIndex=(this.playIndex+1)%this.sounds.length,!e&&this.playIndex===0&&(this.playIndex=this.sounds.length),n[0]}playOrdered(e=!0){const n=this.preplayOrdered(e);return n&&n.play(),n}get duration(){return this.sounds.map(e=>e.duration).reduce((e,n)=>Math.max(e,n),0)}seek(e){this.sounds.forEach(n=>n.seek&&n.seek(e))}addSound(e){this.sounds.push(e)}randomSound(){if(this.sounds.length===0)throw new Error("Cannot get a random sound from an empty group");const e=Math.floor(Math.random()*this.sounds.length);return this.sounds[e]}preplay(){return this.sounds.map(e=>e.preplay()).flat()}play(){const e=[];return this.preplay().forEach(n=>{n.play(),e.push(n)}),e}get isPlaying(){return this.sounds.some(e=>e.isPlaying)}stop(){this.sounds.forEach(e=>e.stop())}pause(){this.sounds.forEach(e=>e.pause())}loop(e){return e===void 0?this.loopCount:(this.loopCount=e,this.sounds.forEach(n=>n.loop(e)),this.loopCount)}addFilter(e){this.sounds.forEach(n=>n.addFilter(e))}removeFilter(e){this.sounds.forEach(n=>n.removeFilter(e))}set position(e){this._position=e,this.sounds.forEach(n=>n.position=this._position)}get position(){return this._position}get volume(){return this.sounds.map(e=>e.volume).reduce((e,n)=>e+n,0)/this.sounds.length}set volume(e){this.sounds.forEach(n=>n.volume=e)}get playbackRate(){return this.sounds.length===0?1:this.sounds[0].playbackRate}set playbackRate(e){this.sounds.forEach(n=>n.playbackRate=e)}}let uu=class{constructor(){L(this,"_filters",[])}addFilter(e){this._filters.push(e)}removeFilter(e){this._filters=this._filters.filter(n=>n.frequency.value!==e.frequency.value&&n.type!==e.type&&n.Q.value!==e.Q.value&&n.gain.value!==e.gain.value)}applyFilters(e){return this._filters.reduce((n,r)=>(n.connect(r),r),e),this._filters.length>0?this._filters[this._filters.length-1]:e}get filters(){return this._filters}addFilters(e){e.forEach(n=>this.addFilter(n))}removeFilters(e){e.forEach(n=>this.removeFilter(n))}},v7=class extends uu{constructor(n,r,i,o=0){super();L(this,"context");L(this,"source");L(this,"gainNode");L(this,"panner");this.source=n,this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner).connect(this.gainNode),this.refreshFilters()}get duration(){return 0}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return[this]}get isPlaying(){return!!this.source}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.stop())}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!1)}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!0)}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,o]=n;this.panner.positionX.value=r,this.panner.positionY.value=i,this.panner.positionZ.value=o}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.source||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.source;this.source.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}get playbackRate(){return 1}set playbackRate(n){}};class C7 extends uu{constructor(n){super();L(this,"context");L(this,"_position",[0,0,0]);L(this,"loopCount",0);L(this,"prevVolume",1);L(this,"microphoneGainNode");L(this,"streamPlayback");L(this,"stream");L(this,"streamSource");this.context=n,this.microphoneGainNode=this.context.createGain()}play(){return this.stream||navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{this.stream=n,this.streamSource=this.context.createMediaStreamSource(this.stream),this.streamPlayback=new v7(this.streamSource,this.microphoneGainNode,this.context),this.streamPlayback.play()}).catch(n=>{console.error("Error initializing microphone stream:",n)}),this.streamPlayback?[this.streamPlayback]:[]}get duration(){return 0}seek(n){}get isPlaying(){return!!this.streamPlayback}stop(){this.streamPlayback&&(this.streamPlayback.stop(),this.streamPlayback=void 0)}pause(){this.streamPlayback&&this.streamPlayback.pause()}resume(){this.streamPlayback&&this.streamPlayback.resume()}addFilter(n){this.streamPlayback&&this.streamPlayback.addFilter(n)}removeFilter(n){this.streamPlayback&&this.streamPlayback.removeFilter(n)}get volume(){return this.streamPlayback?this.streamPlayback.volume:0}set volume(n){this.streamPlayback&&(this.streamPlayback.volume=n)}get position(){return[0,0,0]}set position(n){}loop(n){return 0}get playbackRate(){return 1}set playbackRate(n){}}function UR(t){class e extends t{constructor(){super(...arguments);L(this,"playbacks",[]);L(this,"_position",[0,0,0]);L(this,"_stereoPan",0);L(this,"_threeDOptions",{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",panningModel:"HRTF",refDistance:1,rolloffFactor:1,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0});L(this,"_volume",1)}play(){const i=this.preplay();return i.forEach(o=>o.play()),i}stop(){this.playbacks.forEach(i=>i.stop()),this.playbacks=[]}pause(){this.playbacks.forEach(i=>i.pause())}addFilter(i){super.addFilter(i),this.playbacks.forEach(o=>o.addFilter(i))}removeFilter(i){super.removeFilter(i),this.playbacks.forEach(o=>o.removeFilter(i))}get isPlaying(){return this.playbacks.some(i=>i.isPlaying)}get position(){return[this._threeDOptions.positionX,this._threeDOptions.positionY,this._threeDOptions.positionZ]}set position(i){this._threeDOptions.positionX=i[0],this._threeDOptions.positionY=i[1],this._threeDOptions.positionZ=i[2],this.playbacks.forEach(o=>o.position=i)}get threeDOptions(){return this._threeDOptions}set threeDOptions(i){this._threeDOptions={...this._threeDOptions,...i},this.playbacks.forEach(o=>o.threeDOptions=this._threeDOptions)}get stereoPan(){return this._stereoPan}set stereoPan(i){this._stereoPan=i,this.playbacks.forEach(o=>o.stereoPan=i)}get volume(){return this._volume}set volume(i){this._volume=i,this.playbacks.forEach(o=>o.volume=i)}}return e}function VR(t){class e extends t{constructor(){super(...arguments);L(this,"panner");L(this,"_panType","stereo")}get panType(){return this._panType}setPanType(i,o){this._panType===i&&this.panner||(this.panner&&this.panner.disconnect(),this._panType=i,i==="stereo"?this.panner=o.createStereoPanner():this.panner=o.createPanner())}setPannerNode(i){this.panner=i}get stereoPan(){return this.panType==="stereo"?this.panner.pan.value:null}set stereoPan(i){if(this.panType!=="stereo")throw new Error("Stereo panning is not available when using HRTF.");if(!this.panner)throw new Error("Cannot set stereo pan of a sound that has been cleaned up");i=ZA(i,-1,1),this.panner.pan.setValueAtTime(ZA(i,-1,1),this.panner.context.currentTime)}get threeDOptions(){if(!this.panner)throw new Error("Cannot get 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get 3D options of a sound that is not using HRTF");const i=this.panner;return{coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,channelCount:this.panner.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,panningModel:i.panningModel,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,positionX:i.positionX.value,positionY:i.positionY.value,positionZ:i.positionZ.value,orientationX:i.orientationX.value,orientationY:i.orientationY.value,orientationZ:i.orientationZ.value}}set threeDOptions(i){if(!this.panner)throw new Error("Cannot set 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot set 3D options of a sound that is not using HRTF");const o=this.panner;o.coneInnerAngle=i.coneInnerAngle!==void 0?i.coneInnerAngle:o.coneInnerAngle,o.coneOuterAngle=i.coneOuterAngle!==void 0?i.coneOuterAngle:o.coneOuterAngle,o.coneOuterGain=i.coneOuterGain!==void 0?i.coneOuterGain:o.coneOuterGain,o.distanceModel=i.distanceModel||o.distanceModel,o.maxDistance=i.maxDistance!==void 0?i.maxDistance:o.maxDistance,o.channelCount=i.channelCount!==void 0?i.channelCount:o.channelCount,o.channelCountMode=i.channelCountMode||o.channelCountMode,o.channelInterpretation=i.channelInterpretation||o.channelInterpretation,o.panningModel=i.panningModel||o.panningModel,o.refDistance=i.refDistance!==void 0?i.refDistance:o.refDistance,o.rolloffFactor=i.rolloffFactor!==void 0?i.rolloffFactor:o.rolloffFactor,o.positionX.value=i.positionX!==void 0?i.positionX:o.positionX.value,o.positionY.value=i.positionY!==void 0?i.positionY:o.positionY.value,o.positionZ.value=i.positionZ!==void 0?i.positionZ:o.positionZ.value,o.orientationX.value=i.orientationX!==void 0?i.orientationX:o.orientationX.value,o.orientationY.value=i.orientationY!==void 0?i.orientationY:o.orientationY.value,o.orientationZ.value=i.orientationZ!==void 0?i.orientationZ:o.orientationZ.value}set position(i){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot move a sound that is not using HRTF");const[o,s,a]=i,c=this.panner;c.positionX.value=o,c.positionY.value=s,c.positionZ.value=a}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get position of a sound that is not using HRTF");const i=this.panner;return[i.positionX.value,i.positionY.value,i.positionZ.value]}}return e}function ZA(t,e,n){return Math.min(Math.max(t,e),n)}function GR(t){class e extends t{constructor(){super(...arguments);L(this,"gainNode")}setGainNode(i){this.gainNode=i}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(i){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=i}}return e}class WR extends VR(GR(uu)){constructor(){super(...arguments);L(this,"source");L(this,"_playing",!1);L(this,"origin")}get isPlaying(){return this.source?this._playing:!1}}class H1 extends WR{constructor(n,r,i){super();L(this,"context");L(this,"loopCount",0);L(this,"currentLoop",0);L(this,"buffer");L(this,"_offset",0);L(this,"_startTime",0);L(this,"_state",0);L(this,"_playbackRate",1);L(this,"loopEnded",()=>{!this.source||this._state!==1||(this.currentLoop++,this.loopCount!=="infinite"&&this.currentLoop>this.loopCount?this.stop():(this.seek(0),this._state=1,"start"in this.source&&this.source.start?this.source.start(0,this._offset):"mediaElement"in this.source&&this.source.mediaElement&&this.source.mediaElement.play()))});this.origin=n,this.context=n.context,this.loopCount=n.loopCount,this.setPanType(n.panType,n.context),this.source=r,"buffer"in r&&r.buffer&&(this.buffer=r.buffer),this.setupSourceNode(r),this.source.connect(this.panner),this.setGainNode(i),this.panner.connect(this.gainNode),this.refreshFilters()}setupSourceNode(n){if("mediaElement"in n&&n.mediaElement)n.mediaElement.onended=this.loopEnded;else if("onended"in n)n.onended=this.loopEnded;else throw new Error("Unsupported source type")}get isPlaying(){return this._state===1}get duration(){if(!this.source)throw new Error("Cannot get duration of a sound that has been cleaned up");return"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.duration:this.buffer?this.buffer.duration||NaN:NaN}get playbackRate(){return this._playbackRate}set playbackRate(n){if(n<=0)throw new Error("Playback rate must be greater than 0");if(this._state===1){const r=(this.context.currentTime-this._startTime)*this._playbackRate;this._offset+=r,this._startTime=this.context.currentTime}this._playbackRate=n,this.source&&("playbackRate"in this.source&&(this.source.playbackRate.value=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.playbackRate=n))}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return this._state===1?[this]:(this._state===2?"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.play():(this.recreateSource(),"start"in this.source&&this.source.start&&this.source.start(0,this._offset)):"mediaElement"in this.source&&this.source.mediaElement?(this.source.mediaElement.currentTime=this._offset,this.source.mediaElement.play()):"start"in this.source&&this.source.start&&(this.recreateSource(),this.source.start(0,this._offset)),this._startTime=this.context.currentTime,this._state=1,[this])}pause(){if(!this.source||this._state!==1)return;const n=(this.context.currentTime-this._startTime)*this._playbackRate;this._offset+=n,"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.pause():this.recreateSource(),this._state=2}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this._state===3||this._state===0||("stop"in this.source&&this._state===1&&this.source.stop(),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.pause(),this.source.mediaElement.currentTime=0),this._offset=0,this._startTime=0,this._state=3)}seek(n){if(!this.source||!this.gainNode||!this.panner)throw new Error("Cannot seek a sound that has been cleaned up");if(!isFinite(n)||n<0)throw new Error("Invalid time value for seek");const r=this._state===1;r&&this.pause(),this._offset=n,"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.currentTime=n:this.recreateSource(),r&&this.play()}get currentTime(){if(this._state===1){const n=(this.context.currentTime-this._startTime)*this._playbackRate;return this._offset+n}else return this._offset}recreateSource(){if(!this.buffer||!this.panner||!this.context||!this.gainNode)throw new Error("Cannot recreate source of a sound that has been cleaned up");this.source&&this.source.disconnect(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.panner),this.source.onended=this.loopEnded,this.playbackRate=this._playbackRate,this.refreshFilters()}set sourceLoop(n){if(!this.source)throw new Error("Cannot set loop on a sound that has been cleaned up");"loop"in this.source&&(this.source.loop=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.loop=n)}cleanup(){this.source&&(this.source.disconnect(),this.source=void 0),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=void 0),this._filters.forEach(n=>{n&&n.disconnect()}),this._filters=[]}loop(n){if(!this.source)throw new Error("Cannot loop a sound that has been cleaned up");if(n!==void 0&&(this.loopCount=n==="infinite"?"infinite":Math.max(0,n),this.currentLoop=0),"mediaElement"in this.source&&this.source.mediaElement){const r=this.source.mediaElement;r.loop=this.loopCount==="infinite"}else if("loop"in this.source)this.source.loop=this.loopCount==="infinite",this.source.buffer&&(this.source.loopEnd=this.source.buffer.duration,this.source.loopStart=0);else throw new Error("Unsupported source type");return this.loopCount}addFilter(n){const r=this.context.createBiquadFilter();r.type=n.type,r.frequency.value=n.frequency.value,r.Q.value=n.Q.value,r.gain.value=n.gain.value,this._filters.push(r),this.refreshFilters()}removeFilter(n){const r=this._filters.indexOf(n);r!==-1&&this._filters.splice(r,1)[0].disconnect(),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}clone(n={}){if(!this.source||!this.gainNode||!this.context)throw new Error("Cannot clone a sound that has been cleaned up");const r=n.panType||this.panType,i=this.context.createGain();let o;if("buffer"in this.source&&this.source.buffer)o=this.context.createBufferSource(),o.buffer=this.source.buffer;else if("mediaElement"in this.source&&this.source.mediaElement)o=this.context.createMediaElementSource(this.source.mediaElement);else throw new Error("Unsupported source type");const s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=new H1(this.origin,o,i);return a.loopCount=s,a.currentLoop=this.currentLoop,a.setPanType(r,this.context),a.volume=this.volume,a.playbackRate=this._playbackRate,a._offset=this._offset,a._state=this._state,this._filters.forEach(c=>{const l=this.context.createBiquadFilter();l.type=c.type,l.frequency.value=c.frequency.value,l.Q.value=c.Q.value,l.gain.value=c.gain.value,a.addFilter(l)}),this._state===1&&a.play(),a}}let oh=class zR extends UR(uu){constructor(n,r,i,o,s=Jd.Buffer,a="HRTF"){super();L(this,"buffer");L(this,"context");L(this,"loopCount",0);L(this,"_playbackRate",1);this.url=n,this.globalGainNode=o,this.soundType=s,this.panType=a,this.buffer=r,this.context=i}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan,o=n.threeDOptions||this.threeDOptions,s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=n.playbackRate||this.playbackRate,c=n.volume!==void 0?n.volume:this.volume,l=n.position!==void 0?n.position:this.position,u=n.filters&&n.filters.length?n.filters:this._filters,d=new zR(this.url,this.buffer,this.context,this.globalGainNode,this.soundType,r);return d.loop(s),d.playbackRate=a,d.volume=c,r==="HRTF"?(d.threeDOptions=o,d.position=l):d.stereoPan=i,d.addFilters(u),d}preplay(){let n;if(this.buffer)n=this.context.createBufferSource(),n.buffer=this.buffer;else{const o=new Audio;o.crossOrigin="anonymous",o.src=this.url,o.preload="auto",n=this.context.createMediaElementSource(o)}const r=this.context.createGain();r.connect(this.globalGainNode);const i=new H1(this,n,r);return i.setGainNode(r),i.volume=this.volume,i.playbackRate=this.playbackRate,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}seek(n){this.playbacks.forEach(r=>r.seek(n))}get duration(){var n;return this.playbacks.length>0?this.playbacks[0].duration:((n=this.buffer)==null?void 0:n.duration)||NaN}loop(n){return n===void 0?this.loopCount:(this.loopCount=n,this.playbacks.forEach(r=>r.loop(n)),this.loopCount)}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.playbacks.forEach(r=>r.playbackRate=n)}};function y7(t){class e extends WR{constructor(){super(...arguments);L(this,"_oscillatorOptions",{})}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(i){this._oscillatorOptions=i,this.source&&this.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type))}play(){if(!this.source)throw new Error("No source node found");return this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type),this.source.start(),this._playing=!0,[this]}stop(){this.source&&this.source.stop&&(this.source.stop(),this._playing=!1)}pause(){this.stop()}get frequency(){return this.source.frequency.value}set frequency(i){this.source.frequency.value=i,this.oscillatorOptions.frequency=i}get detune(){return this.source.detune.value}set detune(i){this.source.detune.value=i,this.oscillatorOptions.detune=i}get type(){return this.source.type}set type(i){this.source.type=i,this.oscillatorOptions.type=i}}return e}class x7 extends y7(VR(GR(uu))){constructor(n,r,i){super();L(this,"context");this.origin=n,this.source=r,this.context=n.context,this.setPanType(n.panType,n.context),this.source.connect(this.panner),this.setGainNode(i),this.panner.connect(this.gainNode),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}}class Z1 extends UR(uu){constructor(n,r,i=Jd.Oscillator,o="HRTF",s={}){super();L(this,"_oscillatorOptions");L(this,"playbacks",[]);this.context=n,this.globalGainNode=r,this.soundType=i,this.panType=o,this.context=n,this._oscillatorOptions=s}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan??0,o=n.threeDOptions||this.threeDOptions,s=n.volume!==void 0?n.volume:this.volume,a=n.position&&n.position.length?n.position:this.position,c=n.filters&&n.filters.length?n.filters:this._filters,l=n.oscillatorOptions||this._oscillatorOptions,u=new Z1(this.context,this.globalGainNode,this.soundType,r,l);return u._volume=s,u._position=a,u._stereoPan=i,u._threeDOptions=o,u.addFilters(c),u}preplay(){const n=this.context.createOscillator();this.oscillatorOptions.detune&&(n.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(n.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(n.type=this.oscillatorOptions.type);const r=this.context.createGain();r.connect(this.globalGainNode);const i=new x7(this,n,r);return i.volume=this.volume,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(n){this._oscillatorOptions=n,this.playbacks.forEach(r=>{r.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(r.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(r.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(r.source.type=this.oscillatorOptions.type))})}get frequency(){return this.oscillatorOptions.frequency||440}set frequency(n){this._oscillatorOptions.frequency=n,this.playbacks.forEach(r=>r.frequency=n)}get detune(){return this.oscillatorOptions.detune}set detune(n){this._oscillatorOptions.detune=n,this.playbacks.forEach(r=>r.detune=n)}get type(){return this.oscillatorOptions.type||"sine"}set type(n){this._oscillatorOptions.type=n,this.playbacks.forEach(r=>r.type=n)}}var Jd=(t=>(t.HTML="HTML",t.Streaming="Streaming",t.Buffer="Buffer",t.Oscillator="oscillator",t))(Jd||{});class I7{constructor(e,n){L(this,"context");L(this,"globalGainNode");L(this,"listener");L(this,"prevVolume",1);L(this,"finalizationRegistry");L(this,"cache");L(this,"createBiquadFilter",({type:e,frequency:n,gain:r,Q:i})=>{n===void 0&&(n=350);const o=this.context.createBiquadFilter();return o.type=e||"lowpass",o.frequency.value=n,o.gain.value=r||0,o.Q.value=i||1,o});this.context=e||new a7,this.listener=this.context.listener,this.globalGainNode=this.context.createGain(),this.globalGainNode.connect(this.context.destination),this.cache=n||new vC,this.finalizationRegistry=new FinalizationRegistry(r=>{r.cleanup()})}async loadWorklets(){this.context.audioWorklet?await this.createWorkletNode("phase-vocoder",m7):console.warn("AudioWorklet not supported")}async createWorkletNode(e,n){if(!this.context.audioWorklet)throw new Error("AudioWorklet not supported");try{return new WA(this.context,e)}catch(r){console.error(r),console.log("Loading worklet from url",n);try{await this.context.audioWorklet.addModule(n)}catch(i){throw console.error(i),new Error(`Could not load worklet from url ${n}`)}return new WA(this.context,e)}}clearMemoryCache(){this.cache.clearMemoryCache()}createOscillator(e,n="HRTF"){return new Z1(this.context,this.globalGainNode,"oscillator",n,e)}async createSound(e,n="Buffer",r="HRTF"){if(typeof e=="object")return Promise.resolve(new oh("",e,this.context,this.globalGainNode,"Buffer",r));const i=e;if(n==="HTML"){const o=new Audio;return o.src=i,o.crossOrigin="anonymous",new oh(i,void 0,this.context,this.globalGainNode,"HTML",r)}return this.cache.getAudioBuffer(this.context,i).then(o=>new oh(i,o,this.context,this.globalGainNode,n,r))}async createGroup(e){const n=new HA;return e.forEach(r=>n.addSound(r)),n}async createGroupFromUrls(e,n="Buffer",r="HRTF"){const i=new HA;return(await Promise.all(e.map(o=>this.createSound(o,n,r)))).forEach(o=>i.addSound(o)),i}async createStream(e){return new oh(e,void 0,this.context,this.globalGainNode,"Streaming")}createPanner({coneInnerAngle:e,coneOuterAngle:n,coneOuterGain:r,distanceModel:i,maxDistance:o,channelCount:s,channelCountMode:a,channelInterpretation:c,panningModel:l,refDistance:u,rolloffFactor:d,positionX:f,positionY:h,positionZ:p,orientationX:g,orientationY:C,orientationZ:v}){const m=this.context.createPanner();return m.coneInnerAngle=e||360,m.coneOuterAngle=n||360,m.coneOuterGain=r||0,m.distanceModel=i||"inverse",m.maxDistance=o||1e4,m.channelCount=s||2,m.channelCountMode=a||"clamped-max",m.channelInterpretation=c||"speakers",m.panningModel=l||"HRTF",m.refDistance=u||1,m.rolloffFactor=d||1,m.positionX.value=f||0,m.positionY.value=h||0,m.positionZ.value=p||0,m.orientationX.value=g||0,m.orientationY.value=C||0,m.orientationZ.value=v||0,m}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}setGlobalVolume(e){this.globalGainNode.gain.value=e}get volume(){return this.globalGainNode.gain.value}set volume(e){if(this.muted){this.prevVolume=e;return}this.setGlobalVolume(e)}mute(){this.muted||(this.prevVolume=this.globalGainNode.gain.value,this.setGlobalVolume(0))}unmute(){this.muted&&this.setGlobalVolume(this.prevVolume)}get muted(){return this.globalGainNode.gain.value===0}set muted(e){e!==this.muted&&(e?this.mute():this.unmute())}getMicrophoneStream(){return new Promise((e,n)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{const i=new C7(this.context);i.play(),e(i)}).catch(r=>{n(r)})})}get listenerOrientation(){return{forward:[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value],up:[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}}set listenerOrientation(e){const{forward:n,up:r}=e,[i,o,s]=n,[a,c,l]=r;this.listener.forwardX.value=i,this.listener.forwardY.value=o,this.listener.forwardZ.value=s,this.listener.upX.value=a,this.listener.upY.value=c,this.listener.upZ.value=l}get listenerUpOrientation(){return[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}set listenerUpOrientation(e){const[n,r,i]=e;this.listener.upX.value=n,this.listener.upY.value=r,this.listener.upZ.value=i}get listenerForwardOrientation(){return[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value]}set listenerForwardOrientation(e){const[n,r,i]=e;this.listener.forwardX.value=n,this.listener.forwardY.value=r,this.listener.forwardZ.value=i}get listenerPosition(){return[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}set listenerPosition(e){const[n,r,i]=e,o=this.context.currentTime;this.listener.positionX.setValueAtTime(n,o),this.listener.positionY.setValueAtTime(r,o),this.listener.positionZ.setValueAtTime(i,o)}}const b7="https://mongoose.world:9080/?url=";class A7 extends qi{constructor(){super(...arguments);L(this,"packageName","Client.Media");L(this,"sounds",{});L(this,"defaultUrl","")}handleDefault(n){this.defaultUrl=n}async handleLoad(n){const r=(n.url||this.defaultUrl)+n.name,i=n.url+n.name;if(!this.sounds[i]){let s=await this.client.cacophony.createSound(r);s.key=i,this.sounds[i]=s}}mediaUrl(n){var i;let r=(n.url||this.defaultUrl)+n.name;return((i=n.type)==null?void 0:i.toLowerCase())==="music"&&(r=b7+encodeURIComponent(r)),r}async handlePlay(n){let r=this.mediaUrl(n);n.key=n.key||r;let i=this.sounds[n.key];const o=n.is3d?"HRTF":"stereo";if((!i||i.url!==r)&&(n.type==="music"?i=await this.client.cacophony.createSound(r,Jd.HTML,o):i=await this.client.cacophony.createSound(r,Jd.Buffer,o)),n.volume!==void 0&&(i.volume=n.volume/100),n.loops!==void 0){const s=n.loops===-1?1/0:n.loops-1;i.loop(s)}if(n.start&&i.seek(n.start/1e3),n.end&&setTimeout(()=>{delete this.sounds[i.key],i.stop()},n.end),n.is3d&&(i.threeDOptions={coneInnerAngle:360,coneOuterAngle:0,panningModel:"HRTF",distanceModel:"inverse"},i.position=[n.position[0],n.position[1],n.position[2]]),n.priority){for(let s in this.sounds){const a=this.sounds[s];a.priority&&a.priority<n.priority&&a.stop()}i.priority=n.priority}i.isPlaying||(i.play()[0],n.fadein,n.fadeout),i.key=n.key,this.sounds[i.key]=i}handleStop(n){n.name&&this.soundsByName(n.name).forEach(r=>this.stopSound(r)),n.type&&this.soundsByType(n.type).forEach(r=>this.stopSound(r)),n.tag&&this.soundsByTag(n.tag).forEach(r=>this.stopSound(r)),n.key&&this.soundsByKey(n.key).forEach(r=>this.stopSound(r)),!n.name&&!n.type&&!n.tag&&!n.key&&(this.allSounds.forEach(r=>r.stop()),this.sounds={})}stopSound(n){delete this.sounds[n.key],n.stop()}handleListenerPosition(n){var r;(r=n.position)!=null&&r.length&&(this.client.cacophony.listenerPosition=n.position)}handleListenerOrientation(n){n.up&&n.up.length&&(this.client.cacophony.listenerUpOrientation=n.up),n.forward&&n.forward.length&&(this.client.cacophony.listenerForwardOrientation=n.forward)}soundsByName(n){return Object.values(this.sounds).filter(r=>r.url&&r.url[r.url.length-1].endsWith(n))}soundsByKey(n){return Object.values(this.sounds).filter(r=>r.key===n)}soundsByTag(n){return Object.values(this.sounds).filter(r=>r.tag===n)}soundsByType(n){return Object.values(this.sounds).filter(r=>r.mediaType===n)}get allSounds(){return Object.values(this.sounds)}stopAllSounds(){this.allSounds.forEach(n=>n.stop()),this.sounds={}}}class w7 extends qi{constructor(){super(...arguments);L(this,"packageName","Client.Speech")}handleSpeak(n){const r=new SpeechSynthesisUtterance(n.text);r.rate=n.rate,r.pitch=n.pitch,r.volume=n.volume,speechSynthesis.speak(r)}}class S7 extends qi{constructor(){super(...arguments);L(this,"packageName","Comm.Channel");L(this,"channels",[])}handleList(n){this.channels=n}sendList(){this.sendData("List")}handleText(n){n.channel==="say_to_you"&&(document.hasFocus()||this.client.sendNotification(`Message from ${n.talker}`,`${n.text}`))}}class jR extends qi{constructor(){super(...arguments);L(this,"packageName","Client.FileTransfer")}sendCandidate(n,r){this.sendData("Candidate",{recipient:n,candidate:JSON.stringify(r)})}handleCandidate(n){const r=JSON.parse(n.candidate);this.client.webRTCService.handleIceCandidate(r)}handleOffer(n){console.log("[GMCPClientFileTransfer] Received offer:",n),this.client.fileTransferManager.pendingOffers.set(`${n.hash}`,n),this.client.onFileTransferOffer(n.sender,n.hash,n.filename,n.filesize,n.offerSdp)}handleAccept(n){this.client.onFileTransferAccept(n.sender,n.hash,n.filename,n.answerSdp)}handleReject(n){this.client.onFileTransferReject(n.sender,n.hash)}handleCancel(n){this.client.onFileTransferCancel(n.sender,n.hash)}sendOffer(n,r,i,o,s){this.sendData("Offer",{recipient:n,filename:r,filesize:i,offerSdp:o,hash:s})}sendAccept(n,r,i,o){this.sendData("Accept",{sender:n,hash:r,filename:i,answerSdp:o})}sendReject(n,r){this.sendData("Reject",{sender:n,hash:r})}sendCancel(n,r){this.sendData("Cancel",{recipient:n,hash:r})}sendRequestResend(n,r){this.sendData("RequestResend",{sender:n,hash:r})}}class k7 extends qi{constructor(){super(...arguments);L(this,"packageName","Comm.LiveKit")}handleroom_token(n){this.client.worldData.liveKitTokens.push(n.token),this.client.emit("livekitToken",n.token)}handleroom_leave(n){this.client.worldData.liveKitTokens=this.client.worldData.liveKitTokens.filter(r=>r!==n.token),this.client.emit("livekitLeave",n.token)}}class E7 extends qi{constructor(){super(...arguments);L(this,"packageName","Core")}sendHello(){this.sendData("Hello",{client:"Mongoose Client",version:"0.1"})}}class T7 extends qi{constructor(){super(...arguments);L(this,"packageName","Core.Supports")}sendSet(){const n=Object.values(this.client.gmcpHandlers).map(r=>r.packageName+" "+r.packageVersion.toString());this.sendData("Set",n)}}function $1(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let Mc=$1();function HR(t){Mc=t}const yd={exec:()=>null};function At(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(cr.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,e)};return r}const cr={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},R7=/^(?:[ \t]*(?:\n|$))+/,_7=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,D7=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Ef=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,P7=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ZR=/(?:[*+-]|\d{1,9}[.)])/,$R=At(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ZR).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),X1=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,N7=/^[^\n]+/,K1=/(?!\s*\])(?:\\.|[^\[\]\\])+/,B7=At(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",K1).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),F7=At(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ZR).getRegex(),Op="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",J1=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,O7=At("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",J1).replace("tag",Op).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),XR=At(X1).replace("hr",Ef).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Op).getRegex(),M7=At(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",XR).getRegex(),Y1={blockquote:M7,code:_7,def:B7,fences:D7,heading:P7,hr:Ef,html:O7,lheading:$R,list:F7,newline:R7,paragraph:XR,table:yd,text:N7},$A=At("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Ef).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Op).getRegex(),L7={...Y1,table:$A,paragraph:At(X1).replace("hr",Ef).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",$A).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",Op).getRegex()},U7={...Y1,html:At(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",J1).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:yd,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:At(X1).replace("hr",Ef).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$R).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},KR=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,V7=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,JR=/^( {2,}|\\)\n(?!\s*$)/,G7=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Mp=/[\p{P}\p{S}]/u,q1=/[\s\p{P}\p{S}]/u,YR=/[^\s\p{P}\p{S}]/u,W7=At(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,q1).getRegex(),z7=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,j7=At(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,Mp).getRegex(),H7=At("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,YR).replace(/punctSpace/g,q1).replace(/punct/g,Mp).getRegex(),Z7=At("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,YR).replace(/punctSpace/g,q1).replace(/punct/g,Mp).getRegex(),$7=At(/\\(punct)/,"gu").replace(/punct/g,Mp).getRegex(),X7=At(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),K7=At(J1).replace("(?:-->|$)","-->").getRegex(),J7=At("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",K7).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),z0=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Y7=At(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",z0).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),qR=At(/^!?\[(label)\]\[(ref)\]/).replace("label",z0).replace("ref",K1).getRegex(),QR=At(/^!?\[(ref)\](?:\[\])?/).replace("ref",K1).getRegex(),q7=At("reflink|nolink(?!\\()","g").replace("reflink",qR).replace("nolink",QR).getRegex(),Q1={_backpedal:yd,anyPunctuation:$7,autolink:X7,blockSkip:z7,br:JR,code:V7,del:yd,emStrongLDelim:j7,emStrongRDelimAst:H7,emStrongRDelimUnd:Z7,escape:KR,link:Y7,nolink:QR,punctuation:W7,reflink:qR,reflinkSearch:q7,tag:J7,text:G7,url:yd},Q7={...Q1,link:At(/^!?\[(label)\]\((.*?)\)/).replace("label",z0).getRegex(),reflink:At(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",z0).getRegex()},CC={...Q1,escape:At(KR).replace("])","~|])").getRegex(),url:At(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},eU={...CC,br:At(JR).replace("{2,}","*").getRegex(),text:At(CC.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},sh={normal:Y1,gfm:L7,pedantic:U7},Mu={normal:Q1,gfm:CC,breaks:eU,pedantic:Q7},tU={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},XA=t=>tU[t];function lo(t,e){if(e){if(cr.escapeTest.test(t))return t.replace(cr.escapeReplace,XA)}else if(cr.escapeTestNoEncode.test(t))return t.replace(cr.escapeReplaceNoEncode,XA);return t}function KA(t){try{t=encodeURI(t).replace(cr.percentDecode,"%")}catch{return null}return t}function JA(t,e){var o;const n=t.replace(cr.findPipe,(s,a,c)=>{let l=!1,u=a;for(;--u>=0&&c[u]==="\\";)l=!l;return l?"|":" |"}),r=n.split(cr.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(cr.slashPipe,"|");return r}function Lu(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r;){const o=t.charAt(r-i-1);if(o===e&&!n)i++;else if(o!==e&&n)i++;else break}return t.slice(0,r-i)}function nU(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function YA(t,e,n,r,i){const o=e.href,s=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const c={type:"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,c}return{type:"image",raw:n,href:o,title:s,text:a}}function rU(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(o=>{const s=o.match(n.other.beginningSpace);if(s===null)return o;const[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}class j0{constructor(e){L(this,"options");L(this,"rules");L(this,"lexer");this.options=e||Mc}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Lu(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],i=rU(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){const i=Lu(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Lu(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=Lu(n[0],`
`).split(`
`),i="",o="";const s=[];for(;r.length>0;){let a=!1;const c=[];let l;for(l=0;l<r.length;l++)if(this.rules.other.blockquoteStart.test(r[l]))c.push(r[l]),a=!0;else if(!a)c.push(r[l]);else break;r=r.slice(l);const u=c.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,o=o?`${o}
${d}`:d;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=f,r.length===0)break;const h=s.at(-1);if((h==null?void 0:h.type)==="code")break;if((h==null?void 0:h.type)==="blockquote"){const p=h,g=p.raw+`
`+r.join(`
`),C=this.blockquote(g);s[s.length-1]=C,i=i.substring(0,i.length-p.raw.length)+C.raw,o=o.substring(0,o.length-p.text.length)+C.text;break}else if((h==null?void 0:h.type)==="list"){const p=h,g=p.raw+`
`+r.join(`
`),C=this.list(g);s[s.length-1]=C,i=i.substring(0,i.length-h.raw.length)+C.raw,o=o.substring(0,o.length-p.raw.length)+C.raw,r=g.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let l=!1,u="",d="";if(!(n=s.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let f=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,m=>" ".repeat(3*m.length)),h=e.split(`
`,1)[0],p=!f.trim(),g=0;if(this.options.pedantic?(g=2,d=f.trimStart()):p?g=n[1].length+1:(g=n[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=f.slice(g),g+=n[1].length),p&&this.rules.other.blankLine.test(h)&&(u+=h+`
`,e=e.substring(h.length+1),l=!0),!l){const m=this.rules.other.nextBulletRegex(g),y=this.rules.other.hrRegex(g),I=this.rules.other.fencesBeginRegex(g),b=this.rules.other.headingBeginRegex(g),A=this.rules.other.htmlBeginRegex(g);for(;e;){const E=e.split(`
`,1)[0];let k;if(h=E,this.options.pedantic?(h=h.replace(this.rules.other.listReplaceNesting,"  "),k=h):k=h.replace(this.rules.other.tabCharGlobal,"    "),I.test(h)||b.test(h)||A.test(h)||m.test(h)||y.test(h))break;if(k.search(this.rules.other.nonSpaceChar)>=g||!h.trim())d+=`
`+k.slice(g);else{if(p||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||I.test(f)||b.test(f)||y.test(f))break;d+=`
`+h}!p&&!h.trim()&&(p=!0),u+=E+`
`,e=e.substring(E.length+1),f=k.slice(g)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let C=null,v;this.options.gfm&&(C=this.rules.other.listIsTask.exec(d),C&&(v=C[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:u,task:!!C,checked:v,loose:!1,text:d,tokens:[]}),o.raw+=u}const c=o.items.at(-1);c&&(c.raw=c.raw.trimEnd(),c.text=c.text.trimEnd()),o.raw=o.raw.trimEnd();for(let l=0;l<o.items.length;l++)if(this.lexer.state.top=!1,o.items[l].tokens=this.lexer.blockTokens(o.items[l].text,[]),!o.loose){const u=o.items[l].tokens.filter(f=>f.type==="space"),d=u.length>0&&u.some(f=>this.rules.other.anyLine.test(f.raw));o.loose=d}if(o.loose)for(let l=0;l<o.items.length;l++)o.items[l].loose=!0;return o}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:o}}}table(e){var a;const n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const r=JA(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const c of i)this.rules.other.tableAlignRight.test(c)?s.align.push("right"):this.rules.other.tableAlignCenter.test(c)?s.align.push("center"):this.rules.other.tableAlignLeft.test(c)?s.align.push("left"):s.align.push(null);for(let c=0;c<r.length;c++)s.header.push({text:r[c],tokens:this.lexer.inline(r[c]),header:!0,align:s.align[c]});for(const c of o)s.rows.push(JA(c,s.header.length).map((l,u)=>({text:l,tokens:this.lexer.inline(l),header:!1,align:s.align[u]})));return s}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const s=Lu(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=nU(n[2],"()");if(s>-1){const c=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,c).trim(),n[3]=""}}let i=n[2],o="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),YA(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[i.toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return YA(r,o,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let a,c,l=s,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,n=n.slice(-1*e.length+s);(i=d.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(c=[...a].length,i[3]||i[4]){l+=c;continue}else if((i[5]||i[6])&&s%3&&!((s+c)%3)){u+=c;continue}if(l-=c,l>0)continue;c=Math.min(c,c+l+u);const f=[...i[0]][0].length,h=e.slice(0,s+i.index+f+c);if(Math.min(s,c)%2){const g=h.slice(1,-1);return{type:"em",raw:h,text:g,tokens:this.lexer.inlineTokens(g)}}const p=h.slice(2,-2);return{type:"strong",raw:h,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,o;if(n[2]==="@")i=n[0],o="mailto:"+i;else{let s;do s=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(s!==n[0]);i=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){const r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}}class li{constructor(e){L(this,"tokens");L(this,"options");L(this,"state");L(this,"tokenizer");L(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Mc,this.options.tokenizer=this.options.tokenizer||new j0,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:cr,block:sh.normal,inline:Mu.normal};this.options.pedantic?(n.block=sh.pedantic,n.inline=Mu.pedantic):this.options.gfm&&(n.block=sh.gfm,this.options.breaks?n.inline=Mu.breaks:n.inline=Mu.gfm),this.tokenizer.rules=n}static get rules(){return{block:sh,inline:Mu}}static lex(e,n){return new li(n).lex(e)}static lexInline(e,n){return new li(n).inlineTokens(e)}lex(e){e=e.replace(cr.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,o,s;for(this.options.pedantic&&(e=e.replace(cr.tabCharGlobal,"    ").replace(cr.spaceLine,""));e;){let a;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(l=>(a=l.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const l=n.at(-1);a.raw.length===1&&l!==void 0?l.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.at(-1).src=l.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const l=n.at(-1);(l==null?void 0:l.type)==="paragraph"||(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.raw,this.inlineQueue.at(-1).src=l.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let c=e;if((s=this.options.extensions)!=null&&s.startBlock){let l=1/0;const u=e.slice(1);let d;this.options.extensions.startBlock.forEach(f=>{d=f.call({lexer:this},u),typeof d=="number"&&d>=0&&(l=Math.min(l,d))}),l<1/0&&l>=0&&(c=e.substring(0,l+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){const l=n.at(-1);r&&(l==null?void 0:l.type)==="paragraph"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(a),r=c.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const l=n.at(-1);(l==null?void 0:l.type)==="text"?(l.raw+=`
`+a.raw,l.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=l.text):n.push(a);continue}if(e){const l="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(l);break}else throw new Error(l)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,c,l;let r=e,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o=!1,s="";for(;e;){o||(s=""),o=!1;let u;if((c=(a=this.options.extensions)==null?void 0:a.inline)!=null&&c.some(f=>(u=f.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const f=n.at(-1);u.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,r,s)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let d=e;if((l=this.options.extensions)!=null&&l.startInline){let f=1/0;const h=e.slice(1);let p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},h),typeof p=="number"&&p>=0&&(f=Math.min(f,p))}),f<1/0&&f>=0&&(d=e.substring(0,f+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(s=u.raw.slice(-1)),o=!0;const f=n.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=u.raw,f.text+=u.text):n.push(u);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return n}}class H0{constructor(e){L(this,"options");L(this,"parser");this.options=e||Mc}space(e){return""}code({text:e,lang:n,escaped:r}){var s;const i=(s=(n||"").match(cr.notSpaceStart))==null?void 0:s[0],o=e.replace(cr.endingNewline,"")+`
`;return i?'<pre><code class="language-'+lo(i)+'">'+(r?o:lo(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:lo(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const c=e.items[a];i+=this.listitem(c)}const o=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(e){var r;let n="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+lo(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let o=0;o<e.header.length;o++)r+=this.tablecell(e.header[o]);n+=this.tablerow({text:r});let i="";for(let o=0;o<e.rows.length;o++){const s=e.rows[o];r="";for(let a=0;a<s.length;a++)r+=this.tablecell(s[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${lo(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const i=this.parser.parseInline(r),o=KA(e);if(o===null)return i;e=o;let s='<a href="'+e+'"';return n&&(s+=' title="'+lo(n)+'"'),s+=">"+i+"</a>",s}image({href:e,title:n,text:r}){const i=KA(e);if(i===null)return lo(r);e=i;let o=`<img src="${e}" alt="${r}"`;return n&&(o+=` title="${lo(n)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:lo(e.text)}}class ex{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class ui{constructor(e){L(this,"options");L(this,"renderer");L(this,"textRenderer");this.options=e||Mc,this.options.renderer=this.options.renderer||new H0,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new ex}static parse(e,n){return new ui(n).parse(e)}static parseInline(e,n){return new ui(n).parseInline(e)}parse(e,n=!0){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const l=a,u=this.options.extensions.renderers[l.type].call({parser:this},l);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(l.type)){r+=u||"";continue}}const c=a;switch(c.type){case"space":{r+=this.renderer.space(c);continue}case"hr":{r+=this.renderer.hr(c);continue}case"heading":{r+=this.renderer.heading(c);continue}case"code":{r+=this.renderer.code(c);continue}case"table":{r+=this.renderer.table(c);continue}case"blockquote":{r+=this.renderer.blockquote(c);continue}case"list":{r+=this.renderer.list(c);continue}case"html":{r+=this.renderer.html(c);continue}case"paragraph":{r+=this.renderer.paragraph(c);continue}case"text":{let l=c,u=this.renderer.text(l);for(;s+1<e.length&&e[s+1].type==="text";)l=e[++s],u+=`
`+this.renderer.text(l);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}parseInline(e,n=this.renderer){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const l=this.options.extensions.renderers[a.type].call({parser:this},a);if(l!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=l||"";continue}}const c=a;switch(c.type){case"escape":{r+=n.text(c);break}case"html":{r+=n.html(c);break}case"link":{r+=n.link(c);break}case"image":{r+=n.image(c);break}case"strong":{r+=n.strong(c);break}case"em":{r+=n.em(c);break}case"codespan":{r+=n.codespan(c);break}case"br":{r+=n.br(c);break}case"del":{r+=n.del(c);break}case"text":{r+=n.text(c);break}default:{const l='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(l),"";throw new Error(l)}}}return r}}class xd{constructor(e){L(this,"options");L(this,"block");this.options=e||Mc}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?li.lex:li.lexInline}provideParser(){return this.block?ui.parse:ui.parseInline}}L(xd,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class iU{constructor(...e){L(this,"defaults",$1());L(this,"options",this.setOptions);L(this,"parse",this.parseMarkdown(!0));L(this,"parseInline",this.parseMarkdown(!1));L(this,"Parser",ui);L(this,"Renderer",H0);L(this,"TextRenderer",ex);L(this,"Lexer",li);L(this,"Tokenizer",j0);L(this,"Hooks",xd);this.use(...e)}walkTokens(e,n){var i,o;let r=[];for(const s of e)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const a=s;for(const c of a.header)r=r.concat(this.walkTokens(c.tokens,n));for(const c of a.rows)for(const l of c)r=r.concat(this.walkTokens(l.tokens,n));break}case"list":{const a=s;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(c=>{const l=a[c].flat(1/0);r=r.concat(this.walkTokens(l,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=n.renderers[o.name];s?n.renderers[o.name]=function(...a){let c=o.renderer.apply(this,a);return c===!1&&(c=s.apply(this,a)),c}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[o.level];s?s.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),i.extensions=n),r.renderer){const o=this.defaults.renderer||new H0(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,c=r.renderer[a],l=o[a];o[a]=(...u)=>{let d=c.apply(o,u);return d===!1&&(d=l.apply(o,u)),d||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new j0(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,c=r.tokenizer[a],l=o[a];o[a]=(...u)=>{let d=c.apply(o,u);return d===!1&&(d=l.apply(o,u)),d}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new xd;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,c=r.hooks[a],l=o[a];xd.passThroughHooks.has(s)?o[a]=u=>{if(this.defaults.async)return Promise.resolve(c.call(o,u)).then(f=>l.call(o,f));const d=c.call(o,u);return l.call(o,d)}:o[a]=(...u)=>{let d=c.apply(o,u);return d===!1&&(d=l.apply(o,u)),d}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let c=[];return c.push(s.call(this,a)),o&&(c=c.concat(o.call(this,a))),c}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return li.lex(e,n??this.defaults)}parser(e,n){return ui.parse(e,n??this.defaults)}parseMarkdown(e){return(r,i)=>{const o={...i},s={...this.defaults,...o},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const c=s.hooks?s.hooks.provideLexer():e?li.lex:li.lexInline,l=s.hooks?s.hooks.provideParser():e?ui.parse:ui.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(u=>c(u,s)).then(u=>s.hooks?s.hooks.processAllTokens(u):u).then(u=>s.walkTokens?Promise.all(this.walkTokens(u,s.walkTokens)).then(()=>u):u).then(u=>l(u,s)).then(u=>s.hooks?s.hooks.postprocess(u):u).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let u=c(r,s);s.hooks&&(u=s.hooks.processAllTokens(u)),s.walkTokens&&this.walkTokens(u,s.walkTokens);let d=l(u,s);return s.hooks&&(d=s.hooks.postprocess(d)),d}catch(u){return a(u)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+lo(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}}const wc=new iU;function Ct(t,e){return wc.parse(t,e)}Ct.options=Ct.setOptions=function(t){return wc.setOptions(t),Ct.defaults=wc.defaults,HR(Ct.defaults),Ct};Ct.getDefaults=$1;Ct.defaults=Mc;Ct.use=function(...t){return wc.use(...t),Ct.defaults=wc.defaults,HR(Ct.defaults),Ct};Ct.walkTokens=function(t,e){return wc.walkTokens(t,e)};Ct.parseInline=wc.parseInline;Ct.Parser=ui;Ct.parser=ui.parse;Ct.Renderer=H0;Ct.TextRenderer=ex;Ct.Lexer=li;Ct.lexer=li.lex;Ct.Tokenizer=j0;Ct.Hooks=xd;Ct.parse=Ct;Ct.options;Ct.setOptions;Ct.use;Ct.walkTokens;Ct.parseInline;ui.parse;li.lex;class oU extends qi{constructor(n){super(n);L(this,"packageName","Client.Html")}handleAdd_html(n){this.client.emit("html",n.data.join(`
`))}handleAdd_markdown(n){const r=n.data.join(`
`),i=Ct(r);this.client.emit("html",i)}}const Jc=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e_=new Set,yC=typeof process=="object"&&process?process:{},t_=(t,e,n,r)=>{typeof yC.emitWarning=="function"?yC.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let Z0=globalThis.AbortController,qA=globalThis.AbortSignal;var ok;if(typeof Z0>"u"){qA=class{constructor(){L(this,"onabort");L(this,"_onabort",[]);L(this,"reason");L(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},Z0=class{constructor(){L(this,"signal",new qA);e()}abort(r){var i,o;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const s of this.signal._onabort)s(r);(o=(i=this.signal).onabort)==null||o.call(i,r)}}};let t=((ok=yC.env)==null?void 0:ok.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,t_("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const sU=t=>!e_.has(t),qs=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),n_=t=>qs(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Lh:null:null;class Lh extends Array{constructor(e){super(e),this.fill(0)}}var Dl;const nc=class nc{constructor(e,n){L(this,"heap");L(this,"length");if(!O(nc,Dl))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=n_(e);if(!n)return[];Be(nc,Dl,!0);const r=new nc(e,n);return Be(nc,Dl,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Dl=new WeakMap,at(nc,Dl,!1);let xC=nc;var sk,ak,Si,Or,ki,Ei,Pl,Nl,gn,Ti,fn,Ot,Ve,tr,Mr,$n,Sn,Ri,kn,_i,Di,Lr,Pi,aa,nr,me,bC,lc,qo,uf,Ur,r_,uc,Bl,df,Qs,ea,AC,Uh,Vh,Ft,wC,rd,ta,SC;const zx=class zx{constructor(e){at(this,me);at(this,Si);at(this,Or);at(this,ki);at(this,Ei);at(this,Pl);at(this,Nl);L(this,"ttl");L(this,"ttlResolution");L(this,"ttlAutopurge");L(this,"updateAgeOnGet");L(this,"updateAgeOnHas");L(this,"allowStale");L(this,"noDisposeOnSet");L(this,"noUpdateTTL");L(this,"maxEntrySize");L(this,"sizeCalculation");L(this,"noDeleteOnFetchRejection");L(this,"noDeleteOnStaleGet");L(this,"allowStaleOnFetchAbort");L(this,"allowStaleOnFetchRejection");L(this,"ignoreFetchAbort");at(this,gn);at(this,Ti);at(this,fn);at(this,Ot);at(this,Ve);at(this,tr);at(this,Mr);at(this,$n);at(this,Sn);at(this,Ri);at(this,kn);at(this,_i);at(this,Di);at(this,Lr);at(this,Pi);at(this,aa);at(this,nr);at(this,lc,()=>{});at(this,qo,()=>{});at(this,uf,()=>{});at(this,Ur,()=>!1);at(this,uc,e=>{});at(this,Bl,(e,n,r)=>{});at(this,df,(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});L(this,sk,"LRUCache");const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:f,maxSize:h=0,maxEntrySize:p=0,sizeCalculation:g,fetchMethod:C,memoMethod:v,noDeleteOnFetchRejection:m,noDeleteOnStaleGet:y,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:b,ignoreFetchAbort:A}=e;if(n!==0&&!qs(n))throw new TypeError("max option must be a nonnegative integer");const E=n?n_(n):Array;if(!E)throw new Error("invalid max value: "+n);if(Be(this,Si,n),Be(this,Or,h),this.maxEntrySize=p||O(this,Or),this.sizeCalculation=g,this.sizeCalculation){if(!O(this,Or)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(v!==void 0&&typeof v!="function")throw new TypeError("memoMethod must be a function if defined");if(Be(this,Nl,v),C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(Be(this,Pl,C),Be(this,aa,!!C),Be(this,fn,new Map),Be(this,Ot,new Array(n).fill(void 0)),Be(this,Ve,new Array(n).fill(void 0)),Be(this,tr,new E(n)),Be(this,Mr,new E(n)),Be(this,$n,0),Be(this,Sn,0),Be(this,Ri,xC.create(n)),Be(this,gn,0),Be(this,Ti,0),typeof l=="function"&&Be(this,ki,l),typeof u=="function"?(Be(this,Ei,u),Be(this,kn,[])):(Be(this,Ei,void 0),Be(this,kn,void 0)),Be(this,Pi,!!O(this,ki)),Be(this,nr,!!O(this,Ei)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!m,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!b,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(O(this,Or)!==0&&!qs(O(this,Or)))throw new TypeError("maxSize must be a positive integer if specified");if(!qs(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ee(this,me,r_).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!y,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=qs(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!qs(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ee(this,me,bC).call(this)}if(O(this,Si)===0&&this.ttl===0&&O(this,Or)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!O(this,Si)&&!O(this,Or)){const k="LRU_CACHE_UNBOUNDED";sU(k)&&(e_.add(k),t_("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",k,zx))}}static unsafeExposeInternals(e){return{starts:O(e,Di),ttls:O(e,Lr),sizes:O(e,_i),keyMap:O(e,fn),keyList:O(e,Ot),valList:O(e,Ve),next:O(e,tr),prev:O(e,Mr),get head(){return O(e,$n)},get tail(){return O(e,Sn)},free:O(e,Ri),isBackgroundFetch:n=>{var r;return Ee(r=e,me,Ft).call(r,n)},backgroundFetch:(n,r,i,o)=>{var s;return Ee(s=e,me,Vh).call(s,n,r,i,o)},moveToTail:n=>{var r;return Ee(r=e,me,rd).call(r,n)},indexes:n=>{var r;return Ee(r=e,me,Qs).call(r,n)},rindexes:n=>{var r;return Ee(r=e,me,ea).call(r,n)},isStale:n=>{var r;return O(r=e,Ur).call(r,n)}}}get max(){return O(this,Si)}get maxSize(){return O(this,Or)}get calculatedSize(){return O(this,Ti)}get size(){return O(this,gn)}get fetchMethod(){return O(this,Pl)}get memoMethod(){return O(this,Nl)}get dispose(){return O(this,ki)}get disposeAfter(){return O(this,Ei)}getRemainingTTL(e){return O(this,fn).has(e)?1/0:0}*entries(){for(const e of Ee(this,me,Qs).call(this))O(this,Ve)[e]!==void 0&&O(this,Ot)[e]!==void 0&&!Ee(this,me,Ft).call(this,O(this,Ve)[e])&&(yield[O(this,Ot)[e],O(this,Ve)[e]])}*rentries(){for(const e of Ee(this,me,ea).call(this))O(this,Ve)[e]!==void 0&&O(this,Ot)[e]!==void 0&&!Ee(this,me,Ft).call(this,O(this,Ve)[e])&&(yield[O(this,Ot)[e],O(this,Ve)[e]])}*keys(){for(const e of Ee(this,me,Qs).call(this)){const n=O(this,Ot)[e];n!==void 0&&!Ee(this,me,Ft).call(this,O(this,Ve)[e])&&(yield n)}}*rkeys(){for(const e of Ee(this,me,ea).call(this)){const n=O(this,Ot)[e];n!==void 0&&!Ee(this,me,Ft).call(this,O(this,Ve)[e])&&(yield n)}}*values(){for(const e of Ee(this,me,Qs).call(this))O(this,Ve)[e]!==void 0&&!Ee(this,me,Ft).call(this,O(this,Ve)[e])&&(yield O(this,Ve)[e])}*rvalues(){for(const e of Ee(this,me,ea).call(this))O(this,Ve)[e]!==void 0&&!Ee(this,me,Ft).call(this,O(this,Ve)[e])&&(yield O(this,Ve)[e])}[(ak=Symbol.iterator,sk=Symbol.toStringTag,ak)](){return this.entries()}find(e,n={}){for(const r of Ee(this,me,Qs).call(this)){const i=O(this,Ve)[r],o=Ee(this,me,Ft).call(this,i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,O(this,Ot)[r],this))return this.get(O(this,Ot)[r],n)}}forEach(e,n=this){for(const r of Ee(this,me,Qs).call(this)){const i=O(this,Ve)[r],o=Ee(this,me,Ft).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,O(this,Ot)[r],this)}}rforEach(e,n=this){for(const r of Ee(this,me,ea).call(this)){const i=O(this,Ve)[r],o=Ee(this,me,Ft).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,O(this,Ot)[r],this)}}purgeStale(){let e=!1;for(const n of Ee(this,me,ea).call(this,{allowStale:!0}))O(this,Ur).call(this,n)&&(Ee(this,me,ta).call(this,O(this,Ot)[n],"expire"),e=!0);return e}info(e){const n=O(this,fn).get(e);if(n===void 0)return;const r=O(this,Ve)[n],i=Ee(this,me,Ft).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const o={value:i};if(O(this,Lr)&&O(this,Di)){const s=O(this,Lr)[n],a=O(this,Di)[n];if(s&&a){const c=s-(Jc.now()-a);o.ttl=c,o.start=Date.now()}}return O(this,_i)&&(o.size=O(this,_i)[n]),o}dump(){const e=[];for(const n of Ee(this,me,Qs).call(this,{allowStale:!0})){const r=O(this,Ot)[n],i=O(this,Ve)[n],o=Ee(this,me,Ft).call(this,i)?i.__staleWhileFetching:i;if(o===void 0||r===void 0)continue;const s={value:o};if(O(this,Lr)&&O(this,Di)){s.ttl=O(this,Lr)[n];const a=Jc.now()-O(this,Di)[n];s.start=Math.floor(Date.now()-a)}O(this,_i)&&(s.size=O(this,_i)[n]),e.unshift([r,s])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=Jc.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){var f,h,p,g,C;if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const u=O(this,df).call(this,e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),Ee(this,me,ta).call(this,e,"set"),this;let d=O(this,gn)===0?void 0:O(this,fn).get(e);if(d===void 0)d=O(this,gn)===0?O(this,Sn):O(this,Ri).length!==0?O(this,Ri).pop():O(this,gn)===O(this,Si)?Ee(this,me,Uh).call(this,!1):O(this,gn),O(this,Ot)[d]=e,O(this,Ve)[d]=n,O(this,fn).set(e,d),O(this,tr)[O(this,Sn)]=d,O(this,Mr)[d]=O(this,Sn),Be(this,Sn,d),Pf(this,gn)._++,O(this,Bl).call(this,d,u,c),c&&(c.set="add"),l=!1;else{Ee(this,me,rd).call(this,d);const v=O(this,Ve)[d];if(n!==v){if(O(this,aa)&&Ee(this,me,Ft).call(this,v)){v.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:m}=v;m!==void 0&&!s&&(O(this,Pi)&&((f=O(this,ki))==null||f.call(this,m,e,"set")),O(this,nr)&&((h=O(this,kn))==null||h.push([m,e,"set"])))}else s||(O(this,Pi)&&((p=O(this,ki))==null||p.call(this,v,e,"set")),O(this,nr)&&((g=O(this,kn))==null||g.push([v,e,"set"])));if(O(this,uc).call(this,d),O(this,Bl).call(this,d,u,c),O(this,Ve)[d]=n,c){c.set="replace";const m=v&&Ee(this,me,Ft).call(this,v)?v.__staleWhileFetching:v;m!==void 0&&(c.oldValue=m)}}else c&&(c.set="update")}if(i!==0&&!O(this,Lr)&&Ee(this,me,bC).call(this),O(this,Lr)&&(l||O(this,uf).call(this,d,i,o),c&&O(this,qo).call(this,c,d)),!s&&O(this,nr)&&O(this,kn)){const v=O(this,kn);let m;for(;m=v==null?void 0:v.shift();)(C=O(this,Ei))==null||C.call(this,...m)}return this}pop(){var e;try{for(;O(this,gn);){const n=O(this,Ve)[O(this,$n)];if(Ee(this,me,Uh).call(this,!0),Ee(this,me,Ft).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(O(this,nr)&&O(this,kn)){const n=O(this,kn);let r;for(;r=n==null?void 0:n.shift();)(e=O(this,Ei))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,o=O(this,fn).get(e);if(o!==void 0){const s=O(this,Ve)[o];if(Ee(this,me,Ft).call(this,s)&&s.__staleWhileFetching===void 0)return!1;if(O(this,Ur).call(this,o))i&&(i.has="stale",O(this,qo).call(this,i,o));else return r&&O(this,lc).call(this,o),i&&(i.has="hit",O(this,qo).call(this,i,o)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=O(this,fn).get(e);if(i===void 0||!r&&O(this,Ur).call(this,i))return;const o=O(this,Ve)[i];return Ee(this,me,Ft).call(this,o)?o.__staleWhileFetching:o}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:h=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:g,forceRefresh:C=!1,status:v,signal:m}=n;if(!O(this,aa))return v&&(v.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:v});const y={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:p,ignoreFetchAbort:h,status:v,signal:m};let I=O(this,fn).get(e);if(I===void 0){v&&(v.fetch="miss");const b=Ee(this,me,Vh).call(this,e,I,y,g);return b.__returned=b}else{const b=O(this,Ve)[I];if(Ee(this,me,Ft).call(this,b)){const T=r&&b.__staleWhileFetching!==void 0;return v&&(v.fetch="inflight",T&&(v.returnedStale=!0)),T?b.__staleWhileFetching:b.__returned=b}const A=O(this,Ur).call(this,I);if(!C&&!A)return v&&(v.fetch="hit"),Ee(this,me,rd).call(this,I),i&&O(this,lc).call(this,I),v&&O(this,qo).call(this,v,I),b;const E=Ee(this,me,Vh).call(this,e,I,y,g),D=E.__staleWhileFetching!==void 0&&r;return v&&(v.fetch=A?"stale":"refresh",D&&A&&(v.returnedStale=!0)),D?E.__staleWhileFetching:E.__returned=E}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=O(this,Nl);if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:o,...s}=n,a=this.get(e,s);if(!o&&a!==void 0)return a;const c=r(e,a,{options:s,context:i});return this.set(e,c,s),c}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=n,a=O(this,fn).get(e);if(a!==void 0){const c=O(this,Ve)[a],l=Ee(this,me,Ft).call(this,c);return s&&O(this,qo).call(this,s,a),O(this,Ur).call(this,a)?(s&&(s.get="stale"),l?(s&&r&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),r?c.__staleWhileFetching:void 0):(o||Ee(this,me,ta).call(this,e,"expire"),s&&r&&(s.returnedStale=!0),r?c:void 0)):(s&&(s.get="hit"),l?c.__staleWhileFetching:(Ee(this,me,rd).call(this,a),i&&O(this,lc).call(this,a),c))}else s&&(s.get="miss")}delete(e){return Ee(this,me,ta).call(this,e,"delete")}clear(){return Ee(this,me,SC).call(this,"delete")}};Si=new WeakMap,Or=new WeakMap,ki=new WeakMap,Ei=new WeakMap,Pl=new WeakMap,Nl=new WeakMap,gn=new WeakMap,Ti=new WeakMap,fn=new WeakMap,Ot=new WeakMap,Ve=new WeakMap,tr=new WeakMap,Mr=new WeakMap,$n=new WeakMap,Sn=new WeakMap,Ri=new WeakMap,kn=new WeakMap,_i=new WeakMap,Di=new WeakMap,Lr=new WeakMap,Pi=new WeakMap,aa=new WeakMap,nr=new WeakMap,me=new WeakSet,bC=function(){const e=new Lh(O(this,Si)),n=new Lh(O(this,Si));Be(this,Lr,e),Be(this,Di,n),Be(this,uf,(o,s,a=Jc.now())=>{if(n[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){const c=setTimeout(()=>{O(this,Ur).call(this,o)&&Ee(this,me,ta).call(this,O(this,Ot)[o],"expire")},s+1);c.unref&&c.unref()}}),Be(this,lc,o=>{n[o]=e[o]!==0?Jc.now():0}),Be(this,qo,(o,s)=>{if(e[s]){const a=e[s],c=n[s];if(!a||!c)return;o.ttl=a,o.start=c,o.now=r||i();const l=o.now-c;o.remainingTTL=a-l}});let r=0;const i=()=>{const o=Jc.now();if(this.ttlResolution>0){r=o;const s=setTimeout(()=>r=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{const s=O(this,fn).get(o);if(s===void 0)return 0;const a=e[s],c=n[s];if(!a||!c)return 1/0;const l=(r||i())-c;return a-l},Be(this,Ur,o=>{const s=n[o],a=e[o];return!!a&&!!s&&(r||i())-s>a})},lc=new WeakMap,qo=new WeakMap,uf=new WeakMap,Ur=new WeakMap,r_=function(){const e=new Lh(O(this,Si));Be(this,Ti,0),Be(this,_i,e),Be(this,uc,n=>{Be(this,Ti,O(this,Ti)-e[n]),e[n]=0}),Be(this,df,(n,r,i,o)=>{if(Ee(this,me,Ft).call(this,r))return 0;if(!qs(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(r,n),!qs(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),Be(this,Bl,(n,r,i)=>{if(e[n]=r,O(this,Or)){const o=O(this,Or)-e[n];for(;O(this,Ti)>o;)Ee(this,me,Uh).call(this,!0)}Be(this,Ti,O(this,Ti)+e[n]),i&&(i.entrySize=r,i.totalCalculatedSize=O(this,Ti))})},uc=new WeakMap,Bl=new WeakMap,df=new WeakMap,Qs=function*({allowStale:e=this.allowStale}={}){if(O(this,gn))for(let n=O(this,Sn);!(!Ee(this,me,AC).call(this,n)||((e||!O(this,Ur).call(this,n))&&(yield n),n===O(this,$n)));)n=O(this,Mr)[n]},ea=function*({allowStale:e=this.allowStale}={}){if(O(this,gn))for(let n=O(this,$n);!(!Ee(this,me,AC).call(this,n)||((e||!O(this,Ur).call(this,n))&&(yield n),n===O(this,Sn)));)n=O(this,tr)[n]},AC=function(e){return e!==void 0&&O(this,fn).get(O(this,Ot)[e])===e},Uh=function(e){var o,s;const n=O(this,$n),r=O(this,Ot)[n],i=O(this,Ve)[n];return O(this,aa)&&Ee(this,me,Ft).call(this,i)?i.__abortController.abort(new Error("evicted")):(O(this,Pi)||O(this,nr))&&(O(this,Pi)&&((o=O(this,ki))==null||o.call(this,i,r,"evict")),O(this,nr)&&((s=O(this,kn))==null||s.push([i,r,"evict"]))),O(this,uc).call(this,n),e&&(O(this,Ot)[n]=void 0,O(this,Ve)[n]=void 0,O(this,Ri).push(n)),O(this,gn)===1?(Be(this,$n,Be(this,Sn,0)),O(this,Ri).length=0):Be(this,$n,O(this,tr)[n]),O(this,fn).delete(r),Pf(this,gn)._--,n},Vh=function(e,n,r,i){const o=n===void 0?void 0:O(this,Ve)[n];if(Ee(this,me,Ft).call(this,o))return o;const s=new Z0,{signal:a}=r;a==null||a.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});const c={signal:s.signal,options:r,context:i},l=(g,C=!1)=>{const{aborted:v}=s.signal,m=r.ignoreFetchAbort&&g!==void 0;if(r.status&&(v&&!C?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,m&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),v&&!m&&!C)return d(s.signal.reason);const y=h;return O(this,Ve)[n]===h&&(g===void 0?y.__staleWhileFetching?O(this,Ve)[n]=y.__staleWhileFetching:Ee(this,me,ta).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,g,c.options))),g},u=g=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=g),d(g)),d=g=>{const{aborted:C}=s.signal,v=C&&r.allowStaleOnFetchAbort,m=v||r.allowStaleOnFetchRejection,y=m||r.noDeleteOnFetchRejection,I=h;if(O(this,Ve)[n]===h&&(!y||I.__staleWhileFetching===void 0?Ee(this,me,ta).call(this,e,"fetch"):v||(O(this,Ve)[n]=I.__staleWhileFetching)),m)return r.status&&I.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),I.__staleWhileFetching;if(I.__returned===I)throw g},f=(g,C)=>{var m;const v=(m=O(this,Pl))==null?void 0:m.call(this,e,o,c);v&&v instanceof Promise&&v.then(y=>g(y===void 0?void 0:y),C),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(g(void 0),r.allowStaleOnFetchAbort&&(g=y=>l(y,!0)))})};r.status&&(r.status.fetchDispatched=!0);const h=new Promise(f).then(l,u),p=Object.assign(h,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return n===void 0?(this.set(e,p,{...c.options,status:void 0}),n=O(this,fn).get(e)):O(this,Ve)[n]=p,p},Ft=function(e){if(!O(this,aa))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Z0},wC=function(e,n){O(this,Mr)[n]=e,O(this,tr)[e]=n},rd=function(e){e!==O(this,Sn)&&(e===O(this,$n)?Be(this,$n,O(this,tr)[e]):Ee(this,me,wC).call(this,O(this,Mr)[e],O(this,tr)[e]),Ee(this,me,wC).call(this,O(this,Sn),e),Be(this,Sn,e))},ta=function(e,n){var i,o,s,a;let r=!1;if(O(this,gn)!==0){const c=O(this,fn).get(e);if(c!==void 0)if(r=!0,O(this,gn)===1)Ee(this,me,SC).call(this,n);else{O(this,uc).call(this,c);const l=O(this,Ve)[c];if(Ee(this,me,Ft).call(this,l)?l.__abortController.abort(new Error("deleted")):(O(this,Pi)||O(this,nr))&&(O(this,Pi)&&((i=O(this,ki))==null||i.call(this,l,e,n)),O(this,nr)&&((o=O(this,kn))==null||o.push([l,e,n]))),O(this,fn).delete(e),O(this,Ot)[c]=void 0,O(this,Ve)[c]=void 0,c===O(this,Sn))Be(this,Sn,O(this,Mr)[c]);else if(c===O(this,$n))Be(this,$n,O(this,tr)[c]);else{const u=O(this,Mr)[c];O(this,tr)[u]=O(this,tr)[c];const d=O(this,tr)[c];O(this,Mr)[d]=O(this,Mr)[c]}Pf(this,gn)._--,O(this,Ri).push(c)}}if(O(this,nr)&&((s=O(this,kn))!=null&&s.length)){const c=O(this,kn);let l;for(;l=c==null?void 0:c.shift();)(a=O(this,Ei))==null||a.call(this,...l)}return r},SC=function(e){var n,r,i;for(const o of Ee(this,me,ea).call(this,{allowStale:!0})){const s=O(this,Ve)[o];if(Ee(this,me,Ft).call(this,s))s.__abortController.abort(new Error("deleted"));else{const a=O(this,Ot)[o];O(this,Pi)&&((n=O(this,ki))==null||n.call(this,s,a,e)),O(this,nr)&&((r=O(this,kn))==null||r.push([s,a,e]))}}if(O(this,fn).clear(),O(this,Ve).fill(void 0),O(this,Ot).fill(void 0),O(this,Lr)&&O(this,Di)&&(O(this,Lr).fill(0),O(this,Di).fill(0)),O(this,_i)&&O(this,_i).fill(0),Be(this,$n,0),Be(this,Sn,0),O(this,Ri).length=0,Be(this,Ti,0),Be(this,gn,0),O(this,nr)&&O(this,kn)){const o=O(this,kn);let s;for(;s=o==null?void 0:o.shift();)(i=O(this,Ei))==null||i.call(this,...s)}};let IC=zx;function aU(t){const e=t.match(/^#\$#(\S+)(?:\s+(\S{6})\s+)?(.*)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#name [authKey] keyval*'\nGot `"+t+"`"),null;const n=e[1],r=e[2],i={},o=/(\S+)\s*:\s*"([^"]*)"|(\S+)\s*:\s*(\S+)/g;let s;for(;s=o.exec(e[3]);){const a=s[1]||s[3],c=s[2]||s[4];a in i?console.log(`Invalid message format: duplicate key ${a} detected`):i[a]=c}return{name:n,authKey:r,keyvals:i}}function QA(t){const e=t.match(/^#\$#\*\s(\S+)\s(\S+)\s*:\s*(.+)$|^#\$#:\s(\S+)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#* datatag keyval'\nGot `"+t+"`"),null;const n=e[1]||e[4],r=void 0,i=e[2],o=e[3],s={};return s[i]=o,{name:n,authKey:r,keyvals:s}}function ew(){return(Math.random()+1).toString(36).substring(3,9)}class du{constructor(e){L(this,"packageName");L(this,"minVersion",1);L(this,"maxVersion",1);L(this,"packageVersion",0);L(this,"client");this.client=e}handle(e){throw new Error("Method not implemented.")}handleMultiline(e){throw new Error("Method not implemented.")}closeMultiline(e){throw new Error("Method not implemented.")}shutdown(){}send(e,n){e.startsWith(this.packageName)||(e=this.packageName+"-"+e),this.client.sendMcp(e,n)}}class cU extends du{constructor(){super(...arguments);L(this,"packageName","mcp-negotiate");L(this,"minVersion",2);L(this,"maxVersion",2)}handle(n){switch(n.name){}}sendNegotiate(){var n,r;for(const i of Object.values(this.client.mcpHandlers)){let o=(n=i.minVersion)==null?void 0:n.toFixed(1),s=(r=i.maxVersion)==null?void 0:r.toFixed(1);this.client.sendMcp("mcp-negotiate-can",{package:i.packageName,"min-version":o,"max-version":s})}this.client.sendCommand("#$#$mcp-negotiate-end")}}class lU extends du{constructor(){super(...arguments);L(this,"packageName","dns-com-awns-status")}handle(n){console.log(n),this.client.emit("statustext",n.keyvals.text)}}class uU extends du{constructor(n){super(n);L(this,"packageName","dns-org-mud-moo-simpleedit");L(this,"currentSession",null)}handle(n){n.name==="dns-org-mud-moo-simpleedit-content"?this.currentSession={name:n.keyvals.name,reference:n.keyvals.reference,type:n.keyvals.type,contents:[]}:console.log(`Unexpected simpleedit message ${n}`)}handleMultiline(n){this.currentSession&&"content"in n.keyvals?this.currentSession.contents.push(n.keyvals.content):console.log(`Unexpected simpleedit ML ${n}`)}closeMultiline(n){console.log(`Closing multiline ${n.name}`),this.currentSession&&(this.client.editors.openEditorWindow(this.currentSession),this.currentSession=null)}}class dU extends du{constructor(){super(...arguments);L(this,"packageName","dns-com-awns-getset");L(this,"id",1);L(this,"cache",new IC({max:10}));L(this,"LocalCache",{})}handle(n){switch(n.name){case"dns-com-awns-getset-ack":const r=this.cache.get(n.keyvals.id);if(r===void 0){console.log(`Got ack for unknown id ${n.keyvals.id}`);break}const i=n.keyvals.value;console.log(`Got ${r} = ${i}`),this.LocalCache[r]=i,this.client.emit("getset",r,i);break}}sendGet(n){const r=(this.id++).toString();this.cache.set(r,n),this.client.sendMcp("dns-com-awns-getset-get",{id:r,property:n})}sendSet(n,r){this.client.sendMcp("dns-com-awns-getset-set",{id:this.id++,property:n,value:r})}sendDrop(n){this.client.sendMcp("dns-com-awns-getset-drop",{id:this.id++,property:n})}}class fU extends du{constructor(){super(...arguments);L(this,"packageName","dns-com-vmoo-userlist");L(this,"maxVersion",1.1);L(this,"player");L(this,"fields",["Object","Name","Icon"]);L(this,"icons",["Idle","Away","Idle+Away","Friend","Newbie","Inhabitant","Inhabitant+","Schooled","Wizard","Key","Star"]);L(this,"players",[])}handle(n){switch(n.name){case"dns-com-vmoo-userlist-you":this.player=n.keyvals.nr;break}}handleMultiline(n){if("fields"in n.keyvals&&(this.fields=Ii(n.keyvals.fields.trim())),"icons"in n.keyvals&&(this.icons=Ii(n.keyvals.icons.trim())),"d"in n.keyvals){const o=n.keyvals.d[0];switch(o){case"=":var r=Ii(n.keyvals.d.slice(1));this.players=r.map(a=>this.playerFromArray(a));break;case"+":this.players.push(this.playerFromArray(Ii(n.keyvals.d.slice(1))));break;case"-":var i=Ii(n.keyvals.d.slice(1));this.players=this.players.filter(a=>!i.includes(a.Object));break;case"*":const s=this.playerFromArray(Ii(n.keyvals.d.slice(1)));this.updatePlayer(s);break;case"<":i=Ii(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!0,this.players[c]=a)});break;case">":i=Ii(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!1,this.players[c]=a)});break;case"[":i=Ii(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!0,this.players[c]=a)});break;case"]":i=Ii(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!1,this.players[c]=a)});break;default:console.log(`Unknown userlist mode ${o} in ${n.keyvals.d}`);break}this.update()}}updatePlayer(n){const r=this.players.findIndex(i=>i.Object===n.Object);r!==-1?this.players[r]=n:this.players.push(n)}update(){this.players.sort((r,i)=>n(i)-n(r)),this.client.emit("userlist",this.players);function n(r){return r.Icon-(r.idle?10:0)-(r.away?20:0)}}playerFromArray(n){const r={};return n.forEach((i,o)=>{r[this.fields[o]]=i}),r.away=!1,r.idle=!1,r}}function Ii(t){t=t.slice(1,-1);let e=[],n="",r=0;for(let o=0;o<t.length;o++){const s=t[o];if(s==="{")r++;else if(s==="}")r--;else if(s===","&&r===0){i(),n="";continue}n+=s}return n.length>0&&i(),e;function i(){n=n.trim(),n.startsWith("{")&&n.endsWith("}")?e.push(Ii(n)):Number.isNaN(Number(n))?n.startsWith('"')&&n.endsWith('"')?e.push(n.slice(1,-1)):e.push(n):e.push(Number(n))}}class hU extends du{constructor(){super(...arguments);L(this,"packageName","dns-com-awns-ping");L(this,"id",1)}handle(n){switch(n.name){case"dns-com-awns-ping":this.send("reply",n.keyvals);break}}ping(){this.send("dns-com-awns-ping",{id:this.id++})}}var kC=(t=>(t.Off="off",t.Unfocused="unfocused",t.All="all",t))(kC||{}),Mo=(t=>(t.SetGeneral="SET_GENERAL",t.SetSpeech="SET_SPEECH",t.SetChannels="SET_CHANNELS",t.SetEditorAutocompleteEnabled="SET_EDITOR_AUTOCOMPLETE_ENABLED",t.SetEditorAccessibilityMode="SET_EDITOR_ACCESSIBILITY_MODE",t))(Mo||{});class pU{constructor(){L(this,"state");L(this,"listeners",new Set);L(this,"dispatch",e=>{this.state=this.reducer(this.state,e),localStorage.setItem("preferences",JSON.stringify(this.state)),this.listeners.forEach(n=>n())});const e=localStorage.getItem("preferences"),n=this.getInitialPreferences();this.state=e?this.mergePreferences(n,JSON.parse(e)):n}getInitialPreferences(){return{general:{localEcho:!1,volume:1},speech:{autoreadMode:"off",voice:"",rate:1,pitch:1,volume:1},channels:{sayto:{autoreadMode:"off",notify:!0}},editor:{autocompleteEnabled:!0,accessibilityMode:!0}}}mergePreferences(e,n){return{...e,general:{...e.general,...n.general},speech:{...e.speech,...n.speech},channels:n.channels?{...e.channels,...n.channels}:e.channels,editor:{...e.editor,...n.editor}}}reducer(e,n){switch(n.type){case"SET_GENERAL":return{...e,general:n.data};case"SET_SPEECH":return{...e,speech:n.data};case"SET_CHANNELS":return{...e,channels:n.data};case"SET_EDITOR_AUTOCOMPLETE_ENABLED":return{...e,editor:{...e.editor,autocompleteEnabled:n.data}};case"SET_EDITOR_ACCESSIBILITY_MODE":return{...e,editor:{...e.editor,accessibilityMode:n.data}};default:return e}}getState(){return this.state}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}}const go=new pU;class gU extends B1{constructor(n){super();L(this,"peerConnection",null);L(this,"dataChannel",null);L(this,"client");L(this,"connectionTimeout",3e5);L(this,"recipient","");L(this,"pendingCandidates",[]);L(this,"remoteOfferReceived",!1);this.client=n}isDataChannelOpen(){return this.dataChannel!==null&&this.dataChannel.readyState==="open"}async createPeerConnection(){try{const n={iceServers:[{urls:["turn:mongoose.world:3478","stun:mongoose.world:3478"],username:"p2p",credential:"p2p"},{urls:"stun:stun.l.google.com:19302"}],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"};this.peerConnection=new RTCPeerConnection(n),this.peerConnection.onconnectionstatechange=()=>{var i;const r=(i=this.peerConnection)==null?void 0:i.connectionState;switch(console.log("[WebRTCService] Connection state changed to:",r),this.emit("webRTCStateChange",`Connection: ${r}`),r){case"connected":console.log("[WebRTCService] Peer connection established successfully"),this.emit("webRTCConnected");break;case"disconnected":console.log("[WebRTCService] Connection temporarily disconnected"),this.emit("webRTCDisconnected"),setTimeout(()=>{var o;((o=this.peerConnection)==null?void 0:o.connectionState)==="disconnected"&&this.attemptRecovery()},5e3);break;case"failed":console.log("[WebRTCService] Connection failed - attempting immediate recovery"),this.attemptRecovery();break}},this.peerConnection.oniceconnectionstatechange=()=>{var i;const r=(i=this.peerConnection)==null?void 0:i.iceConnectionState;console.log("[WebRTCService] ICE connection state changed to:",r),this.emit("webRTCStateChange",`ICE: ${r}`),r==="failed"&&(console.log("[WebRTCService] ICE connection failed"),this.attemptRecovery())},this.peerConnection.onsignalingstatechange=()=>{var i;const r=(i=this.peerConnection)==null?void 0:i.signalingState;console.log("[WebRTCService] Signaling state changed to:",r),this.emit("webRTCStateChange",`Signaling: ${r}`),r==="stable"&&console.log("[WebRTCService] Signaling completed successfully")},this.peerConnection.onicegatheringstatechange=()=>{var i;const r=(i=this.peerConnection)==null?void 0:i.iceGatheringState;console.log("[WebRTCService] ICE gathering state changed to:",r),this.emit("webRTCStateChange",`ICE Gathering: ${r}`),r==="complete"&&(console.log("[WebRTCService] ICE gathering completed"),this.emit("iceGatheringComplete"))},this.peerConnection.onicecandidate=r=>{r.candidate?(console.debug("[WebRTCService] New ICE candidate:",{type:r.candidate.type,protocol:r.candidate.protocol,address:r.candidate.address,port:r.candidate.port}),this.recipient&&this.client.gmcp_fileTransfer.sendCandidate(this.recipient,r.candidate)):console.log("[WebRTCService] ICE gathering complete")},this.peerConnection.ondatachannel=r=>{console.log("[WebRTCService] Received data channel"),this.dataChannel=r.channel,this.setupDataChannel()},this.dataChannel||(console.log("[WebRTCService] Creating data channel"),this.dataChannel=this.peerConnection.createDataChannel("fileTransfer",{ordered:!0}),this.setupDataChannel())}catch(n){throw console.error("Error creating peer connection:",n),n}}setupDataChannel(){this.dataChannel&&(this.dataChannel.onopen=()=>{var n;console.log("[WebRTCService] Data channel opened with state:",(n=this.dataChannel)==null?void 0:n.readyState),this.emit("dataChannelOpen")},this.dataChannel.onclose=()=>{console.log("[WebRTCService] Data channel closed"),this.emit("dataChannelClose")},this.dataChannel.onerror=n=>{console.error("[WebRTCService] Data channel error:",n),this.emit("dataChannelError",n)},this.dataChannel.onmessage=n=>{n.data instanceof ArrayBuffer&&this.emit("dataChannelMessage",n.data)})}async attemptRecovery(){try{console.log("[WebRTCService] Attempting connection recovery"),this.close(),await new Promise(n=>setTimeout(n,1e3)),await this.createPeerConnection(),console.log("[WebRTCService] Recovery attempt completed")}catch(n){console.error("[WebRTCService] Recovery attempt failed:",n)}}async attemptChannelRecovery(){var n;try{this.dataChannel=((n=this.peerConnection)==null?void 0:n.createDataChannel("fileTransfer"))??null,this.setupDataChannel()}catch(r){console.error("Failed to recover data channel:",r),this.emit("dataChannelRecoveryFailed",r)}}async sendData(n){if(!this.dataChannel)throw new Error("Data channel not initialized");if(this.dataChannel.readyState!=="open")throw new Error("Data channel is not open");try{for(;this.dataChannel.bufferedAmount>1048576;)await new Promise(i=>{var s;const o=()=>{var a;(a=this.dataChannel)==null||a.removeEventListener("bufferedamountlow",o),i()};(s=this.dataChannel)==null||s.addEventListener("bufferedamountlow",o),this.dataChannel.bufferedAmountLowThreshold=1048576/2});this.dataChannel.send(n)}catch(r){throw console.error("[WebRTCService] Error sending data:",r),r}}async createOffer(){if(!this.peerConnection)throw new Error("Peer connection not initialized");try{const n=await this.peerConnection.createOffer();return await this.peerConnection.setLocalDescription(n),n}catch(n){throw console.error("Error creating offer:",n),n}}async createAnswer(){if(!this.peerConnection)throw new Error("Peer connection not initialized");try{const n=await this.peerConnection.createAnswer();return await this.peerConnection.setLocalDescription(n),n}catch(n){throw console.error("Error creating answer:",n),n}}async handleAnswer(n){if(!this.peerConnection)throw new Error("Peer connection not initialized");try{console.log("[WebRTCService] Received WebRTC answer:",n),console.log("[WebRTCService] Current connection state:",this.peerConnection.connectionState),console.log("[WebRTCService] Current signaling state:",this.peerConnection.signalingState),await this.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),console.log("[WebRTCService] Remote description set successfully"),console.log("[WebRTCService] Updated connection state:",this.peerConnection.connectionState),console.log("[WebRTCService] Updated signaling state:",this.peerConnection.signalingState),this.pendingCandidates.length>0?(console.log(`[WebRTCService] Adding ${this.pendingCandidates.length} pending ICE candidates`),await Promise.all(this.pendingCandidates.map(async(r,i)=>{console.log(`[WebRTCService] Adding ICE candidate ${i+1}/${this.pendingCandidates.length}`),await this.peerConnection.addIceCandidate(new RTCIceCandidate(r))})),console.log("[WebRTCService] All pending ICE candidates added successfully"),this.pendingCandidates=[]):console.log("[WebRTCService] No pending ICE candidates to add")}catch(r){throw console.error("Error handling answer:",r),r}}async handleIceCandidate(n){if(!this.peerConnection||!this.peerConnection.remoteDescription){console.log("[WebRTCService] Storing ICE candidate until peer connection is ready"),this.pendingCandidates.push(n);return}try{console.log("[WebRTCService] Adding ICE candidate immediately"),await this.peerConnection.addIceCandidate(new RTCIceCandidate(n))}catch(r){throw console.error("Error handling ICE candidate:",r),r}}async reconnect(){this.close(),await this.createPeerConnection(),this.emit("webRTCReconnecting")}close(){this.pendingCandidates=[],this.dataChannel&&(this.dataChannel.close(),this.dataChannel=null),this.peerConnection&&(this.peerConnection.close(),this.peerConnection=null),this.emit("webRTCClosed")}async waitForConnection(){return new Promise((n,r)=>{const i=setTimeout(()=>{a(),r(new Error("Connection timeout"))},this.connectionTimeout);if(this.isDataChannelOpen())return clearTimeout(i),n();const o=()=>{clearTimeout(i),a(),n()},s=()=>{var c;((c=this.peerConnection)==null?void 0:c.connectionState)==="failed"&&(clearTimeout(i),a(),r(new Error("Connection failed")))},a=()=>{this.dataChannel&&this.dataChannel.removeEventListener("open",o),this.peerConnection&&this.peerConnection.removeEventListener("connectionstatechange",s)};this.dataChannel&&this.dataChannel.addEventListener("open",o),this.peerConnection&&this.peerConnection.addEventListener("connectionstatechange",s)})}isPeerConnectionInitialized(){var n;return console.log("[WebRTCService] Peer connection state:",(n=this.peerConnection)==null?void 0:n.connectionState),this.peerConnection!==null&&this.peerConnection.connectionState!=="closed"}hasRemoteOffer(){return this.remoteOfferReceived}async waitForRemoteOffer(n=3e4){return console.log("[WebRTCService] Waiting for remote offer..."),new Promise((r,i)=>{const o=setTimeout(()=>{a(),console.log("[WebRTCService] Timeout waiting for remote offer"),i(new Error("Timeout waiting for remote offer"))},n),s=()=>{console.log("[WebRTCService] Remote offer received"),clearTimeout(o),a(),r()},a=()=>{this.client.off("remoteOfferReceived",s)};if(this.remoteOfferReceived){console.log("[WebRTCService] Remote offer already received"),clearTimeout(o),r();return}this.client.on("remoteOfferReceived",s)})}async handleOffer(n){console.log("[WebRTCService] Handling WebRTC offer:",n),this.peerConnection||(console.log("[WebRTCService] Creating new peer connection for offer"),await this.createPeerConnection());try{if(await this.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),this.remoteOfferReceived=!0,this.client.emit("remoteOfferReceived"),console.log("[WebRTCService] Remote offer set successfully"),this.pendingCandidates.length>0){console.log(`[WebRTCService] Processing ${this.pendingCandidates.length} pending ICE candidates`);const r=[...this.pendingCandidates];this.pendingCandidates=[];for(const i of r)try{await this.peerConnection.addIceCandidate(new RTCIceCandidate(i)),console.log("[WebRTCService] Successfully added pending ICE candidate")}catch(o){console.warn("[WebRTCService] Failed to add pending ICE candidate:",o)}}}catch(r){throw console.error("[WebRTCService] Error handling offer:",r),r}}}var i_={exports:{}};function mU(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Hg={exports:{}};const vU={},CU=Object.freeze(Object.defineProperty({__proto__:null,default:vU},Symbol.toStringTag,{value:"Module"})),yU=m3(CU);var tw;function rt(){return tw||(tw=1,function(t,e){(function(n,r){t.exports=r()})(ze,function(){var n=n||function(r,i){var o;if(typeof window<"u"&&window.crypto&&(o=window.crypto),typeof self<"u"&&self.crypto&&(o=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(o=globalThis.crypto),!o&&typeof window<"u"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof ze<"u"&&ze.crypto&&(o=ze.crypto),!o&&typeof mU=="function")try{o=yU}catch{}var s=function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},a=Object.create||function(){function m(){}return function(y){var I;return m.prototype=y,I=new m,m.prototype=null,I}}(),c={},l=c.lib={},u=l.Base=function(){return{extend:function(m){var y=a(this);return m&&y.mixIn(m),(!y.hasOwnProperty("init")||this.init===y.init)&&(y.init=function(){y.$super.init.apply(this,arguments)}),y.init.prototype=y,y.$super=this,y},create:function(){var m=this.extend();return m.init.apply(m,arguments),m},init:function(){},mixIn:function(m){for(var y in m)m.hasOwnProperty(y)&&(this[y]=m[y]);m.hasOwnProperty("toString")&&(this.toString=m.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),d=l.WordArray=u.extend({init:function(m,y){m=this.words=m||[],y!=i?this.sigBytes=y:this.sigBytes=m.length*4},toString:function(m){return(m||h).stringify(this)},concat:function(m){var y=this.words,I=m.words,b=this.sigBytes,A=m.sigBytes;if(this.clamp(),b%4)for(var E=0;E<A;E++){var k=I[E>>>2]>>>24-E%4*8&255;y[b+E>>>2]|=k<<24-(b+E)%4*8}else for(var D=0;D<A;D+=4)y[b+D>>>2]=I[D>>>2];return this.sigBytes+=A,this},clamp:function(){var m=this.words,y=this.sigBytes;m[y>>>2]&=4294967295<<32-y%4*8,m.length=r.ceil(y/4)},clone:function(){var m=u.clone.call(this);return m.words=this.words.slice(0),m},random:function(m){for(var y=[],I=0;I<m;I+=4)y.push(s());return new d.init(y,m)}}),f=c.enc={},h=f.Hex={stringify:function(m){for(var y=m.words,I=m.sigBytes,b=[],A=0;A<I;A++){var E=y[A>>>2]>>>24-A%4*8&255;b.push((E>>>4).toString(16)),b.push((E&15).toString(16))}return b.join("")},parse:function(m){for(var y=m.length,I=[],b=0;b<y;b+=2)I[b>>>3]|=parseInt(m.substr(b,2),16)<<24-b%8*4;return new d.init(I,y/2)}},p=f.Latin1={stringify:function(m){for(var y=m.words,I=m.sigBytes,b=[],A=0;A<I;A++){var E=y[A>>>2]>>>24-A%4*8&255;b.push(String.fromCharCode(E))}return b.join("")},parse:function(m){for(var y=m.length,I=[],b=0;b<y;b++)I[b>>>2]|=(m.charCodeAt(b)&255)<<24-b%4*8;return new d.init(I,y)}},g=f.Utf8={stringify:function(m){try{return decodeURIComponent(escape(p.stringify(m)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(m){return p.parse(unescape(encodeURIComponent(m)))}},C=l.BufferedBlockAlgorithm=u.extend({reset:function(){this._data=new d.init,this._nDataBytes=0},_append:function(m){typeof m=="string"&&(m=g.parse(m)),this._data.concat(m),this._nDataBytes+=m.sigBytes},_process:function(m){var y,I=this._data,b=I.words,A=I.sigBytes,E=this.blockSize,k=E*4,D=A/k;m?D=r.ceil(D):D=r.max((D|0)-this._minBufferSize,0);var T=D*E,R=r.min(T*4,A);if(T){for(var P=0;P<T;P+=E)this._doProcessBlock(b,P);y=b.splice(0,T),I.sigBytes-=R}return new d.init(y,R)},clone:function(){var m=u.clone.call(this);return m._data=this._data.clone(),m},_minBufferSize:0});l.Hasher=C.extend({cfg:u.extend(),init:function(m){this.cfg=this.cfg.extend(m),this.reset()},reset:function(){C.reset.call(this),this._doReset()},update:function(m){return this._append(m),this._process(),this},finalize:function(m){m&&this._append(m);var y=this._doFinalize();return y},blockSize:16,_createHelper:function(m){return function(y,I){return new m.init(I).finalize(y)}},_createHmacHelper:function(m){return function(y,I){return new v.HMAC.init(m,I).finalize(y)}}});var v=c.algo={};return c}(Math);return n})}(Hg)),Hg.exports}var Zg={exports:{}},nw;function Lp(){return nw||(nw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(r){var i=n,o=i.lib,s=o.Base,a=o.WordArray,c=i.x64={};c.Word=s.extend({init:function(l,u){this.high=l,this.low=u}}),c.WordArray=s.extend({init:function(l,u){l=this.words=l||[],u!=r?this.sigBytes=u:this.sigBytes=l.length*8},toX32:function(){for(var l=this.words,u=l.length,d=[],f=0;f<u;f++){var h=l[f];d.push(h.high),d.push(h.low)}return a.create(d,this.sigBytes)},clone:function(){for(var l=s.clone.call(this),u=l.words=this.words.slice(0),d=u.length,f=0;f<d;f++)u[f]=u[f].clone();return l}})}(),n})}(Zg)),Zg.exports}var $g={exports:{}},rw;function xU(){return rw||(rw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(){if(typeof ArrayBuffer=="function"){var r=n,i=r.lib,o=i.WordArray,s=o.init,a=o.init=function(c){if(c instanceof ArrayBuffer&&(c=new Uint8Array(c)),(c instanceof Int8Array||typeof Uint8ClampedArray<"u"&&c instanceof Uint8ClampedArray||c instanceof Int16Array||c instanceof Uint16Array||c instanceof Int32Array||c instanceof Uint32Array||c instanceof Float32Array||c instanceof Float64Array)&&(c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength)),c instanceof Uint8Array){for(var l=c.byteLength,u=[],d=0;d<l;d++)u[d>>>2]|=c[d]<<24-d%4*8;s.call(this,u,l)}else s.apply(this,arguments)};a.prototype=o}}(),n.lib.WordArray})}($g)),$g.exports}var Xg={exports:{}},iw;function IU(){return iw||(iw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Utf16=s.Utf16BE={stringify:function(c){for(var l=c.words,u=c.sigBytes,d=[],f=0;f<u;f+=2){var h=l[f>>>2]>>>16-f%4*8&65535;d.push(String.fromCharCode(h))}return d.join("")},parse:function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=c.charCodeAt(d)<<16-d%2*16;return o.create(u,l*2)}},s.Utf16LE={stringify:function(c){for(var l=c.words,u=c.sigBytes,d=[],f=0;f<u;f+=2){var h=a(l[f>>>2]>>>16-f%4*8&65535);d.push(String.fromCharCode(h))}return d.join("")},parse:function(c){for(var l=c.length,u=[],d=0;d<l;d++)u[d>>>1]|=a(c.charCodeAt(d)<<16-d%2*16);return o.create(u,l*2)}};function a(c){return c<<8&4278255360|c>>>8&16711935}}(),n.enc.Utf16})}(Xg)),Xg.exports}var Kg={exports:{}},ow;function Lc(){return ow||(ow=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Base64={stringify:function(c){var l=c.words,u=c.sigBytes,d=this._map;c.clamp();for(var f=[],h=0;h<u;h+=3)for(var p=l[h>>>2]>>>24-h%4*8&255,g=l[h+1>>>2]>>>24-(h+1)%4*8&255,C=l[h+2>>>2]>>>24-(h+2)%4*8&255,v=p<<16|g<<8|C,m=0;m<4&&h+m*.75<u;m++)f.push(d.charAt(v>>>6*(3-m)&63));var y=d.charAt(64);if(y)for(;f.length%4;)f.push(y);return f.join("")},parse:function(c){var l=c.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var f=0;f<u.length;f++)d[u.charCodeAt(f)]=f}var h=u.charAt(64);if(h){var p=c.indexOf(h);p!==-1&&(l=p)}return a(c,l,d)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(c,l,u){for(var d=[],f=0,h=0;h<l;h++)if(h%4){var p=u[c.charCodeAt(h-1)]<<h%4*2,g=u[c.charCodeAt(h)]>>>6-h%4*2,C=p|g;d[f>>>2]|=C<<24-f%4*8,f++}return o.create(d,f)}}(),n.enc.Base64})}(Kg)),Kg.exports}var Jg={exports:{}},sw;function bU(){return sw||(sw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.enc;s.Base64url={stringify:function(c,l){l===void 0&&(l=!0);var u=c.words,d=c.sigBytes,f=l?this._safe_map:this._map;c.clamp();for(var h=[],p=0;p<d;p+=3)for(var g=u[p>>>2]>>>24-p%4*8&255,C=u[p+1>>>2]>>>24-(p+1)%4*8&255,v=u[p+2>>>2]>>>24-(p+2)%4*8&255,m=g<<16|C<<8|v,y=0;y<4&&p+y*.75<d;y++)h.push(f.charAt(m>>>6*(3-y)&63));var I=f.charAt(64);if(I)for(;h.length%4;)h.push(I);return h.join("")},parse:function(c,l){l===void 0&&(l=!0);var u=c.length,d=l?this._safe_map:this._map,f=this._reverseMap;if(!f){f=this._reverseMap=[];for(var h=0;h<d.length;h++)f[d.charCodeAt(h)]=h}var p=d.charAt(64);if(p){var g=c.indexOf(p);g!==-1&&(u=g)}return a(c,u,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(c,l,u){for(var d=[],f=0,h=0;h<l;h++)if(h%4){var p=u[c.charCodeAt(h-1)]<<h%4*2,g=u[c.charCodeAt(h)]>>>6-h%4*2,C=p|g;d[f>>>2]|=C<<24-f%4*8,f++}return o.create(d,f)}}(),n.enc.Base64url})}(Jg)),Jg.exports}var Yg={exports:{}},aw;function Uc(){return aw||(aw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,c=i.algo,l=[];(function(){for(var g=0;g<64;g++)l[g]=r.abs(r.sin(g+1))*4294967296|0})();var u=c.MD5=a.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(g,C){for(var v=0;v<16;v++){var m=C+v,y=g[m];g[m]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360}var I=this._hash.words,b=g[C+0],A=g[C+1],E=g[C+2],k=g[C+3],D=g[C+4],T=g[C+5],R=g[C+6],P=g[C+7],M=g[C+8],G=g[C+9],j=g[C+10],Q=g[C+11],te=g[C+12],$=g[C+13],q=g[C+14],ne=g[C+15],F=I[0],z=I[1],K=I[2],ee=I[3];F=d(F,z,K,ee,b,7,l[0]),ee=d(ee,F,z,K,A,12,l[1]),K=d(K,ee,F,z,E,17,l[2]),z=d(z,K,ee,F,k,22,l[3]),F=d(F,z,K,ee,D,7,l[4]),ee=d(ee,F,z,K,T,12,l[5]),K=d(K,ee,F,z,R,17,l[6]),z=d(z,K,ee,F,P,22,l[7]),F=d(F,z,K,ee,M,7,l[8]),ee=d(ee,F,z,K,G,12,l[9]),K=d(K,ee,F,z,j,17,l[10]),z=d(z,K,ee,F,Q,22,l[11]),F=d(F,z,K,ee,te,7,l[12]),ee=d(ee,F,z,K,$,12,l[13]),K=d(K,ee,F,z,q,17,l[14]),z=d(z,K,ee,F,ne,22,l[15]),F=f(F,z,K,ee,A,5,l[16]),ee=f(ee,F,z,K,R,9,l[17]),K=f(K,ee,F,z,Q,14,l[18]),z=f(z,K,ee,F,b,20,l[19]),F=f(F,z,K,ee,T,5,l[20]),ee=f(ee,F,z,K,j,9,l[21]),K=f(K,ee,F,z,ne,14,l[22]),z=f(z,K,ee,F,D,20,l[23]),F=f(F,z,K,ee,G,5,l[24]),ee=f(ee,F,z,K,q,9,l[25]),K=f(K,ee,F,z,k,14,l[26]),z=f(z,K,ee,F,M,20,l[27]),F=f(F,z,K,ee,$,5,l[28]),ee=f(ee,F,z,K,E,9,l[29]),K=f(K,ee,F,z,P,14,l[30]),z=f(z,K,ee,F,te,20,l[31]),F=h(F,z,K,ee,T,4,l[32]),ee=h(ee,F,z,K,M,11,l[33]),K=h(K,ee,F,z,Q,16,l[34]),z=h(z,K,ee,F,q,23,l[35]),F=h(F,z,K,ee,A,4,l[36]),ee=h(ee,F,z,K,D,11,l[37]),K=h(K,ee,F,z,P,16,l[38]),z=h(z,K,ee,F,j,23,l[39]),F=h(F,z,K,ee,$,4,l[40]),ee=h(ee,F,z,K,b,11,l[41]),K=h(K,ee,F,z,k,16,l[42]),z=h(z,K,ee,F,R,23,l[43]),F=h(F,z,K,ee,G,4,l[44]),ee=h(ee,F,z,K,te,11,l[45]),K=h(K,ee,F,z,ne,16,l[46]),z=h(z,K,ee,F,E,23,l[47]),F=p(F,z,K,ee,b,6,l[48]),ee=p(ee,F,z,K,P,10,l[49]),K=p(K,ee,F,z,q,15,l[50]),z=p(z,K,ee,F,T,21,l[51]),F=p(F,z,K,ee,te,6,l[52]),ee=p(ee,F,z,K,k,10,l[53]),K=p(K,ee,F,z,j,15,l[54]),z=p(z,K,ee,F,A,21,l[55]),F=p(F,z,K,ee,M,6,l[56]),ee=p(ee,F,z,K,ne,10,l[57]),K=p(K,ee,F,z,R,15,l[58]),z=p(z,K,ee,F,$,21,l[59]),F=p(F,z,K,ee,D,6,l[60]),ee=p(ee,F,z,K,Q,10,l[61]),K=p(K,ee,F,z,E,15,l[62]),z=p(z,K,ee,F,G,21,l[63]),I[0]=I[0]+F|0,I[1]=I[1]+z|0,I[2]=I[2]+K|0,I[3]=I[3]+ee|0},_doFinalize:function(){var g=this._data,C=g.words,v=this._nDataBytes*8,m=g.sigBytes*8;C[m>>>5]|=128<<24-m%32;var y=r.floor(v/4294967296),I=v;C[(m+64>>>9<<4)+15]=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,C[(m+64>>>9<<4)+14]=(I<<8|I>>>24)&16711935|(I<<24|I>>>8)&4278255360,g.sigBytes=(C.length+1)*4,this._process();for(var b=this._hash,A=b.words,E=0;E<4;E++){var k=A[E];A[E]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360}return b},clone:function(){var g=a.clone.call(this);return g._hash=this._hash.clone(),g}});function d(g,C,v,m,y,I,b){var A=g+(C&v|~C&m)+y+b;return(A<<I|A>>>32-I)+C}function f(g,C,v,m,y,I,b){var A=g+(C&m|v&~m)+y+b;return(A<<I|A>>>32-I)+C}function h(g,C,v,m,y,I,b){var A=g+(C^v^m)+y+b;return(A<<I|A>>>32-I)+C}function p(g,C,v,m,y,I,b){var A=g+(v^(C|~m))+y+b;return(A<<I|A>>>32-I)+C}i.MD5=a._createHelper(u),i.HmacMD5=a._createHmacHelper(u)}(Math),n.MD5})}(Yg)),Yg.exports}var qg={exports:{}},cw;function o_(){return cw||(cw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=i.Hasher,a=r.algo,c=[],l=a.SHA1=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,d){for(var f=this._hash.words,h=f[0],p=f[1],g=f[2],C=f[3],v=f[4],m=0;m<80;m++){if(m<16)c[m]=u[d+m]|0;else{var y=c[m-3]^c[m-8]^c[m-14]^c[m-16];c[m]=y<<1|y>>>31}var I=(h<<5|h>>>27)+v+c[m];m<20?I+=(p&g|~p&C)+1518500249:m<40?I+=(p^g^C)+1859775393:m<60?I+=(p&g|p&C|g&C)-1894007588:I+=(p^g^C)-899497514,v=C,C=g,g=p<<30|p>>>2,p=h,h=I}f[0]=f[0]+h|0,f[1]=f[1]+p|0,f[2]=f[2]+g|0,f[3]=f[3]+C|0,f[4]=f[4]+v|0},_doFinalize:function(){var u=this._data,d=u.words,f=this._nDataBytes*8,h=u.sigBytes*8;return d[h>>>5]|=128<<24-h%32,d[(h+64>>>9<<4)+14]=Math.floor(f/4294967296),d[(h+64>>>9<<4)+15]=f,u.sigBytes=d.length*4,this._process(),this._hash},clone:function(){var u=s.clone.call(this);return u._hash=this._hash.clone(),u}});r.SHA1=s._createHelper(l),r.HmacSHA1=s._createHmacHelper(l)}(),n.SHA1})}(qg)),qg.exports}var Qg={exports:{}},lw;function tx(){return lw||(lw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,c=i.algo,l=[],u=[];(function(){function h(v){for(var m=r.sqrt(v),y=2;y<=m;y++)if(!(v%y))return!1;return!0}function p(v){return(v-(v|0))*4294967296|0}for(var g=2,C=0;C<64;)h(g)&&(C<8&&(l[C]=p(r.pow(g,1/2))),u[C]=p(r.pow(g,1/3)),C++),g++})();var d=[],f=c.SHA256=a.extend({_doReset:function(){this._hash=new s.init(l.slice(0))},_doProcessBlock:function(h,p){for(var g=this._hash.words,C=g[0],v=g[1],m=g[2],y=g[3],I=g[4],b=g[5],A=g[6],E=g[7],k=0;k<64;k++){if(k<16)d[k]=h[p+k]|0;else{var D=d[k-15],T=(D<<25|D>>>7)^(D<<14|D>>>18)^D>>>3,R=d[k-2],P=(R<<15|R>>>17)^(R<<13|R>>>19)^R>>>10;d[k]=T+d[k-7]+P+d[k-16]}var M=I&b^~I&A,G=C&v^C&m^v&m,j=(C<<30|C>>>2)^(C<<19|C>>>13)^(C<<10|C>>>22),Q=(I<<26|I>>>6)^(I<<21|I>>>11)^(I<<7|I>>>25),te=E+Q+M+u[k]+d[k],$=j+G;E=A,A=b,b=I,I=y+te|0,y=m,m=v,v=C,C=te+$|0}g[0]=g[0]+C|0,g[1]=g[1]+v|0,g[2]=g[2]+m|0,g[3]=g[3]+y|0,g[4]=g[4]+I|0,g[5]=g[5]+b|0,g[6]=g[6]+A|0,g[7]=g[7]+E|0},_doFinalize:function(){var h=this._data,p=h.words,g=this._nDataBytes*8,C=h.sigBytes*8;return p[C>>>5]|=128<<24-C%32,p[(C+64>>>9<<4)+14]=r.floor(g/4294967296),p[(C+64>>>9<<4)+15]=g,h.sigBytes=p.length*4,this._process(),this._hash},clone:function(){var h=a.clone.call(this);return h._hash=this._hash.clone(),h}});i.SHA256=a._createHelper(f),i.HmacSHA256=a._createHmacHelper(f)}(Math),n.SHA256})}(Qg)),Qg.exports}var em={exports:{}},uw;function AU(){return uw||(uw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),tx())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=r.algo,a=s.SHA256,c=s.SHA224=a.extend({_doReset:function(){this._hash=new o.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var l=a._doFinalize.call(this);return l.sigBytes-=4,l}});r.SHA224=a._createHelper(c),r.HmacSHA224=a._createHmacHelper(c)}(),n.SHA224})}(em)),em.exports}var tm={exports:{}},dw;function s_(){return dw||(dw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lp())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.Hasher,s=r.x64,a=s.Word,c=s.WordArray,l=r.algo;function u(){return a.create.apply(a,arguments)}var d=[u(1116352408,3609767458),u(1899447441,602891725),u(3049323471,3964484399),u(3921009573,2173295548),u(961987163,4081628472),u(1508970993,3053834265),u(2453635748,2937671579),u(2870763221,3664609560),u(3624381080,2734883394),u(310598401,1164996542),u(607225278,1323610764),u(1426881987,3590304994),u(1925078388,4068182383),u(2162078206,991336113),u(2614888103,633803317),u(3248222580,3479774868),u(3835390401,2666613458),u(4022224774,944711139),u(264347078,2341262773),u(604807628,2007800933),u(770255983,1495990901),u(1249150122,1856431235),u(1555081692,3175218132),u(1996064986,2198950837),u(2554220882,3999719339),u(2821834349,766784016),u(2952996808,2566594879),u(3210313671,3203337956),u(3336571891,1034457026),u(3584528711,2466948901),u(113926993,3758326383),u(338241895,168717936),u(666307205,1188179964),u(773529912,1546045734),u(1294757372,1522805485),u(1396182291,2643833823),u(1695183700,2343527390),u(1986661051,1014477480),u(2177026350,1206759142),u(2456956037,344077627),u(2730485921,1290863460),u(2820302411,3158454273),u(3259730800,3505952657),u(3345764771,106217008),u(3516065817,3606008344),u(3600352804,1432725776),u(4094571909,1467031594),u(275423344,851169720),u(430227734,3100823752),u(506948616,1363258195),u(659060556,3750685593),u(883997877,3785050280),u(958139571,3318307427),u(1322822218,3812723403),u(1537002063,2003034995),u(1747873779,3602036899),u(1955562222,1575990012),u(2024104815,1125592928),u(2227730452,2716904306),u(2361852424,442776044),u(2428436474,593698344),u(2756734187,3733110249),u(3204031479,2999351573),u(3329325298,3815920427),u(3391569614,3928383900),u(3515267271,566280711),u(3940187606,3454069534),u(4118630271,4000239992),u(116418474,1914138554),u(174292421,2731055270),u(289380356,3203993006),u(460393269,320620315),u(685471733,587496836),u(852142971,1086792851),u(1017036298,365543100),u(1126000580,2618297676),u(1288033470,3409855158),u(1501505948,4234509866),u(1607167915,987167468),u(1816402316,1246189591)],f=[];(function(){for(var p=0;p<80;p++)f[p]=u()})();var h=l.SHA512=o.extend({_doReset:function(){this._hash=new c.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(p,g){for(var C=this._hash.words,v=C[0],m=C[1],y=C[2],I=C[3],b=C[4],A=C[5],E=C[6],k=C[7],D=v.high,T=v.low,R=m.high,P=m.low,M=y.high,G=y.low,j=I.high,Q=I.low,te=b.high,$=b.low,q=A.high,ne=A.low,F=E.high,z=E.low,K=k.high,ee=k.low,ae=D,ge=T,Fe=R,le=P,Pt=M,Gt=G,ot=j,ut=Q,mt=te,st=$,he=q,xe=ne,Ue=F,Le=z,Ne=K,je=ee,it=0;it<80;it++){var Ye,pt,Yt=f[it];if(it<16)pt=Yt.high=p[g+it*2]|0,Ye=Yt.low=p[g+it*2+1]|0;else{var Ht=f[it-15],tn=Ht.high,_=Ht.low,x=(tn>>>1|_<<31)^(tn>>>8|_<<24)^tn>>>7,w=(_>>>1|tn<<31)^(_>>>8|tn<<24)^(_>>>7|tn<<25),B=f[it-2],W=B.high,X=B.low,re=(W>>>19|X<<13)^(W<<3|X>>>29)^W>>>6,Pe=(X>>>19|W<<13)^(X<<3|W>>>29)^(X>>>6|W<<26),tt=f[it-7],dt=tt.high,ht=tt.low,Xe=f[it-16],to=Xe.high,js=Xe.low;Ye=w+ht,pt=x+dt+(Ye>>>0<w>>>0?1:0),Ye=Ye+Pe,pt=pt+re+(Ye>>>0<Pe>>>0?1:0),Ye=Ye+js,pt=pt+to+(Ye>>>0<js>>>0?1:0),Yt.high=pt,Yt.low=Ye}var ja=mt&he^~mt&Ue,Zt=st&xe^~st&Le,Ci=ae&Fe^ae&Pt^Fe&Pt,yu=ge&le^ge&Gt^le&Gt,Ha=(ae>>>28|ge<<4)^(ae<<30|ge>>>2)^(ae<<25|ge>>>7),yi=(ge>>>28|ae<<4)^(ge<<30|ae>>>2)^(ge<<25|ae>>>7),Ho=(mt>>>14|st<<18)^(mt>>>18|st<<14)^(mt<<23|st>>>9),Wc=(st>>>14|mt<<18)^(st>>>18|mt<<14)^(st<<23|mt>>>9),zc=d[it],U=zc.high,H=zc.low,J=je+Wc,oe=Ne+Ho+(J>>>0<je>>>0?1:0),J=J+Zt,oe=oe+ja+(J>>>0<Zt>>>0?1:0),J=J+H,oe=oe+U+(J>>>0<H>>>0?1:0),J=J+Ye,oe=oe+pt+(J>>>0<Ye>>>0?1:0),Ce=yi+yu,Re=Ha+Ci+(Ce>>>0<yi>>>0?1:0);Ne=Ue,je=Le,Ue=he,Le=xe,he=mt,xe=st,st=ut+J|0,mt=ot+oe+(st>>>0<ut>>>0?1:0)|0,ot=Pt,ut=Gt,Pt=Fe,Gt=le,Fe=ae,le=ge,ge=J+Ce|0,ae=oe+Re+(ge>>>0<J>>>0?1:0)|0}T=v.low=T+ge,v.high=D+ae+(T>>>0<ge>>>0?1:0),P=m.low=P+le,m.high=R+Fe+(P>>>0<le>>>0?1:0),G=y.low=G+Gt,y.high=M+Pt+(G>>>0<Gt>>>0?1:0),Q=I.low=Q+ut,I.high=j+ot+(Q>>>0<ut>>>0?1:0),$=b.low=$+st,b.high=te+mt+($>>>0<st>>>0?1:0),ne=A.low=ne+xe,A.high=q+he+(ne>>>0<xe>>>0?1:0),z=E.low=z+Le,E.high=F+Ue+(z>>>0<Le>>>0?1:0),ee=k.low=ee+je,k.high=K+Ne+(ee>>>0<je>>>0?1:0)},_doFinalize:function(){var p=this._data,g=p.words,C=this._nDataBytes*8,v=p.sigBytes*8;g[v>>>5]|=128<<24-v%32,g[(v+128>>>10<<5)+30]=Math.floor(C/4294967296),g[(v+128>>>10<<5)+31]=C,p.sigBytes=g.length*4,this._process();var m=this._hash.toX32();return m},clone:function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},blockSize:1024/32});r.SHA512=o._createHelper(h),r.HmacSHA512=o._createHmacHelper(h)}(),n.SHA512})}(tm)),tm.exports}var nm={exports:{}},fw;function wU(){return fw||(fw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lp(),s_())})(ze,function(n){return function(){var r=n,i=r.x64,o=i.Word,s=i.WordArray,a=r.algo,c=a.SHA512,l=a.SHA384=c.extend({_doReset:function(){this._hash=new s.init([new o.init(3418070365,3238371032),new o.init(1654270250,914150663),new o.init(2438529370,812702999),new o.init(355462360,4144912697),new o.init(1731405415,4290775857),new o.init(2394180231,1750603025),new o.init(3675008525,1694076839),new o.init(1203062813,3204075428)])},_doFinalize:function(){var u=c._doFinalize.call(this);return u.sigBytes-=16,u}});r.SHA384=c._createHelper(l),r.HmacSHA384=c._createHmacHelper(l)}(),n.SHA384})}(nm)),nm.exports}var rm={exports:{}},hw;function SU(){return hw||(hw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lp())})(ze,function(n){return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,c=i.x64,l=c.Word,u=i.algo,d=[],f=[],h=[];(function(){for(var C=1,v=0,m=0;m<24;m++){d[C+5*v]=(m+1)*(m+2)/2%64;var y=v%5,I=(2*C+3*v)%5;C=y,v=I}for(var C=0;C<5;C++)for(var v=0;v<5;v++)f[C+5*v]=v+(2*C+3*v)%5*5;for(var b=1,A=0;A<24;A++){for(var E=0,k=0,D=0;D<7;D++){if(b&1){var T=(1<<D)-1;T<32?k^=1<<T:E^=1<<T-32}b&128?b=b<<1^113:b<<=1}h[A]=l.create(E,k)}})();var p=[];(function(){for(var C=0;C<25;C++)p[C]=l.create()})();var g=u.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var C=this._state=[],v=0;v<25;v++)C[v]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(C,v){for(var m=this._state,y=this.blockSize/2,I=0;I<y;I++){var b=C[v+2*I],A=C[v+2*I+1];b=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,A=(A<<8|A>>>24)&16711935|(A<<24|A>>>8)&4278255360;var E=m[I];E.high^=A,E.low^=b}for(var k=0;k<24;k++){for(var D=0;D<5;D++){for(var T=0,R=0,P=0;P<5;P++){var E=m[D+5*P];T^=E.high,R^=E.low}var M=p[D];M.high=T,M.low=R}for(var D=0;D<5;D++)for(var G=p[(D+4)%5],j=p[(D+1)%5],Q=j.high,te=j.low,T=G.high^(Q<<1|te>>>31),R=G.low^(te<<1|Q>>>31),P=0;P<5;P++){var E=m[D+5*P];E.high^=T,E.low^=R}for(var $=1;$<25;$++){var T,R,E=m[$],q=E.high,ne=E.low,F=d[$];F<32?(T=q<<F|ne>>>32-F,R=ne<<F|q>>>32-F):(T=ne<<F-32|q>>>64-F,R=q<<F-32|ne>>>64-F);var z=p[f[$]];z.high=T,z.low=R}var K=p[0],ee=m[0];K.high=ee.high,K.low=ee.low;for(var D=0;D<5;D++)for(var P=0;P<5;P++){var $=D+5*P,E=m[$],ae=p[$],ge=p[(D+1)%5+5*P],Fe=p[(D+2)%5+5*P];E.high=ae.high^~ge.high&Fe.high,E.low=ae.low^~ge.low&Fe.low}var E=m[0],le=h[k];E.high^=le.high,E.low^=le.low}},_doFinalize:function(){var C=this._data,v=C.words;this._nDataBytes*8;var m=C.sigBytes*8,y=this.blockSize*32;v[m>>>5]|=1<<24-m%32,v[(r.ceil((m+1)/y)*y>>>5)-1]|=128,C.sigBytes=v.length*4,this._process();for(var I=this._state,b=this.cfg.outputLength/8,A=b/8,E=[],k=0;k<A;k++){var D=I[k],T=D.high,R=D.low;T=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360,R=(R<<8|R>>>24)&16711935|(R<<24|R>>>8)&4278255360,E.push(R),E.push(T)}return new s.init(E,b)},clone:function(){for(var C=a.clone.call(this),v=C._state=this._state.slice(0),m=0;m<25;m++)v[m]=v[m].clone();return C}});i.SHA3=a._createHelper(g),i.HmacSHA3=a._createHmacHelper(g)}(Math),n.SHA3})}(rm)),rm.exports}var im={exports:{}},pw;function kU(){return pw||(pw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){/** @preserve
			(c) 2012 by Cédric Mesnil. All rights reserved.

			Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:

			    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
			    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.

			THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
			*/return function(r){var i=n,o=i.lib,s=o.WordArray,a=o.Hasher,c=i.algo,l=s.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),u=s.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=s.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),f=s.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=s.create([0,1518500249,1859775393,2400959708,2840853838]),p=s.create([1352829926,1548603684,1836072691,2053994217,0]),g=c.RIPEMD160=a.extend({_doReset:function(){this._hash=s.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(A,E){for(var k=0;k<16;k++){var D=E+k,T=A[D];A[D]=(T<<8|T>>>24)&16711935|(T<<24|T>>>8)&4278255360}var R=this._hash.words,P=h.words,M=p.words,G=l.words,j=u.words,Q=d.words,te=f.words,$,q,ne,F,z,K,ee,ae,ge,Fe;K=$=R[0],ee=q=R[1],ae=ne=R[2],ge=F=R[3],Fe=z=R[4];for(var le,k=0;k<80;k+=1)le=$+A[E+G[k]]|0,k<16?le+=C(q,ne,F)+P[0]:k<32?le+=v(q,ne,F)+P[1]:k<48?le+=m(q,ne,F)+P[2]:k<64?le+=y(q,ne,F)+P[3]:le+=I(q,ne,F)+P[4],le=le|0,le=b(le,Q[k]),le=le+z|0,$=z,z=F,F=b(ne,10),ne=q,q=le,le=K+A[E+j[k]]|0,k<16?le+=I(ee,ae,ge)+M[0]:k<32?le+=y(ee,ae,ge)+M[1]:k<48?le+=m(ee,ae,ge)+M[2]:k<64?le+=v(ee,ae,ge)+M[3]:le+=C(ee,ae,ge)+M[4],le=le|0,le=b(le,te[k]),le=le+Fe|0,K=Fe,Fe=ge,ge=b(ae,10),ae=ee,ee=le;le=R[1]+ne+ge|0,R[1]=R[2]+F+Fe|0,R[2]=R[3]+z+K|0,R[3]=R[4]+$+ee|0,R[4]=R[0]+q+ae|0,R[0]=le},_doFinalize:function(){var A=this._data,E=A.words,k=this._nDataBytes*8,D=A.sigBytes*8;E[D>>>5]|=128<<24-D%32,E[(D+64>>>9<<4)+14]=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360,A.sigBytes=(E.length+1)*4,this._process();for(var T=this._hash,R=T.words,P=0;P<5;P++){var M=R[P];R[P]=(M<<8|M>>>24)&16711935|(M<<24|M>>>8)&4278255360}return T},clone:function(){var A=a.clone.call(this);return A._hash=this._hash.clone(),A}});function C(A,E,k){return A^E^k}function v(A,E,k){return A&E|~A&k}function m(A,E,k){return(A|~E)^k}function y(A,E,k){return A&k|E&~k}function I(A,E,k){return A^(E|~k)}function b(A,E){return A<<E|A>>>32-E}i.RIPEMD160=a._createHelper(g),i.HmacRIPEMD160=a._createHmacHelper(g)}(),n.RIPEMD160})}(im)),im.exports}var om={exports:{}},gw;function nx(){return gw||(gw=1,function(t,e){(function(n,r){t.exports=r(rt())})(ze,function(n){(function(){var r=n,i=r.lib,o=i.Base,s=r.enc,a=s.Utf8,c=r.algo;c.HMAC=o.extend({init:function(l,u){l=this._hasher=new l.init,typeof u=="string"&&(u=a.parse(u));var d=l.blockSize,f=d*4;u.sigBytes>f&&(u=l.finalize(u)),u.clamp();for(var h=this._oKey=u.clone(),p=this._iKey=u.clone(),g=h.words,C=p.words,v=0;v<d;v++)g[v]^=1549556828,C[v]^=909522486;h.sigBytes=p.sigBytes=f,this.reset()},reset:function(){var l=this._hasher;l.reset(),l.update(this._iKey)},update:function(l){return this._hasher.update(l),this},finalize:function(l){var u=this._hasher,d=u.finalize(l);u.reset();var f=u.finalize(this._oKey.clone().concat(d));return f}})})()})}(om)),om.exports}var sm={exports:{}},mw;function EU(){return mw||(mw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),tx(),nx())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.Base,s=i.WordArray,a=r.algo,c=a.SHA256,l=a.HMAC,u=a.PBKDF2=o.extend({cfg:o.extend({keySize:128/32,hasher:c,iterations:25e4}),init:function(d){this.cfg=this.cfg.extend(d)},compute:function(d,f){for(var h=this.cfg,p=l.create(h.hasher,d),g=s.create(),C=s.create([1]),v=g.words,m=C.words,y=h.keySize,I=h.iterations;v.length<y;){var b=p.update(f).finalize(C);p.reset();for(var A=b.words,E=A.length,k=b,D=1;D<I;D++){k=p.finalize(k),p.reset();for(var T=k.words,R=0;R<E;R++)A[R]^=T[R]}g.concat(b),m[0]++}return g.sigBytes=y*4,g}});r.PBKDF2=function(d,f,h){return u.create(h).compute(d,f)}}(),n.PBKDF2})}(sm)),sm.exports}var am={exports:{}},vw;function Ga(){return vw||(vw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),o_(),nx())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.Base,s=i.WordArray,a=r.algo,c=a.MD5,l=a.EvpKDF=o.extend({cfg:o.extend({keySize:128/32,hasher:c,iterations:1}),init:function(u){this.cfg=this.cfg.extend(u)},compute:function(u,d){for(var f,h=this.cfg,p=h.hasher.create(),g=s.create(),C=g.words,v=h.keySize,m=h.iterations;C.length<v;){f&&p.update(f),f=p.update(u).finalize(d),p.reset();for(var y=1;y<m;y++)f=p.finalize(f),p.reset();g.concat(f)}return g.sigBytes=v*4,g}});r.EvpKDF=function(u,d,f){return l.create(f).compute(u,d)}}(),n.EvpKDF})}(am)),am.exports}var cm={exports:{}},Cw;function _n(){return Cw||(Cw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Ga())})(ze,function(n){n.lib.Cipher||function(r){var i=n,o=i.lib,s=o.Base,a=o.WordArray,c=o.BufferedBlockAlgorithm,l=i.enc;l.Utf8;var u=l.Base64,d=i.algo,f=d.EvpKDF,h=o.Cipher=c.extend({cfg:s.extend(),createEncryptor:function(T,R){return this.create(this._ENC_XFORM_MODE,T,R)},createDecryptor:function(T,R){return this.create(this._DEC_XFORM_MODE,T,R)},init:function(T,R,P){this.cfg=this.cfg.extend(P),this._xformMode=T,this._key=R,this.reset()},reset:function(){c.reset.call(this),this._doReset()},process:function(T){return this._append(T),this._process()},finalize:function(T){T&&this._append(T);var R=this._doFinalize();return R},keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function T(R){return typeof R=="string"?D:A}return function(R){return{encrypt:function(P,M,G){return T(M).encrypt(R,P,M,G)},decrypt:function(P,M,G){return T(M).decrypt(R,P,M,G)}}}}()});o.StreamCipher=h.extend({_doFinalize:function(){var T=this._process(!0);return T},blockSize:1});var p=i.mode={},g=o.BlockCipherMode=s.extend({createEncryptor:function(T,R){return this.Encryptor.create(T,R)},createDecryptor:function(T,R){return this.Decryptor.create(T,R)},init:function(T,R){this._cipher=T,this._iv=R}}),C=p.CBC=function(){var T=g.extend();T.Encryptor=T.extend({processBlock:function(P,M){var G=this._cipher,j=G.blockSize;R.call(this,P,M,j),G.encryptBlock(P,M),this._prevBlock=P.slice(M,M+j)}}),T.Decryptor=T.extend({processBlock:function(P,M){var G=this._cipher,j=G.blockSize,Q=P.slice(M,M+j);G.decryptBlock(P,M),R.call(this,P,M,j),this._prevBlock=Q}});function R(P,M,G){var j,Q=this._iv;Q?(j=Q,this._iv=r):j=this._prevBlock;for(var te=0;te<G;te++)P[M+te]^=j[te]}return T}(),v=i.pad={},m=v.Pkcs7={pad:function(T,R){for(var P=R*4,M=P-T.sigBytes%P,G=M<<24|M<<16|M<<8|M,j=[],Q=0;Q<M;Q+=4)j.push(G);var te=a.create(j,M);T.concat(te)},unpad:function(T){var R=T.words[T.sigBytes-1>>>2]&255;T.sigBytes-=R}};o.BlockCipher=h.extend({cfg:h.cfg.extend({mode:C,padding:m}),reset:function(){var T;h.reset.call(this);var R=this.cfg,P=R.iv,M=R.mode;this._xformMode==this._ENC_XFORM_MODE?T=M.createEncryptor:(T=M.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==T?this._mode.init(this,P&&P.words):(this._mode=T.call(M,this,P&&P.words),this._mode.__creator=T)},_doProcessBlock:function(T,R){this._mode.processBlock(T,R)},_doFinalize:function(){var T,R=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(R.pad(this._data,this.blockSize),T=this._process(!0)):(T=this._process(!0),R.unpad(T)),T},blockSize:128/32});var y=o.CipherParams=s.extend({init:function(T){this.mixIn(T)},toString:function(T){return(T||this.formatter).stringify(this)}}),I=i.format={},b=I.OpenSSL={stringify:function(T){var R,P=T.ciphertext,M=T.salt;return M?R=a.create([1398893684,1701076831]).concat(M).concat(P):R=P,R.toString(u)},parse:function(T){var R,P=u.parse(T),M=P.words;return M[0]==1398893684&&M[1]==1701076831&&(R=a.create(M.slice(2,4)),M.splice(0,4),P.sigBytes-=16),y.create({ciphertext:P,salt:R})}},A=o.SerializableCipher=s.extend({cfg:s.extend({format:b}),encrypt:function(T,R,P,M){M=this.cfg.extend(M);var G=T.createEncryptor(P,M),j=G.finalize(R),Q=G.cfg;return y.create({ciphertext:j,key:P,iv:Q.iv,algorithm:T,mode:Q.mode,padding:Q.padding,blockSize:T.blockSize,formatter:M.format})},decrypt:function(T,R,P,M){M=this.cfg.extend(M),R=this._parse(R,M.format);var G=T.createDecryptor(P,M).finalize(R.ciphertext);return G},_parse:function(T,R){return typeof T=="string"?R.parse(T,this):T}}),E=i.kdf={},k=E.OpenSSL={execute:function(T,R,P,M,G){if(M||(M=a.random(64/8)),G)var j=f.create({keySize:R+P,hasher:G}).compute(T,M);else var j=f.create({keySize:R+P}).compute(T,M);var Q=a.create(j.words.slice(R),P*4);return j.sigBytes=R*4,y.create({key:j,iv:Q,salt:M})}},D=o.PasswordBasedCipher=A.extend({cfg:A.cfg.extend({kdf:k}),encrypt:function(T,R,P,M){M=this.cfg.extend(M);var G=M.kdf.execute(P,T.keySize,T.ivSize,M.salt,M.hasher);M.iv=G.iv;var j=A.encrypt.call(this,T,R,G.key,M);return j.mixIn(G),j},decrypt:function(T,R,P,M){M=this.cfg.extend(M),R=this._parse(R,M.format);var G=M.kdf.execute(P,T.keySize,T.ivSize,R.salt,M.hasher);M.iv=G.iv;var j=A.decrypt.call(this,T,R,G.key,M);return j}})}()})}(cm)),cm.exports}var lm={exports:{}},yw;function TU(){return yw||(yw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.mode.CFB=function(){var r=n.lib.BlockCipherMode.extend();r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,c=a.blockSize;i.call(this,o,s,c,a),this._prevBlock=o.slice(s,s+c)}}),r.Decryptor=r.extend({processBlock:function(o,s){var a=this._cipher,c=a.blockSize,l=o.slice(s,s+c);i.call(this,o,s,c,a),this._prevBlock=l}});function i(o,s,a,c){var l,u=this._iv;u?(l=u.slice(0),this._iv=void 0):l=this._prevBlock,c.encryptBlock(l,0);for(var d=0;d<a;d++)o[s+d]^=l[d]}return r}(),n.mode.CFB})}(lm)),lm.exports}var um={exports:{}},xw;function RU(){return xw||(xw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.mode.CTR=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._counter;l&&(u=this._counter=l.slice(0),this._iv=void 0);var d=u.slice(0);a.encryptBlock(d,0),u[c-1]=u[c-1]+1|0;for(var f=0;f<c;f++)o[s+f]^=d[f]}});return r.Decryptor=i,r}(),n.mode.CTR})}(um)),um.exports}var dm={exports:{}},Iw;function _U(){return Iw||(Iw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){/** @preserve
 * Counter block mode compatible with  Dr Brian Gladman fileenc.c
 * derived from CryptoJS.mode.CTR
 * Jan Hruby jhruby.web@gmail.com
 */return n.mode.CTRGladman=function(){var r=n.lib.BlockCipherMode.extend();function i(a){if((a>>24&255)===255){var c=a>>16&255,l=a>>8&255,u=a&255;c===255?(c=0,l===255?(l=0,u===255?u=0:++u):++l):++c,a=0,a+=c<<16,a+=l<<8,a+=u}else a+=1<<24;return a}function o(a){return(a[0]=i(a[0]))===0&&(a[1]=i(a[1])),a}var s=r.Encryptor=r.extend({processBlock:function(a,c){var l=this._cipher,u=l.blockSize,d=this._iv,f=this._counter;d&&(f=this._counter=d.slice(0),this._iv=void 0),o(f);var h=f.slice(0);l.encryptBlock(h,0);for(var p=0;p<u;p++)a[c+p]^=h[p]}});return r.Decryptor=s,r}(),n.mode.CTRGladman})}(dm)),dm.exports}var fm={exports:{}},bw;function DU(){return bw||(bw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.mode.OFB=function(){var r=n.lib.BlockCipherMode.extend(),i=r.Encryptor=r.extend({processBlock:function(o,s){var a=this._cipher,c=a.blockSize,l=this._iv,u=this._keystream;l&&(u=this._keystream=l.slice(0),this._iv=void 0),a.encryptBlock(u,0);for(var d=0;d<c;d++)o[s+d]^=u[d]}});return r.Decryptor=i,r}(),n.mode.OFB})}(fm)),fm.exports}var hm={exports:{}},Aw;function PU(){return Aw||(Aw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.mode.ECB=function(){var r=n.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(i,o){this._cipher.encryptBlock(i,o)}}),r.Decryptor=r.extend({processBlock:function(i,o){this._cipher.decryptBlock(i,o)}}),r}(),n.mode.ECB})}(hm)),hm.exports}var pm={exports:{}},ww;function NU(){return ww||(ww=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.pad.AnsiX923={pad:function(r,i){var o=r.sigBytes,s=i*4,a=s-o%s,c=o+a-1;r.clamp(),r.words[c>>>2]|=a<<24-c%4*8,r.sigBytes+=a},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Ansix923})}(pm)),pm.exports}var gm={exports:{}},Sw;function BU(){return Sw||(Sw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.pad.Iso10126={pad:function(r,i){var o=i*4,s=o-r.sigBytes%o;r.concat(n.lib.WordArray.random(s-1)).concat(n.lib.WordArray.create([s<<24],1))},unpad:function(r){var i=r.words[r.sigBytes-1>>>2]&255;r.sigBytes-=i}},n.pad.Iso10126})}(gm)),gm.exports}var mm={exports:{}},kw;function FU(){return kw||(kw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.pad.Iso97971={pad:function(r,i){r.concat(n.lib.WordArray.create([2147483648],1)),n.pad.ZeroPadding.pad(r,i)},unpad:function(r){n.pad.ZeroPadding.unpad(r),r.sigBytes--}},n.pad.Iso97971})}(mm)),mm.exports}var vm={exports:{}},Ew;function OU(){return Ew||(Ew=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.pad.ZeroPadding={pad:function(r,i){var o=i*4;r.clamp(),r.sigBytes+=o-(r.sigBytes%o||o)},unpad:function(r){for(var i=r.words,o=r.sigBytes-1,o=r.sigBytes-1;o>=0;o--)if(i[o>>>2]>>>24-o%4*8&255){r.sigBytes=o+1;break}}},n.pad.ZeroPadding})}(vm)),vm.exports}var Cm={exports:{}},Tw;function MU(){return Tw||(Tw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return n.pad.NoPadding={pad:function(){},unpad:function(){}},n.pad.NoPadding})}(Cm)),Cm.exports}var ym={exports:{}},Rw;function LU(){return Rw||(Rw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),_n())})(ze,function(n){return function(r){var i=n,o=i.lib,s=o.CipherParams,a=i.enc,c=a.Hex,l=i.format;l.Hex={stringify:function(u){return u.ciphertext.toString(c)},parse:function(u){var d=c.parse(u);return s.create({ciphertext:d})}}}(),n.format.Hex})}(ym)),ym.exports}var xm={exports:{}},_w;function UU(){return _w||(_w=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lc(),Uc(),Ga(),_n())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,s=r.algo,a=[],c=[],l=[],u=[],d=[],f=[],h=[],p=[],g=[],C=[];(function(){for(var y=[],I=0;I<256;I++)I<128?y[I]=I<<1:y[I]=I<<1^283;for(var b=0,A=0,I=0;I<256;I++){var E=A^A<<1^A<<2^A<<3^A<<4;E=E>>>8^E&255^99,a[b]=E,c[E]=b;var k=y[b],D=y[k],T=y[D],R=y[E]*257^E*16843008;l[b]=R<<24|R>>>8,u[b]=R<<16|R>>>16,d[b]=R<<8|R>>>24,f[b]=R;var R=T*16843009^D*65537^k*257^b*16843008;h[E]=R<<24|R>>>8,p[E]=R<<16|R>>>16,g[E]=R<<8|R>>>24,C[E]=R,b?(b=k^y[y[y[T^k]]],A^=y[y[A]]):b=A=1}})();var v=[0,1,2,4,8,16,32,64,128,27,54],m=s.AES=o.extend({_doReset:function(){var y;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var I=this._keyPriorReset=this._key,b=I.words,A=I.sigBytes/4,E=this._nRounds=A+6,k=(E+1)*4,D=this._keySchedule=[],T=0;T<k;T++)T<A?D[T]=b[T]:(y=D[T-1],T%A?A>6&&T%A==4&&(y=a[y>>>24]<<24|a[y>>>16&255]<<16|a[y>>>8&255]<<8|a[y&255]):(y=y<<8|y>>>24,y=a[y>>>24]<<24|a[y>>>16&255]<<16|a[y>>>8&255]<<8|a[y&255],y^=v[T/A|0]<<24),D[T]=D[T-A]^y);for(var R=this._invKeySchedule=[],P=0;P<k;P++){var T=k-P;if(P%4)var y=D[T];else var y=D[T-4];P<4||T<=4?R[P]=y:R[P]=h[a[y>>>24]]^p[a[y>>>16&255]]^g[a[y>>>8&255]]^C[a[y&255]]}}},encryptBlock:function(y,I){this._doCryptBlock(y,I,this._keySchedule,l,u,d,f,a)},decryptBlock:function(y,I){var b=y[I+1];y[I+1]=y[I+3],y[I+3]=b,this._doCryptBlock(y,I,this._invKeySchedule,h,p,g,C,c);var b=y[I+1];y[I+1]=y[I+3],y[I+3]=b},_doCryptBlock:function(y,I,b,A,E,k,D,T){for(var R=this._nRounds,P=y[I]^b[0],M=y[I+1]^b[1],G=y[I+2]^b[2],j=y[I+3]^b[3],Q=4,te=1;te<R;te++){var $=A[P>>>24]^E[M>>>16&255]^k[G>>>8&255]^D[j&255]^b[Q++],q=A[M>>>24]^E[G>>>16&255]^k[j>>>8&255]^D[P&255]^b[Q++],ne=A[G>>>24]^E[j>>>16&255]^k[P>>>8&255]^D[M&255]^b[Q++],F=A[j>>>24]^E[P>>>16&255]^k[M>>>8&255]^D[G&255]^b[Q++];P=$,M=q,G=ne,j=F}var $=(T[P>>>24]<<24|T[M>>>16&255]<<16|T[G>>>8&255]<<8|T[j&255])^b[Q++],q=(T[M>>>24]<<24|T[G>>>16&255]<<16|T[j>>>8&255]<<8|T[P&255])^b[Q++],ne=(T[G>>>24]<<24|T[j>>>16&255]<<16|T[P>>>8&255]<<8|T[M&255])^b[Q++],F=(T[j>>>24]<<24|T[P>>>16&255]<<16|T[M>>>8&255]<<8|T[G&255])^b[Q++];y[I]=$,y[I+1]=q,y[I+2]=ne,y[I+3]=F},keySize:256/32});r.AES=o._createHelper(m)}(),n.AES})}(xm)),xm.exports}var Im={exports:{}},Dw;function VU(){return Dw||(Dw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lc(),Uc(),Ga(),_n())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.WordArray,s=i.BlockCipher,a=r.algo,c=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],u=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],d=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],f=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=s.extend({_doReset:function(){for(var v=this._key,m=v.words,y=[],I=0;I<56;I++){var b=c[I]-1;y[I]=m[b>>>5]>>>31-b%32&1}for(var A=this._subKeys=[],E=0;E<16;E++){for(var k=A[E]=[],D=u[E],I=0;I<24;I++)k[I/6|0]|=y[(l[I]-1+D)%28]<<31-I%6,k[4+(I/6|0)]|=y[28+(l[I+24]-1+D)%28]<<31-I%6;k[0]=k[0]<<1|k[0]>>>31;for(var I=1;I<7;I++)k[I]=k[I]>>>(I-1)*4+3;k[7]=k[7]<<5|k[7]>>>27}for(var T=this._invSubKeys=[],I=0;I<16;I++)T[I]=A[15-I]},encryptBlock:function(v,m){this._doCryptBlock(v,m,this._subKeys)},decryptBlock:function(v,m){this._doCryptBlock(v,m,this._invSubKeys)},_doCryptBlock:function(v,m,y){this._lBlock=v[m],this._rBlock=v[m+1],p.call(this,4,252645135),p.call(this,16,65535),g.call(this,2,858993459),g.call(this,8,16711935),p.call(this,1,1431655765);for(var I=0;I<16;I++){for(var b=y[I],A=this._lBlock,E=this._rBlock,k=0,D=0;D<8;D++)k|=d[D][((E^b[D])&f[D])>>>0];this._lBlock=E,this._rBlock=A^k}var T=this._lBlock;this._lBlock=this._rBlock,this._rBlock=T,p.call(this,1,1431655765),g.call(this,8,16711935),g.call(this,2,858993459),p.call(this,16,65535),p.call(this,4,252645135),v[m]=this._lBlock,v[m+1]=this._rBlock},keySize:64/32,ivSize:64/32,blockSize:64/32});function p(v,m){var y=(this._lBlock>>>v^this._rBlock)&m;this._rBlock^=y,this._lBlock^=y<<v}function g(v,m){var y=(this._rBlock>>>v^this._lBlock)&m;this._lBlock^=y,this._rBlock^=y<<v}r.DES=s._createHelper(h);var C=a.TripleDES=s.extend({_doReset:function(){var v=this._key,m=v.words;if(m.length!==2&&m.length!==4&&m.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var y=m.slice(0,2),I=m.length<4?m.slice(0,2):m.slice(2,4),b=m.length<6?m.slice(0,2):m.slice(4,6);this._des1=h.createEncryptor(o.create(y)),this._des2=h.createEncryptor(o.create(I)),this._des3=h.createEncryptor(o.create(b))},encryptBlock:function(v,m){this._des1.encryptBlock(v,m),this._des2.decryptBlock(v,m),this._des3.encryptBlock(v,m)},decryptBlock:function(v,m){this._des3.decryptBlock(v,m),this._des2.encryptBlock(v,m),this._des1.decryptBlock(v,m)},keySize:192/32,ivSize:64/32,blockSize:64/32});r.TripleDES=s._createHelper(C)}(),n.TripleDES})}(Im)),Im.exports}var bm={exports:{}},Pw;function GU(){return Pw||(Pw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lc(),Uc(),Ga(),_n())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=s.RC4=o.extend({_doReset:function(){for(var u=this._key,d=u.words,f=u.sigBytes,h=this._S=[],p=0;p<256;p++)h[p]=p;for(var p=0,g=0;p<256;p++){var C=p%f,v=d[C>>>2]>>>24-C%4*8&255;g=(g+h[p]+v)%256;var m=h[p];h[p]=h[g],h[g]=m}this._i=this._j=0},_doProcessBlock:function(u,d){u[d]^=c.call(this)},keySize:256/32,ivSize:0});function c(){for(var u=this._S,d=this._i,f=this._j,h=0,p=0;p<4;p++){d=(d+1)%256,f=(f+u[d])%256;var g=u[d];u[d]=u[f],u[f]=g,h|=u[(u[d]+u[f])%256]<<24-p*8}return this._i=d,this._j=f,h}r.RC4=o._createHelper(a);var l=s.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var u=this.cfg.drop;u>0;u--)c.call(this)}});r.RC4Drop=o._createHelper(l)}(),n.RC4})}(bm)),bm.exports}var Am={exports:{}},Nw;function WU(){return Nw||(Nw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lc(),Uc(),Ga(),_n())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=[],c=[],l=[],u=s.Rabbit=o.extend({_doReset:function(){for(var f=this._key.words,h=this.cfg.iv,p=0;p<4;p++)f[p]=(f[p]<<8|f[p]>>>24)&16711935|(f[p]<<24|f[p]>>>8)&4278255360;var g=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],C=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var p=0;p<4;p++)d.call(this);for(var p=0;p<8;p++)C[p]^=g[p+4&7];if(h){var v=h.words,m=v[0],y=v[1],I=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,A=I>>>16|b&4294901760,E=b<<16|I&65535;C[0]^=I,C[1]^=A,C[2]^=b,C[3]^=E,C[4]^=I,C[5]^=A,C[6]^=b,C[7]^=E;for(var p=0;p<4;p++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,f[h+g]^=a[g]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)c[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<c[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<c[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<c[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<c[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<c[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<c[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<c[6]>>>0?1:0)|0,this._b=h[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var g=f[p]+h[p],C=g&65535,v=g>>>16,m=((C*C>>>17)+C*v>>>15)+v*v,y=((g&4294901760)*g|0)+((g&65535)*g|0);l[p]=m^y}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.Rabbit=o._createHelper(u)}(),n.Rabbit})}(Am)),Am.exports}var wm={exports:{}},Bw;function zU(){return Bw||(Bw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lc(),Uc(),Ga(),_n())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.StreamCipher,s=r.algo,a=[],c=[],l=[],u=s.RabbitLegacy=o.extend({_doReset:function(){var f=this._key.words,h=this.cfg.iv,p=this._X=[f[0],f[3]<<16|f[2]>>>16,f[1],f[0]<<16|f[3]>>>16,f[2],f[1]<<16|f[0]>>>16,f[3],f[2]<<16|f[1]>>>16],g=this._C=[f[2]<<16|f[2]>>>16,f[0]&4294901760|f[1]&65535,f[3]<<16|f[3]>>>16,f[1]&4294901760|f[2]&65535,f[0]<<16|f[0]>>>16,f[2]&4294901760|f[3]&65535,f[1]<<16|f[1]>>>16,f[3]&4294901760|f[0]&65535];this._b=0;for(var C=0;C<4;C++)d.call(this);for(var C=0;C<8;C++)g[C]^=p[C+4&7];if(h){var v=h.words,m=v[0],y=v[1],I=(m<<8|m>>>24)&16711935|(m<<24|m>>>8)&4278255360,b=(y<<8|y>>>24)&16711935|(y<<24|y>>>8)&4278255360,A=I>>>16|b&4294901760,E=b<<16|I&65535;g[0]^=I,g[1]^=A,g[2]^=b,g[3]^=E,g[4]^=I,g[5]^=A,g[6]^=b,g[7]^=E;for(var C=0;C<4;C++)d.call(this)}},_doProcessBlock:function(f,h){var p=this._X;d.call(this),a[0]=p[0]^p[5]>>>16^p[3]<<16,a[1]=p[2]^p[7]>>>16^p[5]<<16,a[2]=p[4]^p[1]>>>16^p[7]<<16,a[3]=p[6]^p[3]>>>16^p[1]<<16;for(var g=0;g<4;g++)a[g]=(a[g]<<8|a[g]>>>24)&16711935|(a[g]<<24|a[g]>>>8)&4278255360,f[h+g]^=a[g]},blockSize:128/32,ivSize:64/32});function d(){for(var f=this._X,h=this._C,p=0;p<8;p++)c[p]=h[p];h[0]=h[0]+1295307597+this._b|0,h[1]=h[1]+3545052371+(h[0]>>>0<c[0]>>>0?1:0)|0,h[2]=h[2]+886263092+(h[1]>>>0<c[1]>>>0?1:0)|0,h[3]=h[3]+1295307597+(h[2]>>>0<c[2]>>>0?1:0)|0,h[4]=h[4]+3545052371+(h[3]>>>0<c[3]>>>0?1:0)|0,h[5]=h[5]+886263092+(h[4]>>>0<c[4]>>>0?1:0)|0,h[6]=h[6]+1295307597+(h[5]>>>0<c[5]>>>0?1:0)|0,h[7]=h[7]+3545052371+(h[6]>>>0<c[6]>>>0?1:0)|0,this._b=h[7]>>>0<c[7]>>>0?1:0;for(var p=0;p<8;p++){var g=f[p]+h[p],C=g&65535,v=g>>>16,m=((C*C>>>17)+C*v>>>15)+v*v,y=((g&4294901760)*g|0)+((g&65535)*g|0);l[p]=m^y}f[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,f[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,f[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,f[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,f[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,f[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,f[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,f[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}r.RabbitLegacy=o._createHelper(u)}(),n.RabbitLegacy})}(wm)),wm.exports}var Sm={exports:{}},Fw;function jU(){return Fw||(Fw=1,function(t,e){(function(n,r,i){t.exports=r(rt(),Lc(),Uc(),Ga(),_n())})(ze,function(n){return function(){var r=n,i=r.lib,o=i.BlockCipher,s=r.algo;const a=16,c=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var u={pbox:[],sbox:[]};function d(C,v){let m=v>>24&255,y=v>>16&255,I=v>>8&255,b=v&255,A=C.sbox[0][m]+C.sbox[1][y];return A=A^C.sbox[2][I],A=A+C.sbox[3][b],A}function f(C,v,m){let y=v,I=m,b;for(let A=0;A<a;++A)y=y^C.pbox[A],I=d(C,y)^I,b=y,y=I,I=b;return b=y,y=I,I=b,I=I^C.pbox[a],y=y^C.pbox[a+1],{left:y,right:I}}function h(C,v,m){let y=v,I=m,b;for(let A=a+1;A>1;--A)y=y^C.pbox[A],I=d(C,y)^I,b=y,y=I,I=b;return b=y,y=I,I=b,I=I^C.pbox[1],y=y^C.pbox[0],{left:y,right:I}}function p(C,v,m){for(let E=0;E<4;E++){C.sbox[E]=[];for(let k=0;k<256;k++)C.sbox[E][k]=l[E][k]}let y=0;for(let E=0;E<a+2;E++)C.pbox[E]=c[E]^v[y],y++,y>=m&&(y=0);let I=0,b=0,A=0;for(let E=0;E<a+2;E+=2)A=f(C,I,b),I=A.left,b=A.right,C.pbox[E]=I,C.pbox[E+1]=b;for(let E=0;E<4;E++)for(let k=0;k<256;k+=2)A=f(C,I,b),I=A.left,b=A.right,C.sbox[E][k]=I,C.sbox[E][k+1]=b;return!0}var g=s.Blowfish=o.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var C=this._keyPriorReset=this._key,v=C.words,m=C.sigBytes/4;p(u,v,m)}},encryptBlock:function(C,v){var m=f(u,C[v],C[v+1]);C[v]=m.left,C[v+1]=m.right},decryptBlock:function(C,v){var m=h(u,C[v],C[v+1]);C[v]=m.left,C[v+1]=m.right},blockSize:64/32,keySize:128/32,ivSize:64/32});r.Blowfish=o._createHelper(g)}(),n.Blowfish})}(Sm)),Sm.exports}(function(t,e){(function(n,r,i){t.exports=r(rt(),Lp(),xU(),IU(),Lc(),bU(),Uc(),o_(),tx(),AU(),s_(),wU(),SU(),kU(),nx(),EU(),Ga(),_n(),TU(),RU(),_U(),DU(),PU(),NU(),BU(),FU(),OU(),MU(),LU(),UU(),VU(),GU(),WU(),zU(),jU())})(ze,function(n){return n})})(i_);var HU=i_.exports;const Ow=Ql(HU);class ni extends Error{constructor(e,n){super(n),this.code=e,this.name="FileTransferError"}}const oo={CONNECTION_FAILED:"CONNECTION_FAILED",TRANSFER_TIMEOUT:"TRANSFER_TIMEOUT",INVALID_FILE:"INVALID_FILE",DATA_CHANNEL_ERROR:"DATA_CHANNEL_ERROR"};class ZU{constructor(e,n){L(this,"webRTCService");L(this,"client");L(this,"gmcpFileTransfer");L(this,"chunkSize",16384);L(this,"incomingTransfers",new Map);L(this,"outgoingTransfers",new Map);L(this,"maxFileSize",100*1024*1024);L(this,"transferTimeout",3e4);L(this,"pendingOffers",new Map);this.client=e,this.gmcpFileTransfer=n,this.webRTCService=e.webRTCService,this.setupListeners()}isDataChannelReady(){return this.webRTCService.isDataChannelOpen()}setupListeners(){this.webRTCService.on("dataChannelMessage",this.handleIncomingChunk.bind(this)),this.client.on("fileTransferAccepted",this.handleAcceptedTransfer.bind(this)),setInterval(()=>this.checkTransferTimeouts(),5e3)}async sendFile(e,n){if(e.size>this.maxFileSize)throw new ni(oo.INVALID_FILE,`File size exceeds the maximum allowed size of ${this.maxFileSize/(1024*1024)} MB`);const r=await this.computeFileHash(e);console.log(`[FileTransferManager] Computed hash for ${e.name}: ${r}`),console.log(`[FileTransferManager] Registering outgoing transfer for file: ${e.name}`),this.outgoingTransfers.set(r,{file:e,filename:e.name,hash:r,lastActivityTimestamp:Date.now()});try{await this.client.initializeWebRTC(),this.webRTCService.recipient=n;const i=await this.webRTCService.createOffer();console.log(`[FileTransferManager] Sending offer for file: ${e.name}`),await this.gmcpFileTransfer.sendOffer(n,e.name,e.size,JSON.stringify(i),r),await this.webRTCService.waitForConnection()}catch(i){console.error(`[FileTransferManager] Failed to send file ${e.name}:`,i),this.handleTransferError(r,e.name,"send",i instanceof ni?i:new ni(oo.CONNECTION_FAILED,"Failed to establish connection")),this.cleanupTransfer(r)}}async computeFileHash(e){return new Promise((n,r)=>{const i=new FileReader;i.onload=()=>{if(i.result instanceof ArrayBuffer){const o=Ow.lib.WordArray.create(i.result),s=Ow.SHA256(o).toString();n(s)}else r(new Error("Failed to read file for hashing"))},i.onerror=()=>r(i.error),i.readAsArrayBuffer(e)})}async startFileTransfer(e,n){let r=0;const i=new FileReader;for(;r<e.size;){const o=e.slice(r,r+this.chunkSize),s=await new Promise((a,c)=>{i.onload=()=>{i.result instanceof ArrayBuffer?a(i.result):c(new ni(oo.INVALID_FILE,"Failed to read file chunk"))},i.onerror=()=>c(new ni(oo.INVALID_FILE,"Error reading file")),i.readAsArrayBuffer(o)});await this.sendChunk(e.name,n,s,r,e.size),r+=s.byteLength,this.client.onFileSendProgress({hash:n,filename:e.name,sentBytes:r,totalBytes:e.size})}}async sendChunk(e,n,r,i,o){try{const s={hash:n,filename:e,chunkIndex:Math.floor(i/this.chunkSize),totalChunks:Math.ceil(o/this.chunkSize),chunkSize:r.byteLength,totalSize:o},a=JSON.stringify(s),c=new TextEncoder().encode(a),l=new ArrayBuffer(4);new DataView(l).setUint32(0,c.byteLength,!0);const u=new Uint8Array(4+c.byteLength+r.byteLength);u.set(new Uint8Array(l),0),u.set(c,4),u.set(new Uint8Array(r),4+c.byteLength),await this.webRTCService.sendData(u.buffer)}catch{throw new ni(oo.DATA_CHANNEL_ERROR,"Failed to send chunk")}}async handleAcceptedTransfer(e){console.log("[FileTransferManager] Handling accepted transfer for file transfer request ",e);const{sender:n,hash:r,filename:i,answerSdp:o}=e,s=this.outgoingTransfers.get(r);if(!s){const a=`No outgoing transfer found for hash: ${r} (${i}). Active transfers: ${Array.from(this.outgoingTransfers.keys()).join(", ")}`;console.error(`[FileTransferManager] ${a}`),this.client.onFileTransferError(r,i,"send",a);return}try{console.log(`[FileTransferManager] Processing WebRTC answer for file: ${i}`);const a=JSON.parse(o);console.log(`[FileTransferManager] Answer object for file: ${i}`,a),await this.webRTCService.handleAnswer(a),console.log(`[FileTransferManager] Waiting for data channel to open for file: ${i}`),await this.waitForDataChannel(r),console.log(`[FileTransferManager] Data channel ready for outgoing transfer of: ${i}`),await this.startFileTransfer(s.file,s.hash),console.log(`[FileTransferManager] File transfer completed successfully: ${i}`),this.client.onFileSendComplete(r,i)}catch(a){console.error(`[FileTransferManager] Error in accepted transfer for ${i}:`,a),this.handleTransferError(r,i,"send",a)}finally{console.log(`[FileTransferManager] Cleaning up successful transfer: ${i} (${r})`),this.outgoingTransfers.delete(r)}}async waitForDataChannel(e){return new Promise((n,r)=>{if(this.isDataChannelReady()){n();return}let i=0;const o=50,s=setInterval(()=>{i++,this.isDataChannelReady()?(clearInterval(s),n()):i>=o&&(clearInterval(s),r(new ni(oo.CONNECTION_FAILED,`Data channel failed to open for transfer ${e} after ${i} attempts`)))},100)})}async handleIncomingChunk(e){try{if(e.byteLength<4)throw new Error("Received data is too short to contain header size");const n=new Uint8Array(e.slice(0,4)),r=new DataView(n.buffer).getUint32(0,!0);if(e.byteLength<4+r)throw new Error("Received data is too short to contain header");const i=new TextDecoder().decode(e.slice(4,4+r)),o=JSON.parse(i);if(e.byteLength<4+r+o.chunkSize)throw new Error("Received data is too short to contain chunk data");const s=this.pendingOffers.get(o.hash),a=(s==null?void 0:s.sender)||"unknown";if(typeof o.chunkIndex!="number"||o.chunkIndex<0||o.chunkIndex>=o.totalChunks)throw new Error("Invalid chunk index in header");if(typeof o.totalChunks!="number"||o.totalChunks<=0)throw new Error("Invalid total chunks in header");const c=e.slice(4+r,4+r+o.chunkSize);let l=this.incomingTransfers.get(o.hash);if(!l){if(o.totalSize>this.maxFileSize){this.client.onFileTransferError(o.hash,o.filename,"receive",`Incoming file size exceeds the maximum allowed size of ${this.maxFileSize/(1024*1024)} MB`);return}l={hash:o.hash,filename:o.filename,totalSize:o.totalSize,receivedSize:0,chunks:new Array(o.totalChunks),lastActivityTimestamp:Date.now(),sender:a},this.incomingTransfers.set(o.hash,l)}if(l.chunks[o.chunkIndex]=c,l.receivedSize+=c.byteLength,l.lastActivityTimestamp=Date.now(),this.client.onFileReceiveProgress({hash:o.hash,filename:o.filename,receivedBytes:l.receivedSize,totalBytes:l.totalSize}),l.receivedSize===l.totalSize)if(l.chunks.every(u=>u)){const u=new Blob(l.chunks),d=new File([u],l.filename,{type:u.type});if(await this.computeFileHash(d)!==l.hash){this.client.onFileTransferError(l.hash,o.filename,"receive","File integrity check failed - hash mismatch"),this.incomingTransfers.delete(l.hash);return}const h=window.URL.createObjectURL(u),p=document.createElement("a");p.href=h,p.download=o.filename,document.body.appendChild(p),p.click(),document.body.removeChild(p),window.URL.revokeObjectURL(h),this.client.onFileReceiveComplete({hash:l.hash,filename:o.filename,file:u}),this.incomingTransfers.delete(l.hash)}else this.client.onFileTransferError(l.hash,o.filename,"receive","Missing chunks in received file")}catch(n){this.handleTransferError("unknown","unknown_file","receive",new ni("UNKNOWN_ERROR",n instanceof Error?n.message:"Unknown error"))}}handleTransferError(e,n,r,i){console.error(`Error ${r}ing file ${n} (${e}):`,i);const o=i instanceof Error?i.message:"Unknown error";this.client.onFileTransferError(e,n,r,o),this.cleanupTransfer(e),this.attemptRecovery(e,n,r)}cleanupTransfer(e){console.log(`[FileTransferManager] Starting cleanup for hash: ${e}`);const n=this.outgoingTransfers.get(e);n&&(console.log(`[FileTransferManager] Cleaning up outgoing transfer for: ${n.filename} (${e})`),this.outgoingTransfers.delete(e));const r=this.incomingTransfers.get(e);if(r&&(console.log(`[FileTransferManager] Cleaning up incoming transfer for: ${r.filename} (${e})`),this.incomingTransfers.delete(e)),this.pendingOffers.has(e)){const i=this.pendingOffers.get(e);console.log(`[FileTransferManager] Removing pending offer for: ${i==null?void 0:i.filename} (${e})`),this.pendingOffers.delete(e)}console.log(`[FileTransferManager] Cleanup complete for hash: ${e}`)}async attemptRecovery(e,n,r){try{if(await this.webRTCService.createPeerConnection(),this.client.onConnectionRecovered({hash:e,filename:n,direction:r}),r==="send"){const i=this.outgoingTransfers.get(e);i&&await this.startFileTransfer(i.file,i.hash)}else if(r==="receive"){const i=this.incomingTransfers.get(e);i&&this.gmcpFileTransfer.sendRequestResend(i.sender,e)}}catch(i){console.error("Failed to recover connection:",i),this.client.onRecoveryFailed({filename:n,direction:r,error:i instanceof Error?i.message:"Unknown error"})}}checkTransferTimeouts(){const e=Date.now();this.incomingTransfers.forEach((n,r)=>{e-n.lastActivityTimestamp>this.transferTimeout&&this.handleTransferError(r,n.filename,"receive",new ni(oo.TRANSFER_TIMEOUT,"Transfer timeout - no data received"))}),this.outgoingTransfers.forEach((n,r)=>{e-n.lastActivityTimestamp>this.transferTimeout&&this.handleTransferError(r,n.filename,"send",new ni(oo.TRANSFER_TIMEOUT,"Transfer timeout - no activity"))})}cancelTransfer(e){const n=this.outgoingTransfers.get(e)||this.incomingTransfers.get(e);n?(console.log(`[FileTransferManager] Cancelling transfer for hash: ${e} (${n.filename})`),this.cleanupTransfer(e),this.client.onFileTransferCancel(this.client.worldData.playerId,e),this.gmcpFileTransfer.sendCancel(this.client.worldData.playerId,e)):console.log(`[FileTransferManager] No active transfer found for hash: ${e}`)}async acceptTransfer(e,n){if(console.log("[FileTransferManager] Accepting transfer",e,n),this.incomingTransfers.has(n))throw new Error("Already receiving this file");const r=this.pendingOffers.get(n);if(console.log("[FileTransferManager] Checking pending offers:",Array.from(this.pendingOffers.entries())),!r)throw new ni(oo.INVALID_FILE,`No pending offer found for transfer with hash: ${n}`);console.log("[FileTransferManager] Found pending offer for transfer:",{sender:e,hash:n,filename:r.filename,filesize:r.filesize});try{await this.client.initializeWebRTC(),this.webRTCService.recipient=e,console.log("[FileTransferManager] Setting remote description with offer"),await this.webRTCService.handleOffer(JSON.parse(r.offerSdp)),console.log("[FileTransferManager] Creating WebRTC answer");const i=await this.webRTCService.createAnswer();if(console.log("[FileTransferManager] WebRTC answer created successfully"),this.pendingOffers.has(n))await this.gmcpFileTransfer.sendAccept(e,n,r.filename,JSON.stringify(i)),await this.waitForDataChannel(n),console.log("[FileTransferManager] Data channel ready for incoming transfer"),this.pendingOffers.delete(n);else throw new Error("Transfer was cancelled during setup")}catch(i){throw console.error("Failed to accept transfer:",i),this.cleanupTransfer(n),new ni(oo.CONNECTION_FAILED,`Failed to accept transfer: ${i instanceof Error?i.message:"Unknown error"}`)}}}class $U extends B1{constructor(n,r){super();L(this,"ws");L(this,"decoder",new TextDecoder("utf8"));L(this,"telnet");L(this,"host");L(this,"port");L(this,"telnetNegotiation",!1);L(this,"telnetBuffer","");L(this,"gmcpHandlers",{});L(this,"mcpHandlers",{});L(this,"mcpMultilines",{});L(this,"mcpAuthKey",null);L(this,"mcp_negotiate");L(this,"mcp_getset");L(this,"gmcp_char");L(this,"gmcp_fileTransfer");L(this,"worldData",{playerId:"",playerName:"",roomId:"",liveKitTokens:[]});L(this,"cacophony");L(this,"editors");L(this,"webRTCService");L(this,"fileTransferManager");L(this,"_autosay",!1);L(this,"sendCommand",n=>{go.getState().general.localEcho&&this.emit("command",n),this.autosay&&(n="say "+n),this.send(n+`\r
`),console.log("> "+n)});this.host=n,this.port=r,this.mcp_negotiate=this.registerMcpPackage(cU),this.mcp_getset=this.registerMcpPackage(dU),this.gmcp_char=this.registerGMCPPackage(yM),this.gmcp_fileTransfer=this.registerGMCPPackage(jR),this.cacophony=new I7,this.cacophony.setGlobalVolume(go.getState().general.volume),this.editors=new vM(this),this.webRTCService=new gU(this),this.fileTransferManager=new ZU(this,this.gmcp_fileTransfer)}get autosay(){return this._autosay}set autosay(n){this._autosay=n,this.emit("autosayChanged",n)}async initializeWebRTC(){this.webRTCService.isDataChannelOpen()||await this.webRTCService.createPeerConnection()}async sendFile(n,r){await this.fileTransferManager.sendFile(n,r)}cancelTransfer(n){this.fileTransferManager.cancelTransfer(n)}acceptTransfer(n,r){this.fileTransferManager.acceptTransfer(n,r)}rejectTransfer(n,r){this.gmcp_fileTransfer.sendReject(n,r)}onFileTransferOffer(n,r,i,o,s){console.log("[MudClient] Emitting fileTransferOffer event:",{sender:n,hash:r,filename:i,filesize:o,offerSdp:s}),this.emit("fileTransferOffer",{sender:n,hash:r,filename:i,filesize:o,offerSdp:s})}onFileTransferAccept(n,r,i,o){console.log("[MudClient] Emitting fileTransferAccepted event:",{sender:n,hash:r,filename:i,answerSdp:o}),this.emit("fileTransferAccepted",{sender:n,hash:r,filename:i,answerSdp:o})}onFileTransferReject(n,r){this.emit("fileTransferRejected",{sender:n,hash:r})}onFileTransferCancel(n,r){this.emit("fileTransferCancelled",{sender:n,hash:r})}onFileSendProgress(n){this.emit("fileSendProgress",n)}onFileReceiveProgress(n){this.emit("fileReceiveProgress",n)}onFileSendComplete(n,r){this.emit("fileSendComplete",{hash:n,filename:r})}onFileReceiveComplete(n){this.emit("fileReceiveComplete",n)}onFileTransferError(n,r,i,o){this.emit("fileTransferError",{hash:n,filename:r,direction:i,error:o})}onConnectionRecovered(n){this.emit("connectionRecovered",n)}onRecoveryFailed(n){this.emit("recoveryFailed",n)}sendFileTransferOffer(n,r,i,o,s){this.gmcp_fileTransfer.sendOffer(n,r,o,s,i)}sendFileTransferAccept(n,r,i,o){this.gmcp_fileTransfer.sendAccept(n,i,r,o)}registerGMCPPackage(n){const r=new n(this);return this.gmcpHandlers[r.packageName]=r,console.log("Registered GMCP Package:",r.packageName),r}registerMcpPackage(n){const r=new n(this);return this.mcpHandlers[r.packageName]=r,r}connect(){this.ws=new window.WebSocket(`wss://${this.host}:${this.port}`),this.ws.binaryType="arraybuffer",this.telnet=new hM(new fM(this.ws)),this.ws.onopen=()=>{this.emit("connect")},this.telnet.on("data",n=>{this.handleData(n)}),this.telnet.on("negotiation",(n,r)=>{n===nd.WILL&&r===td.GMCP?(console.log("GMCP Negotiation"),this.telnet.sendNegotiation(nd.DO,td.GMCP),this.gmcpHandlers.Core.sendHello(),this.gmcpHandlers["Core.Supports"].sendSet(),this.gmcpHandlers["Auth.Autologin"].sendLogin()):n===nd.DO&&r===td.TERMINAL_TYPE&&(console.log("TTYPE Negotiation"),this.telnet.sendNegotiation(nd.WILL,td.TERMINAL_TYPE),this.telnet.sendTerminalType("Mongoose Client"),this.telnet.sendTerminalType("ANSI"),this.telnet.sendTerminalType("PROXY"))}),this.telnet.on("gmcp",(n,r)=>{console.log("GMCP Package:",n,r);try{this.handleGmcpData(n,r)}catch(i){console.error("Calling GMCP:",i)}}),this.ws.onclose=()=>{this.emit("disconnect"),this.mcpAuthKey=null,setTimeout(()=>{this.connect()},1e4)},this.ws.onerror=n=>{this.emit("error",n)}}send(n){this.ws.send(n)}close(){this.ws.close()}handleData(n){const r=this.decoder.decode(n).trimEnd();for(const i of r.split(`
`))i&&i.startsWith("#$#")?this.handleMcp(i):this.emitMessage(i)}handleMcp(n){if(n.startsWith("#$#*")){const i=QA(n.trimEnd());i&&(i.name in this.mcpMultilines?this.mcpMultilines[i.name].handleMultiline(i):console.warn("Received continuation for unknown multiline",i));return}if(n.startsWith("#$#:")){const i=QA(n.trimEnd());i&&(this.mcpMultilines[i.name].closeMultiline(i),delete this.mcpMultilines[i.name]);return}const r=aU(n.trimEnd());if(console.log("MCP Message:",r),(r==null?void 0:r.name.toLowerCase())==="mcp"&&r.authKey==null&&this.mcpAuthKey==null)this.mcpAuthKey=ew(),this.sendCommand(`#$#mcp authentication-key: ${this.mcpAuthKey} version: 2.1 to: 2.1`),this.mcp_negotiate.sendNegotiate();else if((r==null?void 0:r.name)!=="mcp-negotiate-end")if((r==null?void 0:r.authKey)===this.mcpAuthKey){let i=r.name;do{if(i in this.mcpHandlers){this.mcpHandlers[i].handle(r),"_data-tag"in r.keyvals&&(console.log("new multiline "+r.keyvals["_data-tag"]),this.mcpMultilines[r.keyvals["_data-tag"]]=this.mcpHandlers[i]);return}i=i.substring(0,i.lastIndexOf("-"))}while(i);console.log(`No handler for ${r.name}`)}else console.log(`Unexpected authkey "${r==null?void 0:r.authKey}", probably a spoofed message.`)}handleGmcpData(n,r){const i=n.lastIndexOf("."),o=n.substring(0,i),s=n.substring(i+1);console.log("GMCP Message:",o,s,r);const a=this.gmcpHandlers[o];if(!a){console.log("No handler for GMCP package:",o);return}const c=a["handle"+s];c?(console.log("Calling handler:",c),c.call(a,JSON.parse(r))):console.log("No handler on package:",o,s)}emitMessage(n){const r=go.getState().speech.autoreadMode;r===kC.All&&this.speak(n),r===kC.Unfocused&&!document.hasFocus()&&this.speak(n),this.emit("message",n)}sendGmcp(n,r){console.log("Sending GMCP:",n,r),this.telnet.sendGmcp(n,r)}sendMcp(n,r){if(typeof r=="object"){let o="";for(const[s,a]of Object.entries(r))o+=` ${s}: ${a||'""'}`;r=o}const i=`#$#${n} ${this.mcpAuthKey} ${r}\r
`;this.send(i)}sendMcpMLLine(n,r,i){this.send(`#$#* ${n} ${r}: ${i}\r
`)}closeMcpML(n){this.send(`#$#: ${n}\r
`)}sendMCPMultiline(n,r,i){const o=ew();r["_data-tag"]=o,this.sendMcp(n,r);for(const s of i)this.sendMcpMLLine(o,"content",s);this.closeMcpML(o)}shutdown(){Object.values(this.mcpHandlers).forEach(n=>{n.shutdown()}),Object.values(this.gmcpHandlers).forEach(n=>{n.shutdown()}),this.editors.shutdown()}requestNotificationPermission(){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="default"&&Notification.requestPermission()}sendNotification(n,r){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="granted"&&new Notification(n,{body:r})}speak(n){if(!("speechSynthesis"in window)){console.log("This browser does not support speech synthesis");return}const r=new SpeechSynthesisUtterance(mM(n));r.lang="en-US";const{rate:i,pitch:o,voice:s,volume:a}=go.getState().speech;r.rate=i,r.pitch=o,r.volume=a;const l=speechSynthesis.getVoices().find(u=>u.name===s);l&&(r.voice=l),speechSynthesis.speak(r)}cancelSpeech(){speechSynthesis.cancel()}stopAllSounds(){this.gmcpHandlers["Client.Media"].stopAllSounds()}getInput(){var n;return((n=document.getElementById("command-input"))==null?void 0:n.textContent)||""}setInput(n){const r=document.getElementById("command-input");r&&(r.textContent=n)}}class XU{constructor(){L(this,"history",[]);L(this,"currentIndex",-1);L(this,"unsentInput","")}addCommand(e){e.trim()!==""&&(this.history.length===0||this.history[this.history.length-1]!==e)&&this.history.push(e.trim()),this.currentIndex=-1,this.unsentInput=""}navigateUp(e){return this.currentIndex===-1&&(this.unsentInput=e),this.history.length>0&&this.currentIndex<this.history.length-1&&this.currentIndex++,this.history.length>0?this.history[this.history.length-1-this.currentIndex]:""}navigateDown(e){return this.currentIndex===-1&&(this.unsentInput=e),this.currentIndex>0?(this.currentIndex--,this.history[this.history.length-1-this.currentIndex]):(this.currentIndex=-1,this.unsentInput)}getCurrentInput(){return this.currentIndex===-1?this.unsentInput:this.history[this.history.length-1-this.currentIndex]}getHistory(){return[...this.history]}}const Mw="command_history",KU=1e3,JU=({onSend:t,inputRef:e})=>{const[n,r]=S.useState(""),i=S.useRef(new XU);S.useEffect(()=>{const c=localStorage.getItem(Mw);c&&JSON.parse(c).forEach(u=>{i.current.addCommand(u)})},[]);const o=()=>{try{const l=i.current.getHistory().slice(-KU);localStorage.setItem(Mw,JSON.stringify(l))}catch(c){console.warn("Failed to save command history:",c)}},s=c=>{const l=i.current;if(c.key==="Enter"&&!c.shiftKey)c.preventDefault(),a();else if(c.key==="ArrowUp"){c.preventDefault();const u=l.navigateUp(n);r(u)}else if(c.key==="ArrowDown"){c.preventDefault();const u=l.navigateDown(n);r(u)}},a=()=>{n.trim()&&(t(n),i.current.addCommand(n),o(),r(""))};return Y.jsxs("div",{className:"command-input-container",children:[Y.jsx("textarea",{value:n,onChange:c=>r(c.target.value),onKeyDown:s,id:"command-input",ref:e,autoFocus:!0}),Y.jsx("button",{onClick:a,className:"send-button",children:"Send"})]})},YU="447f046b844cffca7e4e1eadbb800d906b021ca1",Vs=()=>{const[,t]=S.useReducer(e=>e+1,0);return S.useEffect(()=>go.subscribe(t),[]),[go.getState(),go.dispatch]},qU=()=>{const[t,e]=S.useState([]);return S.useEffect(()=>{const n=()=>{e(window.speechSynthesis.getVoices())};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)},[]),t},QU=({tabs:t})=>{const[e,n]=S.useState(0),r=S.useRef([]);return S.useEffect(()=>{r.current=r.current.slice(0,t.length)},[t]),S.useEffect(()=>{const i=s=>{switch(s.key){case"ArrowLeft":n(a=>a>0?a-1:t.length-1);break;case"ArrowRight":n(a=>a<t.length-1?a+1:0);break}},o=r.current[e];return o==null||o.addEventListener("keydown",i),()=>{o==null||o.removeEventListener("keydown",i)}},[t.length,e]),S.useEffect(()=>{var i;(i=r.current[e])==null||i.focus()},[e]),Y.jsxs("div",{children:[Y.jsx("div",{role:"tablist","aria-label":"Tabs",children:t.map((i,o)=>Y.jsx("button",{ref:s=>r.current[o]=s,role:"tab","aria-selected":e===o,id:`${i.label}-tab`,"aria-controls":`${i.label}-panel`,onClick:()=>n(o),tabIndex:e===o?void 0:-1,children:i.label},o))}),t.map((i,o)=>Y.jsx("div",{role:"tabpanel",id:`${i.label}-panel`,"aria-labelledby":`${i.label}-tab`,hidden:e!==o,tabIndex:e===o?0:-1,children:i.content},o))]})},eV=()=>{const[t,e]=Vs();return Y.jsxs("label",{children:[Y.jsx("input",{type:"checkbox",checked:t.general.localEcho,onChange:n=>e({type:Mo.SetGeneral,data:{...t.general,localEcho:n.target.checked}})}),"Local Echo"]})},tV=()=>{const[t,e]=Vs();return Y.jsxs("label",{children:["Auto Read:",Y.jsxs("select",{value:t.speech.autoreadMode,onChange:n=>e({type:Mo.SetSpeech,data:{...t.speech,autoreadMode:n.target.value}}),children:[Y.jsx("option",{value:"off",children:"Off"}),Y.jsx("option",{value:"unfocused",children:"Unfocused"}),Y.jsx("option",{value:"all",children:"Always"})]})]})},nV=()=>{const[t,e]=Vs(),n=qU();return Y.jsxs("label",{children:["Voice:",Y.jsx("select",{value:t.speech.voice,onChange:r=>e({type:Mo.SetSpeech,data:{...t.speech,voice:r.target.value}}),children:n.map(r=>Y.jsx("option",{value:r.name,children:r.name},r.voiceURI))})]})},rV=()=>{const[t,e]=Vs();return Y.jsxs("label",{children:["Rate (0.1 - 10.0):",Y.jsx("input",{type:"range",min:"0.1",max:"10.0",step:"0.1",value:t.speech.rate,onChange:n=>e({type:Mo.SetSpeech,data:{...t.speech,rate:parseFloat(n.target.value)}})})]})},iV=()=>{const[t,e]=Vs();return Y.jsxs("label",{children:["Pitch (0 - 2):",Y.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:t.speech.pitch,onChange:n=>e({type:Mo.SetSpeech,data:{...t.speech,pitch:parseFloat(n.target.value)}})})]})},oV=()=>{const[t,e]=Vs();return Y.jsxs("label",{children:["Volume (0 - 1):",Y.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.speech.volume,onChange:n=>e({type:Mo.SetSpeech,data:{...t.speech,volume:parseFloat(n.target.value)}})})]})},sV=()=>{const[t]=Vs(),[e,n]=S.useState(!1),r=()=>{n(!0),console.log("Preview button clicked");const i=()=>{const o=new SpeechSynthesisUtterance("This is a preview of the selected voice settings."),s=speechSynthesis.getVoices();console.log("Available voices:",s.map(c=>c.name));const a=s.find(c=>c.name===t.speech.voice);console.log("Selected voice:",a?a.name:"Not found"),o.voice=a||null,o.rate=t.speech.rate,o.pitch=t.speech.pitch,o.volume=t.speech.volume,console.log("Utterance settings:",{voice:o.voice?o.voice.name:"Default",rate:o.rate,pitch:o.pitch,volume:o.volume}),o.onend=()=>{console.log("Speech ended"),n(!1)},o.onerror=c=>{console.error("Speech synthesis error:",c),n(!1)},speechSynthesis.cancel(),speechSynthesis.speak(o),console.log("Speech started")};speechSynthesis.getVoices().length>0?i():speechSynthesis.onvoiceschanged=()=>{speechSynthesis.onvoiceschanged=null,i()}};return gt.useEffect(()=>()=>{speechSynthesis.cancel()},[]),Y.jsx("button",{onClick:r,disabled:e,children:e?"Playing...":"Preview Voice"})},aV=()=>Y.jsxs("div",{children:[Y.jsx(tV,{}),Y.jsx("br",{}),Y.jsx(nV,{}),Y.jsx("br",{}),Y.jsx(rV,{}),Y.jsx("br",{}),Y.jsx(iV,{}),Y.jsx("br",{}),Y.jsx(oV,{}),Y.jsx("br",{}),Y.jsx(sV,{})]}),cV=()=>{const[t,e]=Vs(),n=t.editor,r=o=>{e({type:Mo.SetEditorAutocompleteEnabled,data:o.target.checked})},i=o=>{e({type:Mo.SetEditorAccessibilityMode,data:o.target.checked})};return Y.jsxs("div",{children:[Y.jsxs("label",{children:[Y.jsx("input",{type:"checkbox",checked:n.autocompleteEnabled,onChange:r}),"Enable Autocomplete"]}),Y.jsx("br",{}),Y.jsxs("label",{children:[Y.jsx("input",{type:"checkbox",checked:n.accessibilityMode,onChange:i}),"Enable Accessibility Mode"]}),Y.jsx("br",{})]})},lV=()=>{const t=[{label:"General",content:Y.jsx(eV,{})},{label:"Speech",content:Y.jsx(aV,{})},{label:"Editor",content:Y.jsx(cV,{})}];return Y.jsx(QU,{tabs:t})};function uV(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Yd(){return Yd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Yd.apply(null,arguments)}var EC="data-focus-lock",a_="data-focus-lock-disabled",dV="data-no-focus-lock",fV="data-autofocus-inside",hV="data-no-autofocus";function km(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function pV(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var gV=typeof window<"u"?S.useLayoutEffect:S.useEffect,Lw=new WeakMap;function mV(t,e){var n=pV(null,function(r){return t.forEach(function(i){return km(i,r)})});return gV(function(){var r=Lw.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||km(a,null)}),o.forEach(function(a){i.has(a)||km(a,s)})}Lw.set(n,t)},[t]),n}var Em={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},TC=function(t,e){return TC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},TC(t,e)};function fu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");TC(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var RC=function(){return RC=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},RC.apply(this,arguments)};function vV(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function c_(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Hl(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function _C(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function DC(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function bl(t){return this instanceof bl?(this.v=t,this):new bl(t)}function CV(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(i[h]=function(g){return new Promise(function(C,v){o.push([h,g,C,v])>1||c(h,g)})},p&&(i[h]=p(i[h])))}function c(h,p){try{l(r[h](p))}catch(g){f(o[0][3],g)}}function l(h){h.value instanceof bl?Promise.resolve(h.value.v).then(u,d):f(o[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function yV(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof Hl=="function"?Hl(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function l_(t){return t}function u_(t,e){e===void 0&&(e=l_);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var c=function(){var u=s;s=[],u.forEach(o)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){s.push(u),l()},filter:function(u){return s=s.filter(u),n}}}};return i}function rx(t,e){return e===void 0&&(e=l_),u_(t,e)}function xV(t){t===void 0&&(t={});var e=u_(null);return e.options=RC({async:!0,ssr:!1},t),e}var d_=rx({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),f_=rx(),IV=rx(),bV=xV({async:!0,ssr:typeof document<"u"}),AV=S.createContext(void 0),wV=[],ix=S.forwardRef(function(e,n){var r,i=S.useState(),o=i[0],s=i[1],a=S.useRef(),c=S.useRef(!1),l=S.useRef(null),u=S.useState({}),d=u[1],f=e.children,h=e.disabled,p=h===void 0?!1:h,g=e.noFocusGuards,C=g===void 0?!1:g,v=e.persistentFocus,m=v===void 0?!1:v,y=e.crossFrame,I=y===void 0?!0:y,b=e.autoFocus,A=b===void 0?!0:b;e.allowTextSelection;var E=e.group,k=e.className,D=e.whiteList,T=e.hasPositiveIndices,R=e.shards,P=R===void 0?wV:R,M=e.as,G=M===void 0?"div":M,j=e.lockProps,Q=j===void 0?{}:j,te=e.sideCar,$=e.returnFocus,q=$===void 0?!1:$,ne=e.focusOptions,F=e.onActivation,z=e.onDeactivation,K=S.useState({}),ee=K[0],ae=S.useCallback(function(xe){var Ue=xe.captureFocusRestore;if(!l.current){var Le,Ne=(Le=document)==null?void 0:Le.activeElement;l.current=Ne,Ne!==document.body&&(l.current=Ue(Ne))}a.current&&F&&F(a.current),c.current=!0,d()},[F]),ge=S.useCallback(function(){c.current=!1,z&&z(a.current),d()},[z]),Fe=S.useCallback(function(xe){var Ue=l.current;if(Ue){var Le=(typeof Ue=="function"?Ue():Ue)||document.body,Ne=typeof q=="function"?q(Le):q;if(Ne){var je=typeof Ne=="object"?Ne:void 0;l.current=null,xe?Promise.resolve().then(function(){return Le.focus(je)}):Le.focus(je)}}},[q]),le=S.useCallback(function(xe){c.current&&d_.useMedium(xe)},[]),Pt=f_.useMedium,Gt=S.useCallback(function(xe){a.current!==xe&&(a.current=xe,s(xe))},[]),ot=Yd((r={},r[a_]=p&&"disabled",r[EC]=E,r),Q),ut=C!==!0,mt=ut&&C!=="tail",st=mV([n,Gt]),he=S.useMemo(function(){return{observed:a,shards:P,enabled:!p,active:c.current}},[p,c.current,P,o]);return S.createElement(S.Fragment,null,ut&&[S.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:Em}),T?S.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:Em}):null],!p&&S.createElement(te,{id:ee,sideCar:bV,observed:o,disabled:p,persistentFocus:m,crossFrame:I,autoFocus:A,whiteList:D,shards:P,onActivation:ae,onDeactivation:ge,returnFocus:Fe,focusOptions:ne,noFocusGuards:C}),S.createElement(G,Yd({ref:st},ot,{className:k,onBlur:Pt,onFocus:le}),S.createElement(AV.Provider,{value:he},f)),mt&&S.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:Em}))});ix.propTypes={};function PC(t,e){return PC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},PC(t,e)}function SV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,PC(t,e)}function qd(t){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qd(t)}function kV(t,e){if(qd(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(qd(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function EV(t){var e=kV(t,"string");return qd(e)=="symbol"?e:e+""}function TV(t,e,n){return(e=EV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function RV(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var o=[],s;function a(){s=t(o.map(function(l){return l.props})),e(s)}var c=function(l){SV(u,l);function u(){return l.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var h=o.indexOf(this);o.splice(h,1),a()},d.render=function(){return gt.createElement(i,this.props)},u}(S.PureComponent);return TV(c,"displayName","SideEffect("+n(i)+")"),c}}var zo=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},Sc=function(t){return Array.isArray(t)?t:[t]},h_=function(t){return Array.isArray(t)?t[0]:t},_V=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},p_=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},g_=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},DV=function(t){return t.hasAttribute("inert")},PV=function(t,e){return!t||g_(t)||!_V(t)&&!DV(t)&&e(p_(t))},m_=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=PV(e,m_.bind(void 0,t));return t.set(e,r),r},NV=function(t,e){return t&&!g_(t)?OV(t)?e(p_(t)):!1:!0},v_=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=NV(e,v_.bind(void 0,t));return t.set(e,r),r},C_=function(t){return t.dataset},BV=function(t){return t.tagName==="BUTTON"},y_=function(t){return t.tagName==="INPUT"},x_=function(t){return y_(t)&&t.type==="radio"},FV=function(t){return!((y_(t)||BV(t))&&(t.type==="hidden"||t.disabled))},OV=function(t){var e=t.getAttribute(hV);return![!0,"true",""].includes(e)},ox=function(t){var e;return!!(t&&(!((e=C_(t))===null||e===void 0)&&e.focusGuard))},NC=function(t){return!ox(t)},MV=function(t){return!!t},LV=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},UV=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},sx=function(t,e,n){return zo(t).map(function(r,i){var o=UV(r);return{node:r,index:i,tabIndex:n&&o===-1?(r.dataset||{}).focusGuard?0:-1:o}}).filter(function(r){return!e||r.tabIndex>=0}).sort(LV)},VV=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],ax=VV.join(","),GV="".concat(ax,", [data-focus-guard]"),I_=function(t,e){return zo((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?GV:ax)?[r]:[],I_(r))},[])},WV=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?Zl([t.contentDocument.body],e):[t]},Zl=function(t,e){return t.reduce(function(n,r){var i,o=I_(r,e),s=(i=[]).concat.apply(i,o.map(function(a){return WV(a,e)}));return n.concat(s,r.parentNode?zo(r.parentNode.querySelectorAll(ax)).filter(function(a){return a===r}):[])},[])},zV=function(t){var e=t.querySelectorAll("[".concat(fV,"]"));return zo(e).map(function(n){return Zl([n])}).reduce(function(n,r){return n.concat(r)},[])},cx=function(t,e){return zo(t).filter(function(n){return m_(e,n)}).filter(function(n){return FV(n)})},Uw=function(t,e){return e===void 0&&(e=new Map),zo(t).filter(function(n){return v_(e,n)})},lx=function(t,e,n){return sx(cx(Zl(t,n),e),!0,n)},Qd=function(t,e){return sx(cx(Zl(t),e),!1)},jV=function(t,e){return cx(zV(t),e)},pc=function(t,e){return t.shadowRoot?pc(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:zo(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?pc(i,e):!1}return pc(n,e)})},HV=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(s,a){return!e.has(a)})},b_=function(t){return t.parentNode?b_(t.parentNode):t},ux=function(t){var e=Sc(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(EC);return n.push.apply(n,i?HV(zo(b_(r).querySelectorAll("[".concat(EC,'="').concat(i,'"]:not([').concat(a_,'="disabled"])')))):[r]),n},[])},ZV=function(t){try{return t()}catch{return}},ef=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?ef(e.shadowRoot):e instanceof HTMLIFrameElement&&ZV(function(){return e.contentWindow.document})?ef(e.contentWindow.document):e}},$V=function(t,e){return t===e},XV=function(t,e){return!!zo(t.querySelectorAll("iframe")).some(function(n){return $V(n,e)})},A_=function(t,e){return e===void 0&&(e=ef(h_(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:ux(t).some(function(n){return pc(n,e)||XV(n,e)})},KV=function(t){t===void 0&&(t=document);var e=ef(t);return e?zo(t.querySelectorAll("[".concat(dV,"]"))).some(function(n){return pc(n,e)}):!1},JV=function(t,e){return e.filter(x_).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},dx=function(t,e){return x_(t)&&t.name?JV(t,e):t},YV=function(t){var e=new Set;return t.forEach(function(n){return e.add(dx(n,t))}),t.filter(function(n){return e.has(n)})},Vw=function(t){return t[0]&&t.length>1?dx(t[0],t):t[0]},Gw=function(t,e){return t.indexOf(dx(e,t))},BC="NEW_FOCUS",qV=function(t,e,n,r,i){var o=t.length,s=t[0],a=t[o-1],c=ox(r);if(!(r&&t.indexOf(r)>=0)){var l=r!==void 0?n.indexOf(r):-1,u=i?n.indexOf(i):l,d=i?t.indexOf(i):-1;if(l===-1)return d!==-1?d:BC;if(d===-1)return BC;var f=l-u,h=n.indexOf(s),p=n.indexOf(a),g=YV(n),C=r!==void 0?g.indexOf(r):-1,v=C-(i?g.indexOf(i):l);if(!f&&d>=0||e.length===0)return d;var m=Gw(t,e[0]),y=Gw(t,e[e.length-1]);if(l<=h&&c&&Math.abs(f)>1)return y;if(l>=p&&c&&Math.abs(f)>1)return m;if(f&&Math.abs(v)>1)return d;if(l<=h)return y;if(l>p)return m;if(f)return Math.abs(f)>1?d:(o+d+f)%o}},QV=function(t){return function(e){var n,r=(n=C_(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},Ww=function(t,e,n){var r=t.map(function(o){var s=o.node;return s}),i=Uw(r.filter(QV(n)));return i&&i.length?Vw(i):Vw(Uw(e))},FC=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&FC(t.parentNode.host||t.parentNode,e),e},Tm=function(t,e){for(var n=FC(t),r=FC(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},w_=function(t,e,n){var r=Sc(t),i=Sc(e),o=r[0],s=!1;return i.filter(Boolean).forEach(function(a){s=Tm(s||a,a)||s,n.filter(Boolean).forEach(function(c){var l=Tm(o,c);l&&(!s||pc(l,s)?s=l:s=Tm(l,s))})}),s},zw=function(t,e){return t.reduce(function(n,r){return n.concat(jV(r,e))},[])},eG=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(MV)},tG=function(t,e){var n=ef(Sc(t).length>0?document:h_(t).ownerDocument),r=ux(t).filter(NC),i=w_(n||t,t,r),o=new Map,s=Qd(r,o),a=s.filter(function(p){var g=p.node;return NC(g)});if(a[0]){var c=Qd([i],o).map(function(p){var g=p.node;return g}),l=eG(c,a),u=l.map(function(p){var g=p.node;return g}),d=l.filter(function(p){var g=p.tabIndex;return g>=0}).map(function(p){var g=p.node;return g}),f=qV(u,d,c,n,e);if(f===BC){var h=Ww(s,d,zw(r,o))||Ww(s,u,zw(r,o));if(h)return{node:h};console.warn("focus-lock: cannot find any node to move focus into");return}return f===void 0?f:l[f]}},nG=function(t){var e=ux(t).filter(NC),n=w_(t,t,e),r=sx(Zl([n],!0),!0,!0),i=Zl(e,!1);return r.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:i.indexOf(s)>=0,guard:ox(s)}})},fx=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},Rm=0,_m=!1,S_=function(t,e,n){n===void 0&&(n={});var r=tG(t,e);if(!_m&&r){if(Rm>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),_m=!0,setTimeout(function(){_m=!1},1);return}Rm++,fx(r.node,n.focusOptions),Rm--}};function Uu(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var rG=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:Uu(n),parent:Uu(n.parentElement),left:Uu(n.previousElementSibling),right:Uu(n.nextElementSibling)}),n=n.parentElement;return{element:Uu(t),stack:e,ownerDocument:t.ownerDocument}},iG=function(t){var e,n,r,i,o;if(t)for(var s=t.stack,a=t.ownerDocument,c=new Map,l=0,u=s;l<u.length;l++){var d=u[l],f=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(f&&a.contains(f)){for(var h=(n=d.left)===null||n===void 0?void 0:n.call(d),p=d.current(),g=f.contains(p)?p:void 0,C=(r=d.right)===null||r===void 0?void 0:r.call(d),v=lx([f],c),m=(o=(i=g??(h==null?void 0:h.nextElementSibling))!==null&&i!==void 0?i:C)!==null&&o!==void 0?o:h;m;){for(var y=0,I=v;y<I.length;y++){var b=I[y];if(m!=null&&m.contains(b.node))return b.node}m=m.nextElementSibling}if(v.length)return v[0].node}}},k_=function(t){var e=rG(t);return function(){return iG(e)}},oG=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=Sc(e);if(r.every(function(s){return!pc(s,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?lx(r,new Map):Qd(r,new Map),o=i.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},sG=function(t,e){var n=e?lx(Sc(t),new Map):Qd(Sc(t),new Map);return{first:n[0],last:n[n.length-1]}},aG=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},E_=function(t,e,n){e===void 0&&(e={});var r=aG(e),i=oG(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&fx(o.node,r.focusOptions)}},cG=function(t,e){e===void 0&&(e={}),E_(t,e,function(n,r){var i=n.next,o=n.first;return i||r&&o})},lG=function(t,e){e===void 0&&(e={}),E_(t,e,function(n,r){var i=n.prev,o=n.last;return i||r&&o})},T_=function(t,e,n){var r,i=sG(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),o=i[n];o&&fx(o.node,e.focusOptions)},uG=function(t,e){e===void 0&&(e={}),T_(t,e,"first")},dG=function(t,e){e===void 0&&(e={}),T_(t,e,"last")};function hx(t){setTimeout(t,1)}var fG=function(e){return e&&"current"in e?e.current:e},R_=function(){return document&&document.activeElement===document.body},hG=function(){return R_()||KV()},Al=null,Fr=null,jw=function(){return null},wl=null,tf=!1,px=!1,pG=function(){return!0},gG=function(e){return(Al.whiteList||pG)(e)},mG=function(e,n){wl={observerNode:e,portaledElement:n}},vG=function(e){return wl&&wl.portaledElement===e};function Hw(t,e,n,r){var i=null,o=t;do{var s=r[o];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else if(s.lockItem){if(o!==t)return;i=null}else break}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var CG=function(e){return e?!!tf:tf==="meanwhile"},yG=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},xG=function(e,n){return n.some(function(r){return yG(e,r,r)})},__=function(e){return Qd(e,new Map)},IG=function(e){return!__([e.parentNode]).some(function(n){return n.node===e})},$0=function(){var e=!1;if(Al){var n=Al,r=n.observed,i=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,c=n.focusOptions,l=n.noFocusGuards,u=r||wl&&wl.portaledElement;if(R_()&&Fr&&(!document.body.contains(Fr)||IG(Fr))){Fr=null;var d=jw();d&&d.focus()}var f=document&&document.activeElement;if(u){var h=[u].concat(s.map(fG).filter(Boolean)),p=function(){if(!CG(a)||!l||!Fr||px)return!1;var y=__(h),I=y.findIndex(function(b){var A=b.node;return A===Fr});return I===0||I===y.length-1};if((!f||gG(f))&&(i||p()||!hG()||!Fr&&o)&&(u&&!(A_(h)||f&&xG(f,h)||vG(f))&&(document&&!Fr&&f&&!o?(f.blur&&f.blur(),document.body.focus()):(e=S_(h,Fr,{focusOptions:c}),wl={})),tf=!1,Fr=document&&document.activeElement,jw=k_(Fr)),document&&f!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var g=document&&document.activeElement,C=nG(h),v=C.map(function(m){var y=m.node;return y}).indexOf(g);v>-1&&(C.filter(function(m){var y=m.guard,I=m.node;return y&&I.dataset.focusAutoGuard}).forEach(function(m){var y=m.node;return y.removeAttribute("tabIndex")}),Hw(v,C.length,1,C),Hw(v,-1,-1,C))}}}return e},D_=function(e){$0()&&e&&(e.stopPropagation(),e.preventDefault())},gx=function(){return hx($0)},bG=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||mG(r,n)},AG=function(){return null},P_=function(){px=!0},N_=function(){px=!1,tf="just",hx(function(){tf="meanwhile"})},wG=function(){document.addEventListener("focusin",D_),document.addEventListener("focusout",gx),window.addEventListener("focus",P_),window.addEventListener("blur",N_)},SG=function(){document.removeEventListener("focusin",D_),document.removeEventListener("focusout",gx),window.removeEventListener("focus",P_),window.removeEventListener("blur",N_)};function kG(t){return t.filter(function(e){var n=e.disabled;return!n})}var B_={moveFocusInside:S_,focusInside:A_,focusNextElement:cG,focusPrevElement:lG,focusFirstElement:uG,focusLastElement:dG,captureFocusRestore:k_};function EG(t){var e=t.slice(-1)[0];e&&!Al&&wG();var n=Al,r=n&&e&&e.id===n.id;Al=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!e)),e?(Fr=null,(!r||n.observed!==e.observed)&&e.onActivation(B_),$0(),hx($0)):(SG(),Fr=null)}d_.assignSyncMedium(bG);f_.assignMedium(gx);IV.assignMedium(function(t){return t(B_)});const TG=RV(kG,EG)(AG);var F_=S.forwardRef(function(e,n){return S.createElement(ix,Yd({sideCar:TG,ref:n},e))}),O_=ix.propTypes||{};O_.sideCar;uV(O_,["sideCar"]);F_.propTypes={};const RG=gt.forwardRef((t,e)=>{const[n,r]=S.useState(!1),i=S.useRef(null);return gt.useImperativeHandle(e,()=>({open(){r(!0)},close(){r(!1)}})),S.useEffect(()=>{var o;n&&((o=i.current)==null||o.focus())},[n]),S.useEffect(()=>{const o=s=>{s.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[]),Y.jsx(F_,{disabled:!n,children:Y.jsxs("dialog",{className:"preferences-dialog",open:n,ref:i,tabIndex:-1,"aria-label":"Preferences",children:[Y.jsx("h1",{style:{color:"white",textAlign:"center",fontSize:"1.5em",padding:"0.5em",margin:"0.5em",border:"1px solid black",borderRadius:"0.5em",backgroundColor:"black"},children:"Preferences"}),n&&Y.jsx(lV,{}),Y.jsx("button",{onClick:()=>r(!1),children:"Close"}),Y.jsx("br",{}),Y.jsxs("span",{id:"commit-hash",children:["Version: ",YU]})]})})});var M_={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Zw=gt.createContext&&gt.createContext(M_),_G=["attr","size","title"];function DG(t,e){if(t==null)return{};var n=PG(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function PG(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function X0(){return X0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},X0.apply(this,arguments)}function $w(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function K0(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$w(Object(n),!0).forEach(function(r){NG(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$w(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function NG(t,e,n){return e=BG(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BG(t){var e=FG(t,"string");return typeof e=="symbol"?e:e+""}function FG(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function L_(t){return t&&t.map((e,n)=>gt.createElement(e.tag,K0({key:n},e.attr),L_(e.child)))}function Wa(t){return e=>gt.createElement(OG,X0({attr:K0({},t.attr)},e),L_(t.child))}function OG(t){var e=n=>{var{attr:r,size:i,title:o}=t,s=DG(t,_G),a=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),gt.createElement("svg",X0({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:c,style:K0(K0({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&gt.createElement("title",null,o),t.children)};return Zw!==void 0?gt.createElement(Zw.Consumer,null,n=>e(n)):e(M_)}function MG(t){return Wa({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function LG(t){return Wa({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32zM128 272c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32zm128 0c-17.7 0-32-14.3-32-32s14.3-32 32-32 32 14.3 32 32-14.3 32-32 32z"},child:[]}]})(t)}function UG(t){return Wa({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function VG(t){return Wa({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"},child:[]}]})(t)}function U_(t){return Wa({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function GG(t){return Wa({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function WG(t){return Wa({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function zG(t){return Wa({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const jG=({client:t,onClearLog:e,onSaveLog:n,onToggleUsers:r,onOpenPrefs:i})=>{const o=md(t,"connect",!1),[s,a]=gt.useState(t.cacophony.muted),c=md(t,"autosayChanged",t.autosay),[l,u]=gt.useState(go.getState().general.volume);return Y.jsxs("div",{className:"toolbar",children:[Y.jsxs("button",{onClick:n,accessKey:"l",children:[Y.jsx(U_,{}),"Save Log"]}),Y.jsxs("button",{onClick:e,accessKey:"c",children:[Y.jsx(VG,{}),"Clear Log"]}),Y.jsxs("button",{onClick:i,accessKey:"p",children:[Y.jsx(MG,{}),"Preferences"]}),Y.jsxs("button",{onClick:()=>{a(!s),t.cacophony.muted=!s},accessKey:"m",children:[s?Y.jsx(zG,{}):Y.jsx(WG,{}),s?"Unmute":"Mute"]}),Y.jsxs("label",{children:["Volume",Y.jsx("input",{type:"range",min:"0",max:"100",value:l*100,onChange:d=>{const f=Number(d.target.value)/100;u(f),t.cacophony.setGlobalVolume(f),go.dispatch({type:Mo.SetGeneral,data:{...go.getState().general,volume:f}})}})]}),Y.jsxs("label",{children:[Y.jsx(LG,{}),"Autosay",Y.jsx("input",{type:"checkbox",checked:c,onChange:d=>{t.autosay=d.target.checked}})]}),Y.jsx("button",{onClick:()=>o?t.close():t.connect(),children:o?"Disconnect":"Connect"}),Y.jsx("button",{onClick:r,accessKey:"u",children:"Show/Hide Users"})]})};class HG extends gt.Component{constructor(e){super(e),this.state={statusText:"Not connected"},e.client.on("statustext",n=>this.setState({statusText:n})),e.client.on("connect",()=>this.setState({statusText:"Connected"})),e.client.on("disconnect",()=>this.setState({statusText:"Disconnected"}))}render(){return Y.jsx("div",{className:"statusbar",children:this.state.statusText})}}const ZG=({users:t})=>Y.jsxs("div",{className:"sidebar",children:[Y.jsx("div",{className:"sidebar-header",role:"heading","aria-level":2,children:"Connected Players"}),Y.jsx("div",{className:"sidebar-content",children:Y.jsx("ul",{children:t.map(e=>{let n="";return e.away&&(n+=" away"),e.idle&&(n+=" idle"),Y.jsx("li",{className:n,children:e.Name},e.Object)})})})]});var Xw={};function $G(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var XG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function KG(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var V_={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(XG,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function o(g,C){var v=g[C];if(typeof v.bind=="function")return v.bind(g);try{return Function.prototype.bind.call(v,g)}catch{return function(){return Function.prototype.apply.apply(v,[g,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?s:console[g]!==void 0?o(console,g):console.log!==void 0?o(console,"log"):e}function c(g,C){for(var v=0;v<i.length;v++){var m=i[v];this[m]=v<g?e:this.methodFactory(m,g,C)}this.log=this.debug}function l(g,C,v){return function(){typeof console!==n&&(c.call(this,C,v),this[g].apply(this,arguments))}}function u(g,C,v){return a(g)||l.apply(this,arguments)}function d(g,C,v){var m=this,y;C=C??"WARN";var I="loglevel";typeof g=="string"?I+=":"+g:typeof g=="symbol"&&(I=void 0);function b(D){var T=(i[D]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=T;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+T+";"}catch{}}}function A(){var D;if(!(typeof window===n||!I)){try{D=window.localStorage[I]}catch{}if(typeof D===n)try{var T=window.document.cookie,R=T.indexOf(encodeURIComponent(I)+"=");R!==-1&&(D=/^([^;]+)/.exec(T.slice(R))[1])}catch{}return m.levels[D]===void 0&&(D=void 0),D}}function E(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I);return}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}m.name=g,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=v||u,m.getLevel=function(){return y},m.setLevel=function(D,T){if(typeof D=="string"&&m.levels[D.toUpperCase()]!==void 0&&(D=m.levels[D.toUpperCase()]),typeof D=="number"&&D>=0&&D<=m.levels.SILENT){if(y=D,T!==!1&&b(D),c.call(m,D,g),typeof console===n&&D<m.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+D},m.setDefaultLevel=function(D){C=D,A()||m.setLevel(D,!1)},m.resetLevel=function(){m.setLevel(C,!1),E()},m.enableAll=function(D){m.setLevel(m.levels.TRACE,D)},m.disableAll=function(D){m.setLevel(m.levels.SILENT,D)};var k=A();k==null&&(k=C),m.setLevel(k,!1)}var f=new d,h={};f.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var v=h[C];return v||(v=h[C]=new d(C,f.getLevel(),f.methodFactory)),v};var p=typeof window!==n?window.log:void 0;return f.noConflict=function(){return typeof window!==n&&window.log===f&&(window.log=p),f},f.getLoggers=function(){return h},f.default=f,f})})(V_);var mx=V_.exports,OC;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(OC||(OC={}));var Lo;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(Lo||(Lo={}));let et=mx.getLogger("livekit");et.setDefaultLevel(OC.info);function Os(t){const e=mx.getLogger(t);return e.setDefaultLevel(et.getLevel()),e}mx.getLogger("lk-e2ee");function wr(t,e){if(!t)throw new Error(e)}const JG=34028234663852886e22,YG=-34028234663852886e22,qG=4294967295,QG=2147483647,eW=-2147483648;function Gh(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>QG||t<eW)throw new Error("invalid int 32: "+t)}function MC(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>qG||t<0)throw new Error("invalid uint 32: "+t)}function G_(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>JG||t<YG))throw new Error("invalid float 32: "+t)}const W_=Symbol("@bufbuild/protobuf/enum-type");function tW(t){const e=t[W_];return wr(e,"missing enum type on enum object"),e}function z_(t,e,n,r){t[W_]=j_(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function j_(t,e,n){const r=Object.create(null),i=Object.create(null),o=[];for(const s of e){const a=H_(s);o.push(a),r[s.name]=a,i[s.no]=a}return{typeName:t,values:o,findName(s){return r[s]},findNumber(s){return i[s]}}}function nW(t,e,n){const r={};for(const i of e){const o=H_(i);r[o.localName]=o.no,r[o.no]=o.localName}return z_(r,t,e),r}function H_(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Se{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function rW(t,e,n,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),s={[o]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(s.prototype,new Se),Object.assign(s,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new s().fromBinary(a,c)},fromJson(a,c){return new s().fromJson(a,c)},fromJsonString(a,c){return new s().fromJsonString(a,c)},equals(a,c){return t.util.equals(s,a,c)}}),s}function iW(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makeMessageType(i,o,s){return rW(this,i,o,s)},makeEnum:nW,makeEnumType:j_,getEnumType:tW}}var se;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(se||(se={}));var kc;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(kc||(kc={}));function oW(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Dm(t,e,n){for(let o=0;o<28;o=o+7){const s=t>>>o,a=!(!(s>>>7)&&e==0),c=(a?s|128:s)&255;if(n.push(c),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const s=e>>>o,a=!!(s>>>7),c=(a?s|128:s)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const Wh=4294967296;function Kw(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function o(s,a){const c=Number(t.slice(s,a));i*=n,r=r*n+c,r>=Wh&&(i=i+(r/Wh|0),r=r%Wh)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?$_(r,i):vx(r,i)}function sW(t,e){let n=vx(t,e);const r=n.hi&2147483648;r&&(n=$_(n.lo,n.hi));const i=Z_(n.lo,n.hi);return r?"-"+i:i}function Z_(t,e){if({lo:t,hi:e}=aW(t,e),e<=2097151)return String(Wh*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let o=n+r*6777216+i*6710656,s=r+i*8147497,a=i*2;const c=1e7;return o>=c&&(s+=Math.floor(o/c),o%=c),s>=c&&(a+=Math.floor(s/c),s%=c),a.toString()+Jw(s)+Jw(o)}function aW(t,e){return{lo:t>>>0,hi:e>>>0}}function vx(t,e){return{lo:t|0,hi:e|0}}function $_(t,e){return e=~e,t?t=~t+1:e+=1,vx(t,e)}const Jw=t=>{const e=String(t);return"0000000".slice(e.length)+e};function Yw(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function cW(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function lW(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof Xw!="object"||Xw.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<s)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>wr(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>wr(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),Kw(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),Kw(i)},dec(i,o){return sW(i,o)},uDec(i,o){return Z_(i,o)}}}const We=lW();var rn;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(rn||(rn={}));class uW{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(MC(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Gh(e),Yw(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){G_(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){MC(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Gh(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Gh(e),e=(e<<1^e>>31)>>>0,Yw(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=We.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=We.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=We.enc(e);return Dm(n.lo,n.hi,this.buf),this}sint64(e){let n=We.enc(e),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return Dm(i,o,this.buf),this}uint64(e){let n=We.uEnc(e);return Dm(n.lo,n.hi,this.buf),this}}class dW{constructor(e,n){this.varint64=oW,this.uint32=cW,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case rn.Varint:for(;this.buf[this.pos++]&128;);break;case rn.Bit64:this.pos+=4;case rn.Bit32:this.pos+=4;break;case rn.LengthDelimited:let r=this.uint32();this.pos+=r;break;case rn.StartGroup:let i;for(;(i=this.tag()[1])!==rn.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return We.dec(...this.varint64())}uint64(){return We.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,We.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return We.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return We.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function LC(t,e){return e instanceof Se||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}se.DOUBLE,se.FLOAT,se.INT64,se.UINT64,se.INT32,se.UINT32,se.BOOL,se.STRING,se.BYTES;function Xs(t,e,n){if(e===n)return!0;if(t==se.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case se.UINT64:case se.FIXED64:case se.INT64:case se.SFIXED64:case se.SINT64:return e==n}return!1}function UC(t,e){switch(t){case se.BOOL:return!1;case se.UINT64:case se.FIXED64:case se.INT64:case se.SFIXED64:case se.SINT64:return e==0?We.zero:"0";case se.DOUBLE:case se.FLOAT:return 0;case se.BYTES:return new Uint8Array(0);case se.STRING:return"";default:return 0}}function X_(t,e){const n=e===void 0;let r=rn.Varint,i=e===0;switch(t){case se.STRING:i=n||!e.length,r=rn.LengthDelimited;break;case se.BOOL:i=e===!1;break;case se.DOUBLE:r=rn.Bit64;break;case se.FLOAT:r=rn.Bit32;break;case se.INT64:i=n||e==0;break;case se.UINT64:i=n||e==0;break;case se.FIXED64:i=n||e==0,r=rn.Bit64;break;case se.BYTES:i=n||!e.byteLength,r=rn.LengthDelimited;break;case se.FIXED32:r=rn.Bit32;break;case se.SFIXED32:r=rn.Bit32;break;case se.SFIXED64:i=n||e==0,r=rn.Bit64;break;case se.SINT64:i=n||e==0;break}const o=se[t].toLowerCase();return[r,o,n||i]}const Yc=Symbol("@bufbuild/protobuf/unknown-fields"),qw={readUnknownFields:!0,readerFactory:t=>new dW(t)},Qw={writeUnknownFields:!0,writerFactory:()=>new uW};function fW(t){return t?Object.assign(Object.assign({},qw),t):qw}function hW(t){return t?Object.assign(Object.assign({},Qw),t):Qw}function pW(){return{makeReadOptions:fW,makeWriteOptions:hW,listUnknownFields(t){var e;return(e=t[Yc])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Yc]},writeUnknownFields(t,e){const r=t[Yc];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Yc])||(i[Yc]=[]),i[Yc].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r){const i=t.getType(),o=n===void 0?e.len:e.pos+n;for(;e.pos<o;){const[s,a]=e.tag(),c=i.fields.find(s);if(!c){const f=e.skip(a);r.readUnknownFields&&this.onUnknownField(t,s,a,f);continue}let l=t,u=c.repeated,d=c.localName;switch(c.oneof&&(l=l[c.oneof.localName],l.case!=d&&delete l.value,l.case=d,d="value"),c.kind){case"scalar":case"enum":const f=c.kind=="enum"?se.INT32:c.T;let h=J0;if(c.kind=="scalar"&&c.L>0&&(h=mW),u){let v=l[d];if(a==rn.LengthDelimited&&f!=se.STRING&&f!=se.BYTES){let m=e.uint32()+e.pos;for(;e.pos<m;)v.push(h(e,f))}else v.push(h(e,f))}else l[d]=h(e,f);break;case"message":const p=c.T;u?l[d].push(zh(e,new p,r)):l[d]instanceof Se?zh(e,l[d],r):(l[d]=zh(e,new p,r),p.fieldWrapper&&!c.oneof&&!c.repeated&&(l[d]=p.fieldWrapper.unwrapField(l[d])));break;case"map":let[g,C]=gW(c,e,r);l[d][g]=C;break}}}}}function zh(t,e,n){return e.getType().runtime.bin.readMessage(e,t,t.uint32(),n),e}function gW(t,e,n){const r=e.uint32(),i=e.pos+r;let o,s;for(;e.pos<i;){let[a]=e.tag();switch(a){case 1:o=J0(e,t.K);break;case 2:switch(t.V.kind){case"scalar":s=J0(e,t.V.T);break;case"enum":s=e.int32();break;case"message":s=zh(e,new t.V.T,n);break}break}}if(o===void 0){let a=UC(t.K,kc.BIGINT);o=t.K==se.BOOL?a.toString():a}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(t.V.kind){case"scalar":s=UC(t.V.T,kc.BIGINT);break;case"enum":s=0;break;case"message":s=new t.V.T;break}return[o,s]}function mW(t,e){const n=J0(t,e);return typeof n=="bigint"?n.toString():n}function J0(t,e){switch(e){case se.STRING:return t.string();case se.BOOL:return t.bool();case se.DOUBLE:return t.double();case se.FLOAT:return t.float();case se.INT32:return t.int32();case se.INT64:return t.int64();case se.UINT64:return t.uint64();case se.FIXED64:return t.fixed64();case se.BYTES:return t.bytes();case se.FIXED32:return t.fixed32();case se.SFIXED32:return t.sfixed32();case se.SFIXED64:return t.sfixed64();case se.SINT64:return t.sint64();case se.UINT32:return t.uint32();case se.SINT32:return t.sint32()}}function vW(t,e,n,r,i){t.tag(n.no,rn.LengthDelimited),t.fork();let o=r;switch(n.K){case se.INT32:case se.FIXED32:case se.UINT32:case se.SFIXED32:case se.SINT32:o=Number.parseInt(r);break;case se.BOOL:wr(r=="true"||r=="false"),o=r=="true";break}switch(Id(t,n.K,1,o,!0),n.V.kind){case"scalar":Id(t,n.V.T,2,i,!0);break;case"enum":Id(t,se.INT32,2,i,!0);break;case"message":VC(t,e,n.V.T,2,i);break}t.join()}function VC(t,e,n,r,i){if(i!==void 0){const o=LC(n,i);t.tag(r,rn.LengthDelimited).bytes(o.toBinary(e))}}function Id(t,e,n,r,i){let[o,s,a]=X_(e,r);(!a||i)&&t.tag(n,o)[s](r)}function CW(t,e,n,r){if(!r.length)return;t.tag(n,rn.LengthDelimited).fork();let[,i]=X_(e);for(let o=0;o<r.length;o++)t[i](r[o]);t.join()}function yW(){return Object.assign(Object.assign({},pW()),{writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){let o,s=i.repeated,a=i.localName;if(i.oneof){const c=t[i.oneof.localName];if(c.case!==a)continue;o=c.value}else o=t[a];switch(i.kind){case"scalar":case"enum":let c=i.kind=="enum"?se.INT32:i.T;if(s)if(i.packed)CW(e,c,i.no,o);else for(const l of o)Id(e,c,i.no,l,!0);else o!==void 0&&Id(e,c,i.no,o,!!i.oneof||i.opt);break;case"message":if(s)for(const l of o)VC(e,n,i.T,i.no,l);else VC(e,n,i.T,i.no,o);break;case"map":for(const[l,u]of Object.entries(o))vW(e,n,i,l,u);break}}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}let Qo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Up=[];for(let t=0;t<Qo.length;t++)Up[Qo[t].charCodeAt(0)]=t;Up[45]=Qo.indexOf("+");Up[95]=Qo.indexOf("/");const K_={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,o,s=0;for(let a=0;a<t.length;a++){if(o=Up[t.charCodeAt(a)],o===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=o,i=1;break;case 1:n[r++]=s<<2|(o&48)>>4,s=o,i=2;break;case 2:n[r++]=(s&15)<<4|(o&60)>>2,s=o,i=3;break;case 3:n[r++]=(s&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=Qo[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=Qo[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=Qo[i|r>>6],e+=Qo[r&63],n=0;break}return n&&(e+=Qo[i],e+="=",n==1&&(e+="=")),e}},eS={ignoreUnknownFields:!1},tS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function xW(t){return t?Object.assign(Object.assign({},eS),t):eS}function IW(t){return t?Object.assign(Object.assign({},tS),t):tS}function bW(t){const e=t(AW,nS);return{makeReadOptions:xW,makeWriteOptions:IW,readMessage(n,r,i,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(this.debug(r)));o=o??new n;const s={};for(const[a,c]of Object.entries(r)){const l=n.fields.findJsonName(a);if(!l){if(!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(a,'" is unknown'));continue}let u=l.localName,d=o;if(l.oneof){if(c===null&&l.kind=="scalar")continue;const f=s[l.oneof.localName];if(f)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(f,'", "').concat(a,'"'));s[l.oneof.localName]=a,d=d[l.oneof.localName]={case:u},u="value"}if(l.repeated){if(c===null)continue;if(!Array.isArray(c))throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const f=d[u];for(const h of c){if(h===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h)));let p;switch(l.kind){case"message":p=l.T.fromJson(h,i);break;case"enum":if(p=Pm(l.T,h,i.ignoreUnknownFields),p===void 0)continue;break;case"scalar":try{p=Vu(l.T,h,l.L)}catch(g){let C="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h));throw g instanceof Error&&g.message.length>0&&(C+=": ".concat(g.message)),new Error(C)}break}f.push(p)}}else if(l.kind=="map"){if(c===null)continue;if(Array.isArray(c)||typeof c!="object")throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const f=d[u];for(const[h,p]of Object.entries(c)){if(p===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: map value null"));let g;switch(l.V.kind){case"message":g=l.V.T.fromJson(p,i);break;case"enum":if(g=Pm(l.V.T,p,i.ignoreUnknownFields),g===void 0)continue;break;case"scalar":try{g=Vu(l.V.T,p,kc.BIGINT)}catch(C){let v="cannot decode map value for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(v+=": ".concat(C.message)),new Error(v)}break}try{f[Vu(l.K,l.K==se.BOOL?h=="true"?!0:h=="false"?!1:h:h,kc.BIGINT).toString()]=g}catch(C){let v="cannot decode map key for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(v+=": ".concat(C.message)),new Error(v)}}}else switch(l.kind){case"message":const f=l.T;if(c===null&&f.typeName!="google.protobuf.Value"){if(l.oneof)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name,' from JSON: null is invalid for oneof field "').concat(a,'"'));continue}d[u]instanceof Se?d[u].fromJson(c,i):(d[u]=f.fromJson(c,i),f.fieldWrapper&&!l.oneof&&(d[u]=f.fieldWrapper.unwrapField(d[u])));break;case"enum":const h=Pm(l.T,c,i.ignoreUnknownFields);h!==void 0&&(d[u]=h);break;case"scalar":try{d[u]=Vu(l.T,c,l.L)}catch(p){let g="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw p instanceof Error&&p.message.length>0&&(g+=": ".concat(p.message)),new Error(g)}break}}return o},writeMessage(n,r){const i=n.getType(),o={};let s;try{for(const a of i.fields.byMember()){let c;if(a.kind=="oneof"){const l=n[a.localName];if(l.value===void 0)continue;if(s=a.findField(l.case),!s)throw"oneof case not found: "+l.case;c=e(s,l.value,r)}else s=a,c=e(s,n[s.localName],r);c!==void 0&&(o[r.useProtoFieldName?s.name:s.jsonName]=c)}}catch(a){const c=s?"cannot encode field ".concat(i.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return o},readScalar:Vu,writeScalar:nS,debug:J_}}function J_(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function Vu(t,e,n){switch(t){case se.DOUBLE:case se.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==se.FLOAT&&G_(r),r;case se.INT32:case se.FIXED32:case se.SFIXED32:case se.SINT32:case se.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return t==se.UINT32?MC(i):Gh(i),i;case se.INT64:case se.SFIXED64:case se.SINT64:if(e===null)return We.zero;if(typeof e!="number"&&typeof e!="string")break;const o=We.parse(e);return n?o.toString():o;case se.FIXED64:case se.UINT64:if(e===null)return We.zero;if(typeof e!="number"&&typeof e!="string")break;const s=We.uParse(e);return n?s.toString():s;case se.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case se.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case se.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return K_.dec(e)}throw new Error}function Pm(t,e,n){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r||n)return r==null?void 0:r.no;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(J_(e)))}function AW(t,e,n,r){var i;if(e===void 0)return e;if(e===0&&!n)return;if(r)return e;if(t.typeName=="google.protobuf.NullValue")return null;const o=t.findNumber(e);return(i=o==null?void 0:o.name)!==null&&i!==void 0?i:e}function nS(t,e,n){if(e!==void 0)switch(t){case se.INT32:case se.SFIXED32:case se.SINT32:case se.FIXED32:case se.UINT32:return wr(typeof e=="number"),e!=0||n?e:void 0;case se.FLOAT:case se.DOUBLE:return wr(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||n?e:void 0;case se.STRING:return wr(typeof e=="string"),e.length>0||n?e:void 0;case se.BOOL:return wr(typeof e=="boolean"),e||n?e:void 0;case se.UINT64:case se.FIXED64:case se.INT64:case se.SFIXED64:case se.SINT64:return wr(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.toString(10):void 0;case se.BYTES:return wr(e instanceof Uint8Array),n||e.byteLength>0?K_.enc(e):void 0}}function wW(){return bW((t,e)=>function(r,i,o){if(r.kind=="map"){const s={};switch(r.V.kind){case"scalar":for(const[c,l]of Object.entries(i)){const u=e(r.V.T,l,!0);wr(u!==void 0),s[c.toString()]=u}break;case"message":for(const[c,l]of Object.entries(i))s[c.toString()]=l.toJson(o);break;case"enum":const a=r.V.T;for(const[c,l]of Object.entries(i)){wr(l===void 0||typeof l=="number");const u=t(a,l,!0,o.enumAsInteger);wr(u!==void 0),s[c.toString()]=u}break}return o.emitDefaultValues||Object.keys(s).length>0?s:void 0}else if(r.repeated){const s=[];switch(r.kind){case"scalar":for(let a=0;a<i.length;a++)s.push(e(r.T,i[a],!0));break;case"enum":for(let a=0;a<i.length;a++)s.push(t(r.T,i[a],!0,o.enumAsInteger));break;case"message":for(let a=0;a<i.length;a++)s.push(LC(r.T,i[a]).toJson(o));break}return o.emitDefaultValues||s.length>0?s:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return t(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return i!==void 0?LC(r.T,i).toJson(o):void 0}})}function SW(){return{setEnumType:z_,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,o=e,s=t;if(s[i]!==void 0)switch(r.kind){case"oneof":const a=s[i].case;if(a===void 0)continue;const c=r.findField(a);let l=s[i].value;c&&c.kind=="message"&&!(l instanceof c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===se.BYTES&&(l=Gu(l)),o[i]={case:a,value:l};break;case"scalar":case"enum":let u=s[i];r.T===se.BYTES&&(u=r.repeated?u.map(Gu):Gu(u)),o[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===se.BYTES)for(const[h,p]of Object.entries(s[i]))o[i][h]=Gu(p);else Object.assign(o[i],s[i]);break;case"message":const f=r.V.T;for(const h of Object.keys(s[i])){let p=s[i][h];f.fieldWrapper||(p=new f(p)),o[i][h]=p}break}break;case"message":const d=r.T;if(r.repeated)o[i]=s[i].map(f=>f instanceof d?f:new d(f));else if(s[i]!==void 0){const f=s[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[i]=Gu(f):o[i]=f:o[i]=f instanceof d?f:new d(f)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((s,a)=>r.T.equals(s,o[a]));case"scalar":return i.every((s,a)=>Xs(r.T,s,o[a]));case"enum":return i.every((s,a)=>Xs(se.INT32,s,o[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return Xs(se.INT32,i,o);case"scalar":return Xs(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const s=r.findField(i.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(i.value,o.value);case"enum":return Xs(se.INT32,i.value,o.value);case"scalar":return Xs(s.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(s.kind));case"map":const a=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const c=r.V.T;return a.every(u=>c.equals(i[u],o[u]));case"enum":return a.every(u=>Xs(se.INT32,i[u],o[u]));case"scalar":const l=r.V.T;return a.every(u=>Xs(l,i[u],o[u]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const o=t[i.localName];let s;if(i.repeated)s=o.map(ah);else if(i.kind=="map"){s=r[i.localName];for(const[a,c]of Object.entries(o))s[a]=ah(c)}else i.kind=="oneof"?s=i.findField(o.case)?{case:o.case,value:ah(o.value)}:{case:void 0}:s=ah(o);r[i.localName]=s}return n}}}function ah(t){if(t===void 0)return t;if(t instanceof Se)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Gu(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class kW{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function Y_(t,e){const n=q_(t);return e?n:PW(DW(n))}function EW(t){return Y_(t,!1)}const TW=q_;function q_(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const RW=new Set(["constructor","toString","toJSON","valueOf"]),_W=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),Q_=t=>"".concat(t,"$"),DW=t=>_W.has(t)?Q_(t):t,PW=t=>RW.has(t)?Q_(t):t;class NW{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=EW(e)}addField(e){wr(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const N=iW("proto3",wW(),yW(),Object.assign(Object.assign({},SW()),{newFieldList(t){return new kW(t,BW)},initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=UC(e.T,e.L);break}}}}));function BW(t){var e,n,r,i;const o=[];let s;for(const a of typeof t=="function"?t():t){const c=a;if(c.localName=Y_(a.name,a.oneof!==void 0),c.jsonName=(e=a.jsonName)!==null&&e!==void 0?e:TW(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.L=(r=a.L)!==null&&r!==void 0?r:kc.BIGINT),c.packed=(i=a.packed)!==null&&i!==void 0?i:a.kind=="enum"||a.kind=="scalar"&&a.T!=se.BYTES&&a.T!=se.STRING,a.oneof!==void 0){const l=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!s||s.name!=l)&&(s=new NW(l)),c.oneof=s,s.addField(c)}o.push(c)}return o}class Tn extends Se{constructor(e){super(),this.seconds=We.zero,this.nanos=0,N.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(N.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=We.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return Tn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new Tn({seconds:We.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new Tn().fromBinary(e,n)}static fromJson(e,n){return new Tn().fromJson(e,n)}static fromJsonString(e,n){return new Tn().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Tn,e,n)}}Tn.runtime=N;Tn.typeName="google.protobuf.Timestamp";Tn.fields=N.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var GC;(function(t){t[t.DEFAULT_AC=0]="DEFAULT_AC",t[t.OPUS=1]="OPUS",t[t.AAC=2]="AAC"})(GC||(GC={}));N.util.setEnumType(GC,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var WC;(function(t){t[t.DEFAULT_VC=0]="DEFAULT_VC",t[t.H264_BASELINE=1]="H264_BASELINE",t[t.H264_MAIN=2]="H264_MAIN",t[t.H264_HIGH=3]="H264_HIGH",t[t.VP8=4]="VP8"})(WC||(WC={}));N.util.setEnumType(WC,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var zC;(function(t){t[t.IC_DEFAULT=0]="IC_DEFAULT",t[t.IC_JPEG=1]="IC_JPEG"})(zC||(zC={}));N.util.setEnumType(zC,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var Kn;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO",t[t.DATA=2]="DATA"})(Kn||(Kn={}));N.util.setEnumType(Kn,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var on;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CAMERA=1]="CAMERA",t[t.MICROPHONE=2]="MICROPHONE",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(on||(on={}));N.util.setEnumType(on,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var In;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF"})(In||(In={}));N.util.setEnumType(In,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var ns;(function(t){t[t.POOR=0]="POOR",t[t.GOOD=1]="GOOD",t[t.EXCELLENT=2]="EXCELLENT",t[t.LOST=3]="LOST"})(ns||(ns={}));N.util.setEnumType(ns,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var Ki;(function(t){t[t.UNSET=0]="UNSET",t[t.DISABLED=1]="DISABLED",t[t.ENABLED=2]="ENABLED"})(Ki||(Ki={}));N.util.setEnumType(Ki,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var Ts;(function(t){t[t.UNKNOWN_REASON=0]="UNKNOWN_REASON",t[t.CLIENT_INITIATED=1]="CLIENT_INITIATED",t[t.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",t[t.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",t[t.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",t[t.ROOM_DELETED=5]="ROOM_DELETED",t[t.STATE_MISMATCH=6]="STATE_MISMATCH",t[t.JOIN_FAILURE=7]="JOIN_FAILURE"})(Ts||(Ts={}));N.util.setEnumType(Ts,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"}]);var Jo;(function(t){t[t.RR_UNKNOWN=0]="RR_UNKNOWN",t[t.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",t[t.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",t[t.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",t[t.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(Jo||(Jo={}));N.util.setEnumType(Jo,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var nf;(function(t){t[t.SE_UNKNOWN=0]="SE_UNKNOWN",t[t.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",t[t.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(nf||(nf={}));N.util.setEnumType(nf,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let hu=class id extends Se{constructor(e){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=We.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,N.util.initPartial(e,this)}static fromBinary(e,n){return new id().fromBinary(e,n)}static fromJson(e,n){return new id().fromJson(e,n)}static fromJsonString(e,n){return new id().fromJsonString(e,n)}static equals(e,n){return N.util.equals(id,e,n)}};hu.runtime=N;hu.typeName="livekit.Room";hu.fields=N.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Mi,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8}]);class Mi extends Se{constructor(e){super(),this.mime="",this.fmtpLine="",N.util.initPartial(e,this)}static fromBinary(e,n){return new Mi().fromBinary(e,n)}static fromJson(e,n){return new Mi().fromJson(e,n)}static fromJsonString(e,n){return new Mi().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Mi,e,n)}}Mi.runtime=N;Mi.typeName="livekit.Codec";Mi.fields=N.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class ha extends Se{constructor(e){super(),this.enabled=!1,this.min=0,this.max=0,N.util.initPartial(e,this)}static fromBinary(e,n){return new ha().fromBinary(e,n)}static fromJson(e,n){return new ha().fromJson(e,n)}static fromJsonString(e,n){return new ha().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ha,e,n)}}ha.runtime=N;ha.typeName="livekit.PlayoutDelay";ha.fields=N.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class rs extends Se{constructor(e){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,N.util.initPartial(e,this)}static fromBinary(e,n){return new rs().fromBinary(e,n)}static fromJson(e,n){return new rs().fromJson(e,n)}static fromJsonString(e,n){return new rs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(rs,e,n)}}rs.runtime=N;rs.typeName="livekit.ParticipantPermission";rs.fields=N.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:N.getEnumType(on),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class Xr extends Se{constructor(e){super(),this.sid="",this.identity="",this.state=Ec.JOINING,this.tracks=[],this.metadata="",this.joinedAt=We.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,N.util.initPartial(e,this)}static fromBinary(e,n){return new Xr().fromBinary(e,n)}static fromJson(e,n){return new Xr().fromJson(e,n)}static fromJsonString(e,n){return new Xr().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Xr,e,n)}}Xr.runtime=N;Xr.typeName="livekit.ParticipantInfo";Xr.fields=N.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:N.getEnumType(Ec)},{no:4,name:"tracks",kind:"message",T:kr,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:rs},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8}]);var Ec;(function(t){t[t.JOINING=0]="JOINING",t[t.JOINED=1]="JOINED",t[t.ACTIVE=2]="ACTIVE",t[t.DISCONNECTED=3]="DISCONNECTED"})(Ec||(Ec={}));N.util.setEnumType(Ec,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);class pa extends Se{constructor(e){super(),N.util.initPartial(e,this)}static fromBinary(e,n){return new pa().fromBinary(e,n)}static fromJson(e,n){return new pa().fromJson(e,n)}static fromJsonString(e,n){return new pa().fromJsonString(e,n)}static equals(e,n){return N.util.equals(pa,e,n)}}pa.runtime=N;pa.typeName="livekit.Encryption";pa.fields=N.util.newFieldList(()=>[]);var Bn;(function(t){t[t.NONE=0]="NONE",t[t.GCM=1]="GCM",t[t.CUSTOM=2]="CUSTOM"})(Bn||(Bn={}));N.util.setEnumType(Bn,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class is extends Se{constructor(e){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new is().fromBinary(e,n)}static fromJson(e,n){return new is().fromJson(e,n)}static fromJsonString(e,n){return new is().fromJsonString(e,n)}static equals(e,n){return N.util.equals(is,e,n)}}is.runtime=N;is.typeName="livekit.SimulcastCodecInfo";is.fields=N.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:lr,repeated:!0}]);class kr extends Se{constructor(e){super(),this.sid="",this.type=Kn.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=on.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=Bn.NONE,this.stream="",N.util.initPartial(e,this)}static fromBinary(e,n){return new kr().fromBinary(e,n)}static fromJson(e,n){return new kr().fromJson(e,n)}static fromJsonString(e,n){return new kr().fromJsonString(e,n)}static equals(e,n){return N.util.equals(kr,e,n)}}kr.runtime=N;kr.typeName="livekit.TrackInfo";kr.fields=N.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:N.getEnumType(Kn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:N.getEnumType(on)},{no:10,name:"layers",kind:"message",T:lr,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:is,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:N.getEnumType(Bn)},{no:17,name:"stream",kind:"scalar",T:9}]);class lr extends Se{constructor(e){super(),this.quality=In.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,N.util.initPartial(e,this)}static fromBinary(e,n){return new lr().fromBinary(e,n)}static fromJson(e,n){return new lr().fromJson(e,n)}static fromJsonString(e,n){return new lr().fromJsonString(e,n)}static equals(e,n){return N.util.equals(lr,e,n)}}lr.runtime=N;lr.typeName="livekit.VideoLayer";lr.fields=N.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:N.getEnumType(In)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class mo extends Se{constructor(e){super(),this.kind=vn.RELIABLE,this.value={case:void 0},N.util.initPartial(e,this)}static fromBinary(e,n){return new mo().fromBinary(e,n)}static fromJson(e,n){return new mo().fromJson(e,n)}static fromJsonString(e,n){return new mo().fromJsonString(e,n)}static equals(e,n){return N.util.equals(mo,e,n)}}mo.runtime=N;mo.typeName="livekit.DataPacket";mo.fields=N.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:N.getEnumType(vn)},{no:2,name:"user",kind:"message",T:Co,oneof:"value"},{no:3,name:"speaker",kind:"message",T:os,oneof:"value"}]);var vn;(function(t){t[t.RELIABLE=0]="RELIABLE",t[t.LOSSY=1]="LOSSY"})(vn||(vn={}));N.util.setEnumType(vn,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class os extends Se{constructor(e){super(),this.speakers=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new os().fromBinary(e,n)}static fromJson(e,n){return new os().fromJson(e,n)}static fromJsonString(e,n){return new os().fromJsonString(e,n)}static equals(e,n){return N.util.equals(os,e,n)}}os.runtime=N;os.typeName="livekit.ActiveSpeakerUpdate";os.fields=N.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:vo,repeated:!0}]);class vo extends Se{constructor(e){super(),this.sid="",this.level=0,this.active=!1,N.util.initPartial(e,this)}static fromBinary(e,n){return new vo().fromBinary(e,n)}static fromJson(e,n){return new vo().fromJson(e,n)}static fromJsonString(e,n){return new vo().fromJsonString(e,n)}static equals(e,n){return N.util.equals(vo,e,n)}}vo.runtime=N;vo.typeName="livekit.SpeakerInfo";vo.fields=N.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class Co extends Se{constructor(e){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new Co().fromBinary(e,n)}static fromJson(e,n){return new Co().fromJson(e,n)}static fromJsonString(e,n){return new Co().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Co,e,n)}}Co.runtime=N;Co.typeName="livekit.UserPacket";Co.fields=N.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class yo extends Se{constructor(e){super(),this.participantSid="",this.trackSids=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new yo().fromBinary(e,n)}static fromJson(e,n){return new yo().fromJson(e,n)}static fromJsonString(e,n){return new yo().fromJsonString(e,n)}static equals(e,n){return N.util.equals(yo,e,n)}}yo.runtime=N;yo.typeName="livekit.ParticipantTracks";yo.fields=N.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class ss extends Se{constructor(e){super(),this.edition=$l.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",N.util.initPartial(e,this)}static fromBinary(e,n){return new ss().fromBinary(e,n)}static fromJson(e,n){return new ss().fromJson(e,n)}static fromJsonString(e,n){return new ss().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ss,e,n)}}ss.runtime=N;ss.typeName="livekit.ServerInfo";ss.fields=N.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:N.getEnumType($l)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var $l;(function(t){t[t.Standard=0]="Standard",t[t.Cloud=1]="Cloud"})($l||($l={}));N.util.setEnumType($l,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class as extends Se{constructor(e){super(),this.sdk=Xl.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",N.util.initPartial(e,this)}static fromBinary(e,n){return new as().fromBinary(e,n)}static fromJson(e,n){return new as().fromJson(e,n)}static fromJsonString(e,n){return new as().fromJsonString(e,n)}static equals(e,n){return N.util.equals(as,e,n)}}as.runtime=N;as.typeName="livekit.ClientInfo";as.fields=N.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:N.getEnumType(Xl)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var Xl;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JS=1]="JS",t[t.SWIFT=2]="SWIFT",t[t.ANDROID=3]="ANDROID",t[t.FLUTTER=4]="FLUTTER",t[t.GO=5]="GO",t[t.UNITY=6]="UNITY",t[t.REACT_NATIVE=7]="REACT_NATIVE",t[t.RUST=8]="RUST",t[t.PYTHON=9]="PYTHON",t[t.CPP=10]="CPP"})(Xl||(Xl={}));N.util.setEnumType(Xl,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class xo extends Se{constructor(e){super(),this.resumeConnection=Ki.UNSET,this.forceRelay=Ki.UNSET,N.util.initPartial(e,this)}static fromBinary(e,n){return new xo().fromBinary(e,n)}static fromJson(e,n){return new xo().fromJson(e,n)}static fromJsonString(e,n){return new xo().fromJsonString(e,n)}static equals(e,n){return N.util.equals(xo,e,n)}}xo.runtime=N;xo.typeName="livekit.ClientConfiguration";xo.fields=N.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:Io},{no:2,name:"screen",kind:"message",T:Io},{no:3,name:"resume_connection",kind:"enum",T:N.getEnumType(Ki)},{no:4,name:"disabled_codecs",kind:"message",T:cs},{no:5,name:"force_relay",kind:"enum",T:N.getEnumType(Ki)}]);class Io extends Se{constructor(e){super(),this.hardwareEncoder=Ki.UNSET,N.util.initPartial(e,this)}static fromBinary(e,n){return new Io().fromBinary(e,n)}static fromJson(e,n){return new Io().fromJson(e,n)}static fromJsonString(e,n){return new Io().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Io,e,n)}}Io.runtime=N;Io.typeName="livekit.VideoConfiguration";Io.fields=N.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:N.getEnumType(Ki)}]);class cs extends Se{constructor(e){super(),this.codecs=[],this.publish=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new cs().fromBinary(e,n)}static fromJson(e,n){return new cs().fromJson(e,n)}static fromJsonString(e,n){return new cs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(cs,e,n)}}cs.runtime=N;cs.typeName="livekit.DisabledCodecs";cs.fields=N.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:Mi,repeated:!0},{no:2,name:"publish",kind:"message",T:Mi,repeated:!0}]);class bo extends Se{constructor(e){super(),this.duration=0,this.startTimestamp=We.zero,this.endTimestamp=We.zero,this.rtpClockTicks=We.zero,this.driftSamples=We.zero,this.driftMs=0,this.clockRate=0,N.util.initPartial(e,this)}static fromBinary(e,n){return new bo().fromBinary(e,n)}static fromJson(e,n){return new bo().fromJson(e,n)}static fromJsonString(e,n){return new bo().fromJsonString(e,n)}static equals(e,n){return N.util.equals(bo,e,n)}}bo.runtime=N;bo.typeName="livekit.RTPDrift";bo.fields=N.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:Tn},{no:2,name:"end_time",kind:"message",T:Tn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class ga extends Se{constructor(e){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=We.zero,this.headerBytes=We.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=We.zero,this.headerBytesDuplicate=We.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=We.zero,this.headerBytesPadding=We.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,N.util.initPartial(e,this)}static fromBinary(e,n){return new ga().fromBinary(e,n)}static fromJson(e,n){return new ga().fromJson(e,n)}static fromJsonString(e,n){return new ga().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ga,e,n)}}ga.runtime=N;ga.typeName="livekit.RTPStats";ga.fields=N.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:Tn},{no:2,name:"end_time",kind:"message",T:Tn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:Tn},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:Tn},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:Tn},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:Tn},{no:44,name:"packet_drift",kind:"message",T:bo},{no:45,name:"report_drift",kind:"message",T:bo}]);class ma extends Se{constructor(e){super(),this.unixMicro=We.zero,this.ticks=0,N.util.initPartial(e,this)}static fromBinary(e,n){return new ma().fromBinary(e,n)}static fromJson(e,n){return new ma().fromJson(e,n)}static fromJsonString(e,n){return new ma().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ma,e,n)}}ma.runtime=N;ma.typeName="livekit.TimedVersion";ma.fields=N.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const Wu=7e3,FW=[0,300,2*2*300,3*3*300,4*4*300,Wu,Wu,Wu,Wu,Wu];class OW{constructor(e){this._retryDelays=e!==void 0?[...e]:FW}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function Z(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,[])).next())})}function rS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function el(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof rS=="function"?rS(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var Cx={exports:{}},Sl=typeof Reflect=="object"?Reflect:null,iS=Sl&&typeof Sl.apply=="function"?Sl.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},jh;Sl&&typeof Sl.ownKeys=="function"?jh=Sl.ownKeys:Object.getOwnPropertySymbols?jh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:jh=function(e){return Object.getOwnPropertyNames(e)};function MW(t){console&&console.warn&&console.warn(t)}var eD=Number.isNaN||function(e){return e!==e};function wt(){wt.init.call(this)}Cx.exports=wt;Cx.exports.once=GW;wt.EventEmitter=wt;wt.prototype._events=void 0;wt.prototype._eventsCount=0;wt.prototype._maxListeners=void 0;var oS=10;function Vp(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(wt,"defaultMaxListeners",{enumerable:!0,get:function(){return oS},set:function(t){if(typeof t!="number"||t<0||eD(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");oS=t}});wt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};wt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||eD(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function tD(t){return t._maxListeners===void 0?wt.defaultMaxListeners:t._maxListeners}wt.prototype.getMaxListeners=function(){return tD(this)};wt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")iS(c,this,n);else for(var l=c.length,u=sD(c,l),r=0;r<l;++r)iS(u[r],this,n);return!0};function nD(t,e,n,r){var i,o,s;if(Vp(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=tD(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,MW(a)}return t}wt.prototype.addListener=function(e,n){return nD(this,e,n,!1)};wt.prototype.on=wt.prototype.addListener;wt.prototype.prependListener=function(e,n){return nD(this,e,n,!0)};function LW(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function rD(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=LW.bind(r);return i.listener=n,r.wrapFn=i,i}wt.prototype.once=function(e,n){return Vp(n),this.on(e,rD(this,e,n)),this};wt.prototype.prependOnceListener=function(e,n){return Vp(n),this.prependListener(e,rD(this,e,n)),this};wt.prototype.removeListener=function(e,n){var r,i,o,s,a;if(Vp(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():UW(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};wt.prototype.off=wt.prototype.removeListener;wt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function iD(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?VW(i):sD(i,i.length)}wt.prototype.listeners=function(e){return iD(this,e,!0)};wt.prototype.rawListeners=function(e){return iD(this,e,!1)};wt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):oD.call(t,e)};wt.prototype.listenerCount=oD;function oD(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}wt.prototype.eventNames=function(){return this._eventsCount>0?jh(this._events):[]};function sD(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function UW(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function VW(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function GW(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}aD(t,e,o,{once:!0}),e!=="error"&&WW(t,i,{once:!0})})}function WW(t,e,n){typeof t.on=="function"&&aD(t,"error",e,n)}function aD(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var jo=Cx.exports;let cD=!0,lD=!0;function Hh(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Vc(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[s,c])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(a))return o.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function zW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(cD=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function jW(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(lD=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function uD(){if(typeof window=="object"){if(cD)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function yx(t,e){lD&&console.warn(t+" is deprecated, please use "+e+" instead.")}function HW(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Hh(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=Hh(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Hh(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function sS(t){return Object.prototype.toString.call(t)==="[object Object]"}function dD(t){return sS(t)?Object.keys(t).reduce(function(e,n){const r=sS(t[n]),i=r?dD(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function jC(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?jC(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{jC(t,t.get(i),n)})}))}function aS(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&o.push(s)}),o.forEach(s=>{t.forEach(a=>{a.type===r&&a.trackId===s.id&&jC(t,a,i)})}),i}const cS=uD;function fD(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(g=>p.label.toLowerCase().includes(g)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),cS("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return cS("chrome: "+JSON.stringify(a)),c(a)},o=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function ZW(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),t.navigator.mediaDevices.getUserMedia(r)})}}}function hD(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function pD(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Vc(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function gD(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(c=>c.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function mD(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const s=function(c){const l={};return c.result().forEach(d=>{const f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(h=>{f[h]=d.stat(h)}),l[f.id]=f}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){const c=function(l){i(a(s(l)))};return e.apply(this,[c,r])}return new Promise((c,l)=>{e.apply(this,[function(u){c(a(s(u)))},l])}).then(i,o)}}function vD(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>aS(s,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Vc(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>aS(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function CD(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[s.id]=[s].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(s);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function yD(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return CD(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(g=>g===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new t.MediaStream([u]);this._streams[d.id]=g,this._reverseStreams[g.id]=d,this.addStream(g)}return this.getSenders().find(g=>g.track===u)};function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const g=o(this,p);f[0].apply(null,[g])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>o(this,p))}};t.RTCPeerConnection.prototype[l]=d[l]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:o(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(g=>u.track===g)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function HC(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function xD(t,e){Vc(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var lS=Object.freeze({__proto__:null,fixNegotiationNeeded:xD,shimAddTrackRemoveTrack:yD,shimAddTrackRemoveTrackWithNative:CD,shimGetDisplayMedia:ZW,shimGetSendersWithDtmf:gD,shimGetStats:mD,shimGetUserMedia:fD,shimMediaStream:hD,shimOnTrack:pD,shimPeerConnection:HC,shimSenderReceiverGetStats:vD});function ID(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){yx("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function $W(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function bD(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ZC(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(c=>{if(e.version<53&&!s)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(s,a)}}function AD(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function wD(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Vc(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function SD(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){yx("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function kD(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function ED(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function TD(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function RD(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function _D(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var uS=Object.freeze({__proto__:null,shimAddTransceiver:ED,shimCreateAnswer:_D,shimCreateOffer:RD,shimGetDisplayMedia:$W,shimGetParameters:TD,shimGetUserMedia:ID,shimOnTrack:bD,shimPeerConnection:ZC,shimRTCDataChannel:kD,shimReceiverGetStats:wD,shimRemoveStream:SD,shimSenderGetStats:AD});function DD(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function PD(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function ND(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function BD(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(FD(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function FD(t){return t&&t.video!==void 0?Object.assign({},t,{video:dD(t.video)}):t}function OD(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];a.urls===void 0&&a.url?(yx("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function MD(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function LD(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function UD(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var dS=Object.freeze({__proto__:null,shimAudioContext:UD,shimCallbacksAPI:ND,shimConstraints:FD,shimCreateOfferLegacy:LD,shimGetUserMedia:BD,shimLocalStreamsAPI:DD,shimRTCIceServerUrls:OD,shimRemoteStreamsAPI:PD,shimTrackEventTransceiver:MD}),VD={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let a=3;a<o.length;a++){const c=o[a],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const s=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{s.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(f=>e.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),o&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(VD);var GD=VD.exports,kl=KG(GD),XW=$G({__proto__:null,default:kl},[GD]);function Zh(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),o=kl.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Vc(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function $C(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Vc(t,"icecandidate",e=>{if(e.candidate){const n=kl.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function $h(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=kl.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=kl.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},o=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=kl.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=o(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return s.apply(this,arguments)}}function Xh(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Vc(t,"datachannel",r=>(e(r.channel,r.target),r))}function XC(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function KC(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Kh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Jh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var KW=Object.freeze({__proto__:null,removeExtmapAllowMixed:KC,shimAddIceCandidateNullOrEmpty:Kh,shimConnectionState:XC,shimMaxMessageSize:$h,shimParameterlessSetLocalDescription:Jh,shimRTCIceCandidate:Zh,shimRTCIceCandidateRelayProtocol:$C,shimSendThrowTypeError:Xh});function JW(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=uD,r=HW(t),i={browserDetails:r,commonShim:KW,extractVersion:Hh,disableLog:zW,disableWarnings:jW,sdp:XW};switch(r.browser){case"chrome":if(!lS||!HC||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=lS,Kh(t,r),Jh(t),fD(t,r),hD(t),HC(t,r),pD(t),yD(t,r),gD(t),mD(t),vD(t),xD(t,r),Zh(t),$C(t),XC(t),$h(t,r),Xh(t),KC(t,r);break;case"firefox":if(!uS||!ZC||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=uS,Kh(t,r),Jh(t),ID(t,r),ZC(t,r),bD(t),SD(t),AD(t),wD(t),kD(t),ED(t),TD(t),RD(t),_D(t),Zh(t),XC(t),$h(t,r),Xh(t);break;case"safari":if(!dS||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=dS,Kh(t,r),Jh(t),OD(t),LD(t),ND(t),DD(t),PD(t),MD(t),BD(t),UD(t),Zh(t),$C(t),$h(t,r),Xh(t),KC(t,r);break;default:n("Unsupported browser!");break}return i}JW({window:typeof window>"u"?void 0:window});const YW=10,ch="lk_e2ee",qW="LKFrameEncryptionKey",QW={sharedKey:!1,ratchetSalt:qW,ratchetWindowSize:8,failureTolerance:YW};var Ea;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Ea||(Ea={}));var fS;(function(t){t.KeyRatcheted="keyRatcheted"})(fS||(fS={}));var va;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(va||(va={}));var hS;(function(t){t.Error="cryptorError"})(hS||(hS={}));function ez(){return tz()||JC()}function JC(){return typeof window.RTCRtpScriptTransform<"u"}function tz(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class mJ extends jo.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{et.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},QW),e),this.on(Ea.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Ea.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Ea.RatchetRequest,e,n)}}class pu extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}class Rt extends pu{constructor(e,n,r){super(1,e),this.status=r,this.reason=n}}class xx extends pu{constructor(e){super(21,e??"device is unsupported")}}class fo extends pu{constructor(e){super(20,e??"track is invalid")}}class nz extends pu{constructor(e){super(10,e??"unsupported server")}}class mn extends pu{constructor(e){super(12,e??"unexpected connection state")}}class YC extends pu{constructor(e){super(13,e??"unable to negotiate")}}var rf;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(rf||(rf={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(rf||(rf={}));var ce;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.StateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged"})(ce||(ce={}));var ue;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded"})(ue||(ue={}));var Te;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished"})(Te||(Te={}));var Ie;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed"})(Ie||(Ie={}));function Ix(t,e,n){var r,i,o;e===void 0&&(e=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var h=Date.now()-l;if(h+e>=c)return c-h}return e}var f=function(){var h=[].slice.call(arguments),p=this;return new Promise(function(g,C){var v=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,l=Date.now(),!s){var y=t.apply(p,h);a&&a(y),u.forEach(function(I){return(0,I.resolve)(y)}),u=[]}},d()),v){var m=t.apply(p,h);return a&&a(m),g(m)}u.push({resolve:g,reject:C})})};return f.cancel=function(h){o!==void 0&&clearTimeout(o),u.forEach(function(p){return(0,p.reject)(h)}),u=[]},f}const rz=/version\/(\d+(\.?_?\d+)+)/i;let Nm;function Ms(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Nm===void 0||e){const r=iz.find(i=>{let{test:o}=i;return o.test(n)});Nm=r==null?void 0:r.describe(n)}return Nm}const iz=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:Bm(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:Bm(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:Bm(rz,t),os:t.includes("mobile/")?"iOS":"macOS"}}}];function Bm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}var oz="1.15.13";const sz=oz,az=11;class On{}On.setTimeout=function(){return setTimeout(...arguments)};On.setInterval=function(){return setInterval(...arguments)};On.clearTimeout=function(){return clearTimeout(...arguments)};On.clearInterval=function(){return clearInterval(...arguments)};class bt{constructor(e,n,r,i,o){this.width=e,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const cz=["vp8","h264"],WD=["vp8","h264","vp9","av1"];function lz(t){return!!cz.find(e=>e===t)}var Y0;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:2e4},t.music={maxBitrate:32e3},t.musicStereo={maxBitrate:48e3},t.musicHighQuality={maxBitrate:64e3},t.musicHighQualityStereo={maxBitrate:96e3}})(Y0||(Y0={}));const of={h90:new bt(160,90,9e4,20),h180:new bt(320,180,16e4,20),h216:new bt(384,216,18e4,20),h360:new bt(640,360,45e4,20),h540:new bt(960,540,8e5,25),h720:new bt(1280,720,17e5,30),h1080:new bt(1920,1080,3e6,30),h1440:new bt(2560,1440,5e6,30),h2160:new bt(3840,2160,8e6,30)},qC={h120:new bt(160,120,7e4,20),h180:new bt(240,180,125e3,20),h240:new bt(320,240,14e4,20),h360:new bt(480,360,33e4,20),h480:new bt(640,480,5e5,20),h540:new bt(720,540,6e5,25),h720:new bt(960,720,13e5,30),h1080:new bt(1440,1080,23e5,30),h1440:new bt(1920,1440,38e5,30)},bx={h360fps3:new bt(640,360,2e5,3,"medium"),h360fps15:new bt(640,360,4e5,15,"medium"),h720fps5:new bt(1280,720,8e5,5,"medium"),h720fps15:new bt(1280,720,15e5,15,"medium"),h720fps30:new bt(1280,720,2e6,30,"medium"),h1080fps15:new bt(1920,1080,25e5,15,"medium"),h1080fps30:new bt(1920,1080,5e6,30,"medium"),original:new bt(0,0,7e6,30,"medium")};var Jn;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(Jn||(Jn={}));N.util.setEnumType(Jn,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var Tc;(function(t){t[t.ACTIVE=0]="ACTIVE",t[t.PAUSED=1]="PAUSED"})(Tc||(Tc={}));N.util.setEnumType(Tc,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var q0;(function(t){t[t.UDP=0]="UDP",t[t.TCP=1]="TCP",t[t.TLS=2]="TLS"})(q0||(q0={}));N.util.setEnumType(q0,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class ls extends Se{constructor(e){super(),this.message={case:void 0},N.util.initPartial(e,this)}static fromBinary(e,n){return new ls().fromBinary(e,n)}static fromJson(e,n){return new ls().fromJson(e,n)}static fromJsonString(e,n){return new ls().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ls,e,n)}}ls.runtime=N;ls.typeName="livekit.SignalRequest";ls.fields=N.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:ur,oneof:"message"},{no:2,name:"answer",kind:"message",T:ur,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Vi,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Ui,oneof:"message"},{no:5,name:"mute",kind:"message",T:Gi,oneof:"message"},{no:6,name:"subscription",kind:"message",T:di,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:wo,oneof:"message"},{no:8,name:"leave",kind:"message",T:fi,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:So,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Ro,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:_o,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Nn,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:ko,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Po,oneof:"message"}]);class Ao extends Se{constructor(e){super(),this.message={case:void 0},N.util.initPartial(e,this)}static fromBinary(e,n){return new Ao().fromBinary(e,n)}static fromJson(e,n){return new Ao().fromJson(e,n)}static fromJsonString(e,n){return new Ao().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Ao,e,n)}}Ao.runtime=N;Ao.typeName="livekit.SignalResponse";Ao.fields=N.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:us,oneof:"message"},{no:2,name:"answer",kind:"message",T:ur,oneof:"message"},{no:3,name:"offer",kind:"message",T:ur,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Vi,oneof:"message"},{no:5,name:"update",kind:"message",T:hs,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Wi,oneof:"message"},{no:8,name:"leave",kind:"message",T:fi,oneof:"message"},{no:9,name:"mute",kind:"message",T:Gi,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:ps,oneof:"message"},{no:11,name:"room_update",kind:"message",T:gs,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:vs,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:ys,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Is,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:bs,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:fs,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ds,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:As,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Ss,oneof:"message"}]);class Li extends Se{constructor(e){super(),this.codec="",this.cid="",N.util.initPartial(e,this)}static fromBinary(e,n){return new Li().fromBinary(e,n)}static fromJson(e,n){return new Li().fromJson(e,n)}static fromJsonString(e,n){return new Li().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Li,e,n)}}Li.runtime=N;Li.typeName="livekit.SimulcastCodec";Li.fields=N.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class Ui extends Se{constructor(e){super(),this.cid="",this.name="",this.type=Kn.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=on.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=Bn.NONE,this.stream="",N.util.initPartial(e,this)}static fromBinary(e,n){return new Ui().fromBinary(e,n)}static fromJson(e,n){return new Ui().fromJson(e,n)}static fromJsonString(e,n){return new Ui().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Ui,e,n)}}Ui.runtime=N;Ui.typeName="livekit.AddTrackRequest";Ui.fields=N.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:N.getEnumType(Kn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:N.getEnumType(on)},{no:9,name:"layers",kind:"message",T:lr,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Li,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:N.getEnumType(Bn)},{no:15,name:"stream",kind:"scalar",T:9}]);class Vi extends Se{constructor(e){super(),this.candidateInit="",this.target=Jn.PUBLISHER,N.util.initPartial(e,this)}static fromBinary(e,n){return new Vi().fromBinary(e,n)}static fromJson(e,n){return new Vi().fromJson(e,n)}static fromJsonString(e,n){return new Vi().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Vi,e,n)}}Vi.runtime=N;Vi.typeName="livekit.TrickleRequest";Vi.fields=N.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:N.getEnumType(Jn)}]);class Gi extends Se{constructor(e){super(),this.sid="",this.muted=!1,N.util.initPartial(e,this)}static fromBinary(e,n){return new Gi().fromBinary(e,n)}static fromJson(e,n){return new Gi().fromJson(e,n)}static fromJsonString(e,n){return new Gi().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Gi,e,n)}}Gi.runtime=N;Gi.typeName="livekit.MuteTrackRequest";Gi.fields=N.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class us extends Se{constructor(e){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),N.util.initPartial(e,this)}static fromBinary(e,n){return new us().fromBinary(e,n)}static fromJson(e,n){return new us().fromJson(e,n)}static fromJsonString(e,n){return new us().fromJsonString(e,n)}static equals(e,n){return N.util.equals(us,e,n)}}us.runtime=N;us.typeName="livekit.JoinResponse";us.fields=N.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:hu},{no:2,name:"participant",kind:"message",T:Xr},{no:3,name:"other_participants",kind:"message",T:Xr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Eo,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:xo},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:ss},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class ds extends Se{constructor(e){super(),this.iceServers=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new ds().fromBinary(e,n)}static fromJson(e,n){return new ds().fromJson(e,n)}static fromJsonString(e,n){return new ds().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ds,e,n)}}ds.runtime=N;ds.typeName="livekit.ReconnectResponse";ds.fields=N.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:Eo,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:xo}]);class Wi extends Se{constructor(e){super(),this.cid="",N.util.initPartial(e,this)}static fromBinary(e,n){return new Wi().fromBinary(e,n)}static fromJson(e,n){return new Wi().fromJson(e,n)}static fromJsonString(e,n){return new Wi().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Wi,e,n)}}Wi.runtime=N;Wi.typeName="livekit.TrackPublishedResponse";Wi.fields=N.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:kr}]);class fs extends Se{constructor(e){super(),this.trackSid="",N.util.initPartial(e,this)}static fromBinary(e,n){return new fs().fromBinary(e,n)}static fromJson(e,n){return new fs().fromJson(e,n)}static fromJsonString(e,n){return new fs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(fs,e,n)}}fs.runtime=N;fs.typeName="livekit.TrackUnpublishedResponse";fs.fields=N.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class ur extends Se{constructor(e){super(),this.type="",this.sdp="",N.util.initPartial(e,this)}static fromBinary(e,n){return new ur().fromBinary(e,n)}static fromJson(e,n){return new ur().fromJson(e,n)}static fromJsonString(e,n){return new ur().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ur,e,n)}}ur.runtime=N;ur.typeName="livekit.SessionDescription";ur.fields=N.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class hs extends Se{constructor(e){super(),this.participants=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new hs().fromBinary(e,n)}static fromJson(e,n){return new hs().fromJson(e,n)}static fromJsonString(e,n){return new hs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(hs,e,n)}}hs.runtime=N;hs.typeName="livekit.ParticipantUpdate";hs.fields=N.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:Xr,repeated:!0}]);class di extends Se{constructor(e){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new di().fromBinary(e,n)}static fromJson(e,n){return new di().fromJson(e,n)}static fromJsonString(e,n){return new di().fromJsonString(e,n)}static equals(e,n){return N.util.equals(di,e,n)}}di.runtime=N;di.typeName="livekit.UpdateSubscription";di.fields=N.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:yo,repeated:!0}]);class wo extends Se{constructor(e){super(),this.trackSids=[],this.disabled=!1,this.quality=In.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,N.util.initPartial(e,this)}static fromBinary(e,n){return new wo().fromBinary(e,n)}static fromJson(e,n){return new wo().fromJson(e,n)}static fromJsonString(e,n){return new wo().fromJsonString(e,n)}static equals(e,n){return N.util.equals(wo,e,n)}}wo.runtime=N;wo.typeName="livekit.UpdateTrackSettings";wo.fields=N.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:N.getEnumType(In)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class fi extends Se{constructor(e){super(),this.canReconnect=!1,this.reason=Ts.UNKNOWN_REASON,N.util.initPartial(e,this)}static fromBinary(e,n){return new fi().fromBinary(e,n)}static fromJson(e,n){return new fi().fromJson(e,n)}static fromJsonString(e,n){return new fi().fromJsonString(e,n)}static equals(e,n){return N.util.equals(fi,e,n)}}fi.runtime=N;fi.typeName="livekit.LeaveRequest";fi.fields=N.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:N.getEnumType(Ts)}]);class So extends Se{constructor(e){super(),this.trackSid="",this.layers=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new So().fromBinary(e,n)}static fromJson(e,n){return new So().fromJson(e,n)}static fromJsonString(e,n){return new So().fromJsonString(e,n)}static equals(e,n){return N.util.equals(So,e,n)}}So.runtime=N;So.typeName="livekit.UpdateVideoLayers";So.fields=N.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:lr,repeated:!0}]);class ko extends Se{constructor(e){super(),this.metadata="",this.name="",N.util.initPartial(e,this)}static fromBinary(e,n){return new ko().fromBinary(e,n)}static fromJson(e,n){return new ko().fromJson(e,n)}static fromJsonString(e,n){return new ko().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ko,e,n)}}ko.runtime=N;ko.typeName="livekit.UpdateParticipantMetadata";ko.fields=N.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class Eo extends Se{constructor(e){super(),this.urls=[],this.username="",this.credential="",N.util.initPartial(e,this)}static fromBinary(e,n){return new Eo().fromBinary(e,n)}static fromJson(e,n){return new Eo().fromJson(e,n)}static fromJsonString(e,n){return new Eo().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Eo,e,n)}}Eo.runtime=N;Eo.typeName="livekit.ICEServer";Eo.fields=N.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class ps extends Se{constructor(e){super(),this.speakers=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new ps().fromBinary(e,n)}static fromJson(e,n){return new ps().fromJson(e,n)}static fromJsonString(e,n){return new ps().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ps,e,n)}}ps.runtime=N;ps.typeName="livekit.SpeakersChanged";ps.fields=N.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:vo,repeated:!0}]);class gs extends Se{constructor(e){super(),N.util.initPartial(e,this)}static fromBinary(e,n){return new gs().fromBinary(e,n)}static fromJson(e,n){return new gs().fromJson(e,n)}static fromJsonString(e,n){return new gs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(gs,e,n)}}gs.runtime=N;gs.typeName="livekit.RoomUpdate";gs.fields=N.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:hu}]);class ms extends Se{constructor(e){super(),this.participantSid="",this.quality=ns.POOR,this.score=0,N.util.initPartial(e,this)}static fromBinary(e,n){return new ms().fromBinary(e,n)}static fromJson(e,n){return new ms().fromJson(e,n)}static fromJsonString(e,n){return new ms().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ms,e,n)}}ms.runtime=N;ms.typeName="livekit.ConnectionQualityInfo";ms.fields=N.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:N.getEnumType(ns)},{no:3,name:"score",kind:"scalar",T:2}]);class vs extends Se{constructor(e){super(),this.updates=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new vs().fromBinary(e,n)}static fromJson(e,n){return new vs().fromJson(e,n)}static fromJsonString(e,n){return new vs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(vs,e,n)}}vs.runtime=N;vs.typeName="livekit.ConnectionQualityUpdate";vs.fields=N.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:ms,repeated:!0}]);class Cs extends Se{constructor(e){super(),this.participantSid="",this.trackSid="",this.state=Tc.ACTIVE,N.util.initPartial(e,this)}static fromBinary(e,n){return new Cs().fromBinary(e,n)}static fromJson(e,n){return new Cs().fromJson(e,n)}static fromJsonString(e,n){return new Cs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Cs,e,n)}}Cs.runtime=N;Cs.typeName="livekit.StreamStateInfo";Cs.fields=N.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:N.getEnumType(Tc)}]);class ys extends Se{constructor(e){super(),this.streamStates=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new ys().fromBinary(e,n)}static fromJson(e,n){return new ys().fromJson(e,n)}static fromJsonString(e,n){return new ys().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ys,e,n)}}ys.runtime=N;ys.typeName="livekit.StreamStateUpdate";ys.fields=N.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:Cs,repeated:!0}]);class zi extends Se{constructor(e){super(),this.quality=In.LOW,this.enabled=!1,N.util.initPartial(e,this)}static fromBinary(e,n){return new zi().fromBinary(e,n)}static fromJson(e,n){return new zi().fromJson(e,n)}static fromJsonString(e,n){return new zi().fromJsonString(e,n)}static equals(e,n){return N.util.equals(zi,e,n)}}zi.runtime=N;zi.typeName="livekit.SubscribedQuality";zi.fields=N.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:N.getEnumType(In)},{no:2,name:"enabled",kind:"scalar",T:8}]);class xs extends Se{constructor(e){super(),this.codec="",this.qualities=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new xs().fromBinary(e,n)}static fromJson(e,n){return new xs().fromJson(e,n)}static fromJsonString(e,n){return new xs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(xs,e,n)}}xs.runtime=N;xs.typeName="livekit.SubscribedCodec";xs.fields=N.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:zi,repeated:!0}]);class Is extends Se{constructor(e){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new Is().fromBinary(e,n)}static fromJson(e,n){return new Is().fromJson(e,n)}static fromJsonString(e,n){return new Is().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Is,e,n)}}Is.runtime=N;Is.typeName="livekit.SubscribedQualityUpdate";Is.fields=N.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:zi,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:xs,repeated:!0}]);class To extends Se{constructor(e){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",N.util.initPartial(e,this)}static fromBinary(e,n){return new To().fromBinary(e,n)}static fromJson(e,n){return new To().fromJson(e,n)}static fromJsonString(e,n){return new To().fromJsonString(e,n)}static equals(e,n){return N.util.equals(To,e,n)}}To.runtime=N;To.typeName="livekit.TrackPermission";To.fields=N.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class Ro extends Se{constructor(e){super(),this.allParticipants=!1,this.trackPermissions=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new Ro().fromBinary(e,n)}static fromJson(e,n){return new Ro().fromJson(e,n)}static fromJsonString(e,n){return new Ro().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Ro,e,n)}}Ro.runtime=N;Ro.typeName="livekit.SubscriptionPermission";Ro.fields=N.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:To,repeated:!0}]);class bs extends Se{constructor(e){super(),this.participantSid="",this.trackSid="",this.allowed=!1,N.util.initPartial(e,this)}static fromBinary(e,n){return new bs().fromBinary(e,n)}static fromJson(e,n){return new bs().fromJson(e,n)}static fromJsonString(e,n){return new bs().fromJsonString(e,n)}static equals(e,n){return N.util.equals(bs,e,n)}}bs.runtime=N;bs.typeName="livekit.SubscriptionPermissionUpdate";bs.fields=N.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class _o extends Se{constructor(e){super(),this.publishTracks=[],this.dataChannels=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new _o().fromBinary(e,n)}static fromJson(e,n){return new _o().fromJson(e,n)}static fromJsonString(e,n){return new _o().fromJsonString(e,n)}static equals(e,n){return N.util.equals(_o,e,n)}}_o.runtime=N;_o.typeName="livekit.SyncState";_o.fields=N.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:ur},{no:2,name:"subscription",kind:"message",T:di},{no:3,name:"publish_tracks",kind:"message",T:Wi,repeated:!0},{no:4,name:"data_channels",kind:"message",T:Do,repeated:!0},{no:5,name:"offer",kind:"message",T:ur}]);class Do extends Se{constructor(e){super(),this.label="",this.id=0,this.target=Jn.PUBLISHER,N.util.initPartial(e,this)}static fromBinary(e,n){return new Do().fromBinary(e,n)}static fromJson(e,n){return new Do().fromJson(e,n)}static fromJsonString(e,n){return new Do().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Do,e,n)}}Do.runtime=N;Do.typeName="livekit.DataChannelInfo";Do.fields=N.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:N.getEnumType(Jn)}]);class Nn extends Se{constructor(e){super(),this.scenario={case:void 0},N.util.initPartial(e,this)}static fromBinary(e,n){return new Nn().fromBinary(e,n)}static fromJson(e,n){return new Nn().fromJson(e,n)}static fromJsonString(e,n){return new Nn().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Nn,e,n)}}Nn.runtime=N;Nn.typeName="livekit.SimulateScenario";Nn.fields=N.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:N.getEnumType(q0),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]);class Po extends Se{constructor(e){super(),this.timestamp=We.zero,this.rtt=We.zero,N.util.initPartial(e,this)}static fromBinary(e,n){return new Po().fromBinary(e,n)}static fromJson(e,n){return new Po().fromJson(e,n)}static fromJsonString(e,n){return new Po().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Po,e,n)}}Po.runtime=N;Po.typeName="livekit.Ping";Po.fields=N.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class As extends Se{constructor(e){super(),this.lastPingTimestamp=We.zero,this.timestamp=We.zero,N.util.initPartial(e,this)}static fromBinary(e,n){return new As().fromBinary(e,n)}static fromJson(e,n){return new As().fromJson(e,n)}static fromJsonString(e,n){return new As().fromJsonString(e,n)}static equals(e,n){return N.util.equals(As,e,n)}}As.runtime=N;As.typeName="livekit.Pong";As.fields=N.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class Ca extends Se{constructor(e){super(),this.regions=[],N.util.initPartial(e,this)}static fromBinary(e,n){return new Ca().fromBinary(e,n)}static fromJson(e,n){return new Ca().fromJson(e,n)}static fromJsonString(e,n){return new Ca().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Ca,e,n)}}Ca.runtime=N;Ca.typeName="livekit.RegionSettings";Ca.fields=N.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:ws,repeated:!0}]);class ws extends Se{constructor(e){super(),this.region="",this.url="",this.distance=We.zero,N.util.initPartial(e,this)}static fromBinary(e,n){return new ws().fromBinary(e,n)}static fromJson(e,n){return new ws().fromJson(e,n)}static fromJsonString(e,n){return new ws().fromJsonString(e,n)}static equals(e,n){return N.util.equals(ws,e,n)}}ws.runtime=N;ws.typeName="livekit.RegionInfo";ws.fields=N.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class Ss extends Se{constructor(e){super(),this.trackSid="",this.err=nf.SE_UNKNOWN,N.util.initPartial(e,this)}static fromBinary(e,n){return new Ss().fromBinary(e,n)}static fromJson(e,n){return new Ss().fromJson(e,n)}static fromJsonString(e,n){return new Ss().fromJsonString(e,n)}static equals(e,n){return N.util.equals(Ss,e,n)}}Ss.runtime=N;Ss.typeName="livekit.SubscriptionResponse";Ss.fields=N.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:N.getEnumType(nf)}]);function uz(t){if(!(typeof t>"u"))return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const dz=5e3,zu=[];class ie extends jo.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=ie.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=et,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),dz):this.handleAppVisibilityChanged()},this.log=Os((i=r.loggerName)!==null&&i!==void 0?i:Lo.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=ie.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Mt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===ie.Kind.Video&&(n="video"),this.attachedElements.length===0&&ie.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(zu.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&zu.splice(zu.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),pl(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(i?Ie.AudioPlaybackStarted:Ie.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?Ie.AudioPlaybackFailed:Ie.VideoPlaybackFailed,o):o.name==="AbortError"?et.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):et.warn("could not playback ".concat(i?"audio":"video"),o),i&&e&&r.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(Ie.ElementAttached,e),e}detach(e){try{if(e){El(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(Ie.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{El(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(Ie.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(e){e.loggerName&&(this.log=Os(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),zu.forEach(r=>{r.parentElement||(n=!1)}),n&&zu.push(e)}}handleAppVisibilityChanged(){return Z(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){_r()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){_r()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function pl(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!Rc()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(Rc()||Kl())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function El(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return Kn.AUDIO;case e.Video:return Kn.VIDEO;default:return Kn.DATA}}t.kindToProto=i;function o(l){switch(l){case Kn.AUDIO:return e.Audio;case Kn.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function s(l){switch(l){case n.Camera:return on.CAMERA;case n.Microphone:return on.MICROPHONE;case n.ScreenShare:return on.SCREEN_SHARE;case n.ScreenShareAudio:return on.SCREEN_SHARE_AUDIO;default:return on.UNKNOWN}}t.sourceToProto=s;function a(l){switch(l){case on.CAMERA:return n.Camera;case on.MICROPHONE:return n.Microphone;case on.SCREEN_SHARE:return n.ScreenShare;case on.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function c(l){switch(l){case Tc.ACTIVE:return r.Active;case Tc.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(ie||(ie={}));function zD(t,e,n){var r;const i=(r=uz(t))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&QC(i.audio,e),i.video&&QC(i.video,n),i}function QC(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Gp(t){const e={};if(t.video)if(typeof t.video=="object"){const n={},r=n,i=t.video;Object.keys(i).forEach(o=>{switch(o){case"resolution":QC(r,i.resolution);break;default:r[o]=i[o]}}),e.video=n}else e.video=t.video;else e.video=!1;return t.audio?typeof t.audio=="object"?e.audio=t.audio:e.audio=!0:e.audio=!1,e}function fz(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return Z(this,void 0,void 0,function*(){const n=Ax();if(n){const r=n.createAnalyser();r.fftSize=2048;const i=r.frequencyBinCount,o=new Uint8Array(i);n.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield Rs(e),r.getByteTimeDomainData(o);const a=o.some(c=>c!==128&&c!==0);return n.close(),!a}return!1})}function Ax(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}function hz(t){return t===ie.Source.Microphone?"audioinput":t===ie.Source.Camera?"videoinput":void 0}function pz(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,Rc()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio}}function jD(t){const e=t.split("/")[1].toLowerCase();if(!WD.includes(e))throw Error("Video codec not supported: ".concat(e));return e}function gz(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new Wi({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Mt(t){return t instanceof ie?{trackSid:t.sid,trackSource:t.source,trackMuted:t.isMuted,trackEnabled:t.mediaStreamTrack.enabled,trackKind:t.kind}:{trackSid:t.trackSid,trackName:t.trackName,track:t.track?Mt(t.track):void 0,trackEnabled:t.isEnabled,trackEncrypted:t.isEncrypted,trackMimeType:t.mimeType}}const mz="|",pS="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function vz(t){const e=t.split(mz);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Rs(t){return Z(this,void 0,void 0,function*(){return new Promise(e=>On.setTimeout(e,t))})}function gS(){return"addTransceiver"in RTCPeerConnection.prototype}function mS(){return"addTrack"in RTCPeerConnection.prototype}function Cz(){if(!("getCapabilities"in RTCRtpSender)||Rc())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function yz(){if(!("getCapabilities"in RTCRtpSender)||Kl())return!1;if(Rc()){const n=Ms();if(n!=null&&n.version&&wx(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function bd(t){return t==="av1"||t==="vp9"}function ey(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}const xz={Chrome:"100",Safari:"15",Firefox:"100"};function Iz(t){if(!_r()||!("setCodecPreferences"in t))return!1;const e=Ms();if(!(e!=null&&e.name)||!e.version)return!1;const n=xz[e.name];return n?wx(e.version,n)>=0:!1}function Kl(){var t;return((t=Ms())===null||t===void 0?void 0:t.name)==="Firefox"}function bz(){var t;return((t=Ms())===null||t===void 0?void 0:t.name)==="Chrome"}function Rc(){var t;return((t=Ms())===null||t===void 0?void 0:t.name)==="Safari"}function Az(){const t=Ms();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function HD(){return _r()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function _r(){return typeof document<"u"}function _c(){return navigator.product=="ReactNative"}function ty(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function ZD(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function $D(){if(!_c())return;let t=ZD();if(t)return t.platform}function vS(){if(_r())return window.devicePixelRatio;if(_c()){let t=ZD();if(t)return t.devicePixelRatio}return 1}function wx(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const s=parseInt(n[o],10),a=parseInt(r[o],10);if(s>a)return 1;if(s<a)return-1;if(o===i-1&&s===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function wz(t){for(const e of t)e.target.handleResize(e)}function Sz(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Fm=null;const CS=()=>(Fm||(Fm=new ResizeObserver(wz)),Fm);let Om=null;const yS=()=>(Om||(Om=new IntersectionObserver(Sz,{root:null,rootMargin:"0px"})),Om);function kz(){var t;const e=new as({sdk:Xl.JS,protocol:az,version:sz});return _c()&&(e.os=(t=$D())!==null&&t!==void 0?t:""),e}function xS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const o=i.getContext("2d");o==null||o.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=i.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let ju;function Mm(){if(!ju){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[ju]=r.stream.getAudioTracks(),!ju)throw Error("Could not get empty media stream audio track");ju.enabled=!1}return ju.clone()}class XD{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>Z(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function Ez(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),r=Ax();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,o=r.createMediaStreamSource(new MediaStream([i])),s=r.createAnalyser();s.minDecibels=n.minDecibels,s.maxDecibels=n.maxDecibels,s.fftSize=n.fftSize,s.smoothingTimeConstant=n.smoothingTimeConstant,o.connect(s);const a=new Uint8Array(s.frequencyBinCount);return{calculateVolume:()=>{s.getByteFrequencyData(a);let u=0;for(const f of a)u+=Math.pow(f/255,2);return Math.sqrt(u/a.length)},analyser:s,cleanup:()=>Z(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class Zi{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function Tz(t){return WD.includes(t)}function gc(t){if(typeof t=="string")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function Rz(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function IS(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}const bS="default";class or{static getInstance(){return this.instance===void 0&&(this.instance=new or),this.instance}getDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r;return Z(this,void 0,void 0,function*(){if(((r=or.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){et.debug("awaiting getUserMedia promise");try{e?yield or.userMediaPromiseMap.get(e):yield Promise.all(or.userMediaPromiseMap.values())}catch{et.warn("error waiting for media permissons")}}let i=yield navigator.mediaDevices.enumerateDevices();if(n&&!(Rc()&&this.hasDeviceInUse(e))&&(i.length===0||i.some(s=>{const a=s.label==="",c=e?s.kind===e:!0;return a&&c}))){const s={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},a=yield navigator.mediaDevices.getUserMedia(s);i=yield navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(c=>{c.stop()})}return e&&(i=i.filter(o=>o.kind===e)),i})}normalizeDeviceId(e,n,r){return Z(this,void 0,void 0,function*(){if(n!==bS)return n;const o=(yield this.getDevices(e)).find(s=>s.groupId===r&&s.deviceId!==bS);return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?or.userMediaPromiseMap.has(e):or.userMediaPromiseMap.size>0}}or.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];or.userMediaPromiseMap=new Map;const _z=1e3;class Jl extends ie{get constraints(){return this._constraints}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=Ix(()=>Z(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>Z(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(Ie.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Zi,this.pauseUpstreamLock=new Zi,this.processorLock=new Zi,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==ie.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(e,n){return Z(this,void 0,void 0,function*(){if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{El(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e&&this.processorElement){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");pl(e,this.processorElement),this.processorElement.muted=!0,yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{pl(r??e,i)}))})}waitForDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:_z;var n;return Z(this,void 0,void 0,function*(){if(this.kind===ie.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=Ms())===null||n===void 0?void 0:n.os)==="iOS"&&(yield Rs(10));const r=Date.now();for(;Date.now()-r<e;){const i=this.dimensions;if(i)return i;yield Rs(50)}throw new fo("unable to get track dimensions after timeout")})}getDeviceId(){return Z(this,void 0,void 0,function*(){if(this.source===ie.Source.ScreenShare)return;const{deviceId:e,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===ie.Kind.Audio?"audioinput":"videoinput";return or.getInstance().normalizeDeviceId(r,e,n)})}mute(){return Z(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return Z(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Z(this,void 0,void 0,function*(){if(!this.sender)throw new fo("unable to replace an unpublished track");return this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),this.providedByUser=n,this.processor&&(yield this.stopProcessor()),this})}restart(e){return Z(this,void 0,void 0,function*(){e||(e=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const n={audio:!1,video:!1};this.kind===ie.Kind.Video?n.video=e:n.audio=e,this.attachedElements.forEach(o=>{El(this.mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const i=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return i.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(i),this._constraints=e,this.emit(Ie.Restarted,this),this})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ie.Muted:Ie.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Z(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),HD()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return Z(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(Ie.UpstreamPaused,this);const n=Ms();if((n==null?void 0:n.name)==="Safari"&&wx(n.version,"12.0")<0)throw new xx("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{e()}})}resumeUpstream(){return Z(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(Ie.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{e()}})}getRTCStatsReport(){var e;return Z(this,void 0,void 0,function*(){return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r,i;return Z(this,void 0,void 0,function*(){const o=yield this.processorLock.lock();try{if(this.log.debug("setting up processor",this.logContext),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(r=this.processorElement)!==null&&r!==void 0?r:document.createElement(this.kind),pl(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(a=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:a})));const s={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield e.init(s),this.processor=e,this.processor.processedTrack){for(const a of this.attachedElements)a!==this.processorElement&&n&&(El(this._mediaStreamTrack,a),pl(this.processor.processedTrack,a));yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack)}}finally{o()}})}getProcessor(){return this.processor}stopProcessor(){var e,n;return Z(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(e=this.processor.processedTrack)===null||e===void 0||e.stop(),yield this.processor.destroy(),this.processor=void 0,(n=this.processorElement)===null||n===void 0||n.remove(),this.processorElement=void 0,yield this.restart())})}}class Dz extends jo.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:o,data:s}=n.data;switch(o){case"error":et.error(s.error.message),this.emit(va.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==s.enabled&&s.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(va.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(s.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(va.ParticipantEncryptionStatusChanged,s.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(Ea.KeyRatcheted,s.material,s.keyIndex);break}},this.onWorkerError=n=>{et.error("e2ee worker encountered an error:",{error:n.error}),this.emit(va.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!ez())throw new xx("tried to setup end-to-end encryption on an unsupported browser");if(et.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(et.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){et.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?et.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Te.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(ce.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Bn.NONE,i.identity)),e.on(ce.ConnectionStateChanged,r=>{r===ft.Connected&&e.participants.forEach(i=>{i.tracks.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Bn.NONE,i.identity)})})}).on(ce.TrackUnsubscribed,(r,i,o)=>{var s;const a={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(a)}).on(ce.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(ce.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),e.localParticipant.on(ue.LocalTrackPublished,r=>Z(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Ea.SetKey,r=>this.postKey(r)).on(Ea.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?jD(r.mimeType):void 0)}}setupE2EESender(e,n){if(!(e instanceof Jl)||!n){n||et.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return Z(this,void 0,void 0,function*(){if(this.worker){if(JC()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(ch in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let o=e.writableStream,s=e.readableStream;if(!o||!s){const c=e.createEncodedStreams();e.writableStream=c.writable,o=c.writable,e.readableStream=c.readable,s=c.readable}const a={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[s,o])}e[ch]=!0}})}handleSender(e,n,r){var i;if(!(ch in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(JC()){et.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{et.info("initialize encoded streams");const o=e.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s,[o.readable,o.writable])}e[ch]=!0}}}var Ad;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Ad||(Ad={}));class Pz{constructor(){this.pendingTasks=new Map,this.taskMutex=new Zi,this.nextTaskIndex=0}run(e){return Z(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Ad.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Ad.RUNNING,yield e()}finally{n.status=Ad.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return Z(this,void 0,void 0,function*(){return this.run(()=>Z(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const Nz=["syncState","trickle","offer","answer","simulate","leave"];function Bz(t){const e=Nz.indexOf(t.case)>=0;return et.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var qt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(qt||(qt={}));class Sx{get currentState(){return this.state}get isDisconnected(){return this.state===qt.DISCONNECTING||this.state===qt.DISCONNECTED}get isEstablishingConnection(){return this.state===qt.CONNECTING||this.state===qt.RECONNECTING}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=qt.DISCONNECTED,this.log=et,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Os((r=n.loggerName)!==null&&r!==void 0?r:Lo.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new Pz,this.queuedRequests=[],this.closingLock=new Zi,this.connectionLock=new Zi,this.state=qt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return Z(this,void 0,void 0,function*(){return this.state=qt.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return Z(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=qt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r,e=Rz(e),e=e.replace(/\/$/,""),e+="/rtc";const o=kz(),s=Fz(n,o,r);return new Promise((a,c)=>Z(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();try{const u=()=>Z(this,void 0,void 0,function*(){this.close(),clearTimeout(d),c(new Rt("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),c(new Rt("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),this.log.debug("connecting to ".concat(e+s),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(e+s),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=f=>Z(this,void 0,void 0,function*(){if(this.state!==qt.CONNECTED){clearTimeout(d);try{const h=yield fetch("http".concat(e.substring(2),"/validate").concat(s));if(h.status.toFixed(0).startsWith("4")){const p=yield h.text();c(new Rt(p,0,h.status))}else c(new Rt("Internal error",2,h.status))}catch{c(new Rt("server was not reachable",1))}return}this.handleWSError(f)}),this.ws.onmessage=f=>Z(this,void 0,void 0,function*(){var h,p,g,C;let v;if(typeof f.data=="string"){const m=JSON.parse(f.data);v=Ao.fromJson(m)}else if(f.data instanceof ArrayBuffer)v=Ao.fromBinary(new Uint8Array(f.data));else{this.log.error("could not decode websocket message: ".concat(typeof f.data),this.logContext);return}if(this.state!==qt.CONNECTED){let m=!1;if(((h=v.message)===null||h===void 0?void 0:h.case)==="join"?(this.state=qt.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=v.message.value.pingTimeout,this.pingIntervalDuration=v.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(v.message.value)):this.state===qt.RECONNECTING&&v.message.case!=="leave"?(this.state=qt.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((p=v.message)===null||p===void 0?void 0:p.case)==="reconnect"?a((g=v.message)===null||g===void 0?void 0:g.value):(a(),m=!0)):this.isEstablishingConnection&&v.message.case==="leave"?c(new Rt("Received leave request while trying to (re)connect",4)):r.reconnect||c(new Rt("did not receive join response, got ".concat((C=v.message)===null||C===void 0?void 0:C.case," instead"))),!m)return}this.signalLatency&&(yield Rs(this.signalLatency)),this.handleSignalResponse(v)}),this.ws.onclose=f=>{this.isEstablishingConnection&&c(new Rt("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:f.reason,state:this.state})),this.handleOnClose(f.reason)}}finally{l()}}))}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return Z(this,void 0,void 0,function*(){const n=yield this.closingLock.lock();try{if(e&&(this.state=qt.DISCONNECTING),this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const r=new Promise(i=>{this.ws?this.ws.onclose=()=>{i()}:i()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([r,Rs(250)])),this.ws=void 0}}finally{e&&(this.state=qt.DISCONNECTED),this.clearPingInterval(),n()}})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Q0(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Q0(e)})}sendIceCandidate(e,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Vi({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Gi({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return this.sendRequest({case:"updateMetadata",value:new ko({metadata:e,name:n})})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new So({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new Ro({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:We.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Po({timestamp:We.parse(Date.now()),rtt:We.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new fi({canReconnect:!1,reason:Ts.CLIENT_INITIATED})})}sendRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return Z(this,void 0,void 0,function*(){if(!n&&!Bz(e)&&this.state===qt.RECONNECTING){this.queuedRequests.push(()=>Z(this,void 0,void 0,function*(){yield this.sendRequest(e,!0)}));return}if(n||(yield this.requestQueue.flush()),this.signalLatency&&(yield Rs(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(e==null?void 0:e.case),this.logContext);return}const i=new ls({message:e});try{this.useJSON?this.ws.send(i.toJsonString()):this.ws.send(i.toBinary())}catch(o){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:o}))}})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const s=AS(i.value);this.onAnswer&&this.onAnswer(s)}else if(i.case==="offer"){const s=AS(i.value);this.onOffer&&this.onOffer(s)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return Z(this,void 0,void 0,function*(){if(this.state===qt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=On.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&On.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=On.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&On.clearInterval(this.pingInterval)}}function AS(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Q0(t){return new ur({sdp:t.sdp,type:t.type})}function Fz(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",_c()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.publishOnly!==void 0&&i.set("publish",n.publishOnly),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var KD={},JD={exports:{}},wS=JD.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(wS).forEach(function(t){var e=wS[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var YD=JD.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=e(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=e(a[d+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=YD,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var f=d[0],h=d.slice(2);f==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var p=0;p<(i[f]||[]).length;p+=1){var g=i[f][p];if(g.reg.test(h))return r(g,u,h)}}),c.media=l,c};var s=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(KD);var Lm=YD,Oz=/%[sdv%]/g,Mz=function(t){var e=1,n=arguments,r=n.length;return t.replace(Oz,function(i){if(e>=r)return i;var o=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},Hu=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var o=0;o<e.names.length;o+=1){var s=e.names[o];e.name?i.push(n[e.name][s]):i.push(n[e.names[o]])}else i.push(n[e.name]);return Mz.apply(null,i)},Lz=["v","o","s","i","u","e","p","c","b","t","r","z","a"],Uz=["i","c","b","a"],Vz=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var n=e.outerOrder||Lz,r=e.innerOrder||Uz,i=[];return n.forEach(function(o){Lm[o].forEach(function(s){s.name in t&&t[s.name]!=null?i.push(Hu(o,s,t)):s.push in t&&t[s.push]!=null&&t[s.push].forEach(function(a){i.push(Hu(o,s,a))})})}),t.media.forEach(function(o){i.push(Hu("m",Lm.m[0],o)),r.forEach(function(s){Lm[s].forEach(function(a){a.name in o&&o[a.name]!=null?i.push(Hu(s,a,o)):a.push in o&&o[a.push]!=null&&o[a.push].forEach(function(c){i.push(Hu(s,a,c))})})})}),i.join(`\r
`)+`\r
`},Gz=KD,Wz=Vz,Um=Wz,od=Gz.parse;const SS=.7,Tl={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class kS extends jo.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.log=et,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Ix(o=>Z(this,void 0,void 0,function*(){this.emit(Tl.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(o)o(s);else throw s}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Os((i=r.loggerName)!==null&&i!==void 0?i:Lo.PCTransport),this.loggerOptions=r,this.config=e,this.mediaConstraints=n,this._pc=this.createPC()}createPC(){const e=bz()?new RTCPeerConnection(this.config,this.mediaConstraints):new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return Z(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){var n;return Z(this,void 0,void 0,function*(){let r;if(e.type==="offer"){let{stereoMids:i,nackMids:o}=jz(e);this.remoteStereoMids=i,this.remoteNackMids=o}else if(e.type==="answer"){const i=od((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(s=>{if(!s.transceiver||o.mid!=s.transceiver.mid)return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config=l.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),s.maxbr>0&&(l.config+=";maxaveragebitrate=".concat(s.maxbr*1e3)),c=!0;break}return c||s.maxbr>0&&o.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(s.maxbr*1e3)}),!0})}),r=Um(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Tl.NegotiationComplete),e.sdp&&od(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(Tl.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(e){var n;return Z(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e),i=od((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"?ES(o,[],[]):o.type==="video"&&(zz(o),this.trackBitrates.some(s=>{if(!o.msid||!s.cid||!o.msid.includes(s.cid))return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config.includes("x-google-start-bitrate")||(l.config+=";x-google-start-bitrate=".concat(Math.round(s.maxbr*SS))),l.config.includes("x-google-max-bitrate")||(l.config+=";x-google-max-bitrate=".concat(s.maxbr)),c=!0;break}return c||o.fmtp.push({payload:a,config:"x-google-start-bitrate=".concat(Math.round(s.maxbr*SS),";x-google-max-bitrate=").concat(s.maxbr)}),!0}))}),yield this.setMungedSDP(r,Um(i)),this.onOffer(r)})}createAndSetAnswer(){var e;return Z(this,void 0,void 0,function*(){const n=yield this.pc.createAnswer(),r=od((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{i.type==="audio"&&ES(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Um(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new mn("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new mn("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var e;return Z(this,void 0,void 0,function*(){if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const s=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(e,n,r){return Z(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const s={error:o,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new YC(o)}})}}function ES(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function zz(t){var e,n,r,i;const o=(n=(e=t.rtp[0])===null||e===void 0?void 0:e.codec)===null||n===void 0?void 0:n.toLowerCase();if(!bd(o))return;let s=0;((r=t.ext)===null||r===void 0?void 0:r.some(c=>c.uri===pS?!0:(c.value>s&&(s=c.value),!1)))||(i=t.ext)===null||i===void 0||i.push({value:s+1,uri:pS})}function jz(t){var e;const n=[],r=[],i=od((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return i.media.forEach(s=>{var a;s.type==="audio"&&(s.rtp.some(c=>c.codec==="opus"?(o=c.payload,!0):!1),!((a=s.rtcpFb)===null||a===void 0)&&a.some(c=>c.payload===o&&c.type==="nack")&&r.push(s.mid),s.fmtp.some(c=>c.payload===o?(c.config.includes("sprop-stereo=1")&&n.push(s.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const ny="vp8",Hz={audioBitrate:Y0.music.maxBitrate,audioPreset:Y0.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:bx.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:ny,backupCodec:!0},qD={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},QD={resolution:of.h720.resolution},Zz={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new OW,disconnectOnPageLeave:!0,expWebAudioMix:!1},kx={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Cn;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Cn||(Cn={}));class $z{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=kx.peerConnectionTimeout,this.log=et,this.updateState=()=>{var s;const a=this.state,c=this.requiredTransports.map(l=>l.getConnectionState());c.every(l=>l==="connected")?this.state=Cn.CONNECTED:c.some(l=>l==="failed")?this.state=Cn.FAILED:c.some(l=>l==="connecting")?this.state=Cn.CONNECTING:c.every(l=>l==="closed")?this.state=Cn.CLOSED:c.some(l=>l==="closed")?this.state=Cn.CLOSING:c.every(l=>l==="new")&&(this.state=Cn.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(Cn[a]," to ").concat(Cn[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Os((i=r.loggerName)!==null&&i!==void 0?i:Lo.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n;const o={optional:[{googDscp:!0}]};this.publisher=new kS(e,o,r),this.subscriber=new kS(e,void 0,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Jn.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Jn.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=s=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s)},this.state=Cn.NEW,this.connectionLock=new Zi}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return Z(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return Z(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return Z(this,void 0,void 0,function*(){n===Jn.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return Z(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){var r;return Z(this,void 0,void 0,function*(){const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,e,n)))}finally{i()}})}negotiate(e){return Z(this,void 0,void 0,function*(){return new Promise((n,r)=>Z(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(Tl.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Tl.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Jn.PUBLISHER?this.publisher.getConnectedAddress():e===Jn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return Z(this,void 0,void 0,function*(){if(e.getConnectionState()!=="connected")return new Promise((o,s)=>Z(this,void 0,void 0,function*(){const a=()=>{this.log.warn("abort transport connection",this.logContext),On.clearTimeout(c),s(new Rt("room connection has been cancelled",3))};n!=null&&n.signal.aborted&&a(),n==null||n.signal.addEventListener("abort",a);const c=On.setTimeout(()=>{n==null||n.signal.removeEventListener("abort",a),s(new Rt("could not establish pc connection"))},r);for(;this.state!==Cn.CONNECTED;)if(yield Rs(50),n!=null&&n.signal.aborted){s(new Rt("room connection has been cancelled",3));return}On.clearTimeout(c),n==null||n.signal.removeEventListener("abort",a),o()}))})}}const TS="_lossy",RS="_reliable",Xz=2*1e3,_S="leave-reconnect";var Ai;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Ai||(Ai={}));class Kz extends jo.EventEmitter{get isClosed(){return this._isClosed}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=kx.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=Ai.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=et,this.handleDataChannel=r=>{let{channel:i}=r;return Z(this,void 0,void 0,function*(){if(i){if(i.label===RS)this.reliableDCSub=i;else if(i.label===TS)this.lossyDCSub=i;else return;this.log.debug("on data channel ".concat(i.id,", ").concat(i.label),this.logContext),i.onmessage=this.handleDataMessage}})},this.handleDataMessage=r=>Z(this,void 0,void 0,function*(){var i,o;const s=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const c=mo.fromBinary(new Uint8Array(a));((i=c.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(Te.ActiveSpeakersUpdate,c.value.value.speakers):((o=c.value)===null||o===void 0?void 0:o.case)==="user"&&this.emit(Te.DataPacketReceived,c.value.value,c.kind)}finally{s()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?vn.LOSSY:vn.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(Te.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(a===null){o(s);return}r===_S&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=On.setTimeout(()=>this.attemptReconnect(i),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Ai.Connected&&r();const o=()=>{this.off(Te.Disconnected,s),r()},s=()=>{this.off(Te.Restarted,o),i()};this.once(Te.Restarted,o),this.once(Te.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(Te.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===qt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Jo.RR_SIGNAL_DISCONNECTED))},this.log=Os((n=e.loggerName)!==null&&n!==void 0?n:Lo.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new Sx(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Zi,this.dataProcessLock=new Zi,this.dcBufferStatus=new Map([[vn.LOSSY,!0],[vn.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Te.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Te.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Te.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Te.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Te.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Te.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Te.StreamStateChanged,r)}get logContext(){var e,n,r,i,o,s;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomSid:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,identity:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity}}join(e,n,r,i){return Z(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof Rt&&o.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw o}})}close(){return Z(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.emit(Te.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){var e;return Z(this,void 0,void 0,function*(){yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return Z(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new fo("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new Rt("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){var e;return Z(this,void 0,void 0,function*(){return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){var n;return Z(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==Cn.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new $z(r,e.subscriberPrimary,this.loggerOptions),this.emit(Te.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(i,o)=>{this.client.sendIceCandidate(i,o)},this.pcManager.onPublisherOffer=i=>{this.client.sendOffer(i)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(i,o,s)=>Z(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(i),this.logContext),i===Cn.CONNECTED){const a=this.pcState===Ai.New;this.pcState=Ai.Connected,a&&this.emit(Te.Connected,e)}else i===Cn.FAILED&&this.pcState===Ai.Connected&&(this.pcState=Ai.Disconnected,this.handleDisconnect("peerconnection failed",s==="failed"?Jo.RR_SUBSCRIBER_FAILED:Jo.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=i=>{this.emit(Te.MediaTrackAdded,i.track,i.streams[0],i.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>Z(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>Z(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Te.LocalTrackUnpublished,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Te.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Te.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Jo.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{e!=null&&e.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(_S)):(this.emit(Te.Disconnected,e==null?void 0:e.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason}))}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),i.push(s)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===Ki.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(TS,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(RS,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(e,n,r){if(!("getCapabilities"in RTCRtpReceiver))return;const i=RTCRtpReceiver.getCapabilities(n);if(!i)return;this.log.debug("get receiver capabilities",Object.assign(Object.assign({},this.logContext),{cap:i}));const o=[],s=[],a=[];i.codecs.forEach(c=>{const l=c.mimeType.toLowerCase();if(l==="audio/opus"){o.push(c);return}if(!(l==="video/".concat(r))){a.push(c);return}if(r==="h264"){c.sdpFmtpLine&&c.sdpFmtpLine.includes("profile-level-id=42e01f")?o.push(c):s.push(c);return}o.push(c)}),Iz(e)&&e.setCodecPreferences(o.concat(s,a))}createSender(e,n,r){return Z(this,void 0,void 0,function*(){if(gS())return yield this.createTransceiverRTCRtpSender(e,n,r);if(mS())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new mn("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return Z(this,void 0,void 0,function*(){if(gS())return this.createSimulcastTransceiverSender(e,n,r,i);if(mS())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new mn("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream);const o={direction:"sendonly",streams:i};r&&(o.sendEncodings=r);const s=yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o);return e.kind===ie.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(s,e.kind,n.videoCodec),e.codec=n.videoCodec),s.sender})}createSimulcastTransceiverSender(e,n,r,i){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return this.setPreferredCodec(s,e.kind,r.videoCodec),e.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(e){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){var n,r,i;return Z(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){et.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Ki.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Cn.NEW)===Cn.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof mn?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof qc||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",Jo.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Te.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){var n,r,i;return Z(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new mn("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Te.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new qc;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof Rt&&s.reason===0?new mn("could not reconnect, token might be expired"):new qc}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Te.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==qt.CONNECTED)throw new qc("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Te.Restarted)}catch(o){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(e){var n;return Z(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new mn("could not reconnect, url or token not saved");if(!this.pcManager)throw new mn("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Te.Resuming);try{this.setupSignalClientCallbacks();const r=yield this.client.reconnect(this.url,this.token,this.participantSid,e);if(r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}}catch(r){let i="";throw r instanceof Error&&(i=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof Rt&&r.reason===0?new mn("could not reconnect, token might be expired"):r instanceof Rt&&r.reason===4?r:new qc(i)}if(this.emit(Te.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==qt.CONNECTED)throw new qc("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(Te.Resumed)})}waitForPCInitialConnection(e,n){return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return Z(this,void 0,void 0,function*(){this.pcState=Ai.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Rs(Xz),!this.pcManager)throw new mn("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Ai.Connected}catch(e){throw this.pcState=Ai.Disconnected,new Rt("could not establish PC connection, ".concat(e.message))}})}sendDataPacket(e,n){return Z(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var r;return Z(this,void 0,void 0,function*(){if(!this.pcManager)throw new mn("PC manager is closed");const i=n?this.pcManager.subscriber:this.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!i)throw new Rt("".concat(o," connection not set"));!n&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const s=this.dataChannelForKind(e,n);if((s==null?void 0:s.readyState)==="open")return;const a=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<a;){if(i.isICEConnected&&((r=this.dataChannelForKind(e,n))===null||r===void 0?void 0:r.readyState)==="open")return;yield Rs(50)}throw new Rt("could not establish ".concat(o," connection, state: ").concat(i.getICEConnectionState()))})}ensurePublisherConnected(e){return Z(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(e,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Cn.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return Z(this,void 0,void 0,function*(){return new Promise((e,n)=>Z(this,void 0,void 0,function*(){if(!this.pcManager){n(new YC("PC manager is closed"));return}this.pcManager.requirePublisher();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Te.Closing,i),this.pcManager.publisher.once(Tl.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(a=>{const c=a.codec.toLowerCase();Tz(c)&&s.set(a.payload,c)}),this.emit(Te.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),e()}catch(o){o instanceof YC&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Jo.RR_UNKNOWN),n(o)}finally{this.off(Te.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===vn.LOSSY)return this.lossyDCSub;if(e===vn.RELIABLE)return this.reliableDCSub}else{if(e===vn.LOSSY)return this.lossyDC;if(e===vn.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array;e.forEach(l=>{l.isDesired!==a&&c.push(l.trackSid)}),this.client.sendSyncState(new _o({answer:o?Q0({sdp:o.sdp,type:o.type}):void 0,offer:s?Q0({sdp:s.sdp,type:s.type}):void 0,subscription:new di({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:gz(n),dataChannels:this.dataChannelsInfo()}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new Do({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(vn.LOSSY),Jn.PUBLISHER),n(this.dataChannelForKind(vn.RELIABLE),Jn.PUBLISHER),n(this.dataChannelForKind(vn.LOSSY,!0),Jn.SUBSCRIBER),n(this.dataChannelForKind(vn.RELIABLE,!0),Jn.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&On.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){_r()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){_r()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class qc extends Error{}class DS{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return ty(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return Z(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),et.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return Z(this,void 0,void 0,function*(){const n=yield fetch("".concat(Jz(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new Rt("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}}function Jz(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}const Ex=2e3;function Wp(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}class Ir extends Jl{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,ie.Kind.Audio,n,r,o),this.stopOnMute=!1,this.monitorSender=()=>Z(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}s&&this.prevStats&&(this._currentBitrate=Wp(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.checkForSilence()}setDeviceId(e){return Z(this,void 0,void 0,function*(){return this._constraints.deviceId===e?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||gc(e)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return Z(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===ie.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return Z(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==gc(this._constraints.deviceId);return this.source===ie.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return Z(this,void 0,void 0,function*(){let n;if(e){const r=Gp({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return Z(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){_r()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ex)))}setProcessor(e){var n;return Z(this,void 0,void 0,function*(){const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack))}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){var e;return Z(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return Z(this,void 0,void 0,function*(){const e=yield fz(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(Ie.AudioSilenceDetected)),e})}}function eP(t,e,n){switch(t.kind){case"audio":return new Ir(t,e,!1,void 0,n);case"video":return new ii(t,e,!1,n);default:throw new fo("unsupported track type: ".concat(t.kind))}}const Yz=Object.values(of),qz=Object.values(qC),Qz=Object.values(bx),ej=[of.h180,of.h360],tj=[qC.h180,qC.h360],nj=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new bt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),ry=["q","h","f"];function iy(t,e,n,r){var i,o;let s=r==null?void 0:r.videoEncoding;t&&(s=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!s&&!a&&!c||!e||!n)return[{}];s||(s=ij(t,e,n,l),et.debug("using video encoding",s));const u=new bt(e,n,s.maxBitrate,s.maxFramerate,s.priority);if(c&&bd(l)){et.debug("using svc with scalabilityMode ".concat(c));const h=new tP(c),p=[];if(h.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));for(let g=0;g<h.spatial;g+=1)p.push({rid:ry[2-g],maxBitrate:s.maxBitrate/Math.pow(3,g),maxFramerate:u.encoding.maxFramerate});return p[0].scalabilityMode=c,et.debug("encodings",p),p}if(!a)return[s];let d=[];t?d=(i=NS(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:PS(t,u):d=(o=NS(r==null?void 0:r.videoSimulcastLayers))!==null&&o!==void 0?o:PS(t,u);let f;if(d.length>0){const h=d[0];d.length>1&&([,f]=d);const p=Math.max(e,n);if(p>=960&&f)return Vm(e,n,[h,f,u]);if(p>=480)return Vm(e,n,[h,u])}return Vm(e,n,[u])}function rj(t,e,n){var r,i,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&et.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(o=a.height)!==null&&o!==void 0?o:(s=t.dimensions)===null||s===void 0?void 0:s.height;return iy(t.source===ie.Source.ScreenShare,c,l,n)}function ij(t,e,n,r){const i=oj(t,e,n);let{encoding:o}=i[0];const s=Math.max(e,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(o=c.encoding,c.width>=s)break}if(r)switch(r){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function oj(t,e,n){if(t)return Qz;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?Yz:qz}function PS(t,e){if(t)return nj(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?ej:tj}function Vm(t,e,n){const r=[];if(n.forEach((i,o)=>{if(o>=ry.length)return;const s=Math.min(t,e),c={rid:ry[o],scaleResolutionDownBy:Math.max(1,s/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(c.maxFramerate=i.encoding.maxFramerate);const l=Kl()||o===0;i.encoding.priority&&l&&(c.priority=i.encoding.priority,c.networkPriority=i.encoding.priority),r.push(c)}),_c()&&$D()==="ios"){let i;r.forEach(s=>{i?s.maxFramerate&&s.maxFramerate>i&&(i=s.maxFramerate):i=s.maxFramerate});let o=!0;r.forEach(s=>{var a;s.maxFramerate!=i&&(o&&(o=!1,et.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),et.info('Setting framerate of encoding "'.concat((a=s.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),s.maxFramerate=i)})}return r}function NS(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class tP{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}const sj=5e3;class ii extends Jl{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,ie.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.monitorSender=()=>Z(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const s=new Map(o.map(a=>[a.rid,a]));if(this.prevStats){let a=0;s.forEach((c,l)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(l);a+=Wp(c,d)}),this._currentBitrate=a}this.prevStats=s}),this.senderLock=new Zi}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!_r())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Ex))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var n,r,i,o,s;return Z(this,void 0,void 0,function*(){yield e.pauseUpstream.call(this);try{for(var a=!0,c=el(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)o=l.value,a=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var n,r,i,o,s;return Z(this,void 0,void 0,function*(){yield e.resumeUpstream.call(this);try{for(var a=!0,c=el(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;yield(s=u.sender)===null||s===void 0?void 0:s.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return Z(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===ie.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return Z(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===ie.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){var e;return Z(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,framesSent:i.framesSent,timestamp:i.timestamp,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges},a=r.get(i.remoteId);a&&(s.jitter=a.jitter,s.packetsLost=a.packetsLost,s.roundTripTime=a.roundTripTime),n.push(s)}}),n})}setPublishingQuality(e){const n=[];for(let r=In.LOW;r<=In.HIGH;r+=1)n.push(new zi({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}setDeviceId(e){return Z(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===gc(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||gc(e)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(e){var n,r,i,o;return Z(this,void 0,void 0,function*(){let s;if(e){const u=Gp({video:e});typeof u.video!="boolean"&&(s=u.video)}yield this.restart(s);try{for(var a=!0,c=el(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var i,o,s,a,c,l;return Z(this,void 0,void 0,function*(){if(yield r.setProcessor.call(this,e,n),!((c=this.processor)===null||c===void 0)&&c.processedTrack)try{for(var u=!0,d=el(this.simulcastCodecs.values()),f;f=yield d.next(),i=f.done,!i;u=!0)a=f.value,u=!1,yield(l=a.sender)===null||l===void 0?void 0:l.replaceTrack(this.processor.processedTrack)}catch(h){o={error:h}}finally{try{!u&&!i&&(s=d.return)&&(yield s.call(d))}finally{if(o)throw o.error}}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e))throw new Error("".concat(e," already added"));const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},sj))}setPublishingCodecs(e){var n,r,i,o,s,a,c;return Z(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=el(e);i=yield r.next(),o=i.done,!o;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const f of u.qualities)if(f.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield BS(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){s={error:u}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return l})}setPublishingLayers(e){return Z(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield BS(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Z(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),HD()&&this.isInBackground&&this.source===ie.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function BS(t,e,n,r,i,o){return Z(this,void 0,void 0,function*(){const s=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const a=t.getParameters(),{encodings:c}=a;if(!c)return;if(c.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch");return}let l=!1;!1&&c[0].scalabilityMode||c.forEach((d,f)=>{var h;let p=(h=d.rid)!==null&&h!==void 0?h:"";p===""&&(p="q");const g=nP(p),C=n.find(v=>v.quality===g);C&&d.active!==C.enabled&&(l=!0,d.active=C.enabled,i.debug("setting layer ".concat(C.quality," to ").concat(d.active?"enabled":"disabled"),o),Kl()&&(C.enabled?(d.scaleResolutionDownBy=e[f].scaleResolutionDownBy,d.maxBitrate=e[f].maxBitrate,d.maxFrameRate=e[f].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),l&&(a.encodings=c,i.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:a.encodings})),yield t.setParameters(a))}finally{s()}})}function nP(t){switch(t){case"f":return In.HIGH;case"h":return In.MEDIUM;case"q":return In.LOW;default:return In.HIGH}}function FS(t,e,n,r){if(!n)return[new lr({quality:In.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new tP(i),s=[];for(let a=0;a<o.spatial;a+=1)s.push(new lr({quality:In.HIGH-a,width:Math.ceil(t/Math.pow(2,a)),height:Math.ceil(e/Math.pow(2,a)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(3,a)):0,ssrc:0}));return s}return n.map(i=>{var o,s,a;const c=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let l=nP((s=i.rid)!==null&&s!==void 0?s:"");return new lr({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}class rP extends ie{constructor(e,n,r,i,o){super(e,r,o),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?Ie.Muted:Ie.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver=void 0,this._currentBitrate=0,this.emit(Ie.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var e;return Z(this,void 0,void 0,function*(){return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Ex))}}class mc extends rP{constructor(e,n,r,i,o,s){super(e,n,ie.Kind.Audio,r,s),this.monitorReceiver=()=>Z(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Wp(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;_c()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(_c())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return Z(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(ey(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&ey(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(Ie.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(Ie.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return Z(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Gm=100;class wd extends rP{constructor(e,n,r,i,o){super(e,n,ie.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>Z(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=Wp(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=Ix(()=>{this.updateDimensions()},Gm),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?El(this._mediaStreamTrack,n):pl(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new aj(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return Z(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return Z(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((a,c)=>Math.max(a,c.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(a=>a.pictureInPicture),s=this.elementInfos.some(a=>a.visible)&&!i||o;if(this.lastVisible!==s){if(!s&&Date.now()-r<Gm){On.setTimeout(()=>{this.updateVisibility()},Gm);return}this.lastVisible=s,this.emit(Ie.VisibilityChanged,s,this)}}updateDimensions(){var e,n;let r=0,i=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const a=s.width()*o,c=s.height()*o;a+c>r+i&&(r=a,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(Ie.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?vS():n||(vS()>2?2:1)}}class aj{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:s}=r;o===this.element&&(this.isIntersecting=s,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??OS(e),this.isPiP=_r()&&document.pictureInPictureElement===e,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=OS(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var e;(e=this.handleResize)===null||e===void 0||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,yS().observe(this.element),CS().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var e,n;(e=yS())===null||e===void 0||e.unobserve(this.element),(n=CS())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function OS(t){let e=t.offsetTop,n=t.offsetLeft;const r=t.offsetWidth,i=t.offsetHeight,{hidden:o}=t,{opacity:s,display:a}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&e+i>window.pageYOffset&&n+r>window.pageXOffset&&!o&&(s!==""?parseFloat(s)>0:!0)&&a!=="none"}class Yo extends jo.EventEmitter{constructor(e,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=Bn.NONE,this.log=et,this.handleMuted=()=>{this.emit(Ie.Muted)},this.handleUnmuted=()=>{this.emit(Ie.Unmuted)},this.log=Os((o=i==null?void 0:i.loggerName)!==null&&o!==void 0?o:Lo.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=ie.Source.Unknown}setTrack(e){this.track&&(this.track.off(Ie.Muted,this.handleMuted),this.track.off(Ie.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(Ie.Muted,this.handleMuted),e.on(Ie.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Mt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Bn.NONE}get audioTrack(){if(this.track instanceof Ir||this.track instanceof mc)return this.track}get videoTrack(){if(this.track instanceof ii||this.track instanceof wd)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=ie.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===ie.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Yo||(Yo={}));class sf extends Yo{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(Ie.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(Ie.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(Ie.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var e;return Z(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){var e;return Z(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){var e;return Z(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){var e;return Z(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}}var ai;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(ai||(ai={}));function cj(t){switch(t){case ns.EXCELLENT:return ai.Excellent;case ns.GOOD:return ai.Good;case ns.POOR:return ai.Poor;case ns.LOST:return ai.Lost;default:return ai.Unknown}}class iP extends jo.EventEmitter{get logContext(){var e,n;return Object.assign(Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e)),{participantSid:this.sid,participantId:this.identity})}get isEncrypted(){return this.tracks.size>0&&Array.from(this.tracks.values()).every(e=>e.isEncrypted)}get isAgent(){var e,n;return(n=(e=this.permissions)===null||e===void 0?void 0:e.agent)!==null&&n!==void 0?n:!1}constructor(e,n,r,i,o){var s;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ai.Unknown,this.log=et,this.log=Os((s=o==null?void 0:o.loggerName)!==null&&s!==void 0?s:Lo.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){for(const[,n]of this.tracks)if(n.source===e)return n}getTrackByName(e){for(const[,n]of this.tracks)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrack(ie.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrack(ie.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrack(ie.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(ue.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(ue.ParticipantNameChanged,e)}setPermissions(e){var n,r,i,o,s;const a=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((l,u)=>{var d;return l!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=e,c&&this.emit(ue.ParticipantPermissionsChanged,a),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(ue.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=cj(e),n!==this._connectionQuality&&this.emit(ue.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTracks.forEach(n=>(n.track instanceof mc||n.track instanceof Ir)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(Ie.Muted,()=>{this.emit(ue.TrackMuted,e)}),e.on(Ie.Unmuted,()=>{this.emit(ue.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case ie.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case ie.Kind.Video:this.videoTracks.set(e.trackSid,e);break}}}function lj(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new To({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class Tx extends Yo{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=In.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(Ie.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new di({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new yo({participantSid:"",trackSids:[this.trackSid]})]});this.emit(Ie.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Yo.SubscriptionStatus.Unsubscribed:super.isSubscribed?Yo.SubscriptionStatus.Subscribed:Yo.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Yo.PermissionStatus.Allowed:Yo.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(this.track instanceof wd&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&this.track instanceof wd&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(Ie.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(Ie.VisibilityChanged,this.handleVisibilityChange),i.off(Ie.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(Ie.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(Ie.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(Ie.VisibilityChanged,this.handleVisibilityChange),e.on(Ie.Ended,this.handleEnded),this.emit(Ie.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(Ie.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?Ie.Muted:Ie.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(Ie.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(Ie.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===ie.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof wd&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new wo({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=In.HIGH,this.emit(Ie.UpdateSettings,e)}}class af extends iP{static fromParticipantInfo(e,n){return new af(e,n.sid,n.identity,n.name,n.metadata)}constructor(e,n,r,i,o,s){super(n,r||"",i,o,s),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(Ie.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Mt(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(Ie.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(Ie.SubscriptionPermissionChanged,n=>{this.emit(ue.TrackSubscriptionPermissionChanged,e,n)}),e.on(Ie.SubscriptionStatusChanged,n=>{this.emit(ue.TrackSubscriptionStatusChanged,e,n)}),e.on(Ie.Subscribed,n=>{this.emit(ue.TrackSubscribed,n,e)}),e.on(Ie.Unsubscribed,n=>{this.emit(ue.TrackUnsubscribed,n,e)}),e.on(Ie.SubscriptionFailed,n=>{this.emit(ue.TrackSubscriptionFailed,e.trackSid,n)})}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ie.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrack(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ie.Source.Microphone;const n=this.getTrack(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,o,s){let a=this.getTrackPublication(n);if(a||n.startsWith("TR")||this.tracks.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(ue.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,o,s-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Mt(a))),this.emit(ue.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new wd(e,n,i,o):l=new mc(e,n,i,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(r),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&l instanceof mc&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var o,s;let a=this.getTrackPublication(i.sid);if(a)a.updateInfo(i);else{const c=ie.kindFromProto(i.type);if(!c)return;a=new Tx(c,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),a.updateInfo(i),r.set(i.sid,a);const l=Array.from(this.tracks.values()).find(u=>u.source===(a==null?void 0:a.source));l&&a.source!==ie.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Mt(l),newTrack:Mt(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.tracks.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Mt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(ue.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.tracks.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.tracks.delete(e),r.kind){case ie.Kind.Audio:this.audioTracks.delete(e);break;case ie.Kind.Video:this.videoTracks.delete(e);break}n&&this.emit(ue.TrackUnpublished,r)}setAudioOutput(e){return Z(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTracks.forEach(r=>{var i;r.track instanceof mc&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}class oy extends iP{constructor(e,n,r,i){super(e,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Bn.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new XD)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>lj(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Mt(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Mt(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Mt(o))),this.onTrackMuted(o,o.isMuted)},this.handleSubscribedQualityUpdate=o=>Z(this,void 0,void 0,function*(){var s,a,c,l,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const f=this.videoTracks.get(o.trackSid);if(!f){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!f.videoTrack)return;const C=yield f.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var h=!0,p=el(C),g;g=yield p.next(),s=g.done,!s;h=!0){l=g.value,h=!1;const v=l;lz(v)&&(this.log.debug("publish ".concat(v," for ").concat(f.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Mt(f))),yield this.publishAdditionalCodecForTrack(f.videoTrack,v,f.options))}}catch(v){a={error:v}}finally{try{!h&&!s&&(c=p.return)&&(yield c.call(p))}finally{if(a)throw a.error}}}else o.subscribedQualities.length>0&&(yield(d=f.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.tracks.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>Z(this,void 0,void 0,function*(){if(o.source===ie.Source.ScreenShare||o.source===ie.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Mt(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof Ir||o instanceof ii)try{if(_r())try{const s=yield navigator==null?void 0:navigator.permissions.query({name:o.source===ie.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),Mt(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Mt(o))),yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Mt(o))),yield o.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Bn.NONE}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(Te.RemoteMute,(n,r)=>{const i=this.tracks.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(Te.Connected,this.handleReconnected).on(Te.SignalRestarted,this.handleReconnected).on(Te.SignalResumed,this.handleReconnected).on(Te.Restarting,this.handleReconnecting).on(Te.Resuming,this.handleReconnecting).on(Te.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Te.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Te.Disconnected,this.handleDisconnected)}setMetadata(e){var n;this.engine.client.sendUpdateLocalMetadata(e,(n=this.name)!==null&&n!==void 0?n:"")}setName(e){var n;this.engine.client.sendUpdateLocalMetadata((n=this.metadata)!==null&&n!==void 0?n:"",e)}setCameraEnabled(e,n,r){return this.setTrackEnabled(ie.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(ie.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(ie.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(ue.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return Z(this,void 0,void 0,function*(){this.encryptionType=e?Bn.GCM:Bn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){var o,s;return Z(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n}));let a=this.getTrack(e);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(e)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:e}));return}this.pendingPublishing.add(e);try{switch(e){case ie.Source.Camera:c=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case ie.Source.Microphone:c=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case ie.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new fo(e)}const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Mt(d))),l.push(this.publishTrack(d,i));[a]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&!(l instanceof fo)&&this.emit(ue.MediaDevicesError,l),l}finally{this.pendingPublishing.delete(e)}}else if(a&&a.track)if(e===ie.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrack(ie.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return Z(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(ie.Source.Camera)||this.pendingPublishing.has(ie.Source.Microphone))){this.pendingPublishing.add(ie.Source.Camera),this.pendingPublishing.add(ie.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(ie.Source.Camera),this.pendingPublishing.delete(ie.Source.Microphone)}}})}createTracks(e){var n,r;return Z(this,void 0,void 0,function*(){const i=zD(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),o=Gp(i);let s;try{s=yield navigator.mediaDevices.getUserMedia(o)}catch(a){throw a instanceof Error&&(o.audio&&(this.microphoneError=a),o.video&&(this.cameraError=a)),a}return o.audio&&(this.microphoneError=void 0,this.emit(ue.AudioStreamAcquired)),o.video&&(this.cameraError=void 0),s.getTracks().map(a=>{const c=a.kind==="audio";c?e.audio:e.video;let l;const u=c?o.audio:o.video;typeof u!="boolean"&&(l=u);const d=eP(a,l,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return d.kind===ie.Kind.Video?d.source=ie.Source.Camera:d.kind===ie.Kind.Audio&&(d.source=ie.Source.Microphone),d.mediaStream=s,d})})}createScreenTracks(e){return Z(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new xx("getDisplayMedia not supported");e.resolution===void 0&&!Az()&&(e.resolution=bx.h1080fps30.resolution);const n=pz(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new fo("no video track found");const o=new ii(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=ie.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const s=[o];if(r.getAudioTracks().length>0){this.emit(ue.AudioStreamAcquired);const a=new Ir(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=ie.Source.ScreenShareAudio,s.push(a)}return s})}publishTrack(e,n){var r,i,o,s;return Z(this,void 0,void 0,function*(){yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,e instanceof Jl&&this.pendingPublishPromises.has(e)&&(yield this.pendingPublishPromises.get(e));let a;if(e instanceof MediaStreamTrack)a=e.getConstraints();else{a=e.constraints;let h;switch(e.source){case ie.Source.Microphone:h="audioinput";break;case ie.Source.Camera:h="videoinput"}h&&this.activeDeviceMap.has(h)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(h)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new Ir(e,a,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":e=new ii(e,a,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new fo("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e instanceof Ir&&e.setAudioContext(this.audioContext);let c;if(this.tracks.forEach(h=>{h.track&&h.track===e&&(c=h)}),c)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),Mt(c))),c;const l="channelCount"in e.mediaStreamTrack.getSettings()&&e.mediaStreamTrack.getSettings().channelCount===2||e.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:l;u&&(n||(n={}),n.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),Mt(e))),n.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(o=n.dtx)!==null&&o!==void 0||(n.dtx=!1),(s=n.red)!==null&&s!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);Rc()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),d.simulcast=!1),d.source&&(e.source=d.source);const f=this.publish(e,d,u);this.pendingPublishPromises.set(e,f);try{return yield f}catch(h){throw h}finally{this.pendingPublishPromises.delete(e)}})}publish(e,n,r){var i,o,s,a,c,l,u,d,f,h,p,g,C;return Z(this,void 0,void 0,function*(){Array.from(this.tracks.values()).find(k=>e instanceof Jl&&k.source===e.source)&&e.source!==ie.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Mt(e))),n.stopMicTrackOnMute&&e instanceof Ir&&(e.stopOnMute=!0),e.source===ie.Source.ScreenShare&&Kl()&&(n.simulcast=!1),n.videoCodec==="av1"&&!Cz()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!yz()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=ny);const m=n.videoCodec;e.on(Ie.Muted,this.onTrackMuted),e.on(Ie.Unmuted,this.onTrackUnmuted),e.on(Ie.Ended,this.handleTrackEnded),e.on(Ie.UpstreamPaused,this.onTrackUpstreamPaused),e.on(Ie.UpstreamResumed,this.onTrackUpstreamResumed);const y=new Ui({cid:e.mediaStreamTrack.id,name:n.name,type:ie.kindToProto(e.kind),muted:e.isMuted,source:ie.sourceToProto(e.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n==null?void 0:n.stream});let I;if(e.kind===ie.Kind.Video){let k={width:0,height:0};try{k=yield e.waitForDimensions()}catch{const T=(a=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&a!==void 0?a:of.h720.resolution;k={width:T.width,height:T.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Mt(e)),{dims:k}))}y.width=k.width,y.height=k.height,e instanceof ii&&(bd(m)&&(e.source===ie.Source.ScreenShare&&m==="vp9"&&(n.scalabilityMode="L1T3"),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),y.simulcastCodecs=[new Li({codec:m,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:ny}),n.backupCodec&&m!==n.backupCodec.codec&&y.encryption===Bn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),y.simulcastCodecs.push(new Li({codec:n.backupCodec.codec,cid:""})))),I=iy(e.source===ie.Source.ScreenShare,y.width,y.height,n),y.layers=FS(y.width,y.height,I,bd(n.videoCodec))}else e.kind===ie.Kind.Audio&&(I=[{maxBitrate:(u=(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate)!==null&&u!==void 0?u:n.audioBitrate,priority:(f=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&f!==void 0?f:"high",networkPriority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new mn("cannot publish track when not connected");const b=yield this.engine.addTrack(y);let A;if(b.codecs.forEach(k=>{A===void 0&&(A=k.mimeType)}),A&&e.kind===ie.Kind.Video){const k=jD(A);k!==m&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Mt(e)),{codec:k})),n.videoCodec=k,I=iy(e.source===ie.Source.ScreenShare,y.width,y.height,n))}const E=new sf(e.kind,b,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(E.options=n,e.sid=b.sid,!this.engine.pcManager)throw new mn("pcManager is not ready");if(this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:I,trackInfo:b})),e.sender=yield this.engine.createSender(e,n,I),I)if(Kl()&&e.kind===ie.Kind.Audio){let k;for(const D of this.engine.pcManager.publisher.getTransceivers())if(D.sender===e.sender){k=D;break}k&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:k,codec:"opus",maxbr:!((g=I[0])===null||g===void 0)&&g.maxBitrate?I[0].maxBitrate/1e3:0})}else e.codec&&bd(e.codec)&&(!((C=I[0])===null||C===void 0)&&C.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:y.cid,codec:e.codec,maxbr:I[0].maxBitrate/1e3});return yield this.engine.negotiate(),e instanceof ii?e.startMonitor(this.engine.client):e instanceof Ir&&e.startMonitor(),this.addTrackPublication(E),this.emit(ue.LocalTrackPublished,E),E})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){var i;return Z(this,void 0,void 0,function*(){if(this.encryptionType!==Bn.NONE)return;let o;if(this.tracks.forEach(d=>{d.track&&d.track===e&&(o=d)}),!o)throw new fo("track is not published");if(!(e instanceof ii))throw new fo("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=rj(e,n,s);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Mt(e)));return}const c=e.addSimulcastTrack(n,a),l=new Ui({cid:c.mediaStreamTrack.id,type:ie.kindToProto(e.kind),muted:e.isMuted,source:ie.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:s.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=FS(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new mn("cannot publish track when not connected");const u=yield this.engine.addTrack(l);yield this.engine.createSimulcastSender(e,c,s,a),yield this.engine.negotiate(),this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:u}))})}unpublishTrack(e,n){var r,i;return Z(this,void 0,void 0,function*(){const o=this.getPublicationForTrack(e),s=o?Mt(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}e=o.track,e.off(Ie.Muted,this.onTrackMuted),e.off(Ie.Unmuted,this.onTrackUnmuted),e.off(Ie.Ended,this.handleTrackEnded),e.off(Ie.UpstreamPaused,this.onTrackUpstreamPaused),e.off(Ie.UpstreamResumed,this.onTrackUpstreamResumed),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&e.stop();let a=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Cn.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),e instanceof ii){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(a=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:l}))}switch(this.tracks.delete(o.trackSid),o.kind){case ie.Kind.Audio:this.audioTracks.delete(o.trackSid);break;case ie.Kind.Video:this.videoTracks.delete(o.trackSid);break}return this.emit(ue.LocalTrackUnpublished,o),o.setTrack(void 0),a&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return Z(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof sf)})}republishAllTracks(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Z(this,void 0,void 0,function*(){const r=[];this.tracks.forEach(i=>{i.track&&(e&&(i.options=Object.assign(Object.assign({},i.options),e)),r.push(i))}),yield Promise.all(r.map(i=>Z(this,void 0,void 0,function*(){const o=i.track;yield this.unpublishTrack(o,!1),n&&!o.isMuted&&o.source!==ie.Source.ScreenShare&&o.source!==ie.Source.ScreenShareAudio&&(o instanceof Ir||o instanceof ii)&&!o.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:i.trackSid})),yield o.restartTrack()),yield this.publishTrack(o,i.options)})))})}publishData(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Z(this,void 0,void 0,function*(){const i=Array.isArray(r)?r:r==null?void 0:r.destination,o=[],s=Array.isArray(r)?void 0:r.topic;i!==void 0&&i.forEach(c=>{c instanceof af?o.push(c.sid):o.push(c)});const a=new mo({kind:n,value:{case:"user",value:new Co({participantSid:this.sid,payload:e,destinationSids:o,topic:s})}});yield this.engine.sendDataPacket(a,n)})}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var r,i;const o=this.tracks.get(n.sid);if(o){const s=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Mt(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0)}getPublicationForTrack(e){let n;return this.tracks.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(i instanceof Ir||i instanceof ii)&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}}var ft;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting"})(ft||(ft={}));const uj=2*1e3;class ep extends jo.EventEmitter{constructor(e){var n,r,i;super(),n=this,this.state=ft.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=et,this.bufferedEvents=[],this.connect=(o,s,a)=>Z(this,void 0,void 0,function*(){var c;const l=yield this.disconnectLock.lock();if(this.state===ft.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),l(),Promise.resolve();if(this.connectFuture)return l(),this.connectFuture.promise;this.setAndEmitConnectionState(ft.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),ty(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new DS(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().catch(f=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:f}))}));const u=(f,h,p)=>Z(this,void 0,void 0,function*(){var g;this.abortController&&this.abortController.abort();const C=new AbortController;this.abortController=C,l==null||l();try{yield this.attemptConnection(p??o,s,a,C),this.abortController=void 0,f()}catch(v){if(this.regionUrlProvider&&v instanceof Rt&&v.reason!==3&&v.reason!==0){let m=null;try{m=yield this.regionUrlProvider.getNextBestRegionUrl((g=this.abortController)===null||g===void 0?void 0:g.signal)}catch(y){if(y instanceof Rt&&(y.status===401||y.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(y);return}}m?(this.log.info("Initial connection failed with ConnectionError: ".concat(v.message,". Retrying with another region: ").concat(m),this.logContext),yield u(f,h,m)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(v))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),h(v)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new XD((f,h)=>{u(f,h,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,a,c,l,u)=>Z(this,void 0,void 0,function*(){var d,f,h;const p=yield a.join(o,s,{autoSubscribe:c.autoSubscribe,publishOnly:c.publishOnly,adaptiveStream:typeof l.adaptiveStream=="object"?!0:l.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},u.signal);let g=p.serverInfo;if(g||(g={version:p.serverVersion,region:p.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(g).map(C=>{let[v,m]=C;return"".concat(v,": ").concat(m)}).join(", ")),{room:(d=p.room)===null||d===void 0?void 0:d.name,roomSid:(f=p.room)===null||f===void 0?void 0:f.sid,identity:(h=p.participant)===null||h===void 0?void 0:h.identity}),!p.serverVersion)throw new nz("unknown server version");return p.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),l.dynacast=!1),p}),this.applyJoinResponse=o=>{const s=o.participant;this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(o.sifTrailer)},this.attemptConnection=(o,s,a,c)=>Z(this,void 0,void 0,function*(){var l,u;this.state===ft.Reconnecting?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((l=this.regionUrlProvider)===null||l===void 0)&&l.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},kx),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const d=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(d),this.setupLocalParticipantEvents(),this.emit(ce.SignalConnected)}catch(d){yield this.engine.close(),this.recreateEngine();const f=new Rt("could not establish signal connection");throw d instanceof Error&&(f.message="".concat(f.message,": ").concat(d.message)),d instanceof Rt&&(f.reason=d.reason,f.status=d.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:d})),f}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Rt("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(d){throw yield this.engine.close(),this.recreateEngine(),d}_r()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),_r()&&(document.addEventListener("freeze",this.onPageLeave),(u=navigator.mediaDevices)===null||u===void 0||u.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(ft.Connected),this.emit(ce.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return Z(n,void 0,void 0,function*(){var s,a,c,l;const u=yield this.disconnectLock.lock();try{if(this.state===ft.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===ft.Connecting||this.state===ft.Reconnecting)&&(this.log.warn("abort connection attempt",this.logContext),(s=this.abortController)===null||s===void 0||s.abort(),(c=(a=this.connectFuture)===null||a===void 0?void 0:a.reject)===null||c===void 0||c.call(a,new Rt("Client initiated disconnect")),this.connectFuture=void 0),!((l=this.engine)===null||l===void 0)&&l.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(o,Ts.CLIENT_INITIATED),this.engine=void 0}finally{u()}})},this.onPageLeave=()=>Z(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>Z(this,void 0,void 0,function*(){const o=[],s=Ms();if(s&&s.os==="iOS"){const a="livekit-dummy-audio-el";let c=document.getElementById(a);if(!c){c=document.createElement("audio"),c.id=a,c.autoplay=!0,c.hidden=!0;const l=Mm();l.enabled=!0;const u=new MediaStream([l]);c.srcObject=u,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:u,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(ce.Disconnected,()=>{c==null||c.remove(),c=null})}o.push(c)}this.participants.forEach(a=>{a.audioTracks.forEach(c=>{c.track&&c.track.attachedElements.forEach(l=>{o.push(l)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>Z(this,void 0,void 0,function*(){const o=[];for(const s of this.participants.values())s.videoTracks.forEach(a=>{var c;(c=a.track)===null||c===void 0||c.attachedElements.forEach(l=>{o.includes(l)||o.push(l)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const o of this.participants.values())this.handleParticipantDisconnected(o.sid,o);this.setAndEmitConnectionState(ft.Reconnecting)&&this.emit(ce.Reconnecting)},this.handleSignalRestarted=o=>Z(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(ft.Connected),this.emit(ce.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}const a=this.identityToSid.get(s.identity);a&&a!==s.sid&&this.handleParticipantDisconnected(a,this.participants.get(a));let c=this.participants.get(s.sid);const l=!c;s.state===Ec.DISCONNECTED?this.handleParticipantDisconnected(s.sid,c):(c=this.getOrCreateParticipant(s.sid,s),l||c.updateInfo(s))})},this.handleActiveSpeakersUpdate=o=>{const s=[],a={};o.forEach(c=>{if(a[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const l=this.participants.get(c.sid);l&&(l.audioLevel=c.level,l.setIsSpeaking(!0),s.push(l))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(c=>{a[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(ce.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(c=>{s.set(c.sid,c)}),o.forEach(c=>{let l=this.participants.get(c.sid);c.sid===this.localParticipant.sid&&(l=this.localParticipant),l&&(l.audioLevel=c.level,l.setIsSpeaking(c.active),c.active?s.set(c.sid,l):s.delete(c.sid))});const a=Array.from(s.values());a.sort((c,l)=>l.audioLevel-c.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(ce.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const a=this.participants.get(s.participantSid);if(!a)return;const c=a.getTrackPublication(s.trackSid);!c||!c.track||(c.track.streamState=ie.streamStateFromProto(s.state),a.emit(ue.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(ce.TrackStreamStateChanged,c,c.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.participants.get(o.participantSid);if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.participants.values()).find(c=>c.tracks.has(o.trackSid));if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setSubscriptionError(o.err)},this.handleDataPacket=(o,s)=>{const a=this.participants.get(o.participantSid);this.emit(ce.DataReceived,o.payload,a,s,o.topic),a==null||a.emit(ue.DataReceived,o.payload,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ce.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ce.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ce.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ce.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>Z(this,void 0,void 0,function*(){this.emit(ce.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(ce.RoomMetadataChanged,o.metadata),(s==null?void 0:s.activeRecording)!==o.activeRecording&&this.emitWhenConnected(ce.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const a=this.participants.get(s.participantSid);a&&a.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(ce.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(ce.ParticipantNameChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(ce.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(ce.TrackUnmuted,o,this.localParticipant)},this.onLocalTrackPublished=o=>Z(this,void 0,void 0,function*(){var s;this.emit(ce.LocalTrackPublished,o,this.localParticipant),o.track instanceof Ir&&(yield o.track.checkForSilence())&&this.emit(ce.LocalAudioSilenceDetected,o);const a=yield(s=o.track)===null||s===void 0?void 0:s.getDeviceId(),c=hz(o.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.localParticipant.activeDeviceMap.set(c,a),this.emit(ce.ActiveDeviceChanged,c,a))}),this.onLocalTrackUnpublished=o=>{this.emit(ce.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalConnectionQualityChanged=o=>{this.emit(ce.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(ce.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(ce.ParticipantPermissionsChanged,o,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.identityToSid=new Map,this.options=Object.assign(Object.assign({},Zz),e),this.log=Os((r=this.options.loggerName)!==null&&r!==void 0?r:Lo.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},qD),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},QD),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},Hz),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Zi,this.localParticipant=new oy("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",gc(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",gc(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",gc(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(e){return Z(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&(this.e2eeManager=new Dz(this.options.e2ee),this.e2eeManager.on(va.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof oy&&(this.isE2EEEnabled=n),this.emit(ce.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(va.EncryptionError,n=>this.emit(ce.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){return{room:this.name,roomSid:this.sid,identity:this.localParticipant.identity}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}get sid(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.sid)!==null&&n!==void 0?n:""}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new Kz(this.options),this.engine.on(Te.ParticipantUpdate,this.handleParticipantUpdates).on(Te.RoomUpdate,this.handleRoomUpdate).on(Te.SpeakersChanged,this.handleSpeakersChanged).on(Te.StreamStateChanged,this.handleStreamStateUpdate).on(Te.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Te.SubscriptionError,this.handleSubscriptionError).on(Te.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Te.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Te.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Te.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Te.DataPacketReceived,this.handleDataPacket).on(Te.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(ft.Reconnecting)&&this.emit(ce.Reconnecting)}).on(Te.Resumed,()=>{this.setAndEmitConnectionState(ft.Connected),this.emit(ce.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),this.emitBufferedEvents()}).on(Te.SignalResumed,()=>{this.bufferedEvents=[],this.state===ft.Reconnecting&&this.sendSyncState()}).on(Te.Restarting,this.handleRestarting).on(Te.SignalRestarted,this.handleSignalRestarted).on(Te.DCBufferStatusChanged,(e,n)=>{this.emit(ce.DCBufferStatusChanged,e,n)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return or.getInstance().getDevices(e,n)}prepareConnection(e,n){return Z(this,void 0,void 0,function*(){if(this.state===ft.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(ty(new URL(e))&&n){this.regionUrlProvider=new DS(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===ft.Disconnected&&(this.regionUrl=r,yield fetch(IS(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(IS(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){if(this.localParticipant.identity===e)return this.localParticipant;const n=this.identityToSid.get(e);if(n)return this.participants.get(n)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return Z(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Nn({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Nn({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Nn({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Nn({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>Z(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Nn({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>Z(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Nn({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Nn({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>Z(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new fi({reason:Ts.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Nn({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveAudioOutputDevice(){var e,n;return(n=(e=this.options.audioOutput)===null||e===void 0?void 0:e.deviceId)!==null&&n!==void 0?n:""}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var i,o,s;return Z(this,void 0,void 0,function*(){let a=!1,c=!0;const l=r?{exact:n}:n;if(e==="audioinput"){const u=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.audioTracks.values()).filter(f=>f.source===ie.Source.Microphone);try{c=(yield Promise.all(d.map(f=>{var h;return(h=f.audioTrack)===null||h===void 0?void 0:h.setDeviceId(l)}))).every(f=>f===!0)}catch(f){throw this.options.audioCaptureDefaults.deviceId=u,f}}else if(e==="videoinput"){const u=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.videoTracks.values()).filter(f=>f.source===ie.Source.Camera);try{c=(yield Promise.all(d.map(f=>{var h;return(h=f.videoTrack)===null||h===void 0?void 0:h.setDeviceId(l)}))).every(f=>f===!0)}catch(f){throw this.options.videoCaptureDefaults.deviceId=u,f}}else if(e==="audiooutput"){if(!ey()&&!this.options.expWebAudioMix||this.options.expWebAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(i=(s=this.options).audioOutput)!==null&&i!==void 0||(s.audioOutput={});const u=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=n,a=u!==l;try{this.options.expWebAudioMix?(o=this.audioContext)===null||o===void 0||o.setSinkId(n):yield Promise.all(Array.from(this.participants.values()).map(d=>d.setAudioOutput({deviceId:n})))}catch(d){throw this.options.audioOutput.deviceId=u,d}}return a&&c&&(this.localParticipant.activeDeviceMap.set(e,n),this.emit(ce.ActiveDeviceChanged,e,n)),c})}setupLocalParticipantEvents(){this.localParticipant.on(ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(ue.TrackMuted,this.onLocalTrackMuted).on(ue.TrackUnmuted,this.onLocalTrackUnmuted).on(ue.LocalTrackPublished,this.onLocalTrackPublished).on(ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(ue.MediaDevicesError,this.onMediaDevicesError).on(ue.AudioStreamAcquired,this.startAudio).on(ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.participants.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===ft.Connecting||this.state===ft.Reconnecting){const u=()=>{this.onTrackAdded(e,n,r),d()},d=()=>{this.off(ce.Reconnected,u),this.off(ce.Connected,u),this.off(ce.Disconnected,d)};this.once(ce.Reconnected,u),this.once(ce.Connected,u),this.once(ce.Disconnected,d);return}if(this.state===ft.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=vz(n.id),o=i[0];let s=i[1],a=e.id;if(s&&s.startsWith("TR")&&(a=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=this.participants.get(o);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(e,a,n,r,l)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.bufferedEvents=[],this.state!==ft.Disconnected){this.regionUrl=void 0;try{this.participants.forEach(i=>{i.tracks.forEach(o=>{i.unpublishTrack(o.trackSid)})}),this.localParticipant.tracks.forEach(i=>{var o,s;i.track&&this.localParticipant.unpublishTrack(i.track,e),e&&((o=i.track)===null||o===void 0||o.detach(),(s=i.track)===null||s===void 0||s.stop())}),this.localParticipant.off(ue.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(ue.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(ue.TrackMuted,this.onLocalTrackMuted).off(ue.TrackUnmuted,this.onLocalTrackUnmuted).off(ue.LocalTrackPublished,this.onLocalTrackPublished).off(ue.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(ue.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(ue.MediaDevicesError,this.onMediaDevicesError).off(ue.AudioStreamAcquired,this.startAudio).off(ue.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),_r()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(ft.Disconnected),this.emit(ce.Disconnected,n)}}}handleParticipantDisconnected(e,n){this.participants.delete(e),n&&(this.identityToSid.delete(n.identity),n.tracks.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(ce.ParticipantDisconnected,n))}acquireAudioContext(){var e,n;return Z(this,void 0,void 0,function*(){if(typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?this.audioContext=this.options.expWebAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=Ax())!==null&&e!==void 0?e:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.expWebAudioMix&&this.participants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(ce.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=af.fromParticipantInfo(this.engine.client,n):i=new af(this.engine.client,e,"",void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.expWebAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.participants.has(e))return this.participants.get(e);const r=this.createParticipant(e,n);return this.participants.set(e,r),this.identityToSid.set(n.identity,n.sid),this.emitWhenConnected(ce.ParticipantConnected,r),r.on(ue.TrackPublished,i=>{this.emitWhenConnected(ce.TrackPublished,i,r)}).on(ue.TrackSubscribed,(i,o)=>{i.kind===ie.Kind.Audio?(i.on(Ie.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(Ie.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===ie.Kind.Video&&(i.on(Ie.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(Ie.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ce.TrackSubscribed,i,o,r)}).on(ue.TrackUnpublished,i=>{this.emit(ce.TrackUnpublished,i,r)}).on(ue.TrackUnsubscribed,(i,o)=>{this.emit(ce.TrackUnsubscribed,i,o,r)}).on(ue.TrackSubscriptionFailed,i=>{this.emit(ce.TrackSubscriptionFailed,i,r)}).on(ue.TrackMuted,i=>{this.emitWhenConnected(ce.TrackMuted,i,r)}).on(ue.TrackUnmuted,i=>{this.emitWhenConnected(ce.TrackUnmuted,i,r)}).on(ue.ParticipantMetadataChanged,i=>{this.emitWhenConnected(ce.ParticipantMetadataChanged,i,r)}).on(ue.ParticipantNameChanged,i=>{this.emitWhenConnected(ce.ParticipantNameChanged,i,r)}).on(ue.ConnectionQualityChanged,i=>{this.emitWhenConnected(ce.ConnectionQualityChanged,i,r)}).on(ue.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(ce.ParticipantPermissionsChanged,i,r)}).on(ue.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(ce.TrackSubscriptionStatusChanged,i,o,r)}).on(ue.TrackSubscriptionFailed,(i,o)=>{this.emit(ce.TrackSubscriptionFailed,i,r,o)}).on(ue.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(ce.TrackSubscriptionPermissionChanged,i,o,r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.participants.values()).reduce((r,i)=>(r.push(...i.getTracks()),r),[]),n=this.localParticipant.getTracks();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.participants.values())for(const n of e.videoTracks.values())n.isSubscribed&&n instanceof Tx&&n.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=On.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ts.STATE_MISMATCH))):e=0},uj)}clearConnectionReconcile(){this.connectionReconcileInterval&&On.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(ce.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.state===ft.Connected?this.emit(e,...r):(this.state===ft.Reconnecting&&this.bufferedEvents.push([e,r]),!1)}simulateParticipants(e){var n,r;return Z(this,void 0,void 0,function*(){const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new hu({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:We.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Xr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ce.SignalConnected),this.emit(ce.Connected),this.setAndEmitConnectionState(ft.Connected),i.video){const s=new sf(ie.Kind.Video,new kr({source:on.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Kn.AUDIO,name:"video-dummy"}),new ii(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:xS(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(ue.LocalTrackPublished,s)}if(i.audio){const s=new sf(ie.Kind.Audio,new kr({source:on.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Kn.AUDIO}),new Ir(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Mm(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(ue.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let a=new Xr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:Ec.ACTIVE,tracks:[],joinedAt:We.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(o.video){const l=xS(160*((r=o.aspectRatios[s%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new kr({source:on.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:Kn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}if(o.audio){const l=Mm(),u=new kr({source:on.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:Kn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==ce.ActiveSpeakersChanged){const o=oP(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...r)}}function oP(t){return t.map(e=>{if(e)return Array.isArray(e)?oP(e):typeof e=="object"?"logContext"in e&&e.logContext:e})}var Fi;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Fi||(Fi={}));class gu extends jo.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Fi.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=e,this.token=n,this.name=this.constructor.name,this.room=new ep(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(e){return Z(this,void 0,void 0,function*(){if(this.status!==Fi.IDLE)throw Error("check is running already");this.setStatus(Fi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Fi.SKIPPED&&this.setStatus(this.isSuccess()?Fi.SUCCESS:Fi.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(){return Z(this,void 0,void 0,function*(){return this.room.state===ft.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return Z(this,void 0,void 0,function*(){this.room&&this.room.state!==ft.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Fi.SKIPPED)}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function sP(t){var e,n;return Z(this,void 0,void 0,function*(){t??(t={}),(e=t.audio)!==null&&e!==void 0||(t.audio=!0),(n=t.video)!==null&&n!==void 0||(t.video=!0);const r=zD(t,qD,QD),i=Gp(r),o=navigator.mediaDevices.getUserMedia(i);t.audio&&(or.userMediaPromiseMap.set("audioinput",o),o.catch(()=>or.userMediaPromiseMap.delete("audioinput"))),t.video&&(or.userMediaPromiseMap.set("videoinput",o),o.catch(()=>or.userMediaPromiseMap.delete("videoinput")));const s=yield o;return s.getTracks().map(a=>{const c=a.kind==="audio";c?t.audio:t.video;let l;const u=c?i.audio:i.video;typeof u!="boolean"&&(l=u),l?l.deviceId=a.getSettings().deviceId:l={deviceId:a.getSettings().deviceId};const d=eP(a,l);return d.kind===ie.Kind.Video?d.source=ie.Source.Camera:d.kind===ie.Kind.Audio&&(d.source=ie.Source.Microphone),d.mediaStream=s,d})})}function dj(t){return Z(this,void 0,void 0,function*(){return(yield sP({audio:!1,video:t}))[0]})}function fj(t){return Z(this,void 0,void 0,function*(){return(yield sP({audio:t,video:!1}))[0]})}class hj extends gu{get description(){return"Can publish audio"}perform(){var e;return Z(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield fj();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="audio"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class pj extends gu{get description(){return"Can publish video"}perform(){var e;return Z(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield dj();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="video"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class gj extends gu{get description(){return"Resuming connection after interruption"}perform(){var e;return Z(this,void 0,void 0,function*(){const n=yield this.connect();let r=!1,i=!1,o;const s=new Promise(c=>{setTimeout(c,5e3),o=c});n.on(ce.Reconnecting,()=>{r=!0}).on(ce.Reconnected,()=>{i=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const a=n.engine.client.onClose;if(a&&a(""),yield s,r){if(!i||n.state!==ft.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class mj extends gu{get description(){return"Can connect via TURN"}perform(){var e,n;return Z(this,void 0,void 0,function*(){const r=new Sx,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,a=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(s=!0,a=!0):l.startsWith("turns:")&&(s=!0,a=!0,o=!0),l.startsWith("stun:")&&(a=!0);a?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class vj extends gu{get description(){return"Establishing WebRTC connection"}perform(){return Z(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(ce.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,o)=>{if(i.candidate){const s=new RTCIceCandidate(i);let a="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(Cj(s.address)?a+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(e=!0,a+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),et.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function Cj(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class yj extends gu{get description(){return"Connecting to signal connection via WebSocket"}perform(){var e,n,r;return Z(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new Sx;const o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===$l.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class vJ extends jo.EventEmitter{constructor(e,n){super(),this.checkResults=new Map,this.url=e,this.token=n}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Fi.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Fi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return Z(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token),i=s=>{this.updateCheck(n,s)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(yj)})}checkWebRTC(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(vj)})}checkTURN(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(mj)})}checkReconnect(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(gj)})}checkPublishAudio(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(hj)})}checkPublishVideo(){return Z(this,void 0,void 0,function*(){return this.createAndRunCheck(pj)})}}function xj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=t instanceof Jl?t.mediaStreamTrack:t,i=r.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;et.debug("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&Aj(s)&&(o={facingMode:s,confidence:"high"})}if(["low","medium"].includes(o.confidence)){et.debug("Try to get facing mode from device label: (".concat(r.label,")"));const s=bj(r.label);s!==void 0&&(o=s)}return o}const MS=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),Ij=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function bj(t){var e;const n=t.trim().toLowerCase();if(n!=="")return MS.has(n)?MS.get(n):(e=Array.from(Ij.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function Aj(t){return t===void 0||["user","environment","left","right"].includes(t)}const sy=Math.min,Rl=Math.max,tp=Math.round,Fo=t=>({x:t,y:t}),wj={left:"right",right:"left",bottom:"top",top:"bottom"},Sj={start:"end",end:"start"};function LS(t,e,n){return Rl(t,sy(e,n))}function zp(t,e){return typeof t=="function"?t(e):t}function Dc(t){return t.split("-")[0]}function jp(t){return t.split("-")[1]}function aP(t){return t==="x"?"y":"x"}function cP(t){return t==="y"?"height":"width"}function Yl(t){return["top","bottom"].includes(Dc(t))?"y":"x"}function lP(t){return aP(Yl(t))}function kj(t,e,n){n===void 0&&(n=!1);const r=jp(t),i=lP(t),o=cP(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=np(s)),[s,np(s)]}function Ej(t){const e=np(t);return[ay(t),e,ay(e)]}function ay(t){return t.replace(/start|end/g,e=>Sj[e])}function Tj(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function Rj(t,e,n,r){const i=jp(t);let o=Tj(Dc(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(ay)))),o}function np(t){return t.replace(/left|right|bottom|top/g,e=>wj[e])}function _j(t){return{top:0,right:0,bottom:0,left:0,...t}}function Dj(t){return typeof t!="number"?_j(t):{top:t,right:t,bottom:t,left:t}}function rp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function US(t,e,n){let{reference:r,floating:i}=t;const o=Yl(e),s=lP(e),a=cP(s),c=Dc(e),l=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(jp(e)){case"start":h[s]-=f*(n&&l?-1:1);break;case"end":h[s]+=f*(n&&l?-1:1);break}return h}const Pj=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let l=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=US(l,r,c),f=r,h={},p=0;for(let g=0;g<a.length;g++){const{name:C,fn:v}=a[g],{x:m,y,data:I,reset:b}=await v({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:l,platform:s,elements:{reference:t,floating:e}});u=m??u,d=y??d,h={...h,[C]:{...h[C],...I}},b&&p<=50&&(p++,typeof b=="object"&&(b.placement&&(f=b.placement),b.rects&&(l=b.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):b.rects),{x:u,y:d}=US(l,f,c)),g=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function uP(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=zp(e,t),p=Dj(h),C=a[f?d==="floating"?"reference":"floating":d],v=rp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),m=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,y=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),I=await(o.isElement==null?void 0:o.isElement(y))?await(o.getScale==null?void 0:o.getScale(y))||{x:1,y:1}:{x:1,y:1},b=rp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:m,offsetParent:y,strategy:c}):m);return{top:(v.top-b.top+p.top)/I.y,bottom:(b.bottom-v.bottom+p.bottom)/I.y,left:(v.left-b.left+p.left)/I.x,right:(b.right-v.right+p.right)/I.x}}const Nj=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...C}=zp(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const v=Dc(i),m=Yl(a),y=Dc(a)===a,I=await(c.isRTL==null?void 0:c.isRTL(l.floating)),b=f||(y||!g?[np(a)]:Ej(a)),A=p!=="none";!f&&A&&b.push(...Rj(a,g,p,I));const E=[a,...b],k=await uP(e,C),D=[];let T=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&D.push(k[v]),d){const G=kj(i,s,I);D.push(k[G[0]],k[G[1]])}if(T=[...T,{placement:i,overflows:D}],!D.every(G=>G<=0)){var R,P;const G=(((R=o.flip)==null?void 0:R.index)||0)+1,j=E[G];if(j)return{data:{index:G,overflows:T},reset:{placement:j}};let Q=(P=T.filter(te=>te.overflows[0]<=0).sort((te,$)=>te.overflows[1]-$.overflows[1])[0])==null?void 0:P.placement;if(!Q)switch(h){case"bestFit":{var M;const te=(M=T.filter($=>{if(A){const q=Yl($.placement);return q===m||q==="y"}return!0}).map($=>[$.placement,$.overflows.filter(q=>q>0).reduce((q,ne)=>q+ne,0)]).sort(($,q)=>$[1]-q[1])[0])==null?void 0:M[0];te&&(Q=te);break}case"initialPlacement":Q=a;break}if(i!==Q)return{reset:{placement:Q}}}return{}}}};async function Bj(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Dc(n),a=jp(n),c=Yl(n)==="y",l=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,d=zp(e,t);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const Fj=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,c=await Bj(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},Oj=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:C=>{let{x:v,y:m}=C;return{x:v,y:m}}},...c}=zp(t,e),l={x:n,y:r},u=await uP(e,c),d=Yl(Dc(i)),f=aP(d);let h=l[f],p=l[d];if(o){const C=f==="y"?"top":"left",v=f==="y"?"bottom":"right",m=h+u[C],y=h-u[v];h=LS(m,h,y)}if(s){const C=d==="y"?"top":"left",v=d==="y"?"bottom":"right",m=p+u[C],y=p-u[v];p=LS(m,p,y)}const g=a.fn({...e,[f]:h,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:o,[d]:s}}}}}};function Hp(){return typeof window<"u"}function mu(t){return dP(t)?(t.nodeName||"").toLowerCase():"#document"}function Jr(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Gs(t){var e;return(e=(dP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function dP(t){return Hp()?t instanceof Node||t instanceof Jr(t).Node:!1}function Ji(t){return Hp()?t instanceof Element||t instanceof Jr(t).Element:!1}function Uo(t){return Hp()?t instanceof HTMLElement||t instanceof Jr(t).HTMLElement:!1}function VS(t){return!Hp()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Jr(t).ShadowRoot}function Tf(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Yi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function Mj(t){return["table","td","th"].includes(mu(t))}function Zp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Rx(t){const e=_x(),n=Ji(t)?Yi(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Lj(t){let e=Pa(t);for(;Uo(e)&&!ql(e);){if(Rx(e))return e;if(Zp(e))return null;e=Pa(e)}return null}function _x(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ql(t){return["html","body","#document"].includes(mu(t))}function Yi(t){return Jr(t).getComputedStyle(t)}function $p(t){return Ji(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Pa(t){if(mu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||VS(t)&&t.host||Gs(t);return VS(e)?e.host:e}function fP(t){const e=Pa(t);return ql(e)?t.ownerDocument?t.ownerDocument.body:t.body:Uo(e)&&Tf(e)?e:fP(e)}function cy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=fP(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Jr(i);if(o){const a=ly(s);return e.concat(s,s.visualViewport||[],Tf(i)?i:[],a&&n?cy(a):[])}return e.concat(i,cy(i,[],n))}function ly(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function hP(t){const e=Yi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Uo(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=tp(n)!==o||tp(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function pP(t){return Ji(t)?t:t.contextElement}function _l(t){const e=pP(t);if(!Uo(e))return Fo(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=hP(e);let s=(o?tp(n.width):n.width)/r,a=(o?tp(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const Uj=Fo(0);function gP(t){const e=Jr(t);return!_x()||!e.visualViewport?Uj:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Vj(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Jr(t)?!1:e}function cf(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=pP(t);let s=Fo(1);e&&(r?Ji(r)&&(s=_l(r)):s=_l(t));const a=Vj(o,n,r)?gP(o):Fo(0);let c=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const f=Jr(o),h=r&&Ji(r)?Jr(r):r;let p=f,g=ly(p);for(;g&&r&&h!==p;){const C=_l(g),v=g.getBoundingClientRect(),m=Yi(g),y=v.left+(g.clientLeft+parseFloat(m.paddingLeft))*C.x,I=v.top+(g.clientTop+parseFloat(m.paddingTop))*C.y;c*=C.x,l*=C.y,u*=C.x,d*=C.y,c+=y,l+=I,p=Jr(g),g=ly(p)}}return rp({width:u,height:d,x:c,y:l})}function Dx(t,e){const n=$p(t).scrollLeft;return e?e.left+n:cf(Gs(t)).left+n}function mP(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:Dx(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function Gj(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=Gs(r),a=e?Zp(e.floating):!1;if(r===s||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=Fo(1);const u=Fo(0),d=Uo(r);if((d||!d&&!o)&&((mu(r)!=="body"||Tf(s))&&(c=$p(r)),Uo(r))){const h=cf(r);l=_l(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}const f=s&&!d&&!o?mP(s,c,!0):Fo(0);return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x+f.x,y:n.y*l.y-c.scrollTop*l.y+u.y+f.y}}function Wj(t){return Array.from(t.getClientRects())}function zj(t){const e=Gs(t),n=$p(t),r=t.ownerDocument.body,i=Rl(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Rl(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+Dx(t);const a=-n.scrollTop;return Yi(r).direction==="rtl"&&(s+=Rl(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function jj(t,e){const n=Jr(t),r=Gs(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;const l=_x();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a,y:c}}function Hj(t,e){const n=cf(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Uo(t)?_l(t):Fo(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,c=i*o.x,l=r*o.y;return{width:s,height:a,x:c,y:l}}function GS(t,e,n){let r;if(e==="viewport")r=jj(t,n);else if(e==="document")r=zj(Gs(t));else if(Ji(e))r=Hj(e,n);else{const i=gP(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return rp(r)}function vP(t,e){const n=Pa(t);return n===e||!Ji(n)||ql(n)?!1:Yi(n).position==="fixed"||vP(n,e)}function Zj(t,e){const n=e.get(t);if(n)return n;let r=cy(t,[],!1).filter(a=>Ji(a)&&mu(a)!=="body"),i=null;const o=Yi(t).position==="fixed";let s=o?Pa(t):t;for(;Ji(s)&&!ql(s);){const a=Yi(s),c=Rx(s);!c&&a.position==="fixed"&&(i=null),(o?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Tf(s)&&!c&&vP(t,s))?r=r.filter(u=>u!==s):i=a,s=Pa(s)}return e.set(t,r),r}function $j(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?Zp(e)?[]:Zj(e,this._c):[].concat(n),r],a=s[0],c=s.reduce((l,u)=>{const d=GS(e,u,i);return l.top=Rl(d.top,l.top),l.right=sy(d.right,l.right),l.bottom=sy(d.bottom,l.bottom),l.left=Rl(d.left,l.left),l},GS(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Xj(t){const{width:e,height:n}=hP(t);return{width:e,height:n}}function Kj(t,e,n){const r=Uo(e),i=Gs(e),o=n==="fixed",s=cf(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const c=Fo(0);if(r||!r&&!o)if((mu(e)!=="body"||Tf(i))&&(a=$p(e)),r){const f=cf(e,!0,o,e);c.x=f.x+e.clientLeft,c.y=f.y+e.clientTop}else i&&(c.x=Dx(i));const l=i&&!r&&!o?mP(i,a):Fo(0),u=s.left+a.scrollLeft-c.x-l.x,d=s.top+a.scrollTop-c.y-l.y;return{x:u,y:d,width:s.width,height:s.height}}function Wm(t){return Yi(t).position==="static"}function WS(t,e){if(!Uo(t)||Yi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Gs(t)===n&&(n=n.ownerDocument.body),n}function CP(t,e){const n=Jr(t);if(Zp(t))return n;if(!Uo(t)){let i=Pa(t);for(;i&&!ql(i);){if(Ji(i)&&!Wm(i))return i;i=Pa(i)}return n}let r=WS(t,e);for(;r&&Mj(r)&&Wm(r);)r=WS(r,e);return r&&ql(r)&&Wm(r)&&!Rx(r)?n:r||Lj(t)||n}const Jj=async function(t){const e=this.getOffsetParent||CP,n=this.getDimensions,r=await n(t.floating);return{reference:Kj(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Yj(t){return Yi(t).direction==="rtl"}const qj={convertOffsetParentRelativeRectToViewportRelativeRect:Gj,getDocumentElement:Gs,getClippingRect:$j,getOffsetParent:CP,getElementRects:Jj,getClientRects:Wj,getDimensions:Xj,getScale:_l,isElement:Ji,isRTL:Yj},Qj=Fj,eH=Oj,tH=Nj,nH=(t,e,n)=>{const r=new Map,i={platform:qj,...n},o={...i.platform,_c:r};return Pj(t,e,{...i,platform:o})};var yP={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(ze,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(g,C){var v=g[C];if(typeof v.bind=="function")return v.bind(g);try{return Function.prototype.bind.call(v,g)}catch{return function(){return Function.prototype.apply.apply(v,[g,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?c:console[g]!==void 0?a(console,g):console.log!==void 0?a(console,"log"):e}function u(){for(var g=this.getLevel(),C=0;C<i.length;C++){var v=i[C];this[v]=C<g?e:this.methodFactory(v,g,this.name)}if(this.log=this.debug,typeof console===n&&g<this.levels.SILENT)return"No console available for logging"}function d(g){return function(){typeof console!==n&&(u.call(this),this[g].apply(this,arguments))}}function f(g,C,v){return l(g)||d.apply(this,arguments)}function h(g,C){var v=this,m,y,I,b="loglevel";typeof g=="string"?b+=":"+g:typeof g=="symbol"&&(b=void 0);function A(R){var P=(i[R]||"silent").toUpperCase();if(!(typeof window===n||!b)){try{window.localStorage[b]=P;return}catch{}try{window.document.cookie=encodeURIComponent(b)+"="+P+";"}catch{}}}function E(){var R;if(!(typeof window===n||!b)){try{R=window.localStorage[b]}catch{}if(typeof R===n)try{var P=window.document.cookie,M=encodeURIComponent(b),G=P.indexOf(M+"=");G!==-1&&(R=/^([^;]+)/.exec(P.slice(G+M.length+1))[1])}catch{}return v.levels[R]===void 0&&(R=void 0),R}}function k(){if(!(typeof window===n||!b)){try{window.localStorage.removeItem(b)}catch{}try{window.document.cookie=encodeURIComponent(b)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function D(R){var P=R;if(typeof P=="string"&&v.levels[P.toUpperCase()]!==void 0&&(P=v.levels[P.toUpperCase()]),typeof P=="number"&&P>=0&&P<=v.levels.SILENT)return P;throw new TypeError("log.setLevel() called with invalid level: "+R)}v.name=g,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=C||f,v.getLevel=function(){return I??y??m},v.setLevel=function(R,P){return I=D(R),P!==!1&&A(I),u.call(v)},v.setDefaultLevel=function(R){y=D(R),E()||v.setLevel(R,!1)},v.resetLevel=function(){I=null,k(),u.call(v)},v.enableAll=function(R){v.setLevel(v.levels.TRACE,R)},v.disableAll=function(R){v.setLevel(v.levels.SILENT,R)},v.rebuild=function(){if(s!==v&&(m=D(s.getLevel())),u.call(v),s===v)for(var R in o)o[R].rebuild()},m=D(s?s.getLevel():"WARN");var T=E();T!=null&&(I=D(T)),u.call(v)}s=new h,s.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var v=o[C];return v||(v=o[C]=new h(C,s.methodFactory)),v};var p=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=p),s},s.getLoggers=function(){return o},s.default=s,s})})(yP);var rH=yP.exports;const iH=Ql(rH);function bn(t){return typeof t=="function"}function xP(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var zm=xP(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function uy(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Xp=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=Hl(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(bn(u))try{u()}catch(g){o=g instanceof zm?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=Hl(d),h=f.next();!h.done;h=f.next()){var p=h.value;try{zS(p)}catch(g){o=o??[],g instanceof zm?o=DC(DC([],_C(o)),_C(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(o)throw new zm(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)zS(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&uy(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&uy(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),IP=Xp.EMPTY;function bP(t){return t instanceof Xp||t&&"closed"in t&&bn(t.remove)&&bn(t.add)&&bn(t.unsubscribe)}function zS(t){bn(t)?t():t.unsubscribe()}var AP={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},wP={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,DC([t,e],_C(n)))},clearTimeout:function(t){var e=wP.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function SP(t){wP.setTimeout(function(){throw t})}function dy(){}function Yh(t){t()}var Px=function(t){fu(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,bP(n)&&n.add(r)):r.destination=cH,r}return e.create=function(n,r,i){return new fy(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Xp),oH=Function.prototype.bind;function jm(t,e){return oH.call(t,e)}var sH=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){lh(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){lh(r)}else lh(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){lh(n)}},t}(),fy=function(t){fu(e,t);function e(n,r,i){var o=t.call(this)||this,s;if(bn(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&AP.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&jm(n.next,a),error:n.error&&jm(n.error,a),complete:n.complete&&jm(n.complete,a)}):s=n}return o.destination=new sH(s),o}return e}(Px);function lh(t){SP(t)}function aH(t){throw t}var cH={closed:!0,next:dy,error:aH,complete:dy},Nx=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function kP(t){return t}function lH(t){return t.length===0?kP:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Wn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=dH(e)?e:new fy(e,n,r);return Yh(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=jS(n),new n(function(i,o){var s=new fy({next:function(a){try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[Nx]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return lH(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=jS(e),new e(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function jS(t){var e;return(e=t??AP.Promise)!==null&&e!==void 0?e:Promise}function uH(t){return t&&bn(t.next)&&bn(t.error)&&bn(t.complete)}function dH(t){return t&&t instanceof Px||uH(t)&&bP(t)}function fH(t){return bn(t==null?void 0:t.lift)}function Ws(t){return function(e){if(fH(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Pc(t,e,n,r,i){return new hH(t,e,n,r,i)}var hH=function(t){fu(e,t);function e(n,r,i,o,s,a){var c=t.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(Px),pH=xP(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Na=function(t){fu(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new HS(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new pH},e.prototype.next=function(n){var r=this;Yh(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Hl(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;Yh(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;Yh(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?IP:(this.currentObservers=null,a.push(n),new Xp(function(){r.currentObservers=null,uy(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},e.prototype.asObservable=function(){var n=new Wn;return n.source=this,n},e.create=function(n,r){return new HS(n,r)},e}(Wn),HS=function(t){fu(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:IP},e}(Na),EP=function(t){fu(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Na);function gH(t){return t&&bn(t.schedule)}function mH(t){return t[t.length-1]}function TP(t){return gH(mH(t))?t.pop():void 0}var RP=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function _P(t){return bn(t==null?void 0:t.then)}function DP(t){return bn(t[Nx])}function PP(t){return Symbol.asyncIterator&&bn(t==null?void 0:t[Symbol.asyncIterator])}function NP(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function vH(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var BP=vH();function FP(t){return bn(t==null?void 0:t[BP])}function OP(t){return CV(this,arguments,function(){var n,r,i,o;return c_(this,function(s){switch(s.label){case 0:n=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,bl(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,bl(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,bl(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function MP(t){return bn(t==null?void 0:t.getReader)}function vu(t){if(t instanceof Wn)return t;if(t!=null){if(DP(t))return CH(t);if(RP(t))return yH(t);if(_P(t))return xH(t);if(PP(t))return LP(t);if(FP(t))return IH(t);if(MP(t))return bH(t)}throw NP(t)}function CH(t){return new Wn(function(e){var n=t[Nx]();if(bn(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function yH(t){return new Wn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function xH(t){return new Wn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,SP)})}function IH(t){return new Wn(function(e){var n,r;try{for(var i=Hl(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function LP(t){return new Wn(function(e){AH(t,e).catch(function(n){return e.error(n)})})}function bH(t){return LP(OP(t))}function AH(t,e){var n,r,i,o;return vV(this,void 0,void 0,function(){var s,a;return c_(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=yV(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function vc(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function UP(t,e){return e===void 0&&(e=0),Ws(function(n,r){n.subscribe(Pc(r,function(i){return vc(r,t,function(){return r.next(i)},e)},function(){return vc(r,t,function(){return r.complete()},e)},function(i){return vc(r,t,function(){return r.error(i)},e)}))})}function VP(t,e){return e===void 0&&(e=0),Ws(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function wH(t,e){return vu(t).pipe(VP(e),UP(e))}function SH(t,e){return vu(t).pipe(VP(e),UP(e))}function kH(t,e){return new Wn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function EH(t,e){return new Wn(function(n){var r;return vc(n,e,function(){r=t[BP](),vc(n,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return bn(r==null?void 0:r.return)&&r.return()}})}function GP(t,e){if(!t)throw new Error("Iterable cannot be null");return new Wn(function(n){vc(n,e,function(){var r=t[Symbol.asyncIterator]();vc(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function TH(t,e){return GP(OP(t),e)}function RH(t,e){if(t!=null){if(DP(t))return wH(t,e);if(RP(t))return kH(t,e);if(_P(t))return SH(t,e);if(PP(t))return GP(t,e);if(FP(t))return EH(t,e);if(MP(t))return TH(t,e)}throw NP(t)}function _H(t,e){return e?RH(t,e):vu(t)}function vr(t,e){return Ws(function(n,r){var i=0;n.subscribe(Pc(r,function(o){r.next(t.call(e,o,i++))}))})}function DH(t,e,n,r,i,o,s,a){var c=[],l=0,u=0,d=!1,f=function(){d&&!c.length&&!l&&e.complete()},h=function(g){return l<r?p(g):c.push(g)},p=function(g){l++;var C=!1;vu(n(g,u++)).subscribe(Pc(e,function(v){e.next(v)},function(){C=!0},void 0,function(){if(C)try{l--;for(var v=function(){var m=c.shift();s||p(m)};c.length&&l<r;)v();f()}catch(m){e.error(m)}}))};return t.subscribe(Pc(e,h,function(){d=!0,f()})),function(){}}function WP(t,e,n){return n===void 0&&(n=1/0),bn(e)?WP(function(r,i){return vr(function(o,s){return e(r,o,i,s)})(vu(t(r,i)))},n):(typeof e=="number"&&(n=e),Ws(function(r,i){return DH(r,i,t,n)}))}function PH(t){return WP(kP,t)}function NH(){return PH(1)}function hy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return NH()(_H(t,TP(t)))}function zP(t,e){return Ws(function(n,r){var i=0;n.subscribe(Pc(r,function(o){return t.call(e,o,i++)&&r.next(o)}))})}function BH(t,e,n,r,i){return function(o,s){var a=n,c=e,l=0;o.subscribe(Pc(s,function(u){var d=l++;c=a?t(c,u,d):(a=!0,u),s.next(c)},i))}}function FH(t){return Ws(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function OH(t,e){return Ws(BH(t,e,arguments.length>=2,!0))}function eo(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=TP(t);return Ws(function(r,i){(n?hy(t,r,n):hy(t,r)).subscribe(i)})}function ZS(t){return Ws(function(e,n){vu(t).subscribe(Pc(n,function(){return n.complete()},dy)),!n.closed&&e.subscribe(n)})}var MH=Object.defineProperty,LH=Object.defineProperties,UH=Object.getOwnPropertyDescriptors,ip=Object.getOwnPropertySymbols,jP=Object.prototype.hasOwnProperty,HP=Object.prototype.propertyIsEnumerable,$S=(t,e,n)=>e in t?MH(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,py=(t,e)=>{for(var n in e||(e={}))jP.call(e,n)&&$S(t,n,e[n]);if(ip)for(var n of ip(e))HP.call(e,n)&&$S(t,n,e[n]);return t},VH=(t,e)=>LH(t,UH(e)),GH=(t,e)=>{var n={};for(var r in t)jP.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ip)for(var r of ip(t))e.indexOf(r)<0&&HP.call(t,r)&&(n[r]=t[r]);return n},zs=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())}),ZP="lk";function Bx(t){return typeof t>"u"?!1:WH(t)||zH(t)}function WH(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function zH(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function jH(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function $P(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(jH(t))return`${t.participant.identity}_${t.source}_placeholder`;if(Bx(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function HH(t){return t instanceof oy}function ZH(t,e){return zs(this,null,function*(){const{x:n,y:r}=yield nH(t,e,{placement:"top",middleware:[Qj(6),tH(),eH({padding:5})]});return{x:n,y:r}})}function $H(t,e){return!t.contains(e.target)}var XH=[ce.ConnectionStateChanged,ce.RoomMetadataChanged,ce.ActiveSpeakersChanged,ce.ConnectionQualityChanged,ce.ParticipantConnected,ce.ParticipantDisconnected,ce.ParticipantPermissionsChanged,ce.ParticipantMetadataChanged,ce.TrackMuted,ce.TrackUnmuted,ce.TrackPublished,ce.TrackUnpublished,ce.TrackStreamStateChanged,ce.TrackSubscriptionFailed,ce.TrackSubscriptionPermissionChanged,ce.TrackSubscriptionStatusChanged],KH=[...XH,ce.LocalTrackPublished,ce.LocalTrackUnpublished],JH=[ue.ConnectionQualityChanged,ue.IsSpeakingChanged,ue.ParticipantMetadataChanged,ue.ParticipantPermissionsChanged,ue.TrackMuted,ue.TrackUnmuted,ue.TrackPublished,ue.TrackUnpublished,ue.TrackStreamStateChanged,ue.TrackSubscriptionFailed,ue.TrackSubscriptionPermissionChanged,ue.TrackSubscriptionStatusChanged];[...JH,ue.LocalTrackPublished,ue.LocalTrackUnpublished];var vt=iH.getLogger("lk-components-js");vt.setDefaultLevel("WARN");function YH(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var qH=[],QH={showChat:!1,unreadMessages:0};function Fx(t,...e){return new Wn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(eo(t))}function Ox(t,e){return new Wn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function eZ(t){return Ox(t,ce.ConnectionStateChanged).pipe(vr(([e])=>e),eo(t.state))}function tZ(t,e,n=!0){var r;const i=()=>zs(this,null,function*(){try{const a=yield ep.getLocalDevices(t,n);o.next(a)}catch(a){e==null||e(a)}}),o=new Na,s=o.pipe(FH(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return hy(ep.getLocalDevices(t,n).catch(a=>e==null?void 0:e(a)),s)}function nZ(t){return Ox(t,ce.DataReceived)}function rZ(t){return Fx(t,ce.AudioPlaybackStatusChanged).pipe(vr(n=>({canPlayAudio:n.canPlaybackAudio})))}function iZ(t){return Fx(t,ce.VideoPlaybackStatusChanged).pipe(vr(n=>({canPlayVideo:n.canPlaybackVideo})))}function oZ(t,e){return Ox(t,ce.ActiveDeviceChanged).pipe(zP(([n])=>n===e),vr(([n,r])=>(vt.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),eo(t.getActiveDevice(e)))}function vi(t){return`${ZP}-${t}`}function sZ(t){const e=gy(t),n=Lx(t.participant).pipe(vr(()=>gy(t)),eo(e));return{className:vi(t.source===ie.Source.Camera||t.source===ie.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function gy(t){if(Bx(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTracks().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackByName(n);if(e)return r.getTrack(e);throw new Error("At least one of source and name needs to be defined")}}function Mx(t,...e){return new Wn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(eo(t))}function Lx(t){return Mx(t,ue.TrackMuted,ue.TrackUnmuted,ue.ParticipantPermissionsChanged,ue.TrackPublished,ue.TrackUnpublished,ue.LocalTrackPublished,ue.LocalTrackUnpublished,ue.MediaDevicesError,ue.TrackSubscriptionStatusChanged).pipe(vr(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:o}=n,s=n.getTrack(ie.Source.Microphone),a=n.getTrack(ie.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:o,cameraTrack:a,microphoneTrack:s,participant:n}}))}function aZ(t){return Mx(t,ue.ParticipantMetadataChanged).pipe(vr(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),eo({name:t.name,identity:t.identity,metadata:t.metadata}))}function cZ(t){return Ux(t,ue.ConnectionQualityChanged).pipe(vr(([n])=>n),eo(t.connectionQuality))}function Ux(t,e){return new Wn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function XP(t){var e,n,r,i;return Mx(t.participant,ue.TrackMuted,ue.TrackUnmuted,ue.TrackSubscribed,ue.TrackUnsubscribed,ue.LocalTrackPublished,ue.LocalTrackUnpublished).pipe(vr(o=>{var s,a;const c=(s=t.publication)!=null?s:o.getTrack(t.source);return(a=c==null?void 0:c.isMuted)!=null?a:!0}),eo((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrack(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function lZ(t){return Ux(t,ue.IsSpeakingChanged).pipe(vr(([e])=>e))}function uZ(t,e={}){var n;let r;const i=new Wn(c=>(r=c,()=>a.unsubscribe())).pipe(eo(Array.from(t.participants.values()))),o=(n=e.additionalRoomEvents)!=null?n:KH,s=Array.from(new Set([ce.ParticipantConnected,ce.ParticipantDisconnected,ce.ConnectionStateChanged,...o])),a=Fx(t,...s).subscribe(c=>r==null?void 0:r.next(Array.from(c.participants.values())));return t.participants.size>0&&(r==null||r.next(Array.from(t.participants.values()))),i}function dZ(t){return Ux(t,ue.ParticipantPermissionsChanged).pipe(vr(()=>t.permissions),eo(t.permissions))}function fZ(t,e,n){const{localParticipant:r}=e,i=(l,u)=>{let d=!1;switch(l){case ie.Source.Camera:d=u.isCameraEnabled;break;case ie.Source.Microphone:d=u.isMicrophoneEnabled;break;case ie.Source.ScreenShare:d=u.isScreenShareEnabled;break}return d},o=Lx(r).pipe(vr(l=>i(t,l.participant)),eo(i(t,r))),s=new Na,a=(l,u)=>zs(this,null,function*(){try{switch(u??(u=n),s.next(!0),t){case ie.Source.Camera:yield r.setCameraEnabled(l??!r.isCameraEnabled,u);break;case ie.Source.Microphone:yield r.setMicrophoneEnabled(l??!r.isMicrophoneEnabled,u);break;case ie.Source.ScreenShare:yield r.setScreenShareEnabled(l??!r.isScreenShareEnabled,u);break;default:break}}finally{s.next(!1)}});return{className:vi("button"),toggle:a,enabledObserver:o,pendingObserver:s.asObservable()}}function hZ(){let t=!1;const e=new Na,n=new Na,r=o=>{n.next(!0),t=o??!t,e.next(t),n.next(!1)};return{className:vi("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function pZ(t,e,n){const r=new EP(void 0),i=e?oZ(e,t):r.asObservable(),o=(a,...c)=>zs(this,[a,...c],function*(l,u={}){var d,f,h;if(e){vt.debug(`Switching active device of kind "${t}" with id ${l}.`),yield e.switchActiveDevice(t,l,u.exact);const p=(d=e.getActiveDevice(t))!=null?d:l;p!==l&&l!=="default"&&vt.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${p}) instead.`);let g;t==="audioinput"?g=(f=e.localParticipant.getTrack(ie.Source.Microphone))==null?void 0:f.track:t==="videoinput"&&(g=(h=e.localParticipant.getTrack(ie.Source.Camera))==null?void 0:h.track);const C=l==="default"&&!g||l==="default"&&(g==null?void 0:g.mediaStreamTrack.label.startsWith("Default"));r.next(C?l:p)}else if(n){yield n.setDeviceId(u.exact?{exact:l}:l);const p=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:p)}else r.value!==l&&(vt.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:vi("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}}function gZ(t){const e=r=>{t.disconnect(r)};return{className:vi("disconnect-button"),disconnect:e}}function mZ(t){const e=vi("connection-quality"),n=cZ(t);return{className:e,connectionQualityObserver:n}}function vZ(t){let e="track-muted-indicator-camera";switch(t.source){case ie.Source.Camera:e="track-muted-indicator-camera";break;case ie.Source.Microphone:e="track-muted-indicator-microphone";break}const n=vi(e),r=XP(t);return{className:n,mediaMutedObserver:r}}function CZ(t){return{className:"lk-participant-name",infoObserver:aZ(t)}}function yZ(){return{className:vi("participant-tile")}}var xZ={CHAT:"lk-chat-topic"};function KP(t,e,n){return zs(this,arguments,function*(r,i,o,s={}){const{kind:a,destination:c}=s;yield r.publishData(i,a??vn.RELIABLE,{destination:c,topic:o})})}function IZ(t,e,n){const r=nZ(t).pipe(zP(([,,,a])=>e===void 0||a===e),vr(([a,c,,l])=>({payload:a,topic:l,from:c})));let i;const o=new Wn(a=>{i=a});return{messageObservable:r,isSendingObservable:o,send:(a,...c)=>zs(this,[a,...c],function*(l,u={}){i.next(!0);try{yield KP(t.localParticipant,l,e,u)}finally{i.next(!1)}})}}var bZ=new TextEncoder,AZ=new TextDecoder,uh=new Map,wZ=t=>bZ.encode(JSON.stringify({message:t.message,timestamp:t.timestamp})),SZ=t=>JSON.parse(AZ.decode(t));function kZ(t,e){var n,r;const i=new Na,{messageDecoder:o,messageEncoder:s,channelTopic:a}=e??{},c=a??xZ.CHAT;let l=!1;uh.has(t)||(l=!0);const u=(n=uh.get(t))!=null?n:new Map,d=(r=u.get(c))!=null?r:new Na;if(u.set(c,d),uh.set(t,u),l){const{messageObservable:m}=IZ(t,c);m.pipe(ZS(i)).subscribe(d)}const f=o??SZ,h=d.pipe(vr(m=>{const y=f(m.payload);return VH(py({},y),{from:m.from})}),OH((m,y)=>[...m,y],[]),ZS(i)),p=new EP(!1),g=s??wZ,C=m=>zs(this,null,function*(){const y=Date.now(),I=g({message:m,timestamp:y});p.next(!0);try{yield KP(t.localParticipant,I,c,{kind:vn.RELIABLE}),d.next({payload:I,topic:c,from:t.localParticipant})}finally{p.next(!1)}});function v(){i.next(),i.complete(),uh.clear()}return t.once(ce.Disconnected,v),{messageObservable:h,isSendingObservable:p,send:C}}function EZ(){const t=n=>zs(this,null,function*(){vt.info("Start Audio for room: ",n),yield n.startAudio()});return{className:vi("start-audio-button"),roomAudioPlaybackAllowedObservable:rZ,handleStartAudioPlayback:t}}function TZ(){const t=n=>zs(this,null,function*(){vt.info("Start Video for room: ",n),yield n.startVideo()});return{className:vi("start-audio-button"),roomVideoPlaybackAllowedObservable:iZ,handleStartVideoPlayback:t}}function RZ(){return{className:[vi("button"),vi("chat-toggle")].join(" ")}}function _Z(){return{className:"lk-room-container"}}function DZ(t,e){if(typeof localStorage>"u"){vt.error("Local storage is not available.");return}try{localStorage.setItem(t,JSON.stringify(e))}catch(n){vt.error(`Error setting item to local storage: ${n}`)}}function PZ(t){if(typeof localStorage>"u"){vt.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){vt.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){vt.error(`Error getting item from local storage: ${e}`);return}}function NZ(t){return{load:()=>PZ(t),save:e=>DZ(t,e)}}var BZ=`${ZP}-user-choices`,Za={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:"",e2ee:!1,sharedPassphrase:""},{load:FZ,save:OZ}=NZ(BZ);function MZ(t,e=!1){if(e===!0)return;const n=t,r=GH(n,["e2ee","sharedPassphrase"]);OZ(r)}function LZ(t,e=!1){var n,r,i,o,s,a,c;const l={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:Za.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:Za.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:Za.videoDeviceId,audioDeviceId:(o=t==null?void 0:t.audioDeviceId)!=null?o:Za.audioDeviceId,username:(s=t==null?void 0:t.username)!=null?s:Za.username,e2ee:(a=t==null?void 0:t.e2ee)!=null?a:Za.e2ee,sharedPassphrase:(c=t==null?void 0:t.sharedPassphrase)!=null?c:Za.sharedPassphrase};if(e)return l;{const u=FZ();return py(py({},l),u??{})}}function JP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=JP(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function UZ(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=JP(t))&&(r&&(r+=" "),r+=e);return r}var VZ=Object.defineProperty,GZ=Object.defineProperties,WZ=Object.getOwnPropertyDescriptors,op=Object.getOwnPropertySymbols,YP=Object.prototype.hasOwnProperty,qP=Object.prototype.propertyIsEnumerable,XS=(t,e,n)=>e in t?VZ(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oe=(t,e)=>{for(var n in e||(e={}))YP.call(e,n)&&XS(t,n,e[n]);if(op)for(var n of op(e))qP.call(e,n)&&XS(t,n,e[n]);return t},Yn=(t,e)=>GZ(t,WZ(e)),zn=(t,e)=>{var n={};for(var r in t)YP.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&op)for(var r of op(t))e.indexOf(r)<0&&qP.call(t,r)&&(n[r]=t[r]);return n},QP=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});function Qr(t,e){const[n,r]=S.useState(e);return S.useEffect(()=>{if(typeof window>"u"||!t)return;const i=t.subscribe(r);return()=>i.unsubscribe()},[t]),n}function zZ(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=S.useState(e(t));function i(){r(e(t))}return S.useEffect(()=>{const o=window.matchMedia(t);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[t]),n}function jZ(t,e){if(e.msg==="show_chat")return Yn(Oe({},t),{showChat:!0,unreadMessages:0});if(e.msg==="hide_chat")return Yn(Oe({},t),{showChat:!1});if(e.msg==="toggle_chat"){const n=Yn(Oe({},t),{showChat:!t.showChat});return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?Yn(Oe({},t),{unreadMessages:e.count}):Oe({},t)}function HZ(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:Oe({},t)}var Vx=S.createContext(void 0);function ZZ(){const t=S.useContext(Vx);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function $Z(t){const[e,n]=S.useReducer(HZ,qH),[r,i]=S.useReducer(jZ,QH);return t??{pin:{dispatch:n,state:e},widget:{dispatch:i,state:r}}}function e3(){return S.useContext(Vx)}var XZ=S.createContext(void 0);function Rf(){return S.useContext(XZ)}var Gx=S.createContext(void 0);function Kp(){return S.useContext(Gx)}function Gc(t){var e;const n=Kp(),r=Rf(),i=(e=t??n)!=null?e:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var Wx=S.createContext(void 0);function Jp(){const t=S.useContext(Wx);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Yp(){return S.useContext(Wx)}function _f(t){const e=Yp(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var KZ=S.createContext(void 0);function JZ(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}function za(...t){const e=Oe({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const o=e[i],s=r[i];typeof o=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=JZ(o,s):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?e[i]=UZ(o,s):e[i]=s!==void 0?s:o}}return e}function YZ(t={}){const e=Gc(t.participant),{className:n,connectionQualityObserver:r}=S.useMemo(()=>mZ(e),[e]),i=Qr(r,ai.Unknown);return{className:n,quality:i}}function qZ(t){const e=_f(t),n=S.useMemo(()=>eZ(e),[e]);return Qr(n,e.state)}function QZ(t){const e=Jp(),n=qZ(e);return{buttonProps:S.useMemo(()=>{const{className:i,disconnect:o}=gZ(e);return za(t,{className:i,onClick:()=>{var a;return o((a=t.stopTracks)!=null?a:!0)},disabled:n===ft.Disconnected})},[e,t,n])}}function e$(t){if(t.publication instanceof sf){const e=t.publication.track;if(e){const{facingMode:n}=xj(e);return n}}return"undefined"}function KS(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,o=Gc(i),s=typeof t=="string"?{participant:o,source:t}:t,[a,c]=S.useState(!!((n=s.publication)!=null&&n.isMuted||(r=o.getTrack(s.source))!=null&&r.isMuted));return S.useEffect(()=>{const l=XP(s).subscribe(c);return()=>l.unsubscribe()},[$P(s)]),a}function t$(t){const e=Gc(t),n=S.useMemo(()=>lZ(e),[e]);return Qr(n,e.isSpeaking)}var n$={connect:!0,audio:!1,video:!1};function r$(t){const e=Oe(Oe({},n$),t),{token:n,serverUrl:r,options:i,room:o,connectOptions:s,connect:a,audio:c,video:l,screen:u,onConnected:d,onDisconnected:f,onError:h,onMediaDeviceFailure:p,onEncryptionError:g,simulateParticipants:C}=e,v=zn(e,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&o&&vt.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[m,y]=S.useState();S.useEffect(()=>{y(o??new ep(i))},[o]);const I=S.useMemo(()=>{const{className:b}=_Z();return za(v,{className:b})},[v]);return S.useEffect(()=>{if(!m)return;const b=()=>{const k=m.localParticipant;vt.debug("trying to publish local tracks"),Promise.all([k.setMicrophoneEnabled(!!c,typeof c!="boolean"?c:void 0),k.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),k.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(D=>{vt.warn(D),h==null||h(D)})},A=k=>{const D=rf.getFailure(k);p==null||p(D)},E=k=>{g==null||g(k)};return m.on(ce.SignalConnected,b).on(ce.MediaDevicesError,A).on(ce.EncryptionError,E),()=>{m.off(ce.SignalConnected,b).off(ce.MediaDevicesError,A).off(ce.EncryptionError,E)}},[m,c,l,u,h,g,p]),S.useEffect(()=>{if(m){if(C){m.simulateParticipants({participants:{count:C},publish:{audio:!0,useRealTracks:!0}});return}if(!n){vt.debug("no token yet");return}if(!r){vt.warn("no livekit url provided"),h==null||h(Error("no livekit url provided"));return}a?(vt.debug("connecting"),m.connect(r,n,s).catch(b=>{vt.warn(b),h==null||h(b)})):(vt.debug("disconnecting because connect is false"),m.disconnect())}},[a,n,JSON.stringify(s),m,h,r,C]),S.useEffect(()=>{if(!m)return;const b=A=>{switch(A){case ft.Disconnected:f&&f();break;case ft.Connected:d&&d();break}};return m.on(ce.ConnectionStateChanged,b),()=>{m.off(ce.ConnectionStateChanged,b)}},[n,d,f,m]),S.useEffect(()=>{if(m)return()=>{vt.info("disconnecting on onmount"),m.disconnect()}},[m]),{room:m,htmlProps:I}}function i$(t={}){const e=_f(t.room),[n,r]=S.useState(e.localParticipant),[i,o]=S.useState(n.isMicrophoneEnabled),[s,a]=S.useState(n.isMicrophoneEnabled),[c,l]=S.useState(n.lastMicrophoneError),[u,d]=S.useState(n.lastCameraError),[f,h]=S.useState(n.isMicrophoneEnabled),[p,g]=S.useState(void 0),[C,v]=S.useState(void 0),m=y=>{a(y.isCameraEnabled),o(y.isMicrophoneEnabled),h(y.isScreenShareEnabled),v(y.cameraTrack),g(y.microphoneTrack),l(y.participant.lastMicrophoneError),d(y.participant.lastCameraError),r(y.participant)};return S.useEffect(()=>{const y=Lx(n).subscribe(m);return()=>y.unsubscribe()},[n]),{isMicrophoneEnabled:i,isScreenShareEnabled:f,isCameraEnabled:s,microphoneTrack:p,cameraTrack:C,lastMicrophoneError:c,lastCameraError:u,localParticipant:n}}function o$(){const t=Jp(),e=S.useMemo(()=>dZ(t.localParticipant),[t]);return Qr(e,t.localParticipant.permissions)}function s$({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const o=Yp(),s=S.useMemo(()=>tZ(t,i,r),[t,r,i]),a=Qr(s,[]),[c,l]=S.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:f}=S.useMemo(()=>pZ(t,e??o,n),[t,e,o,n]);return S.useEffect(()=>{const h=d.subscribe(p=>{vt.info("setCurrentDeviceId",p),p&&l(p)});return()=>{h==null||h.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:c,setActiveMediaDevice:f}}function a$(t){return t!==void 0}function Cu(...t){return za(...t.filter(a$))}function t3(t,e,n){return S.Children.map(t,r=>S.isValidElement(r)&&S.Children.only(t)?S.cloneElement(r,Yn(Oe({},e),{key:n})):r)}function n3(t,e={}){var n;const[r,i]=S.useState(gy(t)),[o,s]=S.useState(r==null?void 0:r.isMuted),[a,c]=S.useState(r==null?void 0:r.isSubscribed),[l,u]=S.useState(r==null?void 0:r.track),[d,f]=S.useState("landscape"),h=S.useRef(),{className:p,trackObserver:g}=S.useMemo(()=>sZ(t),[(n=t.participant.sid)!=null?n:t.participant.identity,t.source,Bx(t)&&t.publication.trackSid]);return S.useEffect(()=>{const C=g.subscribe(v=>{vt.debug("update track",v),i(v),s(v==null?void 0:v.isMuted),c(v==null?void 0:v.isSubscribed),u(v==null?void 0:v.track)});return()=>C==null?void 0:C.unsubscribe()},[g]),S.useEffect(()=>{var C,v;return l&&(h.current&&l.detach(h.current),(C=e.element)!=null&&C.current&&!(HH(t.participant)&&(l==null?void 0:l.kind)==="audio")&&l.attach(e.element.current)),h.current=(v=e.element)==null?void 0:v.current,()=>{h.current&&(l==null||l.detach(h.current))}},[l,e.element]),S.useEffect(()=>{var C,v;if(typeof((C=r==null?void 0:r.dimensions)==null?void 0:C.width)=="number"&&typeof((v=r==null?void 0:r.dimensions)==null?void 0:v.height)=="number"){const m=r.dimensions.width>r.dimensions.height?"landscape":"portrait";f(m)}},[r]),{publication:r,isMuted:o,isSubscribed:a,track:l,elementProps:Cu(e.props,Oe({className:p,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}function c$({trackRef:t,participant:e,source:n,publication:r,onParticipantClick:i,disableSpeakingIndicator:o,htmlProps:s}){const a=Rf(),c=Gc(e),l=S.useMemo(()=>{var g,C,v,m,y,I;const b=(C=(g=t==null?void 0:t.source)!=null?g:a==null?void 0:a.source)!=null?C:n;if(b===void 0)throw new Error("Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.");return{participant:(m=(v=t==null?void 0:t.participant)!=null?v:a==null?void 0:a.participant)!=null?m:c,publication:(I=(y=t==null?void 0:t.publication)!=null?y:a==null?void 0:a.publication)!=null?I:r,source:b}},[t==null?void 0:t.participant,t==null?void 0:t.source,t==null?void 0:t.publication,a==null?void 0:a.participant,a==null?void 0:a.source,a==null?void 0:a.publication,c,n,r]),u=S.useMemo(()=>{const{className:g}=yZ();return za(s,{className:g,onClick:C=>{var v,m;if((v=s.onClick)==null||v.call(s,C),typeof i=="function"){const y=(m=l.publication)!=null?m:l.participant.getTrack(l.source);i({participant:l.participant,track:y})}}})},[s,i,l.publication,l.source,l.participant]),d=KS(ie.Source.Camera,{participant:l.participant}),f=KS(ie.Source.Microphone,{participant:l.participant}),h=t$(l.participant),p=e$(l);return{elementProps:Oe({"data-lk-audio-muted":f,"data-lk-video-muted":d,"data-lk-speaking":o===!0?!1:h,"data-lk-local-participant":l.participant.isLocal,"data-lk-source":l.source,"data-lk-facing-mode":p},u)}}function l$(t={}){const e=_f(t.room),[n,r]=S.useState([]);return S.useEffect(()=>{const i=uZ(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(r);return()=>i.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function u$(t={}){const e=l$(t),{localParticipant:n}=i$(t);return[n,...e]}function d$({room:t,props:e}){const n=_f(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=S.useMemo(()=>EZ(),[]),s=S.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=Qr(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:S.useMemo(()=>za(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayAudio:a}}function f$({room:t,props:e}){const n=_f(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=S.useMemo(()=>TZ(),[]),s=S.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=Qr(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:S.useMemo(()=>za(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayVideo:a}}function h$({props:t}){const{dispatch:e,state:n}=ZZ().widget,{className:r}=S.useMemo(()=>RZ(),[]);return{mergedProps:S.useMemo(()=>za(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function p$(t,e={}){var n,r,i,o;let s=Rf();const a=(r=(n=Kp())!=null?n:e.participant)!=null?r:s==null?void 0:s.participant;if(typeof t=="string"){if(!a)throw Error("Participant missing, either provide it via context or pass it in directly");s={participant:a,source:t}}else if(t)s=t;else throw Error("No track reference found, either provide it via context or pass it in directly");const{className:c,mediaMutedObserver:l}=S.useMemo(()=>vZ(s),[$P(s)]);return{isMuted:Qr(l,!!((i=s.publication)!=null&&i.isMuted||(o=s.participant.getTrack(s.source))!=null&&o.isMuted)),className:c}}function g$(t){var e=t,{source:n,onChange:r,initialState:i,captureOptions:o}=e,s=zn(e,["source","onChange","initialState","captureOptions"]),a;const c=Yp(),l=(a=c==null?void 0:c.localParticipant)==null?void 0:a.getTrack(n),{toggle:u,className:d,pendingObserver:f,enabledObserver:h}=S.useMemo(()=>c?fZ(n,c,o):hZ(),[c,n,JSON.stringify(o)]),p=Qr(f,!1),g=Qr(h,i??!!(l!=null&&l.isEnabled));S.useEffect(()=>{r==null||r(g)},[g,r]),S.useEffect(()=>{i!==void 0&&(vt.debug("forcing initial toggle state",n,i),u(i))},[]);const C=S.useMemo(()=>za(s,{className:d}),[s,d]),v=S.useCallback(m=>{var y;u(),(y=s.onClick)==null||y.call(s,m)},[s,u]);return{toggle:u,enabled:g,pending:p,track:l,buttonProps:Yn(Oe({},C),{"aria-pressed":g,"data-lk-source":n,"data-lk-enabled":g,disabled:p,onClick:v})}}function m$(t,e={}){return n3(t,e)}function v$(t){const e=Jp(),[n,r]=S.useState(),i=Qr(n==null?void 0:n.isSendingObservable,!1),o=Qr(n==null?void 0:n.messageObservable,[]);return S.useEffect(()=>{const s=kZ(e,t);r(s)},[e,t]),{send:n==null?void 0:n.send,chatMessages:o,isSending:i}}function C$(t={}){var e;const[n,r]=S.useState(LZ(t.defaults,(e=t.preventLoad)!=null?e:!1)),i=S.useCallback(l=>{r(u=>Yn(Oe({},u),{audioEnabled:l}))},[]),o=S.useCallback(l=>{r(u=>Yn(Oe({},u),{videoEnabled:l}))},[]),s=S.useCallback(l=>{r(u=>Yn(Oe({},u),{audioDeviceId:l}))},[]),a=S.useCallback(l=>{r(u=>Yn(Oe({},u),{videoDeviceId:l}))},[]),c=S.useCallback(l=>{r(u=>Yn(Oe({},u),{username:l}))},[]);return S.useEffect(()=>{var l;MZ(n,(l=t.preventSave)!=null?l:!1)},[n,t.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:o,saveAudioInputDeviceId:s,saveVideoInputDeviceId:a,saveUsername:c}}function y$(t){const{mergedProps:e}=h$({props:t});return S.createElement("button",Oe({},e),t.children)}function x$(t){const{buttonProps:e}=QZ(t);return S.createElement("button",Oe({},e),t.children)}var I$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),S.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),b$=I$,A$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),w$=A$,S$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),k$=S$,E$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),T$=E$,R$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),S.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),_$=R$,D$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),S.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),P$=D$,N$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),B$=N$,F$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("g",{opacity:.25},S.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),O$=F$,M$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("g",{opacity:.25},S.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),L$=M$,U$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("g",{opacity:.25},S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),V$=U$,G$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),W$=G$,z$=t=>S.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),S.createElement("g",{fill:"currentColor"},S.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),S.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),j$=z$;function Hm(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,onDeviceListChange:o,onDeviceSelectError:s,exactMatch:a,track:c,requestPermissions:l,onError:u}=e,d=zn(e,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const f=Yp(),h=S.useCallback(b=>{f&&f.emit(ce.MediaDevicesError,b),u==null||u(b)},[f,u]),{devices:p,activeDeviceId:g,setActiveMediaDevice:C,className:v}=s$({kind:n,room:f,track:c,requestPermissions:l,onError:h});S.useEffect(()=>{r!==void 0&&C(r)},[C]),S.useEffect(()=>{typeof o=="function"&&o(p)},[o,p]),S.useEffect(()=>{g&&g!==""&&(i==null||i(g))},[g]);const m=b=>QP(this,null,function*(){try{yield C(b,{exact:a})}catch(A){if(A instanceof Error)s==null||s(A);else throw A}}),y=S.useMemo(()=>Cu(d,{className:v},{className:"lk-list"}),[v,d]);function I(b,A,E){return b===A||E===0&&A==="default"}return S.createElement("ul",Oe({},y),p.map((b,A)=>S.createElement("li",{key:b.deviceId,id:b.deviceId,"data-lk-active":I(b.deviceId,g,A),"aria-selected":I(b.deviceId,g,A),role:"option"},S.createElement("button",{className:"lk-button",onClick:()=>m(b.deviceId)},b.label))))}function r3(t,e){switch(t){case ie.Source.Microphone:return e?S.createElement(P$,null):S.createElement(_$,null);case ie.Source.Camera:return e?S.createElement(w$,null):S.createElement(b$,null);case ie.Source.ScreenShare:return e?S.createElement(j$,null):S.createElement(W$,null);default:return}}function H$(t){switch(t){case ai.Excellent:return S.createElement(B$,null);case ai.Good:return S.createElement(O$,null);case ai.Poor:return S.createElement(L$,null);default:return S.createElement(V$,null)}}function Zm(t){var e=t,{showIcon:n}=e,r=zn(e,["showIcon"]);const{buttonProps:i,enabled:o}=g$(r);return S.createElement("button",Oe({},i),(n??!0)&&r3(r.source,o),r.children)}function Z$(t){var e;const{className:n,quality:r}=YZ(t),i=S.useMemo(()=>Yn(Oe({},Cu(t,{className:n})),{"data-lk-quality":r}),[r,t,n]);return S.createElement("div",Oe({},i),(e=t.children)!=null?e:H$(r))}function $$(t){var e=t,{participant:n}=e,r=zn(e,["participant"]);const i=Gc(n),{className:o,infoObserver:s}=S.useMemo(()=>CZ(i),[i]),{identity:a,name:c}=Qr(s,{name:i.name,identity:i.identity,metadata:i.metadata}),l=S.useMemo(()=>Cu(r,{className:o,"data-lk-participant-name":c}),[r,o,c]);return S.createElement("span",Oe({},l),c!==""?c:a,r.children)}function X$(t){var e=t,{source:n,participant:r,trackRef:i,show:o="always"}=e,s=zn(e,["source","participant","trackRef","show"]),a,c;const{className:l,isMuted:u}=p$(i??n,{participant:r}),d=o==="always"||o==="muted"&&u||o==="unmuted"&&!u,f=S.useMemo(()=>Cu(s,{className:l}),[l,s]);return d?S.createElement("div",Yn(Oe({},f),{"data-lk-muted":u}),(c=s.children)!=null?c:r3((a=i==null?void 0:i.source)!=null?a:n,!u)):null}function K$(t){var e=t,{trackRef:n,onSubscriptionStatusChanged:r,volume:i,source:o,name:s,publication:a,participant:c}=e,l=zn(e,["trackRef","onSubscriptionStatusChanged","volume","source","name","publication","participant"]),u,d,f,h,p,g,C,v,m,y;const I=Rf(),b=(h=(f=(u=n==null?void 0:n.publication)==null?void 0:u.trackName)!=null?f:(d=I==null?void 0:I.publication)==null?void 0:d.trackName)!=null?h:s,A=(g=(p=n==null?void 0:n.source)!=null?p:I==null?void 0:I.source)!=null?g:o,E=(v=(C=n==null?void 0:n.publication)!=null?C:I==null?void 0:I.publication)!=null?v:a,k=(y=(m=n==null?void 0:n.participant)!=null?m:I==null?void 0:I.participant)!=null?y:c;if(A===void 0)throw new Error("The AudioTrack component expects a trackRef or source property.");const D=S.useRef(null),T=Gc(k),{elementProps:R,isSubscribed:P,track:M,publication:G}=n3({source:A,name:b,participant:T,publication:E},{element:D,props:l});return S.useEffect(()=>{r==null||r(!!P)},[P,r]),S.useEffect(()=>{M===void 0||i===void 0||(M instanceof mc?M.setVolume(i):vt.warn("Volume can only be set on remote audio tracks."))},[i,M]),S.useEffect(()=>{G===void 0||l.muted===void 0||(G instanceof Tx?G.setEnabled(!l.muted):vt.warn("Can only call setEnabled on remote track publications."))},[l.muted,G,M]),S.createElement("audio",Oe({ref:D},R))}function J$(t){const e=!!Kp();return t.participant&&!e?S.createElement(Gx.Provider,{value:t.participant},t.children):S.createElement(S.Fragment,null,t.children)}function Y$({value:t,onPinChange:e,onWidgetChange:n,children:r}){const i=$Z(t);return S.useEffect(()=>{vt.debug("PinState Updated",{state:i.pin.state}),e&&i.pin.state&&e(i.pin.state)},[i.pin.state,e]),S.useEffect(()=>{vt.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),S.createElement(Vx.Provider,{value:i},r)}function q$(t){const{room:e,htmlProps:n}=r$(t);return S.createElement("div",Oe({},n),e&&S.createElement(Wx.Provider,{value:e},S.createElement(KZ.Provider,{value:t.featureFlags},t.children)))}function Q$(t){var e=t,{participant:n,trackRef:r}=e,i=zn(e,["participant","trackRef"]),o,s;const[a,c]=S.useState([]),l=200,u=90,d=6,f=4,h=50,p=7,g=(o=Kp())!=null?o:n;let C=(s=Rf())!=null?s:r;if(!C){if(!g)throw Error("Participant missing, provide it directly or within a context");C={participant:g,source:ie.Source.Microphone}}const{track:v}=m$(C);return S.useEffect(()=>{if(!v||!(v instanceof Ir||v instanceof mc))return;const{analyser:m,cleanup:y}=Ez(v,{smoothingTimeConstant:.8,fftSize:64}),I=new Uint8Array(m.frequencyBinCount),b=()=>{m.getByteFrequencyData(I);const E=new Array(p).fill(0);I.slice(1);const k=6;for(let D=0;D<p/2;D+=1){const T=Math.floor(p/2-D);for(let R=0;R<k;R+=1)E[T]+=Math.pow(I[D*k+R]/255,2);E[T]/=k}for(let D=0;D<p/2;D+=1){const T=Math.floor(p/2+D);if(E[T]===0){for(let R=0;R<k;R+=1)E[T]+=Math.pow(I[D*k+R]/255,2);E[T]/=k}}return E.map(D=>D*h)},A=setInterval(()=>{const E=b();c(E)},100);return()=>{clearInterval(A),y()}},[v]),S.createElement("svg",Yn(Oe({width:"100%",height:"100%",viewBox:`0 0 ${l} ${u}`},i),{className:"lk-audio-visualizer"}),S.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),S.createElement("g",{style:{transform:`translate(${(l-p*(d+f))/2}px, 0)`}},a.map((m,y)=>S.createElement("rect",{key:y,x:y*(d+f),y:u/2-m/2,width:d,height:m}))))}function eX(t){var e=t,{participants:n}=e,r=zn(e,["participants"]);return S.createElement(S.Fragment,null,n.map(i=>S.createElement(Gx.Provider,{value:i,key:i.identity},t3(r.children))))}function tX(t){var e=t,{participant:n,children:r,source:i,publication:o,disableSpeakingIndicator:s,onParticipantClick:a}=e,c=zn(e,["participant","children","source","publication","disableSpeakingIndicator","onParticipantClick"]);const l=Gc(n),{elementProps:u}=c$({participant:l,htmlProps:c,disableSpeakingIndicator:s,source:ie.Source.Microphone,publication:o,onParticipantClick:a});return S.createElement("div",Oe({style:{position:"relative"}},u),S.createElement(J$,{participant:l},r??S.createElement(S.Fragment,null,S.createElement(K$,{source:i??ie.Source.Microphone}),S.createElement(Q$,null),S.createElement("div",{className:"lk-participant-metadata"},S.createElement("div",{className:"lk-participant-metadata-item"},S.createElement(X$,{source:ie.Source.Microphone}),S.createElement($$,null)),S.createElement(Z$,{className:"lk-participant-metadata-item"})))))}function nX(t){var e=t,{entry:n,hideName:r=!1,hideTimestamp:i=!1,messageFormatter:o}=e,s=zn(e,["entry","hideName","hideTimestamp","messageFormatter"]),a,c,l,u;const d=S.useMemo(()=>o?o(n.message):n.message,[n.message,o]),f=new Date(n.timestamp),h=navigator?navigator.language:"en-US";return S.createElement("li",Oe({className:"lk-chat-entry",title:f.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":(a=n.from)!=null&&a.isLocal?"local":"remote"},s),(!i||!r)&&S.createElement("span",{className:"lk-meta-data"},!r&&S.createElement("strong",{className:"lk-participant-name"},(u=(c=n.from)==null?void 0:c.name)!=null?u:(l=n.from)==null?void 0:l.identity),!i&&S.createElement("span",{className:"lk-timestamp"},f.toLocaleTimeString(h,{timeStyle:"short"}))),S.createElement("span",{className:"lk-message-body"},d))}function rX(t){var e=t,{messageFormatter:n,messageDecoder:r,messageEncoder:i,channelTopic:o}=e,s=zn(e,["messageFormatter","messageDecoder","messageEncoder","channelTopic"]);const a=S.useRef(null),c=S.useRef(null),l=S.useMemo(()=>({messageDecoder:r,messageEncoder:i,channelTopic:o}),[r,i,o]),{send:u,chatMessages:d,isSending:f}=v$(l),h=e3(),p=S.useRef(0);function g(C){return QP(this,null,function*(){C.preventDefault(),a.current&&a.current.value.trim()!==""&&u&&(yield u(a.current.value),a.current.value="",a.current.focus())})}return S.useEffect(()=>{var C;c&&((C=c.current)==null||C.scrollTo({top:c.current.scrollHeight}))},[c,d]),S.useEffect(()=>{var C,v,m,y,I;if(!h||d.length===0)return;if((C=h.widget.state)!=null&&C.showChat&&d.length>0&&p.current!==((v=d[d.length-1])==null?void 0:v.timestamp)){p.current=(m=d[d.length-1])==null?void 0:m.timestamp;return}const b=d.filter(E=>!p.current||E.timestamp>p.current).length,{widget:A}=h;b>0&&((y=A.state)==null?void 0:y.unreadMessages)!==b&&((I=A.dispatch)==null||I.call(A,{msg:"unread_msg",count:b}))},[d,h==null?void 0:h.widget]),S.createElement("div",Yn(Oe({},s),{className:"lk-chat"}),S.createElement("ul",{className:"lk-list lk-chat-messages",ref:c},s.children?d.map((C,v)=>t3(s.children,{entry:C,key:v,messageFormatter:n})):d.map((C,v,m)=>{const y=v>=1&&m[v-1].from===C.from,I=v>=1&&C.timestamp-m[v-1].timestamp<6e4;return S.createElement(nX,{key:v,hideName:y,hideTimestamp:y===!1?!1:I,entry:C,messageFormatter:n})})),S.createElement("form",{className:"lk-chat-form",onSubmit:g},S.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:f,ref:a,type:"text",placeholder:"Enter a message..."}),S.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:f},"Send")))}function JS(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:o,requestPermissions:s=!1}=e,a=zn(e,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[c,l]=S.useState(!1),[u,d]=S.useState([]),[f,h]=S.useState(!0),p=(m,y)=>{vt.debug("handle device change"),l(!1),i==null||i(m,y)},g=S.useRef(null),C=S.useRef(null);S.useLayoutEffect(()=>{g.current&&C.current&&(u||f)&&ZH(g.current,C.current).then(({x:m,y})=>{C.current&&Object.assign(C.current.style,{left:`${m}px`,top:`${y}px`})}),h(!1)},[g,C,u,f]);const v=S.useCallback(m=>{C.current&&m.target!==g.current&&c&&$H(C.current,m)&&l(!1)},[c,C,g]);return S.useEffect(()=>(document.addEventListener("click",v),window.addEventListener("resize",()=>h(!0)),()=>{document.removeEventListener("click",v),window.removeEventListener("resize",()=>h(!0))}),[v,h]),S.createElement(S.Fragment,null,S.createElement("button",Yn(Oe({className:"lk-button lk-button-menu","aria-pressed":c},a),{onClick:()=>l(!c),ref:g}),a.children),!a.disabled&&S.createElement("div",{className:"lk-device-menu",ref:C,style:{visibility:c?"visible":"hidden"}},n?S.createElement(Hm,{initialSelection:r,onActiveDeviceChange:m=>p(n,m),onDeviceListChange:d,kind:n,track:o==null?void 0:o[n],requestPermissions:s}):S.createElement(S.Fragment,null,S.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),S.createElement(Hm,{kind:"audioinput",onActiveDeviceChange:m=>p("audioinput",m),onDeviceListChange:d,track:o==null?void 0:o.audioinput,requestPermissions:s}),S.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),S.createElement(Hm,{kind:"videoinput",onActiveDeviceChange:m=>p("videoinput",m),onDeviceListChange:d,track:o==null?void 0:o.videoinput,requestPermissions:s}))))}function iX(t){var e=t,{label:n}=e,r=zn(e,["label"]);const i=Jp(),{mergedProps:o,canPlayAudio:s}=d$({room:i,props:r}),{mergedProps:a,canPlayVideo:c}=f$({room:i,props:o}),l=a,{style:u}=l,d=zn(l,["style"]);return u.display=s&&c?"none":"block",S.createElement("button",Oe({style:u},d),n??`Start ${s?"Video":"Audio"}`)}function oX(t){var e=t,{variation:n,controls:r,saveUserChoices:i=!0}=e,o=zn(e,["variation","controls","saveUserChoices"]),s,a,c,l,u;const[d,f]=S.useState(!1),h=e3();S.useEffect(()=>{var M,G;((M=h==null?void 0:h.widget.state)==null?void 0:M.showChat)!==void 0&&f((G=h==null?void 0:h.widget.state)==null?void 0:G.showChat)},[(s=h==null?void 0:h.widget.state)==null?void 0:s.showChat]);const g=zZ(`(max-width: ${d?1e3:760}px)`)?"minimal":"verbose";n??(n=g);const C=Oe({leave:!0},r),v=o$();v?((a=C.camera)!=null||(C.camera=v.canPublish),(c=C.microphone)!=null||(C.microphone=v.canPublish),(l=C.screenShare)!=null||(C.screenShare=v.canPublish),(u=C.chat)!=null||(C.chat=v.canPublishData&&(r==null?void 0:r.chat))):(C.camera=!1,C.chat=!1,C.microphone=!1,C.screenShare=!1);const m=S.useMemo(()=>n==="minimal"||n==="verbose",[n]),y=S.useMemo(()=>n==="textOnly"||n==="verbose",[n]),I=YH(),[b,A]=S.useState(!1),E=M=>{A(M)},k=Cu({className:"lk-control-bar"},o),{saveAudioInputEnabled:D,saveVideoInputEnabled:T,saveAudioInputDeviceId:R,saveVideoInputDeviceId:P}=C$({preventSave:!i});return S.createElement("div",Oe({},k),C.microphone&&S.createElement("div",{className:"lk-button-group"},S.createElement(Zm,{source:ie.Source.Microphone,showIcon:m,onChange:D},y&&"Microphone"),S.createElement("div",{className:"lk-button-group-menu"},S.createElement(JS,{kind:"audioinput",onActiveDeviceChange:(M,G)=>R(G??"")}))),C.camera&&S.createElement("div",{className:"lk-button-group"},S.createElement(Zm,{source:ie.Source.Camera,showIcon:m,onChange:T},y&&"Camera"),S.createElement("div",{className:"lk-button-group-menu"},S.createElement(JS,{kind:"videoinput",onActiveDeviceChange:(M,G)=>P(G??"")}))),C.screenShare&&I&&S.createElement(Zm,{source:ie.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:m,onChange:E},y&&(b?"Stop screen share":"Share screen")),C.chat&&S.createElement(y$,null,m&&S.createElement(k$,null),y&&"Chat"),C.leave&&S.createElement(x$,null,m&&S.createElement(T$,null),y&&"Leave"),S.createElement(iX,null))}function sX(t){var e=zn(t,[]);const[n,r]=S.useState({showChat:!1,unreadMessages:0}),i=u$();return S.createElement(Y$,{onWidgetChange:r},S.createElement("div",Oe({className:"lk-audio-conference"},e),S.createElement("div",{className:"lk-audio-conference-stage"},S.createElement(eX,{participants:i},S.createElement(tX,null))),S.createElement(oX,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),n.showChat&&S.createElement(rX,null)))}const aX="wss://mongoose-67t79p35.livekit.cloud",cX=({client:t})=>{const[e,n]=S.useState([]),[r,i]=S.useState(!1);return S.useEffect(()=>{const o=a=>{n(c=>[...c,a]),i(!0)},s=a=>{n(c=>{const l=c.filter(u=>u!==a);return l.length===0&&i(!1),l})};return t.on("livekitToken",o),t.on("livekitLeave",s),()=>{t.off("livekitToken",o),t.off("livekitLeave",s)}},[t]),e.length?Y.jsxs("div",{"data-lk-theme":"default",children:[e.map((o,s)=>Y.jsx(q$,{video:!1,audio:!0,token:o,serverUrl:aX,connect:!0,onDisconnected:()=>t.emit("livekitLeave",o),children:Y.jsx(sX,{})},s)),Y.jsx("div",{className:"audio-status","aria-live":"polite"})]}):null},lX=({onFileChange:t,onRecipientChange:e,onSendFile:n,selectedFile:r,recipient:i})=>{const o=a=>{a.target.files&&a.target.files.length>0&&t(a.target.files[0])},s=a=>{e(a.target.value)};return Y.jsxs("div",{className:"file-transfer-controls",children:[Y.jsx("input",{type:"file",onChange:o}),Y.jsx("input",{type:"text",placeholder:"Recipient",value:i,onChange:s}),Y.jsx("button",{onClick:n,disabled:!r||!i,children:"Send File"})]})},uX=({progress:t})=>Y.jsxs("div",{className:"progress-bar",children:[Y.jsx("progress",{value:t,max:"100"}),Y.jsxs("span",{children:[t.toFixed(2),"%"]})]}),dX=({offer:t,onAccept:e,onReject:n})=>Y.jsxs("div",{className:"incoming-transfer",children:[Y.jsxs("p",{children:["Incoming file: ",t.filename," from ",t.sender]}),Y.jsx("button",{onClick:()=>e(t.sender,t.hash),children:"Accept"}),Y.jsx("button",{onClick:()=>n(t.sender,t.hash),children:"Reject"})]}),fX=({history:t})=>Y.jsxs("div",{className:"transfer-history","aria-live":"polite",children:[Y.jsx("h4",{children:"Transfer History"}),Y.jsx("ul",{children:t.map((e,n)=>Y.jsx("li",{children:e},n))})]}),hX=({client:t,expanded:e})=>{const[n,r]=S.useState(null),[i,o]=S.useState(""),[s,a]=S.useState(0),[c,l]=S.useState(0),[u,d]=S.useState([]),[f,h]=S.useState([]),p=S.useCallback(R=>{h(P=>[...P,R].slice(-10))},[]),g=S.useCallback(R=>{const P=R.sentBytes/R.totalBytes*100;a(P)},[]),C=S.useCallback(R=>{const P=R.receivedBytes/R.totalBytes*100;l(P)},[]),v=S.useCallback(R=>{p(`File sent successfully: ${R.filename}`),a(0)},[p]),m=S.useCallback(R=>{p(`File received successfully: ${R.filename}`),l(0)},[p]),y=S.useCallback(R=>{p(`Error ${R.direction}ing file ${R.filename}: ${R.error}`),R.direction==="send"?a(0):l(0)},[p]),I=S.useCallback(R=>{p(`File transfer cancelled: ${R.filename} (${R.direction})`),R.direction==="send"?a(0):l(0)},[p]),b=S.useCallback(R=>{p(`File transfer rejected: ${R.filename} from ${R.sender}`)},[p]),A=S.useCallback(R=>{p(`File transfer accepted: ${R.filename} by ${R.sender}`)},[p]),E=S.useCallback(R=>{d(P=>[...P,R]),p(`Incoming file offer: ${R.filename} from ${R.sender}`)},[p]);S.useEffect(()=>(t.on("fileTransferOffer",E),t.on("fileTransferAccepted",A),t.on("fileSendProgress",g),t.on("fileReceiveProgress",C),t.on("fileTransferError",y),t.on("fileTransferCancelled",I),t.on("fileTransferRejected",b),t.on("fileSendComplete",v),t.on("fileReceiveComplete",m),()=>{t.off("fileTransferOffer",E),t.off("fileTransferAccepted",A),t.off("fileSendProgress",g),t.off("fileReceiveProgress",C),t.off("fileTransferError",y),t.off("fileTransferCancelled",I),t.off("fileTransferRejected",b),t.off("fileSendComplete",v),t.off("fileReceiveComplete",m)}),[t,E,A,g,C,y,I,b,v,m]);const k=()=>{n&&i&&t.sendFile(n,i).then(()=>{p(`Sending ${n.name} to ${i}`)}).catch(R=>{p(`Error sending file: ${R.message}`)})},D=(R,P)=>{t.acceptTransfer(R,P);const M=u.find(G=>G.hash===P);M&&p(`Accepting file transfer: ${M.filename} from ${R}`),d(G=>G.filter(j=>j.hash!==P))},T=(R,P)=>{t.rejectTransfer(R,P);const M=u.find(G=>G.hash===P);M&&p(`Rejected file transfer: ${M.filename} from ${R}`),d(G=>G.filter(j=>j.hash!==P))};return Y.jsxs("div",{className:`file-transfer-ui ${e?"expanded":"collapsed"}`,children:[Y.jsx("h3",{children:"File Transfer"}),Y.jsx(lX,{onFileChange:r,onRecipientChange:o,onSendFile:k,selectedFile:n,recipient:i}),(s>0||c>0)&&Y.jsx(uX,{progress:s>0?s:c}),u.map(R=>Y.jsx(dX,{offer:R,onAccept:D,onReject:T},`${R.sender}-${R.filename}`)),Y.jsx(fX,{history:f})]})};function pX(){const[t,e]=S.useState(null),[n,r]=S.useState(!1),[i,o]=S.useState(!1),[s,a]=S.useState(!1),c=t?md(t,"userlist",[]):[],l=gt.useRef(null),u=gt.useRef(null),d=gt.useRef(null),f=S.useRef(!1),h=()=>{l.current&&l.current.saveLog()},p=()=>{l.current&&l.current.clearLog()},g=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);S.useEffect(()=>{if(f.current)return;const v=new $U("mongoose.moo.mud.org",8765);v.registerGMCPPackage(E7),v.registerGMCPPackage(A7),v.registerGMCPPackage(w7),v.registerGMCPPackage(xM),v.registerGMCPPackage(T7),v.registerGMCPPackage(S7),v.registerGMCPPackage(k7),v.registerGMCPPackage(CM),v.registerGMCPPackage(oU),v.registerGMCPPackage(jR),v.registerMcpPackage(lU),v.registerMcpPackage(uU),v.registerMcpPackage(fU),v.registerMcpPackage(hU),v.connect(),v.requestNotificationPermission(),e(v),r(!g),window.mudClient=v,f.current=!0;const m=I=>{v&&(I.key==="Control"&&v.cancelSpeech(),I.key==="Escape"&&v.stopAllSounds())};window.addEventListener("keydown",m);const y=()=>{var I;(I=u.current)==null||I.focus()};return document.addEventListener("focus",y),()=>{window.removeEventListener("keydown",m),document.removeEventListener("focus",y)}},[g]),t&&md(t,"disconnect",!1);const C=t?md(t,"fileTransferOffer",!1):!1;return S.useEffect(()=>{C&&(a(!0),o(!0))},[C]),FT(v=>{t&&t.shutdown()}),t?Y.jsxs("div",{className:"App",children:[Y.jsx("header",{className:"App-header"}),Y.jsx(jG,{client:t,onSaveLog:h,onClearLog:p,onToggleUsers:()=>r(!n),onOpenPrefs:()=>{var v;return(v=d.current)==null?void 0:v.open()}}),Y.jsxs("div",{children:[Y.jsx(sC,{client:t,ref:l}),n&&Y.jsx(ZG,{users:c}),Y.jsx(cX,{client:t})]}),Y.jsx(JU,{onSend:t.sendCommand,inputRef:u}),Y.jsxs("div",{children:[Y.jsxs("button",{onClick:()=>o(!i),"aria-expanded":i,"aria-controls":"file-transfer-ui",children:[i?"Hide":"Show"," File Transfer"]}),Y.jsx("div",{style:{display:i?"block":"none"},children:Y.jsx(hX,{client:t,expanded:s})})]}),Y.jsx(HG,{client:t}),Y.jsx(RG,{ref:d})]}):null}function gX(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function YS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function qS(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YS(Object(n),!0).forEach(function(r){gX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function mX(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function vX(t,e){if(t==null)return{};var n=mX(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function CX(t,e){return yX(t)||xX(t,e)||IX(t,e)||bX()}function yX(t){if(Array.isArray(t))return t}function xX(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,o=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function IX(t,e){if(t){if(typeof t=="string")return QS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return QS(t,e)}}function QS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AX(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ek(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ek(Object(n),!0).forEach(function(r){AX(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wX(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,o){return o(i)},r)}}function sd(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function sp(t){return{}.toString.call(t).includes("Object")}function SX(t){return!Object.keys(t).length}function lf(t){return typeof t=="function"}function kX(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function EX(t,e){return sp(e)||Ta("changeType"),Object.keys(e).some(function(n){return!kX(t,n)})&&Ta("changeField"),e}function TX(t){lf(t)||Ta("selectorType")}function RX(t){lf(t)||sp(t)||Ta("handlerType"),sp(t)&&Object.values(t).some(function(e){return!lf(e)})&&Ta("handlersType")}function _X(t){t||Ta("initialIsRequired"),sp(t)||Ta("initialType"),SX(t)&&Ta("initialContent")}function DX(t,e){throw new Error(t[e]||t.default)}var PX={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Ta=sd(DX)(PX),dh={changes:EX,selector:TX,handler:RX,initial:_X};function NX(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};dh.initial(t),dh.handler(e);var n={current:t},r=sd(OX)(n,e),i=sd(FX)(n),o=sd(dh.changes)(t),s=sd(BX)(n);function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return dh.selector(l),l(n.current)}function c(l){wX(r,i,o,s)(l)}return[a,c]}function BX(t,e){return lf(e)?e(t.current):e}function FX(t,e){return t.current=tk(tk({},t.current),e),e}function OX(t,e,n){return lf(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var MX={create:NX},LX={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function UX(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function VX(t){return{}.toString.call(t).includes("Object")}function GX(t){return t||nk("configIsRequired"),VX(t)||nk("configType"),t.urls?(WX(),{paths:{vs:t.urls.monacoBase}}):t}function WX(){console.warn(i3.deprecation)}function zX(t,e){throw new Error(t[e]||t.default)}var i3={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},nk=UX(zX)(i3),jX={config:GX},HX=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,s){return s(o)},i)}};function o3(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],o3(t[n],e[n]))}),qS(qS({},t),e)}var ZX={type:"cancelation",msg:"operation is manually canceled"};function $m(t){var e=!1,n=new Promise(function(r,i){t.then(function(o){return e?i(ZX):r(o)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var $X=MX.create({config:LX,isInitialized:!1,resolve:null,reject:null,monaco:null}),s3=CX($X,2),Df=s3[0],qp=s3[1];function XX(t){var e=jX.config(t),n=e.monaco,r=vX(e,["monaco"]);qp(function(i){return{config:o3(i.config,r),monaco:n}})}function KX(){var t=Df(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(qp({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),$m(Xm);if(window.monaco&&window.monaco.editor)return a3(window.monaco),t.resolve(window.monaco),$m(Xm);HX(JX,qX)(QX)}return $m(Xm)}function JX(t){return document.body.appendChild(t)}function YX(t){var e=document.createElement("script");return t&&(e.src=t),e}function qX(t){var e=Df(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=YX("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function QX(){var t=Df(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){a3(n),t.resolve(n)},function(n){t.reject(n)})}function a3(t){Df().monaco||qp({monaco:t})}function eK(){return Df(function(t){var e=t.monaco;return e})}var Xm=new Promise(function(t,e){return qp({resolve:t,reject:e})}),c3={config:XX,init:KX,__getMonacoInstance:eK},tK={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Km=tK,nK={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},rK=nK;function iK({children:t}){return gt.createElement("div",{style:rK.container},t)}var oK=iK,sK=oK;function aK({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:o,wrapperProps:s}){return gt.createElement("section",{style:{...Km.wrapper,width:t,height:e},...s},!n&&gt.createElement(sK,null,r),gt.createElement("div",{ref:i,style:{...Km.fullWidth,...!n&&Km.hide},className:o}))}var cK=aK,l3=S.memo(cK);function lK(t){S.useEffect(t,[])}var u3=lK;function uK(t,e,n=!0){let r=S.useRef(!0);S.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Zr=uK;function Sd(){}function gl(t,e,n,r){return dK(t,r)||fK(t,e,n,r)}function dK(t,e){return t.editor.getModel(d3(t,e))}function fK(t,e,n,r){return t.editor.createModel(e,n,r?d3(t,r):void 0)}function d3(t,e){return t.Uri.parse(e)}function hK({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:s,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:c=!1,theme:l="light",loading:u="Loading...",options:d={},height:f="100%",width:h="100%",className:p,wrapperProps:g={},beforeMount:C=Sd,onMount:v=Sd}){let[m,y]=S.useState(!1),[I,b]=S.useState(!0),A=S.useRef(null),E=S.useRef(null),k=S.useRef(null),D=S.useRef(v),T=S.useRef(C),R=S.useRef(!1);u3(()=>{let j=c3.init();return j.then(Q=>(E.current=Q)&&b(!1)).catch(Q=>(Q==null?void 0:Q.type)!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>A.current?G():j.cancel()}),Zr(()=>{if(A.current&&E.current){let j=A.current.getOriginalEditor(),Q=gl(E.current,t||"",r||n||"text",o||"");Q!==j.getModel()&&j.setModel(Q)}},[o],m),Zr(()=>{if(A.current&&E.current){let j=A.current.getModifiedEditor(),Q=gl(E.current,e||"",i||n||"text",s||"");Q!==j.getModel()&&j.setModel(Q)}},[s],m),Zr(()=>{let j=A.current.getModifiedEditor();j.getOption(E.current.editor.EditorOption.readOnly)?j.setValue(e||""):e!==j.getValue()&&(j.executeEdits("",[{range:j.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),j.pushUndoStop())},[e],m),Zr(()=>{var j,Q;(Q=(j=A.current)==null?void 0:j.getModel())==null||Q.original.setValue(t||"")},[t],m),Zr(()=>{let{original:j,modified:Q}=A.current.getModel();E.current.editor.setModelLanguage(j,r||n||"text"),E.current.editor.setModelLanguage(Q,i||n||"text")},[n,r,i],m),Zr(()=>{var j;(j=E.current)==null||j.editor.setTheme(l)},[l],m),Zr(()=>{var j;(j=A.current)==null||j.updateOptions(d)},[d],m);let P=S.useCallback(()=>{var te;if(!E.current)return;T.current(E.current);let j=gl(E.current,t||"",r||n||"text",o||""),Q=gl(E.current,e||"",i||n||"text",s||"");(te=A.current)==null||te.setModel({original:j,modified:Q})},[n,e,i,t,r,o,s]),M=S.useCallback(()=>{var j;!R.current&&k.current&&(A.current=E.current.editor.createDiffEditor(k.current,{automaticLayout:!0,...d}),P(),(j=E.current)==null||j.editor.setTheme(l),y(!0),R.current=!0)},[d,l,P]);S.useEffect(()=>{m&&D.current(A.current,E.current)},[m]),S.useEffect(()=>{!I&&!m&&M()},[I,m,M]);function G(){var Q,te,$,q;let j=(Q=A.current)==null?void 0:Q.getModel();a||((te=j==null?void 0:j.original)==null||te.dispose()),c||(($=j==null?void 0:j.modified)==null||$.dispose()),(q=A.current)==null||q.dispose()}return gt.createElement(l3,{width:h,height:f,isEditorReady:m,loading:u,_ref:k,className:p,wrapperProps:g})}var pK=hK;S.memo(pK);function gK(t){let e=S.useRef();return S.useEffect(()=>{e.current=t},[t]),e.current}var mK=gK,fh=new Map;function vK({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:o,theme:s="light",line:a,loading:c="Loading...",options:l={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:f=!1,width:h="100%",height:p="100%",className:g,wrapperProps:C={},beforeMount:v=Sd,onMount:m=Sd,onChange:y,onValidate:I=Sd}){let[b,A]=S.useState(!1),[E,k]=S.useState(!0),D=S.useRef(null),T=S.useRef(null),R=S.useRef(null),P=S.useRef(m),M=S.useRef(v),G=S.useRef(),j=S.useRef(r),Q=mK(o),te=S.useRef(!1),$=S.useRef(!1);u3(()=>{let F=c3.init();return F.then(z=>(D.current=z)&&k(!1)).catch(z=>(z==null?void 0:z.type)!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>T.current?ne():F.cancel()}),Zr(()=>{var z,K,ee,ae;let F=gl(D.current,t||r||"",e||i||"",o||n||"");F!==((z=T.current)==null?void 0:z.getModel())&&(d&&fh.set(Q,(K=T.current)==null?void 0:K.saveViewState()),(ee=T.current)==null||ee.setModel(F),d&&((ae=T.current)==null||ae.restoreViewState(fh.get(o))))},[o],b),Zr(()=>{var F;(F=T.current)==null||F.updateOptions(l)},[l],b),Zr(()=>{!T.current||r===void 0||(T.current.getOption(D.current.editor.EditorOption.readOnly)?T.current.setValue(r):r!==T.current.getValue()&&($.current=!0,T.current.executeEdits("",[{range:T.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),T.current.pushUndoStop(),$.current=!1))},[r],b),Zr(()=>{var z,K;let F=(z=T.current)==null?void 0:z.getModel();F&&i&&((K=D.current)==null||K.editor.setModelLanguage(F,i))},[i],b),Zr(()=>{var F;a!==void 0&&((F=T.current)==null||F.revealLine(a))},[a],b),Zr(()=>{var F;(F=D.current)==null||F.editor.setTheme(s)},[s],b);let q=S.useCallback(()=>{var F;if(!(!R.current||!D.current)&&!te.current){M.current(D.current);let z=o||n,K=gl(D.current,r||t||"",e||i||"",z||"");T.current=(F=D.current)==null?void 0:F.editor.create(R.current,{model:K,automaticLayout:!0,...l},u),d&&T.current.restoreViewState(fh.get(z)),D.current.editor.setTheme(s),a!==void 0&&T.current.revealLine(a),A(!0),te.current=!0}},[t,e,n,r,i,o,l,u,d,s,a]);S.useEffect(()=>{b&&P.current(T.current,D.current)},[b]),S.useEffect(()=>{!E&&!b&&q()},[E,b,q]),j.current=r,S.useEffect(()=>{var F,z;b&&y&&((F=G.current)==null||F.dispose(),G.current=(z=T.current)==null?void 0:z.onDidChangeModelContent(K=>{$.current||y(T.current.getValue(),K)}))},[b,y]),S.useEffect(()=>{if(b){let F=D.current.editor.onDidChangeMarkers(z=>{var ee;let K=(ee=T.current.getModel())==null?void 0:ee.uri;if(K&&z.find(ae=>ae.path===K.path)){let ae=D.current.editor.getModelMarkers({resource:K});I==null||I(ae)}});return()=>{F==null||F.dispose()}}return()=>{}},[b,I]);function ne(){var F,z;(F=G.current)==null||F.dispose(),f?d&&fh.set(o,T.current.saveViewState()):(z=T.current.getModel())==null||z.dispose(),T.current.dispose()}return gt.createElement(l3,{width:h,height:p,isEditorReady:b,loading:c,_ref:R,className:g,wrapperProps:C})}var CK=vK,yK=S.memo(CK),xK=yK,IK={restoreOnUnmount:!1};function bK(t,e){e===void 0&&(e=IK);var n=S.useRef(document.title);document.title!==t&&(document.title=t),S.useEffect(function(){if(e&&e.restoreOnUnmount)return function(){document.title=n.current}},[])}const AK=typeof document<"u"?bK:function(t){};function wK({onSave:t,onRevert:e,onDownload:n}){return Y.jsx("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderBottom:"1px solid #e8e8e8"},children:Y.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[Y.jsxs("button",{onClick:t,accessKey:"s",children:[Y.jsx(U_,{}),"Save"]}),Y.jsxs("button",{onClick:e,accessKey:"r",children:[Y.jsx(GG,{}),"Revert"]}),Y.jsxs("button",{onClick:n,accessKey:"d",children:[Y.jsx(UG,{}),"Download"]})]})})}const SK=({docstate:t,session:e})=>Y.jsxs("div",{"aria-live":"polite",className:"statusbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderTop:"1px solid #e8e8e8"},children:[Y.jsx("span",{children:t}),Y.jsx("span",{children:"|"}),Y.jsx("span",{children:e.reference}),Y.jsx("span",{children:"|"}),Y.jsx("span",{children:e.type})]});function kK(){const t=BT(),e=gt.useRef(null),[n,r]=S.useState(""),[i,o]=S.useState(""),[s,a]=S.useState(""),[c,l]=S.useState(0),[u,d]=S.useState({name:"none",contents:[],reference:"",type:""}),f=(M,G)=>{e.current=M},[h,p]=Vs();console.log(h);const g=h.editor.accessibilityMode,C=h.editor.autocompleteEnabled;FT(M=>{b.postMessage({type:"close",id:E}),c===1&&M.preventDefault()});const[v,m]=S.useState(!1),y=v?`${u.name} - Mongoose Editor`:"Mongoose Editor";AK(y);const I=S.useMemo(()=>{switch(c){case 0:return"Unchanged";case 1:return"Changed";case 2:return"Saved"}},[c]),b=S.useMemo(()=>new BroadcastChannel("editor"),[]),A=new URLSearchParams(t.search),E=decodeURIComponent(A.get("reference")||"");S.useEffect(()=>{if(!E)return;console.log("ID: "+E),console.log("Sending ready message"),b.postMessage({type:"ready",id:E});const M=G=>{switch(console.log(G.data),G.data.type){case"load":if(n!=="")return;const j=G.data.session.contents.join(`
`);o(j),a(j),d(G.data.session),l(0),r(G.data.clientId),m(!0),setTimeout(P,100);break;case"shutdown":if(console.log("Received shutdown message"),c===1&&!window.confirm("You have unsaved changes. Are you sure you want to close this editor?"))return;b.close(),window.close();break;default:console.warn("Unknown message type received",G.data.type)}};return b.addEventListener("message",M),()=>{b.removeEventListener("message",M),b.postMessage({type:"close",id:E})}},[b,n,E,c]);const k=()=>{o(s),l(0)},D=M=>{const G=i.split(/\r\n|\r|\n/),j={...u,contents:G};b.postMessage({type:"save",session:j,id:E}),l(2),P(),M.preventDefault()},T=M=>{M!==void 0&&(console.log("Original: "+s),console.log("New: "+M),o(M),M.split(/\r\n|\r|\n/).join(`
`)!==s?l(1):l(0),v||m(!0))},R=()=>{const M=new Blob([i],{type:"text/plain"}),G=URL.createObjectURL(M),j=document.createElement("a"),Q=new Date,te=Q.toLocaleDateString().replace(/\//g,"-"),$=Q.toLocaleTimeString().replace(/:/g,"-"),q=`${u.name}-${te}-${$}.txt`;j.download=q,j.href=G,j.click(),URL.revokeObjectURL(G),j.remove()};return Y.jsxs("div",{id:"editor",children:[Y.jsx(wK,{onSave:D,onRevert:k,onDownload:R}),Y.jsx(xK,{height:"80vh",defaultLanguage:"lambdamoo",value:i,onChange:T,options:{wordWrap:"on",accessibilitySupport:g?"on":"off",quickSuggestions:C},onMount:f,path:u.reference}),Y.jsx(SK,{docstate:I,session:u})]});function P(){e.current!==null&&e.current.focus()}}const EK="modulepreload",TK=function(t){return"/"+t},rk={},RK=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=TK(c),c in rk)return;rk[c]=!0;const l=c.endsWith(".css"),u=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const d=document.createElement("link");if(d.rel=l?"stylesheet":EK,l||(d.as="script"),d.crossOrigin="",d.href=c,a&&d.setAttribute("nonce",a),document.head.appendChild(d),l)return new Promise((f,h)=>{d.addEventListener("load",f),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},_K=t=>{t&&t instanceof Function&&RK(async()=>{const{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}=await import("./web-vitals-DdRmOIVa.js");return{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}},[]).then(({getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o})=>{e(t),n(t),r(t),i(t),o(t)})};var ik={};const DK=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function PK(t){if("serviceWorker"in navigator){if(new URL(ik.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${ik.PUBLIC_URL}/service-worker.js`;DK?(NK(n),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):f3(n)})}}function f3(t,e){navigator.serviceWorker.register(t).then(n=>{n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."):console.log("Content is cached for offline use."))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function NK(t,e){fetch(t).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):f3(t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}const BK=o4([{path:"/",element:Y.jsx(pX,{})},{path:"/editor",element:Y.jsx(kK,{})}]),FK=Jm.createRoot(document.getElementById("root"));FK.render(Y.jsx(gt.StrictMode,{children:Y.jsx(p4,{router:BK})}));_K(console.log);PK();
