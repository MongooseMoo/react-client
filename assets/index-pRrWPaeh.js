var U2=Object.defineProperty;var V2=(e,t,n)=>t in e?U2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G2=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var W=(e,t,n)=>(V2(e,typeof t!="symbol"?t+"":t,n),n),Uv=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var M=(e,t,n)=>(Uv(e,t,"read from private field"),n?n.call(e):t.get(e)),Oe=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},Ee=(e,t,n,r)=>(Uv(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var wh=(e,t,n,r)=>({set _(i){Ee(e,t,i,n)},get _(){return M(e,t,r)}}),Ie=(e,t,n)=>(Uv(e,t,"access private method"),n);var use=G2((Kse,O2)=>{function qT(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var W2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Jf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QT={exports:{}},yg={},e_={exports:{}},ze={},Yf=Symbol.for("react.element"),H2=Symbol.for("react.portal"),j2=Symbol.for("react.fragment"),$2=Symbol.for("react.strict_mode"),Z2=Symbol.for("react.profiler"),z2=Symbol.for("react.provider"),X2=Symbol.for("react.context"),K2=Symbol.for("react.forward_ref"),J2=Symbol.for("react.suspense"),Y2=Symbol.for("react.memo"),q2=Symbol.for("react.lazy"),Uw=Symbol.iterator;function Q2(e){return e===null||typeof e!="object"?null:(e=Uw&&e[Uw]||e["@@iterator"],typeof e=="function"?e:null)}var t_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},n_=Object.assign,r_={};function xu(e,t,n){this.props=e,this.context=t,this.refs=r_,this.updater=n||t_}xu.prototype.isReactComponent={};xu.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xu.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function i_(){}i_.prototype=xu.prototype;function ZI(e,t,n){this.props=e,this.context=t,this.refs=r_,this.updater=n||t_}var zI=ZI.prototype=new i_;zI.constructor=ZI;n_(zI,xu.prototype);zI.isPureReactComponent=!0;var Vw=Array.isArray,s_=Object.prototype.hasOwnProperty,XI={current:null},o_={key:!0,ref:!0,__self:!0,__source:!0};function a_(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)s_.call(t,r)&&!o_.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Yf,type:e,key:s,ref:o,props:i,_owner:XI.current}}function eB(e,t){return{$$typeof:Yf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function KI(e){return typeof e=="object"&&e!==null&&e.$$typeof===Yf}function tB(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gw=/\/+/g;function Vv(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tB(""+e.key):t.toString(36)}function dp(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Yf:case H2:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Vv(o,0):r,Vw(i)?(n="",e!=null&&(n=e.replace(Gw,"$&/")+"/"),dp(i,t,n,"",function(l){return l})):i!=null&&(KI(i)&&(i=eB(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gw,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Vw(e))for(var a=0;a<e.length;a++){s=e[a];var c=r+Vv(s,a);o+=dp(s,t,n,c,i)}else if(c=Q2(e),typeof c=="function")for(e=c.call(e),a=0;!(s=e.next()).done;)s=s.value,c=r+Vv(s,a++),o+=dp(s,t,n,c,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function kh(e,t,n){if(e==null)return e;var r=[],i=0;return dp(e,r,"","",function(s){return t.call(n,s,i++)}),r}function nB(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var mr={current:null},fp={transition:null},rB={ReactCurrentDispatcher:mr,ReactCurrentBatchConfig:fp,ReactCurrentOwner:XI};ze.Children={map:kh,forEach:function(e,t,n){kh(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return kh(e,function(){t++}),t},toArray:function(e){return kh(e,function(t){return t})||[]},only:function(e){if(!KI(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ze.Component=xu;ze.Fragment=j2;ze.Profiler=Z2;ze.PureComponent=ZI;ze.StrictMode=$2;ze.Suspense=J2;ze.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rB;ze.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=n_({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=XI.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(c in t)s_.call(t,c)&&!o_.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&a!==void 0?a[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:Yf,type:e.type,key:i,ref:s,props:r,_owner:o}};ze.createContext=function(e){return e={$$typeof:X2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:z2,_context:e},e.Consumer=e};ze.createElement=a_;ze.createFactory=function(e){var t=a_.bind(null,e);return t.type=e,t};ze.createRef=function(){return{current:null}};ze.forwardRef=function(e){return{$$typeof:K2,render:e}};ze.isValidElement=KI;ze.lazy=function(e){return{$$typeof:q2,_payload:{_status:-1,_result:e},_init:nB}};ze.memo=function(e,t){return{$$typeof:Y2,type:e,compare:t===void 0?null:t}};ze.startTransition=function(e){var t=fp.transition;fp.transition={};try{e()}finally{fp.transition=t}};ze.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ze.useCallback=function(e,t){return mr.current.useCallback(e,t)};ze.useContext=function(e){return mr.current.useContext(e)};ze.useDebugValue=function(){};ze.useDeferredValue=function(e){return mr.current.useDeferredValue(e)};ze.useEffect=function(e,t){return mr.current.useEffect(e,t)};ze.useId=function(){return mr.current.useId()};ze.useImperativeHandle=function(e,t,n){return mr.current.useImperativeHandle(e,t,n)};ze.useInsertionEffect=function(e,t){return mr.current.useInsertionEffect(e,t)};ze.useLayoutEffect=function(e,t){return mr.current.useLayoutEffect(e,t)};ze.useMemo=function(e,t){return mr.current.useMemo(e,t)};ze.useReducer=function(e,t,n){return mr.current.useReducer(e,t,n)};ze.useRef=function(e){return mr.current.useRef(e)};ze.useState=function(e){return mr.current.useState(e)};ze.useSyncExternalStore=function(e,t,n){return mr.current.useSyncExternalStore(e,t,n)};ze.useTransition=function(){return mr.current.useTransition()};ze.version="18.2.0";e_.exports=ze;var w=e_.exports;const pt=Jf(w),iB=qT({__proto__:null,default:pt},[w]);var sB=w,oB=Symbol.for("react.element"),aB=Symbol.for("react.fragment"),cB=Object.prototype.hasOwnProperty,lB=sB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,uB={key:!0,ref:!0,__self:!0,__source:!0};function c_(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)cB.call(t,r)&&!uB.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:oB,type:e,key:s,ref:o,props:i,_owner:lB.current}}yg.Fragment=aB;yg.jsx=c_;yg.jsxs=c_;QT.exports=yg;var Y=QT.exports,i0={},l_={exports:{}},Qr={},u_={exports:{}},d_={};(function(e){function t(j,K){var ie=j.length;j.push(K);e:for(;0<ie;){var X=ie-1>>>1,se=j[X];if(0<i(se,K))j[X]=K,j[ie]=se,ie=X;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var K=j[0],ie=j.pop();if(ie!==K){j[0]=ie;e:for(var X=0,se=j.length,ke=se>>>1;X<ke;){var Ae=2*(X+1)-1,ge=j[Ae],Te=Ae+1,He=j[Te];if(0>i(ge,ie))Te<se&&0>i(He,ge)?(j[X]=He,j[Te]=ie,X=Te):(j[X]=ge,j[Ae]=ie,X=Ae);else if(Te<se&&0>i(He,ie))j[X]=He,j[Te]=ie,X=Te;else break e}}return K}function i(j,K){var ie=j.sortIndex-K.sortIndex;return ie!==0?ie:j.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var c=[],l=[],u=1,d=null,f=3,h=!1,p=!1,m=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(j){for(var K=n(l);K!==null;){if(K.callback===null)r(l);else if(K.startTime<=j)r(l),K.sortIndex=K.expirationTime,t(c,K);else break;K=n(l)}}function E(j){if(m=!1,S(j),!p)if(n(c)!==null)p=!0,z(k);else{var K=n(l);K!==null&&te(E,K.startTime-j)}}function k(j,K){p=!1,m&&(m=!1,g(_),_=-1),h=!0;var ie=f;try{for(S(K),d=n(c);d!==null&&(!(d.expirationTime>K)||j&&!D());){var X=d.callback;if(typeof X=="function"){d.callback=null,f=d.priorityLevel;var se=X(d.expirationTime<=K);K=e.unstable_now(),typeof se=="function"?d.callback=se:d===n(c)&&r(c),S(K)}else r(c);d=n(c)}if(d!==null)var ke=!0;else{var Ae=n(l);Ae!==null&&te(E,Ae.startTime-K),ke=!1}return ke}finally{d=null,f=ie,h=!1}}var b=!1,A=null,_=-1,x=5,P=-1;function D(){return!(e.unstable_now()-P<x)}function B(){if(A!==null){var j=e.unstable_now();P=j;var K=!0;try{K=A(!0,j)}finally{K?V():(b=!1,A=null)}}else b=!1}var V;if(typeof v=="function")V=function(){v(B)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,Z=G.port2;G.port1.onmessage=B,V=function(){Z.postMessage(null)}}else V=function(){y(B,0)};function z(j){A=j,b||(b=!0,V())}function te(j,K){_=y(function(){j(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,z(k))},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(j){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var ie=f;f=K;try{return j()}finally{f=ie}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(j,K){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var ie=f;f=j;try{return K()}finally{f=ie}},e.unstable_scheduleCallback=function(j,K,ie){var X=e.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?X+ie:X):ie=X,j){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=ie+se,j={id:u++,callback:K,priorityLevel:j,startTime:ie,expirationTime:se,sortIndex:-1},ie>X?(j.sortIndex=ie,t(l,j),n(c)===null&&j===n(l)&&(m?(g(_),_=-1):m=!0,te(E,ie-X))):(j.sortIndex=se,t(c,j),p||h||(p=!0,z(k))),j},e.unstable_shouldYield=D,e.unstable_wrapCallback=function(j){var K=f;return function(){var ie=f;f=K;try{return j.apply(this,arguments)}finally{f=ie}}}})(d_);u_.exports=d_;var dB=u_.exports,f_=w,Yr=dB;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h_=new Set,nf={};function Hc(e,t){au(e,t),au(e+"Capture",t)}function au(e,t){for(nf[e]=t,e=0;e<t.length;e++)h_.add(t[e])}var xo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s0=Object.prototype.hasOwnProperty,fB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ww={},Hw={};function hB(e){return s0.call(Hw,e)?!0:s0.call(Ww,e)?!1:fB.test(e)?Hw[e]=!0:(Ww[e]=!0,!1)}function pB(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mB(e,t,n,r){if(t===null||typeof t>"u"||pB(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function gr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bn[e]=new gr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bn[t]=new gr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bn[e]=new gr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bn[e]=new gr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bn[e]=new gr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bn[e]=new gr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bn[e]=new gr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bn[e]=new gr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bn[e]=new gr(e,5,!1,e.toLowerCase(),null,!1,!1)});var JI=/[\-:]([a-z])/g;function YI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(JI,YI);Bn[t]=new gr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(JI,YI);Bn[t]=new gr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(JI,YI);Bn[t]=new gr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bn[e]=new gr(e,1,!1,e.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new gr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bn[e]=new gr(e,1,!1,e.toLowerCase(),null,!0,!0)});function qI(e,t,n,r){var i=Bn.hasOwnProperty(t)?Bn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mB(t,n,i,r)&&(n=null),r||i===null?hB(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Vo=f_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ah=Symbol.for("react.element"),pl=Symbol.for("react.portal"),ml=Symbol.for("react.fragment"),QI=Symbol.for("react.strict_mode"),o0=Symbol.for("react.profiler"),p_=Symbol.for("react.provider"),m_=Symbol.for("react.context"),eS=Symbol.for("react.forward_ref"),a0=Symbol.for("react.suspense"),c0=Symbol.for("react.suspense_list"),tS=Symbol.for("react.memo"),ra=Symbol.for("react.lazy"),g_=Symbol.for("react.offscreen"),jw=Symbol.iterator;function Yu(e){return e===null||typeof e!="object"?null:(e=jw&&e[jw]||e["@@iterator"],typeof e=="function"?e:null)}var Ut=Object.assign,Gv;function Cd(e){if(Gv===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Gv=t&&t[1]||""}return`
`+Gv+e}var Wv=!1;function Hv(e,t){if(!e||Wv)return"";Wv=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var c=`
`+i[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=a);break}}}finally{Wv=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Cd(e):""}function gB(e){switch(e.tag){case 5:return Cd(e.type);case 16:return Cd("Lazy");case 13:return Cd("Suspense");case 19:return Cd("SuspenseList");case 0:case 2:case 15:return e=Hv(e.type,!1),e;case 11:return e=Hv(e.type.render,!1),e;case 1:return e=Hv(e.type,!0),e;default:return""}}function l0(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ml:return"Fragment";case pl:return"Portal";case o0:return"Profiler";case QI:return"StrictMode";case a0:return"Suspense";case c0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case m_:return(e.displayName||"Context")+".Consumer";case p_:return(e._context.displayName||"Context")+".Provider";case eS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case tS:return t=e.displayName||null,t!==null?t:l0(e.type)||"Memo";case ra:t=e._payload,e=e._init;try{return l0(e(t))}catch{}}return null}function vB(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return l0(t);case 8:return t===QI?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Fa(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function v_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function yB(e){var t=v_(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Eh(e){e._valueTracker||(e._valueTracker=yB(e))}function y_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=v_(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Yp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function u0(e,t){var n=t.checked;return Ut({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function $w(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Fa(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function C_(e,t){t=t.checked,t!=null&&qI(e,"checked",t,!1)}function d0(e,t){C_(e,t);var n=Fa(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?f0(e,t.type,n):t.hasOwnProperty("defaultValue")&&f0(e,t.type,Fa(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Zw(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function f0(e,t,n){(t!=="number"||Yp(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Id=Array.isArray;function Ll(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Fa(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function h0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ae(91));return Ut({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zw(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ae(92));if(Id(n)){if(1<n.length)throw Error(ae(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Fa(n)}}function I_(e,t){var n=Fa(t.value),r=Fa(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Xw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function S_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function p0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?S_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Th,b_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Th=Th||document.createElement("div"),Th.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Th.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function rf(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Dd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},CB=["Webkit","ms","Moz","O"];Object.keys(Dd).forEach(function(e){CB.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Dd[t]=Dd[e]})});function w_(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Dd.hasOwnProperty(e)&&Dd[e]?(""+t).trim():t+"px"}function k_(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=w_(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var IB=Ut({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function m0(e,t){if(t){if(IB[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ae(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ae(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ae(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ae(62))}}function g0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var v0=null;function nS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var y0=null,Bl=null,Fl=null;function Kw(e){if(e=eh(e)){if(typeof y0!="function")throw Error(ae(280));var t=e.stateNode;t&&(t=wg(t),y0(e.stateNode,e.type,t))}}function A_(e){Bl?Fl?Fl.push(e):Fl=[e]:Bl=e}function E_(){if(Bl){var e=Bl,t=Fl;if(Fl=Bl=null,Kw(e),t)for(e=0;e<t.length;e++)Kw(t[e])}}function T_(e,t){return e(t)}function __(){}var jv=!1;function R_(e,t,n){if(jv)return e(t,n);jv=!0;try{return T_(e,t,n)}finally{jv=!1,(Bl!==null||Fl!==null)&&(__(),E_())}}function sf(e,t){var n=e.stateNode;if(n===null)return null;var r=wg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ae(231,t,typeof n));return n}var C0=!1;if(xo)try{var qu={};Object.defineProperty(qu,"passive",{get:function(){C0=!0}}),window.addEventListener("test",qu,qu),window.removeEventListener("test",qu,qu)}catch{C0=!1}function SB(e,t,n,r,i,s,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Od=!1,qp=null,Qp=!1,I0=null,bB={onError:function(e){Od=!0,qp=e}};function wB(e,t,n,r,i,s,o,a,c){Od=!1,qp=null,SB.apply(bB,arguments)}function kB(e,t,n,r,i,s,o,a,c){if(wB.apply(this,arguments),Od){if(Od){var l=qp;Od=!1,qp=null}else throw Error(ae(198));Qp||(Qp=!0,I0=l)}}function jc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function x_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Jw(e){if(jc(e)!==e)throw Error(ae(188))}function AB(e){var t=e.alternate;if(!t){if(t=jc(e),t===null)throw Error(ae(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Jw(i),e;if(s===r)return Jw(i),t;s=s.sibling}throw Error(ae(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(ae(189))}}if(n.alternate!==r)throw Error(ae(190))}if(n.tag!==3)throw Error(ae(188));return n.stateNode.current===n?e:t}function N_(e){return e=AB(e),e!==null?P_(e):null}function P_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=P_(e);if(t!==null)return t;e=e.sibling}return null}var M_=Yr.unstable_scheduleCallback,Yw=Yr.unstable_cancelCallback,EB=Yr.unstable_shouldYield,TB=Yr.unstable_requestPaint,Yt=Yr.unstable_now,_B=Yr.unstable_getCurrentPriorityLevel,rS=Yr.unstable_ImmediatePriority,D_=Yr.unstable_UserBlockingPriority,em=Yr.unstable_NormalPriority,RB=Yr.unstable_LowPriority,O_=Yr.unstable_IdlePriority,Cg=null,Ps=null;function xB(e){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(Cg,e,void 0,(e.current.flags&128)===128)}catch{}}var Wi=Math.clz32?Math.clz32:MB,NB=Math.log,PB=Math.LN2;function MB(e){return e>>>=0,e===0?32:31-(NB(e)/PB|0)|0}var _h=64,Rh=4194304;function Sd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tm(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Sd(a):(s&=o,s!==0&&(r=Sd(s)))}else o=n&~i,o!==0?r=Sd(o):s!==0&&(r=Sd(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Wi(t),i=1<<n,r|=e[n],t&=~i;return r}function DB(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OB(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Wi(s),a=1<<o,c=i[o];c===-1?(!(a&n)||a&r)&&(i[o]=DB(a,t)):c<=t&&(e.expiredLanes|=a),s&=~a}}function S0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function L_(){var e=_h;return _h<<=1,!(_h&4194240)&&(_h=64),e}function $v(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qf(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Wi(t),e[t]=n}function LB(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Wi(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function iS(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Wi(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var st=0;function B_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var F_,sS,U_,V_,G_,b0=!1,xh=[],ka=null,Aa=null,Ea=null,of=new Map,af=new Map,la=[],BB="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function qw(e,t){switch(e){case"focusin":case"focusout":ka=null;break;case"dragenter":case"dragleave":Aa=null;break;case"mouseover":case"mouseout":Ea=null;break;case"pointerover":case"pointerout":of.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":af.delete(t.pointerId)}}function Qu(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=eh(t),t!==null&&sS(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function FB(e,t,n,r,i){switch(t){case"focusin":return ka=Qu(ka,e,t,n,r,i),!0;case"dragenter":return Aa=Qu(Aa,e,t,n,r,i),!0;case"mouseover":return Ea=Qu(Ea,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return of.set(s,Qu(of.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,af.set(s,Qu(af.get(s)||null,e,t,n,r,i)),!0}return!1}function W_(e){var t=uc(e.target);if(t!==null){var n=jc(t);if(n!==null){if(t=n.tag,t===13){if(t=x_(n),t!==null){e.blockedOn=t,G_(e.priority,function(){U_(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function hp(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=w0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);v0=r,n.target.dispatchEvent(r),v0=null}else return t=eh(n),t!==null&&sS(t),e.blockedOn=n,!1;t.shift()}return!0}function Qw(e,t,n){hp(e)&&n.delete(t)}function UB(){b0=!1,ka!==null&&hp(ka)&&(ka=null),Aa!==null&&hp(Aa)&&(Aa=null),Ea!==null&&hp(Ea)&&(Ea=null),of.forEach(Qw),af.forEach(Qw)}function ed(e,t){e.blockedOn===t&&(e.blockedOn=null,b0||(b0=!0,Yr.unstable_scheduleCallback(Yr.unstable_NormalPriority,UB)))}function cf(e){function t(i){return ed(i,e)}if(0<xh.length){ed(xh[0],e);for(var n=1;n<xh.length;n++){var r=xh[n];r.blockedOn===e&&(r.blockedOn=null)}}for(ka!==null&&ed(ka,e),Aa!==null&&ed(Aa,e),Ea!==null&&ed(Ea,e),of.forEach(t),af.forEach(t),n=0;n<la.length;n++)r=la[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<la.length&&(n=la[0],n.blockedOn===null);)W_(n),n.blockedOn===null&&la.shift()}var Ul=Vo.ReactCurrentBatchConfig,nm=!0;function VB(e,t,n,r){var i=st,s=Ul.transition;Ul.transition=null;try{st=1,oS(e,t,n,r)}finally{st=i,Ul.transition=s}}function GB(e,t,n,r){var i=st,s=Ul.transition;Ul.transition=null;try{st=4,oS(e,t,n,r)}finally{st=i,Ul.transition=s}}function oS(e,t,n,r){if(nm){var i=w0(e,t,n,r);if(i===null)ty(e,t,r,rm,n),qw(e,r);else if(FB(i,e,t,n,r))r.stopPropagation();else if(qw(e,r),t&4&&-1<BB.indexOf(e)){for(;i!==null;){var s=eh(i);if(s!==null&&F_(s),s=w0(e,t,n,r),s===null&&ty(e,t,r,rm,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else ty(e,t,r,null,n)}}var rm=null;function w0(e,t,n,r){if(rm=null,e=nS(r),e=uc(e),e!==null)if(t=jc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=x_(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return rm=e,null}function H_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_B()){case rS:return 1;case D_:return 4;case em:case RB:return 16;case O_:return 536870912;default:return 16}default:return 16}}var ha=null,aS=null,pp=null;function j_(){if(pp)return pp;var e,t=aS,n=t.length,r,i="value"in ha?ha.value:ha.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return pp=i.slice(e,1<r?1-r:void 0)}function mp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Nh(){return!0}function ek(){return!1}function ei(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nh:ek,this.isPropagationStopped=ek,this}return Ut(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nh)},persist:function(){},isPersistent:Nh}),t}var Nu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cS=ei(Nu),Qf=Ut({},Nu,{view:0,detail:0}),WB=ei(Qf),Zv,zv,td,Ig=Ut({},Qf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lS,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==td&&(td&&e.type==="mousemove"?(Zv=e.screenX-td.screenX,zv=e.screenY-td.screenY):zv=Zv=0,td=e),Zv)},movementY:function(e){return"movementY"in e?e.movementY:zv}}),tk=ei(Ig),HB=Ut({},Ig,{dataTransfer:0}),jB=ei(HB),$B=Ut({},Qf,{relatedTarget:0}),Xv=ei($B),ZB=Ut({},Nu,{animationName:0,elapsedTime:0,pseudoElement:0}),zB=ei(ZB),XB=Ut({},Nu,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),KB=ei(XB),JB=Ut({},Nu,{data:0}),nk=ei(JB),YB={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qB={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QB={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function eF(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=QB[e])?!!t[e]:!1}function lS(){return eF}var tF=Ut({},Qf,{key:function(e){if(e.key){var t=YB[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=mp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qB[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lS,charCode:function(e){return e.type==="keypress"?mp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?mp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),nF=ei(tF),rF=Ut({},Ig,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rk=ei(rF),iF=Ut({},Qf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lS}),sF=ei(iF),oF=Ut({},Nu,{propertyName:0,elapsedTime:0,pseudoElement:0}),aF=ei(oF),cF=Ut({},Ig,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),lF=ei(cF),uF=[9,13,27,32],uS=xo&&"CompositionEvent"in window,Ld=null;xo&&"documentMode"in document&&(Ld=document.documentMode);var dF=xo&&"TextEvent"in window&&!Ld,$_=xo&&(!uS||Ld&&8<Ld&&11>=Ld),ik=" ",sk=!1;function Z_(e,t){switch(e){case"keyup":return uF.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gl=!1;function fF(e,t){switch(e){case"compositionend":return z_(t);case"keypress":return t.which!==32?null:(sk=!0,ik);case"textInput":return e=t.data,e===ik&&sk?null:e;default:return null}}function hF(e,t){if(gl)return e==="compositionend"||!uS&&Z_(e,t)?(e=j_(),pp=aS=ha=null,gl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $_&&t.locale!=="ko"?null:t.data;default:return null}}var pF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ok(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pF[e.type]:t==="textarea"}function X_(e,t,n,r){A_(r),t=im(t,"onChange"),0<t.length&&(n=new cS("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Bd=null,lf=null;function mF(e){sR(e,0)}function Sg(e){var t=Cl(e);if(y_(t))return e}function gF(e,t){if(e==="change")return t}var K_=!1;if(xo){var Kv;if(xo){var Jv="oninput"in document;if(!Jv){var ak=document.createElement("div");ak.setAttribute("oninput","return;"),Jv=typeof ak.oninput=="function"}Kv=Jv}else Kv=!1;K_=Kv&&(!document.documentMode||9<document.documentMode)}function ck(){Bd&&(Bd.detachEvent("onpropertychange",J_),lf=Bd=null)}function J_(e){if(e.propertyName==="value"&&Sg(lf)){var t=[];X_(t,lf,e,nS(e)),R_(mF,t)}}function vF(e,t,n){e==="focusin"?(ck(),Bd=t,lf=n,Bd.attachEvent("onpropertychange",J_)):e==="focusout"&&ck()}function yF(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Sg(lf)}function CF(e,t){if(e==="click")return Sg(t)}function IF(e,t){if(e==="input"||e==="change")return Sg(t)}function SF(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Zi=typeof Object.is=="function"?Object.is:SF;function uf(e,t){if(Zi(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!s0.call(t,i)||!Zi(e[i],t[i]))return!1}return!0}function lk(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function uk(e,t){var n=lk(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=lk(n)}}function Y_(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Y_(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function q_(){for(var e=window,t=Yp();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Yp(e.document)}return t}function dS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function bF(e){var t=q_(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Y_(n.ownerDocument.documentElement,n)){if(r!==null&&dS(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=uk(n,s);var o=uk(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var wF=xo&&"documentMode"in document&&11>=document.documentMode,vl=null,k0=null,Fd=null,A0=!1;function dk(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;A0||vl==null||vl!==Yp(r)||(r=vl,"selectionStart"in r&&dS(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fd&&uf(Fd,r)||(Fd=r,r=im(k0,"onSelect"),0<r.length&&(t=new cS("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=vl)))}function Ph(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var yl={animationend:Ph("Animation","AnimationEnd"),animationiteration:Ph("Animation","AnimationIteration"),animationstart:Ph("Animation","AnimationStart"),transitionend:Ph("Transition","TransitionEnd")},Yv={},Q_={};xo&&(Q_=document.createElement("div").style,"AnimationEvent"in window||(delete yl.animationend.animation,delete yl.animationiteration.animation,delete yl.animationstart.animation),"TransitionEvent"in window||delete yl.transitionend.transition);function bg(e){if(Yv[e])return Yv[e];if(!yl[e])return e;var t=yl[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Q_)return Yv[e]=t[n];return e}var eR=bg("animationend"),tR=bg("animationiteration"),nR=bg("animationstart"),rR=bg("transitionend"),iR=new Map,fk="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function $a(e,t){iR.set(e,t),Hc(t,[e])}for(var qv=0;qv<fk.length;qv++){var Qv=fk[qv],kF=Qv.toLowerCase(),AF=Qv[0].toUpperCase()+Qv.slice(1);$a(kF,"on"+AF)}$a(eR,"onAnimationEnd");$a(tR,"onAnimationIteration");$a(nR,"onAnimationStart");$a("dblclick","onDoubleClick");$a("focusin","onFocus");$a("focusout","onBlur");$a(rR,"onTransitionEnd");au("onMouseEnter",["mouseout","mouseover"]);au("onMouseLeave",["mouseout","mouseover"]);au("onPointerEnter",["pointerout","pointerover"]);au("onPointerLeave",["pointerout","pointerover"]);Hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),EF=new Set("cancel close invalid load scroll toggle".split(" ").concat(bd));function hk(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,kB(r,t,void 0,e),e.currentTarget=null}function sR(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==s&&i.isPropagationStopped())break e;hk(i,a,l),s=c}else for(o=0;o<r.length;o++){if(a=r[o],c=a.instance,l=a.currentTarget,a=a.listener,c!==s&&i.isPropagationStopped())break e;hk(i,a,l),s=c}}}if(Qp)throw e=I0,Qp=!1,I0=null,e}function At(e,t){var n=t[x0];n===void 0&&(n=t[x0]=new Set);var r=e+"__bubble";n.has(r)||(oR(t,e,2,!1),n.add(r))}function ey(e,t,n){var r=0;t&&(r|=4),oR(n,e,r,t)}var Mh="_reactListening"+Math.random().toString(36).slice(2);function df(e){if(!e[Mh]){e[Mh]=!0,h_.forEach(function(n){n!=="selectionchange"&&(EF.has(n)||ey(n,!1,e),ey(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Mh]||(t[Mh]=!0,ey("selectionchange",!1,t))}}function oR(e,t,n,r){switch(H_(t)){case 1:var i=VB;break;case 4:i=GB;break;default:i=oS}n=i.bind(null,t,n,e),i=void 0,!C0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function ty(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;a!==null;){if(o=uc(a),o===null)return;if(c=o.tag,c===5||c===6){r=s=o;continue e}a=a.parentNode}}r=r.return}R_(function(){var l=s,u=nS(n),d=[];e:{var f=iR.get(e);if(f!==void 0){var h=cS,p=e;switch(e){case"keypress":if(mp(n)===0)break e;case"keydown":case"keyup":h=nF;break;case"focusin":p="focus",h=Xv;break;case"focusout":p="blur",h=Xv;break;case"beforeblur":case"afterblur":h=Xv;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=tk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=jB;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=sF;break;case eR:case tR:case nR:h=zB;break;case rR:h=aF;break;case"scroll":h=WB;break;case"wheel":h=lF;break;case"copy":case"cut":case"paste":h=KB;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=rk}var m=(t&4)!==0,y=!m&&e==="scroll",g=m?f!==null?f+"Capture":null:f;m=[];for(var v=l,S;v!==null;){S=v;var E=S.stateNode;if(S.tag===5&&E!==null&&(S=E,g!==null&&(E=sf(v,g),E!=null&&m.push(ff(v,E,S)))),y)break;v=v.return}0<m.length&&(f=new h(f,p,null,n,u),d.push({event:f,listeners:m}))}}if(!(t&7)){e:{if(f=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",f&&n!==v0&&(p=n.relatedTarget||n.fromElement)&&(uc(p)||p[No]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?uc(p):null,p!==null&&(y=jc(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=tk,E="onMouseLeave",g="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=rk,E="onPointerLeave",g="onPointerEnter",v="pointer"),y=h==null?f:Cl(h),S=p==null?f:Cl(p),f=new m(E,v+"leave",h,n,u),f.target=y,f.relatedTarget=S,E=null,uc(u)===l&&(m=new m(g,v+"enter",p,n,u),m.target=S,m.relatedTarget=y,E=m),y=E,h&&p)t:{for(m=h,g=p,v=0,S=m;S;S=il(S))v++;for(S=0,E=g;E;E=il(E))S++;for(;0<v-S;)m=il(m),v--;for(;0<S-v;)g=il(g),S--;for(;v--;){if(m===g||g!==null&&m===g.alternate)break t;m=il(m),g=il(g)}m=null}else m=null;h!==null&&pk(d,f,h,m,!1),p!==null&&y!==null&&pk(d,y,p,m,!0)}}e:{if(f=l?Cl(l):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var k=gF;else if(ok(f))if(K_)k=IF;else{k=yF;var b=vF}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=CF);if(k&&(k=k(e,l))){X_(d,k,n,u);break e}b&&b(e,f,l),e==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&f0(f,"number",f.value)}switch(b=l?Cl(l):window,e){case"focusin":(ok(b)||b.contentEditable==="true")&&(vl=b,k0=l,Fd=null);break;case"focusout":Fd=k0=vl=null;break;case"mousedown":A0=!0;break;case"contextmenu":case"mouseup":case"dragend":A0=!1,dk(d,n,u);break;case"selectionchange":if(wF)break;case"keydown":case"keyup":dk(d,n,u)}var A;if(uS)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else gl?Z_(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&($_&&n.locale!=="ko"&&(gl||_!=="onCompositionStart"?_==="onCompositionEnd"&&gl&&(A=j_()):(ha=u,aS="value"in ha?ha.value:ha.textContent,gl=!0)),b=im(l,_),0<b.length&&(_=new nk(_,e,null,n,u),d.push({event:_,listeners:b}),A?_.data=A:(A=z_(n),A!==null&&(_.data=A)))),(A=dF?fF(e,n):hF(e,n))&&(l=im(l,"onBeforeInput"),0<l.length&&(u=new nk("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=A))}sR(d,t)})}function ff(e,t,n){return{instance:e,listener:t,currentTarget:n}}function im(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=sf(e,n),s!=null&&r.unshift(ff(e,s,i)),s=sf(e,t),s!=null&&r.push(ff(e,s,i))),e=e.return}return r}function il(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function pk(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=sf(n,s),c!=null&&o.unshift(ff(n,c,a))):i||(c=sf(n,s),c!=null&&o.push(ff(n,c,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var TF=/\r\n?/g,_F=/\u0000|\uFFFD/g;function mk(e){return(typeof e=="string"?e:""+e).replace(TF,`
`).replace(_F,"")}function Dh(e,t,n){if(t=mk(t),mk(e)!==t&&n)throw Error(ae(425))}function sm(){}var E0=null,T0=null;function _0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var R0=typeof setTimeout=="function"?setTimeout:void 0,RF=typeof clearTimeout=="function"?clearTimeout:void 0,gk=typeof Promise=="function"?Promise:void 0,xF=typeof queueMicrotask=="function"?queueMicrotask:typeof gk<"u"?function(e){return gk.resolve(null).then(e).catch(NF)}:R0;function NF(e){setTimeout(function(){throw e})}function ny(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),cf(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);cf(t)}function Ta(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function vk(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pu=Math.random().toString(36).slice(2),us="__reactFiber$"+Pu,hf="__reactProps$"+Pu,No="__reactContainer$"+Pu,x0="__reactEvents$"+Pu,PF="__reactListeners$"+Pu,MF="__reactHandles$"+Pu;function uc(e){var t=e[us];if(t)return t;for(var n=e.parentNode;n;){if(t=n[No]||n[us]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=vk(e);e!==null;){if(n=e[us])return n;e=vk(e)}return t}e=n,n=e.parentNode}return null}function eh(e){return e=e[us]||e[No],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Cl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ae(33))}function wg(e){return e[hf]||null}var N0=[],Il=-1;function Za(e){return{current:e}}function Rt(e){0>Il||(e.current=N0[Il],N0[Il]=null,Il--)}function wt(e,t){Il++,N0[Il]=e.current,e.current=t}var Ua={},Yn=Za(Ua),Tr=Za(!1),Ec=Ua;function cu(e,t){var n=e.type.contextTypes;if(!n)return Ua;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function _r(e){return e=e.childContextTypes,e!=null}function om(){Rt(Tr),Rt(Yn)}function yk(e,t,n){if(Yn.current!==Ua)throw Error(ae(168));wt(Yn,t),wt(Tr,n)}function aR(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(ae(108,vB(e)||"Unknown",i));return Ut({},n,r)}function am(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ua,Ec=Yn.current,wt(Yn,e),wt(Tr,Tr.current),!0}function Ck(e,t,n){var r=e.stateNode;if(!r)throw Error(ae(169));n?(e=aR(e,t,Ec),r.__reactInternalMemoizedMergedChildContext=e,Rt(Tr),Rt(Yn),wt(Yn,e)):Rt(Tr),wt(Tr,n)}var Xs=null,kg=!1,ry=!1;function cR(e){Xs===null?Xs=[e]:Xs.push(e)}function DF(e){kg=!0,cR(e)}function za(){if(!ry&&Xs!==null){ry=!0;var e=0,t=st;try{var n=Xs;for(st=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Xs=null,kg=!1}catch(i){throw Xs!==null&&(Xs=Xs.slice(e+1)),M_(rS,za),i}finally{st=t,ry=!1}}return null}var Sl=[],bl=0,cm=null,lm=0,si=[],oi=0,Tc=null,Qs=1,eo="";function rc(e,t){Sl[bl++]=lm,Sl[bl++]=cm,cm=e,lm=t}function lR(e,t,n){si[oi++]=Qs,si[oi++]=eo,si[oi++]=Tc,Tc=e;var r=Qs;e=eo;var i=32-Wi(r)-1;r&=~(1<<i),n+=1;var s=32-Wi(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qs=1<<32-Wi(t)+i|n<<i|r,eo=s+e}else Qs=1<<s|n<<i|r,eo=e}function fS(e){e.return!==null&&(rc(e,1),lR(e,1,0))}function hS(e){for(;e===cm;)cm=Sl[--bl],Sl[bl]=null,lm=Sl[--bl],Sl[bl]=null;for(;e===Tc;)Tc=si[--oi],si[oi]=null,eo=si[--oi],si[oi]=null,Qs=si[--oi],si[oi]=null}var Kr=null,zr=null,Dt=!1,Mi=null;function uR(e,t){var n=ci(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Ik(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Kr=e,zr=Ta(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Kr=e,zr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Tc!==null?{id:Qs,overflow:eo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ci(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Kr=e,zr=null,!0):!1;default:return!1}}function P0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function M0(e){if(Dt){var t=zr;if(t){var n=t;if(!Ik(e,t)){if(P0(e))throw Error(ae(418));t=Ta(n.nextSibling);var r=Kr;t&&Ik(e,t)?uR(r,n):(e.flags=e.flags&-4097|2,Dt=!1,Kr=e)}}else{if(P0(e))throw Error(ae(418));e.flags=e.flags&-4097|2,Dt=!1,Kr=e}}}function Sk(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Kr=e}function Oh(e){if(e!==Kr)return!1;if(!Dt)return Sk(e),Dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!_0(e.type,e.memoizedProps)),t&&(t=zr)){if(P0(e))throw dR(),Error(ae(418));for(;t;)uR(e,t),t=Ta(t.nextSibling)}if(Sk(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ae(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){zr=Ta(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}zr=null}}else zr=Kr?Ta(e.stateNode.nextSibling):null;return!0}function dR(){for(var e=zr;e;)e=Ta(e.nextSibling)}function lu(){zr=Kr=null,Dt=!1}function pS(e){Mi===null?Mi=[e]:Mi.push(e)}var OF=Vo.ReactCurrentBatchConfig;function Si(e,t){if(e&&e.defaultProps){t=Ut({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var um=Za(null),dm=null,wl=null,mS=null;function gS(){mS=wl=dm=null}function vS(e){var t=um.current;Rt(um),e._currentValue=t}function D0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vl(e,t){dm=e,mS=wl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Ar=!0),e.firstContext=null)}function hi(e){var t=e._currentValue;if(mS!==e)if(e={context:e,memoizedValue:t,next:null},wl===null){if(dm===null)throw Error(ae(308));wl=e,dm.dependencies={lanes:0,firstContext:e}}else wl=wl.next=e;return t}var dc=null;function yS(e){dc===null?dc=[e]:dc.push(e)}function fR(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,yS(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var ia=!1;function CS(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hR(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Eo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _a(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,qe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return i=r.interleaved,i===null?(t.next=t,yS(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function gp(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iS(e,n)}}function bk(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function fm(e,t,n,r){var i=e.updateQueue;ia=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,o===null?s=l:o.next=l,o=c;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(s!==null){var d=i.baseState;o=0,u=l=c=null,a=s;do{var f=a.lane,h=a.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(f=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(h,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,f=typeof p=="function"?p.call(h,d,f):p,f==null)break e;d=Ut({},d,f);break e;case 2:ia=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else h={eventTime:h,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=h,c=d):u=u.next=h,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);Rc|=o,e.lanes=o,e.memoizedState=d}}function wk(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ae(191,i));i.call(r)}}}var pR=new f_.Component().refs;function O0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ut({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ag={isMounted:function(e){return(e=e._reactInternals)?jc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=pr(),i=xa(e),s=Eo(r,i);s.payload=t,n!=null&&(s.callback=n),t=_a(e,s,i),t!==null&&(Hi(t,e,i,r),gp(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=pr(),i=xa(e),s=Eo(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=_a(e,s,i),t!==null&&(Hi(t,e,i,r),gp(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=pr(),r=xa(e),i=Eo(n,r);i.tag=2,t!=null&&(i.callback=t),t=_a(e,i,r),t!==null&&(Hi(t,e,r,n),gp(t,e,r))}};function kk(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!uf(n,r)||!uf(i,s):!0}function mR(e,t,n){var r=!1,i=Ua,s=t.contextType;return typeof s=="object"&&s!==null?s=hi(s):(i=_r(t)?Ec:Yn.current,r=t.contextTypes,s=(r=r!=null)?cu(e,i):Ua),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ag,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ak(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ag.enqueueReplaceState(t,t.state,null)}function L0(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=pR,CS(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=hi(s):(s=_r(t)?Ec:Yn.current,i.context=cu(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(O0(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ag.enqueueReplaceState(i,i.state,null),fm(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function nd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ae(309));var r=n.stateNode}if(!r)throw Error(ae(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;a===pR&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(ae(284));if(!n._owner)throw Error(ae(290,e))}return e}function Lh(e,t){throw e=Object.prototype.toString.call(t),Error(ae(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ek(e){var t=e._init;return t(e._payload)}function gR(e){function t(g,v){if(e){var S=g.deletions;S===null?(g.deletions=[v],g.flags|=16):S.push(v)}}function n(g,v){if(!e)return null;for(;v!==null;)t(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=Na(g,v),g.index=0,g.sibling=null,g}function s(g,v,S){return g.index=S,e?(S=g.alternate,S!==null?(S=S.index,S<v?(g.flags|=2,v):S):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function a(g,v,S,E){return v===null||v.tag!==6?(v=uy(S,g.mode,E),v.return=g,v):(v=i(v,S),v.return=g,v)}function c(g,v,S,E){var k=S.type;return k===ml?u(g,v,S.props.children,E,S.key):v!==null&&(v.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ra&&Ek(k)===v.type)?(E=i(v,S.props),E.ref=nd(g,v,S),E.return=g,E):(E=bp(S.type,S.key,S.props,null,g.mode,E),E.ref=nd(g,v,S),E.return=g,E)}function l(g,v,S,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==S.containerInfo||v.stateNode.implementation!==S.implementation?(v=dy(S,g.mode,E),v.return=g,v):(v=i(v,S.children||[]),v.return=g,v)}function u(g,v,S,E,k){return v===null||v.tag!==7?(v=bc(S,g.mode,E,k),v.return=g,v):(v=i(v,S),v.return=g,v)}function d(g,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return v=uy(""+v,g.mode,S),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Ah:return S=bp(v.type,v.key,v.props,null,g.mode,S),S.ref=nd(g,null,v),S.return=g,S;case pl:return v=dy(v,g.mode,S),v.return=g,v;case ra:var E=v._init;return d(g,E(v._payload),S)}if(Id(v)||Yu(v))return v=bc(v,g.mode,S,null),v.return=g,v;Lh(g,v)}return null}function f(g,v,S,E){var k=v!==null?v.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return k!==null?null:a(g,v,""+S,E);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ah:return S.key===k?c(g,v,S,E):null;case pl:return S.key===k?l(g,v,S,E):null;case ra:return k=S._init,f(g,v,k(S._payload),E)}if(Id(S)||Yu(S))return k!==null?null:u(g,v,S,E,null);Lh(g,S)}return null}function h(g,v,S,E,k){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(S)||null,a(v,g,""+E,k);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ah:return g=g.get(E.key===null?S:E.key)||null,c(v,g,E,k);case pl:return g=g.get(E.key===null?S:E.key)||null,l(v,g,E,k);case ra:var b=E._init;return h(g,v,S,b(E._payload),k)}if(Id(E)||Yu(E))return g=g.get(S)||null,u(v,g,E,k,null);Lh(v,E)}return null}function p(g,v,S,E){for(var k=null,b=null,A=v,_=v=0,x=null;A!==null&&_<S.length;_++){A.index>_?(x=A,A=null):x=A.sibling;var P=f(g,A,S[_],E);if(P===null){A===null&&(A=x);break}e&&A&&P.alternate===null&&t(g,A),v=s(P,v,_),b===null?k=P:b.sibling=P,b=P,A=x}if(_===S.length)return n(g,A),Dt&&rc(g,_),k;if(A===null){for(;_<S.length;_++)A=d(g,S[_],E),A!==null&&(v=s(A,v,_),b===null?k=A:b.sibling=A,b=A);return Dt&&rc(g,_),k}for(A=r(g,A);_<S.length;_++)x=h(A,g,_,S[_],E),x!==null&&(e&&x.alternate!==null&&A.delete(x.key===null?_:x.key),v=s(x,v,_),b===null?k=x:b.sibling=x,b=x);return e&&A.forEach(function(D){return t(g,D)}),Dt&&rc(g,_),k}function m(g,v,S,E){var k=Yu(S);if(typeof k!="function")throw Error(ae(150));if(S=k.call(S),S==null)throw Error(ae(151));for(var b=k=null,A=v,_=v=0,x=null,P=S.next();A!==null&&!P.done;_++,P=S.next()){A.index>_?(x=A,A=null):x=A.sibling;var D=f(g,A,P.value,E);if(D===null){A===null&&(A=x);break}e&&A&&D.alternate===null&&t(g,A),v=s(D,v,_),b===null?k=D:b.sibling=D,b=D,A=x}if(P.done)return n(g,A),Dt&&rc(g,_),k;if(A===null){for(;!P.done;_++,P=S.next())P=d(g,P.value,E),P!==null&&(v=s(P,v,_),b===null?k=P:b.sibling=P,b=P);return Dt&&rc(g,_),k}for(A=r(g,A);!P.done;_++,P=S.next())P=h(A,g,_,P.value,E),P!==null&&(e&&P.alternate!==null&&A.delete(P.key===null?_:P.key),v=s(P,v,_),b===null?k=P:b.sibling=P,b=P);return e&&A.forEach(function(B){return t(g,B)}),Dt&&rc(g,_),k}function y(g,v,S,E){if(typeof S=="object"&&S!==null&&S.type===ml&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ah:e:{for(var k=S.key,b=v;b!==null;){if(b.key===k){if(k=S.type,k===ml){if(b.tag===7){n(g,b.sibling),v=i(b,S.props.children),v.return=g,g=v;break e}}else if(b.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===ra&&Ek(k)===b.type){n(g,b.sibling),v=i(b,S.props),v.ref=nd(g,b,S),v.return=g,g=v;break e}n(g,b);break}else t(g,b);b=b.sibling}S.type===ml?(v=bc(S.props.children,g.mode,E,S.key),v.return=g,g=v):(E=bp(S.type,S.key,S.props,null,g.mode,E),E.ref=nd(g,v,S),E.return=g,g=E)}return o(g);case pl:e:{for(b=S.key;v!==null;){if(v.key===b)if(v.tag===4&&v.stateNode.containerInfo===S.containerInfo&&v.stateNode.implementation===S.implementation){n(g,v.sibling),v=i(v,S.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else t(g,v);v=v.sibling}v=dy(S,g.mode,E),v.return=g,g=v}return o(g);case ra:return b=S._init,y(g,v,b(S._payload),E)}if(Id(S))return p(g,v,S,E);if(Yu(S))return m(g,v,S,E);Lh(g,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,S),v.return=g,g=v):(n(g,v),v=uy(S,g.mode,E),v.return=g,g=v),o(g)):n(g,v)}return y}var uu=gR(!0),vR=gR(!1),th={},Ms=Za(th),pf=Za(th),mf=Za(th);function fc(e){if(e===th)throw Error(ae(174));return e}function IS(e,t){switch(wt(mf,t),wt(pf,e),wt(Ms,th),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:p0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=p0(t,e)}Rt(Ms),wt(Ms,t)}function du(){Rt(Ms),Rt(pf),Rt(mf)}function yR(e){fc(mf.current);var t=fc(Ms.current),n=p0(t,e.type);t!==n&&(wt(pf,e),wt(Ms,n))}function SS(e){pf.current===e&&(Rt(Ms),Rt(pf))}var Ot=Za(0);function hm(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var iy=[];function bS(){for(var e=0;e<iy.length;e++)iy[e]._workInProgressVersionPrimary=null;iy.length=0}var vp=Vo.ReactCurrentDispatcher,sy=Vo.ReactCurrentBatchConfig,_c=0,Ft=null,ln=null,bn=null,pm=!1,Ud=!1,gf=0,LF=0;function Hn(){throw Error(ae(321))}function wS(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zi(e[n],t[n]))return!1;return!0}function kS(e,t,n,r,i,s){if(_c=s,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,vp.current=e===null||e.memoizedState===null?VF:GF,e=n(r,i),Ud){s=0;do{if(Ud=!1,gf=0,25<=s)throw Error(ae(301));s+=1,bn=ln=null,t.updateQueue=null,vp.current=WF,e=n(r,i)}while(Ud)}if(vp.current=mm,t=ln!==null&&ln.next!==null,_c=0,bn=ln=Ft=null,pm=!1,t)throw Error(ae(300));return e}function AS(){var e=gf!==0;return gf=0,e}function is(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Ft.memoizedState=bn=e:bn=bn.next=e,bn}function pi(){if(ln===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=ln.next;var t=bn===null?Ft.memoizedState:bn.next;if(t!==null)bn=t,ln=e;else{if(e===null)throw Error(ae(310));ln=e,e={memoizedState:ln.memoizedState,baseState:ln.baseState,baseQueue:ln.baseQueue,queue:ln.queue,next:null},bn===null?Ft.memoizedState=bn=e:bn=bn.next=e}return bn}function vf(e,t){return typeof t=="function"?t(e):t}function oy(e){var t=pi(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=ln,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,c=null,l=s;do{var u=l.lane;if((_c&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,o=r):c=c.next=d,Ft.lanes|=u,Rc|=u}l=l.next}while(l!==null&&l!==s);c===null?o=r:c.next=a,Zi(r,t.memoizedState)||(Ar=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Ft.lanes|=s,Rc|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function ay(e){var t=pi(),n=t.queue;if(n===null)throw Error(ae(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Zi(s,t.memoizedState)||(Ar=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function CR(){}function IR(e,t){var n=Ft,r=pi(),i=t(),s=!Zi(r.memoizedState,i);if(s&&(r.memoizedState=i,Ar=!0),r=r.queue,ES(wR.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||bn!==null&&bn.memoizedState.tag&1){if(n.flags|=2048,yf(9,bR.bind(null,n,r,i,t),void 0,null),An===null)throw Error(ae(349));_c&30||SR(n,t,i)}return i}function SR(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function bR(e,t,n,r){t.value=n,t.getSnapshot=r,kR(t)&&AR(e)}function wR(e,t,n){return n(function(){kR(t)&&AR(e)})}function kR(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Zi(e,n)}catch{return!0}}function AR(e){var t=Po(e,1);t!==null&&Hi(t,e,1,-1)}function Tk(e){var t=is();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:vf,lastRenderedState:e},t.queue=e,e=e.dispatch=UF.bind(null,Ft,e),[t.memoizedState,e]}function yf(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function ER(){return pi().memoizedState}function yp(e,t,n,r){var i=is();Ft.flags|=e,i.memoizedState=yf(1|t,n,void 0,r===void 0?null:r)}function Eg(e,t,n,r){var i=pi();r=r===void 0?null:r;var s=void 0;if(ln!==null){var o=ln.memoizedState;if(s=o.destroy,r!==null&&wS(r,o.deps)){i.memoizedState=yf(t,n,s,r);return}}Ft.flags|=e,i.memoizedState=yf(1|t,n,s,r)}function _k(e,t){return yp(8390656,8,e,t)}function ES(e,t){return Eg(2048,8,e,t)}function TR(e,t){return Eg(4,2,e,t)}function _R(e,t){return Eg(4,4,e,t)}function RR(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xR(e,t,n){return n=n!=null?n.concat([e]):null,Eg(4,4,RR.bind(null,t,e),n)}function TS(){}function NR(e,t){var n=pi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wS(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function PR(e,t){var n=pi();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&wS(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function MR(e,t,n){return _c&21?(Zi(n,t)||(n=L_(),Ft.lanes|=n,Rc|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Ar=!0),e.memoizedState=n)}function BF(e,t){var n=st;st=n!==0&&4>n?n:4,e(!0);var r=sy.transition;sy.transition={};try{e(!1),t()}finally{st=n,sy.transition=r}}function DR(){return pi().memoizedState}function FF(e,t,n){var r=xa(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OR(e))LR(t,n);else if(n=fR(e,t,n,r),n!==null){var i=pr();Hi(n,e,r,i),BR(n,t,r)}}function UF(e,t,n){var r=xa(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OR(e))LR(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Zi(a,o)){var c=t.interleaved;c===null?(i.next=i,yS(t)):(i.next=c.next,c.next=i),t.interleaved=i;return}}catch{}finally{}n=fR(e,t,i,r),n!==null&&(i=pr(),Hi(n,e,r,i),BR(n,t,r))}}function OR(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function LR(e,t){Ud=pm=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function BR(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,iS(e,n)}}var mm={readContext:hi,useCallback:Hn,useContext:Hn,useEffect:Hn,useImperativeHandle:Hn,useInsertionEffect:Hn,useLayoutEffect:Hn,useMemo:Hn,useReducer:Hn,useRef:Hn,useState:Hn,useDebugValue:Hn,useDeferredValue:Hn,useTransition:Hn,useMutableSource:Hn,useSyncExternalStore:Hn,useId:Hn,unstable_isNewReconciler:!1},VF={readContext:hi,useCallback:function(e,t){return is().memoizedState=[e,t===void 0?null:t],e},useContext:hi,useEffect:_k,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,yp(4194308,4,RR.bind(null,t,e),n)},useLayoutEffect:function(e,t){return yp(4194308,4,e,t)},useInsertionEffect:function(e,t){return yp(4,2,e,t)},useMemo:function(e,t){var n=is();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=is();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=FF.bind(null,Ft,e),[r.memoizedState,e]},useRef:function(e){var t=is();return e={current:e},t.memoizedState=e},useState:Tk,useDebugValue:TS,useDeferredValue:function(e){return is().memoizedState=e},useTransition:function(){var e=Tk(!1),t=e[0];return e=BF.bind(null,e[1]),is().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ft,i=is();if(Dt){if(n===void 0)throw Error(ae(407));n=n()}else{if(n=t(),An===null)throw Error(ae(349));_c&30||SR(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,_k(wR.bind(null,r,s,e),[e]),r.flags|=2048,yf(9,bR.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=is(),t=An.identifierPrefix;if(Dt){var n=eo,r=Qs;n=(r&~(1<<32-Wi(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=gf++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=LF++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},GF={readContext:hi,useCallback:NR,useContext:hi,useEffect:ES,useImperativeHandle:xR,useInsertionEffect:TR,useLayoutEffect:_R,useMemo:PR,useReducer:oy,useRef:ER,useState:function(){return oy(vf)},useDebugValue:TS,useDeferredValue:function(e){var t=pi();return MR(t,ln.memoizedState,e)},useTransition:function(){var e=oy(vf)[0],t=pi().memoizedState;return[e,t]},useMutableSource:CR,useSyncExternalStore:IR,useId:DR,unstable_isNewReconciler:!1},WF={readContext:hi,useCallback:NR,useContext:hi,useEffect:ES,useImperativeHandle:xR,useInsertionEffect:TR,useLayoutEffect:_R,useMemo:PR,useReducer:ay,useRef:ER,useState:function(){return ay(vf)},useDebugValue:TS,useDeferredValue:function(e){var t=pi();return ln===null?t.memoizedState=e:MR(t,ln.memoizedState,e)},useTransition:function(){var e=ay(vf)[0],t=pi().memoizedState;return[e,t]},useMutableSource:CR,useSyncExternalStore:IR,useId:DR,unstable_isNewReconciler:!1};function fu(e,t){try{var n="",r=t;do n+=gB(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function cy(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function B0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var HF=typeof WeakMap=="function"?WeakMap:Map;function FR(e,t,n){n=Eo(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){vm||(vm=!0,z0=r),B0(e,t)},n}function UR(e,t,n){n=Eo(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){B0(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){B0(e,t),typeof r!="function"&&(Ra===null?Ra=new Set([this]):Ra.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Rk(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new HF;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=r3.bind(null,e,t,n),t.then(e,e))}function xk(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Nk(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Eo(-1,1),t.tag=2,_a(n,t,1))),n.lanes|=1),e)}var jF=Vo.ReactCurrentOwner,Ar=!1;function rr(e,t,n,r){t.child=e===null?vR(t,null,n,r):uu(t,e.child,n,r)}function Pk(e,t,n,r,i){n=n.render;var s=t.ref;return Vl(t,i),r=kS(e,t,n,r,s,i),n=AS(),e!==null&&!Ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mo(e,t,i)):(Dt&&n&&fS(t),t.flags|=1,rr(e,t,r,i),t.child)}function Mk(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!OS(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,VR(e,t,s,r,i)):(e=bp(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:uf,n(o,r)&&e.ref===t.ref)return Mo(e,t,i)}return t.flags|=1,e=Na(s,r),e.ref=t.ref,e.return=t,t.child=e}function VR(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(uf(s,r)&&e.ref===t.ref)if(Ar=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Ar=!0);else return t.lanes=e.lanes,Mo(e,t,i)}return F0(e,t,n,r,i)}function GR(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wt(Al,Vr),Vr|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wt(Al,Vr),Vr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,wt(Al,Vr),Vr|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,wt(Al,Vr),Vr|=r;return rr(e,t,i,n),t.child}function WR(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function F0(e,t,n,r,i){var s=_r(n)?Ec:Yn.current;return s=cu(t,s),Vl(t,i),n=kS(e,t,n,r,s,i),r=AS(),e!==null&&!Ar?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mo(e,t,i)):(Dt&&r&&fS(t),t.flags|=1,rr(e,t,n,i),t.child)}function Dk(e,t,n,r,i){if(_r(n)){var s=!0;am(t)}else s=!1;if(Vl(t,i),t.stateNode===null)Cp(e,t),mR(t,n,r),L0(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=hi(l):(l=_r(n)?Ec:Yn.current,l=cu(t,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||c!==l)&&Ak(t,o,r,l),ia=!1;var f=t.memoizedState;o.state=f,fm(t,r,o,i),c=t.memoizedState,a!==r||f!==c||Tr.current||ia?(typeof u=="function"&&(O0(t,n,u,r),c=t.memoizedState),(a=ia||kk(t,n,a,r,f,c,l))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,hR(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:Si(t.type,a),o.props=l,d=t.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=hi(c):(c=_r(n)?Ec:Yn.current,c=cu(t,c));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==c)&&Ak(t,o,r,c),ia=!1,f=t.memoizedState,o.state=f,fm(t,r,o,i);var p=t.memoizedState;a!==d||f!==p||Tr.current||ia?(typeof h=="function"&&(O0(t,n,h,r),p=t.memoizedState),(l=ia||kk(t,n,l,r,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=c,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return U0(e,t,n,r,s,i)}function U0(e,t,n,r,i,s){WR(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Ck(t,n,!1),Mo(e,t,s);r=t.stateNode,jF.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=uu(t,e.child,null,s),t.child=uu(t,null,a,s)):rr(e,t,a,s),t.memoizedState=r.state,i&&Ck(t,n,!0),t.child}function HR(e){var t=e.stateNode;t.pendingContext?yk(e,t.pendingContext,t.pendingContext!==t.context):t.context&&yk(e,t.context,!1),IS(e,t.containerInfo)}function Ok(e,t,n,r,i){return lu(),pS(i),t.flags|=256,rr(e,t,n,r),t.child}var V0={dehydrated:null,treeContext:null,retryLane:0};function G0(e){return{baseLanes:e,cachePool:null,transitions:null}}function jR(e,t,n){var r=t.pendingProps,i=Ot.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),wt(Ot,i&1),e===null)return M0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Rg(o,r,0,null),e=bc(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=G0(n),t.memoizedState=V0,e):_S(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return $F(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Na(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Na(a,s):(s=bc(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?G0(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=V0,r}return s=e.child,e=s.sibling,r=Na(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function _S(e,t){return t=Rg({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Bh(e,t,n,r){return r!==null&&pS(r),uu(t,e.child,null,n),e=_S(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function $F(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=cy(Error(ae(422))),Bh(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=Rg({mode:"visible",children:r.children},i,0,null),s=bc(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&uu(t,e.child,null,o),t.child.memoizedState=G0(o),t.memoizedState=V0,s);if(!(t.mode&1))return Bh(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(ae(419)),r=cy(s,r,void 0),Bh(e,t,o,r)}if(a=(o&e.childLanes)!==0,Ar||a){if(r=An,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Po(e,i),Hi(r,e,i,-1))}return DS(),r=cy(Error(ae(421))),Bh(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=i3.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,zr=Ta(i.nextSibling),Kr=t,Dt=!0,Mi=null,e!==null&&(si[oi++]=Qs,si[oi++]=eo,si[oi++]=Tc,Qs=e.id,eo=e.overflow,Tc=t),t=_S(t,r.children),t.flags|=4096,t)}function Lk(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),D0(e.return,t,n)}function ly(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function $R(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(rr(e,t,r.children,n),r=Ot.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lk(e,n,t);else if(e.tag===19)Lk(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(wt(Ot,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&hm(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ly(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&hm(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ly(t,!0,n,null,s);break;case"together":ly(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Cp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mo(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Rc|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ae(153));if(t.child!==null){for(e=t.child,n=Na(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Na(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function ZF(e,t,n){switch(t.tag){case 3:HR(t),lu();break;case 5:yR(t);break;case 1:_r(t.type)&&am(t);break;case 4:IS(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;wt(um,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(wt(Ot,Ot.current&1),t.flags|=128,null):n&t.child.childLanes?jR(e,t,n):(wt(Ot,Ot.current&1),e=Mo(e,t,n),e!==null?e.sibling:null);wt(Ot,Ot.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return $R(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wt(Ot,Ot.current),r)break;return null;case 22:case 23:return t.lanes=0,GR(e,t,n)}return Mo(e,t,n)}var ZR,W0,zR,XR;ZR=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};W0=function(){};zR=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,fc(Ms.current);var s=null;switch(n){case"input":i=u0(e,i),r=u0(e,r),s=[];break;case"select":i=Ut({},i,{value:void 0}),r=Ut({},r,{value:void 0}),s=[];break;case"textarea":i=h0(e,i),r=h0(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=sm)}m0(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(nf.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&a[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(s||(s=[]),s.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(s=s||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(s=s||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(nf.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&At("scroll",e),s||a===c||(s=[])):(s=s||[]).push(l,c))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};XR=function(e,t,n,r){n!==r&&(t.flags|=4)};function rd(e,t){if(!Dt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function jn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function zF(e,t,n){var r=t.pendingProps;switch(hS(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return jn(t),null;case 1:return _r(t.type)&&om(),jn(t),null;case 3:return r=t.stateNode,du(),Rt(Tr),Rt(Yn),bS(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Oh(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Mi!==null&&(J0(Mi),Mi=null))),W0(e,t),jn(t),null;case 5:SS(t);var i=fc(mf.current);if(n=t.type,e!==null&&t.stateNode!=null)zR(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ae(166));return jn(t),null}if(e=fc(Ms.current),Oh(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[us]=t,r[hf]=s,e=(t.mode&1)!==0,n){case"dialog":At("cancel",r),At("close",r);break;case"iframe":case"object":case"embed":At("load",r);break;case"video":case"audio":for(i=0;i<bd.length;i++)At(bd[i],r);break;case"source":At("error",r);break;case"img":case"image":case"link":At("error",r),At("load",r);break;case"details":At("toggle",r);break;case"input":$w(r,s),At("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},At("invalid",r);break;case"textarea":zw(r,s),At("invalid",r)}m0(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Dh(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Dh(r.textContent,a,e),i=["children",""+a]):nf.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&At("scroll",r)}switch(n){case"input":Eh(r),Zw(r,s,!0);break;case"textarea":Eh(r),Xw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=sm)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=S_(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[us]=t,e[hf]=r,ZR(e,t,!1,!1),t.stateNode=e;e:{switch(o=g0(n,r),n){case"dialog":At("cancel",e),At("close",e),i=r;break;case"iframe":case"object":case"embed":At("load",e),i=r;break;case"video":case"audio":for(i=0;i<bd.length;i++)At(bd[i],e);i=r;break;case"source":At("error",e),i=r;break;case"img":case"image":case"link":At("error",e),At("load",e),i=r;break;case"details":At("toggle",e),i=r;break;case"input":$w(e,r),i=u0(e,r),At("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ut({},r,{value:void 0}),At("invalid",e);break;case"textarea":zw(e,r),i=h0(e,r),At("invalid",e);break;default:i=r}m0(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var c=a[s];s==="style"?k_(e,c):s==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&b_(e,c)):s==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&rf(e,c):typeof c=="number"&&rf(e,""+c):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(nf.hasOwnProperty(s)?c!=null&&s==="onScroll"&&At("scroll",e):c!=null&&qI(e,s,c,o))}switch(n){case"input":Eh(e),Zw(e,r,!1);break;case"textarea":Eh(e),Xw(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Fa(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Ll(e,!!r.multiple,s,!1):r.defaultValue!=null&&Ll(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=sm)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return jn(t),null;case 6:if(e&&t.stateNode!=null)XR(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ae(166));if(n=fc(mf.current),fc(Ms.current),Oh(t)){if(r=t.stateNode,n=t.memoizedProps,r[us]=t,(s=r.nodeValue!==n)&&(e=Kr,e!==null))switch(e.tag){case 3:Dh(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Dh(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[us]=t,t.stateNode=r}return jn(t),null;case 13:if(Rt(Ot),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dt&&zr!==null&&t.mode&1&&!(t.flags&128))dR(),lu(),t.flags|=98560,s=!1;else if(s=Oh(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(ae(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ae(317));s[us]=t}else lu(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;jn(t),s=!1}else Mi!==null&&(J0(Mi),Mi=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ot.current&1?fn===0&&(fn=3):DS())),t.updateQueue!==null&&(t.flags|=4),jn(t),null);case 4:return du(),W0(e,t),e===null&&df(t.stateNode.containerInfo),jn(t),null;case 10:return vS(t.type._context),jn(t),null;case 17:return _r(t.type)&&om(),jn(t),null;case 19:if(Rt(Ot),s=t.memoizedState,s===null)return jn(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)rd(s,!1);else{if(fn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=hm(e),o!==null){for(t.flags|=128,rd(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return wt(Ot,Ot.current&1|2),t.child}e=e.sibling}s.tail!==null&&Yt()>hu&&(t.flags|=128,r=!0,rd(s,!1),t.lanes=4194304)}else{if(!r)if(e=hm(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),rd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Dt)return jn(t),null}else 2*Yt()-s.renderingStartTime>hu&&n!==1073741824&&(t.flags|=128,r=!0,rd(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Yt(),t.sibling=null,n=Ot.current,wt(Ot,r?n&1|2:n&1),t):(jn(t),null);case 22:case 23:return MS(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vr&1073741824&&(jn(t),t.subtreeFlags&6&&(t.flags|=8192)):jn(t),null;case 24:return null;case 25:return null}throw Error(ae(156,t.tag))}function XF(e,t){switch(hS(t),t.tag){case 1:return _r(t.type)&&om(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return du(),Rt(Tr),Rt(Yn),bS(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return SS(t),null;case 13:if(Rt(Ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ae(340));lu()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rt(Ot),null;case 4:return du(),null;case 10:return vS(t.type._context),null;case 22:case 23:return MS(),null;case 24:return null;default:return null}}var Fh=!1,Zn=!1,KF=typeof WeakSet=="function"?WeakSet:Set,pe=null;function kl(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(e,t,r)}else n.current=null}function H0(e,t,n){try{n()}catch(r){jt(e,t,r)}}var Bk=!1;function JF(e,t){if(E0=nm,e=q_(),dS(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,c=-1,l=0,u=0,d=e,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(c=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===e)break t;if(f===n&&++l===i&&(a=o),f===s&&++u===r&&(c=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(T0={focusedElem:e,selectionRange:n},nm=!1,pe=t;pe!==null;)if(t=pe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,pe=e;else for(;pe!==null;){t=pe;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,v=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:Si(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(E){jt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,pe=e;break}pe=t.return}return p=Bk,Bk=!1,p}function Vd(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&H0(t,n,s)}i=i.next}while(i!==r)}}function Tg(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function j0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function KR(e){var t=e.alternate;t!==null&&(e.alternate=null,KR(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[us],delete t[hf],delete t[x0],delete t[PF],delete t[MF])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function JR(e){return e.tag===5||e.tag===3||e.tag===4}function Fk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||JR(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function $0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=sm));else if(r!==4&&(e=e.child,e!==null))for($0(e,t,n),e=e.sibling;e!==null;)$0(e,t,n),e=e.sibling}function Z0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Z0(e,t,n),e=e.sibling;e!==null;)Z0(e,t,n),e=e.sibling}var Nn=null,xi=!1;function zo(e,t,n){for(n=n.child;n!==null;)YR(e,t,n),n=n.sibling}function YR(e,t,n){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(Cg,n)}catch{}switch(n.tag){case 5:Zn||kl(n,t);case 6:var r=Nn,i=xi;Nn=null,zo(e,t,n),Nn=r,xi=i,Nn!==null&&(xi?(e=Nn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Nn.removeChild(n.stateNode));break;case 18:Nn!==null&&(xi?(e=Nn,n=n.stateNode,e.nodeType===8?ny(e.parentNode,n):e.nodeType===1&&ny(e,n),cf(e)):ny(Nn,n.stateNode));break;case 4:r=Nn,i=xi,Nn=n.stateNode.containerInfo,xi=!0,zo(e,t,n),Nn=r,xi=i;break;case 0:case 11:case 14:case 15:if(!Zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&H0(n,t,o),i=i.next}while(i!==r)}zo(e,t,n);break;case 1:if(!Zn&&(kl(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jt(n,t,a)}zo(e,t,n);break;case 21:zo(e,t,n);break;case 22:n.mode&1?(Zn=(r=Zn)||n.memoizedState!==null,zo(e,t,n),Zn=r):zo(e,t,n);break;default:zo(e,t,n)}}function Uk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new KF),t.forEach(function(r){var i=s3.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function vi(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Nn=a.stateNode,xi=!1;break e;case 3:Nn=a.stateNode.containerInfo,xi=!0;break e;case 4:Nn=a.stateNode.containerInfo,xi=!0;break e}a=a.return}if(Nn===null)throw Error(ae(160));YR(s,o,i),Nn=null,xi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){jt(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)qR(t,e),t=t.sibling}function qR(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vi(t,e),Qi(e),r&4){try{Vd(3,e,e.return),Tg(3,e)}catch(m){jt(e,e.return,m)}try{Vd(5,e,e.return)}catch(m){jt(e,e.return,m)}}break;case 1:vi(t,e),Qi(e),r&512&&n!==null&&kl(n,n.return);break;case 5:if(vi(t,e),Qi(e),r&512&&n!==null&&kl(n,n.return),e.flags&32){var i=e.stateNode;try{rf(i,"")}catch(m){jt(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&C_(i,s),g0(a,o);var l=g0(a,s);for(o=0;o<c.length;o+=2){var u=c[o],d=c[o+1];u==="style"?k_(i,d):u==="dangerouslySetInnerHTML"?b_(i,d):u==="children"?rf(i,d):qI(i,u,d,l)}switch(a){case"input":d0(i,s);break;case"textarea":I_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Ll(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Ll(i,!!s.multiple,s.defaultValue,!0):Ll(i,!!s.multiple,s.multiple?[]:"",!1))}i[hf]=s}catch(m){jt(e,e.return,m)}}break;case 6:if(vi(t,e),Qi(e),r&4){if(e.stateNode===null)throw Error(ae(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){jt(e,e.return,m)}}break;case 3:if(vi(t,e),Qi(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{cf(t.containerInfo)}catch(m){jt(e,e.return,m)}break;case 4:vi(t,e),Qi(e);break;case 13:vi(t,e),Qi(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(NS=Yt())),r&4&&Uk(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(Zn=(l=Zn)||u,vi(t,e),Zn=l):vi(t,e),Qi(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!u&&e.mode&1)for(pe=e,u=e.child;u!==null;){for(d=pe=u;pe!==null;){switch(f=pe,h=f.child,f.tag){case 0:case 11:case 14:case 15:Vd(4,f,f.return);break;case 1:kl(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){jt(r,n,m)}}break;case 5:kl(f,f.return);break;case 22:if(f.memoizedState!==null){Gk(d);continue}}h!==null?(h.return=f,pe=h):Gk(d)}u=u.sibling}e:for(u=null,d=e;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=w_("display",o))}catch(m){jt(e,e.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(m){jt(e,e.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vi(t,e),Qi(e),r&4&&Uk(e);break;case 21:break;default:vi(t,e),Qi(e)}}function Qi(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(JR(n)){var r=n;break e}n=n.return}throw Error(ae(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(rf(i,""),r.flags&=-33);var s=Fk(e);Z0(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Fk(e);$0(e,a,o);break;default:throw Error(ae(161))}}catch(c){jt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function YF(e,t,n){pe=e,QR(e)}function QR(e,t,n){for(var r=(e.mode&1)!==0;pe!==null;){var i=pe,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Fh;if(!o){var a=i.alternate,c=a!==null&&a.memoizedState!==null||Zn;a=Fh;var l=Zn;if(Fh=o,(Zn=c)&&!l)for(pe=i;pe!==null;)o=pe,c=o.child,o.tag===22&&o.memoizedState!==null?Wk(i):c!==null?(c.return=o,pe=c):Wk(i);for(;s!==null;)pe=s,QR(s),s=s.sibling;pe=i,Fh=a,Zn=l}Vk(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,pe=s):Vk(e)}}function Vk(e){for(;pe!==null;){var t=pe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zn||Tg(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Zn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Si(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&wk(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}wk(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&cf(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}Zn||t.flags&512&&j0(t)}catch(f){jt(t,t.return,f)}}if(t===e){pe=null;break}if(n=t.sibling,n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Gk(e){for(;pe!==null;){var t=pe;if(t===e){pe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,pe=n;break}pe=t.return}}function Wk(e){for(;pe!==null;){var t=pe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Tg(4,t)}catch(c){jt(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(c){jt(t,i,c)}}var s=t.return;try{j0(t)}catch(c){jt(t,s,c)}break;case 5:var o=t.return;try{j0(t)}catch(c){jt(t,o,c)}}}catch(c){jt(t,t.return,c)}if(t===e){pe=null;break}var a=t.sibling;if(a!==null){a.return=t.return,pe=a;break}pe=t.return}}var qF=Math.ceil,gm=Vo.ReactCurrentDispatcher,RS=Vo.ReactCurrentOwner,fi=Vo.ReactCurrentBatchConfig,qe=0,An=null,nn=null,On=0,Vr=0,Al=Za(0),fn=0,Cf=null,Rc=0,_g=0,xS=0,Gd=null,br=null,NS=0,hu=1/0,$s=null,vm=!1,z0=null,Ra=null,Uh=!1,pa=null,ym=0,Wd=0,X0=null,Ip=-1,Sp=0;function pr(){return qe&6?Yt():Ip!==-1?Ip:Ip=Yt()}function xa(e){return e.mode&1?qe&2&&On!==0?On&-On:OF.transition!==null?(Sp===0&&(Sp=L_()),Sp):(e=st,e!==0||(e=window.event,e=e===void 0?16:H_(e.type)),e):1}function Hi(e,t,n,r){if(50<Wd)throw Wd=0,X0=null,Error(ae(185));qf(e,n,r),(!(qe&2)||e!==An)&&(e===An&&(!(qe&2)&&(_g|=n),fn===4&&ua(e,On)),Rr(e,r),n===1&&qe===0&&!(t.mode&1)&&(hu=Yt()+500,kg&&za()))}function Rr(e,t){var n=e.callbackNode;OB(e,t);var r=tm(e,e===An?On:0);if(r===0)n!==null&&Yw(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Yw(n),t===1)e.tag===0?DF(Hk.bind(null,e)):cR(Hk.bind(null,e)),xF(function(){!(qe&6)&&za()}),n=null;else{switch(B_(r)){case 1:n=rS;break;case 4:n=D_;break;case 16:n=em;break;case 536870912:n=O_;break;default:n=em}n=ax(n,ex.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ex(e,t){if(Ip=-1,Sp=0,qe&6)throw Error(ae(327));var n=e.callbackNode;if(Gl()&&e.callbackNode!==n)return null;var r=tm(e,e===An?On:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Cm(e,r);else{t=r;var i=qe;qe|=2;var s=nx();(An!==e||On!==t)&&($s=null,hu=Yt()+500,Sc(e,t));do try{t3();break}catch(a){tx(e,a)}while(!0);gS(),gm.current=s,qe=i,nn!==null?t=0:(An=null,On=0,t=fn)}if(t!==0){if(t===2&&(i=S0(e),i!==0&&(r=i,t=K0(e,i))),t===1)throw n=Cf,Sc(e,0),ua(e,r),Rr(e,Yt()),n;if(t===6)ua(e,r);else{if(i=e.current.alternate,!(r&30)&&!QF(i)&&(t=Cm(e,r),t===2&&(s=S0(e),s!==0&&(r=s,t=K0(e,s))),t===1))throw n=Cf,Sc(e,0),ua(e,r),Rr(e,Yt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ae(345));case 2:ic(e,br,$s);break;case 3:if(ua(e,r),(r&130023424)===r&&(t=NS+500-Yt(),10<t)){if(tm(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){pr(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=R0(ic.bind(null,e,br,$s),t);break}ic(e,br,$s);break;case 4:if(ua(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Wi(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Yt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qF(r/1960))-r,10<r){e.timeoutHandle=R0(ic.bind(null,e,br,$s),r);break}ic(e,br,$s);break;case 5:ic(e,br,$s);break;default:throw Error(ae(329))}}}return Rr(e,Yt()),e.callbackNode===n?ex.bind(null,e):null}function K0(e,t){var n=Gd;return e.current.memoizedState.isDehydrated&&(Sc(e,t).flags|=256),e=Cm(e,t),e!==2&&(t=br,br=n,t!==null&&J0(t)),e}function J0(e){br===null?br=e:br.push.apply(br,e)}function QF(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Zi(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ua(e,t){for(t&=~xS,t&=~_g,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Wi(t),r=1<<n;e[n]=-1,t&=~r}}function Hk(e){if(qe&6)throw Error(ae(327));Gl();var t=tm(e,0);if(!(t&1))return Rr(e,Yt()),null;var n=Cm(e,t);if(e.tag!==0&&n===2){var r=S0(e);r!==0&&(t=r,n=K0(e,r))}if(n===1)throw n=Cf,Sc(e,0),ua(e,t),Rr(e,Yt()),n;if(n===6)throw Error(ae(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ic(e,br,$s),Rr(e,Yt()),null}function PS(e,t){var n=qe;qe|=1;try{return e(t)}finally{qe=n,qe===0&&(hu=Yt()+500,kg&&za())}}function xc(e){pa!==null&&pa.tag===0&&!(qe&6)&&Gl();var t=qe;qe|=1;var n=fi.transition,r=st;try{if(fi.transition=null,st=1,e)return e()}finally{st=r,fi.transition=n,qe=t,!(qe&6)&&za()}}function MS(){Vr=Al.current,Rt(Al)}function Sc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,RF(n)),nn!==null)for(n=nn.return;n!==null;){var r=n;switch(hS(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&om();break;case 3:du(),Rt(Tr),Rt(Yn),bS();break;case 5:SS(r);break;case 4:du();break;case 13:Rt(Ot);break;case 19:Rt(Ot);break;case 10:vS(r.type._context);break;case 22:case 23:MS()}n=n.return}if(An=e,nn=e=Na(e.current,null),On=Vr=t,fn=0,Cf=null,xS=_g=Rc=0,br=Gd=null,dc!==null){for(t=0;t<dc.length;t++)if(n=dc[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}dc=null}return e}function tx(e,t){do{var n=nn;try{if(gS(),vp.current=mm,pm){for(var r=Ft.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}pm=!1}if(_c=0,bn=ln=Ft=null,Ud=!1,gf=0,RS.current=null,n===null||n.return===null){fn=1,Cf=t,nn=null;break}e:{var s=e,o=n.return,a=n,c=t;if(t=On,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=xk(o);if(h!==null){h.flags&=-257,Nk(h,o,a,s,t),h.mode&1&&Rk(s,l,t),t=h,c=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}else{if(!(t&1)){Rk(s,l,t),DS();break e}c=Error(ae(426))}}else if(Dt&&a.mode&1){var y=xk(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Nk(y,o,a,s,t),pS(fu(c,a));break e}}s=c=fu(c,a),fn!==4&&(fn=2),Gd===null?Gd=[s]:Gd.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var g=FR(s,c,t);bk(s,g);break e;case 1:a=c;var v=s.type,S=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Ra===null||!Ra.has(S)))){s.flags|=65536,t&=-t,s.lanes|=t;var E=UR(s,a,t);bk(s,E);break e}}s=s.return}while(s!==null)}ix(n)}catch(k){t=k,nn===n&&n!==null&&(nn=n=n.return);continue}break}while(!0)}function nx(){var e=gm.current;return gm.current=mm,e===null?mm:e}function DS(){(fn===0||fn===3||fn===2)&&(fn=4),An===null||!(Rc&268435455)&&!(_g&268435455)||ua(An,On)}function Cm(e,t){var n=qe;qe|=2;var r=nx();(An!==e||On!==t)&&($s=null,Sc(e,t));do try{e3();break}catch(i){tx(e,i)}while(!0);if(gS(),qe=n,gm.current=r,nn!==null)throw Error(ae(261));return An=null,On=0,fn}function e3(){for(;nn!==null;)rx(nn)}function t3(){for(;nn!==null&&!EB();)rx(nn)}function rx(e){var t=ox(e.alternate,e,Vr);e.memoizedProps=e.pendingProps,t===null?ix(e):nn=t,RS.current=null}function ix(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=XF(n,t),n!==null){n.flags&=32767,nn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fn=6,nn=null;return}}else if(n=zF(n,t,Vr),n!==null){nn=n;return}if(t=t.sibling,t!==null){nn=t;return}nn=t=e}while(t!==null);fn===0&&(fn=5)}function ic(e,t,n){var r=st,i=fi.transition;try{fi.transition=null,st=1,n3(e,t,n,r)}finally{fi.transition=i,st=r}return null}function n3(e,t,n,r){do Gl();while(pa!==null);if(qe&6)throw Error(ae(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ae(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(LB(e,s),e===An&&(nn=An=null,On=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Uh||(Uh=!0,ax(em,function(){return Gl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=fi.transition,fi.transition=null;var o=st;st=1;var a=qe;qe|=4,RS.current=null,JF(e,n),qR(n,e),bF(T0),nm=!!E0,T0=E0=null,e.current=n,YF(n),TB(),qe=a,st=o,fi.transition=s}else e.current=n;if(Uh&&(Uh=!1,pa=e,ym=i),s=e.pendingLanes,s===0&&(Ra=null),xB(n.stateNode),Rr(e,Yt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(vm)throw vm=!1,e=z0,z0=null,e;return ym&1&&e.tag!==0&&Gl(),s=e.pendingLanes,s&1?e===X0?Wd++:(Wd=0,X0=e):Wd=0,za(),null}function Gl(){if(pa!==null){var e=B_(ym),t=fi.transition,n=st;try{if(fi.transition=null,st=16>e?16:e,pa===null)var r=!1;else{if(e=pa,pa=null,ym=0,qe&6)throw Error(ae(331));var i=qe;for(qe|=4,pe=e.current;pe!==null;){var s=pe,o=s.child;if(pe.flags&16){var a=s.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(pe=l;pe!==null;){var u=pe;switch(u.tag){case 0:case 11:case 15:Vd(8,u,s)}var d=u.child;if(d!==null)d.return=u,pe=d;else for(;pe!==null;){u=pe;var f=u.sibling,h=u.return;if(KR(u),u===l){pe=null;break}if(f!==null){f.return=h,pe=f;break}pe=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(m!==null)}}pe=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,pe=o;else e:for(;pe!==null;){if(s=pe,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Vd(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,pe=g;break e}pe=s.return}}var v=e.current;for(pe=v;pe!==null;){o=pe;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,pe=S;else e:for(o=v;pe!==null;){if(a=pe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Tg(9,a)}}catch(k){jt(a,a.return,k)}if(a===o){pe=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,pe=E;break e}pe=a.return}}if(qe=i,za(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(Cg,e)}catch{}r=!0}return r}finally{st=n,fi.transition=t}}return!1}function jk(e,t,n){t=fu(n,t),t=FR(e,t,1),e=_a(e,t,1),t=pr(),e!==null&&(qf(e,1,t),Rr(e,t))}function jt(e,t,n){if(e.tag===3)jk(e,e,n);else for(;t!==null;){if(t.tag===3){jk(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ra===null||!Ra.has(r))){e=fu(n,e),e=UR(t,e,1),t=_a(t,e,1),e=pr(),t!==null&&(qf(t,1,e),Rr(t,e));break}}t=t.return}}function r3(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=pr(),e.pingedLanes|=e.suspendedLanes&n,An===e&&(On&n)===n&&(fn===4||fn===3&&(On&130023424)===On&&500>Yt()-NS?Sc(e,0):xS|=n),Rr(e,t)}function sx(e,t){t===0&&(e.mode&1?(t=Rh,Rh<<=1,!(Rh&130023424)&&(Rh=4194304)):t=1);var n=pr();e=Po(e,t),e!==null&&(qf(e,t,n),Rr(e,n))}function i3(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sx(e,n)}function s3(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ae(314))}r!==null&&r.delete(t),sx(e,n)}var ox;ox=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tr.current)Ar=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Ar=!1,ZF(e,t,n);Ar=!!(e.flags&131072)}else Ar=!1,Dt&&t.flags&1048576&&lR(t,lm,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Cp(e,t),e=t.pendingProps;var i=cu(t,Yn.current);Vl(t,n),i=kS(null,t,r,e,i,n);var s=AS();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,_r(r)?(s=!0,am(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,CS(t),i.updater=Ag,t.stateNode=i,i._reactInternals=t,L0(t,r,e,n),t=U0(null,t,r,!0,s,n)):(t.tag=0,Dt&&s&&fS(t),rr(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Cp(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=a3(r),e=Si(r,e),i){case 0:t=F0(null,t,r,e,n);break e;case 1:t=Dk(null,t,r,e,n);break e;case 11:t=Pk(null,t,r,e,n);break e;case 14:t=Mk(null,t,r,Si(r.type,e),n);break e}throw Error(ae(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),F0(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),Dk(e,t,r,i,n);case 3:e:{if(HR(t),e===null)throw Error(ae(387));r=t.pendingProps,s=t.memoizedState,i=s.element,hR(e,t),fm(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=fu(Error(ae(423)),t),t=Ok(e,t,r,n,i);break e}else if(r!==i){i=fu(Error(ae(424)),t),t=Ok(e,t,r,n,i);break e}else for(zr=Ta(t.stateNode.containerInfo.firstChild),Kr=t,Dt=!0,Mi=null,n=vR(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(lu(),r===i){t=Mo(e,t,n);break e}rr(e,t,r,n)}t=t.child}return t;case 5:return yR(t),e===null&&M0(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,_0(r,i)?o=null:s!==null&&_0(r,s)&&(t.flags|=32),WR(e,t),rr(e,t,o,n),t.child;case 6:return e===null&&M0(t),null;case 13:return jR(e,t,n);case 4:return IS(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=uu(t,null,r,n):rr(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),Pk(e,t,r,i,n);case 7:return rr(e,t,t.pendingProps,n),t.child;case 8:return rr(e,t,t.pendingProps.children,n),t.child;case 12:return rr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,wt(um,r._currentValue),r._currentValue=o,s!==null)if(Zi(s.value,o)){if(s.children===i.children&&!Tr.current){t=Mo(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(s.tag===1){c=Eo(-1,n&-n),c.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}s.lanes|=n,c=s.alternate,c!==null&&(c.lanes|=n),D0(s.return,n,t),a.lanes|=n;break}c=c.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ae(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),D0(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}rr(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Vl(t,n),i=hi(i),r=r(i),t.flags|=1,rr(e,t,r,n),t.child;case 14:return r=t.type,i=Si(r,t.pendingProps),i=Si(r.type,i),Mk(e,t,r,i,n);case 15:return VR(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Si(r,i),Cp(e,t),t.tag=1,_r(r)?(e=!0,am(t)):e=!1,Vl(t,n),mR(t,r,i),L0(t,r,i,n),U0(null,t,r,!0,e,n);case 19:return $R(e,t,n);case 22:return GR(e,t,n)}throw Error(ae(156,t.tag))};function ax(e,t){return M_(e,t)}function o3(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ci(e,t,n,r){return new o3(e,t,n,r)}function OS(e){return e=e.prototype,!(!e||!e.isReactComponent)}function a3(e){if(typeof e=="function")return OS(e)?1:0;if(e!=null){if(e=e.$$typeof,e===eS)return 11;if(e===tS)return 14}return 2}function Na(e,t){var n=e.alternate;return n===null?(n=ci(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function bp(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")OS(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case ml:return bc(n.children,i,s,t);case QI:o=8,i|=8;break;case o0:return e=ci(12,n,t,i|2),e.elementType=o0,e.lanes=s,e;case a0:return e=ci(13,n,t,i),e.elementType=a0,e.lanes=s,e;case c0:return e=ci(19,n,t,i),e.elementType=c0,e.lanes=s,e;case g_:return Rg(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case p_:o=10;break e;case m_:o=9;break e;case eS:o=11;break e;case tS:o=14;break e;case ra:o=16,r=null;break e}throw Error(ae(130,e==null?e:typeof e,""))}return t=ci(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function bc(e,t,n,r){return e=ci(7,e,r,t),e.lanes=n,e}function Rg(e,t,n,r){return e=ci(22,e,r,t),e.elementType=g_,e.lanes=n,e.stateNode={isHidden:!1},e}function uy(e,t,n){return e=ci(6,e,null,t),e.lanes=n,e}function dy(e,t,n){return t=ci(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function c3(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$v(0),this.expirationTimes=$v(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$v(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function LS(e,t,n,r,i,s,o,a,c){return e=new c3(e,t,n,a,c),t===1?(t=1,s===!0&&(t|=8)):t=0,s=ci(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},CS(s),e}function l3(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pl,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function cx(e){if(!e)return Ua;e=e._reactInternals;e:{if(jc(e)!==e||e.tag!==1)throw Error(ae(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(_r(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ae(171))}if(e.tag===1){var n=e.type;if(_r(n))return aR(e,n,t)}return t}function lx(e,t,n,r,i,s,o,a,c){return e=LS(n,r,!0,e,i,s,o,a,c),e.context=cx(null),n=e.current,r=pr(),i=xa(n),s=Eo(r,i),s.callback=t??null,_a(n,s,i),e.current.lanes=i,qf(e,i,r),Rr(e,r),e}function xg(e,t,n,r){var i=t.current,s=pr(),o=xa(i);return n=cx(n),t.context===null?t.context=n:t.pendingContext=n,t=Eo(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_a(i,t,o),e!==null&&(Hi(e,i,o,s),gp(e,i,o)),o}function Im(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $k(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function BS(e,t){$k(e,t),(e=e.alternate)&&$k(e,t)}function u3(){return null}var ux=typeof reportError=="function"?reportError:function(e){console.error(e)};function FS(e){this._internalRoot=e}Ng.prototype.render=FS.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ae(409));xg(e,t,null,null)};Ng.prototype.unmount=FS.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;xc(function(){xg(null,e,null,null)}),t[No]=null}};function Ng(e){this._internalRoot=e}Ng.prototype.unstable_scheduleHydration=function(e){if(e){var t=V_();e={blockedOn:null,target:e,priority:t};for(var n=0;n<la.length&&t!==0&&t<la[n].priority;n++);la.splice(n,0,e),n===0&&W_(e)}};function US(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Zk(){}function d3(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=Im(o);s.call(l)}}var o=lx(t,r,e,0,null,!1,!1,"",Zk);return e._reactRootContainer=o,e[No]=o.current,df(e.nodeType===8?e.parentNode:e),xc(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Im(c);a.call(l)}}var c=LS(e,0,!1,null,null,!1,!1,"",Zk);return e._reactRootContainer=c,e[No]=c.current,df(e.nodeType===8?e.parentNode:e),xc(function(){xg(t,c,n,r)}),c}function Mg(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var c=Im(o);a.call(c)}}xg(t,o,e,i)}else o=d3(n,t,e,i,r);return Im(o)}F_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sd(t.pendingLanes);n!==0&&(iS(t,n|1),Rr(t,Yt()),!(qe&6)&&(hu=Yt()+500,za()))}break;case 13:xc(function(){var r=Po(e,1);if(r!==null){var i=pr();Hi(r,e,1,i)}}),BS(e,1)}};sS=function(e){if(e.tag===13){var t=Po(e,134217728);if(t!==null){var n=pr();Hi(t,e,134217728,n)}BS(e,134217728)}};U_=function(e){if(e.tag===13){var t=xa(e),n=Po(e,t);if(n!==null){var r=pr();Hi(n,e,t,r)}BS(e,t)}};V_=function(){return st};G_=function(e,t){var n=st;try{return st=e,t()}finally{st=n}};y0=function(e,t,n){switch(t){case"input":if(d0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wg(r);if(!i)throw Error(ae(90));y_(r),d0(r,i)}}}break;case"textarea":I_(e,n);break;case"select":t=n.value,t!=null&&Ll(e,!!n.multiple,t,!1)}};T_=PS;__=xc;var f3={usingClientEntryPoint:!1,Events:[eh,Cl,wg,A_,E_,PS]},id={findFiberByHostInstance:uc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},h3={bundleType:id.bundleType,version:id.version,rendererPackageName:id.rendererPackageName,rendererConfig:id.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vo.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=N_(e),e===null?null:e.stateNode},findFiberByHostInstance:id.findFiberByHostInstance||u3,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vh.isDisabled&&Vh.supportsFiber)try{Cg=Vh.inject(h3),Ps=Vh}catch{}}Qr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=f3;Qr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!US(t))throw Error(ae(200));return l3(e,t,null,n)};Qr.createRoot=function(e,t){if(!US(e))throw Error(ae(299));var n=!1,r="",i=ux;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=LS(e,1,!1,null,null,n,!1,r,i),e[No]=t.current,df(e.nodeType===8?e.parentNode:e),new FS(t)};Qr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ae(188)):(e=Object.keys(e).join(","),Error(ae(268,e)));return e=N_(t),e=e===null?null:e.stateNode,e};Qr.flushSync=function(e){return xc(e)};Qr.hydrate=function(e,t,n){if(!Pg(t))throw Error(ae(200));return Mg(null,e,t,!0,n)};Qr.hydrateRoot=function(e,t,n){if(!US(e))throw Error(ae(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=ux;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=lx(t,null,e,1,n??null,i,!1,s,o),e[No]=t.current,df(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ng(t)};Qr.render=function(e,t,n){if(!Pg(t))throw Error(ae(200));return Mg(null,e,t,!1,n)};Qr.unmountComponentAtNode=function(e){if(!Pg(e))throw Error(ae(40));return e._reactRootContainer?(xc(function(){Mg(null,null,e,!1,function(){e._reactRootContainer=null,e[No]=null})}),!0):!1};Qr.unstable_batchedUpdates=PS;Qr.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pg(n))throw Error(ae(200));if(e==null||e._reactInternals===void 0)throw Error(ae(38));return Mg(e,t,n,!1,r)};Qr.version="18.2.0-next-9e3b772b8-20220608";function dx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dx)}catch(e){console.error(e)}}dx(),l_.exports=Qr;var VS=l_.exports;const p3=Jf(VS),m3=qT({__proto__:null,default:p3},[VS]);var zk=VS;i0.createRoot=zk.createRoot,i0.hydrateRoot=zk.hydrateRoot;/**
 * @remix-run/router v1.14.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $t(){return $t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$t.apply(this,arguments)}var Xt;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Xt||(Xt={}));const Xk="popstate";function g3(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return If("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:nh(i)}return y3(t,n,null,e)}function Ke(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Nc(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function v3(){return Math.random().toString(36).substr(2,8)}function Kk(e,t){return{usr:e.state,key:e.key,idx:t}}function If(e,t,n,r){return n===void 0&&(n=null),$t({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Go(t):t,{state:n,key:t&&t.key||r||v3()})}function nh(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Go(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y3(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Xt.Pop,c=null,l=u();l==null&&(l=0,o.replaceState($t({},o.state,{idx:l}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=Xt.Pop;let y=u(),g=y==null?null:y-l;l=y,c&&c({action:a,location:m.location,delta:g})}function f(y,g){a=Xt.Push;let v=If(m.location,y,g);n&&n(v,y),l=u()+1;let S=Kk(v,l),E=m.createHref(v);try{o.pushState(S,"",E)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(E)}s&&c&&c({action:a,location:m.location,delta:1})}function h(y,g){a=Xt.Replace;let v=If(m.location,y,g);n&&n(v,y),l=u();let S=Kk(v,l),E=m.createHref(v);o.replaceState(S,"",E),s&&c&&c({action:a,location:m.location,delta:0})}function p(y){let g=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof y=="string"?y:nh(y);return Ke(g,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,g)}let m={get action(){return a},get location(){return e(i,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(Xk,d),c=y,()=>{i.removeEventListener(Xk,d),c=null}},createHref(y){return t(i,y)},createURL:p,encodeLocation(y){let g=p(y);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:h,go(y){return o.go(y)}};return m}var Ht;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Ht||(Ht={}));const C3=new Set(["lazy","caseSensitive","path","id","index","children"]);function I3(e){return e.index===!0}function Y0(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(Ke(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ke(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),I3(i)){let c=$t({},i,t(i),{id:a});return r[a]=c,c}else{let c=$t({},i,t(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=Y0(i.children,t,o,r)),c}})}function El(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?Go(t):t,i=rh(r.pathname||"/",n);if(i==null)return null;let s=fx(e);b3(s);let o=null;for(let a=0;o==null&&a<s.length;++a)o=N3(s[a],D3(i));return o}function S3(e,t){let{route:n,pathname:r,params:i}=e;return{id:n.id,pathname:r,params:i,data:t[n.id],handle:n.handle}}function fx(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let c={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Ke(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=wc([r,c.relativePath]),u=n.concat(c);s.children&&s.children.length>0&&(Ke(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),fx(s.children,t,u,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:R3(l,s.index),routesMeta:u})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let c of hx(s.path))i(s,o,c)}),t}function hx(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=hx(r.join("/")),a=[];return a.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&a.push(...o),a.map(c=>e.startsWith("/")&&c===""?"/":c)}function b3(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:x3(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const w3=/^:\w+$/,k3=3,A3=2,E3=1,T3=10,_3=-2,Jk=e=>e==="*";function R3(e,t){let n=e.split("/"),r=n.length;return n.some(Jk)&&(r+=_3),t&&(r+=A3),n.filter(i=>!Jk(i)).reduce((i,s)=>i+(w3.test(s)?k3:s===""?E3:T3),r)}function x3(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function N3(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],c=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",u=P3({path:a.relativePath,caseSensitive:a.caseSensitive,end:c},l);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:wc([i,u.pathname]),pathnameBase:V3(wc([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=wc([i,u.pathnameBase]))}return s}function P3(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=M3(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:f,isOptional:h}=u;if(f==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return h&&!p?l[f]=void 0:l[f]=O3(p||"",f),l},{}),pathname:s,pathnameBase:o,pattern:e}}function M3(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Nc(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(o,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function D3(e){try{return decodeURI(e)}catch(t){return Nc(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function O3(e,t){try{return decodeURIComponent(e)}catch(n){return Nc(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),e}}function rh(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function L3(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Go(e):e;return{pathname:n?n.startsWith("/")?n:B3(n,t):t,search:G3(r),hash:W3(i)}}function B3(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function fy(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function px(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function F3(e,t){let n=px(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function U3(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Go(e):(i=$t({},e),Ke(!i.pathname||!i.pathname.includes("?"),fy("?","pathname","search",i)),Ke(!i.pathname||!i.pathname.includes("#"),fy("#","pathname","hash",i)),Ke(!i.search||!i.search.includes("#"),fy("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=t.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}a=d>=0?t[d]:"/"}let c=L3(i,a),l=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const wc=e=>e.join("/").replace(/\/\/+/g,"/"),V3=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),G3=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,W3=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class GS{constructor(t,n,r,i){i===void 0&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function mx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gx=["post","put","patch","delete"],H3=new Set(gx),j3=["get",...gx],$3=new Set(j3),Z3=new Set([301,302,303,307,308]),z3=new Set([307,308]),hy={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},X3={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},sd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vx=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,K3=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),yx="remix-router-transitions";function J3(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;Ke(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let F=e.detectErrorBoundary;i=$=>({hasErrorBoundary:F($)})}else i=K3;let s={},o=Y0(e.routes,i,void 0,s),a,c=e.basename||"/",l=$t({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},e.future),u=null,d=new Set,f=null,h=null,p=null,m=e.hydrationData!=null,y=El(o,e.history.location,c),g=null;if(y==null){let F=ii(404,{pathname:e.history.location.pathname}),{matches:$,route:ee}=i1(o);y=$,g={[ee.id]:F}}let v,S=y.some(F=>F.route.lazy),E=y.some(F=>F.route.loader);if(S)v=!1;else if(!E)v=!0;else if(l.v7_partialHydration){let F=e.hydrationData?e.hydrationData.loaderData:null,$=e.hydrationData?e.hydrationData.errors:null;v=y.every(ee=>ee.route.loader&&ee.route.loader.hydrate!==!0&&(F&&F[ee.route.id]!==void 0||$&&$[ee.route.id]!==void 0))}else v=e.hydrationData!=null;let k,b={historyAction:e.history.action,location:e.history.location,matches:y,initialized:v,navigation:hy,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||g,fetchers:new Map,blockers:new Map},A=Xt.Pop,_=!1,x,P=!1,D=new Map,B=null,V=!1,G=!1,Z=[],z=[],te=new Map,j=0,K=-1,ie=new Map,X=new Set,se=new Map,ke=new Map,Ae=new Set,ge=new Map,Te=new Map,He=!1;function ce(){if(u=e.history.listen(F=>{let{action:$,location:ee,delta:de}=F;if(He){He=!1;return}Nc(Te.size===0||de!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ce=lt({currentLocation:b.location,nextLocation:ee,historyAction:$});if(Ce&&de!=null){He=!0,e.history.go(de*-1),ct(Ce,{state:"blocked",location:ee,proceed(){ct(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:ee}),e.history.go(de)},reset(){let $e=new Map(b.blockers);$e.set(Ce,sd),Nt({blockers:$e})}});return}return le($,ee)}),n){a5(t,D);let F=()=>c5(t,D);t.addEventListener("pagehide",F),B=()=>t.removeEventListener("pagehide",F)}return b.initialized||le(Xt.Pop,b.location,{initialHydration:!0}),k}function Gt(){u&&u(),B&&B(),d.clear(),x&&x.abort(),b.fetchers.forEach((F,$)=>T($)),b.blockers.forEach((F,$)=>De($))}function gn(F){return d.add(F),()=>d.delete(F)}function Nt(F,$){$===void 0&&($={}),b=$t({},b,F);let ee=[],de=[];l.v7_fetcherPersist&&b.fetchers.forEach((Ce,$e)=>{Ce.state==="idle"&&(Ae.has($e)?de.push($e):ee.push($e))}),[...d].forEach(Ce=>Ce(b,{deletedFetchers:de,unstable_viewTransitionOpts:$.viewTransitionOpts,unstable_flushSync:$.flushSync===!0})),l.v7_fetcherPersist&&(ee.forEach(Ce=>b.fetchers.delete(Ce)),de.forEach(Ce=>T(Ce)))}function Tn(F,$,ee){var de,Ce;let{flushSync:$e}=ee===void 0?{}:ee,Ne=b.actionData!=null&&b.navigation.formMethod!=null&&Ni(b.navigation.formMethod)&&b.navigation.state==="loading"&&((de=F.state)==null?void 0:de._isRedirect)!==!0,Re;$.actionData?Object.keys($.actionData).length>0?Re=$.actionData:Re=null:Ne?Re=b.actionData:Re=null;let be=$.loaderData?r1(b.loaderData,$.loaderData,$.matches||[],$.errors):b.loaderData,Xe=b.blockers;Xe.size>0&&(Xe=new Map(Xe),Xe.forEach((vt,Rn)=>Xe.set(Rn,sd)));let vn=_===!0||b.navigation.formMethod!=null&&Ni(b.navigation.formMethod)&&((Ce=F.state)==null?void 0:Ce._isRedirect)!==!0;a&&(o=a,a=void 0),V||A===Xt.Pop||(A===Xt.Push?e.history.push(F,F.state):A===Xt.Replace&&e.history.replace(F,F.state));let Fe;if(A===Xt.Pop){let vt=D.get(b.location.pathname);vt&&vt.has(F.pathname)?Fe={currentLocation:b.location,nextLocation:F}:D.has(F.pathname)&&(Fe={currentLocation:F,nextLocation:b.location})}else if(P){let vt=D.get(b.location.pathname);vt?vt.add(F.pathname):(vt=new Set([F.pathname]),D.set(b.location.pathname,vt)),Fe={currentLocation:b.location,nextLocation:F}}Nt($t({},$,{actionData:Re,loaderData:be,historyAction:A,location:F,initialized:!0,navigation:hy,revalidation:"idle",restoreScrollPosition:Fw(F,$.matches||b.matches),preventScrollReset:vn,blockers:Xe}),{viewTransitionOpts:Fe,flushSync:$e===!0}),A=Xt.Pop,_=!1,P=!1,V=!1,G=!1,Z=[],z=[]}async function rn(F,$){if(typeof F=="number"){e.history.go(F);return}let ee=q0(b.location,b.matches,c,l.v7_prependBasename,F,l.v7_relativeSplatPath,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:de,submission:Ce,error:$e}=Yk(l.v7_normalizeFormMethod,!1,ee,$),Ne=b.location,Re=If(b.location,de,$&&$.state);Re=$t({},Re,e.history.encodeLocation(Re));let be=$&&$.replace!=null?$.replace:void 0,Xe=Xt.Push;be===!0?Xe=Xt.Replace:be===!1||Ce!=null&&Ni(Ce.formMethod)&&Ce.formAction===b.location.pathname+b.location.search&&(Xe=Xt.Replace);let vn=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,Fe=($&&$.unstable_flushSync)===!0,vt=lt({currentLocation:Ne,nextLocation:Re,historyAction:Xe});if(vt){ct(vt,{state:"blocked",location:Re,proceed(){ct(vt,{state:"proceeding",proceed:void 0,reset:void 0,location:Re}),rn(F,$)},reset(){let Rn=new Map(b.blockers);Rn.set(vt,sd),Nt({blockers:Rn})}});return}return await le(Xe,Re,{submission:Ce,pendingError:$e,preventScrollReset:vn,replace:$&&$.replace,enableViewTransition:$&&$.unstable_viewTransition,flushSync:Fe})}function _n(){if(zt(),Nt({revalidation:"loading"}),b.navigation.state!=="submitting"){if(b.navigation.state==="idle"){le(b.historyAction,b.location,{startUninterruptedRevalidation:!0});return}le(A||b.historyAction,b.navigation.location,{overrideNavigation:b.navigation})}}async function le(F,$,ee){x&&x.abort(),x=null,A=F,V=(ee&&ee.startUninterruptedRevalidation)===!0,L2(b.location,b.matches),_=(ee&&ee.preventScrollReset)===!0,P=(ee&&ee.enableViewTransition)===!0;let de=a||o,Ce=ee&&ee.overrideNavigation,$e=El(de,$,c),Ne=(ee&&ee.flushSync)===!0;if(!$e){let Rn=ii(404,{pathname:$.pathname}),{matches:ni,route:yn}=i1(de);gt(),Tn($,{matches:ni,loaderData:{},errors:{[yn.id]:Rn}},{flushSync:Ne});return}if(b.initialized&&!G&&t5(b.location,$)&&!(ee&&ee.submission&&Ni(ee.submission.formMethod))){Tn($,{matches:$e},{flushSync:Ne});return}x=new AbortController;let Re=ad(e.history,$,x.signal,ee&&ee.submission),be,Xe;if(ee&&ee.pendingError)Xe={[Hd($e).route.id]:ee.pendingError};else if(ee&&ee.submission&&Ni(ee.submission.formMethod)){let Rn=await Se(Re,$,ee.submission,$e,{replace:ee.replace,flushSync:Ne});if(Rn.shortCircuited)return;be=Rn.pendingActionData,Xe=Rn.pendingActionError,Ce=py($,ee.submission),Ne=!1,Re=new Request(Re.url,{signal:Re.signal})}let{shortCircuited:vn,loaderData:Fe,errors:vt}=await nt(Re,$,$e,Ce,ee&&ee.submission,ee&&ee.fetcherSubmission,ee&&ee.replace,ee&&ee.initialHydration===!0,Ne,be,Xe);vn||(x=null,Tn($,$t({matches:$e},be?{actionData:be}:{},{loaderData:Fe,errors:vt})))}async function Se(F,$,ee,de,Ce){Ce===void 0&&(Ce={}),zt();let $e=s5($,ee);Nt({navigation:$e},{flushSync:Ce.flushSync===!0});let Ne,Re=eC(de,$);if(!Re.route.action&&!Re.route.lazy)Ne={type:Ht.error,error:ii(405,{method:F.method,pathname:$.pathname,routeId:Re.route.id})};else if(Ne=await od("action",F,Re,de,s,i,c,l.v7_relativeSplatPath),F.signal.aborted)return{shortCircuited:!0};if(pc(Ne)){let be;return Ce&&Ce.replace!=null?be=Ce.replace:be=Ne.location===b.location.pathname+b.location.search,await xe(b,Ne,{submission:ee,replace:be}),{shortCircuited:!0}}if(Tl(Ne)){let be=Hd(de,Re.route.id);return(Ce&&Ce.replace)!==!0&&(A=Xt.Push),{pendingActionData:{},pendingActionError:{[be.route.id]:Ne.error}}}if(hc(Ne))throw ii(400,{type:"defer-action"});return{pendingActionData:{[Re.route.id]:Ne.data}}}async function nt(F,$,ee,de,Ce,$e,Ne,Re,be,Xe,vn){let Fe=de||py($,Ce),vt=Ce||$e||a1(Fe),Rn=a||o,[ni,yn]=qk(e.history,b,ee,vt,$,l.v7_partialHydration&&Re===!0,G,Z,z,Ae,se,X,Rn,c,Xe,vn);if(gt(ut=>!(ee&&ee.some(Pt=>Pt.route.id===ut))||ni&&ni.some(Pt=>Pt.route.id===ut)),K=++j,ni.length===0&&yn.length===0){let ut=O();return Tn($,$t({matches:ee,loaderData:{},errors:vn||null},Xe?{actionData:Xe}:{},ut?{fetchers:new Map(b.fetchers)}:{}),{flushSync:be}),{shortCircuited:!0}}if(!V&&(!l.v7_partialHydration||!Re)){yn.forEach(Pt=>{let qi=b.fetchers.get(Pt.key),bh=cd(void 0,qi?qi.data:void 0);b.fetchers.set(Pt.key,bh)});let ut=Xe||b.actionData;Nt($t({navigation:Fe},ut?Object.keys(ut).length===0?{actionData:null}:{actionData:ut}:{},yn.length>0?{fetchers:new Map(b.fetchers)}:{}),{flushSync:be})}yn.forEach(ut=>{te.has(ut.key)&&I(ut.key),ut.controller&&te.set(ut.key,ut.controller)});let tl=()=>yn.forEach(ut=>I(ut.key));x&&x.signal.addEventListener("abort",tl);let{results:Ov,loaderResults:nl,fetcherResults:Zo}=await je(b.matches,ee,ni,yn,F);if(F.signal.aborted)return{shortCircuited:!0};x&&x.signal.removeEventListener("abort",tl),yn.forEach(ut=>te.delete(ut.key));let tc=s1(Ov);if(tc){if(tc.idx>=ni.length){let ut=yn[tc.idx-ni.length].key;X.add(ut)}return await xe(b,tc.result,{replace:Ne}),{shortCircuited:!0}}let{loaderData:Lv,errors:Bv}=n1(b,ee,ni,nl,vn,yn,Zo,ge);ge.forEach((ut,Pt)=>{ut.subscribe(qi=>{(qi||ut.done)&&ge.delete(Pt)})});let Fv=O(),rl=H(K),Sh=Fv||rl||yn.length>0;return $t({loaderData:Lv,errors:Bv},Sh?{fetchers:new Map(b.fetchers)}:{})}function Qe(F,$,ee,de){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");te.has(F)&&I(F);let Ce=(de&&de.unstable_flushSync)===!0,$e=a||o,Ne=q0(b.location,b.matches,c,l.v7_prependBasename,ee,l.v7_relativeSplatPath,$,de==null?void 0:de.relative),Re=El($e,Ne,c);if(!Re){Qt(F,$,ii(404,{pathname:Ne}),{flushSync:Ce});return}let{path:be,submission:Xe,error:vn}=Yk(l.v7_normalizeFormMethod,!0,Ne,de);if(vn){Qt(F,$,vn,{flushSync:Ce});return}let Fe=eC(Re,be);if(_=(de&&de.preventScrollReset)===!0,Xe&&Ni(Xe.formMethod)){ue(F,$,be,Fe,Re,Ce,Xe);return}se.set(F,{routeId:$,path:be}),Ue(F,$,be,Fe,Re,Ce,Xe)}async function ue(F,$,ee,de,Ce,$e,Ne){if(zt(),se.delete(F),!de.route.action&&!de.route.lazy){let Pt=ii(405,{method:Ne.formMethod,pathname:ee,routeId:$});Qt(F,$,Pt,{flushSync:$e});return}let Re=b.fetchers.get(F);Be(F,o5(Ne,Re),{flushSync:$e});let be=new AbortController,Xe=ad(e.history,ee,be.signal,Ne);te.set(F,be);let vn=j,Fe=await od("action",Xe,de,Ce,s,i,c,l.v7_relativeSplatPath);if(Xe.signal.aborted){te.get(F)===be&&te.delete(F);return}if(l.v7_fetcherPersist&&Ae.has(F)){if(pc(Fe)||Tl(Fe)){Be(F,Yo(void 0));return}}else{if(pc(Fe))if(te.delete(F),K>vn){Be(F,Yo(void 0));return}else return X.add(F),Be(F,cd(Ne)),xe(b,Fe,{fetcherSubmission:Ne});if(Tl(Fe)){Qt(F,$,Fe.error);return}}if(hc(Fe))throw ii(400,{type:"defer-action"});let vt=b.navigation.location||b.location,Rn=ad(e.history,vt,be.signal),ni=a||o,yn=b.navigation.state!=="idle"?El(ni,b.navigation.location,c):b.matches;Ke(yn,"Didn't find any matches after fetcher action");let tl=++j;ie.set(F,tl);let Ov=cd(Ne,Fe.data);b.fetchers.set(F,Ov);let[nl,Zo]=qk(e.history,b,yn,Ne,vt,!1,G,Z,z,Ae,se,X,ni,c,{[de.route.id]:Fe.data},void 0);Zo.filter(Pt=>Pt.key!==F).forEach(Pt=>{let qi=Pt.key,bh=b.fetchers.get(qi),F2=cd(void 0,bh?bh.data:void 0);b.fetchers.set(qi,F2),te.has(qi)&&I(qi),Pt.controller&&te.set(qi,Pt.controller)}),Nt({fetchers:new Map(b.fetchers)});let tc=()=>Zo.forEach(Pt=>I(Pt.key));be.signal.addEventListener("abort",tc);let{results:Lv,loaderResults:Bv,fetcherResults:Fv}=await je(b.matches,yn,nl,Zo,Rn);if(be.signal.aborted)return;be.signal.removeEventListener("abort",tc),ie.delete(F),te.delete(F),Zo.forEach(Pt=>te.delete(Pt.key));let rl=s1(Lv);if(rl){if(rl.idx>=nl.length){let Pt=Zo[rl.idx-nl.length].key;X.add(Pt)}return xe(b,rl.result)}let{loaderData:Sh,errors:ut}=n1(b,b.matches,nl,Bv,void 0,Zo,Fv,ge);if(b.fetchers.has(F)){let Pt=Yo(Fe.data);b.fetchers.set(F,Pt)}H(tl),b.navigation.state==="loading"&&tl>K?(Ke(A,"Expected pending action"),x&&x.abort(),Tn(b.navigation.location,{matches:yn,loaderData:Sh,errors:ut,fetchers:new Map(b.fetchers)})):(Nt({errors:ut,loaderData:r1(b.loaderData,Sh,yn,ut),fetchers:new Map(b.fetchers)}),G=!1)}async function Ue(F,$,ee,de,Ce,$e,Ne){let Re=b.fetchers.get(F);Be(F,cd(Ne,Re?Re.data:void 0),{flushSync:$e});let be=new AbortController,Xe=ad(e.history,ee,be.signal);te.set(F,be);let vn=j,Fe=await od("loader",Xe,de,Ce,s,i,c,l.v7_relativeSplatPath);if(hc(Fe)&&(Fe=await Sx(Fe,Xe.signal,!0)||Fe),te.get(F)===be&&te.delete(F),!Xe.signal.aborted){if(Ae.has(F)){Be(F,Yo(void 0));return}if(pc(Fe))if(K>vn){Be(F,Yo(void 0));return}else{X.add(F),await xe(b,Fe);return}if(Tl(Fe)){Qt(F,$,Fe.error);return}Ke(!hc(Fe),"Unhandled fetcher deferred data"),Be(F,Yo(Fe.data))}}async function xe(F,$,ee){let{submission:de,fetcherSubmission:Ce,replace:$e}=ee===void 0?{}:ee;$.revalidate&&(G=!0);let Ne=If(F.location,$.location,{_isRedirect:!0});if(Ke(Ne,"Expected a location on the redirect navigation"),n){let vt=!1;if($.reloadDocument)vt=!0;else if(vx.test($.location)){const Rn=e.history.createURL($.location);vt=Rn.origin!==t.location.origin||rh(Rn.pathname,c)==null}if(vt){$e?t.location.replace($.location):t.location.assign($.location);return}}x=null;let Re=$e===!0?Xt.Replace:Xt.Push,{formMethod:be,formAction:Xe,formEncType:vn}=F.navigation;!de&&!Ce&&be&&Xe&&vn&&(de=a1(F.navigation));let Fe=de||Ce;if(z3.has($.status)&&Fe&&Ni(Fe.formMethod))await le(Re,Ne,{submission:$t({},Fe,{formAction:$.location}),preventScrollReset:_});else{let vt=py(Ne,de);await le(Re,Ne,{overrideNavigation:vt,fetcherSubmission:Ce,preventScrollReset:_})}}async function je(F,$,ee,de,Ce){let $e=await Promise.all([...ee.map(be=>od("loader",Ce,be,$,s,i,c,l.v7_relativeSplatPath)),...de.map(be=>be.matches&&be.match&&be.controller?od("loader",ad(e.history,be.path,be.controller.signal),be.match,be.matches,s,i,c,l.v7_relativeSplatPath):{type:Ht.error,error:ii(404,{pathname:be.path})})]),Ne=$e.slice(0,ee.length),Re=$e.slice(ee.length);return await Promise.all([o1(F,ee,Ne,Ne.map(()=>Ce.signal),!1,b.loaderData),o1(F,de.map(be=>be.match),Re,de.map(be=>be.controller?be.controller.signal:null),!0)]),{results:$e,loaderResults:Ne,fetcherResults:Re}}function zt(){G=!0,Z.push(...gt()),se.forEach((F,$)=>{te.has($)&&(z.push($),I($))})}function Be(F,$,ee){ee===void 0&&(ee={}),b.fetchers.set(F,$),Nt({fetchers:new Map(b.fetchers)},{flushSync:(ee&&ee.flushSync)===!0})}function Qt(F,$,ee,de){de===void 0&&(de={});let Ce=Hd(b.matches,$);T(F),Nt({errors:{[Ce.route.id]:ee},fetchers:new Map(b.fetchers)},{flushSync:(de&&de.flushSync)===!0})}function el(F){return l.v7_fetcherPersist&&(ke.set(F,(ke.get(F)||0)+1),Ae.has(F)&&Ae.delete(F)),b.fetchers.get(F)||X3}function T(F){let $=b.fetchers.get(F);te.has(F)&&!($&&$.state==="loading"&&ie.has(F))&&I(F),se.delete(F),ie.delete(F),X.delete(F),Ae.delete(F),b.fetchers.delete(F)}function C(F){if(l.v7_fetcherPersist){let $=(ke.get(F)||0)-1;$<=0?(ke.delete(F),Ae.add(F)):ke.set(F,$)}else T(F);Nt({fetchers:new Map(b.fetchers)})}function I(F){let $=te.get(F);Ke($,"Expected fetch controller: "+F),$.abort(),te.delete(F)}function N(F){for(let $ of F){let ee=el($),de=Yo(ee.data);b.fetchers.set($,de)}}function O(){let F=[],$=!1;for(let ee of X){let de=b.fetchers.get(ee);Ke(de,"Expected fetcher: "+ee),de.state==="loading"&&(X.delete(ee),F.push(ee),$=!0)}return N(F),$}function H(F){let $=[];for(let[ee,de]of ie)if(de<F){let Ce=b.fetchers.get(ee);Ke(Ce,"Expected fetcher: "+ee),Ce.state==="loading"&&(I(ee),ie.delete(ee),$.push(ee))}return N($),$.length>0}function Q(F,$){let ee=b.blockers.get(F)||sd;return Te.get(F)!==$&&Te.set(F,$),ee}function De(F){b.blockers.delete(F),Te.delete(F)}function ct(F,$){let ee=b.blockers.get(F)||sd;Ke(ee.state==="unblocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="blocked"||ee.state==="blocked"&&$.state==="proceeding"||ee.state==="blocked"&&$.state==="unblocked"||ee.state==="proceeding"&&$.state==="unblocked","Invalid blocker state transition: "+ee.state+" -> "+$.state);let de=new Map(b.blockers);de.set(F,$),Nt({blockers:de})}function lt(F){let{currentLocation:$,nextLocation:ee,historyAction:de}=F;if(Te.size===0)return;Te.size>1&&Nc(!1,"A router only supports one blocker at a time");let Ce=Array.from(Te.entries()),[$e,Ne]=Ce[Ce.length-1],Re=b.blockers.get($e);if(!(Re&&Re.state==="proceeding")&&Ne({currentLocation:$,nextLocation:ee,historyAction:de}))return $e}function gt(F){let $=[];return ge.forEach((ee,de)=>{(!F||F(de))&&(ee.cancel(),$.push(de),ge.delete(de))}),$}function rt(F,$,ee){if(f=F,p=$,h=ee||null,!m&&b.navigation===hy){m=!0;let de=Fw(b.location,b.matches);de!=null&&Nt({restoreScrollPosition:de})}return()=>{f=null,p=null,h=null}}function Bw(F,$){return h&&h(F,$.map(de=>S3(de,b.loaderData)))||F.key}function L2(F,$){if(f&&p){let ee=Bw(F,$);f[ee]=p()}}function Fw(F,$){if(f){let ee=Bw(F,$),de=f[ee];if(typeof de=="number")return de}return null}function B2(F){s={},a=Y0(F,i,void 0,s)}return k={get basename(){return c},get future(){return l},get state(){return b},get routes(){return o},get window(){return t},initialize:ce,subscribe:gn,enableScrollRestoration:rt,navigate:rn,fetch:Qe,revalidate:_n,createHref:F=>e.history.createHref(F),encodeLocation:F=>e.history.encodeLocation(F),getFetcher:el,deleteFetcher:C,dispose:Gt,getBlocker:Q,deleteBlocker:De,_internalFetchControllers:te,_internalActiveDeferreds:ge,_internalSetRoutes:B2},k}function Y3(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function q0(e,t,n,r,i,s,o,a){let c,l;if(o){c=[];for(let d of t)if(c.push(d),d.route.id===o){l=d;break}}else c=t,l=t[t.length-1];let u=U3(i||".",F3(c,s),rh(e.pathname,n)||e.pathname,a==="path");return i==null&&(u.search=e.search,u.hash=e.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!WS(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:wc([n,u.pathname])),nh(u)}function Yk(e,t,n,r){if(!r||!Y3(r))return{path:n};if(r.formMethod&&!i5(r.formMethod))return{path:n,error:ii(405,{method:r.formMethod})};let i=()=>({path:n,error:ii(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=e?s.toUpperCase():s.toLowerCase(),a=Ix(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Ni(o))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((h,p)=>{let[m,y]=p;return""+h+m+"="+y+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Ni(o))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Ke(typeof FormData=="function","FormData is not available in this environment");let c,l;if(r.formData)c=Q0(r.formData),l=r.formData;else if(r.body instanceof FormData)c=Q0(r.body),l=r.body;else if(r.body instanceof URLSearchParams)c=r.body,l=t1(c);else if(r.body==null)c=new URLSearchParams,l=new FormData;else try{c=new URLSearchParams(r.body),l=t1(c)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Ni(u.formMethod))return{path:n,submission:u};let d=Go(n);return t&&d.search&&WS(d.search)&&c.append("index",""),d.search="?"+c,{path:nh(d),submission:u}}function q3(e,t){let n=e;if(t){let r=e.findIndex(i=>i.route.id===t);r>=0&&(n=e.slice(0,r))}return n}function qk(e,t,n,r,i,s,o,a,c,l,u,d,f,h,p,m){let y=m?Object.values(m)[0]:p?Object.values(p)[0]:void 0,g=e.createURL(t.location),v=e.createURL(i),S=m?Object.keys(m)[0]:void 0,k=q3(n,S).filter((A,_)=>{let{route:x}=A;if(x.lazy)return!0;if(x.loader==null)return!1;if(s)return x.loader.hydrate?!0:t.loaderData[x.id]===void 0&&(!t.errors||t.errors[x.id]===void 0);if(Q3(t.loaderData,t.matches[_],A)||a.some(B=>B===A.route.id))return!0;let P=t.matches[_],D=A;return Qk(A,$t({currentUrl:g,currentParams:P.params,nextUrl:v,nextParams:D.params},r,{actionResult:y,defaultShouldRevalidate:o||g.pathname+g.search===v.pathname+v.search||g.search!==v.search||Cx(P,D)}))}),b=[];return u.forEach((A,_)=>{if(s||!n.some(V=>V.route.id===A.routeId)||l.has(_))return;let x=El(f,A.path,h);if(!x){b.push({key:_,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let P=t.fetchers.get(_),D=eC(x,A.path),B=!1;d.has(_)?B=!1:c.includes(_)?B=!0:P&&P.state!=="idle"&&P.data===void 0?B=o:B=Qk(D,$t({currentUrl:g,currentParams:t.matches[t.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:y,defaultShouldRevalidate:o})),B&&b.push({key:_,routeId:A.routeId,path:A.path,matches:x,match:D,controller:new AbortController})}),[k,b]}function Q3(e,t,n){let r=!t||n.route.id!==t.route.id,i=e[n.route.id]===void 0;return r||i}function Cx(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function Qk(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}async function e1(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let i=n[e.id];Ke(i,"No route found in manifest");let s={};for(let o in r){let c=i[o]!==void 0&&o!=="hasErrorBoundary";Nc(!c,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!c&&!C3.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,$t({},t(i),{lazy:void 0}))}async function od(e,t,n,r,i,s,o,a,c){c===void 0&&(c={});let l,u,d,f=m=>{let y,g=new Promise((v,S)=>y=S);return d=()=>y(),t.signal.addEventListener("abort",d),Promise.race([m({request:t,params:n.params,context:c.requestContext}),g])};try{let m=n.route[e];if(n.route.lazy)if(m){let y,g=await Promise.all([f(m).catch(v=>{y=v}),e1(n.route,s,i)]);if(y)throw y;u=g[0]}else if(await e1(n.route,s,i),m=n.route[e],m)u=await f(m);else if(e==="action"){let y=new URL(t.url),g=y.pathname+y.search;throw ii(405,{method:t.method,pathname:g,routeId:n.route.id})}else return{type:Ht.data,data:void 0};else if(m)u=await f(m);else{let y=new URL(t.url),g=y.pathname+y.search;throw ii(404,{pathname:g})}Ke(u!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(m){l=Ht.error,u=m}finally{d&&t.signal.removeEventListener("abort",d)}if(r5(u)){let m=u.status;if(Z3.has(m)){let g=u.headers.get("Location");if(Ke(g,"Redirects returned/thrown from loaders/actions must have a Location header"),!vx.test(g))g=q0(new URL(t.url),r.slice(0,r.indexOf(n)+1),o,!0,g,a);else if(!c.isStaticRequest){let v=new URL(t.url),S=g.startsWith("//")?new URL(v.protocol+g):new URL(g),E=rh(S.pathname,o)!=null;S.origin===v.origin&&E&&(g=S.pathname+S.search+S.hash)}if(c.isStaticRequest)throw u.headers.set("Location",g),u;return{type:Ht.redirect,status:m,location:g,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(c.isRouteRequest)throw{type:l===Ht.error?Ht.error:Ht.data,response:u};let y;try{let g=u.headers.get("Content-Type");g&&/\bapplication\/json\b/.test(g)?y=await u.json():y=await u.text()}catch(g){return{type:Ht.error,error:g}}return l===Ht.error?{type:l,error:new GS(m,u.statusText,y),headers:u.headers}:{type:Ht.data,data:y,statusCode:u.status,headers:u.headers}}if(l===Ht.error)return{type:l,error:u};if(n5(u)){var h,p;return{type:Ht.deferred,deferredData:u,statusCode:(h=u.init)==null?void 0:h.status,headers:((p=u.init)==null?void 0:p.headers)&&new Headers(u.init.headers)}}return{type:Ht.data,data:u}}function ad(e,t,n,r){let i=e.createURL(Ix(t)).toString(),s={signal:n};if(r&&Ni(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=Q0(r.formData):s.body=r.formData}return new Request(i,s)}function Q0(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function t1(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function e5(e,t,n,r,i){let s={},o=null,a,c=!1,l={};return n.forEach((u,d)=>{let f=t[d].route.id;if(Ke(!pc(u),"Cannot handle redirect results in processLoaderData"),Tl(u)){let h=Hd(e,f),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[h.route.id]==null&&(o[h.route.id]=p),s[f]=void 0,c||(c=!0,a=mx(u.error)?u.error.status:500),u.headers&&(l[f]=u.headers)}else hc(u)?(i.set(f,u.deferredData),s[f]=u.deferredData.data):s[f]=u.data,u.statusCode!=null&&u.statusCode!==200&&!c&&(a=u.statusCode),u.headers&&(l[f]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:l}}function n1(e,t,n,r,i,s,o,a){let{loaderData:c,errors:l}=e5(t,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:f,controller:h}=s[u];Ke(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(h&&h.signal.aborted))if(Tl(p)){let m=Hd(e.matches,f==null?void 0:f.route.id);l&&l[m.route.id]||(l=$t({},l,{[m.route.id]:p.error})),e.fetchers.delete(d)}else if(pc(p))Ke(!1,"Unhandled fetcher revalidation redirect");else if(hc(p))Ke(!1,"Unhandled fetcher deferred data");else{let m=Yo(p.data);e.fetchers.set(d,m)}}return{loaderData:c,errors:l}}function r1(e,t,n,r){let i=$t({},t);for(let s of n){let o=s.route.id;if(t.hasOwnProperty(o)?t[o]!==void 0&&(i[o]=t[o]):e[o]!==void 0&&s.route.loader&&(i[o]=e[o]),r&&r.hasOwnProperty(o))break}return i}function Hd(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function i1(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ii(e,t){let{pathname:n,routeId:r,method:i,type:s}=t===void 0?{}:t,o="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):e===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):e===404?(o="Not Found",a='No route matches URL "'+n+'"'):e===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new GS(e||500,o,new Error(a),!0)}function s1(e){for(let t=e.length-1;t>=0;t--){let n=e[t];if(pc(n))return{result:n,idx:t}}}function Ix(e){let t=typeof e=="string"?Go(e):e;return nh($t({},t,{hash:""}))}function t5(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function hc(e){return e.type===Ht.deferred}function Tl(e){return e.type===Ht.error}function pc(e){return(e&&e.type)===Ht.redirect}function n5(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function r5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function i5(e){return $3.has(e.toLowerCase())}function Ni(e){return H3.has(e.toLowerCase())}async function o1(e,t,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],c=t[o];if(!c)continue;let l=e.find(d=>d.route.id===c.route.id),u=l!=null&&!Cx(l,c)&&(s&&s[c.route.id])!==void 0;if(hc(a)&&(i||u)){let d=r[o];Ke(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await Sx(a,d,i).then(f=>{f&&(n[o]=f||n[o])})}}}async function Sx(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:Ht.data,data:e.deferredData.unwrappedData}}catch(i){return{type:Ht.error,error:i}}return{type:Ht.data,data:e.deferredData.data}}}function WS(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function eC(e,t){let n=typeof t=="string"?Go(t).search:t.search;if(e[e.length-1].route.index&&WS(n||""))return e[e.length-1];let r=px(e);return r[r.length-1]}function a1(e){let{formMethod:t,formAction:n,formEncType:r,text:i,formData:s,json:o}=e;if(!(!t||!n||!r)){if(i!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:t,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function py(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function s5(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function cd(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function o5(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Yo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function a5(e,t){try{let n=e.sessionStorage.getItem(yx);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&t.set(i,new Set(s||[]))}}catch{}}function c5(e,t){if(t.size>0){let n={};for(let[r,i]of t)n[r]=[...i];try{e.sessionStorage.setItem(yx,JSON.stringify(n))}catch(r){Nc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sm(){return Sm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Sm.apply(this,arguments)}const bx=w.createContext(null),wx=w.createContext(null),kx=w.createContext(null),Dg=w.createContext(null),Og=w.createContext({outlet:null,matches:[],isDataRoute:!1}),Ax=w.createContext(null);function HS(){return w.useContext(Dg)!=null}function Ex(){return HS()||Ke(!1),w.useContext(Dg).location}function l5(e,t,n,r){HS()||Ke(!1);let{navigator:i}=w.useContext(kx),{matches:s}=w.useContext(Og),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let l=Ex(),u;if(t){var d;let y=typeof t=="string"?Go(t):t;c==="/"||(d=y.pathname)!=null&&d.startsWith(c)||Ke(!1),u=y}else u=l;let f=u.pathname||"/",h=c==="/"?f:f.slice(c.length)||"/",p=El(e,{pathname:h}),m=p5(p&&p.map(y=>Object.assign({},y,{params:Object.assign({},a,y.params),pathname:wc([c,i.encodeLocation?i.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:wc([c,i.encodeLocation?i.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),s,n,r);return t&&m?w.createElement(Dg.Provider,{value:{location:Sm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Xt.Pop}},m):m}function u5(){let e=y5(),t=mx(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},s=null;return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},t),n?w.createElement("pre",{style:i},n):null,s)}const d5=w.createElement(u5,null);class f5 extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?w.createElement(Og.Provider,{value:this.props.routeContext},w.createElement(Ax.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function h5(e){let{routeContext:t,match:n,children:r}=e,i=w.useContext(bx);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(Og.Provider,{value:t},r)}function p5(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||Ke(!1),o=o.slice(0,Math.min(o.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:f,errors:h}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!h||h[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((u,d,f)=>{let h,p=!1,m=null,y=null;n&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||d5,c&&(l<0&&f===0?(C5("route-fallback",!1),p=!0,y=null):l===f&&(p=!0,y=d.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,f+1)),v=()=>{let S;return h?S=m:p?S=y:d.route.Component?S=w.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,w.createElement(h5,{match:d,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?w.createElement(f5,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):v()},null)}var tC=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(tC||{});function m5(e){let t=w.useContext(wx);return t||Ke(!1),t}function g5(e){let t=w.useContext(Og);return t||Ke(!1),t}function v5(e){let t=g5(),n=t.matches[t.matches.length-1];return n.route.id||Ke(!1),n.route.id}function y5(){var e;let t=w.useContext(Ax),n=m5(tC.UseRouteError),r=v5(tC.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}const c1={};function C5(e,t,n){!t&&!c1[e]&&(c1[e]=!0)}function I5(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Xt.Pop,navigator:s,static:o=!1,future:a}=e;HS()&&Ke(!1);let c=t.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:c,navigator:s,static:o,future:Sm({v7_relativeSplatPath:!1},a)}),[c,a,s,o]);typeof r=="string"&&(r=Go(r));let{pathname:u="/",search:d="",hash:f="",state:h=null,key:p="default"}=r,m=w.useMemo(()=>{let y=rh(u,c);return y==null?null:{location:{pathname:y,search:d,hash:f,state:h,key:p},navigationType:i}},[c,u,d,f,h,p,i]);return m==null?null:w.createElement(kx.Provider,{value:l},w.createElement(Dg.Provider,{children:n,value:m}))}new Promise(()=>{});function S5(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:w.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:w.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:w.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.21.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bm(){return bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bm.apply(this,arguments)}function b5(e,t){return J3({basename:t==null?void 0:t.basename,future:bm({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:g3({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||w5(),routes:e,mapRouteProperties:S5,window:t==null?void 0:t.window}).initialize()}function w5(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=bm({},t,{errors:k5(t.errors)})),t}function k5(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,i]of t)if(i&&i.__type==="RouteErrorResponse")n[r]=new GS(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const A5=w.createContext({isTransitioning:!1}),E5=w.createContext(new Map),T5="startTransition",l1=iB[T5],_5="flushSync",u1=m3[_5];function R5(e){l1?l1(e):e()}function ld(e){u1?u1(e):e()}class x5{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function N5(e){let{fallbackElement:t,router:n,future:r}=e,[i,s]=w.useState(n.state),[o,a]=w.useState(),[c,l]=w.useState({isTransitioning:!1}),[u,d]=w.useState(),[f,h]=w.useState(),[p,m]=w.useState(),y=w.useRef(new Map),{v7_startTransition:g}=r||{},v=w.useCallback(A=>{g?R5(A):A()},[g]),S=w.useCallback((A,_)=>{let{deletedFetchers:x,unstable_flushSync:P,unstable_viewTransitionOpts:D}=_;x.forEach(V=>y.current.delete(V)),A.fetchers.forEach((V,G)=>{V.data!==void 0&&y.current.set(G,V.data)});let B=n.window==null||typeof n.window.document.startViewTransition!="function";if(!D||B){P?ld(()=>s(A)):v(()=>s(A));return}if(P){ld(()=>{f&&(u&&u.resolve(),f.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let V=n.window.document.startViewTransition(()=>{ld(()=>s(A))});V.finished.finally(()=>{ld(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})})}),ld(()=>h(V));return}f?(u&&u.resolve(),f.skipTransition(),m({state:A,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(a(A),l({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,f,u,y,v]);w.useLayoutEffect(()=>n.subscribe(S),[n,S]),w.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new x5)},[c]),w.useEffect(()=>{if(u&&o&&n.window){let A=o,_=u.promise,x=n.window.document.startViewTransition(async()=>{v(()=>s(A)),await _});x.finished.finally(()=>{d(void 0),h(void 0),a(void 0),l({isTransitioning:!1})}),h(x)}},[v,o,u,n.window]),w.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,f,i.location,o]),w.useEffect(()=>{!c.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[c.isTransitioning,p]),w.useEffect(()=>{},[]);let E=w.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:A=>n.navigate(A),push:(A,_,x)=>n.navigate(A,{state:_,preventScrollReset:x==null?void 0:x.preventScrollReset}),replace:(A,_,x)=>n.navigate(A,{replace:!0,state:_,preventScrollReset:x==null?void 0:x.preventScrollReset})}),[n]),k=n.basename||"/",b=w.useMemo(()=>({router:n,navigator:E,static:!1,basename:k}),[n,E,k]);return w.createElement(w.Fragment,null,w.createElement(bx.Provider,{value:b},w.createElement(wx.Provider,{value:i},w.createElement(E5.Provider,{value:y.current},w.createElement(A5.Provider,{value:c},w.createElement(I5,{basename:k,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?w.createElement(P5,{routes:n.routes,future:n.future,state:i}):t))))),null)}function P5(e){let{routes:t,future:n,state:r}=e;return l5(t,void 0,r,n)}var d1;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(d1||(d1={}));var f1;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(f1||(f1={}));const Tx=e=>{const t=typeof e=="function",n=w.useRef(e);w.useEffect(()=>{n.current=e}),w.useEffect(()=>{if(t){const r=i=>{const s=n.current(i);if(typeof s=="string")return i.preventDefault(),i.returnValue=s;if(i.defaultPrevented)return i.returnValue=""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}},[t])};var h1=function(){function e(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function M5(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Xo=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],D5=function(){h1(e,null,[{key:"escapeForHtml",value:function(n){return new e().escapeForHtml(n)}},{key:"linkify",value:function(n){return new e().linkify(n)}},{key:"ansiToHtml",value:function(n,r){return new e().ansiToHtml(n,r)}},{key:"ansiToJson",value:function(n,r){return new e().ansiToJson(n,r)}},{key:"ansiToText",value:function(n){return new e().ansiToText(n)}}]);function e(){M5(this,e),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return h1(e,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var r=0;r<8;++r)this.PALETTE_COLORS.push(Xo[n][r].color);for(var i=[0,95,135,175,215,255],s=function(f,h,p){return i[f]+", "+i[h]+", "+i[p]},o=0;o<6;++o)for(var a=0;a<6;++a)for(var c=0;c<6;++c)this.PALETTE_COLORS.push(s(o,a,c));for(var l=8,u=0;u<24;++u,l+=10)this.PALETTE_COLORS.push(s(l,l,l))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(r){return r=="&"?"&amp;":r=='"'?"&quot;":r=="<"?"&lt;":r==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(/(https?:\/\/[^\s]+)/gm,function(r){return'<a href="'+r+'">'+r+"</a>"})}},{key:"ansiToHtml",value:function(n,r){return this.process(n,r,!0)}},{key:"ansiToJson",value:function(n,r){return r=r||{},r.json=!0,r.clearLine=!1,this.process(n,r,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,r,i){var s=this,o=this,a=n.split(/\033\[/),c=a.shift();r==null&&(r={}),r.clearLine=/\r/.test(n);var l=a.map(function(d){return s.processChunk(d,r,i)});if(r&&r.json){var u=o.processChunkJson("");return u.content=c,u.clearLine=r.clearLine,l.unshift(u),r.remove_empty&&(l=l.filter(function(d){return!d.isEmpty()})),l}else l.unshift(c);return l.join("")}},{key:"processChunkJson",value:function(n,r,i){r=typeof r>"u"?{}:r;var s=r.use_classes=typeof r.use_classes<"u"&&r.use_classes,o=r.key=s?"class":"color",a={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:r.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},c=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!c)return a;a.content=c[4];var l=c[2].split(";");if(c[1]!==""||c[3]!=="m"||!i)return a;for(var u=this;l.length>0;){var d=l.shift(),f=parseInt(d);if(isNaN(f)||f===0)u.fg=u.bg=null,u.decorations=[];else if(f===1)u.decorations.push("bold");else if(f===2)u.decorations.push("dim");else if(f===3)u.decorations.push("italic");else if(f===4)u.decorations.push("underline");else if(f===5)u.decorations.push("blink");else if(f===7)u.decorations.push("reverse");else if(f===8)u.decorations.push("hidden");else if(f===9)u.decorations.push("strikethrough");else if(f===21)u.removeDecoration("bold");else if(f===22)u.removeDecoration("bold"),u.removeDecoration("dim");else if(f===23)u.removeDecoration("italic");else if(f===24)u.removeDecoration("underline");else if(f===25)u.removeDecoration("blink");else if(f===27)u.removeDecoration("reverse");else if(f===28)u.removeDecoration("hidden");else if(f===29)u.removeDecoration("strikethrough");else if(f===39)u.fg=null;else if(f===49)u.bg=null;else if(f>=30&&f<38)u.fg=Xo[0][f%10][o];else if(f>=90&&f<98)u.fg=Xo[1][f%10][o];else if(f>=40&&f<48)u.bg=Xo[0][f%10][o];else if(f>=100&&f<108)u.bg=Xo[1][f%10][o];else if(f===38||f===48){var h=f===38;if(l.length>=1){var p=l.shift();if(p==="5"&&l.length>=1){var m=parseInt(l.shift());if(m>=0&&m<=255)if(!s)this.PALETTE_COLORS||u.setupPalette(),h?u.fg=this.PALETTE_COLORS[m]:u.bg=this.PALETTE_COLORS[m];else{var y=m>=16?"ansi-palette-"+m:Xo[m>7?1:0][m%8].class;h?u.fg=y:u.bg=y}}else if(p==="2"&&l.length>=3){var g=parseInt(l.shift()),v=parseInt(l.shift()),S=parseInt(l.shift());if(g>=0&&g<=255&&v>=0&&v<=255&&S>=0&&S<=255){var E=g+", "+v+", "+S;s?h?(u.fg="ansi-truecolor",u.fg_truecolor=E):(u.bg="ansi-truecolor",u.bg_truecolor=E):h?u.fg=E:u.bg=E}}}}}return u.fg===null&&u.bg===null&&u.decorations.length===0||(a.fg=u.fg,a.bg=u.bg,a.fg_truecolor=u.fg_truecolor,a.bg_truecolor=u.bg_truecolor,a.decorations=u.decorations,a.decoration=u.decorations.slice(-1).pop()||null,a.was_processed=!0),a}},{key:"processChunk",value:function(n,r,i){var s=this;r=r||{};var o=this.processChunkJson(n,r,i),a=r.use_classes;if(o.decorations=o.decorations.filter(function(h){if(h==="reverse"){o.fg||(o.fg=Xo[0][7][a?"class":"color"]),o.bg||(o.bg=Xo[0][0][a?"class":"color"]);var p=o.fg;o.fg=o.bg,o.bg=p;var m=o.fg_truecolor;return o.fg_truecolor=o.bg_truecolor,o.bg_truecolor=m,o.isInverted=!0,!1}return!0}),r.json)return o;if(o.isEmpty())return"";if(!o.was_processed)return o.content;var c=[],l=[],u=[],d={},f=function(p){var m=[],y=void 0;for(y in p)p.hasOwnProperty(y)&&m.push("data-"+y+'="'+s.escapeForHtml(p[y])+'"');return m.length>0?" "+m.join(" "):""};return o.isInverted&&(d["ansi-is-inverted"]="true"),o.fg&&(a?(c.push(o.fg+"-fg"),o.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=o.fg_truecolor,o.fg_truecolor=null)):c.push("color:rgb("+o.fg+")")),o.bg&&(a?(c.push(o.bg+"-bg"),o.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=o.bg_truecolor,o.bg_truecolor=null)):c.push("background-color:rgb("+o.bg+")")),o.decorations.forEach(function(h){if(a){l.push("ansi-"+h);return}h==="bold"?l.push("font-weight:bold"):h==="dim"?l.push("opacity:0.5"):h==="italic"?l.push("font-style:italic"):h==="hidden"?l.push("visibility:hidden"):h==="strikethrough"?u.push("line-through"):u.push(h)}),u.length&&l.push("text-decoration:"+u.join(" ")),a?'<span class="'+c.concat(l).join(" ")+'"'+f(d)+">"+o.content+"</span>":'<span style="'+c.concat(l).join(";")+'"'+f(d)+">"+o.content+"</span>"}},{key:"removeDecoration",value:function(n){var r=this.decorations.indexOf(n);r>=0&&this.decorations.splice(r,1)}}]),e}(),O5=D5;const L5=Jf(O5);function B5(e,t){let n=[];for(const r of e.split(`\r
`)){const i=L5.ansiToJson(r,{json:!0,remove_empty:!1});let s=[];for(const o of i){const a=G5(o,t);s=[...s,...a]}n=[...n,Y.jsx("span",{children:s},n.length)]}return n}const F5=/(\s|^)((\w+):\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,U5=/(?<slorp1>\s|^)(?<name>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+[a-zA-Z])(?<slorp2>\s|$|\.)/g,V5=/@\[exit:([a-zA-Z]+)\]([a-zA-Z]+)@\[\/\]/g;function G5(e,t){const n=W5(e),r=[];let i=0,s=0;function o(u,d){let f;for(;(f=u.exec(e.content))!==null;){const h=f.index;h>i&&r.push(e.content.substring(i,h)),r.push(d(f)),i=u.lastIndex}}function a(u){const[,d,f]=u,h=f;return Y.jsxs(Y.Fragment,{children:[d,Y.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:f})]})}function c(u){const d=u.groups.name,f=`mailto:${d}`;return Y.jsxs(Y.Fragment,{children:[u.groups.slorp1,Y.jsx("a",{href:f,target:"_blank",rel:"noreferrer",children:d}),u.groups.slorp2]})}function l(u){const[,d,f]=u;return Y.jsx("a",{onClick:()=>t(d),className:"exit",children:f})}return o(F5,a),o(U5,c),o(V5,l),i<e.content.length&&r.push(e.content.substring(i)),r.map(u=>Y.jsx("span",{style:n,children:u},s++))}function W5(e){const t={};switch(e.bg&&(t.backgroundColor=`rgb(${e.bg})`),e.fg&&(t.color=`rgb(${e.fg})`),e.decoration){case"bold":t.fontWeight="bold";break;case"dim":t.opacity="0.5";break;case"italic":t.fontStyle="italic";break;case"hidden":t.visibility="hidden";break;case"strikethrough":t.textDecoration="line-through";break;case"underline":t.textDecoration="underline";break;case"blink":t.textDecoration="blink";break}return t}var $c={},Mu={},_x=w;function Me(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ir=Object.prototype.hasOwnProperty,H5=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p1={},m1={};function Rx(e){return Ir.call(m1,e)?!0:Ir.call(p1,e)?!1:H5.test(e)?m1[e]=!0:(p1[e]=!0,!1)}function vr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Fn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fn[e]=new vr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fn[t]=new vr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fn[e]=new vr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fn[e]=new vr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fn[e]=new vr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fn[e]=new vr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fn[e]=new vr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fn[e]=new vr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fn[e]=new vr(e,5,!1,e.toLowerCase(),null,!1,!1)});var jS=/[\-:]([a-z])/g;function $S(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jS,$S);Fn[t]=new vr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jS,$S);Fn[t]=new vr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jS,$S);Fn[t]=new vr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fn[e]=new vr(e,1,!1,e.toLowerCase(),null,!1,!1)});Fn.xlinkHref=new vr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fn[e]=new vr(e,1,!1,e.toLowerCase(),null,!0,!0)});var wp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},j5=["Webkit","ms","Moz","O"];Object.keys(wp).forEach(function(e){j5.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),wp[t]=wp[e]})});var $5=/["'&<>]/;function lr(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=$5.exec(e);if(t){var n="",r,i=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==r&&(n+=e.substring(i,r)),i=r+1,n+=t}e=i!==r?n+e.substring(i,r):n}return e}var Z5=/([A-Z])/g,z5=/^ms-/,nC=Array.isArray;function Hs(e,t){return{insertionMode:e,selectedValue:t}}function X5(e,t,n){switch(t){case"select":return Hs(1,n.value!=null?n.value:n.defaultValue);case"svg":return Hs(2,null);case"math":return Hs(3,null);case"foreignObject":return Hs(1,null);case"table":return Hs(4,null);case"thead":case"tbody":case"tfoot":return Hs(5,null);case"colgroup":return Hs(7,null);case"tr":return Hs(6,null)}return 4<=e.insertionMode||e.insertionMode===0?Hs(1,null):e}var g1=new Map;function xx(e,t,n){if(typeof n!="object")throw Error(Me(62));t=!0;for(var r in n)if(Ir.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=lr(r);i=lr((""+i).trim())}else{s=r;var o=g1.get(s);o!==void 0||(o=lr(s.replace(Z5,"-$1").toLowerCase().replace(z5,"-ms-")),g1.set(s,o)),s=o,i=typeof i=="number"?i===0||Ir.call(wp,r)?""+i:i+"px":lr((""+i).trim())}t?(t=!1,e.push(' style="',s,":",i)):e.push(";",s,":",i)}}t||e.push('"')}function Mr(e,t,n,r){switch(n){case"style":xx(e,t,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=Fn.hasOwnProperty(n)?Fn[n]:null,t!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=t.attributeName,t.type){case 3:r&&e.push(" ",n,'=""');break;case 4:r===!0?e.push(" ",n,'=""'):r!==!1&&e.push(" ",n,'="',lr(r),'"');break;case 5:isNaN(r)||e.push(" ",n,'="',lr(r),'"');break;case 6:!isNaN(r)&&1<=r&&e.push(" ",n,'="',lr(r),'"');break;default:t.sanitizeURL&&(r=""+r),e.push(" ",n,'="',lr(r),'"')}}else if(Rx(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(" ",n,'="',lr(r),'"')}}}function kp(e,t,n){if(t!=null){if(n!=null)throw Error(Me(60));if(typeof t!="object"||!("__html"in t))throw Error(Me(61));t=t.__html,t!=null&&e.push(""+t)}}function K5(e){var t="";return _x.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function my(e,t,n,r){e.push(ts(n));var i=n=null,s;for(s in t)if(Ir.call(t,s)){var o=t[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Mr(e,r,s,o)}}return e.push(">"),kp(e,i,n),typeof n=="string"?(e.push(lr(n)),null):n}var J5=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,v1=new Map;function ts(e){var t=v1.get(e);if(t===void 0){if(!J5.test(e))throw Error(Me(65,e));t="<"+e,v1.set(e,t)}return t}function Y5(e,t,n,r,i){switch(t){case"select":e.push(ts("select"));var s=null,o=null;for(u in n)if(Ir.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Mr(e,r,u,a)}}return e.push(">"),kp(e,o,s),s;case"option":o=i.selectedValue,e.push(ts("option"));var c=a=null,l=null,u=null;for(s in n)if(Ir.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Mr(e,r,s,d)}}if(o!=null)if(n=c!==null?""+c:K5(a),nC(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){e.push(' selected=""');break}}else""+o===n&&e.push(' selected=""');else l&&e.push(' selected=""');return e.push(">"),kp(e,u,a),a;case"textarea":e.push(ts("textarea")),u=o=s=null;for(a in n)if(Ir.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":s=c;break;case"defaultValue":o=c;break;case"dangerouslySetInnerHTML":throw Error(Me(91));default:Mr(e,r,a,c)}if(s===null&&o!==null&&(s=o),e.push(">"),u!=null){if(s!=null)throw Error(Me(92));if(nC(u)&&1<u.length)throw Error(Me(93));s=""+u}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s!==null&&e.push(lr(""+s)),null;case"input":e.push(ts("input")),c=u=a=s=null;for(o in n)if(Ir.call(n,o)&&(l=n[o],l!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(Me(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":s=l;break;default:Mr(e,r,o,l)}return u!==null?Mr(e,r,"checked",u):c!==null&&Mr(e,r,"checked",c),s!==null?Mr(e,r,"value",s):a!==null&&Mr(e,r,"value",a),e.push("/>"),null;case"menuitem":e.push(ts("menuitem"));for(var f in n)if(Ir.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Me(400));default:Mr(e,r,f,s)}return e.push(">"),null;case"title":e.push(ts("title")),s=null;for(d in n)if(Ir.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(Me(434));default:Mr(e,r,d,o)}return e.push(">"),s;case"listing":case"pre":e.push(ts(t)),o=s=null;for(c in n)if(Ir.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Mr(e,r,c,a)}if(e.push(">"),o!=null){if(s!=null)throw Error(Me(60));if(typeof o!="object"||!("__html"in o))throw Error(Me(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(`
`,n):e.push(""+n))}return typeof s=="string"&&s[0]===`
`&&e.push(`
`),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(ts(t));for(var h in n)if(Ir.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Me(399,t));default:Mr(e,r,h,s)}return e.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return my(e,n,t,r);case"html":return i.insertionMode===0&&e.push("<!DOCTYPE html>"),my(e,n,t,r);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return my(e,n,t,r);e.push(ts(t)),o=s=null;for(l in n)if(Ir.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":xx(e,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Rx(l)&&typeof a!="function"&&typeof a!="symbol"&&e.push(" ",l,'="',lr(a),'"')}return e.push(">"),kp(e,o,s),s}}function y1(e,t,n){if(e.push('<!--$?--><template id="'),n===null)throw Error(Me(395));return e.push(n),e.push('"></template>')}function q5(e,t,n,r){switch(n.insertionMode){case 0:case 1:return e.push('<div hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 2:return e.push('<svg aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 3:return e.push('<math aria-hidden="true" style="display:none" id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 4:return e.push('<table hidden id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 5:return e.push('<table hidden><tbody id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 6:return e.push('<table hidden><tr id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');case 7:return e.push('<table hidden><colgroup id="'),e.push(t.segmentPrefix),t=r.toString(16),e.push(t),e.push('">');default:throw Error(Me(397))}}function Q5(e,t){switch(t.insertionMode){case 0:case 1:return e.push("</div>");case 2:return e.push("</svg>");case 3:return e.push("</math>");case 4:return e.push("</table>");case 5:return e.push("</tbody></table>");case 6:return e.push("</tr></table>");case 7:return e.push("</colgroup></table>");default:throw Error(Me(397))}}var eU=/[<\u2028\u2029]/g;function gy(e){return JSON.stringify(e).replace(eU,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function tU(e,t){return t=t===void 0?"":t,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:t+"P:",segmentPrefix:t+"S:",boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:e}}function C1(e,t,n,r){return n.generateStaticMarkup?(e.push(lr(t)),!1):(t===""?e=r:(r&&e.push("<!-- -->"),e.push(lr(t)),e=!0),e)}var jd=Object.assign,nU=Symbol.for("react.element"),Nx=Symbol.for("react.portal"),Px=Symbol.for("react.fragment"),Mx=Symbol.for("react.strict_mode"),Dx=Symbol.for("react.profiler"),Ox=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),Bx=Symbol.for("react.forward_ref"),Fx=Symbol.for("react.suspense"),Ux=Symbol.for("react.suspense_list"),Vx=Symbol.for("react.memo"),ZS=Symbol.for("react.lazy"),rU=Symbol.for("react.scope"),iU=Symbol.for("react.debug_trace_mode"),sU=Symbol.for("react.legacy_hidden"),oU=Symbol.for("react.default_value"),I1=Symbol.iterator;function rC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Px:return"Fragment";case Nx:return"Portal";case Dx:return"Profiler";case Mx:return"StrictMode";case Fx:return"Suspense";case Ux:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Lx:return(e.displayName||"Context")+".Consumer";case Ox:return(e._context.displayName||"Context")+".Provider";case Bx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Vx:return t=e.displayName||null,t!==null?t:rC(e.type)||"Memo";case ZS:t=e._payload,e=e._init;try{return rC(e(t))}catch{}}return null}var Gx={};function S1(e,t){if(e=e.contextTypes,!e)return Gx;var n={},r;for(r in e)n[r]=t[r];return n}var mc=null;function Lg(e,t){if(e!==t){e.context._currentValue2=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(Me(401))}else{if(n===null)throw Error(Me(401));Lg(e,n)}t.context._currentValue2=t.value}}function Wx(e){e.context._currentValue2=e.parentValue,e=e.parent,e!==null&&Wx(e)}function Hx(e){var t=e.parent;t!==null&&Hx(t),e.context._currentValue2=e.value}function jx(e,t){if(e.context._currentValue2=e.parentValue,e=e.parent,e===null)throw Error(Me(402));e.depth===t.depth?Lg(e,t):jx(e,t)}function $x(e,t){var n=t.parent;if(n===null)throw Error(Me(402));e.depth===n.depth?Lg(e,n):$x(e,n),t.context._currentValue2=t.value}function wm(e){var t=mc;t!==e&&(t===null?Hx(e):e===null?Wx(t):t.depth===e.depth?Lg(t,e):t.depth>e.depth?jx(t,e):$x(t,e),mc=e)}var b1={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function w1(e,t,n,r){var i=e.state!==void 0?e.state:null;e.updater=b1,e.props=n,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue2:r,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:jd({},i,o),e.state=i),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&b1.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&t.length===1)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];a=typeof a=="function"?a.call(e,s,n,r):a,a!=null&&(i?(i=!1,s=jd({},s,a)):jd(s,a))}e.state=s}else s.queue=null}var aU={id:1,overflow:""};function iC(e,t,n){var r=e.id;e=e.overflow;var i=32-Ap(r)-1;r&=~(1<<i),n+=1;var s=32-Ap(t)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-Ap(t)+i|n<<i|r,overflow:s+e}}return{id:1<<s|n<<i|r,overflow:e}}var Ap=Math.clz32?Math.clz32:uU,cU=Math.log,lU=Math.LN2;function uU(e){return e>>>=0,e===0?32:31-(cU(e)/lU|0)|0}function dU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var fU=typeof Object.is=="function"?Object.is:dU,Do=null,zS=null,Ep=null,It=null,wd=!1,km=!1,Sf=0,ma=null,Bg=0;function sc(){if(Do===null)throw Error(Me(321));return Do}function k1(){if(0<Bg)throw Error(Me(312));return{memoizedState:null,queue:null,next:null}}function XS(){return It===null?Ep===null?(wd=!1,Ep=It=k1()):(wd=!0,It=Ep):It.next===null?(wd=!1,It=It.next=k1()):(wd=!0,It=It.next),It}function KS(){zS=Do=null,km=!1,Ep=null,Bg=0,It=ma=null}function Zx(e,t){return typeof t=="function"?t(e):t}function A1(e,t,n){if(Do=sc(),It=XS(),wd){var r=It.queue;if(t=r.dispatch,ma!==null&&(n=ma.get(r),n!==void 0)){ma.delete(r),r=It.memoizedState;do r=e(r,n.action),n=n.next;while(n!==null);return It.memoizedState=r,[r,t]}return[It.memoizedState,t]}return e=e===Zx?typeof t=="function"?t():t:n!==void 0?n(t):t,It.memoizedState=e,e=It.queue={last:null,dispatch:null},e=e.dispatch=hU.bind(null,Do,e),[It.memoizedState,e]}function E1(e,t){if(Do=sc(),It=XS(),t=t===void 0?null:t,It!==null){var n=It.memoizedState;if(n!==null&&t!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!fU(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),It.memoizedState=[e,t],e}function hU(e,t,n){if(25<=Bg)throw Error(Me(301));if(e===Do)if(km=!0,e={action:n,next:null},ma===null&&(ma=new Map),n=ma.get(t),n===void 0)ma.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function pU(){throw Error(Me(394))}function Gh(){}var T1={readContext:function(e){return e._currentValue2},useContext:function(e){return sc(),e._currentValue2},useMemo:E1,useReducer:A1,useRef:function(e){Do=sc(),It=XS();var t=It.memoizedState;return t===null?(e={current:e},It.memoizedState=e):t},useState:function(e){return A1(Zx,e)},useInsertionEffect:Gh,useLayoutEffect:function(){},useCallback:function(e,t){return E1(function(){return e},t)},useImperativeHandle:Gh,useEffect:Gh,useDebugValue:Gh,useDeferredValue:function(e){return sc(),e},useTransition:function(){return sc(),[!1,pU]},useId:function(){var e=zS.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-Ap(e)-1)).toString(32)+t;var n=Tp;if(n===null)throw Error(Me(404));return t=Sf++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return sc(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(Me(407));return n()}},Tp=null,vy=_x.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function mU(e){return console.error(e),null}function kd(){}function gU(e,t,n,r,i,s,o,a,c){var l=[],u=new Set;return t={destination:null,responseState:t,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?mU:i,onAllReady:s===void 0?kd:s,onShellReady:o===void 0?kd:o,onShellError:a===void 0?kd:a,onFatalError:c===void 0?kd:c},n=Am(t,0,null,n,!1,!1),n.parentFlushed=!0,e=JS(t,e,null,n,u,Gx,null,aU),l.push(e),t}function JS(e,t,n,r,i,s,o,a){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var c={node:t,ping:function(){var l=e.pingedTasks;l.push(c),l.length===1&&Kx(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(c),c}function Am(e,t,n,r,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function bf(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Em(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,e.destination.destroy(t)):(e.status=1,e.fatalError=t)}function _1(e,t,n,r,i){for(Do={},zS=t,Sf=0,e=n(r,i);km;)km=!1,Sf=0,Bg+=1,It=null,e=n(r,i);return KS(),e}function R1(e,t,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=t.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(Me(108,rC(r)||"Unknown",a));r=jd({},o,n)}t.legacyContext=r,Gr(e,t,i),t.legacyContext=o}else Gr(e,t,i)}function x1(e,t){if(e&&e.defaultProps){t=jd({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function sC(e,t,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=S1(n,t.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue2:i),w1(s,n,r,i),R1(e,t,s,n)}else{s=S1(n,t.legacyContext),i=_1(e,t,n,r,s);var o=Sf!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)w1(i,n,r,s),R1(e,t,i,n);else if(o){r=t.treeContext,t.treeContext=iC(r,1,0);try{Gr(e,t,i)}finally{t.treeContext=r}}else Gr(e,t,i)}else if(typeof n=="string"){switch(i=t.blockedSegment,s=Y5(i.chunks,n,r,e.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=X5(o,n,r),oC(e,t,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case sU:case iU:case Mx:case Dx:case Px:Gr(e,t,r.children);return;case Ux:Gr(e,t,r.children);return;case rU:throw Error(Me(343));case Fx:e:{n=t.blockedBoundary,i=t.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},c=Am(e,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=Am(e,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=l;try{if(oC(e,t,r),e.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),l.status=1,Tm(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=bf(e,u)}finally{t.blockedBoundary=n,t.blockedSegment=i}t=JS(e,s,n,c,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Bx:if(r=_1(e,t,n.render,r,i),Sf!==0){n=t.treeContext,t.treeContext=iC(n,1,0);try{Gr(e,t,r)}finally{t.treeContext=n}}else Gr(e,t,r);return;case Vx:n=n.type,r=x1(n,r),sC(e,t,n,r,i);return;case Ox:if(i=r.children,n=n._context,r=r.value,s=n._currentValue2,n._currentValue2=r,o=mc,mc=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},t.context=r,Gr(e,t,i),e=mc,e===null)throw Error(Me(403));r=e.parentValue,e.context._currentValue2=r===oU?e.context._defaultValue:r,e=mc=e.parent,t.context=e;return;case Lx:r=r.children,r=r(n._currentValue2),Gr(e,t,r);return;case ZS:i=n._init,n=i(n._payload),r=x1(n,r),sC(e,t,n,r,void 0);return}throw Error(Me(130,n==null?n:typeof n,""))}}function Gr(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case nU:sC(e,t,n.type,n.props,n.ref);return;case Nx:throw Error(Me(257));case ZS:var r=n._init;n=r(n._payload),Gr(e,t,n);return}if(nC(n)){N1(e,t,n);return}if(n===null||typeof n!="object"?r=null:(r=I1&&n[I1]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);N1(e,t,i)}return}throw e=Object.prototype.toString.call(n),Error(Me(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}typeof n=="string"?(r=t.blockedSegment,r.lastPushedText=C1(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText)):typeof n=="number"&&(r=t.blockedSegment,r.lastPushedText=C1(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function N1(e,t,n){for(var r=n.length,i=0;i<r;i++){var s=t.treeContext;t.treeContext=iC(s,r,i);try{oC(e,t,n[i])}finally{t.treeContext=s}}}function oC(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return Gr(e,t,n)}catch(c){if(KS(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var o=t.blockedSegment,a=Am(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=JS(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,wm(s)}else throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,wm(s),c}}function vU(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,Xx(this,t,e)}function zx(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,r===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=n===void 0?Error(Me(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return zx(i,t,n)}),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(r=t.onAllReady,r()))}function Tm(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&Tm(e,n)}else e.completedSegments.push(t)}function Xx(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(Me(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=kd,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&Tm(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(vU,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Tm(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function Kx(e){if(e.status!==2){var t=mc,n=vy.current;vy.current=T1;var r=Tp;Tp=e.responseState;try{var i=e.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=e,c=o.blockedSegment;if(c.status===0){wm(o.context);try{Gr(a,o,o.node),a.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),o.abortSet.delete(o),c.status=1,Xx(a,o.blockedBoundary,c)}catch(p){if(KS(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=o.ping;p.then(l,l)}else{o.abortSet.delete(o),c.status=4;var u=o.blockedBoundary,d=p,f=bf(a,d);if(u===null?Em(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var h=a.onAllReady;h()}}}finally{}}}i.splice(0,s),e.destination!==null&&YS(e,e.destination)}catch(p){bf(e,p),Em(e,p)}finally{Tp=r,vy.current=n,n===T1&&wm(t)}}}function Wh(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,t.push('<template id="'),t.push(e.placeholderPrefix),e=r.toString(16),t.push(e),t.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)t.push(r[s]);i=Fg(e,t,i)}for(;s<r.length-1;s++)t.push(r[s]);return s<r.length&&(i=t.push(r[s])),i;default:throw Error(Me(390))}}function Fg(e,t,n){var r=n.boundary;if(r===null)return Wh(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)return e.responseState.generateStaticMarkup||(r=r.errorDigest,t.push("<!--$!-->"),t.push("<template"),r&&(t.push(' data-dgst="'),r=lr(r),t.push(r),t.push('"')),t.push("></template>")),Wh(e,t,n),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e;if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var i=e.responseState,s=i.nextSuspenseID++;return i=i.boundaryPrefix+s.toString(16),r=r.id=i,y1(t,e.responseState,r),Wh(e,t,n),t.push("<!--/$-->")}if(r.byteSize>e.progressiveChunkSize)return r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),y1(t,e.responseState,r.id),Wh(e,t,n),t.push("<!--/$-->");if(e.responseState.generateStaticMarkup||t.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Me(391));return Fg(e,t,n[0]),e=e.responseState.generateStaticMarkup?!0:t.push("<!--/$-->"),e}function P1(e,t,n){return q5(t,e.responseState,n.formatContext,n.id),Fg(e,t,n),Q5(t,n.formatContext)}function M1(e,t,n){for(var r=n.completedSegments,i=0;i<r.length;i++)Jx(e,t,n,r[i]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,t.push(e.startInlineScript),e.sentCompleteBoundaryFunction?t.push('$RC("'):(e.sentCompleteBoundaryFunction=!0,t.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Me(395));return n=n.toString(16),t.push(r),t.push('","'),t.push(e.segmentPrefix),t.push(n),t.push('")<\/script>')}function Jx(e,t,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Me(392));return P1(e,t,r)}return P1(e,t,r),e=e.responseState,t.push(e.startInlineScript),e.sentCompleteSegmentFunction?t.push('$RS("'):(e.sentCompleteSegmentFunction=!0,t.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),t.push(e.segmentPrefix),i=i.toString(16),t.push(i),t.push('","'),t.push(e.placeholderPrefix),t.push(i),t.push('")<\/script>')}function YS(e,t){try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Fg(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)t.push(r[n]);n<r.length&&t.push(r[n])}var i=e.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=t;var a=e.responseState,c=o.id,l=o.errorDigest,u=o.errorMessage,d=o.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(Me(395));if(r.push(c),r.push('"'),l||u||d){r.push(",");var f=gy(l||"");r.push(f)}if(u||d){r.push(",");var h=gy(u||"");r.push(h)}if(d){r.push(",");var p=gy(d);r.push(p)}if(!r.push(")<\/script>")){e.destination=null,s++,i.splice(0,s);return}}i.splice(0,s);var m=e.completedBoundaries;for(s=0;s<m.length;s++)if(!M1(e,t,m[s])){e.destination=null,s++,m.splice(0,s);return}m.splice(0,s);var y=e.partialBoundaries;for(s=0;s<y.length;s++){var g=y[s];e:{i=e,o=t;var v=g.completedSegments;for(a=0;a<v.length;a++)if(!Jx(i,o,g,v[a])){a++,v.splice(0,a);var S=!1;break e}v.splice(0,a),S=!0}if(!S){e.destination=null,s++,y.splice(0,s);return}}y.splice(0,s);var E=e.completedBoundaries;for(s=0;s<E.length;s++)if(!M1(e,t,E[s])){e.destination=null,s++,E.splice(0,s);return}E.splice(0,s)}finally{e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.push(null)}}function yU(e,t){try{var n=e.abortableTasks;n.forEach(function(r){return zx(r,e,t)}),n.clear(),e.destination!==null&&YS(e,e.destination)}catch(r){bf(e,r),Em(e,r)}}function CU(){}function Yx(e,t,n,r){var i=!1,s=null,o="",a={push:function(l){return l!==null&&(o+=l),!0},destroy:function(l){i=!0,s=l}},c=!1;if(e=gU(e,tU(n,t?t.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,CU,void 0,function(){c=!0},void 0,void 0),Kx(e),yU(e,r),e.status===1)e.status=2,a.destroy(e.fatalError);else if(e.status!==2&&e.destination===null){e.destination=a;try{YS(e,a)}catch(l){bf(e,l),Em(e,l)}}if(i)throw s;if(!c)throw Error(Me(426));return o}Mu.renderToNodeStream=function(){throw Error(Me(207))};Mu.renderToStaticMarkup=function(e,t){return Yx(e,t,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Mu.renderToStaticNodeStream=function(){throw Error(Me(208))};Mu.renderToString=function(e,t){return Yx(e,t,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};Mu.version="18.2.0";var qS={},qx=w;function We(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wr=null,Hr=0;function ye(e,t){if(t.length!==0)if(512<t.length)0<Hr&&(e.enqueue(new Uint8Array(Wr.buffer,0,Hr)),Wr=new Uint8Array(512),Hr=0),e.enqueue(t);else{var n=Wr.length-Hr;n<t.length&&(n===0?e.enqueue(Wr):(Wr.set(t.subarray(0,n),Hr),e.enqueue(Wr),t=t.subarray(n)),Wr=new Uint8Array(512),Hr=0),Wr.set(t,Hr),Hr+=t.length}}function _t(e,t){return ye(e,t),!0}function D1(e){Wr&&0<Hr&&(e.enqueue(new Uint8Array(Wr.buffer,0,Hr)),Wr=null,Hr=0)}var Qx=new TextEncoder;function Ze(e){return Qx.encode(e)}function fe(e){return Qx.encode(e)}function eN(e,t){typeof e.error=="function"?e.error(t):e.close()}var Sr=Object.prototype.hasOwnProperty,IU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,O1={},L1={};function tN(e){return Sr.call(L1,e)?!0:Sr.call(O1,e)?!1:IU.test(e)?L1[e]=!0:(O1[e]=!0,!1)}function yr(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Un[e]=new yr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Un[t]=new yr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Un[e]=new yr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Un[e]=new yr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Un[e]=new yr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Un[e]=new yr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Un[e]=new yr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Un[e]=new yr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Un[e]=new yr(e,5,!1,e.toLowerCase(),null,!1,!1)});var QS=/[\-:]([a-z])/g;function eb(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(QS,eb);Un[t]=new yr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(QS,eb);Un[t]=new yr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(QS,eb);Un[t]=new yr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Un[e]=new yr(e,1,!1,e.toLowerCase(),null,!1,!1)});Un.xlinkHref=new yr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Un[e]=new yr(e,1,!1,e.toLowerCase(),null,!0,!0)});var _p={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SU=["Webkit","ms","Moz","O"];Object.keys(_p).forEach(function(e){SU.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_p[t]=_p[e]})});var bU=/["'&<>]/;function Mn(e){if(typeof e=="boolean"||typeof e=="number")return""+e;e=""+e;var t=bU.exec(e);if(t){var n="",r,i=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}i!==r&&(n+=e.substring(i,r)),i=r+1,n+=t}e=i!==r?n+e.substring(i,r):n}return e}var wU=/([A-Z])/g,kU=/^ms-/,aC=Array.isArray,AU=fe("<script>"),EU=fe("<\/script>"),TU=fe('<script src="'),_U=fe('<script type="module" src="'),B1=fe('" async=""><\/script>'),RU=/(<\/|<)(s)(cript)/gi;function xU(e,t,n,r){return""+t+(n==="s"?"\\u0073":"\\u0053")+r}function NU(e,t,n,r,i){e=e===void 0?"":e,t=t===void 0?AU:fe('<script nonce="'+Mn(t)+'">');var s=[];if(n!==void 0&&s.push(t,Ze((""+n).replace(RU,xU)),EU),r!==void 0)for(n=0;n<r.length;n++)s.push(TU,Ze(Mn(r[n])),B1);if(i!==void 0)for(r=0;r<i.length;r++)s.push(_U,Ze(Mn(i[r])),B1);return{bootstrapChunks:s,startInlineScript:t,placeholderPrefix:fe(e+"P:"),segmentPrefix:fe(e+"S:"),boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function ns(e,t){return{insertionMode:e,selectedValue:t}}function PU(e){return ns(e==="http://www.w3.org/2000/svg"?2:e==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function MU(e,t,n){switch(t){case"select":return ns(1,n.value!=null?n.value:n.defaultValue);case"svg":return ns(2,null);case"math":return ns(3,null);case"foreignObject":return ns(1,null);case"table":return ns(4,null);case"thead":case"tbody":case"tfoot":return ns(5,null);case"colgroup":return ns(7,null);case"tr":return ns(6,null)}return 4<=e.insertionMode||e.insertionMode===0?ns(1,null):e}var tb=fe("<!-- -->");function F1(e,t,n,r){return t===""?r:(r&&e.push(tb),e.push(Ze(Mn(t))),!0)}var U1=new Map,DU=fe(' style="'),V1=fe(":"),OU=fe(";");function nN(e,t,n){if(typeof n!="object")throw Error(We(62));t=!0;for(var r in n)if(Sr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var s=Ze(Mn(r));i=Ze(Mn((""+i).trim()))}else{s=r;var o=U1.get(s);o!==void 0||(o=fe(Mn(s.replace(wU,"-$1").toLowerCase().replace(kU,"-ms-"))),U1.set(s,o)),s=o,i=typeof i=="number"?i===0||Sr.call(_p,r)?Ze(""+i):Ze(i+"px"):Ze(Mn((""+i).trim()))}t?(t=!1,e.push(DU,s,V1,i)):e.push(OU,s,V1,i)}}t||e.push(oc)}var qo=fe(" "),ul=fe('="'),oc=fe('"'),G1=fe('=""');function Dr(e,t,n,r){switch(n){case"style":nN(e,t,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(t=Un.hasOwnProperty(n)?Un[n]:null,t!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!t.acceptsBooleans)return}switch(n=Ze(t.attributeName),t.type){case 3:r&&e.push(qo,n,G1);break;case 4:r===!0?e.push(qo,n,G1):r!==!1&&e.push(qo,n,ul,Ze(Mn(r)),oc);break;case 5:isNaN(r)||e.push(qo,n,ul,Ze(Mn(r)),oc);break;case 6:!isNaN(r)&&1<=r&&e.push(qo,n,ul,Ze(Mn(r)),oc);break;default:t.sanitizeURL&&(r=""+r),e.push(qo,n,ul,Ze(Mn(r)),oc)}}else if(tN(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(t=n.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-")return}e.push(qo,Ze(n),ul,Ze(Mn(r)),oc)}}}var Qo=fe(">"),W1=fe("/>");function Rp(e,t,n){if(t!=null){if(n!=null)throw Error(We(60));if(typeof t!="object"||!("__html"in t))throw Error(We(61));t=t.__html,t!=null&&e.push(Ze(""+t))}}function LU(e){var t="";return qx.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}var yy=fe(' selected=""');function Cy(e,t,n,r){e.push(rs(n));var i=n=null,s;for(s in t)if(Sr.call(t,s)){var o=t[s];if(o!=null)switch(s){case"children":n=o;break;case"dangerouslySetInnerHTML":i=o;break;default:Dr(e,r,s,o)}}return e.push(Qo),Rp(e,i,n),typeof n=="string"?(e.push(Ze(Mn(n))),null):n}var Iy=fe(`
`),BU=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,H1=new Map;function rs(e){var t=H1.get(e);if(t===void 0){if(!BU.test(e))throw Error(We(65,e));t=fe("<"+e),H1.set(e,t)}return t}var FU=fe("<!DOCTYPE html>");function UU(e,t,n,r,i){switch(t){case"select":e.push(rs("select"));var s=null,o=null;for(u in n)if(Sr.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"defaultValue":case"value":break;default:Dr(e,r,u,a)}}return e.push(Qo),Rp(e,o,s),s;case"option":o=i.selectedValue,e.push(rs("option"));var c=a=null,l=null,u=null;for(s in n)if(Sr.call(n,s)){var d=n[s];if(d!=null)switch(s){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:Dr(e,r,s,d)}}if(o!=null)if(n=c!==null?""+c:LU(a),aC(o)){for(r=0;r<o.length;r++)if(""+o[r]===n){e.push(yy);break}}else""+o===n&&e.push(yy);else l&&e.push(yy);return e.push(Qo),Rp(e,u,a),a;case"textarea":e.push(rs("textarea")),u=o=s=null;for(a in n)if(Sr.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":s=c;break;case"defaultValue":o=c;break;case"dangerouslySetInnerHTML":throw Error(We(91));default:Dr(e,r,a,c)}if(s===null&&o!==null&&(s=o),e.push(Qo),u!=null){if(s!=null)throw Error(We(92));if(aC(u)&&1<u.length)throw Error(We(93));s=""+u}return typeof s=="string"&&s[0]===`
`&&e.push(Iy),s!==null&&e.push(Ze(Mn(""+s))),null;case"input":e.push(rs("input")),c=u=a=s=null;for(o in n)if(Sr.call(n,o)&&(l=n[o],l!=null))switch(o){case"children":case"dangerouslySetInnerHTML":throw Error(We(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":s=l;break;default:Dr(e,r,o,l)}return u!==null?Dr(e,r,"checked",u):c!==null&&Dr(e,r,"checked",c),s!==null?Dr(e,r,"value",s):a!==null&&Dr(e,r,"value",a),e.push(W1),null;case"menuitem":e.push(rs("menuitem"));for(var f in n)if(Sr.call(n,f)&&(s=n[f],s!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(We(400));default:Dr(e,r,f,s)}return e.push(Qo),null;case"title":e.push(rs("title")),s=null;for(d in n)if(Sr.call(n,d)&&(o=n[d],o!=null))switch(d){case"children":s=o;break;case"dangerouslySetInnerHTML":throw Error(We(434));default:Dr(e,r,d,o)}return e.push(Qo),s;case"listing":case"pre":e.push(rs(t)),o=s=null;for(c in n)if(Sr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;default:Dr(e,r,c,a)}if(e.push(Qo),o!=null){if(s!=null)throw Error(We(60));if(typeof o!="object"||!("__html"in o))throw Error(We(61));n=o.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?e.push(Iy,Ze(n)):e.push(Ze(""+n)))}return typeof s=="string"&&s[0]===`
`&&e.push(Iy),s;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":e.push(rs(t));for(var h in n)if(Sr.call(n,h)&&(s=n[h],s!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(We(399,t));default:Dr(e,r,h,s)}return e.push(W1),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Cy(e,n,t,r);case"html":return i.insertionMode===0&&e.push(FU),Cy(e,n,t,r);default:if(t.indexOf("-")===-1&&typeof n.is!="string")return Cy(e,n,t,r);e.push(rs(t)),o=s=null;for(l in n)if(Sr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":s=a;break;case"dangerouslySetInnerHTML":o=a;break;case"style":nN(e,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:tN(l)&&typeof a!="function"&&typeof a!="symbol"&&e.push(qo,Ze(l),ul,Ze(Mn(a)),oc)}return e.push(Qo),Rp(e,o,s),s}}var VU=fe("</"),GU=fe(">"),WU=fe('<template id="'),HU=fe('"></template>'),jU=fe("<!--$-->"),$U=fe('<!--$?--><template id="'),ZU=fe('"></template>'),zU=fe("<!--$!-->"),XU=fe("<!--/$-->"),KU=fe("<template"),JU=fe('"'),YU=fe(' data-dgst="');fe(' data-msg="');fe(' data-stck="');var qU=fe("></template>");function j1(e,t,n){if(ye(e,$U),n===null)throw Error(We(395));return ye(e,n),_t(e,ZU)}var QU=fe('<div hidden id="'),e4=fe('">'),t4=fe("</div>"),n4=fe('<svg aria-hidden="true" style="display:none" id="'),r4=fe('">'),i4=fe("</svg>"),s4=fe('<math aria-hidden="true" style="display:none" id="'),o4=fe('">'),a4=fe("</math>"),c4=fe('<table hidden id="'),l4=fe('">'),u4=fe("</table>"),d4=fe('<table hidden><tbody id="'),f4=fe('">'),h4=fe("</tbody></table>"),p4=fe('<table hidden><tr id="'),m4=fe('">'),g4=fe("</tr></table>"),v4=fe('<table hidden><colgroup id="'),y4=fe('">'),C4=fe("</colgroup></table>");function I4(e,t,n,r){switch(n.insertionMode){case 0:case 1:return ye(e,QU),ye(e,t.segmentPrefix),ye(e,Ze(r.toString(16))),_t(e,e4);case 2:return ye(e,n4),ye(e,t.segmentPrefix),ye(e,Ze(r.toString(16))),_t(e,r4);case 3:return ye(e,s4),ye(e,t.segmentPrefix),ye(e,Ze(r.toString(16))),_t(e,o4);case 4:return ye(e,c4),ye(e,t.segmentPrefix),ye(e,Ze(r.toString(16))),_t(e,l4);case 5:return ye(e,d4),ye(e,t.segmentPrefix),ye(e,Ze(r.toString(16))),_t(e,f4);case 6:return ye(e,p4),ye(e,t.segmentPrefix),ye(e,Ze(r.toString(16))),_t(e,m4);case 7:return ye(e,v4),ye(e,t.segmentPrefix),ye(e,Ze(r.toString(16))),_t(e,y4);default:throw Error(We(397))}}function S4(e,t){switch(t.insertionMode){case 0:case 1:return _t(e,t4);case 2:return _t(e,i4);case 3:return _t(e,a4);case 4:return _t(e,u4);case 5:return _t(e,h4);case 6:return _t(e,g4);case 7:return _t(e,C4);default:throw Error(We(397))}}var b4=fe('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),w4=fe('$RS("'),k4=fe('","'),A4=fe('")<\/script>'),E4=fe('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),T4=fe('$RC("'),_4=fe('","'),R4=fe('")<\/script>'),x4=fe('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),N4=fe('$RX("'),P4=fe('"'),M4=fe(")<\/script>"),Sy=fe(","),D4=/[<\u2028\u2029]/g;function by(e){return JSON.stringify(e).replace(D4,function(t){switch(t){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var $d=Object.assign,O4=Symbol.for("react.element"),rN=Symbol.for("react.portal"),iN=Symbol.for("react.fragment"),sN=Symbol.for("react.strict_mode"),oN=Symbol.for("react.profiler"),aN=Symbol.for("react.provider"),cN=Symbol.for("react.context"),lN=Symbol.for("react.forward_ref"),uN=Symbol.for("react.suspense"),dN=Symbol.for("react.suspense_list"),fN=Symbol.for("react.memo"),nb=Symbol.for("react.lazy"),L4=Symbol.for("react.scope"),B4=Symbol.for("react.debug_trace_mode"),F4=Symbol.for("react.legacy_hidden"),U4=Symbol.for("react.default_value"),$1=Symbol.iterator;function cC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case iN:return"Fragment";case rN:return"Portal";case oN:return"Profiler";case sN:return"StrictMode";case uN:return"Suspense";case dN:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cN:return(e.displayName||"Context")+".Consumer";case aN:return(e._context.displayName||"Context")+".Provider";case lN:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case fN:return t=e.displayName||null,t!==null?t:cC(e.type)||"Memo";case nb:t=e._payload,e=e._init;try{return cC(e(t))}catch{}}return null}var hN={};function Z1(e,t){if(e=e.contextTypes,!e)return hN;var n={},r;for(r in e)n[r]=t[r];return n}var gc=null;function Ug(e,t){if(e!==t){e.context._currentValue=e.parentValue,e=e.parent;var n=t.parent;if(e===null){if(n!==null)throw Error(We(401))}else{if(n===null)throw Error(We(401));Ug(e,n)}t.context._currentValue=t.value}}function pN(e){e.context._currentValue=e.parentValue,e=e.parent,e!==null&&pN(e)}function mN(e){var t=e.parent;t!==null&&mN(t),e.context._currentValue=e.value}function gN(e,t){if(e.context._currentValue=e.parentValue,e=e.parent,e===null)throw Error(We(402));e.depth===t.depth?Ug(e,t):gN(e,t)}function vN(e,t){var n=t.parent;if(n===null)throw Error(We(402));e.depth===n.depth?Ug(e,n):vN(e,n),t.context._currentValue=t.value}function _m(e){var t=gc;t!==e&&(t===null?mN(e):e===null?pN(t):t.depth===e.depth?Ug(t,e):t.depth>e.depth?gN(t,e):vN(t,e),gc=e)}var z1={isMounted:function(){return!1},enqueueSetState:function(e,t){e=e._reactInternals,e.queue!==null&&e.queue.push(t)},enqueueReplaceState:function(e,t){e=e._reactInternals,e.replace=!0,e.queue=[t]},enqueueForceUpdate:function(){}};function X1(e,t,n,r){var i=e.state!==void 0?e.state:null;e.updater=z1,e.props=n,e.state=i;var s={queue:[],replace:!1};e._reactInternals=s;var o=t.contextType;if(e.context=typeof o=="object"&&o!==null?o._currentValue:r,o=t.getDerivedStateFromProps,typeof o=="function"&&(o=o(n,i),i=o==null?i:$d({},i,o),e.state=i),typeof t.getDerivedStateFromProps!="function"&&typeof e.getSnapshotBeforeUpdate!="function"&&(typeof e.UNSAFE_componentWillMount=="function"||typeof e.componentWillMount=="function"))if(t=e.state,typeof e.componentWillMount=="function"&&e.componentWillMount(),typeof e.UNSAFE_componentWillMount=="function"&&e.UNSAFE_componentWillMount(),t!==e.state&&z1.enqueueReplaceState(e,e.state,null),s.queue!==null&&0<s.queue.length)if(t=s.queue,o=s.replace,s.queue=null,s.replace=!1,o&&t.length===1)e.state=t[0];else{for(s=o?t[0]:e.state,i=!0,o=o?1:0;o<t.length;o++){var a=t[o];a=typeof a=="function"?a.call(e,s,n,r):a,a!=null&&(i?(i=!1,s=$d({},s,a)):$d(s,a))}e.state=s}else s.queue=null}var V4={id:1,overflow:""};function lC(e,t,n){var r=e.id;e=e.overflow;var i=32-xp(r)-1;r&=~(1<<i),n+=1;var s=32-xp(t)+i;if(30<s){var o=i-i%5;return s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,{id:1<<32-xp(t)+i|n<<i|r,overflow:s+e}}return{id:1<<s|n<<i|r,overflow:e}}var xp=Math.clz32?Math.clz32:H4,G4=Math.log,W4=Math.LN2;function H4(e){return e>>>=0,e===0?32:31-(G4(e)/W4|0)|0}function j4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $4=typeof Object.is=="function"?Object.is:j4,Oo=null,rb=null,Np=null,St=null,Ad=!1,Rm=!1,wf=0,ga=null,Vg=0;function ac(){if(Oo===null)throw Error(We(321));return Oo}function K1(){if(0<Vg)throw Error(We(312));return{memoizedState:null,queue:null,next:null}}function ib(){return St===null?Np===null?(Ad=!1,Np=St=K1()):(Ad=!0,St=Np):St.next===null?(Ad=!1,St=St.next=K1()):(Ad=!0,St=St.next),St}function sb(){rb=Oo=null,Rm=!1,Np=null,Vg=0,St=ga=null}function yN(e,t){return typeof t=="function"?t(e):t}function J1(e,t,n){if(Oo=ac(),St=ib(),Ad){var r=St.queue;if(t=r.dispatch,ga!==null&&(n=ga.get(r),n!==void 0)){ga.delete(r),r=St.memoizedState;do r=e(r,n.action),n=n.next;while(n!==null);return St.memoizedState=r,[r,t]}return[St.memoizedState,t]}return e=e===yN?typeof t=="function"?t():t:n!==void 0?n(t):t,St.memoizedState=e,e=St.queue={last:null,dispatch:null},e=e.dispatch=Z4.bind(null,Oo,e),[St.memoizedState,e]}function Y1(e,t){if(Oo=ac(),St=ib(),t=t===void 0?null:t,St!==null){var n=St.memoizedState;if(n!==null&&t!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<t.length;i++)if(!$4(t[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return e=e(),St.memoizedState=[e,t],e}function Z4(e,t,n){if(25<=Vg)throw Error(We(301));if(e===Oo)if(Rm=!0,e={action:n,next:null},ga===null&&(ga=new Map),n=ga.get(t),n===void 0)ga.set(t,e);else{for(t=n;t.next!==null;)t=t.next;t.next=e}}function z4(){throw Error(We(394))}function Hh(){}var q1={readContext:function(e){return e._currentValue},useContext:function(e){return ac(),e._currentValue},useMemo:Y1,useReducer:J1,useRef:function(e){Oo=ac(),St=ib();var t=St.memoizedState;return t===null?(e={current:e},St.memoizedState=e):t},useState:function(e){return J1(yN,e)},useInsertionEffect:Hh,useLayoutEffect:function(){},useCallback:function(e,t){return Y1(function(){return e},t)},useImperativeHandle:Hh,useEffect:Hh,useDebugValue:Hh,useDeferredValue:function(e){return ac(),e},useTransition:function(){return ac(),[!1,z4]},useId:function(){var e=rb.treeContext,t=e.overflow;e=e.id,e=(e&~(1<<32-xp(e)-1)).toString(32)+t;var n=Pp;if(n===null)throw Error(We(404));return t=wf++,e=":"+n.idPrefix+"R"+e,0<t&&(e+="H"+t.toString(32)),e+":"},useMutableSource:function(e,t){return ac(),t(e._source)},useSyncExternalStore:function(e,t,n){if(n===void 0)throw Error(We(407));return n()}},Pp=null,wy=qx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function X4(e){return console.error(e),null}function Ed(){}function K4(e,t,n,r,i,s,o,a,c){var l=[],u=new Set;return t={destination:null,responseState:t,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?X4:i,onAllReady:s===void 0?Ed:s,onShellReady:o===void 0?Ed:o,onShellError:a===void 0?Ed:a,onFatalError:c===void 0?Ed:c},n=xm(t,0,null,n,!1,!1),n.parentFlushed=!0,e=ob(t,e,null,n,u,hN,null,V4),l.push(e),t}function ob(e,t,n,r,i,s,o,a){e.allPendingTasks++,n===null?e.pendingRootTasks++:n.pendingTasks++;var c={node:t,ping:function(){var l=e.pingedTasks;l.push(c),l.length===1&&SN(e)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:s,context:o,treeContext:a};return i.add(c),c}function xm(e,t,n,r,i,s){return{status:0,id:-1,index:t,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:s}}function kf(e,t){if(e=e.onError(t),e!=null&&typeof e!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof e+'" instead');return e}function Nm(e,t){var n=e.onShellError;n(t),n=e.onFatalError,n(t),e.destination!==null?(e.status=2,eN(e.destination,t)):(e.status=1,e.fatalError=t)}function Q1(e,t,n,r,i){for(Oo={},rb=t,wf=0,e=n(r,i);Rm;)Rm=!1,wf=0,Vg+=1,St=null,e=n(r,i);return sb(),e}function eA(e,t,n,r){var i=n.render(),s=r.childContextTypes;if(s!=null){var o=t.legacyContext;if(typeof n.getChildContext!="function")r=o;else{n=n.getChildContext();for(var a in n)if(!(a in s))throw Error(We(108,cC(r)||"Unknown",a));r=$d({},o,n)}t.legacyContext=r,jr(e,t,i),t.legacyContext=o}else jr(e,t,i)}function tA(e,t){if(e&&e.defaultProps){t=$d({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function uC(e,t,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=Z1(n,t.legacyContext);var s=n.contextType;s=new n(r,typeof s=="object"&&s!==null?s._currentValue:i),X1(s,n,r,i),eA(e,t,s,n)}else{s=Z1(n,t.legacyContext),i=Q1(e,t,n,r,s);var o=wf!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)X1(i,n,r,s),eA(e,t,i,n);else if(o){r=t.treeContext,t.treeContext=lC(r,1,0);try{jr(e,t,i)}finally{t.treeContext=r}}else jr(e,t,i)}else if(typeof n=="string"){switch(i=t.blockedSegment,s=UU(i.chunks,n,r,e.responseState,i.formatContext),i.lastPushedText=!1,o=i.formatContext,i.formatContext=MU(o,n,r),dC(e,t,s),i.formatContext=o,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(VU,Ze(n),GU)}i.lastPushedText=!1}else{switch(n){case F4:case B4:case sN:case oN:case iN:jr(e,t,r.children);return;case dN:jr(e,t,r.children);return;case L4:throw Error(We(343));case uN:e:{n=t.blockedBoundary,i=t.blockedSegment,s=r.fallback,r=r.children,o=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:o,errorDigest:null},c=xm(e,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=xm(e,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,t.blockedBoundary=a,t.blockedSegment=l;try{if(dC(e,t,r),l.lastPushedText&&l.textEmbedded&&l.chunks.push(tb),l.status=1,Pm(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=kf(e,u)}finally{t.blockedBoundary=n,t.blockedSegment=i}t=ob(e,s,n,c,o,t.legacyContext,t.context,t.treeContext),e.pingedTasks.push(t)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case lN:if(r=Q1(e,t,n.render,r,i),wf!==0){n=t.treeContext,t.treeContext=lC(n,1,0);try{jr(e,t,r)}finally{t.treeContext=n}}else jr(e,t,r);return;case fN:n=n.type,r=tA(n,r),uC(e,t,n,r,i);return;case aN:if(i=r.children,n=n._context,r=r.value,s=n._currentValue,n._currentValue=r,o=gc,gc=r={parent:o,depth:o===null?0:o.depth+1,context:n,parentValue:s,value:r},t.context=r,jr(e,t,i),e=gc,e===null)throw Error(We(403));r=e.parentValue,e.context._currentValue=r===U4?e.context._defaultValue:r,e=gc=e.parent,t.context=e;return;case cN:r=r.children,r=r(n._currentValue),jr(e,t,r);return;case nb:i=n._init,n=i(n._payload),r=tA(n,r),uC(e,t,n,r,void 0);return}throw Error(We(130,n==null?n:typeof n,""))}}function jr(e,t,n){if(t.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case O4:uC(e,t,n.type,n.props,n.ref);return;case rN:throw Error(We(257));case nb:var r=n._init;n=r(n._payload),jr(e,t,n);return}if(aC(n)){nA(e,t,n);return}if(n===null||typeof n!="object"?r=null:(r=$1&&n[$1]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);nA(e,t,i)}return}throw e=Object.prototype.toString.call(n),Error(We(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}typeof n=="string"?(r=t.blockedSegment,r.lastPushedText=F1(t.blockedSegment.chunks,n,e.responseState,r.lastPushedText)):typeof n=="number"&&(r=t.blockedSegment,r.lastPushedText=F1(t.blockedSegment.chunks,""+n,e.responseState,r.lastPushedText))}function nA(e,t,n){for(var r=n.length,i=0;i<r;i++){var s=t.treeContext;t.treeContext=lC(s,r,i);try{dC(e,t,n[i])}finally{t.treeContext=s}}}function dC(e,t,n){var r=t.blockedSegment.formatContext,i=t.legacyContext,s=t.context;try{return jr(e,t,n)}catch(c){if(sb(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var o=t.blockedSegment,a=xm(e,o.chunks.length,null,o.formatContext,o.lastPushedText,!0);o.children.push(a),o.lastPushedText=!1,e=ob(e,t.node,t.blockedBoundary,a,t.abortSet,t.legacyContext,t.context,t.treeContext).ping,n.then(e,e),t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,_m(s)}else throw t.blockedSegment.formatContext=r,t.legacyContext=i,t.context=s,_m(s),c}}function J4(e){var t=e.blockedBoundary;e=e.blockedSegment,e.status=3,IN(this,t,e)}function CN(e,t,n){var r=e.blockedBoundary;e.blockedSegment.status=3,r===null?(t.allPendingTasks--,t.status!==2&&(t.status=2,t.destination!==null&&t.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,e=n===void 0?Error(We(432)):n,r.errorDigest=t.onError(e),r.parentFlushed&&t.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return CN(i,t,n)}),r.fallbackAbortableTasks.clear(),t.allPendingTasks--,t.allPendingTasks===0&&(r=t.onAllReady,r()))}function Pm(e,t){if(t.chunks.length===0&&t.children.length===1&&t.children[0].boundary===null){var n=t.children[0];n.id=t.id,n.parentFlushed=!0,n.status===1&&Pm(e,n)}else e.completedSegments.push(t)}function IN(e,t,n){if(t===null){if(n.parentFlushed){if(e.completedRootSegment!==null)throw Error(We(389));e.completedRootSegment=n}e.pendingRootTasks--,e.pendingRootTasks===0&&(e.onShellError=Ed,t=e.onShellReady,t())}else t.pendingTasks--,t.forceClientRender||(t.pendingTasks===0?(n.parentFlushed&&n.status===1&&Pm(t,n),t.parentFlushed&&e.completedBoundaries.push(t),t.fallbackAbortableTasks.forEach(J4,e),t.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Pm(t,n),t.completedSegments.length===1&&t.parentFlushed&&e.partialBoundaries.push(t)));e.allPendingTasks--,e.allPendingTasks===0&&(e=e.onAllReady,e())}function SN(e){if(e.status!==2){var t=gc,n=wy.current;wy.current=q1;var r=Pp;Pp=e.responseState;try{var i=e.pingedTasks,s;for(s=0;s<i.length;s++){var o=i[s],a=e,c=o.blockedSegment;if(c.status===0){_m(o.context);try{jr(a,o,o.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(tb),o.abortSet.delete(o),c.status=1,IN(a,o.blockedBoundary,c)}catch(p){if(sb(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=o.ping;p.then(l,l)}else{o.abortSet.delete(o),c.status=4;var u=o.blockedBoundary,d=p,f=kf(a,d);if(u===null?Nm(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=f,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var h=a.onAllReady;h()}}}finally{}}}i.splice(0,s),e.destination!==null&&ab(e,e.destination)}catch(p){kf(e,p),Nm(e,p)}finally{Pp=r,wy.current=n,n===q1&&_m(t)}}}function jh(e,t,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=e.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,e=e.responseState,ye(t,WU),ye(t,e.placeholderPrefix),e=Ze(r.toString(16)),ye(t,e),_t(t,HU);case 1:n.status=2;var i=!0;r=n.chunks;var s=0;n=n.children;for(var o=0;o<n.length;o++){for(i=n[o];s<i.index;s++)ye(t,r[s]);i=Gg(e,t,i)}for(;s<r.length-1;s++)ye(t,r[s]);return s<r.length&&(i=_t(t,r[s])),i;default:throw Error(We(390))}}function Gg(e,t,n){var r=n.boundary;if(r===null)return jh(e,t,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,_t(t,zU),ye(t,KU),r&&(ye(t,YU),ye(t,Ze(Mn(r))),ye(t,JU)),_t(t,qU),jh(e,t,n);else if(0<r.pendingTasks){r.rootSegmentID=e.nextSegmentId++,0<r.completedSegments.length&&e.partialBoundaries.push(r);var i=e.responseState,s=i.nextSuspenseID++;i=fe(i.boundaryPrefix+s.toString(16)),r=r.id=i,j1(t,e.responseState,r),jh(e,t,n)}else if(r.byteSize>e.progressiveChunkSize)r.rootSegmentID=e.nextSegmentId++,e.completedBoundaries.push(r),j1(t,e.responseState,r.id),jh(e,t,n);else{if(_t(t,jU),n=r.completedSegments,n.length!==1)throw Error(We(391));Gg(e,t,n[0])}return _t(t,XU)}function rA(e,t,n){return I4(t,e.responseState,n.formatContext,n.id),Gg(e,t,n),S4(t,n.formatContext)}function iA(e,t,n){for(var r=n.completedSegments,i=0;i<r.length;i++)bN(e,t,n,r[i]);if(r.length=0,e=e.responseState,r=n.id,n=n.rootSegmentID,ye(t,e.startInlineScript),e.sentCompleteBoundaryFunction?ye(t,T4):(e.sentCompleteBoundaryFunction=!0,ye(t,E4)),r===null)throw Error(We(395));return n=Ze(n.toString(16)),ye(t,r),ye(t,_4),ye(t,e.segmentPrefix),ye(t,n),_t(t,R4)}function bN(e,t,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(We(392));return rA(e,t,r)}return rA(e,t,r),e=e.responseState,ye(t,e.startInlineScript),e.sentCompleteSegmentFunction?ye(t,w4):(e.sentCompleteSegmentFunction=!0,ye(t,b4)),ye(t,e.segmentPrefix),i=Ze(i.toString(16)),ye(t,i),ye(t,k4),ye(t,e.placeholderPrefix),ye(t,i),_t(t,A4)}function ab(e,t){Wr=new Uint8Array(512),Hr=0;try{var n=e.completedRootSegment;if(n!==null&&e.pendingRootTasks===0){Gg(e,t,n),e.completedRootSegment=null;var r=e.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)ye(t,r[n]);n<r.length&&_t(t,r[n])}var i=e.clientRenderedBoundaries,s;for(s=0;s<i.length;s++){var o=i[s];r=t;var a=e.responseState,c=o.id,l=o.errorDigest,u=o.errorMessage,d=o.errorComponentStack;if(ye(r,a.startInlineScript),a.sentClientRenderFunction?ye(r,N4):(a.sentClientRenderFunction=!0,ye(r,x4)),c===null)throw Error(We(395));ye(r,c),ye(r,P4),(l||u||d)&&(ye(r,Sy),ye(r,Ze(by(l||"")))),(u||d)&&(ye(r,Sy),ye(r,Ze(by(u||"")))),d&&(ye(r,Sy),ye(r,Ze(by(d)))),_t(r,M4)}i.splice(0,s);var f=e.completedBoundaries;for(s=0;s<f.length;s++)iA(e,t,f[s]);f.splice(0,s),D1(t),Wr=new Uint8Array(512),Hr=0;var h=e.partialBoundaries;for(s=0;s<h.length;s++){var p=h[s];e:{i=e,o=t;var m=p.completedSegments;for(a=0;a<m.length;a++)if(!bN(i,o,p,m[a])){a++,m.splice(0,a);var y=!1;break e}m.splice(0,a),y=!0}if(!y){e.destination=null,s++,h.splice(0,s);return}}h.splice(0,s);var g=e.completedBoundaries;for(s=0;s<g.length;s++)iA(e,t,g[s]);g.splice(0,s)}finally{D1(t),e.allPendingTasks===0&&e.pingedTasks.length===0&&e.clientRenderedBoundaries.length===0&&e.completedBoundaries.length===0&&t.close()}}function sA(e,t){try{var n=e.abortableTasks;n.forEach(function(r){return CN(r,e,t)}),n.clear(),e.destination!==null&&ab(e,e.destination)}catch(r){kf(e,r),Nm(e,r)}}qS.renderToReadableStream=function(e,t){return new Promise(function(n,r){var i,s,o=new Promise(function(u,d){s=u,i=d}),a=K4(e,NU(t?t.identifierPrefix:void 0,t?t.nonce:void 0,t?t.bootstrapScriptContent:void 0,t?t.bootstrapScripts:void 0,t?t.bootstrapModules:void 0),PU(t?t.namespaceURI:void 0),t?t.progressiveChunkSize:void 0,t?t.onError:void 0,s,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,eN(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{ab(a,d)}catch(f){kf(a,f),Nm(a,f)}}},cancel:function(){sA(a)}},{highWaterMark:0});u.allReady=o,n(u)},function(u){o.catch(function(){}),r(u)},i);if(t&&t.signal){var c=t.signal,l=function(){sA(a,c.reason),c.removeEventListener("abort",l)};c.addEventListener("abort",l)}SN(a)})};qS.version="18.2.0";var Du,wN;Du=Mu,wN=qS;$c.version=Du.version;$c.renderToString=Du.renderToString;$c.renderToStaticMarkup=Du.renderToStaticMarkup;$c.renderToNodeStream=Du.renderToNodeStream;$c.renderToStaticNodeStream=Du.renderToStaticNodeStream;$c.renderToReadableStream=wN.renderToReadableStream;const cc=class cc extends pt.Component{constructor(n){super(n);W(this,"outputRef",pt.createRef());W(this,"state",{output:[],sidebarVisible:!1});W(this,"saveOutput",()=>{const n=this.state.output.map(r=>$c.renderToStaticMarkup(r));localStorage.setItem(cc.LOCAL_STORAGE_KEY,JSON.stringify(n))});W(this,"loadOutput",()=>{const n=localStorage.getItem(cc.LOCAL_STORAGE_KEY);if(n){const r=JSON.parse(n).map(i=>pt.createElement("div",{dangerouslySetInnerHTML:{__html:i}}));this.setState({output:r})}});W(this,"addCommand",n=>{this.addToOutput([Y.jsx("span",{className:"command","aria-live":"off",children:n})])});W(this,"addError",n=>this.addToOutput([Y.jsxs("h2",{children:[" Error: ",n.message]})]));W(this,"handleConnected",()=>this.addToOutput([Y.jsx("h2",{children:" Connected"})]));W(this,"handleDisconnected",()=>{this.addToOutput([Y.jsx("h2",{children:" Disconnected"})]),this.setState({sidebarVisible:!1})});W(this,"handleUserList",n=>this.setState({sidebarVisible:!!n}));W(this,"scrollToBottom",()=>{const n=this.outputRef.current;n&&(n.scrollTop=n.scrollHeight)});W(this,"handleMessage",n=>{if(!n)return;const r=B5(n,this.handleExitClick);this.addToOutput(r)});W(this,"handleExitClick",n=>{this.props.client.sendCommand(n)});this.loadOutput(),this.props.client.on("message",this.handleMessage),this.props.client.on("connect",this.handleConnected),this.props.client.on("disconnect",this.handleDisconnected),this.props.client.on("error",this.addError),this.props.client.on("command",this.addCommand),this.props.client.on("userlist",this.handleUserList)}componentDidUpdate(){this.scrollToBottom(),this.saveOutput()}componentWillUnmount(){this.props.client.removeListener("message",this.handleMessage)}addToOutput(n){this.setState(r=>{const i=r.output.length,s=n.map((c,l)=>Y.jsx("div",{children:c},i+l));return{output:[...r.output,...s].slice(-cc.MAX_OUTPUT_LENGTH)}})}saveLog(){const n=this.outputRef.current;if(n){const r=n.innerHTML,i=new Blob([r],{type:"text/html"}),s=URL.createObjectURL(i),o=document.createElement("a"),a=new Date,c=a.toLocaleDateString(),l=a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=`${document.title.replace(/\s+/g,"-")}-log-${c}-${l}.html`;o.download=d,o.href=s,o.click(),URL.revokeObjectURL(s),o.remove()}}clearLog(){this.setState({output:[]})}render(){var n="output";return this.state.sidebarVisible&&(n+=" sidebar-visible"),Y.jsx("div",{ref:this.outputRef,className:n,"aria-live":"polite",role:"log",children:this.state.output})}};W(cc,"MAX_OUTPUT_LENGTH",5e3),W(cc,"LOCAL_STORAGE_KEY","outputLog");let fC=cc;var kN={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function s(c,l,u,d,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var h=new i(u,d||c,f),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],h]:c._events[p].push(h):(c._events[p]=h,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)t.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var f=0,h=d.length,p=new Array(h);f<h;f++)p[f]=d[f].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,f,h,p){var m=n?n+l:l;if(!this._events[m])return!1;var y=this._events[m],g=arguments.length,v,S;if(y.fn){switch(y.once&&this.removeListener(l,y.fn,void 0,!0),g){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,f),!0;case 5:return y.fn.call(y.context,u,d,f,h),!0;case 6:return y.fn.call(y.context,u,d,f,h,p),!0}for(S=1,v=new Array(g-1);S<g;S++)v[S-1]=arguments[S];y.fn.apply(y.context,v)}else{var E=y.length,k;for(S=0;S<E;S++)switch(y[S].once&&this.removeListener(l,y[S].fn,void 0,!0),g){case 1:y[S].fn.call(y[S].context);break;case 2:y[S].fn.call(y[S].context,u);break;case 3:y[S].fn.call(y[S].context,u,d);break;case 4:y[S].fn.call(y[S].context,u,d,f);break;default:if(!v)for(k=1,v=new Array(g-1);k<g;k++)v[k-1]=arguments[k];y[S].fn.apply(y[S].context,v)}}return!0},a.prototype.on=function(l,u,d){return s(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return s(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,f){var h=n?n+l:l;if(!this._events[h])return this;if(!u)return o(this,h),this;var p=this._events[h];if(p.fn)p.fn===u&&(!f||p.once)&&(!d||p.context===d)&&o(this,h);else{for(var m=0,y=[],g=p.length;m<g;m++)(p[m].fn!==u||f&&!p[m].once||d&&p[m].context!==d)&&y.push(p[m]);y.length?this._events[h]=y.length===1?y[0]:y:o(this,h)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,e.exports=a})(kN);var Y4=kN.exports;const AN=Jf(Y4);var xn={},Wg={};Wg.byteLength=eV;Wg.toByteArray=nV;Wg.fromByteArray=sV;var ds=[],ri=[],q4=typeof Uint8Array<"u"?Uint8Array:Array,ky="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var sl=0,Q4=ky.length;sl<Q4;++sl)ds[sl]=ky[sl],ri[ky.charCodeAt(sl)]=sl;ri[45]=62;ri[95]=63;function EN(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function eV(e){var t=EN(e),n=t[0],r=t[1];return(n+r)*3/4-r}function tV(e,t,n){return(t+n)*3/4-n}function nV(e){var t,n=EN(e),r=n[0],i=n[1],s=new q4(tV(e,r,i)),o=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)t=ri[e.charCodeAt(c)]<<18|ri[e.charCodeAt(c+1)]<<12|ri[e.charCodeAt(c+2)]<<6|ri[e.charCodeAt(c+3)],s[o++]=t>>16&255,s[o++]=t>>8&255,s[o++]=t&255;return i===2&&(t=ri[e.charCodeAt(c)]<<2|ri[e.charCodeAt(c+1)]>>4,s[o++]=t&255),i===1&&(t=ri[e.charCodeAt(c)]<<10|ri[e.charCodeAt(c+1)]<<4|ri[e.charCodeAt(c+2)]>>2,s[o++]=t>>8&255,s[o++]=t&255),s}function rV(e){return ds[e>>18&63]+ds[e>>12&63]+ds[e>>6&63]+ds[e&63]}function iV(e,t,n){for(var r,i=[],s=t;s<n;s+=3)r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(e[s+2]&255),i.push(rV(r));return i.join("")}function sV(e){for(var t,n=e.length,r=n%3,i=[],s=16383,o=0,a=n-r;o<a;o+=s)i.push(iV(e,o,o+s>a?a:o+s));return r===1?(t=e[n-1],i.push(ds[t>>2]+ds[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],i.push(ds[t>>10]+ds[t>>4&63]+ds[t<<2&63]+"=")),i.join("")}var cb={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */cb.read=function(e,t,n,r,i){var s,o,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,s=h&(1<<-u)-1,h>>=-u,u+=a;u>0;s=s*256+e[t+d],d+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=o*256+e[t+d],d+=f,u-=8);if(s===0)s=1-l;else{if(s===c)return o?NaN:(h?-1:1)*(1/0);o=o+Math.pow(2,r),s=s-l}return(h?-1:1)*o*Math.pow(2,s-r)};cb.write=function(e,t,n,r,i,s){var o,a,c,l=s*8-i-1,u=(1<<l)-1,d=u>>1,f=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:s-1,p=r?1:-1,m=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=u):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),o+d>=1?t+=f/c:t+=f*Math.pow(2,1-d),t*c>=2&&(o++,c/=2),o+d>=u?(a=0,o=u):o+d>=1?(a=(t*c-1)*Math.pow(2,i),o=o+d):(a=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=a&255,h+=p,a/=256,i-=8);for(o=o<<i|a,l+=i;l>0;e[n+h]=o&255,h+=p,o/=256,l-=8);e[n+h-p]|=m*128};(function(e){const t=Wg,n=cb,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=v,e.INSPECT_MAX_BYTES=50;const i=2147483647;e.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const T=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(T,C),T.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function o(T){if(T>i)throw new RangeError('The value "'+T+'" is invalid for option "size"');const C=new Uint8Array(T);return Object.setPrototypeOf(C,a.prototype),C}function a(T,C,I){if(typeof T=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(T)}return c(T,C,I)}a.poolSize=8192;function c(T,C,I){if(typeof T=="string")return f(T,C);if(ArrayBuffer.isView(T))return p(T);if(T==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T);if(je(T,ArrayBuffer)||T&&je(T.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(je(T,SharedArrayBuffer)||T&&je(T.buffer,SharedArrayBuffer)))return m(T,C,I);if(typeof T=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const N=T.valueOf&&T.valueOf();if(N!=null&&N!==T)return a.from(N,C,I);const O=y(T);if(O)return O;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof T[Symbol.toPrimitive]=="function")return a.from(T[Symbol.toPrimitive]("string"),C,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof T)}a.from=function(T,C,I){return c(T,C,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(T){if(typeof T!="number")throw new TypeError('"size" argument must be of type number');if(T<0)throw new RangeError('The value "'+T+'" is invalid for option "size"')}function u(T,C,I){return l(T),T<=0?o(T):C!==void 0?typeof I=="string"?o(T).fill(C,I):o(T).fill(C):o(T)}a.alloc=function(T,C,I){return u(T,C,I)};function d(T){return l(T),o(T<0?0:g(T)|0)}a.allocUnsafe=function(T){return d(T)},a.allocUnsafeSlow=function(T){return d(T)};function f(T,C){if((typeof C!="string"||C==="")&&(C="utf8"),!a.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const I=S(T,C)|0;let N=o(I);const O=N.write(T,C);return O!==I&&(N=N.slice(0,O)),N}function h(T){const C=T.length<0?0:g(T.length)|0,I=o(C);for(let N=0;N<C;N+=1)I[N]=T[N]&255;return I}function p(T){if(je(T,Uint8Array)){const C=new Uint8Array(T);return m(C.buffer,C.byteOffset,C.byteLength)}return h(T)}function m(T,C,I){if(C<0||T.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(T.byteLength<C+(I||0))throw new RangeError('"length" is outside of buffer bounds');let N;return C===void 0&&I===void 0?N=new Uint8Array(T):I===void 0?N=new Uint8Array(T,C):N=new Uint8Array(T,C,I),Object.setPrototypeOf(N,a.prototype),N}function y(T){if(a.isBuffer(T)){const C=g(T.length)|0,I=o(C);return I.length===0||T.copy(I,0,0,C),I}if(T.length!==void 0)return typeof T.length!="number"||zt(T.length)?o(0):h(T);if(T.type==="Buffer"&&Array.isArray(T.data))return h(T.data)}function g(T){if(T>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return T|0}function v(T){return+T!=T&&(T=0),a.alloc(+T)}a.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==a.prototype},a.compare=function(C,I){if(je(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),je(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(C)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===I)return 0;let N=C.length,O=I.length;for(let H=0,Q=Math.min(N,O);H<Q;++H)if(C[H]!==I[H]){N=C[H],O=I[H];break}return N<O?-1:O<N?1:0},a.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(C,I){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return a.alloc(0);let N;if(I===void 0)for(I=0,N=0;N<C.length;++N)I+=C[N].length;const O=a.allocUnsafe(I);let H=0;for(N=0;N<C.length;++N){let Q=C[N];if(je(Q,Uint8Array))H+Q.length>O.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(O,H)):Uint8Array.prototype.set.call(O,Q,H);else if(a.isBuffer(Q))Q.copy(O,H);else throw new TypeError('"list" argument must be an Array of Buffers');H+=Q.length}return O};function S(T,C){if(a.isBuffer(T))return T.length;if(ArrayBuffer.isView(T)||je(T,ArrayBuffer))return T.byteLength;if(typeof T!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof T);const I=T.length,N=arguments.length>2&&arguments[2]===!0;if(!N&&I===0)return 0;let O=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return nt(T).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return Ue(T).length;default:if(O)return N?-1:nt(T).length;C=(""+C).toLowerCase(),O=!0}}a.byteLength=S;function E(T,C,I){let N=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,C>>>=0,I<=C))return"";for(T||(T="utf8");;)switch(T){case"hex":return K(this,C,I);case"utf8":case"utf-8":return G(this,C,I);case"ascii":return te(this,C,I);case"latin1":case"binary":return j(this,C,I);case"base64":return V(this,C,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,C,I);default:if(N)throw new TypeError("Unknown encoding: "+T);T=(T+"").toLowerCase(),N=!0}}a.prototype._isBuffer=!0;function k(T,C,I){const N=T[C];T[C]=T[I],T[I]=N}a.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<C;I+=2)k(this,I,I+1);return this},a.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<C;I+=4)k(this,I,I+3),k(this,I+1,I+2);return this},a.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<C;I+=8)k(this,I,I+7),k(this,I+1,I+6),k(this,I+2,I+5),k(this,I+3,I+4);return this},a.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?G(this,0,C):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(C){if(!a.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:a.compare(this,C)===0},a.prototype.inspect=function(){let C="";const I=e.INSPECT_MAX_BYTES;return C=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(C+=" ... "),"<Buffer "+C+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(C,I,N,O,H){if(je(C,Uint8Array)&&(C=a.from(C,C.offset,C.byteLength)),!a.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(I===void 0&&(I=0),N===void 0&&(N=C?C.length:0),O===void 0&&(O=0),H===void 0&&(H=this.length),I<0||N>C.length||O<0||H>this.length)throw new RangeError("out of range index");if(O>=H&&I>=N)return 0;if(O>=H)return-1;if(I>=N)return 1;if(I>>>=0,N>>>=0,O>>>=0,H>>>=0,this===C)return 0;let Q=H-O,De=N-I;const ct=Math.min(Q,De),lt=this.slice(O,H),gt=C.slice(I,N);for(let rt=0;rt<ct;++rt)if(lt[rt]!==gt[rt]){Q=lt[rt],De=gt[rt];break}return Q<De?-1:De<Q?1:0};function b(T,C,I,N,O){if(T.length===0)return-1;if(typeof I=="string"?(N=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,zt(I)&&(I=O?0:T.length-1),I<0&&(I=T.length+I),I>=T.length){if(O)return-1;I=T.length-1}else if(I<0)if(O)I=0;else return-1;if(typeof C=="string"&&(C=a.from(C,N)),a.isBuffer(C))return C.length===0?-1:A(T,C,I,N,O);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?O?Uint8Array.prototype.indexOf.call(T,C,I):Uint8Array.prototype.lastIndexOf.call(T,C,I):A(T,[C],I,N,O);throw new TypeError("val must be string, number or Buffer")}function A(T,C,I,N,O){let H=1,Q=T.length,De=C.length;if(N!==void 0&&(N=String(N).toLowerCase(),N==="ucs2"||N==="ucs-2"||N==="utf16le"||N==="utf-16le")){if(T.length<2||C.length<2)return-1;H=2,Q/=2,De/=2,I/=2}function ct(gt,rt){return H===1?gt[rt]:gt.readUInt16BE(rt*H)}let lt;if(O){let gt=-1;for(lt=I;lt<Q;lt++)if(ct(T,lt)===ct(C,gt===-1?0:lt-gt)){if(gt===-1&&(gt=lt),lt-gt+1===De)return gt*H}else gt!==-1&&(lt-=lt-gt),gt=-1}else for(I+De>Q&&(I=Q-De),lt=I;lt>=0;lt--){let gt=!0;for(let rt=0;rt<De;rt++)if(ct(T,lt+rt)!==ct(C,rt)){gt=!1;break}if(gt)return lt}return-1}a.prototype.includes=function(C,I,N){return this.indexOf(C,I,N)!==-1},a.prototype.indexOf=function(C,I,N){return b(this,C,I,N,!0)},a.prototype.lastIndexOf=function(C,I,N){return b(this,C,I,N,!1)};function _(T,C,I,N){I=Number(I)||0;const O=T.length-I;N?(N=Number(N),N>O&&(N=O)):N=O;const H=C.length;N>H/2&&(N=H/2);let Q;for(Q=0;Q<N;++Q){const De=parseInt(C.substr(Q*2,2),16);if(zt(De))return Q;T[I+Q]=De}return Q}function x(T,C,I,N){return xe(nt(C,T.length-I),T,I,N)}function P(T,C,I,N){return xe(Qe(C),T,I,N)}function D(T,C,I,N){return xe(Ue(C),T,I,N)}function B(T,C,I,N){return xe(ue(C,T.length-I),T,I,N)}a.prototype.write=function(C,I,N,O){if(I===void 0)O="utf8",N=this.length,I=0;else if(N===void 0&&typeof I=="string")O=I,N=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(N)?(N=N>>>0,O===void 0&&(O="utf8")):(O=N,N=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const H=this.length-I;if((N===void 0||N>H)&&(N=H),C.length>0&&(N<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");O||(O="utf8");let Q=!1;for(;;)switch(O){case"hex":return _(this,C,I,N);case"utf8":case"utf-8":return x(this,C,I,N);case"ascii":case"latin1":case"binary":return P(this,C,I,N);case"base64":return D(this,C,I,N);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,C,I,N);default:if(Q)throw new TypeError("Unknown encoding: "+O);O=(""+O).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function V(T,C,I){return C===0&&I===T.length?t.fromByteArray(T):t.fromByteArray(T.slice(C,I))}function G(T,C,I){I=Math.min(T.length,I);const N=[];let O=C;for(;O<I;){const H=T[O];let Q=null,De=H>239?4:H>223?3:H>191?2:1;if(O+De<=I){let ct,lt,gt,rt;switch(De){case 1:H<128&&(Q=H);break;case 2:ct=T[O+1],(ct&192)===128&&(rt=(H&31)<<6|ct&63,rt>127&&(Q=rt));break;case 3:ct=T[O+1],lt=T[O+2],(ct&192)===128&&(lt&192)===128&&(rt=(H&15)<<12|(ct&63)<<6|lt&63,rt>2047&&(rt<55296||rt>57343)&&(Q=rt));break;case 4:ct=T[O+1],lt=T[O+2],gt=T[O+3],(ct&192)===128&&(lt&192)===128&&(gt&192)===128&&(rt=(H&15)<<18|(ct&63)<<12|(lt&63)<<6|gt&63,rt>65535&&rt<1114112&&(Q=rt))}}Q===null?(Q=65533,De=1):Q>65535&&(Q-=65536,N.push(Q>>>10&1023|55296),Q=56320|Q&1023),N.push(Q),O+=De}return z(N)}const Z=4096;function z(T){const C=T.length;if(C<=Z)return String.fromCharCode.apply(String,T);let I="",N=0;for(;N<C;)I+=String.fromCharCode.apply(String,T.slice(N,N+=Z));return I}function te(T,C,I){let N="";I=Math.min(T.length,I);for(let O=C;O<I;++O)N+=String.fromCharCode(T[O]&127);return N}function j(T,C,I){let N="";I=Math.min(T.length,I);for(let O=C;O<I;++O)N+=String.fromCharCode(T[O]);return N}function K(T,C,I){const N=T.length;(!C||C<0)&&(C=0),(!I||I<0||I>N)&&(I=N);let O="";for(let H=C;H<I;++H)O+=Be[T[H]];return O}function ie(T,C,I){const N=T.slice(C,I);let O="";for(let H=0;H<N.length-1;H+=2)O+=String.fromCharCode(N[H]+N[H+1]*256);return O}a.prototype.slice=function(C,I){const N=this.length;C=~~C,I=I===void 0?N:~~I,C<0?(C+=N,C<0&&(C=0)):C>N&&(C=N),I<0?(I+=N,I<0&&(I=0)):I>N&&(I=N),I<C&&(I=C);const O=this.subarray(C,I);return Object.setPrototypeOf(O,a.prototype),O};function X(T,C,I){if(T%1!==0||T<0)throw new RangeError("offset is not uint");if(T+C>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(C,I,N){C=C>>>0,I=I>>>0,N||X(C,I,this.length);let O=this[C],H=1,Q=0;for(;++Q<I&&(H*=256);)O+=this[C+Q]*H;return O},a.prototype.readUintBE=a.prototype.readUIntBE=function(C,I,N){C=C>>>0,I=I>>>0,N||X(C,I,this.length);let O=this[C+--I],H=1;for(;I>0&&(H*=256);)O+=this[C+--I]*H;return O},a.prototype.readUint8=a.prototype.readUInt8=function(C,I){return C=C>>>0,I||X(C,1,this.length),this[C]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(C,I){return C=C>>>0,I||X(C,2,this.length),this[C]|this[C+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(C,I){return C=C>>>0,I||X(C,2,this.length),this[C]<<8|this[C+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(C,I){return C=C>>>0,I||X(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(C,I){return C=C>>>0,I||X(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},a.prototype.readBigUInt64LE=Qt(function(C){C=C>>>0,rn(C,"offset");const I=this[C],N=this[C+7];(I===void 0||N===void 0)&&_n(C,this.length-8);const O=I+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,H=this[++C]+this[++C]*2**8+this[++C]*2**16+N*2**24;return BigInt(O)+(BigInt(H)<<BigInt(32))}),a.prototype.readBigUInt64BE=Qt(function(C){C=C>>>0,rn(C,"offset");const I=this[C],N=this[C+7];(I===void 0||N===void 0)&&_n(C,this.length-8);const O=I*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],H=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+N;return(BigInt(O)<<BigInt(32))+BigInt(H)}),a.prototype.readIntLE=function(C,I,N){C=C>>>0,I=I>>>0,N||X(C,I,this.length);let O=this[C],H=1,Q=0;for(;++Q<I&&(H*=256);)O+=this[C+Q]*H;return H*=128,O>=H&&(O-=Math.pow(2,8*I)),O},a.prototype.readIntBE=function(C,I,N){C=C>>>0,I=I>>>0,N||X(C,I,this.length);let O=I,H=1,Q=this[C+--O];for(;O>0&&(H*=256);)Q+=this[C+--O]*H;return H*=128,Q>=H&&(Q-=Math.pow(2,8*I)),Q},a.prototype.readInt8=function(C,I){return C=C>>>0,I||X(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},a.prototype.readInt16LE=function(C,I){C=C>>>0,I||X(C,2,this.length);const N=this[C]|this[C+1]<<8;return N&32768?N|4294901760:N},a.prototype.readInt16BE=function(C,I){C=C>>>0,I||X(C,2,this.length);const N=this[C+1]|this[C]<<8;return N&32768?N|4294901760:N},a.prototype.readInt32LE=function(C,I){return C=C>>>0,I||X(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},a.prototype.readInt32BE=function(C,I){return C=C>>>0,I||X(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},a.prototype.readBigInt64LE=Qt(function(C){C=C>>>0,rn(C,"offset");const I=this[C],N=this[C+7];(I===void 0||N===void 0)&&_n(C,this.length-8);const O=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(N<<24);return(BigInt(O)<<BigInt(32))+BigInt(I+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),a.prototype.readBigInt64BE=Qt(function(C){C=C>>>0,rn(C,"offset");const I=this[C],N=this[C+7];(I===void 0||N===void 0)&&_n(C,this.length-8);const O=(I<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(O)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+N)}),a.prototype.readFloatLE=function(C,I){return C=C>>>0,I||X(C,4,this.length),n.read(this,C,!0,23,4)},a.prototype.readFloatBE=function(C,I){return C=C>>>0,I||X(C,4,this.length),n.read(this,C,!1,23,4)},a.prototype.readDoubleLE=function(C,I){return C=C>>>0,I||X(C,8,this.length),n.read(this,C,!0,52,8)},a.prototype.readDoubleBE=function(C,I){return C=C>>>0,I||X(C,8,this.length),n.read(this,C,!1,52,8)};function se(T,C,I,N,O,H){if(!a.isBuffer(T))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>O||C<H)throw new RangeError('"value" argument is out of bounds');if(I+N>T.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(C,I,N,O){if(C=+C,I=I>>>0,N=N>>>0,!O){const De=Math.pow(2,8*N)-1;se(this,C,I,N,De,0)}let H=1,Q=0;for(this[I]=C&255;++Q<N&&(H*=256);)this[I+Q]=C/H&255;return I+N},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(C,I,N,O){if(C=+C,I=I>>>0,N=N>>>0,!O){const De=Math.pow(2,8*N)-1;se(this,C,I,N,De,0)}let H=N-1,Q=1;for(this[I+H]=C&255;--H>=0&&(Q*=256);)this[I+H]=C/Q&255;return I+N},a.prototype.writeUint8=a.prototype.writeUInt8=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,1,255,0),this[I]=C&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,2,65535,0),this[I]=C&255,this[I+1]=C>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,2,65535,0),this[I]=C>>>8,this[I+1]=C&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,4,4294967295,0),this[I+3]=C>>>24,this[I+2]=C>>>16,this[I+1]=C>>>8,this[I]=C&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,4,4294967295,0),this[I]=C>>>24,this[I+1]=C>>>16,this[I+2]=C>>>8,this[I+3]=C&255,I+4};function ke(T,C,I,N,O){Tn(C,N,O,T,I,7);let H=Number(C&BigInt(4294967295));T[I++]=H,H=H>>8,T[I++]=H,H=H>>8,T[I++]=H,H=H>>8,T[I++]=H;let Q=Number(C>>BigInt(32)&BigInt(4294967295));return T[I++]=Q,Q=Q>>8,T[I++]=Q,Q=Q>>8,T[I++]=Q,Q=Q>>8,T[I++]=Q,I}function Ae(T,C,I,N,O){Tn(C,N,O,T,I,7);let H=Number(C&BigInt(4294967295));T[I+7]=H,H=H>>8,T[I+6]=H,H=H>>8,T[I+5]=H,H=H>>8,T[I+4]=H;let Q=Number(C>>BigInt(32)&BigInt(4294967295));return T[I+3]=Q,Q=Q>>8,T[I+2]=Q,Q=Q>>8,T[I+1]=Q,Q=Q>>8,T[I]=Q,I+8}a.prototype.writeBigUInt64LE=Qt(function(C,I=0){return ke(this,C,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Qt(function(C,I=0){return Ae(this,C,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(C,I,N,O){if(C=+C,I=I>>>0,!O){const ct=Math.pow(2,8*N-1);se(this,C,I,N,ct-1,-ct)}let H=0,Q=1,De=0;for(this[I]=C&255;++H<N&&(Q*=256);)C<0&&De===0&&this[I+H-1]!==0&&(De=1),this[I+H]=(C/Q>>0)-De&255;return I+N},a.prototype.writeIntBE=function(C,I,N,O){if(C=+C,I=I>>>0,!O){const ct=Math.pow(2,8*N-1);se(this,C,I,N,ct-1,-ct)}let H=N-1,Q=1,De=0;for(this[I+H]=C&255;--H>=0&&(Q*=256);)C<0&&De===0&&this[I+H+1]!==0&&(De=1),this[I+H]=(C/Q>>0)-De&255;return I+N},a.prototype.writeInt8=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,1,127,-128),C<0&&(C=255+C+1),this[I]=C&255,I+1},a.prototype.writeInt16LE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,2,32767,-32768),this[I]=C&255,this[I+1]=C>>>8,I+2},a.prototype.writeInt16BE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,2,32767,-32768),this[I]=C>>>8,this[I+1]=C&255,I+2},a.prototype.writeInt32LE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,4,2147483647,-2147483648),this[I]=C&255,this[I+1]=C>>>8,this[I+2]=C>>>16,this[I+3]=C>>>24,I+4},a.prototype.writeInt32BE=function(C,I,N){return C=+C,I=I>>>0,N||se(this,C,I,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[I]=C>>>24,this[I+1]=C>>>16,this[I+2]=C>>>8,this[I+3]=C&255,I+4},a.prototype.writeBigInt64LE=Qt(function(C,I=0){return ke(this,C,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Qt(function(C,I=0){return Ae(this,C,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function ge(T,C,I,N,O,H){if(I+N>T.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Te(T,C,I,N,O){return C=+C,I=I>>>0,O||ge(T,C,I,4),n.write(T,C,I,N,23,4),I+4}a.prototype.writeFloatLE=function(C,I,N){return Te(this,C,I,!0,N)},a.prototype.writeFloatBE=function(C,I,N){return Te(this,C,I,!1,N)};function He(T,C,I,N,O){return C=+C,I=I>>>0,O||ge(T,C,I,8),n.write(T,C,I,N,52,8),I+8}a.prototype.writeDoubleLE=function(C,I,N){return He(this,C,I,!0,N)},a.prototype.writeDoubleBE=function(C,I,N){return He(this,C,I,!1,N)},a.prototype.copy=function(C,I,N,O){if(!a.isBuffer(C))throw new TypeError("argument should be a Buffer");if(N||(N=0),!O&&O!==0&&(O=this.length),I>=C.length&&(I=C.length),I||(I=0),O>0&&O<N&&(O=N),O===N||C.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(N<0||N>=this.length)throw new RangeError("Index out of range");if(O<0)throw new RangeError("sourceEnd out of bounds");O>this.length&&(O=this.length),C.length-I<O-N&&(O=C.length-I+N);const H=O-N;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,N,O):Uint8Array.prototype.set.call(C,this.subarray(N,O),I),H},a.prototype.fill=function(C,I,N,O){if(typeof C=="string"){if(typeof I=="string"?(O=I,I=0,N=this.length):typeof N=="string"&&(O=N,N=this.length),O!==void 0&&typeof O!="string")throw new TypeError("encoding must be a string");if(typeof O=="string"&&!a.isEncoding(O))throw new TypeError("Unknown encoding: "+O);if(C.length===1){const Q=C.charCodeAt(0);(O==="utf8"&&Q<128||O==="latin1")&&(C=Q)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(I<0||this.length<I||this.length<N)throw new RangeError("Out of range index");if(N<=I)return this;I=I>>>0,N=N===void 0?this.length:N>>>0,C||(C=0);let H;if(typeof C=="number")for(H=I;H<N;++H)this[H]=C;else{const Q=a.isBuffer(C)?C:a.from(C,O),De=Q.length;if(De===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(H=0;H<N-I;++H)this[H+I]=Q[H%De]}return this};const ce={};function Gt(T,C,I){ce[T]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${T}]`,this.stack,delete this.name}get code(){return T}set code(O){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:O,writable:!0})}toString(){return`${this.name} [${T}]: ${this.message}`}}}Gt("ERR_BUFFER_OUT_OF_BOUNDS",function(T){return T?`${T} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Gt("ERR_INVALID_ARG_TYPE",function(T,C){return`The "${T}" argument must be of type number. Received type ${typeof C}`},TypeError),Gt("ERR_OUT_OF_RANGE",function(T,C,I){let N=`The value of "${T}" is out of range.`,O=I;return Number.isInteger(I)&&Math.abs(I)>2**32?O=gn(String(I)):typeof I=="bigint"&&(O=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(O=gn(O)),O+="n"),N+=` It must be ${C}. Received ${O}`,N},RangeError);function gn(T){let C="",I=T.length;const N=T[0]==="-"?1:0;for(;I>=N+4;I-=3)C=`_${T.slice(I-3,I)}${C}`;return`${T.slice(0,I)}${C}`}function Nt(T,C,I){rn(C,"offset"),(T[C]===void 0||T[C+I]===void 0)&&_n(C,T.length-(I+1))}function Tn(T,C,I,N,O,H){if(T>I||T<C){const Q=typeof C=="bigint"?"n":"";let De;throw H>3?C===0||C===BigInt(0)?De=`>= 0${Q} and < 2${Q} ** ${(H+1)*8}${Q}`:De=`>= -(2${Q} ** ${(H+1)*8-1}${Q}) and < 2 ** ${(H+1)*8-1}${Q}`:De=`>= ${C}${Q} and <= ${I}${Q}`,new ce.ERR_OUT_OF_RANGE("value",De,T)}Nt(N,O,H)}function rn(T,C){if(typeof T!="number")throw new ce.ERR_INVALID_ARG_TYPE(C,"number",T)}function _n(T,C,I){throw Math.floor(T)!==T?(rn(T,I),new ce.ERR_OUT_OF_RANGE(I||"offset","an integer",T)):C<0?new ce.ERR_BUFFER_OUT_OF_BOUNDS:new ce.ERR_OUT_OF_RANGE(I||"offset",`>= ${I?1:0} and <= ${C}`,T)}const le=/[^+/0-9A-Za-z-_]/g;function Se(T){if(T=T.split("=")[0],T=T.trim().replace(le,""),T.length<2)return"";for(;T.length%4!==0;)T=T+"=";return T}function nt(T,C){C=C||1/0;let I;const N=T.length;let O=null;const H=[];for(let Q=0;Q<N;++Q){if(I=T.charCodeAt(Q),I>55295&&I<57344){if(!O){if(I>56319){(C-=3)>-1&&H.push(239,191,189);continue}else if(Q+1===N){(C-=3)>-1&&H.push(239,191,189);continue}O=I;continue}if(I<56320){(C-=3)>-1&&H.push(239,191,189),O=I;continue}I=(O-55296<<10|I-56320)+65536}else O&&(C-=3)>-1&&H.push(239,191,189);if(O=null,I<128){if((C-=1)<0)break;H.push(I)}else if(I<2048){if((C-=2)<0)break;H.push(I>>6|192,I&63|128)}else if(I<65536){if((C-=3)<0)break;H.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((C-=4)<0)break;H.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return H}function Qe(T){const C=[];for(let I=0;I<T.length;++I)C.push(T.charCodeAt(I)&255);return C}function ue(T,C){let I,N,O;const H=[];for(let Q=0;Q<T.length&&!((C-=2)<0);++Q)I=T.charCodeAt(Q),N=I>>8,O=I%256,H.push(O),H.push(N);return H}function Ue(T){return t.toByteArray(Se(T))}function xe(T,C,I,N){let O;for(O=0;O<N&&!(O+I>=C.length||O>=T.length);++O)C[O+I]=T[O];return O}function je(T,C){return T instanceof C||T!=null&&T.constructor!=null&&T.constructor.name!=null&&T.constructor.name===C.name}function zt(T){return T!==T}const Be=function(){const T="0123456789abcdef",C=new Array(256);for(let I=0;I<16;++I){const N=I*16;for(let O=0;O<16;++O)C[N+O]=T[I]+T[O]}return C}();function Qt(T){return typeof BigInt>"u"?el:T}function el(){throw new Error("BigInt not supported")}})(xn);var Td=(e=>(e[e.BINARY=0]="BINARY",e[e.ECHO=1]="ECHO",e[e.RCP=2]="RCP",e[e.SUPPRESS_GO_AHEAD=3]="SUPPRESS_GO_AHEAD",e[e.APPROX_MESSAGE_SIZE_NEGOTIATION=4]="APPROX_MESSAGE_SIZE_NEGOTIATION",e[e.STATUS=5]="STATUS",e[e.TIMING_MARK=6]="TIMING_MARK",e[e.REMOTE_CONTROLLED_TRANSMISSION_ECHO=7]="REMOTE_CONTROLLED_TRANSMISSION_ECHO",e[e.OUTPUT_LINE_WIDTH=8]="OUTPUT_LINE_WIDTH",e[e.OUTPUT_PAGE_SIZE=9]="OUTPUT_PAGE_SIZE",e[e.OUTPUT_CARRIAGE_RETURN_DISPOSITION=10]="OUTPUT_CARRIAGE_RETURN_DISPOSITION",e[e.OUTPUT_HORIZONTAL_TAB_STOPS=11]="OUTPUT_HORIZONTAL_TAB_STOPS",e[e.OUTPUT_HORIZONTAL_TAB_DISPOSITION=12]="OUTPUT_HORIZONTAL_TAB_DISPOSITION",e[e.OUTPUT_FORMFEED_DISPOSITION=13]="OUTPUT_FORMFEED_DISPOSITION",e[e.OUTPUT_VERTICAL_TAB_STOPS=14]="OUTPUT_VERTICAL_TAB_STOPS",e[e.OUTPUT_VERTICAL_TAB_DISPOSITION=15]="OUTPUT_VERTICAL_TAB_DISPOSITION",e[e.OUTPUT_LINEFEED_DISPOSITION=16]="OUTPUT_LINEFEED_DISPOSITION",e[e.EXTENDED_ASCII=17]="EXTENDED_ASCII",e[e.LOGOUT=18]="LOGOUT",e[e.BYTE_MACRO=19]="BYTE_MACRO",e[e.DATA_ENTRY_TERMINAL=20]="DATA_ENTRY_TERMINAL",e[e.SUPDUP=21]="SUPDUP",e[e.SUPDUP_OUTPUT=22]="SUPDUP_OUTPUT",e[e.SEND_LOCATION=23]="SEND_LOCATION",e[e.TERMINAL_TYPE=24]="TERMINAL_TYPE",e[e.END_OF_RECORD=25]="END_OF_RECORD",e[e.TACACS_USER_IDENTIFICATION=26]="TACACS_USER_IDENTIFICATION",e[e.OUTPUT_MARKING=27]="OUTPUT_MARKING",e[e.TERMINAL_LOCATION_NUMBER=28]="TERMINAL_LOCATION_NUMBER",e[e.TELNET_3270_REGIME=29]="TELNET_3270_REGIME",e[e.X_3_PAD=30]="X_3_PAD",e[e.NAWS=31]="NAWS",e[e.TERMINAL_SPEED=32]="TERMINAL_SPEED",e[e.REMOTE_FLOW_CONTROL=33]="REMOTE_FLOW_CONTROL",e[e.LINEMODE=34]="LINEMODE",e[e.X_DISPLAY_LOCATION=35]="X_DISPLAY_LOCATION",e[e.ENVIRONMENT_OPTION=36]="ENVIRONMENT_OPTION",e[e.AUTHENTICATION_OPTION=37]="AUTHENTICATION_OPTION",e[e.ENCRYPTION_OPTION=38]="ENCRYPTION_OPTION",e[e.NEW_ENVIRONMENT_OPTION=39]="NEW_ENVIRONMENT_OPTION",e[e.TN3270E=40]="TN3270E",e[e.XAUTH=41]="XAUTH",e[e.CHARSET=42]="CHARSET",e[e.RSP=43]="RSP",e[e.COM_PORT_OPTION=44]="COM_PORT_OPTION",e[e.SUPPRESS_LOCAL_ECHO=45]="SUPPRESS_LOCAL_ECHO",e[e.START_TLS=46]="START_TLS",e[e.KERMIT=47]="KERMIT",e[e.SEND_URL=48]="SEND_URL",e[e.FORWARD_X=49]="FORWARD_X",e[e.PRAGMA_LOGON=138]="PRAGMA_LOGON",e[e.GMCP=201]="GMCP",e))(Td||{}),_d=(e=>(e[e.SE=240]="SE",e[e.NOP=241]="NOP",e[e.DM=242]="DM",e[e.BRK=243]="BRK",e[e.IP=244]="IP",e[e.AO=245]="AO",e[e.AYT=246]="AYT",e[e.EC=247]="EC",e[e.EL=248]="EL",e[e.GA=249]="GA",e[e.SB=250]="SB",e[e.WILL=251]="WILL",e[e.WONT=252]="WONT",e[e.DO=253]="DO",e[e.DONT=254]="DONT",e[e.IAC=255]="IAC",e))(_d||{});class oV{constructor(t){W(this,"ws");this.ws=t}on(t,n){if(t==="data"){this.ws.onmessage=i=>{n(i.data)};return}const r="on"+t;this[r]=n}write(t){this.ws.send(t)}}class aV extends AN{constructor(n){super();W(this,"state");W(this,"buffer");W(this,"subBuffer");W(this,"iacSEBuffer",xn.Buffer.from([255,240]));W(this,"negotiationByte",0);W(this,"stream");this.state=0,this.buffer=xn.Buffer.alloc(0),this.subBuffer=xn.Buffer.alloc(0),n&&n.on("data",r=>this.parse(r)),this.stream=n}parse(n){for(this.buffer=xn.Buffer.concat([this.buffer,xn.Buffer.from(n)]);this.buffer.length>0;){let r;switch(this.state){case 0:this.handleData();break;case 1:if(r=this.handleCommand(),r)return;break;case 2:if(r=this.handleSubnegotiation(),r)return;break;case 3:if(r=this.handleNegotiation(),r)return;break}}}handleData(){const n=this.buffer.indexOf(255);if(n===-1){this.emit("data",this.buffer),this.buffer=xn.Buffer.alloc(0);return}this.emit("data",this.buffer.slice(0,n)),this.buffer=this.buffer.slice(n),this.state=1}handleCommand(){if(this.buffer.length<2)return!0;const n=this.buffer[1];switch(this.buffer=this.buffer.slice(2),n){case 241:this.emit("command",241),this.state=0;break;case 250:this.subBuffer=xn.Buffer.alloc(0),this.state=2;break;case 253:case 254:case 251:case 252:this.negotiationByte=n,this.state=3;break;default:this.state=0;break}return!1}handleNegotiation(){if(this.buffer.length<1)return!0;const n=this.negotiationByte,r=this.buffer[0];return this.buffer=this.buffer.slice(1),this.emit("negotiation",n,r),this.state=0,!1}handleSubnegotiation(){let n=this.buffer.indexOf(this.iacSEBuffer);if(n===-1)return!0;this.state=0;let r=this.buffer.slice(0,n);return r[0]===201?this.handleGmcp(r.slice(1)):this.emit("subnegotiation",r),this.buffer=this.buffer.slice(n+2),!1}handleGmcp(n){const r=n.toString(),[i,s]=r.split(/ +(.+?)$/,2);this.emit("gmcp",i,s)}sendNegotiation(n,r){this.stream.write(xn.Buffer.from([255,n,r]))}sendGmcp(n,r){const i=n+" "+r,s=xn.Buffer.from(i),o=xn.Buffer.concat([xn.Buffer.from([255,250]),xn.Buffer.from([201]),s,this.iacSEBuffer]);this.stream.write(o)}sendTerminalType(n){const r=xn.Buffer.from(n),i=xn.Buffer.concat([xn.Buffer.from([255,250]),xn.Buffer.from([24,0]),r,this.iacSEBuffer]);this.stream.write(i)}}class Wo{constructor(t){W(this,"packageName");W(this,"packageVersion",1);W(this,"client");this.client=t}sendData(t,n){this.client.sendGmcp(this.packageName+"."+t,JSON.stringify(n))}shutdown(){}}class cV extends Wo{constructor(){super(...arguments);W(this,"packageName","Auth.Autologin")}handleToken(n){localStorage.setItem("LoginRefreshToken",n)}sendLogin(){var n=localStorage.getItem("LoginRefreshToken");n&&this.sendData("Login",n)}}class lV extends Wo{constructor(){super(...arguments);W(this,"packageName","Char")}handleName(n){this.client.worldData.playerId=n.name,this.client.worldData.playerName=n.fullname,this.client.emit("statustext",`Logged in as ${n.fullname}`)}sendLogin(n,r){this.client.sendGmcp("Char.Login",JSON.stringify({name:n,password:r}))}}class uV extends Wo{constructor(n){super(n);W(this,"packageName","Client.Keystrokes");W(this,"bindings",[]);W(this,"boundKeyUpHandler");this.boundKeyUpHandler=this.handleKeyup.bind(this),document.addEventListener("keyup",this.boundKeyUpHandler)}handleKeyup(n){const r=this.findBinding(n);if(r){n.preventDefault();const i=this.client.getInput(),s=this.parseCommand(r.command,i);r.autosend?this.client.sendCommand(s):this.placeInInputField(s)}}shutdown(){document.removeEventListener("keyup",this.boundKeyUpHandler)}findBinding(n){try{return this.bindings.find(r=>{if(r.key.toLowerCase()!==n.key.toLowerCase())return!1;const i=new Set([n.altKey&&"Alt",n.ctrlKey&&"Control",n.shiftKey&&"Shift",n.metaKey&&"Meta"].filter(Boolean));return r.modifiers&&r.modifiers.every(s=>i.has(s))})}catch(r){console.error("Error in finding key binding: ",r);return}}parseCommand(n,r){const i=r.trim().split(/\s+/);return n.replace(/%(\d+|\*)/g,(s,o)=>{if(o==="*")return r;const a=parseInt(o,10)-1;return a>=0&&a<i.length?i[a]:s})}placeInInputField(n){this.client.setInput(n)}bindKey(n){const r={key:n.key,modifiers:n.modifiers,command:n.command,autosend:n.autosend};this.bindings.push(r)}unbindKey(n){this.bindings=this.bindings.filter(r=>!(r.key===n.key&&r.modifiers.length===n.modifiers.length&&r.modifiers.every(i=>n.modifiers.includes(i))))}unbindAll(){this.bindings=[]}handleBind(n){this.bindKey(n)}handleUnbind(n){this.unbindKey(n)}handleBind_all(n){this.bindings=n.bindings.map(r=>({...r}))}listBindings(){return[...this.bindings]}}const oA=(e,t,n)=>({endTime:t,insertTime:n,type:"exponentialRampToValue",value:e}),aA=(e,t,n)=>({endTime:t,insertTime:n,type:"linearRampToValue",value:e}),hC=(e,t)=>({startTime:t,type:"setValue",value:e}),TN=(e,t,n)=>({duration:n,startTime:t,type:"setValueCurve",values:e}),_N=(e,t,{startTime:n,target:r,timeConstant:i})=>r+(t-r)*Math.exp((n-e)/i),_l=e=>e.type==="exponentialRampToValue",Mm=e=>e.type==="linearRampToValue",sa=e=>_l(e)||Mm(e),lb=e=>e.type==="setValue",Zs=e=>e.type==="setValueCurve",Dm=(e,t,n,r)=>{const i=e[t];return i===void 0?r:sa(i)||lb(i)?i.value:Zs(i)?i.values[i.values.length-1]:_N(n,Dm(e,t-1,i.startTime,r),i)},cA=(e,t,n,r,i)=>n===void 0?[r.insertTime,i]:sa(n)?[n.endTime,n.value]:lb(n)?[n.startTime,n.value]:Zs(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Dm(e,t-1,n.startTime,i)],pC=e=>e.type==="cancelAndHold",mC=e=>e.type==="cancelScheduledValues",Ko=e=>pC(e)||mC(e)?e.cancelTime:_l(e)||Mm(e)?e.endTime:e.startTime,lA=(e,t,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((e-t)/(r-t)):0,uA=(e,t,n,{endTime:r,value:i})=>n+(e-t)/(r-t)*(i-n),dV=(e,t)=>{const n=Math.floor(t),r=Math.ceil(t);return n===r?e[n]:(1-(t-n))*e[n]+(1-(r-t))*e[r]},fV=(e,{duration:t,startTime:n,values:r})=>{const i=(e-n)/t*(r.length-1);return dV(r,i)},$h=e=>e.type==="setTarget";class hV{constructor(t){this._automationEvents=[],this._currenTime=0,this._defaultValue=t}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(t){const n=Ko(t);if(pC(t)||mC(t)){const r=this._automationEvents.findIndex(s=>mC(t)&&Zs(s)?s.startTime+s.duration>=n:Ko(s)>=n),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),pC(t)){const s=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&sa(i)){if(s!==void 0&&$h(s))throw new Error("The internal list is malformed.");const o=s===void 0?i.insertTime:Zs(s)?s.startTime+s.duration:Ko(s),a=s===void 0?this._defaultValue:Zs(s)?s.values[s.values.length-1]:s.value,c=_l(i)?lA(n,o,a,i):uA(n,o,a,i),l=_l(i)?oA(c,n,this._currenTime):aA(c,n,this._currenTime);this._automationEvents.push(l)}if(s!==void 0&&$h(s)&&this._automationEvents.push(hC(this.getValue(n),n)),s!==void 0&&Zs(s)&&s.startTime+s.duration>n){const o=n-s.startTime,a=(s.values.length-1)/s.duration,c=Math.max(2,1+Math.ceil(o*a)),l=o/(c-1)*a,u=s.values.slice(0,c);if(l<1)for(let d=1;d<c;d+=1){const f=l*d%1;u[d]=s.values[d-1]*(1-f)+s.values[d]*f}this._automationEvents[this._automationEvents.length-1]=TN(u,s.startTime,o)}}}else{const r=this._automationEvents.findIndex(o=>Ko(o)>n),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&Zs(i)&&Ko(i)+i.duration>n)return!1;const s=_l(t)?oA(t.value,t.endTime,this._currenTime):Mm(t)?aA(t.value,n,this._currenTime):t;if(r===-1)this._automationEvents.push(s);else{if(Zs(t)&&n+t.duration>Ko(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,s)}}return!0}flush(t){const n=this._automationEvents.findIndex(r=>Ko(r)>t);if(n>1){const r=this._automationEvents.slice(n-1),i=r[0];$h(i)&&r.unshift(hC(Dm(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(t){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(o=>Ko(o)>t),r=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,s=this._automationEvents[i];if(s!==void 0&&$h(s)&&(r===void 0||!sa(r)||r.insertTime>t))return _N(t,Dm(this._automationEvents,i-1,s.startTime,this._defaultValue),s);if(s!==void 0&&lb(s)&&(r===void 0||!sa(r)))return s.value;if(s!==void 0&&Zs(s)&&(r===void 0||!sa(r)||s.startTime+s.duration>t))return t<s.startTime+s.duration?fV(t,s):s.values[s.values.length-1];if(s!==void 0&&sa(s)&&(r===void 0||!sa(r)))return s.value;if(r!==void 0&&_l(r)){const[o,a]=cA(this._automationEvents,i,s,r,this._defaultValue);return lA(t,o,a,r)}if(r!==void 0&&Mm(r)){const[o,a]=cA(this._automationEvents,i,s,r,this._defaultValue);return uA(t,o,a,r)}return this._defaultValue}}const pV=e=>({cancelTime:e,type:"cancelAndHold"}),mV=e=>({cancelTime:e,type:"cancelScheduledValues"}),gV=(e,t)=>({endTime:t,type:"exponentialRampToValue",value:e}),vV=(e,t)=>({endTime:t,type:"linearRampToValue",value:e}),yV=(e,t,n)=>({startTime:t,target:e,timeConstant:n,type:"setTarget"}),CV=()=>new DOMException("","AbortError"),IV=e=>(t,n,[r,i,s],o)=>{e(t[i],[n,r,s],a=>a[0]===n&&a[1]===r,o)},SV=e=>(t,n,r)=>{const i=[];for(let s=0;s<r.numberOfInputs;s+=1)i.push(new Set);e.set(t,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},bV=e=>(t,n)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},pu=new WeakSet,RN=new WeakMap,xN=new WeakMap,NN=new WeakMap,PN=new WeakMap,MN=new WeakMap,DN=new WeakMap,gC=new WeakMap,vC=new WeakMap,yC=new WeakMap,ON={construct(){return ON}},wV=e=>{try{const t=new Proxy(e,ON);new t}catch{return!1}return!0},dA=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,fA=(e,t)=>{const n=[];let r=e.replace(/^[\s]+/,""),i=r.match(dA);for(;i!==null;){const s=i[1].slice(1,-1),o=i[0].replace(/([\s]+)?;?$/,"").replace(s,new URL(s,t).toString());n.push(o),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(dA)}return[n.join(";"),r]},hA=e=>{if(e!==void 0&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},pA=e=>{if(!wV(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(e.prototype===null||typeof e.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},kV=(e,t,n,r,i,s,o,a,c,l,u,d,f)=>{let h=0;return(p,m,y={credentials:"omit"})=>{const g=u.get(p);if(g!==void 0&&g.has(m))return Promise.resolve();const v=l.get(p);if(v!==void 0){const k=v.get(m);if(k!==void 0)return k}const S=s(p),E=S.audioWorklet===void 0?i(m).then(([k,b])=>{const[A,_]=fA(k,b),x=`${A};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${_}
})})(window,'_AWGS')`;return n(x)}).then(()=>{const k=f._AWGS.pop();if(k===void 0)throw new SyntaxError;r(S.currentTime,S.sampleRate,()=>k(class{},void 0,(b,A)=>{if(b.trim()==="")throw t();const _=vC.get(S);if(_!==void 0){if(_.has(b))throw t();pA(A),hA(A.parameterDescriptors),_.set(b,A)}else pA(A),hA(A.parameterDescriptors),vC.set(S,new Map([[b,A]]))},S.sampleRate,void 0,void 0))}):Promise.all([i(m),Promise.resolve(e(d,d))]).then(([[k,b],A])=>{const _=h+1;h=_;const[x,P]=fA(k,b),G=`${x};((AudioWorkletProcessor,registerProcessor)=>{${P}
})(${A?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${A?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${A?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${_}',class extends AudioWorkletProcessor{process(){return !1}})`,Z=new Blob([G],{type:"application/javascript; charset=utf-8"}),z=URL.createObjectURL(Z);return S.audioWorklet.addModule(z,y).then(()=>{if(a(S))return S;const te=o(S);return te.audioWorklet.addModule(z,y).then(()=>te)}).then(te=>{if(c===null)throw new SyntaxError;try{new c(te,`__sac${_}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(z))});return v===void 0?l.set(p,new Map([[m,E]])):v.set(m,E),E.then(()=>{const k=u.get(p);k===void 0?u.set(p,new Set([m])):k.add(m)}).finally(()=>{const k=l.get(p);k!==void 0&&k.delete(m)}),E}},zi=(e,t)=>{const n=e.get(t);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},Hg=(e,t)=>{const n=Array.from(e).filter(t);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return e.delete(r),r},LN=(e,t,n,r)=>{const i=zi(e,t),s=Hg(i,o=>o[0]===n&&o[1]===r);return i.size===0&&e.delete(t),s},ih=e=>zi(DN,e),mu=e=>{if(pu.has(e))throw new Error("The AudioNode is already stored.");pu.add(e),ih(e).forEach(t=>t(!0))},BN=e=>"port"in e,sh=e=>{if(!pu.has(e))throw new Error("The AudioNode is not stored.");pu.delete(e),ih(e).forEach(t=>t(!1))},CC=(e,t)=>{!BN(e)&&t.every(n=>n.size===0)&&sh(e)},AV=(e,t,n,r,i,s,o,a,c,l,u,d,f)=>{const h=new WeakMap;return(p,m,y,g,v)=>{const{activeInputs:S,passiveInputs:E}=s(m),{outputs:k}=s(p),b=a(p),A=_=>{const x=c(m),P=c(p);if(_){const D=LN(E,p,y,g);e(S,p,D,!1),!v&&!d(p)&&n(P,x,y,g),f(m)&&mu(m)}else{const D=r(S,p,y,g);t(E,g,D,!1),!v&&!d(p)&&i(P,x,y,g);const B=o(m);if(B===0)u(m)&&CC(m,S);else{const V=h.get(m);V!==void 0&&clearTimeout(V),h.set(m,setTimeout(()=>{u(m)&&CC(m,S)},B*1e3))}}};return l(k,[m,y,g],_=>_[0]===m&&_[1]===y&&_[2]===g,!0)?(b.add(A),u(p)?e(S,p,[y,g,A],!0):t(E,g,[p,y,A],!0),!0):!1}},EV=e=>(t,n,[r,i,s],o)=>{const a=t.get(r);a===void 0?t.set(r,new Set([[i,n,s]])):e(a,[i,n,s],c=>c[0]===i&&c[1]===n,o)},TV=e=>(t,n)=>{const r=e(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(t.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)},_V=e=>(t,n)=>{e(t).add(n)},RV={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},xV=(e,t,n,r,i,s)=>class extends e{constructor(a,c){const l=i(a),u={...RV,...c},d=r(l,u),f=s(l)?t():null;super(a,!1,d,f),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Qn=(e,t)=>e.context===t,NV=(e,t,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!Qn(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=e(o,l)}return r.set(o,a),await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},IC=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Fs=()=>new DOMException("","IndexSizeError"),FN=e=>{e.getChannelData=(t=>n=>{try{return t.call(e,n)}catch(r){throw r.code===12?Fs():r}})(e.getChannelData)},PV={numberOfChannels:1},MV=(e,t,n,r,i,s,o,a)=>{let c=null;return class UN{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:f,sampleRate:h}={...PV,...u};c===null&&(c=new i(1,1,44100));const p=r!==null&&t(s,s)?new r({length:d,numberOfChannels:f,sampleRate:h}):c.createBuffer(f,d,h);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(o(p),FN(p)):t(IC,()=>IC(p))||a(p),e.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===UN.prototype||e.has(u)}}},wr=-34028234663852886e22,or=-wr,To=e=>pu.has(e),DV={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},OV=(e,t,n,r,i,s,o,a)=>class extends e{constructor(l,u){const d=s(l),f={...DV,...u},h=i(d,f),p=o(d),m=p?t():null;super(l,!1,h,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=h,this._onended=null,this._playbackRate=n(this,p,h.playbackRate,or,wr)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[l,u]:[l,u,d]),this.context.state!=="closed"){mu(this);const f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),To(this)&&sh(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},LV=(e,t,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let d=n(l);const f=Qn(d,u);if(!f){const h={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=t(u,h),o!==null&&d.start(...o),a!==null&&d.stop(a)}return s.set(u,d),f?await e(u,l.playbackRate,d.playbackRate):await r(u,l.playbackRate,d.playbackRate),await i(l,u,d),d};return{set start(l){o=l},set stop(l){a=l},render(l,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},BV=e=>"playbackRate"in e,FV=e=>"frequency"in e&&"gain"in e,UV=e=>"offset"in e,VV=e=>!("frequency"in e)&&"gain"in e,GV=e=>"detune"in e&&"frequency"in e,WV=e=>"pan"in e,dr=e=>zi(RN,e),oh=e=>zi(NN,e),SC=(e,t)=>{const{activeInputs:n}=dr(e);n.forEach(i=>i.forEach(([s])=>{t.includes(e)||SC(s,[...t,e])}));const r=BV(e)?[e.playbackRate]:BN(e)?Array.from(e.parameters.values()):FV(e)?[e.Q,e.detune,e.frequency,e.gain]:UV(e)?[e.offset]:VV(e)?[e.gain]:GV(e)?[e.detune,e.frequency]:WV(e)?[e.pan]:[];for(const i of r){const s=oh(i);s!==void 0&&s.activeInputs.forEach(([o])=>SC(o,t))}To(e)&&sh(e)},HV=e=>{SC(e.destination,[])},jV=e=>e===void 0||typeof e=="number"||typeof e=="string"&&(e==="balanced"||e==="interactive"||e==="playback"),$V=(e,t,n,r,i,s,o,a,c)=>class extends e{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!jV(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:f}=u,{sampleRate:h}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:f==="balanced"?512/h:f==="interactive"||f===void 0?256/h:f==="playback"?1024/h:Math.max(2,Math.min(128,Math.round(f*h/128)))*128/h,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw t()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),HV(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new s(this)}createMediaStreamSource(u){return new o(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?t():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?t():u})}},ZV=(e,t,n,r,i,s,o,a)=>class extends e{constructor(l,u){const d=s(l),f=o(d),h=i(d,u,f),p=f?t(a):null;super(l,!1,h,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},zV=e=>{const t=new WeakMap,n=async(r,i)=>{const s=i.destination;return t.set(i,s),await e(r,i,s),s};return{render(r,i){const s=t.get(i);return s!==void 0?Promise.resolve(s):n(r,i)}}},XV=(e,t,n,r,i,s,o,a)=>(c,l)=>{const u=l.listener,d=()=>{const k=new Float32Array(1),b=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),A=o(l);let _=!1,x=[0,0,-1,0,1,0],P=[0,0,0];const D=()=>{if(_)return;_=!0;const Z=r(l,256,9,0);Z.onaudioprocess=({inputBuffer:z})=>{const te=[s(z,k,0),s(z,k,1),s(z,k,2),s(z,k,3),s(z,k,4),s(z,k,5)];te.some((K,ie)=>K!==x[ie])&&(u.setOrientation(...te),x=te);const j=[s(z,k,6),s(z,k,7),s(z,k,8)];j.some((K,ie)=>K!==P[ie])&&(u.setPosition(...j),P=j)},b.connect(Z)},B=Z=>z=>{z!==x[Z]&&(x[Z]=z,u.setOrientation(...x))},V=Z=>z=>{z!==P[Z]&&(P[Z]=z,u.setPosition(...P))},G=(Z,z,te)=>{const j=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:z});j.connect(b,0,Z),j.start(),Object.defineProperty(j.offset,"defaultValue",{get(){return z}});const K=e({context:c},A,j.offset,or,wr);return a(K,"value",ie=>()=>ie.call(K),ie=>X=>{try{ie.call(K,X)}catch(se){if(se.code!==9)throw se}D(),A&&te(X)}),K.cancelAndHoldAtTime=(ie=>A?()=>{throw i()}:(...X)=>{const se=ie.apply(K,X);return D(),se})(K.cancelAndHoldAtTime),K.cancelScheduledValues=(ie=>A?()=>{throw i()}:(...X)=>{const se=ie.apply(K,X);return D(),se})(K.cancelScheduledValues),K.exponentialRampToValueAtTime=(ie=>A?()=>{throw i()}:(...X)=>{const se=ie.apply(K,X);return D(),se})(K.exponentialRampToValueAtTime),K.linearRampToValueAtTime=(ie=>A?()=>{throw i()}:(...X)=>{const se=ie.apply(K,X);return D(),se})(K.linearRampToValueAtTime),K.setTargetAtTime=(ie=>A?()=>{throw i()}:(...X)=>{const se=ie.apply(K,X);return D(),se})(K.setTargetAtTime),K.setValueAtTime=(ie=>A?()=>{throw i()}:(...X)=>{const se=ie.apply(K,X);return D(),se})(K.setValueAtTime),K.setValueCurveAtTime=(ie=>A?()=>{throw i()}:(...X)=>{const se=ie.apply(K,X);return D(),se})(K.setValueCurveAtTime),K};return{forwardX:G(0,0,B(0)),forwardY:G(1,0,B(1)),forwardZ:G(2,-1,B(2)),positionX:G(6,0,V(0)),positionY:G(7,0,V(1)),positionZ:G(8,0,V(2)),upX:G(3,0,B(3)),upY:G(4,1,B(4)),upZ:G(5,0,B(5))}},{forwardX:f,forwardY:h,forwardZ:p,positionX:m,positionY:y,positionZ:g,upX:v,upY:S,upZ:E}=u.forwardX===void 0?d():u;return{get forwardX(){return f},get forwardY(){return h},get forwardZ(){return p},get positionX(){return m},get positionY(){return y},get positionZ(){return g},get upX(){return v},get upY(){return S},get upZ(){return E}}},Om=e=>"context"in e,ah=e=>Om(e[0]),Zc=(e,t,n,r)=>{for(const i of e)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0},mA=(e,t,[n,r],i)=>{Zc(e,[t,n,r],s=>s[0]===t&&s[1]===n,i)},gA=(e,[t,n,r],i)=>{const s=e.get(t);s===void 0?e.set(t,new Set([[n,r]])):Zc(s,[n,r],o=>o[0]===n,i)},Ou=e=>"inputs"in e,Lm=(e,t,n,r)=>{if(Ou(t)){const i=t.inputs[r];return e.connect(i,n,0),[i,n,0]}return e.connect(t,n,r),[t,n,r]},VN=(e,t,n)=>{for(const r of e)if(r[0]===t&&r[1]===n)return e.delete(r),r;return null},KV=(e,t,n)=>Hg(e,r=>r[0]===t&&r[1]===n),GN=(e,t)=>{if(!ih(e).delete(t))throw new Error("Missing the expected event listener.")},WN=(e,t,n)=>{const r=zi(e,t),i=Hg(r,s=>s[0]===n);return r.size===0&&e.delete(t),i},Bm=(e,t,n,r)=>{Ou(t)?e.disconnect(t.inputs[r],n,0):e.disconnect(t,n,r)},xt=e=>zi(xN,e),Af=e=>zi(PN,e),Pc=e=>gC.has(e),Mp=e=>!pu.has(e),vA=(e,t)=>new Promise(n=>{if(t!==null)n(!0);else{const r=e.createScriptProcessor(256,1,1),i=e.createGain(),s=e.createBuffer(1,2,44100),o=s.getChannelData(0);o[0]=1,o[1]=1;const a=e.createBufferSource();a.buffer=s,a.loop=!0,a.connect(r).connect(e.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(e.destination)},a.start()}}),Ay=(e,t)=>{const n=new Map;for(const r of e)for(const i of r){const s=n.get(i);n.set(i,s===void 0?1:s+1)}n.forEach((r,i)=>t(i,r))},Fm=e=>"context"in e,JV=e=>{const t=new Map;e.connect=(n=>(r,i=0,s=0)=>{const o=Fm(r)?n(r,i,s):n(r,i),a=t.get(r);return a===void 0?t.set(r,[{input:s,output:i}]):a.every(c=>c.input!==s||c.output!==i)&&a.push({input:s,output:i}),o})(e.connect.bind(e)),e.disconnect=(n=>(r,i,s)=>{if(n.apply(e),r===void 0)t.clear();else if(typeof r=="number")for(const[o,a]of t){const c=a.filter(l=>l.output!==r);c.length===0?t.delete(o):t.set(o,c)}else if(t.has(r))if(i===void 0)t.delete(r);else{const o=t.get(r);if(o!==void 0){const a=o.filter(c=>c.output!==i&&(c.input!==s||s===void 0));a.length===0?t.delete(r):t.set(r,a)}}for(const[o,a]of t)a.forEach(c=>{Fm(o)?e.connect(o,c.output,c.input):e.connect(o,c.output)})})(e.disconnect)},YV=(e,t,n,r)=>{const{activeInputs:i,passiveInputs:s}=oh(t),{outputs:o}=dr(e),a=ih(e),c=l=>{const u=xt(e),d=Af(t);if(l){const f=WN(s,e,n);mA(i,e,f,!1),!r&&!Pc(e)&&u.connect(d,n)}else{const f=KV(i,e,n);gA(s,f,!1),!r&&!Pc(e)&&u.disconnect(d,n)}};return Zc(o,[t,n],l=>l[0]===t&&l[1]===n,!0)?(a.add(c),To(e)?mA(i,e,[n,c],!0):gA(s,[e,n,c],!0),!0):!1},qV=(e,t,n,r)=>{const{activeInputs:i,passiveInputs:s}=dr(t),o=VN(i[r],e,n);return o===null?[LN(s,e,n,r)[2],!1]:[o[2],!0]},QV=(e,t,n)=>{const{activeInputs:r,passiveInputs:i}=oh(t),s=VN(r,e,n);return s===null?[WN(i,e,n)[1],!1]:[s[2],!0]},ub=(e,t,n,r,i)=>{const[s,o]=qV(e,n,r,i);if(s!==null&&(GN(e,s),o&&!t&&!Pc(e)&&Bm(xt(e),xt(n),r,i)),To(n)){const{activeInputs:a}=dr(n);CC(n,a)}},db=(e,t,n,r)=>{const[i,s]=QV(e,n,r);i!==null&&(GN(e,i),s&&!t&&!Pc(e)&&xt(e).disconnect(Af(n),r))},eG=(e,t)=>{const n=dr(e),r=[];for(const i of n.outputs)ah(i)?ub(e,t,...i):db(e,t,...i),r.push(i[0]);return n.outputs.clear(),r},tG=(e,t,n)=>{const r=dr(e),i=[];for(const s of r.outputs)s[1]===n&&(ah(s)?ub(e,t,...s):db(e,t,...s),i.push(s[0]),r.outputs.delete(s));return i},nG=(e,t,n,r,i)=>{const s=dr(e);return Array.from(s.outputs).filter(o=>o[0]===n&&(r===void 0||o[1]===r)&&(i===void 0||o[2]===i)).map(o=>(ah(o)?ub(e,t,...o):db(e,t,...o),s.outputs.delete(o),o[0]))},rG=(e,t,n,r,i,s,o,a,c,l,u,d,f,h,p,m)=>class extends l{constructor(g,v,S,E){super(S),this._context=g,this._nativeAudioNode=S;const k=u(g);d(k)&&n(vA,()=>vA(k,m))!==!0&&JV(S),xN.set(this,S),DN.set(this,new Set),g.state!=="closed"&&v&&mu(this),e(this,E,S)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(g){this._nativeAudioNode.channelCount=g}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(g){this._nativeAudioNode.channelCountMode=g}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(g){this._nativeAudioNode.channelInterpretation=g}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(g,v=0,S=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();const E=u(this._context),k=p(E);if(f(g)||h(g))throw s();if(Om(g)){const _=xt(g);try{const P=Lm(this._nativeAudioNode,_,v,S),D=Mp(this);(k||D)&&this._nativeAudioNode.disconnect(...P),this.context.state!=="closed"&&!D&&Mp(g)&&mu(g)}catch(P){throw P.code===12?s():P}if(t(this,g,v,S,k)){const P=c([this],g);Ay(P,r(k))}return g}const b=Af(g);if(b.name==="playbackRate"&&b.maxValue===1024)throw o();try{this._nativeAudioNode.connect(b,v),(k||Mp(this))&&this._nativeAudioNode.disconnect(b,v)}catch(_){throw _.code===12?s():_}if(YV(this,g,v,k)){const _=c([this],g);Ay(_,r(k))}}disconnect(g,v,S){let E;const k=u(this._context),b=p(k);if(g===void 0)E=eG(this,b);else if(typeof g=="number"){if(g<0||g>=this.numberOfOutputs)throw i();E=tG(this,b,g)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Om(g)&&S!==void 0&&(S<0||S>=g.numberOfInputs))throw i();if(E=nG(this,b,g,v,S),E.length===0)throw s()}for(const A of E){const _=c([this],A);Ay(_,a)}}},iG=(e,t,n,r,i,s,o,a,c,l,u,d,f)=>(h,p,m,y=null,g=null)=>{const v=m.value,S=new hV(v),E=p?r(S):null,k={get defaultValue(){return v},get maxValue(){return y===null?m.maxValue:y},get minValue(){return g===null?m.minValue:g},get value(){return m.value},set value(b){m.value=b,k.setValueAtTime(b,h.context.currentTime)},cancelAndHoldAtTime(b){if(typeof m.cancelAndHoldAtTime=="function")E===null&&S.flush(h.context.currentTime),S.add(i(b)),m.cancelAndHoldAtTime(b);else{const A=Array.from(S).pop();E===null&&S.flush(h.context.currentTime),S.add(i(b));const _=Array.from(S).pop();m.cancelScheduledValues(b),A!==_&&_!==void 0&&(_.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(_.value,_.endTime):_.type==="linearRampToValue"?m.linearRampToValueAtTime(_.value,_.endTime):_.type==="setValue"?m.setValueAtTime(_.value,_.startTime):_.type==="setValueCurve"&&m.setValueCurveAtTime(_.values,_.startTime,_.duration))}return k},cancelScheduledValues(b){return E===null&&S.flush(h.context.currentTime),S.add(s(b)),m.cancelScheduledValues(b),k},exponentialRampToValueAtTime(b,A){if(b===0)throw new RangeError;if(!Number.isFinite(A)||A<0)throw new RangeError;const _=h.context.currentTime;return E===null&&S.flush(_),Array.from(S).length===0&&(S.add(l(v,_)),m.setValueAtTime(v,_)),S.add(o(b,A)),m.exponentialRampToValueAtTime(b,A),k},linearRampToValueAtTime(b,A){const _=h.context.currentTime;return E===null&&S.flush(_),Array.from(S).length===0&&(S.add(l(v,_)),m.setValueAtTime(v,_)),S.add(a(b,A)),m.linearRampToValueAtTime(b,A),k},setTargetAtTime(b,A,_){return E===null&&S.flush(h.context.currentTime),S.add(c(b,A,_)),m.setTargetAtTime(b,A,_),k},setValueAtTime(b,A){return E===null&&S.flush(h.context.currentTime),S.add(l(b,A)),m.setValueAtTime(b,A),k},setValueCurveAtTime(b,A,_){const x=b instanceof Float32Array?b:new Float32Array(b);if(d!==null&&d.name==="webkitAudioContext"){const P=A+_,D=h.context.sampleRate,B=Math.ceil(A*D),V=Math.floor(P*D),G=V-B,Z=new Float32Array(G);for(let te=0;te<G;te+=1){const j=(x.length-1)/_*((B+te)/D-A),K=Math.floor(j),ie=Math.ceil(j);Z[te]=K===ie?x[K]:(1-(j-K))*x[K]+(1-(ie-j))*x[ie]}E===null&&S.flush(h.context.currentTime),S.add(u(Z,A,_)),m.setValueCurveAtTime(Z,A,_);const z=V/D;z<P&&f(k,Z[Z.length-1],z),f(k,x[x.length-1],P)}else E===null&&S.flush(h.context.currentTime),S.add(u(x,A,_)),m.setValueCurveAtTime(x,A,_);return k}};return n.set(k,m),t.set(k,h),e(k,E),k},sG=e=>({replay(t){for(const n of e)if(n.type==="exponentialRampToValue"){const{endTime:r,value:i}=n;t.exponentialRampToValueAtTime(i,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:i}=n;t.linearRampToValueAtTime(i,r)}else if(n.type==="setTarget"){const{startTime:r,target:i,timeConstant:s}=n;t.setTargetAtTime(i,r,s)}else if(n.type==="setValue"){const{startTime:r,value:i}=n;t.setValueAtTime(i,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:i,values:s}=n;t.setValueCurveAtTime(s,i,r)}else throw new Error("Can't apply an unknown automation.")}});class HN{constructor(t){this._map=new Map(t)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(t,n=null){return this._map.forEach((r,i)=>t.call(n,r,i,this))}get(t){return this._map.get(t)}has(t){return this._map.has(t)}keys(){return this._map.keys()}values(){return this._map.values()}}const oG={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},aG=(e,t,n,r,i,s,o,a,c,l,u,d,f,h)=>class extends t{constructor(m,y,g){var v;const S=a(m),E=c(S),k=u({...oG,...g});f(k);const b=vC.get(S),A=b==null?void 0:b.get(y),_=E||S.state!=="closed"?S:(v=o(S))!==null&&v!==void 0?v:S,x=i(_,E?null:m.baseLatency,l,y,A,k),P=E?r(y,k,A):null;super(m,!0,x,P);const D=[];x.parameters.forEach((V,G)=>{const Z=n(this,E,V);D.push([G,Z])}),this._nativeAudioWorkletNode=x,this._onprocessorerror=null,this._parameters=new HN(D),E&&e(S,this);const{activeInputs:B}=s(this);d(x,B)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){const y=typeof m=="function"?h(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=y;const g=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=g!==null&&g===y?m:g}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Um(e,t,n,r,i){if(typeof e.copyFromChannel=="function")t[n].byteLength===0&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],r,i);else{const s=e.getChannelData(r);if(t[n].byteLength===0)t[n]=s.slice(i,i+128);else{const o=new Float32Array(s.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(o)}}}const jN=(e,t,n,r,i)=>{typeof e.copyToChannel=="function"?t[n].byteLength!==0&&e.copyToChannel(t[n],r,i):t[n].byteLength!==0&&e.getChannelData(r).set(t[n],i)},Vm=(e,t)=>{const n=[];for(let r=0;r<e;r+=1){const i=[],s=typeof t=="number"?t:t[r];for(let o=0;o<s;o+=1)i.push(new Float32Array(128));n.push(i)}return n},cG=(e,t)=>{const n=zi(yC,e),r=xt(t);return zi(n,r)},lG=async(e,t,n,r,i,s,o)=>{const a=t===null?Math.ceil(e.context.length/128)*128:t.length,c=r.channelCount*r.numberOfInputs,l=i.reduce((y,g)=>y+g,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(s===void 0)throw new Error("Missing the processor constructor.");const d=dr(e),f=await cG(n,e),h=Vm(r.numberOfInputs,r.channelCount),p=Vm(r.numberOfOutputs,i),m=Array.from(e.parameters.keys()).reduce((y,g)=>({...y,[g]:new Float32Array(128)}),{});for(let y=0;y<a;y+=128){if(r.numberOfInputs>0&&t!==null)for(let g=0;g<r.numberOfInputs;g+=1)for(let v=0;v<r.channelCount;v+=1)Um(t,h[g],v,v,y);s.parameterDescriptors!==void 0&&t!==null&&s.parameterDescriptors.forEach(({name:g},v)=>{Um(t,m,g,c+v,y)});for(let g=0;g<r.numberOfInputs;g+=1)for(let v=0;v<i[g];v+=1)p[g][v].byteLength===0&&(p[g][v]=new Float32Array(128));try{const g=h.map((S,E)=>d.activeInputs[E].size===0?[]:S),v=o(y/n.sampleRate,n.sampleRate,()=>f.process(g,p,m));if(u!==null)for(let S=0,E=0;S<r.numberOfOutputs;S+=1){for(let k=0;k<i[S];k+=1)jN(u,p[S],k,E+k,y);E+=i[S]}if(!v)break}catch(g){e.dispatchEvent(new ErrorEvent("processorerror",{colno:g.colno,filename:g.filename,lineno:g.lineno,message:g.message}));break}}return u},uG=(e,t,n,r,i,s,o,a,c,l,u,d,f,h,p,m)=>(y,g,v)=>{const S=new WeakMap;let E=null;const k=async(b,A)=>{let _=u(b),x=null;const P=Qn(_,A),D=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(d===null){const B=D.reduce((z,te)=>z+te,0),V=i(A,{channelCount:Math.max(1,B),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,B)}),G=[];for(let z=0;z<b.numberOfOutputs;z+=1)G.push(r(A,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[z]}));const Z=o(A,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1});Z.connect=t.bind(null,G),Z.disconnect=c.bind(null,G),x=[V,G,Z]}else P||(_=new d(A,y));if(S.set(A,x===null?_:x[2]),x!==null){if(E===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");const te=b.channelCount*b.numberOfInputs,j=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,K=te+j;E=lG(b,K===0?null:await(async()=>{const X=new f(K,Math.ceil(b.context.length/128)*128,A.sampleRate),se=[],ke=[];for(let Te=0;Te<g.numberOfInputs;Te+=1)se.push(o(X,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),ke.push(i(X,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));const Ae=await Promise.all(Array.from(b.parameters.values()).map(async Te=>{const He=s(X,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Te.value});return await h(X,Te,He.offset),He})),ge=r(X,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,te+j)});for(let Te=0;Te<g.numberOfInputs;Te+=1){se[Te].connect(ke[Te]);for(let He=0;He<g.channelCount;He+=1)ke[Te].connect(ge,He,Te*g.channelCount+He)}for(const[Te,He]of Ae.entries())He.connect(ge,0,te+Te),He.start(0);return ge.connect(X.destination),await Promise.all(se.map(Te=>p(b,X,Te))),m(X)})(),A,g,D,v,l)}const B=await E,V=n(A,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[G,Z,z]=x;B!==null&&(V.buffer=B,V.start(0)),V.connect(G);for(let te=0,j=0;te<b.numberOfOutputs;te+=1){const K=Z[te];for(let ie=0;ie<D[te];ie+=1)G.connect(K,j+ie,ie);j+=D[te]}return z}if(P)for(const[B,V]of b.parameters.entries())await e(A,V,_.parameters.get(B));else for(const[B,V]of b.parameters.entries())await h(A,V,_.parameters.get(B));return await p(b,A,_),_};return{render(b,A){a(A,b);const _=S.get(A);return _!==void 0?Promise.resolve(_):k(b,A)}}},dG=(e,t,n,r,i,s,o,a,c,l,u,d,f,h,p,m,y,g,v,S)=>class extends p{constructor(k,b){super(k,b),this._nativeContext=k,this._audioWorklet=e===void 0?void 0:{addModule:(A,_)=>e(this,A,_)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new i(this)}createBuffer(k,b,A){return new n({length:b,numberOfChannels:k,sampleRate:A})}createBufferSource(){return new r(this)}createChannelMerger(k=6){return new s(this,{numberOfInputs:k})}createChannelSplitter(k=6){return new o(this,{numberOfOutputs:k})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(k=1){return new u(this,{maxDelayTime:k})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(k,b){return new h(this,{feedback:b,feedforward:k})}createOscillator(){return new m(this)}createPanner(){return new y(this)}createPeriodicWave(k,b,A={disableNormalization:!1}){return new g(this,{...A,imag:b,real:k})}createStereoPanner(){return new v(this)}createWaveShaper(){return new S(this)}decodeAudioData(k,b,A){return l(this._nativeContext,k).then(_=>(typeof b=="function"&&b(_),_),_=>{throw typeof A=="function"&&A(_),_})}},fG={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},hG=(e,t,n,r,i,s,o,a)=>class extends e{constructor(l,u){const d=s(l),f={...fG,...u},h=i(d,f),p=o(d),m=p?n():null;super(l,!1,h,m),this._Q=t(this,p,h.Q,or,wr),this._detune=t(this,p,h.detune,1200*Math.log2(or),-1200*Math.log2(or)),this._frequency=t(this,p,h.frequency,l.sampleRate/2,0),this._gain=t(this,p,h.gain,40*Math.log10(or),wr),this._nativeBiquadFilterNode=h,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(f){throw f.code===11?r():f}if(l.length!==u.length||u.length!==d.length)throw r()}},pG=(e,t,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=t(c,d)}return s.set(c,l),u?(await e(c,a.Q,l.Q),await e(c,a.detune,l.detune),await e(c,a.frequency,l.frequency),await e(c,a.gain,l.gain)):(await r(c,a.Q,l.Q),await r(c,a.detune,l.detune),await r(c,a.frequency,l.frequency),await r(c,a.gain,l.gain)),await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},mG=(e,t)=>(n,r)=>{const i=t.get(n);if(i!==void 0)return i;const s=e.get(n);if(s!==void 0)return s;try{const o=r();return o instanceof Promise?(e.set(n,o),o.catch(()=>!1).then(a=>(e.delete(n),t.set(n,a),a))):(t.set(n,o),o)}catch{return t.set(n,!1),!1}},gG={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},vG=(e,t,n,r,i)=>class extends e{constructor(o,a){const c=r(o),l={...gG,...a},u=n(c,l),d=i(c)?t():null;super(o,!1,u,d)}},yG=(e,t,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!Qn(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=e(o,l)}return r.set(o,a),await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},CG={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},IG=(e,t,n,r,i,s)=>class extends e{constructor(a,c){const l=r(a),u=s({...CG,...c}),d=n(l,u),f=i(l)?t():null;super(a,!1,d,f)}},SG=(e,t,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!Qn(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=e(o,l)}return r.set(o,a),await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},bG=e=>(t,n,r)=>e(n,t,r),wG=e=>(t,n,r=0,i=0)=>{const s=t[r];if(s===void 0)throw e();return Fm(n)?s.connect(n,0,i):s.connect(n,0)},kG=e=>(t,n)=>{const r=e(t,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=t.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},AG={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},EG=(e,t,n,r,i,s,o)=>class extends e{constructor(c,l){const u=i(c),d={...AG,...l},f=r(u,d),h=s(u),p=h?n():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=t(this,h,f.offset,or,wr),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){mu(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),To(this)&&sh(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},TG=(e,t,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null;const c=async(l,u)=>{let d=n(l);const f=Qn(d,u);if(!f){const h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=t(u,h),o!==null&&d.start(o),a!==null&&d.stop(a)}return s.set(u,d),f?await e(u,l.offset,d.offset):await r(u,l.offset,d.offset),await i(l,u,d),d};return{set start(l){o=l},set stop(l){a=l},render(l,u){const d=s.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},_G=e=>t=>(e[0]=t,e[0]),RG={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},xG=(e,t,n,r,i,s)=>class extends e{constructor(a,c){const l=r(a),u={...RG,...c},d=n(l,u),h=i(l)?t():null;super(a,!1,d,h),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&s(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,s(this,0)}else this._isBufferNullified=!1,s(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},NG=(e,t,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!Qn(a,o)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=e(o,l)}return r.set(o,a),Ou(a)?await n(s,o,a.inputs[0]):await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},PG=()=>new DOMException("","DataCloneError"),yA=e=>{const{port1:t,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,t.close(),n.close(),r()};n.onmessage=()=>i();try{t.postMessage(e,[e])}catch{}finally{i()}})},MG=(e,t,n,r,i,s,o,a,c,l,u)=>(d,f)=>{const h=o(d)?d:s(d);if(i.has(f)){const p=n();return Promise.reject(p)}try{i.add(f)}catch{}return t(c,()=>c(h))?h.decodeAudioData(f).then(p=>(yA(f).catch(()=>{}),t(a,()=>a(p))||u(p),e.add(p),p)):new Promise((p,m)=>{const y=async()=>{try{await yA(f)}catch{}},g=v=>{m(v),y()};try{h.decodeAudioData(f,v=>{typeof v.copyFromChannel!="function"&&(l(v),FN(v)),e.add(v),y().then(()=>p(v))},v=>{g(v===null?r():v)})}catch(v){g(v)}})},DG=(e,t,n,r,i,s,o,a)=>(c,l)=>{const u=t.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=s(c.context),f=a(d);if(u===l){if(t.delete(c),!f&&o(c)){const h=r(c),{outputs:p}=n(c);for(const m of p)if(ah(m)){const y=r(m[0]);e(h,y,m[1],m[2])}else{const y=i(m[0]);h.connect(y,m[1])}}}else t.set(c,u-l)},OG={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},LG=(e,t,n,r,i,s,o)=>class extends e{constructor(c,l){const u=i(c),d={...OG,...l},f=r(u,d),h=s(u),p=h?n(d.maxDelayTime):null;super(c,!1,f,p),this._delayTime=t(this,h,f.delayTime),o(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},BG=(e,t,n,r,i)=>s=>{const o=new WeakMap,a=async(c,l)=>{let u=n(c);const d=Qn(u,l);if(!d){const f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:s};u=t(l,f)}return o.set(l,u),d?await e(l,c.delayTime,u.delayTime):await r(l,c.delayTime,u.delayTime),await i(c,l,u),u};return{render(c,l){const u=o.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},FG=e=>(t,n,r,i)=>e(t[i],s=>s[0]===n&&s[1]===r),UG=e=>(t,n)=>{e(t).delete(n)},VG=e=>"delayTime"in e,GG=(e,t,n)=>function r(i,s){const o=Om(s)?s:n(e,s);if(VG(o))return[];if(i[0]===o)return[i];if(i.includes(o))return[];const{outputs:a}=t(o);return Array.from(a).map(c=>r([...i,o],c[0])).reduce((c,l)=>c.concat(l),[])},Zh=(e,t,n)=>{const r=t[n];if(r===void 0)throw e();return r},WG=e=>(t,n=void 0,r=void 0,i=0)=>n===void 0?t.forEach(s=>s.disconnect()):typeof n=="number"?Zh(e,t,n).disconnect():Fm(n)?r===void 0?t.forEach(s=>s.disconnect(n)):i===void 0?Zh(e,t,r).disconnect(n,0):Zh(e,t,r).disconnect(n,0,i):r===void 0?t.forEach(s=>s.disconnect(n)):Zh(e,t,r).disconnect(n,0),HG={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},jG=(e,t,n,r,i,s,o,a)=>class extends e{constructor(l,u){const d=s(l),f={...HG,...u},h=r(d,f),p=o(d),m=p?n():null;super(l,!1,h,m),this._attack=t(this,p,h.attack),this._knee=t(this,p,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=t(this,p,h.ratio),this._release=t(this,p,h.release),this._threshold=t(this,p,h.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},$G=(e,t,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=t(c,d)}return s.set(c,l),u?(await e(c,a.attack,l.attack),await e(c,a.knee,l.knee),await e(c,a.ratio,l.ratio),await e(c,a.release,l.release),await e(c,a.threshold,l.threshold)):(await r(c,a.attack,l.attack),await r(c,a.knee,l.knee),await r(c,a.ratio,l.ratio),await r(c,a.release,l.release),await r(c,a.threshold,l.threshold)),await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},ZG=()=>new DOMException("","EncodingError"),zG=e=>t=>new Promise((n,r)=>{if(e===null){r(new SyntaxError);return}const i=e.document.head;if(i===null)r(new SyntaxError);else{const s=e.document.createElement("script"),o=new Blob([t],{type:"application/javascript"}),a=URL.createObjectURL(o),c=e.onerror,l=()=>{e.onerror=c,URL.revokeObjectURL(a)};e.onerror=(u,d,f,h,p)=>{if(d===a||d===e.location.href&&f===1&&h===1)return l(),r(p),!1;if(c!==null)return c(u,d,f,h,p)},s.onerror=()=>{l(),r(new SyntaxError)},s.onload=()=>{l(),n()},s.src=a,s.type="module",i.appendChild(s)}}),XG=e=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,i){if(r!==null){let s=this._listeners.get(r);s===void 0&&(s=e(this,r),typeof r=="function"&&this._listeners.set(r,s)),this._nativeEventTarget.addEventListener(n,s,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,i){const s=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,s===void 0?null:s,i)}},KG=e=>(t,n,r)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get(){return Math.round(t*n)}},currentTime:{configurable:!0,get(){return t}}});try{return r()}finally{e!==null&&(delete e.currentFrame,delete e.currentTime)}},JG=e=>async t=>{try{const n=await fetch(t);if(n.ok)return[await n.text(),n.url]}catch{}throw e()},YG={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},qG=(e,t,n,r,i,s)=>class extends e{constructor(a,c){const l=i(a),u={...YG,...c},d=r(l,u),f=s(l),h=f?n():null;super(a,!1,d,h),this._gain=t(this,f,d.gain,or,wr)}get gain(){return this._gain}},QG=(e,t,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(c,d)}return s.set(c,l),u?await e(c,a.gain,l.gain):await r(c,a.gain,l.gain),await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},eW=(e,t)=>n=>t(e,n),tW=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},nW=e=>t=>{var n;return(n=e.get(t))!==null&&n!==void 0?n:0},rW=e=>t=>{const n=e(t);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},iW=e=>t=>e.get(t),Ln=()=>new DOMException("","InvalidStateError"),sW=e=>t=>{const n=e.get(t);if(n===void 0)throw Ln();return n},oW=(e,t)=>n=>{let r=e.get(n);if(r!==void 0)return r;if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new t(1,1,44100),e.set(n,r),r},aW=e=>t=>{const n=e.get(t);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},jg=()=>new DOMException("","InvalidAccessError"),cW=e=>{e.getFrequencyResponse=(t=>(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw jg();return t.call(e,n,r,i)})(e.getFrequencyResponse)},lW={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},uW=(e,t,n,r,i,s)=>class extends e{constructor(a,c){const l=r(a),u=i(l),d={...lW,...c},f=t(l,u?null:a.baseLatency,d),h=u?n(d.feedback,d.feedforward):null;super(a,!1,f,h),cW(f),this._nativeIIRFilterNode=f,s(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},$N=(e,t,n,r,i,s,o,a,c,l,u)=>{const d=l.length;let f=a;for(let h=0;h<d;h+=1){let p=n[0]*l[h];for(let m=1;m<i;m+=1){const y=f-m&c-1;p+=n[m]*s[y],p-=e[m]*o[y]}for(let m=i;m<r;m+=1)p+=n[m]*s[f-m&c-1];for(let m=i;m<t;m+=1)p-=e[m]*o[f-m&c-1];s[f]=l[h],o[f]=p,f=f+1&c-1,u[h]=p}return f},dW=(e,t,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),s=r instanceof Float64Array?r:new Float64Array(r),o=i.length,a=s.length,c=Math.min(o,a);if(i[0]!==1){for(let p=0;p<o;p+=1)s[p]/=i[0];for(let p=1;p<a;p+=1)i[p]/=i[0]}const l=32,u=new Float32Array(l),d=new Float32Array(l),f=t.createBuffer(e.numberOfChannels,e.length,e.sampleRate),h=e.numberOfChannels;for(let p=0;p<h;p+=1){const m=e.getChannelData(p),y=f.getChannelData(p);u.fill(0),d.fill(0),$N(i,o,s,a,c,u,d,0,l,m,y)}return f},fW=(e,t,n,r,i)=>(s,o)=>{const a=new WeakMap;let c=null;const l=async(u,d)=>{let f=null,h=t(u);const p=Qn(h,d);if(d.createIIRFilter===void 0?f=e(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(h=d.createIIRFilter(o,s)),a.set(d,f===null?h:f),f!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const y=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);c=(async()=>{await r(u,y,y.destination);const g=await i(y);return dW(g,d,s,o)})()}const m=await c;return f.buffer=m,f.start(0),f}return await r(u,d,h),h};return{render(u,d){const f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},hW=(e,t,n,r,i,s)=>o=>(a,c)=>{const l=e.get(a);if(l===void 0){if(!o&&s(a)){const u=r(a),{outputs:d}=n(a);for(const f of d)if(ah(f)){const h=r(f[0]);t(u,h,f[1],f[2])}else{const h=i(f[0]);u.disconnect(h,f[1])}}e.set(a,c)}else e.set(a,l+c)},pW=e=>t=>e!==null&&t instanceof e,mW=e=>t=>e!==null&&typeof e.AudioNode=="function"&&t instanceof e.AudioNode,gW=e=>t=>e!==null&&typeof e.AudioParam=="function"&&t instanceof e.AudioParam,vW=(e,t)=>n=>e(n)||t(n),yW=e=>t=>e!==null&&t instanceof e,CW=e=>e!==null&&e.isSecureContext,IW=(e,t,n,r)=>class extends e{constructor(s,o){const a=n(s),c=t(a,o);if(r(a))throw TypeError();super(s,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},SW={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},bW=(e,t,n,r)=>class extends e{constructor(s,o){const a=n(s);if(r(a))throw new TypeError;const c={...SW,...o},l=t(a,c);super(s,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},wW=(e,t,n,r)=>class extends e{constructor(s,o){const a=n(s),c=t(a,o);if(r(a))throw new TypeError;super(s,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},kW=(e,t,n)=>class extends e{constructor(i,s){const o=n(i),a=t(o,s);super(i,!0,a,null)}},AW=(e,t,n,r,i,s)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,MN.set(this,a),r(a)&&i.set(a,new Set),this._destination=new e(this,c),this._listener=t(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?s(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},bC=e=>{const t=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=e.decodeAudioData(t.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},EW=(e,t)=>(n,r,i)=>{const s=new Set;return n.connect=(o=>(a,c=0,l=0)=>{const u=s.size===0;if(t(a))return o.call(n,a,c,l),e(s,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;o.call(n,a,c),e(s,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(n.connect),n.disconnect=(o=>(a,c,l)=>{const u=s.size>0;if(a===void 0)o.apply(n),s.clear();else if(typeof a=="number"){o.call(n,a);for(const f of s)f[1]===a&&s.delete(f)}else{t(a)?o.call(n,a,c,l):o.call(n,a,c);for(const f of s)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&s.delete(f)}const d=s.size===0;u&&d&&i()})(n.disconnect),n},Mt=(e,t,n)=>{const r=t[n];r!==void 0&&r!==e[n]&&(e[n]=r)},mn=(e,t)=>{Mt(e,t,"channelCount"),Mt(e,t,"channelCountMode"),Mt(e,t,"channelInterpretation")},CA=e=>typeof e.getFloatTimeDomainData=="function",TW=e=>{e.getFloatTimeDomainData=t=>{const n=new Uint8Array(t.length);e.getByteTimeDomainData(n);const r=Math.max(n.length,e.fftSize);for(let i=0;i<r;i+=1)t[i]=(n[i]-128)*.0078125;return t}},_W=(e,t)=>(n,r)=>{const i=n.createAnalyser();if(mn(i,r),!(r.maxDecibels>r.minDecibels))throw t();return Mt(i,r,"fftSize"),Mt(i,r,"maxDecibels"),Mt(i,r,"minDecibels"),Mt(i,r,"smoothingTimeConstant"),e(CA,()=>CA(i))||TW(i),i},RW=e=>e===null?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null,Zt=(e,t,n)=>{const r=t[n];r!==void 0&&r!==e[n].value&&(e[n].value=r)},xW=e=>{e.start=(t=>{let n=!1;return(r=0,i=0,s)=>{if(n)throw Ln();t.call(e,r,i,s),n=!0}})(e.start)},fb=e=>{e.start=(t=>(n=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");t.call(e,n,r,i)})(e.start)},hb=e=>{e.stop=(t=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");t.call(e,n)})(e.stop)},NW=(e,t,n,r,i,s,o,a,c,l,u)=>(d,f)=>{const h=d.createBufferSource();return mn(h,f),Zt(h,f,"playbackRate"),Mt(h,f,"buffer"),Mt(h,f,"loop"),Mt(h,f,"loopEnd"),Mt(h,f,"loopStart"),t(n,()=>n(d))||xW(h),t(r,()=>r(d))||c(h),t(i,()=>i(d))||l(h,d),t(s,()=>s(d))||fb(h),t(o,()=>o(d))||u(h,d),t(a,()=>a(d))||hb(h),e(d,h),h},PW=e=>e===null?null:e.hasOwnProperty("AudioContext")?e.AudioContext:e.hasOwnProperty("webkitAudioContext")?e.webkitAudioContext:null,MW=(e,t)=>(n,r,i)=>{const s=n.destination;if(s.channelCount!==r)try{s.channelCount=r}catch{}i&&s.channelCountMode!=="explicit"&&(s.channelCountMode="explicit"),s.maxChannelCount===0&&Object.defineProperty(s,"maxChannelCount",{value:r});const o=e(n,{channelCount:r,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,gain:1});return t(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{s.channelCount=c}catch(l){if(c>s.maxChannelCount)throw l}}),t(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),s.channelCountMode=c}),t(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),s.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>s.maxChannelCount}),o.connect(s),o},DW=e=>e===null?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null,OW=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}},LW=(e,t,n,r,i)=>(s,o,a,c,l,u)=>{if(a!==null)try{const d=new a(s,c,u),f=new Map;let h=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw e()}},channelCountMode:{get:()=>"explicit",set:()=>{throw e()}},onprocessorerror:{get:()=>h,set:p=>{typeof h=="function"&&d.removeEventListener("processorerror",h),h=typeof p=="function"?p:null,typeof h=="function"&&d.addEventListener("processorerror",h)}}}),d.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const y=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(y!==null){const g=f.get(m[1]);g!==void 0?m[1]=g:(m[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),y(v)):y(new ErrorEvent(m[0],{...v}))},f.set(y,m[1]))}}return p.call(d,"error",m[1],m[2]),p.call(d,...m)})(d.addEventListener),d.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){const y=f.get(m[1]);y!==void 0&&(f.delete(m[1]),m[1]=y)}return p.call(d,"error",m[1],m[2]),p.call(d,m[0],m[1],m[2])})(d.removeEventListener),u.numberOfOutputs!==0){const p=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(s.destination),i(d,()=>p.disconnect(),()=>p.connect(s.destination))}return d}catch(d){throw d.code===11?r():d}if(l===void 0)throw r();return OW(u),t(s,o,l,u)},ZN=(e,t)=>e===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t))))),BW=e=>new Promise((t,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:s})=>{r.close(),i.close(),t(s)},r.onmessageerror=({data:s})=>{r.close(),i.close(),n(s)},i.postMessage(e)}),FW=async(e,t)=>{const n=await BW(t);return new e(n)},UW=(e,t,n,r)=>{let i=yC.get(e);i===void 0&&(i=new WeakMap,yC.set(e,i));const s=FW(n,r);return i.set(t,s),s},VW=(e,t,n,r,i,s,o,a,c,l,u,d,f)=>(h,p,m,y)=>{if(y.numberOfInputs===0&&y.numberOfOutputs===0)throw c();const g=Array.isArray(y.outputChannelCount)?y.outputChannelCount:Array.from(y.outputChannelCount);if(g.some(le=>le<1))throw c();if(g.length!==y.numberOfOutputs)throw t();if(y.channelCountMode!=="explicit")throw c();const v=y.channelCount*y.numberOfInputs,S=g.reduce((le,Se)=>le+Se,0),E=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(v+E>6||S>6)throw c();const k=new MessageChannel,b=[],A=[];for(let le=0;le<y.numberOfInputs;le+=1)b.push(o(h,{channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,gain:1})),A.push(i(h,{channelCount:y.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:y.channelCount}));const _=[];if(m.parameterDescriptors!==void 0)for(const{defaultValue:le,maxValue:Se,minValue:nt,name:Qe}of m.parameterDescriptors){const ue=s(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:y.parameterData[Qe]!==void 0?y.parameterData[Qe]:le===void 0?0:le});Object.defineProperties(ue.offset,{defaultValue:{get:()=>le===void 0?0:le},maxValue:{get:()=>Se===void 0?or:Se},minValue:{get:()=>nt===void 0?wr:nt}}),_.push(ue)}const x=r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+E)}),P=ZN(p,h.sampleRate),D=a(h,P,v+E,Math.max(1,S)),B=i(h,{channelCount:Math.max(1,S),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,S)}),V=[];for(let le=0;le<y.numberOfOutputs;le+=1)V.push(r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:g[le]}));for(let le=0;le<y.numberOfInputs;le+=1){b[le].connect(A[le]);for(let Se=0;Se<y.channelCount;Se+=1)A[le].connect(x,Se,le*y.channelCount+Se)}const G=new HN(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:le},Se)=>{const nt=_[Se];return nt.connect(x,0,v+Se),nt.start(0),[le,nt.offset]}));x.connect(D);let Z=y.channelInterpretation,z=null;const te=y.numberOfOutputs===0?[D]:V,j={get bufferSize(){return P},get channelCount(){return y.channelCount},set channelCount(le){throw n()},get channelCountMode(){return y.channelCountMode},set channelCountMode(le){throw n()},get channelInterpretation(){return Z},set channelInterpretation(le){for(const Se of b)Se.channelInterpretation=le;Z=le},get context(){return D.context},get inputs(){return b},get numberOfInputs(){return y.numberOfInputs},get numberOfOutputs(){return y.numberOfOutputs},get onprocessorerror(){return z},set onprocessorerror(le){typeof z=="function"&&j.removeEventListener("processorerror",z),z=typeof le=="function"?le:null,typeof z=="function"&&j.addEventListener("processorerror",z)},get parameters(){return G},get port(){return k.port2},addEventListener(...le){return D.addEventListener(le[0],le[1],le[2])},connect:e.bind(null,te),disconnect:l.bind(null,te),dispatchEvent(...le){return D.dispatchEvent(le[0])},removeEventListener(...le){return D.removeEventListener(le[0],le[1],le[2])}},K=new Map;k.port1.addEventListener=(le=>(...Se)=>{if(Se[0]==="message"){const nt=typeof Se[1]=="function"?Se[1]:typeof Se[1]=="object"&&Se[1]!==null&&typeof Se[1].handleEvent=="function"?Se[1].handleEvent:null;if(nt!==null){const Qe=K.get(Se[1]);Qe!==void 0?Se[1]=Qe:(Se[1]=ue=>{u(h.currentTime,h.sampleRate,()=>nt(ue))},K.set(nt,Se[1]))}}return le.call(k.port1,Se[0],Se[1],Se[2])})(k.port1.addEventListener),k.port1.removeEventListener=(le=>(...Se)=>{if(Se[0]==="message"){const nt=K.get(Se[1]);nt!==void 0&&(K.delete(Se[1]),Se[1]=nt)}return le.call(k.port1,Se[0],Se[1],Se[2])})(k.port1.removeEventListener);let ie=null;Object.defineProperty(k.port1,"onmessage",{get:()=>ie,set:le=>{typeof ie=="function"&&k.port1.removeEventListener("message",ie),ie=typeof le=="function"?le:null,typeof ie=="function"&&(k.port1.addEventListener("message",ie),k.port1.start())}}),m.prototype.port=k.port1;let X=null;UW(h,j,m,y).then(le=>X=le);const ke=Vm(y.numberOfInputs,y.channelCount),Ae=Vm(y.numberOfOutputs,g),ge=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((le,{name:Se})=>({...le,[Se]:new Float32Array(128)}),{});let Te=!0;const He=()=>{y.numberOfOutputs>0&&D.disconnect(B);for(let le=0,Se=0;le<y.numberOfOutputs;le+=1){const nt=V[le];for(let Qe=0;Qe<g[le];Qe+=1)B.disconnect(nt,Se+Qe,Qe);Se+=g[le]}},ce=new Map;D.onaudioprocess=({inputBuffer:le,outputBuffer:Se})=>{if(X!==null){const nt=d(j);for(let Qe=0;Qe<P;Qe+=128){for(let ue=0;ue<y.numberOfInputs;ue+=1)for(let Ue=0;Ue<y.channelCount;Ue+=1)Um(le,ke[ue],Ue,Ue,Qe);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:ue},Ue)=>{Um(le,ge,ue,v+Ue,Qe)});for(let ue=0;ue<y.numberOfInputs;ue+=1)for(let Ue=0;Ue<g[ue];Ue+=1)Ae[ue][Ue].byteLength===0&&(Ae[ue][Ue]=new Float32Array(128));try{const ue=ke.map((xe,je)=>{if(nt[je].size>0)return ce.set(je,P/128),xe;const Be=ce.get(je);return Be===void 0?[]:(xe.every(Qt=>Qt.every(el=>el===0))&&(Be===1?ce.delete(je):ce.set(je,Be-1)),xe)});Te=u(h.currentTime+Qe/h.sampleRate,h.sampleRate,()=>X.process(ue,Ae,ge));for(let xe=0,je=0;xe<y.numberOfOutputs;xe+=1){for(let zt=0;zt<g[xe];zt+=1)jN(Se,Ae[xe],zt,je+zt,Qe);je+=g[xe]}}catch(ue){Te=!1,j.dispatchEvent(new ErrorEvent("processorerror",{colno:ue.colno,filename:ue.filename,lineno:ue.lineno,message:ue.message}))}if(!Te){for(let ue=0;ue<y.numberOfInputs;ue+=1){b[ue].disconnect(A[ue]);for(let Ue=0;Ue<y.channelCount;Ue+=1)A[Qe].disconnect(x,Ue,ue*y.channelCount+Ue)}if(m.parameterDescriptors!==void 0){const ue=m.parameterDescriptors.length;for(let Ue=0;Ue<ue;Ue+=1){const xe=_[Ue];xe.disconnect(x,0,v+Ue),xe.stop()}}x.disconnect(D),D.onaudioprocess=null,Gt?He():Tn();break}}}};let Gt=!1;const gn=o(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Nt=()=>D.connect(gn).connect(h.destination),Tn=()=>{D.disconnect(gn),gn.disconnect()},rn=()=>{if(Te){Tn(),y.numberOfOutputs>0&&D.connect(B);for(let le=0,Se=0;le<y.numberOfOutputs;le+=1){const nt=V[le];for(let Qe=0;Qe<g[le];Qe+=1)B.connect(nt,Se+Qe,Qe);Se+=g[le]}}Gt=!0},_n=()=>{Te&&(Nt(),He()),Gt=!1};return Nt(),f(j,rn,_n)},zN=(e,t)=>{const n=e.createBiquadFilter();return mn(n,t),Zt(n,t,"Q"),Zt(n,t,"detune"),Zt(n,t,"frequency"),Zt(n,t,"gain"),Mt(n,t,"type"),n},GW=(e,t)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return e!==null&&e.name==="webkitAudioContext"&&t(n,i),mn(i,r),i},WW=e=>{const t=e.numberOfOutputs;Object.defineProperty(e,"channelCount",{get:()=>t,set:n=>{if(n!==t)throw Ln()}}),Object.defineProperty(e,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Ln()}}),Object.defineProperty(e,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Ln()}})},ch=(e,t)=>{const n=e.createChannelSplitter(t.numberOfOutputs);return mn(n,t),WW(n),n},HW=(e,t,n,r,i)=>(s,o)=>{if(s.createConstantSource===void 0)return n(s,o);const a=s.createConstantSource();return mn(a,o),Zt(a,o,"offset"),t(r,()=>r(s))||fb(a),t(i,()=>i(s))||hb(a),e(s,a),a},Lu=(e,t)=>(e.connect=t.connect.bind(t),e.disconnect=t.disconnect.bind(t),e),jW=(e,t,n,r)=>(i,{offset:s,...o})=>{const a=i.createBuffer(1,2,44100),c=t(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...o,gain:s}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},f=()=>c.connect(l),h=()=>c.disconnect(l);return e(i,c),r(Lu(d,l),f,h)},$W=(e,t)=>(n,r)=>{const i=n.createConvolver();if(mn(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),Mt(i,r,"buffer"),r.channelCount>2||(t(i,"channelCount",s=>()=>s.call(i),s=>o=>{if(o>2)throw e();return s.call(i,o)}),r.channelCountMode==="max"))throw e();return t(i,"channelCountMode",s=>()=>s.call(i),s=>o=>{if(o==="max")throw e();return s.call(i,o)}),i},XN=(e,t)=>{const n=e.createDelay(t.maxDelayTime);return mn(n,t),Zt(n,t,"delayTime"),n},ZW=e=>(t,n)=>{const r=t.createDynamicsCompressor();if(mn(r,n),n.channelCount>2||n.channelCountMode==="max")throw e();return Zt(r,n,"attack"),Zt(r,n,"knee"),Zt(r,n,"ratio"),Zt(r,n,"release"),Zt(r,n,"threshold"),r},Nr=(e,t)=>{const n=e.createGain();return mn(n,t),Zt(n,t,"gain"),n},zW=e=>(t,n,r)=>{if(t.createIIRFilter===void 0)return e(t,n,r);const i=t.createIIRFilter(r.feedforward,r.feedback);return mn(i,r),i};function XW(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function KW(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function IA(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)n=KW(n,t),n[0]+=e[r];return n}const JW=(e,t,n,r)=>(i,s,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=ZN(s,i.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),h=u instanceof Float64Array?u:new Float64Array(u),p=f.length,m=h.length,y=Math.min(p,m);if(p===0||p>20)throw r();if(f[0]===0)throw t();if(m===0||m>20)throw r();if(h[0]===0)throw t();if(f[0]!==1){for(let _=0;_<m;_+=1)h[_]/=f[0];for(let _=1;_<p;_+=1)f[_]/=f[0]}const g=n(i,d,o,o);g.channelCount=o,g.channelCountMode=a,g.channelInterpretation=c;const v=32,S=[],E=[],k=[];for(let _=0;_<o;_+=1){S.push(0);const x=new Float32Array(v),P=new Float32Array(v);x.fill(0),P.fill(0),E.push(x),k.push(P)}g.onaudioprocess=_=>{const x=_.inputBuffer,P=_.outputBuffer,D=x.numberOfChannels;for(let B=0;B<D;B+=1){const V=x.getChannelData(B),G=P.getChannelData(B);S[B]=$N(f,p,h,m,y,E[B],k[B],S[B],v,V,G)}};const b=i.sampleRate/2;return Lu({get bufferSize(){return d},get channelCount(){return g.channelCount},set channelCount(_){g.channelCount=_},get channelCountMode(){return g.channelCountMode},set channelCountMode(_){g.channelCountMode=_},get channelInterpretation(){return g.channelInterpretation},set channelInterpretation(_){g.channelInterpretation=_},get context(){return g.context},get inputs(){return[g]},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},addEventListener(..._){return g.addEventListener(_[0],_[1],_[2])},dispatchEvent(..._){return g.dispatchEvent(_[0])},getFrequencyResponse(_,x,P){if(_.length!==x.length||x.length!==P.length)throw e();const D=_.length;for(let B=0;B<D;B+=1){const V=-Math.PI*(_[B]/b),G=[Math.cos(V),Math.sin(V)],Z=IA(h,G),z=IA(f,G),te=XW(Z,z);x[B]=Math.sqrt(te[0]*te[0]+te[1]*te[1]),P[B]=Math.atan2(te[1],te[0])}},removeEventListener(..._){return g.removeEventListener(_[0],_[1],_[2])}},g)},YW=(e,t)=>e.createMediaElementSource(t.mediaElement),qW=(e,t)=>{const n=e.createMediaStreamDestination();return mn(n,t),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},QW=(e,{mediaStream:t})=>{const n=t.getAudioTracks();n.sort((s,o)=>s.id<o.id?-1:s.id>o.id?1:0);const r=n.slice(0,1),i=e.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:t}),i},e6=(e,t)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),s=n.createMediaStreamSource(i);if(r.kind!=="audio")throw e();if(t(n))throw new TypeError;return s},t6=e=>e===null?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null,n6=(e,t,n,r,i,s)=>(o,a)=>{const c=o.createOscillator();return mn(c,a),Zt(c,a,"detune"),Zt(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):Mt(c,a,"type"),t(n,()=>n(o))||fb(c),t(r,()=>r(o))||s(c,o),t(i,()=>i(o))||hb(c),e(o,c),c},r6=e=>(t,n)=>{const r=t.createPanner();return r.orientationX===void 0?e(t,n):(mn(r,n),Zt(r,n,"orientationX"),Zt(r,n,"orientationY"),Zt(r,n,"orientationZ"),Zt(r,n,"positionX"),Zt(r,n,"positionY"),Zt(r,n,"positionZ"),Mt(r,n,"coneInnerAngle"),Mt(r,n,"coneOuterAngle"),Mt(r,n,"coneOuterGain"),Mt(r,n,"distanceModel"),Mt(r,n,"maxDistance"),Mt(r,n,"panningModel"),Mt(r,n,"refDistance"),Mt(r,n,"rolloffFactor"),r)},i6=(e,t,n,r,i,s,o,a,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:f,coneOuterGain:h,distanceModel:p,maxDistance:m,orientationX:y,orientationY:g,orientationZ:v,panningModel:S,positionX:E,positionY:k,positionZ:b,refDistance:A,rolloffFactor:_,...x})=>{const P=u.createPanner();if(x.channelCount>2||x.channelCountMode==="max")throw o();mn(P,x);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},B=n(u,{...D,channelInterpretation:"speakers",numberOfInputs:6}),V=r(u,{...x,gain:1}),G=r(u,{...D,gain:1}),Z=r(u,{...D,gain:0}),z=r(u,{...D,gain:0}),te=r(u,{...D,gain:0}),j=r(u,{...D,gain:0}),K=r(u,{...D,gain:0}),ie=i(u,256,6,1),X=s(u,{...D,curve:new Float32Array([1,1]),oversample:"none"});let se=[y,g,v],ke=[E,k,b];const Ae=new Float32Array(1);ie.onaudioprocess=({inputBuffer:ce})=>{const Gt=[c(ce,Ae,0),c(ce,Ae,1),c(ce,Ae,2)];Gt.some((Nt,Tn)=>Nt!==se[Tn])&&(P.setOrientation(...Gt),se=Gt);const gn=[c(ce,Ae,3),c(ce,Ae,4),c(ce,Ae,5)];gn.some((Nt,Tn)=>Nt!==ke[Tn])&&(P.setPosition(...gn),ke=gn)},Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(te.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0});const ge={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(ce){if(ce>2)throw o();V.channelCount=ce,P.channelCount=ce},get channelCountMode(){return P.channelCountMode},set channelCountMode(ce){if(ce==="max")throw o();V.channelCountMode=ce,P.channelCountMode=ce},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(ce){V.channelInterpretation=ce,P.channelInterpretation=ce},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(ce){P.coneInnerAngle=ce},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(ce){P.coneOuterAngle=ce},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(ce){if(ce<0||ce>1)throw t();P.coneOuterGain=ce},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(ce){P.distanceModel=ce},get inputs(){return[V]},get maxDistance(){return P.maxDistance},set maxDistance(ce){if(ce<0)throw new RangeError;P.maxDistance=ce},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return G.gain},get orientationY(){return Z.gain},get orientationZ(){return z.gain},get panningModel(){return P.panningModel},set panningModel(ce){P.panningModel=ce},get positionX(){return te.gain},get positionY(){return j.gain},get positionZ(){return K.gain},get refDistance(){return P.refDistance},set refDistance(ce){if(ce<0)throw new RangeError;P.refDistance=ce},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(ce){if(ce<0)throw new RangeError;P.rolloffFactor=ce},addEventListener(...ce){return V.addEventListener(ce[0],ce[1],ce[2])},dispatchEvent(...ce){return V.dispatchEvent(ce[0])},removeEventListener(...ce){return V.removeEventListener(ce[0],ce[1],ce[2])}};d!==ge.coneInnerAngle&&(ge.coneInnerAngle=d),f!==ge.coneOuterAngle&&(ge.coneOuterAngle=f),h!==ge.coneOuterGain&&(ge.coneOuterGain=h),p!==ge.distanceModel&&(ge.distanceModel=p),m!==ge.maxDistance&&(ge.maxDistance=m),y!==ge.orientationX.value&&(ge.orientationX.value=y),g!==ge.orientationY.value&&(ge.orientationY.value=g),v!==ge.orientationZ.value&&(ge.orientationZ.value=v),S!==ge.panningModel&&(ge.panningModel=S),E!==ge.positionX.value&&(ge.positionX.value=E),k!==ge.positionY.value&&(ge.positionY.value=k),b!==ge.positionZ.value&&(ge.positionZ.value=b),A!==ge.refDistance&&(ge.refDistance=A),_!==ge.rolloffFactor&&(ge.rolloffFactor=_),(se[0]!==1||se[1]!==0||se[2]!==0)&&P.setOrientation(...se),(ke[0]!==0||ke[1]!==0||ke[2]!==0)&&P.setPosition(...ke);const Te=()=>{V.connect(P),e(V,X,0,0),X.connect(G).connect(B,0,0),X.connect(Z).connect(B,0,1),X.connect(z).connect(B,0,2),X.connect(te).connect(B,0,3),X.connect(j).connect(B,0,4),X.connect(K).connect(B,0,5),B.connect(ie).connect(u.destination)},He=()=>{V.disconnect(P),a(V,X,0,0),X.disconnect(G),G.disconnect(B),X.disconnect(Z),Z.disconnect(B),X.disconnect(z),z.disconnect(B),X.disconnect(te),te.disconnect(B),X.disconnect(j),j.disconnect(B),X.disconnect(K),K.disconnect(B),B.disconnect(ie),ie.disconnect(u.destination)};return l(Lu(ge,P),Te,He)},s6=e=>(t,{disableNormalization:n,imag:r,real:i})=>{const s=r instanceof Float32Array?r:new Float32Array(r),o=i instanceof Float32Array?i:new Float32Array(i),a=t.createPeriodicWave(o,s,{disableNormalization:n});if(Array.from(r).length<2)throw e();return a},lh=(e,t,n,r)=>e.createScriptProcessor(t,n,r),o6=(e,t)=>(n,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw t();if(n.createStereoPanner===void 0)return e(n,r);const s=n.createStereoPanner();return mn(s,r),Zt(s,r,"pan"),Object.defineProperty(s,"channelCountMode",{get:()=>i,set:o=>{if(o!==i)throw t()}}),s},a6=(e,t,n,r,i,s)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(p,m,y,g)=>{const v=new Float32Array(16385),S=new Float32Array(16385);for(let x=0;x<16385;x+=1){const P=x/16384*c;v[x]=Math.cos(P),S[x]=Math.sin(P)}const E=n(p,{...l,gain:0}),k=r(p,{...u,curve:v}),b=r(p,{...u,curve:a}),A=n(p,{...l,gain:0}),_=r(p,{...u,curve:S});return{connectGraph(){m.connect(E),m.connect(b.inputs===void 0?b:b.inputs[0]),m.connect(A),b.connect(y),y.connect(k.inputs===void 0?k:k.inputs[0]),y.connect(_.inputs===void 0?_:_.inputs[0]),k.connect(E.gain),_.connect(A.gain),E.connect(g,0,0),A.connect(g,0,1)},disconnectGraph(){m.disconnect(E),m.disconnect(b.inputs===void 0?b:b.inputs[0]),m.disconnect(A),b.disconnect(y),y.disconnect(k.inputs===void 0?k:k.inputs[0]),y.disconnect(_.inputs===void 0?_:_.inputs[0]),k.disconnect(E.gain),_.disconnect(A.gain),E.disconnect(g,0,0),A.disconnect(g,0,1)}}},f=(p,m,y,g)=>{const v=new Float32Array(16385),S=new Float32Array(16385),E=new Float32Array(16385),k=new Float32Array(16385),b=Math.floor(16385/2);for(let te=0;te<16385;te+=1)if(te>b){const j=(te-b)/(16384-b)*c;v[te]=Math.cos(j),S[te]=Math.sin(j),E[te]=0,k[te]=1}else{const j=te/(16384-b)*c;v[te]=1,S[te]=0,E[te]=Math.cos(j),k[te]=Math.sin(j)}const A=t(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),_=n(p,{...l,gain:0}),x=r(p,{...u,curve:v}),P=n(p,{...l,gain:0}),D=r(p,{...u,curve:S}),B=r(p,{...u,curve:a}),V=n(p,{...l,gain:0}),G=r(p,{...u,curve:E}),Z=n(p,{...l,gain:0}),z=r(p,{...u,curve:k});return{connectGraph(){m.connect(A),m.connect(B.inputs===void 0?B:B.inputs[0]),A.connect(_,0),A.connect(P,0),A.connect(V,1),A.connect(Z,1),B.connect(y),y.connect(x.inputs===void 0?x:x.inputs[0]),y.connect(D.inputs===void 0?D:D.inputs[0]),y.connect(G.inputs===void 0?G:G.inputs[0]),y.connect(z.inputs===void 0?z:z.inputs[0]),x.connect(_.gain),D.connect(P.gain),G.connect(V.gain),z.connect(Z.gain),_.connect(g,0,0),V.connect(g,0,0),P.connect(g,0,1),Z.connect(g,0,1)},disconnectGraph(){m.disconnect(A),m.disconnect(B.inputs===void 0?B:B.inputs[0]),A.disconnect(_,0),A.disconnect(P,0),A.disconnect(V,1),A.disconnect(Z,1),B.disconnect(y),y.disconnect(x.inputs===void 0?x:x.inputs[0]),y.disconnect(D.inputs===void 0?D:D.inputs[0]),y.disconnect(G.inputs===void 0?G:G.inputs[0]),y.disconnect(z.inputs===void 0?z:z.inputs[0]),x.disconnect(_.gain),D.disconnect(P.gain),G.disconnect(V.gain),z.disconnect(Z.gain),_.disconnect(g,0,0),V.disconnect(g,0,0),P.disconnect(g,0,1),Z.disconnect(g,0,1)}}},h=(p,m,y,g,v)=>{if(m===1)return d(p,y,g,v);if(m===2)return f(p,y,g,v);throw i()};return(p,{channelCount:m,channelCountMode:y,pan:g,...v})=>{if(y==="max")throw i();const S=e(p,{...v,channelCount:1,channelCountMode:y,numberOfInputs:2}),E=n(p,{...v,channelCount:m,channelCountMode:y,gain:1}),k=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:g});let{connectGraph:b,disconnectGraph:A}=h(p,m,E,k,S);Object.defineProperty(k.gain,"defaultValue",{get:()=>0}),Object.defineProperty(k.gain,"maxValue",{get:()=>1}),Object.defineProperty(k.gain,"minValue",{get:()=>-1});const _={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(B){E.channelCount!==B&&(x&&A(),{connectGraph:b,disconnectGraph:A}=h(p,B,E,k,S),x&&b()),E.channelCount=B},get channelCountMode(){return E.channelCountMode},set channelCountMode(B){if(B==="clamped-max"||B==="max")throw i();E.channelCountMode=B},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(B){E.channelInterpretation=B},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return k.gain},addEventListener(...B){return E.addEventListener(B[0],B[1],B[2])},dispatchEvent(...B){return E.dispatchEvent(B[0])},removeEventListener(...B){return E.removeEventListener(B[0],B[1],B[2])}};let x=!1;const P=()=>{b(),x=!0},D=()=>{A(),x=!1};return s(Lu(_,S),P,D)}},c6=(e,t,n,r,i,s,o)=>(a,c)=>{const l=a.createWaveShaper();if(s!==null&&s.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);mn(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw t();Mt(l,{curve:u},"curve"),Mt(l,c,"oversample");let d=null,f=!1;return o(l,"curve",m=>()=>m.call(l),m=>y=>(m.call(l,y),f&&(r(y)&&d===null?d=e(a,l):!r(y)&&d!==null&&(d(),d=null)),y)),i(l,()=>{f=!0,r(l.curve)&&(d=e(a,l))},()=>{f=!1,d!==null&&(d(),d=null)})},l6=(e,t,n,r,i)=>(s,{curve:o,oversample:a,...c})=>{const l=s.createWaveShaper(),u=s.createWaveShaper();mn(l,c),mn(u,c);const d=n(s,{...c,gain:1}),f=n(s,{...c,gain:-1}),h=n(s,{...c,gain:1}),p=n(s,{...c,gain:-1});let m=null,y=!1,g=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(k){d.channelCount=k,f.channelCount=k,l.channelCount=k,h.channelCount=k,u.channelCount=k,p.channelCount=k},get channelCountMode(){return l.channelCountMode},set channelCountMode(k){d.channelCountMode=k,f.channelCountMode=k,l.channelCountMode=k,h.channelCountMode=k,u.channelCountMode=k,p.channelCountMode=k},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(k){d.channelInterpretation=k,f.channelInterpretation=k,l.channelInterpretation=k,h.channelInterpretation=k,u.channelInterpretation=k,p.channelInterpretation=k},get context(){return l.context},get curve(){return g},set curve(k){if(k!==null&&k.length<2)throw t();if(k===null)l.curve=k,u.curve=k;else{const b=k.length,A=new Float32Array(b+2-b%2),_=new Float32Array(b+2-b%2);A[0]=k[0],_[0]=-k[b-1];const x=Math.ceil((b+1)/2),P=(b+1)/2-1;for(let D=1;D<x;D+=1){const B=D/x*P,V=Math.floor(B),G=Math.ceil(B);A[D]=V===G?k[V]:(1-(B-V))*k[V]+(1-(G-B))*k[G],_[D]=V===G?-k[b-1-V]:-((1-(B-V))*k[b-1-V])-(1-(G-B))*k[b-1-G]}A[x]=b%2===1?k[x-1]:(k[x-2]+k[x-1])/2,l.curve=A,u.curve=_}g=k,y&&(r(g)&&m===null?m=e(s,d):m!==null&&(m(),m=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(k){l.oversample=k,u.oversample=k},addEventListener(...k){return d.addEventListener(k[0],k[1],k[2])},dispatchEvent(...k){return d.dispatchEvent(k[0])},removeEventListener(...k){return d.removeEventListener(k[0],k[1],k[2])}};o!==null&&(v.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==v.oversample&&(v.oversample=a);const S=()=>{d.connect(l).connect(h),d.connect(f).connect(u).connect(p).connect(h),y=!0,r(g)&&(m=e(s,d))},E=()=>{d.disconnect(l),l.disconnect(h),d.disconnect(f),f.disconnect(u),u.disconnect(p),p.disconnect(h),y=!1,m!==null&&(m(),m=null)};return i(Lu(v,h),S,E)},Pr=()=>new DOMException("","NotSupportedError"),u6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},d6=(e,t,n,r,i,s,o)=>class extends e{constructor(c,l){const u=i(c),d={...u6,...l},f=n(u,d),h=s(u),p=h?r():null,m=c.sampleRate/2;super(c,!1,f,p),this._detune=t(this,h,f.detune,153600,-153600),this._frequency=t(this,h,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?o(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){mu(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),To(this)&&sh(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},f6=(e,t,n,r,i)=>()=>{const s=new WeakMap;let o=null,a=null,c=null;const l=async(u,d)=>{let f=n(u);const h=Qn(f,d);if(!h){const p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:o===null?void 0:o,type:f.type};f=t(d,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return s.set(d,f),h?(await e(d,u.detune,f.detune),await e(d,u.frequency,f.frequency)):(await r(d,u.detune,f.detune),await r(d,u.frequency,f.frequency)),await i(u,d,f),f};return{set periodicWave(u){o=u},set start(u){a=u},set stop(u){c=u},render(u,d){const f=s.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}},h6={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},p6=(e,t,n,r,i,s,o)=>class extends e{constructor(c,l){const u=i(c),d={...h6,...l},f=n(u,d),h=s(u),p=h?r():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=t(this,h,f.orientationX,or,wr),this._orientationY=t(this,h,f.orientationY,or,wr),this._orientationZ=t(this,h,f.orientationZ,or,wr),this._positionX=t(this,h,f.positionX,or,wr),this._positionY=t(this,h,f.positionY,or,wr),this._positionZ=t(this,h,f.positionZ,or,wr),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},m6=(e,t,n,r,i,s,o,a,c,l)=>()=>{const u=new WeakMap;let d=null;const f=async(h,p)=>{let m=null,y=s(h);const g={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation},v={...g,coneInnerAngle:y.coneInnerAngle,coneOuterAngle:y.coneOuterAngle,coneOuterGain:y.coneOuterGain,distanceModel:y.distanceModel,maxDistance:y.maxDistance,panningModel:y.panningModel,refDistance:y.refDistance,rolloffFactor:y.rolloffFactor},S=Qn(y,p);if("bufferSize"in y)m=r(p,{...g,gain:1});else if(!S){const E={...v,orientationX:y.orientationX.value,orientationY:y.orientationY.value,orientationZ:y.orientationZ.value,positionX:y.positionX.value,positionY:y.positionY.value,positionZ:y.positionZ.value};y=i(p,E)}if(u.set(p,m===null?y:m),m!==null){if(d===null){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new o(6,h.context.length,p.sampleRate),B=t(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});B.connect(D.destination),d=(async()=>{const V=await Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map(async(G,Z)=>{const z=n(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z===0?1:0});return await a(D,G,z.offset),z}));for(let G=0;G<6;G+=1)V[G].connect(B,0,G),V[G].start(0);return l(D)})()}const E=await d,k=r(p,{...g,gain:1});await c(h,p,k);const b=[];for(let D=0;D<E.numberOfChannels;D+=1)b.push(E.getChannelData(D));let A=[b[0][0],b[1][0],b[2][0]],_=[b[3][0],b[4][0],b[5][0]],x=r(p,{...g,gain:1}),P=i(p,{...v,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:_[0],positionY:_[1],positionZ:_[2]});k.connect(x).connect(P.inputs[0]),P.connect(m);for(let D=128;D<E.length;D+=128){const B=[b[0][D],b[1][D],b[2][D]],V=[b[3][D],b[4][D],b[5][D]];if(B.some((G,Z)=>G!==A[Z])||V.some((G,Z)=>G!==_[Z])){A=B,_=V;const G=D/p.sampleRate;x.gain.setValueAtTime(0,G),x=r(p,{...g,gain:0}),P=i(p,{...v,orientationX:A[0],orientationY:A[1],orientationZ:A[2],positionX:_[0],positionY:_[1],positionZ:_[2]}),x.gain.setValueAtTime(1,G),k.connect(x).connect(P.inputs[0]),P.connect(m)}}return m}return S?(await e(p,h.orientationX,y.orientationX),await e(p,h.orientationY,y.orientationY),await e(p,h.orientationZ,y.orientationZ),await e(p,h.positionX,y.positionX),await e(p,h.positionY,y.positionY),await e(p,h.positionZ,y.positionZ)):(await a(p,h.orientationX,y.orientationX),await a(p,h.orientationY,y.orientationY),await a(p,h.orientationZ,y.orientationZ),await a(p,h.positionX,y.positionX),await a(p,h.positionY,y.positionY),await a(p,h.positionZ,y.positionZ)),Ou(y)?await c(h,p,y.inputs[0]):await c(h,p,y),y};return{render(h,p){const m=u.get(p);return m!==void 0?Promise.resolve(m):f(h,p)}}},g6={disableNormalization:!1},v6=(e,t,n,r)=>class KN{constructor(s,o){const a=t(s),c=r({...g6,...o}),l=e(a,c);return n.add(l),l}static[Symbol.hasInstance](s){return s!==null&&typeof s=="object"&&Object.getPrototypeOf(s)===KN.prototype||n.has(s)}},y6=(e,t)=>(n,r,i)=>(e(r).replay(i),t(r,n,i)),C6=(e,t,n)=>async(r,i,s)=>{const o=e(r);await Promise.all(o.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const f=await t(l).render(l,i),h=r.context.destination;!n(l)&&(r!==h||!n(r))&&f.connect(s,u,c)})).reduce((a,c)=>[...a,...c],[]))},I6=(e,t,n)=>async(r,i,s)=>{const o=t(r);await Promise.all(Array.from(o.activeInputs).map(async([a,c])=>{const u=await e(a).render(a,i);n(a)||u.connect(s,c)}))},S6=(e,t,n,r)=>i=>e(bC,()=>bC(i))?Promise.resolve(e(r,r)).then(s=>{if(!s){const o=n(i,512,0,1);i.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>i.currentTime,o.connect(i.destination)}return i.startRendering()}):new Promise(s=>{const o=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{o.disconnect(),s(a.renderedBuffer)},o.connect(i.destination),i.startRendering()}),b6=e=>(t,n)=>{e.set(t,n)},w6=e=>(t,n)=>e.set(t,n),k6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},A6=(e,t,n,r,i,s)=>class extends e{constructor(a,c){const l=i(a),u={...k6,...c},d=n(l,u),f=s(l),h=f?r():null;super(a,!1,d,h),this._pan=t(this,f,d.pan)}get pan(){return this._pan}},E6=(e,t,n,r,i)=>()=>{const s=new WeakMap,o=async(a,c)=>{let l=n(a);const u=Qn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=t(c,d)}return s.set(c,l),u?await e(c,a.pan,l.pan):await r(c,a.pan,l.pan),Ou(l)?await i(a,c,l.inputs[0]):await i(a,c,l),l};return{render(a,c){const l=s.get(c);return l!==void 0?Promise.resolve(l):o(a,c)}}},T6=e=>()=>{if(e===null)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0},_6=(e,t)=>async()=>{if(e===null)return!0;if(t===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new t(1,128,44100),i=URL.createObjectURL(n);let s=!1,o=!1;try{await r.audioWorklet.addModule(i);const a=new e(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>s=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),await r.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(i)}return s&&!o},R6=(e,t)=>()=>{if(t===null)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{r.disconnect(),i(n.currentTime!==0)},n.startRendering()})},x6=()=>new DOMException("","UnknownError"),N6={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},P6=(e,t,n,r,i,s,o)=>class extends e{constructor(c,l){const u=i(c),d={...N6,...l},f=n(u,d),p=s(u)?r():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},M6=(e,t,n)=>()=>{const r=new WeakMap,i=async(s,o)=>{let a=t(s);if(!Qn(a,o)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=e(o,l)}return r.set(o,a),Ou(a)?await n(s,o,a.inputs[0]):await n(s,o,a),a};return{render(s,o){const a=r.get(o);return a!==void 0?Promise.resolve(a):i(s,o)}}},D6=()=>typeof window>"u"?null:window,O6=(e,t)=>n=>{n.copyFromChannel=(r,i,s=0)=>{const o=e(s),a=e(i);if(a>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<c&&d<u;d+=1)r[d]=l[d+o]},n.copyToChannel=(r,i,s=0)=>{const o=e(s),a=e(i);if(a>=n.numberOfChannels)throw t();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=o<0?-o:0;d+o<c&&d<u;d+=1)l[d+o]=r[d]}},L6=e=>t=>{t.copyFromChannel=(n=>(r,i,s=0)=>{const o=e(s),a=e(i);if(o<t.length)return n.call(t,r,a,o)})(t.copyFromChannel),t.copyToChannel=(n=>(r,i,s=0)=>{const o=e(s),a=e(i);if(o<t.length)return n.call(t,r,a,o)})(t.copyToChannel)},B6=e=>(t,n)=>{const r=n.createBuffer(1,1,44100);t.buffer===null&&(t.buffer=r),e(t,"buffer",i=>()=>{const s=i.call(t);return s===r?null:s},i=>s=>i.call(t,s===null?r:s))},F6=(e,t)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const i=n.createBufferSource();t(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)i.connect(r,0,c)},()=>i.disconnect(r))},JN=(e,t,n)=>e.copyFromChannel===void 0?e.getChannelData(n)[0]:(e.copyFromChannel(t,n),t[0]),YN=e=>{if(e===null)return!1;const t=e.length;return t%2!==0?e[Math.floor(t/2)]!==0:e[t/2-1]+e[t/2]!==0},uh=(e,t,n,r)=>{let i=e;for(;!i.hasOwnProperty(t);)i=Object.getPrototypeOf(i);const{get:s,set:o}=Object.getOwnPropertyDescriptor(i,t);Object.defineProperty(e,t,{get:n(s),set:r(o)})},U6=e=>({...e,outputChannelCount:e.outputChannelCount!==void 0?e.outputChannelCount:e.numberOfInputs===1&&e.numberOfOutputs===1?[e.channelCount]:Array.from({length:e.numberOfOutputs},()=>1)}),V6=e=>({...e,channelCount:e.numberOfOutputs}),G6=e=>{const{imag:t,real:n}=e;return t===void 0?n===void 0?{...e,imag:[0,0],real:[0,0]}:{...e,imag:Array.from(n,()=>0),real:n}:n===void 0?{...e,imag:t,real:Array.from(t,()=>0)}:{...e,imag:t,real:n}},qN=(e,t,n)=>{try{e.setValueAtTime(t,n)}catch(r){if(r.code!==9)throw r;qN(e,t,n+1e-7)}},W6=e=>{const t=e.createBufferSource();t.start();try{t.start()}catch{return!0}return!1},H6=e=>{const t=e.createBufferSource(),n=e.createBuffer(1,1,44100);t.buffer=n;try{t.start(0,1)}catch{return!1}return!0},j6=e=>{const t=e.createBufferSource();t.start();try{t.stop()}catch{return!1}return!0},pb=e=>{const t=e.createOscillator();try{t.start(-1)}catch(n){return n instanceof RangeError}return!1},QN=e=>{const t=e.createBuffer(1,1,44100),n=e.createBufferSource();n.buffer=t,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},mb=e=>{const t=e.createOscillator();try{t.stop(-1)}catch(n){return n instanceof RangeError}return!1},$6=e=>{const{port1:t,port2:n}=new MessageChannel;try{t.postMessage(e)}finally{t.close(),n.close()}},Z6=e=>{e.start=(t=>(n=0,r=0,i)=>{const s=e.buffer,o=s===null?r:Math.min(s.duration,r);s!==null&&o>s.duration-.5/e.context.sampleRate?t.call(e,n,0,0):t.call(e,n,o,i)})(e.start)},eP=(e,t)=>{const n=t.createGain();e.connect(n);const r=(i=>()=>{i.call(e,n),e.removeEventListener("ended",r)})(e.disconnect);e.addEventListener("ended",r),Lu(e,n),e.stop=(i=>{let s=!1;return(o=0)=>{if(s)try{i.call(e,o)}catch{n.gain.setValueAtTime(0,o)}else i.call(e,o),s=!0}})(e.stop)},Bu=(e,t)=>n=>{const r={value:e};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof t=="function"?t.call(e,n):t.handleEvent.call(e,n)},z6=IV(Zc),X6=EV(Zc),K6=FG(Hg),tP=new WeakMap,J6=nW(tP),Ho=mG(new Map,new WeakMap),Ls=D6(),nP=_W(Ho,Fs),rP=tW(dr),Wn=C6(dr,rP,Pc),Y6=NV(nP,xt,Wn),kt=sW(MN),Xa=t6(Ls),mt=yW(Xa),iP=new WeakMap,sP=XG(Bu),dh=PW(Ls),oP=pW(dh),aP=mW(Ls),q6=gW(Ls),Ef=DW(Ls),qt=rG(SV(RN),AV(z6,X6,Lm,K6,Bm,dr,J6,ih,xt,Zc,To,Pc,Mp),Ho,hW(gC,Bm,dr,xt,Af,To),Fs,jg,Pr,DG(Lm,gC,dr,xt,Af,kt,To,mt),GG(iP,dr,zi),sP,kt,oP,aP,q6,mt,Ef),Q6=xV(qt,Y6,Fs,nP,kt,mt),cP=new WeakSet,SA=RW(Ls),lP=_G(new Uint32Array(1)),uP=O6(lP,Fs),dP=L6(lP),e9=MV(cP,Ho,Pr,SA,Xa,T6(SA),uP,dP),$g=TV(Nr),fP=I6(rP,oh,Pc),Us=bG(fP),Fu=NW($g,Ho,W6,H6,j6,pb,QN,mb,Z6,B6(uh),eP),Vs=y6(rW(oh),fP),t9=LV(Us,Fu,xt,Vs,Wn),Ji=iG(bV(NN),iP,PN,sG,pV,mV,gV,vV,yV,hC,TN,dh,qN),n9=OV(qt,t9,Ji,Ln,Fu,kt,mt,Bu),r9=ZV(qt,zV,Fs,Ln,MW(Nr,uh),kt,mt,Wn),i9=pG(Us,zN,xt,Vs,Wn),zc=w6(tP),s9=hG(qt,Ji,i9,jg,zN,kt,mt,zc),Ka=EW(Zc,aP),o9=F6(Ln,Ka),Ja=GW(dh,o9),a9=yG(Ja,xt,Wn),c9=vG(qt,a9,Ja,kt,mt),l9=SG(ch,xt,Wn),u9=IG(qt,l9,ch,kt,mt,V6),d9=jW($g,Fu,Nr,Ka),Uu=HW($g,Ho,d9,pb,mb),f9=TG(Us,Uu,xt,Vs,Wn),h9=EG(qt,Ji,f9,Uu,kt,mt,Bu),hP=$W(Pr,uh),p9=NG(hP,xt,Wn),m9=xG(qt,p9,hP,kt,mt,zc),g9=BG(Us,XN,xt,Vs,Wn),v9=LG(qt,Ji,g9,XN,kt,mt,zc),pP=ZW(Pr),y9=$G(Us,pP,xt,Vs,Wn),C9=jG(qt,Ji,y9,pP,Pr,kt,mt,zc),I9=QG(Us,Nr,xt,Vs,Wn),S9=qG(qt,Ji,I9,Nr,kt,mt),b9=JW(jg,Ln,lh,Pr),gb=S6(Ho,Nr,lh,R6(Nr,Xa)),w9=fW(Fu,xt,Xa,Wn,gb),k9=zW(b9),A9=uW(qt,k9,w9,kt,mt,zc),E9=XV(Ji,Ja,Uu,lh,Pr,JN,mt,uh),mP=new WeakMap,T9=AW(r9,E9,sP,mt,mP,Bu),gP=n6($g,Ho,pb,QN,mb,eP),_9=f6(Us,gP,xt,Vs,Wn),R9=d6(qt,Ji,gP,_9,kt,mt,Bu),vP=kG(Fu),x9=l6(vP,Ln,Nr,YN,Ka),Zg=c6(vP,Ln,x9,YN,Ka,dh,uh),N9=i6(Lm,Ln,Ja,Nr,lh,Zg,Pr,Bm,JN,Ka),yP=r6(N9),P9=m6(Us,Ja,Uu,Nr,yP,xt,Xa,Vs,Wn,gb),M9=p6(qt,Ji,yP,P9,kt,mt,zc),D9=s6(Fs),O9=v6(D9,kt,new WeakSet,G6),L9=a6(Ja,ch,Nr,Zg,Pr,Ka),CP=o6(L9,Pr),B9=E6(Us,CP,xt,Vs,Wn),F9=A6(qt,Ji,CP,B9,kt,mt),U9=M6(Zg,xt,Wn),V9=P6(qt,Ln,Zg,U9,kt,mt,zc),IP=CW(Ls),vb=KG(Ls),SP=new WeakMap,G9=oW(SP,Xa),W9=IP?kV(Ho,Pr,zG(Ls),vb,JG(CV),kt,G9,mt,Ef,new WeakMap,new WeakMap,_6(Ef,Xa),Ls):void 0,H9=vW(oP,mt),j9=MG(cP,Ho,PG,ZG,new WeakSet,kt,H9,IC,bC,uP,dP),$9=dG(W9,Q6,e9,n9,s9,c9,u9,h9,m9,j9,v9,C9,S9,A9,T9,R9,M9,O9,F9,V9),Z9=IW(qt,YW,kt,mt),z9=bW(qt,qW,kt,mt),X9=wW(qt,QW,kt,mt),K9=e6(Ln,mt),J9=kW(qt,K9,kt),Y9=$V($9,Ln,Pr,x6,Z9,z9,X9,J9,dh),bP=aW(mP),q9=_V(bP),wP=wG(Fs),Q9=UG(bP),kP=WG(Fs),AP=new WeakMap,eH=eW(AP,zi),tH=VW(wP,Fs,Ln,Ja,ch,Uu,Nr,lh,Pr,kP,vb,eH,Ka),nH=LW(Ln,tH,Nr,Pr,Ka),rH=uG(Us,wP,Fu,Ja,ch,Uu,Nr,Q9,kP,vb,xt,Ef,Xa,Vs,Wn,gb),iH=iW(SP),sH=b6(AP),bA=IP?aG(q9,qt,Ji,rH,nH,dr,iH,kt,mt,Ef,U6,sH,$6,Bu):void 0;class EP{static async openCache(){try{return await caches.open("audio-cache")}catch(t){throw console.error("Failed to open cache:",t),t}}static async getAudioBufferFromCache(t,n,r){try{const i=await n.match(t);if(i){const s=await i.arrayBuffer();return r.decodeAudioData(s)}return null}catch(i){throw console.error("Failed to get audio data from cache:",i),i}}static async fetchAndCacheAudioBuffer(t,n,r){try{const i=await fetch(t),s=i.clone();n.put(t,s);const o=await i.arrayBuffer();return r.decodeAudioData(o)}catch(i){throw console.error("Failed to fetch and cache audio data:",i),i}}static async getAudioBuffer(t,n){const r=await this.openCache();let i=this.pendingRequests.get(t);return i||await this.getAudioBufferFromCache(t,r,n)||(i=this.fetchAndCacheAudioBuffer(t,r,n),this.pendingRequests.set(t,i),i)}}W(EP,"pendingRequests",new Map);const oH=(e,t)=>{var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer};function aH(e,t){const n=[];let r=0;fetch(e).then(function(s){if(!s.ok)throw new Error("HTTP error, status = "+s.status);if(!s.body)throw new Error("Missing body");var o=s.body.getReader();let a=new ArrayBuffer(0);function c(){return o.read().then(({value:l,done:u})=>{let d=null;if(l){if(a.byteLength?d=oH(a,l.buffer):(a=l.buffer.slice(0,44),d=l.buffer),t.decodeAudioData(d,function(f){n.push(f),n.length&&i()},function(f){console.log("err(decodeAudioData): "+f)}),u){console.log("done");return}c()}})}c()});function i(){for(;n.length;){let s=n.shift();const o=t.createBufferSource();if(!s)return;o.buffer=s,o.connect(t.destination),r==0&&(r=t.currentTime+.02),o.start(r),r+=o.buffer.duration}}}const cH="data:application/javascript;base64,KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgV0VCQVVESU9fQkxPQ0tfU0laRSA9IDEyODsKICAgIGNvbnN0IERFRkFVTFRfQkxPQ0tfU0laRSA9IDEwMjQ7IC8vIERlZmF1bHQgYmxvY2sgc2l6ZSBpZiBub3QgcHJvdmlkZWQgaW4gb3B0aW9ucwogICAgLyoqIE92ZXJsYXAtQWRkIE5vZGUgKi8KICAgIGNsYXNzIE9MQVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgICAgICAgbmJJbnB1dHM7CiAgICAgICAgbmJPdXRwdXRzOwogICAgICAgIGJsb2NrU2l6ZTsKICAgICAgICBob3BTaXplOwogICAgICAgIG5iT3ZlcmxhcHM7CiAgICAgICAgaW5wdXRCdWZmZXJzID0gW107CiAgICAgICAgaW5wdXRCdWZmZXJzSGVhZCA9IFtdOwogICAgICAgIGlucHV0QnVmZmVyc1RvU2VuZCA9IFtdOwogICAgICAgIG91dHB1dEJ1ZmZlcnMgPSBbXTsKICAgICAgICBvdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSA9IFtdOwogICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMubmJJbnB1dHMgPSBvcHRpb25zLm51bWJlck9mSW5wdXRzIHx8IDE7CiAgICAgICAgICAgIHRoaXMubmJPdXRwdXRzID0gb3B0aW9ucy5udW1iZXJPZk91dHB1dHMgfHwgMTsKICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBvcHRpb25zLnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplIHx8IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5ob3BTaXplID0gV0VCQVVESU9fQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5uYk92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLmJsb2NrU2l6ZSAvIHRoaXMuaG9wU2l6ZSk7CiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTsKICAgICAgICB9CiAgICAgICAgaW5pdGlhbGl6ZUJ1ZmZlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWQgPSBuZXcgQXJyYXkodGhpcy5uYklucHV0cyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMgPSBuZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlID0gbmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYk91dHB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFsbG9jYXRlSW5wdXRDaGFubmVscyhpbnB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWRbaW5wdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplICsgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc1tpbnB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW2lucHV0SW5kZXhdW2ldID0gdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0uc3ViYXJyYXkoMCwgdGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxvY2F0ZU91dHB1dENoYW5uZWxzKG91dHB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tvdXRwdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbb3V0cHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVtvdXRwdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZChpbnB1dHMsIG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gaW5wdXRzW2ldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYkNoYW5uZWxzICE9PSB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gb3V0cHV0c1tpXS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJDaGFubmVscyAhPT0gdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkSW5wdXRzKGlucHV0cykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gaW5wdXRzW2ldW2pdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLnNldCh3ZWJBdWRpb0Jsb2NrLCB0aGlzLmJsb2NrU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgd3JpdGVPdXRwdXRzKG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iT3V0cHV0czsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMub3V0cHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gb3V0cHV0c1tpXVtqXTsKICAgICAgICAgICAgICAgICAgICB3ZWJBdWRpb0Jsb2NrLnNldCh0aGlzLm91dHB1dEJ1ZmZlcnNbaV1bal0uc3ViYXJyYXkoMCwgV0VCQVVESU9fQkxPQ0tfU0laRSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0SW5wdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2hpZnRPdXRwdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmZpbGwoMCwgdGhpcy5ibG9ja1NpemUgLSBXRUJBVURJT19CTE9DS19TSVpFKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2ldW2pdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbaV1bal0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmJsb2NrU2l6ZTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tpXVtqXVtrXSArPSB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW2ldW2pdW2tdIC8gdGhpcy5uYk92ZXJsYXBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICB0aGlzLnJlYWxsb2NhdGVDaGFubmVsc0lmTmVlZGVkKGlucHV0cywgb3V0cHV0cyk7CiAgICAgICAgICAgIHRoaXMucmVhZElucHV0cyhpbnB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCk7CiAgICAgICAgICAgIHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpOwogICAgICAgICAgICB0aGlzLnByb2Nlc3NPTEEodGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQsIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUsIHBhcmFtZXRlcnMpOwogICAgICAgICAgICB0aGlzLmhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCk7CiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRzKG91dHB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgKHgpIHsKICAgIAlyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4OwogICAgfQoKICAgIGZ1bmN0aW9uIEZGVChzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfCAwOwogICAgICBpZiAodGhpcy5zaXplIDw9IDEgfHwgKHRoaXMuc2l6ZSAmICh0aGlzLnNpemUgLSAxKSkgIT09IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxJyk7CgogICAgICB0aGlzLl9jc2l6ZSA9IHNpemUgPDwgMTsKCiAgICAgIC8vIE5PVEU6IFVzZSBvZiBgdmFyYCBpcyBpbnRlbnRpb25hbCBmb3Igb2xkIFY4IHZlcnNpb25zCiAgICAgIHZhciB0YWJsZSA9IG5ldyBBcnJheSh0aGlzLnNpemUgKiAyKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSSAqIGkgLyB0aGlzLnNpemU7CiAgICAgICAgdGFibGVbaV0gPSBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgdGFibGVbaSArIDFdID0gLU1hdGguc2luKGFuZ2xlKTsKICAgICAgfQogICAgICB0aGlzLnRhYmxlID0gdGFibGU7CgogICAgICAvLyBGaW5kIHNpemUncyBwb3dlciBvZiB0d28KICAgICAgdmFyIHBvd2VyID0gMDsKICAgICAgZm9yICh2YXIgdCA9IDE7IHRoaXMuc2l6ZSA+IHQ7IHQgPDw9IDEpCiAgICAgICAgcG93ZXIrKzsKCiAgICAgIC8vIENhbGN1bGF0ZSBpbml0aWFsIHN0ZXAncyB3aWR0aDoKICAgICAgLy8gICAqIElmIHdlIGFyZSBmdWxsIHJhZGl4LTQgLSBpdCBpcyAyeCBzbWFsbGVyIHRvIGdpdmUgaW5pdGFsIGxlbj04CiAgICAgIC8vICAgKiBPdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgYHBvd2VyYCB0byBnaXZlIGxlbj00CiAgICAgIHRoaXMuX3dpZHRoID0gcG93ZXIgJSAyID09PSAwID8gcG93ZXIgLSAxIDogcG93ZXI7CgogICAgICAvLyBQcmUtY29tcHV0ZSBiaXQtcmV2ZXJzYWwgcGF0dGVybnMKICAgICAgdGhpcy5fYml0cmV2ID0gbmV3IEFycmF5KDEgPDwgdGhpcy5fd2lkdGgpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2JpdHJldi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuX2JpdHJldltqXSA9IDA7CiAgICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBzaGlmdCA8IHRoaXMuX3dpZHRoOyBzaGlmdCArPSAyKSB7CiAgICAgICAgICB2YXIgcmV2U2hpZnQgPSB0aGlzLl93aWR0aCAtIHNoaWZ0IC0gMjsKICAgICAgICAgIHRoaXMuX2JpdHJldltqXSB8PSAoKGogPj4+IHNoaWZ0KSAmIDMpIDw8IHJldlNoaWZ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fb3V0ID0gbnVsbDsKICAgICAgdGhpcy5fZGF0YSA9IG51bGw7CiAgICAgIHRoaXMuX2ludiA9IDA7CiAgICB9CiAgICB2YXIgZmZ0ID0gRkZUOwoKICAgIEZGVC5wcm90b3R5cGUuZnJvbUNvbXBsZXhBcnJheSA9IGZ1bmN0aW9uIGZyb21Db21wbGV4QXJyYXkoY29tcGxleCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCBuZXcgQXJyYXkoY29tcGxleC5sZW5ndGggPj4+IDEpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXgubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzW2kgPj4+IDFdID0gY29tcGxleFtpXTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5jcmVhdGVDb21wbGV4QXJyYXkgPSBmdW5jdGlvbiBjcmVhdGVDb21wbGV4QXJyYXkoKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudG9Db21wbGV4QXJyYXkgPSBmdW5jdGlvbiB0b0NvbXBsZXhBcnJheShpbnB1dCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCB0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHJlc1tpXSA9IGlucHV0W2kgPj4+IDFdOwogICAgICAgIHJlc1tpICsgMV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUuY29tcGxldGVTcGVjdHJ1bSA9IGZ1bmN0aW9uIGNvbXBsZXRlU3BlY3RydW0oc3BlY3RydW0pIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLl9jc2l6ZTsKICAgICAgdmFyIGhhbGYgPSBzaXplID4+PiAxOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGhhbGY7IGkgKz0gMikgewogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpXSA9IHNwZWN0cnVtW2ldOwogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpICsgMV0gPSAtc3BlY3RydW1baSArIDFdOwogICAgICB9CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl90cmFuc2Zvcm00KCk7CiAgICAgIHRoaXMuX291dCA9IG51bGw7CiAgICAgIHRoaXMuX2RhdGEgPSBudWxsOwogICAgfTsKCiAgICBGRlQucHJvdG90eXBlLnJlYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiByZWFsVHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl9yZWFsVHJhbnNmb3JtNCgpOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5pbnZlcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gaW52ZXJzZVRyYW5zZm9ybShvdXQsIGRhdGEpIHsKICAgICAgaWYgKG91dCA9PT0gZGF0YSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCcpOwoKICAgICAgdGhpcy5fb3V0ID0gb3V0OwogICAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgICAgdGhpcy5faW52ID0gMTsKICAgICAgdGhpcy5fdHJhbnNmb3JtNCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykKICAgICAgICBvdXRbaV0gLz0gdGhpcy5zaXplOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgLy8gcmFkaXgtNCBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IFVzZXMgb2YgYHZhcmAgYXJlIGludGVudGlvbmFsIGZvciBvbGRlciBWOCB2ZXJzaW9uIHRoYXQgZG8gbm90CiAgICAvLyBzdXBwb3J0IGJvdGggYGxldCBjb21wb3VuZCBhc3NpZ25tZW50c2AgYW5kIGBjb25zdCBwaGlgCiAgICBGRlQucHJvdG90eXBlLl90cmFuc2Zvcm00ID0gZnVuY3Rpb24gX3RyYW5zZm9ybTQoKSB7CiAgICAgIHZhciBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIHZhciBzaXplID0gdGhpcy5fY3NpemU7CgogICAgICAvLyBJbml0aWFsIHN0ZXAgKHBlcm11dGUgYW5kIHRyYW5zZm9ybSkKICAgICAgdmFyIHdpZHRoID0gdGhpcy5fd2lkdGg7CiAgICAgIHZhciBzdGVwID0gMSA8PCB3aWR0aDsKICAgICAgdmFyIGxlbiA9IChzaXplIC8gc3RlcCkgPDwgMTsKCiAgICAgIHZhciBvdXRPZmY7CiAgICAgIHZhciB0OwogICAgICB2YXIgYml0cmV2ID0gdGhpcy5fYml0cmV2OwogICAgICBpZiAobGVuID09PSA0KSB7CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGVuID09PSA4CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm00KG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gbGVuID4+PiAyOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgLy8gRnVsbCBjYXNlCiAgICAgICAgICB2YXIgbGltaXQgPSBvdXRPZmYgKyBxdWFydGVyTGVuOwogICAgICAgICAgZm9yICh2YXIgaSA9IG91dE9mZiwgayA9IDA7IGkgPCBsaW1pdDsgaSArPSAyLCBrICs9IHN0ZXApIHsKICAgICAgICAgICAgY29uc3QgQSA9IGk7CiAgICAgICAgICAgIGNvbnN0IEIgPSBBICsgcXVhcnRlckxlbjsKICAgICAgICAgICAgY29uc3QgQyA9IEIgKyBxdWFydGVyTGVuOwogICAgICAgICAgICBjb25zdCBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgQXIgPSBvdXRbQV07CiAgICAgICAgICAgIGNvbnN0IEFpID0gb3V0W0EgKyAxXTsKICAgICAgICAgICAgY29uc3QgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIGNvbnN0IEJpID0gb3V0W0IgKyAxXTsKICAgICAgICAgICAgY29uc3QgQ3IgPSBvdXRbQ107CiAgICAgICAgICAgIGNvbnN0IENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgY29uc3QgRHIgPSBvdXRbRF07CiAgICAgICAgICAgIGNvbnN0IERpID0gb3V0W0QgKyAxXTsKCiAgICAgICAgICAgIC8vIE1pZGRsZSB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgTUFyID0gQXI7CiAgICAgICAgICAgIGNvbnN0IE1BaSA9IEFpOwoKICAgICAgICAgICAgY29uc3QgdGFibGVCciA9IHRhYmxlW2tdOwogICAgICAgICAgICBjb25zdCB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICBjb25zdCBNQnIgPSBCciAqIHRhYmxlQnIgLSBCaSAqIHRhYmxlQmk7CiAgICAgICAgICAgIGNvbnN0IE1CaSA9IEJyICogdGFibGVCaSArIEJpICogdGFibGVCcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2kgPSBpbnYgKiB0YWJsZVsyICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNQ3IgPSBDciAqIHRhYmxlQ3IgLSBDaSAqIHRhYmxlQ2k7CiAgICAgICAgICAgIGNvbnN0IE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRHIgPSB0YWJsZVszICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGkgPSBpbnYgKiB0YWJsZVszICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIGNvbnN0IE1EaSA9IERyICogdGFibGVEaSArIERpICogdGFibGVEcjsKCiAgICAgICAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgVDByID0gTUFyICsgTUNyOwogICAgICAgICAgICBjb25zdCBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIGNvbnN0IFQxciA9IE1BciAtIE1DcjsKICAgICAgICAgICAgY29uc3QgVDFpID0gTUFpIC0gTUNpOwogICAgICAgICAgICBjb25zdCBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIGNvbnN0IFQyaSA9IE1CaSArIE1EaTsKICAgICAgICAgICAgY29uc3QgVDNyID0gaW52ICogKE1CciAtIE1Ecik7CiAgICAgICAgICAgIGNvbnN0IFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKICAgICAgICAgICAgY29uc3QgRkFpID0gVDBpICsgVDJpOwoKICAgICAgICAgICAgY29uc3QgRkNyID0gVDByIC0gVDJyOwogICAgICAgICAgICBjb25zdCBGQ2kgPSBUMGkgLSBUMmk7CgogICAgICAgICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgICAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgICAgICAgIGNvbnN0IEZEciA9IFQxciAtIFQzaTsKICAgICAgICAgICAgY29uc3QgRkRpID0gVDFpICsgVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CiAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgb3V0W0MgKyAxXSA9IEZDaTsKICAgICAgICAgICAgb3V0W0RdID0gRkRyOwogICAgICAgICAgICBvdXRbRCArIDFdID0gRkRpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyByYWRpeC0yIGltcGxlbWVudGF0aW9uCiAgICAvLwogICAgLy8gTk9URTogT25seSBjYWxsZWQgZm9yIGxlbj00CiAgICBGRlQucHJvdG90eXBlLl9zaW5nbGVUcmFuc2Zvcm0yID0gZnVuY3Rpb24gX3NpbmdsZVRyYW5zZm9ybTIob3V0T2ZmLCBvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IGV2ZW5JID0gZGF0YVtvZmYgKyAxXTsKICAgICAgY29uc3Qgb2RkUiA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IG9kZEkgPSBkYXRhW29mZiArIHN0ZXAgKyAxXTsKCiAgICAgIGNvbnN0IGxlZnRSID0gZXZlblIgKyBvZGRSOwogICAgICBjb25zdCBsZWZ0SSA9IGV2ZW5JICsgb2RkSTsKICAgICAgY29uc3QgcmlnaHRSID0gZXZlblIgLSBvZGRSOwogICAgICBjb25zdCByaWdodEkgPSBldmVuSSAtIG9kZEk7CgogICAgICBvdXRbb3V0T2ZmXSA9IGxlZnRSOwogICAgICBvdXRbb3V0T2ZmICsgMV0gPSBsZWZ0STsKICAgICAgb3V0W291dE9mZiArIDJdID0gcmlnaHRSOwogICAgICBvdXRbb3V0T2ZmICsgM10gPSByaWdodEk7CiAgICB9OwoKICAgIC8vIHJhZGl4LTQKICAgIC8vCiAgICAvLyBOT1RFOiBPbmx5IGNhbGxlZCBmb3IgbGVuPTgKICAgIEZGVC5wcm90b3R5cGUuX3NpbmdsZVRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlVHJhbnNmb3JtNChvdXRPZmYsIG9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuX291dDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7CiAgICAgIGNvbnN0IGludiA9IHRoaXMuX2ludiA/IC0xIDogMTsKICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwICogMjsKICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwICogMzsKCiAgICAgIC8vIE9yaWdpbmFsIHZhbHVlcwogICAgICBjb25zdCBBciA9IGRhdGFbb2ZmXTsKICAgICAgY29uc3QgQWkgPSBkYXRhW29mZiArIDFdOwogICAgICBjb25zdCBCciA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IEJpID0gZGF0YVtvZmYgKyBzdGVwICsgMV07CiAgICAgIGNvbnN0IENyID0gZGF0YVtvZmYgKyBzdGVwMl07CiAgICAgIGNvbnN0IENpID0gZGF0YVtvZmYgKyBzdGVwMiArIDFdOwogICAgICBjb25zdCBEciA9IGRhdGFbb2ZmICsgc3RlcDNdOwogICAgICBjb25zdCBEaSA9IGRhdGFbb2ZmICsgc3RlcDMgKyAxXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDBpID0gQWkgKyBDaTsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDFpID0gQWkgLSBDaTsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDJpID0gQmkgKyBEaTsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwogICAgICBjb25zdCBUM2kgPSBpbnYgKiAoQmkgLSBEaSk7CgogICAgICAvLyBGaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgRkFyID0gVDByICsgVDJyOwogICAgICBjb25zdCBGQWkgPSBUMGkgKyBUMmk7CgogICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKICAgICAgY29uc3QgRkNpID0gVDBpIC0gVDJpOwoKICAgICAgY29uc3QgRkRyID0gVDFyIC0gVDNpOwogICAgICBjb25zdCBGRGkgPSBUMWkgKyBUM3I7CgogICAgICBvdXRbb3V0T2ZmXSA9IEZBcjsKICAgICAgb3V0W291dE9mZiArIDFdID0gRkFpOwogICAgICBvdXRbb3V0T2ZmICsgMl0gPSBGQnI7CiAgICAgIG91dFtvdXRPZmYgKyAzXSA9IEZCaTsKICAgICAgb3V0W291dE9mZiArIDRdID0gRkNyOwogICAgICBvdXRbb3V0T2ZmICsgNV0gPSBGQ2k7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICAvLyBSZWFsIGlucHV0IHJhZGl4LTQgaW1wbGVtZW50YXRpb24KICAgIEZGVC5wcm90b3R5cGUuX3JlYWxUcmFuc2Zvcm00ID0gZnVuY3Rpb24gX3JlYWxUcmFuc2Zvcm00KCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5fb3V0OwogICAgICB2YXIgc2l6ZSA9IHRoaXMuX2NzaXplOwoKICAgICAgLy8gSW5pdGlhbCBzdGVwIChwZXJtdXRlIGFuZCB0cmFuc2Zvcm0pCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoOwogICAgICB2YXIgc3RlcCA9IDEgPDwgd2lkdGg7CiAgICAgIHZhciBsZW4gPSAoc2l6ZSAvIHN0ZXApIDw8IDE7CgogICAgICB2YXIgb3V0T2ZmOwogICAgICB2YXIgdDsKICAgICAgdmFyIGJpdHJldiA9IHRoaXMuX2JpdHJldjsKICAgICAgaWYgKGxlbiA9PT0gNCkgewogICAgICAgIGZvciAob3V0T2ZmID0gMCwgdCA9IDA7IG91dE9mZiA8IHNpemU7IG91dE9mZiArPSBsZW4sIHQrKykgewogICAgICAgICAgY29uc3Qgb2ZmID0gYml0cmV2W3RdOwogICAgICAgICAgdGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLCBvZmYgPj4+IDEsIHN0ZXAgPj4+IDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZW4gPT09IDgKICAgICAgICBmb3IgKG91dE9mZiA9IDAsIHQgPSAwOyBvdXRPZmYgPCBzaXplOyBvdXRPZmYgKz0gbGVuLCB0KyspIHsKICAgICAgICAgIGNvbnN0IG9mZiA9IGJpdHJldlt0XTsKICAgICAgICAgIHRoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG91dE9mZiwgb2ZmID4+PiAxLCBzdGVwID4+PiAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBoYWxmTGVuID0gbGVuID4+PiAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gaGFsZkxlbiA+Pj4gMTsKICAgICAgICB2YXIgaHF1YXJ0ZXJMZW4gPSBxdWFydGVyTGVuID4+PiAxOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDw9IGhxdWFydGVyTGVuOyBpICs9IDIsIGsgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgQSA9IG91dE9mZiArIGk7CiAgICAgICAgICAgIHZhciBCID0gQSArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBDID0gQiArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgdmFyIEFyID0gb3V0W0FdOwogICAgICAgICAgICB2YXIgQWkgPSBvdXRbQSArIDFdOwogICAgICAgICAgICB2YXIgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIHZhciBCaSA9IG91dFtCICsgMV07CiAgICAgICAgICAgIHZhciBDciA9IG91dFtDXTsKICAgICAgICAgICAgdmFyIENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgdmFyIERyID0gb3V0W0RdOwogICAgICAgICAgICB2YXIgRGkgPSBvdXRbRCArIDFdOwoKICAgICAgICAgICAgLy8gTWlkZGxlIHZhbHVlcwogICAgICAgICAgICB2YXIgTUFyID0gQXI7CiAgICAgICAgICAgIHZhciBNQWkgPSBBaTsKCiAgICAgICAgICAgIHZhciB0YWJsZUJyID0gdGFibGVba107CiAgICAgICAgICAgIHZhciB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICB2YXIgTUJyID0gQnIgKiB0YWJsZUJyIC0gQmkgKiB0YWJsZUJpOwogICAgICAgICAgICB2YXIgTUJpID0gQnIgKiB0YWJsZUJpICsgQmkgKiB0YWJsZUJyOwoKICAgICAgICAgICAgdmFyIHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIHZhciB0YWJsZUNpID0gaW52ICogdGFibGVbMiAqIGsgKyAxXTsKICAgICAgICAgICAgdmFyIE1DciA9IENyICogdGFibGVDciAtIENpICogdGFibGVDaTsKICAgICAgICAgICAgdmFyIE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIHZhciB0YWJsZURyID0gdGFibGVbMyAqIGtdOwogICAgICAgICAgICB2YXIgdGFibGVEaSA9IGludiAqIHRhYmxlWzMgKiBrICsgMV07CiAgICAgICAgICAgIHZhciBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIHZhciBNRGkgPSBEciAqIHRhYmxlRGkgKyBEaSAqIHRhYmxlRHI7CgogICAgICAgICAgICAvLyBQcmUtRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBUMHIgPSBNQXIgKyBNQ3I7CiAgICAgICAgICAgIHZhciBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIHZhciBUMXIgPSBNQXIgLSBNQ3I7CiAgICAgICAgICAgIHZhciBUMWkgPSBNQWkgLSBNQ2k7CiAgICAgICAgICAgIHZhciBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIHZhciBUMmkgPSBNQmkgKyBNRGk7CiAgICAgICAgICAgIHZhciBUM3IgPSBpbnYgKiAoTUJyIC0gTURyKTsKICAgICAgICAgICAgdmFyIFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBGQXIgPSBUMHIgKyBUMnI7CiAgICAgICAgICAgIHZhciBGQWkgPSBUMGkgKyBUMmk7CgogICAgICAgICAgICB2YXIgRkJyID0gVDFyICsgVDNpOwogICAgICAgICAgICB2YXIgRkJpID0gVDFpIC0gVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CgogICAgICAgICAgICAvLyBPdXRwdXQgZmluYWwgbWlkZGxlIHBvaW50CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyIEZDciA9IFQwciAtIFQycjsKICAgICAgICAgICAgICB2YXIgRkNpID0gVDBpIC0gVDJpOwogICAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgICBvdXRbQyArIDFdID0gRkNpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIG91cnNlbHZlcwogICAgICAgICAgICBpZiAoaSA9PT0gaHF1YXJ0ZXJMZW4pCiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBJbiB0aGUgZmxpcHBlZCBjYXNlOgogICAgICAgICAgICAvLyBNQWkgPSAtTUFpCiAgICAgICAgICAgIC8vIE1Ccj0tTUJpLCBNQmk9LU1CcgogICAgICAgICAgICAvLyBNQ3I9LU1DcgogICAgICAgICAgICAvLyBNRHI9TURpLCBNRGk9TURyCiAgICAgICAgICAgIHZhciBTVDByID0gVDFyOwogICAgICAgICAgICB2YXIgU1QwaSA9IC1UMWk7CiAgICAgICAgICAgIHZhciBTVDFyID0gVDByOwogICAgICAgICAgICB2YXIgU1QxaSA9IC1UMGk7CiAgICAgICAgICAgIHZhciBTVDJyID0gLWludiAqIFQzaTsKICAgICAgICAgICAgdmFyIFNUMmkgPSAtaW52ICogVDNyOwogICAgICAgICAgICB2YXIgU1QzciA9IC1pbnYgKiBUMmk7CiAgICAgICAgICAgIHZhciBTVDNpID0gLWludiAqIFQycjsKCiAgICAgICAgICAgIHZhciBTRkFyID0gU1QwciArIFNUMnI7CiAgICAgICAgICAgIHZhciBTRkFpID0gU1QwaSArIFNUMmk7CgogICAgICAgICAgICB2YXIgU0ZCciA9IFNUMXIgKyBTVDNpOwogICAgICAgICAgICB2YXIgU0ZCaSA9IFNUMWkgLSBTVDNyOwoKICAgICAgICAgICAgdmFyIFNBID0gb3V0T2ZmICsgcXVhcnRlckxlbiAtIGk7CiAgICAgICAgICAgIHZhciBTQiA9IG91dE9mZiArIGhhbGZMZW4gLSBpOwoKICAgICAgICAgICAgb3V0W1NBXSA9IFNGQXI7CiAgICAgICAgICAgIG91dFtTQSArIDFdID0gU0ZBaTsKICAgICAgICAgICAgb3V0W1NCXSA9IFNGQnI7CiAgICAgICAgICAgIG91dFtTQiArIDFdID0gU0ZCaTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gcmFkaXgtMiBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49NAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTIgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IG9kZFIgPSBkYXRhW29mZiArIHN0ZXBdOwoKICAgICAgY29uc3QgbGVmdFIgPSBldmVuUiArIG9kZFI7CiAgICAgIGNvbnN0IHJpZ2h0UiA9IGV2ZW5SIC0gb2RkUjsKCiAgICAgIG91dFtvdXRPZmZdID0gbGVmdFI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IHJpZ2h0UjsKICAgICAgb3V0W291dE9mZiArIDNdID0gMDsKICAgIH07CgogICAgLy8gcmFkaXgtNAogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49OAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTQob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwogICAgICBjb25zdCBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcCAqIDI7CiAgICAgIGNvbnN0IHN0ZXAzID0gc3RlcCAqIDM7CgogICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgQXIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IEJyID0gZGF0YVtvZmYgKyBzdGVwXTsKICAgICAgY29uc3QgQ3IgPSBkYXRhW29mZiArIHN0ZXAyXTsKICAgICAgY29uc3QgRHIgPSBkYXRhW29mZiArIHN0ZXAzXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwoKICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKCiAgICAgIGNvbnN0IEZCciA9IFQxcjsKICAgICAgY29uc3QgRkJpID0gLVQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKCiAgICAgIGNvbnN0IEZEciA9IFQxcjsKICAgICAgY29uc3QgRkRpID0gVDNyOwoKICAgICAgb3V0W291dE9mZl0gPSBGQXI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IEZCcjsKICAgICAgb3V0W291dE9mZiArIDNdID0gRkJpOwogICAgICBvdXRbb3V0T2ZmICsgNF0gPSBGQ3I7CiAgICAgIG91dFtvdXRPZmYgKyA1XSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICB2YXIgRkZUJDEgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmZ0KTsKCiAgICBjb25zdCBCVUZGRVJFRF9CTE9DS19TSVpFID0gMjA0ODsKICAgIGZ1bmN0aW9uIGdlbkhhbm5XaW5kb3cobGVuZ3RoKSB7CiAgICAgICAgbGV0IHdpbiA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdpbltpXSA9IDAuNSAqICgxIC0gTWF0aC5jb3MoMiAqIE1hdGguUEkgKiBpIC8gbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3aW47CiAgICB9CiAgICBjbGFzcyBQaGFzZVZvY29kZXJQcm9jZXNzb3IgZXh0ZW5kcyBPTEFQcm9jZXNzb3IgewogICAgICAgIGZmdFNpemU7CiAgICAgICAgdGltZUN1cnNvcjsKICAgICAgICBoYW5uV2luZG93OwogICAgICAgIGZmdDsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlcjsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ7CiAgICAgICAgdGltZUNvbXBsZXhCdWZmZXI7CiAgICAgICAgbWFnbml0dWRlczsKICAgICAgICBwZWFrSW5kZXhlczsKICAgICAgICBuYlBlYWtzOwogICAgICAgIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaXRjaEZhY3RvcicsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLjAKICAgICAgICAgICAgICAgIH1dOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMucHJvY2Vzc29yT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogQlVGRkVSRURfQkxPQ0tfU0laRSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMuZmZ0U2l6ZSA9IHRoaXMuYmxvY2tTaXplOwogICAgICAgICAgICB0aGlzLnRpbWVDdXJzb3IgPSAwOwogICAgICAgICAgICB0aGlzLmhhbm5XaW5kb3cgPSBnZW5IYW5uV2luZG93KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgLy8gcHJlcGFyZSBGRlQgYW5kIHByZS1hbGxvY2F0ZSBidWZmZXJzCiAgICAgICAgICAgIHRoaXMuZmZ0ID0gbmV3IEZGVCQxKHRoaXMuZmZ0U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy50aW1lQ29tcGxleEJ1ZmZlciA9IHRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICAgICAgICB0aGlzLm1hZ25pdHVkZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZSAvIDIgKyAxKTsKICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlcyA9IG5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLm5iUGVha3MgPSAwOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzT0xBKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIGNvbnN0IHBpdGNoRmFjdG9yID0gcGFyYW1ldGVycy5waXRjaEZhY3RvcltwYXJhbWV0ZXJzLnBpdGNoRmFjdG9yLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dHNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhhbm5XaW5kb3coaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlciwgaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQZWFrcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRQZWFrcyhwaXRjaEZhY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCBvdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIYW5uV2luZG93KG91dHB1dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lQ3Vyc29yICs9IHRoaXMuaG9wU2l6ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGFwcGx5SGFubldpbmRvdyhpbnB1dCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGlucHV0W2ldICo9IHRoaXMuaGFubldpbmRvd1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb21wdXRlTWFnbml0dWRlcygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdGhpcy5tYWduaXR1ZGVzLmxlbmd0aDsgaSsrLCBqICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2pdOwogICAgICAgICAgICAgICAgY29uc3QgaW1hZyA9IHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbaiArIDFdOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGVzW2ldID0gcmVhbCAqKiAyICsgaW1hZyAqKiAyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmRQZWFrcygpIHsKICAgICAgICAgICAgdGhpcy5uYlBlYWtzID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGVuZCA9IHRoaXMubWFnbml0dWRlcy5sZW5ndGggLSAyOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pdHVkZXNbaSAtIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSAtIDJdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDJdID49IG1hZykgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3MrK10gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0UGVha3MocGl0Y2hGYWN0b3IpIHsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iUGVha3M7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGVha0luZGV4ID0gdGhpcy5wZWFrSW5kZXhlc1tpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlYWtJbmRleFNoaWZ0ZWQgPSBNYXRoLnJvdW5kKHBlYWtJbmRleCAqIHBpdGNoRmFjdG9yKTsKICAgICAgICAgICAgICAgIGlmIChwZWFrSW5kZXhTaGlmdGVkID4gdGhpcy5tYWduaXR1ZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoaSA+IDApID8gcGVha0luZGV4IC0gTWF0aC5mbG9vcigocGVha0luZGV4IC0gdGhpcy5wZWFrSW5kZXhlc1tpIC0gMV0pIC8gMikgOiAwOwogICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKGkgPCB0aGlzLm5iUGVha3MgLSAxKSA/IHBlYWtJbmRleCArIE1hdGguY2VpbCgodGhpcy5wZWFrSW5kZXhlc1tpICsgMV0gLSBwZWFrSW5kZXgpIC8gMikgOiB0aGlzLmZmdFNpemU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJbmRleCAtIHBlYWtJbmRleDsgaiA8IGVuZEluZGV4IC0gcGVha0luZGV4OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5JbmRleCA9IHBlYWtJbmRleCArIGo7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluSW5kZXhTaGlmdGVkID0gcGVha0luZGV4U2hpZnRlZCArIGo7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbkluZGV4U2hpZnRlZCA+PSB0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWVnYURlbHRhID0gMiAqIE1hdGguUEkgKiAoYmluSW5kZXhTaGlmdGVkIC0gYmluSW5kZXgpIC8gdGhpcy5mZnRTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoYXNlU2hpZnRSZWFsID0gTWF0aC5jb3Mob21lZ2FEZWx0YSAqIHRoaXMudGltZUN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VTaGlmdEltYWcgPSBNYXRoLnNpbihvbWVnYURlbHRhICogdGhpcy50aW1lQ3Vyc29yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFJlYWwgPSBiaW5JbmRleCAqIDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbWFnID0gaW5kZXhSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2luZGV4UmVhbF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbWFnID0gdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltpbmRleEltYWddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZFJlYWwgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0UmVhbCAtIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRJbWFnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZEltYWcgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0SW1hZyArIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRSZWFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZFJlYWwgPSBiaW5JbmRleFNoaWZ0ZWQgKiAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZEltYWcgPSBpbmRleFNoaWZ0ZWRSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtpbmRleFNoaWZ0ZWRSZWFsXSArPSB2YWx1ZVNoaWZ0ZWRSZWFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2luZGV4U2hpZnRlZEltYWddICs9IHZhbHVlU2hpZnRlZEltYWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBAdHMtaWdub3JlCiAgICByZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2RlciIsIFBoYXNlVm9jb2RlclByb2Nlc3Nvcik7CiAgICBjb25zb2xlLmxvZygiUGhhc2VWb2NvZGVyUHJvY2Vzc29yIHJlZ2lzdGVyZWQiKTsKCiAgICBleHBvcnRzLlBoYXNlVm9jb2RlclByb2Nlc3NvciA9IFBoYXNlVm9jb2RlclByb2Nlc3NvcjsKCiAgICByZXR1cm4gZXhwb3J0czsKCn0pKHt9KTsK";var TP=(e=>(e.HTML="HTML",e.Streaming="Streaming",e.Buffer="Buffer",e))(TP||{});let lH=class{constructor(t){W(this,"context");W(this,"globalGainNode");W(this,"listener");W(this,"prevVolume",1);W(this,"finalizationRegistry");W(this,"createOscillator",({frequency:t,type:n,periodicWave:r})=>{const i=this.context.createOscillator();return i.type=n||"sine",i.setPeriodicWave(r),i.frequency.value=t,i.connect(this.globalGainNode),i});this.context=t||new Y9,this.listener=this.context.listener,this.globalGainNode=this.context.createGain(),this.globalGainNode.connect(this.context.destination),this.finalizationRegistry=new FinalizationRegistry(n=>{n.cleanup()})}async loadWorklets(){this.context.audioWorklet?await this.createWorkletNode("phase-vocoder",cH):console.warn("AudioWorklet not supported")}async createWorkletNode(t,n){if(!this.context.audioWorklet)throw new Error("AudioWorklet not supported");try{return new bA(this.context,t)}catch(r){console.error(r),console.log("Loading worklet from url",n);try{await this.context.audioWorklet.addModule(n)}catch(i){throw console.error(i),new Error(`Could not load worklet from url ${n}`)}return new bA(this.context,t)}}async createSound(t,n="Buffer"){if(t instanceof AudioBuffer)return Promise.resolve(new zh("",t,this.context,this.globalGainNode,"Buffer"));const r=t;if(n==="HTML"){const i=new Audio;return i.src=r,i.crossOrigin="anonymous",new zh(r,void 0,this.context,this.globalGainNode,"HTML")}return EP.getAudioBuffer(r,this.context).then(i=>new zh(r,i,this.context,this.globalGainNode,n))}async createGroup(t){const n=new wA;return t.forEach(r=>n.addSound(r)),n}async createGroupFromUrls(t){const n=new wA;return(await Promise.all(t.map(r=>this.createSound(r)))).forEach(r=>n.addSound(r)),n}async createStream(t){return await aH(t,this.context),new zh(t,void 0,this.context,this.globalGainNode,"Streaming")}createBiquadFilter({type:t,frequency:n,gain:r,Q:i}){const s=this.context.createBiquadFilter();return s.type=t||"lowpass",s.frequency.value=n||350,s.gain.value=r||0,s.Q.value=i||1,s}createPanner({coneInnerAngle:t,coneOuterAngle:n,coneOuterGain:r,distanceModel:i,maxDistance:s,channelCount:o,channelCountMode:a,channelInterpretation:c,panningModel:l,refDistance:u,rolloffFactor:d,positionX:f,positionY:h,positionZ:p,orientationX:m,orientationY:y,orientationZ:g}){const v=this.context.createPanner();return v.coneInnerAngle=t||360,v.coneOuterAngle=n||360,v.coneOuterGain=r||0,v.distanceModel=i||"inverse",v.maxDistance=s||1e4,v.channelCount=o||2,v.channelCountMode=a||"clamped-max",v.channelInterpretation=c||"speakers",v.panningModel=l||"HRTF",v.refDistance=u||1,v.rolloffFactor=d||1,v.positionX.value=f||0,v.positionY.value=h||0,v.positionZ.value=p||0,v.orientationX.value=m||0,v.orientationY.value=y||0,v.orientationZ.value=g||0,v}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}setGlobalVolume(t){this.globalGainNode.gain.value=t}get volume(){return this.globalGainNode.gain.value}set volume(t){if(this.muted){this.prevVolume=t;return}this.setGlobalVolume(t)}mute(){this.muted||(this.prevVolume=this.globalGainNode.gain.value,this.setGlobalVolume(0))}unmute(){this.muted&&this.setGlobalVolume(this.prevVolume)}get muted(){return this.globalGainNode.gain.value===0}set muted(t){t!==this.muted&&(t?this.mute():this.unmute())}getMicrophoneStream(){return new Promise((t,n)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{const i=new fH(this.context);i.play(),t(i)}).catch(r=>{n(r)})})}get listenerOrientation(){return{forward:[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value],up:[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}}set listenerOrientation(t){const{forward:n,up:r}=t,[i,s,o]=n,[a,c,l]=r;this.listener.forwardX.setValueAtTime(i,this.context.currentTime),this.listener.forwardY.setValueAtTime(s,this.context.currentTime),this.listener.forwardZ.setValueAtTime(o,this.context.currentTime),this.listener.upX.setValueAtTime(a,this.context.currentTime),this.listener.upY.setValueAtTime(c,this.context.currentTime),this.listener.upZ.setValueAtTime(l,this.context.currentTime)}get listenerUpOrientation(){return[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}set listenerUpOrientation(t){const[n,r,i]=t;this.listener.upX.setValueAtTime(n,this.context.currentTime),this.listener.upY.setValueAtTime(r,this.context.currentTime),this.listener.upZ.setValueAtTime(i,this.context.currentTime)}get listenerForwardOrientation(){return[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value]}set listenerForwardOrientation(t){const[n,r,i]=t;this.listener.forwardX.setValueAtTime(n,this.context.currentTime),this.listener.forwardY.setValueAtTime(r,this.context.currentTime),this.listener.forwardZ.setValueAtTime(i,this.context.currentTime)}get listenerPosition(){return[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}set listenerPosition(t){const[n,r,i]=t;this.listener.positionX.setValueAtTime(n,this.context.currentTime),this.listener.positionY.setValueAtTime(r,this.context.currentTime),this.listener.positionZ.setValueAtTime(i,this.context.currentTime)}},zg=class{constructor(){W(this,"filters",[])}addFilter(t){this.filters.push(t)}removeFilter(t){this.filters=this.filters.filter(n=>n!==t)}applyFilters(t){return this.filters.reduce((n,r)=>(n.connect(r),r),t),this.filters.length>0?this.filters[this.filters.length-1]:t}},zh=class extends zg{constructor(n,r,i,s,o="Buffer"){super();W(this,"buffer");W(this,"context");W(this,"playbacks",[]);W(this,"globalGainNode");W(this,"_position",[0,0,0]);W(this,"_threeDOptions",{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",panningModel:"HRTF",refDistance:1,rolloffFactor:1,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0});W(this,"loopCount",0);W(this,"_playbackRate",1);W(this,"_volume",1);this.url=n,this.type=o,this.buffer=r,this.context=i,this.globalGainNode=s,this._position=[0,0,0]}preplay(){let n;if(this.buffer)n=this.context.createBufferSource(),n.buffer=this.buffer;else{const s=new Audio;s.crossOrigin="anonymous",s.src=this.url,s.preload="auto",n=this.context.createMediaElementSource(s)}const r=this.context.createGain();r.connect(this.globalGainNode);const i=new uH(n,r,this.context,this.loopCount);return i.volume=this.volume,i.playbackRate=this.playbackRate,this.filters.forEach(s=>i.addFilter(s)),i.threeDOptions=this.threeDOptions,i.position=this.position,this.playbacks.push(i),[i]}play(){const n=this.preplay();return n.forEach(r=>r.play()),n}stop(){this.playbacks.forEach(n=>n.stop())}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}seek(n){this.playbacks.forEach(r=>r.seek(n))}get duration(){var n;return((n=this.buffer)==null?void 0:n.duration)||0}set position(n){this._threeDOptions.positionX=n[0],this._threeDOptions.positionY=n[1],this._threeDOptions.positionZ=n[2],this.playbacks.forEach(r=>r.position=n)}get position(){return[this._threeDOptions.positionX,this._threeDOptions.positionY,this._threeDOptions.positionZ]}get threeDOptions(){return this._threeDOptions}set threeDOptions(n){this._threeDOptions={...this._threeDOptions,...n},this.playbacks.forEach(r=>r.threeDOptions=this._threeDOptions)}loop(n){return n===void 0?this.loopCount:(this.loopCount=n,this.playbacks.forEach(r=>r.sourceLoop=!0),this.loopCount)}addFilter(n){super.addFilter(n),this.playbacks.forEach(r=>r.addFilter(n))}removeFilter(n){super.removeFilter(n),this.playbacks.forEach(r=>r.removeFilter(n))}get volume(){return this._volume}set volume(n){this._volume=n,this.playbacks.forEach(r=>r.volume=n)}isPlaying(){return this.playbacks.some(n=>n.isPlaying())}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.playbacks.forEach(r=>r.playbackRate=n)}},uH=class extends zg{constructor(n,r,i,s=0){super();W(this,"context");W(this,"source");W(this,"gainNode");W(this,"panner");W(this,"loopCount",0);W(this,"currentLoop",0);W(this,"buffer");W(this,"playing",!1);this.loopCount=s,this.source=n,"buffer"in n&&n.buffer&&(this.buffer=n.buffer),"mediaElement"in n&&n.mediaElement?n.mediaElement.onended=this.handleLoop.bind(this):"onended"in n&&(n.onended=this.handleLoop.bind(this)),this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner),this.panner.connect(this.gainNode),this.refreshFilters()}get duration(){if(!this.buffer)throw new Error("Cannot get duration of a sound that has been cleaned up");return this.buffer.duration}get playbackRate(){if(!this.source)throw new Error("Cannot get playback rate of a sound that has been cleaned up");if("playbackRate"in this.source)return this.source.playbackRate.value;if("mediaElement"in this.source&&this.source.mediaElement)return this.source.mediaElement.playbackRate;throw new Error("Unsupported source type")}set playbackRate(n){if(!this.source)throw new Error("Cannot set playback rate of a sound that has been cleaned up");"playbackRate"in this.source&&(this.source.playbackRate.value=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.playbackRate=n)}handleLoop(){this.buffer?(this.source=this.context.createBufferSource(),this.source.buffer=this.buffer):this.seek(0),this.loopCount==="infinite"||this.currentLoop<this.loopCount?(this.currentLoop++,this.playing&&this.play()):this.playing=!1}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.play():"start"in this.source&&this.source.start&&this.source.start(),this.playing=!0,[this]}get threeDOptions(){if(!this.panner)throw new Error("Cannot get 3D options of a sound that has been cleaned up");return{coneInnerAngle:this.panner.coneInnerAngle,coneOuterAngle:this.panner.coneOuterAngle,coneOuterGain:this.panner.coneOuterGain,distanceModel:this.panner.distanceModel,maxDistance:this.panner.maxDistance,channelCount:this.panner.channelCount,channelCountMode:this.panner.channelCountMode,channelInterpretation:this.panner.channelInterpretation,panningModel:this.panner.panningModel,refDistance:this.panner.refDistance,rolloffFactor:this.panner.rolloffFactor,positionX:this.panner.positionX.value,positionY:this.panner.positionY.value,positionZ:this.panner.positionZ.value,orientationX:this.panner.orientationX.value,orientationY:this.panner.orientationY.value,orientationZ:this.panner.orientationZ.value}}set threeDOptions(n){if(!this.panner)throw new Error("Cannot set 3D options of a sound that has been cleaned up");this.panner.coneInnerAngle=n.coneInnerAngle||this.panner.coneInnerAngle,this.panner.coneOuterAngle=n.coneOuterAngle||this.panner.coneOuterAngle,this.panner.coneOuterGain=n.coneOuterGain||this.panner.coneOuterGain,this.panner.distanceModel=n.distanceModel||this.panner.distanceModel,this.panner.maxDistance=n.maxDistance||this.panner.maxDistance,this.panner.channelCount=n.channelCount||this.panner.channelCount,this.panner.channelCountMode=n.channelCountMode||this.panner.channelCountMode,this.panner.channelInterpretation=n.channelInterpretation||this.panner.channelInterpretation,this.panner.panningModel=n.panningModel||this.panner.panningModel,this.panner.refDistance=n.refDistance||this.panner.refDistance,this.panner.rolloffFactor=n.rolloffFactor||this.panner.rolloffFactor,this.panner.positionX.value=n.positionX||this.panner.positionX.value,this.panner.positionY.value=n.positionY||this.panner.positionY.value,this.panner.positionZ.value=n.positionZ||this.panner.positionZ.value,this.panner.orientationX.value=n.orientationX||this.panner.orientationX.value,this.panner.orientationY.value=n.orientationY||this.panner.orientationY.value,this.panner.orientationZ.value=n.orientationZ||this.panner.orientationZ.value}seek(n){if(!this.source||!this.buffer||!this.gainNode||!this.panner)throw new Error("Cannot seek a sound that has been cleaned up");const r=this.isPlaying();this.stop(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.refreshFilters(),this.source.connect(this.panner).connect(this.gainNode),r&&this.source.start(0,n)}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}set sourceLoop(n){if(!this.source)throw new Error("Cannot set loop on a sound that has been cleaned up");"loop"in this.source&&(this.source.loop=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.loop=n)}fadeIn(n,r="linear"){return new Promise(i=>{if(!this.gainNode)throw new Error("Cannot fade in a sound that has been cleaned up");this.gainNode.gain.value;const s=1;switch(this.gainNode.gain.value=0,r){case"exponential":this.gainNode.gain.setValueAtTime(.01,this.context.currentTime),this.gainNode.gain.exponentialRampToValueAtTime(s,this.context.currentTime+n);break;case"linear":this.gainNode.gain.linearRampToValueAtTime(s,this.context.currentTime+n);break}setTimeout(()=>{if(!this.gainNode)throw new Error("Cannot fade in a sound that has been cleaned up");this.gainNode.gain.value=s,i()},n*1e3)})}fadeOut(n,r="linear"){return new Promise(i=>{if(!this.gainNode)throw new Error("Cannot fade out a sound that has been cleaned up");switch(this.gainNode.gain.value,r){case"exponential":this.gainNode.gain.exponentialRampToValueAtTime(.01,this.context.currentTime+n);break;case"linear":this.gainNode.gain.linearRampToValueAtTime(0,this.context.currentTime+n)}setTimeout(()=>i(),n*1e3)})}isPlaying(){if(!this.source)throw new Error("Cannot check if a sound is playing that has been cleaned up");return this.playing}cleanup(){this.source&&(this.source.disconnect(),this.source=void 0),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=void 0),this.filters.forEach(n=>{n&&n.disconnect()}),this.filters=[]}loop(n){var r;if(!this.source)throw new Error("Cannot loop a sound that has been cleaned up");if(this.source instanceof AudioBufferSourceNode)return n===void 0?this.source.loop===!0?"infinite":0:(this.source.loop=!0,this.source.loopEnd=((r=this.source.buffer)==null?void 0:r.duration)||0,this.source.loopStart=0,this.source.loop===!0?"infinite":0);if("mediaElement"in this.source&&this.source.mediaElement){const i=this.source.mediaElement;return n===void 0||(i.loop=!0),i.loop===!0?"infinite":0}throw new Error("Unsupported source type")}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.isPlaying()&&("stop"in this.source&&this.source.stop(),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.pause(),this.source.mediaElement.currentTime=0),this.playing=!1)}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");"suspend"in this.source.context&&this.source.context.suspend()}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");"resume"in this.source.context&&this.source.context.resume()}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,s]=n;this.panner.positionX.setValueAtTime(r,this.context.currentTime),this.panner.positionY.setValueAtTime(i,this.context.currentTime),this.panner.positionZ.setValueAtTime(s,this.context.currentTime)}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}},wA=class{constructor(){W(this,"sounds",[]);W(this,"_position",[0,0,0]);W(this,"loopCount",0)}get duration(){return this.sounds.map(t=>t.duration).reduce((t,n)=>Math.max(t,n),0)}seek(t){this.sounds.forEach(n=>n.seek&&n.seek(t))}addSound(t){this.sounds.push(t)}preplay(){return this.sounds.reduce((t,n)=>(n.loop&&n.loop(this.loopCount),t.concat(n.preplay())),[])}play(){return this.preplay().map(t=>(t.play(),t))}isPlaying(){return this.sounds.some(t=>t.isPlaying())}stop(){this.sounds.forEach(t=>t.stop())}pause(){this.sounds.forEach(t=>t.pause())}resume(){this.sounds.forEach(t=>t.resume())}loop(t){return t===void 0?this.loopCount:(this.loopCount=t,this.sounds.forEach(n=>n.loop&&n.loop(t)),this.loopCount)}addFilter(t){this.sounds.forEach(n=>n.addFilter(t))}removeFilter(t){this.sounds.forEach(n=>n.removeFilter(t))}set position(t){this._position=t,this.sounds.forEach(n=>n.position=this._position)}get position(){return this._position}get volume(){return this.sounds.map(t=>t.volume).reduce((t,n)=>t+n,0)/this.sounds.length}set volume(t){this.sounds.forEach(n=>n.volume=t)}get playbackRate(){return this.sounds.length===0?1:this.sounds[0].playbackRate}set playbackRate(t){this.sounds.forEach(n=>n.playbackRate=t)}};class dH extends zg{constructor(n,r,i,s=0){super();W(this,"context");W(this,"source");W(this,"gainNode");W(this,"panner");this.source=n,this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner).connect(this.gainNode),this.refreshFilters()}get duration(){return 0}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return[this]}isPlaying(){return!!this.source}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.stop())}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!1)}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!0)}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,s]=n;this.panner.positionX.value=r,this.panner.positionY.value=i,this.panner.positionZ.value=s}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.source||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.source;this.source.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}get playbackRate(){return 1}set playbackRate(n){}}class fH extends zg{constructor(n){super();W(this,"context");W(this,"_position",[0,0,0]);W(this,"loopCount",0);W(this,"prevVolume",1);W(this,"microphoneGainNode");W(this,"streamPlayback");W(this,"stream");W(this,"streamSource");this.context=n,this.microphoneGainNode=this.context.createGain()}play(){return this.stream||navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{this.stream=n,this.streamSource=this.context.createMediaStreamSource(this.stream),this.streamPlayback=new dH(this.streamSource,this.microphoneGainNode,this.context),this.streamPlayback.play()}).catch(n=>{console.error("Error initializing microphone stream:",n)}),this.streamPlayback?[this.streamPlayback]:[]}get duration(){return 0}seek(n){}isPlaying(){return!!this.streamPlayback}stop(){this.streamPlayback&&(this.streamPlayback.stop(),this.streamPlayback=void 0)}pause(){this.streamPlayback&&this.streamPlayback.pause()}resume(){this.streamPlayback&&this.streamPlayback.resume()}addFilter(n){this.streamPlayback&&this.streamPlayback.addFilter(n)}removeFilter(n){this.streamPlayback&&this.streamPlayback.removeFilter(n)}get volume(){return this.streamPlayback?this.streamPlayback.volume:0}set volume(n){this.streamPlayback&&(this.streamPlayback.volume=n)}get position(){return[0,0,0]}set position(n){}loop(n){return 0}get playbackRate(){return 1}set playbackRate(n){}}const hH="https://mongoose.world:9080/?url=";class pH extends Wo{constructor(){super(...arguments);W(this,"packageName","Client.Media");W(this,"sounds",{});W(this,"defaultUrl","")}handleDefault(n){this.defaultUrl=n}async handleLoad(n){const r=(n.url||this.defaultUrl)+n.name,i=n.url+n.name;if(!this.sounds[i]){let o=await this.client.cacophony.createSound(r);o.key=i,this.sounds[i]=o}}mediaUrl(n){var i;let r=(n.url||this.defaultUrl)+n.name;return((i=n.type)==null?void 0:i.toLowerCase())==="music"&&(r=hH+encodeURIComponent(r)),r}async handlePlay(n){let r=this.mediaUrl(n);n.key=n.key||r;let i=this.sounds[n.key];if((!i||i.url!==r)&&(n.type==="music"?i=await this.client.cacophony.createSound(r,TP.HTML):i=await this.client.cacophony.createSound(r)),n.volume!==void 0&&(i.volume=n.volume/100),n.loops!==void 0&&i.loop&&i.loop(n.loops===-1?"infinite":n.loops),n.start&&i.seek(n.start),n.end&&setTimeout(()=>{i.stop()},n.end),n.is3d&&(i.threeDOptions={coneInnerAngle:360,coneOuterAngle:0,panningModel:"HRTF",distanceModel:"inverse"},i.position=[n.position[0],n.position[1],n.position[2]]),n.priority){for(let s in this.sounds){const o=this.sounds[s];o.priority&&o.priority<n.priority&&o.stop()}i.priority=n.priority}if(!i.isPlaying()){const s=i.play()[0];n.fadein&&s.fadeIn(n.fadein),n.fadeout&&s.fadeOut(n.fadeout)}this.sounds[n.key]=i,i.key=n.key}handleStop(n){n.name&&this.soundsByName(n.name).forEach(r=>r.stop()),n.type&&this.soundsByType(n.type).forEach(r=>r.stop()),n.tag&&this.soundsByTag(n.tag).forEach(r=>r.stop()),n.key&&this.soundsByKey(n.key).forEach(r=>r.stop()),!n.name&&!n.type&&!n.tag&&!n.key&&this.allSounds.forEach(r=>r.stop())}handleListenerPosition(n){var r;(r=n.position)!=null&&r.length&&(this.client.cacophony.listenerPosition=n.position)}handleListenerOrientation(n){n.up&&n.up.length&&(this.client.cacophony.listenerUpOrientation=n.up),n.forward&&n.forward.length&&(this.client.cacophony.listenerForwardOrientation=n.forward)}soundsByName(n){return Object.values(this.sounds).filter(r=>r.url&&r.url[r.url.length-1].endsWith(n))}soundsByKey(n){return Object.values(this.sounds).filter(r=>r.key===n)}soundsByTag(n){return Object.values(this.sounds).filter(r=>r.tag===n)}soundsByType(n){return Object.values(this.sounds).filter(r=>r.mediaType===n)}get allSounds(){return Object.values(this.sounds)}stopAllSounds(){this.allSounds.forEach(n=>n.stop()),this.sounds={}}}class mH extends Wo{constructor(){super(...arguments);W(this,"packageName","Client.Speech")}handleSpeak(n){const r=new SpeechSynthesisUtterance(n.text);r.rate=n.rate,r.pitch=n.pitch,r.volume=n.volume,speechSynthesis.speak(r)}}class gH extends Wo{constructor(){super(...arguments);W(this,"packageName","Comm.Channel");W(this,"channels",[])}handleList(n){this.channels=n}sendList(){this.sendData("List")}handleText(n){n.channel==="say_to_you"&&(document.hasFocus()||this.client.sendNotification(`Message from ${n.talker}`,`${n.text}`))}}class vH extends Wo{constructor(){super(...arguments);W(this,"packageName","Comm.LiveKit")}handleroom_token(n){this.client.worldData.liveKitTokens.push(n.token),this.client.emit("livekitToken",n.token)}handleroom_leave(n){this.client.worldData.liveKitTokens=this.client.worldData.liveKitTokens.filter(r=>r!==n.token),this.client.emit("livekitLeave",n.token)}}class yH extends Wo{constructor(){super(...arguments);W(this,"packageName","Core")}sendHello(){this.sendData("Hello",{client:"Mongoose Client",version:"0.1"})}}class CH extends Wo{constructor(){super(...arguments);W(this,"packageName","Core.Supports")}sendSet(){const n=Object.values(this.client.gmcpHandlers).map(r=>r.packageName+" "+r.packageVersion.toString());this.sendData("Set",n)}}const ol=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,_P=new Set,wC=typeof process=="object"&&process?process:{},RP=(e,t,n,r)=>{typeof wC.emitWarning=="function"?wC.emitWarning(e,t,n,r):console.error(`[${n}] ${t}: ${e}`)};let Gm=globalThis.AbortController,kA=globalThis.AbortSignal;var YT;if(typeof Gm>"u"){kA=class{constructor(){W(this,"onabort");W(this,"_onabort",[]);W(this,"reason");W(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},Gm=class{constructor(){W(this,"signal",new kA);t()}abort(r){var i,s;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const o of this.signal._onabort)o(r);(s=(i=this.signal).onabort)==null||s.call(i,r)}}};let e=((YT=wC.env)==null?void 0:YT.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const t=()=>{e&&(e=!1,RP("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}const IH=e=>!_P.has(e),ea=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),xP=e=>ea(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?Dp:null:null;class Dp extends Array{constructor(t){super(t),this.fill(0)}}var nu;const lc=class lc{constructor(t,n){W(this,"heap");W(this,"length");if(!M(lc,nu))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(t),this.length=0}static create(t){const n=xP(t);if(!n)return[];Ee(lc,nu,!0);const r=new lc(t,n);return Ee(lc,nu,!1),r}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}};nu=new WeakMap,Oe(lc,nu,!1);let kC=lc;var bi,Or,wi,ki,ru,sn,Ai,tn,Tt,Pe,tr,Lr,$n,In,Ei,Sn,Ti,_i,Br,Ri,fa,nr,$f,EC,yc,Ys,Zf,Fr,vg,NP,Cc,iu,zf,os,ta,as,na,Xf,TC,su,Op,ou,Lp,dt,Et,Kf,_C,Ic,Rd;const Lw=class Lw{constructor(t){Oe(this,$f);Oe(this,vg);Oe(this,os);Oe(this,as);Oe(this,Xf);Oe(this,su);Oe(this,ou);Oe(this,dt);Oe(this,Kf);Oe(this,Ic);Oe(this,bi,void 0);Oe(this,Or,void 0);Oe(this,wi,void 0);Oe(this,ki,void 0);Oe(this,ru,void 0);W(this,"ttl");W(this,"ttlResolution");W(this,"ttlAutopurge");W(this,"updateAgeOnGet");W(this,"updateAgeOnHas");W(this,"allowStale");W(this,"noDisposeOnSet");W(this,"noUpdateTTL");W(this,"maxEntrySize");W(this,"sizeCalculation");W(this,"noDeleteOnFetchRejection");W(this,"noDeleteOnStaleGet");W(this,"allowStaleOnFetchAbort");W(this,"allowStaleOnFetchRejection");W(this,"ignoreFetchAbort");Oe(this,sn,void 0);Oe(this,Ai,void 0);Oe(this,tn,void 0);Oe(this,Tt,void 0);Oe(this,Pe,void 0);Oe(this,tr,void 0);Oe(this,Lr,void 0);Oe(this,$n,void 0);Oe(this,In,void 0);Oe(this,Ei,void 0);Oe(this,Sn,void 0);Oe(this,Ti,void 0);Oe(this,_i,void 0);Oe(this,Br,void 0);Oe(this,Ri,void 0);Oe(this,fa,void 0);Oe(this,nr,void 0);Oe(this,yc,()=>{});Oe(this,Ys,()=>{});Oe(this,Zf,()=>{});Oe(this,Fr,()=>!1);Oe(this,Cc,t=>{});Oe(this,iu,(t,n,r)=>{});Oe(this,zf,(t,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:f,maxSize:h=0,maxEntrySize:p=0,sizeCalculation:m,fetchMethod:y,noDeleteOnFetchRejection:g,noDeleteOnStaleGet:v,allowStaleOnFetchRejection:S,allowStaleOnFetchAbort:E,ignoreFetchAbort:k}=t;if(n!==0&&!ea(n))throw new TypeError("max option must be a nonnegative integer");const b=n?xP(n):Array;if(!b)throw new Error("invalid max value: "+n);if(Ee(this,bi,n),Ee(this,Or,h),this.maxEntrySize=p||M(this,Or),this.sizeCalculation=m,this.sizeCalculation){if(!M(this,Or)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(y!==void 0&&typeof y!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ee(this,ru,y),Ee(this,fa,!!y),Ee(this,tn,new Map),Ee(this,Tt,new Array(n).fill(void 0)),Ee(this,Pe,new Array(n).fill(void 0)),Ee(this,tr,new b(n)),Ee(this,Lr,new b(n)),Ee(this,$n,0),Ee(this,In,0),Ee(this,Ei,kC.create(n)),Ee(this,sn,0),Ee(this,Ai,0),typeof l=="function"&&Ee(this,wi,l),typeof u=="function"?(Ee(this,ki,u),Ee(this,Sn,[])):(Ee(this,ki,void 0),Ee(this,Sn,void 0)),Ee(this,Ri,!!M(this,wi)),Ee(this,nr,!!M(this,ki)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!f,this.noDeleteOnFetchRejection=!!g,this.allowStaleOnFetchRejection=!!S,this.allowStaleOnFetchAbort=!!E,this.ignoreFetchAbort=!!k,this.maxEntrySize!==0){if(M(this,Or)!==0&&!ea(M(this,Or)))throw new TypeError("maxSize must be a positive integer if specified");if(!ea(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ie(this,vg,NP).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!v,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=ea(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=r||0,this.ttl){if(!ea(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ie(this,$f,EC).call(this)}if(M(this,bi)===0&&this.ttl===0&&M(this,Or)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!M(this,bi)&&!M(this,Or)){const A="LRU_CACHE_UNBOUNDED";IH(A)&&(_P.add(A),RP("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",A,Lw))}}static unsafeExposeInternals(t){return{starts:M(t,_i),ttls:M(t,Br),sizes:M(t,Ti),keyMap:M(t,tn),keyList:M(t,Tt),valList:M(t,Pe),next:M(t,tr),prev:M(t,Lr),get head(){return M(t,$n)},get tail(){return M(t,In)},free:M(t,Ei),isBackgroundFetch:n=>{var r;return Ie(r=t,dt,Et).call(r,n)},backgroundFetch:(n,r,i,s)=>{var o;return Ie(o=t,ou,Lp).call(o,n,r,i,s)},moveToTail:n=>{var r;return Ie(r=t,Ic,Rd).call(r,n)},indexes:n=>{var r;return Ie(r=t,os,ta).call(r,n)},rindexes:n=>{var r;return Ie(r=t,as,na).call(r,n)},isStale:n=>{var r;return M(r=t,Fr).call(r,n)}}}get max(){return M(this,bi)}get maxSize(){return M(this,Or)}get calculatedSize(){return M(this,Ai)}get size(){return M(this,sn)}get fetchMethod(){return M(this,ru)}get dispose(){return M(this,wi)}get disposeAfter(){return M(this,ki)}getRemainingTTL(t){return M(this,tn).has(t)?1/0:0}*entries(){for(const t of Ie(this,os,ta).call(this))M(this,Pe)[t]!==void 0&&M(this,Tt)[t]!==void 0&&!Ie(this,dt,Et).call(this,M(this,Pe)[t])&&(yield[M(this,Tt)[t],M(this,Pe)[t]])}*rentries(){for(const t of Ie(this,as,na).call(this))M(this,Pe)[t]!==void 0&&M(this,Tt)[t]!==void 0&&!Ie(this,dt,Et).call(this,M(this,Pe)[t])&&(yield[M(this,Tt)[t],M(this,Pe)[t]])}*keys(){for(const t of Ie(this,os,ta).call(this)){const n=M(this,Tt)[t];n!==void 0&&!Ie(this,dt,Et).call(this,M(this,Pe)[t])&&(yield n)}}*rkeys(){for(const t of Ie(this,as,na).call(this)){const n=M(this,Tt)[t];n!==void 0&&!Ie(this,dt,Et).call(this,M(this,Pe)[t])&&(yield n)}}*values(){for(const t of Ie(this,os,ta).call(this))M(this,Pe)[t]!==void 0&&!Ie(this,dt,Et).call(this,M(this,Pe)[t])&&(yield M(this,Pe)[t])}*rvalues(){for(const t of Ie(this,as,na).call(this))M(this,Pe)[t]!==void 0&&!Ie(this,dt,Et).call(this,M(this,Pe)[t])&&(yield M(this,Pe)[t])}[Symbol.iterator](){return this.entries()}find(t,n={}){for(const r of Ie(this,os,ta).call(this)){const i=M(this,Pe)[r],s=Ie(this,dt,Et).call(this,i)?i.__staleWhileFetching:i;if(s!==void 0&&t(s,M(this,Tt)[r],this))return this.get(M(this,Tt)[r],n)}}forEach(t,n=this){for(const r of Ie(this,os,ta).call(this)){const i=M(this,Pe)[r],s=Ie(this,dt,Et).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&t.call(n,s,M(this,Tt)[r],this)}}rforEach(t,n=this){for(const r of Ie(this,as,na).call(this)){const i=M(this,Pe)[r],s=Ie(this,dt,Et).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&t.call(n,s,M(this,Tt)[r],this)}}purgeStale(){let t=!1;for(const n of Ie(this,as,na).call(this,{allowStale:!0}))M(this,Fr).call(this,n)&&(this.delete(M(this,Tt)[n]),t=!0);return t}info(t){const n=M(this,tn).get(t);if(n===void 0)return;const r=M(this,Pe)[n],i=Ie(this,dt,Et).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const s={value:i};if(M(this,Br)&&M(this,_i)){const o=M(this,Br)[n],a=M(this,_i)[n];if(o&&a){const c=o-(ol.now()-a);s.ttl=c,s.start=Date.now()}}return M(this,Ti)&&(s.size=M(this,Ti)[n]),s}dump(){const t=[];for(const n of Ie(this,os,ta).call(this,{allowStale:!0})){const r=M(this,Tt)[n],i=M(this,Pe)[n],s=Ie(this,dt,Et).call(this,i)?i.__staleWhileFetching:i;if(s===void 0||r===void 0)continue;const o={value:s};if(M(this,Br)&&M(this,_i)){o.ttl=M(this,Br)[n];const a=ol.now()-M(this,_i)[n];o.start=Math.floor(Date.now()-a)}M(this,Ti)&&(o.size=M(this,Ti)[n]),t.unshift([r,o])}return t}load(t){this.clear();for(const[n,r]of t){if(r.start){const i=Date.now()-r.start;r.start=ol.now()-i}this.set(n,r.value,r)}}set(t,n,r={}){var f,h,p,m,y;if(n===void 0)return this.delete(t),this;const{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const u=M(this,zf).call(this,t,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),this.delete(t),this;let d=M(this,sn)===0?void 0:M(this,tn).get(t);if(d===void 0)d=M(this,sn)===0?M(this,In):M(this,Ei).length!==0?M(this,Ei).pop():M(this,sn)===M(this,bi)?Ie(this,su,Op).call(this,!1):M(this,sn),M(this,Tt)[d]=t,M(this,Pe)[d]=n,M(this,tn).set(t,d),M(this,tr)[M(this,In)]=d,M(this,Lr)[d]=M(this,In),Ee(this,In,d),wh(this,sn)._++,M(this,iu).call(this,d,u,c),c&&(c.set="add"),l=!1;else{Ie(this,Ic,Rd).call(this,d);const g=M(this,Pe)[d];if(n!==g){if(M(this,fa)&&Ie(this,dt,Et).call(this,g)){g.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:v}=g;v!==void 0&&!o&&(M(this,Ri)&&((f=M(this,wi))==null||f.call(this,v,t,"set")),M(this,nr)&&((h=M(this,Sn))==null||h.push([v,t,"set"])))}else o||(M(this,Ri)&&((p=M(this,wi))==null||p.call(this,g,t,"set")),M(this,nr)&&((m=M(this,Sn))==null||m.push([g,t,"set"])));if(M(this,Cc).call(this,d),M(this,iu).call(this,d,u,c),M(this,Pe)[d]=n,c){c.set="replace";const v=g&&Ie(this,dt,Et).call(this,g)?g.__staleWhileFetching:g;v!==void 0&&(c.oldValue=v)}}else c&&(c.set="update")}if(i!==0&&!M(this,Br)&&Ie(this,$f,EC).call(this),M(this,Br)&&(l||M(this,Zf).call(this,d,i,s),c&&M(this,Ys).call(this,c,d)),!o&&M(this,nr)&&M(this,Sn)){const g=M(this,Sn);let v;for(;v=g==null?void 0:g.shift();)(y=M(this,ki))==null||y.call(this,...v)}return this}pop(){var t;try{for(;M(this,sn);){const n=M(this,Pe)[M(this,$n)];if(Ie(this,su,Op).call(this,!0),Ie(this,dt,Et).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(M(this,nr)&&M(this,Sn)){const n=M(this,Sn);let r;for(;r=n==null?void 0:n.shift();)(t=M(this,ki))==null||t.call(this,...r)}}}has(t,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,s=M(this,tn).get(t);if(s!==void 0){const o=M(this,Pe)[s];if(Ie(this,dt,Et).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(M(this,Fr).call(this,s))i&&(i.has="stale",M(this,Ys).call(this,i,s));else return r&&M(this,yc).call(this,s),i&&(i.has="hit",M(this,Ys).call(this,i,s)),!0}else i&&(i.has="miss");return!1}peek(t,n={}){const{allowStale:r=this.allowStale}=n,i=M(this,tn).get(t);if(i===void 0||!r&&M(this,Fr).call(this,i))return;const s=M(this,Pe)[i];return Ie(this,dt,Et).call(this,s)?s.__staleWhileFetching:s}async fetch(t,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:f=this.allowStaleOnFetchRejection,ignoreFetchAbort:h=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:m,forceRefresh:y=!1,status:g,signal:v}=n;if(!M(this,fa))return g&&(g.fetch="get"),this.get(t,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:g});const S={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:f,allowStaleOnFetchAbort:p,ignoreFetchAbort:h,status:g,signal:v};let E=M(this,tn).get(t);if(E===void 0){g&&(g.fetch="miss");const k=Ie(this,ou,Lp).call(this,t,E,S,m);return k.__returned=k}else{const k=M(this,Pe)[E];if(Ie(this,dt,Et).call(this,k)){const P=r&&k.__staleWhileFetching!==void 0;return g&&(g.fetch="inflight",P&&(g.returnedStale=!0)),P?k.__staleWhileFetching:k.__returned=k}const b=M(this,Fr).call(this,E);if(!y&&!b)return g&&(g.fetch="hit"),Ie(this,Ic,Rd).call(this,E),i&&M(this,yc).call(this,E),g&&M(this,Ys).call(this,g,E),k;const A=Ie(this,ou,Lp).call(this,t,E,S,m),x=A.__staleWhileFetching!==void 0&&r;return g&&(g.fetch=b?"stale":"refresh",x&&b&&(g.returnedStale=!0)),x?A.__staleWhileFetching:A.__returned=A}}get(t,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=n,a=M(this,tn).get(t);if(a!==void 0){const c=M(this,Pe)[a],l=Ie(this,dt,Et).call(this,c);return o&&M(this,Ys).call(this,o,a),M(this,Fr).call(this,a)?(o&&(o.get="stale"),l?(o&&r&&c.__staleWhileFetching!==void 0&&(o.returnedStale=!0),r?c.__staleWhileFetching:void 0):(s||this.delete(t),o&&r&&(o.returnedStale=!0),r?c:void 0)):(o&&(o.get="hit"),l?c.__staleWhileFetching:(Ie(this,Ic,Rd).call(this,a),i&&M(this,yc).call(this,a),c))}else o&&(o.get="miss")}delete(t){var r,i,s,o;let n=!1;if(M(this,sn)!==0){const a=M(this,tn).get(t);if(a!==void 0)if(n=!0,M(this,sn)===1)this.clear();else{M(this,Cc).call(this,a);const c=M(this,Pe)[a];if(Ie(this,dt,Et).call(this,c)?c.__abortController.abort(new Error("deleted")):(M(this,Ri)||M(this,nr))&&(M(this,Ri)&&((r=M(this,wi))==null||r.call(this,c,t,"delete")),M(this,nr)&&((i=M(this,Sn))==null||i.push([c,t,"delete"]))),M(this,tn).delete(t),M(this,Tt)[a]=void 0,M(this,Pe)[a]=void 0,a===M(this,In))Ee(this,In,M(this,Lr)[a]);else if(a===M(this,$n))Ee(this,$n,M(this,tr)[a]);else{const l=M(this,Lr)[a];M(this,tr)[l]=M(this,tr)[a];const u=M(this,tr)[a];M(this,Lr)[u]=M(this,Lr)[a]}wh(this,sn)._--,M(this,Ei).push(a)}}if(M(this,nr)&&((s=M(this,Sn))!=null&&s.length)){const a=M(this,Sn);let c;for(;c=a==null?void 0:a.shift();)(o=M(this,ki))==null||o.call(this,...c)}return n}clear(){var t,n,r;for(const i of Ie(this,as,na).call(this,{allowStale:!0})){const s=M(this,Pe)[i];if(Ie(this,dt,Et).call(this,s))s.__abortController.abort(new Error("deleted"));else{const o=M(this,Tt)[i];M(this,Ri)&&((t=M(this,wi))==null||t.call(this,s,o,"delete")),M(this,nr)&&((n=M(this,Sn))==null||n.push([s,o,"delete"]))}}if(M(this,tn).clear(),M(this,Pe).fill(void 0),M(this,Tt).fill(void 0),M(this,Br)&&M(this,_i)&&(M(this,Br).fill(0),M(this,_i).fill(0)),M(this,Ti)&&M(this,Ti).fill(0),Ee(this,$n,0),Ee(this,In,0),M(this,Ei).length=0,Ee(this,Ai,0),Ee(this,sn,0),M(this,nr)&&M(this,Sn)){const i=M(this,Sn);let s;for(;s=i==null?void 0:i.shift();)(r=M(this,ki))==null||r.call(this,...s)}}};bi=new WeakMap,Or=new WeakMap,wi=new WeakMap,ki=new WeakMap,ru=new WeakMap,sn=new WeakMap,Ai=new WeakMap,tn=new WeakMap,Tt=new WeakMap,Pe=new WeakMap,tr=new WeakMap,Lr=new WeakMap,$n=new WeakMap,In=new WeakMap,Ei=new WeakMap,Sn=new WeakMap,Ti=new WeakMap,_i=new WeakMap,Br=new WeakMap,Ri=new WeakMap,fa=new WeakMap,nr=new WeakMap,$f=new WeakSet,EC=function(){const t=new Dp(M(this,bi)),n=new Dp(M(this,bi));Ee(this,Br,t),Ee(this,_i,n),Ee(this,Zf,(s,o,a=ol.now())=>{if(n[s]=o!==0?a:0,t[s]=o,o!==0&&this.ttlAutopurge){const c=setTimeout(()=>{M(this,Fr).call(this,s)&&this.delete(M(this,Tt)[s])},o+1);c.unref&&c.unref()}}),Ee(this,yc,s=>{n[s]=t[s]!==0?ol.now():0}),Ee(this,Ys,(s,o)=>{if(t[o]){const a=t[o],c=n[o];if(!a||!c)return;s.ttl=a,s.start=c,s.now=r||i();const l=s.now-c;s.remainingTTL=a-l}});let r=0;const i=()=>{const s=ol.now();if(this.ttlResolution>0){r=s;const o=setTimeout(()=>r=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{const o=M(this,tn).get(s);if(o===void 0)return 0;const a=t[o],c=n[o];if(!a||!c)return 1/0;const l=(r||i())-c;return a-l},Ee(this,Fr,s=>{const o=n[s],a=t[s];return!!a&&!!o&&(r||i())-o>a})},yc=new WeakMap,Ys=new WeakMap,Zf=new WeakMap,Fr=new WeakMap,vg=new WeakSet,NP=function(){const t=new Dp(M(this,bi));Ee(this,Ai,0),Ee(this,Ti,t),Ee(this,Cc,n=>{Ee(this,Ai,M(this,Ai)-t[n]),t[n]=0}),Ee(this,zf,(n,r,i,s)=>{if(Ie(this,dt,Et).call(this,r))return 0;if(!ea(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(r,n),!ea(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),Ee(this,iu,(n,r,i)=>{if(t[n]=r,M(this,Or)){const s=M(this,Or)-t[n];for(;M(this,Ai)>s;)Ie(this,su,Op).call(this,!0)}Ee(this,Ai,M(this,Ai)+t[n]),i&&(i.entrySize=r,i.totalCalculatedSize=M(this,Ai))})},Cc=new WeakMap,iu=new WeakMap,zf=new WeakMap,os=new WeakSet,ta=function*({allowStale:t=this.allowStale}={}){if(M(this,sn))for(let n=M(this,In);!(!Ie(this,Xf,TC).call(this,n)||((t||!M(this,Fr).call(this,n))&&(yield n),n===M(this,$n)));)n=M(this,Lr)[n]},as=new WeakSet,na=function*({allowStale:t=this.allowStale}={}){if(M(this,sn))for(let n=M(this,$n);!(!Ie(this,Xf,TC).call(this,n)||((t||!M(this,Fr).call(this,n))&&(yield n),n===M(this,In)));)n=M(this,tr)[n]},Xf=new WeakSet,TC=function(t){return t!==void 0&&M(this,tn).get(M(this,Tt)[t])===t},su=new WeakSet,Op=function(t){var s,o;const n=M(this,$n),r=M(this,Tt)[n],i=M(this,Pe)[n];return M(this,fa)&&Ie(this,dt,Et).call(this,i)?i.__abortController.abort(new Error("evicted")):(M(this,Ri)||M(this,nr))&&(M(this,Ri)&&((s=M(this,wi))==null||s.call(this,i,r,"evict")),M(this,nr)&&((o=M(this,Sn))==null||o.push([i,r,"evict"]))),M(this,Cc).call(this,n),t&&(M(this,Tt)[n]=void 0,M(this,Pe)[n]=void 0,M(this,Ei).push(n)),M(this,sn)===1?(Ee(this,$n,Ee(this,In,0)),M(this,Ei).length=0):Ee(this,$n,M(this,tr)[n]),M(this,tn).delete(r),wh(this,sn)._--,n},ou=new WeakSet,Lp=function(t,n,r,i){const s=n===void 0?void 0:M(this,Pe)[n];if(Ie(this,dt,Et).call(this,s))return s;const o=new Gm,{signal:a}=r;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});const c={signal:o.signal,options:r,context:i},l=(m,y=!1)=>{const{aborted:g}=o.signal,v=r.ignoreFetchAbort&&m!==void 0;if(r.status&&(g&&!y?(r.status.fetchAborted=!0,r.status.fetchError=o.signal.reason,v&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),g&&!v&&!y)return d(o.signal.reason);const S=h;return M(this,Pe)[n]===h&&(m===void 0?S.__staleWhileFetching?M(this,Pe)[n]=S.__staleWhileFetching:this.delete(t):(r.status&&(r.status.fetchUpdated=!0),this.set(t,m,c.options))),m},u=m=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=m),d(m)),d=m=>{const{aborted:y}=o.signal,g=y&&r.allowStaleOnFetchAbort,v=g||r.allowStaleOnFetchRejection,S=v||r.noDeleteOnFetchRejection,E=h;if(M(this,Pe)[n]===h&&(!S||E.__staleWhileFetching===void 0?this.delete(t):g||(M(this,Pe)[n]=E.__staleWhileFetching)),v)return r.status&&E.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw m},f=(m,y)=>{var v;const g=(v=M(this,ru))==null?void 0:v.call(this,t,s,c);g&&g instanceof Promise&&g.then(S=>m(S===void 0?void 0:S),y),o.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(m(void 0),r.allowStaleOnFetchAbort&&(m=S=>l(S,!0)))})};r.status&&(r.status.fetchDispatched=!0);const h=new Promise(f).then(l,u),p=Object.assign(h,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return n===void 0?(this.set(t,p,{...c.options,status:void 0}),n=M(this,tn).get(t)):M(this,Pe)[n]=p,p},dt=new WeakSet,Et=function(t){if(!M(this,fa))return!1;const n=t;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Gm},Kf=new WeakSet,_C=function(t,n){M(this,Lr)[n]=t,M(this,tr)[t]=n},Ic=new WeakSet,Rd=function(t){t!==M(this,In)&&(t===M(this,$n)?Ee(this,$n,M(this,tr)[t]):Ie(this,Kf,_C).call(this,M(this,Lr)[t],M(this,tr)[t]),Ie(this,Kf,_C).call(this,M(this,In),t),Ee(this,In,t))};let AC=Lw;function SH(e){const t=e.match(/^#\$#(\S+)(?:\s+(\S{6})\s+)?(.*)$/);if(!t)return console.log("Invalid message format: message must match the format '#$#name [authKey] keyval*'\nGot `"+e+"`"),null;const n=t[1],r=t[2],i={},s=/(\S+)\s*:\s*"([^"]*)"|(\S+)\s*:\s*(\S+)/g;let o;for(;o=s.exec(t[3]);){const a=o[1]||o[3],c=o[2]||o[4];a in i?console.log(`Invalid message format: duplicate key ${a} detected`):i[a]=c}return{name:n,authKey:r,keyvals:i}}function AA(e){const t=e.match(/^#\$#\*\s(\S+)\s(\S+)\s*:\s*(.+)$|^#\$#:\s(\S+)$/);if(!t)return console.log("Invalid message format: message must match the format '#$#* datatag keyval'\nGot `"+e+"`"),null;const n=t[1]||t[4],r=void 0,i=t[2],s=t[3],o={};return o[i]=s,{name:n,authKey:r,keyvals:o}}function RC(){return(Math.random()+1).toString(36).substring(3,9)}class Vu{constructor(t){W(this,"packageName");W(this,"minVersion",1);W(this,"maxVersion",1);W(this,"packageVersion",0);W(this,"client");this.client=t}handle(t){throw new Error("Method not implemented.")}handleMultiline(t){throw new Error("Method not implemented.")}closeMultiline(t){throw new Error("Method not implemented.")}shutdown(){}send(t,n){t.startsWith(this.packageName)||(t=this.packageName+"-"+t),this.client.sendMcp(t,n)}}class bH extends Vu{constructor(){super(...arguments);W(this,"packageName","mcp-negotiate");W(this,"minVersion",2);W(this,"maxVersion",2)}handle(n){switch(n.name){}}sendNegotiate(){var n,r;for(const i of Object.values(this.client.mcpHandlers)){let s=(n=i.minVersion)==null?void 0:n.toFixed(1),o=(r=i.maxVersion)==null?void 0:r.toFixed(1);this.client.sendMcp("mcp-negotiate-can",{package:i.packageName,"min-version":s,"max-version":o})}this.client.sendCommand("#$#$mcp-negotiate-end")}}class wH extends Vu{constructor(){super(...arguments);W(this,"packageName","dns-com-awns-status")}handle(n){console.log(n),this.client.emit("statustext",n.keyvals.text)}}class kH extends Vu{constructor(n){super(n);W(this,"packageName","dns-org-mud-moo-simpleedit");W(this,"sessions",{});W(this,"clientId");this.clientId=RC()}handle(n){if(n.name==="dns-org-mud-moo-simpleedit-content"){const r={name:n.keyvals.name,reference:n.keyvals.reference,type:n.keyvals.type,contents:[]};this.sessions[n.keyvals["_data-tag"]]=r}else console.log(`Unexpected simpleedit message ${n}`)}handleMultiline(n){"content"in n.keyvals?this.sessions[n.name].contents.push(n.keyvals.content):console.log(`Unexpected simpleedit ML ${n}`)}closeMultiline(n){console.log(`Closing multiline ${n.name}`),this.client.openEditorWindow(this.sessions[n.name])}shutdown(){new BroadcastChannel("editor").postMessage({type:"shutdown"})}}class AH extends Vu{constructor(){super(...arguments);W(this,"packageName","dns-com-awns-getset");W(this,"id",1);W(this,"cache",new AC({max:10}));W(this,"LocalCache",{})}handle(n){switch(n.name){case"dns-com-awns-getset-ack":const r=this.cache.get(n.keyvals.id);if(r===void 0){console.log(`Got ack for unknown id ${n.keyvals.id}`);break}const i=n.keyvals.value;console.log(`Got ${r} = ${i}`),this.LocalCache[r]=i,this.client.emit("getset",r,i);break}}sendGet(n){const r=(this.id++).toString();this.cache.set(r,n),this.client.sendMcp("dns-com-awns-getset-get",{id:r,property:n})}sendSet(n,r){this.client.sendMcp("dns-com-awns-getset-set",{id:this.id++,property:n,value:r})}sendDrop(n){this.client.sendMcp("dns-com-awns-getset-drop",{id:this.id++,property:n})}}class EH extends Vu{constructor(){super(...arguments);W(this,"packageName","dns-com-vmoo-userlist");W(this,"maxVersion",1.1);W(this,"player");W(this,"fields",["Object","Name","Icon"]);W(this,"icons",["Idle","Away","Idle+Away","Friend","Newbie","Inhabitant","Inhabitant+","Schooled","Wizard","Key","Star"]);W(this,"players",[])}handle(n){switch(n.name){case"dns-com-vmoo-userlist-you":this.player=n.keyvals.nr;break}}handleMultiline(n){if("fields"in n.keyvals&&(this.fields=yi(n.keyvals.fields.trim())),"icons"in n.keyvals&&(this.icons=yi(n.keyvals.icons.trim())),"d"in n.keyvals){const s=n.keyvals.d[0];switch(s){case"=":var r=yi(n.keyvals.d.slice(1));this.players=r.map(a=>this.playerFromArray(a));break;case"+":this.players.push(this.playerFromArray(yi(n.keyvals.d.slice(1))));break;case"-":var i=yi(n.keyvals.d.slice(1));this.players=this.players.filter(a=>!i.includes(a.Object));break;case"*":const o=this.playerFromArray(yi(n.keyvals.d.slice(1)));this.updatePlayer(o);break;case"<":i=yi(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!0,this.players[c]=a)});break;case">":i=yi(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!1,this.players[c]=a)});break;case"[":i=yi(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!0,this.players[c]=a)});break;case"]":i=yi(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!1,this.players[c]=a)});break;default:console.log(`Unknown userlist mode ${s} in ${n.keyvals.d}`);break}this.update()}}updatePlayer(n){const r=this.players.findIndex(i=>i.Object===n.Object);r!==-1?this.players[r]=n:this.players.push(n)}update(){this.players.sort((r,i)=>n(i)-n(r)),this.client.emit("userlist",this.players);function n(r){return r.Icon-(r.idle?10:0)-(r.away?20:0)}}playerFromArray(n){const r={};return n.forEach((i,s)=>{r[this.fields[s]]=i}),r.away=!1,r.idle=!1,r}}function yi(e){e=e.slice(1,-1);let t=[],n="",r=0;for(let s=0;s<e.length;s++){const o=e[s];if(o==="{")r++;else if(o==="}")r--;else if(o===","&&r===0){i(),n="";continue}n+=o}return n.length>0&&i(),t;function i(){n=n.trim(),n.startsWith("{")&&n.endsWith("}")?t.push(yi(n)):Number.isNaN(Number(n))?n.startsWith('"')&&n.endsWith('"')?t.push(n.slice(1,-1)):t.push(n):t.push(Number(n))}}class TH extends Vu{constructor(){super(...arguments);W(this,"packageName","dns-com-awns-ping");W(this,"id",1)}handle(n){switch(n.name){case"dns-com-awns-ping":this.send("reply",n.keyvals);break}}ping(){this.send("dns-com-awns-ping",{id:this.id++})}}function _H({onlyFirst:e=!1}={}){const t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}const RH=_H();function xH(e){if(typeof e!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof e}\``);return e.replace(RH,"")}var xC=(e=>(e.Off="off",e.Unfocused="unfocused",e.All="all",e))(xC||{}),Lo=(e=>(e.SetGeneral="SET_GENERAL",e.SetSpeech="SET_SPEECH",e.SetChannels="SET_CHANNELS",e.SetEditorAutocompleteEnabled="SET_EDITOR_AUTOCOMPLETE_ENABLED",e.SetEditorAccessibilityMode="SET_EDITOR_ACCESSIBILITY_MODE",e))(Lo||{});class NH{constructor(){W(this,"state");W(this,"listeners",new Set);W(this,"dispatch",t=>{this.state=this.reducer(this.state,t),localStorage.setItem("preferences",JSON.stringify(this.state)),this.listeners.forEach(n=>n())});const t=localStorage.getItem("preferences"),n=this.getInitialPreferences();this.state=t?this.mergePreferences(n,JSON.parse(t)):n}getInitialPreferences(){return{general:{localEcho:!1},speech:{autoreadMode:"off",voice:"",rate:1,pitch:1,volume:1},channels:{sayto:{autoreadMode:"off",notify:!0}},editor:{autocompleteEnabled:!0,accessibilityMode:!0}}}mergePreferences(t,n){return{...t,general:{...t.general,...n.general},speech:{...t.speech,...n.speech},channels:n.channels?{...t.channels,...n.channels}:t.channels,editor:{...t.editor,...n.editor}}}reducer(t,n){switch(n.type){case"SET_GENERAL":return{...t,general:n.data};case"SET_SPEECH":return{...t,speech:n.data};case"SET_CHANNELS":return{...t,channels:n.data};case"SET_EDITOR_AUTOCOMPLETE_ENABLED":return{...t,editor:{...t.editor,autocompleteEnabled:n.data}};case"SET_EDITOR_ACCESSIBILITY_MODE":return{...t,editor:{...t.editor,accessibilityMode:n.data}};default:return t}}getState(){return this.state}subscribe(t){return this.listeners.add(t),()=>{this.listeners.delete(t)}}}const Wl=new NH;class PH extends AN{constructor(n,r){super();W(this,"ws");W(this,"decoder",new TextDecoder("utf8"));W(this,"telnet");W(this,"host");W(this,"port");W(this,"telnetNegotiation",!1);W(this,"telnetBuffer","");W(this,"gmcpHandlers",{});W(this,"mcpHandlers",{});W(this,"mcpMultilines",{});W(this,"mcpAuthKey",null);W(this,"mcp_negotiate");W(this,"mcp_getset");W(this,"gmcp_char");W(this,"worldData",{playerId:"",playerName:"",roomId:"",liveKitTokens:[]});W(this,"cacophony");W(this,"sendCommand",n=>{Wl.getState().general.localEcho&&this.emit("command",n),this.send(n+`\r
`),console.log("> "+n)});this.host=n,this.port=r,this.mcp_negotiate=this.registerMcpPackage(bH),this.mcp_getset=this.registerMcpPackage(AH),this.gmcp_char=this.registerGMCPPackage(lV),this.cacophony=new lH}registerGMCPPackage(n){const r=new n(this);return this.gmcpHandlers[r.packageName]=r,console.log("Registered GMCP Package:",r.packageName),r}registerMcpPackage(n){const r=new n(this);return this.mcpHandlers[r.packageName]=r,r}connect(){this.ws=new window.WebSocket(`wss://${this.host}:${this.port}`),this.ws.binaryType="arraybuffer",this.telnet=new aV(new oV(this.ws)),this.ws.onopen=()=>{this.emit("connect")},this.telnet.on("data",n=>{this.handleData(n)}),this.telnet.on("negotiation",(n,r)=>{n===_d.WILL&&r===Td.GMCP?(console.log("GMCP Negotiation"),this.telnet.sendNegotiation(_d.DO,Td.GMCP),this.gmcpHandlers.Core.sendHello(),this.gmcpHandlers["Core.Supports"].sendSet(),this.gmcpHandlers["Auth.Autologin"].sendLogin()):n===_d.DO&&r===Td.TERMINAL_TYPE&&(console.log("TTYPE Negotiation"),this.telnet.sendNegotiation(_d.WILL,Td.TERMINAL_TYPE),this.telnet.sendTerminalType("Mongoose React Client"),this.telnet.sendTerminalType("ANSI"),this.telnet.sendTerminalType("PROXY"))}),this.telnet.on("gmcp",(n,r)=>{console.log("GMCP Package:",n,r),this.handleGmcpData(n,r)}),this.ws.onclose=()=>{this.emit("disconnect"),this.mcpAuthKey=null,setTimeout(()=>{this.connect()},1e4)},this.ws.onerror=n=>{this.emit("error",n)}}send(n){this.ws.send(n)}close(){this.ws.close()}handleData(n){const r=this.decoder.decode(n).trimEnd();for(const i of r.split(`
`))i&&i.startsWith("#$#")?this.handleMcp(i):this.emitMessage(i)}handleMcp(n){if(n.startsWith("#$#*")){const i=AA(n.trimEnd());i&&(i.name in this.mcpMultilines?this.mcpMultilines[i.name].handleMultiline(i):console.warn("Received continuation for unknown multiline",i));return}if(n.startsWith("#$#:")){const i=AA(n.trimEnd());i&&(this.mcpMultilines[i.name].closeMultiline(i),delete this.mcpMultilines[i.name]);return}const r=SH(n.trimEnd());if(console.log("MCP Message:",r),(r==null?void 0:r.name.toLowerCase())==="mcp"&&r.authKey==null&&this.mcpAuthKey==null)this.mcpAuthKey=RC(),this.sendCommand(`#$#mcp authentication-key: ${this.mcpAuthKey} version: 2.1 to: 2.1`),this.mcp_negotiate.sendNegotiate();else if((r==null?void 0:r.name)!=="mcp-negotiate-end")if((r==null?void 0:r.authKey)===this.mcpAuthKey){let i=r.name;do{if(i in this.mcpHandlers){this.mcpHandlers[i].handle(r),"_data-tag"in r.keyvals&&(console.log("new multiline "+r.keyvals["_data-tag"]),this.mcpMultilines[r.keyvals["_data-tag"]]=this.mcpHandlers[i]);return}i=i.substring(0,i.lastIndexOf("-"))}while(i);console.log(`No handler for ${r.name}`)}else console.log(`Unexpected authkey "${r==null?void 0:r.authKey}", probably a spoofed message.`)}handleGmcpData(n,r){const i=n.lastIndexOf("."),s=n.substring(0,i),o=n.substring(i+1);console.log("GMCP Message:",s,o,r);const a=this.gmcpHandlers[s];if(!a){console.log("No handler for GMCP package:",s);return}const c=a["handle"+o];c?(console.log("Calling handler:",c),c.call(a,JSON.parse(r))):console.log("No handler on package:",s,o)}emitMessage(n){const r=Wl.getState().speech.autoreadMode;r===xC.All&&this.speak(n),r===xC.Unfocused&&!document.hasFocus()&&this.speak(n),this.emit("message",n)}sendGmcp(n,r){console.log("Sending GMCP:",n,r),this.telnet.sendGmcp(n,r)}sendMcp(n,r){if(typeof r=="object"){let s="";for(const[o,a]of Object.entries(r))s+=` ${o}: ${a||'""'}`;r=s}const i=`#$#${n} ${this.mcpAuthKey} ${r}\r
`;this.send(i)}sendMcpMLLine(n,r,i){this.send(`#$#* ${n} ${r}: ${i}\r
`)}closeMcpML(n){this.send(`#$#: ${n}\r
`)}openEditorWindow(n){console.log(n);const r=new BroadcastChannel("editor"),i=n.reference,s=encodeURIComponent(i),o=window.open(`/editor?reference=${s}`,"_blank");r.onmessage=a=>{console.log("editor window message",a),a.data.id===i&&(a.data.type==="ready"?(console.log("sending editor window session",n),r.postMessage({type:"load",session:n})):a.data.type==="save"?(console.log("saving editor window with session",a.data.session),this.saveEditorWindow(a.data.session)):a.data.type==="close"&&(console.log("closing editor window"),r.close(),r.onmessage=null))},o&&o.focus()}saveEditorWindow(n){const r={reference:n.reference,type:n.type};r["content*"]="",this.sendMCPMultiline("dns-org-mud-moo-simpleedit-set",r,n.contents)}sendMCPMultiline(n,r,i){const s=RC();r["_data-tag"]=s,this.sendMcp(n,r);for(const o of i)this.sendMcpMLLine(s,"content",o);this.closeMcpML(s)}shutdown(){Object.values(this.mcpHandlers).forEach(n=>{n.shutdown()}),Object.values(this.gmcpHandlers).forEach(n=>{n.shutdown()})}requestNotificationPermission(){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="default"&&Notification.requestPermission()}sendNotification(n,r){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="granted"&&new Notification(n,{body:r})}speak(n){if(!("speechSynthesis"in window)){console.log("This browser does not support speech synthesis");return}const r=new SpeechSynthesisUtterance(xH(n));r.lang="en-US";const{rate:i,pitch:s,voice:o,volume:a}=Wl.getState().speech;r.rate=i,r.pitch=s,r.volume=a;const l=speechSynthesis.getVoices().find(u=>u.name===o);l&&(r.voice=l),speechSynthesis.speak(r)}cancelSpeech(){speechSynthesis.cancel()}stopAllSounds(){this.gmcpHandlers["Client.Media"].stopAllSounds()}getInput(){var n;return((n=document.getElementById("command-input"))==null?void 0:n.textContent)||""}setInput(n){const r=document.getElementById("command-input");r&&(r.textContent=n)}}class MH{constructor(){W(this,"history",[]);W(this,"currentIndex",null);W(this,"unsentInput","")}addCommand(t){t.trim()!==""&&(this.history.length===0||this.history[this.history.length-1]!==t)&&(this.history.push(t.trim()),this.currentIndex=null,this.unsentInput="")}navigateUp(t){return this.currentIndex===null&&(this.unsentInput=t),this.history.length>0&&(this.currentIndex==null||this.currentIndex>0)?(this.currentIndex=this.currentIndex==null?this.history.length-1:this.currentIndex-1,this.history[this.currentIndex]):this.currentIndex===null?"":this.history[this.currentIndex]}navigateDown(t){return this.currentIndex!==null?this.currentIndex<this.history.length-1?(this.currentIndex++,this.history[this.currentIndex]):(this.currentIndex=null,this.unsentInput):this.unsentInput}getCurrentInput(){return this.currentIndex===null?this.unsentInput:this.history[this.currentIndex]}}const DH=({onSend:e,inputRef:t})=>{const[n,r]=w.useState(""),i=w.useRef(new MH),s=o=>{const a=i.current;if(o.key==="Enter"&&!o.shiftKey)o.preventDefault(),e(n),a.addCommand(n),r("");else if(o.key==="ArrowUp"){o.preventDefault();const c=a.navigateUp(n);r(c)}else if(o.key==="ArrowDown"){o.preventDefault();const c=a.navigateDown(n);r(c)}};return Y.jsx("textarea",{value:n,onChange:o=>r(o.target.value),onKeyDown:s,id:"command-input",ref:t,autoFocus:!0})},OH="a4f72af2eafc064d851cf6d9789ab3aa458a194d",Ya=()=>{const[,e]=w.useReducer(t=>t+1,0);return w.useEffect(()=>Wl.subscribe(e),[]),[Wl.getState(),Wl.dispatch]},LH=()=>{const[e,t]=w.useState([]);return w.useEffect(()=>{const n=()=>{t(window.speechSynthesis.getVoices())};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)},[]),e},BH=({tabs:e})=>{const[t,n]=w.useState(0),r=w.useRef([]);return w.useEffect(()=>{r.current=r.current.slice(0,e.length)},[e]),w.useEffect(()=>{const i=o=>{switch(o.key){case"ArrowLeft":n(a=>a>0?a-1:e.length-1);break;case"ArrowRight":n(a=>a<e.length-1?a+1:0);break}},s=r.current[t];return s==null||s.addEventListener("keydown",i),()=>{s==null||s.removeEventListener("keydown",i)}},[e.length,t]),w.useEffect(()=>{var i;(i=r.current[t])==null||i.focus()},[t]),Y.jsxs("div",{children:[Y.jsx("div",{role:"tablist","aria-label":"Tabs",children:e.map((i,s)=>Y.jsx("button",{ref:o=>r.current[s]=o,role:"tab","aria-selected":t===s,id:`${i.label}-tab`,"aria-controls":`${i.label}-panel`,onClick:()=>n(s),tabIndex:t===s?void 0:-1,children:i.label},s))}),e.map((i,s)=>Y.jsx("div",{role:"tabpanel",id:`${i.label}-panel`,"aria-labelledby":`${i.label}-tab`,hidden:t!==s,tabIndex:t===s?0:-1,children:i.content},s))]})},FH=()=>{const[e,t]=Ya();return Y.jsxs("label",{children:[Y.jsx("input",{type:"checkbox",checked:e.general.localEcho,onChange:n=>t({type:Lo.SetGeneral,data:{...e.general,localEcho:n.target.checked}})}),"Local Echo"]})},UH=()=>{const[e,t]=Ya();return Y.jsxs("label",{children:["Auto Read:",Y.jsxs("select",{value:e.speech.autoreadMode,onChange:n=>t({type:Lo.SetSpeech,data:{...e.speech,autoreadMode:n.target.value}}),children:[Y.jsx("option",{value:"off",children:"Off"}),Y.jsx("option",{value:"unfocused",children:"Unfocused"}),Y.jsx("option",{value:"all",children:"Always"})]})]})},VH=()=>{const[e,t]=Ya(),n=LH();return Y.jsxs("label",{children:["Voice:",Y.jsx("select",{value:e.speech.voice,onChange:r=>t({type:Lo.SetSpeech,data:{...e.speech,voice:r.target.value}}),children:n.map(r=>Y.jsx("option",{value:r.name,children:r.name},r.voiceURI))})]})},GH=()=>{const[e,t]=Ya();return Y.jsxs("label",{children:["Rate (0.1 - 10.0):",Y.jsx("input",{type:"range",min:"0.1",max:"10.0",step:"0.1",value:e.speech.rate,onChange:n=>t({type:Lo.SetSpeech,data:{...e.speech,rate:parseFloat(n.target.value)}})})]})},WH=()=>{const[e,t]=Ya();return Y.jsxs("label",{children:["Pitch (0 - 2):",Y.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:e.speech.pitch,onChange:n=>t({type:Lo.SetSpeech,data:{...e.speech,pitch:parseFloat(n.target.value)}})})]})},HH=()=>{const[e,t]=Ya();return Y.jsxs("label",{children:["Volume (0 - 1):",Y.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:e.speech.volume,onChange:n=>t({type:Lo.SetSpeech,data:{...e.speech,volume:parseFloat(n.target.value)}})})]})},jH=()=>Y.jsxs("div",{children:[Y.jsx(UH,{}),Y.jsx("br",{}),Y.jsx(VH,{}),Y.jsx("br",{}),Y.jsx(GH,{}),Y.jsx("br",{}),Y.jsx(WH,{}),Y.jsx("br",{}),Y.jsx(HH,{}),Y.jsx("br",{})]}),$H=()=>{const[e,t]=Ya(),n=e.editor,r=s=>{t({type:Lo.SetEditorAutocompleteEnabled,data:s.target.checked})},i=s=>{t({type:Lo.SetEditorAccessibilityMode,data:s.target.checked})};return Y.jsxs("div",{children:[Y.jsxs("label",{children:[Y.jsx("input",{type:"checkbox",checked:n.autocompleteEnabled,onChange:r}),"Enable Autocomplete"]}),Y.jsx("br",{}),Y.jsxs("label",{children:[Y.jsx("input",{type:"checkbox",checked:n.accessibilityMode,onChange:i}),"Enable Accessibility Mode"]}),Y.jsx("br",{})]})},ZH=()=>{const e=[{label:"General",content:Y.jsx(FH,{})},{label:"Speech",content:Y.jsx(jH,{})},{label:"Editor",content:Y.jsx($H,{})}];return Y.jsx(BH,{tabs:e})};function zH(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Tf(){return Tf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tf.apply(this,arguments)}var NC="data-focus-lock",PP="data-focus-lock-disabled",XH="data-no-focus-lock",KH="data-autofocus-inside",JH="data-no-autofocus";function YH(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function qH(e,t){var n=w.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}function QH(e,t){return qH(t||null,function(n){return e.forEach(function(r){return YH(r,n)})})}var Ey={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},PC=function(e,t){return PC=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},PC(e,t)};function Gu(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");PC(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var MC=function(){return MC=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},MC.apply(this,arguments)};function ej(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function MP(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(u){l=[6,u],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function gu(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Wm(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,s=[],o;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s}function Hm(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Hl(e){return this instanceof Hl?(this.v=e,this):new Hl(e)}function tj(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(f){r[f]&&(i[f]=function(h){return new Promise(function(p,m){s.push([f,h,p,m])>1||a(f,h)})})}function a(f,h){try{c(r[f](h))}catch(p){d(s[0][3],p)}}function c(f){f.value instanceof Hl?Promise.resolve(f.value.v).then(l,u):d(s[0][2],f)}function l(f){a("next",f)}function u(f){a("throw",f)}function d(f,h){f(h),s.shift(),s.length&&a(s[0][0],s[0][1])}}function nj(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof gu=="function"?gu(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}function DP(e){return e}function OP(e,t){t===void 0&&(t=DP);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var c=function(){var u=o;o=[],u.forEach(s)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){o.push(u),l()},filter:function(u){return o=o.filter(u),n}}}};return i}function yb(e,t){return t===void 0&&(t=DP),OP(e,t)}function rj(e){e===void 0&&(e={});var t=OP(null);return t.options=MC({async:!0,ssr:!1},e),t}var LP=yb({},function(e){var t=e.target,n=e.currentTarget;return{target:t,currentTarget:n}}),BP=yb(),ij=yb(),sj=rj({async:!0}),oj=[],Cb=w.forwardRef(function(t,n){var r,i=w.useState(),s=i[0],o=i[1],a=w.useRef(),c=w.useRef(!1),l=w.useRef(null),u=t.children,d=t.disabled,f=t.noFocusGuards,h=t.persistentFocus,p=t.crossFrame,m=t.autoFocus;t.allowTextSelection;var y=t.group,g=t.className,v=t.whiteList,S=t.hasPositiveIndices,E=t.shards,k=E===void 0?oj:E,b=t.as,A=b===void 0?"div":b,_=t.lockProps,x=_===void 0?{}:_,P=t.sideCar,D=t.returnFocus,B=t.focusOptions,V=t.onActivation,G=t.onDeactivation,Z=w.useState({}),z=Z[0],te=w.useCallback(function(){l.current=l.current||document&&document.activeElement,a.current&&V&&V(a.current),c.current=!0},[V]),j=w.useCallback(function(){c.current=!1,G&&G(a.current)},[G]);w.useEffect(function(){d||(l.current=null)},[]);var K=w.useCallback(function(He){var ce=l.current;if(ce&&ce.focus){var Gt=typeof D=="function"?D(ce):D;if(Gt){var gn=typeof Gt=="object"?Gt:void 0;l.current=null,He?Promise.resolve().then(function(){return ce.focus(gn)}):ce.focus(gn)}}},[D]),ie=w.useCallback(function(He){c.current&&LP.useMedium(He)},[]),X=BP.useMedium,se=w.useCallback(function(He){a.current!==He&&(a.current=He,o(He))},[]),ke=Tf((r={},r[PP]=d&&"disabled",r[NC]=y,r),x),Ae=f!==!0,ge=Ae&&f!=="tail",Te=QH([n,se]);return w.createElement(w.Fragment,null,Ae&&[w.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:d?-1:0,style:Ey}),S?w.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:d?-1:1,style:Ey}):null],!d&&w.createElement(P,{id:z,sideCar:sj,observed:s,disabled:d,persistentFocus:h,crossFrame:p,autoFocus:m,whiteList:v,shards:k,onActivation:te,onDeactivation:j,returnFocus:K,focusOptions:B}),w.createElement(A,Tf({ref:Te},ke,{className:g,onBlur:X,onFocus:ie}),u),ge&&w.createElement("div",{"data-focus-guard":!0,tabIndex:d?-1:0,style:Ey}))});Cb.propTypes={};Cb.defaultProps={children:void 0,disabled:!1,returnFocus:!1,focusOptions:void 0,noFocusGuards:!1,autoFocus:!0,persistentFocus:!1,crossFrame:!0,hasPositiveIndices:void 0,allowTextSelection:void 0,group:void 0,className:void 0,whiteList:void 0,shards:void 0,as:"div",lockProps:{},onActivation:void 0,onDeactivation:void 0};const FP=Cb;function DC(e,t){return DC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},DC(e,t)}function aj(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,DC(e,t)}function _f(e){"@babel/helpers - typeof";return _f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_f(e)}function cj(e,t){if(_f(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_f(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lj(e){var t=cj(e,"string");return _f(t)=="symbol"?t:String(t)}function uj(e,t,n){return t=lj(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dj(e,t){function n(r){return r.displayName||r.name||"Component"}return function(i){var s=[],o;function a(){o=e(s.map(function(l){return l.props})),t(o)}var c=function(l){aj(u,l);function u(){return l.apply(this,arguments)||this}u.peek=function(){return o};var d=u.prototype;return d.componentDidMount=function(){s.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var h=s.indexOf(this);s.splice(h,1),a()},d.render=function(){return pt.createElement(i,this.props)},u}(w.PureComponent);return uj(c,"displayName","SideEffect("+n(i)+")"),c}}var Gs=function(e){for(var t=Array(e.length),n=0;n<e.length;++n)t[n]=e[n];return t},jm=function(e){return Array.isArray(e)?e:[e]},UP=function(e){return Array.isArray(e)?e[0]:e},fj=function(e){if(e.nodeType!==Node.ELEMENT_NODE)return!1;var t=window.getComputedStyle(e,null);return!t||!t.getPropertyValue?!1:t.getPropertyValue("display")==="none"||t.getPropertyValue("visibility")==="hidden"},VP=function(e){return e.parentNode&&e.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?e.parentNode.host:e.parentNode},GP=function(e){return e===document||e&&e.nodeType===Node.DOCUMENT_NODE},hj=function(e,t){return!e||GP(e)||!fj(e)&&t(VP(e))},WP=function(e,t){var n=e.get(t);if(n!==void 0)return n;var r=hj(t,WP.bind(void 0,e));return e.set(t,r),r},pj=function(e,t){return e&&!GP(e)?vj(e)?t(VP(e)):!1:!0},HP=function(e,t){var n=e.get(t);if(n!==void 0)return n;var r=pj(t,HP.bind(void 0,e));return e.set(t,r),r},jP=function(e){return e.dataset},mj=function(e){return e.tagName==="BUTTON"},$P=function(e){return e.tagName==="INPUT"},ZP=function(e){return $P(e)&&e.type==="radio"},gj=function(e){return!(($P(e)||mj(e))&&(e.type==="hidden"||e.disabled))},vj=function(e){var t=e.getAttribute(JH);return![!0,"true",""].includes(t)},Ib=function(e){var t;return!!(e&&(!((t=jP(e))===null||t===void 0)&&t.focusGuard))},$m=function(e){return!Ib(e)},yj=function(e){return!!e},Cj=function(e,t){var n=e.tabIndex-t.tabIndex,r=e.index-t.index;if(n){if(!e.tabIndex)return 1;if(!t.tabIndex)return-1}return n||r},zP=function(e,t,n){return Gs(e).map(function(r,i){return{node:r,index:i,tabIndex:n&&r.tabIndex===-1?(r.dataset||{}).focusGuard?0:-1:r.tabIndex}}).filter(function(r){return!t||r.tabIndex>=0}).sort(Cj)},Ij=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],Sb=Ij.join(","),Sj="".concat(Sb,", [data-focus-guard]"),XP=function(e,t){return Gs((e.shadowRoot||e).children).reduce(function(n,r){return n.concat(r.matches(t?Sj:Sb)?[r]:[],XP(r))},[])},bj=function(e,t){var n;return e instanceof HTMLIFrameElement&&(!((n=e.contentDocument)===null||n===void 0)&&n.body)?Xg([e.contentDocument.body],t):[e]},Xg=function(e,t){return e.reduce(function(n,r){var i,s=XP(r,t),o=(i=[]).concat.apply(i,s.map(function(a){return bj(a,t)}));return n.concat(o,r.parentNode?Gs(r.parentNode.querySelectorAll(Sb)).filter(function(a){return a===r}):[])},[])},wj=function(e){var t=e.querySelectorAll("[".concat(KH,"]"));return Gs(t).map(function(n){return Xg([n])}).reduce(function(n,r){return n.concat(r)},[])},bb=function(e,t){return Gs(e).filter(function(n){return WP(t,n)}).filter(function(n){return gj(n)})},EA=function(e,t){return t===void 0&&(t=new Map),Gs(e).filter(function(n){return HP(t,n)})},OC=function(e,t,n){return zP(bb(Xg(e,n),t),!0,n)},TA=function(e,t){return zP(bb(Xg(e),t),!1)},kj=function(e,t){return bb(wj(e),t)},jl=function(e,t){return e.shadowRoot?jl(e.shadowRoot,t):Object.getPrototypeOf(e).contains!==void 0&&Object.getPrototypeOf(e).contains.call(e,t)?!0:Gs(e.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?jl(i,t):!1}return jl(n,t)})},Aj=function(e){for(var t=new Set,n=e.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var s=e[r].compareDocumentPosition(e[i]);(s&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&t.add(i),(s&Node.DOCUMENT_POSITION_CONTAINS)>0&&t.add(r)}return e.filter(function(o,a){return!t.has(a)})},KP=function(e){return e.parentNode?KP(e.parentNode):e},wb=function(e){var t=jm(e);return t.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(NC);return n.push.apply(n,i?Aj(Gs(KP(r).querySelectorAll("[".concat(NC,'="').concat(i,'"]:not([').concat(PP,'="disabled"])')))):[r]),n},[])},Ej=function(e){try{return e()}catch{return}},Rf=function(e){if(e===void 0&&(e=document),!(!e||!e.activeElement)){var t=e.activeElement;return t.shadowRoot?Rf(t.shadowRoot):t instanceof HTMLIFrameElement&&Ej(function(){return t.contentWindow.document})?Rf(t.contentWindow.document):t}},Tj=function(e,t){return e===t},_j=function(e,t){return!!Gs(e.querySelectorAll("iframe")).some(function(n){return Tj(n,t)})},JP=function(e,t){return t===void 0&&(t=Rf(UP(e).ownerDocument)),!t||t.dataset&&t.dataset.focusGuard?!1:wb(e).some(function(n){return jl(n,t)||_j(n,t)})},Rj=function(e){e===void 0&&(e=document);var t=Rf(e);return t?Gs(e.querySelectorAll("[".concat(XH,"]"))).some(function(n){return jl(n,t)}):!1},xj=function(e,t){return t.filter(ZP).filter(function(n){return n.name===e.name}).filter(function(n){return n.checked})[0]||e},kb=function(e,t){return ZP(e)&&e.name?xj(e,t):e},Nj=function(e){var t=new Set;return e.forEach(function(n){return t.add(kb(n,e))}),e.filter(function(n){return t.has(n)})},_A=function(e){return e[0]&&e.length>1?kb(e[0],e):e[0]},RA=function(e,t){return e.length>1?e.indexOf(kb(e[t],e)):t},YP="NEW_FOCUS",Pj=function(e,t,n,r){var i=e.length,s=e[0],o=e[i-1],a=Ib(n);if(!(n&&e.indexOf(n)>=0)){var c=n!==void 0?t.indexOf(n):-1,l=r?t.indexOf(r):c,u=r?e.indexOf(r):-1,d=c-l,f=t.indexOf(s),h=t.indexOf(o),p=Nj(t),m=n!==void 0?p.indexOf(n):-1,y=m-(r?p.indexOf(r):c),g=RA(e,0),v=RA(e,i-1);if(c===-1||u===-1)return YP;if(!d&&u>=0)return u;if(c<=f&&a&&Math.abs(d)>1)return v;if(c>=h&&a&&Math.abs(d)>1)return g;if(d&&Math.abs(y)>1)return u;if(c<=f)return v;if(c>h)return g;if(d)return Math.abs(d)>1?u:(i+u+d)%i}},Mj=function(e){return function(t){var n,r=(n=jP(t))===null||n===void 0?void 0:n.autofocus;return t.autofocus||r!==void 0&&r!=="false"||e.indexOf(t)>=0}},Dj=function(e,t,n){var r=e.map(function(s){var o=s.node;return o}),i=EA(r.filter(Mj(n)));return i&&i.length?_A(i):_A(EA(t))},LC=function(e,t){return t===void 0&&(t=[]),t.push(e),e.parentNode&&LC(e.parentNode.host||e.parentNode,t),t},Ty=function(e,t){for(var n=LC(e),r=LC(t),i=0;i<n.length;i+=1){var s=n[i];if(r.indexOf(s)>=0)return s}return!1},qP=function(e,t,n){var r=jm(e),i=jm(t),s=r[0],o=!1;return i.filter(Boolean).forEach(function(a){o=Ty(o||a,a)||o,n.filter(Boolean).forEach(function(c){var l=Ty(s,c);l&&(!o||jl(l,o)?o=l:o=Ty(l,o))})}),o},Oj=function(e,t){return e.reduce(function(n,r){return n.concat(kj(r,t))},[])},Lj=function(e,t){var n=new Map;return t.forEach(function(r){return n.set(r.node,r)}),e.map(function(r){return n.get(r)}).filter(yj)},Bj=function(e,t){var n=Rf(jm(e).length>0?document:UP(e).ownerDocument),r=wb(e).filter($m),i=qP(n||e,e,r),s=new Map,o=TA(r,s),a=OC(r,s).filter(function(h){var p=h.node;return $m(p)});if(!(!a[0]&&(a=o,!a[0]))){var c=TA([i],s).map(function(h){var p=h.node;return p}),l=Lj(c,a),u=l.map(function(h){var p=h.node;return p}),d=Pj(u,c,n,t);if(d===YP){var f=Dj(o,u,Oj(r,s));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return d===void 0?d:l[d]}},Fj=function(e){var t=wb(e).filter($m),n=qP(e,e,t),r=new Map,i=OC([n],r,!0),s=OC(t,r).filter(function(o){var a=o.node;return $m(a)}).map(function(o){var a=o.node;return a});return i.map(function(o){var a=o.node,c=o.index;return{node:a,index:c,lockItem:s.indexOf(a)>=0,guard:Ib(a)}})},Uj=function(e,t){"focus"in e&&e.focus(t),"contentWindow"in e&&e.contentWindow&&e.contentWindow.focus()},_y=0,Ry=!1,QP=function(e,t,n){n===void 0&&(n={});var r=Bj(e,t);if(!Ry&&r){if(_y>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Ry=!0,setTimeout(function(){Ry=!1},1);return}_y++,Uj(r.node,n.focusOptions),_y--}};function Ab(e){setTimeout(e,1)}var Vj=function(){return document&&document.activeElement===document.body},Gj=function(){return Vj()||Rj()},$l=null,Rl=null,Zl=null,xf=!1,Wj=function(){return!0},Hj=function(t){return($l.whiteList||Wj)(t)},jj=function(t,n){Zl={observerNode:t,portaledElement:n}},$j=function(t){return Zl&&Zl.portaledElement===t};function xA(e,t,n,r){var i=null,s=e;do{var o=r[s];if(o.guard)o.node.dataset.focusAutoGuard&&(i=o);else if(o.lockItem){if(s!==e)return;i=null}else break}while((s+=n)!==t);i&&(i.node.tabIndex=0)}var Zj=function(t){return t&&"current"in t?t.current:t},zj=function(t){return t?!!xf:xf==="meanwhile"},Xj=function e(t,n,r){return n&&(n.host===t&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&e(t,n.parentNode,r))},Kj=function(t,n){return n.some(function(r){return Xj(t,r,r)})},Zm=function(){var t=!1;if($l){var n=$l,r=n.observed,i=n.persistentFocus,s=n.autoFocus,o=n.shards,a=n.crossFrame,c=n.focusOptions,l=r||Zl&&Zl.portaledElement,u=document&&document.activeElement;if(l){var d=[l].concat(o.map(Zj).filter(Boolean));if((!u||Hj(u))&&(i||zj(a)||!Gj()||!Rl&&s)&&(l&&!(JP(d)||u&&Kj(u,d)||$j(u))&&(document&&!Rl&&u&&!s?(u.blur&&u.blur(),document.body.focus()):(t=QP(d,Rl,{focusOptions:c}),Zl={})),xf=!1,Rl=document&&document.activeElement),document){var f=document&&document.activeElement,h=Fj(d),p=h.map(function(m){var y=m.node;return y}).indexOf(f);p>-1&&(h.filter(function(m){var y=m.guard,g=m.node;return y&&g.dataset.focusAutoGuard}).forEach(function(m){var y=m.node;return y.removeAttribute("tabIndex")}),xA(p,h.length,1,h),xA(p,-1,-1,h))}}}return t},eM=function(t){Zm()&&t&&(t.stopPropagation(),t.preventDefault())},Eb=function(){return Ab(Zm)},Jj=function(t){var n=t.target,r=t.currentTarget;r.contains(n)||jj(r,n)},Yj=function(){return null},tM=function(){xf="just",Ab(function(){xf="meanwhile"})},qj=function(){document.addEventListener("focusin",eM),document.addEventListener("focusout",Eb),window.addEventListener("blur",tM)},Qj=function(){document.removeEventListener("focusin",eM),document.removeEventListener("focusout",Eb),window.removeEventListener("blur",tM)};function e$(e){return e.filter(function(t){var n=t.disabled;return!n})}function t$(e){var t=e.slice(-1)[0];t&&!$l&&qj();var n=$l,r=n&&t&&t.id===n.id;$l=t,n&&!r&&(n.onDeactivation(),e.filter(function(i){var s=i.id;return s===n.id}).length||n.returnFocus(!t)),t?(Rl=null,(!r||n.observed!==t.observed)&&t.onActivation(),Zm(),Ab(Zm)):(Qj(),Rl=null)}LP.assignSyncMedium(Jj);BP.assignMedium(Eb);ij.assignMedium(function(e){return e({moveFocusInside:QP,focusInside:JP})});const n$=dj(e$,t$)(Yj);var nM=w.forwardRef(function(t,n){return w.createElement(FP,Tf({sideCar:n$,ref:n},t))}),rM=FP.propTypes||{};rM.sideCar;zH(rM,["sideCar"]);nM.propTypes={};const r$=nM,i$=pt.forwardRef((e,t)=>{const[n,r]=w.useState(!1),i=w.useRef(null);return pt.useImperativeHandle(t,()=>({open(){r(!0)},close(){r(!1)}})),w.useEffect(()=>{var s;n&&((s=i.current)==null||s.focus())},[n]),w.useEffect(()=>{const s=o=>{o.key==="Escape"&&r(!1)};return window.addEventListener("keydown",s),()=>{window.removeEventListener("keydown",s)}},[]),Y.jsx(r$,{disabled:!n,children:Y.jsxs("dialog",{className:"preferences-dialog",open:n,ref:i,tabIndex:-1,"aria-label":"Preferences",children:[Y.jsx("h1",{style:{color:"white",textAlign:"center",fontSize:"1.5em",padding:"0.5em",margin:"0.5em",border:"1px solid black",borderRadius:"0.5em",backgroundColor:"black"},children:"Preferences"}),n&&Y.jsx(ZH,{}),Y.jsx("button",{onClick:()=>r(!1),children:"Close"}),Y.jsx("br",{}),Y.jsxs("span",{id:"commit-hash",children:["Version: ",OH]})]})})});var iM={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},NA=pt.createContext&&pt.createContext(iM),Pa=function(){return Pa=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pa.apply(this,arguments)},s$=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function sM(e){return e&&e.map(function(t,n){return pt.createElement(t.tag,Pa({key:n},t.attr),sM(t.child))})}function Xc(e){return function(t){return pt.createElement(o$,Pa({attr:Pa({},e.attr)},t),sM(e.child))}}function o$(e){var t=function(n){var r=e.attr,i=e.size,s=e.title,o=s$(e,["attr","size","title"]),a=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),pt.createElement("svg",Pa({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:Pa(Pa({color:e.color||n.color},n.style),e.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&pt.createElement("title",null,s),e.children)};return NA!==void 0?pt.createElement(NA.Consumer,null,function(n){return t(n)}):t(iM)}function a$(e){return Xc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"}}]})(e)}function c$(e){return Xc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"}}]})(e)}function l$(e){return Xc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"}}]})(e)}function oM(e){return Xc({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"}}]})(e)}function u$(e){return Xc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"}}]})(e)}function d$(e){return Xc({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"}}]})(e)}function f$(e){return Xc({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"}}]})(e)}const h$=({client:e,onClearLog:t,onSaveLog:n,onToggleUsers:r,onOpenPrefs:i})=>{const[s,o]=pt.useState(e.cacophony.muted);return Y.jsxs("div",{className:"toolbar",children:[Y.jsxs("button",{onClick:n,accessKey:"l",children:[Y.jsx(oM,{}),"Save Log"]}),Y.jsxs("button",{onClick:t,accessKey:"c",children:[Y.jsx(l$,{}),"Clear Log"]}),Y.jsxs("button",{onClick:i,accessKey:"p",children:[Y.jsx(a$,{}),"Preferences"]}),Y.jsxs("button",{onClick:()=>{o(!s),e.cacophony.muted=!s},accessKey:"m",children:[s?Y.jsx(f$,{}):Y.jsx(d$,{}),s?"Unmute":"Mute"]}),Y.jsx("button",{onClick:r,accessKey:"u",children:"Show/Hide Users"}),Y.jsxs("label",{children:["Volume",Y.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>e.cacophony.setGlobalVolume(Number(a.target.value)/100)})]})]})};class p$ extends pt.Component{constructor(t){super(t),this.state={statusText:"Not connected"},t.client.on("statustext",n=>this.setState({statusText:n})),t.client.on("connect",()=>this.setState({statusText:"Connected"})),t.client.on("disconnect",()=>this.setState({statusText:"Disconnected"}))}render(){return Y.jsx("div",{className:"statusbar",children:this.state.statusText})}}const m$=({users:e})=>Y.jsxs("div",{className:"sidebar",children:[Y.jsx("div",{className:"sidebar-header",role:"heading","aria-level":2,children:"Connected Players"}),Y.jsx("div",{className:"sidebar-content",children:Y.jsx("ul",{children:e.map(t=>{let n="";return t.away&&(n+=" away"),t.idle&&(n+=" idle"),Y.jsx("li",{className:n,children:t.Name},t.Object)})})})]});var PA={};function g$(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in e)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(e,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(e)}var v$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function y$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var aM={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(v$,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function s(m,y){var g=m[y];if(typeof g.bind=="function")return g.bind(m);try{return Function.prototype.bind.call(g,m)}catch{return function(){return Function.prototype.apply.apply(g,[m,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?o:console[m]!==void 0?s(console,m):console.log!==void 0?s(console,"log"):t}function c(m,y){for(var g=0;g<i.length;g++){var v=i[g];this[v]=g<m?t:this.methodFactory(v,m,y)}this.log=this.debug}function l(m,y,g){return function(){typeof console!==n&&(c.call(this,y,g),this[m].apply(this,arguments))}}function u(m,y,g){return a(m)||l.apply(this,arguments)}function d(m,y,g){var v=this,S;y=y??"WARN";var E="loglevel";typeof m=="string"?E+=":"+m:typeof m=="symbol"&&(E=void 0);function k(x){var P=(i[x]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=P;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+P+";"}catch{}}}function b(){var x;if(!(typeof window===n||!E)){try{x=window.localStorage[E]}catch{}if(typeof x===n)try{var P=window.document.cookie,D=P.indexOf(encodeURIComponent(E)+"=");D!==-1&&(x=/^([^;]+)/.exec(P.slice(D))[1])}catch{}return v.levels[x]===void 0&&(x=void 0),x}}function A(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E);return}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=g||u,v.getLevel=function(){return S},v.setLevel=function(x,P){if(typeof x=="string"&&v.levels[x.toUpperCase()]!==void 0&&(x=v.levels[x.toUpperCase()]),typeof x=="number"&&x>=0&&x<=v.levels.SILENT){if(S=x,P!==!1&&k(x),c.call(v,x,m),typeof console===n&&x<v.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+x},v.setDefaultLevel=function(x){y=x,b()||v.setLevel(x,!1)},v.resetLevel=function(){v.setLevel(y,!1),A()},v.enableAll=function(x){v.setLevel(v.levels.TRACE,x)},v.disableAll=function(x){v.setLevel(v.levels.SILENT,x)};var _=b();_==null&&(_=y),v.setLevel(_,!1)}var f=new d,h={};f.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var g=h[y];return g||(g=h[y]=new d(y,f.getLevel(),f.methodFactory)),g};var p=typeof window!==n?window.log:void 0;return f.noConflict=function(){return typeof window!==n&&window.log===f&&(window.log=p),f},f.getLoggers=function(){return h},f.default=f,f})})(aM);var cM=aM.exports,BC;(function(e){e[e.trace=0]="trace",e[e.debug=1]="debug",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.silent=5]="silent"})(BC||(BC={}));const L=cM.getLogger("livekit");L.setDefaultLevel(BC.info);cM.getLogger("lk-e2ee");function kr(e,t){if(!e)throw new Error(t)}const C$=34028234663852886e22,I$=-34028234663852886e22,S$=4294967295,b$=2147483647,w$=-2147483648;function Bp(e){if(typeof e!="number")throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>b$||e<w$)throw new Error("invalid int 32: "+e)}function FC(e){if(typeof e!="number")throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>S$||e<0)throw new Error("invalid uint 32: "+e)}function lM(e){if(typeof e!="number")throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>C$||e<I$))throw new Error("invalid float 32: "+e)}const uM=Symbol("@bufbuild/protobuf/enum-type");function k$(e){const t=e[uM];return kr(t,"missing enum type on enum object"),t}function dM(e,t,n,r){e[uM]=fM(t,n.map(i=>({no:i.no,name:i.name,localName:e[i.no]})))}function fM(e,t,n){const r=Object.create(null),i=Object.create(null),s=[];for(const o of t){const a=hM(o);s.push(a),r[o.name]=a,i[o.no]=a}return{typeName:e,values:s,findName(o){return r[o]},findNumber(o){return i[o]}}}function A$(e,t,n){const r={};for(const i of t){const s=hM(i);r[s.localName]=s.no,r[s.no]=s.localName}return dM(r,e,t),r}function hM(e){return"localName"in e?e:Object.assign(Object.assign({},e),{localName:e.name})}class me{equals(t){return this.getType().runtime.util.equals(this.getType(),this,t)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(t,n){const r=this.getType(),i=r.runtime.bin,s=i.makeReadOptions(n);return i.readMessage(this,s.readerFactory(t),t.byteLength,s),this}fromJson(t,n){const r=this.getType(),i=r.runtime.json,s=i.makeReadOptions(n);return i.readMessage(r,t,s,this),this}fromJsonString(t,n){let r;try{r=JSON.parse(t)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(t){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(t),s=i.writerFactory();return r.writeMessage(this,s,i),s.finish()}toJson(t){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(t);return r.writeMessage(this,i)}toJsonString(t){var n;const r=this.toJson(t);return JSON.stringify(r,null,(n=t==null?void 0:t.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function E$(e,t,n,r){var i;const s=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:t.substring(t.lastIndexOf(".")+1),o={[s]:function(a){e.util.initFields(this),e.util.initPartial(a,this)}}[s];return Object.setPrototypeOf(o.prototype,new me),Object.assign(o,{runtime:e,typeName:t,fields:e.util.newFieldList(n),fromBinary(a,c){return new o().fromBinary(a,c)},fromJson(a,c){return new o().fromJson(a,c)},fromJsonString(a,c){return new o().fromJsonString(a,c)},equals(a,c){return e.util.equals(o,a,c)}}),o}function T$(e,t,n,r){return{syntax:e,json:t,bin:n,util:r,makeMessageType(i,s,o){return E$(this,i,s,o)},makeEnum:A$,makeEnumType:fM,getEnumType:k$}}var re;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(re||(re={}));var Mc;(function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING"})(Mc||(Mc={}));function _$(){let e=0,t=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,!(n&128))return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function xy(e,t,n){for(let s=0;s<28;s=s+7){const o=e>>>s,a=!(!(o>>>7)&&t==0),c=(a?o|128:o)&255;if(n.push(c),!a)return}const r=e>>>28&15|(t&7)<<4,i=!!(t>>3);if(n.push((i?r|128:r)&255),!!i){for(let s=3;s<31;s=s+7){const o=t>>>s,a=!!(o>>>7),c=(a?o|128:o)&255;if(n.push(c),!a)return}n.push(t>>>31&1)}}const Fp=4294967296;function MA(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,i=0;function s(o,a){const c=Number(e.slice(o,a));i*=n,r=r*n+c,r>=Fp&&(i=i+(r/Fp|0),r=r%Fp)}return s(-24,-18),s(-18,-12),s(-12,-6),s(-6),t?mM(r,i):Tb(r,i)}function R$(e,t){let n=Tb(e,t);const r=n.hi&2147483648;r&&(n=mM(n.lo,n.hi));const i=pM(n.lo,n.hi);return r?"-"+i:i}function pM(e,t){if({lo:e,hi:t}=x$(e,t),t<=2097151)return String(Fp*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,i=t>>16&65535;let s=n+r*6777216+i*6710656,o=r+i*8147497,a=i*2;const c=1e7;return s>=c&&(o+=Math.floor(s/c),s%=c),o>=c&&(a+=Math.floor(o/c),o%=c),a.toString()+DA(o)+DA(s)}function x$(e,t){return{lo:e>>>0,hi:t>>>0}}function Tb(e,t){return{lo:e|0,hi:t|0}}function mM(e,t){return t=~t,e?e=~e+1:t+=1,Tb(e,t)}const DA=e=>{const t=String(e);return"0000000".slice(t.length)+t};function OA(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function N$(){let e=this.buf[this.pos++],t=e&127;if(!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,!(e&128))return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,!(e&128))return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;e&128&&n<10;n++)e=this.buf[this.pos++];if(e&128)throw new Error("invalid varint");return this.assertBounds(),t>>>0}function P$(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(typeof process!="object"||typeof PA!="object"||PA.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),s=BigInt("9223372036854775807"),o=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>s||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<o)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return e.setBigInt64(0,this.parse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(c){return e.setBigInt64(0,this.uParse(c),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigInt64(0,!0)},uDec(c,l){return e.setInt32(0,c,!0),e.setInt32(4,l,!0),e.getBigUint64(0,!0)}}}const n=i=>kr(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>kr(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),MA(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),MA(i)},dec(i,s){return R$(i,s)},uDec(i,s){return pM(i,s)}}}const Le=P$();var Kt;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(Kt||(Kt={}));class M${constructor(t){this.stack=[],this.textEncoder=t??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let t=0;for(let i=0;i<this.chunks.length;i++)t+=this.chunks[i].length;let n=new Uint8Array(t),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for(FC(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Bp(t),OA(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.textEncoder.encode(t);return this.uint32(n.byteLength),this.raw(n)}float(t){lM(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){FC(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){Bp(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return Bp(t),t=(t<<1^t>>31)>>>0,OA(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Le.enc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Le.uEnc(t);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(t){let n=Le.enc(t);return xy(n.lo,n.hi,this.buf),this}sint64(t){let n=Le.enc(t),r=n.hi>>31,i=n.lo<<1^r,s=(n.hi<<1|n.lo>>>31)^r;return xy(i,s,this.buf),this}uint64(t){let n=Le.uEnc(t);return xy(n.lo,n.hi,this.buf),this}}class D${constructor(t,n){this.varint64=_$,this.uint32=N$,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength),this.textDecoder=n??new TextDecoder}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t){let n=this.pos;switch(t){case Kt.Varint:for(;this.buf[this.pos++]&128;);break;case Kt.Bit64:this.pos+=4;case Kt.Bit32:this.pos+=4;break;case Kt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Kt.StartGroup:let i;for(;(i=this.tag()[1])!==Kt.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return Le.dec(...this.varint64())}uint64(){return Le.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,Le.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Le.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Le.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.textDecoder.decode(this.bytes())}}function UC(e,t){return t instanceof me||!e.fieldWrapper?t:e.fieldWrapper.wrapField(t)}re.DOUBLE,re.FLOAT,re.INT64,re.UINT64,re.INT32,re.UINT32,re.BOOL,re.STRING,re.BYTES;function Jo(e,t,n){if(t===n)return!0;if(e==re.BYTES){if(!(t instanceof Uint8Array)||!(n instanceof Uint8Array)||t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}switch(e){case re.UINT64:case re.FIXED64:case re.INT64:case re.SFIXED64:case re.SINT64:return t==n}return!1}function VC(e,t){switch(e){case re.BOOL:return!1;case re.UINT64:case re.FIXED64:case re.INT64:case re.SFIXED64:case re.SINT64:return t==0?Le.zero:"0";case re.DOUBLE:case re.FLOAT:return 0;case re.BYTES:return new Uint8Array(0);case re.STRING:return"";default:return 0}}function gM(e,t){const n=t===void 0;let r=Kt.Varint,i=t===0;switch(e){case re.STRING:i=n||!t.length,r=Kt.LengthDelimited;break;case re.BOOL:i=t===!1;break;case re.DOUBLE:r=Kt.Bit64;break;case re.FLOAT:r=Kt.Bit32;break;case re.INT64:i=n||t==0;break;case re.UINT64:i=n||t==0;break;case re.FIXED64:i=n||t==0,r=Kt.Bit64;break;case re.BYTES:i=n||!t.byteLength,r=Kt.LengthDelimited;break;case re.FIXED32:r=Kt.Bit32;break;case re.SFIXED32:r=Kt.Bit32;break;case re.SFIXED64:i=n||t==0,r=Kt.Bit64;break;case re.SINT64:i=n||t==0;break}const s=re[e].toLowerCase();return[r,s,n||i]}const al=Symbol("@bufbuild/protobuf/unknown-fields"),LA={readUnknownFields:!0,readerFactory:e=>new D$(e)},BA={writeUnknownFields:!0,writerFactory:()=>new M$};function O$(e){return e?Object.assign(Object.assign({},LA),e):LA}function L$(e){return e?Object.assign(Object.assign({},BA),e):BA}function B$(){return{makeReadOptions:O$,makeWriteOptions:L$,listUnknownFields(e){var t;return(t=e[al])!==null&&t!==void 0?t:[]},discardUnknownFields(e){delete e[al]},writeUnknownFields(e,t){const r=e[al];if(r)for(const i of r)t.tag(i.no,i.wireType).raw(i.data)},onUnknownField(e,t,n,r){const i=e;Array.isArray(i[al])||(i[al]=[]),i[al].push({no:t,wireType:n,data:r})},readMessage(e,t,n,r){const i=e.getType(),s=n===void 0?t.len:t.pos+n;for(;t.pos<s;){const[o,a]=t.tag(),c=i.fields.find(o);if(!c){const f=t.skip(a);r.readUnknownFields&&this.onUnknownField(e,o,a,f);continue}let l=e,u=c.repeated,d=c.localName;switch(c.oneof&&(l=l[c.oneof.localName],l.case!=d&&delete l.value,l.case=d,d="value"),c.kind){case"scalar":case"enum":const f=c.kind=="enum"?re.INT32:c.T;let h=zm;if(c.kind=="scalar"&&c.L>0&&(h=U$),u){let g=l[d];if(a==Kt.LengthDelimited&&f!=re.STRING&&f!=re.BYTES){let v=t.uint32()+t.pos;for(;t.pos<v;)g.push(h(t,f))}else g.push(h(t,f))}else l[d]=h(t,f);break;case"message":const p=c.T;u?l[d].push(Up(t,new p,r)):l[d]instanceof me?Up(t,l[d],r):(l[d]=Up(t,new p,r),p.fieldWrapper&&!c.oneof&&!c.repeated&&(l[d]=p.fieldWrapper.unwrapField(l[d])));break;case"map":let[m,y]=F$(c,t,r);l[d][m]=y;break}}}}}function Up(e,t,n){return t.getType().runtime.bin.readMessage(t,e,e.uint32(),n),t}function F$(e,t,n){const r=t.uint32(),i=t.pos+r;let s,o;for(;t.pos<i;){let[a]=t.tag();switch(a){case 1:s=zm(t,e.K);break;case 2:switch(e.V.kind){case"scalar":o=zm(t,e.V.T);break;case"enum":o=t.int32();break;case"message":o=Up(t,new e.V.T,n);break}break}}if(s===void 0){let a=VC(e.K,Mc.BIGINT);s=e.K==re.BOOL?a.toString():a}if(typeof s!="string"&&typeof s!="number"&&(s=s.toString()),o===void 0)switch(e.V.kind){case"scalar":o=VC(e.V.T,Mc.BIGINT);break;case"enum":o=0;break;case"message":o=new e.V.T;break}return[s,o]}function U$(e,t){const n=zm(e,t);return typeof n=="bigint"?n.toString():n}function zm(e,t){switch(t){case re.STRING:return e.string();case re.BOOL:return e.bool();case re.DOUBLE:return e.double();case re.FLOAT:return e.float();case re.INT32:return e.int32();case re.INT64:return e.int64();case re.UINT64:return e.uint64();case re.FIXED64:return e.fixed64();case re.BYTES:return e.bytes();case re.FIXED32:return e.fixed32();case re.SFIXED32:return e.sfixed32();case re.SFIXED64:return e.sfixed64();case re.SINT64:return e.sint64();case re.UINT32:return e.uint32();case re.SINT32:return e.sint32()}}function V$(e,t,n,r,i){e.tag(n.no,Kt.LengthDelimited),e.fork();let s=r;switch(n.K){case re.INT32:case re.FIXED32:case re.UINT32:case re.SFIXED32:case re.SINT32:s=Number.parseInt(r);break;case re.BOOL:kr(r=="true"||r=="false"),s=r=="true";break}switch(Zd(e,n.K,1,s,!0),n.V.kind){case"scalar":Zd(e,n.V.T,2,i,!0);break;case"enum":Zd(e,re.INT32,2,i,!0);break;case"message":GC(e,t,n.V.T,2,i);break}e.join()}function GC(e,t,n,r,i){if(i!==void 0){const s=UC(n,i);e.tag(r,Kt.LengthDelimited).bytes(s.toBinary(t))}}function Zd(e,t,n,r,i){let[s,o,a]=gM(t,r);(!a||i)&&e.tag(n,s)[o](r)}function G$(e,t,n,r){if(!r.length)return;e.tag(n,Kt.LengthDelimited).fork();let[,i]=gM(t);for(let s=0;s<r.length;s++)e[i](r[s]);e.join()}function W$(){return Object.assign(Object.assign({},B$()),{writeMessage(e,t,n){const r=e.getType();for(const i of r.fields.byNumber()){let s,o=i.repeated,a=i.localName;if(i.oneof){const c=e[i.oneof.localName];if(c.case!==a)continue;s=c.value}else s=e[a];switch(i.kind){case"scalar":case"enum":let c=i.kind=="enum"?re.INT32:i.T;if(o)if(i.packed)G$(t,c,i.no,s);else for(const l of s)Zd(t,c,i.no,l,!0);else s!==void 0&&Zd(t,c,i.no,s,!!i.oneof||i.opt);break;case"message":if(o)for(const l of s)GC(t,n,i.T,i.no,l);else GC(t,n,i.T,i.no,s);break;case"map":for(const[l,u]of Object.entries(s))V$(t,n,i,l,u);break}}return n.writeUnknownFields&&this.writeUnknownFields(e,t),t}})}let qs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Kg=[];for(let e=0;e<qs.length;e++)Kg[qs[e].charCodeAt(0)]=e;Kg[45]=qs.indexOf("+");Kg[95]=qs.indexOf("/");const vM={dec(e){let t=e.length*3/4;e[e.length-2]=="="?t-=2:e[e.length-1]=="="&&(t-=1);let n=new Uint8Array(t),r=0,i=0,s,o=0;for(let a=0;a<e.length;a++){if(s=Kg[e.charCodeAt(a)],s===void 0)switch(e[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:o=s,i=1;break;case 1:n[r++]=o<<2|(s&48)>>4,o=s,i=2;break;case 2:n[r++]=(o&15)<<4|(s&60)>>2,o=s,i=3;break;case 3:n[r++]=(o&3)<<6|s,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(e){let t="",n=0,r,i=0;for(let s=0;s<e.length;s++)switch(r=e[s],n){case 0:t+=qs[r>>2],i=(r&3)<<4,n=1;break;case 1:t+=qs[i|r>>4],i=(r&15)<<2,n=2;break;case 2:t+=qs[i|r>>6],t+=qs[r&63],n=0;break}return n&&(t+=qs[i],t+="=",n==1&&(t+="=")),t}},FA={ignoreUnknownFields:!1},UA={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function H$(e){return e?Object.assign(Object.assign({},FA),e):FA}function j$(e){return e?Object.assign(Object.assign({},UA),e):UA}function $$(e){const t=e(Z$,VA);return{makeReadOptions:H$,makeWriteOptions:j$,readMessage(n,r,i,s){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(this.debug(r)));s=s??new n;const o={};for(const[a,c]of Object.entries(r)){const l=n.fields.findJsonName(a);if(!l){if(!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(a,'" is unknown'));continue}let u=l.localName,d=s;if(l.oneof){if(c===null&&l.kind=="scalar")continue;const f=o[l.oneof.localName];if(f)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(f,'", "').concat(a,'"'));o[l.oneof.localName]=a,d=d[l.oneof.localName]={case:u},u="value"}if(l.repeated){if(c===null)continue;if(!Array.isArray(c))throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const f=d[u];for(const h of c){if(h===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h)));let p;switch(l.kind){case"message":p=l.T.fromJson(h,i);break;case"enum":if(p=Ny(l.T,h,i.ignoreUnknownFields),p===void 0)continue;break;case"scalar":try{p=ud(l.T,h,l.L)}catch(m){let y="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(h));throw m instanceof Error&&m.message.length>0&&(y+=": ".concat(m.message)),new Error(y)}break}f.push(p)}}else if(l.kind=="map"){if(c===null)continue;if(Array.isArray(c)||typeof c!="object")throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const f=d[u];for(const[h,p]of Object.entries(c)){if(p===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: map value null"));let m;switch(l.V.kind){case"message":m=l.V.T.fromJson(p,i);break;case"enum":if(m=Ny(l.V.T,p,i.ignoreUnknownFields),m===void 0)continue;break;case"scalar":try{m=ud(l.V.T,p,Mc.BIGINT)}catch(y){let g="cannot decode map value for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw y instanceof Error&&y.message.length>0&&(g+=": ".concat(y.message)),new Error(g)}break}try{f[ud(l.K,l.K==re.BOOL?h=="true"?!0:h=="false"?!1:h:h,Mc.BIGINT).toString()]=m}catch(y){let g="cannot decode map key for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw y instanceof Error&&y.message.length>0&&(g+=": ".concat(y.message)),new Error(g)}}}else switch(l.kind){case"message":const f=l.T;if(c===null&&f.typeName!="google.protobuf.Value"){if(l.oneof)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name,' from JSON: null is invalid for oneof field "').concat(a,'"'));continue}d[u]instanceof me?d[u].fromJson(c,i):(d[u]=f.fromJson(c,i),f.fieldWrapper&&!l.oneof&&(d[u]=f.fieldWrapper.unwrapField(d[u])));break;case"enum":const h=Ny(l.T,c,i.ignoreUnknownFields);h!==void 0&&(d[u]=h);break;case"scalar":try{d[u]=ud(l.T,c,l.L)}catch(p){let m="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw p instanceof Error&&p.message.length>0&&(m+=": ".concat(p.message)),new Error(m)}break}}return s},writeMessage(n,r){const i=n.getType(),s={};let o;try{for(const a of i.fields.byMember()){let c;if(a.kind=="oneof"){const l=n[a.localName];if(l.value===void 0)continue;if(o=a.findField(l.case),!o)throw"oneof case not found: "+l.case;c=t(o,l.value,r)}else o=a,c=t(o,n[o.localName],r);c!==void 0&&(s[r.useProtoFieldName?o.name:o.jsonName]=c)}}catch(a){const c=o?"cannot encode field ".concat(i.typeName,".").concat(o.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return s},readScalar:ud,writeScalar:VA,debug:yM}}function yM(e){if(e===null)return"null";switch(typeof e){case"object":return Array.isArray(e)?"array":"object";case"string":return e.length>100?"string":'"'.concat(e.split('"').join('\\"'),'"');default:return String(e)}}function ud(e,t,n){switch(e){case re.DOUBLE:case re.FLOAT:if(t===null)return 0;if(t==="NaN")return Number.NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(t===""||typeof t=="string"&&t.trim().length!==t.length||typeof t!="string"&&typeof t!="number")break;const r=Number(t);if(Number.isNaN(r)||!Number.isFinite(r))break;return e==re.FLOAT&&lM(r),r;case re.INT32:case re.FIXED32:case re.SFIXED32:case re.SINT32:case re.UINT32:if(t===null)return 0;let i;if(typeof t=="number"?i=t:typeof t=="string"&&t.length>0&&t.trim().length===t.length&&(i=Number(t)),i===void 0)break;return e==re.UINT32?FC(i):Bp(i),i;case re.INT64:case re.SFIXED64:case re.SINT64:if(t===null)return Le.zero;if(typeof t!="number"&&typeof t!="string")break;const s=Le.parse(t);return n?s.toString():s;case re.FIXED64:case re.UINT64:if(t===null)return Le.zero;if(typeof t!="number"&&typeof t!="string")break;const o=Le.uParse(t);return n?o.toString():o;case re.BOOL:if(t===null)return!1;if(typeof t!="boolean")break;return t;case re.STRING:if(t===null)return"";if(typeof t!="string")break;try{encodeURIComponent(t)}catch{throw new Error("invalid UTF8")}return t;case re.BYTES:if(t===null||t==="")return new Uint8Array(0);if(typeof t!="string")break;return vM.dec(t)}throw new Error}function Ny(e,t,n){if(t===null)return 0;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=e.findName(t);if(r||n)return r==null?void 0:r.no;break}throw new Error("cannot decode enum ".concat(e.typeName," from JSON: ").concat(yM(t)))}function Z$(e,t,n,r){var i;if(t===void 0)return t;if(t===0&&!n)return;if(r)return t;if(e.typeName=="google.protobuf.NullValue")return null;const s=e.findNumber(t);return(i=s==null?void 0:s.name)!==null&&i!==void 0?i:t}function VA(e,t,n){if(t!==void 0)switch(e){case re.INT32:case re.SFIXED32:case re.SINT32:case re.FIXED32:case re.UINT32:return kr(typeof t=="number"),t!=0||n?t:void 0;case re.FLOAT:case re.DOUBLE:return kr(typeof t=="number"),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t!==0||n?t:void 0;case re.STRING:return kr(typeof t=="string"),t.length>0||n?t:void 0;case re.BOOL:return kr(typeof t=="boolean"),t||n?t:void 0;case re.UINT64:case re.FIXED64:case re.INT64:case re.SFIXED64:case re.SINT64:return kr(typeof t=="bigint"||typeof t=="string"||typeof t=="number"),n||t!=0?t.toString(10):void 0;case re.BYTES:return kr(t instanceof Uint8Array),n||t.byteLength>0?vM.enc(t):void 0}}function z$(){return $$((e,t)=>function(r,i,s){if(r.kind=="map"){const o={};switch(r.V.kind){case"scalar":for(const[c,l]of Object.entries(i)){const u=t(r.V.T,l,!0);kr(u!==void 0),o[c.toString()]=u}break;case"message":for(const[c,l]of Object.entries(i))o[c.toString()]=l.toJson(s);break;case"enum":const a=r.V.T;for(const[c,l]of Object.entries(i)){kr(l===void 0||typeof l=="number");const u=e(a,l,!0,s.enumAsInteger);kr(u!==void 0),o[c.toString()]=u}break}return s.emitDefaultValues||Object.keys(o).length>0?o:void 0}else if(r.repeated){const o=[];switch(r.kind){case"scalar":for(let a=0;a<i.length;a++)o.push(t(r.T,i[a],!0));break;case"enum":for(let a=0;a<i.length;a++)o.push(e(r.T,i[a],!0,s.enumAsInteger));break;case"message":for(let a=0;a<i.length;a++)o.push(UC(r.T,i[a]).toJson(s));break}return s.emitDefaultValues||o.length>0?o:void 0}else switch(r.kind){case"scalar":return t(r.T,i,!!r.oneof||r.opt||s.emitDefaultValues);case"enum":return e(r.T,i,!!r.oneof||r.opt||s.emitDefaultValues,s.enumAsInteger);case"message":return i!==void 0?UC(r.T,i).toJson(s):void 0}})}function X$(){return{setEnumType:dM,initPartial(e,t){if(e===void 0)return;const n=t.getType();for(const r of n.fields.byMember()){const i=r.localName,s=t,o=e;if(o[i]!==void 0)switch(r.kind){case"oneof":const a=o[i].case;if(a===void 0)continue;const c=r.findField(a);let l=o[i].value;c&&c.kind=="message"&&!(l instanceof c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===re.BYTES&&(l=dd(l)),s[i]={case:a,value:l};break;case"scalar":case"enum":let u=o[i];r.T===re.BYTES&&(u=r.repeated?u.map(dd):dd(u)),s[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===re.BYTES)for(const[h,p]of Object.entries(o[i]))s[i][h]=dd(p);else Object.assign(s[i],o[i]);break;case"message":const f=r.V.T;for(const h of Object.keys(o[i])){let p=o[i][h];f.fieldWrapper||(p=new f(p)),s[i][h]=p}break}break;case"message":const d=r.T;if(r.repeated)s[i]=o[i].map(f=>f instanceof d?f:new d(f));else if(o[i]!==void 0){const f=o[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?s[i]=dd(f):s[i]=f:s[i]=f instanceof d?f:new d(f)}break}}},equals(e,t,n){return t===n?!0:!t||!n?!1:e.fields.byMember().every(r=>{const i=t[r.localName],s=n[r.localName];if(r.repeated){if(i.length!==s.length)return!1;switch(r.kind){case"message":return i.every((o,a)=>r.T.equals(o,s[a]));case"scalar":return i.every((o,a)=>Jo(r.T,o,s[a]));case"enum":return i.every((o,a)=>Jo(re.INT32,o,s[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,s);case"enum":return Jo(re.INT32,i,s);case"scalar":return Jo(r.T,i,s);case"oneof":if(i.case!==s.case)return!1;const o=r.findField(i.case);if(o===void 0)return!0;switch(o.kind){case"message":return o.T.equals(i.value,s.value);case"enum":return Jo(re.INT32,i.value,s.value);case"scalar":return Jo(o.T,i.value,s.value)}throw new Error("oneof cannot contain ".concat(o.kind));case"map":const a=Object.keys(i).concat(Object.keys(s));switch(r.V.kind){case"message":const c=r.V.T;return a.every(u=>c.equals(i[u],s[u]));case"enum":return a.every(u=>Jo(re.INT32,i[u],s[u]));case"scalar":const l=r.V.T;return a.every(u=>Jo(l,i[u],s[u]))}break}})},clone(e){const t=e.getType(),n=new t,r=n;for(const i of t.fields.byMember()){const s=e[i.localName];let o;if(i.repeated)o=s.map(Xh);else if(i.kind=="map"){o=r[i.localName];for(const[a,c]of Object.entries(s))o[a]=Xh(c)}else i.kind=="oneof"?o=i.findField(s.case)?{case:s.case,value:Xh(s.value)}:{case:void 0}:o=Xh(s);r[i.localName]=o}return n}}}function Xh(e){if(e===void 0)return e;if(e instanceof me)return e.clone();if(e instanceof Uint8Array){const t=new Uint8Array(e.byteLength);return t.set(e),t}return e}function dd(e){return e instanceof Uint8Array?e:new Uint8Array(e)}class K${constructor(t,n){this._fields=t,this._normalizer=n}findJsonName(t){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[t]}find(t){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[t]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((t,n)=>t.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const t=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,t.push(n)):t.push(r)}return this.members}}function CM(e,t){const n=IM(e);return t?n:t8(e8(n))}function J$(e){return CM(e,!1)}const Y$=IM;function IM(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let i=e.charAt(r);switch(i){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),t=!1;break;default:t&&(t=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const q$=new Set(["constructor","toString","toJSON","valueOf"]),Q$=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),SM=e=>"".concat(e,"$"),e8=e=>Q$.has(e)?SM(e):e,t8=e=>q$.has(e)?SM(e):e;class n8{constructor(t){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=t,this.localName=J$(t)}addField(t){kr(t.oneof===this,"field ".concat(t.name," not one of ").concat(this.name)),this.fields.push(t)}findField(t){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[t]}}const R=T$("proto3",z$(),W$(),Object.assign(Object.assign({},X$()),{newFieldList(e){return new K$(e,r8)},initFields(e){for(const t of e.getType().fields.byMember()){if(t.opt)continue;const n=t.localName,r=e;if(t.repeated){r[n]=[];continue}switch(t.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=VC(t.T,t.L);break}}}}));function r8(e){var t,n,r,i;const s=[];let o;for(const a of typeof e=="function"?e():e){const c=a;if(c.localName=CM(a.name,a.oneof!==void 0),c.jsonName=(t=a.jsonName)!==null&&t!==void 0?t:Y$(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.L=(r=a.L)!==null&&r!==void 0?r:Mc.BIGINT),c.packed=(i=a.packed)!==null&&i!==void 0?i:a.kind=="enum"||a.kind=="scalar"&&a.T!=re.BYTES&&a.T!=re.STRING,a.oneof!==void 0){const l=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!o||o.name!=l)&&(o=new n8(l)),c.oneof=o,o.addField(c)}s.push(c)}return s}class wn extends me{constructor(t){super(),this.seconds=Le.zero,this.nanos=0,R.util.initPartial(t,this)}fromJson(t,n){if(typeof t!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(R.json.debug(t)));const r=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Le.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(t){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return wn.fromDate(new Date)}static fromDate(t){const n=t.getTime();return new wn({seconds:Le.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(t,n){return new wn().fromBinary(t,n)}static fromJson(t,n){return new wn().fromJson(t,n)}static fromJsonString(t,n){return new wn().fromJsonString(t,n)}static equals(t,n){return R.util.equals(wn,t,n)}}wn.runtime=R;wn.typeName="google.protobuf.Timestamp";wn.fields=R.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var WC;(function(e){e[e.DEFAULT_AC=0]="DEFAULT_AC",e[e.OPUS=1]="OPUS",e[e.AAC=2]="AAC"})(WC||(WC={}));R.util.setEnumType(WC,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var HC;(function(e){e[e.DEFAULT_VC=0]="DEFAULT_VC",e[e.H264_BASELINE=1]="H264_BASELINE",e[e.H264_MAIN=2]="H264_MAIN",e[e.H264_HIGH=3]="H264_HIGH",e[e.VP8=4]="VP8"})(HC||(HC={}));R.util.setEnumType(HC,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var jC;(function(e){e[e.IC_DEFAULT=0]="IC_DEFAULT",e[e.IC_JPEG=1]="IC_JPEG"})(jC||(jC={}));R.util.setEnumType(jC,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var zn;(function(e){e[e.AUDIO=0]="AUDIO",e[e.VIDEO=1]="VIDEO",e[e.DATA=2]="DATA"})(zn||(zn={}));R.util.setEnumType(zn,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var Jt;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CAMERA=1]="CAMERA",e[e.MICROPHONE=2]="MICROPHONE",e[e.SCREEN_SHARE=3]="SCREEN_SHARE",e[e.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(Jt||(Jt={}));R.util.setEnumType(Jt,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var hn;(function(e){e[e.LOW=0]="LOW",e[e.MEDIUM=1]="MEDIUM",e[e.HIGH=2]="HIGH",e[e.OFF=3]="OFF"})(hn||(hn={}));R.util.setEnumType(hn,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var to;(function(e){e[e.POOR=0]="POOR",e[e.GOOD=1]="GOOD",e[e.EXCELLENT=2]="EXCELLENT",e[e.LOST=3]="LOST"})(to||(to={}));R.util.setEnumType(to,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var Xi;(function(e){e[e.UNSET=0]="UNSET",e[e.DISABLED=1]="DISABLED",e[e.ENABLED=2]="ENABLED"})(Xi||(Xi={}));R.util.setEnumType(Xi,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var _o;(function(e){e[e.UNKNOWN_REASON=0]="UNKNOWN_REASON",e[e.CLIENT_INITIATED=1]="CLIENT_INITIATED",e[e.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",e[e.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",e[e.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",e[e.ROOM_DELETED=5]="ROOM_DELETED",e[e.STATE_MISMATCH=6]="STATE_MISMATCH",e[e.JOIN_FAILURE=7]="JOIN_FAILURE"})(_o||(_o={}));R.util.setEnumType(_o,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"}]);var Ks;(function(e){e[e.RR_UNKNOWN=0]="RR_UNKNOWN",e[e.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",e[e.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",e[e.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",e[e.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(Ks||(Ks={}));R.util.setEnumType(Ks,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var Nf;(function(e){e[e.SE_UNKNOWN=0]="SE_UNKNOWN",e[e.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",e[e.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(Nf||(Nf={}));R.util.setEnumType(Nf,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let Wu=class xd extends me{constructor(t){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=Le.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,R.util.initPartial(t,this)}static fromBinary(t,n){return new xd().fromBinary(t,n)}static fromJson(t,n){return new xd().fromJson(t,n)}static fromJsonString(t,n){return new xd().fromJsonString(t,n)}static equals(t,n){return R.util.equals(xd,t,n)}};Wu.runtime=R;Wu.typeName="livekit.Room";Wu.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Oi,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8}]);class Oi extends me{constructor(t){super(),this.mime="",this.fmtpLine="",R.util.initPartial(t,this)}static fromBinary(t,n){return new Oi().fromBinary(t,n)}static fromJson(t,n){return new Oi().fromJson(t,n)}static fromJsonString(t,n){return new Oi().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Oi,t,n)}}Oi.runtime=R;Oi.typeName="livekit.Codec";Oi.fields=R.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class va extends me{constructor(t){super(),this.enabled=!1,this.min=0,this.max=0,R.util.initPartial(t,this)}static fromBinary(t,n){return new va().fromBinary(t,n)}static fromJson(t,n){return new va().fromJson(t,n)}static fromJsonString(t,n){return new va().fromJsonString(t,n)}static equals(t,n){return R.util.equals(va,t,n)}}va.runtime=R;va.typeName="livekit.PlayoutDelay";va.fields=R.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class no extends me{constructor(t){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,R.util.initPartial(t,this)}static fromBinary(t,n){return new no().fromBinary(t,n)}static fromJson(t,n){return new no().fromJson(t,n)}static fromJsonString(t,n){return new no().fromJsonString(t,n)}static equals(t,n){return R.util.equals(no,t,n)}}no.runtime=R;no.typeName="livekit.ParticipantPermission";no.fields=R.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:R.getEnumType(Jt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class Xr extends me{constructor(t){super(),this.sid="",this.identity="",this.state=Dc.JOINING,this.tracks=[],this.metadata="",this.joinedAt=Le.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,R.util.initPartial(t,this)}static fromBinary(t,n){return new Xr().fromBinary(t,n)}static fromJson(t,n){return new Xr().fromJson(t,n)}static fromJsonString(t,n){return new Xr().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Xr,t,n)}}Xr.runtime=R;Xr.typeName="livekit.ParticipantInfo";Xr.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(Dc)},{no:4,name:"tracks",kind:"message",T:Er,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:no},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8}]);var Dc;(function(e){e[e.JOINING=0]="JOINING",e[e.JOINED=1]="JOINED",e[e.ACTIVE=2]="ACTIVE",e[e.DISCONNECTED=3]="DISCONNECTED"})(Dc||(Dc={}));R.util.setEnumType(Dc,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);class ya extends me{constructor(t){super(),R.util.initPartial(t,this)}static fromBinary(t,n){return new ya().fromBinary(t,n)}static fromJson(t,n){return new ya().fromJson(t,n)}static fromJsonString(t,n){return new ya().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ya,t,n)}}ya.runtime=R;ya.typeName="livekit.Encryption";ya.fields=R.util.newFieldList(()=>[]);var Pn;(function(e){e[e.NONE=0]="NONE",e[e.GCM=1]="GCM",e[e.CUSTOM=2]="CUSTOM"})(Pn||(Pn={}));R.util.setEnumType(Pn,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class ro extends me{constructor(t){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new ro().fromBinary(t,n)}static fromJson(t,n){return new ro().fromJson(t,n)}static fromJsonString(t,n){return new ro().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ro,t,n)}}ro.runtime=R;ro.typeName="livekit.SimulcastCodecInfo";ro.fields=R.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:fr,repeated:!0}]);class Er extends me{constructor(t){super(),this.sid="",this.type=zn.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=Jt.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=Pn.NONE,this.stream="",R.util.initPartial(t,this)}static fromBinary(t,n){return new Er().fromBinary(t,n)}static fromJson(t,n){return new Er().fromJson(t,n)}static fromJsonString(t,n){return new Er().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Er,t,n)}}Er.runtime=R;Er.typeName="livekit.TrackInfo";Er.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:R.getEnumType(zn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:R.getEnumType(Jt)},{no:10,name:"layers",kind:"message",T:fr,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:ro,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:R.getEnumType(Pn)},{no:17,name:"stream",kind:"scalar",T:9}]);class fr extends me{constructor(t){super(),this.quality=hn.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,R.util.initPartial(t,this)}static fromBinary(t,n){return new fr().fromBinary(t,n)}static fromJson(t,n){return new fr().fromJson(t,n)}static fromJsonString(t,n){return new fr().fromJsonString(t,n)}static equals(t,n){return R.util.equals(fr,t,n)}}fr.runtime=R;fr.typeName="livekit.VideoLayer";fr.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(hn)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class hs extends me{constructor(t){super(),this.kind=an.RELIABLE,this.value={case:void 0},R.util.initPartial(t,this)}static fromBinary(t,n){return new hs().fromBinary(t,n)}static fromJson(t,n){return new hs().fromJson(t,n)}static fromJsonString(t,n){return new hs().fromJsonString(t,n)}static equals(t,n){return R.util.equals(hs,t,n)}}hs.runtime=R;hs.typeName="livekit.DataPacket";hs.fields=R.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:R.getEnumType(an)},{no:2,name:"user",kind:"message",T:ms,oneof:"value"},{no:3,name:"speaker",kind:"message",T:io,oneof:"value"}]);var an;(function(e){e[e.RELIABLE=0]="RELIABLE",e[e.LOSSY=1]="LOSSY"})(an||(an={}));R.util.setEnumType(an,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class io extends me{constructor(t){super(),this.speakers=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new io().fromBinary(t,n)}static fromJson(t,n){return new io().fromJson(t,n)}static fromJsonString(t,n){return new io().fromJsonString(t,n)}static equals(t,n){return R.util.equals(io,t,n)}}io.runtime=R;io.typeName="livekit.ActiveSpeakerUpdate";io.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:ps,repeated:!0}]);class ps extends me{constructor(t){super(),this.sid="",this.level=0,this.active=!1,R.util.initPartial(t,this)}static fromBinary(t,n){return new ps().fromBinary(t,n)}static fromJson(t,n){return new ps().fromJson(t,n)}static fromJsonString(t,n){return new ps().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ps,t,n)}}ps.runtime=R;ps.typeName="livekit.SpeakerInfo";ps.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class ms extends me{constructor(t){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new ms().fromBinary(t,n)}static fromJson(t,n){return new ms().fromJson(t,n)}static fromJsonString(t,n){return new ms().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ms,t,n)}}ms.runtime=R;ms.typeName="livekit.UserPacket";ms.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class gs extends me{constructor(t){super(),this.participantSid="",this.trackSids=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new gs().fromBinary(t,n)}static fromJson(t,n){return new gs().fromJson(t,n)}static fromJsonString(t,n){return new gs().fromJsonString(t,n)}static equals(t,n){return R.util.equals(gs,t,n)}}gs.runtime=R;gs.typeName="livekit.ParticipantTracks";gs.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class so extends me{constructor(t){super(),this.edition=vu.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",R.util.initPartial(t,this)}static fromBinary(t,n){return new so().fromBinary(t,n)}static fromJson(t,n){return new so().fromJson(t,n)}static fromJsonString(t,n){return new so().fromJsonString(t,n)}static equals(t,n){return R.util.equals(so,t,n)}}so.runtime=R;so.typeName="livekit.ServerInfo";so.fields=R.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:R.getEnumType(vu)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var vu;(function(e){e[e.Standard=0]="Standard",e[e.Cloud=1]="Cloud"})(vu||(vu={}));R.util.setEnumType(vu,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class oo extends me{constructor(t){super(),this.sdk=yu.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",R.util.initPartial(t,this)}static fromBinary(t,n){return new oo().fromBinary(t,n)}static fromJson(t,n){return new oo().fromJson(t,n)}static fromJsonString(t,n){return new oo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(oo,t,n)}}oo.runtime=R;oo.typeName="livekit.ClientInfo";oo.fields=R.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:R.getEnumType(yu)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var yu;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.JS=1]="JS",e[e.SWIFT=2]="SWIFT",e[e.ANDROID=3]="ANDROID",e[e.FLUTTER=4]="FLUTTER",e[e.GO=5]="GO",e[e.UNITY=6]="UNITY",e[e.REACT_NATIVE=7]="REACT_NATIVE",e[e.RUST=8]="RUST",e[e.PYTHON=9]="PYTHON",e[e.CPP=10]="CPP"})(yu||(yu={}));R.util.setEnumType(yu,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class vs extends me{constructor(t){super(),this.resumeConnection=Xi.UNSET,this.forceRelay=Xi.UNSET,R.util.initPartial(t,this)}static fromBinary(t,n){return new vs().fromBinary(t,n)}static fromJson(t,n){return new vs().fromJson(t,n)}static fromJsonString(t,n){return new vs().fromJsonString(t,n)}static equals(t,n){return R.util.equals(vs,t,n)}}vs.runtime=R;vs.typeName="livekit.ClientConfiguration";vs.fields=R.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:ys},{no:2,name:"screen",kind:"message",T:ys},{no:3,name:"resume_connection",kind:"enum",T:R.getEnumType(Xi)},{no:4,name:"disabled_codecs",kind:"message",T:ao},{no:5,name:"force_relay",kind:"enum",T:R.getEnumType(Xi)}]);class ys extends me{constructor(t){super(),this.hardwareEncoder=Xi.UNSET,R.util.initPartial(t,this)}static fromBinary(t,n){return new ys().fromBinary(t,n)}static fromJson(t,n){return new ys().fromJson(t,n)}static fromJsonString(t,n){return new ys().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ys,t,n)}}ys.runtime=R;ys.typeName="livekit.VideoConfiguration";ys.fields=R.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:R.getEnumType(Xi)}]);class ao extends me{constructor(t){super(),this.codecs=[],this.publish=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new ao().fromBinary(t,n)}static fromJson(t,n){return new ao().fromJson(t,n)}static fromJsonString(t,n){return new ao().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ao,t,n)}}ao.runtime=R;ao.typeName="livekit.DisabledCodecs";ao.fields=R.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:Oi,repeated:!0},{no:2,name:"publish",kind:"message",T:Oi,repeated:!0}]);class Cs extends me{constructor(t){super(),this.duration=0,this.startTimestamp=Le.zero,this.endTimestamp=Le.zero,this.rtpClockTicks=Le.zero,this.driftSamples=Le.zero,this.driftMs=0,this.clockRate=0,R.util.initPartial(t,this)}static fromBinary(t,n){return new Cs().fromBinary(t,n)}static fromJson(t,n){return new Cs().fromJson(t,n)}static fromJsonString(t,n){return new Cs().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Cs,t,n)}}Cs.runtime=R;Cs.typeName="livekit.RTPDrift";Cs.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:wn},{no:2,name:"end_time",kind:"message",T:wn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class Ca extends me{constructor(t){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=Le.zero,this.headerBytes=Le.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=Le.zero,this.headerBytesDuplicate=Le.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=Le.zero,this.headerBytesPadding=Le.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,R.util.initPartial(t,this)}static fromBinary(t,n){return new Ca().fromBinary(t,n)}static fromJson(t,n){return new Ca().fromJson(t,n)}static fromJsonString(t,n){return new Ca().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Ca,t,n)}}Ca.runtime=R;Ca.typeName="livekit.RTPStats";Ca.fields=R.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:wn},{no:2,name:"end_time",kind:"message",T:wn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:wn},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:wn},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:wn},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:wn},{no:44,name:"packet_drift",kind:"message",T:Cs},{no:45,name:"report_drift",kind:"message",T:Cs}]);class Ia extends me{constructor(t){super(),this.unixMicro=Le.zero,this.ticks=0,R.util.initPartial(t,this)}static fromBinary(t,n){return new Ia().fromBinary(t,n)}static fromJson(t,n){return new Ia().fromJson(t,n)}static fromJsonString(t,n){return new Ia().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Ia,t,n)}}Ia.runtime=R;Ia.typeName="livekit.TimedVersion";Ia.fields=R.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const fd=7e3,i8=[0,300,2*2*300,3*3*300,4*4*300,fd,fd,fd,fd,fd];class s8{constructor(t){this._retryDelays=t!==void 0?[...t]:i8}nextRetryDelayInMs(t){if(t.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[t.retryCount];return t.retryCount<=1?n:n+Math.random()*1e3}}function U(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{l(r.next(u))}catch(d){o(d)}}function c(u){try{l(r.throw(u))}catch(d){o(d)}}function l(u){u.done?s(u.value):i(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}function GA(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dl(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof GA=="function"?GA(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,c){o=e[s](o),i(a,c,o.done,o.value)})}}function i(s,o,a,c){Promise.resolve(c).then(function(l){s({value:l,done:a})},o)}}var _b={exports:{}},zl=typeof Reflect=="object"?Reflect:null,WA=zl&&typeof zl.apply=="function"?zl.apply:function(t,n,r){return Function.prototype.apply.call(t,n,r)},Vp;zl&&typeof zl.ownKeys=="function"?Vp=zl.ownKeys:Object.getOwnPropertySymbols?Vp=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Vp=function(t){return Object.getOwnPropertyNames(t)};function o8(e){console&&console.warn&&console.warn(e)}var bM=Number.isNaN||function(t){return t!==t};function at(){at.init.call(this)}_b.exports=at;_b.exports.once=u8;at.EventEmitter=at;at.prototype._events=void 0;at.prototype._eventsCount=0;at.prototype._maxListeners=void 0;var HA=10;function Jg(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(at,"defaultMaxListeners",{enumerable:!0,get:function(){return HA},set:function(e){if(typeof e!="number"||e<0||bM(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");HA=e}});at.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};at.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||bM(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function wM(e){return e._maxListeners===void 0?at.defaultMaxListeners:e._maxListeners}at.prototype.getMaxListeners=function(){return wM(this)};at.prototype.emit=function(t){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=t==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var c=s[t];if(c===void 0)return!1;if(typeof c=="function")WA(c,this,n);else for(var l=c.length,u=_M(c,l),r=0;r<l;++r)WA(u[r],this,n);return!0};function kM(e,t,n,r){var i,s,o;if(Jg(n),s=e._events,s===void 0?(s=e._events=Object.create(null),e._eventsCount=0):(s.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),o=s[t]),o===void 0)o=s[t]=n,++e._eventsCount;else if(typeof o=="function"?o=s[t]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=wM(e),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=o.length,o8(a)}return e}at.prototype.addListener=function(t,n){return kM(this,t,n,!1)};at.prototype.on=at.prototype.addListener;at.prototype.prependListener=function(t,n){return kM(this,t,n,!0)};function a8(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function AM(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=a8.bind(r);return i.listener=n,r.wrapFn=i,i}at.prototype.once=function(t,n){return Jg(n),this.on(t,AM(this,t,n)),this};at.prototype.prependOnceListener=function(t,n){return Jg(n),this.prependListener(t,AM(this,t,n)),this};at.prototype.removeListener=function(t,n){var r,i,s,o,a;if(Jg(n),i=this._events,i===void 0)return this;if(r=i[t],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){a=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():c8(r,s),r.length===1&&(i[t]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",t,a||n)}return this};at.prototype.off=at.prototype.removeListener;at.prototype.removeAllListeners=function(t){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[t]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(t,n[i]);return this};function EM(e,t,n){var r=e._events;if(r===void 0)return[];var i=r[t];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?l8(i):_M(i,i.length)}at.prototype.listeners=function(t){return EM(this,t,!0)};at.prototype.rawListeners=function(t){return EM(this,t,!1)};at.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):TM.call(e,t)};at.prototype.listenerCount=TM;function TM(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}at.prototype.eventNames=function(){return this._eventsCount>0?Vp(this._events):[]};function _M(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function c8(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function l8(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function u8(e,t){return new Promise(function(n,r){function i(o){e.removeListener(t,s),r(o)}function s(){typeof e.removeListener=="function"&&e.removeListener("error",i),n([].slice.call(arguments))}RM(e,t,s,{once:!0}),t!=="error"&&d8(e,i,{once:!0})})}function d8(e,t,n){typeof e.on=="function"&&RM(e,"error",t,n)}function RM(e,t,n,r){if(typeof e.on=="function")r.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(s){r.once&&e.removeEventListener(t,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var Ws=_b.exports;let xM=!0,NM=!0;function Gp(e,t,n){const r=e.match(t);return r&&r.length>=n&&parseInt(r[n],10)}function Kc(e,t,n){if(!e.RTCPeerConnection)return;const r=e.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,a){if(o!==t)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[t]||(this._eventMap[t]=new Map),this._eventMap[t].set(a,c),i.apply(this,[o,c])};const s=r.removeEventListener;r.removeEventListener=function(o,a){if(o!==t||!this._eventMap||!this._eventMap[t])return s.apply(this,arguments);if(!this._eventMap[t].has(a))return s.apply(this,arguments);const c=this._eventMap[t].get(a);return this._eventMap[t].delete(a),this._eventMap[t].size===0&&delete this._eventMap[t],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,c])},Object.defineProperty(r,"on"+t,{get(){return this["_on"+t]},set(o){this["_on"+t]&&(this.removeEventListener(t,this["_on"+t]),delete this["_on"+t]),o&&this.addEventListener(t,this["_on"+t]=o)},enumerable:!0,configurable:!0})}function f8(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(xM=e,e?"adapter.js logging disabled":"adapter.js logging enabled")}function h8(e){return typeof e!="boolean"?new Error("Argument type: "+typeof e+". Please use a boolean."):(NM=!e,"adapter.js deprecation warnings "+(e?"disabled":"enabled"))}function PM(){if(typeof window=="object"){if(xM)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Rb(e,t){NM&&console.warn(e+" is deprecated, please use "+t+" instead.")}function p8(e){const t={browser:null,version:null};if(typeof e>"u"||!e.navigator||!e.navigator.userAgent)return t.browser="Not a browser.",t;const{navigator:n}=e;if(n.mozGetUserMedia)t.browser="firefox",t.version=Gp(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||e.isSecureContext===!1&&e.webkitRTCPeerConnection)t.browser="chrome",t.version=Gp(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(e.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))t.browser="safari",t.version=Gp(n.userAgent,/AppleWebKit\/(\d+)\./,1),t.supportsUnifiedPlan=e.RTCRtpTransceiver&&"currentDirection"in e.RTCRtpTransceiver.prototype;else return t.browser="Not a supported browser.",t;return t}function jA(e){return Object.prototype.toString.call(e)==="[object Object]"}function MM(e){return jA(e)?Object.keys(e).reduce(function(t,n){const r=jA(e[n]),i=r?MM(e[n]):e[n],s=r&&!Object.keys(i).length;return i===void 0||s?t:Object.assign(t,{[n]:i})},{}):e}function $C(e,t,n){!t||n.has(t.id)||(n.set(t.id,t),Object.keys(t).forEach(r=>{r.endsWith("Id")?$C(e,e.get(t[r]),n):r.endsWith("Ids")&&t[r].forEach(i=>{$C(e,e.get(i),n)})}))}function $A(e,t,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(t===null)return i;const s=[];return e.forEach(o=>{o.type==="track"&&o.trackIdentifier===t.id&&s.push(o)}),s.forEach(o=>{e.forEach(a=>{a.type===r&&a.trackId===o.id&&$C(e,a,i)})}),i}const ZA=PM;function DM(e,t){const n=e&&e.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,h){return f?f+h.charAt(0).toUpperCase()+h.slice(1):h==="deviceId"?"sourceId":h};if(u.ideal!==void 0){c.optional=c.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",l)]=u.ideal,c.optional.push(f),f={},f[d("max",l)]=u.ideal,c.optional.push(f)):(f[d("",l)]=u.ideal,c.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(f,l)]=u[f])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(t.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=t.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let h=f.find(p=>d.some(m=>p.label.toLowerCase().includes(m)));return!h&&f.length&&d.includes("back")&&(h=f[f.length-1]),h&&(a.video.deviceId=l.exact?{exact:h.deviceId}:{ideal:h.deviceId}),a.video=r(a.video),ZA("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return ZA("chrome: "+JSON.stringify(a)),c(a)},s=function(a){return t.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function m8(e,t){if(!(e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices)&&e.navigator.mediaDevices){if(typeof t!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}e.navigator.mediaDevices.getDisplayMedia=function(r){return t(r).then(i=>{const s=r.video&&r.video.width,o=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),e.navigator.mediaDevices.getUserMedia(r)})}}}function OM(e){e.MediaStream=e.MediaStream||e.webkitMediaStream}function LM(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("ontrack"in e.RTCPeerConnection.prototype)){Object.defineProperty(e.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;e.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(a=>a.track&&a.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),t.apply(this,arguments)}}else Kc(e,"track",t=>(t.transceiver||Object.defineProperty(t,"transceiver",{value:{receiver:t.receiver}}),t))}function BM(e){if(typeof e=="object"&&e.RTCPeerConnection&&!("getSenders"in e.RTCPeerConnection.prototype)&&"createDTMFSender"in e.RTCPeerConnection.prototype){const t=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!e.RTCPeerConnection.prototype.getSenders){e.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=t(this,a),this._senders.push(l)),l};const s=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(a){s.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(t(this,o))})};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const a=this._senders.find(c=>c.track===o);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof e=="object"&&e.RTCPeerConnection&&"getSenders"in e.RTCPeerConnection.prototype&&"createDTMFSender"in e.RTCPeerConnection.prototype&&e.RTCRtpSender&&!("dtmf"in e.RTCRtpSender.prototype)){const t=e.RTCPeerConnection.prototype.getSenders;e.RTCPeerConnection.prototype.getSenders=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(e.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function FM(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return t.apply(this,arguments);if(t.length===0&&(arguments.length===0||typeof r!="function"))return t.apply(this,[]);const o=function(c){const l={};return c.result().forEach(d=>{const f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(h=>{f[h]=d.stat(h)}),l[f.id]=f}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){const c=function(l){i(a(o(l)))};return t.apply(this,[c,r])}return new Promise((c,l)=>{t.apply(this,[function(u){c(a(o(u)))},l])}).then(i,s)}}function UM(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender&&e.RTCRtpReceiver))return;if(!("getStats"in e.RTCRtpSender.prototype)){const n=e.RTCPeerConnection.prototype.getSenders;n&&(e.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=e.RTCPeerConnection.prototype.addTrack;r&&(e.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),e.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>$A(o,s.track,!0))}}if(!("getStats"in e.RTCRtpReceiver.prototype)){const n=e.RTCPeerConnection.prototype.getReceivers;n&&(e.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),Kc(e,"track",r=>(r.receiver._pc=r.srcElement,r)),e.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>$A(s,i.track,!1))}}if(!("getStats"in e.RTCRtpSender.prototype&&"getStats"in e.RTCRtpReceiver.prototype))return;const t=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof e.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(a=>{a.track===r&&(i?o=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(s?o=!0:s=a),a.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return t.apply(this,arguments)}}function VM(e){e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addTrack=function(o,a){if(!a)return t.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=t.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[o.id]=[o].concat(c)};const r=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=e.RTCPeerConnection.prototype.removeTrack;e.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(o);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function GM(e,t){if(!e.RTCPeerConnection)return;if(e.RTCPeerConnection.prototype.addTrack&&t.version>=65)return VM(e);const n=e.RTCPeerConnection.prototype.getLocalStreams;e.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=e.RTCPeerConnection.prototype.addStream;e.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(h=>h.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new e.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=e.RTCPeerConnection.prototype.removeStream;e.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},e.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(m=>m===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(m=>m.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const m=new e.MediaStream([u]);this._streams[d.id]=m,this._reverseStreams[m.id]=d,this.addStream(m)}return this.getSenders().find(m=>m.track===u)};function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(p.id,"g"),h.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(f=>{const h=l._reverseStreams[f],p=l._streams[h.id];d=d.replace(new RegExp(h.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=e.RTCPeerConnection.prototype[l],d={[l](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const m=s(this,p);f[0].apply(null,[m])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>s(this,p))}};e.RTCPeerConnection.prototype[l]=d[l]});const a=e.RTCPeerConnection.prototype.setLocalDescription;e.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=o(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(e.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(e.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:s(this,l)}}),e.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(h=>{this._streams[h].getTracks().find(m=>u.track===m)&&(f=this._streams[h])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ZC(e,t){!e.RTCPeerConnection&&e.webkitRTCPeerConnection&&(e.RTCPeerConnection=e.webkitRTCPeerConnection),e.RTCPeerConnection&&t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=e.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};e.RTCPeerConnection.prototype[n]=i[n]})}function WM(e,t){Kc(e,"negotiationneeded",n=>{const r=n.target;if(!((t.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var zA=Object.freeze({__proto__:null,fixNegotiationNeeded:WM,shimAddTrackRemoveTrack:GM,shimAddTrackRemoveTrackWithNative:VM,shimGetDisplayMedia:m8,shimGetSendersWithDtmf:BM,shimGetStats:FM,shimGetUserMedia:DM,shimMediaStream:OM,shimOnTrack:LM,shimPeerConnection:ZC,shimSenderReceiverGetStats:UM});function HM(e,t){const n=e&&e.navigator,r=e&&e.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Rb("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(t.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,a,c){a in o&&!(c in o)&&(o[c]=o[a],delete o[a])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const a=o.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[a])}}}}function g8(e,t){e.navigator.mediaDevices&&"getDisplayMedia"in e.navigator.mediaDevices||e.navigator.mediaDevices&&(e.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:t}:r.video.mediaSource=t,e.navigator.mediaDevices.getUserMedia(r)})}function jM(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function zC(e,t){if(typeof e!="object"||!(e.RTCPeerConnection||e.mozRTCPeerConnection))return;!e.RTCPeerConnection&&e.mozRTCPeerConnection&&(e.RTCPeerConnection=e.mozRTCPeerConnection),t.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=e.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?e.RTCIceCandidate:e.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};e.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=e.RTCPeerConnection.prototype.getStats;e.RTCPeerConnection.prototype.getStats=function(){const[s,o,a]=arguments;return r.apply(this,[s||null]).then(c=>{if(t.version<53&&!o)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(o,a)}}function $M(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpSender.prototype)return;const t=e.RTCPeerConnection.prototype.getSenders;t&&(e.RTCPeerConnection.prototype.getSenders=function(){const i=t.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=e.RTCPeerConnection.prototype.addTrack;n&&(e.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),e.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ZM(e){if(!(typeof e=="object"&&e.RTCPeerConnection&&e.RTCRtpSender)||e.RTCRtpSender&&"getStats"in e.RTCRtpReceiver.prototype)return;const t=e.RTCPeerConnection.prototype.getReceivers;t&&(e.RTCPeerConnection.prototype.getReceivers=function(){const r=t.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Kc(e,"track",n=>(n.receiver._pc=n.srcElement,n)),e.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function zM(e){!e.RTCPeerConnection||"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){Rb("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function XM(e){e.DataChannel&&!e.RTCDataChannel&&(e.RTCDataChannel=e.DataChannel)}function KM(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.addTransceiver;t&&(e.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=t.apply(this,arguments);if(i){const{sender:o}=s,a=o.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,o.sendEncodings=r,this.setParametersPromises.push(o.setParameters(a).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function JM(e){if(!(typeof e=="object"&&e.RTCRtpSender))return;const t=e.RTCRtpSender.prototype.getParameters;t&&(e.RTCRtpSender.prototype.getParameters=function(){const r=t.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function YM(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}function qM(e){if(!(typeof e=="object"&&e.RTCPeerConnection))return;const t=e.RTCPeerConnection.prototype.createAnswer;e.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>t.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):t.apply(this,arguments)}}var XA=Object.freeze({__proto__:null,shimAddTransceiver:KM,shimCreateAnswer:qM,shimCreateOffer:YM,shimGetDisplayMedia:g8,shimGetParameters:JM,shimGetUserMedia:HM,shimOnTrack:jM,shimPeerConnection:zC,shimRTCDataChannel:XM,shimReceiverGetStats:ZM,shimRemoveStream:zM,shimSenderGetStats:$M});function QM(e){if(!(typeof e!="object"||!e.RTCPeerConnection)){if("getLocalStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in e.RTCPeerConnection.prototype)){const t=e.RTCPeerConnection.prototype.addTrack;e.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>t.call(this,i,r)),r.getVideoTracks().forEach(i=>t.call(this,i,r))},e.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,s=new Array(i>1?i-1:0),o=1;o<i;o++)s[o-1]=arguments[o];return s&&s.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),t.apply(this,arguments)}}"removeStream"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function eD(e){if(!(typeof e!="object"||!e.RTCPeerConnection)&&("getRemoteStreams"in e.RTCPeerConnection.prototype||(e.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in e.RTCPeerConnection.prototype))){Object.defineProperty(e.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const t=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),t.apply(r,arguments)}}}function tD(e){if(typeof e!="object"||!e.RTCPeerConnection)return;const t=e.RTCPeerConnection.prototype,n=t.createOffer,r=t.createAnswer,i=t.setLocalDescription,s=t.setRemoteDescription,o=t.addIceCandidate;t.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f},t.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(l,u),Promise.resolve()):f};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};t.setLocalDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.setRemoteDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},t.addIceCandidate=a}function nD(e){const t=e&&e.navigator;if(t.mediaDevices&&t.mediaDevices.getUserMedia){const n=t.mediaDevices,r=n.getUserMedia.bind(n);t.mediaDevices.getUserMedia=i=>r(rD(i))}!t.getUserMedia&&t.mediaDevices&&t.mediaDevices.getUserMedia&&(t.getUserMedia=(function(r,i,s){t.mediaDevices.getUserMedia(r).then(i,s)}).bind(t))}function rD(e){return e&&e.video!==void 0?Object.assign({},e,{video:MM(e.video)}):e}function iD(e){if(!e.RTCPeerConnection)return;const t=e.RTCPeerConnection;e.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let a=r.iceServers[o];a.urls===void 0&&a.url?(Rb("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,s.push(a)):s.push(r.iceServers[o])}r.iceServers=s}return new t(r,i)},e.RTCPeerConnection.prototype=t.prototype,"generateCertificate"in t&&Object.defineProperty(e.RTCPeerConnection,"generateCertificate",{get(){return t.generateCertificate}})}function sD(e){typeof e=="object"&&e.RTCTrackEvent&&"receiver"in e.RTCTrackEvent.prototype&&!("transceiver"in e.RTCTrackEvent.prototype)&&Object.defineProperty(e.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function oD(e){const t=e.RTCPeerConnection.prototype.createOffer;e.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video",{direction:"recvonly"})}return t.apply(this,arguments)}}function aD(e){typeof e!="object"||e.AudioContext||(e.AudioContext=e.webkitAudioContext)}var KA=Object.freeze({__proto__:null,shimAudioContext:aD,shimCallbacksAPI:tD,shimConstraints:rD,shimCreateOfferLegacy:oD,shimGetUserMedia:nD,shimLocalStreamsAPI:QM,shimRTCIceServerUrls:iD,shimRemoteStreamsAPI:eD,shimTrackEventTransceiver:sD}),cD={exports:{}};(function(e){const t={};t.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},t.localCName=t.generateIdentifier(),t.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},t.splitSections=function(n){return n.split(`
m=`).map((i,s)=>(s>0?"m="+i:i).trim()+`\r
`)},t.getDescription=function(n){const r=t.splitSections(n);return r&&r[0]},t.getMediaSections=function(n){const r=t.splitSections(n);return r.shift(),r},t.matchPrefix=function(n,r){return t.splitLines(n).filter(i=>i.indexOf(r)===0)},t.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]===void 0&&(i[r[s]]=r[s+1]);break}return i},t.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const s=n.type;return r.push("typ"),r.push(s),s!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},t.parseIceOptions=function(n){return n.substring(14).split(" ")},t.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},t.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},t.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},t.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},t.parseFmtp=function(n){const r={};let i;const s=n.substring(n.indexOf(" ")+1).split(";");for(let o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},t.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const s=[];Object.keys(n.parameters).forEach(o=>{n.parameters[o]!==void 0?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},t.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},t.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(s=>{r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},t.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substring(r+1,s),i.value=n.substring(s+1)):i.attribute=n.substring(r+1),i},t.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},t.getMid=function(n){const r=t.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},t.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},t.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:t.matchPrefix(n+r,"a=fingerprint:").map(t.parseFingerprint)}},t.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(s=>{i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},t.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},t.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?t.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},t.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},t.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},t.getCryptoParameters=function(n,r){return t.matchPrefix(n+r,"a=crypto:").map(t.parseCryptoLine)},t.getIceParameters=function(n,r){const i=t.matchPrefix(n+r,"a=ice-ufrag:")[0],s=t.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substring(12),password:s.substring(10)}:null},t.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},t.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},s=t.splitLines(n)[0].split(" ");r.profile=s[2];for(let a=3;a<s.length;a++){const c=s[a],l=t.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=t.parseRtpMap(l),d=t.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?t.parseFmtp(d[0]):{},u.rtcpFeedback=t.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(t.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}t.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(t.parseExtmap(a))});const o=t.matchPrefix(n,"a=rtcp-fb:* ").map(t.parseRtcpFb);return r.codecs.forEach(a=>{o.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},t.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(o=>o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(o=>{i+=t.writeRtpMap(o),i+=t.writeFmtp(o),i+=t.writeRtcpFb(o)});let s=0;return r.codecs.forEach(o=>{o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(o=>{i+=t.writeExtmap(o)}),i},t.parseRtpEncodingParameters=function(n){const r=[],i=t.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=t.matchPrefix(n,"a=ssrc:").map(f=>t.parseSsrcMedia(f)).filter(f=>f.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=t.matchPrefix(n,"a=ssrc-group:FID").map(f=>f.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(f=>{if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){let h={ssrc:c,codecPayloadType:parseInt(f.parameters.apt,10)};c&&l&&(h.rtx={ssrc:l}),r.push(h),s&&(h=JSON.parse(JSON.stringify(h)),h.fec={ssrc:c,mechanism:o?"red+ulpfec":"red"},r.push(h))}}),r.length===0&&c&&r.push({ssrc:c});let d=t.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(f=>{f.maxBitrate=d})),r},t.parseRtcpParameters=function(n){const r={},i=t.matchPrefix(n,"a=ssrc:").map(a=>t.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const s=t.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;const o=t.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},t.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},t.parseMsid=function(n){let r;const i=t.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const s=t.matchPrefix(n,"a=ssrc:").map(o=>t.parseSsrcMedia(o)).filter(o=>o.attribute==="msid");if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},t.parseSctpDescription=function(n){const r=t.parseMLine(n),i=t.matchPrefix(n,"a=max-message-size:");let s;i.length>0&&(s=parseInt(i[0].substring(19),10)),isNaN(s)&&(s=65536);const o=t.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substring(12),10),protocol:r.fmt,maxMessageSize:s};const a=t.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:s}}},t.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},t.generateSessionId=function(){return Math.random().toString().substr(2,22)},t.writeSessionBoilerplate=function(n,r,i){let s;const o=r!==void 0?r:2;return n?s=n:s=t.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},t.getDirection=function(n,r){const i=t.splitLines(n);for(let s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substring(2)}return r?t.getDirection(r):"sendrecv"},t.getKind=function(n){return t.splitLines(n)[0].split(" ")[0].substring(2)},t.isRejected=function(n){return n.split(" ",2)[1]==="0"},t.parseMLine=function(n){const i=t.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},t.parseOLine=function(n){const i=t.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},t.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=t.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},e.exports=t})(cD);var lD=cD.exports,Xl=y$(lD),v8=g$({__proto__:null,default:Xl},[lD]);function Wp(e){if(!e.RTCIceCandidate||e.RTCIceCandidate&&"foundation"in e.RTCIceCandidate.prototype)return;const t=e.RTCIceCandidate;e.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new t(r),s=Xl.parseCandidate(r.candidate);for(const o in s)o in i||Object.defineProperty(i,o,{value:s[o]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new t(r)},e.RTCIceCandidate.prototype=t.prototype,Kc(e,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new e.RTCIceCandidate(n.candidate),writable:"false"}),n))}function XC(e){!e.RTCIceCandidate||e.RTCIceCandidate&&"relayProtocol"in e.RTCIceCandidate.prototype||Kc(e,"icecandidate",t=>{if(t.candidate){const n=Xl.parseCandidate(t.candidate.candidate);n.type==="relay"&&(t.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return t})}function Hp(e,t){if(!e.RTCPeerConnection)return;"sctp"in e.RTCPeerConnection.prototype||Object.defineProperty(e.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=Xl.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=Xl.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return t.browser==="firefox"&&(t.version<57?a===-1?c=16384:c=2147483637:t.version<60?c=t.version===57?65535:65536:c=2147483637),c},s=function(a,c){let l=65536;t.browser==="firefox"&&t.version===57&&(l=65535);const u=Xl.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):t.browser==="firefox"&&c!==-1&&(l=2147483637),l},o=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,t.browser==="chrome"&&t.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=s(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function jp(e){if(!(e.RTCPeerConnection&&"createDataChannel"in e.RTCPeerConnection.prototype))return;function t(r,i){const s=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=e.RTCPeerConnection.prototype.createDataChannel;e.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return t(i,this),i},Kc(e,"datachannel",r=>(t(r.channel,r.target),r))}function KC(e){if(!e.RTCPeerConnection||"connectionState"in e.RTCPeerConnection.prototype)return;const t=e.RTCPeerConnection.prototype;Object.defineProperty(t,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(t,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=t[n];t[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function JC(e,t){if(!e.RTCPeerConnection||t.browser==="chrome"&&t.version>=71||t.browser==="safari"&&t.version>=605)return;const n=e.RTCPeerConnection.prototype.setRemoteDescription;e.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);e.RTCSessionDescription&&i instanceof e.RTCSessionDescription?arguments[0]=new e.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function $p(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(e.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(t.browser==="chrome"&&t.version<78||t.browser==="firefox"&&t.version<68||t.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Zp(e,t){if(!(e.RTCPeerConnection&&e.RTCPeerConnection.prototype))return;const n=e.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(e.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(o=>n.apply(this,[o]))})}var y8=Object.freeze({__proto__:null,removeExtmapAllowMixed:JC,shimAddIceCandidateNullOrEmpty:$p,shimConnectionState:KC,shimMaxMessageSize:Hp,shimParameterlessSetLocalDescription:Zp,shimRTCIceCandidate:Wp,shimRTCIceCandidateRelayProtocol:XC,shimSendThrowTypeError:jp});function C8(){let{window:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=PM,r=p8(e),i={browserDetails:r,commonShim:y8,extractVersion:Gp,disableLog:f8,disableWarnings:h8,sdp:v8};switch(r.browser){case"chrome":if(!zA||!ZC||!t.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=zA,$p(e,r),Zp(e),DM(e,r),OM(e),ZC(e,r),LM(e),GM(e,r),BM(e),FM(e),UM(e),WM(e,r),Wp(e),XC(e),KC(e),Hp(e,r),jp(e),JC(e,r);break;case"firefox":if(!XA||!zC||!t.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=XA,$p(e,r),Zp(e),HM(e,r),zC(e,r),jM(e),zM(e),$M(e),ZM(e),XM(e),KM(e),JM(e),YM(e),qM(e),Wp(e),KC(e),Hp(e,r),jp(e);break;case"safari":if(!KA||!t.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=KA,$p(e,r),Zp(e),iD(e),oD(e),tD(e),QM(e),eD(e),sD(e),nD(e),aD(e),Wp(e),XC(e),Hp(e,r),jp(e),JC(e,r);break;default:n("Unsupported browser!");break}return i}C8({window:typeof window>"u"?void 0:window});const I8=10,Kh="lk_e2ee",S8="LKFrameEncryptionKey",b8={sharedKey:!1,ratchetSalt:S8,ratchetWindowSize:8,failureTolerance:I8};var Ma;(function(e){e.SetKey="setKey",e.RatchetRequest="ratchetRequest",e.KeyRatcheted="keyRatcheted"})(Ma||(Ma={}));var JA;(function(e){e.KeyRatcheted="keyRatcheted"})(JA||(JA={}));var Sa;(function(e){e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError"})(Sa||(Sa={}));var YA;(function(e){e.Error="cryptorError"})(YA||(YA={}));function w8(){return k8()||YC()}function YC(){return typeof window.RTCRtpScriptTransform<"u"}function k8(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class zse extends Ws.EventEmitter{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{L.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},b8),t),this.on(Ma.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(t,n,r){const i={key:t,participantIdentity:n,keyIndex:r};this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Ma.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(t,n){this.emit(Ma.RatchetRequest,t,n)}}class Hu extends Error{constructor(t,n){super(n||"an error has occured"),this.code=t}}class Bt extends Hu{constructor(t,n,r){super(1,t),this.status=r,this.reason=n}}class xb extends Hu{constructor(t){super(21,t??"device is unsupported")}}class cs extends Hu{constructor(t){super(20,t??"track is invalid")}}class A8 extends Hu{constructor(t){super(10,t??"unsupported server")}}class on extends Hu{constructor(t){super(12,t??"unexpected connection state")}}class qC extends Hu{constructor(t){super(13,t??"unable to negotiate")}}var Pf;(function(e){e.PermissionDenied="PermissionDenied",e.NotFound="NotFound",e.DeviceInUse="DeviceInUse",e.Other="Other"})(Pf||(Pf={}));(function(e){function t(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?e.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?e.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?e.DeviceInUse:e.Other}e.getFailure=t})(Pf||(Pf={}));var ne;(function(e){e.Connected="connected",e.Reconnecting="reconnecting",e.Reconnected="reconnected",e.Disconnected="disconnected",e.ConnectionStateChanged="connectionStateChanged",e.StateChanged="connectionStateChanged",e.MediaDevicesChanged="mediaDevicesChanged",e.ParticipantConnected="participantConnected",e.ParticipantDisconnected="participantDisconnected",e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.LocalAudioSilenceDetected="localAudioSilenceDetected",e.ActiveSpeakersChanged="activeSpeakersChanged",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.RoomMetadataChanged="roomMetadataChanged",e.DataReceived="dataReceived",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.AudioPlaybackStatusChanged="audioPlaybackChanged",e.VideoPlaybackStatusChanged="videoPlaybackChanged",e.MediaDevicesError="mediaDevicesError",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.SignalConnected="signalConnected",e.RecordingStatusChanged="recordingStatusChanged",e.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",e.EncryptionError="encryptionError",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ActiveDeviceChanged="activeDeviceChanged"})(ne||(ne={}));var oe;(function(e){e.TrackPublished="trackPublished",e.TrackSubscribed="trackSubscribed",e.TrackSubscriptionFailed="trackSubscriptionFailed",e.TrackUnpublished="trackUnpublished",e.TrackUnsubscribed="trackUnsubscribed",e.TrackMuted="trackMuted",e.TrackUnmuted="trackUnmuted",e.LocalTrackPublished="localTrackPublished",e.LocalTrackUnpublished="localTrackUnpublished",e.ParticipantMetadataChanged="participantMetadataChanged",e.ParticipantNameChanged="participantNameChanged",e.DataReceived="dataReceived",e.IsSpeakingChanged="isSpeakingChanged",e.ConnectionQualityChanged="connectionQualityChanged",e.TrackStreamStateChanged="trackStreamStateChanged",e.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",e.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",e.MediaDevicesError="mediaDevicesError",e.AudioStreamAcquired="audioStreamAcquired",e.ParticipantPermissionsChanged="participantPermissionsChanged",e.PCTrackAdded="pcTrackAdded"})(oe||(oe={}));var ve;(function(e){e.TransportsCreated="transportsCreated",e.Connected="connected",e.Disconnected="disconnected",e.Resuming="resuming",e.Resumed="resumed",e.Restarting="restarting",e.Restarted="restarted",e.SignalResumed="signalResumed",e.SignalRestarted="signalRestarted",e.Closing="closing",e.MediaTrackAdded="mediaTrackAdded",e.ActiveSpeakersUpdate="activeSpeakersUpdate",e.DataPacketReceived="dataPacketReceived",e.RTPVideoMapUpdate="rtpVideoMapUpdate",e.DCBufferStatusChanged="dcBufferStatusChanged",e.ParticipantUpdate="participantUpdate",e.RoomUpdate="roomUpdate",e.SpeakersChanged="speakersChanged",e.StreamStateChanged="streamStateChanged",e.ConnectionQualityUpdate="connectionQualityUpdate",e.SubscriptionError="subscriptionError",e.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",e.RemoteMute="remoteMute",e.SubscribedQualityUpdate="subscribedQualityUpdate",e.LocalTrackUnpublished="localTrackUnpublished"})(ve||(ve={}));var he;(function(e){e.Message="message",e.Muted="muted",e.Unmuted="unmuted",e.Restarted="restarted",e.Ended="ended",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed",e.UpdateSettings="updateSettings",e.UpdateSubscription="updateSubscription",e.AudioPlaybackStarted="audioPlaybackStarted",e.AudioPlaybackFailed="audioPlaybackFailed",e.AudioSilenceDetected="audioSilenceDetected",e.VisibilityChanged="visibilityChanged",e.VideoDimensionsChanged="videoDimensionsChanged",e.VideoPlaybackStarted="videoPlaybackStarted",e.VideoPlaybackFailed="videoPlaybackFailed",e.ElementAttached="elementAttached",e.ElementDetached="elementDetached",e.UpstreamPaused="upstreamPaused",e.UpstreamResumed="upstreamResumed",e.SubscriptionPermissionChanged="subscriptionPermissionChanged",e.SubscriptionStatusChanged="subscriptionStatusChanged",e.SubscriptionFailed="subscriptionFailed"})(he||(he={}));function Nb(e,t,n){var r,i,s;t===void 0&&(t=50),n===void 0&&(n={});var o=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var h=Date.now()-l;if(h+t>=c)return c-h}return t}var f=function(){var h=[].slice.call(arguments),p=this;return new Promise(function(m,y){var g=o&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,l=Date.now(),!o){var S=e.apply(p,h);a&&a(S),u.forEach(function(E){return(0,E.resolve)(S)}),u=[]}},d()),g){var v=e.apply(p,h);return a&&a(v),m(v)}u.push({resolve:m,reject:y})})};return f.cancel=function(h){s!==void 0&&clearTimeout(s),u.forEach(function(p){return(0,p.reject)(h)}),u=[]},f}const E8=/version\/(\d+(\.?_?\d+)+)/i;let Py;function Va(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof e>"u"&&typeof navigator>"u")return;const n=(e??navigator.userAgent).toLowerCase();if(Py===void 0||t){const r=T8.find(i=>{let{test:s}=i;return s.test(n)});Py=r==null?void 0:r.describe(n)}return Py}const T8=[{test:/firefox|iceweasel|fxios/i,describe(e){return{name:"Firefox",version:My(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(e){return{name:"Chrome",version:My(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e),os:e.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(e){return{name:"Safari",version:My(E8,e),os:e.includes("mobile/")?"iOS":"macOS"}}}];function My(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=t.match(e);return r&&r.length>=n&&r[n]||""}var _8="1.15.5";const R8=_8,x8=11;class Dn{}Dn.setTimeout=function(){return setTimeout(...arguments)};Dn.setInterval=function(){return setInterval(...arguments)};Dn.clearTimeout=function(){return clearTimeout(...arguments)};Dn.clearInterval=function(){return clearInterval(...arguments)};class bt{constructor(t,n,r,i,s){this.width=t,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i,priority:s}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const N8=["vp8","h264"],uD=["vp8","h264","vp9","av1"];function P8(e){return!!N8.find(t=>t===e)}var Xm;(function(e){e.telephone={maxBitrate:12e3},e.speech={maxBitrate:2e4},e.music={maxBitrate:32e3},e.musicStereo={maxBitrate:48e3},e.musicHighQuality={maxBitrate:64e3},e.musicHighQualityStereo={maxBitrate:96e3}})(Xm||(Xm={}));const Mf={h90:new bt(160,90,9e4,20),h180:new bt(320,180,16e4,20),h216:new bt(384,216,18e4,20),h360:new bt(640,360,45e4,20),h540:new bt(960,540,8e5,25),h720:new bt(1280,720,17e5,30),h1080:new bt(1920,1080,3e6,30),h1440:new bt(2560,1440,5e6,30),h2160:new bt(3840,2160,8e6,30)},QC={h120:new bt(160,120,7e4,20),h180:new bt(240,180,125e3,20),h240:new bt(320,240,14e4,20),h360:new bt(480,360,33e4,20),h480:new bt(640,480,5e5,20),h540:new bt(720,540,6e5,25),h720:new bt(960,720,13e5,30),h1080:new bt(1440,1080,23e5,30),h1440:new bt(1920,1440,38e5,30)},dD={h360fps3:new bt(640,360,2e5,3,"medium"),h720fps5:new bt(1280,720,4e5,5,"medium"),h720fps15:new bt(1280,720,15e5,15,"medium"),h720fps30:new bt(1280,720,2e6,30,"medium"),h1080fps15:new bt(1920,1080,25e5,15,"medium"),h1080fps30:new bt(1920,1080,4e6,30,"medium")};var Xn;(function(e){e[e.PUBLISHER=0]="PUBLISHER",e[e.SUBSCRIBER=1]="SUBSCRIBER"})(Xn||(Xn={}));R.util.setEnumType(Xn,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var Oc;(function(e){e[e.ACTIVE=0]="ACTIVE",e[e.PAUSED=1]="PAUSED"})(Oc||(Oc={}));R.util.setEnumType(Oc,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var Km;(function(e){e[e.UDP=0]="UDP",e[e.TCP=1]="TCP",e[e.TLS=2]="TLS"})(Km||(Km={}));R.util.setEnumType(Km,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class co extends me{constructor(t){super(),this.message={case:void 0},R.util.initPartial(t,this)}static fromBinary(t,n){return new co().fromBinary(t,n)}static fromJson(t,n){return new co().fromJson(t,n)}static fromJsonString(t,n){return new co().fromJsonString(t,n)}static equals(t,n){return R.util.equals(co,t,n)}}co.runtime=R;co.typeName="livekit.SignalRequest";co.fields=R.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:hr,oneof:"message"},{no:2,name:"answer",kind:"message",T:hr,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Fi,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Bi,oneof:"message"},{no:5,name:"mute",kind:"message",T:Ui,oneof:"message"},{no:6,name:"subscription",kind:"message",T:li,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Ss,oneof:"message"},{no:8,name:"leave",kind:"message",T:ui,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:bs,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Es,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Ts,oneof:"message"},{no:13,name:"simulate",kind:"message",T:ar,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:ws,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Rs,oneof:"message"}]);class Is extends me{constructor(t){super(),this.message={case:void 0},R.util.initPartial(t,this)}static fromBinary(t,n){return new Is().fromBinary(t,n)}static fromJson(t,n){return new Is().fromJson(t,n)}static fromJsonString(t,n){return new Is().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Is,t,n)}}Is.runtime=R;Is.typeName="livekit.SignalResponse";Is.fields=R.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:lo,oneof:"message"},{no:2,name:"answer",kind:"message",T:hr,oneof:"message"},{no:3,name:"offer",kind:"message",T:hr,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Fi,oneof:"message"},{no:5,name:"update",kind:"message",T:ho,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Vi,oneof:"message"},{no:8,name:"leave",kind:"message",T:ui,oneof:"message"},{no:9,name:"mute",kind:"message",T:Ui,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:po,oneof:"message"},{no:11,name:"room_update",kind:"message",T:mo,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:vo,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Co,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:So,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:bo,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:fo,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:uo,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:wo,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:Ao,oneof:"message"}]);class Li extends me{constructor(t){super(),this.codec="",this.cid="",R.util.initPartial(t,this)}static fromBinary(t,n){return new Li().fromBinary(t,n)}static fromJson(t,n){return new Li().fromJson(t,n)}static fromJsonString(t,n){return new Li().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Li,t,n)}}Li.runtime=R;Li.typeName="livekit.SimulcastCodec";Li.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class Bi extends me{constructor(t){super(),this.cid="",this.name="",this.type=zn.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=Jt.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=Pn.NONE,this.stream="",R.util.initPartial(t,this)}static fromBinary(t,n){return new Bi().fromBinary(t,n)}static fromJson(t,n){return new Bi().fromJson(t,n)}static fromJsonString(t,n){return new Bi().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Bi,t,n)}}Bi.runtime=R;Bi.typeName="livekit.AddTrackRequest";Bi.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:R.getEnumType(zn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:R.getEnumType(Jt)},{no:9,name:"layers",kind:"message",T:fr,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:Li,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:R.getEnumType(Pn)},{no:15,name:"stream",kind:"scalar",T:9}]);class Fi extends me{constructor(t){super(),this.candidateInit="",this.target=Xn.PUBLISHER,R.util.initPartial(t,this)}static fromBinary(t,n){return new Fi().fromBinary(t,n)}static fromJson(t,n){return new Fi().fromJson(t,n)}static fromJsonString(t,n){return new Fi().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Fi,t,n)}}Fi.runtime=R;Fi.typeName="livekit.TrickleRequest";Fi.fields=R.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:R.getEnumType(Xn)}]);class Ui extends me{constructor(t){super(),this.sid="",this.muted=!1,R.util.initPartial(t,this)}static fromBinary(t,n){return new Ui().fromBinary(t,n)}static fromJson(t,n){return new Ui().fromJson(t,n)}static fromJsonString(t,n){return new Ui().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Ui,t,n)}}Ui.runtime=R;Ui.typeName="livekit.MuteTrackRequest";Ui.fields=R.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class lo extends me{constructor(t){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),R.util.initPartial(t,this)}static fromBinary(t,n){return new lo().fromBinary(t,n)}static fromJson(t,n){return new lo().fromJson(t,n)}static fromJsonString(t,n){return new lo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(lo,t,n)}}lo.runtime=R;lo.typeName="livekit.JoinResponse";lo.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Wu},{no:2,name:"participant",kind:"message",T:Xr},{no:3,name:"other_participants",kind:"message",T:Xr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:ks,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:vs},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:so},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class uo extends me{constructor(t){super(),this.iceServers=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new uo().fromBinary(t,n)}static fromJson(t,n){return new uo().fromJson(t,n)}static fromJsonString(t,n){return new uo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(uo,t,n)}}uo.runtime=R;uo.typeName="livekit.ReconnectResponse";uo.fields=R.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:ks,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:vs}]);class Vi extends me{constructor(t){super(),this.cid="",R.util.initPartial(t,this)}static fromBinary(t,n){return new Vi().fromBinary(t,n)}static fromJson(t,n){return new Vi().fromJson(t,n)}static fromJsonString(t,n){return new Vi().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Vi,t,n)}}Vi.runtime=R;Vi.typeName="livekit.TrackPublishedResponse";Vi.fields=R.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Er}]);class fo extends me{constructor(t){super(),this.trackSid="",R.util.initPartial(t,this)}static fromBinary(t,n){return new fo().fromBinary(t,n)}static fromJson(t,n){return new fo().fromJson(t,n)}static fromJsonString(t,n){return new fo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(fo,t,n)}}fo.runtime=R;fo.typeName="livekit.TrackUnpublishedResponse";fo.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class hr extends me{constructor(t){super(),this.type="",this.sdp="",R.util.initPartial(t,this)}static fromBinary(t,n){return new hr().fromBinary(t,n)}static fromJson(t,n){return new hr().fromJson(t,n)}static fromJsonString(t,n){return new hr().fromJsonString(t,n)}static equals(t,n){return R.util.equals(hr,t,n)}}hr.runtime=R;hr.typeName="livekit.SessionDescription";hr.fields=R.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class ho extends me{constructor(t){super(),this.participants=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new ho().fromBinary(t,n)}static fromJson(t,n){return new ho().fromJson(t,n)}static fromJsonString(t,n){return new ho().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ho,t,n)}}ho.runtime=R;ho.typeName="livekit.ParticipantUpdate";ho.fields=R.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:Xr,repeated:!0}]);class li extends me{constructor(t){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new li().fromBinary(t,n)}static fromJson(t,n){return new li().fromJson(t,n)}static fromJsonString(t,n){return new li().fromJsonString(t,n)}static equals(t,n){return R.util.equals(li,t,n)}}li.runtime=R;li.typeName="livekit.UpdateSubscription";li.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:gs,repeated:!0}]);class Ss extends me{constructor(t){super(),this.trackSids=[],this.disabled=!1,this.quality=hn.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,R.util.initPartial(t,this)}static fromBinary(t,n){return new Ss().fromBinary(t,n)}static fromJson(t,n){return new Ss().fromJson(t,n)}static fromJsonString(t,n){return new Ss().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Ss,t,n)}}Ss.runtime=R;Ss.typeName="livekit.UpdateTrackSettings";Ss.fields=R.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:R.getEnumType(hn)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class ui extends me{constructor(t){super(),this.canReconnect=!1,this.reason=_o.UNKNOWN_REASON,R.util.initPartial(t,this)}static fromBinary(t,n){return new ui().fromBinary(t,n)}static fromJson(t,n){return new ui().fromJson(t,n)}static fromJsonString(t,n){return new ui().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ui,t,n)}}ui.runtime=R;ui.typeName="livekit.LeaveRequest";ui.fields=R.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:R.getEnumType(_o)}]);class bs extends me{constructor(t){super(),this.trackSid="",this.layers=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new bs().fromBinary(t,n)}static fromJson(t,n){return new bs().fromJson(t,n)}static fromJsonString(t,n){return new bs().fromJsonString(t,n)}static equals(t,n){return R.util.equals(bs,t,n)}}bs.runtime=R;bs.typeName="livekit.UpdateVideoLayers";bs.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:fr,repeated:!0}]);class ws extends me{constructor(t){super(),this.metadata="",this.name="",R.util.initPartial(t,this)}static fromBinary(t,n){return new ws().fromBinary(t,n)}static fromJson(t,n){return new ws().fromJson(t,n)}static fromJsonString(t,n){return new ws().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ws,t,n)}}ws.runtime=R;ws.typeName="livekit.UpdateParticipantMetadata";ws.fields=R.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class ks extends me{constructor(t){super(),this.urls=[],this.username="",this.credential="",R.util.initPartial(t,this)}static fromBinary(t,n){return new ks().fromBinary(t,n)}static fromJson(t,n){return new ks().fromJson(t,n)}static fromJsonString(t,n){return new ks().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ks,t,n)}}ks.runtime=R;ks.typeName="livekit.ICEServer";ks.fields=R.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class po extends me{constructor(t){super(),this.speakers=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new po().fromBinary(t,n)}static fromJson(t,n){return new po().fromJson(t,n)}static fromJsonString(t,n){return new po().fromJsonString(t,n)}static equals(t,n){return R.util.equals(po,t,n)}}po.runtime=R;po.typeName="livekit.SpeakersChanged";po.fields=R.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:ps,repeated:!0}]);class mo extends me{constructor(t){super(),R.util.initPartial(t,this)}static fromBinary(t,n){return new mo().fromBinary(t,n)}static fromJson(t,n){return new mo().fromJson(t,n)}static fromJsonString(t,n){return new mo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(mo,t,n)}}mo.runtime=R;mo.typeName="livekit.RoomUpdate";mo.fields=R.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:Wu}]);class go extends me{constructor(t){super(),this.participantSid="",this.quality=to.POOR,this.score=0,R.util.initPartial(t,this)}static fromBinary(t,n){return new go().fromBinary(t,n)}static fromJson(t,n){return new go().fromJson(t,n)}static fromJsonString(t,n){return new go().fromJsonString(t,n)}static equals(t,n){return R.util.equals(go,t,n)}}go.runtime=R;go.typeName="livekit.ConnectionQualityInfo";go.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:R.getEnumType(to)},{no:3,name:"score",kind:"scalar",T:2}]);class vo extends me{constructor(t){super(),this.updates=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new vo().fromBinary(t,n)}static fromJson(t,n){return new vo().fromJson(t,n)}static fromJsonString(t,n){return new vo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(vo,t,n)}}vo.runtime=R;vo.typeName="livekit.ConnectionQualityUpdate";vo.fields=R.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:go,repeated:!0}]);class yo extends me{constructor(t){super(),this.participantSid="",this.trackSid="",this.state=Oc.ACTIVE,R.util.initPartial(t,this)}static fromBinary(t,n){return new yo().fromBinary(t,n)}static fromJson(t,n){return new yo().fromJson(t,n)}static fromJsonString(t,n){return new yo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(yo,t,n)}}yo.runtime=R;yo.typeName="livekit.StreamStateInfo";yo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:R.getEnumType(Oc)}]);class Co extends me{constructor(t){super(),this.streamStates=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new Co().fromBinary(t,n)}static fromJson(t,n){return new Co().fromJson(t,n)}static fromJsonString(t,n){return new Co().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Co,t,n)}}Co.runtime=R;Co.typeName="livekit.StreamStateUpdate";Co.fields=R.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:yo,repeated:!0}]);class Gi extends me{constructor(t){super(),this.quality=hn.LOW,this.enabled=!1,R.util.initPartial(t,this)}static fromBinary(t,n){return new Gi().fromBinary(t,n)}static fromJson(t,n){return new Gi().fromJson(t,n)}static fromJsonString(t,n){return new Gi().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Gi,t,n)}}Gi.runtime=R;Gi.typeName="livekit.SubscribedQuality";Gi.fields=R.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:R.getEnumType(hn)},{no:2,name:"enabled",kind:"scalar",T:8}]);class Io extends me{constructor(t){super(),this.codec="",this.qualities=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new Io().fromBinary(t,n)}static fromJson(t,n){return new Io().fromJson(t,n)}static fromJsonString(t,n){return new Io().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Io,t,n)}}Io.runtime=R;Io.typeName="livekit.SubscribedCodec";Io.fields=R.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Gi,repeated:!0}]);class So extends me{constructor(t){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new So().fromBinary(t,n)}static fromJson(t,n){return new So().fromJson(t,n)}static fromJsonString(t,n){return new So().fromJsonString(t,n)}static equals(t,n){return R.util.equals(So,t,n)}}So.runtime=R;So.typeName="livekit.SubscribedQualityUpdate";So.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Gi,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Io,repeated:!0}]);class As extends me{constructor(t){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",R.util.initPartial(t,this)}static fromBinary(t,n){return new As().fromBinary(t,n)}static fromJson(t,n){return new As().fromJson(t,n)}static fromJsonString(t,n){return new As().fromJsonString(t,n)}static equals(t,n){return R.util.equals(As,t,n)}}As.runtime=R;As.typeName="livekit.TrackPermission";As.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class Es extends me{constructor(t){super(),this.allParticipants=!1,this.trackPermissions=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new Es().fromBinary(t,n)}static fromJson(t,n){return new Es().fromJson(t,n)}static fromJsonString(t,n){return new Es().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Es,t,n)}}Es.runtime=R;Es.typeName="livekit.SubscriptionPermission";Es.fields=R.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:As,repeated:!0}]);class bo extends me{constructor(t){super(),this.participantSid="",this.trackSid="",this.allowed=!1,R.util.initPartial(t,this)}static fromBinary(t,n){return new bo().fromBinary(t,n)}static fromJson(t,n){return new bo().fromJson(t,n)}static fromJsonString(t,n){return new bo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(bo,t,n)}}bo.runtime=R;bo.typeName="livekit.SubscriptionPermissionUpdate";bo.fields=R.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class Ts extends me{constructor(t){super(),this.publishTracks=[],this.dataChannels=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new Ts().fromBinary(t,n)}static fromJson(t,n){return new Ts().fromJson(t,n)}static fromJsonString(t,n){return new Ts().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Ts,t,n)}}Ts.runtime=R;Ts.typeName="livekit.SyncState";Ts.fields=R.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:hr},{no:2,name:"subscription",kind:"message",T:li},{no:3,name:"publish_tracks",kind:"message",T:Vi,repeated:!0},{no:4,name:"data_channels",kind:"message",T:_s,repeated:!0},{no:5,name:"offer",kind:"message",T:hr}]);class _s extends me{constructor(t){super(),this.label="",this.id=0,this.target=Xn.PUBLISHER,R.util.initPartial(t,this)}static fromBinary(t,n){return new _s().fromBinary(t,n)}static fromJson(t,n){return new _s().fromJson(t,n)}static fromJsonString(t,n){return new _s().fromJsonString(t,n)}static equals(t,n){return R.util.equals(_s,t,n)}}_s.runtime=R;_s.typeName="livekit.DataChannelInfo";_s.fields=R.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:R.getEnumType(Xn)}]);class ar extends me{constructor(t){super(),this.scenario={case:void 0},R.util.initPartial(t,this)}static fromBinary(t,n){return new ar().fromBinary(t,n)}static fromJson(t,n){return new ar().fromJson(t,n)}static fromJsonString(t,n){return new ar().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ar,t,n)}}ar.runtime=R;ar.typeName="livekit.SimulateScenario";ar.fields=R.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:R.getEnumType(Km),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"}]);class Rs extends me{constructor(t){super(),this.timestamp=Le.zero,this.rtt=Le.zero,R.util.initPartial(t,this)}static fromBinary(t,n){return new Rs().fromBinary(t,n)}static fromJson(t,n){return new Rs().fromJson(t,n)}static fromJsonString(t,n){return new Rs().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Rs,t,n)}}Rs.runtime=R;Rs.typeName="livekit.Ping";Rs.fields=R.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class wo extends me{constructor(t){super(),this.lastPingTimestamp=Le.zero,this.timestamp=Le.zero,R.util.initPartial(t,this)}static fromBinary(t,n){return new wo().fromBinary(t,n)}static fromJson(t,n){return new wo().fromJson(t,n)}static fromJsonString(t,n){return new wo().fromJsonString(t,n)}static equals(t,n){return R.util.equals(wo,t,n)}}wo.runtime=R;wo.typeName="livekit.Pong";wo.fields=R.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class ba extends me{constructor(t){super(),this.regions=[],R.util.initPartial(t,this)}static fromBinary(t,n){return new ba().fromBinary(t,n)}static fromJson(t,n){return new ba().fromJson(t,n)}static fromJsonString(t,n){return new ba().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ba,t,n)}}ba.runtime=R;ba.typeName="livekit.RegionSettings";ba.fields=R.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:ko,repeated:!0}]);class ko extends me{constructor(t){super(),this.region="",this.url="",this.distance=Le.zero,R.util.initPartial(t,this)}static fromBinary(t,n){return new ko().fromBinary(t,n)}static fromJson(t,n){return new ko().fromJson(t,n)}static fromJsonString(t,n){return new ko().fromJsonString(t,n)}static equals(t,n){return R.util.equals(ko,t,n)}}ko.runtime=R;ko.typeName="livekit.RegionInfo";ko.fields=R.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class Ao extends me{constructor(t){super(),this.trackSid="",this.err=Nf.SE_UNKNOWN,R.util.initPartial(t,this)}static fromBinary(t,n){return new Ao().fromBinary(t,n)}static fromJson(t,n){return new Ao().fromJson(t,n)}static fromJsonString(t,n){return new Ao().fromJsonString(t,n)}static equals(t,n){return R.util.equals(Ao,t,n)}}Ao.runtime=R;Ao.typeName="livekit.SubscriptionResponse";Ao.fields=R.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:R.getEnumType(Nf)}]);function M8(e){if(!(typeof e>"u"))return typeof structuredClone=="function"?structuredClone(e):JSON.parse(JSON.stringify(e))}const D8=5e3,hd=[];class q extends Ws.EventEmitter{constructor(t,n){super(),this.attachedElements=[],this.isMuted=!1,this.streamState=q.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),D8):this.handleAppVisibilityChanged()},this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=t,this._mediaStreamID=t.id,this.source=q.Source.Unknown}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(t){let n="audio";this.kind===q.Kind.Video&&(n="video"),this.attachedElements.length===0&&q.Kind.Video&&this.addAppVisibilityListener(),t||(n==="audio"&&(hd.forEach(s=>{s.parentElement===null&&!t&&(t=s)}),t&&hd.splice(hd.indexOf(t),1)),t||(t=document.createElement(n))),this.attachedElements.includes(t)||this.attachedElements.push(t),xl(this.mediaStreamTrack,t);const r=t.srcObject.getTracks(),i=r.some(s=>s.kind==="audio");return t.play().then(()=>{this.emit(i?he.AudioPlaybackStarted:he.VideoPlaybackStarted)}).catch(s=>{s.name==="NotAllowedError"?this.emit(i?he.AudioPlaybackFailed:he.VideoPlaybackFailed,s):s.name==="AbortError"?L.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):L.warn("could not playback ".concat(i?"audio":"video"),s),i&&t&&r.some(o=>o.kind==="video")&&s.name==="NotAllowedError"&&(t.muted=!0,t.play().catch(()=>{}))}),this.emit(he.ElementAttached,t),t}detach(t){try{if(t){Kl(this.mediaStreamTrack,t);const r=this.attachedElements.indexOf(t);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(t),this.emit(he.ElementDetached,t)),t}const n=[];return this.attachedElements.forEach(r=>{Kl(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(he.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}recycleElement(t){if(t instanceof HTMLAudioElement){let n=!0;t.pause(),hd.forEach(r=>{r.parentElement||(n=!1)}),n&&hd.push(t)}}handleAppVisibilityChanged(){return U(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){xr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){xr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function xl(e,t){let n;t.srcObject instanceof MediaStream?n=t.srcObject:n=new MediaStream;let r;e.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(e)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(e)),(!Lc()||!(t instanceof HTMLVideoElement))&&(t.autoplay=!0),t.muted=n.getAudioTracks().length===0,t instanceof HTMLVideoElement&&(t.playsInline=!0),t.srcObject!==n&&(t.srcObject=n,(Lc()||Cu())&&t instanceof HTMLVideoElement&&setTimeout(()=>{t.srcObject=n,t.play().catch(()=>{})},0))}function Kl(e,t){if(t.srcObject instanceof MediaStream){const n=t.srcObject;n.removeTrack(e),n.getTracks().length>0?t.srcObject=n:t.srcObject=null}}(function(e){let t;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(t=e.Kind||(e.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=e.Source||(e.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=e.StreamState||(e.StreamState={}));function i(l){switch(l){case t.Audio:return zn.AUDIO;case t.Video:return zn.VIDEO;default:return zn.DATA}}e.kindToProto=i;function s(l){switch(l){case zn.AUDIO:return t.Audio;case zn.VIDEO:return t.Video;default:return t.Unknown}}e.kindFromProto=s;function o(l){switch(l){case n.Camera:return Jt.CAMERA;case n.Microphone:return Jt.MICROPHONE;case n.ScreenShare:return Jt.SCREEN_SHARE;case n.ScreenShareAudio:return Jt.SCREEN_SHARE_AUDIO;default:return Jt.UNKNOWN}}e.sourceToProto=o;function a(l){switch(l){case Jt.CAMERA:return n.Camera;case Jt.MICROPHONE:return n.Microphone;case Jt.SCREEN_SHARE:return n.ScreenShare;case Jt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}e.sourceFromProto=a;function c(l){switch(l){case Oc.ACTIVE:return r.Active;case Oc.PAUSED:return r.Paused;default:return r.Unknown}}e.streamStateFromProto=c})(q||(q={}));function fD(e,t,n){var r;const i=(r=M8(e))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&eI(i.audio,t),i.video&&eI(i.video,n),i}function eI(e,t){return Object.keys(t).forEach(n=>{e[n]===void 0&&(e[n]=t[n])}),e}function Yg(e){const t={};if(e.video)if(typeof e.video=="object"){const n={},r=n,i=e.video;Object.keys(i).forEach(s=>{switch(s){case"resolution":eI(r,i.resolution);break;default:r[s]=i[s]}}),t.video=n}else t.video=e.video;else t.video=!1;return e.audio?typeof e.audio=="object"?t.audio=e.audio:t.audio=!0:t.audio=!1,t}function O8(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return U(this,void 0,void 0,function*(){const n=Pb();if(n){const r=n.createAnalyser();r.fftSize=2048;const i=r.frequencyBinCount,s=new Uint8Array(i);n.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield Ro(t),r.getByteTimeDomainData(s);const a=s.some(c=>c!==128&&c!==0);return n.close(),!a}return!1})}function Pb(){const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e)return new e({latencyHint:"interactive"})}function L8(e){return e===q.Source.Microphone?"audioinput":e===q.Source.Camera?"videoinput":void 0}function B8(e){var t,n;let r=(t=e.video)!==null&&t!==void 0?t:!0;return e.resolution&&(r=typeof r=="boolean"?{}:r,Lc()?r=Object.assign(Object.assign({},r),{width:{max:e.resolution.width},height:{max:e.resolution.height},frameRate:e.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:e.resolution.width},height:{ideal:e.resolution.height},frameRate:e.resolution.frameRate})),{audio:(n=e.audio)!==null&&n!==void 0?n:!1,video:r,controller:e.controller,selfBrowserSurface:e.selfBrowserSurface,surfaceSwitching:e.surfaceSwitching,systemAudio:e.systemAudio}}function hD(e){const t=e.split("/")[1].toLowerCase();if(!uD.includes(t))throw Error("Video codec not supported: ".concat(t));return t}function F8(e){const t=[];return e.forEach(n=>{n.track!==void 0&&t.push(new Vi({cid:n.track.mediaStreamID,track:n.trackInfo}))}),t}const U8="|",qA="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function V8(e){const t=e.split(U8);return t.length>1?[t[0],e.substr(t[0].length+1)]:[e,""]}function Ro(e){return U(this,void 0,void 0,function*(){return new Promise(t=>Dn.setTimeout(t,e))})}function QA(){return"addTransceiver"in RTCPeerConnection.prototype}function eE(){return"addTrack"in RTCPeerConnection.prototype}function G8(){if(!("getCapabilities"in RTCRtpSender)||Lc())return!1;const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/AV1"){t=!0;break}}return t}function W8(){if(!("getCapabilities"in RTCRtpSender)||Cu())return!1;if(Lc()){const n=Va();if(n!=null&&n.version&&Mb(n.version,"16")<0)return!1}const e=RTCRtpSender.getCapabilities("video");let t=!1;if(e){for(const n of e.codecs)if(n.mimeType==="video/VP9"){t=!0;break}}return t}function zd(e){return e==="av1"||e==="vp9"}function tI(e){return document?(e||(e=document.createElement("audio")),"setSinkId"in e):!1}const H8={Chrome:"100",Safari:"15",Firefox:"100"};function j8(e){if(!xr()||!("setCodecPreferences"in e))return!1;const t=Va();if(!(t!=null&&t.name)||!t.version)return!1;const n=H8[t.name];return n?Mb(t.version,n)>=0:!1}function Cu(){var e;return((e=Va())===null||e===void 0?void 0:e.name)==="Firefox"}function $8(){var e;return((e=Va())===null||e===void 0?void 0:e.name)==="Chrome"}function Lc(){var e;return((e=Va())===null||e===void 0?void 0:e.name)==="Safari"}function pD(){return xr()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function xr(){return typeof document<"u"}function Bc(){return navigator.product=="ReactNative"}function nI(e){return e.hostname.endsWith(".livekit.cloud")||e.hostname.endsWith(".livekit.run")}function mD(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function gD(){if(!Bc())return;let e=mD();if(e)return e.platform}function tE(){if(xr())return window.devicePixelRatio;if(Bc()){let e=mD();if(e)return e.devicePixelRatio}return 1}function Mb(e,t){const n=e.split("."),r=t.split("."),i=Math.min(n.length,r.length);for(let s=0;s<i;++s){const o=parseInt(n[s],10),a=parseInt(r[s],10);if(o>a)return 1;if(o<a)return-1;if(s===i-1&&o===a)return 0}return e===""&&t!==""?-1:t===""?1:n.length==r.length?0:n.length<r.length?-1:1}function Z8(e){for(const t of e)t.target.handleResize(t)}function z8(e){for(const t of e)t.target.handleVisibilityChanged(t)}let Dy=null;const nE=()=>(Dy||(Dy=new ResizeObserver(Z8)),Dy);let Oy=null;const rE=()=>(Oy||(Oy=new IntersectionObserver(z8,{root:null,rootMargin:"0px"})),Oy);function X8(){var e;const t=new oo({sdk:yu.JS,protocol:x8,version:R8});return Bc()&&(t.os=(e=gD())!==null&&e!==void 0?e:""),t}function iE(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=e,i.height=t;const s=i.getContext("2d");s==null||s.fillRect(0,0,i.width,i.height),r&&s&&(s.beginPath(),s.arc(e/2,t/2,50,0,Math.PI*2,!0),s.closePath(),s.fillStyle="grey",s.fill());const o=i.captureStream(),[a]=o.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let pd;function Ly(){if(!pd){const e=new AudioContext,t=e.createOscillator(),n=e.createGain();n.gain.setValueAtTime(0,0);const r=e.createMediaStreamDestination();if(t.connect(n),n.connect(r),t.start(),[pd]=r.stream.getAudioTracks(),!pd)throw Error("Could not get empty media stream audio track");pd.enabled=!1}return pd.clone()}class vD{constructor(t,n){this.onFinally=n,this.promise=new Promise((r,i)=>U(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,t&&(yield t(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function K8(e,t){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},t),r=Pb();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?e.mediaStreamTrack.clone():e.mediaStreamTrack,s=r.createMediaStreamSource(new MediaStream([i])),o=r.createAnalyser();o.minDecibels=n.minDecibels,o.maxDecibels=n.maxDecibels,o.fftSize=n.fftSize,o.smoothingTimeConstant=n.smoothingTimeConstant,s.connect(o);const a=new Uint8Array(o.frequencyBinCount);return{calculateVolume:()=>{o.getByteFrequencyData(a);let u=0;for(const f of a)u+=Math.pow(f/255,2);return Math.sqrt(u/a.length)},analyser:o,cleanup:()=>U(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class ji{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t;const n=new Promise(i=>t=()=>{this._locks-=1,i()}),r=this._locking.then(()=>t);return this._locking=this._locking.then(()=>n),r}}function J8(e){return uD.includes(e)}function kc(e){if(typeof e=="string")return e;if(Array.isArray(e))return e[0];if(e.exact)return Array.isArray(e.exact)?e.exact[0]:e.exact;if(e.ideal)return Array.isArray(e.ideal)?e.ideal[0]:e.ideal;throw Error("could not unwrap constraint")}function Y8(e){return e.startsWith("http")?e.replace(/^(http)/,"ws"):e}function sE(e){return e.startsWith("ws")?e.replace(/^(ws)/,"http"):e}const oE="default";class cr{static getInstance(){return this.instance===void 0&&(this.instance=new cr),this.instance}getDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r;return U(this,void 0,void 0,function*(){if(((r=cr.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){L.debug("awaiting getUserMedia promise");try{t?yield cr.userMediaPromiseMap.get(t):yield Promise.all(cr.userMediaPromiseMap.values())}catch{L.warn("error waiting for media permissons")}}let i=yield navigator.mediaDevices.enumerateDevices();if(n&&!(Lc()&&this.hasDeviceInUse(t))&&(i.length===0||i.some(o=>{const a=o.label==="",c=t?o.kind===t:!0;return a&&c}))){const o={video:t!=="audioinput"&&t!=="audiooutput",audio:t!=="videoinput"},a=yield navigator.mediaDevices.getUserMedia(o);i=yield navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(c=>{c.stop()})}return t&&(i=i.filter(s=>s.kind===t)),i})}normalizeDeviceId(t,n,r){return U(this,void 0,void 0,function*(){if(n!==oE)return n;const s=(yield this.getDevices(t)).find(o=>o.groupId===r&&o.deviceId!==oE);return s==null?void 0:s.deviceId})}hasDeviceInUse(t){return t?cr.userMediaPromiseMap.has(t):cr.userMediaPromiseMap.size>0}}cr.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];cr.userMediaPromiseMap=new Map;const q8=1e3;class Iu extends q{get constraints(){return this._constraints}constructor(t,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;super(t,n),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>L.debug("track mute bounce got cancelled by an unmute event")),this.debouncedTrackMuteHandler=Nb(()=>U(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>U(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(he.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new ji,this.pauseUpstreamLock=new ji,this.processorLock=new ji,this.setMediaStreamTrack(t,!0),this._constraints=t.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==q.Kind.Video)return;const{width:t,height:n}=this._mediaStreamTrack.getSettings();if(t&&n)return{width:t,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var t,n;return(n=(t=this.processor)===null||t===void 0?void 0:t.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(t,n){return U(this,void 0,void 0,function*(){if(t===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{Kl(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),!this.providedByUser&&this._mediaStreamTrack!==t&&this._mediaStreamTrack.stop()),this.mediaStream=new MediaStream([t]),t&&(t.addEventListener("ended",this.handleEnded),t.addEventListener("mute",this.handleTrackMuteEvent),t.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=t.getConstraints());let r;if(this.processor&&t&&this.processorElement){if(L.debug("restarting processor"),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");xl(t,this.processorElement),yield this.processor.restart({track:t,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(r??t)),this._mediaStreamTrack=t,t&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{xl(r??t,i)}))})}waitForDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q8;var n;return U(this,void 0,void 0,function*(){if(this.kind===q.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=Va())===null||n===void 0?void 0:n.os)==="iOS"&&(yield Ro(10));const r=Date.now();for(;Date.now()-r<t;){const i=this.dimensions;if(i)return i;yield Ro(50)}throw new cs("unable to get track dimensions after timeout")})}getDeviceId(){return U(this,void 0,void 0,function*(){if(this.source===q.Source.ScreenShare)return;const{deviceId:t,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===q.Kind.Audio?"audioinput":"videoinput";return cr.getInstance().normalizeDeviceId(r,t,n)})}mute(){return U(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return U(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return U(this,void 0,void 0,function*(){if(!this.sender)throw new cs("unable to replace an unpublished track");return L.debug("replace MediaStreamTrack"),yield this.setMediaStreamTrack(t),this.providedByUser=n,this.processor&&(yield this.stopProcessor()),this})}restart(t){return U(this,void 0,void 0,function*(){t||(t=this._constraints),L.debug("restarting track with constraints",t);const n={audio:!1,video:!1};this.kind===q.Kind.Video?n.video=t:n.audio=t,this.attachedElements.forEach(s=>{Kl(this.mediaStreamTrack,s)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const i=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return i.addEventListener("ended",this.handleEnded),L.debug("re-acquired MediaStreamTrack"),yield this.setMediaStreamTrack(i),this._constraints=t,this.emit(he.Restarted,this),this})}setTrackMuted(t){L.debug("setting ".concat(this.kind," track ").concat(t?"muted":"unmuted")),!(this.isMuted===t&&this._mediaStreamTrack.enabled!==t)&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?he.Muted:he.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return U(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),pD()&&(L.debug("visibility changed, is in Background: ".concat(this.isInBackground)),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(L.debug("track needs to be reacquired, restarting ".concat(this.source)),yield this.restart(),this.reacquireTrack=!1))})}stop(){var t;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(t=this.processor)===null||t===void 0||t.destroy(),this.processor=void 0}pauseUpstream(){return U(this,void 0,void 0,function*(){const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){L.warn("unable to pause upstream for an unpublished track");return}this._isUpstreamPaused=!0,this.emit(he.UpstreamPaused,this);const n=Va();if((n==null?void 0:n.name)==="Safari"&&Mb(n.version,"12.0")<0)throw new xb("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{t()}})}resumeUpstream(){return U(this,void 0,void 0,function*(){const t=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){L.warn("unable to resume upstream for an unpublished track");return}this._isUpstreamPaused=!1,this.emit(he.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{t()}})}getRTCStatsReport(){var t;return U(this,void 0,void 0,function*(){return!((t=this.sender)===null||t===void 0)&&t.getStats?yield this.sender.getStats():void 0})}setProcessor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r,i;return U(this,void 0,void 0,function*(){const s=yield this.processorLock.lock();try{if(L.debug("setting up processor"),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(r=this.processorElement)!==null&&r!==void 0?r:document.createElement(this.kind),this.processorElement.muted=!0,xl(this._mediaStreamTrack,this.processorElement),this.processorElement.play().catch(a=>L.error("failed to play processor element",{error:a}));const o={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield t.init(o),this.processor=t,this.processor.processedTrack){for(const a of this.attachedElements)a!==this.processorElement&&n&&(Kl(this._mediaStreamTrack,a),xl(this.processor.processedTrack,a));yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack)}}finally{s()}})}getProcessor(){return this.processor}stopProcessor(){var t,n;return U(this,void 0,void 0,function*(){this.processor&&(L.debug("stopping processor"),(t=this.processor.processedTrack)===null||t===void 0||t.stop(),yield this.processor.destroy(),this.processor=void 0,(n=this.processorElement)===null||n===void 0||n.remove(),this.processorElement=void 0,yield this.restart())})}}class Q8 extends Ws.EventEmitter{constructor(t){super(),this.onWorkerMessage=n=>{var r,i;const{kind:s,data:o}=n.data;switch(s){case"error":L.error(o.error.message),this.emit(Sa.EncryptionError,o.error);break;case"initAck":o.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==o.enabled&&o.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Sa.ParticipantEncryptionStatusChanged,o.enabled,this.room.localParticipant),this.encryptionEnabled=o.enabled;else if(o.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(o.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(o.participantIdentity));this.emit(Sa.ParticipantEncryptionStatusChanged,o.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(Ma.KeyRatcheted,o.material,o.keyIndex);break}},this.onWorkerError=n=>{L.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Sa.EncryptionError,n.error)},this.keyProvider=t.keyProvider,this.worker=t.worker,this.encryptionEnabled=!1}setup(t){if(!w8())throw new xb("tried to setup end-to-end encryption on an unsupported browser");if(L.info("setting up e2ee"),t!==this.room){this.room=t,this.setupEventListeners(t,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(L.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(t,n){L.debug("set e2ee to ".concat(t," for participant ").concat(n)),this.postEnable(t,n)}setSifTrailer(t){!t||t.length===0?L.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(t)}setupEngine(t){t.on(ve.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(t,n){t.on(ne.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Pn.NONE,i.identity)),t.on(ne.ConnectionStateChanged,r=>{r===et.Connected&&t.participants.forEach(i=>{i.tracks.forEach(s=>{this.setParticipantCryptorEnabled(s.trackInfo.encryption!==Pn.NONE,i.identity)})})}).on(ne.TrackUnsubscribed,(r,i,s)=>{var o;const a={kind:"removeTransform",data:{participantIdentity:s.identity,trackId:r.mediaStreamID}};(o=this.worker)===null||o===void 0||o.postMessage(a)}).on(ne.TrackSubscribed,(r,i,s)=>{this.setupE2EEReceiver(r,s.identity,i.trackInfo)}).on(ne.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),t.localParticipant.on(oe.LocalTrackPublished,r=>U(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Ma.SetKey,r=>this.postKey(r)).on(Ma.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(t,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:t,keyIndex:n}};this.worker.postMessage(r)}postKey(t){let{key:n,participantIdentity:r,keyIndex:i}=t;var s;if(!this.worker)throw Error("could not set key, worker is missing");const o={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((s=this.room)===null||s===void 0?void 0:s.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(o)}postEnable(t,n){if(this.worker){const r={kind:"enable",data:{enabled:t,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(t){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:t,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(t){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:t}};this.worker.postMessage(n)}setupE2EEReceiver(t,n,r){if(t.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(t.receiver,t.mediaStreamID,n,t.kind==="video"?hD(r.mimeType):void 0)}}setupE2EESender(t,n){if(!(t instanceof Iu)||!n){n||L.warn("early return because sender is not ready");return}this.handleSender(n,t.mediaStreamID,void 0)}handleReceiver(t,n,r,i){return U(this,void 0,void 0,function*(){if(this.worker){if(YC()){const s={kind:"decode",participantIdentity:r,trackId:n,codec:i};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{if(Kh in t&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let s=t.writableStream,o=t.readableStream;if(!s||!o){const c=t.createEncodedStreams();t.writableStream=c.writable,s=c.writable,t.readableStream=c.readable,o=c.readable}const a={kind:"decode",data:{readableStream:o,writableStream:s,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[o,s])}t[Kh]=!0}})}handleSender(t,n,r){var i;if(!(Kh in t||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(YC()){L.info("initialize script transform");const s={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};t.transform=new RTCRtpScriptTransform(this.worker,s)}else{L.info("initialize encoded streams");const s=t.createEncodedStreams(),o={kind:"encode",data:{readableStream:s.readable,writableStream:s.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(o,[s.readable,s.writable])}t[Kh]=!0}}}var Xd;(function(e){e[e.WAITING=0]="WAITING",e[e.RUNNING=1]="RUNNING",e[e.COMPLETED=2]="COMPLETED"})(Xd||(Xd={}));class eZ{constructor(){this.pendingTasks=new Map,this.taskMutex=new ji,this.nextTaskIndex=0}run(t){return U(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Xd.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Xd.RUNNING,yield t()}finally{n.status=Xd.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return U(this,void 0,void 0,function*(){return this.run(()=>U(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const tZ=["syncState","trickle","offer","answer","simulate","leave"];function nZ(e){const t=tZ.indexOf(e.case)>=0;return L.trace("request allowed to bypass queue:",{canPass:t,req:e}),t}var Cn;(function(e){e[e.CONNECTING=0]="CONNECTING",e[e.CONNECTED=1]="CONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e[e.DISCONNECTING=3]="DISCONNECTING",e[e.DISCONNECTED=4]="DISCONNECTED"})(Cn||(Cn={}));class Db{get currentState(){return this.state}get isDisconnected(){return this.state===Cn.DISCONNECTING||this.state===Cn.DISCONNECTED}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.rtt=0,this.state=Cn.DISCONNECTED,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.useJSON=t,this.requestQueue=new eZ,this.queuedRequests=[],this.closingLock=new ji,this.connectionLock=new ji,this.state=Cn.DISCONNECTED}join(t,n,r,i){return U(this,void 0,void 0,function*(){return this.state=Cn.CONNECTING,this.options=r,yield this.connect(t,n,r,i)})}reconnect(t,n,r,i){return U(this,void 0,void 0,function*(){if(!this.options){L.warn("attempted to reconnect without signal options being set, ignoring");return}return this.state=Cn.RECONNECTING,this.clearPingInterval(),yield this.connect(t,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(t,n,r,i){this.connectOptions=r,t=Y8(t),t=t.replace(/\/$/,""),t+="/rtc";const s=X8(),o=rZ(n,s,r);return new Promise((a,c)=>U(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();try{const u=()=>U(this,void 0,void 0,function*(){this.close(),clearTimeout(d),c(new Bt("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),c(new Bt("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),L.debug("connecting to ".concat(t+o)),this.ws&&(yield this.close()),this.ws=new WebSocket(t+o),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=f=>U(this,void 0,void 0,function*(){if(this.state!==Cn.CONNECTED){clearTimeout(d);try{const h=yield fetch("http".concat(t.substring(2),"/validate").concat(o));if(h.status.toFixed(0).startsWith("4")){const p=yield h.text();c(new Bt(p,0,h.status))}else c(new Bt("Internal error",2,h.status))}catch{c(new Bt("server was not reachable",1))}return}this.handleWSError(f)}),this.ws.onmessage=f=>U(this,void 0,void 0,function*(){var h,p,m,y;let g;if(typeof f.data=="string"){const v=JSON.parse(f.data);g=Is.fromJson(v)}else if(f.data instanceof ArrayBuffer)g=Is.fromBinary(new Uint8Array(f.data));else{L.error("could not decode websocket message: ".concat(typeof f.data));return}if(this.state!==Cn.CONNECTED){let v=!1;if(((h=g.message)===null||h===void 0?void 0:h.case)==="join"?(this.state=Cn.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=g.message.value.pingTimeout,this.pingIntervalDuration=g.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(L.debug("ping config",{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration}),this.startPingInterval()),a(g.message.value)):this.state===Cn.RECONNECTING?(this.state=Cn.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((p=g.message)===null||p===void 0?void 0:p.case)==="reconnect"?a((m=g.message)===null||m===void 0?void 0:m.value):(a(),v=!0)):r.reconnect||c(new Bt("did not receive join response, got ".concat((y=g.message)===null||y===void 0?void 0:y.case," instead"))),!v)return}this.signalLatency&&(yield Ro(this.signalLatency)),this.handleSignalResponse(g)}),this.ws.onclose=f=>{L.warn("websocket closed",{ev:f}),this.handleOnClose(f.reason)}}finally{l()}}))}close(){return U(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();try{if(this.state=Cn.DISCONNECTING,this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const n=new Promise(r=>{this.ws?this.ws.onclose=()=>{r()}:r()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([n,Ro(250)])),this.ws=void 0}}finally{this.state=Cn.DISCONNECTED,this.clearPingInterval(),t()}})}sendOffer(t){L.debug("sending offer",t),this.sendRequest({case:"offer",value:Jm(t)})}sendAnswer(t){return L.debug("sending answer"),this.sendRequest({case:"answer",value:Jm(t)})}sendIceCandidate(t,n){return L.trace("sending ice candidate",t),this.sendRequest({case:"trickle",value:new Fi({candidateInit:JSON.stringify(t),target:n})})}sendMuteTrack(t,n){return this.sendRequest({case:"mute",value:new Ui({sid:t,muted:n})})}sendAddTrack(t){return this.sendRequest({case:"addTrack",value:t})}sendUpdateLocalMetadata(t,n){return this.sendRequest({case:"updateMetadata",value:new ws({metadata:t,name:n})})}sendUpdateTrackSettings(t){this.sendRequest({case:"trackSetting",value:t})}sendUpdateSubscription(t){return this.sendRequest({case:"subscription",value:t})}sendSyncState(t){return this.sendRequest({case:"syncState",value:t})}sendUpdateVideoLayers(t,n){return this.sendRequest({case:"updateLayers",value:new bs({trackSid:t,layers:n})})}sendUpdateSubscriptionPermissions(t,n){return this.sendRequest({case:"subscriptionPermission",value:new Es({allParticipants:t,trackPermissions:n})})}sendSimulateScenario(t){return this.sendRequest({case:"simulate",value:t})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Le.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Rs({timestamp:Le.parse(Date.now()),rtt:Le.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new ui({canReconnect:!1,reason:_o.CLIENT_INITIATED})})}sendRequest(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return U(this,void 0,void 0,function*(){if(!n&&!nZ(t)&&this.state===Cn.RECONNECTING){this.queuedRequests.push(()=>U(this,void 0,void 0,function*(){yield this.sendRequest(t,!0)}));return}if(n||(yield this.requestQueue.flush()),this.signalLatency&&(yield Ro(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){L.error("cannot send signal request before connected, type: ".concat(t==null?void 0:t.case));return}const i=new co({message:t});try{this.useJSON?this.ws.send(i.toJsonString()):this.ws.send(i.toBinary())}catch(s){L.error("error sending signal message",{error:s})}})}handleSignalResponse(t){var n,r;const i=t.message;if(i==null){L.debug("received unsupported message");return}let s=!1;if(i.case==="answer"){const o=aE(i.value);this.onAnswer&&this.onAnswer(o)}else if(i.case==="offer"){const o=aE(i.value);this.onOffer&&this.onOffer(o)}else if(i.case==="trickle"){const o=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(o,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),s=!0):L.debug("unsupported message",i));s||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const t=this.queuedRequests.shift();t&&this.requestQueue.run(t)}}handleOnClose(t){return U(this,void 0,void 0,function*(){if(this.state===Cn.DISCONNECTED)return;const n=this.onClose;yield this.close(),L.debug("websocket connection closed: ".concat(t)),n&&n(t)})}handleWSError(t){L.error("websocket error",t)}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){L.warn("ping timeout duration not set");return}this.pingTimeout=Dn.setTimeout(()=>{L.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString())),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Dn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){L.warn("ping interval duration not set");return}L.debug("start ping interval"),this.pingInterval=Dn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){L.debug("clearing ping interval"),this.clearPingTimeout(),this.pingInterval&&Dn.clearInterval(this.pingInterval)}}function aE(e){const t={type:"offer",sdp:e.sdp};switch(e.type){case"answer":case"offer":case"pranswer":case"rollback":t.type=e.type;break}return t}function Jm(e){return new hr({sdp:e.sdp,type:e.type})}function rZ(e,t,n){var r;const i=new URLSearchParams;return i.set("access_token",e),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Bc()?"reactnative":"js"),i.set("version",t.version),i.set("protocol",t.protocol.toString()),t.deviceModel&&i.set("device_model",t.deviceModel),t.os&&i.set("os",t.os),t.osVersion&&i.set("os_version",t.osVersion),t.browser&&i.set("browser",t.browser),t.browserVersion&&i.set("browser_version",t.browserVersion),n.publishOnly!==void 0&&i.set("publish",n.publishOnly),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var yD={},CD={exports:{}},cE=CD.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var t="candidate:%s %d %s %d %s %d typ %s";return t+=e.raddr!=null?" raddr %s rport %d":"%v%v",t+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(t+=" generation %d"),t+=e["network-id"]!=null?" network-id %d":"%v",t+=e["network-cost"]!=null?" network-cost %d":"%v",t}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var t="ssrc:%d";return e.attribute!=null&&(t+=" %s",e.value!=null&&(t+=":%s")),t}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var t="mediaclk:";return t+=e.id!=null?"id=%s %s":"%v%s",t+=e.mediaClockValue!=null?"=%s":"",t+=e.rateNumerator!=null?" rate=%s":"",t+=e.rateDenominator!=null?"/%s":"",t}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(cE).forEach(function(e){var t=cE[e];t.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var ID=CD.exports;(function(e){var t=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=t(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=t(a[d+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=ID,s=RegExp.prototype.test.bind(/^([a-z])=(.*)/);e.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(s).forEach(function(d){var f=d[0],h=d.slice(2);f==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var p=0;p<(i[f]||[]).length;p+=1){var m=i[f][p];if(m.reg.test(h))return r(m,u,h)}}),c.media=l,c};var o=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=t(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};e.parseParams=function(a){return a.split(/;\s?/).reduce(o,{})},e.parseFmtpConfig=e.parseParams,e.parsePayloads=function(a){return a.toString().split(" ").map(Number)},e.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(t),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},e.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(o,{})})},e.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=t(l):(u=t(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(yD);var By=ID,iZ=/%[sdv%]/g,sZ=function(e){var t=1,n=arguments,r=n.length;return e.replace(iZ,function(i){if(t>=r)return i;var s=n[t];switch(t+=1,i){case"%%":return"%";case"%s":return String(s);case"%d":return Number(s);case"%v":return""}})},md=function(e,t,n){var r=t.format instanceof Function?t.format(t.push?n:n[t.name]):t.format,i=[e+"="+r];if(t.names)for(var s=0;s<t.names.length;s+=1){var o=t.names[s];t.name?i.push(n[t.name][o]):i.push(n[t.names[s]])}else i.push(n[t.name]);return sZ.apply(null,i)},oZ=["v","o","s","i","u","e","p","c","b","t","r","z","a"],aZ=["i","c","b","a"],cZ=function(e,t){t=t||{},e.version==null&&(e.version=0),e.name==null&&(e.name=" "),e.media.forEach(function(s){s.payloads==null&&(s.payloads="")});var n=t.outerOrder||oZ,r=t.innerOrder||aZ,i=[];return n.forEach(function(s){By[s].forEach(function(o){o.name in e&&e[o.name]!=null?i.push(md(s,o,e)):o.push in e&&e[o.push]!=null&&e[o.push].forEach(function(a){i.push(md(s,o,a))})})}),e.media.forEach(function(s){i.push(md("m",By.m[0],s)),r.forEach(function(o){By[o].forEach(function(a){a.name in s&&s[a.name]!=null?i.push(md(o,a,s)):a.push in s&&s[a.push]!=null&&s[a.push].forEach(function(c){i.push(md(o,a,c))})})})}),i.join(`\r
`)+`\r
`},lZ=yD,uZ=cZ,Fy=uZ,Nd=lZ.parse;const lE=.7,Jl={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class uE extends Ws.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=Nb(r=>U(this,void 0,void 0,function*(){this.emit(Jl.NegotiationStarted);try{yield this.createAndSendOffer()}catch(i){if(r)r(i);else throw i}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.config=t,this.mediaConstraints=n,this._pc=this.createPC()}createPC(){const t=$8()?new RTCPeerConnection(this.config,this.mediaConstraints):new RTCPeerConnection(this.config);return t.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},t.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},t.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,t.iceConnectionState)},t.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,t.signalingState)},t.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,t.connectionState)},t.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},t.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},t}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(t){return U(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(t);this.pendingCandidates.push(t)})}setRemoteDescription(t){var n;return U(this,void 0,void 0,function*(){let r;if(t.type==="offer"){let{stereoMids:i,nackMids:s}=fZ(t);this.remoteStereoMids=i,this.remoteNackMids=s}else if(t.type==="answer"){const i=Nd((n=t.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{s.type==="audio"&&this.trackBitrates.some(o=>{if(!o.transceiver||s.mid!=o.transceiver.mid)return!1;let a=0;if(s.rtp.some(l=>l.codec.toUpperCase()===o.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of s.fmtp)if(l.payload===a){l.config=l.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),o.maxbr>0&&(l.config+=";maxaveragebitrate=".concat(o.maxbr*1e3)),c=!0;break}return c||o.maxbr>0&&s.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(o.maxbr*1e3)}),!0})}),r=Fy(i)}yield this.setMungedSDP(t,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):t.type==="answer"&&(this.emit(Jl.NegotiationComplete),t.sdp&&Nd(t.sdp).media.forEach(s=>{s.type==="video"&&this.emit(Jl.RTPVideoPayloadTypes,s.rtp)}))})}createAndSendOffer(t){var n;return U(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(t!=null&&t.iceRestart&&(L.debug("restarting ICE"),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const s=this._pc.remoteDescription;if(t!=null&&t.iceRestart&&s)yield this._pc.setRemoteDescription(s);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){L.warn("could not createOffer with closed peer connection");return}L.debug("starting to negotiate");const r=yield this.pc.createOffer(t),i=Nd((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(s=>{s.type==="audio"?dE(s,[],[]):s.type==="video"&&(dZ(s),this.trackBitrates.some(o=>{if(!s.msid||!o.cid||!s.msid.includes(o.cid))return!1;let a=0;if(s.rtp.some(l=>l.codec.toUpperCase()===o.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of s.fmtp)if(l.payload===a){l.config.includes("x-google-start-bitrate")||(l.config+=";x-google-start-bitrate=".concat(Math.round(o.maxbr*lE))),l.config.includes("x-google-max-bitrate")||(l.config+=";x-google-max-bitrate=".concat(o.maxbr)),c=!0;break}return c||s.fmtp.push({payload:a,config:"x-google-start-bitrate=".concat(Math.round(o.maxbr*lE),";x-google-max-bitrate=").concat(o.maxbr)}),!0}))}),yield this.setMungedSDP(r,Fy(i)),this.onOffer(r)})}createAndSetAnswer(){var t;return U(this,void 0,void 0,function*(){const n=yield this.pc.createAnswer(),r=Nd((t=n.sdp)!==null&&t!==void 0?t:"");return r.media.forEach(i=>{i.type==="audio"&&dE(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Fy(r)),n})}createDataChannel(t,n){return this.pc.createDataChannel(t,n)}addTransceiver(t,n){return this.pc.addTransceiver(t,n)}addTrack(t){if(!this._pc)throw new on("PC closed, cannot add track");return this._pc.addTrack(t)}setTrackCodecBitrate(t){this.trackBitrates.push(t)}setConfiguration(t){var n;if(!this._pc)throw new on("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(t)}canRemoveTrack(){var t;return!!(!((t=this._pc)===null||t===void 0)&&t.removeTrack)}removeTrack(t){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(t)}getConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var t,n;return(n=(t=this._pc)===null||t===void 0?void 0:t.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var t;return(t=this._pc)===null||t===void 0?void 0:t.localDescription}getRemoteDescription(){var t;return(t=this.pc)===null||t===void 0?void 0:t.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var t;return U(this,void 0,void 0,function*(){if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const o=(t=r.get(n))===null||t===void 0?void 0:t.remoteCandidateId;if(o!==void 0)return i.get(o)})}setMungedSDP(t,n,r){return U(this,void 0,void 0,function*(){if(n){const i=t.sdp;t.sdp=n;try{L.debug("setting munged ".concat(r?"remote":"local"," description")),r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t);return}catch(s){L.warn("not able to set ".concat(t.type,", falling back to unmodified sdp"),{error:s,sdp:n}),t.sdp=i}}try{r?yield this.pc.setRemoteDescription(t):yield this.pc.setLocalDescription(t)}catch(i){let s="unknown error";i instanceof Error?s=i.message:typeof i=="string"&&(s=i);const o={error:s,sdp:t.sdp};throw!r&&this.pc.remoteDescription&&(o.remoteSdp=this.pc.remoteDescription),L.error("unable to set ".concat(t.type),o),new qC(s)}})}}function dE(e,t,n){let r=0;e.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(e.rtcpFb||(e.rtcpFb=[]),n.includes(e.mid)&&!e.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&e.rtcpFb.push({payload:r,type:"nack"}),t.includes(e.mid)&&e.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function dZ(e){var t,n,r,i;const s=(n=(t=e.rtp[0])===null||t===void 0?void 0:t.codec)===null||n===void 0?void 0:n.toLowerCase();if(!zd(s))return;let o=0;((r=e.ext)===null||r===void 0?void 0:r.some(c=>c.uri===qA?!0:(c.value>o&&(o=c.value),!1)))||(i=e.ext)===null||i===void 0||i.push({value:o+1,uri:qA})}function fZ(e){var t;const n=[],r=[],i=Nd((t=e.sdp)!==null&&t!==void 0?t:"");let s=0;return i.media.forEach(o=>{var a;o.type==="audio"&&(o.rtp.some(c=>c.codec==="opus"?(s=c.payload,!0):!1),!((a=o.rtcpFb)===null||a===void 0)&&a.some(c=>c.payload===s&&c.type==="nack")&&r.push(o.mid),o.fmtp.some(c=>c.payload===s?(c.config.includes("sprop-stereo=1")&&n.push(o.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const rI="vp8",hZ={audioBitrate:Xm.music.maxBitrate,audioPreset:Xm.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:dD.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:rI,backupCodec:!0},SD={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},bD={resolution:Mf.h720.resolution},pZ={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new s8,disconnectOnPageLeave:!0,expWebAudioMix:!1},Ob={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var cn;(function(e){e[e.NEW=0]="NEW",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED",e[e.FAILED=3]="FAILED",e[e.CLOSING=4]="CLOSING",e[e.CLOSED=5]="CLOSED"})(cn||(cn={}));class mZ{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(t,n){this.peerConnectionTimeout=Ob.peerConnectionTimeout,this.updateState=()=>{var i;const s=this.state,o=this.requiredTransports.map(a=>a.getConnectionState());o.every(a=>a==="connected")?this.state=cn.CONNECTED:o.some(a=>a==="failed")?this.state=cn.FAILED:o.some(a=>a==="connecting")?this.state=cn.CONNECTING:o.every(a=>a==="closed")?this.state=cn.CLOSED:o.some(a=>a==="closed")?this.state=cn.CLOSING:o.every(a=>a==="new")&&(this.state=cn.NEW),s!==this.state&&(L.debug("pc state change: from ".concat(cn[s]," to ").concat(cn[this.state])),(i=this.onStateChange)===null||i===void 0||i.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n;const r={optional:[{googDscp:!0}]};this.publisher=new uE(t,r),this.subscriber=new uE(t),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=i=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,i,Xn.PUBLISHER)},this.subscriber.onIceCandidate=i=>{var s;(s=this.onIceCandidate)===null||s===void 0||s.call(this,i,Xn.SUBSCRIBER)},this.subscriber.onDataChannel=i=>{var s;(s=this.onDataChannel)===null||s===void 0||s.call(this,i)},this.subscriber.onTrack=i=>{var s;(s=this.onTrack)===null||s===void 0||s.call(this,i)},this.publisher.onOffer=i=>{var s;(s=this.onPublisherOffer)===null||s===void 0||s.call(this,i)},this.state=cn.NEW,this.connectionLock=new ji}requirePublisher(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=t,this.updateState()}requireSubscriber(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=t,this.updateState()}createAndSendPublisherOffer(t){return this.publisher.createAndSendOffer(t)}setPublisherAnswer(t){return this.publisher.setRemoteDescription(t)}removeTrack(t){return this.publisher.removeTrack(t)}close(){return U(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const t=this.publisher;for(const n of t.getSenders())try{t.canRemoveTrack()&&t.removeTrack(n)}catch(r){L.warn("could not removeTrack",{error:r})}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return U(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(t,n){return U(this,void 0,void 0,function*(){n===Xn.PUBLISHER?yield this.publisher.addIceCandidate(t):yield this.subscriber.addIceCandidate(t)})}createSubscriberAnswerFromOffer(t){return U(this,void 0,void 0,function*(){return L.debug("received server offer",{RTCSdpType:t.type,signalingState:this.subscriber.getSignallingState().toString()}),yield this.subscriber.setRemoteDescription(t),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(t,n){this.publisher.setConfiguration(t),this.subscriber.setConfiguration(t),n&&this.triggerIceRestart()}ensurePCTransportConnection(t,n){var r;return U(this,void 0,void 0,function*(){const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(L.debug("negotiation required, start negotiating"),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(s=>this.ensureTransportConnected(s,t,n)))}finally{i()}})}negotiate(t){return U(this,void 0,void 0,function*(){return new Promise((n,r)=>U(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),s=()=>{clearTimeout(i),r("negotiation aborted")};t.signal.addEventListener("abort",s),this.publisher.once(Jl.NegotiationStarted,()=>{t.signal.aborted||this.publisher.once(Jl.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(o=>{clearTimeout(i),r(o)})}))})}addPublisherTransceiver(t,n){return this.publisher.addTransceiver(t,n)}addPublisherTrack(t){return this.publisher.addTrack(t)}createPublisherDataChannel(t,n){return this.publisher.createDataChannel(t,n)}getConnectedAddress(t){return t===Xn.PUBLISHER?this.publisher.getConnectedAddress():t===Xn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const t=[];return this.isPublisherConnectionRequired&&t.push(this.publisher),this.isSubscriberConnectionRequired&&t.push(this.subscriber),t}ensureTransportConnected(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return U(this,void 0,void 0,function*(){if(t.getConnectionState()!=="connected")return new Promise((s,o)=>U(this,void 0,void 0,function*(){const a=()=>{L.warn("abort transport connection"),Dn.clearTimeout(c),o(new Bt("room connection has been cancelled",3))};n!=null&&n.signal.aborted&&a(),n==null||n.signal.addEventListener("abort",a);const c=Dn.setTimeout(()=>{n==null||n.signal.removeEventListener("abort",a),o(new Bt("could not establish pc connection"))},r);for(;this.state!==cn.CONNECTED;)if(yield Ro(50),n!=null&&n.signal.aborted){o(new Bt("room connection has been cancelled",3));return}Dn.clearTimeout(c),n==null||n.signal.removeEventListener("abort",a),s()}))})}}const fE="_lossy",hE="_reliable",gZ=2*1e3,pE="leave-reconnect";var Ci;(function(e){e[e.New=0]="New",e[e.Connected=1]="Connected",e[e.Disconnected=2]="Disconnected",e[e.Reconnecting=3]="Reconnecting",e[e.Closed=4]="Closed"})(Ci||(Ci={}));class vZ extends Ws.EventEmitter{get isClosed(){return this._isClosed}constructor(t){super(),this.options=t,this.rtcConfig={},this.peerConnectionTimeout=Ob.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=Ci.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.handleDataChannel=n=>{let{channel:r}=n;return U(this,void 0,void 0,function*(){if(r){if(r.label===hE)this.reliableDCSub=r;else if(r.label===fE)this.lossyDCSub=r;else return;L.debug("on data channel ".concat(r.id,", ").concat(r.label)),r.onmessage=this.handleDataMessage}})},this.handleDataMessage=n=>U(this,void 0,void 0,function*(){var r,i;const s=yield this.dataProcessLock.lock();try{let o;if(n.data instanceof ArrayBuffer)o=n.data;else if(n.data instanceof Blob)o=yield n.data.arrayBuffer();else{L.error("unsupported data type",n.data);return}const a=hs.fromBinary(new Uint8Array(o));((r=a.value)===null||r===void 0?void 0:r.case)==="speaker"?this.emit(ve.ActiveSpeakersUpdate,a.value.value.speakers):((i=a.value)===null||i===void 0?void 0:i.case)==="user"&&this.emit(ve.DataPacketReceived,a.value.value,a.kind)}finally{s()}}),this.handleDataError=n=>{const i=n.currentTarget.maxRetransmits===0?"lossy":"reliable";if(n instanceof ErrorEvent&&n.error){const{error:s}=n.error;L.error("DataChannel error on ".concat(i,": ").concat(n.message),s)}else L.error("Unknown DataChannel error on ".concat(i),n)},this.handleBufferedAmountLow=n=>{const i=n.currentTarget.maxRetransmits===0?an.LOSSY:an.RELIABLE;this.updateAndEmitDCBufferStatus(i)},this.handleDisconnect=(n,r)=>{if(this._isClosed)return;L.warn("".concat(n," disconnected")),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const i=a=>{L.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(a,"ms. giving up")),this.emit(ve.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let o=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(o===null){i(s);return}n===pE&&(o=0),L.debug("reconnecting in ".concat(o,"ms")),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Dn.setTimeout(()=>this.attemptReconnect(r),o)},this.waitForRestarted=()=>new Promise((n,r)=>{this.pcState===Ci.Connected&&n();const i=()=>{this.off(ve.Disconnected,s),n()},s=()=>{this.off(ve.Restarted,i),r()};this.once(ve.Restarted,i),this.once(ve.Disconnected,s)}),this.updateAndEmitDCBufferStatus=n=>{const r=this.isBufferStatusLow(n);typeof r<"u"&&r!==this.dcBufferStatus.get(n)&&(this.dcBufferStatus.set(n,r),this.emit(ve.DCBufferStatusChanged,r,n))},this.isBufferStatusLow=n=>{const r=this.dataChannelForKind(n);if(r)return r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Cn.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Ks.RR_SIGNAL_DISCONNECTED))},this.client=new Db,this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new ji,this.dataProcessLock=new ji,this.dcBufferStatus=new Map([[an.LOSSY,!0],[an.RELIABLE,!0]]),this.client.onParticipantUpdate=n=>this.emit(ve.ParticipantUpdate,n),this.client.onConnectionQuality=n=>this.emit(ve.ConnectionQualityUpdate,n),this.client.onRoomUpdate=n=>this.emit(ve.RoomUpdate,n),this.client.onSubscriptionError=n=>this.emit(ve.SubscriptionError,n),this.client.onSubscriptionPermissionUpdate=n=>this.emit(ve.SubscriptionPermissionUpdate,n),this.client.onSpeakersChanged=n=>this.emit(ve.SpeakersChanged,n),this.client.onStreamStateUpdate=n=>this.emit(ve.StreamStateChanged,n)}join(t,n,r,i){return U(this,void 0,void 0,function*(){this.url=t,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const s=yield this.client.join(t,n,r,i);return this._isClosed=!1,this.latestJoinResponse=s,this.subscriberPrimary=s.subscriberPrimary,this.pcManager||(yield this.configure(s)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=s.clientConfiguration,s}catch(s){if(s instanceof Bt&&s.reason===1&&(L.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts)),this.joinAttempts<this.maxJoinAttempts))return this.join(t,n,r,i);throw s}})}close(){return U(this,void 0,void 0,function*(){const t=yield this.closingLock.lock();if(this.isClosed){t();return}try{this._isClosed=!0,this.emit(ve.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{t()}})}cleanupPeerConnections(){var t;return U(this,void 0,void 0,function*(){yield(t=this.pcManager)===null||t===void 0?void 0:t.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return U(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(t){if(this.pendingTrackResolvers[t.cid])throw new cs("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[t.cid],r(new Bt("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[t.cid]={resolve:s=>{clearTimeout(i),n(s)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(t)})}removeTrack(t){if(t.track&&this.pendingTrackResolvers[t.track.id]){const{reject:n}=this.pendingTrackResolvers[t.track.id];n&&n(),delete this.pendingTrackResolvers[t.track.id]}try{return this.pcManager.removeTrack(t),!0}catch(n){L.warn("failed to remove track",{error:n,method:"removeTrack"})}return!1}updateMuteStatus(t,n){this.client.sendMuteTrack(t,n)}get dataSubscriberReadyState(){var t;return(t=this.reliableDCSub)===null||t===void 0?void 0:t.readyState}getConnectedServerAddress(){var t;return U(this,void 0,void 0,function*(){return(t=this.pcManager)===null||t===void 0?void 0:t.getConnectedAddress()})}setRegionUrlProvider(t){this.regionUrlProvider=t}configure(t){var n;return U(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==cn.NEW)return;this.participantSid=(n=t.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(t);this.pcManager=new mZ(r,t.subscriberPrimary),this.emit(ve.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(i,s)=>{this.client.sendIceCandidate(i,s)},this.pcManager.onPublisherOffer=i=>{this.client.sendOffer(i)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(i,s,o)=>U(this,void 0,void 0,function*(){if(L.debug("primary PC state changed ".concat(i)),i===cn.CONNECTED){const a=this.pcState===Ci.New;this.pcState=Ci.Connected,a&&this.emit(ve.Connected,t)}else i===cn.FAILED&&this.pcState===Ci.Connected&&(this.pcState=Ci.Disconnected,this.handleDisconnect("peerconnection failed",o==="failed"?Ks.RR_SUBSCRIBER_FAILED:Ks.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=i=>{this.emit(ve.MediaTrackAdded,i.track,i.streams[0],i.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=t=>U(this,void 0,void 0,function*(){this.pcManager&&(L.debug("received server answer",{RTCSdpType:t.type}),yield this.pcManager.setPublisherAnswer(t))}),this.client.onTrickle=(t,n)=>{this.pcManager&&(L.trace("got ICE candidate from peer",{candidate:t,target:n}),this.pcManager.addIceCandidate(t,n))},this.client.onOffer=t=>U(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(t);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=t=>{if(L.debug("received trackPublishedResponse",t),!this.pendingTrackResolvers[t.cid]){L.error("missing track resolver for ".concat(t.cid));return}const{resolve:n}=this.pendingTrackResolvers[t.cid];delete this.pendingTrackResolvers[t.cid],n(t.track)},this.client.onTokenRefresh=t=>{this.token=t},this.client.onRemoteMuteChanged=(t,n)=>{this.emit(ve.RemoteMute,t,n)},this.client.onSubscribedQualityUpdate=t=>{this.emit(ve.SubscribedQualityUpdate,t)},this.client.onClose=()=>{this.handleDisconnect("signal",Ks.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=t=>{t!=null&&t.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(pE)):(this.emit(ve.Disconnected,t==null?void 0:t.reason),this.close()),L.trace("leave request",{leave:t})}}makeRTCConfiguration(t){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(L.debug("E2EE - setting up transports with insertable streams"),r.encodedInsertableStreams=!0),t.iceServers&&!r.iceServers){const i=[];t.iceServers.forEach(s=>{const o={urls:s.urls};s.username&&(o.username=s.username),s.credential&&(o.credential=s.credential),i.push(o)}),r.iceServers=i}return t.clientConfiguration&&t.clientConfiguration.forceRelay===Xi.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(fE,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(hE,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(t,n,r){if(!("getCapabilities"in RTCRtpSender))return;const i=RTCRtpSender.getCapabilities(n);if(!i)return;L.debug("get capabilities",i);const s=[],o=[],a=[];i.codecs.forEach(c=>{const l=c.mimeType.toLowerCase();if(l==="audio/opus"){s.push(c);return}if(!(l==="video/".concat(r))){a.push(c);return}if(r==="h264"){c.sdpFmtpLine&&c.sdpFmtpLine.includes("profile-level-id=42e01f")?s.push(c):o.push(c);return}s.push(c)}),j8(t)&&t.setCodecPreferences(s.concat(o,a))}createSender(t,n,r){return U(this,void 0,void 0,function*(){if(QA())return yield this.createTransceiverRTCRtpSender(t,n,r);if(eE())return L.warn("using add-track fallback"),yield this.createRTCRtpSender(t.mediaStreamTrack);throw new on("Required webRTC APIs not supported on this device")})}createSimulcastSender(t,n,r,i){return U(this,void 0,void 0,function*(){if(QA())return this.createSimulcastTransceiverSender(t,n,r,i);if(eE())return L.debug("using add-track fallback"),this.createRTCRtpSender(t.mediaStreamTrack);throw new on("Cannot stream on this device")})}createTransceiverRTCRtpSender(t,n,r){return U(this,void 0,void 0,function*(){if(!this.pcManager)throw new on("publisher is closed");const i=[];t.mediaStream&&i.push(t.mediaStream);const s={direction:"sendonly",streams:i};r&&(s.sendEncodings=r);const o=yield this.pcManager.addPublisherTransceiver(t.mediaStreamTrack,s);return t.kind===q.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(o,t.kind,n.videoCodec),t.codec=n.videoCodec),o.sender})}createSimulcastTransceiverSender(t,n,r,i){return U(this,void 0,void 0,function*(){if(!this.pcManager)throw new on("publisher is closed");const s={direction:"sendonly"};i&&(s.sendEncodings=i);const o=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,s);if(r.videoCodec)return this.setPreferredCodec(o,t.kind,r.videoCodec),t.setSimulcastTrackSender(r.videoCodec,o.sender),o.sender})}createRTCRtpSender(t){return U(this,void 0,void 0,function*(){if(!this.pcManager)throw new on("publisher is closed");return this.pcManager.addPublisherTrack(t)})}attemptReconnect(t){var n,r,i;return U(this,void 0,void 0,function*(){if(!this._isClosed&&!this.attemptingReconnect){(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===Xi.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:cn.NEW)===cn.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(t),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(s){this.reconnectAttempts+=1;let o=!0;s instanceof on?(L.debug("received unrecoverable error",{error:s}),o=!1):s instanceof Jh||(this.fullReconnectOnNext=!0),o?this.handleDisconnect("reconnect",Ks.RR_UNKNOWN):(L.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up")),this.emit(ve.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(t){try{return this.reconnectPolicy.nextRetryDelayInMs(t)}catch(n){L.warn("encountered error in reconnect policy",{error:n})}return null}restartConnection(t){var n,r,i;return U(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new on("could not reconnect, url or token not saved");L.info("reconnecting, attempt: ".concat(this.reconnectAttempts)),this.emit(ve.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let s;try{if(!this.signalOpts)throw L.warn("attempted connection restart, without signal options present"),new Jh;s=yield this.join(t??this.url,this.token,this.signalOpts)}catch(o){throw o instanceof Bt&&o.reason===0?new on("could not reconnect, token might be expired"):new Jh}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");this.client.setReconnected(),this.emit(ve.SignalRestarted,s),yield this.waitForPCReconnected(),(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(ve.Restarted)}catch(s){const o=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(o){yield this.restartConnection(o);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),s}})}resumeConnection(t){var n;return U(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new on("could not reconnect, url or token not saved");if(!this.pcManager)throw new on("publisher and subscriber connections unset");L.info("resuming signal connection, attempt ".concat(this.reconnectAttempts)),this.emit(ve.Resuming);try{this.setupSignalClientCallbacks();const r=yield this.client.reconnect(this.url,this.token,this.participantSid,t);if(r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}}catch(r){let i="";throw r instanceof Error&&(i=r.message,L.error(r.message)),r instanceof Bt&&r.reason===0?new on("could not reconnect, token might be expired"):new Jh(i)}if(this.emit(ve.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(ve.Resumed)})}waitForPCInitialConnection(t,n){return U(this,void 0,void 0,function*(){if(!this.pcManager)throw new on("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,t)})}waitForPCReconnected(){return U(this,void 0,void 0,function*(){this.pcState=Ci.Reconnecting,L.debug("waiting for peer connection to reconnect");try{if(yield Ro(gZ),!this.pcManager)throw new on("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Ci.Connected}catch(t){throw this.pcState=Ci.Disconnected,new Bt("could not establish PC connection, ".concat(t.message))}})}sendDataPacket(t,n){return U(this,void 0,void 0,function*(){const r=t.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var r;return U(this,void 0,void 0,function*(){if(!this.pcManager)throw new on("PC manager is closed");const i=n?this.pcManager.subscriber:this.pcManager.publisher,s=n?"Subscriber":"Publisher";if(!i)throw new Bt("".concat(s," connection not set"));!n&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const o=this.dataChannelForKind(t,n);if((o==null?void 0:o.readyState)==="open")return;const a=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<a;){if(i.isICEConnected&&((r=this.dataChannelForKind(t,n))===null||r===void 0?void 0:r.readyState)==="open")return;yield Ro(50)}throw new Bt("could not establish ".concat(s," connection, state: ").concat(i.getICEConnectionState()))})}ensurePublisherConnected(t){return U(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(t,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==cn.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return U(this,void 0,void 0,function*(){return new Promise((t,n)=>U(this,void 0,void 0,function*(){if(!this.pcManager){n(new qC("PC manager is closed"));return}this.pcManager.requirePublisher();const r=new AbortController,i=()=>{r.abort(),L.debug("engine disconnected while negotiation was ongoing"),t()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(ve.Closing,i),this.pcManager.publisher.once(Jl.RTPVideoPayloadTypes,s=>{const o=new Map;s.forEach(a=>{const c=a.codec.toLowerCase();J8(c)&&o.set(a.payload,c)}),this.emit(ve.RTPVideoMapUpdate,o)});try{yield this.pcManager.negotiate(r),t()}catch(s){s instanceof qC&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Ks.RR_UNKNOWN),n(s)}finally{this.off(ve.Closing,i)}}))})}dataChannelForKind(t,n){if(n){if(t===an.LOSSY)return this.lossyDCSub;if(t===an.RELIABLE)return this.reliableDCSub}else{if(t===an.LOSSY)return this.lossyDC;if(t===an.RELIABLE)return this.reliableDC}}sendSyncState(t,n){var r,i;if(!this.pcManager){L.warn("sync state cannot be sent without peer connection setup");return}const s=this.pcManager.subscriber.getLocalDescription(),o=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array;t.forEach(l=>{l.isDesired!==a&&c.push(l.trackSid)}),this.client.sendSyncState(new Ts({answer:s?Jm({sdp:s.sdp,type:s.type}):void 0,offer:o?Jm({sdp:o.sdp,type:o.type}):void 0,subscription:new li({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:F8(n),dataChannels:this.dataChannelsInfo()}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const t=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&t.push(new _s({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(an.LOSSY),Xn.PUBLISHER),n(this.dataChannelForKind(an.RELIABLE),Xn.PUBLISHER),n(this.dataChannelForKind(an.LOSSY,!0),Xn.SUBSCRIBER),n(this.dataChannelForKind(an.RELIABLE,!0),Xn.SUBSCRIBER),t}clearReconnectTimeout(){this.reconnectTimeout&&Dn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){xr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){xr()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Jh extends Error{}class mE{constructor(t,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(t),this.token=n}updateToken(t){this.token=t}isCloud(){return nI(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(t){return U(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(t));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),L.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(t){return U(this,void 0,void 0,function*(){const n=yield fetch("".concat(yZ(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:t});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new Bt("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}}function yZ(e){return"".concat(e.protocol.replace("ws","http"),"//").concat(e.host,"/settings")}const Lb=2e3;function qg(e,t){if(!t)return 0;let n,r;return"bytesReceived"in e?(n=e.bytesReceived,r=t.bytesReceived):"bytesSent"in e&&(n=e.bytesSent,r=t.bytesSent),n===void 0||r===void 0||e.timestamp===void 0||t.timestamp===void 0?0:(n-r)*8*1e3/(e.timestamp-t.timestamp)}class ir extends Iu{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(t,q.Kind.Audio,n,r),this.stopOnMute=!1,this.monitorSender=()=>U(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(o){L.error("could not get audio sender stats",{error:o});return}s&&this.prevStats&&(this._currentBitrate=qg(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.checkForSilence()}setDeviceId(t){return U(this,void 0,void 0,function*(){return this._constraints.deviceId===t?!0:(this._constraints.deviceId=t,this.isMuted||(yield this.restartTrack()),this.isMuted||kc(t)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return U(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===q.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(L.debug("stopping mic track"),this._mediaStreamTrack.stop()),yield t.mute.call(this),this}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return U(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==kc(this._constraints.deviceId);return this.source===q.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(L.debug("reacquiring mic track"),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}restartTrack(t){return U(this,void 0,void 0,function*(){let n;if(t){const r=Yg({audio:t});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(t){const n=Object.create(null,{restart:{get:()=>super.restart}});return U(this,void 0,void 0,function*(){const r=yield n.restart.call(this,t);return this.checkForSilence(),r})}startMonitor(){xr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},Lb)))}setProcessor(t){var n;return U(this,void 0,void 0,function*(){const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};L.debug("setting up audio processor ".concat(t.name)),yield t.init(i),this.processor=t,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack))}finally{r()}})}setAudioContext(t){this.audioContext=t}getSenderStats(){var t;return U(this,void 0,void 0,function*(){if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return U(this,void 0,void 0,function*(){const t=yield O8(this);return t&&(this.isMuted||L.warn("silence detected on local audio track"),this.emit(he.AudioSilenceDetected)),t})}}function wD(e,t){switch(e.kind){case"audio":return new ir(e,t,!1);case"video":return new Ur(e,t,!1);default:throw new cs("unsupported track type: ".concat(e.kind))}}const CZ=Object.values(Mf),IZ=Object.values(QC),SZ=Object.values(dD),bZ=[Mf.h180,Mf.h360],wZ=[QC.h180,QC.h360],kZ=e=>[{scaleResolutionDownBy:2,fps:3}].map(n=>{var r;return new bt(Math.floor(e.width/n.scaleResolutionDownBy),Math.floor(e.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(e.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=e.encoding.maxFramerate)!==null&&r!==void 0?r:30)/n.fps)))),n.fps,e.encoding.priority)}),iI=["q","h","f"];function sI(e,t,n,r){var i,s;let o=r==null?void 0:r.videoEncoding;e&&(o=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!o&&!a&&!c||!t||!n)return[{}];o||(o=EZ(e,t,n,l),L.debug("using video encoding",o));const u=new bt(t,n,o.maxBitrate,o.maxFramerate,o.priority);if(c&&zd(l)){L.debug("using svc with scalabilityMode ".concat(c));const h=new kD(c),p=[];if(h.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));for(let m=0;m<h.spatial;m+=1)p.push({rid:iI[2-m],maxBitrate:o.maxBitrate/Math.pow(3,m),maxFramerate:u.encoding.maxFramerate});return p[0].scalabilityMode=c,L.debug("encodings",p),p}if(!a)return[o];let d=[];e?d=(i=vE(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:gE(e,u):d=(s=vE(r==null?void 0:r.videoSimulcastLayers))!==null&&s!==void 0?s:gE(e,u);let f;if(d.length>0){const h=d[0];d.length>1&&([,f]=d);const p=Math.max(t,n);if(p>=960&&f)return Uy(t,n,[h,f,u]);if(p>=480)return Uy(t,n,[h,u])}return Uy(t,n,[u])}function AZ(e,t,n){var r,i,s,o;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;t!==n.backupCodec.codec&&L.warn("requested a different codec than specified as backup",{serverRequested:t,backup:n.backupCodec.codec}),n.videoCodec=t,n.videoEncoding=n.backupCodec.encoding;const a=e.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=e.dimensions)===null||i===void 0?void 0:i.width,l=(s=a.height)!==null&&s!==void 0?s:(o=e.dimensions)===null||o===void 0?void 0:o.height;return sI(e.source===q.Source.ScreenShare,c,l,n)}function EZ(e,t,n,r){const i=TZ(e,t,n);let{encoding:s}=i[0];const o=Math.max(t,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(s=c.encoding,c.width>=o)break}if(r)switch(r){case"av1":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.7;break;case"vp9":s=Object.assign({},s),s.maxBitrate=s.maxBitrate*.85;break}return s}function TZ(e,t,n){if(e)return SZ;const r=t>n?t/n:n/t;return Math.abs(r-16/9)<Math.abs(r-4/3)?CZ:IZ}function gE(e,t){if(e)return kZ(t);const{width:n,height:r}=t,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?bZ:wZ}function Uy(e,t,n){const r=[];if(n.forEach((i,s)=>{if(s>=iI.length)return;const o=Math.min(e,t),c={rid:iI[s],scaleResolutionDownBy:Math.max(1,o/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(c.maxFramerate=i.encoding.maxFramerate);const l=Cu()||s===0;i.encoding.priority&&l&&(c.priority=i.encoding.priority,c.networkPriority=i.encoding.priority),r.push(c)}),Bc()&&gD()==="ios"){let i;r.forEach(o=>{i?o.maxFramerate&&o.maxFramerate>i&&(i=o.maxFramerate):i=o.maxFramerate});let s=!0;r.forEach(o=>{var a;o.maxFramerate!=i&&(s&&(s=!1,L.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),L.info('Setting framerate of encoding "'.concat((a=o.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),o.maxFramerate=i)})}return r}function vE(e){if(e)return e.sort((t,n)=>{const{encoding:r}=t,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class kD{constructor(t){const n=t.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var t;return"L".concat(this.spatial,"T").concat(this.temporal).concat((t=this.suffix)!==null&&t!==void 0?t:"")}}const _Z=5e3;class Ur extends Iu{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;super(t,q.Kind.Video,n,r),this.simulcastCodecs=new Map,this.monitorSender=()=>U(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let i;try{i=yield this.getSenderStats()}catch(o){L.error("could not get audio sender stats",{error:o});return}const s=new Map(i.map(o=>[o.rid,o]));if(this.prevStats){let o=0;s.forEach((a,c)=>{var l;const u=(l=this.prevStats)===null||l===void 0?void 0:l.get(c);o+=qg(a,u)}),this._currentBitrate=o}this.prevStats=s}),this.senderLock=new ji}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(t){var n;if(this.signalClient=t,!xr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},Lb))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(t=>{t.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const t=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var n,r,i,s,o;return U(this,void 0,void 0,function*(){yield t.pauseUpstream.call(this);try{for(var a=!0,c=dl(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)s=l.value,a=!1,yield(o=s.sender)===null||o===void 0?void 0:o.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const t=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var n,r,i,s,o;return U(this,void 0,void 0,function*(){yield t.resumeUpstream.call(this);try{for(var a=!0,c=dl(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){s=l.value,a=!1;const u=s;yield(o=u.sender)===null||o===void 0?void 0:o.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const t=Object.create(null,{mute:{get:()=>super.mute}});return U(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===q.Source.Camera&&!this.isUserProvided&&(L.debug("stopping camera track"),this._mediaStreamTrack.stop()),yield t.mute.call(this),this}finally{n()}})}unmute(){const t=Object.create(null,{unmute:{get:()=>super.unmute}});return U(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===q.Source.Camera&&!this.isUserProvided&&(L.debug("reacquiring camera track"),yield this.restartTrack()),yield t.unmute.call(this),this}finally{n()}})}setTrackMuted(t){super.setTrackMuted(t);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!t}getSenderStats(){var t;return U(this,void 0,void 0,function*(){if(!(!((t=this.sender)===null||t===void 0)&&t.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var s;if(i.type==="outbound-rtp"){const o={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,framesSent:i.framesSent,timestamp:i.timestamp,rid:(s=i.rid)!==null&&s!==void 0?s:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges},a=r.get(i.remoteId);a&&(o.jitter=a.jitter,o.packetsLost=a.packetsLost,o.roundTripTime=a.roundTripTime),n.push(o)}}),n})}setPublishingQuality(t){const n=[];for(let r=hn.LOW;r<=hn.HIGH;r+=1)n.push(new Gi({quality:r,enabled:r<=t}));L.debug("setting publishing quality. max quality ".concat(t)),this.setPublishingLayers(n)}setDeviceId(t){return U(this,void 0,void 0,function*(){return this._constraints.deviceId===t&&this._mediaStreamTrack.getSettings().deviceId===kc(t)?!0:(this._constraints.deviceId=t,this.isMuted||(yield this.restartTrack()),this.isMuted||kc(t)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(t){var n,r,i,s;return U(this,void 0,void 0,function*(){let o;if(t){const u=Yg({video:t});typeof u.video!="boolean"&&(o=u.video)}yield this.restart(o);try{for(var a=!0,c=dl(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){s=l.value,a=!1;const u=s;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var i,s,o,a,c,l;return U(this,void 0,void 0,function*(){if(yield r.setProcessor.call(this,t,n),!((c=this.processor)===null||c===void 0)&&c.processedTrack)try{for(var u=!0,d=dl(this.simulcastCodecs.values()),f;f=yield d.next(),i=f.done,!i;u=!0)a=f.value,u=!1,yield(l=a.sender)===null||l===void 0?void 0:l.replaceTrack(this.processor.processedTrack)}catch(h){s={error:h}}finally{try{!u&&!i&&(o=d.return)&&(yield o.call(d))}finally{if(s)throw s.error}}})}addSimulcastTrack(t,n){if(this.simulcastCodecs.has(t))throw new Error("".concat(t," already added"));const r={codec:t,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(t,r),r}setSimulcastTrackSender(t,n){const r=this.simulcastCodecs.get(t);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},_Z))}setPublishingCodecs(t){var n,r,i,s,o,a,c;return U(this,void 0,void 0,function*(){if(L.debug("setting publishing codecs",{codecs:t,currentCodec:this.codec}),!this.codec&&t.length>0)return yield this.setPublishingLayers(t[0].qualities),[];this.subscribedCodecs=t;const l=[];try{for(n=!0,r=dl(t);i=yield r.next(),s=i.done,!s;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(L.debug("try setPublishingCodec for ".concat(u.codec),d),!d||!d.sender){for(const f of u.qualities)if(f.enabled){l.push(u.codec);break}}else d.encodings&&(L.debug("try setPublishingLayersForSender ".concat(u.codec)),yield yE(d.sender,d.encodings,u.qualities,this.senderLock))}}}catch(u){o={error:u}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return l})}setPublishingLayers(t){return U(this,void 0,void 0,function*(){L.debug("setting publishing layers",t),!(!this.sender||!this.encodings)&&(yield yE(this.sender,this.encodings,t,this.senderLock))})}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return U(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),pD()&&this.isInBackground&&this.source===q.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function yE(e,t,n,r){return U(this,void 0,void 0,function*(){const i=yield r.lock();L.debug("setPublishingLayersForSender",{sender:e,qualities:n,senderEncodings:t});try{const s=e.getParameters(),{encodings:o}=s;if(!o)return;if(o.length!==t.length){L.warn("cannot set publishing layers, encodings mismatch");return}let a=!1;!1&&o[0].scalabilityMode||o.forEach((l,u)=>{var d;let f=(d=l.rid)!==null&&d!==void 0?d:"";f===""&&(f="q");const h=AD(f),p=n.find(m=>m.quality===h);p&&l.active!==p.enabled&&(a=!0,l.active=p.enabled,L.debug("setting layer ".concat(p.quality," to ").concat(l.active?"enabled":"disabled")),Cu()&&(p.enabled?(l.scaleResolutionDownBy=t[u].scaleResolutionDownBy,l.maxBitrate=t[u].maxBitrate,l.maxFrameRate=t[u].maxFrameRate):(l.scaleResolutionDownBy=4,l.maxBitrate=10,l.maxFrameRate=2)))}),a&&(s.encodings=o,L.debug("setting encodings",s.encodings),yield e.setParameters(s))}finally{i()}})}function AD(e){switch(e){case"f":return hn.HIGH;case"h":return hn.MEDIUM;case"q":return hn.LOW;default:return hn.HIGH}}function CE(e,t,n,r){if(!n)return[new fr({quality:hn.HIGH,width:e,height:t,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,s=new kD(i),o=[];for(let a=0;a<s.spatial;a+=1)o.push(new fr({quality:hn.HIGH-a,width:Math.ceil(e/Math.pow(2,a)),height:Math.ceil(t/Math.pow(2,a)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(3,a)):0,ssrc:0}));return o}return n.map(i=>{var s,o,a;const c=(s=i.scaleResolutionDownBy)!==null&&s!==void 0?s:1;let l=AD((o=i.rid)!==null&&o!==void 0?o:"");return new fr({quality:l,width:Math.ceil(e/c),height:Math.ceil(t/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}class ED extends q{constructor(t,n,r,i){super(t,r),this.sid=n,this.receiver=i}setMuted(t){this.isMuted!==t&&(this.isMuted=t,this._mediaStreamTrack.enabled=!t,this.emit(t?he.Muted:he.Unmuted,this))}setMediaStream(t){this.mediaStream=t;const n=r=>{r.track===this._mediaStreamTrack&&(t.removeEventListener("removetrack",n),this.receiver=void 0,this._currentBitrate=0,this.emit(he.Ended,this))};t.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var t;return U(this,void 0,void 0,function*(){return!((t=this.receiver)===null||t===void 0)&&t.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),Lb))}}class Ac extends ED{constructor(t,n,r,i,s){super(t,n,q.Kind.Audio,r),this.monitorReceiver=()=>U(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const o=yield this.getReceiverStats();o&&this.prevStats&&this.receiver&&(this._currentBitrate=qg(o,this.prevStats)),this.prevStats=o}),this.audioContext=i,this.webAudioPluginNodes=[],s&&(this.sinkId=s.deviceId)}setVolume(t){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(t,0,.1):r.volume=t;Bc()&&this._mediaStreamTrack._setVolume(t),this.elementVolume=t}getVolume(){if(this.elementVolume)return this.elementVolume;if(Bc())return 1;let t=0;return this.attachedElements.forEach(n=>{n.volume>t&&(t=n.volume)}),t}setSinkId(t){return U(this,void 0,void 0,function*(){this.sinkId=t,yield Promise.all(this.attachedElements.map(n=>{if(tI(n))return n.setSinkId(t)}))})}attach(t){const n=this.attachedElements.length===0;return t?super.attach(t):t=super.attach(),this.sinkId&&tI(t)&&t.setSinkId(this.sinkId),this.audioContext&&n&&(L.debug("using audio context mapping"),this.connectWebAudio(this.audioContext,t),t.volume=0,t.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),t}detach(t){let n;return t?(n=super.detach(t),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(t){this.audioContext=t,t&&this.attachedElements.length>0?this.connectWebAudio(t,this.attachedElements[0]):t||this.disconnectWebAudio()}setWebAudioPlugins(t){this.webAudioPluginNodes=t,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(t,n){this.disconnectWebAudio(),this.sourceNode=t.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=t.createGain(),r.connect(this.gainNode),this.gainNode.connect(t.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),t.state!=="running"&&t.resume().then(()=>{t.state!=="running"&&this.emit(he.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(he.AudioPlaybackFailed,i)})}disconnectWebAudio(){var t,n;(t=this.gainNode)===null||t===void 0||t.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return U(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n;return t.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Vy=100;class Kd extends ED{constructor(t,n,r,i){super(t,n,q.Kind.Video,r),this.elementInfos=[],this.monitorReceiver=()=>U(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=qg(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=Nb(()=>{this.updateDimensions()},Vy),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(t){super.setMuted(t),this.attachedElements.forEach(n=>{t?Kl(this._mediaStreamTrack,n):xl(this._mediaStreamTrack,n)})}attach(t){if(t?super.attach(t):t=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===t)===void 0){const n=new RZ(t);this.observeElementInfo(n)}return t}observeElementInfo(t){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===t)===void 0?(t.handleResize=()=>{this.debouncedHandleResize()},t.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(t),t.observe(),this.debouncedHandleResize(),this.updateVisibility()):L.warn("visibility resize observer not triggered")}stopObservingElementInfo(t){if(!this.isAdaptiveStream){L.warn("stopObservingElementInfo ignored");return}const n=this.elementInfos.filter(r=>r===t);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==t),this.updateVisibility(),this.debouncedHandleResize()}detach(t){let n=[];if(t)return this.stopObservingElement(t),super.detach(t);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var t;return(t=this.prevStats)===null||t===void 0?void 0:t.decoderImplementation}getReceiverStats(){return U(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const t=yield this.receiver.getStats();let n,r="",i=new Map;return t.forEach(s=>{s.type==="inbound-rtp"?(r=s.codecId,n={type:"video",framesDecoded:s.framesDecoded,framesDropped:s.framesDropped,framesReceived:s.framesReceived,packetsReceived:s.packetsReceived,packetsLost:s.packetsLost,frameWidth:s.frameWidth,frameHeight:s.frameHeight,pliCount:s.pliCount,firCount:s.firCount,nackCount:s.nackCount,jitter:s.jitter,timestamp:s.timestamp,bytesReceived:s.bytesReceived,decoderImplementation:s.decoderImplementation}):s.type==="codec"&&i.set(s.id,s)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(t){const n=this.elementInfos.filter(r=>r.element===t);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const t=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return U(this,void 0,void 0,function*(){yield t.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var t,n;const r=this.elementInfos.reduce((a,c)=>Math.max(a,c.visibilityChangedAt||0),0),i=!((n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,s=this.elementInfos.some(a=>a.pictureInPicture),o=this.elementInfos.some(a=>a.visible)&&!i||s;if(this.lastVisible!==o){if(!o&&Date.now()-r<Vy){Dn.setTimeout(()=>{this.updateVisibility()},Vy);return}this.lastVisible=o,this.emit(he.VisibilityChanged,o,this)}}updateDimensions(){var t,n;let r=0,i=0;const s=this.getPixelDensity();for(const o of this.elementInfos){const a=o.width()*s,c=o.height()*s;a+c>r+i&&(r=a,i=c)}((t=this.lastDimensions)===null||t===void 0?void 0:t.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(he.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var t;const n=(t=this.adaptiveStreamSettings)===null||t===void 0?void 0:t.pixelDensity;return n==="screen"?tE():n||(tE()>2?2:1)}}class RZ{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(t,n){this.onVisibilityChanged=r=>{var i;const{target:s,isIntersecting:o}=r;s===this.element&&(this.isIntersecting=o,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=t,this.isIntersecting=n??IE(t),this.isPiP=xr()&&document.pictureInPictureElement===t,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=IE(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var t;(t=this.handleResize)===null||t===void 0||t.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,rE().observe(this.element),nE().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var t,n;(t=rE())===null||t===void 0||t.unobserve(this.element),(n=nE())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function IE(e){let t=e.offsetTop,n=e.offsetLeft;const r=e.offsetWidth,i=e.offsetHeight,{hidden:s}=e,{opacity:o,display:a}=getComputedStyle(e);for(;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,n+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&t+i>window.pageYOffset&&n+r>window.pageXOffset&&!s&&(o!==""?parseFloat(o)>0:!0)&&a!=="none"}class Js extends Ws.EventEmitter{constructor(t,n,r){super(),this.metadataMuted=!1,this.encryption=Pn.NONE,this.handleMuted=()=>{this.emit(he.Muted)},this.handleUnmuted=()=>{this.emit(he.Unmuted)},this.setMaxListeners(100),this.kind=t,this.trackSid=n,this.trackName=r,this.source=q.Source.Unknown}setTrack(t){this.track&&(this.track.off(he.Muted,this.handleMuted),this.track.off(he.Unmuted,this.handleUnmuted)),this.track=t,t&&(t.on(he.Muted,this.handleMuted),t.on(he.Unmuted,this.handleUnmuted))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Pn.NONE}get audioTrack(){if(this.track instanceof ir||this.track instanceof Ac)return this.track}get videoTrack(){if(this.track instanceof Ur||this.track instanceof Kd)return this.track}updateInfo(t){this.trackSid=t.sid,this.trackName=t.name,this.source=q.sourceFromProto(t.source),this.mimeType=t.mimeType,this.kind===q.Kind.Video&&t.width>0&&(this.dimensions={width:t.width,height:t.height},this.simulcasted=t.simulcast),this.encryption=t.encryption,this.trackInfo=t,L.debug("update publication info",{info:t})}}(function(e){(function(t){t.Desired="desired",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed"})(e.SubscriptionStatus||(e.SubscriptionStatus={})),function(t){t.Allowed="allowed",t.NotAllowed="not_allowed"}(e.PermissionStatus||(e.PermissionStatus={}))})(Js||(Js={}));class Df extends Js{get isUpstreamPaused(){var t;return(t=this.track)===null||t===void 0?void 0:t.isUpstreamPaused}constructor(t,n,r){super(t,n.sid,n.name),this.track=void 0,this.handleTrackEnded=()=>{this.emit(he.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(t){this.track&&this.track.off(he.Ended,this.handleTrackEnded),super.setTrack(t),t&&t.on(he.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var t;return U(this,void 0,void 0,function*(){return(t=this.track)===null||t===void 0?void 0:t.mute()})}unmute(){var t;return U(this,void 0,void 0,function*(){return(t=this.track)===null||t===void 0?void 0:t.unmute()})}pauseUpstream(){var t;return U(this,void 0,void 0,function*(){yield(t=this.track)===null||t===void 0?void 0:t.pauseUpstream()})}resumeUpstream(){var t;return U(this,void 0,void 0,function*(){yield(t=this.track)===null||t===void 0?void 0:t.resumeUpstream()})}}var ai;(function(e){e.Excellent="excellent",e.Good="good",e.Poor="poor",e.Lost="lost",e.Unknown="unknown"})(ai||(ai={}));function xZ(e){switch(e){case to.EXCELLENT:return ai.Excellent;case to.GOOD:return ai.Good;case to.POOR:return ai.Poor;case to.LOST:return ai.Lost;default:return ai.Unknown}}class TD extends Ws.EventEmitter{get isEncrypted(){return this.tracks.size>0&&Array.from(this.tracks.values()).every(t=>t.isEncrypted)}get isAgent(){var t,n;return(n=(t=this.permissions)===null||t===void 0?void 0:t.agent)!==null&&n!==void 0?n:!1}constructor(t,n,r,i){super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ai.Unknown,this.setMaxListeners(100),this.sid=t,this.identity=n,this.name=r,this.metadata=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(t){for(const[,n]of this.tracks)if(n.source===t)return n}getTrackByName(t){for(const[,n]of this.tracks)if(n.trackName===t)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var t;const n=this.getTrack(q.Source.Camera);return!(!((t=n==null?void 0:n.isMuted)!==null&&t!==void 0)||t)}get isMicrophoneEnabled(){var t;const n=this.getTrack(q.Source.Microphone);return!(!((t=n==null?void 0:n.isMuted)!==null&&t!==void 0)||t)}get isScreenShareEnabled(){return!!this.getTrack(q.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(t){return this.participantInfo&&this.participantInfo.sid===t.sid&&this.participantInfo.version>t.version?!1:(this.identity=t.identity,this.sid=t.sid,this._setName(t.name),this._setMetadata(t.metadata),t.permission&&this.setPermissions(t.permission),this.participantInfo=t,L.trace("update participant info",{info:t}),!0)}_setMetadata(t){const n=this.metadata!==t,r=this.metadata;this.metadata=t,n&&this.emit(oe.ParticipantMetadataChanged,r)}_setName(t){const n=this.name!==t;this.name=t,n&&this.emit(oe.ParticipantNameChanged,t)}setPermissions(t){var n,r,i,s,o;const a=this.permissions,c=t.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||t.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||t.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||t.hidden!==((s=this.permissions)===null||s===void 0?void 0:s.hidden)||t.recorder!==((o=this.permissions)===null||o===void 0?void 0:o.recorder)||t.canPublishSources.length!==this.permissions.canPublishSources.length||t.canPublishSources.some((l,u)=>{var d;return l!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=t,c&&this.emit(oe.ParticipantPermissionsChanged,a),c}setIsSpeaking(t){t!==this.isSpeaking&&(this.isSpeaking=t,t&&(this.lastSpokeAt=new Date),this.emit(oe.IsSpeakingChanged,t))}setConnectionQuality(t){const n=this._connectionQuality;this._connectionQuality=xZ(t),n!==this._connectionQuality&&this.emit(oe.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(t){this.audioContext=t,this.audioTracks.forEach(n=>(n.track instanceof Ac||n.track instanceof ir)&&n.track.setAudioContext(t))}addTrackPublication(t){t.on(he.Muted,()=>{this.emit(oe.TrackMuted,t)}),t.on(he.Unmuted,()=>{this.emit(oe.TrackUnmuted,t)});const n=t;switch(n.track&&(n.track.sid=t.trackSid),this.tracks.set(t.trackSid,t),t.kind){case q.Kind.Audio:this.audioTracks.set(t.trackSid,t);break;case q.Kind.Video:this.videoTracks.set(t.trackSid,t);break}}}function NZ(e){var t,n,r;if(!e.participantSid&&!e.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new As({participantIdentity:(t=e.participantIdentity)!==null&&t!==void 0?t:"",participantSid:(n=e.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=e.allowAll)!==null&&r!==void 0?r:!1,trackSids:e.allowedTrackSids||[]})}class Bb extends Js{constructor(t,n,r){super(t,n.sid,n.name),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=hn.HIGH,this.handleEnded=i=>{this.setTrack(void 0),this.emit(he.Ended,i)},this.handleVisibilityChange=i=>{L.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(i),{trackSid:this.trackSid}),this.disabled=!i,this.emitTrackUpdate()},this.handleVideoDimensionsChange=i=>{L.debug("adaptivestream video dimensions ".concat(i.width,"x").concat(i.height),{trackSid:this.trackSid}),this.videoDimensions=i,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=t,t&&(this.allowed=!0);const i=new li({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new gs({participantSid:"",trackSids:[this.trackSid]})]});this.emit(he.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Js.SubscriptionStatus.Unsubscribed:super.isSubscribed?Js.SubscriptionStatus.Subscribed:Js.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Js.PermissionStatus.Allowed:Js.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(t){!this.isManualOperationAllowed()||this.disabled===!t||(this.disabled=!t,this.emitTrackUpdate())}setVideoQuality(t){!this.isManualOperationAllowed()||this.currentVideoQuality===t||(this.currentVideoQuality=t,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(t){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===t.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===t.height||(this.track instanceof Kd&&(this.videoDimensions=t),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(t){this.isManualOperationAllowed()&&this.track instanceof Kd&&this.fps!==t&&(this.fps=t,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(t){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==t&&(i&&(i.off(he.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(he.VisibilityChanged,this.handleVisibilityChange),i.off(he.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(he.Unsubscribed,i)),super.setTrack(t),t&&(t.sid=this.trackSid,t.on(he.VideoDimensionsChanged,this.handleVideoDimensionsChange),t.on(he.VisibilityChanged,this.handleVisibilityChange),t.on(he.Ended,this.handleEnded),this.emit(he.Subscribed,t)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(t){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=t,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(t){this.emit(he.SubscriptionFailed,t)}updateInfo(t){super.updateInfo(t);const n=this.metadataMuted;this.metadataMuted=t.muted,this.track?this.track.setMuted(t.muted):n!==t.muted&&this.emit(t.muted?he.Muted:he.Unmuted)}emitSubscriptionUpdateIfChanged(t){const n=this.subscriptionStatus;t!==n&&this.emit(he.SubscriptionStatusChanged,n,t)}emitPermissionUpdateIfChanged(t){this.permissionStatus!==t&&this.emit(he.SubscriptionPermissionChanged,this.permissionStatus,t)}isManualOperationAllowed(){return this.kind===q.Kind.Video&&this.isAdaptiveStream?(L.warn("adaptive stream is enabled, cannot change video track settings",{trackSid:this.trackSid}),!1):this.isDesired?!0:(L.warn("cannot update track settings when not subscribed",{trackSid:this.trackSid}),!1)}get isAdaptiveStream(){return this.track instanceof Kd&&this.track.isAdaptiveStream}emitTrackUpdate(){const t=new Ss({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(t.width=Math.ceil(this.videoDimensions.width),t.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?t.quality=this.currentVideoQuality:t.quality=hn.HIGH,this.emit(he.UpdateSettings,t)}}class Of extends TD{static fromParticipantInfo(t,n){return new Of(t,n.sid,n.identity,n.name,n.metadata)}constructor(t,n,r,i,s){super(n,r||"",i,s),this.signalClient=t,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map,this.volumeMap=new Map}addTrackPublication(t){super.addTrackPublication(t),t.on(he.UpdateSettings,n=>{L.debug("send update settings",n),this.signalClient.sendUpdateTrackSettings(n)}),t.on(he.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),t.on(he.SubscriptionPermissionChanged,n=>{this.emit(oe.TrackSubscriptionPermissionChanged,t,n)}),t.on(he.SubscriptionStatusChanged,n=>{this.emit(oe.TrackSubscriptionStatusChanged,t,n)}),t.on(he.Subscribed,n=>{this.emit(oe.TrackSubscribed,n,t)}),t.on(he.Unsubscribed,n=>{this.emit(oe.TrackUnsubscribed,n,t)}),t.on(he.SubscriptionFailed,n=>{this.emit(oe.TrackSubscriptionFailed,t.trackSid,n)})}getTrack(t){const n=super.getTrack(t);if(n)return n}getTrackByName(t){const n=super.getTrackByName(t);if(n)return n}setVolume(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:q.Source.Microphone;this.volumeMap.set(n,t);const r=this.getTrack(n);r&&r.track&&r.track.setVolume(t)}getVolume(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q.Source.Microphone;const n=this.getTrack(t);return n&&n.track?n.track.getVolume():this.volumeMap.get(t)}addSubscribedMediaTrack(t,n,r,i,s,o){let a=this.getTrackPublication(n);if(a||n.startsWith("TR")||this.tracks.forEach(u=>{!a&&t.kind===u.kind.toString()&&(a=u)}),!a){if(o===0){L.error("could not find published track",{participant:this.sid,trackSid:n}),this.emit(oe.TrackSubscriptionFailed,n);return}o===void 0&&(o=20),setTimeout(()=>{this.addSubscribedMediaTrack(t,n,r,i,s,o-1)},150);return}if(t.readyState==="ended"){L.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",{participant:this.sid,trackSid:n}),this.emit(oe.TrackSubscriptionFailed,n);return}const c=t.kind==="video";let l;return c?l=new Kd(t,n,i,s):l=new Ac(t,n,i,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(r),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&l instanceof Ac&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(t){return this.tracks.get(t)}updateInfo(t){if(!super.updateInfo(t))return!1;const n=new Map,r=new Map;return t.tracks.forEach(i=>{var s;let o=this.getTrackPublication(i.sid);if(o)o.updateInfo(i);else{const a=q.kindFromProto(i.type);if(!a)return;o=new Bb(a,i,(s=this.signalClient.connectOptions)===null||s===void 0?void 0:s.autoSubscribe),o.updateInfo(i),r.set(i.sid,o);const c=Array.from(this.tracks.values()).find(l=>l.source===(o==null?void 0:o.source));c&&o.source!==q.Source.Unknown&&L.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(o.source),{oldTrack:c,newTrack:o,participant:this,participantInfo:t}),this.addTrackPublication(o)}n.set(i.sid,o)}),this.tracks.forEach(i=>{n.has(i.trackSid)||(L.trace("detected removed track on remote participant, unpublishing",{publication:i,participantSid:this.sid}),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(oe.TrackPublished,i)}),!0}unpublishTrack(t,n){const r=this.tracks.get(t);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.tracks.delete(t),r.kind){case q.Kind.Audio:this.audioTracks.delete(t);break;case q.Kind.Video:this.videoTracks.delete(t);break}n&&this.emit(oe.TrackUnpublished,r)}setAudioOutput(t){return U(this,void 0,void 0,function*(){this.audioOutput=t;const n=[];this.audioTracks.forEach(r=>{var i;r.track instanceof Ac&&n.push(r.track.setSinkId((i=t.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return L.trace("participant event",{participant:this.sid,event:t,args:r}),super.emit(t,...r)}}class oI extends TD{constructor(t,n,r,i){super(t,n),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Pn.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new vD)},this.handleReconnected=()=>{var s,o;(o=(s=this.reconnectFuture)===null||s===void 0?void 0:s.resolve)===null||o===void 0||o.call(s),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var s,o;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>L.warn(a)),(o=(s=this.reconnectFuture)===null||s===void 0?void 0:s.reject)===null||o===void 0||o.call(s,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{L.debug("updating track subscription permissions",{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions}),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(s=>NZ(s)))},this.onTrackUnmuted=s=>{this.onTrackMuted(s,s.isUpstreamPaused)},this.onTrackMuted=(s,o)=>{if(o===void 0&&(o=!0),!s.sid){L.error("could not update mute status for unpublished track",s);return}this.engine.updateMuteStatus(s.sid,o)},this.onTrackUpstreamPaused=s=>{L.debug("upstream paused"),this.onTrackMuted(s,!0)},this.onTrackUpstreamResumed=s=>{L.debug("upstream resumed"),this.onTrackMuted(s,s.isMuted)},this.handleSubscribedQualityUpdate=s=>U(this,void 0,void 0,function*(){var o,a,c,l,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const f=this.videoTracks.get(s.trackSid);if(!f){L.warn("received subscribed quality update for unknown track",{method:"handleSubscribedQualityUpdate",sid:s.trackSid});return}if(s.subscribedCodecs.length>0){if(!f.videoTrack)return;const y=yield f.videoTrack.setPublishingCodecs(s.subscribedCodecs);try{for(var h=!0,p=dl(y),m;m=yield p.next(),o=m.done,!o;h=!0){l=m.value,h=!1;const g=l;P8(g)&&(L.debug("publish ".concat(g," for ").concat(f.videoTrack.sid)),yield this.publishAdditionalCodecForTrack(f.videoTrack,g,f.options))}}catch(g){a={error:g}}finally{try{!h&&!o&&(c=p.return)&&(yield c.call(p))}finally{if(a)throw a.error}}}else s.subscribedQualities.length>0&&(yield(d=f.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(s.subscribedQualities))}),this.handleLocalTrackUnpublished=s=>{const o=this.tracks.get(s.trackSid);if(!o){L.warn("received unpublished event for unknown track",{method:"handleLocalTrackUnpublished",trackSid:s.trackSid});return}this.unpublishTrack(o.track)},this.handleTrackEnded=s=>U(this,void 0,void 0,function*(){if(s.source===q.Source.ScreenShare||s.source===q.Source.ScreenShareAudio)L.debug("unpublishing local track due to TrackEnded",{track:s.sid}),this.unpublishTrack(s);else if(s.isUserProvided)yield s.mute();else if(s instanceof ir||s instanceof Ur)try{if(xr())try{const o=yield navigator==null?void 0:navigator.permissions.query({name:s.source===q.Source.Camera?"camera":"microphone"});if(o&&o.state==="denied")throw L.warn("user has revoked access to ".concat(s.source)),o.onchange=()=>{o.state!=="denied"&&(s.isMuted||s.restartTrack(),o.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}s.isMuted||(L.debug("track ended, attempting to use a different device"),yield s.restartTrack())}catch{L.warn("could not restart track, muting instead"),yield s.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Pn.NONE}getTrack(t){const n=super.getTrack(t);if(n)return n}getTrackByName(t){const n=super.getTrackByName(t);if(n)return n}setupEngine(t){this.engine=t,this.engine.on(ve.RemoteMute,(n,r)=>{const i=this.tracks.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(ve.Connected,this.handleReconnected).on(ve.SignalRestarted,this.handleReconnected).on(ve.SignalResumed,this.handleReconnected).on(ve.Restarting,this.handleReconnecting).on(ve.Resuming,this.handleReconnecting).on(ve.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(ve.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(ve.Disconnected,this.handleDisconnected)}setMetadata(t){var n;this.engine.client.sendUpdateLocalMetadata(t,(n=this.name)!==null&&n!==void 0?n:"")}setName(t){var n;this.engine.client.sendUpdateLocalMetadata((n=this.metadata)!==null&&n!==void 0?n:"",t)}setCameraEnabled(t,n,r){return this.setTrackEnabled(q.Source.Camera,t,n,r)}setMicrophoneEnabled(t,n,r){return this.setTrackEnabled(q.Source.Microphone,t,n,r)}setScreenShareEnabled(t,n,r){return this.setTrackEnabled(q.Source.ScreenShare,t,n,r)}setPermissions(t){const n=this.permissions,r=super.setPermissions(t);return r&&n&&this.emit(oe.ParticipantPermissionsChanged,n),r}setE2EEEnabled(t){return U(this,void 0,void 0,function*(){this.encryptionType=t?Pn.GCM:Pn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(t,n,r,i){var s,o;return U(this,void 0,void 0,function*(){L.debug("setTrackEnabled",{source:t,enabled:n});let a=this.getTrack(t);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(t)){L.info("skipping duplicate published source",{source:t});return}this.pendingPublishing.add(t);try{switch(t){case q.Source.Camera:c=yield this.createTracks({video:(s=r)!==null&&s!==void 0?s:!0});break;case q.Source.Microphone:c=yield this.createTracks({audio:(o=r)!==null&&o!==void 0?o:!0});break;case q.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new cs(t)}const l=[];for(const d of c)L.info("publishing track",{localTrack:d}),l.push(this.publishTrack(d,i));[a]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&!(l instanceof cs)&&this.emit(oe.MediaDevicesError,l),l}finally{this.pendingPublishing.delete(t)}}else if(a&&a.track)if(t===q.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrack(q.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return U(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(q.Source.Camera)||this.pendingPublishing.has(q.Source.Microphone))){this.pendingPublishing.add(q.Source.Camera),this.pendingPublishing.add(q.Source.Microphone);try{const t=yield this.createTracks({audio:!0,video:!0});yield Promise.all(t.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(q.Source.Camera),this.pendingPublishing.delete(q.Source.Microphone)}}})}createTracks(t){var n,r;return U(this,void 0,void 0,function*(){const i=fD(t,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),s=Yg(i);let o;try{o=yield navigator.mediaDevices.getUserMedia(s)}catch(a){throw a instanceof Error&&(s.audio&&(this.microphoneError=a),s.video&&(this.cameraError=a)),a}return s.audio&&(this.microphoneError=void 0,this.emit(oe.AudioStreamAcquired)),s.video&&(this.cameraError=void 0),o.getTracks().map(a=>{const c=a.kind==="audio";c?t.audio:t.video;let l;const u=c?s.audio:s.video;typeof u!="boolean"&&(l=u);const d=wD(a,l);return d.kind===q.Kind.Video?d.source=q.Source.Camera:d.kind===q.Kind.Audio&&(d.source=q.Source.Microphone),d.mediaStream=o,d})})}createScreenTracks(t){return U(this,void 0,void 0,function*(){if(t===void 0&&(t={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new xb("getDisplayMedia not supported");const n=B8(t),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new cs("no video track found");const s=new Ur(i[0],void 0,!1);s.source=q.Source.ScreenShare;const o=[s];if(r.getAudioTracks().length>0){this.emit(oe.AudioStreamAcquired);const a=new ir(r.getAudioTracks()[0],void 0,!1,this.audioContext);a.source=q.Source.ScreenShareAudio,o.push(a)}return o})}publishTrack(t,n){var r,i,s,o;return U(this,void 0,void 0,function*(){yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,t instanceof Iu&&this.pendingPublishPromises.has(t)&&(yield this.pendingPublishPromises.get(t));let a;if(t instanceof MediaStreamTrack)a=t.getConstraints();else{a=t.constraints;let h;switch(t.source){case q.Source.Microphone:h="audioinput";break;case q.Source.Camera:h="videoinput"}h&&this.activeDeviceMap.has(h)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(h)}))}if(t instanceof MediaStreamTrack)switch(t.kind){case"audio":t=new ir(t,a,!0,this.audioContext);break;case"video":t=new Ur(t,a,!0);break;default:throw new cs("unsupported MediaStreamTrack kind ".concat(t.kind))}t instanceof ir&&t.setAudioContext(this.audioContext);let c;if(this.tracks.forEach(h=>{h.track&&h.track===t&&(c=h)}),c)return L.warn("track has already been published, skipping"),c;const l="channelCount"in t.mediaStreamTrack.getSettings()&&t.mediaStreamTrack.getSettings().channelCount===2||t.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:l;u&&(n||(n={}),n.dtx===void 0&&L.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work."),n.red===void 0&&L.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(s=n.dtx)!==null&&s!==void 0||(n.dtx=!1),(o=n.red)!==null&&o!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);Lc()&&this.roomOptions.e2ee&&(L.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari"),d.simulcast=!1),d.source&&(t.source=d.source);const f=this.publish(t,d,u);this.pendingPublishPromises.set(t,f);try{return yield f}catch(h){throw h}finally{this.pendingPublishPromises.delete(t)}})}publish(t,n,r){var i,s,o,a,c,l,u,d,f,h,p,m,y;return U(this,void 0,void 0,function*(){Array.from(this.tracks.values()).find(_=>t instanceof Iu&&_.source===t.source)&&t.source!==q.Source.Unknown&&L.info("publishing a second track with the same source: ".concat(t.source)),n.stopMicTrackOnMute&&t instanceof ir&&(t.stopOnMute=!0),t.source===q.Source.ScreenShare&&Cu()&&(n.simulcast=!1),n.videoCodec==="av1"&&!G8()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!W8()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=rI);const v=n.videoCodec;t.on(he.Muted,this.onTrackMuted),t.on(he.Unmuted,this.onTrackUnmuted),t.on(he.Ended,this.handleTrackEnded),t.on(he.UpstreamPaused,this.onTrackUpstreamPaused),t.on(he.UpstreamResumed,this.onTrackUpstreamResumed);const S=new Bi({cid:t.mediaStreamTrack.id,name:n.name,type:q.kindToProto(t.kind),muted:t.isMuted,source:q.sourceToProto(t.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((s=n.red)!==null&&s!==void 0)||s),stream:n==null?void 0:n.stream});let E;if(t.kind===q.Kind.Video){let _={width:0,height:0};try{_=yield t.waitForDimensions()}catch{const P=(a=(o=this.roomOptions.videoCaptureDefaults)===null||o===void 0?void 0:o.resolution)!==null&&a!==void 0?a:Mf.h720.resolution;_={width:P.width,height:P.height},L.error("could not determine track dimensions, using defaults",_)}S.width=_.width,S.height=_.height,t instanceof Ur&&(zd(v)&&(t.source===q.Source.ScreenShare&&v==="vp9"&&(n.scalabilityMode="L1T3"),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),S.simulcastCodecs=[new Li({codec:v,cid:t.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:rI}),n.backupCodec&&v!==n.backupCodec.codec&&S.encryption===Pn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),S.simulcastCodecs.push(new Li({codec:n.backupCodec.codec,cid:""})))),E=sI(t.source===q.Source.ScreenShare,S.width,S.height,n),S.layers=CE(S.width,S.height,E,zd(n.videoCodec))}else t.kind===q.Kind.Audio&&(E=[{maxBitrate:(u=(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate)!==null&&u!==void 0?u:n.audioBitrate,priority:(f=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&f!==void 0?f:"high",networkPriority:(p=(h=n.audioPreset)===null||h===void 0?void 0:h.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new on("cannot publish track when not connected");const k=yield this.engine.addTrack(S);let b;if(k.codecs.forEach(_=>{b===void 0&&(b=_.mimeType)}),b&&t.kind===q.Kind.Video){const _=hD(b);_!==v&&(L.debug("falling back to server selected codec",{codec:_}),n.videoCodec=_,E=sI(t.source===q.Source.ScreenShare,S.width,S.height,n))}const A=new Df(t.kind,k,t);if(A.options=n,t.sid=k.sid,!this.engine.pcManager)throw new on("pcManager is not ready");if(L.debug("publishing ".concat(t.kind," with encodings"),{encodings:E,trackInfo:k}),t.sender=yield this.engine.createSender(t,n,E),E)if(Cu()&&t.kind===q.Kind.Audio){let _;for(const x of this.engine.pcManager.publisher.getTransceivers())if(x.sender===t.sender){_=x;break}_&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:_,codec:"opus",maxbr:!((m=E[0])===null||m===void 0)&&m.maxBitrate?E[0].maxBitrate/1e3:0})}else t.codec&&zd(t.codec)&&(!((y=E[0])===null||y===void 0)&&y.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:S.cid,codec:t.codec,maxbr:E[0].maxBitrate/1e3});return yield this.engine.negotiate(),t instanceof Ur?t.startMonitor(this.engine.client):t instanceof ir&&t.startMonitor(),this.addTrackPublication(A),this.emit(oe.LocalTrackPublished,A),A})}get isLocal(){return!0}publishAdditionalCodecForTrack(t,n,r){var i;return U(this,void 0,void 0,function*(){if(this.encryptionType!==Pn.NONE)return;let s;if(this.tracks.forEach(d=>{d.track&&d.track===t&&(s=d)}),!s)throw new cs("track is not published");if(!(t instanceof Ur))throw new cs("track is not a video track");const o=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=AZ(t,n,o);if(!a){L.info("backup codec has been disabled, ignoring request to add additional codec for track");return}const c=t.addSimulcastTrack(n,a),l=new Bi({cid:c.mediaStreamTrack.id,type:q.kindToProto(t.kind),muted:t.isMuted,source:q.sourceToProto(t.source),sid:t.sid,simulcastCodecs:[{codec:o.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=CE(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new on("cannot publish track when not connected");const u=yield this.engine.addTrack(l);yield this.engine.createSimulcastSender(t,c,o,a),yield this.engine.negotiate(),L.debug("published ".concat(n," for track ").concat(t.sid),{encodings:a,trackInfo:u})})}unpublishTrack(t,n){var r,i;return U(this,void 0,void 0,function*(){const s=this.getPublicationForTrack(t);if(L.debug("unpublishing track",{track:t,method:"unpublishTrack"}),!s||!s.track){L.warn("track was not unpublished because no publication was found",{track:t,method:"unpublishTrack"});return}t=s.track,t.off(he.Muted,this.onTrackMuted),t.off(he.Unmuted,this.onTrackUnmuted),t.off(he.Ended,this.handleTrackEnded),t.off(he.UpstreamPaused,this.onTrackUpstreamPaused),t.off(he.UpstreamResumed,this.onTrackUpstreamResumed),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&t.stop();let o=!1;const a=t.sender;if(t.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<cn.FAILED&&a)try{for(const c of this.engine.pcManager.publisher.getTransceivers())c.sender===a&&(c.direction="inactive",o=!0);if(this.engine.removeTrack(a)&&(o=!0),t instanceof Ur){for(const[,c]of t.simulcastCodecs)c.sender&&(this.engine.removeTrack(c.sender)&&(o=!0),c.sender=void 0);t.simulcastCodecs.clear()}}catch(c){L.warn("failed to unpublish track",{error:c,method:"unpublishTrack"})}switch(this.tracks.delete(s.trackSid),s.kind){case q.Kind.Audio:this.audioTracks.delete(s.trackSid);break;case q.Kind.Video:this.videoTracks.delete(s.trackSid);break}return this.emit(oe.LocalTrackUnpublished,s),s.setTrack(void 0),o&&(yield this.engine.negotiate()),s})}unpublishTracks(t){return U(this,void 0,void 0,function*(){return(yield Promise.all(t.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof Df)})}republishAllTracks(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return U(this,void 0,void 0,function*(){const r=[];this.tracks.forEach(i=>{i.track&&(t&&(i.options=Object.assign(Object.assign({},i.options),t)),r.push(i))}),yield Promise.all(r.map(i=>U(this,void 0,void 0,function*(){const s=i.track;yield this.unpublishTrack(s,!1),n&&!s.isMuted&&(s instanceof ir||s instanceof Ur)&&!s.isUserProvided&&(L.debug("restarting existing track",{track:i.trackSid}),yield s.restartTrack()),yield this.publishTrack(s,i.options)})))})}publishData(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return U(this,void 0,void 0,function*(){const i=Array.isArray(r)?r:r==null?void 0:r.destination,s=[],o=Array.isArray(r)?void 0:r.topic;i!==void 0&&i.forEach(c=>{c instanceof Of?s.push(c.sid):s.push(c)});const a=new hs({kind:n,value:{case:"user",value:new ms({participantSid:this.sid,payload:t,destinationSids:s,topic:o})}});yield this.engine.sendDataPacket(a,n)})}setTrackSubscriptionPermissions(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=t,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(t){return t.sid!==this.sid||!super.updateInfo(t)?!1:(t.tracks.forEach(n=>{var r,i;const s=this.tracks.get(n.sid);if(s){const o=s.isMuted||((i=(r=s.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);o!==n.muted&&(L.debug("updating server mute state after reconcile",{sid:n.sid,muted:o}),this.engine.client.sendMuteTrack(n.sid,o))}}),!0)}getPublicationForTrack(t){let n;return this.tracks.forEach(r=>{const i=r.track;i&&(t instanceof MediaStreamTrack?(i instanceof ir||i instanceof Ur)&&i.mediaStreamTrack===t&&(n=r):t===i&&(n=r))}),n}}var et;(function(e){e.Disconnected="disconnected",e.Connecting="connecting",e.Connected="connected",e.Reconnecting="reconnecting"})(et||(et={}));const PZ=2*1e3;class Ym extends Ws.EventEmitter{constructor(t){var n,r;super(),n=this,this.state=et.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.connect=(i,s,o)=>U(this,void 0,void 0,function*(){var a;const c=yield this.disconnectLock.lock();if(this.state===et.Connected)return L.info("already connected to room ".concat(this.name)),c(),Promise.resolve();if(this.connectFuture)return c(),this.connectFuture.promise;this.setAndEmitConnectionState(et.Connecting),((a=this.regionUrlProvider)===null||a===void 0?void 0:a.getServerUrl().toString())!==i&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),nI(new URL(i))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new mE(i,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().catch(d=>{L.warn("could not fetch region settings",{error:d})}));const l=(d,f,h)=>U(this,void 0,void 0,function*(){var p;this.abortController&&this.abortController.abort();const m=new AbortController;this.abortController=m,c==null||c();try{yield this.attemptConnection(h??i,s,o,m),this.abortController=void 0,d()}catch(y){if(this.regionUrlProvider&&y instanceof Bt&&y.reason!==3&&y.reason!==0){let g=null;try{g=yield this.regionUrlProvider.getNextBestRegionUrl((p=this.abortController)===null||p===void 0?void 0:p.signal)}catch(v){if(v instanceof Bt&&(v.status===401||v.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(v);return}}g?(L.info("Initial connection failed with ConnectionError: ".concat(y.message,". Retrying with another region: ").concat(g)),yield l(d,f,g)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(y))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(y)}}),u=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new vD((d,f)=>{l(d,f,u)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(i,s,o,a,c,l)=>U(this,void 0,void 0,function*(){const u=yield o.join(i,s,{autoSubscribe:a.autoSubscribe,publishOnly:a.publishOnly,adaptiveStream:typeof c.adaptiveStream=="object"?!0:c.adaptiveStream,maxRetries:a.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:a.websocketTimeout},l.signal);let d=u.serverInfo;if(d||(d={version:u.serverVersion,region:u.serverRegion}),L.debug("connected to Livekit Server ".concat(Object.entries(d).map(f=>{let[h,p]=f;return"".concat(h,": ").concat(p)}).join(", "))),!u.serverVersion)throw new A8("unknown server version");return u.serverVersion==="0.15.1"&&this.options.dynacast&&(L.debug("disabling dynacast due to server version"),c.dynacast=!1),u}),this.applyJoinResponse=i=>{const s=i.participant;this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.handleParticipantUpdates([s,...i.otherParticipants]),i.room&&this.handleRoomUpdate(i.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(i.sifTrailer)},this.attemptConnection=(i,s,o,a)=>U(this,void 0,void 0,function*(){var c,l;this.state===et.Reconnecting?(L.info("Reconnection attempt replaced by new connection attempt"),this.recreateEngine()):this.maybeCreateEngine(),!((c=this.regionUrlProvider)===null||c===void 0)&&c.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},Ob),o),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const u=yield this.connectSignal(i,s,this.engine,this.connOptions,this.options,a);this.applyJoinResponse(u),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected)}catch(u){yield this.engine.close(),this.recreateEngine();const d=new Bt("could not establish signal connection");throw u instanceof Error&&(d.message="".concat(d.message,": ").concat(u.message)),u instanceof Bt&&(d.reason=u.reason,d.status=u.status),L.debug("error trying to establish signal connection",{error:u}),d}if(a.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new Bt("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,a)}catch(u){throw yield this.engine.close(),this.recreateEngine(),u}xr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),xr()&&(document.addEventListener("freeze",this.onPageLeave),(l=navigator.mediaDevices)===null||l===void 0||l.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(et.Connected),this.emit(ne.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return U(n,void 0,void 0,function*(){var s,o,a,c;const l=yield this.disconnectLock.lock();try{if(this.state===et.Disconnected){L.debug("already disconnected");return}L.info("disconnect from room",{identity:this.localParticipant.identity}),(this.state===et.Connecting||this.state===et.Reconnecting)&&(L.warn("abort connection attempt"),(s=this.abortController)===null||s===void 0||s.abort(),(a=(o=this.connectFuture)===null||o===void 0?void 0:o.reject)===null||a===void 0||a.call(o,new Bt("Client initiated disconnect")),this.connectFuture=void 0),!((c=this.engine)===null||c===void 0)&&c.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(i,_o.CLIENT_INITIATED),this.engine=void 0}finally{l()}})},this.onPageLeave=()=>U(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>U(this,void 0,void 0,function*(){const i=[],s=Va();if(s&&s.os==="iOS"){const o="livekit-dummy-audio-el";let a=document.getElementById(o);if(!a){a=document.createElement("audio"),a.id=o,a.autoplay=!0,a.hidden=!0;const c=Ly();c.enabled=!0;const l=new MediaStream([c]);a.srcObject=l,document.addEventListener("visibilitychange",()=>{a&&(a.srcObject=document.hidden?null:l)}),document.body.append(a),this.once(ne.Disconnected,()=>{a==null||a.remove()})}i.push(a)}this.participants.forEach(o=>{o.audioTracks.forEach(a=>{a.track&&a.track.attachedElements.forEach(c=>{i.push(c)})})});try{yield Promise.all([this.acquireAudioContext(),...i.map(o=>(o.muted=!1,o.play()))]),this.handleAudioPlaybackStarted()}catch(o){throw this.handleAudioPlaybackFailed(o),o}}),this.startVideo=()=>U(this,void 0,void 0,function*(){const i=[];for(const s of this.participants.values())s.videoTracks.forEach(o=>{var a;(a=o.track)===null||a===void 0||a.attachedElements.forEach(c=>{i.includes(c)||i.push(c)})});yield Promise.all(i.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():L.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler")})}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const i of this.participants.values())this.handleParticipantDisconnected(i.sid,i);this.setAndEmitConnectionState(et.Reconnecting)&&this.emit(ne.Reconnecting)},this.handleSignalRestarted=i=>U(this,void 0,void 0,function*(){L.debug("signal reconnected to server",{region:i.serverRegion}),this.cachedParticipantSids=[],this.applyJoinResponse(i);try{const s=[];this.localParticipant.tracks.forEach(o=>{o.track&&s.push(o)}),yield Promise.all(s.map(o=>U(this,void 0,void 0,function*(){const a=o.track;this.localParticipant.unpublishTrack(a,!1),a.isMuted||((a instanceof ir||a instanceof Ur)&&a.source!==q.Source.ScreenShare&&a.source!==q.Source.ScreenShareAudio&&!a.isUserProvided&&(L.debug("restarting existing track",{track:o.trackSid}),yield a.restartTrack()),L.debug("publishing new track",{track:o.trackSid}),yield this.localParticipant.publishTrack(a,o.options))})))}catch(s){L.error("error trying to re-publish tracks after reconnection",{error:s})}try{yield this.engine.waitForRestarted(),L.debug("fully reconnected to server",{region:i.serverRegion})}catch{return}this.setAndEmitConnectionState(et.Connected),this.emit(ne.Reconnected),this.registerConnectionReconcile(),this.participants.forEach(s=>{this.emit(ne.ParticipantConnected,s)})}),this.handleParticipantUpdates=i=>{i.forEach(s=>{if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}const o=this.identityToSid.get(s.identity);o&&o!==s.sid&&this.handleParticipantDisconnected(o,this.participants.get(o));let a=this.participants.get(s.sid);const c=!a;s.state===Dc.DISCONNECTED?this.handleParticipantDisconnected(s.sid,a):(a=this.getOrCreateParticipant(s.sid,s),c||a.updateInfo(s))})},this.handleActiveSpeakersUpdate=i=>{const s=[],o={};i.forEach(a=>{if(o[a.sid]=!0,a.sid===this.localParticipant.sid)this.localParticipant.audioLevel=a.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const c=this.participants.get(a.sid);c&&(c.audioLevel=a.level,c.setIsSpeaking(!0),s.push(c))}}),o[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(a=>{o[a.sid]||(a.audioLevel=0,a.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(ne.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=i=>{const s=new Map;this.activeSpeakers.forEach(a=>{s.set(a.sid,a)}),i.forEach(a=>{let c=this.participants.get(a.sid);a.sid===this.localParticipant.sid&&(c=this.localParticipant),c&&(c.audioLevel=a.level,c.setIsSpeaking(a.active),a.active?s.set(a.sid,c):s.delete(a.sid))});const o=Array.from(s.values());o.sort((a,c)=>c.audioLevel-a.audioLevel),this.activeSpeakers=o,this.emitWhenConnected(ne.ActiveSpeakersChanged,o)},this.handleStreamStateUpdate=i=>{i.streamStates.forEach(s=>{const o=this.participants.get(s.participantSid);if(!o)return;const a=o.getTrackPublication(s.trackSid);!a||!a.track||(a.track.streamState=q.streamStateFromProto(s.state),o.emit(oe.TrackStreamStateChanged,a,a.track.streamState),this.emitWhenConnected(ne.TrackStreamStateChanged,a,a.track.streamState,o))})},this.handleSubscriptionPermissionUpdate=i=>{const s=this.participants.get(i.participantSid);if(!s)return;const o=s.getTrackPublication(i.trackSid);o&&o.setAllowed(i.allowed)},this.handleSubscriptionError=i=>{const s=Array.from(this.participants.values()).find(a=>a.tracks.has(i.trackSid));if(!s)return;const o=s.getTrackPublication(i.trackSid);o&&o.setSubscriptionError(i.err)},this.handleDataPacket=(i,s)=>{const o=this.participants.get(i.participantSid);this.emit(ne.DataReceived,i.payload,o,s,i.topic),o==null||o.emit(oe.DataReceived,i.payload,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ne.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=i=>{L.warn("could not playback audio",i),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ne.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ne.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ne.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>U(this,void 0,void 0,function*(){this.emit(ne.MediaDevicesChanged)}),this.handleRoomUpdate=i=>{const s=this.roomInfo;this.roomInfo=i,s&&s.metadata!==i.metadata&&this.emitWhenConnected(ne.RoomMetadataChanged,i.metadata),(s==null?void 0:s.activeRecording)!==i.activeRecording&&this.emitWhenConnected(ne.RecordingStatusChanged,i.activeRecording)},this.handleConnectionQualityUpdate=i=>{i.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const o=this.participants.get(s.participantSid);o&&o.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=i=>{this.emit(ne.ParticipantMetadataChanged,i,this.localParticipant)},this.onLocalParticipantNameChanged=i=>{this.emit(ne.ParticipantNameChanged,i,this.localParticipant)},this.onLocalTrackMuted=i=>{this.emit(ne.TrackMuted,i,this.localParticipant)},this.onLocalTrackUnmuted=i=>{this.emit(ne.TrackUnmuted,i,this.localParticipant)},this.onLocalTrackPublished=i=>U(this,void 0,void 0,function*(){var s;this.emit(ne.LocalTrackPublished,i,this.localParticipant),i.track instanceof ir&&(yield i.track.checkForSilence())&&this.emit(ne.LocalAudioSilenceDetected,i);const o=yield(s=i.track)===null||s===void 0?void 0:s.getDeviceId(),a=L8(i.source);a&&o&&o!==this.localParticipant.activeDeviceMap.get(a)&&(this.localParticipant.activeDeviceMap.set(a,o),this.emit(ne.ActiveDeviceChanged,a,o))}),this.onLocalTrackUnpublished=i=>{this.emit(ne.LocalTrackUnpublished,i,this.localParticipant)},this.onLocalConnectionQualityChanged=i=>{this.emit(ne.ConnectionQualityChanged,i,this.localParticipant)},this.onMediaDevicesError=i=>{this.emit(ne.MediaDevicesError,i)},this.onLocalParticipantPermissionsChanged=i=>{this.emit(ne.ParticipantPermissionsChanged,i,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.cachedParticipantSids=[],this.identityToSid=new Map,this.options=Object.assign(Object.assign({},pZ),t),this.options.audioCaptureDefaults=Object.assign(Object.assign({},SD),t==null?void 0:t.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},bD),t==null?void 0:t.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},hZ),t==null?void 0:t.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new ji,this.localParticipant=new oI("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",kc(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",kc(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",kc(this.options.audioOutput.deviceId)).catch(i=>L.warn("Could not set audio output: ".concat(i.message))),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(t){return U(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(t)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(t,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var t;this.options.e2ee&&(this.e2eeManager=new Q8(this.options.e2ee),this.e2eeManager.on(Sa.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof oI&&(this.isE2EEEnabled=n),this.emit(ne.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Sa.EncryptionError,n=>this.emit(ne.EncryptionError,n)),(t=this.e2eeManager)===null||t===void 0||t.setup(this))}get isRecording(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.activeRecording)!==null&&n!==void 0?n:!1}get sid(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.sid)!==null&&n!==void 0?n:""}get name(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.name)!==null&&n!==void 0?n:""}get metadata(){var t;return(t=this.roomInfo)===null||t===void 0?void 0:t.metadata}get numParticipants(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var t,n;return(n=(t=this.roomInfo)===null||t===void 0?void 0:t.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new vZ(this.options),this.engine.on(ve.ParticipantUpdate,this.handleParticipantUpdates).on(ve.RoomUpdate,this.handleRoomUpdate).on(ve.SpeakersChanged,this.handleSpeakersChanged).on(ve.StreamStateChanged,this.handleStreamStateUpdate).on(ve.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(ve.SubscriptionError,this.handleSubscriptionError).on(ve.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(ve.MediaTrackAdded,(t,n,r)=>{this.onTrackAdded(t,n,r)}).on(ve.Disconnected,t=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,t)}).on(ve.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(ve.DataPacketReceived,this.handleDataPacket).on(ve.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(et.Reconnecting)&&this.emit(ne.Reconnecting),this.cachedParticipantSids=Array.from(this.participants.keys())}).on(ve.Resumed,()=>{this.setAndEmitConnectionState(et.Connected),this.emit(ne.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),Array.from(this.participants.values()).filter(n=>!this.cachedParticipantSids.includes(n.sid)).forEach(n=>this.emit(ne.ParticipantConnected,n)),this.cachedParticipantSids=[]}).on(ve.SignalResumed,()=>{this.state===et.Reconnecting&&this.sendSyncState()}).on(ve.Restarting,this.handleRestarting).on(ve.SignalRestarted,this.handleSignalRestarted).on(ve.DCBufferStatusChanged,(t,n)=>{this.emit(ne.DCBufferStatusChanged,t,n)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return cr.getInstance().getDevices(t,n)}prepareConnection(t,n){return U(this,void 0,void 0,function*(){if(this.state===et.Disconnected){L.debug("prepareConnection to ".concat(t));try{if(nI(new URL(t))&&n){this.regionUrlProvider=new mE(t,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===et.Disconnected&&(this.regionUrl=r,yield fetch(sE(r),{method:"HEAD"}),L.debug("prepared connection to ".concat(r)))}else yield fetch(sE(t),{method:"HEAD"})}catch(r){L.warn("could not prepare connection",{error:r})}}})}getParticipantByIdentity(t){if(this.localParticipant.identity===t)return this.localParticipant;const n=this.identityToSid.get(t);if(n)return this.participants.get(n)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(t,n){return U(this,void 0,void 0,function*(){let r=()=>{},i;switch(t){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new ar({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new ar({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new ar({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new ar({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new ar({scenario:{case:"switchCandidateProtocol",value:t==="force-tls"?2:1}}),r=()=>U(this,void 0,void 0,function*(){const s=this.engine.client.onLeave;s&&s(new ui({reason:_o.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new ar({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break}i&&(this.engine.client.sendSimulateScenario(i),r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveAudioOutputDevice(){var t,n;return(n=(t=this.options.audioOutput)===null||t===void 0?void 0:t.deviceId)!==null&&n!==void 0?n:""}getActiveDevice(t){return this.localParticipant.activeDeviceMap.get(t)}switchActiveDevice(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var i,s,o;return U(this,void 0,void 0,function*(){let a=!1,c=!0;const l=r?{exact:n}:n;if(t==="audioinput"){const u=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.audioTracks.values()).filter(f=>f.source===q.Source.Microphone);try{c=(yield Promise.all(d.map(f=>{var h;return(h=f.audioTrack)===null||h===void 0?void 0:h.setDeviceId(l)}))).every(f=>f===!0)}catch(f){throw this.options.audioCaptureDefaults.deviceId=u,f}}else if(t==="videoinput"){const u=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.videoTracks.values()).filter(f=>f.source===q.Source.Camera);try{c=(yield Promise.all(d.map(f=>{var h;return(h=f.videoTrack)===null||h===void 0?void 0:h.setDeviceId(l)}))).every(f=>f===!0)}catch(f){throw this.options.videoCaptureDefaults.deviceId=u,f}}else if(t==="audiooutput"){if(!tI()&&!this.options.expWebAudioMix||this.options.expWebAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(i=(o=this.options).audioOutput)!==null&&i!==void 0||(o.audioOutput={});const u=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=n,a=u!==l;try{this.options.expWebAudioMix?(s=this.audioContext)===null||s===void 0||s.setSinkId(n):yield Promise.all(Array.from(this.participants.values()).map(d=>d.setAudioOutput({deviceId:n})))}catch(d){throw this.options.audioOutput.deviceId=u,d}}return a&&c&&(this.localParticipant.activeDeviceMap.set(t,n),this.emit(ne.ActiveDeviceChanged,t,n)),c})}setupLocalParticipantEvents(){this.localParticipant.on(oe.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(oe.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(oe.TrackMuted,this.onLocalTrackMuted).on(oe.TrackUnmuted,this.onLocalTrackUnmuted).on(oe.LocalTrackPublished,this.onLocalTrackPublished).on(oe.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(oe.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(oe.MediaDevicesError,this.onMediaDevicesError).on(oe.AudioStreamAcquired,this.startAudio).on(oe.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var t;(t=this.engine)===null||t===void 0||t.close(),this.engine=void 0,this.participants.clear(),this.maybeCreateEngine()}onTrackAdded(t,n,r){if(this.state===et.Connecting||this.state===et.Reconnecting){const u=()=>{this.onTrackAdded(t,n,r),d()},d=()=>{this.off(ne.Reconnected,u),this.off(ne.Connected,u),this.off(ne.Disconnected,d)};this.once(ne.Reconnected,u),this.once(ne.Connected,u),this.once(ne.Disconnected,d);return}if(this.state===et.Disconnected){L.warn("skipping incoming track after Room disconnected");return}const i=V8(n.id),s=i[0];let o=i[1],a=t.id;if(o&&o.startsWith("TR")&&(a=o),s===this.localParticipant.sid){L.warn("tried to create RemoteParticipant for local participant");return}const c=this.participants.get(s);if(!c){L.error("Tried to add a track for a participant, that's not present. Sid: ".concat(s));return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(t,a,n,r,l)}handleDisconnect(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.state!==et.Disconnected){this.regionUrl=void 0;try{this.participants.forEach(i=>{i.tracks.forEach(s=>{i.unpublishTrack(s.trackSid)})}),this.localParticipant.tracks.forEach(i=>{var s,o;i.track&&this.localParticipant.unpublishTrack(i.track,t),t&&((s=i.track)===null||s===void 0||s.detach(),(o=i.track)===null||o===void 0||o.stop())}),this.localParticipant.off(oe.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(oe.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(oe.TrackMuted,this.onLocalTrackMuted).off(oe.TrackUnmuted,this.onLocalTrackUnmuted).off(oe.LocalTrackPublished,this.onLocalTrackPublished).off(oe.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(oe.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(oe.MediaDevicesError,this.onMediaDevicesError).off(oe.AudioStreamAcquired,this.startAudio).off(oe.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),xr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(et.Disconnected),this.emit(ne.Disconnected,n)}}}handleParticipantDisconnected(t,n){this.participants.delete(t),n&&(this.identityToSid.delete(n.identity),n.tracks.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(ne.ParticipantDisconnected,n))}acquireAudioContext(){var t,n;return U(this,void 0,void 0,function*(){if(typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?this.audioContext=this.options.expWebAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(t=Pb())!==null&&t!==void 0?t:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){L.warn(i)}this.options.expWebAudioMix&&this.participants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(ne.AudioPlaybackStatusChanged,r))})}createParticipant(t,n){var r;let i;return n?i=Of.fromParticipantInfo(this.engine.client,n):i=new Of(this.engine.client,t,"",void 0,void 0),this.options.expWebAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(s=>L.warn("Could not set audio output: ".concat(s.message))),i}getOrCreateParticipant(t,n){if(this.participants.has(t))return this.participants.get(t);const r=this.createParticipant(t,n);return this.participants.set(t,r),this.identityToSid.set(n.identity,n.sid),this.emitWhenConnected(ne.ParticipantConnected,r),r.on(oe.TrackPublished,i=>{this.emitWhenConnected(ne.TrackPublished,i,r)}).on(oe.TrackSubscribed,(i,s)=>{i.kind===q.Kind.Audio?(i.on(he.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(he.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===q.Kind.Video&&(i.on(he.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(he.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ne.TrackSubscribed,i,s,r)}).on(oe.TrackUnpublished,i=>{this.emit(ne.TrackUnpublished,i,r)}).on(oe.TrackUnsubscribed,(i,s)=>{this.emit(ne.TrackUnsubscribed,i,s,r)}).on(oe.TrackSubscriptionFailed,i=>{this.emit(ne.TrackSubscriptionFailed,i,r)}).on(oe.TrackMuted,i=>{this.emitWhenConnected(ne.TrackMuted,i,r)}).on(oe.TrackUnmuted,i=>{this.emitWhenConnected(ne.TrackUnmuted,i,r)}).on(oe.ParticipantMetadataChanged,i=>{this.emitWhenConnected(ne.ParticipantMetadataChanged,i,r)}).on(oe.ParticipantNameChanged,i=>{this.emitWhenConnected(ne.ParticipantNameChanged,i,r)}).on(oe.ConnectionQualityChanged,i=>{this.emitWhenConnected(ne.ConnectionQualityChanged,i,r)}).on(oe.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(ne.ParticipantPermissionsChanged,i,r)}).on(oe.TrackSubscriptionStatusChanged,(i,s)=>{this.emitWhenConnected(ne.TrackSubscriptionStatusChanged,i,s,r)}).on(oe.TrackSubscriptionFailed,(i,s)=>{this.emit(ne.TrackSubscriptionFailed,i,r,s)}).on(oe.TrackSubscriptionPermissionChanged,(i,s)=>{this.emitWhenConnected(ne.TrackSubscriptionPermissionChanged,i,s,r)}),n&&r.updateInfo(n),r}sendSyncState(){const t=Array.from(this.participants.values()).reduce((r,i)=>(r.push(...i.getTracks()),r),[]),n=this.localParticipant.getTracks();this.engine.sendSyncState(t,n)}updateSubscriptions(){for(const t of this.participants.values())for(const n of t.videoTracks.values())n.isSubscribed&&n instanceof Bb&&n.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let t=0;this.connectionReconcileInterval=Dn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(t++,L.warn("detected connection state mismatch",{numFailures:t}),t>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,_o.STATE_MISMATCH))):t=0},PZ)}clearConnectionReconcile(){this.connectionReconcileInterval&&Dn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(t){return t===this.state?!1:(this.state=t,this.emit(ne.ConnectionStateChanged,this.state),!0)}emitWhenConnected(t){if(this.state===et.Connected){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.emit(t,...r)}return!1}simulateParticipants(t){var n,r;return U(this,void 0,void 0,function*(){const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},t.publish),s=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},t.participants);if(this.handleDisconnect(),this.roomInfo=new Wu({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Le.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Xr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected),this.emit(ne.Connected),this.setAndEmitConnectionState(et.Connected),i.video){const o=new Df(q.Kind.Video,new Er({source:Jt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO,name:"video-dummy"}),new Ur(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:iE((n=160*s.aspectRatios[0])!==null&&n!==void 0?n:1,160,!0,!0)));this.localParticipant.addTrackPublication(o),this.localParticipant.emit(oe.LocalTrackPublished,o)}if(i.audio){const o=new Df(q.Kind.Audio,new Er({source:Jt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO}),new ir(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Ly()));this.localParticipant.addTrackPublication(o),this.localParticipant.emit(oe.LocalTrackPublished,o)}for(let o=0;o<s.count-1;o+=1){let a=new Xr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(o),state:Dc.ACTIVE,tracks:[],joinedAt:Le.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(s.video){const l=iE((r=160*s.aspectRatios[o%s.aspectRatios.length])!==null&&r!==void 0?r:1,160,!1,!0),u=new Er({source:Jt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}if(s.audio){const l=Ly(),u=new Er({source:Jt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return t!==ne.ActiveSpeakersChanged&&L.debug("room event ".concat(t),{event:t,args:r}),super.emit(t,...r)}}var Pi;(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.SKIPPED=2]="SKIPPED",e[e.SUCCESS=3]="SUCCESS",e[e.FAILED=4]="FAILED"})(Pi||(Pi={}));class ju extends Ws.EventEmitter{constructor(t,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Pi.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=t,this.token=n,this.name=this.constructor.name,this.room=new Ym(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(t){return U(this,void 0,void 0,function*(){if(this.status!==Pi.IDLE)throw Error("check is running already");this.setStatus(Pi.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Pi.SKIPPED&&this.setStatus(this.isSuccess()?Pi.SUCCESS:Pi.FAILED),t&&t(),this.getInfo()})}isSuccess(){return!this.logs.some(t=>t.level==="error")}connect(){return U(this,void 0,void 0,function*(){return this.room.state===et.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return U(this,void 0,void 0,function*(){this.room&&this.room.state!==et.Disconnected&&(yield this.room.disconnect(),yield new Promise(t=>setTimeout(t,500)))})}skip(){this.setStatus(Pi.SKIPPED)}appendMessage(t){this.logs.push({level:"info",message:t}),this.emit("update",this.getInfo())}appendWarning(t){this.logs.push({level:"warning",message:t}),this.emit("update",this.getInfo())}appendError(t){this.logs.push({level:"error",message:t}),this.emit("update",this.getInfo())}setStatus(t){this.status=t,this.emit("update",this.getInfo())}get engine(){var t;return(t=this.room)===null||t===void 0?void 0:t.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function _D(e){var t,n;return U(this,void 0,void 0,function*(){e??(e={}),(t=e.audio)!==null&&t!==void 0||(e.audio=!0),(n=e.video)!==null&&n!==void 0||(e.video=!0);const r=fD(e,SD,bD),i=Yg(r),s=navigator.mediaDevices.getUserMedia(i);e.audio&&(cr.userMediaPromiseMap.set("audioinput",s),s.catch(()=>cr.userMediaPromiseMap.delete("audioinput"))),e.video&&(cr.userMediaPromiseMap.set("videoinput",s),s.catch(()=>cr.userMediaPromiseMap.delete("videoinput")));const o=yield s;return o.getTracks().map(a=>{const c=a.kind==="audio";c?e.audio:e.video;let l;const u=c?i.audio:i.video;typeof u!="boolean"&&(l=u),l?l.deviceId=a.getSettings().deviceId:l={deviceId:a.getSettings().deviceId};const d=wD(a,l);return d.kind===q.Kind.Video?d.source=q.Source.Camera:d.kind===q.Kind.Audio&&(d.source=q.Source.Microphone),d.mediaStream=o,d})})}function MZ(e){return U(this,void 0,void 0,function*(){return(yield _D({audio:!1,video:e}))[0]})}function DZ(e){return U(this,void 0,void 0,function*(){return(yield _D({audio:e,video:!1}))[0]})}class OZ extends ju{get description(){return"Can publish audio"}perform(){var t;return U(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield DZ();n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&o.mediaType==="audio"&&(s=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," audio packets"))})}}class LZ extends ju{get description(){return"Can publish video"}perform(){var t;return U(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield MZ();n.localParticipant.publishTrack(r),yield new Promise(o=>setTimeout(o,3e3));const i=yield(t=r.sender)===null||t===void 0?void 0:t.getStats();if(!i)throw new Error("Could not get RTCStats");let s=0;if(i.forEach(o=>{o.type==="outbound-rtp"&&o.mediaType==="video"&&(s=o.packetsSent)}),s===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(s," video packets"))})}}class BZ extends ju{get description(){return"Resuming connection after interruption"}perform(){var t;return U(this,void 0,void 0,function*(){const n=yield this.connect();let r=!1,i=!1,s;const o=new Promise(c=>{setTimeout(c,5e3),s=c});n.on(ne.Reconnecting,()=>{r=!0}).on(ne.Reconnected,()=>{i=!0,s(!0)}),(t=n.engine.client.ws)===null||t===void 0||t.close();const a=n.engine.client.onClose;if(a&&a(""),yield o,r){if(!i||n.state!==et.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class FZ extends ju{get description(){return"Can connect via TURN"}perform(){var t,n;return U(this,void 0,void 0,function*(){const r=new Db,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let s=!1,o=!1,a=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(o=!0,a=!0):l.startsWith("turns:")&&(o=!0,a=!0,s=!0),l.startsWith("stun:")&&(a=!0);a?o&&!s&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(t=this.connectOptions)===null||t===void 0?void 0:t.rtcConfig)===null||n===void 0)&&n.iceServers||o?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class UZ extends ju{get description(){return"Establishing WebRTC connection"}perform(){return U(this,void 0,void 0,function*(){let t=!1,n=!1;this.room.on(ne.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,s)=>{if(i.candidate){const o=new RTCIceCandidate(i);let a="".concat(o.protocol," ").concat(o.address,":").concat(o.port," ").concat(o.type);o.address&&(VZ(o.address)?a+=" (private)":o.protocol==="tcp"&&o.tcpType==="passive"?(t=!0,a+=" (passive)"):o.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,s)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),L.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}t||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function VZ(e){const t=e.split(".");if(t.length===4){if(t[0]==="10")return!0;if(t[0]==="192"&&t[1]==="168")return!0;if(t[0]==="172"){const n=parseInt(t[1],10);if(n>=16&&n<=31)return!0}}return!1}class GZ extends ju{get description(){return"Connecting to signal connection via WebSocket"}perform(){var t,n,r;return U(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new Db;const s=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(s.serverVersion,".")),((t=s.serverInfo)===null||t===void 0?void 0:t.edition)===vu.Cloud&&(!((n=s.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=s.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Xse extends Ws.EventEmitter{constructor(t,n){super(),this.checkResults=new Map,this.url=t,this.token=n}getNextCheckId(){const t=this.checkResults.size;return this.checkResults.set(t,{logs:[],status:Pi.IDLE,name:"",description:""}),t}updateCheck(t,n){this.checkResults.set(t,n),this.emit("checkUpdate",t,n)}isSuccess(){return Array.from(this.checkResults.values()).every(t=>t.status!==Pi.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(t){return U(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new t(this.url,this.token),i=o=>{this.updateCheck(n,o)};r.on("update",i);const s=yield r.run();return r.off("update",i),s})}checkWebsocket(){return U(this,void 0,void 0,function*(){return this.createAndRunCheck(GZ)})}checkWebRTC(){return U(this,void 0,void 0,function*(){return this.createAndRunCheck(UZ)})}checkTURN(){return U(this,void 0,void 0,function*(){return this.createAndRunCheck(FZ)})}checkReconnect(){return U(this,void 0,void 0,function*(){return this.createAndRunCheck(BZ)})}checkPublishAudio(){return U(this,void 0,void 0,function*(){return this.createAndRunCheck(OZ)})}checkPublishVideo(){return U(this,void 0,void 0,function*(){return this.createAndRunCheck(LZ)})}}function WZ(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=e instanceof Iu?e.mediaStreamTrack:e,i=r.getSettings();let s={facingMode:(n=t.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const o=i.facingMode;L.debug("rawFacingMode",{rawFacingMode:o}),o&&typeof o=="string"&&$Z(o)&&(s={facingMode:o,confidence:"high"})}if(["low","medium"].includes(s.confidence)){L.debug("Try to get facing mode from device label: (".concat(r.label,")"));const o=jZ(r.label);o!==void 0&&(s=o)}return s}const SE=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),HZ=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function jZ(e){var t;const n=e.trim().toLowerCase();if(n!=="")return SE.has(n)?SE.get(n):(t=Array.from(HZ.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||t===void 0?void 0:t[1]}function $Z(e){return e===void 0||["user","environment","left","right"].includes(e)}const aI=Math.min,Yl=Math.max,qm=Math.round,Ga=e=>({x:e,y:e}),ZZ={left:"right",right:"left",bottom:"top",top:"bottom"},zZ={start:"end",end:"start"};function bE(e,t,n){return Yl(e,aI(t,n))}function Qg(e,t){return typeof e=="function"?e(t):e}function Fc(e){return e.split("-")[0]}function ev(e){return e.split("-")[1]}function RD(e){return e==="x"?"y":"x"}function xD(e){return e==="y"?"height":"width"}function tv(e){return["top","bottom"].includes(Fc(e))?"y":"x"}function ND(e){return RD(tv(e))}function XZ(e,t,n){n===void 0&&(n=!1);const r=ev(e),i=ND(e),s=xD(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=Qm(o)),[o,Qm(o)]}function KZ(e){const t=Qm(e);return[cI(e),t,cI(t)]}function cI(e){return e.replace(/start|end/g,t=>zZ[t])}function JZ(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function YZ(e,t,n,r){const i=ev(e);let s=JZ(Fc(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(cI)))),s}function Qm(e){return e.replace(/left|right|bottom|top/g,t=>ZZ[t])}function qZ(e){return{top:0,right:0,bottom:0,left:0,...e}}function QZ(e){return typeof e!="number"?qZ(e):{top:e,right:e,bottom:e,left:e}}function eg(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function wE(e,t,n){let{reference:r,floating:i}=e;const s=tv(t),o=ND(t),a=xD(o),c=Fc(t),l=s==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[a]/2-i[a]/2;let h;switch(c){case"top":h={x:u,y:r.y-i.height};break;case"bottom":h={x:u,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:d};break;case"left":h={x:r.x-i.width,y:d};break;default:h={x:r.x,y:r.y}}switch(ev(t)){case"start":h[o]-=f*(n&&l?-1:1);break;case"end":h[o]+=f*(n&&l?-1:1);break}return h}const ez=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:u,y:d}=wE(l,r,c),f=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:y,fn:g}=a[m],{x:v,y:S,data:E,reset:k}=await g({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});if(u=v??u,d=S??d,h={...h,[y]:{...h[y],...E}},k&&p<=50){p++,typeof k=="object"&&(k.placement&&(f=k.placement),k.rects&&(l=k.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):k.rects),{x:u,y:d}=wE(l,f,c)),m=-1;continue}}return{x:u,y:d,placement:f,strategy:i,middlewareData:h}};async function PD(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:c}=e,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:h=0}=Qg(t,e),p=QZ(h),y=a[f?d==="floating"?"reference":"floating":d],g=eg(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(y)))==null||n?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{...o.floating,x:r,y:i}:o.reference,S=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),E=await(s.isElement==null?void 0:s.isElement(S))?await(s.getScale==null?void 0:s.getScale(S))||{x:1,y:1}:{x:1,y:1},k=eg(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:S,strategy:c}):v);return{top:(g.top-k.top+p.top)/E.y,bottom:(k.bottom-g.bottom+p.bottom)/E.y,left:(g.left-k.left+p.left)/E.x,right:(k.right-g.right+p.right)/E.x}}const tz=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:c,elements:l}=t,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...y}=Qg(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const g=Fc(i),v=Fc(a)===a,S=await(c.isRTL==null?void 0:c.isRTL(l.floating)),E=f||(v||!m?[Qm(a)]:KZ(a));!f&&p!=="none"&&E.push(...YZ(a,m,p,S));const k=[a,...E],b=await PD(t,y),A=[];let _=((r=s.flip)==null?void 0:r.overflows)||[];if(u&&A.push(b[g]),d){const B=XZ(i,o,S);A.push(b[B[0]],b[B[1]])}if(_=[..._,{placement:i,overflows:A}],!A.every(B=>B<=0)){var x,P;const B=(((x=s.flip)==null?void 0:x.index)||0)+1,V=k[B];if(V)return{data:{index:B,overflows:_},reset:{placement:V}};let G=(P=_.filter(Z=>Z.overflows[0]<=0).sort((Z,z)=>Z.overflows[1]-z.overflows[1])[0])==null?void 0:P.placement;if(!G)switch(h){case"bestFit":{var D;const Z=(D=_.map(z=>[z.placement,z.overflows.filter(te=>te>0).reduce((te,j)=>te+j,0)]).sort((z,te)=>z[1]-te[1])[0])==null?void 0:D[0];Z&&(G=Z);break}case"initialPlacement":G=a;break}if(i!==G)return{reset:{placement:G}}}return{}}}};async function nz(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Fc(n),a=ev(n),c=tv(n)==="y",l=["left","top"].includes(o)?-1:1,u=s&&c?-1:1,d=Qg(t,e);let{mainAxis:f,crossAxis:h,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),c?{x:h*u,y:f*l}:{x:f*l,y:h*u}}const rz=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,c=await nz(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:s+c.y,data:{...c,placement:o}}}}},iz=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:y=>{let{x:g,y:v}=y;return{x:g,y:v}}},...c}=Qg(e,t),l={x:n,y:r},u=await PD(t,c),d=tv(Fc(i)),f=RD(d);let h=l[f],p=l[d];if(s){const y=f==="y"?"top":"left",g=f==="y"?"bottom":"right",v=h+u[y],S=h-u[g];h=bE(v,h,S)}if(o){const y=d==="y"?"top":"left",g=d==="y"?"bottom":"right",v=p+u[y],S=p-u[g];p=bE(v,p,S)}const m=a.fn({...t,[f]:h,[d]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}};function Wa(e){return MD(e)?(e.nodeName||"").toLowerCase():"#document"}function Jr(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function qa(e){var t;return(t=(MD(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function MD(e){return e instanceof Node||e instanceof Jr(e).Node}function Bo(e){return e instanceof Element||e instanceof Jr(e).Element}function Bs(e){return e instanceof HTMLElement||e instanceof Jr(e).HTMLElement}function kE(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Jr(e).ShadowRoot}function fh(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=mi(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function sz(e){return["table","td","th"].includes(Wa(e))}function Fb(e){const t=Ub(),n=mi(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function oz(e){let t=Su(e);for(;Bs(t)&&!nv(t);){if(Fb(t))return t;t=Su(t)}return null}function Ub(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function nv(e){return["html","body","#document"].includes(Wa(e))}function mi(e){return Jr(e).getComputedStyle(e)}function rv(e){return Bo(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Su(e){if(Wa(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kE(e)&&e.host||qa(e);return kE(t)?t.host:t}function DD(e){const t=Su(e);return nv(t)?e.ownerDocument?e.ownerDocument.body:e.body:Bs(t)&&fh(t)?t:DD(t)}function lI(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=DD(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Jr(i);return s?t.concat(o,o.visualViewport||[],fh(i)?i:[],o.frameElement&&n?lI(o.frameElement):[]):t.concat(i,lI(i,[],n))}function OD(e){const t=mi(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Bs(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=qm(n)!==s||qm(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function LD(e){return Bo(e)?e:e.contextElement}function ql(e){const t=LD(e);if(!Bs(t))return Ga(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=OD(t);let o=(s?qm(n.width):n.width)/r,a=(s?qm(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const az=Ga(0);function BD(e){const t=Jr(e);return!Ub()||!t.visualViewport?az:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function cz(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Jr(e)?!1:t}function Lf(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=LD(e);let o=Ga(1);t&&(r?Bo(r)&&(o=ql(r)):o=ql(e));const a=cz(s,n,r)?BD(s):Ga(0);let c=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,u=i.width/o.x,d=i.height/o.y;if(s){const f=Jr(s),h=r&&Bo(r)?Jr(r):r;let p=f.frameElement;for(;p&&r&&h!==f;){const m=ql(p),y=p.getBoundingClientRect(),g=mi(p),v=y.left+(p.clientLeft+parseFloat(g.paddingLeft))*m.x,S=y.top+(p.clientTop+parseFloat(g.paddingTop))*m.y;c*=m.x,l*=m.y,u*=m.x,d*=m.y,c+=v,l+=S,p=Jr(p).frameElement}}return eg({width:u,height:d,x:c,y:l})}function lz(e){let{rect:t,offsetParent:n,strategy:r}=e;const i=Bs(n),s=qa(n);if(n===s)return t;let o={scrollLeft:0,scrollTop:0},a=Ga(1);const c=Ga(0);if((i||!i&&r!=="fixed")&&((Wa(n)!=="body"||fh(s))&&(o=rv(n)),Bs(n))){const l=Lf(n);a=ql(n),c.x=l.x+n.clientLeft,c.y=l.y+n.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-o.scrollLeft*a.x+c.x,y:t.y*a.y-o.scrollTop*a.y+c.y}}function uz(e){return Array.from(e.getClientRects())}function FD(e){return Lf(qa(e)).left+rv(e).scrollLeft}function dz(e){const t=qa(e),n=rv(e),r=e.ownerDocument.body,i=Yl(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=Yl(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+FD(e);const a=-n.scrollTop;return mi(r).direction==="rtl"&&(o+=Yl(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function fz(e,t){const n=Jr(e),r=qa(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,c=0;if(i){s=i.width,o=i.height;const l=Ub();(!l||l&&t==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:s,height:o,x:a,y:c}}function hz(e,t){const n=Lf(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Bs(e)?ql(e):Ga(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,c=i*s.x,l=r*s.y;return{width:o,height:a,x:c,y:l}}function AE(e,t,n){let r;if(t==="viewport")r=fz(e,n);else if(t==="document")r=dz(qa(e));else if(Bo(t))r=hz(t,n);else{const i=BD(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return eg(r)}function UD(e,t){const n=Su(e);return n===t||!Bo(n)||nv(n)?!1:mi(n).position==="fixed"||UD(n,t)}function pz(e,t){const n=t.get(e);if(n)return n;let r=lI(e,[],!1).filter(a=>Bo(a)&&Wa(a)!=="body"),i=null;const s=mi(e).position==="fixed";let o=s?Su(e):e;for(;Bo(o)&&!nv(o);){const a=mi(o),c=Fb(o);!c&&a.position==="fixed"&&(i=null),(s?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||fh(o)&&!c&&UD(e,o))?r=r.filter(u=>u!==o):i=a,o=Su(o)}return t.set(e,r),r}function mz(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?pz(t,this._c):[].concat(n),r],a=o[0],c=o.reduce((l,u)=>{const d=AE(t,u,i);return l.top=Yl(d.top,l.top),l.right=aI(d.right,l.right),l.bottom=aI(d.bottom,l.bottom),l.left=Yl(d.left,l.left),l},AE(t,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function gz(e){return OD(e)}function vz(e,t,n){const r=Bs(t),i=qa(t),s=n==="fixed",o=Lf(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const c=Ga(0);if(r||!r&&!s)if((Wa(t)!=="body"||fh(i))&&(a=rv(t)),r){const l=Lf(t,!0,s,t);c.x=l.x+t.clientLeft,c.y=l.y+t.clientTop}else i&&(c.x=FD(i));return{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function EE(e,t){return!Bs(e)||mi(e).position==="fixed"?null:t?t(e):e.offsetParent}function VD(e,t){const n=Jr(e);if(!Bs(e))return n;let r=EE(e,t);for(;r&&sz(r)&&mi(r).position==="static";)r=EE(r,t);return r&&(Wa(r)==="html"||Wa(r)==="body"&&mi(r).position==="static"&&!Fb(r))?n:r||oz(e)||n}const yz=async function(e){let{reference:t,floating:n,strategy:r}=e;const i=this.getOffsetParent||VD,s=this.getDimensions;return{reference:vz(t,await i(n),r),floating:{x:0,y:0,...await s(n)}}};function Cz(e){return mi(e).direction==="rtl"}const Iz={convertOffsetParentRelativeRectToViewportRelativeRect:lz,getDocumentElement:qa,getClippingRect:mz,getOffsetParent:VD,getElementRects:yz,getClientRects:uz,getDimensions:gz,getScale:ql,isElement:Bo,isRTL:Cz},Sz=(e,t,n)=>{const r=new Map,i={platform:Iz,...n},s={...i.platform,_c:r};return ez(e,t,{...i,platform:s})};var GD={exports:{}};(function(e){(function(t,n){e.exports?e.exports=n():t.log=n()})(W2,function(){var t=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function s(m,y){var g=m[y];if(typeof g.bind=="function")return g.bind(m);try{return Function.prototype.bind.call(g,m)}catch{return function(){return Function.prototype.apply.apply(g,[m,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(m){return m==="debug"&&(m="log"),typeof console===n?!1:m==="trace"&&r?o:console[m]!==void 0?s(console,m):console.log!==void 0?s(console,"log"):t}function c(m,y){for(var g=0;g<i.length;g++){var v=i[g];this[v]=g<m?t:this.methodFactory(v,m,y)}this.log=this.debug}function l(m,y,g){return function(){typeof console!==n&&(c.call(this,y,g),this[m].apply(this,arguments))}}function u(m,y,g){return a(m)||l.apply(this,arguments)}function d(m,y,g){var v=this,S;y=y??"WARN";var E="loglevel";typeof m=="string"?E+=":"+m:typeof m=="symbol"&&(E=void 0);function k(x){var P=(i[x]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=P;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+P+";"}catch{}}}function b(){var x;if(!(typeof window===n||!E)){try{x=window.localStorage[E]}catch{}if(typeof x===n)try{var P=window.document.cookie,D=P.indexOf(encodeURIComponent(E)+"=");D!==-1&&(x=/^([^;]+)/.exec(P.slice(D))[1])}catch{}return v.levels[x]===void 0&&(x=void 0),x}}function A(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E);return}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}v.name=m,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=g||u,v.getLevel=function(){return S},v.setLevel=function(x,P){if(typeof x=="string"&&v.levels[x.toUpperCase()]!==void 0&&(x=v.levels[x.toUpperCase()]),typeof x=="number"&&x>=0&&x<=v.levels.SILENT){if(S=x,P!==!1&&k(x),c.call(v,x,m),typeof console===n&&x<v.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+x},v.setDefaultLevel=function(x){y=x,b()||v.setLevel(x,!1)},v.resetLevel=function(){v.setLevel(y,!1),A()},v.enableAll=function(x){v.setLevel(v.levels.TRACE,x)},v.disableAll=function(x){v.setLevel(v.levels.SILENT,x)};var _=b();_==null&&(_=y),v.setLevel(_,!1)}var f=new d,h={};f.getLogger=function(y){if(typeof y!="symbol"&&typeof y!="string"||y==="")throw new TypeError("You must supply a name when creating a logger.");var g=h[y];return g||(g=h[y]=new d(y,f.getLevel(),f.methodFactory)),g};var p=typeof window!==n?window.log:void 0;return f.noConflict=function(){return typeof window!==n&&window.log===f&&(window.log=p),f},f.getLoggers=function(){return h},f.default=f,f})})(GD);var bz=GD.exports;const wz=Jf(bz);function pn(e){return typeof e=="function"}function WD(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Gy=WD(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function uI(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var iv=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=gu(o),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(m){t={error:m}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(pn(u))try{u()}catch(m){s=m instanceof Gy?m.errors:[m]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var f=gu(d),h=f.next();!h.done;h=f.next()){var p=h.value;try{TE(p)}catch(m){s=s??[],m instanceof Gy?s=Hm(Hm([],Wm(s)),Wm(m.errors)):s.push(m)}}}catch(m){r={error:m}}finally{try{h&&!h.done&&(i=f.return)&&i.call(f)}finally{if(r)throw r.error}}}if(s)throw new Gy(s)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)TE(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&uI(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&uI(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),HD=iv.EMPTY;function jD(e){return e instanceof iv||e&&"closed"in e&&pn(e.remove)&&pn(e.add)&&pn(e.unsubscribe)}function TE(e){pn(e)?e():e.unsubscribe()}var $D={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},dI={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=dI.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,Hm([e,t],Wm(n))):setTimeout.apply(void 0,Hm([e,t],Wm(n)))},clearTimeout:function(e){var t=dI.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function ZD(e){dI.setTimeout(function(){throw e})}function fI(){}function zp(e){e()}var Vb=function(e){Gu(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,jD(n)&&n.add(r)):r.destination=Tz,r}return t.create=function(n,r,i){return new hI(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(iv),kz=Function.prototype.bind;function Wy(e,t){return kz.call(e,t)}var Az=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Yh(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Yh(r)}else Yh(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Yh(n)}},e}(),hI=function(e){Gu(t,e);function t(n,r,i){var s=e.call(this)||this,o;if(pn(n)||!n)o={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;s&&$D.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},o={next:n.next&&Wy(n.next,a),error:n.error&&Wy(n.error,a),complete:n.complete&&Wy(n.complete,a)}):o=n}return s.destination=new Az(o),s}return t}(Vb);function Yh(e){ZD(e)}function Ez(e){throw e}var Tz={closed:!0,next:fI,error:Ez,complete:fI},Gb=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function zD(e){return e}function _z(e){return e.length===0?zD:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Vn=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,s=xz(t)?t:new hI(t,n,r);return zp(function(){var o=i,a=o.operator,c=o.source;s.add(a?a.call(s,c):c?i._subscribe(s):i._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=_E(n),new n(function(i,s){var o=new hI({next:function(a){try{t(a)}catch(c){s(c),o.unsubscribe()}},error:s,complete:i});r.subscribe(o)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Gb]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return _z(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=_E(t),new t(function(r,i){var s;n.subscribe(function(o){return s=o},function(o){return i(o)},function(){return r(s)})})},e.create=function(t){return new e(t)},e}();function _E(e){var t;return(t=e??$D.Promise)!==null&&t!==void 0?t:Promise}function Rz(e){return e&&pn(e.next)&&pn(e.error)&&pn(e.complete)}function xz(e){return e&&e instanceof Vb||Rz(e)&&jD(e)}function Nz(e){return pn(e==null?void 0:e.lift)}function jo(e){return function(t){if(Nz(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Uc(e,t,n,r,i){return new Pz(e,t,n,r,i)}var Pz=function(e){Gu(t,e);function t(n,r,i,s,o,a){var c=e.call(this,n)||this;return c.onFinalize=o,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:e.prototype._next,c._error=s?function(l){try{s(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:e.prototype._complete,c}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(Vb),Mz=WD(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ha=function(e){Gu(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new RE(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new Mz},t.prototype.next=function(n){var r=this;zp(function(){var i,s;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var o=gu(r.currentObservers),a=o.next();!a.done;a=o.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;zp(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;zp(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,s=i.hasError,o=i.isStopped,a=i.observers;return s||o?HD:(this.currentObservers=null,a.push(n),new iv(function(){r.currentObservers=null,uI(a,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,s=r.thrownError,o=r.isStopped;i?n.error(s):o&&n.complete()},t.prototype.asObservable=function(){var n=new Vn;return n.source=this,n},t.create=function(n,r){return new RE(n,r)},t}(Vn),RE=function(e){Gu(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:HD},t}(Ha),XD=function(e){Gu(t,e);function t(n){var r=e.call(this)||this;return r._value=n,r}return Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),t.prototype._subscribe=function(n){var r=e.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},t.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,s=n._value;if(r)throw i;return this._throwIfClosed(),s},t.prototype.next=function(n){e.prototype.next.call(this,this._value=n)},t}(Ha);function Dz(e){return e&&pn(e.schedule)}function Oz(e){return e[e.length-1]}function KD(e){return Dz(Oz(e))?e.pop():void 0}var JD=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function YD(e){return pn(e==null?void 0:e.then)}function qD(e){return pn(e[Gb])}function QD(e){return Symbol.asyncIterator&&pn(e==null?void 0:e[Symbol.asyncIterator])}function eO(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Lz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var tO=Lz();function nO(e){return pn(e==null?void 0:e[tO])}function rO(e){return tj(this,arguments,function(){var n,r,i,s;return MP(this,function(o){switch(o.label){case 0:n=e.getReader(),o.label=1;case 1:o.trys.push([1,,9,10]),o.label=2;case 2:return[4,Hl(n.read())];case 3:return r=o.sent(),i=r.value,s=r.done,s?[4,Hl(void 0)]:[3,5];case 4:return[2,o.sent()];case 5:return[4,Hl(i)];case 6:return[4,o.sent()];case 7:return o.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function iO(e){return pn(e==null?void 0:e.getReader)}function $u(e){if(e instanceof Vn)return e;if(e!=null){if(qD(e))return Bz(e);if(JD(e))return Fz(e);if(YD(e))return Uz(e);if(QD(e))return sO(e);if(nO(e))return Vz(e);if(iO(e))return Gz(e)}throw eO(e)}function Bz(e){return new Vn(function(t){var n=e[Gb]();if(pn(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Fz(e){return new Vn(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Uz(e){return new Vn(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,ZD)})}function Vz(e){return new Vn(function(t){var n,r;try{for(var i=gu(e),s=i.next();!s.done;s=i.next()){var o=s.value;if(t.next(o),t.closed)return}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function sO(e){return new Vn(function(t){Wz(e,t).catch(function(n){return t.error(n)})})}function Gz(e){return sO(rO(e))}function Wz(e,t){var n,r,i,s;return ej(this,void 0,void 0,function(){var o,a;return MP(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=nj(e),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(o=r.value,t.next(o),t.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(s=n.return)?[4,s.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Da(e,t,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var s=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(s),!i)return s}function oO(e,t){return t===void 0&&(t=0),jo(function(n,r){n.subscribe(Uc(r,function(i){return Da(r,e,function(){return r.next(i)},t)},function(){return Da(r,e,function(){return r.complete()},t)},function(i){return Da(r,e,function(){return r.error(i)},t)}))})}function aO(e,t){return t===void 0&&(t=0),jo(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Hz(e,t){return $u(e).pipe(aO(t),oO(t))}function jz(e,t){return $u(e).pipe(aO(t),oO(t))}function $z(e,t){return new Vn(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Zz(e,t){return new Vn(function(n){var r;return Da(n,t,function(){r=e[tO](),Da(n,t,function(){var i,s,o;try{i=r.next(),s=i.value,o=i.done}catch(a){n.error(a);return}o?n.complete():n.next(s)},0,!0)}),function(){return pn(r==null?void 0:r.return)&&r.return()}})}function cO(e,t){if(!e)throw new Error("Iterable cannot be null");return new Vn(function(n){Da(n,t,function(){var r=e[Symbol.asyncIterator]();Da(n,t,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function zz(e,t){return cO(rO(e),t)}function Xz(e,t){if(e!=null){if(qD(e))return Hz(e,t);if(JD(e))return $z(e,t);if(YD(e))return jz(e,t);if(QD(e))return cO(e,t);if(nO(e))return Zz(e,t);if(iO(e))return zz(e,t)}throw eO(e)}function Kz(e,t){return t?Xz(e,t):$u(e)}function Cr(e,t){return jo(function(n,r){var i=0;n.subscribe(Uc(r,function(s){r.next(e.call(t,s,i++))}))})}function Jz(e,t,n,r,i,s,o,a){var c=[],l=0,u=0,d=!1,f=function(){d&&!c.length&&!l&&t.complete()},h=function(m){return l<r?p(m):c.push(m)},p=function(m){s&&t.next(m),l++;var y=!1;$u(n(m,u++)).subscribe(Uc(t,function(g){i==null||i(g),s?h(g):t.next(g)},function(){y=!0},void 0,function(){if(y)try{l--;for(var g=function(){var v=c.shift();o?Da(t,o,function(){return p(v)}):p(v)};c.length&&l<r;)g();f()}catch(v){t.error(v)}}))};return e.subscribe(Uc(t,h,function(){d=!0,f()})),function(){a==null||a()}}function lO(e,t,n){return n===void 0&&(n=1/0),pn(t)?lO(function(r,i){return Cr(function(s,o){return t(r,s,i,o)})($u(e(r,i)))},n):(typeof t=="number"&&(n=t),jo(function(r,i){return Jz(r,i,e,n)}))}function Yz(e){return e===void 0&&(e=1/0),lO(zD,e)}function qz(){return Yz(1)}function pI(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return qz()(Kz(e,KD(e)))}function uO(e,t){return jo(function(n,r){var i=0;n.subscribe(Uc(r,function(s){return e.call(t,s,i++)&&r.next(s)}))})}function Qz(e,t,n,r,i){return function(s,o){var a=n,c=t,l=0;s.subscribe(Uc(o,function(u){var d=l++;c=a?e(c,u,d):(a=!0,u),r&&o.next(c)},i&&function(){a&&o.next(c),o.complete()}))}}function e7(e){return jo(function(t,n){try{t.subscribe(n)}finally{n.add(e)}})}function t7(e,t){return jo(Qz(e,t,arguments.length>=2,!0))}function Yi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=KD(e);return jo(function(r,i){(n?pI(e,r,n):pI(e,r)).subscribe(i)})}function xE(e){return jo(function(t,n){$u(e).subscribe(Uc(n,function(){return n.complete()},fI)),!n.closed&&t.subscribe(n)})}var n7=Object.defineProperty,r7=Object.defineProperties,i7=Object.getOwnPropertyDescriptors,tg=Object.getOwnPropertySymbols,dO=Object.prototype.hasOwnProperty,fO=Object.prototype.propertyIsEnumerable,NE=(e,t,n)=>t in e?n7(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mI=(e,t)=>{for(var n in t||(t={}))dO.call(t,n)&&NE(e,n,t[n]);if(tg)for(var n of tg(t))fO.call(t,n)&&NE(e,n,t[n]);return e},s7=(e,t)=>r7(e,i7(t)),o7=(e,t)=>{var n={};for(var r in e)dO.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&tg)for(var r of tg(e))t.indexOf(r)<0&&fO.call(e,r)&&(n[r]=e[r]);return n},$o=(e,t,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(e,t)).next())}),hO="lk";function Wb(e){return typeof e>"u"?!1:a7(e)||c7(e)}function a7(e){var t;return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("track")&&typeof((t=e.publication)==null?void 0:t.track)<"u":!1}function c7(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&e.hasOwnProperty("publication")&&typeof e.publication<"u":!1}function l7(e){return e?e.hasOwnProperty("participant")&&e.hasOwnProperty("source")&&typeof e.publication>"u":!1}function pO(e){if(typeof e=="string"||typeof e=="number")return`${e}`;if(l7(e))return`${e.participant.identity}_${e.source}_placeholder`;if(Wb(e))return`${e.participant.identity}_${e.publication.source}_${e.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${e}`)}function u7(e){return e instanceof oI}function d7(e,t){return $o(this,null,function*(){const{x:n,y:r}=yield Sz(e,t,{placement:"top",middleware:[rz(6),tz(),iz({padding:5})]});return{x:n,y:r}})}function f7(e,t){return!e.contains(t.target)}var h7=[ne.ConnectionStateChanged,ne.RoomMetadataChanged,ne.ActiveSpeakersChanged,ne.ConnectionQualityChanged,ne.ParticipantConnected,ne.ParticipantDisconnected,ne.ParticipantPermissionsChanged,ne.ParticipantMetadataChanged,ne.TrackMuted,ne.TrackUnmuted,ne.TrackPublished,ne.TrackUnpublished,ne.TrackStreamStateChanged,ne.TrackSubscriptionFailed,ne.TrackSubscriptionPermissionChanged,ne.TrackSubscriptionStatusChanged],p7=[...h7,ne.LocalTrackPublished,ne.LocalTrackUnpublished],m7=[oe.ConnectionQualityChanged,oe.IsSpeakingChanged,oe.ParticipantMetadataChanged,oe.ParticipantPermissionsChanged,oe.TrackMuted,oe.TrackUnmuted,oe.TrackPublished,oe.TrackUnpublished,oe.TrackStreamStateChanged,oe.TrackSubscriptionFailed,oe.TrackSubscriptionPermissionChanged,oe.TrackSubscriptionStatusChanged];[...m7,oe.LocalTrackPublished,oe.LocalTrackUnpublished];var it=wz.getLogger("lk-components-js");it.setDefaultLevel("WARN");function g7(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var v7=[],y7={showChat:!1,unreadMessages:0};function Hb(e,...t){return new Vn(r=>{const i=()=>{r.next(e)};return t.forEach(o=>{e.on(o,i)}),()=>{t.forEach(o=>{e.off(o,i)})}}).pipe(Yi(e))}function jb(e,t){return new Vn(r=>{const i=(...o)=>{r.next(o)};return e.on(t,i),()=>{e.off(t,i)}})}function C7(e){return jb(e,ne.ConnectionStateChanged).pipe(Cr(([t])=>t),Yi(e.state))}function I7(e,t,n=!0){var r;const i=()=>$o(this,null,function*(){try{const a=yield Ym.getLocalDevices(e,n);s.next(a)}catch(a){t==null||t(a)}}),s=new Ha,o=s.pipe(e7(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return pI(Ym.getLocalDevices(e,n).catch(a=>t==null?void 0:t(a)),o)}function S7(e){return jb(e,ne.DataReceived)}function b7(e){return Hb(e,ne.AudioPlaybackStatusChanged).pipe(Cr(n=>({canPlayAudio:n.canPlaybackAudio})))}function w7(e){return Hb(e,ne.VideoPlaybackStatusChanged).pipe(Cr(n=>({canPlayVideo:n.canPlaybackVideo})))}function k7(e,t){return jb(e,ne.ActiveDeviceChanged).pipe(uO(([n])=>n===t),Cr(([n,r])=>(it.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),Yi(e.getActiveDevice(t)))}function gi(e){return`${hO}-${e}`}function A7(e){const t=gI(e),n=Zb(e.participant).pipe(Cr(()=>gI(e)),Yi(t));return{className:gi(e.source===q.Source.Camera||e.source===q.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function gI(e){if(Wb(e))return e.publication;{const{source:t,name:n,participant:r}=e;if(t&&n)return r.getTracks().find(i=>i.source===t&&i.trackName===n);if(n)return r.getTrackByName(n);if(t)return r.getTrack(t);throw new Error("At least one of source and name needs to be defined")}}function $b(e,...t){return new Vn(r=>{const i=()=>{r.next(e)};return t.forEach(o=>{e.on(o,i)}),()=>{t.forEach(o=>{e.off(o,i)})}}).pipe(Yi(e))}function Zb(e){return $b(e,oe.TrackMuted,oe.TrackUnmuted,oe.ParticipantPermissionsChanged,oe.TrackPublished,oe.TrackUnpublished,oe.LocalTrackPublished,oe.LocalTrackUnpublished,oe.MediaDevicesError,oe.TrackSubscriptionStatusChanged).pipe(Cr(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:s}=n,o=n.getTrack(q.Source.Microphone),a=n.getTrack(q.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:s,cameraTrack:a,microphoneTrack:o,participant:n}}))}function E7(e){return $b(e,oe.ParticipantMetadataChanged).pipe(Cr(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),Yi({name:e.name,identity:e.identity,metadata:e.metadata}))}function T7(e){return zb(e,oe.ConnectionQualityChanged).pipe(Cr(([n])=>n),Yi(e.connectionQuality))}function zb(e,t){return new Vn(r=>{const i=(...o)=>{r.next(o)};return e.on(t,i),()=>{e.off(t,i)}})}function mO(e){var t,n,r,i;return $b(e.participant,oe.TrackMuted,oe.TrackUnmuted,oe.TrackSubscribed,oe.TrackUnsubscribed,oe.LocalTrackPublished,oe.LocalTrackUnpublished).pipe(Cr(s=>{var o,a;const c=(o=e.publication)!=null?o:s.getTrack(e.source);return(a=c==null?void 0:c.isMuted)!=null?a:!0}),Yi((i=(r=(t=e.publication)==null?void 0:t.isMuted)!=null?r:(n=e.participant.getTrack(e.source))==null?void 0:n.isMuted)!=null?i:!0))}function _7(e){return zb(e,oe.IsSpeakingChanged).pipe(Cr(([t])=>t))}function R7(e,t={}){var n;let r;const i=new Vn(c=>(r=c,()=>a.unsubscribe())).pipe(Yi(Array.from(e.participants.values()))),s=(n=t.additionalRoomEvents)!=null?n:p7,o=Array.from(new Set([ne.ParticipantConnected,ne.ParticipantDisconnected,ne.ConnectionStateChanged,...s])),a=Hb(e,...o).subscribe(c=>r==null?void 0:r.next(Array.from(c.participants.values())));return e.participants.size>0&&(r==null||r.next(Array.from(e.participants.values()))),i}function x7(e){return zb(e,oe.ParticipantPermissionsChanged).pipe(Cr(()=>e.permissions),Yi(e.permissions))}function N7(e,t,n){const{localParticipant:r}=t,i=(l,u)=>{let d=!1;switch(l){case q.Source.Camera:d=u.isCameraEnabled;break;case q.Source.Microphone:d=u.isMicrophoneEnabled;break;case q.Source.ScreenShare:d=u.isScreenShareEnabled;break}return d},s=Zb(r).pipe(Cr(l=>i(e,l.participant)),Yi(i(e,r))),o=new Ha,a=(l,u)=>$o(this,null,function*(){try{switch(u??(u=n),o.next(!0),e){case q.Source.Camera:yield r.setCameraEnabled(l??!r.isCameraEnabled,u);break;case q.Source.Microphone:yield r.setMicrophoneEnabled(l??!r.isMicrophoneEnabled,u);break;case q.Source.ScreenShare:yield r.setScreenShareEnabled(l??!r.isScreenShareEnabled,u);break;default:break}}finally{o.next(!1)}});return{className:gi("button"),toggle:a,enabledObserver:s,pendingObserver:o.asObservable()}}function P7(){let e=!1;const t=new Ha,n=new Ha,r=s=>{n.next(!0),e=s??!e,t.next(e),n.next(!1)};return{className:gi("button"),toggle:r,enabledObserver:t.asObservable(),pendingObserver:n.asObservable()}}function M7(e,t,n){const r=new XD(void 0),i=t?k7(t,e):r.asObservable(),s=(a,...c)=>$o(this,[a,...c],function*(l,u={}){var d,f,h;if(t){it.debug(`Switching active device of kind "${e}" with id ${l}.`),yield t.switchActiveDevice(e,l,u.exact);const p=(d=t.getActiveDevice(e))!=null?d:l;p!==l&&l!=="default"&&it.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${p}) instead.`);let m;e==="audioinput"?m=(f=t.localParticipant.getTrack(q.Source.Microphone))==null?void 0:f.track:e==="videoinput"&&(m=(h=t.localParticipant.getTrack(q.Source.Camera))==null?void 0:h.track);const y=l==="default"&&!m||l==="default"&&(m==null?void 0:m.mediaStreamTrack.label.startsWith("Default"));r.next(y?l:p)}else if(n){yield n.setDeviceId(u.exact?{exact:l}:l);const p=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:p)}else r.value!==l&&(it.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:gi("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:s}}function D7(e){const t=r=>{e.disconnect(r)};return{className:gi("disconnect-button"),disconnect:t}}function O7(e){const t=gi("connection-quality"),n=T7(e);return{className:t,connectionQualityObserver:n}}function L7(e){let t="track-muted-indicator-camera";switch(e.source){case q.Source.Camera:t="track-muted-indicator-camera";break;case q.Source.Microphone:t="track-muted-indicator-microphone";break}const n=gi(t),r=mO(e);return{className:n,mediaMutedObserver:r}}function B7(e){return{className:"lk-participant-name",infoObserver:E7(e)}}function F7(){return{className:gi("participant-tile")}}var U7={CHAT:"lk-chat-topic"};function gO(e,t,n){return $o(this,arguments,function*(r,i,s,o={}){const{kind:a,destination:c}=o;yield r.publishData(i,a??an.RELIABLE,{destination:c,topic:s})})}function V7(e,t,n){const r=S7(e).pipe(uO(([,,,a])=>t===void 0||a===t),Cr(([a,c,,l])=>{const u={payload:a,topic:l,from:c};return n==null||n(u),u}));let i;const s=new Vn(a=>{i=a});return{messageObservable:r,isSendingObservable:s,send:(a,...c)=>$o(this,[a,...c],function*(l,u={}){i.next(!0);try{yield gO(e.localParticipant,l,t,u)}finally{i.next(!1)}})}}var G7=new TextEncoder,W7=new TextDecoder,qh=new Map,H7=e=>G7.encode(JSON.stringify({message:e.message,timestamp:e.timestamp})),j7=e=>JSON.parse(W7.decode(e));function $7(e,t){var n,r;const i=new Ha,{messageDecoder:s,messageEncoder:o,channelTopic:a}=t??{},c=a??U7.CHAT;let l=!1;qh.has(e)||(l=!0);const u=(n=qh.get(e))!=null?n:new Map,d=(r=u.get(c))!=null?r:new Ha;if(u.set(c,d),qh.set(e,u),l){const{messageObservable:v}=V7(e,c);v.pipe(xE(i)).subscribe(d)}const f=s??j7,h=d.pipe(Cr(v=>{const S=f(v.payload);return s7(mI({},S),{from:v.from})}),t7((v,S)=>[...v,S],[]),xE(i)),p=new XD(!1),m=o??H7,y=v=>$o(this,null,function*(){const S=Date.now(),E=m({message:v,timestamp:S});p.next(!0);try{yield gO(e.localParticipant,E,c,{kind:an.RELIABLE}),d.next({payload:E,topic:c,from:e.localParticipant})}finally{p.next(!1)}});function g(){i.next(),i.complete(),qh.clear()}return e.once(ne.Disconnected,g),{messageObservable:h,isSendingObservable:p,send:y}}function Z7(){const e=n=>$o(this,null,function*(){it.info("Start Audio for room: ",n),yield n.startAudio()});return{className:gi("start-audio-button"),roomAudioPlaybackAllowedObservable:b7,handleStartAudioPlayback:e}}function z7(){const e=n=>$o(this,null,function*(){it.info("Start Video for room: ",n),yield n.startVideo()});return{className:gi("start-audio-button"),roomVideoPlaybackAllowedObservable:w7,handleStartVideoPlayback:e}}function X7(){return{className:[gi("button"),gi("chat-toggle")].join(" ")}}function K7(){return{className:"lk-room-container"}}function J7(e,t){if(typeof localStorage>"u"){it.error("Local storage is not available.");return}try{localStorage.setItem(e,JSON.stringify(t))}catch(n){it.error(`Error setting item to local storage: ${n}`)}}function Y7(e){if(typeof localStorage>"u"){it.error("Local storage is not available.");return}try{const t=localStorage.getItem(e);if(!t){it.warn(`Item with key ${e} does not exist in local storage.`);return}return JSON.parse(t)}catch(t){it.error(`Error getting item from local storage: ${t}`);return}}function q7(e){return{load:()=>Y7(e),save:t=>J7(e,t)}}var Q7=`${hO}-user-choices`,nc={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:"",e2ee:!1,sharedPassphrase:""},{load:eX,save:tX}=q7(Q7);function nX(e,t=!1){if(t===!0)return;const n=e,r=o7(n,["e2ee","sharedPassphrase"]);tX(r)}function rX(e,t=!1){var n,r,i,s,o,a,c;const l={videoEnabled:(n=e==null?void 0:e.videoEnabled)!=null?n:nc.videoEnabled,audioEnabled:(r=e==null?void 0:e.audioEnabled)!=null?r:nc.audioEnabled,videoDeviceId:(i=e==null?void 0:e.videoDeviceId)!=null?i:nc.videoDeviceId,audioDeviceId:(s=e==null?void 0:e.audioDeviceId)!=null?s:nc.audioDeviceId,username:(o=e==null?void 0:e.username)!=null?o:nc.username,e2ee:(a=e==null?void 0:e.e2ee)!=null?a:nc.e2ee,sharedPassphrase:(c=e==null?void 0:e.sharedPassphrase)!=null?c:nc.sharedPassphrase};if(t)return l;{const u=eX();return mI(mI({},l),u??{})}}function vO(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=vO(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function iX(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=vO(e))&&(r&&(r+=" "),r+=t);return r}var sX=Object.defineProperty,oX=Object.defineProperties,aX=Object.getOwnPropertyDescriptors,ng=Object.getOwnPropertySymbols,yO=Object.prototype.hasOwnProperty,CO=Object.prototype.propertyIsEnumerable,PE=(e,t,n)=>t in e?sX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_e=(e,t)=>{for(var n in t||(t={}))yO.call(t,n)&&PE(e,n,t[n]);if(ng)for(var n of ng(t))CO.call(t,n)&&PE(e,n,t[n]);return e},Kn=(e,t)=>oX(e,aX(t)),Gn=(e,t)=>{var n={};for(var r in e)yO.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&ng)for(var r of ng(e))t.indexOf(r)<0&&CO.call(e,r)&&(n[r]=e[r]);return n},IO=(e,t,n)=>new Promise((r,i)=>{var s=c=>{try{a(n.next(c))}catch(l){i(l)}},o=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(s,o);a((n=n.apply(e,t)).next())});function qr(e,t){const[n,r]=w.useState(t);return w.useEffect(()=>{if(typeof window>"u"||!e)return;const i=e.subscribe(r);return()=>i.unsubscribe()},[e]),n}function cX(e){const t=s=>typeof window<"u"?window.matchMedia(s).matches:!1,[n,r]=w.useState(t(e));function i(){r(t(e))}return w.useEffect(()=>{const s=window.matchMedia(e);return i(),s.addListener?s.addListener(i):s.addEventListener("change",i),()=>{s.removeListener?s.removeListener(i):s.removeEventListener("change",i)}},[e]),n}function lX(e,t){if(t.msg==="show_chat")return Kn(_e({},e),{showChat:!0,unreadMessages:0});if(t.msg==="hide_chat")return Kn(_e({},e),{showChat:!1});if(t.msg==="toggle_chat"){const n=Kn(_e({},e),{showChat:!e.showChat});return n.showChat===!0&&(n.unreadMessages=0),n}else return t.msg==="unread_msg"?Kn(_e({},e),{unreadMessages:t.count}):_e({},e)}function uX(e,t){return t.msg==="set_pin"?[t.trackReference]:t.msg==="clear_pin"?[]:_e({},e)}var Xb=w.createContext(void 0);function dX(){const e=w.useContext(Xb);if(!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}function fX(e){const[t,n]=w.useReducer(uX,v7),[r,i]=w.useReducer(lX,y7);return e??{pin:{dispatch:n,state:t},widget:{dispatch:i,state:r}}}function SO(){return w.useContext(Xb)}var hX=w.createContext(void 0);function hh(){return w.useContext(hX)}var Kb=w.createContext(void 0);function sv(){return w.useContext(Kb)}function Jc(e){var t;const n=sv(),r=hh(),i=(t=e??n)!=null?t:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var Jb=w.createContext(void 0);function ov(){const e=w.useContext(Jb);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function av(){return w.useContext(Jb)}function ph(e){const t=av(),n=e??t;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var pX=w.createContext(void 0);function mX(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}function Qa(...e){const t=_e({},e[0]);for(let n=1;n<e.length;n++){const r=e[n];for(const i in r){const s=t[i],o=r[i];typeof s=="function"&&typeof o=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?t[i]=mX(s,o):(i==="className"||i==="UNSAFE_className")&&typeof s=="string"&&typeof o=="string"?t[i]=iX(s,o):t[i]=o!==void 0?o:s}}return t}function gX(e={}){const t=Jc(e.participant),{className:n,connectionQualityObserver:r}=w.useMemo(()=>O7(t),[t]),i=qr(r,ai.Unknown);return{className:n,quality:i}}function vX(e){const t=ph(e),n=w.useMemo(()=>C7(t),[t]);return qr(n,t.state)}function yX(e){const t=ov(),n=vX(t);return{buttonProps:w.useMemo(()=>{const{className:i,disconnect:s}=D7(t);return Qa(e,{className:i,onClick:()=>{var a;return s((a=e.stopTracks)!=null?a:!0)},disabled:n===et.Disconnected})},[t,e,n])}}function CX(e){if(e.publication instanceof Df){const t=e.publication.track;if(t){const{facingMode:n}=WZ(t);return n}}return"undefined"}function ME(e,t={}){var n,r;const i=typeof e=="string"?t.participant:e.participant,s=Jc(i),o=typeof e=="string"?{participant:s,source:e}:e,[a,c]=w.useState(!!((n=o.publication)!=null&&n.isMuted||(r=s.getTrack(o.source))!=null&&r.isMuted));return w.useEffect(()=>{const l=mO(o).subscribe(c);return()=>l.unsubscribe()},[pO(o)]),a}function IX(e){const t=Jc(e),n=w.useMemo(()=>_7(t),[t]);return qr(n,t.isSpeaking)}var SX={connect:!0,audio:!1,video:!1};function bX(e){const t=_e(_e({},SX),e),{token:n,serverUrl:r,options:i,room:s,connectOptions:o,connect:a,audio:c,video:l,screen:u,onConnected:d,onDisconnected:f,onError:h,onMediaDeviceFailure:p,onEncryptionError:m,simulateParticipants:y}=t,g=Gn(t,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&s&&it.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,S]=w.useState();w.useEffect(()=>{S(s??new Ym(i))},[s]);const E=w.useMemo(()=>{const{className:k}=K7();return Qa(g,{className:k})},[g]);return w.useEffect(()=>{if(!v)return;const k=()=>{const _=v.localParticipant;it.debug("trying to publish local tracks"),Promise.all([_.setMicrophoneEnabled(!!c,typeof c!="boolean"?c:void 0),_.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),_.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(x=>{it.warn(x),h==null||h(x)})},b=_=>{const x=Pf.getFailure(_);p==null||p(x)},A=_=>{m==null||m(_)};return v.on(ne.SignalConnected,k).on(ne.MediaDevicesError,b).on(ne.EncryptionError,A),()=>{v.off(ne.SignalConnected,k).off(ne.MediaDevicesError,b).off(ne.EncryptionError,A)}},[v,c,l,u,h,m,p]),w.useEffect(()=>{if(v){if(y){v.simulateParticipants({participants:{count:y},publish:{audio:!0,useRealTracks:!0}});return}if(!n){it.debug("no token yet");return}if(!r){it.warn("no livekit url provided"),h==null||h(Error("no livekit url provided"));return}a?(it.debug("connecting"),v.connect(r,n,o).catch(k=>{it.warn(k),h==null||h(k)})):(it.debug("disconnecting because connect is false"),v.disconnect())}},[a,n,JSON.stringify(o),v,h,r,y]),w.useEffect(()=>{if(!v)return;const k=b=>{switch(b){case et.Disconnected:f&&f();break;case et.Connected:d&&d();break}};return v.on(ne.ConnectionStateChanged,k),()=>{v.off(ne.ConnectionStateChanged,k)}},[n,d,f,v]),w.useEffect(()=>{if(v)return()=>{it.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:E}}function wX(e={}){const t=ph(e.room),[n,r]=w.useState(t.localParticipant),[i,s]=w.useState(n.isMicrophoneEnabled),[o,a]=w.useState(n.isMicrophoneEnabled),[c,l]=w.useState(n.lastMicrophoneError),[u,d]=w.useState(n.lastCameraError),[f,h]=w.useState(n.isMicrophoneEnabled),[p,m]=w.useState(void 0),[y,g]=w.useState(void 0),v=S=>{a(S.isCameraEnabled),s(S.isMicrophoneEnabled),h(S.isScreenShareEnabled),g(S.cameraTrack),m(S.microphoneTrack),l(S.participant.lastMicrophoneError),d(S.participant.lastCameraError),r(S.participant)};return w.useEffect(()=>{const S=Zb(n).subscribe(v);return()=>S.unsubscribe()},[n]),{isMicrophoneEnabled:i,isScreenShareEnabled:f,isCameraEnabled:o,microphoneTrack:p,cameraTrack:y,lastMicrophoneError:c,lastCameraError:u,localParticipant:n}}function kX(){const e=ov(),t=w.useMemo(()=>x7(e.localParticipant),[e]);return qr(t,e.localParticipant.permissions)}function AX({kind:e,room:t,track:n,requestPermissions:r,onError:i}){const s=av(),o=w.useMemo(()=>I7(e,i,r),[e,r,i]),a=qr(o,[]),[c,l]=w.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:f}=w.useMemo(()=>M7(e,t??s,n),[e,t,s,n]);return w.useEffect(()=>{const h=d.subscribe(p=>{it.info("setCurrentDeviceId",p),p&&l(p)});return()=>{h==null||h.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:c,setActiveMediaDevice:f}}function EX(e){return e!==void 0}function Zu(...e){return Qa(...e.filter(EX))}function bO(e,t,n){return w.Children.map(e,r=>w.isValidElement(r)&&w.Children.only(e)?w.cloneElement(r,Kn(_e({},t),{key:n})):r)}function wO(e,t={}){var n;const[r,i]=w.useState(gI(e)),[s,o]=w.useState(r==null?void 0:r.isMuted),[a,c]=w.useState(r==null?void 0:r.isSubscribed),[l,u]=w.useState(r==null?void 0:r.track),[d,f]=w.useState("landscape"),h=w.useRef(),{className:p,trackObserver:m}=w.useMemo(()=>A7(e),[(n=e.participant.sid)!=null?n:e.participant.identity,e.source,Wb(e)&&e.publication.trackSid]);return w.useEffect(()=>{const y=m.subscribe(g=>{it.debug("update track",g),i(g),o(g==null?void 0:g.isMuted),c(g==null?void 0:g.isSubscribed),u(g==null?void 0:g.track)});return()=>y==null?void 0:y.unsubscribe()},[m]),w.useEffect(()=>{var y,g;return l&&(h.current&&l.detach(h.current),(y=t.element)!=null&&y.current&&!(u7(e.participant)&&(l==null?void 0:l.kind)==="audio")&&l.attach(t.element.current)),h.current=(g=t.element)==null?void 0:g.current,()=>{h.current&&(l==null||l.detach(h.current))}},[l,t.element]),w.useEffect(()=>{var y,g;if(typeof((y=r==null?void 0:r.dimensions)==null?void 0:y.width)=="number"&&typeof((g=r==null?void 0:r.dimensions)==null?void 0:g.height)=="number"){const v=r.dimensions.width>r.dimensions.height?"landscape":"portrait";f(v)}},[r]),{publication:r,isMuted:s,isSubscribed:a,track:l,elementProps:Zu(t.props,_e({className:p,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}function TX({trackRef:e,participant:t,source:n,publication:r,onParticipantClick:i,disableSpeakingIndicator:s,htmlProps:o}){const a=hh(),c=Jc(t),l=w.useMemo(()=>{var m,y,g,v,S,E;const k=(y=(m=e==null?void 0:e.source)!=null?m:a==null?void 0:a.source)!=null?y:n;if(k===void 0)throw new Error("Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.");return{participant:(v=(g=e==null?void 0:e.participant)!=null?g:a==null?void 0:a.participant)!=null?v:c,publication:(E=(S=e==null?void 0:e.publication)!=null?S:a==null?void 0:a.publication)!=null?E:r,source:k}},[e==null?void 0:e.participant,e==null?void 0:e.source,e==null?void 0:e.publication,a==null?void 0:a.participant,a==null?void 0:a.source,a==null?void 0:a.publication,c,n,r]),u=w.useMemo(()=>{const{className:m}=F7();return Qa(o,{className:m,onClick:y=>{var g,v;if((g=o.onClick)==null||g.call(o,y),typeof i=="function"){const S=(v=l.publication)!=null?v:l.participant.getTrack(l.source);i({participant:l.participant,track:S})}}})},[o,i,l.publication,l.source,l.participant]),d=ME(q.Source.Camera,{participant:l.participant}),f=ME(q.Source.Microphone,{participant:l.participant}),h=IX(l.participant),p=CX(l);return{elementProps:_e({"data-lk-audio-muted":f,"data-lk-video-muted":d,"data-lk-speaking":s===!0?!1:h,"data-lk-local-participant":l.participant.isLocal,"data-lk-source":l.source,"data-lk-facing-mode":p},u)}}function _X(e={}){const t=ph(e.room),[n,r]=w.useState([]);return w.useEffect(()=>{const i=R7(t,{additionalRoomEvents:e.updateOnlyOn}).subscribe(r);return()=>i.unsubscribe()},[t,JSON.stringify(e.updateOnlyOn)]),n}function RX(e={}){const t=_X(e),{localParticipant:n}=wX(e);return[n,...t]}function xX({room:e,props:t}){const n=ph(e),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:s}=w.useMemo(()=>Z7(),[]),o=w.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=qr(o,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:w.useMemo(()=>Qa(t,{className:r,onClick:()=>{s(n)},style:{display:a?"none":"block"}}),[t,r,a,s,n]),canPlayAudio:a}}function NX({room:e,props:t}){const n=ph(e),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:s}=w.useMemo(()=>z7(),[]),o=w.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=qr(o,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:w.useMemo(()=>Qa(t,{className:r,onClick:()=>{s(n)},style:{display:a?"none":"block"}}),[t,r,a,s,n]),canPlayVideo:a}}function PX({props:e}){const{dispatch:t,state:n}=dX().widget,{className:r}=w.useMemo(()=>X7(),[]);return{mergedProps:w.useMemo(()=>Qa(e,{className:r,onClick:()=>{t&&t({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[e,r,t,n])}}function MX(e,t={}){var n,r,i,s;let o=hh();const a=(r=(n=sv())!=null?n:t.participant)!=null?r:o==null?void 0:o.participant;if(typeof e=="string"){if(!a)throw Error("Participant missing, either provide it via context or pass it in directly");o={participant:a,source:e}}else if(e)o=e;else throw Error("No track reference found, either provide it via context or pass it in directly");const{className:c,mediaMutedObserver:l}=w.useMemo(()=>L7(o),[pO(o)]);return{isMuted:qr(l,!!((i=o.publication)!=null&&i.isMuted||(s=o.participant.getTrack(o.source))!=null&&s.isMuted)),className:c}}function DX(e){var t=e,{source:n,onChange:r,initialState:i,captureOptions:s}=t,o=Gn(t,["source","onChange","initialState","captureOptions"]),a;const c=av(),l=(a=c==null?void 0:c.localParticipant)==null?void 0:a.getTrack(n),{toggle:u,className:d,pendingObserver:f,enabledObserver:h}=w.useMemo(()=>c?N7(n,c,s):P7(),[c,n,JSON.stringify(s)]),p=qr(f,!1),m=qr(h,i??!!(l!=null&&l.isEnabled));w.useEffect(()=>{r==null||r(m)},[m,r]),w.useEffect(()=>{i!==void 0&&(it.debug("forcing initial toggle state",n,i),u(i))},[]);const y=w.useMemo(()=>Qa(o,{className:d}),[o,d]),g=w.useCallback(v=>{var S;u(),(S=o.onClick)==null||S.call(o,v)},[o,u]);return{toggle:u,enabled:m,pending:p,track:l,buttonProps:Kn(_e({},y),{"aria-pressed":m,"data-lk-source":n,"data-lk-enabled":m,disabled:p,onClick:g})}}function OX(e,t={}){return wO(e,t)}function LX(e){const t=ov(),[n,r]=w.useState(),i=qr(n==null?void 0:n.isSendingObservable,!1),s=qr(n==null?void 0:n.messageObservable,[]);return w.useEffect(()=>{const o=$7(t,e);r(o)},[t,e]),{send:n==null?void 0:n.send,chatMessages:s,isSending:i}}function BX(e={}){var t;const[n,r]=w.useState(rX(e.defaults,(t=e.preventLoad)!=null?t:!1)),i=w.useCallback(l=>{r(u=>Kn(_e({},u),{audioEnabled:l}))},[]),s=w.useCallback(l=>{r(u=>Kn(_e({},u),{videoEnabled:l}))},[]),o=w.useCallback(l=>{r(u=>Kn(_e({},u),{audioDeviceId:l}))},[]),a=w.useCallback(l=>{r(u=>Kn(_e({},u),{videoDeviceId:l}))},[]),c=w.useCallback(l=>{r(u=>Kn(_e({},u),{username:l}))},[]);return w.useEffect(()=>{var l;nX(n,(l=e.preventSave)!=null?l:!1)},[n,e.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:s,saveAudioInputDeviceId:o,saveVideoInputDeviceId:a,saveUsername:c}}function FX(e){const{mergedProps:t}=PX({props:e});return w.createElement("button",_e({},t),e.children)}function UX(e){const{buttonProps:t}=yX(e);return w.createElement("button",_e({},t),e.children)}var VX=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),w.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),w.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),GX=VX,WX=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),w.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),HX=WX,jX=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},e),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),$X=jX,ZX=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),zX=ZX,XX=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),w.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),w.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),KX=XX,JX=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),w.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),w.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),YX=JX,qX=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),QX=qX,eK=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),tK=eK,nK=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),rK=nK,iK=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),sK=iK,oK=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),aK=oK,cK=e=>w.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),w.createElement("g",{fill:"currentColor"},w.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),w.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),lK=cK;function Hy(e){var t=e,{kind:n,initialSelection:r,onActiveDeviceChange:i,onDeviceListChange:s,onDeviceSelectError:o,exactMatch:a,track:c,requestPermissions:l,onError:u}=t,d=Gn(t,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const f=av(),h=w.useCallback(k=>{f&&f.emit(ne.MediaDevicesError,k),u==null||u(k)},[f,u]),{devices:p,activeDeviceId:m,setActiveMediaDevice:y,className:g}=AX({kind:n,room:f,track:c,requestPermissions:l,onError:h});w.useEffect(()=>{r!==void 0&&y(r)},[y]),w.useEffect(()=>{typeof s=="function"&&s(p)},[s,p]),w.useEffect(()=>{m&&m!==""&&(i==null||i(m))},[m]);const v=k=>IO(this,null,function*(){try{yield y(k,{exact:a})}catch(b){if(b instanceof Error)o==null||o(b);else throw b}}),S=w.useMemo(()=>Zu(d,{className:g},{className:"lk-list"}),[g,d]);function E(k,b,A){return k===b||A===0&&b==="default"}return w.createElement("ul",_e({},S),p.map((k,b)=>w.createElement("li",{key:k.deviceId,id:k.deviceId,"data-lk-active":E(k.deviceId,m,b),"aria-selected":E(k.deviceId,m,b),role:"option"},w.createElement("button",{className:"lk-button",onClick:()=>v(k.deviceId)},k.label))))}function kO(e,t){switch(e){case q.Source.Microphone:return t?w.createElement(YX,null):w.createElement(KX,null);case q.Source.Camera:return t?w.createElement(HX,null):w.createElement(GX,null);case q.Source.ScreenShare:return t?w.createElement(lK,null):w.createElement(aK,null);default:return}}function uK(e){switch(e){case ai.Excellent:return w.createElement(QX,null);case ai.Good:return w.createElement(tK,null);case ai.Poor:return w.createElement(rK,null);default:return w.createElement(sK,null)}}function jy(e){var t=e,{showIcon:n}=t,r=Gn(t,["showIcon"]);const{buttonProps:i,enabled:s}=DX(r);return w.createElement("button",_e({},i),(n??!0)&&kO(r.source,s),r.children)}function dK(e){var t;const{className:n,quality:r}=gX(e),i=w.useMemo(()=>Kn(_e({},Zu(e,{className:n})),{"data-lk-quality":r}),[r,e,n]);return w.createElement("div",_e({},i),(t=e.children)!=null?t:uK(r))}function fK(e){var t=e,{participant:n}=t,r=Gn(t,["participant"]);const i=Jc(n),{className:s,infoObserver:o}=w.useMemo(()=>B7(i),[i]),{identity:a,name:c}=qr(o,{name:i.name,identity:i.identity,metadata:i.metadata}),l=w.useMemo(()=>Zu(r,{className:s,"data-lk-participant-name":c}),[r,s,c]);return w.createElement("span",_e({},l),c!==""?c:a,r.children)}function hK(e){var t=e,{source:n,participant:r,trackRef:i,show:s="always"}=t,o=Gn(t,["source","participant","trackRef","show"]),a,c;const{className:l,isMuted:u}=MX(i??n,{participant:r}),d=s==="always"||s==="muted"&&u||s==="unmuted"&&!u,f=w.useMemo(()=>Zu(o,{className:l}),[l,o]);return d?w.createElement("div",Kn(_e({},f),{"data-lk-muted":u}),(c=o.children)!=null?c:kO((a=i==null?void 0:i.source)!=null?a:n,!u)):null}function pK(e){var t=e,{trackRef:n,onSubscriptionStatusChanged:r,volume:i,source:s,name:o,publication:a,participant:c}=t,l=Gn(t,["trackRef","onSubscriptionStatusChanged","volume","source","name","publication","participant"]),u,d,f,h,p,m,y,g,v,S;const E=hh(),k=(h=(f=(u=n==null?void 0:n.publication)==null?void 0:u.trackName)!=null?f:(d=E==null?void 0:E.publication)==null?void 0:d.trackName)!=null?h:o,b=(m=(p=n==null?void 0:n.source)!=null?p:E==null?void 0:E.source)!=null?m:s,A=(g=(y=n==null?void 0:n.publication)!=null?y:E==null?void 0:E.publication)!=null?g:a,_=(S=(v=n==null?void 0:n.participant)!=null?v:E==null?void 0:E.participant)!=null?S:c;if(b===void 0)throw new Error("The AudioTrack component expects a trackRef or source property.");const x=w.useRef(null),P=Jc(_),{elementProps:D,isSubscribed:B,track:V,publication:G}=wO({source:b,name:k,participant:P,publication:A},{element:x,props:l});return w.useEffect(()=>{r==null||r(!!B)},[B,r]),w.useEffect(()=>{V===void 0||i===void 0||(V instanceof Ac?V.setVolume(i):it.warn("Volume can only be set on remote audio tracks."))},[i,V]),w.useEffect(()=>{G===void 0||l.muted===void 0||(G instanceof Bb?G.setEnabled(!l.muted):it.warn("Can only call setEnabled on remote track publications."))},[l.muted,G,V]),w.createElement("audio",_e({ref:x},D))}function mK(e){const t=!!sv();return e.participant&&!t?w.createElement(Kb.Provider,{value:e.participant},e.children):w.createElement(w.Fragment,null,e.children)}function gK({value:e,onPinChange:t,onWidgetChange:n,children:r}){const i=fX(e);return w.useEffect(()=>{it.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),w.useEffect(()=>{it.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),w.createElement(Xb.Provider,{value:i},r)}function vK(e){const{room:t,htmlProps:n}=bX(e);return w.createElement("div",_e({},n),t&&w.createElement(Jb.Provider,{value:t},w.createElement(pX.Provider,{value:e.featureFlags},e.children)))}function yK(e){var t=e,{participant:n,trackRef:r}=t,i=Gn(t,["participant","trackRef"]),s,o;const[a,c]=w.useState([]),l=200,u=90,d=6,f=4,h=50,p=7,m=(s=sv())!=null?s:n;let y=(o=hh())!=null?o:r;if(!y){if(!m)throw Error("Participant missing, provide it directly or within a context");y={participant:m,source:q.Source.Microphone}}const{track:g}=OX(y);return w.useEffect(()=>{if(!g||!(g instanceof ir||g instanceof Ac))return;const{analyser:v,cleanup:S}=K8(g,{smoothingTimeConstant:.8,fftSize:64}),E=new Uint8Array(v.frequencyBinCount),k=()=>{v.getByteFrequencyData(E);const A=new Array(p).fill(0);E.slice(1);const _=6;for(let x=0;x<p/2;x+=1){const P=Math.floor(p/2-x);for(let D=0;D<_;D+=1)A[P]+=Math.pow(E[x*_+D]/255,2);A[P]/=_}for(let x=0;x<p/2;x+=1){const P=Math.floor(p/2+x);if(A[P]===0){for(let D=0;D<_;D+=1)A[P]+=Math.pow(E[x*_+D]/255,2);A[P]/=_}}return A.map(x=>x*h)},b=setInterval(()=>{const A=k();c(A)},100);return()=>{clearInterval(b),S()}},[g]),w.createElement("svg",Kn(_e({width:"100%",height:"100%",viewBox:`0 0 ${l} ${u}`},i),{className:"lk-audio-visualizer"}),w.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),w.createElement("g",{style:{transform:`translate(${(l-p*(d+f))/2}px, 0)`}},a.map((v,S)=>w.createElement("rect",{key:S,x:S*(d+f),y:u/2-v/2,width:d,height:v}))))}function CK(e){var t=e,{participants:n}=t,r=Gn(t,["participants"]);return w.createElement(w.Fragment,null,n.map(i=>w.createElement(Kb.Provider,{value:i,key:i.identity},bO(r.children))))}function IK(e){var t=e,{participant:n,children:r,source:i,publication:s,disableSpeakingIndicator:o,onParticipantClick:a}=t,c=Gn(t,["participant","children","source","publication","disableSpeakingIndicator","onParticipantClick"]);const l=Jc(n),{elementProps:u}=TX({participant:l,htmlProps:c,disableSpeakingIndicator:o,source:q.Source.Microphone,publication:s,onParticipantClick:a});return w.createElement("div",_e({style:{position:"relative"}},u),w.createElement(mK,{participant:l},r??w.createElement(w.Fragment,null,w.createElement(pK,{source:i??q.Source.Microphone}),w.createElement(yK,null),w.createElement("div",{className:"lk-participant-metadata"},w.createElement("div",{className:"lk-participant-metadata-item"},w.createElement(hK,{source:q.Source.Microphone}),w.createElement(fK,null)),w.createElement(dK,{className:"lk-participant-metadata-item"})))))}function SK(e){var t=e,{entry:n,hideName:r=!1,hideTimestamp:i=!1,messageFormatter:s}=t,o=Gn(t,["entry","hideName","hideTimestamp","messageFormatter"]),a,c,l,u;const d=w.useMemo(()=>s?s(n.message):n.message,[n.message,s]),f=new Date(n.timestamp),h=navigator?navigator.language:"en-US";return w.createElement("li",_e({className:"lk-chat-entry",title:f.toLocaleTimeString(h,{timeStyle:"full"}),"data-lk-message-origin":(a=n.from)!=null&&a.isLocal?"local":"remote"},o),(!i||!r)&&w.createElement("span",{className:"lk-meta-data"},!r&&w.createElement("strong",{className:"lk-participant-name"},(u=(c=n.from)==null?void 0:c.name)!=null?u:(l=n.from)==null?void 0:l.identity),!i&&w.createElement("span",{className:"lk-timestamp"},f.toLocaleTimeString(h,{timeStyle:"short"}))),w.createElement("span",{className:"lk-message-body"},d))}function bK(e){var t=e,{messageFormatter:n,messageDecoder:r,messageEncoder:i,channelTopic:s}=t,o=Gn(t,["messageFormatter","messageDecoder","messageEncoder","channelTopic"]);const a=w.useRef(null),c=w.useRef(null),l=w.useMemo(()=>({messageDecoder:r,messageEncoder:i,channelTopic:s}),[r,i,s]),{send:u,chatMessages:d,isSending:f}=LX(l),h=SO(),p=w.useRef(0);function m(y){return IO(this,null,function*(){y.preventDefault(),a.current&&a.current.value.trim()!==""&&u&&(yield u(a.current.value),a.current.value="",a.current.focus())})}return w.useEffect(()=>{var y;c&&((y=c.current)==null||y.scrollTo({top:c.current.scrollHeight}))},[c,d]),w.useEffect(()=>{var y,g,v,S,E;if(!h||d.length===0)return;if((y=h.widget.state)!=null&&y.showChat&&d.length>0&&p.current!==((g=d[d.length-1])==null?void 0:g.timestamp)){p.current=(v=d[d.length-1])==null?void 0:v.timestamp;return}const k=d.filter(A=>!p.current||A.timestamp>p.current).length,{widget:b}=h;k>0&&((S=b.state)==null?void 0:S.unreadMessages)!==k&&((E=b.dispatch)==null||E.call(b,{msg:"unread_msg",count:k}))},[d,h==null?void 0:h.widget]),w.createElement("div",Kn(_e({},o),{className:"lk-chat"}),w.createElement("ul",{className:"lk-list lk-chat-messages",ref:c},o.children?d.map((y,g)=>bO(o.children,{entry:y,key:g,messageFormatter:n})):d.map((y,g,v)=>{const S=g>=1&&v[g-1].from===y.from,E=g>=1&&y.timestamp-v[g-1].timestamp<6e4;return w.createElement(SK,{key:g,hideName:S,hideTimestamp:S===!1?!1:E,entry:y,messageFormatter:n})})),w.createElement("form",{className:"lk-chat-form",onSubmit:m},w.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:f,ref:a,type:"text",placeholder:"Enter a message..."}),w.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:f},"Send")))}function DE(e){var t=e,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:s,requestPermissions:o=!1}=t,a=Gn(t,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[c,l]=w.useState(!1),[u,d]=w.useState([]),[f,h]=w.useState(!0),p=(v,S)=>{it.debug("handle device change"),l(!1),i==null||i(v,S)},m=w.useRef(null),y=w.useRef(null);w.useLayoutEffect(()=>{m.current&&y.current&&(u||f)&&d7(m.current,y.current).then(({x:v,y:S})=>{y.current&&Object.assign(y.current.style,{left:`${v}px`,top:`${S}px`})}),h(!1)},[m,y,u,f]);const g=w.useCallback(v=>{y.current&&v.target!==m.current&&c&&f7(y.current,v)&&l(!1)},[c,y,m]);return w.useEffect(()=>(document.addEventListener("click",g),window.addEventListener("resize",()=>h(!0)),()=>{document.removeEventListener("click",g),window.removeEventListener("resize",()=>h(!0))}),[g,h]),w.createElement(w.Fragment,null,w.createElement("button",Kn(_e({className:"lk-button lk-button-menu","aria-pressed":c},a),{onClick:()=>l(!c),ref:m}),a.children),!a.disabled&&w.createElement("div",{className:"lk-device-menu",ref:y,style:{visibility:c?"visible":"hidden"}},n?w.createElement(Hy,{initialSelection:r,onActiveDeviceChange:v=>p(n,v),onDeviceListChange:d,kind:n,track:s==null?void 0:s[n],requestPermissions:o}):w.createElement(w.Fragment,null,w.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),w.createElement(Hy,{kind:"audioinput",onActiveDeviceChange:v=>p("audioinput",v),onDeviceListChange:d,track:s==null?void 0:s.audioinput,requestPermissions:o}),w.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),w.createElement(Hy,{kind:"videoinput",onActiveDeviceChange:v=>p("videoinput",v),onDeviceListChange:d,track:s==null?void 0:s.videoinput,requestPermissions:o}))))}function wK(e){var t=e,{label:n}=t,r=Gn(t,["label"]);const i=ov(),{mergedProps:s,canPlayAudio:o}=xX({room:i,props:r}),{mergedProps:a,canPlayVideo:c}=NX({room:i,props:s}),l=a,{style:u}=l,d=Gn(l,["style"]);return u.display=o&&c?"none":"block",w.createElement("button",_e({style:u},d),n??`Start ${o?"Video":"Audio"}`)}function kK(e){var t=e,{variation:n,controls:r,saveUserChoices:i=!0}=t,s=Gn(t,["variation","controls","saveUserChoices"]),o,a,c,l,u;const[d,f]=w.useState(!1),h=SO();w.useEffect(()=>{var V,G;((V=h==null?void 0:h.widget.state)==null?void 0:V.showChat)!==void 0&&f((G=h==null?void 0:h.widget.state)==null?void 0:G.showChat)},[(o=h==null?void 0:h.widget.state)==null?void 0:o.showChat]);const m=cX(`(max-width: ${d?1e3:760}px)`)?"minimal":"verbose";n??(n=m);const y=_e({leave:!0},r),g=kX();g?((a=y.camera)!=null||(y.camera=g.canPublish),(c=y.microphone)!=null||(y.microphone=g.canPublish),(l=y.screenShare)!=null||(y.screenShare=g.canPublish),(u=y.chat)!=null||(y.chat=g.canPublishData&&(r==null?void 0:r.chat))):(y.camera=!1,y.chat=!1,y.microphone=!1,y.screenShare=!1);const v=w.useMemo(()=>n==="minimal"||n==="verbose",[n]),S=w.useMemo(()=>n==="textOnly"||n==="verbose",[n]),E=g7(),[k,b]=w.useState(!1),A=V=>{b(V)},_=Zu({className:"lk-control-bar"},s),{saveAudioInputEnabled:x,saveVideoInputEnabled:P,saveAudioInputDeviceId:D,saveVideoInputDeviceId:B}=BX({preventSave:!i});return w.createElement("div",_e({},_),y.microphone&&w.createElement("div",{className:"lk-button-group"},w.createElement(jy,{source:q.Source.Microphone,showIcon:v,onChange:x},S&&"Microphone"),w.createElement("div",{className:"lk-button-group-menu"},w.createElement(DE,{kind:"audioinput",onActiveDeviceChange:(V,G)=>D(G??"")}))),y.camera&&w.createElement("div",{className:"lk-button-group"},w.createElement(jy,{source:q.Source.Camera,showIcon:v,onChange:P},S&&"Camera"),w.createElement("div",{className:"lk-button-group-menu"},w.createElement(DE,{kind:"videoinput",onActiveDeviceChange:(V,G)=>B(G??"")}))),y.screenShare&&E&&w.createElement(jy,{source:q.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:A},S&&(k?"Stop screen share":"Share screen")),y.chat&&w.createElement(FX,null,v&&w.createElement($X,null),S&&"Chat"),y.leave&&w.createElement(UX,null,v&&w.createElement(zX,null),S&&"Leave"),w.createElement(wK,null))}function AK(e){var t=Gn(e,[]);const[n,r]=w.useState({showChat:!1,unreadMessages:0}),i=RX();return w.createElement(gK,{onWidgetChange:r},w.createElement("div",_e({className:"lk-audio-conference"},t),w.createElement("div",{className:"lk-audio-conference-stage"},w.createElement(CK,{participants:i},w.createElement(IK,null))),w.createElement(kK,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),n.showChat&&w.createElement(bK,null)))}const EK="wss://mongoose-67t79p35.livekit.cloud",TK=({client:e})=>{const[t,n]=w.useState([]),[r,i]=w.useState(!1);return w.useEffect(()=>{const s=a=>{n(c=>[...c,a]),i(!0)},o=a=>{n(c=>{const l=c.filter(u=>u!==a);return l.length===0&&i(!1),l})};return e.on("livekitToken",s),e.on("livekitLeave",o),()=>{e.off("livekitToken",s),e.off("livekitLeave",o)}},[e]),t.length?Y.jsxs("div",{"data-lk-theme":"default",children:[t.map((s,o)=>Y.jsx(vK,{video:!1,audio:!0,token:s,serverUrl:EK,connect:!0,onDisconnected:()=>e.emit("livekitLeave",s),children:Y.jsx(AK,{})},o)),Y.jsx("div",{className:"audio-status","aria-live":"polite"})]}):null},AO=Object.prototype.toString;function Yb(e){switch(AO.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Fo(e,Error)}}function zu(e,t){return AO.call(e)===`[object ${t}]`}function qb(e){return zu(e,"ErrorEvent")}function OE(e){return zu(e,"DOMError")}function _K(e){return zu(e,"DOMException")}function Ds(e){return zu(e,"String")}function Qb(e){return e===null||typeof e!="object"&&typeof e!="function"}function bu(e){return zu(e,"Object")}function cv(e){return typeof Event<"u"&&Fo(e,Event)}function RK(e){return typeof Element<"u"&&Fo(e,Element)}function xK(e){return zu(e,"RegExp")}function ew(e){return!!(e&&e.then&&typeof e.then=="function")}function NK(e){return bu(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function EO(e){return typeof e=="number"&&e!==e}function Fo(e,t){try{return e instanceof t}catch{return!1}}function TO(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function Ql(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function LE(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const i=e[r];try{TO(i)?n.push("[VueViewModel]"):n.push(String(i))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function PK(e,t,n=!1){return Ds(e)?xK(t)?t.test(e):Ds(t)?n?e===t:e.includes(t):!1:!1}function Xu(e,t=[],n=!1){return t.some(r=>PK(e,r,n))}function MK(e,t,n=250,r,i,s,o){if(!s.exception||!s.exception.values||!o||!Fo(o.originalException,Error))return;const a=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;a&&(s.exception.values=DK(vI(e,t,i,o.originalException,r,s.exception.values,a,0),n))}function vI(e,t,n,r,i,s,o,a){if(s.length>=n+1)return s;let c=[...s];if(Fo(r[i],Error)){BE(o,a);const l=e(t,r[i]),u=c.length;FE(l,i,u,a),c=vI(e,t,n,r[i],i,[l,...c],l,u)}return Array.isArray(r.errors)&&r.errors.forEach((l,u)=>{if(Fo(l,Error)){BE(o,a);const d=e(t,l),f=c.length;FE(d,`errors[${u}]`,f,a),c=vI(e,t,n,l,i,[d,...c],d,f)}}),c}function BE(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,is_exception_group:!0,exception_id:t}}function FE(e,t,n,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function DK(e,t){return e.map(n=>(n.value&&(n.value=Ql(n.value,t)),n))}function Qh(e){return e&&e.Math==Math?e:void 0}const tt=typeof globalThis=="object"&&Qh(globalThis)||typeof window=="object"&&Qh(window)||typeof self=="object"&&Qh(self)||typeof global=="object"&&Qh(global)||function(){return this}()||{};function lv(){return tt}function _O(e,t,n){const r=n||tt,i=r.__SENTRY__=r.__SENTRY__||{};return i[e]||(i[e]=t())}const eu=lv(),OK=80;function Vc(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,i=[];let s=0,o=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||OK;for(;n&&s++<r&&(l=LK(n,u),!(l==="html"||s>1&&o+i.length*c+l.length>=d));)i.push(l),o+=l.length,n=n.parentNode;return i.reverse().join(a)}catch{return"<unknown>"}}function LK(e,t){const n=e,r=[];let i,s,o,a,c;if(!n||!n.tagName)return"";if(eu.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;r.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter(d=>n.getAttribute(d)).map(d=>[d,n.getAttribute(d)]):null;if(l&&l.length)l.forEach(d=>{r.push(`[${d[0]}="${d[1]}"]`)});else if(n.id&&r.push(`#${n.id}`),i=n.className,i&&Ds(i))for(s=i.split(/\s+/),c=0;c<s.length;c++)r.push(`.${s[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)o=u[c],a=n.getAttribute(o),a&&r.push(`[${o}="${a}"]`);return r.join("")}function BK(){try{return eu.document.location.href}catch{return""}}function FK(e){return eu.document&&eu.document.querySelector?eu.document.querySelector(e):null}function RO(e){if(!eu.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const Ku=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,UK="Sentry Logger ",yI=["debug","info","warn","error","log","assert","trace"],rg={};function Gc(e){if(!("console"in tt))return e();const t=tt.console,n={},r=Object.keys(rg);r.forEach(i=>{const s=rg[i];n[i]=t[i],t[i]=s});try{return e()}finally{r.forEach(i=>{t[i]=n[i]})}}function VK(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return Ku?yI.forEach(n=>{t[n]=(...r)=>{e&&Gc(()=>{tt.console[n](`${UK}[${n}]:`,...r)})}}):yI.forEach(n=>{t[n]=()=>{}}),t}const J=VK(),GK=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function WK(e){return e==="http"||e==="https"}function Ju(e,t=!1){const{host:n,path:r,pass:i,port:s,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&i?`:${i}`:""}@${n}${s?`:${s}`:""}/${r&&`${r}/`}${o}`}function HK(e){const t=GK.exec(e);if(!t){Gc(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,i="",s,o="",a]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const d=l.match(/^\d+/);d&&(l=d[0])}return xO({host:s,pass:i,path:c,projectId:l,port:o,protocol:n,publicKey:r})}function xO(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function jK(e){if(!Ku)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(J.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?WK(r)?t&&isNaN(parseInt(t,10))?(J.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(J.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(J.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function NO(e){const t=typeof e=="string"?HK(e):xO(e);if(!(!t||!jK(t)))return t}class fs extends Error{constructor(t,n="warn"){super(t),this.message=t,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=n}}function kn(e,t,n){if(!(t in e))return;const r=e[t],i=n(r);typeof i=="function"&&PO(i,r),e[t]=i}function Bf(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Ku&&J.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function PO(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,Bf(e,"__sentry_original__",t)}catch{}}function tw(e){return e.__sentry_original__}function $K(e){return Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}function MO(e){if(Yb(e))return{message:e.message,name:e.name,stack:e.stack,...VE(e)};if(cv(e)){const t={type:e.type,target:UE(e.target),currentTarget:UE(e.currentTarget),...VE(e)};return typeof CustomEvent<"u"&&Fo(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function UE(e){try{return RK(e)?Vc(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function VE(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function ZK(e,t=40){const n=Object.keys(MO(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Ql(n[0],t);for(let r=n.length;r>0;r--){const i=n.slice(0,r).join(", ");if(!(i.length>t))return r===n.length?i:Ql(i,t)}return""}function Os(e){return CI(e,new Map)}function CI(e,t){if(bu(e)){const n=t.get(e);if(n!==void 0)return n;const r={};t.set(e,r);for(const i of Object.keys(e))typeof e[i]<"u"&&(r[i]=CI(e[i],t));return r}if(Array.isArray(e)){const n=t.get(e);if(n!==void 0)return n;const r=[];return t.set(e,r),e.forEach(i=>{r.push(CI(i,t))}),r}return e}const DO=50,GE=/\(error: (.*)\)/,WE=/captureMessage|captureException/;function OO(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0)=>{const i=[],s=n.split(`
`);for(let o=r;o<s.length;o++){const a=s[o];if(a.length>1024)continue;const c=GE.test(a)?a.replace(GE,"$1"):a;if(!c.match(/\S*Error: /)){for(const l of t){const u=l(c);if(u){i.push(u);break}}if(i.length>=DO)break}}return XK(i)}}function zK(e){return Array.isArray(e)?OO(...e):e}function XK(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop(),t.reverse(),WE.test(t[t.length-1].function||"")&&(t.pop(),WE.test(t[t.length-1].function||"")&&t.pop()),t.slice(0,DO).map(n=>({...n,filename:n.filename||t[t.length-1].filename,function:n.function||"?"}))}const $y="<anonymous>";function Uo(e){try{return!e||typeof e!="function"?$y:e.name||$y}catch{return $y}}const Xp={},HE={};function Yc(e,t){Xp[e]=Xp[e]||[],Xp[e].push(t)}function qc(e,t){HE[e]||(t(),HE[e]=!0)}function $i(e,t){const n=e&&Xp[e];if(n)for(const r of n)try{r(t)}catch(i){Ku&&J.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Uo(r)}
Error:`,i)}}function KK(e){const t="console";Yc(t,e),qc(t,JK)}function JK(){"console"in tt&&yI.forEach(function(e){e in tt.console&&kn(tt.console,e,function(t){return rg[e]=t,function(...n){$i("console",{args:n,level:e});const i=rg[e];i&&i.apply(tt.console,n)}})})}function Jn(){const e=tt,t=e.crypto||e.msCrypto;let n=()=>Math.random()*16;try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(n()&15)>>r/4).toString(16))}function LO(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function da(e){const{message:t,event_id:n}=e;if(t)return t;const r=LO(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function II(e,t,n){const r=e.exception=e.exception||{},i=r.values=r.values||[],s=i[0]=i[0]||{};s.value||(s.value=t||""),s.type||(s.type=n||"Error")}function Ff(e,t){const n=LO(e);if(!n)return;const r={type:"generic",handled:!0},i=n.mechanism;if(n.mechanism={...r,...i,...t},t&&"data"in t){const s={...i&&i.data,...t.data};n.mechanism.data=s}}function jE(e){if(e&&e.__sentry_captured__)return!0;try{Bf(e,"__sentry_captured__",!0)}catch{}return!1}function BO(e){return Array.isArray(e)?e:[e]}const fl=tt,YK=1e3;let $E,SI,bI;function FO(e){const t="dom";Yc(t,e),qc(t,qK)}function qK(){if(!fl.document)return;const e=$i.bind(null,"dom"),t=ZE(e,!0);fl.document.addEventListener("click",t,!1),fl.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const r=fl[n]&&fl[n].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(kn(r,"addEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,l=c.__sentry_instrumentation_handlers__=c.__sentry_instrumentation_handlers__||{},u=l[s]=l[s]||{refCount:0};if(!u.handler){const d=ZE(e);u.handler=d,i.call(this,s,d,a)}u.refCount++}catch{}return i.call(this,s,o,a)}}),kn(r,"removeEventListener",function(i){return function(s,o,a){if(s==="click"||s=="keypress")try{const c=this,l=c.__sentry_instrumentation_handlers__||{},u=l[s];u&&(u.refCount--,u.refCount<=0&&(i.call(this,s,u.handler,a),u.handler=void 0,delete l[s]),Object.keys(l).length===0&&delete c.__sentry_instrumentation_handlers__)}catch{}return i.call(this,s,o,a)}}))})}function QK(e){if(e.type!==SI)return!1;try{if(!e.target||e.target._sentryId!==bI)return!1}catch{}return!0}function eJ(e,t){return e!=="keypress"?!1:!t||!t.tagName?!0:!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable)}function ZE(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=tJ(n);if(eJ(n.type,r))return;Bf(n,"_sentryCaptured",!0),r&&!r._sentryId&&Bf(r,"_sentryId",Jn());const i=n.type==="keypress"?"input":n.type;QK(n)||(e({event:n,name:i,global:t}),SI=n.type,bI=r?r._sentryId:void 0),clearTimeout($E),$E=fl.setTimeout(()=>{bI=void 0,SI=void 0},YK)}}function tJ(e){try{return e.target}catch{return null}}const wI=lv();function UO(){if(!("fetch"in wI))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function kI(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function nJ(){if(typeof EdgeRuntime=="string")return!0;if(!UO())return!1;if(kI(wI.fetch))return!0;let e=!1;const t=wI.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=kI(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Ku&&J.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function nw(e){const t="fetch";Yc(t,e),qc(t,rJ)}function rJ(){nJ()&&kn(tt,"fetch",function(e){return function(...t){const{method:n,url:r}=iJ(t),i={args:t,fetchData:{method:n,url:r},startTimestamp:Date.now()};return $i("fetch",{...i}),e.apply(tt,t).then(s=>{const o={...i,endTimestamp:Date.now(),response:s};return $i("fetch",o),s},s=>{const o={...i,endTimestamp:Date.now(),error:s};throw $i("fetch",o),s})}})}function AI(e,t){return!!e&&typeof e=="object"&&!!e[t]}function zE(e){return typeof e=="string"?e:e?AI(e,"url")?e.url:e.toString?e.toString():"":""}function iJ(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:zE(n),method:AI(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:zE(t),method:AI(t,"method")?String(t.method).toUpperCase():"GET"}}let ep=null;function VO(e){const t="error";Yc(t,e),qc(t,sJ)}function sJ(){ep=tt.onerror,tt.onerror=function(e,t,n,r,i){return $i("error",{column:r,error:i,line:n,msg:e,url:t}),ep&&!ep.__SENTRY_LOADER__?ep.apply(this,arguments):!1},tt.onerror.__SENTRY_INSTRUMENTED__=!0}let tp=null;function GO(e){const t="unhandledrejection";Yc(t,e),qc(t,oJ)}function oJ(){tp=tt.onunhandledrejection,tt.onunhandledrejection=function(e){return $i("unhandledrejection",e),tp&&!tp.__SENTRY_LOADER__?tp.apply(this,arguments):!0},tt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const np=lv();function aJ(){const e=np.chrome,t=e&&e.app&&e.app.runtime,n="history"in np&&!!np.history.pushState&&!!np.history.replaceState;return!t&&n}const gd=tt;let rp;function uv(e){const t="history";Yc(t,e),qc(t,cJ)}function cJ(){if(!aJ())return;const e=gd.onpopstate;gd.onpopstate=function(...n){const r=gd.location.href,i=rp;if(rp=r,$i("history",{from:i,to:r}),e)try{return e.apply(this,n)}catch{}};function t(n){return function(...r){const i=r.length>2?r[2]:void 0;if(i){const s=rp,o=String(i);rp=o,$i("history",{from:s,to:o})}return n.apply(this,r)}}kn(gd.history,"pushState",t),kn(gd.history,"replaceState",t)}const lJ=tt,wa="__sentry_xhr_v3__";function rw(e){const t="xhr";Yc(t,e),qc(t,uJ)}function uJ(){if(!lJ.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;kn(e,"open",function(t){return function(...n){const r=Date.now(),i=Ds(n[0])?n[0].toUpperCase():void 0,s=dJ(n[1]);if(!i||!s)return t.apply(this,n);this[wa]={method:i,url:s,request_headers:{}},i==="POST"&&s.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const o=()=>{const a=this[wa];if(a&&this.readyState===4){try{a.status_code=this.status}catch{}const c={args:[i,s],endTimestamp:Date.now(),startTimestamp:r,xhr:this};$i("xhr",c)}};return"onreadystatechange"in this&&typeof this.onreadystatechange=="function"?kn(this,"onreadystatechange",function(a){return function(...c){return o(),a.apply(this,c)}}):this.addEventListener("readystatechange",o),kn(this,"setRequestHeader",function(a){return function(...c){const[l,u]=c,d=this[wa];return d&&Ds(l)&&Ds(u)&&(d.request_headers[l.toLowerCase()]=u),a.apply(this,c)}}),t.apply(this,n)}}),kn(e,"send",function(t){return function(...n){const r=this[wa];if(!r)return t.apply(this,n);n[0]!==void 0&&(r.body=n[0]);const i={args:[r.method,r.url],startTimestamp:Date.now(),xhr:this};return $i("xhr",i),t.apply(this,n)}})}function dJ(e){if(Ds(e))return e;try{return e.toString()}catch{}}function fJ(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function hJ(){return"npm"}function WO(){return!fJ()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function pJ(e,t){return e.require(t)}function XE(){return typeof window<"u"&&(!WO()||mJ())}function mJ(){return tt.process!==void 0&&tt.process.type==="renderer"}function gJ(){const e=typeof WeakSet=="function",t=e?new WeakSet:[];function n(i){if(e)return t.has(i)?!0:(t.add(i),!1);for(let s=0;s<t.length;s++)if(t[s]===i)return!0;return t.push(i),!1}function r(i){if(e)t.delete(i);else for(let s=0;s<t.length;s++)if(t[s]===i){t.splice(s,1);break}}return[n,r]}function ls(e,t=100,n=1/0){try{return EI("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function HO(e,t=3,n=100*1024){const r=ls(e,t);return IJ(r)>n?HO(e,t-1,n):r}function EI(e,t,n=1/0,r=1/0,i=gJ()){const[s,o]=i;if(t==null||["number","boolean","string"].includes(typeof t)&&!EO(t))return t;const a=vJ(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return a.replace("object ","");if(s(t))return"[Circular ~]";const l=t;if(l&&typeof l.toJSON=="function")try{const h=l.toJSON();return EI("",h,c-1,r,i)}catch{}const u=Array.isArray(t)?[]:{};let d=0;const f=MO(t);for(const h in f){if(!Object.prototype.hasOwnProperty.call(f,h))continue;if(d>=r){u[h]="[MaxProperties ~]";break}const p=f[h];u[h]=EI(h,p,c-1,r,i),d++}return o(t),u}function vJ(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(TO(t))return"[VueViewModel]";if(NK(t))return"[SyntheticEvent]";if(typeof t=="number"&&t!==t)return"[NaN]";if(typeof t=="function")return`[Function: ${Uo(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=yJ(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function yJ(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}function CJ(e){return~-encodeURI(e).split(/%..|./).length}function IJ(e){return CJ(JSON.stringify(e))}var zs;(function(e){e[e.PENDING=0]="PENDING";const n=1;e[e.RESOLVED=n]="RESOLVED";const r=2;e[e.REJECTED=r]="REJECTED"})(zs||(zs={}));function wu(e){return new Zr(t=>{t(e)})}function iw(e){return new Zr((t,n)=>{n(e)})}class Zr{constructor(t){Zr.prototype.__init.call(this),Zr.prototype.__init2.call(this),Zr.prototype.__init3.call(this),Zr.prototype.__init4.call(this),this._state=zs.PENDING,this._handlers=[];try{t(this._resolve,this._reject)}catch(n){this._reject(n)}}then(t,n){return new Zr((r,i)=>{this._handlers.push([!1,s=>{if(!t)r(s);else try{r(t(s))}catch(o){i(o)}},s=>{if(!n)i(s);else try{r(n(s))}catch(o){i(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new Zr((n,r)=>{let i,s;return this.then(o=>{s=!1,i=o,t&&t()},o=>{s=!0,i=o,t&&t()}).then(()=>{if(s){r(i);return}n(i)})})}__init(){this._resolve=t=>{this._setResult(zs.RESOLVED,t)}}__init2(){this._reject=t=>{this._setResult(zs.REJECTED,t)}}__init3(){this._setResult=(t,n)=>{if(this._state===zs.PENDING){if(ew(n)){n.then(this._resolve,this._reject);return}this._state=t,this._value=n,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===zs.PENDING)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===zs.RESOLVED&&n[1](this._value),this._state===zs.REJECTED&&n[2](this._value),n[0]=!0)})}}}function SJ(e){const t=[];function n(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]}function i(o){if(!n())return iw(new fs("Not adding Promise because buffer limit was reached."));const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function s(o){return new Zr((a,c)=>{let l=t.length;if(!l)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(d=>{wu(d).then(()=>{--l||(clearTimeout(u),a(!0))},c)})})}return{$:t,add:i,drain:s}}function Zy(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}const bJ=["fatal","error","warning","log","info","debug"];function wJ(e){return e==="warn"?"warning":bJ.includes(e)?e:"log"}const jO=lv(),TI={nowSeconds:()=>Date.now()/1e3};function kJ(){const{performance:e}=jO;if(!e||!e.now)return;const t=Date.now()-e.now();return{now:()=>e.now(),timeOrigin:t}}function AJ(){try{return pJ(O2,"perf_hooks").performance}catch{return}}const zy=WO()?AJ():kJ(),KE=zy===void 0?TI:{nowSeconds:()=>(zy.timeOrigin+zy.now())/1e3},dv=TI.nowSeconds.bind(TI),Wc=KE.nowSeconds.bind(KE),Ki=(()=>{const{performance:e}=jO;if(!e||!e.now)return;const t=3600*1e3,n=e.now(),r=Date.now(),i=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,s=i<t,o=e.timing&&e.timing.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,l=c<t;return s||l?i<=c?e.timeOrigin:o:r})(),_I="baggage",$O="sentry-",EJ=/^sentry-/,TJ=8192;function _J(e){if(!Ds(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((r,i)=>{const s=JE(i);return{...r,...s}},{});else{if(!e)return;t=JE(e)}const n=Object.entries(t).reduce((r,[i,s])=>{if(i.match(EJ)){const o=i.slice($O.length);r[o]=s}return r},{});if(Object.keys(n).length>0)return n}function RI(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,i])=>(i&&(n[`${$O}${r}`]=i),n),{});return RJ(t)}function JE(e){return e.split(",").map(t=>t.split("=").map(n=>decodeURIComponent(n.trim()))).reduce((t,[n,r])=>(t[n]=r,t),{})}function RJ(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],i)=>{const s=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=i===0?s:`${t},${s}`;return o.length>TJ?(Ku&&J.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const xJ=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function NJ(e){if(!e)return;const t=e.match(xJ);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function PJ(e,t){const n=NJ(e),r=_J(t),{traceId:i,parentSpanId:s,parentSampled:o}=n||{},a={traceId:i||Jn(),spanId:Jn().substring(16),sampled:o};return s&&(a.parentSpanId=s),r&&(a.dsc=r),{traceparentData:n,dynamicSamplingContext:r,propagationContext:a}}function sw(e=Jn(),t=Jn().substring(16),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function Qc(e,t=[]){return[e,t]}function MJ(e,t){const[n,r]=e;return[n,[...r,t]]}function YE(e,t){const n=e[1];for(const r of n){const i=r[0].type;if(t(r,i))return!0}return!1}function xI(e,t){return(t||new TextEncoder).encode(e)}function DJ(e,t){const[n,r]=e;let i=JSON.stringify(n);function s(o){typeof i=="string"?i=typeof o=="string"?i+o:[xI(i,t),o]:i.push(typeof o=="string"?xI(o,t):o)}for(const o of r){const[a,c]=o;if(s(`
${JSON.stringify(a)}
`),typeof c=="string"||c instanceof Uint8Array)s(c);else{let l;try{l=JSON.stringify(c)}catch{l=JSON.stringify(ls(c))}s(l)}}return typeof i=="string"?i:OJ(i)}function OJ(e){const t=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(t);let r=0;for(const i of e)n.set(i,r),r+=i.length;return n}function LJ(e,t){const n=typeof e.data=="string"?xI(e.data,t):e.data;return[Os({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const BJ={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function qE(e){return BJ[e]}function ow(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function ZO(e,t,n,r){const i=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Ju(r)},...i&&{trace:Os({...i})}}}function FJ(e,t,n){const r=[{type:"client_report"},{timestamp:n||dv(),discarded_events:e}];return Qc(t?{dsn:t}:{},[r])}const UJ=60*1e3;function VJ(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?UJ:r-t}function GJ(e,t){return e[t]||e.all||0}function zO(e,t,n=Date.now()){return GJ(e,t)>n}function XO(e,{statusCode:t,headers:n},r=Date.now()){const i={...e},s=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(s)for(const a of s.trim().split(",")){const[c,l]=a.split(":",2),u=parseInt(c,10),d=(isNaN(u)?60:u)*1e3;if(!l)i.all=r+d;else for(const f of l.split(";"))i[f]=r+d}else o?i.all=r+VJ(o,r):t===429&&(i.all=r+60*1e3);return i}const we=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,aw="production";function cw(){return _O("globalEventProcessors",()=>[])}function WJ(e){cw().push(e)}function ig(e,t,n,r=0){return new Zr((i,s)=>{const o=e[r];if(t===null||typeof o!="function")i(t);else{const a=o({...t},n);we&&o.id&&a===null&&J.log(`Event processor "${o.id}" dropped event`),ew(a)?a.then(c=>ig(e,c,n,r+1).then(i)).then(null,s):ig(e,a,n,r+1).then(i).then(null,s)}})}function HJ(e){const t=Wc(),n={sid:Jn(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>$J(n)};return e&&ku(n,e),n}function ku(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Wc(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Jn()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function jJ(e,t){let n={};t?n={status:t}:e.status==="ok"&&(n={status:"exited"}),ku(e,n)}function $J(e){return Os({sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}function KO(e,t){const{fingerprint:n,span:r,breadcrumbs:i,sdkProcessingMetadata:s,propagationContext:o}=t;ZJ(e,t),r&&KJ(e,r),JJ(e,n),zJ(e,i),XJ(e,s,o)}function QE(e,t){const{extra:n,tags:r,user:i,contexts:s,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:f,transactionName:h,span:p}=t;vd(e,"extra",n),vd(e,"tags",r),vd(e,"user",i),vd(e,"contexts",s),vd(e,"sdkProcessingMetadata",a),o&&(e.level=o),h&&(e.transactionName=h),p&&(e.span=p),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...f}}function vd(e,t,n){n&&Object.keys(n).length&&(e[t]={...e[t],...n})}function ZJ(e,t){const{extra:n,tags:r,user:i,contexts:s,level:o,transactionName:a}=t;n&&Object.keys(n).length&&(e.extra={...n,...e.extra}),r&&Object.keys(r).length&&(e.tags={...r,...e.tags}),i&&Object.keys(i).length&&(e.user={...i,...e.user}),s&&Object.keys(s).length&&(e.contexts={...s,...e.contexts}),o&&(e.level=o),a&&(e.transaction=a)}function zJ(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function XJ(e,t,n){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t,propagationContext:n}}function KJ(e,t){e.contexts={trace:t.getTraceContext(),...e.contexts};const n=t.transaction;if(n){e.sdkProcessingMetadata={dynamicSamplingContext:n.getDynamicSamplingContext(),...e.sdkProcessingMetadata};const r=n.name;r&&(e.tags={transaction:r,...e.tags})}}function JJ(e,t){e.fingerprint=e.fingerprint?BO(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}const YJ=100;let Xy;class xs{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=eT()}static clone(t){return t?t.clone():new xs}clone(){const t=new xs;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},t._user=this._user,t._level=this._level,t._span=this._span,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._requestSession=this._requestSession,t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{},this._session&&ku(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(t){return this._requestSession=t,this}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSpan(t){return this._span=t,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const t=this.getSpan();return t&&t.transaction}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;if(typeof t=="function"){const n=t(this);return n instanceof xs?n:this}return t instanceof xs?(this._tags={...this._tags,...t._tags},this._extra={...this._extra,...t._extra},this._contexts={...this._contexts,...t._contexts},t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession),t._propagationContext&&(this._propagationContext=t._propagationContext)):bu(t)&&(t=t,this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=eT(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:YJ;if(r<=0)return this;const i={timestamp:dv(),...t},s=this._breadcrumbs;return s.push(i),this._breadcrumbs=s.length>r?s.slice(-r):s,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:t,_attachments:n,_contexts:r,_tags:i,_extra:s,_user:o,_level:a,_fingerprint:c,_eventProcessors:l,_propagationContext:u,_sdkProcessingMetadata:d,_transactionName:f,_span:h}=this;return{breadcrumbs:t,attachments:n,contexts:r,tags:i,extra:s,user:o,level:a,fingerprint:c||[],eventProcessors:l,propagationContext:u,sdkProcessingMetadata:d,transactionName:f,span:h}}applyToEvent(t,n={},r=[]){KO(t,this.getScopeData());const i=[...r,...cw(),...this._eventProcessors];return ig(i,t,n)}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...t},this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function qJ(){return Xy||(Xy=new xs),Xy}function eT(){return{traceId:Jn(),spanId:Jn().substring(16)}}const Uf="7.91.0",JO=parseFloat(Uf),QJ=100;class YO{constructor(t,n=new xs,r=new xs,i=JO){this._version=i,this._stack=[{scope:n}],t&&this.bindClient(t),this._isolationScope=r}isOlderThan(t){return this._version<t}bindClient(t){const n=this.getStackTop();n.client=t,t&&t.setupIntegrations&&t.setupIntegrations()}pushScope(){const t=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:t}),t}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(t){const n=this.pushScope();try{return t(n)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(t,n){const r=this._lastEventId=n&&n.event_id?n.event_id:Jn(),i=new Error("Sentry syntheticException");return this._withClient((s,o)=>{s.captureException(t,{originalException:t,syntheticException:i,...n,event_id:r},o)}),r}captureMessage(t,n,r){const i=this._lastEventId=r&&r.event_id?r.event_id:Jn(),s=new Error(t);return this._withClient((o,a)=>{o.captureMessage(t,n,{originalException:t,syntheticException:s,...r,event_id:i},a)}),i}captureEvent(t,n){const r=n&&n.event_id?n.event_id:Jn();return t.type||(this._lastEventId=r),this._withClient((i,s)=>{i.captureEvent(t,{...n,event_id:r},s)}),r}lastEventId(){return this._lastEventId}addBreadcrumb(t,n){const{scope:r,client:i}=this.getStackTop();if(!i)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=QJ}=i.getOptions&&i.getOptions()||{};if(o<=0)return;const c={timestamp:dv(),...t},l=s?Gc(()=>s(c,n)):c;l!==null&&(i.emit&&i.emit("beforeAddBreadcrumb",l,n),r.addBreadcrumb(l,o))}setUser(t){this.getScope().setUser(t)}setTags(t){this.getScope().setTags(t)}setExtras(t){this.getScope().setExtras(t)}setTag(t,n){this.getScope().setTag(t,n)}setExtra(t,n){this.getScope().setExtra(t,n)}setContext(t,n){this.getScope().setContext(t,n)}configureScope(t){const{scope:n,client:r}=this.getStackTop();r&&t(n)}run(t){const n=tT(this);try{t(this)}finally{tT(n)}}getIntegration(t){const n=this.getClient();if(!n)return null;try{return n.getIntegration(t)}catch{return we&&J.warn(`Cannot retrieve integration ${t.id} from the current Hub`),null}}startTransaction(t,n){const r=this._callExtensionMethod("startTransaction",t,n);return we&&!r&&(this.getClient()?J.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`):J.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")),r}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(t=!1){if(t)return this.endSession();this._sendSessionUpdate()}endSession(){const n=this.getStackTop().scope,r=n.getSession();r&&jJ(r),this._sendSessionUpdate(),n.setSession()}startSession(t){const{scope:n,client:r}=this.getStackTop(),{release:i,environment:s=aw}=r&&r.getOptions()||{},{userAgent:o}=tt.navigator||{},a=HJ({release:i,environment:s,user:n.getUser(),...o&&{userAgent:o},...t}),c=n.getSession&&n.getSession();return c&&c.status==="ok"&&ku(c,{status:"exited"}),this.endSession(),n.setSession(a),a}shouldSendDefaultPii(){const t=this.getClient(),n=t&&t.getOptions();return!!(n&&n.sendDefaultPii)}_sendSessionUpdate(){const{scope:t,client:n}=this.getStackTop(),r=t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}_withClient(t){const{scope:n,client:r}=this.getStackTop();r&&t(r,n)}_callExtensionMethod(t,...n){const i=mh().__SENTRY__;if(i&&i.extensions&&typeof i.extensions[t]=="function")return i.extensions[t].apply(this,n);we&&J.warn(`Extension method ${t} couldn't be found, doing nothing.`)}}function mh(){return tt.__SENTRY__=tt.__SENTRY__||{extensions:{},hub:void 0},tt}function tT(e){const t=mh(),n=NI(t);return QO(t,e),n}function qn(){const e=mh();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return eY(e)}function qO(){return qn().getIsolationScope()}function eY(e=mh()){return(!tY(e)||NI(e).isOlderThan(JO))&&QO(e,new YO),NI(e)}function tY(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function NI(e){return _O("hub",()=>new YO,e)}function QO(e,t){if(!e)return!1;const n=e.__SENTRY__=e.__SENTRY__||{};return n.hub=t,!0}function gh(e){return(e||qn()).getScope().getTransaction()}function lw(e){return e>9999999999?e/1e3:e}let nT=!1;function nY(){nT||(nT=!0,VO(PI),GO(PI))}function PI(){const e=gh();if(e){const t="internal_error";we&&J.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}PI.tag="sentry_tracingErrorCallback";class eL{constructor(t=1e3){this._maxlen=t,this.spans=[]}add(t){this.spans.length>this._maxlen?t.spanRecorder=void 0:this.spans.push(t)}}class uw{constructor(t={}){this.traceId=t.traceId||Jn(),this.spanId=t.spanId||Jn().substring(16),this.startTimestamp=t.startTimestamp||Wc(),this.tags=t.tags||{},this.data=t.data||{},this.instrumenter=t.instrumenter||"sentry",this.origin=t.origin||"manual",t.parentSpanId&&(this.parentSpanId=t.parentSpanId),"sampled"in t&&(this.sampled=t.sampled),t.op&&(this.op=t.op),t.description&&(this.description=t.description),t.name&&(this.description=t.name),t.status&&(this.status=t.status),t.endTimestamp&&(this.endTimestamp=t.endTimestamp)}get name(){return this.description||""}set name(t){this.setName(t)}startChild(t){const n=new uw({...t,parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId});if(n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,we&&n.transaction){const r=t&&t.op||"< unknown op >",i=n.transaction.name||"< unknown name >",s=n.transaction.spanId,o=`[Tracing] Starting '${r}' span on transaction '${i}' (${s}).`;n.transaction.metadata.spanMetadata[n.spanId]={logMessage:o},J.log(o)}return n}setTag(t,n){return this.tags={...this.tags,[t]:n},this}setData(t,n){return this.data={...this.data,[t]:n},this}setStatus(t){return this.status=t,this}setHttpStatus(t){this.setTag("http.status_code",String(t)),this.setData("http.response.status_code",t);const n=rY(t);return n!=="unknown_error"&&this.setStatus(n),this}setName(t){this.description=t}isSuccess(){return this.status==="ok"}finish(t){return this.end(t)}end(t){if(we&&this.transaction&&this.transaction.spanId!==this.spanId){const{logMessage:n}=this.transaction.metadata.spanMetadata[this.spanId];n&&J.log(n.replace("Starting","Finishing"))}this.endTimestamp=typeof t=="number"?lw(t):Wc()}toTraceparent(){return sw(this.traceId,this.spanId,this.sampled)}toContext(){return Os({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})}updateWithContext(t){return this.data=t.data||{},this.description=t.description,this.endTimestamp=t.endTimestamp,this.op=t.op,this.parentSpanId=t.parentSpanId,this.sampled=t.sampled,this.spanId=t.spanId||this.spanId,this.startTimestamp=t.startTimestamp||this.startTimestamp,this.status=t.status,this.tags=t.tags||{},this.traceId=t.traceId||this.traceId,this}getTraceContext(){return Os({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId,origin:this.origin})}toJSON(){return Os({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId,origin:this.origin})}}function rY(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}function fv(e,t,n){const r=t.getOptions(),{publicKey:i}=t.getDsn()||{},{segment:s}=n&&n.getUser()||{},o=Os({environment:r.environment||aw,release:r.release,user_segment:s,public_key:i,trace_id:e});return t.emit&&t.emit("createDsc",o),o}class tL extends uw{constructor(t,n){super(t),delete this.description,this._measurements={},this._contexts={},this._hub=n||qn(),this._name=t.name||"",this.metadata={source:"custom",...t.metadata,spanMetadata:{}},this._trimEnd=t.trimEnd,this.transaction=this;const r=this.metadata.dynamicSamplingContext;r&&(this._frozenDynamicSamplingContext={...r})}get name(){return this._name}set name(t){this.setName(t)}setName(t,n="custom"){this._name=t,this.metadata.source=n}initSpanRecorder(t=1e3){this.spanRecorder||(this.spanRecorder=new eL(t)),this.spanRecorder.add(this)}setContext(t,n){n===null?delete this._contexts[t]:this._contexts[t]=n}setMeasurement(t,n,r=""){this._measurements[t]={value:n,unit:r}}setMetadata(t){this.metadata={...this.metadata,...t}}end(t){const n=typeof t=="number"?lw(t):Wc(),r=this._finishTransaction(n);if(r)return this._hub.captureEvent(r)}toContext(){const t=super.toContext();return Os({...t,name:this.name,trimEnd:this._trimEnd})}updateWithContext(t){return super.updateWithContext(t),this.name=t.name||"",this._trimEnd=t.trimEnd,this}getDynamicSamplingContext(){if(this._frozenDynamicSamplingContext)return this._frozenDynamicSamplingContext;const t=this._hub||qn(),n=t.getClient();if(!n)return{};const r=t.getScope(),i=fv(this.traceId,n,r),s=this.metadata.sampleRate;s!==void 0&&(i.sample_rate=`${s}`);const o=this.metadata.source;return o&&o!=="url"&&(i.transaction=this.name),this.sampled!==void 0&&(i.sampled=String(this.sampled)),i}setHub(t){this._hub=t}_finishTransaction(t){if(this.endTimestamp!==void 0)return;this.name||(we&&J.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),super.end(t);const n=this._hub.getClient();if(n&&n.emit&&n.emit("finishTransaction",this),this.sampled!==!0){we&&J.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),n&&n.recordDroppedEvent("sample_rate","transaction");return}const r=this.spanRecorder?this.spanRecorder.spans.filter(a=>a!==this&&a.endTimestamp):[];this._trimEnd&&r.length>0&&(this.endTimestamp=r.reduce((a,c)=>a.endTimestamp&&c.endTimestamp?a.endTimestamp>c.endTimestamp?a:c:a).endTimestamp);const i=this.metadata,s={contexts:{...this._contexts,trace:this.getTraceContext()},spans:r,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",sdkProcessingMetadata:{...i,dynamicSamplingContext:this.getDynamicSamplingContext()},...i.source&&{transaction_info:{source:i.source}}};return Object.keys(this._measurements).length>0&&(we&&J.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),s.measurements=this._measurements),we&&J.log(`[Tracing] Finishing ${this.op} transaction: ${this.name}.`),s}}const Kp={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},iY="finishReason",cl=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class sY extends eL{constructor(t,n,r,i){super(i),this._pushActivity=t,this._popActivity=n,this.transactionSpanId=r}add(t){if(t.spanId!==this.transactionSpanId){const n=t.end;t.end=(...r)=>(this._popActivity(t.spanId),n.apply(t,r)),t.endTimestamp===void 0&&this._pushActivity(t.spanId)}super.add(t)}}class oY extends tL{constructor(t,n,r=Kp.idleTimeout,i=Kp.finalTimeout,s=Kp.heartbeatInterval,o=!1){super(t,n),this._idleHub=n,this._idleTimeout=r,this._finalTimeout=i,this._heartbeatInterval=s,this._onScope=o,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=cl[4],o&&(we&&J.log(`Setting idle transaction on scope. Span ID: ${this.spanId}`),n.getScope().setSpan(this)),this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=cl[3],this.end())},this._finalTimeout)}end(t=Wc()){const n=lw(t);if(this._finished=!0,this.activities={},this.op==="ui.action.click"&&this.setTag(iY,this._finishReason),this.spanRecorder){we&&J.log("[Tracing] finishing IdleTransaction",new Date(n*1e3).toISOString(),this.op);for(const r of this._beforeFinishCallbacks)r(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(r=>{if(r.spanId===this.spanId)return!0;r.endTimestamp||(r.endTimestamp=n,r.setStatus("cancelled"),we&&J.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(r,void 0,2)));const i=r.startTimestamp<n,s=(this._finalTimeout+this._idleTimeout)/1e3,o=r.endTimestamp-this.startTimestamp<s;if(we){const a=JSON.stringify(r,void 0,2);i?o||J.log("[Tracing] discarding Span since it finished after Transaction final timeout",a):J.log("[Tracing] discarding Span since it happened after Transaction was finished",a)}return i&&o}),we&&J.log("[Tracing] flushing IdleTransaction")}else we&&J.log("[Tracing] No active IdleTransaction");if(this._onScope){const r=this._idleHub.getScope();r.getTransaction()===this&&r.setSpan(void 0)}return super.end(t)}registerBeforeFinishCallback(t){this._beforeFinishCallbacks.push(t)}initSpanRecorder(t){if(!this.spanRecorder){const n=i=>{this._finished||this._pushActivity(i)},r=i=>{this._finished||this._popActivity(i)};this.spanRecorder=new sY(n,r,this.spanId,t),we&&J.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(t,{restartOnChildSpanChange:n}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=n===!1,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,Object.keys(this.activities).length===0&&this._idleTimeoutCanceledPermanently&&(this._finishReason=cl[5],this.end(t)))}setFinishReason(t){this._finishReason=t}_restartIdleTimeout(t){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{!this._finished&&Object.keys(this.activities).length===0&&(this._finishReason=cl[1],this.end(t))},this._idleTimeout)}_pushActivity(t){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),we&&J.log(`[Tracing] pushActivity: ${t}`),this.activities[t]=!0,we&&J.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(t){if(this.activities[t]&&(we&&J.log(`[Tracing] popActivity ${t}`),delete this.activities[t],we&&J.log("[Tracing] new activities count",Object.keys(this.activities).length)),Object.keys(this.activities).length===0){const n=Wc();this._idleTimeoutCanceledPermanently?(this._finishReason=cl[5],this.end(n)):this._restartIdleTimeout(n+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const t=Object.keys(this.activities).join("");t===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=t,this._heartbeatCounter>=3?(we&&J.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=cl[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){we&&J.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function nL(e,t,n,r,i,s){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Jn(),timestamp:t.timestamp||dv()},l=n.integrations||e.integrations.map(y=>y.name);aY(c,e),uY(c,l),t.type===void 0&&cY(c,e.stackParser);const u=fY(r,n.captureContext);n.mechanism&&Ff(c,n.mechanism);const d=i&&i.getEventProcessors?i.getEventProcessors():[],f=qJ().getScopeData();if(s){const y=s.getScopeData();QE(f,y)}if(u){const y=u.getScopeData();QE(f,y)}const h=[...n.attachments||[],...f.attachments];h.length&&(n.attachments=h),KO(c,f);const p=[...d,...cw(),...f.eventProcessors];return ig(p,c,n).then(y=>(y&&lY(y),typeof o=="number"&&o>0?dY(y,o,a):y))}function aY(e,t){const{environment:n,release:r,dist:i,maxValueLength:s=250}=t;"environment"in e||(e.environment="environment"in t?n:aw),e.release===void 0&&r!==void 0&&(e.release=r),e.dist===void 0&&i!==void 0&&(e.dist=i),e.message&&(e.message=Ql(e.message,s));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Ql(o.value,s));const a=e.request;a&&a.url&&(a.url=Ql(a.url,s))}const rT=new WeakMap;function cY(e,t){const n=tt._sentryDebugIds;if(!n)return;let r;const i=rT.get(t);i?r=i:(r=new Map,rT.set(t,r));const s=Object.keys(n).reduce((o,a)=>{let c;const l=r.get(a);l?c=l:(c=t(a),r.set(a,c));for(let u=c.length-1;u>=0;u--){const d=c[u];if(d.filename){o[d.filename]=n[a];break}}return o},{});try{e.exception.values.forEach(o=>{o.stacktrace.frames.forEach(a=>{a.filename&&(a.debug_id=s[a.filename])})})}catch{}}function lY(e){const t={};try{e.exception.values.forEach(r=>{r.stacktrace.frames.forEach(i=>{i.debug_id&&(i.abs_path?t[i.abs_path]=i.debug_id:i.filename&&(t[i.filename]=i.debug_id),delete i.debug_id)})})}catch{}if(Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(r=>{n.push({type:"sourcemap",code_file:r,debug_id:t[r]})})}function uY(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function dY(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:ls(i.data,t,n)}}))},...e.user&&{user:ls(e.user,t,n)},...e.contexts&&{contexts:ls(e.contexts,t,n)},...e.extra&&{extra:ls(e.extra,t,n)}};return e.contexts&&e.contexts.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=ls(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(i=>(i.data&&(i.data=ls(i.data,t,n)),i))),r}function fY(e,t){if(!t)return e;const n=e?e.clone():new xs;return n.update(t),n}function hY(e){if(e)return pY(e)?{captureContext:e}:gY(e)?{captureContext:e}:e}function pY(e){return e instanceof xs||typeof e=="function"}const mY=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function gY(e){return Object.keys(e).some(t=>mY.includes(t))}function hv(e,t){return qn().captureException(e,hY(t))}function rL(e,t){return qn().captureEvent(e,t)}function ja(e,t){qn().addBreadcrumb(e,t)}function vY(e,t){qn().setContext(e,t)}function iL(e){return qn().withScope(e)}function Vt(){return qn().getClient()}function vh(){return qn().getScope()}function dw(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=Vt(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function sL(e,t,n){if(!dw(t))return e.sampled=!1,e;if(e.sampled!==void 0)return e.setMetadata({sampleRate:Number(e.sampled)}),e;let r;return typeof t.tracesSampler=="function"?(r=t.tracesSampler(n),e.setMetadata({sampleRate:Number(r)})):n.parentSampled!==void 0?r=n.parentSampled:typeof t.tracesSampleRate<"u"?(r=t.tracesSampleRate,e.setMetadata({sampleRate:Number(r)})):(r=1,e.setMetadata({sampleRate:r})),yY(r)?r?(e.sampled=Math.random()<r,e.sampled?(we&&J.log(`[Tracing] starting ${e.op} transaction - ${e.name}`),e):(we&&J.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),e)):(we&&J.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),e.sampled=!1,e):(we&&J.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function yY(e){return EO(e)||!(typeof e=="number"||typeof e=="boolean")?(we&&J.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):e<0||e>1?(we&&J.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1):!0}function CY(){const t=this.getScope().getSpan();return t?{"sentry-trace":t.toTraceparent()}:{}}function IY(e,t){const n=this.getClient(),r=n&&n.getOptions()||{},i=r.instrumenter||"sentry",s=e.instrumenter||"sentry";i!==s&&(we&&J.error(`A transaction was started with instrumenter=\`${s}\`, but the SDK is configured with the \`${i}\` instrumenter.
The transaction will not be sampled. Please use the ${i} instrumentation to start transactions.`),e.sampled=!1);let o=new tL(e,this);return o=sL(o,r,{parentSampled:e.parentSampled,transactionContext:e,...t}),o.sampled&&o.initSpanRecorder(r._experiments&&r._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function iT(e,t,n,r,i,s,o){const a=e.getClient(),c=a&&a.getOptions()||{};let l=new oY(t,e,n,r,o,i);return l=sL(l,c,{parentSampled:t.parentSampled,transactionContext:t,...s}),l.sampled&&l.initSpanRecorder(c._experiments&&c._experiments.maxSpans),a&&a.emit&&a.emit("startTransaction",l),l}function SY(){const e=mh();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=IY),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=CY),nY())}function bY(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function wY(e,t,n,r){const i=ow(n),s={sent_at:new Date().toISOString(),...i&&{sdk:i},...!!r&&t&&{dsn:Ju(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Qc(s,[o])}function kY(e,t,n,r){const i=ow(n),s=e.type&&e.type!=="replay_event"?e.type:"event";bY(e,n&&n.sdk);const o=ZO(e,i,r,t);return delete e.sdkProcessingMetadata,Qc(o,[[{type:s},e]])}const AY="7";function oL(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function EY(e){return`${oL(e)}${e.projectId}/envelope/`}function TY(e,t){return $K({sentry_key:e.publicKey,sentry_version:AY,...t&&{sentry_client:`${t.name}/${t.version}`}})}function _Y(e,t={}){const n=typeof t=="string"?t:t.tunnel,r=typeof t=="string"||!t._metadata?void 0:t._metadata.sdk;return n||`${EY(e)}?${TY(e,r)}`}function RY(e,t){const n=NO(e);if(!n)return"";const r=`${oL(n)}embed/error-page/`;let i=`dsn=${Ju(n)}`;for(const s in t)if(s!=="dsn"&&s!=="onClose")if(s==="user"){const o=t.user;if(!o)continue;o.name&&(i+=`&name=${encodeURIComponent(o.name)}`),o.email&&(i+=`&email=${encodeURIComponent(o.email)}`)}else i+=`&${encodeURIComponent(s)}=${encodeURIComponent(t[s])}`;return`${r}?${i}`}const sT=[];function xY(e){const t={};return e.forEach(n=>{const{name:r}=n,i=t[r];i&&!i.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.keys(t).map(n=>t[n])}function NY(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(o=>{o.isDefaultInstance=!0});let r;Array.isArray(n)?r=[...t,...n]:typeof n=="function"?r=BO(n(t)):r=t;const i=xY(r),s=MY(i,o=>o.name==="Debug");if(s!==-1){const[o]=i.splice(s,1);i.push(o)}return i}function PY(e,t){const n={};return t.forEach(r=>{r&&aL(e,r,n)}),n}function aL(e,t,n){if(n[t.name]=t,sT.indexOf(t.name)===-1&&(t.setupOnce(WJ,qn),sT.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),e.on&&typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(i,s)=>r(i,s,e))}if(e.addEventProcessor&&typeof t.processEvent=="function"){const r=t.processEvent.bind(t),i=Object.assign((s,o)=>r(s,o,e),{id:t.name});e.addEventProcessor(i)}we&&J.log(`Integration installed: ${t.name}`)}function MY(e,t){for(let n=0;n<e.length;n++)if(t(e[n])===!0)return n;return-1}function ec(e,t){return Object.assign(function(...r){return{setupOnce:()=>{},...t(...r)}},{id:e})}function DY(e){let t="";for(const n of e){const r=Object.entries(n.tags),i=r.length>0?`|#${r.map(([s,o])=>`${s}:${o}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${i}|T${n.timestamp}
`}return t}function OY(e,t,n,r){const i={sent_at:new Date().toISOString()};n&&n.sdk&&(i.sdk={name:n.sdk.name,version:n.sdk.version}),r&&t&&(i.dsn=Ju(t));const s=LY(e);return Qc(i,[s])}function LY(e){const t=DY(e);return[{type:"statsd",length:t.length},t]}const oT="Not capturing exception because it's already been captured.";class BY{constructor(t){if(this._options=t,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=NO(t.dsn):we&&J.warn("No DSN provided, client will not send events."),this._dsn){const n=_Y(this._dsn,t);this._transport=t.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}}captureException(t,n,r){if(jE(t)){we&&J.log(oT);return}let i=n&&n.event_id;return this._process(this.eventFromException(t,n).then(s=>this._captureEvent(s,n,r)).then(s=>{i=s})),i}captureMessage(t,n,r,i){let s=r&&r.event_id;const o=Qb(t)?this.eventFromMessage(String(t),n,r):this.eventFromException(t,r);return this._process(o.then(a=>this._captureEvent(a,r,i)).then(a=>{s=a})),s}captureEvent(t,n,r){if(n&&n.originalException&&jE(n.originalException)){we&&J.log(oT);return}let i=n&&n.event_id;return this._process(this._captureEvent(t,n,r).then(s=>{i=s})),i}captureSession(t){typeof t.release!="string"?we&&J.warn("Discarded session because of missing or non-string release"):(this.sendSession(t),ku(t,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const n=this._transport;return n?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(t).then(r=>n.flush(t).then(i=>r&&i))):wu(!0)}close(t){return this.flush(t).then(n=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),n))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}setupIntegrations(t){(t&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&(this._integrations=PY(this,this._options.integrations),this._integrationsInitialized=!0)}getIntegrationById(t){return this._integrations[t]}getIntegration(t){try{return this._integrations[t.id]||null}catch{return we&&J.warn(`Cannot retrieve integration ${t.id} from the current Client`),null}}addIntegration(t){aL(this,t,this._integrations)}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=kY(t,this._dsn,this._options._metadata,this._options.tunnel);for(const s of n.attachments||[])r=MJ(r,LJ(s,this._options.transportOptions&&this._options.transportOptions.textEncoder));const i=this._sendEnvelope(r);i&&i.then(s=>this.emit("afterSendEvent",t,s),null)}sendSession(t){const n=wY(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}recordDroppedEvent(t,n,r){if(this._options.sendClientReports){const i=`${t}:${n}`;we&&J.log(`Adding outcome: "${i}"`),this._outcomes[i]=this._outcomes[i]+1||1}}captureAggregateMetrics(t){we&&J.log(`Flushing aggregated metrics, number of metrics: ${t.length}`);const n=OY(t,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(n)}on(t,n){this._hooks[t]||(this._hooks[t]=[]),this._hooks[t].push(n)}emit(t,...n){this._hooks[t]&&this._hooks[t].forEach(r=>r(...n))}_updateSessionFromEvent(t,n){let r=!1,i=!1;const s=n.exception&&n.exception.values;if(s){i=!0;for(const c of s){const l=c.mechanism;if(l&&l.handled===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(ku(t,{...r&&{status:"crashed"},errors:t.errors||Number(i||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Zr(n=>{let r=0;const i=1,s=setInterval(()=>{this._numProcessing==0?(clearInterval(s),n(!0)):(r+=i,t&&r>=t&&(clearInterval(s),n(!1)))},i)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,i=qO()){const s=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o.length>0&&(n.integrations=o),this.emit("preprocessEvent",t,n),nL(s,t,n,r,this,i).then(a=>{if(a===null)return a;const{propagationContext:c}=a.sdkProcessingMetadata||{};if(!(a.contexts&&a.contexts.trace)&&c){const{traceId:u,spanId:d,parentSpanId:f,dsc:h}=c;a.contexts={trace:{trace_id:u,span_id:d,parent_span_id:f},...a.contexts};const p=h||fv(u,this,r);a.sdkProcessingMetadata={dynamicSamplingContext:p,...a.sdkProcessingMetadata}}return a})}_captureEvent(t,n={},r){return this._processEvent(t,n,r).then(i=>i.event_id,i=>{if(we){const s=i;s.logLevel==="log"?J.log(s.message):J.warn(s)}})}_processEvent(t,n,r){const i=this.getOptions(),{sampleRate:s}=i,o=lL(t),a=cL(t),c=t.type||"error",l=`before send for type \`${c}\``;if(a&&typeof s=="number"&&Math.random()>s)return this.recordDroppedEvent("sample_rate","error",t),iw(new fs(`Discarding event because it's not included in the random sample (sampling rate = ${s})`,"log"));const u=c==="replay_event"?"replay":c;return this._prepareEvent(t,n,r).then(d=>{if(d===null)throw this.recordDroppedEvent("event_processor",u,t),new fs("An event processor returned `null`, will not send event.","log");if(n.data&&n.data.__sentry__===!0)return d;const h=UY(i,d,n);return FY(h,l)}).then(d=>{if(d===null)throw this.recordDroppedEvent("before_send",u,t),new fs(`${l} returned \`null\`, will not send event.`,"log");const f=r&&r.getSession();!o&&f&&this._updateSessionFromEvent(f,d);const h=d.transaction_info;if(o&&h&&d.transaction!==t.transaction){const p="custom";d.transaction_info={...h,source:p}}return this.sendEvent(d,n),d}).then(null,d=>{throw d instanceof fs?d:(this.captureException(d,{data:{__sentry__:!0},originalException:d}),new fs(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${d}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)return this._transport.send(t).then(null,n=>{we&&J.error("Error while sending event:",n)});we&&J.error("Transport disabled")}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.keys(t).map(n=>{const[r,i]=n.split(":");return{reason:r,category:i,quantity:t[n]}})}}function FY(e,t){const n=`${t} must return \`null\` or a valid event.`;if(ew(e))return e.then(r=>{if(!bu(r)&&r!==null)throw new fs(n);return r},r=>{throw new fs(`${t} rejected with ${r}`)});if(!bu(e)&&e!==null)throw new fs(n);return e}function UY(e,t,n){const{beforeSend:r,beforeSendTransaction:i}=e;return cL(t)&&r?r(t,n):lL(t)&&i?i(t,n):t}function cL(e){return e.type===void 0}function lL(e){return e.type==="transaction"}function VY(e){const t=Vt();!t||!t.addEventProcessor||t.addEventProcessor(e)}function GY(e,t){t.debug===!0&&(we?J.enable():Gc(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")}));const n=qn();n.getScope().update(t.initialScope);const i=new e(t);n.bindClient(i)}const WY=30;function uL(e,t,n=SJ(e.bufferSize||WY)){let r={};const i=o=>n.drain(o);function s(o){const a=[];if(YE(o,(d,f)=>{const h=qE(f);if(zO(r,h)){const p=aT(d,f);e.recordDroppedEvent("ratelimit_backoff",h,p)}else a.push(d)}),a.length===0)return wu();const c=Qc(o[0],a),l=d=>{YE(c,(f,h)=>{const p=aT(f,h);e.recordDroppedEvent(d,qE(h),p)})},u=()=>t({body:DJ(c,e.textEncoder)}).then(d=>(d.statusCode!==void 0&&(d.statusCode<200||d.statusCode>=300)&&we&&J.warn(`Sentry responded with status code ${d.statusCode} to sent event.`),r=XO(r,d),d),d=>{throw l("network_error"),d});return n.add(u).then(d=>d,d=>{if(d instanceof fs)return we&&J.error("Skipped sending event because buffer is full."),l("queue_overflow"),wu();throw d})}return s.__sentry__baseTransport__=!0,{send:s,flush:i}}function aT(e,t){if(!(t!=="event"&&t!=="transaction"))return Array.isArray(e)?e[1]:void 0}let cT;const dL="FunctionToString",HY=()=>({name:dL,setupOnce(){cT=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=tw(this)||this;return cT.apply(t,e)}}catch{}}}),jY=ec(dL,HY),$Y=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],ZY=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],fL="InboundFilters",zY=e=>({name:fL,processEvent(t,n,r){const i=r.getOptions(),s=KY(e,i);return JY(t,s)?null:t}}),XY=ec(fL,zY);function KY(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:$Y],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:ZY],ignoreInternal:e.ignoreInternal!==void 0?e.ignoreInternal:!0}}function JY(e,t){return t.ignoreInternal&&nq(e)?(we&&J.warn(`Event dropped due to being internal Sentry Error.
Event: ${da(e)}`),!0):YY(e,t.ignoreErrors)?(we&&J.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${da(e)}`),!0):qY(e,t.ignoreTransactions)?(we&&J.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${da(e)}`),!0):QY(e,t.denyUrls)?(we&&J.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${da(e)}.
Url: ${sg(e)}`),!0):eq(e,t.allowUrls)?!1:(we&&J.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${da(e)}.
Url: ${sg(e)}`),!0)}function YY(e,t){return e.type||!t||!t.length?!1:tq(e).some(n=>Xu(n,t))}function qY(e,t){if(e.type!=="transaction"||!t||!t.length)return!1;const n=e.transaction;return n?Xu(n,t):!1}function QY(e,t){if(!t||!t.length)return!1;const n=sg(e);return n?Xu(n,t):!1}function eq(e,t){if(!t||!t.length)return!0;const n=sg(e);return n?Xu(n,t):!0}function tq(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch{}return n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`)),we&&t.length===0&&J.error(`Could not extract message for event ${da(e)}`),t}function nq(e){try{return e.exception.values[0].type==="SentryError"}catch{}return!1}function rq(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function sg(e){try{let t;try{t=e.exception.values[0].stacktrace.frames}catch{}return t?rq(t):null}catch{return we&&J.error(`Cannot extract url for event ${da(e)}`),null}}function iq(e,t){const n=t&&aq(t)?t.getClient():t,r=n&&n.getDsn(),i=n&&n.getOptions().tunnel;return oq(e,r)||sq(e,i)}function sq(e,t){return t?lT(e)===lT(t):!1}function oq(e,t){return t?e.includes(t.host):!1}function lT(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function aq(e){return e.getClient!==void 0}const Ye=tt;let MI=0;function hL(){return MI>0}function cq(){MI++,setTimeout(()=>{MI--})}function Au(e,t={},n){if(typeof e!="function")return e;try{const i=e.__sentry_wrapped__;if(i)return i;if(tw(e))return e}catch{return e}const r=function(){const i=Array.prototype.slice.call(arguments);try{n&&typeof n=="function"&&n.apply(this,arguments);const s=i.map(o=>Au(o,t));return e.apply(this,s)}catch(s){throw cq(),iL(o=>{o.addEventProcessor(a=>(t.mechanism&&(II(a,void 0,void 0),Ff(a,t.mechanism)),a.extra={...a.extra,arguments:i},a)),hv(s)}),s}};try{for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i])}catch{}PO(r,e),Bf(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}const di=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function pL(e,t){const n=fw(e,t),r={type:t&&t.name,value:fq(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function lq(e,t,n,r){const i=Vt(),s=i&&i.getOptions().normalizeDepth,o={exception:{values:[{type:cv(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:mq(t,{isUnhandledRejection:r})}]},extra:{__serialized__:HO(t,s)}};if(n){const a=fw(e,n);a.length&&(o.exception.values[0].stacktrace={frames:a})}return o}function Ky(e,t){return{exception:{values:[pL(e,t)]}}}function fw(e,t){const n=t.stacktrace||t.stack||"",r=dq(t);try{return e(n,r)}catch{}return[]}const uq=/Minified React error #\d+;/i;function dq(e){if(e){if(typeof e.framesToPop=="number")return e.framesToPop;if(uq.test(e.message))return 1}return 0}function fq(e){const t=e&&e.message;return t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function hq(e,t,n,r){const i=n&&n.syntheticException||void 0,s=hw(e,t,i,r);return Ff(s),s.level="error",n&&n.event_id&&(s.event_id=n.event_id),wu(s)}function pq(e,t,n="info",r,i){const s=r&&r.syntheticException||void 0,o=DI(e,t,s,i);return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),wu(o)}function hw(e,t,n,r,i){let s;if(qb(t)&&t.error)return Ky(e,t.error);if(OE(t)||_K(t)){const o=t;if("stack"in t)s=Ky(e,t);else{const a=o.name||(OE(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;s=DI(e,c,n,r),II(s,c)}return"code"in o&&(s.tags={...s.tags,"DOMException.code":`${o.code}`}),s}return Yb(t)?Ky(e,t):bu(t)||cv(t)?(s=lq(e,t,n,i),Ff(s,{synthetic:!0}),s):(s=DI(e,t,n,r),II(s,`${t}`,void 0),Ff(s,{synthetic:!0}),s)}function DI(e,t,n,r){const i={message:t};if(r&&n){const s=fw(e,n);s.length&&(i.exception={values:[{value:t,stacktrace:{frames:s}}]})}return i}function mq(e,{isUnhandledRejection:t}){const n=ZK(e),r=t?"promise rejection":"exception";return qb(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:cv(e)?`Event \`${gq(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function gq(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function vq(e,{metadata:t,tunnel:n,dsn:r}){const i={event_id:e.event_id,sent_at:new Date().toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!r&&{dsn:Ju(r)}},s=yq(e);return Qc(i,[s])}function yq(e){return[{type:"user_report"},e]}class Cq extends BY{constructor(t){const n=Ye.SENTRY_SDK_SOURCE||hJ();t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:`${n}:@sentry/browser`,version:Uf}],version:Uf},super(t),t.sendClientReports&&Ye.document&&Ye.document.addEventListener("visibilitychange",()=>{Ye.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(t,n){return hq(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return pq(this._options.stackParser,t,n,r,this._options.attachStacktrace)}captureUserFeedback(t){if(!this._isEnabled()){di&&J.warn("SDK not enabled, will not capture user feedback.");return}const n=vq(t,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(n)}_prepareEvent(t,n,r){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r)}_flushOutcomes(){const t=this._clearOutcomes();if(t.length===0){di&&J.log("No outcomes to send");return}if(!this._dsn){di&&J.log("No dsn provided, will not send outcomes");return}di&&J.log("Sending outcomes:",t);const n=FJ(t,this._options.tunnel&&Ju(this._dsn));this._sendEnvelope(n)}}let Pd;function Iq(){if(Pd)return Pd;if(kI(Ye.fetch))return Pd=Ye.fetch.bind(Ye);const e=Ye.document;let t=Ye.fetch;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const r=n.contentWindow;r&&r.fetch&&(t=r.fetch),e.head.removeChild(n)}catch(n){di&&J.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return Pd=t.bind(Ye)}function Sq(){Pd=void 0}function bq(e,t=Iq()){let n=0,r=0;function i(s){const o=s.body.length;n+=o,r++;const a={body:s.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{return t(e.url,a).then(c=>(n-=o,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Sq(),n-=o,r--,iw(c)}}return uL(e,i)}const wq=4;function kq(e){function t(n){return new Zr((r,i)=>{const s=new XMLHttpRequest;s.onerror=i,s.onreadystatechange=()=>{s.readyState===wq&&r({statusCode:s.status,headers:{"x-sentry-rate-limits":s.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":s.getResponseHeader("Retry-After")}})},s.open("POST",e.url);for(const o in e.headers)Object.prototype.hasOwnProperty.call(e.headers,o)&&s.setRequestHeader(o,e.headers[o]);s.send(n.body)})}return uL(e,t)}const pv="?",Aq=30,Eq=40,Tq=50;function pw(e,t,n,r){const i={filename:e,function:t,in_app:!0};return n!==void 0&&(i.lineno=n),r!==void 0&&(i.colno=r),i}const _q=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Rq=/\((\S*)(?::(\d+))(?::(\d+))\)/,xq=e=>{const t=_q.exec(e);if(t){if(t[2]&&t[2].indexOf("eval")===0){const s=Rq.exec(t[2]);s&&(t[2]=s[1],t[3]=s[2],t[4]=s[3])}const[r,i]=mL(t[1]||pv,t[2]);return pw(i,r,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}},Nq=[Aq,xq],Pq=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Mq=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Dq=e=>{const t=Pq.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const s=Mq.exec(t[3]);s&&(t[1]=t[1]||"eval",t[3]=s[1],t[4]=s[2],t[5]="")}let r=t[3],i=t[1]||pv;return[i,r]=mL(i,r),pw(r,i,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Oq=[Tq,Dq],Lq=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Bq=e=>{const t=Lq.exec(e);return t?pw(t[2],t[1]||pv,+t[3],t[4]?+t[4]:void 0):void 0},Fq=[Eq,Bq],Uq=[Nq,Oq,Fq],Vq=OO(...Uq),mL=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:pv,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},gL="GlobalHandlers",Gq=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:gL,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(Hq(n),uT("onerror")),t.onunhandledrejection&&(jq(n),uT("onunhandledrejection"))}}},Wq=ec(gL,Gq);function Hq(e){VO(t=>{const{stackParser:n,attachStacktrace:r}=yL();if(Vt()!==e||hL())return;const{msg:i,url:s,line:o,column:a,error:c}=t,l=c===void 0&&Ds(i)?zq(i,s,o,a):vL(hw(n,c||i,void 0,r,!1),s,o,a);l.level="error",rL(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}function jq(e){GO(t=>{const{stackParser:n,attachStacktrace:r}=yL();if(Vt()!==e||hL())return;const i=$q(t),s=Qb(i)?Zq(i):hw(n,i,void 0,r,!0);s.level="error",rL(s,{originalException:i,mechanism:{handled:!1,type:"onunhandledrejection"}})})}function $q(e){if(Qb(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return e}function Zq(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function zq(e,t,n,r){const i=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let s=qb(e)?e.message:e,o="Error";const a=s.match(i);return a&&(o=a[1],s=a[2]),vL({exception:{values:[{type:o,value:s}]}},t,n,r)}function vL(e,t,n,r){const i=e.exception=e.exception||{},s=i.values=i.values||[],o=s[0]=s[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(r,10))?void 0:r,u=isNaN(parseInt(n,10))?void 0:n,d=Ds(t)&&t.length>0?t:BK();return c.length===0&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function uT(e){di&&J.log(`Global Handler attached: ${e}`)}function yL(){const e=Vt();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}const Xq=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],CL="TryCatch",Kq=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:CL,setupOnce(){t.setTimeout&&kn(Ye,"setTimeout",dT),t.setInterval&&kn(Ye,"setInterval",dT),t.requestAnimationFrame&&kn(Ye,"requestAnimationFrame",Yq),t.XMLHttpRequest&&"XMLHttpRequest"in Ye&&kn(XMLHttpRequest.prototype,"send",qq);const n=t.eventTarget;n&&(Array.isArray(n)?n:Xq).forEach(Qq)}}},Jq=ec(CL,Kq);function dT(e){return function(...t){const n=t[0];return t[0]=Au(n,{mechanism:{data:{function:Uo(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function Yq(e){return function(t){return e.apply(this,[Au(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Uo(e)},handled:!1,type:"instrument"}})])}}function qq(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(i=>{i in n&&typeof n[i]=="function"&&kn(n,i,function(s){const o={mechanism:{data:{function:i,handler:Uo(s)},handled:!1,type:"instrument"}},a=tw(s);return a&&(o.mechanism.data.handler=Uo(a)),Au(s,o)})}),e.apply(this,t)}}function Qq(e){const t=Ye,n=t[e]&&t[e].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(kn(n,"addEventListener",function(r){return function(i,s,o){try{typeof s.handleEvent=="function"&&(s.handleEvent=Au(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Uo(s),target:e},handled:!1,type:"instrument"}}))}catch{}return r.apply(this,[i,Au(s,{mechanism:{data:{function:"addEventListener",handler:Uo(s),target:e},handled:!1,type:"instrument"}}),o])}}),kn(n,"removeEventListener",function(r){return function(i,s,o){const a=s;try{const c=a&&a.__sentry_wrapped__;c&&r.call(this,i,c,o)}catch{}return r.call(this,i,a,o)}}))}const ip=1024,IL="Breadcrumbs",eQ=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:IL,setup(n){t.console&&KK(iQ(n)),t.dom&&FO(rQ(n,t.dom)),t.xhr&&rw(sQ(n)),t.fetch&&nw(oQ(n)),t.history&&uv(aQ(n)),t.sentry&&n.on&&n.on("beforeSendEvent",nQ(n))}}},tQ=ec(IL,eQ);function nQ(e){return function(n){Vt()===e&&ja({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:da(n)},{event:n})}}function rQ(e,t){return function(r){if(Vt()!==e)return;let i,s,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>ip&&(di&&J.warn(`\`dom.maxStringLength\` cannot exceed ${ip}, but a value of ${a} was configured. Sentry will use ${ip} instead.`),a=ip),typeof o=="string"&&(o=[o]);try{const l=r.event,u=cQ(l)?l.target:l;i=Vc(u,{keyAttrs:o,maxStringLength:a}),s=RO(u)}catch{i="<unknown>"}if(i.length===0)return;const c={category:`ui.${r.name}`,message:i};s&&(c.data={"ui.component_name":s}),ja(c,{event:r.event,name:r.name,global:r.global})}}function iQ(e){return function(n){if(Vt()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:wJ(n.level),message:LE(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${LE(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;ja(r,{input:n.args,level:n.level})}}function sQ(e){return function(n){if(Vt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n,s=n.xhr[wa];if(!r||!i||!s)return;const{method:o,url:a,status_code:c,body:l}=s,u={method:o,url:a,status_code:c},d={xhr:n.xhr,input:l,startTimestamp:r,endTimestamp:i};ja({category:"xhr",data:u,type:"http"},d)}}function oQ(e){return function(n){if(Vt()!==e)return;const{startTimestamp:r,endTimestamp:i}=n;if(i&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.error){const s=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:i};ja({category:"fetch",data:s,level:"error",type:"http"},o)}else{const s=n.response,o={...n.fetchData,status_code:s&&s.status},a={input:n.args,response:s,startTimestamp:r,endTimestamp:i};ja({category:"fetch",data:o,type:"http"},a)}}}function aQ(e){return function(n){if(Vt()!==e)return;let r=n.from,i=n.to;const s=Zy(Ye.location.href);let o=r?Zy(r):void 0;const a=Zy(i);(!o||!o.path)&&(o=s),s.protocol===a.protocol&&s.host===a.host&&(i=a.relative),s.protocol===o.protocol&&s.host===o.host&&(r=o.relative),ja({category:"navigation",data:{from:r,to:i}})}}function cQ(e){return!!e&&!!e.target}const lQ="cause",uQ=5,SL="LinkedErrors",dQ=(e={})=>{const t=e.limit||uQ,n=e.key||lQ;return{name:SL,preprocessEvent(r,i,s){const o=s.getOptions();MK(pL,o.stackParser,o.maxValueLength,n,t,r,i)}}},fQ=ec(SL,dQ),bL="HttpContext",hQ=()=>({name:bL,preprocessEvent(e){if(!Ye.navigator&&!Ye.location&&!Ye.document)return;const t=e.request&&e.request.url||Ye.location&&Ye.location.href,{referrer:n}=Ye.document||{},{userAgent:r}=Ye.navigator||{},i={...e.request&&e.request.headers,...n&&{Referer:n},...r&&{"User-Agent":r}},s={...e.request,...t&&{url:t},headers:i};e.request=s}}),pQ=ec(bL,hQ),wL="Dedupe",mQ=()=>{let e;return{name:wL,processEvent(t){if(t.type)return t;try{if(vQ(t,e))return di&&J.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},gQ=ec(wL,mQ);function vQ(e,t){return t?!!(yQ(e,t)||CQ(e,t)):!1}function yQ(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!AL(e,t)||!kL(e,t))}function CQ(e,t){const n=fT(t),r=fT(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!AL(e,t)||!kL(e,t))}function kL(e,t){let n=hT(e),r=hT(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let i=0;i<r.length;i++){const s=r[i],o=n[i];if(s.filename!==o.filename||s.lineno!==o.lineno||s.colno!==o.colno||s.function!==o.function)return!1}return!0}function AL(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function fT(e){return e.exception&&e.exception.values&&e.exception.values[0]}function hT(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch{return}}const IQ=[new XY,new jY,new Jq,new tQ,new Wq,new fQ,new gQ,new pQ];function SQ(e={}){e.defaultIntegrations===void 0&&(e.defaultIntegrations=IQ),e.release===void 0&&(typeof __SENTRY_RELEASE__=="string"&&(e.release=__SENTRY_RELEASE__),Ye.SENTRY_RELEASE&&Ye.SENTRY_RELEASE.id&&(e.release=Ye.SENTRY_RELEASE.id)),e.autoSessionTracking===void 0&&(e.autoSessionTracking=!0),e.sendClientReports===void 0&&(e.sendClientReports=!0);const t={...e,stackParser:zK(e.stackParser||Vq),integrations:NY(e),transport:e.transport||(UO()?bq:kq)};GY(Cq,t),e.autoSessionTracking&&bQ()}function pT(e={},t=qn()){if(!Ye.document){di&&J.error("Global document not defined in showReportDialog call");return}const{client:n,scope:r}=t.getStackTop(),i=e.dsn||n&&n.getDsn();if(!i){di&&J.error("DSN not configured for showReportDialog call");return}r&&(e.user={...r.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const s=Ye.document.createElement("script");s.async=!0,s.crossOrigin="anonymous",s.src=RY(i,e),e.onLoad&&(s.onload=e.onLoad);const{onClose:o}=e;if(o){const c=l=>{if(l.data==="__sentry_reportdialog_closed__")try{o()}finally{Ye.removeEventListener("message",c)}};Ye.addEventListener("message",c)}const a=Ye.document.head||Ye.document.body;a?a.appendChild(s):di&&J.error("Not injecting report dialog. No injection point found in HTML")}function mT(e){e.startSession({ignoreDuration:!0}),e.captureSession()}function bQ(){if(typeof Ye.document>"u"){di&&J.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}const e=qn();e.captureSession&&(mT(e),uv(({from:t,to:n})=>{t!==void 0&&t!==n&&mT(qn())}))}const Lt=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ft=tt;function wQ(){ft&&ft.document?ft.document.addEventListener("visibilitychange",()=>{const e=gh();if(ft.document.hidden&&e){const t="cancelled";Lt&&J.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${e.op}`),e.status||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):Lt&&J.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const mw=(e,t,n)=>{let r,i;return s=>{t.value>=0&&(s||n)&&(i=t.value-(r||0),(i||r===void 0)&&(r=t.value,t.delta=i,e(t)))}},kQ=()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,AQ=()=>{const e=ft.performance.timing,t=ft.performance.navigation.type,n={entryType:"navigation",startTime:0,type:t==2?"back_forward":t===1?"reload":"navigate"};for(const r in e)r!=="navigationStart"&&r!=="toJSON"&&(n[r]=Math.max(e[r]-e.navigationStart,0));return n},EL=()=>ft.__WEB_VITALS_POLYFILL__?ft.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||AQ()):ft.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],TL=()=>{const e=EL();return e&&e.activationStart||0},gw=(e,t)=>{const n=EL();let r="navigate";return n&&(ft.document.prerendering||TL()>0?r="prerender":r=n.type.replace(/_/g,"-")),{name:e,value:typeof t>"u"?-1:t,rating:"good",delta:0,entries:[],id:kQ(),navigationType:r}},mv=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(i=>{t(i.getEntries())});return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch{}},gv=(e,t)=>{const n=r=>{(r.type==="pagehide"||ft.document.visibilityState==="hidden")&&(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},EQ=e=>{const t=gw("CLS",0);let n,r=0,i=[];const s=a=>{a.forEach(c=>{if(!c.hadRecentInput){const l=i[0],u=i[i.length-1];r&&i.length!==0&&c.startTime-u.startTime<1e3&&c.startTime-l.startTime<5e3?(r+=c.value,i.push(c)):(r=c.value,i=[c]),r>t.value&&(t.value=r,t.entries=i,n&&n())}})},o=mv("layout-shift",s);if(o){n=mw(e,t);const a=()=>{s(o.takeRecords()),n(!0)};return gv(a),a}};let Jp=-1;const TQ=()=>ft.document.visibilityState==="hidden"&&!ft.document.prerendering?0:1/0,_Q=()=>{gv(({timeStamp:e})=>{Jp=e},!0)},vw=()=>(Jp<0&&(Jp=TQ(),_Q()),{get firstHiddenTime(){return Jp}}),RQ=e=>{const t=vw(),n=gw("FID");let r;const i=a=>{a.startTime<t.firstHiddenTime&&(n.value=a.processingStart-a.startTime,n.entries.push(a),r(!0))},s=a=>{a.forEach(i)},o=mv("first-input",s);r=mw(e,n),o&&gv(()=>{s(o.takeRecords()),o.disconnect()},!0)},gT={},xQ=e=>{const t=vw(),n=gw("LCP");let r;const i=o=>{const a=o[o.length-1];if(a){const c=Math.max(a.startTime-TL(),0);c<t.firstHiddenTime&&(n.value=c,n.entries=[a],r())}},s=mv("largest-contentful-paint",i);if(s){r=mw(e,n);const o=()=>{gT[n.id]||(i(s.takeRecords()),s.disconnect(),gT[n.id]=!0,r(!0))};return["keydown","click"].forEach(a=>{addEventListener(a,o,{once:!0,capture:!0})}),gv(o,!0),o}},Jd={},og={};let _L,RL,xL;function NQ(e){return yw("cls",e,MQ,_L)}function NL(e){return yw("lcp",e,OQ,xL)}function PQ(e){return yw("fid",e,DQ,RL)}function vv(e,t){return PL(e,t),og[e]||(LQ(e),og[e]=!0),ML(e,t)}function yv(e,t){const n=Jd[e];if(!(!n||!n.length))for(const r of n)try{r(t)}catch(i){Lt&&J.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${Uo(r)}
Error:`,i)}}function MQ(){EQ(e=>{yv("cls",{metric:e}),_L=e})}function DQ(){RQ(e=>{yv("fid",{metric:e}),RL=e})}function OQ(){xQ(e=>{yv("lcp",{metric:e}),xL=e})}function yw(e,t,n,r){return PL(e,t),og[e]||(n(),og[e]=!0),r&&t({metric:r}),ML(e,t)}function LQ(e){const t={};e==="event"&&(t.durationThreshold=0),mv(e,n=>{yv(e,{entries:n})},t)}function PL(e,t){Jd[e]=Jd[e]||[],Jd[e].push(t)}function ML(e,t){return()=>{const n=Jd[e];if(!n)return;const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}function Jy(e){return typeof e=="number"&&isFinite(e)}function Eu(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}const BQ=2147483647;function un(e){return e/1e3}function DL(){return ft&&ft.addEventListener&&ft.performance}let vT=0,Wt={},ss,Yd;function FQ(){const e=DL();if(e&&Ki){e.mark&&ft.performance.mark("sentry-tracing-init");const t=HQ(),n=GQ(),r=WQ();return()=>{t(),n(),r()}}return()=>{}}function UQ(){vv("longtask",({entries:e})=>{for(const t of e){const n=gh();if(!n)return;const r=un(Ki+t.startTime),i=un(t.duration);n.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i})}})}function VQ(){vv("event",({entries:e})=>{for(const t of e){const n=gh();if(!n)return;if(t.name==="click"){const r=un(Ki+t.startTime),i=un(t.duration),s={description:Vc(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:r,endTimestamp:r+i},o=RO(t.target);o&&(s.data={"ui.component_name":o}),n.startChild(s)}}})}function GQ(){return NQ(({metric:e})=>{const t=e.entries.pop();t&&(Lt&&J.log("[Measurements] Adding CLS"),Wt.cls={value:e.value,unit:""},Yd=t)})}function WQ(){return NL(({metric:e})=>{const t=e.entries.pop();t&&(Lt&&J.log("[Measurements] Adding LCP"),Wt.lcp={value:e.value,unit:"millisecond"},ss=t)})}function HQ(){return PQ(({metric:e})=>{const t=e.entries.pop();if(!t)return;const n=un(Ki),r=un(t.startTime);Lt&&J.log("[Measurements] Adding FID"),Wt.fid={value:e.value,unit:"millisecond"},Wt["mark.fid"]={value:n+r,unit:"second"}})}function jQ(e){const t=DL();if(!t||!ft.performance.getEntries||!Ki)return;Lt&&J.log("[Tracing] Adding & adjusting spans using Performance API");const n=un(Ki),r=t.getEntries();let i,s;if(r.slice(vT).forEach(o=>{const a=un(o.startTime),c=un(o.duration);if(!(e.op==="navigation"&&n+a<e.startTimestamp))switch(o.entryType){case"navigation":{ZQ(e,o,n),i=n+un(o.responseStart),s=n+un(o.requestStart);break}case"mark":case"paint":case"measure":{$Q(e,o,a,c,n);const l=vw(),u=o.startTime<l.firstHiddenTime;o.name==="first-paint"&&u&&(Lt&&J.log("[Measurements] Adding FP"),Wt.fp={value:o.startTime,unit:"millisecond"}),o.name==="first-contentful-paint"&&u&&(Lt&&J.log("[Measurements] Adding FCP"),Wt.fcp={value:o.startTime,unit:"millisecond"});break}case"resource":{const l=o.name.replace(ft.location.origin,"");XQ(e,o,l,a,c,n);break}}}),vT=Math.max(r.length-1,0),KQ(e),e.op==="pageload"){typeof i=="number"&&(Lt&&J.log("[Measurements] Adding TTFB"),Wt.ttfb={value:(i-e.startTimestamp)*1e3,unit:"millisecond"},typeof s=="number"&&s<=i&&(Wt["ttfb.requestTime"]={value:(i-s)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(a=>{if(!Wt[a]||n>=e.startTimestamp)return;const c=Wt[a].value,l=n+un(c),u=Math.abs((l-e.startTimestamp)*1e3),d=u-c;Lt&&J.log(`[Measurements] Normalized ${a} from ${c} to ${u} (${d})`),Wt[a].value=u});const o=Wt["mark.fid"];o&&Wt.fid&&(Eu(e,{description:"first input delay",endTimestamp:o.value+un(Wt.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:o.value}),delete Wt["mark.fid"]),"fcp"in Wt||delete Wt.cls,Object.keys(Wt).forEach(a=>{e.setMeasurement(a,Wt[a].value,Wt[a].unit)}),JQ(e)}ss=void 0,Yd=void 0,Wt={}}function $Q(e,t,n,r,i){const s=i+n,o=s+r;return Eu(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:s}),s}function ZQ(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{sp(e,t,r,n)}),sp(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),sp(e,t,"fetch",n,"cache","domainLookupStart"),sp(e,t,"domainLookup",n,"DNS"),zQ(e,t,n)}function sp(e,t,n,r,i,s){const o=s?t[s]:t[`${n}End`],a=t[`${n}Start`];!a||!o||Eu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:i||n,startTimestamp:r+un(a),endTimestamp:r+un(o)})}function zQ(e,t,n){Eu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+un(t.requestStart),endTimestamp:n+un(t.responseEnd)}),Eu(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+un(t.responseStart),endTimestamp:n+un(t.responseEnd)})}function XQ(e,t,n,r,i,s){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const o={};Yy(o,t,"transferSize","http.response_transfer_size"),Yy(o,t,"encodedBodySize","http.response_content_length"),Yy(o,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(o["resource.render_blocking_status"]=t.renderBlockingStatus);const a=s+r,c=a+i;Eu(e,{description:n,endTimestamp:c,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:a,data:o})}function KQ(e){const t=ft.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Jy(n.rtt)&&(Wt["connection.rtt"]={value:n.rtt,unit:"millisecond"})),Jy(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`),Jy(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}function JQ(e){ss&&(Lt&&J.log("[Measurements] Adding LCP Data"),ss.element&&e.setTag("lcp.element",Vc(ss.element)),ss.id&&e.setTag("lcp.id",ss.id),ss.url&&e.setTag("lcp.url",ss.url.trim().slice(0,200)),e.setTag("lcp.size",ss.size)),Yd&&Yd.sources&&(Lt&&J.log("[Measurements] Adding CLS Data"),Yd.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,Vc(t.node))))}function Yy(e,t,n,r){const i=t[n];i!=null&&i<BQ&&(e[r]=i)}function YQ(e,t,n,r,i="auto.http.browser"){if(!dw()||!e.fetchData)return;const s=t(e.fetchData.url);if(e.endTimestamp&&s){const f=e.fetchData.__span;if(!f)return;const h=r[f];if(h){if(e.response){h.setHttpStatus(e.response.status);const p=e.response&&e.response.headers&&e.response.headers.get("content-length");if(p){const m=parseInt(p);m>0&&h.setData("http.response_content_length",m)}}else e.error&&h.setStatus("internal_error");h.end(),delete r[f]}return}const o=vh(),a=Vt(),c=o.getSpan(),{method:l,url:u}=e.fetchData,d=s&&c?c.startChild({data:{url:u,type:"fetch","http.method":l},description:`${l} ${u}`,op:"http.client",origin:i}):void 0;if(d&&(e.fetchData.__span=d.spanId,r[d.spanId]=d),n(e.fetchData.url)&&a){const f=e.args[0];e.args[1]=e.args[1]||{};const h=e.args[1];h.headers=qQ(f,a,o,h,d)}return d}function qQ(e,t,n,r,i){const s=i||n.getSpan(),o=s&&s.transaction,{traceId:a,sampled:c,dsc:l}=n.getPropagationContext(),u=s?s.toTraceparent():sw(a,void 0,c),d=o?o.getDynamicSamplingContext():l||fv(a,t,n),f=RI(d),h=typeof Request<"u"&&Fo(e,Request)?e.headers:r.headers;if(h)if(typeof Headers<"u"&&Fo(h,Headers)){const p=new Headers(h);return p.append("sentry-trace",u),f&&p.append(_I,f),p}else if(Array.isArray(h)){const p=[...h,["sentry-trace",u]];return f&&p.push([_I,f]),p}else{const p="baggage"in h?h.baggage:void 0,m=[];return Array.isArray(p)?m.push(...p):p&&m.push(p),f&&m.push(f),{...h,"sentry-trace":u,baggage:m.length>0?m.join(","):void 0}}else return{"sentry-trace":u,baggage:f}}const OI=["localhost",/^\/(?!\/)/],LI={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:OI,tracePropagationTargets:OI};function QQ(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:r,tracingOrigins:i,shouldCreateSpanForRequest:s,enableHTTPTimings:o}={traceFetch:LI.traceFetch,traceXHR:LI.traceXHR,...e},a=typeof s=="function"?s:u=>!0,c=u=>ree(u,r||i),l={};t&&nw(u=>{const d=YQ(u,a,c,l);o&&d&&yT(d)}),n&&rw(u=>{const d=iee(u,a,c,l);o&&d&&yT(d)})}function eee(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function yT(e){const t=e.data.url;if(!t)return;const n=vv("resource",({entries:r})=>{r.forEach(i=>{eee(i)&&i.name.endsWith(t)&&(nee(i).forEach(o=>e.setData(...o)),setTimeout(n))})})}function tee(e){let t="unknown",n="unknown",r="";for(const i of e){if(i==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(i))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=i}return r===e&&(t=r),{name:t,version:n}}function es(e=0){return((Ki||performance.timeOrigin)+e)/1e3}function nee(e){const{name:t,version:n}=tee(e.nextHopProtocol),r=[];return r.push(["network.protocol.version",n],["network.protocol.name",t]),Ki?[...r,["http.request.redirect_start",es(e.redirectStart)],["http.request.fetch_start",es(e.fetchStart)],["http.request.domain_lookup_start",es(e.domainLookupStart)],["http.request.domain_lookup_end",es(e.domainLookupEnd)],["http.request.connect_start",es(e.connectStart)],["http.request.secure_connection_start",es(e.secureConnectionStart)],["http.request.connection_end",es(e.connectEnd)],["http.request.request_start",es(e.requestStart)],["http.request.response_start",es(e.responseStart)],["http.request.response_end",es(e.responseEnd)]]:r}function ree(e,t){return Xu(e,t||OI)}function iee(e,t,n,r){const i=e.xhr,s=i&&i[wa];if(!dw()||!i||i.__sentry_own_request__||!s)return;const o=t(s.url);if(e.endTimestamp&&o){const u=i.__sentry_xhr_span_id__;if(!u)return;const d=r[u];d&&s.status_code!==void 0&&(d.setHttpStatus(s.status_code),d.end(),delete r[u]);return}const a=vh(),c=a.getSpan(),l=o&&c?c.startChild({data:{type:"xhr","http.method":s.method,url:s.url},description:`${s.method} ${s.url}`,op:"http.client",origin:"auto.http.browser"}):void 0;if(l&&(i.__sentry_xhr_span_id__=l.spanId,r[i.__sentry_xhr_span_id__]=l),i.setRequestHeader&&n(s.url))if(l){const u=l&&l.transaction,d=u&&u.getDynamicSamplingContext(),f=RI(d);CT(i,l.toTraceparent(),f)}else{const u=Vt(),{traceId:d,sampled:f,dsc:h}=a.getPropagationContext(),p=sw(d,void 0,f),m=h||(u?fv(d,u,a):void 0),y=RI(m);CT(i,p,y)}return l}function CT(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(_I,n)}catch{}}function see(e,t=!0,n=!0){if(!ft||!ft.location){Lt&&J.warn("Could not initialize routing instrumentation due to invalid location");return}let r=ft.location.href,i;t&&(i=e({name:ft.location.pathname,startTimestamp:Ki?Ki/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&uv(({to:s,from:o})=>{if(o===void 0&&r&&r.indexOf(s)!==-1){r=void 0;return}o!==s&&(r=void 0,i&&(Lt&&J.log(`[Tracing] Finishing current transaction with op: ${i.op}`),i.end()),i=e({name:ft.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})}const oee="BrowserTracing",aee={...Kp,markBackgroundTransactions:!0,routingInstrumentation:see,startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...LI};class cee{constructor(t){this.name=oee,this._hasSetTracePropagationTargets=!1,SY(),Lt&&(this._hasSetTracePropagationTargets=!!(t&&(t.tracePropagationTargets||t.tracingOrigins))),this.options={...aee,...t},this.options._experiments.enableLongTask!==void 0&&(this.options.enableLongTask=this.options._experiments.enableLongTask),t&&!t.tracePropagationTargets&&t.tracingOrigins&&(this.options.tracePropagationTargets=t.tracingOrigins),this._collectWebVitals=FQ(),this.options.enableLongTask&&UQ(),this.options._experiments.enableInteractions&&VQ()}setupOnce(t,n){this._getCurrentHub=n;const i=n().getClient(),s=i&&i.getOptions(),{routingInstrumentation:o,startTransactionOnLocationChange:a,startTransactionOnPageLoad:c,markBackgroundTransactions:l,traceFetch:u,traceXHR:d,shouldCreateSpanForRequest:f,enableHTTPTimings:h,_experiments:p}=this.options,m=s&&s.tracePropagationTargets,y=m||this.options.tracePropagationTargets;Lt&&this._hasSetTracePropagationTargets&&m&&J.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),o(g=>{const v=this._createRouteTransaction(g);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(v,g,n),v},c,a),l&&wQ(),p.enableInteractions&&this._registerInteractionListener(),QQ({traceFetch:u,traceXHR:d,tracePropagationTargets:y,shouldCreateSpanForRequest:f,enableHTTPTimings:h})}_createRouteTransaction(t){if(!this._getCurrentHub){Lt&&J.warn(`[Tracing] Did not create ${t.op} transaction because _getCurrentHub is invalid.`);return}const n=this._getCurrentHub(),{beforeNavigate:r,idleTimeout:i,finalTimeout:s,heartbeatInterval:o}=this.options,a=t.op==="pageload",c=a?IT("sentry-trace"):"",l=a?IT("baggage"):"",{traceparentData:u,dynamicSamplingContext:d,propagationContext:f}=PJ(c,l),h={...t,...u,metadata:{...t.metadata,dynamicSamplingContext:u&&!d?{}:d},trimEnd:!0},p=typeof r=="function"?r(h):h,m=p===void 0?{...h,sampled:!1}:p;m.metadata=m.name!==h.name?{...m.metadata,source:"custom"}:m.metadata,this._latestRouteName=m.name,this._latestRouteSource=m.metadata&&m.metadata.source,m.sampled===!1&&Lt&&J.log(`[Tracing] Will not send ${m.op} transaction because of beforeNavigate.`),Lt&&J.log(`[Tracing] Starting ${m.op} transaction on scope`);const{location:y}=ft,g=iT(n,m,i,s,!0,{location:y},o),v=n.getScope();return a&&u?v.setPropagationContext(f):v.setPropagationContext({traceId:g.traceId,spanId:g.spanId,parentSpanId:g.parentSpanId,sampled:g.sampled}),g.registerBeforeFinishCallback(S=>{this._collectWebVitals(),jQ(S)}),g}_registerInteractionListener(){let t;const n=()=>{const{idleTimeout:r,finalTimeout:i,heartbeatInterval:s}=this.options,o="ui.action.click",a=gh();if(a&&a.op&&["navigation","pageload"].includes(a.op)){Lt&&J.warn(`[Tracing] Did not create ${o} transaction because a pageload or navigation transaction is in progress.`);return}if(t&&(t.setFinishReason("interactionInterrupted"),t.end(),t=void 0),!this._getCurrentHub){Lt&&J.warn(`[Tracing] Did not create ${o} transaction because _getCurrentHub is invalid.`);return}if(!this._latestRouteName){Lt&&J.warn(`[Tracing] Did not create ${o} transaction because _latestRouteName is missing.`);return}const c=this._getCurrentHub(),{location:l}=ft,u={name:this._latestRouteName,op:o,trimEnd:!0,metadata:{source:this._latestRouteSource||"url"}};t=iT(c,u,r,i,!0,{location:l},s)};["click"].forEach(r=>{addEventListener(r,n,{once:!1,capture:!0})})}}function IT(e){const t=FK(`meta[name=${e}]`);return t?t.getAttribute("content"):void 0}const Ct=tt,Cw="sentryReplaySession",lee="replay_event",Iw="Unable to send Replay",uee=3e5,dee=9e5,fee=5e3,hee=5500,pee=6e4,mee=5e3,gee=3,ST=15e4,op=5e3,vee=3e3,yee=300,Sw=2e7,Cee=4999,Iee=15e3,bT=36e5,wT={low:{sampling:{canvas:1},dataURLOptions:{type:"image/webp",quality:.25}},medium:{sampling:{canvas:2},dataURLOptions:{type:"image/webp",quality:.4}},high:{sampling:{canvas:4},dataURLOptions:{type:"image/webp",quality:.5}}};var dn;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(dn||(dn={}));function See(e){return e.nodeType===e.ELEMENT_NODE}function qd(e){const t=e==null?void 0:e.host;return(t==null?void 0:t.shadowRoot)===e}function Qd(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function bee(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),e}function wee(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function ag(e){try{const t=e.rules||e.cssRules;return t?bee(Array.from(t,OL).join("")):null}catch{return null}}function OL(e){let t;if(Aee(e))try{t=ag(e.styleSheet)||wee(e)}catch{}else if(Eee(e)&&e.selectorText.includes(":"))return kee(e.cssText);return t||e.cssText}function kee(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function Aee(e){return"styleSheet"in e}function Eee(e){return"selectorText"in e}class LL{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(t){var n;if(!t)return-1;const r=(n=this.getMeta(t))===null||n===void 0?void 0:n.id;return r??-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(n,i)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Tee(){return new LL}function Cv({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function Vf({isMasked:e,element:t,value:n,maskInputFn:r}){let i=n||"";return e?(r&&(i=r(i,t)),"*".repeat(i.length)):i}function Tu(e){return e.toLowerCase()}function BI(e){return e.toUpperCase()}const kT="__rrweb_original__";function _ee(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let i=0;i<e.height;i+=n){const s=t.getImageData,o=kT in s?s[kT]:s;if(new Uint32Array(o.call(t,r,i,Math.min(n,e.width-r),Math.min(n,e.height-i)).data.buffer).some(c=>c!==0))return!1}return!0}function bw(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Tu(t):null}function cg(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}let Ree=1;const xee=new RegExp("[^a-z0-9-_:]"),Gf=-2;function ww(){return Ree++}function Nee(e){if(e instanceof HTMLFormElement)return"form";const t=Tu(e.tagName);return xee.test(t)?"div":t}function Pee(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let ll,AT;const Mee=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Dee=/^(?:[a-z+]+:)?\/\//i,Oee=/^www\..*/i,Lee=/^(data:)([^,]*),(.*)/i;function lg(e,t){return(e||"").replace(Mee,(n,r,i,s,o,a)=>{const c=i||o||a,l=r||s||"";if(!c)return n;if(Dee.test(c)||Oee.test(c))return`url(${l}${c}${l})`;if(Lee.test(c))return`url(${l}${c}${l})`;if(c[0]==="/")return`url(${l}${Pee(t)+c}${l})`;const u=t.split("/"),d=c.split("/");u.pop();for(const f of d)f!=="."&&(f===".."?u.pop():u.push(f));return`url(${l}${u.join("/")}${l})`})}const Bee=/^[^ \t\n\r\u000c]+/,Fee=/^[, \t\n\r\u000c]+/;function Uee(e,t){if(t.trim()==="")return t;let n=0;function r(s){let o;const a=s.exec(t.substring(n));return a?(o=a[0],n+=o.length,o):""}const i=[];for(;r(Fee),!(n>=t.length);){let s=r(Bee);if(s.slice(-1)===",")s=Nl(e,s.substring(0,s.length-1)),i.push(s);else{let o="";s=Nl(e,s);let a=!1;for(;;){const c=t.charAt(n);if(c===""){i.push((s+o).trim());break}else if(a)c===")"&&(a=!1);else if(c===","){n+=1,i.push((s+o).trim());break}else c==="("&&(a=!0);o+=c,n+=1}}}return i.join(", ")}function Nl(e,t){if(!t||t.trim()==="")return t;const n=e.createElement("a");return n.href=t,n.href}function Vee(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function kw(){const e=document.createElement("a");return e.href="",e.href}function BL(e,t,n,r,i,s){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?Nl(e,r):n==="srcset"?Uee(e,r):n==="style"?lg(r,kw()):t==="object"&&n==="data"?Nl(e,r):typeof s=="function"?s(n,r,i):r)}function FL(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function Gee(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let i=e.classList.length;i--;){const s=e.classList[i];if(t.test(s))return!0}if(n)return e.matches(n)}catch{}return!1}function Wee(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function vc(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:vc(e.parentNode,t,n,r+1)}function Pl(e,t){return n=>{const r=n;if(r===null)return!1;if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(Wee(r,e))return!0}return!!(t&&r.matches(t))}}function _u(e,t,n,r,i,s){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;let a=-1,c=-1;if(s){if(c=vc(o,Pl(r,i)),c<0)return!0;a=vc(o,Pl(t,n),c>=0?c:1/0)}else{if(a=vc(o,Pl(t,n)),a<0)return!1;c=vc(o,Pl(r,i),a>=0?a:1/0)}return a>=0?c>=0?a<=c:!0:c>=0?!1:!!s}catch{}return!!s}function Hee(e,t,n){const r=e.contentWindow;if(!r)return;let i=!1,s;try{s=r.document.readyState}catch{return}if(s!=="complete"){const a=setTimeout(()=>{i||(t(),i=!0)},n);e.addEventListener("load",()=>{clearTimeout(a),i=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function jee(e,t,n){let r=!1,i;try{i=e.sheet}catch{return}if(i)return;const s=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(s),r=!0,t()})}function $ee(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,inlineStylesheet:h,maskInputOptions:p={},maskTextFn:m,maskInputFn:y,dataURLOptions:g={},inlineImages:v,recordCanvas:S,keepIframeSrcFn:E,newlyAddedElement:k=!1}=t,b=Zee(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:dn.Document,childNodes:[],compatMode:e.compatMode}:{type:dn.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:dn.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:b};case e.ELEMENT_NODE:return Xee(e,{doc:n,blockClass:i,blockSelector:s,unblockSelector:o,inlineStylesheet:h,maskAttributeFn:c,maskInputOptions:p,maskInputFn:y,dataURLOptions:g,inlineImages:v,recordCanvas:S,keepIframeSrcFn:E,newlyAddedElement:k,rootId:b,maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f});case e.TEXT_NODE:return zee(e,{maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:f,maskTextFn:m,maskInputOptions:p,maskInputFn:y,rootId:b});case e.CDATA_SECTION_NODE:return{type:dn.CDATA,textContent:"",rootId:b};case e.COMMENT_NODE:return{type:dn.Comment,textContent:e.textContent||"",rootId:b};default:return!1}}function Zee(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function zee(e,t){var n;const{maskAllText:r,maskTextClass:i,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:a,maskTextFn:c,maskInputOptions:l,maskInputFn:u,rootId:d}=t,f=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const p=f==="STYLE"?!0:void 0,m=f==="SCRIPT"?!0:void 0,y=f==="TEXTAREA"?!0:void 0;if(p&&h){try{e.nextSibling||e.previousSibling||!((n=e.parentNode.sheet)===null||n===void 0)&&n.cssRules&&(h=ag(e.parentNode.sheet))}catch(v){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${v}`,e)}h=lg(h,kw())}m&&(h="SCRIPT_PLACEHOLDER");const g=_u(e,i,o,s,a,r);if(!p&&!m&&!y&&h&&g&&(h=c?c(h):h.replace(/[\S]/g,"*")),y&&h&&(l.textarea||g)&&(h=u?u(h,e.parentNode):h.replace(/[\S]/g,"*")),f==="OPTION"&&h){const v=Cv({type:null,tagName:f,maskInputOptions:l});h=Vf({isMasked:_u(e,i,o,s,a,v),element:e,value:h,maskInputFn:u})}return{type:dn.Text,textContent:h||"",isStyle:p,rootId:d}}function Xee(e,t){const{doc:n,blockClass:r,blockSelector:i,unblockSelector:s,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:f,keepIframeSrcFn:h,newlyAddedElement:p=!1,rootId:m,maskAllText:y,maskTextClass:g,unmaskTextClass:v,maskTextSelector:S,unmaskTextSelector:E}=t,k=Gee(e,r,i,s),b=Nee(e);let A={};const _=e.attributes.length;for(let P=0;P<_;P++){const D=e.attributes[P];FL(b,D.name,D.value)||(A[D.name]=BL(n,b,Tu(D.name),D.value,e,c))}if(b==="link"&&o){const P=Array.from(n.styleSheets).find(B=>B.href===e.href);let D=null;P&&(D=ag(P)),D&&(delete A.rel,delete A.href,A._cssText=lg(D,P.href))}if(b==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const P=ag(e.sheet);P&&(A._cssText=lg(P,kw()))}if(b==="input"||b==="textarea"||b==="select"||b==="option"){const P=e,D=bw(P),B=cg(P,BI(b),D),V=P.checked;if(D!=="submit"&&D!=="button"&&B){const G=_u(P,g,S,v,E,Cv({type:D,tagName:BI(b),maskInputOptions:a}));A.value=Vf({isMasked:G,element:P,value:B,maskInputFn:l})}V&&(A.checked=V)}if(b==="option"&&(e.selected&&!a.select?A.selected=!0:delete A.selected),b==="canvas"&&f){if(e.__context==="2d")_ee(e)||(A.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const P=e.toDataURL(u.type,u.quality),D=document.createElement("canvas");D.width=e.width,D.height=e.height;const B=D.toDataURL(u.type,u.quality);P!==B&&(A.rr_dataURL=P)}}if(b==="img"&&d){ll||(ll=n.createElement("canvas"),AT=ll.getContext("2d"));const P=e,D=P.crossOrigin;P.crossOrigin="anonymous";const B=()=>{P.removeEventListener("load",B);try{ll.width=P.naturalWidth,ll.height=P.naturalHeight,AT.drawImage(P,0,0),A.rr_dataURL=ll.toDataURL(u.type,u.quality)}catch(V){console.warn(`Cannot inline img src=${P.currentSrc}! Error: ${V}`)}D?A.crossOrigin=D:P.removeAttribute("crossorigin")};P.complete&&P.naturalWidth!==0?B():P.addEventListener("load",B)}if((b==="audio"||b==="video")&&(A.rr_mediaState=e.paused?"paused":"played",A.rr_mediaCurrentTime=e.currentTime),p||(e.scrollLeft&&(A.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(A.rr_scrollTop=e.scrollTop)),k){const{width:P,height:D}=e.getBoundingClientRect();A={class:A.class,rr_width:`${P}px`,rr_height:`${D}px`}}b==="iframe"&&!h(A.src)&&(e.contentDocument||(A.rr_src=A.src),delete A.src);let x;try{customElements.get(b)&&(x=!0)}catch{}return{type:dn.Element,tagName:b,attributes:A,childNodes:[],isSVG:Vee(e)||void 0,needBlock:k,rootId:m,isCustom:x}}function yt(e){return e==null?"":e.toLowerCase()}function Kee(e,t){if(t.comment&&e.type===dn.Comment)return!0;if(e.type===dn.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")&&e.attributes.as==="script"||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(yt(e.attributes.name).match(/^msapplication-tile(image|color)$/)||yt(e.attributes.name)==="application-name"||yt(e.attributes.rel)==="icon"||yt(e.attributes.rel)==="apple-touch-icon"||yt(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&yt(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(yt(e.attributes.property).match(/^(og|twitter|fb):/)||yt(e.attributes.name).match(/^(og|twitter):/)||yt(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(yt(e.attributes.name)==="robots"||yt(e.attributes.name)==="googlebot"||yt(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(yt(e.attributes.name)==="author"||yt(e.attributes.name)==="generator"||yt(e.attributes.name)==="framework"||yt(e.attributes.name)==="publisher"||yt(e.attributes.name)==="progid"||yt(e.attributes.property).match(/^article:/)||yt(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(yt(e.attributes.name)==="google-site-verification"||yt(e.attributes.name)==="yandex-verification"||yt(e.attributes.name)==="csrf-token"||yt(e.attributes.name)==="p:domain_verify"||yt(e.attributes.name)==="verify-v1"||yt(e.attributes.name)==="verification"||yt(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function Ml(e,t){const{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:p={},maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S={},inlineImages:E=!1,recordCanvas:k=!1,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_=5e3,onStylesheetLoad:x,stylesheetLoadTimeout:P=5e3,keepIframeSrcFn:D=()=>!1,newlyAddedElement:B=!1}=t;let{preserveWhiteSpace:V=!0}=t;const G=$ee(e,{doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,dataURLOptions:S,inlineImages:E,recordCanvas:k,keepIframeSrcFn:D,newlyAddedElement:B});if(!G)return console.warn(e,"not serialized"),null;let Z;r.hasNode(e)?Z=r.getId(e):Kee(G,v)||!V&&G.type===dn.Text&&!G.isStyle&&!G.textContent.replace(/^\s+|\s+$/gm,"").length?Z=Gf:Z=ww();const z=Object.assign(G,{id:Z});if(r.add(e,z),Z===Gf)return null;b&&b(e);let te=!f;if(z.type===dn.Element){te=te&&!z.needBlock,delete z.needBlock;const j=e.shadowRoot;j&&Qd(j)&&(z.isShadowHost=!0)}if((z.type===dn.Document||z.type===dn.Element)&&te){v.headWhitespace&&z.type===dn.Element&&z.tagName==="head"&&(V=!1);const j={doc:n,mirror:r,blockClass:i,blockSelector:s,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:f,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S,inlineImages:E,recordCanvas:k,preserveWhiteSpace:V,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:x,stylesheetLoadTimeout:P,keepIframeSrcFn:D};for(const K of Array.from(e.childNodes)){const ie=Ml(K,j);ie&&z.childNodes.push(ie)}if(See(e)&&e.shadowRoot)for(const K of Array.from(e.shadowRoot.childNodes)){const ie=Ml(K,j);ie&&(Qd(e.shadowRoot)&&(ie.isShadow=!0),z.childNodes.push(ie))}}return e.parentNode&&qd(e.parentNode)&&Qd(e.parentNode)&&(z.isShadow=!0),z.type===dn.Element&&z.tagName==="iframe"&&Hee(e,()=>{const j=e.contentDocument;if(j&&A){const K=Ml(j,{doc:j,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S,inlineImages:E,recordCanvas:k,preserveWhiteSpace:V,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:x,stylesheetLoadTimeout:P,keepIframeSrcFn:D});K&&A(e,K)}},_),z.type===dn.Element&&z.tagName==="link"&&z.attributes.rel==="stylesheet"&&jee(e,()=>{if(x){const j=Ml(e,{doc:n,mirror:r,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v,dataURLOptions:S,inlineImages:E,recordCanvas:k,preserveWhiteSpace:V,onSerialize:b,onIframeLoad:A,iframeLoadTimeout:_,onStylesheetLoad:x,stylesheetLoadTimeout:P,keepIframeSrcFn:D});j&&x(e,j)}},P),z}function Jee(e,t){const{mirror:n=new LL,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:s=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:p=!1,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOM:v=!1,dataURLOptions:S,preserveWhiteSpace:E,onSerialize:k,onIframeLoad:b,iframeLoadTimeout:A,onStylesheetLoad:_,stylesheetLoadTimeout:x,keepIframeSrcFn:P=()=>!1}=t||{};return Ml(e,{doc:e,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:p===!1?{}:p,maskAttributeFn:m,maskTextFn:y,maskInputFn:g,slimDOMOptions:v===!0||v==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:v==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:v===!1?{}:v,dataURLOptions:S,inlineImages:f,recordCanvas:h,preserveWhiteSpace:E,onSerialize:k,onIframeLoad:b,iframeLoadTimeout:A,onStylesheetLoad:_,stylesheetLoadTimeout:x,keepIframeSrcFn:P,newlyAddedElement:!1})}function ur(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const hl=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let ET={map:{},getId(){return console.error(hl),-1},getNode(){return console.error(hl),null},removeNodeFromMap(){console.error(hl)},has(){return console.error(hl),!1},reset(){console.error(hl)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(ET=new Proxy(ET,{get(e,t,n){return t==="map"&&console.error(hl),Reflect.get(e,t,n)}}));function Wf(e,t,n={}){let r=null,i=0;return function(...s){const o=Date.now();!i&&n.leading===!1&&(i=o);const a=t-(o-i),c=this;a<=0||a>t?(r&&(clearTimeout(r),r=null),i=o,e.apply(c,s)):!r&&n.trailing!==!1&&(r=setTimeout(()=>{i=n.leading===!1?0:Date.now(),r=null,e.apply(c,s)},a))}}function UL(e,t,n,r,i=window){const s=i.Object.getOwnPropertyDescriptor(e,t);return i.Object.defineProperty(e,t,r?n:{set(o){setTimeout(()=>{n.set.call(this,o)},0),s&&s.set&&s.set.call(this,o)}}),()=>UL(e,t,s||{},!0)}function Aw(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],i=n(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=i,()=>{e[t]=r}}catch{return()=>{}}}let ug=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(ug=()=>new Date().getTime());function VL(e){var t,n,r,i,s,o;const a=e.document;return{left:a.scrollingElement?a.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:(a==null?void 0:a.documentElement.scrollLeft)||((n=(t=a==null?void 0:a.body)===null||t===void 0?void 0:t.parentElement)===null||n===void 0?void 0:n.scrollLeft)||((r=a==null?void 0:a.body)===null||r===void 0?void 0:r.scrollLeft)||0,top:a.scrollingElement?a.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:(a==null?void 0:a.documentElement.scrollTop)||((s=(i=a==null?void 0:a.body)===null||i===void 0?void 0:i.parentElement)===null||s===void 0?void 0:s.scrollTop)||((o=a==null?void 0:a.body)===null||o===void 0?void 0:o.scrollTop)||0}}function GL(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function WL(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function Di(e,t,n,r,i){if(!e)return!1;const s=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(!s)return!1;const o=Pl(t,n);if(!i){const l=r&&s.matches(r);return o(s)&&!l}const a=vc(s,o);let c=-1;return a<0?!1:(r&&(c=vc(s,Pl(null,r))),a>-1&&c<0?!0:a<c)}function Yee(e,t){return t.getId(e)!==-1}function qy(e,t){return t.getId(e)===Gf}function HL(e,t){if(qd(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?HL(e.parentNode,t):!0:!0}function FI(e){return!!e.changedTouches}function qee(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function jL(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function $L(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function UI(e){return!!(e!=null&&e.shadowRoot)}class Qee{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){var n;return(n=this.styleIDMap.get(t))!==null&&n!==void 0?n:-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ZL(e){var t,n;let r=null;return((n=(t=e.getRootNode)===null||t===void 0?void 0:t.call(e))===null||n===void 0?void 0:n.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(r=e.getRootNode().host),r}function ete(e){let t=e,n;for(;n=ZL(t);)t=n;return t}function tte(e){const t=e.ownerDocument;if(!t)return!1;const n=ete(e);return t.contains(n)}function zL(e){const t=e.ownerDocument;return t?t.contains(e)||tte(e):!1}var Ve=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Ve||{}),Ge=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Ge||{}),er=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(er||{}),js=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(js||{});function TT(e){return"__ln"in e}class nte{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=(n==null?void 0:n.next)||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&TT(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&TT(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const _T=(e,t)=>`${e}@${t}`;class rte{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new nte,i=c=>{let l=c,u=Gf;for(;u===Gf;)l=l&&l.nextSibling,u=l&&this.mirror.getId(l);return u},s=c=>{if(!c.parentNode||!zL(c))return;const l=qd(c.parentNode)?this.mirror.getId(ZL(c)):this.mirror.getId(c.parentNode),u=i(c);if(l===-1||u===-1)return r.addNode(c);const d=Ml(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:f=>{jL(f,this.mirror)&&this.iframeManager.addIframe(f),$L(f,this.mirror)&&this.stylesheetManager.trackLinkElement(f),UI(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(f,h)=>{this.iframeManager.attachIframe(f,h),this.shadowDomManager.observeAttachShadow(f)},onStylesheetLoad:(f,h)=>{this.stylesheetManager.attachLinkElement(f,h)}});d&&(t.push({parentId:l,nextId:u,node:d}),n.add(d.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)RT(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||s(c);for(const c of this.addedSet)!xT(this.droppedSet,c)&&!RT(this.removes,c,this.mirror)||xT(this.movedSet,c)?s(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const l=this.mirror.getId(o.value.parentNode),u=i(o.value);l!==-1&&u!==-1&&(c=o)}if(!c){let l=r.tail;for(;l;){const u=l;if(l=l.previous,u){const d=this.mirror.getId(u.value.parentNode);if(i(u.value)===-1)continue;if(d!==-1){c=u;break}else{const h=u.value;if(h.parentNode&&h.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const p=h.parentNode.host;if(this.mirror.getId(p)!==-1){c=u;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),s(c.value)}const a={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:l}=c;if(typeof l.style=="string"){const u=JSON.stringify(c.styleDiff),d=JSON.stringify(c._unchangedStyles);u.length<l.style.length&&(u+d).split("var(").length===l.style.split("var(").length&&(l.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:l}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!a.texts.length&&!a.attributes.length&&!a.removes.length&&!a.adds.length||(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(a))},this.processMutation=t=>{if(qy(t.target,this.mirror))return;let n;try{n=document.implementation.createHTMLDocument()}catch{n=this.doc}switch(t.type){case"characterData":{const r=t.target.textContent;!Di(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==t.oldValue&&this.texts.push({value:_u(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r):r.replace(/[\S]/g,"*"):r,node:t.target});break}case"attributes":{const r=t.target;let i=t.attributeName,s=t.target.getAttribute(i);if(i==="value"){const a=bw(r),c=r.tagName;s=cg(r,c,a);const l=Cv({maskInputOptions:this.maskInputOptions,tagName:c,type:a}),u=_u(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,l);s=Vf({isMasked:u,element:r,value:s,maskInputFn:this.maskInputFn})}if(Di(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===t.oldValue)return;let o=this.attributes.find(a=>a.node===t.target);if(r.tagName==="IFRAME"&&i==="src"&&!this.keepIframeSrcFn(s))if(!r.contentDocument)i="rr_src";else return;if(o||(o={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o)),i==="type"&&r.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!FL(r.tagName,i)&&(o.attributes[i]=BL(this.doc,Tu(r.tagName),Tu(i),s,r,this.maskAttributeFn),i==="style")){const a=n.createElement("span");t.oldValue&&a.setAttribute("style",t.oldValue);for(const c of Array.from(r.style)){const l=r.style.getPropertyValue(c),u=r.style.getPropertyPriority(c);l!==a.style.getPropertyValue(c)||u!==a.style.getPropertyPriority(c)?u===""?o.styleDiff[c]=l:o.styleDiff[c]=[l,u]:o._unchangedStyles[c]=[l,u]}for(const c of Array.from(a.style))r.style.getPropertyValue(c)===""&&(o.styleDiff[c]=!1)}break}case"childList":{if(Di(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(r=>this.genAdds(r,t.target)),t.removedNodes.forEach(r=>{const i=this.mirror.getId(r),s=qd(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);Di(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||qy(r,this.mirror)||!Yee(r,this.mirror)||(this.addedSet.has(r)?(VI(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(t.target)&&i===-1||HL(t.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[_T(i,s)]?VI(this.movedSet,r):this.removes.push({parentId:s,id:i,isShadow:qd(t.target)&&Qd(t.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(qy(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[_T(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);Di(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes.forEach(r=>this.genAdds(r)),UI(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function VI(e,t){e.delete(t),t.childNodes.forEach(n=>VI(e,n))}function RT(e,t,n){return e.length===0?!1:XL(e,t,n)}function XL(e,t,n){const{parentNode:r}=t;if(!r)return!1;const i=n.getId(r);return e.some(s=>s.id===i)?!0:XL(e,r,n)}function xT(e,t){return e.size===0?!1:KL(e,t)}function KL(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:KL(e,n):!1}let ef;function ite(e){ef=e}function ste(){ef=void 0}const Je=e=>ef?(...n)=>{try{return e(...n)}catch(r){if(ef&&ef(r)===!0)return()=>{};throw r}}:e,Dl=[];function yh(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function JL(e,t){var n,r;const i=new rte;Dl.push(i),i.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const o=(r=(n=window==null?void 0:window.Zone)===null||n===void 0?void 0:n.__symbol__)===null||r===void 0?void 0:r.call(n,"MutationObserver");o&&window[o]&&(s=window[o]);const a=new s(Je(c=>{e.onMutation&&e.onMutation(c)===!1||i.processMutations.bind(i)(c)}));return a.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),a}function ote({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const i=typeof t.mousemove=="number"?t.mousemove:50,s=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],a;const c=Wf(Je(d=>{const f=Date.now()-a;e(o.map(h=>(h.timeOffset-=f,h)),d),o=[],a=null}),s),l=Je(Wf(Je(d=>{const f=yh(d),{clientX:h,clientY:p}=FI(d)?d.changedTouches[0]:d;a||(a=ug()),o.push({x:h,y:p,id:r.getId(f),timeOffset:ug()-a}),c(typeof DragEvent<"u"&&d instanceof DragEvent?Ge.Drag:d instanceof MouseEvent?Ge.MouseMove:Ge.TouchMove)}),i,{trailing:!1})),u=[ur("mousemove",l,n),ur("touchmove",l,n),ur("drag",l,n)];return Je(()=>{u.forEach(d=>d())})}function ate({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let l=null;const u=d=>f=>{const h=yh(f);if(Di(h,r,i,s,!0))return;let p=null,m=d;if("pointerType"in f){switch(f.pointerType){case"mouse":p=js.Mouse;break;case"touch":p=js.Touch;break;case"pen":p=js.Pen;break}p===js.Touch?er[d]===er.MouseDown?m="TouchStart":er[d]===er.MouseUp&&(m="TouchEnd"):js.Pen}else FI(f)&&(p=js.Touch);p!==null?(l=p,(m.startsWith("Touch")&&p===js.Touch||m.startsWith("Mouse")&&p===js.Mouse)&&(p=null)):er[d]===er.Click&&(p=l,l=null);const y=FI(f)?f.changedTouches[0]:f;if(!y)return;const g=n.getId(h),{clientX:v,clientY:S}=y;Je(e)(Object.assign({type:er[m],id:g,x:v,y:S},p!==null&&{pointerType:p}))};return Object.keys(er).filter(d=>Number.isNaN(Number(d))&&!d.endsWith("_Departed")&&a[d]!==!1).forEach(d=>{let f=Tu(d);const h=u(d);if(window.PointerEvent)switch(er[d]){case er.MouseDown:case er.MouseUp:f=f.replace("mouse","pointer");break;case er.TouchStart:case er.TouchEnd:return}c.push(ur(f,h,t))}),Je(()=>{c.forEach(d=>d())})}function YL({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,sampling:o}){const a=Je(Wf(Je(c=>{const l=yh(c);if(!l||Di(l,r,i,s,!0))return;const u=n.getId(l);if(l===t&&t.defaultView){const d=VL(t.defaultView);e({id:u,x:d.left,y:d.top})}else e({id:u,x:l.scrollLeft,y:l.scrollTop})}),o.scroll||100));return ur("scroll",a,t)}function cte({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const i=Je(Wf(Je(()=>{const s=GL(),o=WL();(n!==s||r!==o)&&(e({width:Number(o),height:Number(s)}),n=s,r=o)}),200));return ur("resize",i,t)}const lte=["INPUT","TEXTAREA","SELECT"],NT=new WeakMap;function ute({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:f,unmaskTextClass:h,maskTextSelector:p,unmaskTextSelector:m}){function y(A){let _=yh(A);const x=A.isTrusted,P=_&&BI(_.tagName);if(P==="OPTION"&&(_=_.parentElement),!_||!P||lte.indexOf(P)<0||Di(_,r,i,s,!0))return;const D=_;if(D.classList.contains(o)||a&&D.matches(a))return;const B=bw(_);let V=cg(D,P,B),G=!1;const Z=Cv({maskInputOptions:c,tagName:P,type:B}),z=_u(_,f,p,h,m,Z);(B==="radio"||B==="checkbox")&&(G=_.checked),V=Vf({isMasked:z,element:_,value:V,maskInputFn:l}),g(_,d?{text:V,isChecked:G,userTriggered:x}:{text:V,isChecked:G});const te=_.name;B==="radio"&&te&&G&&t.querySelectorAll(`input[type="radio"][name="${te}"]`).forEach(j=>{if(j!==_){const K=Vf({isMasked:z,element:j,value:cg(j,P,B),maskInputFn:l});g(j,d?{text:K,isChecked:!G,userTriggered:!1}:{text:K,isChecked:!G})}})}function g(A,_){const x=NT.get(A);if(!x||x.text!==_.text||x.isChecked!==_.isChecked){NT.set(A,_);const P=n.getId(A);Je(e)(Object.assign(Object.assign({},_),{id:P}))}}const S=(u.input==="last"?["change"]:["input","change"]).map(A=>ur(A,Je(y),t)),E=t.defaultView;if(!E)return()=>{S.forEach(A=>A())};const k=E.Object.getOwnPropertyDescriptor(E.HTMLInputElement.prototype,"value"),b=[[E.HTMLInputElement.prototype,"value"],[E.HTMLInputElement.prototype,"checked"],[E.HTMLSelectElement.prototype,"value"],[E.HTMLTextAreaElement.prototype,"value"],[E.HTMLSelectElement.prototype,"selectedIndex"],[E.HTMLOptionElement.prototype,"selected"]];return k&&k.set&&S.push(...b.map(A=>UL(A[0],A[1],{set(){Je(y)({target:this,isTrusted:!1})}},!1,E))),Je(()=>{S.forEach(A=>A())})}function dg(e){const t=[];function n(r,i){if(ap("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ap("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ap("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ap("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(o)}return i}return n(e,t)}function oa(e,t,n){let r,i;return e?(e.ownerNode?r=t.getId(e.ownerNode):i=n.getId(e),{styleId:i,id:r}):{}}function dte({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Je((u,d,f)=>{const[h,p]=f,{id:m,styleId:y}=oa(d,t,n.styleMirror);return(m&&m!==-1||y&&y!==-1)&&e({id:m,styleId:y,adds:[{rule:h,index:p}]}),u.apply(d,f)})});const s=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(s,{apply:Je((u,d,f)=>{const[h]=f,{id:p,styleId:m}=oa(d,t,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,removes:[{index:h}]}),u.apply(d,f)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Je((u,d,f)=>{const[h]=f,{id:p,styleId:m}=oa(d,t,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,replace:h}),u.apply(d,f)})}));let a;r.CSSStyleSheet.prototype.replaceSync&&(a=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Je((u,d,f)=>{const[h]=f,{id:p,styleId:m}=oa(d,t,n.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,replaceSync:h}),u.apply(d,f)})}));const c={};cp("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(cp("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),cp("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),cp("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const l={};return Object.entries(c).forEach(([u,d])=>{l[u]={insertRule:d.prototype.insertRule,deleteRule:d.prototype.deleteRule},d.prototype.insertRule=new Proxy(l[u].insertRule,{apply:Je((f,h,p)=>{const[m,y]=p,{id:g,styleId:v}=oa(h.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||v&&v!==-1)&&e({id:g,styleId:v,adds:[{rule:m,index:[...dg(h),y||0]}]}),f.apply(h,p)})}),d.prototype.deleteRule=new Proxy(l[u].deleteRule,{apply:Je((f,h,p)=>{const[m]=p,{id:y,styleId:g}=oa(h.parentStyleSheet,t,n.styleMirror);return(y&&y!==-1||g&&g!==-1)&&e({id:y,styleId:g,removes:[{index:[...dg(h),m]}]}),f.apply(h,p)})})}),Je(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=s,o&&(r.CSSStyleSheet.prototype.replace=o),a&&(r.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([u,d])=>{d.prototype.insertRule=l[u].insertRule,d.prototype.deleteRule=l[u].deleteRule})})}function qL({mirror:e,stylesheetManager:t},n){var r,i,s;let o=null;n.nodeName==="#document"?o=e.getId(n):o=e.getId(n.host);const a=n.nodeName==="#document"?(r=n.defaultView)===null||r===void 0?void 0:r.Document:(s=(i=n.ownerDocument)===null||i===void 0?void 0:i.defaultView)===null||s===void 0?void 0:s.ShadowRoot,c=a!=null&&a.prototype?Object.getOwnPropertyDescriptor(a==null?void 0:a.prototype,"adoptedStyleSheets"):void 0;return o===null||o===-1||!a||!c?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get(){var l;return(l=c.get)===null||l===void 0?void 0:l.call(this)},set(l){var u;const d=(u=c.set)===null||u===void 0?void 0:u.call(this,l);if(o!==null&&o!==-1)try{t.adoptStyleSheets(l,o)}catch{}return d}}),Je(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:c.configurable,enumerable:c.enumerable,get:c.get,set:c.set})}))}function fte({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:i}){const s=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(s,{apply:Je((a,c,l)=>{var u;const[d,f,h]=l;if(n.has(d))return s.apply(c,[d,f,h]);const{id:p,styleId:m}=oa((u=c.parentRule)===null||u===void 0?void 0:u.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||m&&m!==-1)&&e({id:p,styleId:m,set:{property:d,value:f,priority:h},index:dg(c.parentRule)}),a.apply(c,l)})});const o=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Je((a,c,l)=>{var u;const[d]=l;if(n.has(d))return o.apply(c,[d]);const{id:f,styleId:h}=oa((u=c.parentRule)===null||u===void 0?void 0:u.parentStyleSheet,t,r.styleMirror);return(f&&f!==-1||h&&h!==-1)&&e({id:f,styleId:h,remove:{property:d},index:dg(c.parentRule)}),a.apply(c,l)})}),Je(()=>{i.CSSStyleDeclaration.prototype.setProperty=s,i.CSSStyleDeclaration.prototype.removeProperty=o})}function hte({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:i,sampling:s,doc:o}){const a=Je(l=>Wf(Je(u=>{const d=yh(u);if(!d||Di(d,t,n,r,!0))return;const{currentTime:f,volume:h,muted:p,playbackRate:m}=d;e({type:l,id:i.getId(d),currentTime:f,volume:h,muted:p,playbackRate:m})}),s.media||500)),c=[ur("play",a(0),o),ur("pause",a(1),o),ur("seeked",a(2),o),ur("volumechange",a(3),o),ur("ratechange",a(4),o)];return Je(()=>{c.forEach(l=>l())})}function pte({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],i=new WeakMap,s=n.FontFace;n.FontFace=function(c,l,u){const d=new s(c,l,u);return i.set(d,{family:c,buffer:typeof l!="string",descriptors:u,fontSource:typeof l=="string"?l:JSON.stringify(Array.from(new Uint8Array(l)))}),d};const o=Aw(t.fonts,"add",function(a){return function(c){return setTimeout(Je(()=>{const l=i.get(c);l&&(e(l),i.delete(c))}),0),a.apply(this,[c])}});return r.push(()=>{n.FontFace=s}),r.push(o),Je(()=>{r.forEach(a=>a())})}function mte(e){const{doc:t,mirror:n,blockClass:r,blockSelector:i,unblockSelector:s,selectionCb:o}=e;let a=!0;const c=Je(()=>{const l=t.getSelection();if(!l||a&&(l!=null&&l.isCollapsed))return;a=l.isCollapsed||!1;const u=[],d=l.rangeCount||0;for(let f=0;f<d;f++){const h=l.getRangeAt(f),{startContainer:p,startOffset:m,endContainer:y,endOffset:g}=h;Di(p,r,i,s,!0)||Di(y,r,i,s,!0)||u.push({start:n.getId(p),startOffset:m,end:n.getId(y),endOffset:g})}o({ranges:u})});return c(),ur("selectionchange",c)}function gte({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:Aw(n.customElements,"define",function(i){return function(s,o,a){try{t({define:{name:s}})}catch{}return i.apply(this,[s,o,a])}})}function vte(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const r=JL(e,e.doc),i=ote(e),s=ate(e),o=YL(e),a=cte(e,{win:n}),c=ute(e),l=hte(e),u=dte(e,{win:n}),d=qL(e,e.doc),f=fte(e,{win:n}),h=e.collectFonts?pte(e):()=>{},p=mte(e),m=gte(e),y=[];for(const g of e.plugins)y.push(g.observer(g.callback,n,g.options));return Je(()=>{Dl.forEach(g=>g.reset()),r.disconnect(),i(),s(),o(),a(),c(),l(),u(),d(),f(),h(),p(),m(),y.forEach(g=>g())})}function ap(e){return typeof window[e]<"u"}function cp(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class GI{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,i){const s=r||this.getIdToRemoteIdMap(t),o=i||this.getRemoteIdToIdMap(t);let a=s.get(n);return a||(a=this.generateIdFn(),s.set(n,a),o.set(a,n)),a}getIds(t,n){const r=this.getIdToRemoteIdMap(t),i=this.getRemoteIdToIdMap(t);return n.map(s=>this.getId(t,s,r,i))}getRemoteId(t,n,r){const i=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const s=i.get(n);return s||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(i=>this.getRemoteId(t,i,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class yte{constructor(){this.crossOriginIframeMirror=new GI(ww),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class Cte{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new GI(ww),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new GI(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){var r;this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(r=this.loadListener)===null||r===void 0||r.call(this,t),t.contentDocument&&t.contentDocument.adoptedStyleSheets&&t.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(t.contentDocument.adoptedStyleSheets,this.mirror.getId(t.contentDocument))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const i=this.crossOriginIframeMap.get(t.source);if(!i)return;const s=this.transformCrossOriginEvent(i,n.data.event);s&&this.wrappedEmit(s,n.data.isCheckout)}transformCrossOriginEvent(t,n){var r;switch(n.type){case Ve.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const i=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,i),this.patchRootIdOnNode(n.data.node,i),{timestamp:n.timestamp,type:Ve.IncrementalSnapshot,data:{source:Ge.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ve.Meta:case Ve.Load:case Ve.DomContentLoaded:return!1;case Ve.Plugin:return n;case Ve.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case Ve.IncrementalSnapshot:switch(n.data.source){case Ge.Mutation:return n.data.adds.forEach(i=>{this.replaceIds(i,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,t);const s=this.crossOriginIframeRootIdMap.get(t);s&&this.patchRootIdOnNode(i.node,s)}),n.data.removes.forEach(i=>{this.replaceIds(i,t,["parentId","id"])}),n.data.attributes.forEach(i=>{this.replaceIds(i,t,["id"])}),n.data.texts.forEach(i=>{this.replaceIds(i,t,["id"])}),n;case Ge.Drag:case Ge.TouchMove:case Ge.MouseMove:return n.data.positions.forEach(i=>{this.replaceIds(i,t,["id"])}),n;case Ge.ViewportResize:return!1;case Ge.MediaInteraction:case Ge.MouseInteraction:case Ge.Scroll:case Ge.CanvasMutation:case Ge.Input:return this.replaceIds(n.data,t,["id"]),n;case Ge.StyleSheetRule:case Ge.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case Ge.Font:return n;case Ge.Selection:return n.data.ranges.forEach(i=>{this.replaceIds(i,t,["start","end"])}),n;case Ge.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),(r=n.data.styles)===null||r===void 0||r.forEach(i=>{this.replaceStyleIds(i,t,["styleId"])}),n}}return!1}replace(t,n,r,i){for(const s of i)!Array.isArray(n[s])&&typeof n[s]!="number"||(Array.isArray(n[s])?n[s]=t.getIds(r,n[s]):n[s]=t.getId(r,n[s]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==dn.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class Ite{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class Ste{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!Qd(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t);const r=JL(Object.assign(Object.assign({},this.bypassOptions),{doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(YL(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:t,mirror:this.mirror}))),setTimeout(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(qL({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){!t.contentWindow||!t.contentDocument||this.patchAttachShadow(t.contentWindow.Element,t.contentDocument)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(Aw(t.prototype,"attachShadow",function(i){return function(s){const o=i.call(this,s);return this.shadowRoot&&zL(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class bte{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}}class wte{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new Qee,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},i=[];for(const s of t){let o;this.styleMirror.has(s)?o=this.styleMirror.getId(s):(o=this.styleMirror.add(s),i.push({styleId:o,rules:Array.from(s.rules||CSSRule,(a,c)=>({rule:OL(a),index:c}))})),r.styleIds.push(o)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class kte{constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(i=>i!==n)}add(t,n){this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}function en(e){const t=e;return t.timestamp=ug(),t}let WI,fg;const Ii=Tee();function Oa(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:s=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:f=null,unmaskTextSelector:h=null,inlineStylesheet:p=!0,maskAllInputs:m,maskInputOptions:y,slimDOMOptions:g,maskAttributeFn:v,maskInputFn:S,maskTextFn:E,packFn:k,sampling:b={},dataURLOptions:A={},mousemoveWait:_,recordCanvas:x=!1,recordCrossOriginIframes:P=!1,recordAfter:D=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:B=!1,collectFonts:V=!1,inlineImages:G=!1,plugins:Z,keepIframeSrcFn:z=()=>!1,ignoreCSSAttributes:te=new Set([]),errorHandler:j,onMutation:K,getCanvasManager:ie}=e;ite(j);const X=P?window.parent===window:!0;let se=!1;if(!X)try{window.parent.document&&(se=!1)}catch{se=!0}if(X&&!t)throw new Error("emit function is required");_!==void 0&&b.mousemove===void 0&&(b.mousemove=_),Ii.reset();const ke=m===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:y!==void 0?y:{},Ae=g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:g==="all",headMetaDescKeywords:g==="all"}:g||{};qee();let ge,Te=0;const He=ue=>{for(const Ue of Z||[])Ue.eventProcessor&&(ue=Ue.eventProcessor(ue));return k&&!se&&(ue=k(ue)),ue},ce=(ue,Ue)=>{var xe;if(!((xe=Dl[0])===null||xe===void 0)&&xe.isFrozen()&&ue.type!==Ve.FullSnapshot&&!(ue.type===Ve.IncrementalSnapshot&&ue.data.source===Ge.Mutation)&&Dl.forEach(je=>je.unfreeze()),X)t==null||t(He(ue),Ue);else if(se){const je={type:"rrweb",event:He(ue),origin:window.location.origin,isCheckout:Ue};window.parent.postMessage(je,"*")}if(ue.type===Ve.FullSnapshot)ge=ue,Te=0;else if(ue.type===Ve.IncrementalSnapshot){if(ue.data.source===Ge.Mutation&&ue.data.isAttachIframe)return;Te++;const je=r&&Te>=r,zt=n&&ue.timestamp-ge.timestamp>n;(je||zt)&&Qe(!0)}};WI=ce;const Gt=ue=>{ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.Mutation},ue)}))},gn=ue=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.Scroll},ue)})),Nt=ue=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.CanvasMutation},ue)})),Tn=ue=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.AdoptedStyleSheet},ue)})),rn=new wte({mutationCb:Gt,adoptedStyleSheetCb:Tn}),_n=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new yte:new Cte({mirror:Ii,mutationCb:Gt,stylesheetManager:rn,recordCrossOriginIframes:P,wrappedEmit:ce});for(const ue of Z||[])ue.getMirror&&ue.getMirror({nodeMirror:Ii,crossOriginIframeMirror:_n.crossOriginIframeMirror,crossOriginIframeStyleMirror:_n.crossOriginIframeStyleMirror});const le=new kte,Se=Tte(ie,{recordCanvas:x,blockClass:i,blockSelector:s,unblockSelector:o,sampling:b.canvas,dataURLOptions:A}),nt=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new Ite:new Ste({mutationCb:Gt,scrollCb:gn,bypassOptions:{onMutation:K,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:ke,dataURLOptions:A,maskAttributeFn:v,maskTextFn:E,maskInputFn:S,recordCanvas:x,inlineImages:G,sampling:b,slimDOMOptions:Ae,iframeManager:_n,stylesheetManager:rn,canvasManager:Se,keepIframeSrcFn:z,processedNodeManager:le},mirror:Ii}),Qe=(ue=!1)=>{ce(en({type:Ve.Meta,data:{href:window.location.href,width:WL(),height:GL()}}),ue),rn.reset(),nt.init(),Dl.forEach(xe=>xe.lock());const Ue=Jee(document,{mirror:Ii,blockClass:i,blockSelector:s,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,inlineStylesheet:p,maskAllInputs:ke,maskAttributeFn:v,maskInputFn:S,maskTextFn:E,slimDOM:Ae,dataURLOptions:A,recordCanvas:x,inlineImages:G,onSerialize:xe=>{jL(xe,Ii)&&_n.addIframe(xe),$L(xe,Ii)&&rn.trackLinkElement(xe),UI(xe)&&nt.addShadowRoot(xe.shadowRoot,document)},onIframeLoad:(xe,je)=>{_n.attachIframe(xe,je),nt.observeAttachShadow(xe)},onStylesheetLoad:(xe,je)=>{rn.attachLinkElement(xe,je)},keepIframeSrcFn:z});if(!Ue)return console.warn("Failed to snapshot the document");ce(en({type:Ve.FullSnapshot,data:{node:Ue,initialOffset:VL(window)}})),Dl.forEach(xe=>xe.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&rn.adoptStyleSheets(document.adoptedStyleSheets,Ii.getId(document))};fg=Qe;try{const ue=[],Ue=je=>{var zt;return Je(vte)({onMutation:K,mutationCb:Gt,mousemoveCb:(Be,Qt)=>ce(en({type:Ve.IncrementalSnapshot,data:{source:Qt,positions:Be}})),mouseInteractionCb:Be=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.MouseInteraction},Be)})),scrollCb:gn,viewportResizeCb:Be=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.ViewportResize},Be)})),inputCb:Be=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.Input},Be)})),mediaInteractionCb:Be=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.MediaInteraction},Be)})),styleSheetRuleCb:Be=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.StyleSheetRule},Be)})),styleDeclarationCb:Be=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.StyleDeclaration},Be)})),canvasMutationCb:Nt,fontCb:Be=>ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.Font},Be)})),selectionCb:Be=>{ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.Selection},Be)}))},customElementCb:Be=>{ce(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.CustomElement},Be)}))},blockClass:i,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:f,unmaskTextSelector:h,maskInputOptions:ke,inlineStylesheet:p,sampling:b,recordCanvas:x,inlineImages:G,userTriggeredOnInput:B,collectFonts:V,doc:je,maskAttributeFn:v,maskInputFn:S,maskTextFn:E,keepIframeSrcFn:z,blockSelector:s,unblockSelector:o,slimDOMOptions:Ae,dataURLOptions:A,mirror:Ii,iframeManager:_n,stylesheetManager:rn,shadowDomManager:nt,processedNodeManager:le,canvasManager:Se,ignoreCSSAttributes:te,plugins:((zt=Z==null?void 0:Z.filter(Be=>Be.observer))===null||zt===void 0?void 0:zt.map(Be=>({observer:Be.observer,options:Be.options,callback:Qt=>ce(en({type:Ve.Plugin,data:{plugin:Be.name,payload:Qt}}))})))||[]},{})};_n.addLoadListener(je=>{try{ue.push(Ue(je.contentDocument))}catch(zt){console.warn(zt)}});const xe=()=>{Qe(),ue.push(Ue(document))};return document.readyState==="interactive"||document.readyState==="complete"?xe():(ue.push(ur("DOMContentLoaded",()=>{ce(en({type:Ve.DomContentLoaded,data:{}})),D==="DOMContentLoaded"&&xe()})),ue.push(ur("load",()=>{ce(en({type:Ve.Load,data:{}})),D==="load"&&xe()},window))),()=>{ue.forEach(je=>je()),le.destroy(),fg=void 0,ste()}}catch(ue){console.warn(ue)}}function Ate(e){if(!fg)throw new Error("please take full snapshot after start recording");fg(e)}function Ete(e){WI&&WI(e)}Oa.mirror=Ii;Oa.takeFullSnapshot=Ate;function Tte(e,t){return e?e(Object.assign(Object.assign({},t),{mirror:Ii,win:window,mutationCb:n=>Ete(en({type:Ve.IncrementalSnapshot,data:Object.assign({source:Ge.CanvasMutation},n)}))})):new bte}const _te=3,Rte=5;function Ew(e){return e>9999999999?e:e*1e3}function Qy(e){return e>9999999999?e/1e3:e}function Ch(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:Ve.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:ls(t,10,1e3)}}),t.category==="console")))}const xte="button,a";function QL(e){return e.closest(xte)||e}function e2(e){const t=t2(e);return!t||!(t instanceof Element)?t:QL(t)}function t2(e){return Nte(e)?e.target:e}function Nte(e){return typeof e=="object"&&!!e&&"target"in e}let aa;function Pte(e){return aa||(aa=[],Mte()),aa.push(e),()=>{const t=aa?aa.indexOf(e):-1;t>-1&&aa.splice(t,1)}}function Mte(){kn(Ct,"open",function(e){return function(...t){if(aa)try{aa.forEach(n=>n())}catch{}return e.apply(Ct,t)}})}function Dte(e,t,n){e.handleClick(t,n)}class Ote{constructor(t,n,r=Ch){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=Pte(()=>{this._lastMutation=PT()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(Bte(n,this._ignoreSelector)||!Fte(t))return;const r={timestamp:Qy(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(i=>i.node===r.node&&Math.abs(i.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=Qy(t)}registerScroll(t=Date.now()){this._lastScroll=Qy(t)}registerClick(t){const n=QL(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=PT();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const i=this._clicks.indexOf(r);i>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(i,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scollTimeout,i=t.mutationAfter&&t.mutationAfter<=this._threshold,s=!r&&!i,{clickCount:o,clickBreadcrumb:a}=t;if(s){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,l=c<this._timeout*1e3?"mutation":"timeout",u={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.slowClickDetected",data:{...a.data,url:Ct.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:l,clickCount:o||1}};this._addBreadcrumbEvent(n,u);return}if(o>1){const c={type:"default",message:a.message,timestamp:a.timestamp,category:"ui.multiClick",data:{...a.data,url:Ct.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const Lte=["A","BUTTON","INPUT"];function Bte(e,t){return!!(!Lte.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function Fte(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function PT(){return Date.now()/1e3}function Ute(e,t){try{if(!Vte(t))return;const{source:n}=t.data;if(n===Ge.Mutation&&e.registerMutation(t.timestamp),n===Ge.Scroll&&e.registerScroll(t.timestamp),Gte(t)){const{type:r,id:i}=t.data,s=Oa.mirror.getNode(i);s instanceof HTMLElement&&r===er.Click&&e.registerClick(s)}}catch{}}function Vte(e){return e.type===_te}function Gte(e){return e.data.source===Ge.MouseInteraction}function Ns(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var hg;(function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"})(hg||(hg={}));const Wte=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function Hte(e){const t={};for(const n in e)if(Wte.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const jte=e=>t=>{if(!e.isEnabled())return;const n=$te(t);if(!n)return;const r=t.name==="click",i=r?t.event:void 0;r&&e.clickDetector&&i&&i.target&&!i.altKey&&!i.metaKey&&!i.ctrlKey&&!i.shiftKey&&Dte(e.clickDetector,n,e2(t.event)),Ch(e,n)};function n2(e,t){const n=Oa.mirror.getId(e),r=n&&Oa.mirror.getNode(n),i=r&&Oa.mirror.getMeta(r),s=i&&zte(i)?i:null;return{message:t,data:s?{nodeId:n,node:{id:n,tagName:s.tagName,textContent:Array.from(s.childNodes).map(o=>o.type===hg.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:Hte(s.attributes)}}:{}}}function $te(e){const{target:t,message:n}=Zte(e);return Ns({category:`ui.${e.name}`,...n2(t,n)})}function Zte(e){const t=e.name==="click";let n,r=null;try{r=t?e2(e.event):t2(e.event),n=Vc(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function zte(e){return e.type===hg.Element}function Xte(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=Kte(t);n&&Ch(e,n)}function Kte(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:s,target:o}=e;if(!o||Jte(o)||!s)return null;const a=t||r||i,c=s.length===1;if(!a&&c)return null;const l=Vc(o,{maxStringLength:200})||"<unknown>",u=n2(o,l);return Ns({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:i,key:s}})}function Jte(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const MT={resource:tne,paint:Qte,navigation:ene};function Yte(e){return e.map(qte).filter(Boolean)}function qte(e){return MT[e.entryType]?MT[e.entryType](e):null}function Ru(e){return((Ki||Ct.performance.timeOrigin)+e)/1e3}function Qte(e){const{duration:t,entryType:n,name:r,startTime:i}=e,s=Ru(i);return{type:n,name:r,start:s,end:s+t,data:void 0}}function ene(e){const{entryType:t,name:n,decodedBodySize:r,duration:i,domComplete:s,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:f,startTime:h,transferSize:p,type:m}=e;return i===0?null:{type:`${t}.${m}`,start:Ru(h),end:Ru(s),name:n,data:{size:p,decodedBodySize:r,encodedBodySize:o,duration:i,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:s,redirectCount:f}}}function tne(e){const{entryType:t,initiatorType:n,name:r,responseEnd:i,startTime:s,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:l}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:Ru(s),end:Ru(i),name:r,data:{size:l,statusCode:c,decodedBodySize:o,encodedBodySize:a}}}function nne(e){const t=e.entries,n=t[t.length-1],r=n?n.element:void 0,i=e.value,s=Ru(i);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:s,end:s,data:{value:i,size:i,nodeId:r?Oa.mirror.getId(r):void 0}}}function rne(e){function t(i){e.performanceEntries.includes(i)||e.performanceEntries.push(i)}function n({entries:i}){i.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(i=>{r.push(vv(i,n))}),r.push(NL(({metric:i})=>{e.replayPerformanceEntries.push(nne(i))})),()=>{r.forEach(i=>i())}}const ht=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ine='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function sne(){const e=new Blob([ine]);return URL.createObjectURL(e)}function sr(e,t){ht&&(J.info(e),t&&r2(e))}function tu(e,t){ht&&(J.info(e),t&&setTimeout(()=>{r2(e)},0))}function r2(e){ja({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class Tw extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Sw}.`)}}class i2{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Sw)throw new Tw;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?Ew(t):null}}class one{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){sr("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((i,s)=>{const o=({data:a})=>{const c=a;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){ht&&J.error("[Replay]",c.response),s(new Error("Error in compression worker"));return}i(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class ane{constructor(t){this._worker=new one(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=Ew(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Sw?Promise.reject(new Tw):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{ht&&J.warn('[Replay] Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class cne{constructor(t){this._fallback=new i2,this._compression=new ane(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch{sr("[Replay] Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n}=this._fallback,r=[];for(const i of t)r.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._used=this._compression;try{await Promise.all(r)}catch(i){ht&&J.warn("[Replay] Failed to add events when switching buffers.",i)}}}function lne({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=une(t);if(n)return n}return sr("[Replay] Using simple buffer"),new i2}function une(e){try{const t=e||dne();if(!t)return;sr(`[Replay] Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new cne(n)}catch{sr("[Replay] Failed to create compression worker")}}function dne(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?sne():""}function _w(){try{return"sessionStorage"in Ct&&!!Ct.sessionStorage}catch{return!1}}function fne(e){hne(),e.session=void 0}function hne(){if(_w())try{Ct.sessionStorage.removeItem(Cw)}catch{}}function s2(e){return e===void 0?!1:Math.random()<e}function o2(e){const t=Date.now(),n=e.id||Jn(),r=e.started||t,i=e.lastActivity||t,s=e.segmentId||0,o=e.sampled,a=e.previousSessionId;return{id:n,started:r,lastActivity:i,segmentId:s,sampled:o,previousSessionId:a}}function Rw(e){if(_w())try{Ct.sessionStorage.setItem(Cw,JSON.stringify(e))}catch{}}function pne(e,t){return s2(e)?"session":t?"buffer":!1}function DT({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const i=pne(e,t),s=o2({sampled:i,previousSessionId:r});return n&&Rw(s),s}function mne(e){if(!_w())return null;try{const t=Ct.sessionStorage.getItem(Cw);if(!t)return null;const n=JSON.parse(t);return tu("[Replay] Loading existing session",e),o2(n)}catch{return null}}function HI(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function a2(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return HI(e.started,t,r)||HI(e.lastActivity,n,r)}function c2(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!a2(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function e0({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:r},i){const s=i.stickySession&&mne(e);return s?c2(s,{sessionIdleExpire:t,maxReplayDuration:n})?(tu("[Replay] Session in sessionStorage is expired, creating new one..."),DT(i,{previousSessionId:s.id})):s:(tu("[Replay] Creating new session",e),DT(i,{previousSessionId:r}))}function gne(e){return e.type===Ve.Custom}function xw(e,t,n){return u2(e,t)?(l2(e,t,n),!0):!1}function vne(e,t,n){return u2(e,t)?l2(e,t,n):Promise.resolve(null)}async function l2(e,t,n){if(!e.eventBuffer)return null;try{n&&e.recordingMode==="buffer"&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const r=e.getOptions(),i=yne(t,r.beforeAddRecordingEvent);return i?await e.eventBuffer.addEvent(i):void 0}catch(r){const i=r&&r instanceof Tw?"addEventSizeExceeded":"addEvent";ht&&J.error(r),await e.stop({reason:i});const s=Vt();s&&s.recordDroppedEvent("internal_sdk_error","replay")}}function u2(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=Ew(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(sr(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1):!0}function yne(e,t){try{if(typeof t=="function"&&gne(e))return t(e)}catch(n){return ht&&J.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}function Nw(e){return!e.type}function jI(e){return e.type==="transaction"}function Cne(e){return e.type==="replay_event"}function OT(e){return e.type==="feedback"}function d2(e){const t=bne();return(n,r)=>{if(!e.isEnabled()||!Nw(n)&&!jI(n))return;const i=r&&r.statusCode;if(!(t&&(!i||i<200||i>=300))){if(jI(n)){Ine(e,n);return}Sne(e,n)}}}function Ine(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function Sne(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||setTimeout(()=>{e.sendBufferedReplayOrFlush()})}function bne(){const e=Vt();if(!e)return!1;const t=e.getTransport();return t&&t.send.__sentry__baseTransport__||!1}function wne(e){return t=>{!e.isEnabled()||!Nw(t)||kne(e,t)}}function kne(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if(typeof n=="string"&&(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Ns({category:"replay.hydrate-error"});Ch(e,r)}}function Ane(e,t){return e.type||!e.exception||!e.exception.values||!e.exception.values.length?!1:!!(t.originalException&&t.originalException.__rrweb__)}function Ene(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:Ve.Custom,timestamp:t.timestamp*1e3,data:{timestamp:t.timestamp,tag:"breadcrumb",payload:{category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function Tne(e,t){return e.recordingMode!=="buffer"||t.message===Iw||!t.exception||t.type?!1:s2(e.getOptions().errorSampleRate)}function _ne(e,t=!1){const n=t?d2(e):void 0;return Object.assign((r,i)=>e.isEnabled()?Cne(r)?(delete r.breadcrumbs,r):!Nw(r)&&!jI(r)&&!OT(r)||!e.checkAndHandleExpiredSession()?r:OT(r)?(e.flush(),r.contexts.feedback.replay_id=e.getSessionId(),Ene(e,r),r):Ane(r,i)&&!e.getOptions()._experiments.captureExceptions?(ht&&J.log("[Replay] Ignoring error from rrweb internals",r),null):((Tne(e,r)||e.recordingMode==="session")&&(r.tags={...r.tags,replayId:e.getSessionId()}),n&&n(r,{statusCode:200}),r):r,{id:"Replay"})}function Iv(e,t){return t.map(({type:n,start:r,end:i,name:s,data:o})=>{const a=e.throttledAddEvent({type:Ve.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:s,startTimestamp:r,endTimestamp:i,data:o}}});return typeof a=="string"?Promise.resolve(null):a})}function Rne(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function xne(e){return t=>{if(!e.isEnabled())return;const n=Rne(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Iv(e,[n]),!1)))}}function Nne(e,t){return ht&&e.getOptions()._experiments.traceInternals?!1:iq(t,Vt())}function Sv(e,t){e.isEnabled()&&t!==null&&(Nne(e,t.name)||e.addUpdate(()=>(Iv(e,[t]),!0)))}function Pne(e){const{startTimestamp:t,endTimestamp:n,fetchData:r,response:i}=e;if(!n)return null;const{method:s,url:o}=r;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:s,statusCode:i?i.status:void 0}}}function Mne(e){return t=>{if(!e.isEnabled())return;const n=Pne(t);Sv(e,n)}}function Dne(e){const{startTimestamp:t,endTimestamp:n,xhr:r}=e,i=r[wa];if(!t||!n||!i)return null;const{method:s,url:o,status_code:a}=i;return o===void 0?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:s,statusCode:a}}}function One(e){return t=>{if(!e.isEnabled())return;const n=Dne(t);Sv(e,n)}}function bv(e,t){if(e)try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=m2(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function f2(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function h2(e){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[m2(e)];if(!e)return[void 0]}catch{return ht&&J.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return ht&&J.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function pg(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function p2(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:i,method:s,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:i,data:Os({method:s,statusCode:o,request:a,response:c})}}function Hf(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function La(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:i,warnings:s}=Lne(n);return r.body=i,s&&s.length>0&&(r._meta={warnings:s}),r}function $I(e,t){return Object.keys(e).reduce((n,r)=>{const i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=e[r]),n},{})}function m2(e){return new URLSearchParams(e).toString()}function Lne(e){if(!e||typeof e!="string")return{body:e};const t=e.length>ST,n=Bne(e);if(t){const r=e.slice(0,ST);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function Bne(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function mg(e,t){const n=Fne(e);return Xu(n,t)}function Fne(e,t=Ct.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Ct.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function Une(e,t,n){try{const r=await Gne(e,t,n),i=p2("resource.fetch",r);Sv(n.replay,i)}catch(r){ht&&J.error("[Replay] Failed to capture fetch breadcrumb",r)}}function Vne(e,t,n){const{input:r,response:i}=t,s=r?g2(r):void 0,o=bv(s,n.textEncoder),a=i?f2(i.headers.get("content-length")):void 0;o!==void 0&&(e.data.request_body_size=o),a!==void 0&&(e.data.response_body_size=a)}async function Gne(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r}=t,{url:o,method:a,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=mg(o,n.networkDetailAllowUrls)&&!mg(o,n.networkDetailDenyUrls),f=d?Wne(n,t.input,l):Hf(l),h=await Hne(d,n,t.response,u);return{startTimestamp:i,endTimestamp:s,url:o,method:a,statusCode:c,request:f,response:h}}function Wne({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const i=n?Zne(n,t):{};if(!e)return La(i,r,void 0);const s=g2(n),[o,a]=h2(s),c=La(i,r,o);return a?pg(c,a):c}async function Hne(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:r},i,s){if(!e&&s!==void 0)return Hf(s);const o=i?v2(i.headers,r):{};if(!i||!t&&s!==void 0)return La(o,s,void 0);const[a,c]=await $ne(i),l=jne(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:s,captureDetails:e,headers:o});return c?pg(l,c):l}function jne(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:r,captureDetails:i,headers:s}){try{const o=e&&e.length&&r===void 0?bv(e,n):r;return i?t?La(s,o,e):La(s,o,void 0):Hf(o)}catch(o){return ht&&J.warn("[Replay] Failed to serialize response body",o),La(s,r,void 0)}}async function $ne(e){const t=zne(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await Xne(t)]}catch(n){return ht&&J.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}function g2(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function v2(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function Zne(e,t){return e.length===1&&typeof e[0]!="string"?LT(e[0],t):e.length===2?LT(e[1],t):{}}function LT(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?v2(n,t):Array.isArray(n)?{}:$I(n,t):{}}function zne(e){try{return e.clone()}catch(t){ht&&J.warn("[Replay] Failed to clone response body",t)}}function Xne(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);Kne(e).then(i=>t(i),i=>n(i)).finally(()=>clearTimeout(r))})}async function Kne(e){return await e.text()}async function Jne(e,t,n){try{const r=qne(e,t,n),i=p2("resource.xhr",r);Sv(n.replay,i)}catch(r){ht&&J.error("[Replay] Failed to capture xhr breadcrumb",r)}}function Yne(e,t,n){const{xhr:r,input:i}=t;if(!r)return;const s=bv(i,n.textEncoder),o=r.getResponseHeader("content-length")?f2(r.getResponseHeader("content-length")):nre(r.response,r.responseType,n.textEncoder);s!==void 0&&(e.data.request_body_size=s),o!==void 0&&(e.data.response_body_size=o)}function qne(e,t,n){const r=Date.now(),{startTimestamp:i=r,endTimestamp:s=r,input:o,xhr:a}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:f}=e.data;if(!c)return null;if(!a||!mg(c,n.networkDetailAllowUrls)||mg(c,n.networkDetailDenyUrls)){const b=Hf(d),A=Hf(f);return{startTimestamp:i,endTimestamp:s,url:c,method:l,statusCode:u,request:b,response:A}}const h=a[wa],p=h?$I(h.request_headers,n.networkRequestHeaders):{},m=$I(Qne(a),n.networkResponseHeaders),[y,g]=n.networkCaptureBodies?h2(o):[void 0],[v,S]=n.networkCaptureBodies?ere(a):[void 0],E=La(p,d,y),k=La(m,f,v);return{startTimestamp:i,endTimestamp:s,url:c,method:l,statusCode:u,request:g?pg(E,g):E,response:S?pg(k,S):k}}function Qne(e){const t=e.getAllResponseHeaders();return t?t.split(`\r
`).reduce((n,r)=>{const[i,s]=r.split(": ");return n[i.toLowerCase()]=s,n},{}):{}}function ere(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return tre(e.response,e.responseType)}catch(n){t.push(n)}return ht&&J.warn("[Replay] Failed to get xhr response body",...t),[void 0]}function tre(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch{return ht&&J.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return ht&&J.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function nre(e,t,n){try{const r=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return bv(r,n)}catch{return}}function rre(e){const t=Vt();try{const n=new TextEncoder,{networkDetailAllowUrls:r,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:r,networkDetailDenyUrls:i,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",(l,u)=>ire(c,l,u)):(nw(Mne(e)),rw(One(e)))}catch{}}function ire(e,t,n){if(t.data)try{sre(t)&&are(n)&&(Yne(t,n,e),Jne(t,n,e)),ore(t)&&cre(n)&&(Vne(t,n,e),Une(t,n,e))}catch{ht&&J.warn("Error when enriching network breadcrumb")}}function sre(e){return e.category==="xhr"}function ore(e){return e.category==="fetch"}function are(e){return e&&e.xhr}function cre(e){return e&&e.response}let BT=null;function lre(e){return!!e.category}const ure=e=>t=>{if(!e.isEnabled())return;const n=dre(t);n&&Ch(e,n)};function dre(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();return BT===t||!t||(BT=t,!lre(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))?null:t.category==="console"?fre(t):Ns(t)}function fre(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||t.length===0)return Ns(e);let n=!1;const r=t.map(i=>{if(!i)return i;if(typeof i=="string")return i.length>op?(n=!0,`${i.slice(0,op)}`):i;if(typeof i=="object")try{const s=ls(i,7);return JSON.stringify(s).length>op?(n=!0,`${JSON.stringify(s,null,2).slice(0,op)}`):s}catch{}return i});return Ns({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function hre(e){const t=vh(),n=Vt();t.addScopeListener(ure(e)),FO(jte(e)),uv(xne(e)),rre(e);const r=_ne(e,!FT(n));n&&n.addEventProcessor?n.addEventProcessor(r):VY(r),FT(n)&&(n.on("beforeSendEvent",wne(e)),n.on("afterSendEvent",d2(e)),n.on("createDsc",i=>{const s=e.getSessionId();s&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(i.replay_id=s)}),n.on("startTransaction",i=>{e.lastTransaction=i}),n.on("finishTransaction",i=>{e.lastTransaction=i}),n.on("beforeSendFeedback",(i,s)=>{const o=e.getSessionId();s&&s.includeReplay&&e.isEnabled()&&o&&(e.flush(),i.contexts&&i.contexts.feedback&&(i.contexts.feedback.replay_id=o))}))}function FT(e){return!!(e&&e.on)}async function pre(e){try{return Promise.all(Iv(e,[mre(Ct.performance.memory)]))}catch{return[]}}function mre(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,i=Date.now()/1e3;return{type:"memory",name:"memory",start:i,end:i,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function gre(e,t,n){let r,i,s;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),r=e(),r}function c(){i!==void 0&&clearTimeout(i),s!==void 0&&clearTimeout(s),i=s=void 0}function l(){return i!==void 0||s!==void 0?a():r}function u(){return i&&clearTimeout(i),i=setTimeout(a,t),o&&s===void 0&&(s=setTimeout(a,o)),r}return u.cancel=c,u.flush=l,u}function vre(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){ht&&J.warn("[Replay] Received replay event after session expired.");return}const i=r||!t;t=!0,e.clickDetector&&Ute(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&i&&e.setInitialState(),!xw(e,n,i))return!0;if(!i)return!1;if(Cre(e,i),e.session&&e.session.previousSessionId)return!0;if(e.recordingMode==="buffer"&&e.session&&e.eventBuffer){const s=e.eventBuffer.getEarliestTimestamp();s&&(sr(`[Replay] Updating session start time to earliest event in buffer to ${new Date(s)}`,e.getOptions()._experiments.traceInternals),e.session.started=s,e.getOptions().stickySession&&Rw(e.session))}return e.recordingMode==="session"&&e.flush(),!0})}}function yre(e){const t=e.getOptions();return{type:Ve.Custom,timestamp:Date.now(),data:{tag:"options",payload:{sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Cre(e,t){!t||!e.session||e.session.segmentId!==0||xw(e,yre(e),!1)}function Ire(e,t,n,r){return Qc(ZO(e,ow(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function Sre({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const s=new TextEncoder().encode(r);n=new Uint8Array(s.length+e.length),n.set(s),n.set(e,s.length)}return n}async function bre({client:e,scope:t,replayId:n,event:r}){const i=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,s={event_id:n,integrations:i};e.emit&&e.emit("preprocessEvent",r,s);const o=await nL(e.getOptions(),r,s,t,e,qO());if(!o)return null;o.platform=o.platform||"javascript";const a=e.getSdkMetadata&&e.getSdkMetadata(),{name:c,version:l}=a&&a.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:l||"0.0.0"},o}async function wre({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:i,session:s}){const o=Sre({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:u}=r,d=Vt(),f=vh(),h=d&&d.getTransport(),p=d&&d.getDsn();if(!d||!h||!p||!s.sampled)return;const m={type:lee,replay_start_timestamp:u/1e3,timestamp:i/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:t,segment_id:n,replay_type:s.sampled},y=await bre({scope:f,client:d,replayId:t,event:m});if(!y){d.recordDroppedEvent("event_processor","replay",m),sr("An event processor returned `null`, will not send event.");return}delete y.sdkProcessingMetadata;const g=Ire(y,o,p,d.getOptions().tunnel);let v;try{v=await h.send(g)}catch(E){const k=new Error(Iw);try{k.cause=E}catch{}throw k}if(!v)return v;if(typeof v.statusCode=="number"&&(v.statusCode<200||v.statusCode>=300))throw new y2(v.statusCode);const S=XO({},v);if(zO(S,"replay"))throw new C2(S);return v}class y2 extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class C2 extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function I2(e,t={count:0,interval:mee}){const{recordingData:n,options:r}=e;if(n.length)try{return await wre(e),!0}catch(i){if(i instanceof y2||i instanceof C2)throw i;if(vY("Replays",{_retryCount:t.count}),ht&&r._experiments&&r._experiments.captureExceptions&&hv(i),t.count>=gee){const s=new Error(`${Iw} - max retries exceeded`);try{s.cause=i}catch{}throw s}return t.interval*=++t.count,new Promise((s,o)=>{setTimeout(async()=>{try{await I2(e,t),s(!0)}catch(a){o(a)}},t.interval)})}}const S2="__THROTTLED",kre="__SKIPPED";function Are(e,t,n){const r=new Map,i=a=>{const c=a-n;r.forEach((l,u)=>{u<c&&r.delete(u)})},s=()=>[...r.values()].reduce((a,c)=>a+c,0);let o=!1;return(...a)=>{const c=Math.floor(Date.now()/1e3);if(i(c),s()>=t){const u=o;return o=!0,u?kre:S2}o=!1;const l=r.get(c)||0;return r.set(c,l+1),e(...a)}}class ca{constructor({options:t,recordingOptions:n}){ca.prototype.__init.call(this),ca.prototype.__init2.call(this),ca.prototype.__init3.call(this),ca.prototype.__init4.call(this),ca.prototype.__init5.call(this),ca.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:uee,sessionIdleExpire:dee},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=gre(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Are((o,a)=>vne(this,o,a),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:i}=this.getOptions(),s=r?{threshold:Math.min(vee,r),timeout:r,scrollTimeout:yee,ignoreSelector:i?i.join(","):""}:void 0;s&&(this.clickDetector=new Ote(this,s))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}getOptions(){return this._options}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options;if(!(n<=0&&r<=0)){if(this._initializeSessionForSampling(t),!this.session){this._handleException(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",tu(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session")throw new Error("Replay recording is already in progress");if(this._isEnabled&&this.recordingMode==="buffer")throw new Error("Replay buffering is in progress, call `flush()` to save the replay");tu("[Replay] Starting replay in session mode",this._options._experiments.traceInternals);const t=e0({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");tu("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const t=e0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._options._experiments.canvas;this._stopRecording=Oa({...this._recordingOptions,...this.recordingMode==="buffer"&&{checkoutEveryNms:pee},emit:vre(this),onMutation:this._onMutationHandler,...t&&t.manager&&{recordCanvas:!0,getCanvasManager:t.manager,...wT[t.quality||"medium"]||wT.medium}})}catch(t){this._handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this._handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1;try{sr(`[Replay] Stopping Replay${n?` triggered by ${n}`:""}`,this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,fne(this)}catch(r){this._handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),sr("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),sr("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();sr("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode!=="buffer"&&n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&HI(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${Ct.location.pathname}${Ct.location.hash}${Ct.location.search}`,n=`${Ct.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===S2){const i=Ns({category:"replay.throttled"});this.addUpdate(()=>!xw(this,{type:Rte,timestamp:i.timestamp||0,data:{tag:"breadcrumb",payload:i,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastTransaction||vh().getTransaction();if(!(!t||!["route","custom"].includes(t.metadata.source)))return t.name}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=lne({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(t){ht&&J.error("[Replay]",t),ht&&this._options._experiments&&this._options._experiments.captureExceptions&&hv(t)}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=e0({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return c2(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Ct.document.addEventListener("visibilitychange",this._handleVisibilityChange),Ct.addEventListener("blur",this._handleWindowBlur),Ct.addEventListener("focus",this._handleWindowFocus),Ct.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(hre(this),this._hasInitializedCoreListeners=!0)}catch(t){this._handleException(t)}this._performanceCleanupCallback=rne(this)}_removeListeners(){try{Ct.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Ct.removeEventListener("blur",this._handleWindowBlur),Ct.removeEventListener("focus",this._handleWindowFocus),Ct.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this._handleException(t)}}__init(){this._handleVisibilityChange=()=>{Ct.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const t=Ns({category:"ui.blur"});this._doChangeToBackgroundTasks(t)}}__init3(){this._handleWindowFocus=()=>{const t=Ns({category:"ui.focus"});this._doChangeToForegroundTasks(t)}}__init4(){this._handleKeyboardEvent=t=>{Xte(this,t)}}_doChangeToBackgroundTasks(t){!this.session||a2(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){sr("[Replay] Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:Ve.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){const t=Yte(this.performanceEntries).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(Iv(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){ht&&J.error("[Replay] No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await pre(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),i=this.session.segmentId++;this._maybeSaveSession();const s=await this.eventBuffer.finish();await I2({replayId:t,recordingData:s,segmentId:i,eventContext:r,session:this.session,options:this.getOptions(),timestamp:n})}catch(n){this._handleException(n),this.stop({reason:"sendReplay"});const r=Vt();r&&r.recordDroppedEvent("send_error","replay")}}__init5(){this._flush=async({force:t=!1}={})=>{if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){ht&&J.error("[Replay] Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,i=Date.now()-n;this._debouncedFlush.cancel();const s=i<this._options.minReplayDuration,o=i>this._options.maxReplayDuration+5e3;if(s||o){sr(`[Replay] Session duration (${Math.floor(i/1e3)}s) is too ${s?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),s&&this._debouncedFlush();return}const a=this.eventBuffer;if(a&&this.session.segmentId===0&&!a.hasCheckout&&sr("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock){this._flushLock=this._runFlush(),await this._flushLock,this._flushLock=void 0;return}try{await this._flushLock}catch(c){ht&&J.error(c)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&Rw(this.session)}__init6(){this._onMutationHandler=t=>{const n=t.length,r=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,s=r&&n>r;if(n>i||s){const o=Ns({category:"replay.mutations",data:{count:n,limit:s}});this._createCustomBreadcrumb(o)}return s?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function yd(e,t,n,r){const i=typeof r=="string"?r.split(","):[],s=[...e,...i,...t];return typeof n<"u"&&(typeof n=="string"&&s.push(`.${n}`),Gc(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),s.join(",")}function Ere({mask:e,unmask:t,block:n,unblock:r,ignore:i,blockClass:s,blockSelector:o,maskTextClass:a,maskTextSelector:c,ignoreClass:l}){const u=['base[href="/"]'],d=yd(e,[".sentry-mask","[data-sentry-mask]"],a,c),f=yd(t,[".sentry-unmask","[data-sentry-unmask]"]),h={maskTextSelector:d,unmaskTextSelector:f,blockSelector:yd(n,[".sentry-block","[data-sentry-block]",...u],s,o),unblockSelector:yd(r,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:yd(i,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return s instanceof RegExp&&(h.blockClass=s),a instanceof RegExp&&(h.maskTextClass=a),h}function Tre({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:i,value:s}){return!r||i.unmaskTextSelector&&e.matches(i.unmaskTextSelector)?s:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?s.replace(/[\S]/g,"*"):s}const UT='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',_re=["content-length","content-type","accept"];let VT=!1;class wv{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:t=fee,flushMaxDelay:n=hee,minReplayDuration:r=Cee,maxReplayDuration:i=bT,stickySession:s=!0,useCompression:o=!0,workerUrl:a,_experiments:c={},sessionSampleRate:l,errorSampleRate:u,maskAllText:d=!0,maskAllInputs:f=!0,blockAllMedia:h=!0,mutationBreadcrumbLimit:p=750,mutationLimit:m=1e4,slowClickTimeout:y=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:v=[],networkDetailDenyUrls:S=[],networkCaptureBodies:E=!0,networkRequestHeaders:k=[],networkResponseHeaders:b=[],mask:A=[],maskAttributes:_=["title","placeholder"],unmask:x=[],block:P=[],unblock:D=[],ignore:B=[],maskFn:V,beforeAddRecordingEvent:G,beforeErrorSampling:Z,blockClass:z,blockSelector:te,maskInputOptions:j,maskTextClass:K,maskTextSelector:ie,ignoreClass:X}={}){this.name=wv.id;const se=Ere({mask:A,unmask:x,block:P,unblock:D,ignore:B,blockClass:z,blockSelector:te,maskTextClass:K,maskTextSelector:ie,ignoreClass:X});if(this._recordingOptions={maskAllInputs:f,maskAllText:d,maskInputOptions:{...j||{},password:!0},maskTextFn:V,maskInputFn:V,maskAttributeFn:(ke,Ae,ge)=>Tre({maskAttributes:_,maskAllText:d,privacyOptions:se,key:ke,value:Ae,el:ge}),...se,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:ke=>{try{ke.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,Iee),maxReplayDuration:Math.min(i,bT),stickySession:s,sessionSampleRate:l,errorSampleRate:u,useCompression:o,workerUrl:a,blockAllMedia:h,maskAllInputs:f,maskAllText:d,mutationBreadcrumbLimit:p,mutationLimit:m,slowClickTimeout:y,slowClickIgnoreSelectors:g,networkDetailAllowUrls:v,networkDetailDenyUrls:S,networkCaptureBodies:E,networkRequestHeaders:GT(k),networkResponseHeaders:GT(b),beforeAddRecordingEvent:G,beforeErrorSampling:Z,_experiments:c},typeof l=="number"&&(console.warn(`[Replay] You are passing \`sessionSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysSessionSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysSessionSampleRate: ${l} })`),this._initialOptions.sessionSampleRate=l),typeof u=="number"&&(console.warn(`[Replay] You are passing \`errorSampleRate\` to the Replay integration.
This option is deprecated and will be removed soon.
Instead, configure \`replaysOnErrorSampleRate\` directly in the SDK init options, e.g.:
Sentry.init({ replaysOnErrorSampleRate: ${u} })`),this._initialOptions.errorSampleRate=u),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${UT}`:UT),this._isInitialized&&XE())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return VT}set _isInitialized(t){VT=t}setupOnce(){XE()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return!this._replay||!this._replay.isEnabled()?Promise.resolve():this._replay.sendBufferedReplayOrFlush(t)}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}_initialize(){this._replay&&this._replay.initializeSampling()}_setup(){const t=Rre(this._initialOptions);this._replay=new ca({options:t,recordingOptions:this._recordingOptions})}}wv.__initStatic();function Rre(e){const t=Vt(),n=t&&t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...Os(e)};return n?(e.sessionSampleRate==null&&e.errorSampleRate==null&&n.replaysSessionSampleRate==null&&n.replaysOnErrorSampleRate==null&&Gc(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),typeof n.replaysSessionSampleRate=="number"&&(r.sessionSampleRate=n.replaysSessionSampleRate),typeof n.replaysOnErrorSampleRate=="number"&&(r.errorSampleRate=n.replaysOnErrorSampleRate),r):(Gc(()=>{console.warn("SDK client is not available.")}),r)}function GT(e){return[..._re,...e.map(t=>t.toLowerCase())]}function xre(e){const t={_metadata:{},...e};t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.react",packages:[{name:"npm:@sentry/react",version:Uf}],version:Uf},SQ(t)}var b2={exports:{}},ot={},En=typeof Symbol=="function"&&Symbol.for,Pw=En?Symbol.for("react.element"):60103,Mw=En?Symbol.for("react.portal"):60106,kv=En?Symbol.for("react.fragment"):60107,Av=En?Symbol.for("react.strict_mode"):60108,Ev=En?Symbol.for("react.profiler"):60114,Tv=En?Symbol.for("react.provider"):60109,_v=En?Symbol.for("react.context"):60110,Dw=En?Symbol.for("react.async_mode"):60111,Rv=En?Symbol.for("react.concurrent_mode"):60111,xv=En?Symbol.for("react.forward_ref"):60112,Nv=En?Symbol.for("react.suspense"):60113,Nre=En?Symbol.for("react.suspense_list"):60120,Pv=En?Symbol.for("react.memo"):60115,Mv=En?Symbol.for("react.lazy"):60116,Pre=En?Symbol.for("react.block"):60121,Mre=En?Symbol.for("react.fundamental"):60117,Dre=En?Symbol.for("react.responder"):60118,Ore=En?Symbol.for("react.scope"):60119;function ti(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Pw:switch(e=e.type,e){case Dw:case Rv:case kv:case Ev:case Av:case Nv:return e;default:switch(e=e&&e.$$typeof,e){case _v:case xv:case Mv:case Pv:case Tv:return e;default:return t}}case Mw:return t}}}function w2(e){return ti(e)===Rv}ot.AsyncMode=Dw;ot.ConcurrentMode=Rv;ot.ContextConsumer=_v;ot.ContextProvider=Tv;ot.Element=Pw;ot.ForwardRef=xv;ot.Fragment=kv;ot.Lazy=Mv;ot.Memo=Pv;ot.Portal=Mw;ot.Profiler=Ev;ot.StrictMode=Av;ot.Suspense=Nv;ot.isAsyncMode=function(e){return w2(e)||ti(e)===Dw};ot.isConcurrentMode=w2;ot.isContextConsumer=function(e){return ti(e)===_v};ot.isContextProvider=function(e){return ti(e)===Tv};ot.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pw};ot.isForwardRef=function(e){return ti(e)===xv};ot.isFragment=function(e){return ti(e)===kv};ot.isLazy=function(e){return ti(e)===Mv};ot.isMemo=function(e){return ti(e)===Pv};ot.isPortal=function(e){return ti(e)===Mw};ot.isProfiler=function(e){return ti(e)===Ev};ot.isStrictMode=function(e){return ti(e)===Av};ot.isSuspense=function(e){return ti(e)===Nv};ot.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===kv||e===Rv||e===Ev||e===Av||e===Nv||e===Nre||typeof e=="object"&&e!==null&&(e.$$typeof===Mv||e.$$typeof===Pv||e.$$typeof===Tv||e.$$typeof===_v||e.$$typeof===xv||e.$$typeof===Mre||e.$$typeof===Dre||e.$$typeof===Ore||e.$$typeof===Pre)};ot.typeOf=ti;b2.exports=ot;var Lre=b2.exports,k2=Lre,Bre={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Fre={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},A2={};A2[k2.ForwardRef]=Bre;A2[k2.Memo]=Fre;const Ure=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Vre(e){const t=e.match(/^([^.]+)/);return t!==null&&parseInt(t[0])>=17}const WT={componentStack:null,error:null,eventId:null};function Gre(e,t){const n=new WeakMap;function r(i,s){if(!n.has(i)){if(i.cause)return n.set(i,!0),r(i.cause,s);i.cause=s}}r(e,t)}class Ow extends w.Component{constructor(t){super(t),Ow.prototype.__init.call(this),this.state=WT,this._openFallbackReportDialog=!0;const n=Vt();n&&n.on&&t.showDialog&&(this._openFallbackReportDialog=!1,n.on("afterSendEvent",r=>{!r.type&&r.event_id===this._lastEventId&&pT({...t.dialogOptions,eventId:this._lastEventId})}))}componentDidCatch(t,{componentStack:n}){const{beforeCapture:r,onError:i,showDialog:s,dialogOptions:o}=this.props;iL(a=>{if(Vre(w.version)&&Yb(t)){const l=new Error(t.message);l.name=`React ErrorBoundary ${t.name}`,l.stack=n,Gre(t,l)}r&&r(a,t,n);const c=hv(t,{captureContext:{contexts:{react:{componentStack:n}}},mechanism:{handled:!1}});i&&i(t,n,c),s&&(this._lastEventId=c,this._openFallbackReportDialog&&pT({...o,eventId:c})),this.setState({error:t,componentStack:n,eventId:c})})}componentDidMount(){const{onMount:t}=this.props;t&&t()}componentWillUnmount(){const{error:t,componentStack:n,eventId:r}=this.state,{onUnmount:i}=this.props;i&&i(t,n,r)}__init(){this.resetErrorBoundary=()=>{const{onReset:t}=this.props,{error:n,componentStack:r,eventId:i}=this.state;t&&t(n,r,i),this.setState(WT)}}render(){const{fallback:t,children:n}=this.props,r=this.state;if(r.error){let i;return typeof t=="function"?i=t({error:r.error,componentStack:r.componentStack,resetError:this.resetErrorBoundary,eventId:r.eventId}):i=t,w.isValidElement(i)?i:(t&&Ure&&J.warn("fallback did not produce a valid ReactElement"),null)}return typeof n=="function"?n():n}}function Wre(){const[e,t]=w.useState(null),[n,r]=w.useState(!1),[i,s]=w.useState([]),o=pt.useRef(null),a=pt.useRef(null),c=pt.useRef(null),l=w.useRef(!1),u=()=>{o.current&&o.current.saveLog()},d=()=>{o.current&&o.current.clearLog()},f=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return w.useEffect(()=>{if(l.current)return;const h=new PH("mongoose.moo.mud.org",8765);h.registerGMCPPackage(yH),h.registerGMCPPackage(pH),h.registerGMCPPackage(mH),h.registerGMCPPackage(uV),h.registerGMCPPackage(CH),h.registerGMCPPackage(gH),h.registerGMCPPackage(vH),h.registerGMCPPackage(cV),h.registerMcpPackage(wH),h.registerMcpPackage(kH),h.registerMcpPackage(EH),h.registerMcpPackage(TH),h.connect(),h.requestNotificationPermission(),t(h),r(!f),window.mudClient=h,l.current=!0;const p=y=>{h&&(y.key==="Control"&&h.cancelSpeech(),y.key==="Escape"&&h.stopAllSounds())};window.addEventListener("keydown",p);const m=()=>{var y;(y=a.current)==null||y.focus()};return document.addEventListener("focus",m),()=>{window.removeEventListener("keydown",p),document.removeEventListener("focus",m)}},[f]),w.useEffect(()=>{if(e){const h=m=>{s(m)},p=()=>{s([])};return e.on("userlist",h),e.on("disconnect",p),()=>{e.off("userlist",h),e.off("disconnect",p)}}},[e]),Tx(h=>{e&&e.shutdown()}),e?Y.jsx(Ow,{fallback:Y.jsx("p",{children:"An error has occurred"}),children:Y.jsxs("div",{className:"App",children:[Y.jsx("header",{className:"App-header"}),Y.jsx(h$,{client:e,onSaveLog:u,onClearLog:d,onToggleUsers:()=>r(!n),onOpenPrefs:()=>{var h;return(h=c.current)==null?void 0:h.open()}}),Y.jsxs("div",{children:[Y.jsx(fC,{client:e,ref:o}),n&&Y.jsx(m$,{users:i}),Y.jsx(TK,{client:e})]}),Y.jsx(DH,{onSend:e.sendCommand,inputRef:a}),Y.jsx(p$,{client:e}),Y.jsx(i$,{ref:c})]})}):null}function Hre(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function jT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HT(Object(n),!0).forEach(function(r){Hre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jre(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,s;for(s=0;s<r.length;s++)i=r[s],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function $re(e,t){if(e==null)return{};var n=jre(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Zre(e,t){return zre(e)||Xre(e,t)||Kre(e,t)||Jre()}function zre(e){if(Array.isArray(e))return e}function Xre(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,s=void 0;try{for(var o=e[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(t&&n.length===t));r=!0);}catch(c){i=!0,s=c}finally{try{!r&&o.return!=null&&o.return()}finally{if(i)throw s}}return n}}function Kre(e,t){if(e){if(typeof e=="string")return $T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $T(e,t)}}function $T(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jre(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yre(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function zT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZT(Object(n),!0).forEach(function(r){Yre(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qre(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(i,s){return s(i)},r)}}function Md(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=e.length?e.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return t.apply(n,[].concat(i,a))}}}function gg(e){return{}.toString.call(e).includes("Object")}function Qre(e){return!Object.keys(e).length}function jf(e){return typeof e=="function"}function eie(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function tie(e,t){return gg(t)||Ba("changeType"),Object.keys(t).some(function(n){return!eie(e,n)})&&Ba("changeField"),t}function nie(e){jf(e)||Ba("selectorType")}function rie(e){jf(e)||gg(e)||Ba("handlerType"),gg(e)&&Object.values(e).some(function(t){return!jf(t)})&&Ba("handlersType")}function iie(e){e||Ba("initialIsRequired"),gg(e)||Ba("initialType"),Qre(e)&&Ba("initialContent")}function sie(e,t){throw new Error(e[t]||e.default)}var oie={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Ba=Md(sie)(oie),lp={changes:tie,selector:nie,handler:rie,initial:iie};function aie(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};lp.initial(e),lp.handler(t);var n={current:e},r=Md(uie)(n,t),i=Md(lie)(n),s=Md(lp.changes)(e),o=Md(cie)(n);function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return lp.selector(l),l(n.current)}function c(l){qre(r,i,s,o)(l)}return[a,c]}function cie(e,t){return jf(t)?t(e.current):t}function lie(e,t){return e.current=zT(zT({},e.current),t),t}function uie(e,t,n){return jf(t)?t(e.current):Object.keys(n).forEach(function(r){var i;return(i=t[r])===null||i===void 0?void 0:i.call(t,e.current[r])}),n}var die={create:aie},fie={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function hie(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return i.length>=e.length?e.apply(this,i):function(){for(var o=arguments.length,a=new Array(o),c=0;c<o;c++)a[c]=arguments[c];return t.apply(n,[].concat(i,a))}}}function pie(e){return{}.toString.call(e).includes("Object")}function mie(e){return e||XT("configIsRequired"),pie(e)||XT("configType"),e.urls?(gie(),{paths:{vs:e.urls.monacoBase}}):e}function gie(){console.warn(E2.deprecation)}function vie(e,t){throw new Error(e[t]||e.default)}var E2={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},XT=hie(vie)(E2),yie={config:mie},Cie=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(s,o){return o(s)},i)}};function T2(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],T2(e[n],t[n]))}),jT(jT({},e),t)}var Iie={type:"cancelation",msg:"operation is manually canceled"};function t0(e){var t=!1,n=new Promise(function(r,i){e.then(function(s){return t?i(Iie):r(s)}),e.catch(i)});return n.cancel=function(){return t=!0},n}var Sie=die.create({config:fie,isInitialized:!1,resolve:null,reject:null,monaco:null}),_2=Zre(Sie,2),Ih=_2[0],Dv=_2[1];function bie(e){var t=yie.config(e),n=t.monaco,r=$re(t,["monaco"]);Dv(function(i){return{config:T2(i.config,r),monaco:n}})}function wie(){var e=Ih(function(t){var n=t.monaco,r=t.isInitialized,i=t.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!e.isInitialized){if(Dv({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),t0(n0);if(window.monaco&&window.monaco.editor)return R2(window.monaco),e.resolve(window.monaco),t0(n0);Cie(kie,Eie)(Tie)}return t0(n0)}function kie(e){return document.body.appendChild(e)}function Aie(e){var t=document.createElement("script");return e&&(t.src=e),t}function Eie(e){var t=Ih(function(r){var i=r.config,s=r.reject;return{config:i,reject:s}}),n=Aie("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function Tie(){var e=Ih(function(n){var r=n.config,i=n.resolve,s=n.reject;return{config:r,resolve:i,reject:s}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){R2(n),e.resolve(n)},function(n){e.reject(n)})}function R2(e){Ih().monaco||Dv({monaco:e})}function _ie(){return Ih(function(e){var t=e.monaco;return t})}var n0=new Promise(function(e,t){return Dv({resolve:e,reject:t})}),x2={config:bie,init:wie,__getMonacoInstance:_ie},Rie={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},r0=Rie,xie={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Nie=xie;function Pie({children:e}){return pt.createElement("div",{style:Nie.container},e)}var Mie=Pie,Die=Mie;function Oie({width:e,height:t,isEditorReady:n,loading:r,_ref:i,className:s,wrapperProps:o}){return pt.createElement("section",{style:{...r0.wrapper,width:e,height:t},...o},!n&&pt.createElement(Die,null,r),pt.createElement("div",{ref:i,style:{...r0.fullWidth,...!n&&r0.hide},className:s}))}var Lie=Oie,N2=w.memo(Lie);function Bie(e){w.useEffect(e,[])}var P2=Bie;function Fie(e,t,n=!0){let r=w.useRef(!0);w.useEffect(r.current||!n?()=>{r.current=!1}:e,t)}var $r=Fie;function tf(){}function Ol(e,t,n,r){return Uie(e,r)||Vie(e,t,n,r)}function Uie(e,t){return e.editor.getModel(M2(e,t))}function Vie(e,t,n,r){return e.editor.createModel(t,n,r?M2(e,r):void 0)}function M2(e,t){return e.Uri.parse(t)}function Gie({original:e,modified:t,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:s,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:c=!1,theme:l="light",loading:u="Loading...",options:d={},height:f="100%",width:h="100%",className:p,wrapperProps:m={},beforeMount:y=tf,onMount:g=tf}){let[v,S]=w.useState(!1),[E,k]=w.useState(!0),b=w.useRef(null),A=w.useRef(null),_=w.useRef(null),x=w.useRef(g),P=w.useRef(y),D=w.useRef(!1);P2(()=>{let Z=x2.init();return Z.then(z=>(A.current=z)&&k(!1)).catch(z=>(z==null?void 0:z.type)!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>b.current?G():Z.cancel()}),$r(()=>{if(b.current&&A.current){let Z=b.current.getOriginalEditor(),z=Ol(A.current,e||"",r||n||"text",s||"");z!==Z.getModel()&&Z.setModel(z)}},[s],v),$r(()=>{if(b.current&&A.current){let Z=b.current.getModifiedEditor(),z=Ol(A.current,t||"",i||n||"text",o||"");z!==Z.getModel()&&Z.setModel(z)}},[o],v),$r(()=>{let Z=b.current.getModifiedEditor();Z.getOption(A.current.editor.EditorOption.readOnly)?Z.setValue(t||""):t!==Z.getValue()&&(Z.executeEdits("",[{range:Z.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),Z.pushUndoStop())},[t],v),$r(()=>{var Z,z;(z=(Z=b.current)==null?void 0:Z.getModel())==null||z.original.setValue(e||"")},[e],v),$r(()=>{let{original:Z,modified:z}=b.current.getModel();A.current.editor.setModelLanguage(Z,r||n||"text"),A.current.editor.setModelLanguage(z,i||n||"text")},[n,r,i],v),$r(()=>{var Z;(Z=A.current)==null||Z.editor.setTheme(l)},[l],v),$r(()=>{var Z;(Z=b.current)==null||Z.updateOptions(d)},[d],v);let B=w.useCallback(()=>{var te;if(!A.current)return;P.current(A.current);let Z=Ol(A.current,e||"",r||n||"text",s||""),z=Ol(A.current,t||"",i||n||"text",o||"");(te=b.current)==null||te.setModel({original:Z,modified:z})},[n,t,i,e,r,s,o]),V=w.useCallback(()=>{var Z;!D.current&&_.current&&(b.current=A.current.editor.createDiffEditor(_.current,{automaticLayout:!0,...d}),B(),(Z=A.current)==null||Z.editor.setTheme(l),S(!0),D.current=!0)},[d,l,B]);w.useEffect(()=>{v&&x.current(b.current,A.current)},[v]),w.useEffect(()=>{!E&&!v&&V()},[E,v,V]);function G(){var z,te,j,K;let Z=(z=b.current)==null?void 0:z.getModel();a||((te=Z==null?void 0:Z.original)==null||te.dispose()),c||((j=Z==null?void 0:Z.modified)==null||j.dispose()),(K=b.current)==null||K.dispose()}return pt.createElement(N2,{width:h,height:f,isEditorReady:v,loading:u,_ref:_,className:p,wrapperProps:m})}var Wie=Gie;w.memo(Wie);function Hie(e){let t=w.useRef();return w.useEffect(()=>{t.current=e},[e]),t.current}var jie=Hie,up=new Map;function $ie({defaultValue:e,defaultLanguage:t,defaultPath:n,value:r,language:i,path:s,theme:o="light",line:a,loading:c="Loading...",options:l={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:f=!1,width:h="100%",height:p="100%",className:m,wrapperProps:y={},beforeMount:g=tf,onMount:v=tf,onChange:S,onValidate:E=tf}){let[k,b]=w.useState(!1),[A,_]=w.useState(!0),x=w.useRef(null),P=w.useRef(null),D=w.useRef(null),B=w.useRef(v),V=w.useRef(g),G=w.useRef(),Z=w.useRef(r),z=jie(s),te=w.useRef(!1),j=w.useRef(!1);P2(()=>{let X=x2.init();return X.then(se=>(x.current=se)&&_(!1)).catch(se=>(se==null?void 0:se.type)!=="cancelation"&&console.error("Monaco initialization: error:",se)),()=>P.current?ie():X.cancel()}),$r(()=>{var se,ke,Ae,ge;let X=Ol(x.current,e||r||"",t||i||"",s||n||"");X!==((se=P.current)==null?void 0:se.getModel())&&(d&&up.set(z,(ke=P.current)==null?void 0:ke.saveViewState()),(Ae=P.current)==null||Ae.setModel(X),d&&((ge=P.current)==null||ge.restoreViewState(up.get(s))))},[s],k),$r(()=>{var X;(X=P.current)==null||X.updateOptions(l)},[l],k),$r(()=>{!P.current||r===void 0||(P.current.getOption(x.current.editor.EditorOption.readOnly)?P.current.setValue(r):r!==P.current.getValue()&&(j.current=!0,P.current.executeEdits("",[{range:P.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),P.current.pushUndoStop(),j.current=!1))},[r],k),$r(()=>{var se,ke;let X=(se=P.current)==null?void 0:se.getModel();X&&i&&((ke=x.current)==null||ke.editor.setModelLanguage(X,i))},[i],k),$r(()=>{var X;a!==void 0&&((X=P.current)==null||X.revealLine(a))},[a],k),$r(()=>{var X;(X=x.current)==null||X.editor.setTheme(o)},[o],k);let K=w.useCallback(()=>{var X;if(!(!D.current||!x.current)&&!te.current){V.current(x.current);let se=s||n,ke=Ol(x.current,r||e||"",t||i||"",se||"");P.current=(X=x.current)==null?void 0:X.editor.create(D.current,{model:ke,automaticLayout:!0,...l},u),d&&P.current.restoreViewState(up.get(se)),x.current.editor.setTheme(o),a!==void 0&&P.current.revealLine(a),b(!0),te.current=!0}},[e,t,n,r,i,s,l,u,d,o,a]);w.useEffect(()=>{k&&B.current(P.current,x.current)},[k]),w.useEffect(()=>{!A&&!k&&K()},[A,k,K]),Z.current=r,w.useEffect(()=>{var X,se;k&&S&&((X=G.current)==null||X.dispose(),G.current=(se=P.current)==null?void 0:se.onDidChangeModelContent(ke=>{j.current||S(P.current.getValue(),ke)}))},[k,S]),w.useEffect(()=>{if(k){let X=x.current.editor.onDidChangeMarkers(se=>{var Ae;let ke=(Ae=P.current.getModel())==null?void 0:Ae.uri;if(ke&&se.find(ge=>ge.path===ke.path)){let ge=x.current.editor.getModelMarkers({resource:ke});E==null||E(ge)}});return()=>{X==null||X.dispose()}}return()=>{}},[k,E]);function ie(){var X,se;(X=G.current)==null||X.dispose(),f?d&&up.set(s,P.current.saveViewState()):(se=P.current.getModel())==null||se.dispose(),P.current.dispose()}return pt.createElement(N2,{width:h,height:p,isEditorReady:k,loading:c,_ref:D,className:m,wrapperProps:y})}var Zie=$ie,zie=w.memo(Zie),Xie=zie,Kie={restoreOnUnmount:!1};function Jie(e,t){t===void 0&&(t=Kie);var n=w.useRef(document.title);document.title!==e&&(document.title=e),w.useEffect(function(){if(t&&t.restoreOnUnmount)return function(){document.title=n.current}},[])}const Yie=typeof document<"u"?Jie:function(e){};function qie({onSave:e,onRevert:t,onDownload:n}){return Y.jsx("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderBottom:"1px solid #e8e8e8"},children:Y.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[Y.jsxs("button",{onClick:e,accessKey:"s",children:[Y.jsx(oM,{}),"Save"]}),Y.jsxs("button",{onClick:t,accessKey:"r",children:[Y.jsx(u$,{}),"Revert"]}),Y.jsxs("button",{onClick:n,accessKey:"d",children:[Y.jsx(c$,{}),"Download"]})]})})}const Qie=({docstate:e,session:t})=>Y.jsxs("div",{"aria-live":"polite",className:"statusbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderTop:"1px solid #e8e8e8"},children:[Y.jsx("span",{children:e}),Y.jsx("span",{children:"|"}),Y.jsx("span",{children:t.reference}),Y.jsx("span",{children:"|"}),Y.jsx("span",{children:t.type})]});function ese(){const e=Ex(),t=pt.useRef(null),[n,r]=w.useState(""),[i,s]=w.useState(""),[o,a]=w.useState(""),[c,l]=w.useState(0),[u,d]=w.useState({name:"none",contents:[],reference:"",type:""}),f=(V,G)=>{t.current=V},[h,p]=Ya();console.log(h);const m=h.editor.accessibilityMode,y=h.editor.autocompleteEnabled;Tx(V=>{k.postMessage({type:"close",id:A}),c===1&&V.preventDefault()});const[g,v]=w.useState(!1),S=g?`${u.name} - Mongoose Editor`:"Mongoose Editor";Yie(S);const E=w.useMemo(()=>{switch(c){case 0:return"Unchanged";case 1:return"Changed";case 2:return"Saved"}},[c]),k=w.useMemo(()=>new BroadcastChannel("editor"),[]),b=new URLSearchParams(e.search),A=decodeURIComponent(b.get("reference")||"");w.useEffect(()=>{if(!A)return;console.log("ID: "+A),console.log("Sending ready message"),k.postMessage({type:"ready",id:A});const V=G=>{if(console.log(G.data),G.data.type==="load"){if(n!=="")return;const Z=G.data.session.contents.join(`
`);s(Z),a(Z),d(G.data.session),l(0),r(G.data.clientId),setTimeout(B,100)}else if(G.data.type==="shutdown"){if(G.data.clientId!==n)return;k.close(),window.close()}};return k.addEventListener("message",V),()=>k.removeEventListener("message",V)},[k,n,A]);const _=()=>{s(o),l(0)},x=V=>{const G=i.split(/\r\n|\r|\n/),Z={...u,contents:G};k.postMessage({type:"save",session:Z,id:A}),l(2),B(),V.preventDefault()},P=V=>{V!==void 0&&(console.log("Original: "+o),console.log("New: "+V),s(V),V.split(/\r\n|\r|\n/).join(`
`)!==o?l(1):l(0),g||v(!0))},D=()=>{const V=new Blob([i],{type:"text/plain"}),G=URL.createObjectURL(V),Z=document.createElement("a"),z=new Date,te=z.toLocaleDateString().replace(/\//g,"-"),j=z.toLocaleTimeString().replace(/:/g,"-"),K=`${u.name}-${te}-${j}.txt`;Z.download=K,Z.href=G,Z.click(),URL.revokeObjectURL(G),Z.remove()};return Y.jsxs("div",{id:"editor",children:[Y.jsx(qie,{onSave:x,onRevert:_,onDownload:D}),Y.jsx(Xie,{height:"80vh",defaultLanguage:"lambdamoo",value:i,onChange:P,options:{wordWrap:"on",accessibilitySupport:m?"on":"off",quickSuggestions:y},onMount:f,path:u.reference}),Y.jsx(Qie,{docstate:E,session:u})]});function B(){t.current!==null&&t.current.focus()}}const tse="modulepreload",nse=function(e){return"/"+e},KT={},rse=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=nse(o),o in KT)return;KT[o]=!0;const a=o.endsWith(".css"),c=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const f=s[d];if(f.href===o&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":tse,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>t()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},ise=e=>{e&&e instanceof Function&&rse(()=>import("./web-vitals-GXdahIIP.js"),__vite__mapDeps([])).then(({getCLS:t,getFID:n,getFCP:r,getLCP:i,getTTFB:s})=>{t(e),n(e),r(e),i(e),s(e)})};var JT={};const sse=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ose(e){if("serviceWorker"in navigator){if(new URL(JT.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${JT.PUBLIC_URL}/service-worker.js`;sse?(ase(n,e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):D2(n,e)})}}function D2(e,t){navigator.serviceWorker.register(e).then(n=>{n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(n)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(n)))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function ase(e,t){fetch(e).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):D2(e,t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}xre({dsn:"https://2356c3ef12dad1afcb30defd749d96f1@new.q-continuum.net/2",integrations:[new cee({tracePropagationTargets:["localhost",/^https:\/\/client\.rustytelephone\.net\//]}),new wv],tracesSampleRate:1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1});const cse=b5([{path:"/",element:Y.jsx(Wre,{})},{path:"/editor",element:Y.jsx(ese,{})}]),lse=i0.createRoot(document.getElementById("root"));lse.render(Y.jsx(pt.StrictMode,{children:Y.jsx(N5,{router:cse})}));ise(console.log);ose()});export default use();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}