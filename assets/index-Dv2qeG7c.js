var M_=Object.defineProperty;var YI=t=>{throw TypeError(t)};var D_=(t,e,n)=>e in t?M_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>D_(t,typeof e!="symbol"?e+"":e,n),jg=(t,e,n)=>e.has(t)||YI("Cannot "+n);var N=(t,e,n)=>(jg(t,e,"read from private field"),n?n.call(t):e.get(t)),et=(t,e,n)=>e.has(t)?YI("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ne=(t,e,n,r)=>(jg(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),Ae=(t,e,n)=>(jg(t,e,"access private method"),n);var Ih=(t,e,n,r)=>({set _(i){Ne(t,e,i,n)},get _(){return N(t,e,r)}});function Nk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var L_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var _k={exports:{}},Jp={},Ok={exports:{}},He={},qd=Symbol.for("react.element"),B_=Symbol.for("react.portal"),F_=Symbol.for("react.fragment"),U_=Symbol.for("react.strict_mode"),V_=Symbol.for("react.profiler"),G_=Symbol.for("react.provider"),W_=Symbol.for("react.context"),j_=Symbol.for("react.forward_ref"),Z_=Symbol.for("react.suspense"),z_=Symbol.for("react.memo"),H_=Symbol.for("react.lazy"),QI=Symbol.iterator;function $_(t){return t===null||typeof t!="object"?null:(t=QI&&t[QI]||t["@@iterator"],typeof t=="function"?t:null)}var Mk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dk=Object.assign,Lk={};function Vc(t,e,n){this.props=t,this.context=e,this.refs=Lk,this.updater=n||Mk}Vc.prototype.isReactComponent={};Vc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Vc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bk(){}Bk.prototype=Vc.prototype;function ky(t,e,n){this.props=t,this.context=e,this.refs=Lk,this.updater=n||Mk}var Ey=ky.prototype=new Bk;Ey.constructor=ky;Dk(Ey,Vc.prototype);Ey.isPureReactComponent=!0;var qI=Array.isArray,Fk=Object.prototype.hasOwnProperty,Ty={current:null},Uk={key:!0,ref:!0,__self:!0,__source:!0};function Vk(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)Fk.call(e,r)&&!Uk.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:qd,type:t,key:o,ref:s,props:i,_owner:Ty.current}}function X_(t,e){return{$$typeof:qd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xy(t){return typeof t=="object"&&t!==null&&t.$$typeof===qd}function K_(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var eb=/\/+/g;function Zg(t,e){return typeof t=="object"&&t!==null&&t.key!=null?K_(""+t.key):e.toString(36)}function tf(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case qd:case B_:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Zg(s,0):r,qI(i)?(n="",t!=null&&(n=t.replace(eb,"$&/")+"/"),tf(i,e,n,"",function(c){return c})):i!=null&&(xy(i)&&(i=X_(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(eb,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",qI(t))for(var a=0;a<t.length;a++){o=t[a];var l=r+Zg(o,a);s+=tf(o,e,n,l,i)}else if(l=$_(t),typeof l=="function")for(t=l.call(t),a=0;!(o=t.next()).done;)o=o.value,l=r+Zg(o,a++),s+=tf(o,e,n,l,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function bh(t,e,n){if(t==null)return t;var r=[],i=0;return tf(t,r,"","",function(o){return e.call(n,o,i++)}),r}function J_(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cr={current:null},nf={transition:null},Y_={ReactCurrentDispatcher:cr,ReactCurrentBatchConfig:nf,ReactCurrentOwner:Ty};function Gk(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:bh,forEach:function(t,e,n){bh(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return bh(t,function(){e++}),e},toArray:function(t){return bh(t,function(e){return e})||[]},only:function(t){if(!xy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=Vc;He.Fragment=F_;He.Profiler=V_;He.PureComponent=ky;He.StrictMode=U_;He.Suspense=Z_;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y_;He.act=Gk;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Dk({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Ty.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Fk.call(e,l)&&!Uk.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:qd,type:t.type,key:i,ref:o,props:r,_owner:s}};He.createContext=function(t){return t={$$typeof:W_,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:G_,_context:t},t.Consumer=t};He.createElement=Vk;He.createFactory=function(t){var e=Vk.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:j_,render:t}};He.isValidElement=xy;He.lazy=function(t){return{$$typeof:H_,_payload:{_status:-1,_result:t},_init:J_}};He.memo=function(t,e){return{$$typeof:z_,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=nf.transition;nf.transition={};try{t()}finally{nf.transition=e}};He.unstable_act=Gk;He.useCallback=function(t,e){return cr.current.useCallback(t,e)};He.useContext=function(t){return cr.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return cr.current.useDeferredValue(t)};He.useEffect=function(t,e){return cr.current.useEffect(t,e)};He.useId=function(){return cr.current.useId()};He.useImperativeHandle=function(t,e,n){return cr.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return cr.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return cr.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return cr.current.useMemo(t,e)};He.useReducer=function(t,e,n){return cr.current.useReducer(t,e,n)};He.useRef=function(t){return cr.current.useRef(t)};He.useState=function(t){return cr.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return cr.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return cr.current.useTransition()};He.version="18.3.1";Ok.exports=He;var w=Ok.exports;const ut=Qd(w),Q_=Nk({__proto__:null,default:ut},[w]);var q_=w,eO=Symbol.for("react.element"),tO=Symbol.for("react.fragment"),nO=Object.prototype.hasOwnProperty,rO=q_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iO={key:!0,ref:!0,__self:!0,__source:!0};function Wk(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)nO.call(e,r)&&!iO.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:eO,type:t,key:o,ref:s,props:i,_owner:rO.current}}Jp.Fragment=tO;Jp.jsx=Wk;Jp.jsxs=Wk;_k.exports=Jp;var X=_k.exports,ov={},jk={exports:{}},Yr={},Zk={exports:{}},zk={};(function(t){function e($,K){var ie=$.length;$.push(K);e:for(;0<ie;){var j=ie-1>>>1,oe=$[j];if(0<i(oe,K))$[j]=K,$[ie]=oe,ie=j;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var K=$[0],ie=$.pop();if(ie!==K){$[0]=ie;e:for(var j=0,oe=$.length,ke=oe>>>1;j<ke;){var Le=2*(j+1)-1,de=$[Le],Pe=Le+1,Ye=$[Pe];if(0>i(de,ie))Pe<oe&&0>i(Ye,de)?($[j]=Ye,$[Pe]=ie,j=Pe):($[j]=de,$[Le]=ie,j=Le);else if(Pe<oe&&0>i(Ye,ie))$[j]=Ye,$[Pe]=ie,j=Pe;else break e}}return K}function i($,K){var ie=$.sortIndex-K.sortIndex;return ie!==0?ie:$.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,C=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b($){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=$)r(c),K.sortIndex=K.expirationTime,e(l,K);else break;K=n(c)}}function k($){if(g=!1,b($),!p)if(n(l)!==null)p=!0,ee(S);else{var K=n(c);K!==null&&re(k,K.startTime-$)}}function S($,K){p=!1,g&&(g=!1,m(T),T=-1),f=!0;var ie=h;try{for(b(K),d=n(l);d!==null&&(!(d.expirationTime>K)||$&&!B());){var j=d.callback;if(typeof j=="function"){d.callback=null,h=d.priorityLevel;var oe=j(d.expirationTime<=K);K=t.unstable_now(),typeof oe=="function"?d.callback=oe:d===n(l)&&r(l),b(K)}else r(l);d=n(l)}if(d!==null)var ke=!0;else{var Le=n(c);Le!==null&&re(k,Le.startTime-K),ke=!1}return ke}finally{d=null,h=ie,f=!1}}var A=!1,R=null,T=-1,_=5,O=-1;function B(){return!(t.unstable_now()-O<_)}function V(){if(R!==null){var $=t.unstable_now();O=$;var K=!0;try{K=R(!0,$)}finally{K?H():(A=!1,R=null)}}else A=!1}var H;if(typeof v=="function")H=function(){v(V)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,J=Z.port2;Z.port1.onmessage=V,H=function(){J.postMessage(null)}}else H=function(){C(V,0)};function ee($){R=$,A||(A=!0,H())}function re($,K){T=C(function(){$(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ee(S))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function($){switch(h){case 1:case 2:case 3:var K=3;break;default:K=h}var ie=h;h=K;try{return $()}finally{h=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,K){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ie=h;h=$;try{return K()}finally{h=ie}},t.unstable_scheduleCallback=function($,K,ie){var j=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?j+ie:j):ie=j,$){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=ie+oe,$={id:u++,callback:K,priorityLevel:$,startTime:ie,expirationTime:oe,sortIndex:-1},ie>j?($.sortIndex=ie,e(c,$),n(l)===null&&$===n(c)&&(g?(m(T),T=-1):g=!0,re(k,ie-j))):($.sortIndex=oe,e(l,$),p||f||(p=!0,ee(S))),$},t.unstable_shouldYield=B,t.unstable_wrapCallback=function($){var K=h;return function(){var ie=h;h=K;try{return $.apply(this,arguments)}finally{h=ie}}}})(zk);Zk.exports=zk;var oO=Zk.exports,sO=w,Xr=oO;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Hk=new Set,fd={};function wl(t,e){wc(t,e),wc(t+"Capture",e)}function wc(t,e){for(fd[t]=e,t=0;t<e.length;t++)Hk.add(e[t])}var Is=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),sv=Object.prototype.hasOwnProperty,aO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,tb={},nb={};function lO(t){return sv.call(nb,t)?!0:sv.call(tb,t)?!1:aO.test(t)?nb[t]=!0:(tb[t]=!0,!1)}function cO(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uO(t,e,n,r){if(e===null||typeof e>"u"||cO(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ur(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Dn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Dn[t]=new ur(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Dn[e]=new ur(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Dn[t]=new ur(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Dn[t]=new ur(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Dn[t]=new ur(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Dn[t]=new ur(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Dn[t]=new ur(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Dn[t]=new ur(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Dn[t]=new ur(t,5,!1,t.toLowerCase(),null,!1,!1)});var Ry=/[\-:]([a-z])/g;function Py(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Ry,Py);Dn[e]=new ur(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Ry,Py);Dn[e]=new ur(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Ry,Py);Dn[e]=new ur(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Dn[t]=new ur(t,1,!1,t.toLowerCase(),null,!1,!1)});Dn.xlinkHref=new ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Dn[t]=new ur(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ny(t,e,n,r){var i=Dn.hasOwnProperty(e)?Dn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uO(e,n,i,r)&&(n=null),r||i===null?lO(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Rs=sO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wh=Symbol.for("react.element"),Gl=Symbol.for("react.portal"),Wl=Symbol.for("react.fragment"),_y=Symbol.for("react.strict_mode"),av=Symbol.for("react.profiler"),$k=Symbol.for("react.provider"),Xk=Symbol.for("react.context"),Oy=Symbol.for("react.forward_ref"),lv=Symbol.for("react.suspense"),cv=Symbol.for("react.suspense_list"),My=Symbol.for("react.memo"),Xs=Symbol.for("react.lazy"),Kk=Symbol.for("react.offscreen"),rb=Symbol.iterator;function cu(t){return t===null||typeof t!="object"?null:(t=rb&&t[rb]||t["@@iterator"],typeof t=="function"?t:null)}var Vt=Object.assign,zg;function Mu(t){if(zg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zg=e&&e[1]||""}return`
`+zg+t}var Hg=!1;function $g(t,e){if(!t||Hg)return"";Hg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=s&&0<=a);break}}}finally{Hg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mu(t):""}function dO(t){switch(t.tag){case 5:return Mu(t.type);case 16:return Mu("Lazy");case 13:return Mu("Suspense");case 19:return Mu("SuspenseList");case 0:case 2:case 15:return t=$g(t.type,!1),t;case 11:return t=$g(t.type.render,!1),t;case 1:return t=$g(t.type,!0),t;default:return""}}function uv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wl:return"Fragment";case Gl:return"Portal";case av:return"Profiler";case _y:return"StrictMode";case lv:return"Suspense";case cv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xk:return(t.displayName||"Context")+".Consumer";case $k:return(t._context.displayName||"Context")+".Provider";case Oy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case My:return e=t.displayName||null,e!==null?e:uv(t.type)||"Memo";case Xs:e=t._payload,t=t._init;try{return uv(t(e))}catch{}}return null}function hO(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uv(e);case 8:return e===_y?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ba(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Jk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fO(t){var e=Jk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Sh(t){t._valueTracker||(t._valueTracker=fO(t))}function Yk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Jk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Gf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dv(t,e){var n=e.checked;return Vt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ib(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ba(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Qk(t,e){e=e.checked,e!=null&&Ny(t,"checked",e,!1)}function hv(t,e){Qk(t,e);var n=ba(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fv(t,e.type,n):e.hasOwnProperty("defaultValue")&&fv(t,e.type,ba(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ob(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fv(t,e,n){(e!=="number"||Gf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Du=Array.isArray;function nc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ba(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function pv(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Vt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sb(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(le(92));if(Du(n)){if(1<n.length)throw Error(le(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ba(n)}}function qk(t,e){var n=ba(e.value),r=ba(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ab(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function e1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?e1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ah,t1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ah=Ah||document.createElement("div"),Ah.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ah.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pd(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ku={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pO=["Webkit","ms","Moz","O"];Object.keys(Ku).forEach(function(t){pO.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ku[e]=Ku[t]})});function n1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ku.hasOwnProperty(t)&&Ku[t]?(""+e).trim():e+"px"}function r1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=n1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var gO=Vt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function mv(t,e){if(e){if(gO[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function vv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yv=null;function Dy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Cv=null,rc=null,ic=null;function lb(t){if(t=nh(t)){if(typeof Cv!="function")throw Error(le(280));var e=t.stateNode;e&&(e=tg(e),Cv(t.stateNode,t.type,e))}}function i1(t){rc?ic?ic.push(t):ic=[t]:rc=t}function o1(){if(rc){var t=rc,e=ic;if(ic=rc=null,lb(t),e)for(t=0;t<e.length;t++)lb(e[t])}}function s1(t,e){return t(e)}function a1(){}var Xg=!1;function l1(t,e,n){if(Xg)return t(e,n);Xg=!0;try{return s1(t,e,n)}finally{Xg=!1,(rc!==null||ic!==null)&&(a1(),o1())}}function gd(t,e){var n=t.stateNode;if(n===null)return null;var r=tg(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(le(231,e,typeof n));return n}var Iv=!1;if(Is)try{var uu={};Object.defineProperty(uu,"passive",{get:function(){Iv=!0}}),window.addEventListener("test",uu,uu),window.removeEventListener("test",uu,uu)}catch{Iv=!1}function mO(t,e,n,r,i,o,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Ju=!1,Wf=null,jf=!1,bv=null,vO={onError:function(t){Ju=!0,Wf=t}};function yO(t,e,n,r,i,o,s,a,l){Ju=!1,Wf=null,mO.apply(vO,arguments)}function CO(t,e,n,r,i,o,s,a,l){if(yO.apply(this,arguments),Ju){if(Ju){var c=Wf;Ju=!1,Wf=null}else throw Error(le(198));jf||(jf=!0,bv=c)}}function Sl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function c1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function cb(t){if(Sl(t)!==t)throw Error(le(188))}function IO(t){var e=t.alternate;if(!e){if(e=Sl(t),e===null)throw Error(le(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return cb(i),t;if(o===r)return cb(i),e;o=o.sibling}throw Error(le(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(le(189))}}if(n.alternate!==r)throw Error(le(190))}if(n.tag!==3)throw Error(le(188));return n.stateNode.current===n?t:e}function u1(t){return t=IO(t),t!==null?d1(t):null}function d1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=d1(t);if(e!==null)return e;t=t.sibling}return null}var h1=Xr.unstable_scheduleCallback,ub=Xr.unstable_cancelCallback,bO=Xr.unstable_shouldYield,wO=Xr.unstable_requestPaint,Kt=Xr.unstable_now,SO=Xr.unstable_getCurrentPriorityLevel,Ly=Xr.unstable_ImmediatePriority,f1=Xr.unstable_UserBlockingPriority,Zf=Xr.unstable_NormalPriority,AO=Xr.unstable_LowPriority,p1=Xr.unstable_IdlePriority,Yp=null,So=null;function kO(t){if(So&&typeof So.onCommitFiberRoot=="function")try{So.onCommitFiberRoot(Yp,t,void 0,(t.current.flags&128)===128)}catch{}}var Fi=Math.clz32?Math.clz32:xO,EO=Math.log,TO=Math.LN2;function xO(t){return t>>>=0,t===0?32:31-(EO(t)/TO|0)|0}var kh=64,Eh=4194304;function Lu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function zf(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Lu(a):(o&=s,o!==0&&(r=Lu(o)))}else s=n&~i,s!==0?r=Lu(s):o!==0&&(r=Lu(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Fi(e),i=1<<n,r|=t[n],e&=~i;return r}function RO(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function PO(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Fi(o),a=1<<s,l=i[s];l===-1?(!(a&n)||a&r)&&(i[s]=RO(a,e)):l<=e&&(t.expiredLanes|=a),o&=~a}}function wv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g1(){var t=kh;return kh<<=1,!(kh&4194240)&&(kh=64),t}function Kg(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function eh(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fi(e),t[e]=n}function NO(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Fi(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function By(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Fi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var dt=0;function m1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var v1,Fy,y1,C1,I1,Sv=!1,Th=[],da=null,ha=null,fa=null,md=new Map,vd=new Map,Ys=[],_O="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function db(t,e){switch(t){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ha=null;break;case"mouseover":case"mouseout":fa=null;break;case"pointerover":case"pointerout":md.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vd.delete(e.pointerId)}}function du(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=nh(e),e!==null&&Fy(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function OO(t,e,n,r,i){switch(e){case"focusin":return da=du(da,t,e,n,r,i),!0;case"dragenter":return ha=du(ha,t,e,n,r,i),!0;case"mouseover":return fa=du(fa,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return md.set(o,du(md.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,vd.set(o,du(vd.get(o)||null,t,e,n,r,i)),!0}return!1}function b1(t){var e=Ha(t.target);if(e!==null){var n=Sl(e);if(n!==null){if(e=n.tag,e===13){if(e=c1(n),e!==null){t.blockedOn=e,I1(t.priority,function(){y1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function rf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Av(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);yv=r,n.target.dispatchEvent(r),yv=null}else return e=nh(n),e!==null&&Fy(e),t.blockedOn=n,!1;e.shift()}return!0}function hb(t,e,n){rf(t)&&n.delete(e)}function MO(){Sv=!1,da!==null&&rf(da)&&(da=null),ha!==null&&rf(ha)&&(ha=null),fa!==null&&rf(fa)&&(fa=null),md.forEach(hb),vd.forEach(hb)}function hu(t,e){t.blockedOn===e&&(t.blockedOn=null,Sv||(Sv=!0,Xr.unstable_scheduleCallback(Xr.unstable_NormalPriority,MO)))}function yd(t){function e(i){return hu(i,t)}if(0<Th.length){hu(Th[0],t);for(var n=1;n<Th.length;n++){var r=Th[n];r.blockedOn===t&&(r.blockedOn=null)}}for(da!==null&&hu(da,t),ha!==null&&hu(ha,t),fa!==null&&hu(fa,t),md.forEach(e),vd.forEach(e),n=0;n<Ys.length;n++)r=Ys[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ys.length&&(n=Ys[0],n.blockedOn===null);)b1(n),n.blockedOn===null&&Ys.shift()}var oc=Rs.ReactCurrentBatchConfig,Hf=!0;function DO(t,e,n,r){var i=dt,o=oc.transition;oc.transition=null;try{dt=1,Uy(t,e,n,r)}finally{dt=i,oc.transition=o}}function LO(t,e,n,r){var i=dt,o=oc.transition;oc.transition=null;try{dt=4,Uy(t,e,n,r)}finally{dt=i,oc.transition=o}}function Uy(t,e,n,r){if(Hf){var i=Av(t,e,n,r);if(i===null)om(t,e,r,$f,n),db(t,r);else if(OO(i,t,e,n,r))r.stopPropagation();else if(db(t,r),e&4&&-1<_O.indexOf(t)){for(;i!==null;){var o=nh(i);if(o!==null&&v1(o),o=Av(t,e,n,r),o===null&&om(t,e,r,$f,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else om(t,e,r,null,n)}}var $f=null;function Av(t,e,n,r){if($f=null,t=Dy(r),t=Ha(t),t!==null)if(e=Sl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=c1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $f=t,null}function w1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(SO()){case Ly:return 1;case f1:return 4;case Zf:case AO:return 16;case p1:return 536870912;default:return 16}default:return 16}}var ea=null,Vy=null,of=null;function S1(){if(of)return of;var t,e=Vy,n=e.length,r,i="value"in ea?ea.value:ea.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return of=i.slice(t,1<r?1-r:void 0)}function sf(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xh(){return!0}function fb(){return!1}function Qr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?xh:fb,this.isPropagationStopped=fb,this}return Vt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xh)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xh)},persist:function(){},isPersistent:xh}),e}var Gc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gy=Qr(Gc),th=Vt({},Gc,{view:0,detail:0}),BO=Qr(th),Jg,Yg,fu,Qp=Vt({},th,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wy,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fu&&(fu&&t.type==="mousemove"?(Jg=t.screenX-fu.screenX,Yg=t.screenY-fu.screenY):Yg=Jg=0,fu=t),Jg)},movementY:function(t){return"movementY"in t?t.movementY:Yg}}),pb=Qr(Qp),FO=Vt({},Qp,{dataTransfer:0}),UO=Qr(FO),VO=Vt({},th,{relatedTarget:0}),Qg=Qr(VO),GO=Vt({},Gc,{animationName:0,elapsedTime:0,pseudoElement:0}),WO=Qr(GO),jO=Vt({},Gc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),ZO=Qr(jO),zO=Vt({},Gc,{data:0}),gb=Qr(zO),HO={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$O={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XO={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KO(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XO[t])?!!e[t]:!1}function Wy(){return KO}var JO=Vt({},th,{key:function(t){if(t.key){var e=HO[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=sf(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$O[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wy,charCode:function(t){return t.type==="keypress"?sf(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?sf(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YO=Qr(JO),QO=Vt({},Qp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mb=Qr(QO),qO=Vt({},th,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wy}),eM=Qr(qO),tM=Vt({},Gc,{propertyName:0,elapsedTime:0,pseudoElement:0}),nM=Qr(tM),rM=Vt({},Qp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),iM=Qr(rM),oM=[9,13,27,32],jy=Is&&"CompositionEvent"in window,Yu=null;Is&&"documentMode"in document&&(Yu=document.documentMode);var sM=Is&&"TextEvent"in window&&!Yu,A1=Is&&(!jy||Yu&&8<Yu&&11>=Yu),vb=" ",yb=!1;function k1(t,e){switch(t){case"keyup":return oM.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var jl=!1;function aM(t,e){switch(t){case"compositionend":return E1(e);case"keypress":return e.which!==32?null:(yb=!0,vb);case"textInput":return t=e.data,t===vb&&yb?null:t;default:return null}}function lM(t,e){if(jl)return t==="compositionend"||!jy&&k1(t,e)?(t=S1(),of=Vy=ea=null,jl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return A1&&e.locale!=="ko"?null:e.data;default:return null}}var cM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cM[t.type]:e==="textarea"}function T1(t,e,n,r){i1(r),e=Xf(e,"onChange"),0<e.length&&(n=new Gy("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qu=null,Cd=null;function uM(t){F1(t,0)}function qp(t){var e=Hl(t);if(Yk(e))return t}function dM(t,e){if(t==="change")return e}var x1=!1;if(Is){var qg;if(Is){var em="oninput"in document;if(!em){var Ib=document.createElement("div");Ib.setAttribute("oninput","return;"),em=typeof Ib.oninput=="function"}qg=em}else qg=!1;x1=qg&&(!document.documentMode||9<document.documentMode)}function bb(){Qu&&(Qu.detachEvent("onpropertychange",R1),Cd=Qu=null)}function R1(t){if(t.propertyName==="value"&&qp(Cd)){var e=[];T1(e,Cd,t,Dy(t)),l1(uM,e)}}function hM(t,e,n){t==="focusin"?(bb(),Qu=e,Cd=n,Qu.attachEvent("onpropertychange",R1)):t==="focusout"&&bb()}function fM(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return qp(Cd)}function pM(t,e){if(t==="click")return qp(e)}function gM(t,e){if(t==="input"||t==="change")return qp(e)}function mM(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gi=typeof Object.is=="function"?Object.is:mM;function Id(t,e){if(Gi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!sv.call(e,i)||!Gi(t[i],e[i]))return!1}return!0}function wb(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sb(t,e){var n=wb(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wb(n)}}function P1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?P1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N1(){for(var t=window,e=Gf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Gf(t.document)}return e}function Zy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function vM(t){var e=N1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&P1(n.ownerDocument.documentElement,n)){if(r!==null&&Zy(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=Sb(n,o);var s=Sb(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yM=Is&&"documentMode"in document&&11>=document.documentMode,Zl=null,kv=null,qu=null,Ev=!1;function Ab(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ev||Zl==null||Zl!==Gf(r)||(r=Zl,"selectionStart"in r&&Zy(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qu&&Id(qu,r)||(qu=r,r=Xf(kv,"onSelect"),0<r.length&&(e=new Gy("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zl)))}function Rh(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zl={animationend:Rh("Animation","AnimationEnd"),animationiteration:Rh("Animation","AnimationIteration"),animationstart:Rh("Animation","AnimationStart"),transitionend:Rh("Transition","TransitionEnd")},tm={},_1={};Is&&(_1=document.createElement("div").style,"AnimationEvent"in window||(delete zl.animationend.animation,delete zl.animationiteration.animation,delete zl.animationstart.animation),"TransitionEvent"in window||delete zl.transitionend.transition);function eg(t){if(tm[t])return tm[t];if(!zl[t])return t;var e=zl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in _1)return tm[t]=e[n];return t}var O1=eg("animationend"),M1=eg("animationiteration"),D1=eg("animationstart"),L1=eg("transitionend"),B1=new Map,kb="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(t,e){B1.set(t,e),wl(e,[t])}for(var nm=0;nm<kb.length;nm++){var rm=kb[nm],CM=rm.toLowerCase(),IM=rm[0].toUpperCase()+rm.slice(1);Ea(CM,"on"+IM)}Ea(O1,"onAnimationEnd");Ea(M1,"onAnimationIteration");Ea(D1,"onAnimationStart");Ea("dblclick","onDoubleClick");Ea("focusin","onFocus");Ea("focusout","onBlur");Ea(L1,"onTransitionEnd");wc("onMouseEnter",["mouseout","mouseover"]);wc("onMouseLeave",["mouseout","mouseover"]);wc("onPointerEnter",["pointerout","pointerover"]);wc("onPointerLeave",["pointerout","pointerover"]);wl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wl("onBeforeInput",["compositionend","keypress","textInput","paste"]);wl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bM=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bu));function Eb(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,CO(r,e,void 0,t),t.currentTarget=null}function F1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;Eb(i,a,c),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;Eb(i,a,c),o=l}}}if(jf)throw t=bv,jf=!1,bv=null,t}function Et(t,e){var n=e[Nv];n===void 0&&(n=e[Nv]=new Set);var r=t+"__bubble";n.has(r)||(U1(e,t,2,!1),n.add(r))}function im(t,e,n){var r=0;e&&(r|=4),U1(n,t,r,e)}var Ph="_reactListening"+Math.random().toString(36).slice(2);function bd(t){if(!t[Ph]){t[Ph]=!0,Hk.forEach(function(n){n!=="selectionchange"&&(bM.has(n)||im(n,!1,t),im(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ph]||(e[Ph]=!0,im("selectionchange",!1,e))}}function U1(t,e,n,r){switch(w1(e)){case 1:var i=DO;break;case 4:i=LO;break;default:i=Uy}n=i.bind(null,e,n,t),i=void 0,!Iv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function om(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Ha(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}l1(function(){var c=o,u=Dy(n),d=[];e:{var h=B1.get(t);if(h!==void 0){var f=Gy,p=t;switch(t){case"keypress":if(sf(n)===0)break e;case"keydown":case"keyup":f=YO;break;case"focusin":p="focus",f=Qg;break;case"focusout":p="blur",f=Qg;break;case"beforeblur":case"afterblur":f=Qg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=UO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=eM;break;case O1:case M1:case D1:f=WO;break;case L1:f=nM;break;case"scroll":f=BO;break;case"wheel":f=iM;break;case"copy":case"cut":case"paste":f=ZO;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=mb}var g=(e&4)!==0,C=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var v=c,b;v!==null;){b=v;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,m!==null&&(k=gd(v,m),k!=null&&g.push(wd(v,k,b)))),C)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==yv&&(p=n.relatedTarget||n.fromElement)&&(Ha(p)||p[bs]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Ha(p):null,p!==null&&(C=Sl(p),p!==C||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(g=pb,k="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=mb,k="onPointerLeave",m="onPointerEnter",v="pointer"),C=f==null?h:Hl(f),b=p==null?h:Hl(p),h=new g(k,v+"leave",f,n,u),h.target=C,h.relatedTarget=b,k=null,Ha(u)===c&&(g=new g(m,v+"enter",p,n,u),g.target=b,g.relatedTarget=C,k=g),C=k,f&&p)t:{for(g=f,m=p,v=0,b=g;b;b=_l(b))v++;for(b=0,k=m;k;k=_l(k))b++;for(;0<v-b;)g=_l(g),v--;for(;0<b-v;)m=_l(m),b--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=_l(g),m=_l(m)}g=null}else g=null;f!==null&&Tb(d,h,f,g,!1),p!==null&&C!==null&&Tb(d,C,p,g,!0)}}e:{if(h=c?Hl(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var S=dM;else if(Cb(h))if(x1)S=gM;else{S=fM;var A=hM}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=pM);if(S&&(S=S(t,c))){T1(d,S,n,u);break e}A&&A(t,h,c),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&fv(h,"number",h.value)}switch(A=c?Hl(c):window,t){case"focusin":(Cb(A)||A.contentEditable==="true")&&(Zl=A,kv=c,qu=null);break;case"focusout":qu=kv=Zl=null;break;case"mousedown":Ev=!0;break;case"contextmenu":case"mouseup":case"dragend":Ev=!1,Ab(d,n,u);break;case"selectionchange":if(yM)break;case"keydown":case"keyup":Ab(d,n,u)}var R;if(jy)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else jl?k1(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(A1&&n.locale!=="ko"&&(jl||T!=="onCompositionStart"?T==="onCompositionEnd"&&jl&&(R=S1()):(ea=u,Vy="value"in ea?ea.value:ea.textContent,jl=!0)),A=Xf(c,T),0<A.length&&(T=new gb(T,t,null,n,u),d.push({event:T,listeners:A}),R?T.data=R:(R=E1(n),R!==null&&(T.data=R)))),(R=sM?aM(t,n):lM(t,n))&&(c=Xf(c,"onBeforeInput"),0<c.length&&(u=new gb("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=R))}F1(d,e)})}function wd(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=gd(t,n),o!=null&&r.unshift(wd(t,o,i)),o=gd(t,e),o!=null&&r.push(wd(t,o,i))),t=t.return}return r}function _l(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tb(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=gd(n,o),l!=null&&s.unshift(wd(n,l,a))):i||(l=gd(n,o),l!=null&&s.push(wd(n,l,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var wM=/\r\n?/g,SM=/\u0000|\uFFFD/g;function xb(t){return(typeof t=="string"?t:""+t).replace(wM,`
`).replace(SM,"")}function Nh(t,e,n){if(e=xb(e),xb(t)!==e&&n)throw Error(le(425))}function Kf(){}var Tv=null,xv=null;function Rv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Pv=typeof setTimeout=="function"?setTimeout:void 0,AM=typeof clearTimeout=="function"?clearTimeout:void 0,Rb=typeof Promise=="function"?Promise:void 0,kM=typeof queueMicrotask=="function"?queueMicrotask:typeof Rb<"u"?function(t){return Rb.resolve(null).then(t).catch(EM)}:Pv;function EM(t){setTimeout(function(){throw t})}function sm(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),yd(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);yd(e)}function pa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Pb(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wc=Math.random().toString(36).slice(2),ro="__reactFiber$"+Wc,Sd="__reactProps$"+Wc,bs="__reactContainer$"+Wc,Nv="__reactEvents$"+Wc,TM="__reactListeners$"+Wc,xM="__reactHandles$"+Wc;function Ha(t){var e=t[ro];if(e)return e;for(var n=t.parentNode;n;){if(e=n[bs]||n[ro]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Pb(t);t!==null;){if(n=t[ro])return n;t=Pb(t)}return e}t=n,n=t.parentNode}return null}function nh(t){return t=t[ro]||t[bs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function tg(t){return t[Sd]||null}var _v=[],$l=-1;function Ta(t){return{current:t}}function Nt(t){0>$l||(t.current=_v[$l],_v[$l]=null,$l--)}function St(t,e){$l++,_v[$l]=t.current,t.current=e}var wa={},Xn=Ta(wa),Ar=Ta(!1),al=wa;function Sc(t,e){var n=t.type.contextTypes;if(!n)return wa;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function kr(t){return t=t.childContextTypes,t!=null}function Jf(){Nt(Ar),Nt(Xn)}function Nb(t,e,n){if(Xn.current!==wa)throw Error(le(168));St(Xn,e),St(Ar,n)}function V1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(le(108,hO(t)||"Unknown",i));return Vt({},n,r)}function Yf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wa,al=Xn.current,St(Xn,t),St(Ar,Ar.current),!0}function _b(t,e,n){var r=t.stateNode;if(!r)throw Error(le(169));n?(t=V1(t,e,al),r.__reactInternalMemoizedMergedChildContext=t,Nt(Ar),Nt(Xn),St(Xn,t)):Nt(Ar),St(Ar,n)}var Uo=null,ng=!1,am=!1;function G1(t){Uo===null?Uo=[t]:Uo.push(t)}function RM(t){ng=!0,G1(t)}function xa(){if(!am&&Uo!==null){am=!0;var t=0,e=dt;try{var n=Uo;for(dt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Uo=null,ng=!1}catch(i){throw Uo!==null&&(Uo=Uo.slice(t+1)),h1(Ly,xa),i}finally{dt=e,am=!1}}return null}var Xl=[],Kl=0,Qf=null,qf=0,ti=[],ni=0,ll=null,Zo=1,zo="";function La(t,e){Xl[Kl++]=qf,Xl[Kl++]=Qf,Qf=t,qf=e}function W1(t,e,n){ti[ni++]=Zo,ti[ni++]=zo,ti[ni++]=ll,ll=t;var r=Zo;t=zo;var i=32-Fi(r)-1;r&=~(1<<i),n+=1;var o=32-Fi(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Zo=1<<32-Fi(e)+i|n<<i|r,zo=o+t}else Zo=1<<o|n<<i|r,zo=t}function zy(t){t.return!==null&&(La(t,1),W1(t,1,0))}function Hy(t){for(;t===Qf;)Qf=Xl[--Kl],Xl[Kl]=null,qf=Xl[--Kl],Xl[Kl]=null;for(;t===ll;)ll=ti[--ni],ti[ni]=null,zo=ti[--ni],ti[ni]=null,Zo=ti[--ni],ti[ni]=null}var Hr=null,Zr=null,Dt=!1,Pi=null;function j1(t,e){var n=ii(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ob(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hr=t,Zr=pa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hr=t,Zr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ll!==null?{id:Zo,overflow:zo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ii(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hr=t,Zr=null,!0):!1;default:return!1}}function Ov(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mv(t){if(Dt){var e=Zr;if(e){var n=e;if(!Ob(t,e)){if(Ov(t))throw Error(le(418));e=pa(n.nextSibling);var r=Hr;e&&Ob(t,e)?j1(r,n):(t.flags=t.flags&-4097|2,Dt=!1,Hr=t)}}else{if(Ov(t))throw Error(le(418));t.flags=t.flags&-4097|2,Dt=!1,Hr=t}}}function Mb(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hr=t}function _h(t){if(t!==Hr)return!1;if(!Dt)return Mb(t),Dt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Rv(t.type,t.memoizedProps)),e&&(e=Zr)){if(Ov(t))throw Z1(),Error(le(418));for(;e;)j1(t,e),e=pa(e.nextSibling)}if(Mb(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zr=pa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zr=null}}else Zr=Hr?pa(t.stateNode.nextSibling):null;return!0}function Z1(){for(var t=Zr;t;)t=pa(t.nextSibling)}function Ac(){Zr=Hr=null,Dt=!1}function $y(t){Pi===null?Pi=[t]:Pi.push(t)}var PM=Rs.ReactCurrentBatchConfig;function pu(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(le(309));var r=n.stateNode}if(!r)throw Error(le(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(le(284));if(!n._owner)throw Error(le(290,t))}return t}function Oh(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Db(t){var e=t._init;return e(t._payload)}function z1(t){function e(m,v){if(t){var b=m.deletions;b===null?(m.deletions=[v],m.flags|=16):b.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=ya(m,v),m.index=0,m.sibling=null,m}function o(m,v,b){return m.index=b,t?(b=m.alternate,b!==null?(b=b.index,b<v?(m.flags|=2,v):b):(m.flags|=2,v)):(m.flags|=1048576,v)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,b,k){return v===null||v.tag!==6?(v=pm(b,m.mode,k),v.return=m,v):(v=i(v,b),v.return=m,v)}function l(m,v,b,k){var S=b.type;return S===Wl?u(m,v,b.props.children,k,b.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Xs&&Db(S)===v.type)?(k=i(v,b.props),k.ref=pu(m,v,b),k.return=m,k):(k=ff(b.type,b.key,b.props,null,m.mode,k),k.ref=pu(m,v,b),k.return=m,k)}function c(m,v,b,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=gm(b,m.mode,k),v.return=m,v):(v=i(v,b.children||[]),v.return=m,v)}function u(m,v,b,k,S){return v===null||v.tag!==7?(v=tl(b,m.mode,k,S),v.return=m,v):(v=i(v,b),v.return=m,v)}function d(m,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pm(""+v,m.mode,b),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case wh:return b=ff(v.type,v.key,v.props,null,m.mode,b),b.ref=pu(m,null,v),b.return=m,b;case Gl:return v=gm(v,m.mode,b),v.return=m,v;case Xs:var k=v._init;return d(m,k(v._payload),b)}if(Du(v)||cu(v))return v=tl(v,m.mode,b,null),v.return=m,v;Oh(m,v)}return null}function h(m,v,b,k){var S=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return S!==null?null:a(m,v,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case wh:return b.key===S?l(m,v,b,k):null;case Gl:return b.key===S?c(m,v,b,k):null;case Xs:return S=b._init,h(m,v,S(b._payload),k)}if(Du(b)||cu(b))return S!==null?null:u(m,v,b,k,null);Oh(m,b)}return null}function f(m,v,b,k,S){if(typeof k=="string"&&k!==""||typeof k=="number")return m=m.get(b)||null,a(v,m,""+k,S);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case wh:return m=m.get(k.key===null?b:k.key)||null,l(v,m,k,S);case Gl:return m=m.get(k.key===null?b:k.key)||null,c(v,m,k,S);case Xs:var A=k._init;return f(m,v,b,A(k._payload),S)}if(Du(k)||cu(k))return m=m.get(b)||null,u(v,m,k,S,null);Oh(v,k)}return null}function p(m,v,b,k){for(var S=null,A=null,R=v,T=v=0,_=null;R!==null&&T<b.length;T++){R.index>T?(_=R,R=null):_=R.sibling;var O=h(m,R,b[T],k);if(O===null){R===null&&(R=_);break}t&&R&&O.alternate===null&&e(m,R),v=o(O,v,T),A===null?S=O:A.sibling=O,A=O,R=_}if(T===b.length)return n(m,R),Dt&&La(m,T),S;if(R===null){for(;T<b.length;T++)R=d(m,b[T],k),R!==null&&(v=o(R,v,T),A===null?S=R:A.sibling=R,A=R);return Dt&&La(m,T),S}for(R=r(m,R);T<b.length;T++)_=f(R,m,T,b[T],k),_!==null&&(t&&_.alternate!==null&&R.delete(_.key===null?T:_.key),v=o(_,v,T),A===null?S=_:A.sibling=_,A=_);return t&&R.forEach(function(B){return e(m,B)}),Dt&&La(m,T),S}function g(m,v,b,k){var S=cu(b);if(typeof S!="function")throw Error(le(150));if(b=S.call(b),b==null)throw Error(le(151));for(var A=S=null,R=v,T=v=0,_=null,O=b.next();R!==null&&!O.done;T++,O=b.next()){R.index>T?(_=R,R=null):_=R.sibling;var B=h(m,R,O.value,k);if(B===null){R===null&&(R=_);break}t&&R&&B.alternate===null&&e(m,R),v=o(B,v,T),A===null?S=B:A.sibling=B,A=B,R=_}if(O.done)return n(m,R),Dt&&La(m,T),S;if(R===null){for(;!O.done;T++,O=b.next())O=d(m,O.value,k),O!==null&&(v=o(O,v,T),A===null?S=O:A.sibling=O,A=O);return Dt&&La(m,T),S}for(R=r(m,R);!O.done;T++,O=b.next())O=f(R,m,T,O.value,k),O!==null&&(t&&O.alternate!==null&&R.delete(O.key===null?T:O.key),v=o(O,v,T),A===null?S=O:A.sibling=O,A=O);return t&&R.forEach(function(V){return e(m,V)}),Dt&&La(m,T),S}function C(m,v,b,k){if(typeof b=="object"&&b!==null&&b.type===Wl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case wh:e:{for(var S=b.key,A=v;A!==null;){if(A.key===S){if(S=b.type,S===Wl){if(A.tag===7){n(m,A.sibling),v=i(A,b.props.children),v.return=m,m=v;break e}}else if(A.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===Xs&&Db(S)===A.type){n(m,A.sibling),v=i(A,b.props),v.ref=pu(m,A,b),v.return=m,m=v;break e}n(m,A);break}else e(m,A);A=A.sibling}b.type===Wl?(v=tl(b.props.children,m.mode,k,b.key),v.return=m,m=v):(k=ff(b.type,b.key,b.props,null,m.mode,k),k.ref=pu(m,v,b),k.return=m,m=k)}return s(m);case Gl:e:{for(A=b.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(m,v.sibling),v=i(v,b.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=gm(b,m.mode,k),v.return=m,m=v}return s(m);case Xs:return A=b._init,C(m,v,A(b._payload),k)}if(Du(b))return p(m,v,b,k);if(cu(b))return g(m,v,b,k);Oh(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,b),v.return=m,m=v):(n(m,v),v=pm(b,m.mode,k),v.return=m,m=v),s(m)):n(m,v)}return C}var kc=z1(!0),H1=z1(!1),ep=Ta(null),tp=null,Jl=null,Xy=null;function Ky(){Xy=Jl=tp=null}function Jy(t){var e=ep.current;Nt(ep),t._currentValue=e}function Dv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function sc(t,e){tp=t,Xy=Jl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(wr=!0),t.firstContext=null)}function ui(t){var e=t._currentValue;if(Xy!==t)if(t={context:t,memoizedValue:e,next:null},Jl===null){if(tp===null)throw Error(le(308));Jl=t,tp.dependencies={lanes:0,firstContext:t}}else Jl=Jl.next=t;return e}var $a=null;function Yy(t){$a===null?$a=[t]:$a.push(t)}function $1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Yy(e)):(n.next=i.next,i.next=n),e.interleaved=n,ws(t,r)}function ws(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ks=!1;function Qy(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function X1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ms(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ga(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,nt&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,ws(t,n)}return i=r.interleaved,i===null?(e.next=e,Yy(r)):(e.next=i.next,i.next=e),r.interleaved=e,ws(t,n)}function af(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,By(t,n)}}function Lb(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function np(t,e,n,r){var i=t.updateQueue;Ks=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?o=c:s.next=c,s=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(o!==null){var d=i.baseState;s=0,u=c=l=null,a=o;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Vt({},d,h);break e;case 2:Ks=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ul|=s,t.lanes=s,t.memoizedState=d}}function Bb(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(le(191,i));i.call(r)}}}var rh={},Ao=Ta(rh),Ad=Ta(rh),kd=Ta(rh);function Xa(t){if(t===rh)throw Error(le(174));return t}function qy(t,e){switch(St(kd,e),St(Ad,t),St(Ao,rh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:gv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=gv(e,t)}Nt(Ao),St(Ao,e)}function Ec(){Nt(Ao),Nt(Ad),Nt(kd)}function K1(t){Xa(kd.current);var e=Xa(Ao.current),n=gv(e,t.type);e!==n&&(St(Ad,t),St(Ao,n))}function eC(t){Ad.current===t&&(Nt(Ao),Nt(Ad))}var Ft=Ta(0);function rp(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var lm=[];function tC(){for(var t=0;t<lm.length;t++)lm[t]._workInProgressVersionPrimary=null;lm.length=0}var lf=Rs.ReactCurrentDispatcher,cm=Rs.ReactCurrentBatchConfig,cl=0,Ut=null,fn=null,bn=null,ip=!1,ed=!1,Ed=0,NM=0;function Gn(){throw Error(le(321))}function nC(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Gi(t[n],e[n]))return!1;return!0}function rC(t,e,n,r,i,o){if(cl=o,Ut=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,lf.current=t===null||t.memoizedState===null?DM:LM,t=n(r,i),ed){o=0;do{if(ed=!1,Ed=0,25<=o)throw Error(le(301));o+=1,bn=fn=null,e.updateQueue=null,lf.current=BM,t=n(r,i)}while(ed)}if(lf.current=op,e=fn!==null&&fn.next!==null,cl=0,bn=fn=Ut=null,ip=!1,e)throw Error(le(300));return t}function iC(){var t=Ed!==0;return Ed=0,t}function to(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?Ut.memoizedState=bn=t:bn=bn.next=t,bn}function di(){if(fn===null){var t=Ut.alternate;t=t!==null?t.memoizedState:null}else t=fn.next;var e=bn===null?Ut.memoizedState:bn.next;if(e!==null)bn=e,fn=t;else{if(t===null)throw Error(le(310));fn=t,t={memoizedState:fn.memoizedState,baseState:fn.baseState,baseQueue:fn.baseQueue,queue:fn.queue,next:null},bn===null?Ut.memoizedState=bn=t:bn=bn.next=t}return bn}function Td(t,e){return typeof e=="function"?e(t):e}function um(t){var e=di(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=fn,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,c=o;do{var u=c.lane;if((cl&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,Ut.lanes|=u,ul|=u}c=c.next}while(c!==null&&c!==o);l===null?s=r:l.next=a,Gi(r,e.memoizedState)||(wr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,Ut.lanes|=o,ul|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function dm(t){var e=di(),n=e.queue;if(n===null)throw Error(le(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Gi(o,e.memoizedState)||(wr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function J1(){}function Y1(t,e){var n=Ut,r=di(),i=e(),o=!Gi(r.memoizedState,i);if(o&&(r.memoizedState=i,wr=!0),r=r.queue,oC(eE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||bn!==null&&bn.memoizedState.tag&1){if(n.flags|=2048,xd(9,q1.bind(null,n,r,i,e),void 0,null),Sn===null)throw Error(le(349));cl&30||Q1(n,e,i)}return i}function Q1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function q1(t,e,n,r){e.value=n,e.getSnapshot=r,tE(e)&&nE(t)}function eE(t,e,n){return n(function(){tE(e)&&nE(t)})}function tE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gi(t,n)}catch{return!0}}function nE(t){var e=ws(t,1);e!==null&&Ui(e,t,1,-1)}function Fb(t){var e=to();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Td,lastRenderedState:t},e.queue=t,t=t.dispatch=MM.bind(null,Ut,t),[e.memoizedState,t]}function xd(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ut.updateQueue,e===null?(e={lastEffect:null,stores:null},Ut.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function rE(){return di().memoizedState}function cf(t,e,n,r){var i=to();Ut.flags|=t,i.memoizedState=xd(1|e,n,void 0,r===void 0?null:r)}function rg(t,e,n,r){var i=di();r=r===void 0?null:r;var o=void 0;if(fn!==null){var s=fn.memoizedState;if(o=s.destroy,r!==null&&nC(r,s.deps)){i.memoizedState=xd(e,n,o,r);return}}Ut.flags|=t,i.memoizedState=xd(1|e,n,o,r)}function Ub(t,e){return cf(8390656,8,t,e)}function oC(t,e){return rg(2048,8,t,e)}function iE(t,e){return rg(4,2,t,e)}function oE(t,e){return rg(4,4,t,e)}function sE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aE(t,e,n){return n=n!=null?n.concat([t]):null,rg(4,4,sE.bind(null,e,t),n)}function sC(){}function lE(t,e){var n=di();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nC(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function cE(t,e){var n=di();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&nC(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function uE(t,e,n){return cl&21?(Gi(n,e)||(n=g1(),Ut.lanes|=n,ul|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,wr=!0),t.memoizedState=n)}function _M(t,e){var n=dt;dt=n!==0&&4>n?n:4,t(!0);var r=cm.transition;cm.transition={};try{t(!1),e()}finally{dt=n,cm.transition=r}}function dE(){return di().memoizedState}function OM(t,e,n){var r=va(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},hE(t))fE(e,n);else if(n=$1(t,e,n,r),n!==null){var i=ar();Ui(n,t,r,i),pE(n,e,r)}}function MM(t,e,n){var r=va(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(hE(t))fE(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Gi(a,s)){var l=e.interleaved;l===null?(i.next=i,Yy(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=$1(t,e,i,r),n!==null&&(i=ar(),Ui(n,t,r,i),pE(n,e,r))}}function hE(t){var e=t.alternate;return t===Ut||e!==null&&e===Ut}function fE(t,e){ed=ip=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function pE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,By(t,n)}}var op={readContext:ui,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},DM={readContext:ui,useCallback:function(t,e){return to().memoizedState=[t,e===void 0?null:e],t},useContext:ui,useEffect:Ub,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cf(4194308,4,sE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cf(4194308,4,t,e)},useInsertionEffect:function(t,e){return cf(4,2,t,e)},useMemo:function(t,e){var n=to();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=to();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OM.bind(null,Ut,t),[r.memoizedState,t]},useRef:function(t){var e=to();return t={current:t},e.memoizedState=t},useState:Fb,useDebugValue:sC,useDeferredValue:function(t){return to().memoizedState=t},useTransition:function(){var t=Fb(!1),e=t[0];return t=_M.bind(null,t[1]),to().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ut,i=to();if(Dt){if(n===void 0)throw Error(le(407));n=n()}else{if(n=e(),Sn===null)throw Error(le(349));cl&30||Q1(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Ub(eE.bind(null,r,o,t),[t]),r.flags|=2048,xd(9,q1.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=to(),e=Sn.identifierPrefix;if(Dt){var n=zo,r=Zo;n=(r&~(1<<32-Fi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ed++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NM++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LM={readContext:ui,useCallback:lE,useContext:ui,useEffect:oC,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:oE,useMemo:cE,useReducer:um,useRef:rE,useState:function(){return um(Td)},useDebugValue:sC,useDeferredValue:function(t){var e=di();return uE(e,fn.memoizedState,t)},useTransition:function(){var t=um(Td)[0],e=di().memoizedState;return[t,e]},useMutableSource:J1,useSyncExternalStore:Y1,useId:dE,unstable_isNewReconciler:!1},BM={readContext:ui,useCallback:lE,useContext:ui,useEffect:oC,useImperativeHandle:aE,useInsertionEffect:iE,useLayoutEffect:oE,useMemo:cE,useReducer:dm,useRef:rE,useState:function(){return dm(Td)},useDebugValue:sC,useDeferredValue:function(t){var e=di();return fn===null?e.memoizedState=t:uE(e,fn.memoizedState,t)},useTransition:function(){var t=dm(Td)[0],e=di().memoizedState;return[t,e]},useMutableSource:J1,useSyncExternalStore:Y1,useId:dE,unstable_isNewReconciler:!1};function yi(t,e){if(t&&t.defaultProps){e=Vt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Lv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Vt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ig={isMounted:function(t){return(t=t._reactInternals)?Sl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ar(),i=va(t),o=ms(r,i);o.payload=e,n!=null&&(o.callback=n),e=ga(t,o,i),e!==null&&(Ui(e,t,i,r),af(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ar(),i=va(t),o=ms(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ga(t,o,i),e!==null&&(Ui(e,t,i,r),af(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ar(),r=va(t),i=ms(n,r);i.tag=2,e!=null&&(i.callback=e),e=ga(t,i,r),e!==null&&(Ui(e,t,r,n),af(e,t,r))}};function Vb(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Id(n,r)||!Id(i,o):!0}function gE(t,e,n){var r=!1,i=wa,o=e.contextType;return typeof o=="object"&&o!==null?o=ui(o):(i=kr(e)?al:Xn.current,r=e.contextTypes,o=(r=r!=null)?Sc(t,i):wa),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ig,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Gb(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ig.enqueueReplaceState(e,e.state,null)}function Bv(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Qy(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ui(o):(o=kr(e)?al:Xn.current,i.context=Sc(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Lv(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ig.enqueueReplaceState(i,i.state,null),np(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Tc(t,e){try{var n="",r=e;do n+=dO(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function hm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Fv(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var FM=typeof WeakMap=="function"?WeakMap:Map;function mE(t,e,n){n=ms(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ap||(ap=!0,Xv=r),Fv(t,e)},n}function vE(t,e,n){n=ms(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Fv(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Fv(t,e),typeof r!="function"&&(ma===null?ma=new Set([this]):ma.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Wb(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new FM;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=QM.bind(null,t,e,n),e.then(t,t))}function jb(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Zb(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ms(-1,1),e.tag=2,ga(n,e,1))),n.lanes|=1),t)}var UM=Rs.ReactCurrentOwner,wr=!1;function qn(t,e,n,r){e.child=t===null?H1(e,null,n,r):kc(e,t.child,n,r)}function zb(t,e,n,r,i){n=n.render;var o=e.ref;return sc(e,i),r=rC(t,e,n,r,o,i),n=iC(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Dt&&n&&zy(e),e.flags|=1,qn(t,e,r,i),e.child)}function Hb(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!pC(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,yE(t,e,o,r,i)):(t=ff(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Id,n(s,r)&&t.ref===e.ref)return Ss(t,e,i)}return e.flags|=1,t=ya(o,r),t.ref=e.ref,t.return=e,e.child=t}function yE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Id(o,r)&&t.ref===e.ref)if(wr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(wr=!0);else return e.lanes=t.lanes,Ss(t,e,i)}return Uv(t,e,n,r,i)}function CE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(Ql,Br),Br|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,St(Ql,Br),Br|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,St(Ql,Br),Br|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,St(Ql,Br),Br|=r;return qn(t,e,i,n),e.child}function IE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Uv(t,e,n,r,i){var o=kr(n)?al:Xn.current;return o=Sc(e,o),sc(e,i),n=rC(t,e,n,r,o,i),r=iC(),t!==null&&!wr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ss(t,e,i)):(Dt&&r&&zy(e),e.flags|=1,qn(t,e,n,i),e.child)}function $b(t,e,n,r,i){if(kr(n)){var o=!0;Yf(e)}else o=!1;if(sc(e,i),e.stateNode===null)uf(t,e),gE(e,n,r),Bv(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=ui(c):(c=kr(n)?al:Xn.current,c=Sc(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&Gb(e,s,r,c),Ks=!1;var h=e.memoizedState;s.state=h,np(e,r,s,i),l=e.memoizedState,a!==r||h!==l||Ar.current||Ks?(typeof u=="function"&&(Lv(e,n,u,r),l=e.memoizedState),(a=Ks||Vb(e,n,a,r,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,X1(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:yi(e.type,a),s.props=c,d=e.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=ui(l):(l=kr(n)?al:Xn.current,l=Sc(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&Gb(e,s,r,l),Ks=!1,h=e.memoizedState,s.state=h,np(e,r,s,i);var p=e.memoizedState;a!==d||h!==p||Ar.current||Ks?(typeof f=="function"&&(Lv(e,n,f,r),p=e.memoizedState),(c=Ks||Vb(e,n,c,r,h,p,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return Vv(t,e,n,r,o,i)}function Vv(t,e,n,r,i,o){IE(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&_b(e,n,!1),Ss(t,e,o);r=e.stateNode,UM.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=kc(e,t.child,null,o),e.child=kc(e,null,a,o)):qn(t,e,a,o),e.memoizedState=r.state,i&&_b(e,n,!0),e.child}function bE(t){var e=t.stateNode;e.pendingContext?Nb(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Nb(t,e.context,!1),qy(t,e.containerInfo)}function Xb(t,e,n,r,i){return Ac(),$y(i),e.flags|=256,qn(t,e,n,r),e.child}var Gv={dehydrated:null,treeContext:null,retryLane:0};function Wv(t){return{baseLanes:t,cachePool:null,transitions:null}}function wE(t,e,n){var r=e.pendingProps,i=Ft.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),St(Ft,i&1),t===null)return Mv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=ag(s,r,0,null),t=tl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Wv(n),e.memoizedState=Gv,t):aC(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return VM(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ya(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ya(a,o):(o=tl(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Wv(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Gv,r}return o=t.child,t=o.sibling,r=ya(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function aC(t,e){return e=ag({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mh(t,e,n,r){return r!==null&&$y(r),kc(e,t.child,null,n),t=aC(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VM(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=hm(Error(le(422))),Mh(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=ag({mode:"visible",children:r.children},i,0,null),o=tl(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&kc(e,t.child,null,s),e.child.memoizedState=Wv(s),e.memoizedState=Gv,o);if(!(e.mode&1))return Mh(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(le(419)),r=hm(o,r,void 0),Mh(t,e,s,r)}if(a=(s&t.childLanes)!==0,wr||a){if(r=Sn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,ws(t,i),Ui(r,t,i,-1))}return fC(),r=hm(Error(le(421))),Mh(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=qM.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Zr=pa(i.nextSibling),Hr=e,Dt=!0,Pi=null,t!==null&&(ti[ni++]=Zo,ti[ni++]=zo,ti[ni++]=ll,Zo=t.id,zo=t.overflow,ll=e),e=aC(e,r.children),e.flags|=4096,e)}function Kb(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Dv(t.return,e,n)}function fm(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function SE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(qn(t,e,r.children,n),r=Ft.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kb(t,n,e);else if(t.tag===19)Kb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(St(Ft,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&rp(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),fm(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&rp(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}fm(e,!0,n,null,o);break;case"together":fm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function uf(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ul|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,n=ya(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ya(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GM(t,e,n){switch(e.tag){case 3:bE(e),Ac();break;case 5:K1(e);break;case 1:kr(e.type)&&Yf(e);break;case 4:qy(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;St(ep,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(St(Ft,Ft.current&1),e.flags|=128,null):n&e.child.childLanes?wE(t,e,n):(St(Ft,Ft.current&1),t=Ss(t,e,n),t!==null?t.sibling:null);St(Ft,Ft.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return SE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),St(Ft,Ft.current),r)break;return null;case 22:case 23:return e.lanes=0,CE(t,e,n)}return Ss(t,e,n)}var AE,jv,kE,EE;AE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jv=function(){};kE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Xa(Ao.current);var o=null;switch(n){case"input":i=dv(t,i),r=dv(t,r),o=[];break;case"select":i=Vt({},i,{value:void 0}),r=Vt({},r,{value:void 0}),o=[];break;case"textarea":i=pv(t,i),r=pv(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Kf)}mv(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(fd.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(fd.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Et("scroll",t),o||a===l||(o=[])):(o=o||[]).push(c,l))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};EE=function(t,e,n,r){n!==r&&(e.flags|=4)};function gu(t,e){if(!Dt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Wn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WM(t,e,n){var r=e.pendingProps;switch(Hy(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wn(e),null;case 1:return kr(e.type)&&Jf(),Wn(e),null;case 3:return r=e.stateNode,Ec(),Nt(Ar),Nt(Xn),tC(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_h(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Pi!==null&&(Yv(Pi),Pi=null))),jv(t,e),Wn(e),null;case 5:eC(e);var i=Xa(kd.current);if(n=e.type,t!==null&&e.stateNode!=null)kE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(le(166));return Wn(e),null}if(t=Xa(Ao.current),_h(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[ro]=e,r[Sd]=o,t=(e.mode&1)!==0,n){case"dialog":Et("cancel",r),Et("close",r);break;case"iframe":case"object":case"embed":Et("load",r);break;case"video":case"audio":for(i=0;i<Bu.length;i++)Et(Bu[i],r);break;case"source":Et("error",r);break;case"img":case"image":case"link":Et("error",r),Et("load",r);break;case"details":Et("toggle",r);break;case"input":ib(r,o),Et("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Et("invalid",r);break;case"textarea":sb(r,o),Et("invalid",r)}mv(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Nh(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Nh(r.textContent,a,t),i=["children",""+a]):fd.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Et("scroll",r)}switch(n){case"input":Sh(r),ob(r,o,!0);break;case"textarea":Sh(r),ab(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Kf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=e1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[ro]=e,t[Sd]=r,AE(t,e,!1,!1),e.stateNode=t;e:{switch(s=vv(n,r),n){case"dialog":Et("cancel",t),Et("close",t),i=r;break;case"iframe":case"object":case"embed":Et("load",t),i=r;break;case"video":case"audio":for(i=0;i<Bu.length;i++)Et(Bu[i],t);i=r;break;case"source":Et("error",t),i=r;break;case"img":case"image":case"link":Et("error",t),Et("load",t),i=r;break;case"details":Et("toggle",t),i=r;break;case"input":ib(t,r),i=dv(t,r),Et("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Vt({},r,{value:void 0}),Et("invalid",t);break;case"textarea":sb(t,r),i=pv(t,r),Et("invalid",t);break;default:i=r}mv(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?r1(t,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&t1(t,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&pd(t,l):typeof l=="number"&&pd(t,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fd.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Et("scroll",t):l!=null&&Ny(t,o,l,s))}switch(n){case"input":Sh(t),ob(t,r,!1);break;case"textarea":Sh(t),ab(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ba(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?nc(t,!!r.multiple,o,!1):r.defaultValue!=null&&nc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Kf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Wn(e),null;case 6:if(t&&e.stateNode!=null)EE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(le(166));if(n=Xa(kd.current),Xa(Ao.current),_h(e)){if(r=e.stateNode,n=e.memoizedProps,r[ro]=e,(o=r.nodeValue!==n)&&(t=Hr,t!==null))switch(t.tag){case 3:Nh(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Nh(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ro]=e,e.stateNode=r}return Wn(e),null;case 13:if(Nt(Ft),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Dt&&Zr!==null&&e.mode&1&&!(e.flags&128))Z1(),Ac(),e.flags|=98560,o=!1;else if(o=_h(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(le(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(le(317));o[ro]=e}else Ac(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Wn(e),o=!1}else Pi!==null&&(Yv(Pi),Pi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ft.current&1?pn===0&&(pn=3):fC())),e.updateQueue!==null&&(e.flags|=4),Wn(e),null);case 4:return Ec(),jv(t,e),t===null&&bd(e.stateNode.containerInfo),Wn(e),null;case 10:return Jy(e.type._context),Wn(e),null;case 17:return kr(e.type)&&Jf(),Wn(e),null;case 19:if(Nt(Ft),o=e.memoizedState,o===null)return Wn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)gu(o,!1);else{if(pn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=rp(t),s!==null){for(e.flags|=128,gu(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return St(Ft,Ft.current&1|2),e.child}t=t.sibling}o.tail!==null&&Kt()>xc&&(e.flags|=128,r=!0,gu(o,!1),e.lanes=4194304)}else{if(!r)if(t=rp(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),gu(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Dt)return Wn(e),null}else 2*Kt()-o.renderingStartTime>xc&&n!==1073741824&&(e.flags|=128,r=!0,gu(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Kt(),e.sibling=null,n=Ft.current,St(Ft,r?n&1|2:n&1),e):(Wn(e),null);case 22:case 23:return hC(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Br&1073741824&&(Wn(e),e.subtreeFlags&6&&(e.flags|=8192)):Wn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function jM(t,e){switch(Hy(e),e.tag){case 1:return kr(e.type)&&Jf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ec(),Nt(Ar),Nt(Xn),tC(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eC(e),null;case 13:if(Nt(Ft),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));Ac()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Nt(Ft),null;case 4:return Ec(),null;case 10:return Jy(e.type._context),null;case 22:case 23:return hC(),null;case 24:return null;default:return null}}var Dh=!1,Zn=!1,ZM=typeof WeakSet=="function"?WeakSet:Set,Ie=null;function Yl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){jt(t,e,r)}else n.current=null}function Zv(t,e,n){try{n()}catch(r){jt(t,e,r)}}var Jb=!1;function zM(t,e){if(Tv=Hf,t=N1(),Zy(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=s),h===o&&++u===r&&(l=s),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(xv={focusedElem:t,selectionRange:n},Hf=!1,Ie=e;Ie!==null;)if(e=Ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ie=t;else for(;Ie!==null;){e=Ie;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,C=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:yi(e.type,g),C);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(k){jt(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Ie=t;break}Ie=e.return}return p=Jb,Jb=!1,p}function td(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Zv(e,n,o)}i=i.next}while(i!==r)}}function og(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function zv(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function TE(t){var e=t.alternate;e!==null&&(t.alternate=null,TE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ro],delete e[Sd],delete e[Nv],delete e[TM],delete e[xM])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xE(t){return t.tag===5||t.tag===3||t.tag===4}function Yb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Hv(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Kf));else if(r!==4&&(t=t.child,t!==null))for(Hv(t,e,n),t=t.sibling;t!==null;)Hv(t,e,n),t=t.sibling}function $v(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for($v(t,e,n),t=t.sibling;t!==null;)$v(t,e,n),t=t.sibling}var xn=null,Ti=!1;function Bs(t,e,n){for(n=n.child;n!==null;)RE(t,e,n),n=n.sibling}function RE(t,e,n){if(So&&typeof So.onCommitFiberUnmount=="function")try{So.onCommitFiberUnmount(Yp,n)}catch{}switch(n.tag){case 5:Zn||Yl(n,e);case 6:var r=xn,i=Ti;xn=null,Bs(t,e,n),xn=r,Ti=i,xn!==null&&(Ti?(t=xn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xn.removeChild(n.stateNode));break;case 18:xn!==null&&(Ti?(t=xn,n=n.stateNode,t.nodeType===8?sm(t.parentNode,n):t.nodeType===1&&sm(t,n),yd(t)):sm(xn,n.stateNode));break;case 4:r=xn,i=Ti,xn=n.stateNode.containerInfo,Ti=!0,Bs(t,e,n),xn=r,Ti=i;break;case 0:case 11:case 14:case 15:if(!Zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Zv(n,e,s),i=i.next}while(i!==r)}Bs(t,e,n);break;case 1:if(!Zn&&(Yl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){jt(n,e,a)}Bs(t,e,n);break;case 21:Bs(t,e,n);break;case 22:n.mode&1?(Zn=(r=Zn)||n.memoizedState!==null,Bs(t,e,n),Zn=r):Bs(t,e,n);break;default:Bs(t,e,n)}}function Qb(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new ZM),e.forEach(function(r){var i=eD.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function pi(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:xn=a.stateNode,Ti=!1;break e;case 3:xn=a.stateNode.containerInfo,Ti=!0;break e;case 4:xn=a.stateNode.containerInfo,Ti=!0;break e}a=a.return}if(xn===null)throw Error(le(160));RE(o,s,i),xn=null,Ti=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){jt(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)PE(e,t),e=e.sibling}function PE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(pi(e,t),Ki(t),r&4){try{td(3,t,t.return),og(3,t)}catch(g){jt(t,t.return,g)}try{td(5,t,t.return)}catch(g){jt(t,t.return,g)}}break;case 1:pi(e,t),Ki(t),r&512&&n!==null&&Yl(n,n.return);break;case 5:if(pi(e,t),Ki(t),r&512&&n!==null&&Yl(n,n.return),t.flags&32){var i=t.stateNode;try{pd(i,"")}catch(g){jt(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&Qk(i,o),vv(a,s);var c=vv(a,o);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?r1(i,d):u==="dangerouslySetInnerHTML"?t1(i,d):u==="children"?pd(i,d):Ny(i,u,d,c)}switch(a){case"input":hv(i,o);break;case"textarea":qk(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?nc(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?nc(i,!!o.multiple,o.defaultValue,!0):nc(i,!!o.multiple,o.multiple?[]:"",!1))}i[Sd]=o}catch(g){jt(t,t.return,g)}}break;case 6:if(pi(e,t),Ki(t),r&4){if(t.stateNode===null)throw Error(le(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){jt(t,t.return,g)}}break;case 3:if(pi(e,t),Ki(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yd(e.containerInfo)}catch(g){jt(t,t.return,g)}break;case 4:pi(e,t),Ki(t);break;case 13:pi(e,t),Ki(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(uC=Kt())),r&4&&Qb(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Zn=(c=Zn)||u,pi(e,t),Zn=c):pi(e,t),Ki(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ie=t,u=t.child;u!==null;){for(d=Ie=u;Ie!==null;){switch(h=Ie,f=h.child,h.tag){case 0:case 11:case 14:case 15:td(4,h,h.return);break;case 1:Yl(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){jt(r,n,g)}}break;case 5:Yl(h,h.return);break;case 22:if(h.memoizedState!==null){ew(d);continue}}f!==null?(f.return=h,Ie=f):ew(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=n1("display",s))}catch(g){jt(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(g){jt(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pi(e,t),Ki(t),r&4&&Qb(t);break;case 21:break;default:pi(e,t),Ki(t)}}function Ki(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xE(n)){var r=n;break e}n=n.return}throw Error(le(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(pd(i,""),r.flags&=-33);var o=Yb(t);$v(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Yb(t);Hv(t,a,s);break;default:throw Error(le(161))}}catch(l){jt(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HM(t,e,n){Ie=t,NE(t)}function NE(t,e,n){for(var r=(t.mode&1)!==0;Ie!==null;){var i=Ie,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Dh;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Zn;a=Dh;var c=Zn;if(Dh=s,(Zn=l)&&!c)for(Ie=i;Ie!==null;)s=Ie,l=s.child,s.tag===22&&s.memoizedState!==null?tw(i):l!==null?(l.return=s,Ie=l):tw(i);for(;o!==null;)Ie=o,NE(o),o=o.sibling;Ie=i,Dh=a,Zn=c}qb(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Ie=o):qb(t)}}function qb(t){for(;Ie!==null;){var e=Ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zn||og(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:yi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&Bb(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Bb(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&yd(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Zn||e.flags&512&&zv(e)}catch(h){jt(e,e.return,h)}}if(e===t){Ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function ew(t){for(;Ie!==null;){var e=Ie;if(e===t){Ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ie=n;break}Ie=e.return}}function tw(t){for(;Ie!==null;){var e=Ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{og(4,e)}catch(l){jt(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){jt(e,i,l)}}var o=e.return;try{zv(e)}catch(l){jt(e,o,l)}break;case 5:var s=e.return;try{zv(e)}catch(l){jt(e,s,l)}}}catch(l){jt(e,e.return,l)}if(e===t){Ie=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ie=a;break}Ie=e.return}}var $M=Math.ceil,sp=Rs.ReactCurrentDispatcher,lC=Rs.ReactCurrentOwner,ci=Rs.ReactCurrentBatchConfig,nt=0,Sn=null,sn=null,On=0,Br=0,Ql=Ta(0),pn=0,Rd=null,ul=0,sg=0,cC=0,nd=null,Cr=null,uC=0,xc=1/0,Bo=null,ap=!1,Xv=null,ma=null,Lh=!1,ta=null,lp=0,rd=0,Kv=null,df=-1,hf=0;function ar(){return nt&6?Kt():df!==-1?df:df=Kt()}function va(t){return t.mode&1?nt&2&&On!==0?On&-On:PM.transition!==null?(hf===0&&(hf=g1()),hf):(t=dt,t!==0||(t=window.event,t=t===void 0?16:w1(t.type)),t):1}function Ui(t,e,n,r){if(50<rd)throw rd=0,Kv=null,Error(le(185));eh(t,n,r),(!(nt&2)||t!==Sn)&&(t===Sn&&(!(nt&2)&&(sg|=n),pn===4&&Qs(t,On)),Er(t,r),n===1&&nt===0&&!(e.mode&1)&&(xc=Kt()+500,ng&&xa()))}function Er(t,e){var n=t.callbackNode;PO(t,e);var r=zf(t,t===Sn?On:0);if(r===0)n!==null&&ub(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ub(n),e===1)t.tag===0?RM(nw.bind(null,t)):G1(nw.bind(null,t)),kM(function(){!(nt&6)&&xa()}),n=null;else{switch(m1(r)){case 1:n=Ly;break;case 4:n=f1;break;case 16:n=Zf;break;case 536870912:n=p1;break;default:n=Zf}n=UE(n,_E.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _E(t,e){if(df=-1,hf=0,nt&6)throw Error(le(327));var n=t.callbackNode;if(ac()&&t.callbackNode!==n)return null;var r=zf(t,t===Sn?On:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=cp(t,r);else{e=r;var i=nt;nt|=2;var o=ME();(Sn!==t||On!==e)&&(Bo=null,xc=Kt()+500,el(t,e));do try{JM();break}catch(a){OE(t,a)}while(!0);Ky(),sp.current=o,nt=i,sn!==null?e=0:(Sn=null,On=0,e=pn)}if(e!==0){if(e===2&&(i=wv(t),i!==0&&(r=i,e=Jv(t,i))),e===1)throw n=Rd,el(t,0),Qs(t,r),Er(t,Kt()),n;if(e===6)Qs(t,r);else{if(i=t.current.alternate,!(r&30)&&!XM(i)&&(e=cp(t,r),e===2&&(o=wv(t),o!==0&&(r=o,e=Jv(t,o))),e===1))throw n=Rd,el(t,0),Qs(t,r),Er(t,Kt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(le(345));case 2:Ba(t,Cr,Bo);break;case 3:if(Qs(t,r),(r&130023424)===r&&(e=uC+500-Kt(),10<e)){if(zf(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ar(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Pv(Ba.bind(null,t,Cr,Bo),e);break}Ba(t,Cr,Bo);break;case 4:if(Qs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Fi(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Kt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$M(r/1960))-r,10<r){t.timeoutHandle=Pv(Ba.bind(null,t,Cr,Bo),r);break}Ba(t,Cr,Bo);break;case 5:Ba(t,Cr,Bo);break;default:throw Error(le(329))}}}return Er(t,Kt()),t.callbackNode===n?_E.bind(null,t):null}function Jv(t,e){var n=nd;return t.current.memoizedState.isDehydrated&&(el(t,e).flags|=256),t=cp(t,e),t!==2&&(e=Cr,Cr=n,e!==null&&Yv(e)),t}function Yv(t){Cr===null?Cr=t:Cr.push.apply(Cr,t)}function XM(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Gi(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Qs(t,e){for(e&=~cC,e&=~sg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Fi(e),r=1<<n;t[n]=-1,e&=~r}}function nw(t){if(nt&6)throw Error(le(327));ac();var e=zf(t,0);if(!(e&1))return Er(t,Kt()),null;var n=cp(t,e);if(t.tag!==0&&n===2){var r=wv(t);r!==0&&(e=r,n=Jv(t,r))}if(n===1)throw n=Rd,el(t,0),Qs(t,e),Er(t,Kt()),n;if(n===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ba(t,Cr,Bo),Er(t,Kt()),null}function dC(t,e){var n=nt;nt|=1;try{return t(e)}finally{nt=n,nt===0&&(xc=Kt()+500,ng&&xa())}}function dl(t){ta!==null&&ta.tag===0&&!(nt&6)&&ac();var e=nt;nt|=1;var n=ci.transition,r=dt;try{if(ci.transition=null,dt=1,t)return t()}finally{dt=r,ci.transition=n,nt=e,!(nt&6)&&xa()}}function hC(){Br=Ql.current,Nt(Ql)}function el(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AM(n)),sn!==null)for(n=sn.return;n!==null;){var r=n;switch(Hy(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Jf();break;case 3:Ec(),Nt(Ar),Nt(Xn),tC();break;case 5:eC(r);break;case 4:Ec();break;case 13:Nt(Ft);break;case 19:Nt(Ft);break;case 10:Jy(r.type._context);break;case 22:case 23:hC()}n=n.return}if(Sn=t,sn=t=ya(t.current,null),On=Br=e,pn=0,Rd=null,cC=sg=ul=0,Cr=nd=null,$a!==null){for(e=0;e<$a.length;e++)if(n=$a[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}$a=null}return t}function OE(t,e){do{var n=sn;try{if(Ky(),lf.current=op,ip){for(var r=Ut.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ip=!1}if(cl=0,bn=fn=Ut=null,ed=!1,Ed=0,lC.current=null,n===null||n.return===null){pn=1,Rd=e,sn=null;break}e:{var o=t,s=n.return,a=n,l=e;if(e=On,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=jb(s);if(f!==null){f.flags&=-257,Zb(f,s,a,o,e),f.mode&1&&Wb(o,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){Wb(o,c,e),fC();break e}l=Error(le(426))}}else if(Dt&&a.mode&1){var C=jb(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Zb(C,s,a,o,e),$y(Tc(l,a));break e}}o=l=Tc(l,a),pn!==4&&(pn=2),nd===null?nd=[o]:nd.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=mE(o,l,e);Lb(o,m);break e;case 1:a=l;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(ma===null||!ma.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var k=vE(o,a,e);Lb(o,k);break e}}o=o.return}while(o!==null)}LE(n)}catch(S){e=S,sn===n&&n!==null&&(sn=n=n.return);continue}break}while(!0)}function ME(){var t=sp.current;return sp.current=op,t===null?op:t}function fC(){(pn===0||pn===3||pn===2)&&(pn=4),Sn===null||!(ul&268435455)&&!(sg&268435455)||Qs(Sn,On)}function cp(t,e){var n=nt;nt|=2;var r=ME();(Sn!==t||On!==e)&&(Bo=null,el(t,e));do try{KM();break}catch(i){OE(t,i)}while(!0);if(Ky(),nt=n,sp.current=r,sn!==null)throw Error(le(261));return Sn=null,On=0,pn}function KM(){for(;sn!==null;)DE(sn)}function JM(){for(;sn!==null&&!bO();)DE(sn)}function DE(t){var e=FE(t.alternate,t,Br);t.memoizedProps=t.pendingProps,e===null?LE(t):sn=e,lC.current=null}function LE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jM(n,e),n!==null){n.flags&=32767,sn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{pn=6,sn=null;return}}else if(n=WM(n,e,Br),n!==null){sn=n;return}if(e=e.sibling,e!==null){sn=e;return}sn=e=t}while(e!==null);pn===0&&(pn=5)}function Ba(t,e,n){var r=dt,i=ci.transition;try{ci.transition=null,dt=1,YM(t,e,n,r)}finally{ci.transition=i,dt=r}return null}function YM(t,e,n,r){do ac();while(ta!==null);if(nt&6)throw Error(le(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(NO(t,o),t===Sn&&(sn=Sn=null,On=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Lh||(Lh=!0,UE(Zf,function(){return ac(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ci.transition,ci.transition=null;var s=dt;dt=1;var a=nt;nt|=4,lC.current=null,zM(t,n),PE(n,t),vM(xv),Hf=!!Tv,xv=Tv=null,t.current=n,HM(n),wO(),nt=a,dt=s,ci.transition=o}else t.current=n;if(Lh&&(Lh=!1,ta=t,lp=i),o=t.pendingLanes,o===0&&(ma=null),kO(n.stateNode),Er(t,Kt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ap)throw ap=!1,t=Xv,Xv=null,t;return lp&1&&t.tag!==0&&ac(),o=t.pendingLanes,o&1?t===Kv?rd++:(rd=0,Kv=t):rd=0,xa(),null}function ac(){if(ta!==null){var t=m1(lp),e=ci.transition,n=dt;try{if(ci.transition=null,dt=16>t?16:t,ta===null)var r=!1;else{if(t=ta,ta=null,lp=0,nt&6)throw Error(le(331));var i=nt;for(nt|=4,Ie=t.current;Ie!==null;){var o=Ie,s=o.child;if(Ie.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ie=c;Ie!==null;){var u=Ie;switch(u.tag){case 0:case 11:case 15:td(8,u,o)}var d=u.child;if(d!==null)d.return=u,Ie=d;else for(;Ie!==null;){u=Ie;var h=u.sibling,f=u.return;if(TE(u),u===c){Ie=null;break}if(h!==null){h.return=f,Ie=h;break}Ie=f}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var C=g.sibling;g.sibling=null,g=C}while(g!==null)}}Ie=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Ie=s;else e:for(;Ie!==null;){if(o=Ie,o.flags&2048)switch(o.tag){case 0:case 11:case 15:td(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,Ie=m;break e}Ie=o.return}}var v=t.current;for(Ie=v;Ie!==null;){s=Ie;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,Ie=b;else e:for(s=v;Ie!==null;){if(a=Ie,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:og(9,a)}}catch(S){jt(a,a.return,S)}if(a===s){Ie=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,Ie=k;break e}Ie=a.return}}if(nt=i,xa(),So&&typeof So.onPostCommitFiberRoot=="function")try{So.onPostCommitFiberRoot(Yp,t)}catch{}r=!0}return r}finally{dt=n,ci.transition=e}}return!1}function rw(t,e,n){e=Tc(n,e),e=mE(t,e,1),t=ga(t,e,1),e=ar(),t!==null&&(eh(t,1,e),Er(t,e))}function jt(t,e,n){if(t.tag===3)rw(t,t,n);else for(;e!==null;){if(e.tag===3){rw(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ma===null||!ma.has(r))){t=Tc(n,t),t=vE(e,t,1),e=ga(e,t,1),t=ar(),e!==null&&(eh(e,1,t),Er(e,t));break}}e=e.return}}function QM(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ar(),t.pingedLanes|=t.suspendedLanes&n,Sn===t&&(On&n)===n&&(pn===4||pn===3&&(On&130023424)===On&&500>Kt()-uC?el(t,0):cC|=n),Er(t,e)}function BE(t,e){e===0&&(t.mode&1?(e=Eh,Eh<<=1,!(Eh&130023424)&&(Eh=4194304)):e=1);var n=ar();t=ws(t,e),t!==null&&(eh(t,e,n),Er(t,n))}function qM(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),BE(t,n)}function eD(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(le(314))}r!==null&&r.delete(e),BE(t,n)}var FE;FE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ar.current)wr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return wr=!1,GM(t,e,n);wr=!!(t.flags&131072)}else wr=!1,Dt&&e.flags&1048576&&W1(e,qf,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;uf(t,e),t=e.pendingProps;var i=Sc(e,Xn.current);sc(e,n),i=rC(null,e,r,t,i,n);var o=iC();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,kr(r)?(o=!0,Yf(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qy(e),i.updater=ig,e.stateNode=i,i._reactInternals=e,Bv(e,r,t,n),e=Vv(null,e,r,!0,o,n)):(e.tag=0,Dt&&o&&zy(e),qn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(uf(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=nD(r),t=yi(r,t),i){case 0:e=Uv(null,e,r,t,n);break e;case 1:e=$b(null,e,r,t,n);break e;case 11:e=zb(null,e,r,t,n);break e;case 14:e=Hb(null,e,r,yi(r.type,t),n);break e}throw Error(le(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yi(r,i),Uv(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yi(r,i),$b(t,e,r,i,n);case 3:e:{if(bE(e),t===null)throw Error(le(387));r=e.pendingProps,o=e.memoizedState,i=o.element,X1(t,e),np(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=Tc(Error(le(423)),e),e=Xb(t,e,r,n,i);break e}else if(r!==i){i=Tc(Error(le(424)),e),e=Xb(t,e,r,n,i);break e}else for(Zr=pa(e.stateNode.containerInfo.firstChild),Hr=e,Dt=!0,Pi=null,n=H1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ac(),r===i){e=Ss(t,e,n);break e}qn(t,e,r,n)}e=e.child}return e;case 5:return K1(e),t===null&&Mv(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Rv(r,i)?s=null:o!==null&&Rv(r,o)&&(e.flags|=32),IE(t,e),qn(t,e,s,n),e.child;case 6:return t===null&&Mv(e),null;case 13:return wE(t,e,n);case 4:return qy(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=kc(e,null,r,n):qn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yi(r,i),zb(t,e,r,i,n);case 7:return qn(t,e,e.pendingProps,n),e.child;case 8:return qn(t,e,e.pendingProps.children,n),e.child;case 12:return qn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,St(ep,r._currentValue),r._currentValue=s,o!==null)if(Gi(o.value,s)){if(o.children===i.children&&!Ar.current){e=Ss(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=ms(-1,n&-n),l.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Dv(o.return,n,e),a.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(le(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Dv(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}qn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,sc(e,n),i=ui(i),r=r(i),e.flags|=1,qn(t,e,r,n),e.child;case 14:return r=e.type,i=yi(r,e.pendingProps),i=yi(r.type,i),Hb(t,e,r,i,n);case 15:return yE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:yi(r,i),uf(t,e),e.tag=1,kr(r)?(t=!0,Yf(e)):t=!1,sc(e,n),gE(e,r,i),Bv(e,r,i,n),Vv(null,e,r,!0,t,n);case 19:return SE(t,e,n);case 22:return CE(t,e,n)}throw Error(le(156,e.tag))};function UE(t,e){return h1(t,e)}function tD(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ii(t,e,n,r){return new tD(t,e,n,r)}function pC(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nD(t){if(typeof t=="function")return pC(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Oy)return 11;if(t===My)return 14}return 2}function ya(t,e){var n=t.alternate;return n===null?(n=ii(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ff(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")pC(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Wl:return tl(n.children,i,o,e);case _y:s=8,i|=8;break;case av:return t=ii(12,n,e,i|2),t.elementType=av,t.lanes=o,t;case lv:return t=ii(13,n,e,i),t.elementType=lv,t.lanes=o,t;case cv:return t=ii(19,n,e,i),t.elementType=cv,t.lanes=o,t;case Kk:return ag(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case $k:s=10;break e;case Xk:s=9;break e;case Oy:s=11;break e;case My:s=14;break e;case Xs:s=16,r=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=ii(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function tl(t,e,n,r){return t=ii(7,t,r,e),t.lanes=n,t}function ag(t,e,n,r){return t=ii(22,t,r,e),t.elementType=Kk,t.lanes=n,t.stateNode={isHidden:!1},t}function pm(t,e,n){return t=ii(6,t,null,e),t.lanes=n,t}function gm(t,e,n){return e=ii(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function rD(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kg(0),this.expirationTimes=Kg(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kg(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gC(t,e,n,r,i,o,s,a,l){return t=new rD(t,e,n,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ii(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qy(o),t}function iD(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function VE(t){if(!t)return wa;t=t._reactInternals;e:{if(Sl(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(kr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var n=t.type;if(kr(n))return V1(t,n,e)}return e}function GE(t,e,n,r,i,o,s,a,l){return t=gC(n,r,!0,t,i,o,s,a,l),t.context=VE(null),n=t.current,r=ar(),i=va(n),o=ms(r,i),o.callback=e??null,ga(n,o,i),t.current.lanes=i,eh(t,i,r),Er(t,r),t}function lg(t,e,n,r){var i=e.current,o=ar(),s=va(i);return n=VE(n),e.context===null?e.context=n:e.pendingContext=n,e=ms(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ga(i,e,s),t!==null&&(Ui(t,i,s,o),af(t,i,s)),s}function up(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mC(t,e){iw(t,e),(t=t.alternate)&&iw(t,e)}function oD(){return null}var WE=typeof reportError=="function"?reportError:function(t){console.error(t)};function vC(t){this._internalRoot=t}cg.prototype.render=vC.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));lg(t,e,null,null)};cg.prototype.unmount=vC.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;dl(function(){lg(null,t,null,null)}),e[bs]=null}};function cg(t){this._internalRoot=t}cg.prototype.unstable_scheduleHydration=function(t){if(t){var e=C1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ys.length&&e!==0&&e<Ys[n].priority;n++);Ys.splice(n,0,t),n===0&&b1(t)}};function yC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ow(){}function sD(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=up(s);o.call(c)}}var s=GE(e,r,t,0,null,!1,!1,"",ow);return t._reactRootContainer=s,t[bs]=s.current,bd(t.nodeType===8?t.parentNode:t),dl(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=up(l);a.call(c)}}var l=gC(t,0,!1,null,null,!1,!1,"",ow);return t._reactRootContainer=l,t[bs]=l.current,bd(t.nodeType===8?t.parentNode:t),dl(function(){lg(e,l,n,r)}),l}function dg(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=up(s);a.call(l)}}lg(e,s,t,i)}else s=sD(n,e,t,i,r);return up(s)}v1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Lu(e.pendingLanes);n!==0&&(By(e,n|1),Er(e,Kt()),!(nt&6)&&(xc=Kt()+500,xa()))}break;case 13:dl(function(){var r=ws(t,1);if(r!==null){var i=ar();Ui(r,t,1,i)}}),mC(t,1)}};Fy=function(t){if(t.tag===13){var e=ws(t,134217728);if(e!==null){var n=ar();Ui(e,t,134217728,n)}mC(t,134217728)}};y1=function(t){if(t.tag===13){var e=va(t),n=ws(t,e);if(n!==null){var r=ar();Ui(n,t,e,r)}mC(t,e)}};C1=function(){return dt};I1=function(t,e){var n=dt;try{return dt=t,e()}finally{dt=n}};Cv=function(t,e,n){switch(e){case"input":if(hv(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=tg(r);if(!i)throw Error(le(90));Yk(r),hv(r,i)}}}break;case"textarea":qk(t,n);break;case"select":e=n.value,e!=null&&nc(t,!!n.multiple,e,!1)}};s1=dC;a1=dl;var aD={usingClientEntryPoint:!1,Events:[nh,Hl,tg,i1,o1,dC]},mu={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lD={bundleType:mu.bundleType,version:mu.version,rendererPackageName:mu.rendererPackageName,rendererConfig:mu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u1(t),t===null?null:t.stateNode},findFiberByHostInstance:mu.findFiberByHostInstance||oD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bh.isDisabled&&Bh.supportsFiber)try{Yp=Bh.inject(lD),So=Bh}catch{}}Yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aD;Yr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yC(e))throw Error(le(200));return iD(t,e,null,n)};Yr.createRoot=function(t,e){if(!yC(t))throw Error(le(299));var n=!1,r="",i=WE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gC(t,1,!1,null,null,n,!1,r,i),t[bs]=e.current,bd(t.nodeType===8?t.parentNode:t),new vC(e)};Yr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=u1(e),t=t===null?null:t.stateNode,t};Yr.flushSync=function(t){return dl(t)};Yr.hydrate=function(t,e,n){if(!ug(e))throw Error(le(200));return dg(null,t,e,!0,n)};Yr.hydrateRoot=function(t,e,n){if(!yC(t))throw Error(le(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=WE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=GE(e,null,t,1,n??null,i,!1,o,s),t[bs]=e.current,bd(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new cg(e)};Yr.render=function(t,e,n){if(!ug(e))throw Error(le(200));return dg(null,t,e,!1,n)};Yr.unmountComponentAtNode=function(t){if(!ug(t))throw Error(le(40));return t._reactRootContainer?(dl(function(){dg(null,null,t,!1,function(){t._reactRootContainer=null,t[bs]=null})}),!0):!1};Yr.unstable_batchedUpdates=dC;Yr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ug(n))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return dg(t,e,n,!1,r)};Yr.version="18.3.1-next-f1338f8080-20240426";function jE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(jE)}catch(t){console.error(t)}}jE(),jk.exports=Yr;var CC=jk.exports;const cD=Qd(CC),uD=Nk({__proto__:null,default:cD},[CC]);var sw=CC;ov.createRoot=sw.createRoot,ov.hydrateRoot=sw.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ot(){return Ot=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ot.apply(this,arguments)}var on;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(on||(on={}));const aw="popstate";function dD(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return Pd("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:ih(i)}return fD(e,n,null,t)}function tt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hD(){return Math.random().toString(36).substr(2,8)}function lw(t,e){return{usr:t.state,key:t.key,idx:e}}function Pd(t,e,n,r){return n===void 0&&(n=null),Ot({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ra(e):e,{state:n,key:e&&e.key||r||hD()})}function ih(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ra(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function fD(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=on.Pop,l=null,c=u();c==null&&(c=0,s.replaceState(Ot({},s.state,{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=on.Pop;let C=u(),m=C==null?null:C-c;c=C,l&&l({action:a,location:g.location,delta:m})}function h(C,m){a=on.Push;let v=Pd(g.location,C,m);c=u()+1;let b=lw(v,c),k=g.createHref(v);try{s.pushState(b,"",k)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;i.location.assign(k)}o&&l&&l({action:a,location:g.location,delta:1})}function f(C,m){a=on.Replace;let v=Pd(g.location,C,m);c=u();let b=lw(v,c),k=g.createHref(v);s.replaceState(b,"",k),o&&l&&l({action:a,location:g.location,delta:0})}function p(C){let m=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof C=="string"?C:ih(C);return v=v.replace(/ $/,"%20"),tt(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let g={get action(){return a},get location(){return t(i,s)},listen(C){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(aw,d),l=C,()=>{i.removeEventListener(aw,d),l=null}},createHref(C){return e(i,C)},createURL:p,encodeLocation(C){let m=p(C);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(C){return s.go(C)}};return g}var ft;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ft||(ft={}));const pD=new Set(["lazy","caseSensitive","path","id","index","children"]);function gD(t){return t.index===!0}function dp(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,String(o)],a=typeof i.id=="string"?i.id:s.join("-");if(tt(i.index!==!0||!i.children,"Cannot specify children on an index route"),tt(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),gD(i)){let l=Ot({},i,e(i),{id:a});return r[a]=l,l}else{let l=Ot({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=dp(i.children,e,s,r)),l}})}function Ua(t,e,n){return n===void 0&&(n="/"),pf(t,e,n,!1)}function pf(t,e,n,r){let i=typeof e=="string"?Ra(e):e,o=oh(i.pathname||"/",n);if(o==null)return null;let s=ZE(t);vD(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let c=xD(o);a=ED(s[l],c,r)}return a}function mD(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function ZE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(tt(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=nl([r,l.relativePath]),u=n.concat(l);o.children&&o.children.length>0&&(tt(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),ZE(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:AD(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of zE(o.path))i(o,s,l)}),e}function zE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=zE(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function vD(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kD(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const yD=/^:[\w-]+$/,CD=3,ID=2,bD=1,wD=10,SD=-2,cw=t=>t==="*";function AD(t,e){let n=t.split("/"),r=n.length;return n.some(cw)&&(r+=SD),e&&(r+=ID),n.filter(i=>!cw(i)).reduce((i,o)=>i+(yD.test(o)?CD:o===""?bD:wD),r)}function kD(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function ED(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],c=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=uw({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),h=l.route;if(!d&&c&&n&&!r[r.length-1].route.index&&(d=uw({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:nl([o,d.pathname]),pathnameBase:OD(nl([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=nl([o,d.pathnameBase]))}return s}function uw(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=TD(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:s,pattern:t}}function TD(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function xD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function oh(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function RD(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Ra(t):t;return{pathname:n?n.startsWith("/")?n:PD(n,e):e,search:MD(r),hash:DD(i)}}function PD(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function mm(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ND(t,e){let n=HE(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function _D(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Ra(t):(i=Ot({},t),tt(!i.pathname||!i.pathname.includes("?"),mm("?","pathname","search",i)),tt(!i.pathname||!i.pathname.includes("#"),mm("#","pathname","hash",i)),tt(!i.search||!i.search.includes("#"),mm("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=RD(i,a),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const nl=t=>t.join("/").replace(/\/\/+/g,"/"),OD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),MD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,DD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class hp{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function hg(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const $E=["post","put","patch","delete"],LD=new Set($E),BD=["get",...$E],FD=new Set(BD),UD=new Set([301,302,303,307,308]),VD=new Set([307,308]),vm={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},GD={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},IC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,WD=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),XE="remix-router-transitions";function jD(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;tt(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let D=t.detectErrorBoundary;i=U=>({hasErrorBoundary:D(U)})}else i=WD;let o={},s=dp(t.routes,i,void 0,o),a,l=t.basename||"/",c=t.dataStrategy||$D,u=t.patchRoutesOnNavigation,d=Ot({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},t.future),h=null,f=new Set,p=null,g=null,C=null,m=t.hydrationData!=null,v=Ua(s,t.history.location,l),b=null;if(v==null&&!u){let D=gr(404,{pathname:t.history.location.pathname}),{matches:U,route:z}=bw(s);v=U,b={[z.id]:D}}v&&!t.hydrationData&&Ls(v,s,t.history.location.pathname).active&&(v=null);let k;if(v)if(v.some(D=>D.route.lazy))k=!1;else if(!v.some(D=>D.route.loader))k=!0;else if(d.v7_partialHydration){let D=t.hydrationData?t.hydrationData.loaderData:null,U=t.hydrationData?t.hydrationData.errors:null;if(U){let z=v.findIndex(q=>U[q.route.id]!==void 0);k=v.slice(0,z+1).every(q=>!qv(q.route,D,U))}else k=v.every(z=>!qv(z.route,D,U))}else k=t.hydrationData!=null;else if(k=!1,v=[],d.v7_partialHydration){let D=Ls(null,s,t.history.location.pathname);D.active&&D.matches&&(v=D.matches)}let S,A={historyAction:t.history.action,location:t.history.location,matches:v,initialized:k,navigation:vm,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},R=on.Pop,T=!1,_,O=!1,B=new Map,V=null,H=!1,Z=!1,J=[],ee=new Set,re=new Map,$=0,K=-1,ie=new Map,j=new Set,oe=new Map,ke=new Map,Le=new Set,de=new Map,Pe=new Map,Ye;function ve(){if(h=t.history.listen(D=>{let{action:U,location:z,delta:q}=D;if(Ye){Ye(),Ye=void 0;return}Rc(Pe.size===0||q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let me=Ds({currentLocation:A.location,nextLocation:z,historyAction:U});if(me&&q!=null){let xe=new Promise(De=>{Ye=De});t.history.go(q*-1),Qe(me,{state:"blocked",location:z,proceed(){Qe(me,{state:"proceeding",proceed:void 0,reset:void 0,location:z}),xe.then(()=>t.history.go(q))},reset(){let De=new Map(A.blockers);De.set(me,vu),st({blockers:De})}});return}return ue(U,z)}),n){a2(e,B);let D=()=>l2(e,B);e.addEventListener("pagehide",D),V=()=>e.removeEventListener("pagehide",D)}return A.initialized||ue(on.Pop,A.location,{initialHydration:!0}),S}function an(){h&&h(),V&&V(),f.clear(),_&&_.abort(),A.fetchers.forEach((D,U)=>P(U)),A.blockers.forEach((D,U)=>at(U))}function An(D){return f.add(D),()=>f.delete(D)}function st(D,U){U===void 0&&(U={}),A=Ot({},A,D);let z=[],q=[];d.v7_fetcherPersist&&A.fetchers.forEach((me,xe)=>{me.state==="idle"&&(Le.has(xe)?q.push(xe):z.push(xe))}),[...f].forEach(me=>me(A,{deletedFetchers:q,viewTransitionOpts:U.viewTransitionOpts,flushSync:U.flushSync===!0})),d.v7_fetcherPersist&&(z.forEach(me=>A.fetchers.delete(me)),q.forEach(me=>P(me)))}function Ct(D,U,z){var q,me;let{flushSync:xe}=z===void 0?{}:z,De=A.actionData!=null&&A.navigation.formMethod!=null&&xi(A.navigation.formMethod)&&A.navigation.state==="loading"&&((q=D.state)==null?void 0:q._isRedirect)!==!0,ye;U.actionData?Object.keys(U.actionData).length>0?ye=U.actionData:ye=null:De?ye=A.actionData:ye=null;let Se=U.loaderData?Cw(A.loaderData,U.loaderData,U.matches||[],U.errors):A.loaderData,fe=A.blockers;fe.size>0&&(fe=new Map(fe),fe.forEach(($e,qt)=>fe.set(qt,vu)));let Re=T===!0||A.navigation.formMethod!=null&&xi(A.navigation.formMethod)&&((me=D.state)==null?void 0:me._isRedirect)!==!0;a&&(s=a,a=void 0),H||R===on.Pop||(R===on.Push?t.history.push(D,D.state):R===on.Replace&&t.history.replace(D,D.state));let We;if(R===on.Pop){let $e=B.get(A.location.pathname);$e&&$e.has(D.pathname)?We={currentLocation:A.location,nextLocation:D}:B.has(D.pathname)&&(We={currentLocation:D,nextLocation:A.location})}else if(O){let $e=B.get(A.location.pathname);$e?$e.add(D.pathname):($e=new Set([D.pathname]),B.set(A.location.pathname,$e)),We={currentLocation:A.location,nextLocation:D}}st(Ot({},U,{actionData:ye,loaderData:Se,historyAction:R,location:D,initialized:!0,navigation:vm,revalidation:"idle",restoreScrollPosition:au(D,U.matches||A.matches),preventScrollReset:Re,blockers:fe}),{viewTransitionOpts:We,flushSync:xe===!0}),R=on.Pop,T=!1,O=!1,H=!1,Z=!1,J=[]}async function kn(D,U){if(typeof D=="number"){t.history.go(D);return}let z=Qv(A.location,A.matches,l,d.v7_prependBasename,D,d.v7_relativeSplatPath,U==null?void 0:U.fromRouteId,U==null?void 0:U.relative),{path:q,submission:me,error:xe}=dw(d.v7_normalizeFormMethod,!1,z,U),De=A.location,ye=Pd(A.location,q,U&&U.state);ye=Ot({},ye,t.history.encodeLocation(ye));let Se=U&&U.replace!=null?U.replace:void 0,fe=on.Push;Se===!0?fe=on.Replace:Se===!1||me!=null&&xi(me.formMethod)&&me.formAction===A.location.pathname+A.location.search&&(fe=on.Replace);let Re=U&&"preventScrollReset"in U?U.preventScrollReset===!0:void 0,We=(U&&U.flushSync)===!0,$e=Ds({currentLocation:De,nextLocation:ye,historyAction:fe});if($e){Qe($e,{state:"blocked",location:ye,proceed(){Qe($e,{state:"proceeding",proceed:void 0,reset:void 0,location:ye}),kn(D,U)},reset(){let qt=new Map(A.blockers);qt.set($e,vu),st({blockers:qt})}});return}return await ue(fe,ye,{submission:me,pendingError:xe,preventScrollReset:Re,replace:U&&U.replace,enableViewTransition:U&&U.viewTransition,flushSync:We})}function ln(){if(pr(),st({revalidation:"loading"}),A.navigation.state!=="submitting"){if(A.navigation.state==="idle"){ue(A.historyAction,A.location,{startUninterruptedRevalidation:!0});return}ue(R||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:O===!0})}}async function ue(D,U,z){_&&_.abort(),_=null,R=D,H=(z&&z.startUninterruptedRevalidation)===!0,Gg(A.location,A.matches),T=(z&&z.preventScrollReset)===!0,O=(z&&z.enableViewTransition)===!0;let q=a||s,me=z&&z.overrideNavigation,xe=Ua(q,U,l),De=(z&&z.flushSync)===!0,ye=Ls(xe,q,U.pathname);if(ye.active&&ye.matches&&(xe=ye.matches),!xe){let{error:ht,notFoundMatches:ce,route:M}=ou(U.pathname);Ct(U,{matches:ce,loaderData:{},errors:{[M.id]:ht}},{flushSync:De});return}if(A.initialized&&!Z&&qD(A.location,U)&&!(z&&z.submission&&xi(z.submission.formMethod))){Ct(U,{matches:xe},{flushSync:De});return}_=new AbortController;let Se=Ol(t.history,U,_.signal,z&&z.submission),fe;if(z&&z.pendingError)fe=[Va(xe).route.id,{type:ft.error,error:z.pendingError}];else if(z&&z.submission&&xi(z.submission.formMethod)){let ht=await we(Se,U,z.submission,xe,ye.active,{replace:z.replace,flushSync:De});if(ht.shortCircuited)return;if(ht.pendingActionResult){let[ce,M]=ht.pendingActionResult;if(Wr(M)&&hg(M.error)&&M.error.status===404){_=null,Ct(U,{matches:ht.matches,loaderData:{},errors:{[ce]:M.error}});return}}xe=ht.matches||xe,fe=ht.pendingActionResult,me=ym(U,z.submission),De=!1,ye.active=!1,Se=Ol(t.history,Se.url,Se.signal)}let{shortCircuited:Re,matches:We,loaderData:$e,errors:qt}=await Ge(Se,U,xe,ye.active,me,z&&z.submission,z&&z.fetcherSubmission,z&&z.replace,z&&z.initialHydration===!0,De,fe);Re||(_=null,Ct(U,Ot({matches:We||xe},Iw(fe),{loaderData:$e,errors:qt})))}async function we(D,U,z,q,me,xe){xe===void 0&&(xe={}),pr();let De=o2(U,z);if(st({navigation:De},{flushSync:xe.flushSync===!0}),me){let fe=await Ma(q,U.pathname,D.signal);if(fe.type==="aborted")return{shortCircuited:!0};if(fe.type==="error"){let Re=Va(fe.partialMatches).route.id;return{matches:fe.partialMatches,pendingActionResult:[Re,{type:ft.error,error:fe.error}]}}else if(fe.matches)q=fe.matches;else{let{notFoundMatches:Re,error:We,route:$e}=ou(U.pathname);return{matches:Re,pendingActionResult:[$e.id,{type:ft.error,error:We}]}}}let ye,Se=Fu(q,U);if(!Se.route.action&&!Se.route.lazy)ye={type:ft.error,error:gr(405,{method:D.method,pathname:U.pathname,routeId:Se.route.id})};else if(ye=(await En("action",A,D,[Se],q,null))[Se.route.id],D.signal.aborted)return{shortCircuited:!0};if(Ka(ye)){let fe;return xe&&xe.replace!=null?fe=xe.replace:fe=mw(ye.response.headers.get("Location"),new URL(D.url),l)===A.location.pathname+A.location.search,await zt(D,ye,!0,{submission:z,replace:fe}),{shortCircuited:!0}}if(na(ye))throw gr(400,{type:"defer-action"});if(Wr(ye)){let fe=Va(q,Se.route.id);return(xe&&xe.replace)!==!0&&(R=on.Push),{matches:q,pendingActionResult:[fe.route.id,ye]}}return{matches:q,pendingActionResult:[Se.route.id,ye]}}async function Ge(D,U,z,q,me,xe,De,ye,Se,fe,Re){let We=me||ym(U,xe),$e=xe||De||Sw(We),qt=!H&&(!d.v7_partialHydration||!Se);if(q){if(qt){let kt=Ve(Re);st(Ot({navigation:We},kt!==void 0?{actionData:kt}:{}),{flushSync:fe})}let Je=await Ma(z,U.pathname,D.signal);if(Je.type==="aborted")return{shortCircuited:!0};if(Je.type==="error"){let kt=Va(Je.partialMatches).route.id;return{matches:Je.partialMatches,loaderData:{},errors:{[kt]:Je.error}}}else if(Je.matches)z=Je.matches;else{let{error:kt,notFoundMatches:Pl,route:lu}=ou(U.pathname);return{matches:Pl,loaderData:{},errors:{[lu.id]:kt}}}}let ht=a||s,[ce,M]=fw(t.history,A,z,$e,U,d.v7_partialHydration&&Se===!0,d.v7_skipActionErrorRevalidation,Z,J,ee,Le,oe,j,ht,l,Re);if(su(Je=>!(z&&z.some(kt=>kt.route.id===Je))||ce&&ce.some(kt=>kt.route.id===Je)),K=++$,ce.length===0&&M.length===0){let Je=_e();return Ct(U,Ot({matches:z,loaderData:{},errors:Re&&Wr(Re[1])?{[Re[0]]:Re[1].error}:null},Iw(Re),Je?{fetchers:new Map(A.fetchers)}:{}),{flushSync:fe}),{shortCircuited:!0}}if(qt){let Je={};if(!q){Je.navigation=We;let kt=Ve(Re);kt!==void 0&&(Je.actionData=kt)}M.length>0&&(Je.fetchers=Me(M)),st(Je,{flushSync:fe})}M.forEach(Je=>{W(Je.key),Je.controller&&re.set(Je.key,Je.controller)});let ae=()=>M.forEach(Je=>W(Je.key));_&&_.signal.addEventListener("abort",ae);let{loaderResults:Ce,fetcherResults:Xe}=await Yt(A,z,ce,M,D);if(D.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",ae),M.forEach(Je=>re.delete(Je.key));let vt=Fh(Ce);if(vt)return await zt(D,vt.result,!0,{replace:ye}),{shortCircuited:!0};if(vt=Fh(Xe),vt)return j.add(vt.key),await zt(D,vt.result,!0,{replace:ye}),{shortCircuited:!0};let{loaderData:Ht,errors:en}=yw(A,z,Ce,Re,M,Xe,de);de.forEach((Je,kt)=>{Je.subscribe(Pl=>{(Pl||Je.done)&&de.delete(kt)})}),d.v7_partialHydration&&Se&&A.errors&&(en=Ot({},A.errors,en));let yn=_e(),Xi=rt(K),tn=yn||Xi||M.length>0;return Ot({matches:z,loaderData:Ht,errors:en},tn?{fetchers:new Map(A.fetchers)}:{})}function Ve(D){if(D&&!Wr(D[1]))return{[D[0]]:D[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function Me(D){return D.forEach(U=>{let z=A.fetchers.get(U.key),q=yu(void 0,z?z.data:void 0);A.fetchers.set(U.key,q)}),new Map(A.fetchers)}function qe(D,U,z,q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");W(D);let me=(q&&q.flushSync)===!0,xe=a||s,De=Qv(A.location,A.matches,l,d.v7_prependBasename,z,d.v7_relativeSplatPath,U,q==null?void 0:q.relative),ye=Ua(xe,De,l),Se=Ls(ye,xe,De);if(Se.active&&Se.matches&&(ye=Se.matches),!ye){y(D,U,gr(404,{pathname:De}),{flushSync:me});return}let{path:fe,submission:Re,error:We}=dw(d.v7_normalizeFormMethod,!0,De,q);if(We){y(D,U,We,{flushSync:me});return}let $e=Fu(ye,fe),qt=(q&&q.preventScrollReset)===!0;if(Re&&xi(Re.formMethod)){Gt(D,U,fe,$e,ye,Se.active,me,qt,Re);return}oe.set(D,{routeId:U,path:fe}),Lt(D,U,fe,$e,ye,Se.active,me,qt,Re)}async function Gt(D,U,z,q,me,xe,De,ye,Se){pr(),oe.delete(D);function fe(nn){if(!nn.route.action&&!nn.route.lazy){let Nl=gr(405,{method:Se.formMethod,pathname:z,routeId:U});return y(D,U,Nl,{flushSync:De}),!0}return!1}if(!xe&&fe(q))return;let Re=A.fetchers.get(D);E(D,s2(Se,Re),{flushSync:De});let We=new AbortController,$e=Ol(t.history,z,We.signal,Se);if(xe){let nn=await Ma(me,z,$e.signal);if(nn.type==="aborted")return;if(nn.type==="error"){y(D,U,nn.error,{flushSync:De});return}else if(nn.matches){if(me=nn.matches,q=Fu(me,z),fe(q))return}else{y(D,U,gr(404,{pathname:z}),{flushSync:De});return}}re.set(D,We);let qt=$,ce=(await En("action",A,$e,[q],me,D))[q.route.id];if($e.signal.aborted){re.get(D)===We&&re.delete(D);return}if(d.v7_fetcherPersist&&Le.has(D)){if(Ka(ce)||Wr(ce)){E(D,Gs(void 0));return}}else{if(Ka(ce))if(re.delete(D),K>qt){E(D,Gs(void 0));return}else return j.add(D),E(D,yu(Se)),zt($e,ce,!1,{fetcherSubmission:Se,preventScrollReset:ye});if(Wr(ce)){y(D,U,ce.error);return}}if(na(ce))throw gr(400,{type:"defer-action"});let M=A.navigation.location||A.location,ae=Ol(t.history,M,We.signal),Ce=a||s,Xe=A.navigation.state!=="idle"?Ua(Ce,A.navigation.location,l):A.matches;tt(Xe,"Didn't find any matches after fetcher action");let vt=++$;ie.set(D,vt);let Ht=yu(Se,ce.data);A.fetchers.set(D,Ht);let[en,yn]=fw(t.history,A,Xe,Se,M,!1,d.v7_skipActionErrorRevalidation,Z,J,ee,Le,oe,j,Ce,l,[q.route.id,ce]);yn.filter(nn=>nn.key!==D).forEach(nn=>{let Nl=nn.key,JI=A.fetchers.get(Nl),O_=yu(void 0,JI?JI.data:void 0);A.fetchers.set(Nl,O_),W(Nl),nn.controller&&re.set(Nl,nn.controller)}),st({fetchers:new Map(A.fetchers)});let Xi=()=>yn.forEach(nn=>W(nn.key));We.signal.addEventListener("abort",Xi);let{loaderResults:tn,fetcherResults:Je}=await Yt(A,Xe,en,yn,ae);if(We.signal.aborted)return;We.signal.removeEventListener("abort",Xi),ie.delete(D),re.delete(D),yn.forEach(nn=>re.delete(nn.key));let kt=Fh(tn);if(kt)return zt(ae,kt.result,!1,{preventScrollReset:ye});if(kt=Fh(Je),kt)return j.add(kt.key),zt(ae,kt.result,!1,{preventScrollReset:ye});let{loaderData:Pl,errors:lu}=yw(A,Xe,tn,void 0,yn,Je,de);if(A.fetchers.has(D)){let nn=Gs(ce.data);A.fetchers.set(D,nn)}rt(vt),A.navigation.state==="loading"&&vt>K?(tt(R,"Expected pending action"),_&&_.abort(),Ct(A.navigation.location,{matches:Xe,loaderData:Pl,errors:lu,fetchers:new Map(A.fetchers)})):(st({errors:lu,loaderData:Cw(A.loaderData,Pl,Xe,lu),fetchers:new Map(A.fetchers)}),Z=!1)}async function Lt(D,U,z,q,me,xe,De,ye,Se){let fe=A.fetchers.get(D);E(D,yu(Se,fe?fe.data:void 0),{flushSync:De});let Re=new AbortController,We=Ol(t.history,z,Re.signal);if(xe){let ce=await Ma(me,z,We.signal);if(ce.type==="aborted")return;if(ce.type==="error"){y(D,U,ce.error,{flushSync:De});return}else if(ce.matches)me=ce.matches,q=Fu(me,z);else{y(D,U,gr(404,{pathname:z}),{flushSync:De});return}}re.set(D,Re);let $e=$,ht=(await En("loader",A,We,[q],me,D))[q.route.id];if(na(ht)&&(ht=await bC(ht,We.signal,!0)||ht),re.get(D)===Re&&re.delete(D),!We.signal.aborted){if(Le.has(D)){E(D,Gs(void 0));return}if(Ka(ht))if(K>$e){E(D,Gs(void 0));return}else{j.add(D),await zt(We,ht,!1,{preventScrollReset:ye});return}if(Wr(ht)){y(D,U,ht.error);return}tt(!na(ht),"Unhandled fetcher deferred data"),E(D,Gs(ht.data))}}async function zt(D,U,z,q){let{submission:me,fetcherSubmission:xe,preventScrollReset:De,replace:ye}=q===void 0?{}:q;U.response.headers.has("X-Remix-Revalidate")&&(Z=!0);let Se=U.response.headers.get("Location");tt(Se,"Expected a Location header on the redirect Response"),Se=mw(Se,new URL(D.url),l);let fe=Pd(A.location,Se,{_isRedirect:!0});if(n){let ce=!1;if(U.response.headers.has("X-Remix-Reload-Document"))ce=!0;else if(IC.test(Se)){const M=t.history.createURL(Se);ce=M.origin!==e.location.origin||oh(M.pathname,l)==null}if(ce){ye?e.location.replace(Se):e.location.assign(Se);return}}_=null;let Re=ye===!0||U.response.headers.has("X-Remix-Replace")?on.Replace:on.Push,{formMethod:We,formAction:$e,formEncType:qt}=A.navigation;!me&&!xe&&We&&$e&&qt&&(me=Sw(A.navigation));let ht=me||xe;if(VD.has(U.response.status)&&ht&&xi(ht.formMethod))await ue(Re,fe,{submission:Ot({},ht,{formAction:Se}),preventScrollReset:De||T,enableViewTransition:z?O:void 0});else{let ce=ym(fe,me);await ue(Re,fe,{overrideNavigation:ce,fetcherSubmission:xe,preventScrollReset:De||T,enableViewTransition:z?O:void 0})}}async function En(D,U,z,q,me,xe){let De,ye={};try{De=await XD(c,D,U,z,q,me,xe,o,i)}catch(Se){return q.forEach(fe=>{ye[fe.route.id]={type:ft.error,error:Se}}),ye}for(let[Se,fe]of Object.entries(De))if(e2(fe)){let Re=fe.result;ye[Se]={type:ft.redirect,response:YD(Re,z,Se,me,l,d.v7_relativeSplatPath)}}else ye[Se]=await JD(fe);return ye}async function Yt(D,U,z,q,me){let xe=D.matches,De=En("loader",D,me,z,U,null),ye=Promise.all(q.map(async Re=>{if(Re.matches&&Re.match&&Re.controller){let $e=(await En("loader",D,Ol(t.history,Re.path,Re.controller.signal),[Re.match],Re.matches,Re.key))[Re.match.route.id];return{[Re.key]:$e}}else return Promise.resolve({[Re.key]:{type:ft.error,error:gr(404,{pathname:Re.path})}})})),Se=await De,fe=(await ye).reduce((Re,We)=>Object.assign(Re,We),{});return await Promise.all([r2(U,Se,me.signal,xe,D.loaderData),i2(U,fe,q)]),{loaderResults:Se,fetcherResults:fe}}function pr(){Z=!0,J.push(...su()),oe.forEach((D,U)=>{re.has(U)&&ee.add(U),W(U)})}function E(D,U,z){z===void 0&&(z={}),A.fetchers.set(D,U),st({fetchers:new Map(A.fetchers)},{flushSync:(z&&z.flushSync)===!0})}function y(D,U,z,q){q===void 0&&(q={});let me=Va(A.matches,U);P(D),st({errors:{[me.route.id]:z},fetchers:new Map(A.fetchers)},{flushSync:(q&&q.flushSync)===!0})}function I(D){return d.v7_fetcherPersist&&(ke.set(D,(ke.get(D)||0)+1),Le.has(D)&&Le.delete(D)),A.fetchers.get(D)||GD}function P(D){let U=A.fetchers.get(D);re.has(D)&&!(U&&U.state==="loading"&&ie.has(D))&&W(D),oe.delete(D),ie.delete(D),j.delete(D),Le.delete(D),ee.delete(D),A.fetchers.delete(D)}function F(D){if(d.v7_fetcherPersist){let U=(ke.get(D)||0)-1;U<=0?(ke.delete(D),Le.add(D)):ke.set(D,U)}else P(D);st({fetchers:new Map(A.fetchers)})}function W(D){let U=re.get(D);U&&(U.abort(),re.delete(D))}function Q(D){for(let U of D){let z=I(U),q=Gs(z.data);A.fetchers.set(U,q)}}function _e(){let D=[],U=!1;for(let z of j){let q=A.fetchers.get(z);tt(q,"Expected fetcher: "+z),q.state==="loading"&&(j.delete(z),D.push(z),U=!0)}return Q(D),U}function rt(D){let U=[];for(let[z,q]of ie)if(q<D){let me=A.fetchers.get(z);tt(me,"Expected fetcher: "+z),me.state==="loading"&&(W(z),ie.delete(z),U.push(z))}return Q(U),U.length>0}function ot(D,U){let z=A.blockers.get(D)||vu;return Pe.get(D)!==U&&Pe.set(D,U),z}function at(D){A.blockers.delete(D),Pe.delete(D)}function Qe(D,U){let z=A.blockers.get(D)||vu;tt(z.state==="unblocked"&&U.state==="blocked"||z.state==="blocked"&&U.state==="blocked"||z.state==="blocked"&&U.state==="proceeding"||z.state==="blocked"&&U.state==="unblocked"||z.state==="proceeding"&&U.state==="unblocked","Invalid blocker state transition: "+z.state+" -> "+U.state);let q=new Map(A.blockers);q.set(D,U),st({blockers:q})}function Ds(D){let{currentLocation:U,nextLocation:z,historyAction:q}=D;if(Pe.size===0)return;Pe.size>1&&Rc(!1,"A router only supports one blocker at a time");let me=Array.from(Pe.entries()),[xe,De]=me[me.length-1],ye=A.blockers.get(xe);if(!(ye&&ye.state==="proceeding")&&De({currentLocation:U,nextLocation:z,historyAction:q}))return xe}function ou(D){let U=gr(404,{pathname:D}),z=a||s,{matches:q,route:me}=bw(z);return su(),{notFoundMatches:q,route:me,error:U}}function su(D){let U=[];return de.forEach((z,q)=>{(!D||D(q))&&(z.cancel(),U.push(q),de.delete(q))}),U}function Qt(D,U,z){if(p=D,C=U,g=z||null,!m&&A.navigation===vm){m=!0;let q=au(A.location,A.matches);q!=null&&st({restoreScrollPosition:q})}return()=>{p=null,C=null,g=null}}function Do(D,U){return g&&g(D,U.map(q=>mD(q,A.loaderData)))||D.key}function Gg(D,U){if(p&&C){let z=Do(D,U);p[z]=C()}}function au(D,U){if(p){let z=Do(D,U),q=p[z];if(typeof q=="number")return q}return null}function Ls(D,U,z){if(u)if(D){if(Object.keys(D[0].params).length>0)return{active:!0,matches:pf(U,z,l,!0)}}else return{active:!0,matches:pf(U,z,l,!0)||[]};return{active:!1,matches:null}}async function Ma(D,U,z){if(!u)return{type:"success",matches:D};let q=D;for(;;){let me=a==null,xe=a||s,De=o;try{await u({path:U,matches:q,patch:(fe,Re)=>{z.aborted||gw(fe,Re,xe,De,i)}})}catch(fe){return{type:"error",error:fe,partialMatches:q}}finally{me&&!z.aborted&&(s=[...s])}if(z.aborted)return{type:"aborted"};let ye=Ua(xe,U,l);if(ye)return{type:"success",matches:ye};let Se=pf(xe,U,l,!0);if(!Se||q.length===Se.length&&q.every((fe,Re)=>fe.route.id===Se[Re].route.id))return{type:"success",matches:null};q=Se}}function Ch(D){o={},a=dp(D,i,void 0,o)}function Wg(D,U){let z=a==null;gw(D,U,a||s,o,i),z&&(s=[...s],st({}))}return S={get basename(){return l},get future(){return d},get state(){return A},get routes(){return s},get window(){return e},initialize:ve,subscribe:An,enableScrollRestoration:Qt,navigate:kn,fetch:qe,revalidate:ln,createHref:D=>t.history.createHref(D),encodeLocation:D=>t.history.encodeLocation(D),getFetcher:I,deleteFetcher:F,dispose:an,getBlocker:ot,deleteBlocker:at,patchRoutes:Wg,_internalFetchControllers:re,_internalActiveDeferreds:de,_internalSetRoutes:Ch},S}function ZD(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function Qv(t,e,n,r,i,o,s,a){let l,c;if(s){l=[];for(let d of e)if(l.push(d),d.route.id===s){c=d;break}}else l=e,c=e[e.length-1];let u=_D(i||".",ND(l,o),oh(t.pathname,n)||t.pathname,a==="path");if(i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&c){let d=wC(u.search);if(c.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let h=new URLSearchParams(u.search),f=h.getAll("index");h.delete("index"),f.filter(g=>g).forEach(g=>h.append("index",g));let p=h.toString();u.search=p?"?"+p:""}}return r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:nl([n,u.pathname])),ih(u)}function dw(t,e,n,r){if(!r||!ZD(r))return{path:n};if(r.formMethod&&!n2(r.formMethod))return{path:n,error:gr(405,{method:r.formMethod})};let i=()=>({path:n,error:gr(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),a=YE(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!xi(s))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[g,C]=p;return""+f+g+"="+C+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!xi(s))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}tt(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=e0(r.formData),c=r.formData;else if(r.body instanceof FormData)l=e0(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=vw(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=vw(l)}catch{return i()}let u={formMethod:s,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(xi(u.formMethod))return{path:n,submission:u};let d=Ra(n);return e&&d.search&&wC(d.search)&&l.append("index",""),d.search="?"+l,{path:ih(d),submission:u}}function hw(t,e,n){n===void 0&&(n=!1);let r=t.findIndex(i=>i.route.id===e);return r>=0?t.slice(0,n?r+1:r):t}function fw(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g){let C=g?Wr(g[1])?g[1].error:g[1].data:void 0,m=t.createURL(e.location),v=t.createURL(i),b=n;o&&e.errors?b=hw(n,Object.keys(e.errors)[0],!0):g&&Wr(g[1])&&(b=hw(n,g[0]));let k=g?g[1].statusCode:void 0,S=s&&k&&k>=400,A=b.filter((T,_)=>{let{route:O}=T;if(O.lazy)return!0;if(O.loader==null)return!1;if(o)return qv(O,e.loaderData,e.errors);if(zD(e.loaderData,e.matches[_],T)||l.some(H=>H===T.route.id))return!0;let B=e.matches[_],V=T;return pw(T,Ot({currentUrl:m,currentParams:B.params,nextUrl:v,nextParams:V.params},r,{actionResult:C,actionStatus:k,defaultShouldRevalidate:S?!1:a||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||KE(B,V)}))}),R=[];return d.forEach((T,_)=>{if(o||!n.some(Z=>Z.route.id===T.routeId)||u.has(_))return;let O=Ua(f,T.path,p);if(!O){R.push({key:_,routeId:T.routeId,path:T.path,matches:null,match:null,controller:null});return}let B=e.fetchers.get(_),V=Fu(O,T.path),H=!1;h.has(_)?H=!1:c.has(_)?(c.delete(_),H=!0):B&&B.state!=="idle"&&B.data===void 0?H=a:H=pw(V,Ot({currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:C,actionStatus:k,defaultShouldRevalidate:S?!1:a})),H&&R.push({key:_,routeId:T.routeId,path:T.path,matches:O,match:V,controller:new AbortController})}),[A,R]}function qv(t,e,n){if(t.lazy)return!0;if(!t.loader)return!1;let r=e!=null&&e[t.id]!==void 0,i=n!=null&&n[t.id]!==void 0;return!r&&i?!1:typeof t.loader=="function"&&t.loader.hydrate===!0?!0:!r&&!i}function zD(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function KE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function pw(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}function gw(t,e,n,r,i){var o;let s;if(t){let c=r[t];tt(c,"No route found to patch children into: routeId = "+t),c.children||(c.children=[]),s=c.children}else s=n;let a=e.filter(c=>!s.some(u=>JE(c,u))),l=dp(a,i,[t||"_","patch",String(((o=s)==null?void 0:o.length)||"0")],r);s.push(...l)}function JE(t,e){return"id"in t&&"id"in e&&t.id===e.id?!0:t.index===e.index&&t.path===e.path&&t.caseSensitive===e.caseSensitive?(!t.children||t.children.length===0)&&(!e.children||e.children.length===0)?!0:t.children.every((n,r)=>{var i;return(i=e.children)==null?void 0:i.some(o=>JE(n,o))}):!1}async function HD(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];tt(i,"No route found in manifest");let o={};for(let s in r){let l=i[s]!==void 0&&s!=="hasErrorBoundary";Rc(!l,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!l&&!pD.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,Ot({},e(i),{lazy:void 0}))}async function $D(t){let{matches:e}=t,n=e.filter(i=>i.shouldLoad);return(await Promise.all(n.map(i=>i.resolve()))).reduce((i,o,s)=>Object.assign(i,{[n[s].route.id]:o}),{})}async function XD(t,e,n,r,i,o,s,a,l,c){let u=o.map(f=>f.route.lazy?HD(f.route,l,a):void 0),d=o.map((f,p)=>{let g=u[p],C=i.some(v=>v.route.id===f.route.id);return Ot({},f,{shouldLoad:C,resolve:async v=>(v&&r.method==="GET"&&(f.route.lazy||f.route.loader)&&(C=!0),C?KD(e,r,f,g,v,c):Promise.resolve({type:ft.data,result:void 0}))})}),h=await t({matches:d,request:r,params:o[0].params,fetcherKey:s,context:c});try{await Promise.all(u)}catch{}return h}async function KD(t,e,n,r,i,o){let s,a,l=c=>{let u,d=new Promise((p,g)=>u=g);a=()=>u(),e.signal.addEventListener("abort",a);let h=p=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):c({request:e,params:n.params,context:o},...p!==void 0?[p]:[]),f=(async()=>{try{return{type:"data",result:await(i?i(g=>h(g)):h())}}catch(p){return{type:"error",result:p}}})();return Promise.race([f,d])};try{let c=n.route[t];if(r)if(c){let u,[d]=await Promise.all([l(c).catch(h=>{u=h}),r]);if(u!==void 0)throw u;s=d}else if(await r,c=n.route[t],c)s=await l(c);else if(t==="action"){let u=new URL(e.url),d=u.pathname+u.search;throw gr(405,{method:e.method,pathname:d,routeId:n.route.id})}else return{type:ft.data,result:void 0};else if(c)s=await l(c);else{let u=new URL(e.url),d=u.pathname+u.search;throw gr(404,{pathname:d})}tt(s.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:ft.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return s}async function JD(t){let{result:e,type:n}=t;if(QE(e)){let c;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(u){return{type:ft.error,error:u}}return n===ft.error?{type:ft.error,error:new hp(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:ft.data,data:c,statusCode:e.status,headers:e.headers}}if(n===ft.error){if(ww(e)){var r;if(e.data instanceof Error){var i;return{type:ft.error,error:e.data,statusCode:(i=e.init)==null?void 0:i.status}}e=new hp(((r=e.init)==null?void 0:r.status)||500,void 0,e.data)}return{type:ft.error,error:e,statusCode:hg(e)?e.status:void 0}}if(t2(e)){var o,s;return{type:ft.deferred,deferredData:e,statusCode:(o=e.init)==null?void 0:o.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}if(ww(e)){var a,l;return{type:ft.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:ft.data,data:e}}function YD(t,e,n,r,i,o){let s=t.headers.get("Location");if(tt(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!IC.test(s)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);s=Qv(new URL(e.url),a,i,!0,s,o),t.headers.set("Location",s)}return t}function mw(t,e,n){if(IC.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=oh(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function Ol(t,e,n,r){let i=t.createURL(YE(e)).toString(),o={signal:n};if(r&&xi(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=e0(r.formData):o.body=r.formData}return new Request(i,o)}function e0(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function vw(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function QD(t,e,n,r,i){let o={},s=null,a,l=!1,c={},u=n&&Wr(n[1])?n[1].error:void 0;return t.forEach(d=>{if(!(d.route.id in e))return;let h=d.route.id,f=e[h];if(tt(!Ka(f),"Cannot handle redirect results in processLoaderData"),Wr(f)){let p=f.error;u!==void 0&&(p=u,u=void 0),s=s||{};{let g=Va(t,h);s[g.route.id]==null&&(s[g.route.id]=p)}o[h]=void 0,l||(l=!0,a=hg(f.error)?f.error.status:500),f.headers&&(c[h]=f.headers)}else na(f)?(r.set(h,f.deferredData),o[h]=f.deferredData.data,f.statusCode!=null&&f.statusCode!==200&&!l&&(a=f.statusCode),f.headers&&(c[h]=f.headers)):(o[h]=f.data,f.statusCode&&f.statusCode!==200&&!l&&(a=f.statusCode),f.headers&&(c[h]=f.headers))}),u!==void 0&&n&&(s={[n[0]]:u},o[n[0]]=void 0),{loaderData:o,errors:s,statusCode:a||200,loaderHeaders:c}}function yw(t,e,n,r,i,o,s){let{loaderData:a,errors:l}=QD(e,n,r,s);return i.forEach(c=>{let{key:u,match:d,controller:h}=c,f=o[u];if(tt(f,"Did not find corresponding fetcher result"),!(h&&h.signal.aborted))if(Wr(f)){let p=Va(t.matches,d==null?void 0:d.route.id);l&&l[p.route.id]||(l=Ot({},l,{[p.route.id]:f.error})),t.fetchers.delete(u)}else if(Ka(f))tt(!1,"Unhandled fetcher revalidation redirect");else if(na(f))tt(!1,"Unhandled fetcher deferred data");else{let p=Gs(f.data);t.fetchers.set(u,p)}}),{loaderData:a,errors:l}}function Cw(t,e,n,r){let i=Ot({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function Iw(t){return t?Wr(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Va(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function bw(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function gr(t,e){let{pathname:n,routeId:r,method:i,type:o,message:s}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(a="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?l="defer() is not supported in actions":o==="invalid-body"&&(l="Unable to encode submission body")):t===403?(a="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",l='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new hp(t||500,a,new Error(l),!0)}function Fh(t){let e=Object.entries(t);for(let n=e.length-1;n>=0;n--){let[r,i]=e[n];if(Ka(i))return{key:r,result:i}}}function YE(t){let e=typeof t=="string"?Ra(t):t;return ih(Ot({},e,{hash:""}))}function qD(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function e2(t){return QE(t.result)&&UD.has(t.result.status)}function na(t){return t.type===ft.deferred}function Wr(t){return t.type===ft.error}function Ka(t){return(t&&t.type)===ft.redirect}function ww(t){return typeof t=="object"&&t!=null&&"type"in t&&"data"in t&&"init"in t&&t.type==="DataWithResponseInit"}function t2(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function QE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function n2(t){return FD.has(t.toLowerCase())}function xi(t){return LD.has(t.toLowerCase())}async function r2(t,e,n,r,i){let o=Object.entries(e);for(let s=0;s<o.length;s++){let[a,l]=o[s],c=t.find(h=>(h==null?void 0:h.route.id)===a);if(!c)continue;let u=r.find(h=>h.route.id===c.route.id),d=u!=null&&!KE(u,c)&&(i&&i[c.route.id])!==void 0;na(l)&&d&&await bC(l,n,!1).then(h=>{h&&(e[a]=h)})}}async function i2(t,e,n){for(let r=0;r<n.length;r++){let{key:i,routeId:o,controller:s}=n[r],a=e[i];t.find(c=>(c==null?void 0:c.route.id)===o)&&na(a)&&(tt(s,"Expected an AbortController for revalidating fetcher deferred result"),await bC(a,s.signal,!0).then(c=>{c&&(e[i]=c)}))}}async function bC(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ft.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ft.error,error:i}}return{type:ft.data,data:t.deferredData.data}}}function wC(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function Fu(t,e){let n=typeof e=="string"?Ra(e).search:e.search;if(t[t.length-1].route.index&&wC(n||""))return t[t.length-1];let r=HE(t);return r[r.length-1]}function Sw(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function ym(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function o2(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function yu(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function s2(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Gs(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function a2(t,e){try{let n=t.sessionStorage.getItem(XE);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function l2(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(XE,JSON.stringify(n))}catch(r){Rc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function t0(){return t0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},t0.apply(this,arguments)}const qE=w.createContext(null),eT=w.createContext(null),tT=w.createContext(null),SC=w.createContext(null),fg=w.createContext({outlet:null,matches:[],isDataRoute:!1}),nT=w.createContext(null);function AC(){return w.useContext(SC)!=null}function rT(){return AC()||tt(!1),w.useContext(SC).location}function c2(t,e,n,r){AC()||tt(!1);let{navigator:i}=w.useContext(tT),{matches:o}=w.useContext(fg),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let l=s?s.pathnameBase:"/";s&&s.route;let c=rT(),u;u=c;let d=u.pathname||"/",h=d;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let f=Ua(t,{pathname:h});return p2(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:nl([l,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:nl([l,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,r)}function u2(){let t=y2(),e=hg(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,null)}const d2=w.createElement(u2,null);class h2 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(fg.Provider,{value:this.props.routeContext},w.createElement(nT.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function f2(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(qE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(fg.Provider,{value:e},r)}function p2(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if(!n)return null;if(n.errors)t=n.matches;else if((o=r)!=null&&o.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||tt(!1),s=s.slice(0,Math.min(s.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let f,p=!1,g=null,C=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||d2,l&&(c<0&&h===0?(C2("route-fallback"),p=!0,C=null):c===h&&(p=!0,C=d.route.hydrateFallbackElement||null)));let m=e.concat(s.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=C:d.route.Component?b=w.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,w.createElement(f2,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?w.createElement(h2,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var n0=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(n0||{});function g2(t){let e=w.useContext(eT);return e||tt(!1),e}function m2(t){let e=w.useContext(fg);return e||tt(!1),e}function v2(t){let e=m2(),n=e.matches[e.matches.length-1];return n.route.id||tt(!1),n.route.id}function y2(){var t;let e=w.useContext(nT),n=g2(n0.UseRouteError),r=v2(n0.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const Aw={};function C2(t,e,n){Aw[t]||(Aw[t]=!0)}const kw={};function I2(t,e){kw[e]||(kw[e]=!0,console.warn(e))}const Ml=(t,e,n)=>I2(t," React Router Future Flag Warning: "+e+". "+("You can use the `"+t+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function b2(t,e){t!=null&&t.v7_startTransition||Ml("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(t!=null&&t.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&Ml("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||Ml("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||Ml("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||Ml("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||Ml("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function w2(t){let{basename:e="/",children:n=null,location:r,navigationType:i=on.Pop,navigator:o,static:s=!1,future:a}=t;AC()&&tt(!1);let l=e.replace(/^\/*/,"/"),c=w.useMemo(()=>({basename:l,navigator:o,static:s,future:t0({v7_relativeSplatPath:!1},a)}),[l,a,o,s]);typeof r=="string"&&(r=Ra(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=w.useMemo(()=>{let C=oh(u,l);return C==null?null:{location:{pathname:C,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return g==null?null:w.createElement(tT.Provider,{value:c},w.createElement(SC.Provider,{children:n,value:g}))}new Promise(()=>{});function S2(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:w.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:w.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:w.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fp(){return fp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fp.apply(this,arguments)}const A2="6";try{window.__reactRouterVersion=A2}catch{}function k2(t,e){return jD({basename:void 0,future:fp({},void 0,{v7_prependBasename:!0}),history:dD({window:void 0}),hydrationData:E2(),routes:t,mapRouteProperties:S2,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function E2(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=fp({},e,{errors:T2(e.errors)})),e}function T2(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new hp(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const x2=w.createContext({isTransitioning:!1}),R2=w.createContext(new Map),P2="startTransition",Ew=Q_[P2],N2="flushSync",Tw=uD[N2];function _2(t){Ew?Ew(t):t()}function Cu(t){Tw?Tw(t):t()}class O2{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function M2(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=w.useState(n.state),[s,a]=w.useState(),[l,c]=w.useState({isTransitioning:!1}),[u,d]=w.useState(),[h,f]=w.useState(),[p,g]=w.useState(),C=w.useRef(new Map),{v7_startTransition:m}=r||{},v=w.useCallback(T=>{m?_2(T):T()},[m]),b=w.useCallback((T,_)=>{let{deletedFetchers:O,flushSync:B,viewTransitionOpts:V}=_;O.forEach(Z=>C.current.delete(Z)),T.fetchers.forEach((Z,J)=>{Z.data!==void 0&&C.current.set(J,Z.data)});let H=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!V||H){B?Cu(()=>o(T)):v(()=>o(T));return}if(B){Cu(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:V.currentLocation,nextLocation:V.nextLocation})});let Z=n.window.document.startViewTransition(()=>{Cu(()=>o(T))});Z.finished.finally(()=>{Cu(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})})}),Cu(()=>f(Z));return}h?(u&&u.resolve(),h.skipTransition(),g({state:T,currentLocation:V.currentLocation,nextLocation:V.nextLocation})):(a(T),c({isTransitioning:!0,flushSync:!1,currentLocation:V.currentLocation,nextLocation:V.nextLocation}))},[n.window,h,u,C,v]);w.useLayoutEffect(()=>n.subscribe(b),[n,b]),w.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new O2)},[l]),w.useEffect(()=>{if(u&&s&&n.window){let T=s,_=u.promise,O=n.window.document.startViewTransition(async()=>{v(()=>o(T)),await _});O.finished.finally(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})}),f(O)}},[v,s,u,n.window]),w.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,h,i.location,s]),w.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),g(void 0))},[l.isTransitioning,p]),w.useEffect(()=>{},[]);let k=w.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:T=>n.navigate(T),push:(T,_,O)=>n.navigate(T,{state:_,preventScrollReset:O==null?void 0:O.preventScrollReset}),replace:(T,_,O)=>n.navigate(T,{replace:!0,state:_,preventScrollReset:O==null?void 0:O.preventScrollReset})}),[n]),S=n.basename||"/",A=w.useMemo(()=>({router:n,navigator:k,static:!1,basename:S}),[n,k,S]),R=w.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return w.useEffect(()=>b2(r,n.future),[r,n.future]),w.createElement(w.Fragment,null,w.createElement(qE.Provider,{value:A},w.createElement(eT.Provider,{value:i},w.createElement(R2.Provider,{value:C.current},w.createElement(x2.Provider,{value:l},w.createElement(w2,{basename:S,location:i.location,navigationType:i.historyAction,navigator:k,future:R},i.initialized||n.future.v7_partialHydration?w.createElement(D2,{routes:n.routes,future:n.future,state:i}):e))))),null)}const D2=w.memo(L2);function L2(t){let{routes:e,future:n,state:r}=t;return c2(e,void 0,r,n)}var xw;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(xw||(xw={}));var Rw;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Rw||(Rw={}));const iT=t=>{const e=typeof t=="function",n=w.useRef(t);w.useEffect(()=>{n.current=t}),w.useEffect(()=>{if(e){const r=i=>{const o=n.current(i);if(typeof o=="string")return i.preventDefault(),i.returnValue=o;if(i.defaultPrevented)return i.returnValue=""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}},[e])},oT=7e3;let Ji=null;function Pw(t,e="assertive",n=oT){Ji?Ji.announce(t,e,n):(Ji=new B2,(typeof IS_REACT_ACT_ENVIRONMENT=="boolean"?IS_REACT_ACT_ENVIRONMENT:typeof jest<"u")?Ji.announce(t,e,n):setTimeout(()=>{Ji!=null&&Ji.isAttached()&&(Ji==null||Ji.announce(t,e,n))},100))}class B2{isAttached(){var e;return(e=this.node)===null||e===void 0?void 0:e.isConnected}createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=oT){var i,o;if(!this.node)return;let s=document.createElement("div");typeof e=="object"?(s.setAttribute("role","img"),s.setAttribute("aria-labelledby",e["aria-labelledby"])):s.textContent=e,n==="assertive"?(i=this.assertiveLog)===null||i===void 0||i.appendChild(s):(o=this.politeLog)===null||o===void 0||o.appendChild(s),e!==""&&setTimeout(()=>{s.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&this.assertiveLog&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&this.politeLog&&(this.politeLog.innerHTML=""))}constructor(){this.node=null,this.assertiveLog=null,this.politeLog=null,typeof document<"u"&&(this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node))}}var Nw=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function F2(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Fs=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],U2=/(https?:\/\/(?:[A-Za-z0-9#;/?:@=+$',_.!~*()[\]-]|&amp;|%[A-Fa-f0-9]{2})+)/gm,V2=function(){Nw(t,null,[{key:"escapeForHtml",value:function(n){return new t().escapeForHtml(n)}},{key:"linkify",value:function(n){return new t().linkify(n)}},{key:"ansiToHtml",value:function(n,r){return new t().ansiToHtml(n,r)}},{key:"ansiToJson",value:function(n,r){return new t().ansiToJson(n,r)}},{key:"ansiToText",value:function(n){return new t().ansiToText(n)}}]);function t(){F2(this,t),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return Nw(t,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var r=0;r<8;++r)this.PALETTE_COLORS.push(Fs[n][r].color);for(var i=[0,95,135,175,215,255],o=function(h,f,p){return i[h]+", "+i[f]+", "+i[p]},s=0;s<6;++s)for(var a=0;a<6;++a)for(var l=0;l<6;++l)this.PALETTE_COLORS.push(o(s,a,l));for(var c=8,u=0;u<24;++u,c+=10)this.PALETTE_COLORS.push(o(c,c,c))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(r){return r=="&"?"&amp;":r=='"'?"&quot;":r=="<"?"&lt;":r==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(U2,function(r){return'<a href="'+r+'">'+r+"</a>"})}},{key:"ansiToHtml",value:function(n,r){return this.process(n,r,!0)}},{key:"ansiToJson",value:function(n,r){return r=r||{},r.json=!0,r.clearLine=!1,this.process(n,r,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,r,i){var o=this,s=this,a=n.split(/\033\[/),l=a.shift();r==null&&(r={}),r.clearLine=/\r/.test(n);var c=a.map(function(d){return o.processChunk(d,r,i)});if(r&&r.json){var u=s.processChunkJson("");return u.content=l,u.clearLine=r.clearLine,c.unshift(u),r.remove_empty&&(c=c.filter(function(d){return!d.isEmpty()})),c}else c.unshift(l);return c.join("")}},{key:"processChunkJson",value:function(n,r,i){r=typeof r>"u"?{}:r;var o=r.use_classes=typeof r.use_classes<"u"&&r.use_classes,s=r.key=o?"class":"color",a={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:r.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},l=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!l)return a;a.content=l[4];var c=l[2].split(";");if(l[1]!==""||l[3]!=="m"||!i)return a;for(var u=this;c.length>0;){var d=c.shift(),h=parseInt(d);if(isNaN(h)||h===0)u.fg=u.bg=null,u.decorations=[];else if(h===1)u.decorations.push("bold");else if(h===2)u.decorations.push("dim");else if(h===3)u.decorations.push("italic");else if(h===4)u.decorations.push("underline");else if(h===5)u.decorations.push("blink");else if(h===7)u.decorations.push("reverse");else if(h===8)u.decorations.push("hidden");else if(h===9)u.decorations.push("strikethrough");else if(h===21)u.removeDecoration("bold");else if(h===22)u.removeDecoration("bold"),u.removeDecoration("dim");else if(h===23)u.removeDecoration("italic");else if(h===24)u.removeDecoration("underline");else if(h===25)u.removeDecoration("blink");else if(h===27)u.removeDecoration("reverse");else if(h===28)u.removeDecoration("hidden");else if(h===29)u.removeDecoration("strikethrough");else if(h===39)u.fg=null;else if(h===49)u.bg=null;else if(h>=30&&h<38)u.fg=Fs[0][h%10][s];else if(h>=90&&h<98)u.fg=Fs[1][h%10][s];else if(h>=40&&h<48)u.bg=Fs[0][h%10][s];else if(h>=100&&h<108)u.bg=Fs[1][h%10][s];else if(h===38||h===48){var f=h===38;if(c.length>=1){var p=c.shift();if(p==="5"&&c.length>=1){var g=parseInt(c.shift());if(g>=0&&g<=255)if(!o)this.PALETTE_COLORS||u.setupPalette(),f?u.fg=this.PALETTE_COLORS[g]:u.bg=this.PALETTE_COLORS[g];else{var C=g>=16?"ansi-palette-"+g:Fs[g>7?1:0][g%8].class;f?u.fg=C:u.bg=C}}else if(p==="2"&&c.length>=3){var m=parseInt(c.shift()),v=parseInt(c.shift()),b=parseInt(c.shift());if(m>=0&&m<=255&&v>=0&&v<=255&&b>=0&&b<=255){var k=m+", "+v+", "+b;o?f?(u.fg="ansi-truecolor",u.fg_truecolor=k):(u.bg="ansi-truecolor",u.bg_truecolor=k):f?u.fg=k:u.bg=k}}}}}return u.fg===null&&u.bg===null&&u.decorations.length===0||(a.fg=u.fg,a.bg=u.bg,a.fg_truecolor=u.fg_truecolor,a.bg_truecolor=u.bg_truecolor,a.decorations=u.decorations,a.decoration=u.decorations.slice(-1).pop()||null,a.was_processed=!0),a}},{key:"processChunk",value:function(n,r,i){var o=this;r=r||{};var s=this.processChunkJson(n,r,i),a=r.use_classes;if(s.decorations=s.decorations.filter(function(f){if(f==="reverse"){s.fg||(s.fg=Fs[0][7][a?"class":"color"]),s.bg||(s.bg=Fs[0][0][a?"class":"color"]);var p=s.fg;s.fg=s.bg,s.bg=p;var g=s.fg_truecolor;return s.fg_truecolor=s.bg_truecolor,s.bg_truecolor=g,s.isInverted=!0,!1}return!0}),r.json)return s;if(s.isEmpty())return"";if(!s.was_processed)return s.content;var l=[],c=[],u=[],d={},h=function(p){var g=[],C=void 0;for(C in p)p.hasOwnProperty(C)&&g.push("data-"+C+'="'+o.escapeForHtml(p[C])+'"');return g.length>0?" "+g.join(" "):""};return s.isInverted&&(d["ansi-is-inverted"]="true"),s.fg&&(a?(l.push(s.fg+"-fg"),s.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=s.fg_truecolor,s.fg_truecolor=null)):l.push("color:rgb("+s.fg+")")),s.bg&&(a?(l.push(s.bg+"-bg"),s.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=s.bg_truecolor,s.bg_truecolor=null)):l.push("background-color:rgb("+s.bg+")")),s.decorations.forEach(function(f){if(a){c.push("ansi-"+f);return}f==="bold"?c.push("font-weight:bold"):f==="dim"?c.push("opacity:0.5"):f==="italic"?c.push("font-style:italic"):f==="hidden"?c.push("visibility:hidden"):f==="strikethrough"?u.push("line-through"):u.push(f)}),u.length&&c.push("text-decoration:"+u.join(" ")),a?'<span class="'+l.concat(c).join(" ")+'"'+h(d)+">"+s.content+"</span>":'<span style="'+l.concat(c).join(";")+'"'+h(d)+">"+s.content+"</span>"}},{key:"removeDecoration",value:function(n){var r=this.decorations.indexOf(n);r>=0&&this.decorations.splice(r,1)}}]),t}(),G2=V2;const W2=Qd(G2);function j2(t,e){let n=[];for(const r of t.split(`\r
`)){const i=W2.ansiToJson(r,{json:!0,remove_empty:!1});let o=[];for(const s of i){const a=$2(s,e);o=[...o,...a]}n=[...n,X.jsx("span",{children:o},n.length)]}return n}const Z2=/(\s|^)((\w+):\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,z2=/(?<slorp1>\s|^)(?<name>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+[a-zA-Z])(?<slorp2>\s|$|\.)/g,H2=/@\[exit:([a-zA-Z]+)\]([a-zA-Z]+)@\[\/\]/g;function $2(t,e){const n=X2(t),r=[];let i=0,o=0;function s(u,d){let h;for(;(h=u.exec(t.content))!==null;){const f=h.index;f>i&&r.push(t.content.substring(i,f)),r.push(d(h)),i=u.lastIndex}}function a(u){const[,d,h]=u,f=h;return X.jsxs(X.Fragment,{children:[d,X.jsx("a",{href:f,target:"_blank",rel:"noreferrer",children:h})]})}function l(u){const d=u.groups.name,h=`mailto:${d}`;return X.jsxs(X.Fragment,{children:[u.groups.slorp1,X.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:d}),u.groups.slorp2]})}function c(u){const[,d,h]=u;return X.jsx("a",{onClick:()=>e(d),className:"exit",children:h})}return s(Z2,a),s(z2,l),s(H2,c),i<t.content.length&&r.push(t.content.substring(i)),r.map(u=>X.jsx("span",{style:n,children:u},o++))}function X2(t){const e={};switch(t.bg&&(e.backgroundColor=`rgb(${t.bg})`),t.fg&&(e.color=`rgb(${t.fg})`),t.decoration){case"bold":e.fontWeight="bold";break;case"dim":e.opacity="0.5";break;case"italic":e.fontStyle="italic";break;case"hidden":e.visibility="hidden";break;case"strikethrough":e.textDecoration="line-through";break;case"underline":e.textDecoration="underline";break;case"blink":e.textDecoration="blink";break}return e}var Sa={},jc={},sT=w;function Fe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var mr=Object.prototype.hasOwnProperty,K2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_w={},Ow={};function aT(t){return mr.call(Ow,t)?!0:mr.call(_w,t)?!1:K2.test(t)?Ow[t]=!0:(_w[t]=!0,!1)}function dr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ln[t]=new dr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ln[e]=new dr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ln[t]=new dr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ln[t]=new dr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ln[t]=new dr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ln[t]=new dr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ln[t]=new dr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ln[t]=new dr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ln[t]=new dr(t,5,!1,t.toLowerCase(),null,!1,!1)});var kC=/[\-:]([a-z])/g;function EC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kC,EC);Ln[e]=new dr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kC,EC);Ln[e]=new dr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kC,EC);Ln[e]=new dr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ln[t]=new dr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new dr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ln[t]=new dr(t,1,!1,t.toLowerCase(),null,!0,!0)});var gf={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},J2=["Webkit","ms","Moz","O"];Object.keys(gf).forEach(function(t){J2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),gf[e]=gf[t]})});var Y2=/["'&<>]/;function nr(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=Y2.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var Q2=/([A-Z])/g,q2=/^ms-/,r0=Array.isArray;function Lo(t,e){return{insertionMode:t,selectedValue:e}}function eL(t,e,n){switch(e){case"select":return Lo(1,n.value!=null?n.value:n.defaultValue);case"svg":return Lo(2,null);case"math":return Lo(3,null);case"foreignObject":return Lo(1,null);case"table":return Lo(4,null);case"thead":case"tbody":case"tfoot":return Lo(5,null);case"colgroup":return Lo(7,null);case"tr":return Lo(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Lo(1,null):t}var Mw=new Map;function lT(t,e,n){if(typeof n!="object")throw Error(Fe(62));e=!0;for(var r in n)if(mr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=nr(r);i=nr((""+i).trim())}else{o=r;var s=Mw.get(o);s!==void 0||(s=nr(o.replace(Q2,"-$1").toLowerCase().replace(q2,"-ms-")),Mw.set(o,s)),o=s,i=typeof i=="number"?i===0||mr.call(gf,r)?""+i:i+"px":nr((""+i).trim())}e?(e=!1,t.push(' style="',o,":",i)):t.push(";",o,":",i)}}e||t.push('"')}function Pr(t,e,n,r){switch(n){case"style":lT(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Ln.hasOwnProperty(n)?Ln[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',nr(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',nr(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',nr(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',nr(r),'"')}}else if(aT(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',nr(r),'"')}}}function mf(t,e,n){if(e!=null){if(n!=null)throw Error(Fe(60));if(typeof e!="object"||!("__html"in e))throw Error(Fe(61));e=e.__html,e!=null&&t.push(""+e)}}function tL(t){var e="";return sT.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Cm(t,e,n,r){t.push(Yi(n));var i=n=null,o;for(o in e)if(mr.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:Pr(t,r,o,s)}}return t.push(">"),mf(t,i,n),typeof n=="string"?(t.push(nr(n)),null):n}var nL=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Dw=new Map;function Yi(t){var e=Dw.get(t);if(e===void 0){if(!nL.test(t))throw Error(Fe(65,t));e="<"+t,Dw.set(t,e)}return e}function rL(t,e,n,r,i){switch(e){case"select":t.push(Yi("select"));var o=null,s=null;for(u in n)if(mr.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:Pr(t,r,u,a)}}return t.push(">"),mf(t,s,o),o;case"option":s=i.selectedValue,t.push(Yi("option"));var l=a=null,c=null,u=null;for(o in n)if(mr.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":l=d;default:Pr(t,r,o,d)}}if(s!=null)if(n=l!==null?""+l:tL(a),r0(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(' selected=""');break}}else""+s===n&&t.push(' selected=""');else c&&t.push(' selected=""');return t.push(">"),mf(t,u,a),a;case"textarea":t.push(Yi("textarea")),u=s=o=null;for(a in n)if(mr.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":u=l;break;case"value":o=l;break;case"defaultValue":s=l;break;case"dangerouslySetInnerHTML":throw Error(Fe(91));default:Pr(t,r,a,l)}if(o===null&&s!==null&&(o=s),t.push(">"),u!=null){if(o!=null)throw Error(Fe(92));if(r0(u)&&1<u.length)throw Error(Fe(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o!==null&&t.push(nr(""+o)),null;case"input":t.push(Yi("input")),l=u=a=o=null;for(s in n)if(mr.call(n,s)&&(c=n[s],c!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(Fe(399,"input"));case"defaultChecked":l=c;break;case"defaultValue":a=c;break;case"checked":u=c;break;case"value":o=c;break;default:Pr(t,r,s,c)}return u!==null?Pr(t,r,"checked",u):l!==null&&Pr(t,r,"checked",l),o!==null?Pr(t,r,"value",o):a!==null&&Pr(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(Yi("menuitem"));for(var h in n)if(mr.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Fe(400));default:Pr(t,r,h,o)}return t.push(">"),null;case"title":t.push(Yi("title")),o=null;for(d in n)if(mr.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(Fe(434));default:Pr(t,r,d,s)}return t.push(">"),o;case"listing":case"pre":t.push(Yi(e)),s=o=null;for(l in n)if(mr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:Pr(t,r,l,a)}if(t.push(">"),s!=null){if(o!=null)throw Error(Fe(60));if(typeof s!="object"||!("__html"in s))throw Error(Fe(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Yi(e));for(var f in n)if(mr.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Fe(399,e));default:Pr(t,r,f,o)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Cm(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),Cm(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Cm(t,n,e,r);t.push(Yi(e)),s=o=null;for(c in n)if(mr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":lT(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:aT(c)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",c,'="',nr(a),'"')}return t.push(">"),mf(t,s,o),o}}function Lw(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(Fe(395));return t.push(n),t.push('"></template>')}function iL(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(Fe(397))}}function oL(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(Fe(397))}}var sL=/[<\u2028\u2029]/g;function Im(t){return JSON.stringify(t).replace(sL,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function aL(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function Bw(t,e,n,r){return n.generateStaticMarkup?(t.push(nr(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(nr(e)),t=!0),t)}var id=Object.assign,lL=Symbol.for("react.element"),cT=Symbol.for("react.portal"),uT=Symbol.for("react.fragment"),dT=Symbol.for("react.strict_mode"),hT=Symbol.for("react.profiler"),fT=Symbol.for("react.provider"),pT=Symbol.for("react.context"),gT=Symbol.for("react.forward_ref"),mT=Symbol.for("react.suspense"),vT=Symbol.for("react.suspense_list"),yT=Symbol.for("react.memo"),TC=Symbol.for("react.lazy"),cL=Symbol.for("react.scope"),uL=Symbol.for("react.debug_trace_mode"),dL=Symbol.for("react.legacy_hidden"),hL=Symbol.for("react.default_value"),Fw=Symbol.iterator;function i0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case uT:return"Fragment";case cT:return"Portal";case hT:return"Profiler";case dT:return"StrictMode";case mT:return"Suspense";case vT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case pT:return(t.displayName||"Context")+".Consumer";case fT:return(t._context.displayName||"Context")+".Provider";case gT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case yT:return e=t.displayName||null,e!==null?e:i0(t.type)||"Memo";case TC:e=t._payload,t=t._init;try{return i0(t(e))}catch{}}return null}var CT={};function Uw(t,e){if(t=t.contextTypes,!t)return CT;var n={},r;for(r in t)n[r]=e[r];return n}var Ja=null;function pg(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Fe(401))}else{if(n===null)throw Error(Fe(401));pg(t,n)}e.context._currentValue2=e.value}}function IT(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&IT(t)}function bT(t){var e=t.parent;e!==null&&bT(e),t.context._currentValue2=t.value}function wT(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(Fe(402));t.depth===e.depth?pg(t,e):wT(t,e)}function ST(t,e){var n=e.parent;if(n===null)throw Error(Fe(402));t.depth===n.depth?pg(t,n):ST(t,n),e.context._currentValue2=e.value}function pp(t){var e=Ja;e!==t&&(e===null?bT(t):t===null?IT(e):e.depth===t.depth?pg(e,t):e.depth>t.depth?wT(e,t):ST(e,t),Ja=t)}var Vw={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function Gw(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=Vw,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue2:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:id({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&Vw.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=id({},o,a)):id(o,a))}t.state=o}else o.queue=null}var fL={id:1,overflow:""};function o0(t,e,n){var r=t.id;t=t.overflow;var i=32-vf(r)-1;r&=~(1<<i),n+=1;var o=32-vf(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-vf(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var vf=Math.clz32?Math.clz32:mL,pL=Math.log,gL=Math.LN2;function mL(t){return t>>>=0,t===0?32:31-(pL(t)/gL|0)|0}function vL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yL=typeof Object.is=="function"?Object.is:vL,As=null,xC=null,yf=null,It=null,Uu=!1,gp=!1,Nd=0,ra=null,gg=0;function Ga(){if(As===null)throw Error(Fe(321));return As}function Ww(){if(0<gg)throw Error(Fe(312));return{memoizedState:null,queue:null,next:null}}function RC(){return It===null?yf===null?(Uu=!1,yf=It=Ww()):(Uu=!0,It=yf):It.next===null?(Uu=!1,It=It.next=Ww()):(Uu=!0,It=It.next),It}function PC(){xC=As=null,gp=!1,yf=null,gg=0,It=ra=null}function AT(t,e){return typeof e=="function"?e(t):e}function jw(t,e,n){if(As=Ga(),It=RC(),Uu){var r=It.queue;if(e=r.dispatch,ra!==null&&(n=ra.get(r),n!==void 0)){ra.delete(r),r=It.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return It.memoizedState=r,[r,e]}return[It.memoizedState,e]}return t=t===AT?typeof e=="function"?e():e:n!==void 0?n(e):e,It.memoizedState=t,t=It.queue={last:null,dispatch:null},t=t.dispatch=CL.bind(null,As,t),[It.memoizedState,t]}function Zw(t,e){if(As=Ga(),It=RC(),e=e===void 0?null:e,It!==null){var n=It.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!yL(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),It.memoizedState=[t,e],t}function CL(t,e,n){if(25<=gg)throw Error(Fe(301));if(t===As)if(gp=!0,t={action:n,next:null},ra===null&&(ra=new Map),n=ra.get(e),n===void 0)ra.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function IL(){throw Error(Fe(394))}function Uh(){}var zw={readContext:function(t){return t._currentValue2},useContext:function(t){return Ga(),t._currentValue2},useMemo:Zw,useReducer:jw,useRef:function(t){As=Ga(),It=RC();var e=It.memoizedState;return e===null?(t={current:t},It.memoizedState=t):e},useState:function(t){return jw(AT,t)},useInsertionEffect:Uh,useLayoutEffect:function(){},useCallback:function(t,e){return Zw(function(){return t},e)},useImperativeHandle:Uh,useEffect:Uh,useDebugValue:Uh,useDeferredValue:function(t){return Ga(),t},useTransition:function(){return Ga(),[!1,IL]},useId:function(){var t=xC.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-vf(t)-1)).toString(32)+e;var n=Cf;if(n===null)throw Error(Fe(404));return e=Nd++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return Ga(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Fe(407));return n()}},Cf=null,bm=sT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function bL(t){return console.error(t),null}function Vu(){}function wL(t,e,n,r,i,o,s,a,l){var c=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?bL:i,onAllReady:Vu,onShellReady:s===void 0?Vu:s,onShellError:Vu,onFatalError:Vu},n=mp(e,0,null,n,!1,!1),n.parentFlushed=!0,t=NC(e,t,null,n,u,CT,null,fL),c.push(t),e}function NC(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var c=t.pingedTasks;c.push(l),c.length===1&&TT(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(l),l}function mp(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function _d(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function vp(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function Hw(t,e,n,r,i){for(As={},xC=e,Nd=0,t=n(r,i);gp;)gp=!1,Nd=0,gg+=1,It=null,t=n(r,i);return PC(),t}function $w(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(Fe(108,i0(r)||"Unknown",a));r=id({},s,n)}e.legacyContext=r,Fr(t,e,i),e.legacyContext=s}else Fr(t,e,i)}function Xw(t,e){if(t&&t.defaultProps){e=id({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function s0(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=Uw(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue2:i),Gw(o,n,r,i),$w(t,e,o,n)}else{o=Uw(n,e.legacyContext),i=Hw(t,e,n,r,o);var s=Nd!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)Gw(i,n,r,o),$w(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=o0(r,1,0);try{Fr(t,e,i)}finally{e.treeContext=r}}else Fr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=rL(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=eL(s,n,r),a0(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case dL:case uL:case dT:case hT:case uT:Fr(t,e,r.children);return;case vT:Fr(t,e,r.children);return;case cL:throw Error(Fe(343));case mT:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},l=mp(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var c=mp(t,0,null,i.formatContext,!1,!1);c.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=c;try{if(a0(t,e,r),t.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),c.status=1,yp(a,c),a.pendingTasks===0)break e}catch(u){c.status=4,a.forceClientRender=!0,a.errorDigest=_d(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=NC(t,o,n,l,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case gT:if(r=Hw(t,e,n.render,r,i),Nd!==0){n=e.treeContext,e.treeContext=o0(n,1,0);try{Fr(t,e,r)}finally{e.treeContext=n}}else Fr(t,e,r);return;case yT:n=n.type,r=Xw(n,r),s0(t,e,n,r,i);return;case fT:if(i=r.children,n=n._context,r=r.value,o=n._currentValue2,n._currentValue2=r,s=Ja,Ja=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,Fr(t,e,i),t=Ja,t===null)throw Error(Fe(403));r=t.parentValue,t.context._currentValue2=r===hL?t.context._defaultValue:r,t=Ja=t.parent,e.context=t;return;case pT:r=r.children,r=r(n._currentValue2),Fr(t,e,r);return;case TC:i=n._init,n=i(n._payload),r=Xw(n,r),s0(t,e,n,r,void 0);return}throw Error(Fe(130,n==null?n:typeof n,""))}}function Fr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case lL:s0(t,e,n.type,n.props,n.ref);return;case cT:throw Error(Fe(257));case TC:var r=n._init;n=r(n._payload),Fr(t,e,n);return}if(r0(n)){Kw(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=Fw&&n[Fw]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);Kw(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=Bw(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=Bw(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function Kw(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=o0(o,r,i);try{a0(t,e,n[i])}finally{e.treeContext=o}}}function a0(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Fr(t,e,n)}catch(l){if(PC(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var s=e.blockedSegment,a=mp(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=NC(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,pp(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,pp(o),l}}function SL(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,ET(this,e,t)}function kT(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Fe(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return kT(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function yp(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&yp(t,n)}else t.completedSegments.push(e)}function ET(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Fe(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Vu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&yp(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(SL,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(yp(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function TT(t){if(t.status!==2){var e=Ja,n=bm.current;bm.current=zw;var r=Cf;Cf=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,l=s.blockedSegment;if(l.status===0){pp(s.context);try{Fr(a,s,s.node),a.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),s.abortSet.delete(s),l.status=1,ET(a,s.blockedBoundary,l)}catch(p){if(PC(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var c=s.ping;p.then(c,c)}else{s.abortSet.delete(s),l.status=4;var u=s.blockedBoundary,d=p,h=_d(a,d);if(u===null?vp(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&_C(t,t.destination)}catch(p){_d(t,p),vp(t,p)}finally{Cf=r,bm.current=n,n===zw&&pp(e)}}}function Vh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)e.push(r[o]);i=mg(t,e,i)}for(;o<r.length-1;o++)e.push(r[o]);return o<r.length&&(i=e.push(r[o])),i;default:throw Error(Fe(390))}}function mg(t,e,n){var r=n.boundary;if(r===null)return Vh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=nr(r),e.push(r),e.push('"')),e.push("></template>")),Vh(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;return i=i.boundaryPrefix+o.toString(16),r=r.id=i,Lw(e,t.responseState,r),Vh(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),Lw(e,t.responseState,r.id),Vh(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(Fe(391));return mg(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function Jw(t,e,n){return iL(e,t.responseState,n.formatContext,n.id),mg(t,e,n),oL(e,n.formatContext)}function Yw(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)xT(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(Fe(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function xT(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Fe(392));return Jw(t,e,r)}return Jw(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function _C(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){mg(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,l=s.id,c=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),l===null)throw Error(Fe(395));if(r.push(l),r.push('"'),c||u||d){r.push(",");var h=Im(c||"");r.push(h)}if(u||d){r.push(",");var f=Im(u||"");r.push(f)}if(d){r.push(",");var p=Im(d);r.push(p)}if(!r.push(")<\/script>")){t.destination=null,o++,i.splice(0,o);return}}i.splice(0,o);var g=t.completedBoundaries;for(o=0;o<g.length;o++)if(!Yw(t,e,g[o])){t.destination=null,o++,g.splice(0,o);return}g.splice(0,o);var C=t.partialBoundaries;for(o=0;o<C.length;o++){var m=C[o];e:{i=t,s=e;var v=m.completedSegments;for(a=0;a<v.length;a++)if(!xT(i,s,m,v[a])){a++,v.splice(0,a);var b=!1;break e}v.splice(0,a),b=!0}if(!b){t.destination=null,o++,C.splice(0,o);return}}C.splice(0,o);var k=t.completedBoundaries;for(o=0;o<k.length;o++)if(!Yw(t,e,k[o])){t.destination=null,o++,k.splice(0,o);return}k.splice(0,o)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function AL(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return kT(r,t,e)}),n.clear(),t.destination!==null&&_C(t,t.destination)}catch(r){_d(t,r),vp(t,r)}}function kL(){}function RT(t,e,n,r){var i=!1,o=null,s="",a={push:function(c){return c!==null&&(s+=c),!0},destroy:function(c){i=!0,o=c}},l=!1;if(t=wL(t,aL(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,kL,void 0,function(){l=!0}),TT(t),AL(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{_C(t,a)}catch(c){_d(t,c),vp(t,c)}}if(i)throw o;if(!l)throw Error(Fe(426));return s}jc.renderToNodeStream=function(){throw Error(Fe(207))};jc.renderToStaticMarkup=function(t,e){return RT(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};jc.renderToStaticNodeStream=function(){throw Error(Fe(208))};jc.renderToString=function(t,e){return RT(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};jc.version="18.3.1";var OC={},PT=w;function je(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ur=null,Vr=0;function Te(t,e){if(e.length!==0)if(512<e.length)0<Vr&&(t.enqueue(new Uint8Array(Ur.buffer,0,Vr)),Ur=new Uint8Array(512),Vr=0),t.enqueue(e);else{var n=Ur.length-Vr;n<e.length&&(n===0?t.enqueue(Ur):(Ur.set(e.subarray(0,n),Vr),t.enqueue(Ur),e=e.subarray(n)),Ur=new Uint8Array(512),Vr=0),Ur.set(e,Vr),Vr+=e.length}}function Pt(t,e){return Te(t,e),!0}function Qw(t){Ur&&0<Vr&&(t.enqueue(new Uint8Array(Ur.buffer,0,Vr)),Ur=null,Vr=0)}var NT=new TextEncoder;function Ze(t){return NT.encode(t)}function pe(t){return NT.encode(t)}function _T(t,e){typeof t.error=="function"?t.error(e):t.close()}var vr=Object.prototype.hasOwnProperty,EL=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,qw={},eS={};function OT(t){return vr.call(eS,t)?!0:vr.call(qw,t)?!1:EL.test(t)?eS[t]=!0:(qw[t]=!0,!1)}function hr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bn[t]=new hr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bn[e]=new hr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bn[t]=new hr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bn[t]=new hr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bn[t]=new hr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bn[t]=new hr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bn[t]=new hr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bn[t]=new hr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bn[t]=new hr(t,5,!1,t.toLowerCase(),null,!1,!1)});var MC=/[\-:]([a-z])/g;function DC(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(MC,DC);Bn[e]=new hr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(MC,DC);Bn[e]=new hr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(MC,DC);Bn[e]=new hr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bn[t]=new hr(t,1,!1,t.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new hr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bn[t]=new hr(t,1,!1,t.toLowerCase(),null,!0,!0)});var If={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},TL=["Webkit","ms","Moz","O"];Object.keys(If).forEach(function(t){TL.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),If[e]=If[t]})});var xL=/["'&<>]/;function Nn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=xL.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var RL=/([A-Z])/g,PL=/^ms-/,l0=Array.isArray,NL=pe("<script>"),_L=pe("<\/script>"),OL=pe('<script src="'),ML=pe('<script type="module" src="'),tS=pe('" async=""><\/script>'),DL=/(<\/|<)(s)(cript)/gi;function LL(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function BL(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?NL:pe('<script nonce="'+Nn(e)+'">');var o=[];if(n!==void 0&&o.push(e,Ze((""+n).replace(DL,LL)),_L),r!==void 0)for(n=0;n<r.length;n++)o.push(OL,Ze(Nn(r[n])),tS);if(i!==void 0)for(r=0;r<i.length;r++)o.push(ML,Ze(Nn(i[r])),tS);return{bootstrapChunks:o,startInlineScript:e,placeholderPrefix:pe(t+"P:"),segmentPrefix:pe(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function Qi(t,e){return{insertionMode:t,selectedValue:e}}function FL(t){return Qi(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function UL(t,e,n){switch(e){case"select":return Qi(1,n.value!=null?n.value:n.defaultValue);case"svg":return Qi(2,null);case"math":return Qi(3,null);case"foreignObject":return Qi(1,null);case"table":return Qi(4,null);case"thead":case"tbody":case"tfoot":return Qi(5,null);case"colgroup":return Qi(7,null);case"tr":return Qi(6,null)}return 4<=t.insertionMode||t.insertionMode===0?Qi(1,null):t}var LC=pe("<!-- -->");function nS(t,e,n,r){return e===""?r:(r&&t.push(LC),t.push(Ze(Nn(e))),!0)}var rS=new Map,VL=pe(' style="'),iS=pe(":"),GL=pe(";");function MT(t,e,n){if(typeof n!="object")throw Error(je(62));e=!0;for(var r in n)if(vr.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=Ze(Nn(r));i=Ze(Nn((""+i).trim()))}else{o=r;var s=rS.get(o);s!==void 0||(s=pe(Nn(o.replace(RL,"-$1").toLowerCase().replace(PL,"-ms-"))),rS.set(o,s)),o=s,i=typeof i=="number"?i===0||vr.call(If,r)?Ze(""+i):Ze(i+"px"):Ze(Nn((""+i).trim()))}e?(e=!1,t.push(VL,o,iS,i)):t.push(GL,o,iS,i)}}e||t.push(Wa)}var Ws=pe(" "),Ul=pe('="'),Wa=pe('"'),oS=pe('=""');function Nr(t,e,n,r){switch(n){case"style":MT(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=Bn.hasOwnProperty(n)?Bn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=Ze(e.attributeName),e.type){case 3:r&&t.push(Ws,n,oS);break;case 4:r===!0?t.push(Ws,n,oS):r!==!1&&t.push(Ws,n,Ul,Ze(Nn(r)),Wa);break;case 5:isNaN(r)||t.push(Ws,n,Ul,Ze(Nn(r)),Wa);break;case 6:!isNaN(r)&&1<=r&&t.push(Ws,n,Ul,Ze(Nn(r)),Wa);break;default:e.sanitizeURL&&(r=""+r),t.push(Ws,n,Ul,Ze(Nn(r)),Wa)}}else if(OT(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(Ws,Ze(n),Ul,Ze(Nn(r)),Wa)}}}var js=pe(">"),sS=pe("/>");function bf(t,e,n){if(e!=null){if(n!=null)throw Error(je(60));if(typeof e!="object"||!("__html"in e))throw Error(je(61));e=e.__html,e!=null&&t.push(Ze(""+e))}}function WL(t){var e="";return PT.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var wm=pe(' selected=""');function Sm(t,e,n,r){t.push(qi(n));var i=n=null,o;for(o in e)if(vr.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:Nr(t,r,o,s)}}return t.push(js),bf(t,i,n),typeof n=="string"?(t.push(Ze(Nn(n))),null):n}var Am=pe(`
`),jL=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,aS=new Map;function qi(t){var e=aS.get(t);if(e===void 0){if(!jL.test(t))throw Error(je(65,t));e=pe("<"+t),aS.set(t,e)}return e}var ZL=pe("<!DOCTYPE html>");function zL(t,e,n,r,i){switch(e){case"select":t.push(qi("select"));var o=null,s=null;for(u in n)if(vr.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:Nr(t,r,u,a)}}return t.push(js),bf(t,s,o),o;case"option":s=i.selectedValue,t.push(qi("option"));var l=a=null,c=null,u=null;for(o in n)if(vr.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":c=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":l=d;default:Nr(t,r,o,d)}}if(s!=null)if(n=l!==null?""+l:WL(a),l0(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(wm);break}}else""+s===n&&t.push(wm);else c&&t.push(wm);return t.push(js),bf(t,u,a),a;case"textarea":t.push(qi("textarea")),u=s=o=null;for(a in n)if(vr.call(n,a)&&(l=n[a],l!=null))switch(a){case"children":u=l;break;case"value":o=l;break;case"defaultValue":s=l;break;case"dangerouslySetInnerHTML":throw Error(je(91));default:Nr(t,r,a,l)}if(o===null&&s!==null&&(o=s),t.push(js),u!=null){if(o!=null)throw Error(je(92));if(l0(u)&&1<u.length)throw Error(je(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(Am),o!==null&&t.push(Ze(Nn(""+o))),null;case"input":t.push(qi("input")),l=u=a=o=null;for(s in n)if(vr.call(n,s)&&(c=n[s],c!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,"input"));case"defaultChecked":l=c;break;case"defaultValue":a=c;break;case"checked":u=c;break;case"value":o=c;break;default:Nr(t,r,s,c)}return u!==null?Nr(t,r,"checked",u):l!==null&&Nr(t,r,"checked",l),o!==null?Nr(t,r,"value",o):a!==null&&Nr(t,r,"value",a),t.push(sS),null;case"menuitem":t.push(qi("menuitem"));for(var h in n)if(vr.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(je(400));default:Nr(t,r,h,o)}return t.push(js),null;case"title":t.push(qi("title")),o=null;for(d in n)if(vr.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(je(434));default:Nr(t,r,d,s)}return t.push(js),o;case"listing":case"pre":t.push(qi(e)),s=o=null;for(l in n)if(vr.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:Nr(t,r,l,a)}if(t.push(js),s!=null){if(o!=null)throw Error(je(60));if(typeof s!="object"||!("__html"in s))throw Error(je(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(Am,Ze(n)):t.push(Ze(""+n)))}return typeof o=="string"&&o[0]===`
`&&t.push(Am),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(qi(e));for(var f in n)if(vr.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(je(399,e));default:Nr(t,r,f,o)}return t.push(sS),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Sm(t,n,e,r);case"html":return i.insertionMode===0&&t.push(ZL),Sm(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Sm(t,n,e,r);t.push(qi(e)),s=o=null;for(c in n)if(vr.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":MT(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:OT(c)&&typeof a!="function"&&typeof a!="symbol"&&t.push(Ws,Ze(c),Ul,Ze(Nn(a)),Wa)}return t.push(js),bf(t,s,o),o}}var HL=pe("</"),$L=pe(">"),XL=pe('<template id="'),KL=pe('"></template>'),JL=pe("<!--$-->"),YL=pe('<!--$?--><template id="'),QL=pe('"></template>'),qL=pe("<!--$!-->"),eB=pe("<!--/$-->"),tB=pe("<template"),nB=pe('"'),rB=pe(' data-dgst="');pe(' data-msg="');pe(' data-stck="');var iB=pe("></template>");function lS(t,e,n){if(Te(t,YL),n===null)throw Error(je(395));return Te(t,n),Pt(t,QL)}var oB=pe('<div hidden id="'),sB=pe('">'),aB=pe("</div>"),lB=pe('<svg aria-hidden="true" style="display:none" id="'),cB=pe('">'),uB=pe("</svg>"),dB=pe('<math aria-hidden="true" style="display:none" id="'),hB=pe('">'),fB=pe("</math>"),pB=pe('<table hidden id="'),gB=pe('">'),mB=pe("</table>"),vB=pe('<table hidden><tbody id="'),yB=pe('">'),CB=pe("</tbody></table>"),IB=pe('<table hidden><tr id="'),bB=pe('">'),wB=pe("</tr></table>"),SB=pe('<table hidden><colgroup id="'),AB=pe('">'),kB=pe("</colgroup></table>");function EB(t,e,n,r){switch(n.insertionMode){case 0:case 1:return Te(t,oB),Te(t,e.segmentPrefix),Te(t,Ze(r.toString(16))),Pt(t,sB);case 2:return Te(t,lB),Te(t,e.segmentPrefix),Te(t,Ze(r.toString(16))),Pt(t,cB);case 3:return Te(t,dB),Te(t,e.segmentPrefix),Te(t,Ze(r.toString(16))),Pt(t,hB);case 4:return Te(t,pB),Te(t,e.segmentPrefix),Te(t,Ze(r.toString(16))),Pt(t,gB);case 5:return Te(t,vB),Te(t,e.segmentPrefix),Te(t,Ze(r.toString(16))),Pt(t,yB);case 6:return Te(t,IB),Te(t,e.segmentPrefix),Te(t,Ze(r.toString(16))),Pt(t,bB);case 7:return Te(t,SB),Te(t,e.segmentPrefix),Te(t,Ze(r.toString(16))),Pt(t,AB);default:throw Error(je(397))}}function TB(t,e){switch(e.insertionMode){case 0:case 1:return Pt(t,aB);case 2:return Pt(t,uB);case 3:return Pt(t,fB);case 4:return Pt(t,mB);case 5:return Pt(t,CB);case 6:return Pt(t,wB);case 7:return Pt(t,kB);default:throw Error(je(397))}}var xB=pe('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),RB=pe('$RS("'),PB=pe('","'),NB=pe('")<\/script>'),_B=pe('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),OB=pe('$RC("'),MB=pe('","'),DB=pe('")<\/script>'),LB=pe('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),BB=pe('$RX("'),FB=pe('"'),UB=pe(")<\/script>"),km=pe(","),VB=/[<\u2028\u2029]/g;function Em(t){return JSON.stringify(t).replace(VB,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var od=Object.assign,GB=Symbol.for("react.element"),DT=Symbol.for("react.portal"),LT=Symbol.for("react.fragment"),BT=Symbol.for("react.strict_mode"),FT=Symbol.for("react.profiler"),UT=Symbol.for("react.provider"),VT=Symbol.for("react.context"),GT=Symbol.for("react.forward_ref"),WT=Symbol.for("react.suspense"),jT=Symbol.for("react.suspense_list"),ZT=Symbol.for("react.memo"),BC=Symbol.for("react.lazy"),WB=Symbol.for("react.scope"),jB=Symbol.for("react.debug_trace_mode"),ZB=Symbol.for("react.legacy_hidden"),zB=Symbol.for("react.default_value"),cS=Symbol.iterator;function c0(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case LT:return"Fragment";case DT:return"Portal";case FT:return"Profiler";case BT:return"StrictMode";case WT:return"Suspense";case jT:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case VT:return(t.displayName||"Context")+".Consumer";case UT:return(t._context.displayName||"Context")+".Provider";case GT:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ZT:return e=t.displayName||null,e!==null?e:c0(t.type)||"Memo";case BC:e=t._payload,t=t._init;try{return c0(t(e))}catch{}}return null}var zT={};function uS(t,e){if(t=t.contextTypes,!t)return zT;var n={},r;for(r in t)n[r]=e[r];return n}var Ya=null;function vg(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(je(401))}else{if(n===null)throw Error(je(401));vg(t,n)}e.context._currentValue=e.value}}function HT(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&HT(t)}function $T(t){var e=t.parent;e!==null&&$T(e),t.context._currentValue=t.value}function XT(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(je(402));t.depth===e.depth?vg(t,e):XT(t,e)}function KT(t,e){var n=e.parent;if(n===null)throw Error(je(402));t.depth===n.depth?vg(t,n):KT(t,n),e.context._currentValue=e.value}function Cp(t){var e=Ya;e!==t&&(e===null?$T(t):t===null?HT(e):e.depth===t.depth?vg(e,t):e.depth>t.depth?XT(e,t):KT(e,t),Ya=t)}var dS={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function hS(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=dS,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:od({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&dS.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=od({},o,a)):od(o,a))}t.state=o}else o.queue=null}var HB={id:1,overflow:""};function u0(t,e,n){var r=t.id;t=t.overflow;var i=32-wf(r)-1;r&=~(1<<i),n+=1;var o=32-wf(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-wf(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var wf=Math.clz32?Math.clz32:KB,$B=Math.log,XB=Math.LN2;function KB(t){return t>>>=0,t===0?32:31-($B(t)/XB|0)|0}function JB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var YB=typeof Object.is=="function"?Object.is:JB,ks=null,FC=null,Sf=null,bt=null,Gu=!1,Ip=!1,Od=0,ia=null,yg=0;function ja(){if(ks===null)throw Error(je(321));return ks}function fS(){if(0<yg)throw Error(je(312));return{memoizedState:null,queue:null,next:null}}function UC(){return bt===null?Sf===null?(Gu=!1,Sf=bt=fS()):(Gu=!0,bt=Sf):bt.next===null?(Gu=!1,bt=bt.next=fS()):(Gu=!0,bt=bt.next),bt}function VC(){FC=ks=null,Ip=!1,Sf=null,yg=0,bt=ia=null}function JT(t,e){return typeof e=="function"?e(t):e}function pS(t,e,n){if(ks=ja(),bt=UC(),Gu){var r=bt.queue;if(e=r.dispatch,ia!==null&&(n=ia.get(r),n!==void 0)){ia.delete(r),r=bt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return bt.memoizedState=r,[r,e]}return[bt.memoizedState,e]}return t=t===JT?typeof e=="function"?e():e:n!==void 0?n(e):e,bt.memoizedState=t,t=bt.queue={last:null,dispatch:null},t=t.dispatch=QB.bind(null,ks,t),[bt.memoizedState,t]}function gS(t,e){if(ks=ja(),bt=UC(),e=e===void 0?null:e,bt!==null){var n=bt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!YB(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),bt.memoizedState=[t,e],t}function QB(t,e,n){if(25<=yg)throw Error(je(301));if(t===ks)if(Ip=!0,t={action:n,next:null},ia===null&&(ia=new Map),n=ia.get(e),n===void 0)ia.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function qB(){throw Error(je(394))}function Gh(){}var mS={readContext:function(t){return t._currentValue},useContext:function(t){return ja(),t._currentValue},useMemo:gS,useReducer:pS,useRef:function(t){ks=ja(),bt=UC();var e=bt.memoizedState;return e===null?(t={current:t},bt.memoizedState=t):e},useState:function(t){return pS(JT,t)},useInsertionEffect:Gh,useLayoutEffect:function(){},useCallback:function(t,e){return gS(function(){return t},e)},useImperativeHandle:Gh,useEffect:Gh,useDebugValue:Gh,useDeferredValue:function(t){return ja(),t},useTransition:function(){return ja(),[!1,qB]},useId:function(){var t=FC.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-wf(t)-1)).toString(32)+e;var n=Af;if(n===null)throw Error(je(404));return e=Od++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return ja(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(je(407));return n()}},Af=null,Tm=PT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function eF(t){return console.error(t),null}function Wu(){}function tF(t,e,n,r,i,o,s,a,l){var c=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:c,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?eF:i,onAllReady:o===void 0?Wu:o,onShellReady:s===void 0?Wu:s,onShellError:a===void 0?Wu:a,onFatalError:l===void 0?Wu:l},n=bp(e,0,null,n,!1,!1),n.parentFlushed=!0,t=GC(e,t,null,n,u,zT,null,HB),c.push(t),e}function GC(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var l={node:e,ping:function(){var c=t.pingedTasks;c.push(l),c.length===1&&qT(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(l),l}function bp(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function Md(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function wp(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,_T(t.destination,e)):(t.status=1,t.fatalError=e)}function vS(t,e,n,r,i){for(ks={},FC=e,Od=0,t=n(r,i);Ip;)Ip=!1,Od=0,yg+=1,bt=null,t=n(r,i);return VC(),t}function yS(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(je(108,c0(r)||"Unknown",a));r=od({},s,n)}e.legacyContext=r,Gr(t,e,i),e.legacyContext=s}else Gr(t,e,i)}function CS(t,e){if(t&&t.defaultProps){e=od({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function d0(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=uS(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue:i),hS(o,n,r,i),yS(t,e,o,n)}else{o=uS(n,e.legacyContext),i=vS(t,e,n,r,o);var s=Od!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)hS(i,n,r,o),yS(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=u0(r,1,0);try{Gr(t,e,i)}finally{e.treeContext=r}}else Gr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=zL(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=UL(s,n,r),h0(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(HL,Ze(n),$L)}i.lastPushedText=!1}else{switch(n){case ZB:case jB:case BT:case FT:case LT:Gr(t,e,r.children);return;case jT:Gr(t,e,r.children);return;case WB:throw Error(je(343));case WT:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},l=bp(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(l),i.lastPushedText=!1;var c=bp(t,0,null,i.formatContext,!1,!1);c.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=c;try{if(h0(t,e,r),c.lastPushedText&&c.textEmbedded&&c.chunks.push(LC),c.status=1,Sp(a,c),a.pendingTasks===0)break e}catch(u){c.status=4,a.forceClientRender=!0,a.errorDigest=Md(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=GC(t,o,n,l,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case GT:if(r=vS(t,e,n.render,r,i),Od!==0){n=e.treeContext,e.treeContext=u0(n,1,0);try{Gr(t,e,r)}finally{e.treeContext=n}}else Gr(t,e,r);return;case ZT:n=n.type,r=CS(n,r),d0(t,e,n,r,i);return;case UT:if(i=r.children,n=n._context,r=r.value,o=n._currentValue,n._currentValue=r,s=Ya,Ya=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,Gr(t,e,i),t=Ya,t===null)throw Error(je(403));r=t.parentValue,t.context._currentValue=r===zB?t.context._defaultValue:r,t=Ya=t.parent,e.context=t;return;case VT:r=r.children,r=r(n._currentValue),Gr(t,e,r);return;case BC:i=n._init,n=i(n._payload),r=CS(n,r),d0(t,e,n,r,void 0);return}throw Error(je(130,n==null?n:typeof n,""))}}function Gr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case GB:d0(t,e,n.type,n.props,n.ref);return;case DT:throw Error(je(257));case BC:var r=n._init;n=r(n._payload),Gr(t,e,n);return}if(l0(n)){IS(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=cS&&n[cS]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);IS(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(je(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=nS(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=nS(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function IS(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=u0(o,r,i);try{h0(t,e,n[i])}finally{e.treeContext=o}}}function h0(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Gr(t,e,n)}catch(l){if(VC(),typeof l=="object"&&l!==null&&typeof l.then=="function"){n=l;var s=e.blockedSegment,a=bp(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=GC(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Cp(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Cp(o),l}}function nF(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,QT(this,e,t)}function YT(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(je(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return YT(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function Sp(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Sp(t,n)}else t.completedSegments.push(e)}function QT(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(je(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=Wu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Sp(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(nF,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Sp(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function qT(t){if(t.status!==2){var e=Ya,n=Tm.current;Tm.current=mS;var r=Af;Af=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,l=s.blockedSegment;if(l.status===0){Cp(s.context);try{Gr(a,s,s.node),l.lastPushedText&&l.textEmbedded&&l.chunks.push(LC),s.abortSet.delete(s),l.status=1,QT(a,s.blockedBoundary,l)}catch(p){if(VC(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var c=s.ping;p.then(c,c)}else{s.abortSet.delete(s),l.status=4;var u=s.blockedBoundary,d=p,h=Md(a,d);if(u===null?wp(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&WC(t,t.destination)}catch(p){Md(t,p),wp(t,p)}finally{Af=r,Tm.current=n,n===mS&&Cp(e)}}}function Wh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,Te(e,XL),Te(e,t.placeholderPrefix),t=Ze(r.toString(16)),Te(e,t),Pt(e,KL);case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)Te(e,r[o]);i=Cg(t,e,i)}for(;o<r.length-1;o++)Te(e,r[o]);return o<r.length&&(i=Pt(e,r[o])),i;default:throw Error(je(390))}}function Cg(t,e,n){var r=n.boundary;if(r===null)return Wh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,Pt(e,qL),Te(e,tB),r&&(Te(e,rB),Te(e,Ze(Nn(r))),Te(e,nB)),Pt(e,iB),Wh(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;i=pe(i.boundaryPrefix+o.toString(16)),r=r.id=i,lS(e,t.responseState,r),Wh(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),lS(e,t.responseState,r.id),Wh(t,e,n);else{if(Pt(e,JL),n=r.completedSegments,n.length!==1)throw Error(je(391));Cg(t,e,n[0])}return Pt(e,eB)}function bS(t,e,n){return EB(e,t.responseState,n.formatContext,n.id),Cg(t,e,n),TB(e,n.formatContext)}function wS(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)ex(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,Te(e,t.startInlineScript),t.sentCompleteBoundaryFunction?Te(e,OB):(t.sentCompleteBoundaryFunction=!0,Te(e,_B)),r===null)throw Error(je(395));return n=Ze(n.toString(16)),Te(e,r),Te(e,MB),Te(e,t.segmentPrefix),Te(e,n),Pt(e,DB)}function ex(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(je(392));return bS(t,e,r)}return bS(t,e,r),t=t.responseState,Te(e,t.startInlineScript),t.sentCompleteSegmentFunction?Te(e,RB):(t.sentCompleteSegmentFunction=!0,Te(e,xB)),Te(e,t.segmentPrefix),i=Ze(i.toString(16)),Te(e,i),Te(e,PB),Te(e,t.placeholderPrefix),Te(e,i),Pt(e,NB)}function WC(t,e){Ur=new Uint8Array(512),Vr=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Cg(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)Te(e,r[n]);n<r.length&&Pt(e,r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,l=s.id,c=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(Te(r,a.startInlineScript),a.sentClientRenderFunction?Te(r,BB):(a.sentClientRenderFunction=!0,Te(r,LB)),l===null)throw Error(je(395));Te(r,l),Te(r,FB),(c||u||d)&&(Te(r,km),Te(r,Ze(Em(c||"")))),(u||d)&&(Te(r,km),Te(r,Ze(Em(u||"")))),d&&(Te(r,km),Te(r,Ze(Em(d)))),Pt(r,UB)}i.splice(0,o);var h=t.completedBoundaries;for(o=0;o<h.length;o++)wS(t,e,h[o]);h.splice(0,o),Qw(e),Ur=new Uint8Array(512),Vr=0;var f=t.partialBoundaries;for(o=0;o<f.length;o++){var p=f[o];e:{i=t,s=e;var g=p.completedSegments;for(a=0;a<g.length;a++)if(!ex(i,s,p,g[a])){a++,g.splice(0,a);var C=!1;break e}g.splice(0,a),C=!0}if(!C){t.destination=null,o++,f.splice(0,o);return}}f.splice(0,o);var m=t.completedBoundaries;for(o=0;o<m.length;o++)wS(t,e,m[o]);m.splice(0,o)}finally{Qw(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function SS(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return YT(r,t,e)}),n.clear(),t.destination!==null&&WC(t,t.destination)}catch(r){Md(t,r),wp(t,r)}}OC.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,o,s=new Promise(function(u,d){o=u,i=d}),a=tF(t,BL(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),FL(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,_T(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{WC(a,d)}catch(h){Md(a,h),wp(a,h)}}},cancel:function(){SS(a)}},{highWaterMark:0});u.allReady=s,n(u)},function(u){s.catch(function(){}),r(u)},i);if(e&&e.signal){var l=e.signal,c=function(){SS(a,l.reason),l.removeEventListener("abort",c)};l.addEventListener("abort",c)}qT(a)})};OC.version="18.3.1";var Zc,tx;Zc=jc,tx=OC;Sa.version=Zc.version;Sa.renderToString=Zc.renderToString;Sa.renderToStaticMarkup=Zc.renderToStaticMarkup;Sa.renderToNodeStream=Zc.renderToNodeStream;Sa.renderToStaticNodeStream=Zc.renderToStaticNodeStream;Sa.renderToReadableStream=tx.renderToReadableStream;/*! @license DOMPurify 3.1.7 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.7/LICENSE */const{entries:nx,setPrototypeOf:AS,isFrozen:rF,getPrototypeOf:iF,getOwnPropertyDescriptor:oF}=Object;let{freeze:lr,seal:hi,create:rx}=Object,{apply:f0,construct:p0}=typeof Reflect<"u"&&Reflect;lr||(lr=function(e){return e});hi||(hi=function(e){return e});f0||(f0=function(e,n,r){return e.apply(n,r)});p0||(p0=function(e,n){return new e(...n)});const jh=Kr(Array.prototype.forEach),kS=Kr(Array.prototype.pop),Iu=Kr(Array.prototype.push),kf=Kr(String.prototype.toLowerCase),xm=Kr(String.prototype.toString),ES=Kr(String.prototype.match),bu=Kr(String.prototype.replace),sF=Kr(String.prototype.indexOf),aF=Kr(String.prototype.trim),mi=Kr(Object.prototype.hasOwnProperty),Jn=Kr(RegExp.prototype.test),wu=lF(TypeError);function Kr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return f0(t,e,r)}}function lF(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return p0(t,n)}}function ze(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:kf;AS&&AS(t,null);let r=e.length;for(;r--;){let i=e[r];if(typeof i=="string"){const o=n(i);o!==i&&(rF(e)||(e[r]=o),i=o)}t[i]=!0}return t}function cF(t){for(let e=0;e<t.length;e++)mi(t,e)||(t[e]=null);return t}function Fa(t){const e=rx(null);for(const[n,r]of nx(t))mi(t,n)&&(Array.isArray(r)?e[n]=cF(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Fa(r):e[n]=r);return e}function Su(t,e){for(;t!==null;){const r=oF(t,e);if(r){if(r.get)return Kr(r.get);if(typeof r.value=="function")return Kr(r.value)}t=iF(t)}function n(){return null}return n}const TS=lr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Rm=lr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Pm=lr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),uF=lr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Nm=lr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dF=lr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),xS=lr(["#text"]),RS=lr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),_m=lr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),PS=lr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zh=lr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),hF=hi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),fF=hi(/<%[\w\W]*|[\w\W]*%>/gm),pF=hi(/\${[\w\W]*}/gm),gF=hi(/^data-[\-\w.\u00B7-\uFFFF]/),mF=hi(/^aria-[\-\w]+$/),ix=hi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),vF=hi(/^(?:\w+script|data):/i),yF=hi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),ox=hi(/^html$/i),CF=hi(/^[a-z][.\w]*(-[.\w]+)+$/i);var NS=Object.freeze({__proto__:null,MUSTACHE_EXPR:hF,ERB_EXPR:fF,TMPLIT_EXPR:pF,DATA_ATTR:gF,ARIA_ATTR:mF,IS_ALLOWED_URI:ix,IS_SCRIPT_OR_DATA:vF,ATTR_WHITESPACE:yF,DOCTYPE_NAME:ox,CUSTOM_ELEMENT:CF});const Au={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},IF=function(){return typeof window>"u"?null:window},bF=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const o="dompurify"+(r?"#"+r:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function sx(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IF();const e=ce=>sx(ce);if(e.version="3.1.7",e.removed=[],!t||!t.document||t.document.nodeType!==Au.document)return e.isSupported=!1,e;let{document:n}=t;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:d,DOMParser:h,trustedTypes:f}=t,p=l.prototype,g=Su(p,"cloneNode"),C=Su(p,"remove"),m=Su(p,"nextSibling"),v=Su(p,"childNodes"),b=Su(p,"parentNode");if(typeof s=="function"){const ce=n.createElement("template");ce.content&&ce.content.ownerDocument&&(n=ce.content.ownerDocument)}let k,S="";const{implementation:A,createNodeIterator:R,createDocumentFragment:T,getElementsByTagName:_}=n,{importNode:O}=r;let B={};e.isSupported=typeof nx=="function"&&typeof b=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:H,TMPLIT_EXPR:Z,DATA_ATTR:J,ARIA_ATTR:ee,IS_SCRIPT_OR_DATA:re,ATTR_WHITESPACE:$,CUSTOM_ELEMENT:K}=NS;let{IS_ALLOWED_URI:ie}=NS,j=null;const oe=ze({},[...TS,...Rm,...Pm,...Nm,...xS]);let ke=null;const Le=ze({},[...RS,..._m,...PS,...Zh]);let de=Object.seal(rx(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Pe=null,Ye=null,ve=!0,an=!0,An=!1,st=!0,Ct=!1,kn=!0,ln=!1,ue=!1,we=!1,Ge=!1,Ve=!1,Me=!1,qe=!0,Gt=!1;const Lt="user-content-";let zt=!0,En=!1,Yt={},pr=null;const E=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let y=null;const I=ze({},["audio","video","img","source","image","track"]);let P=null;const F=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),W="http://www.w3.org/1998/Math/MathML",Q="http://www.w3.org/2000/svg",_e="http://www.w3.org/1999/xhtml";let rt=_e,ot=!1,at=null;const Qe=ze({},[W,Q,_e],xm);let Ds=null;const ou=["application/xhtml+xml","text/html"],su="text/html";let Qt=null,Do=null;const Gg=n.createElement("form"),au=function(M){return M instanceof RegExp||M instanceof Function},Ls=function(){let M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Do&&Do===M)){if((!M||typeof M!="object")&&(M={}),M=Fa(M),Ds=ou.indexOf(M.PARSER_MEDIA_TYPE)===-1?su:M.PARSER_MEDIA_TYPE,Qt=Ds==="application/xhtml+xml"?xm:kf,j=mi(M,"ALLOWED_TAGS")?ze({},M.ALLOWED_TAGS,Qt):oe,ke=mi(M,"ALLOWED_ATTR")?ze({},M.ALLOWED_ATTR,Qt):Le,at=mi(M,"ALLOWED_NAMESPACES")?ze({},M.ALLOWED_NAMESPACES,xm):Qe,P=mi(M,"ADD_URI_SAFE_ATTR")?ze(Fa(F),M.ADD_URI_SAFE_ATTR,Qt):F,y=mi(M,"ADD_DATA_URI_TAGS")?ze(Fa(I),M.ADD_DATA_URI_TAGS,Qt):I,pr=mi(M,"FORBID_CONTENTS")?ze({},M.FORBID_CONTENTS,Qt):E,Pe=mi(M,"FORBID_TAGS")?ze({},M.FORBID_TAGS,Qt):{},Ye=mi(M,"FORBID_ATTR")?ze({},M.FORBID_ATTR,Qt):{},Yt=mi(M,"USE_PROFILES")?M.USE_PROFILES:!1,ve=M.ALLOW_ARIA_ATTR!==!1,an=M.ALLOW_DATA_ATTR!==!1,An=M.ALLOW_UNKNOWN_PROTOCOLS||!1,st=M.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ct=M.SAFE_FOR_TEMPLATES||!1,kn=M.SAFE_FOR_XML!==!1,ln=M.WHOLE_DOCUMENT||!1,Ge=M.RETURN_DOM||!1,Ve=M.RETURN_DOM_FRAGMENT||!1,Me=M.RETURN_TRUSTED_TYPE||!1,we=M.FORCE_BODY||!1,qe=M.SANITIZE_DOM!==!1,Gt=M.SANITIZE_NAMED_PROPS||!1,zt=M.KEEP_CONTENT!==!1,En=M.IN_PLACE||!1,ie=M.ALLOWED_URI_REGEXP||ix,rt=M.NAMESPACE||_e,de=M.CUSTOM_ELEMENT_HANDLING||{},M.CUSTOM_ELEMENT_HANDLING&&au(M.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(de.tagNameCheck=M.CUSTOM_ELEMENT_HANDLING.tagNameCheck),M.CUSTOM_ELEMENT_HANDLING&&au(M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(de.attributeNameCheck=M.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),M.CUSTOM_ELEMENT_HANDLING&&typeof M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(de.allowCustomizedBuiltInElements=M.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ct&&(an=!1),Ve&&(Ge=!0),Yt&&(j=ze({},xS),ke=[],Yt.html===!0&&(ze(j,TS),ze(ke,RS)),Yt.svg===!0&&(ze(j,Rm),ze(ke,_m),ze(ke,Zh)),Yt.svgFilters===!0&&(ze(j,Pm),ze(ke,_m),ze(ke,Zh)),Yt.mathMl===!0&&(ze(j,Nm),ze(ke,PS),ze(ke,Zh))),M.ADD_TAGS&&(j===oe&&(j=Fa(j)),ze(j,M.ADD_TAGS,Qt)),M.ADD_ATTR&&(ke===Le&&(ke=Fa(ke)),ze(ke,M.ADD_ATTR,Qt)),M.ADD_URI_SAFE_ATTR&&ze(P,M.ADD_URI_SAFE_ATTR,Qt),M.FORBID_CONTENTS&&(pr===E&&(pr=Fa(pr)),ze(pr,M.FORBID_CONTENTS,Qt)),zt&&(j["#text"]=!0),ln&&ze(j,["html","head","body"]),j.table&&(ze(j,["tbody"]),delete Pe.tbody),M.TRUSTED_TYPES_POLICY){if(typeof M.TRUSTED_TYPES_POLICY.createHTML!="function")throw wu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof M.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw wu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');k=M.TRUSTED_TYPES_POLICY,S=k.createHTML("")}else k===void 0&&(k=bF(f,i)),k!==null&&typeof S=="string"&&(S=k.createHTML(""));lr&&lr(M),Do=M}},Ma=ze({},["mi","mo","mn","ms","mtext"]),Ch=ze({},["annotation-xml"]),Wg=ze({},["title","style","font","a","script"]),D=ze({},[...Rm,...Pm,...uF]),U=ze({},[...Nm,...dF]),z=function(M){let ae=b(M);(!ae||!ae.tagName)&&(ae={namespaceURI:rt,tagName:"template"});const Ce=kf(M.tagName),Xe=kf(ae.tagName);return at[M.namespaceURI]?M.namespaceURI===Q?ae.namespaceURI===_e?Ce==="svg":ae.namespaceURI===W?Ce==="svg"&&(Xe==="annotation-xml"||Ma[Xe]):!!D[Ce]:M.namespaceURI===W?ae.namespaceURI===_e?Ce==="math":ae.namespaceURI===Q?Ce==="math"&&Ch[Xe]:!!U[Ce]:M.namespaceURI===_e?ae.namespaceURI===Q&&!Ch[Xe]||ae.namespaceURI===W&&!Ma[Xe]?!1:!U[Ce]&&(Wg[Ce]||!D[Ce]):!!(Ds==="application/xhtml+xml"&&at[M.namespaceURI]):!1},q=function(M){Iu(e.removed,{element:M});try{b(M).removeChild(M)}catch{C(M)}},me=function(M,ae){try{Iu(e.removed,{attribute:ae.getAttributeNode(M),from:ae})}catch{Iu(e.removed,{attribute:null,from:ae})}if(ae.removeAttribute(M),M==="is"&&!ke[M])if(Ge||Ve)try{q(ae)}catch{}else try{ae.setAttribute(M,"")}catch{}},xe=function(M){let ae=null,Ce=null;if(we)M="<remove></remove>"+M;else{const Ht=ES(M,/^[\r\n\t ]+/);Ce=Ht&&Ht[0]}Ds==="application/xhtml+xml"&&rt===_e&&(M='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+M+"</body></html>");const Xe=k?k.createHTML(M):M;if(rt===_e)try{ae=new h().parseFromString(Xe,Ds)}catch{}if(!ae||!ae.documentElement){ae=A.createDocument(rt,"template",null);try{ae.documentElement.innerHTML=ot?S:Xe}catch{}}const vt=ae.body||ae.documentElement;return M&&Ce&&vt.insertBefore(n.createTextNode(Ce),vt.childNodes[0]||null),rt===_e?_.call(ae,ln?"html":"body")[0]:ln?ae.documentElement:vt},De=function(M){return R.call(M.ownerDocument||M,M,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},ye=function(M){return M instanceof d&&(typeof M.nodeName!="string"||typeof M.textContent!="string"||typeof M.removeChild!="function"||!(M.attributes instanceof u)||typeof M.removeAttribute!="function"||typeof M.setAttribute!="function"||typeof M.namespaceURI!="string"||typeof M.insertBefore!="function"||typeof M.hasChildNodes!="function")},Se=function(M){return typeof a=="function"&&M instanceof a},fe=function(M,ae,Ce){B[M]&&jh(B[M],Xe=>{Xe.call(e,ae,Ce,Do)})},Re=function(M){let ae=null;if(fe("beforeSanitizeElements",M,null),ye(M))return q(M),!0;const Ce=Qt(M.nodeName);if(fe("uponSanitizeElement",M,{tagName:Ce,allowedTags:j}),M.hasChildNodes()&&!Se(M.firstElementChild)&&Jn(/<[/\w]/g,M.innerHTML)&&Jn(/<[/\w]/g,M.textContent)||M.nodeType===Au.progressingInstruction||kn&&M.nodeType===Au.comment&&Jn(/<[/\w]/g,M.data))return q(M),!0;if(!j[Ce]||Pe[Ce]){if(!Pe[Ce]&&$e(Ce)&&(de.tagNameCheck instanceof RegExp&&Jn(de.tagNameCheck,Ce)||de.tagNameCheck instanceof Function&&de.tagNameCheck(Ce)))return!1;if(zt&&!pr[Ce]){const Xe=b(M)||M.parentNode,vt=v(M)||M.childNodes;if(vt&&Xe){const Ht=vt.length;for(let en=Ht-1;en>=0;--en){const yn=g(vt[en],!0);yn.__removalCount=(M.__removalCount||0)+1,Xe.insertBefore(yn,m(M))}}}return q(M),!0}return M instanceof l&&!z(M)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&Jn(/<\/no(script|embed|frames)/i,M.innerHTML)?(q(M),!0):(Ct&&M.nodeType===Au.text&&(ae=M.textContent,jh([V,H,Z],Xe=>{ae=bu(ae,Xe," ")}),M.textContent!==ae&&(Iu(e.removed,{element:M.cloneNode()}),M.textContent=ae)),fe("afterSanitizeElements",M,null),!1)},We=function(M,ae,Ce){if(qe&&(ae==="id"||ae==="name")&&(Ce in n||Ce in Gg))return!1;if(!(an&&!Ye[ae]&&Jn(J,ae))){if(!(ve&&Jn(ee,ae))){if(!ke[ae]||Ye[ae]){if(!($e(M)&&(de.tagNameCheck instanceof RegExp&&Jn(de.tagNameCheck,M)||de.tagNameCheck instanceof Function&&de.tagNameCheck(M))&&(de.attributeNameCheck instanceof RegExp&&Jn(de.attributeNameCheck,ae)||de.attributeNameCheck instanceof Function&&de.attributeNameCheck(ae))||ae==="is"&&de.allowCustomizedBuiltInElements&&(de.tagNameCheck instanceof RegExp&&Jn(de.tagNameCheck,Ce)||de.tagNameCheck instanceof Function&&de.tagNameCheck(Ce))))return!1}else if(!P[ae]){if(!Jn(ie,bu(Ce,$,""))){if(!((ae==="src"||ae==="xlink:href"||ae==="href")&&M!=="script"&&sF(Ce,"data:")===0&&y[M])){if(!(An&&!Jn(re,bu(Ce,$,"")))){if(Ce)return!1}}}}}}return!0},$e=function(M){return M!=="annotation-xml"&&ES(M,K)},qt=function(M){fe("beforeSanitizeAttributes",M,null);const{attributes:ae}=M;if(!ae)return;const Ce={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ke};let Xe=ae.length;for(;Xe--;){const vt=ae[Xe],{name:Ht,namespaceURI:en,value:yn}=vt,Xi=Qt(Ht);let tn=Ht==="value"?yn:aF(yn);if(Ce.attrName=Xi,Ce.attrValue=tn,Ce.keepAttr=!0,Ce.forceKeepAttr=void 0,fe("uponSanitizeAttribute",M,Ce),tn=Ce.attrValue,Ce.forceKeepAttr||(me(Ht,M),!Ce.keepAttr))continue;if(!st&&Jn(/\/>/i,tn)){me(Ht,M);continue}Ct&&jh([V,H,Z],kt=>{tn=bu(tn,kt," ")});const Je=Qt(M.nodeName);if(We(Je,Xi,tn)){if(Gt&&(Xi==="id"||Xi==="name")&&(me(Ht,M),tn=Lt+tn),kn&&Jn(/((--!?|])>)|<\/(style|title)/i,tn)){me(Ht,M);continue}if(k&&typeof f=="object"&&typeof f.getAttributeType=="function"&&!en)switch(f.getAttributeType(Je,Xi)){case"TrustedHTML":{tn=k.createHTML(tn);break}case"TrustedScriptURL":{tn=k.createScriptURL(tn);break}}try{en?M.setAttributeNS(en,Ht,tn):M.setAttribute(Ht,tn),ye(M)?q(M):kS(e.removed)}catch{}}}fe("afterSanitizeAttributes",M,null)},ht=function ce(M){let ae=null;const Ce=De(M);for(fe("beforeSanitizeShadowDOM",M,null);ae=Ce.nextNode();)fe("uponSanitizeShadowNode",ae,null),!Re(ae)&&(ae.content instanceof o&&ce(ae.content),qt(ae));fe("afterSanitizeShadowDOM",M,null)};return e.sanitize=function(ce){let M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=null,Ce=null,Xe=null,vt=null;if(ot=!ce,ot&&(ce="<!-->"),typeof ce!="string"&&!Se(ce))if(typeof ce.toString=="function"){if(ce=ce.toString(),typeof ce!="string")throw wu("dirty is not a string, aborting")}else throw wu("toString is not a function");if(!e.isSupported)return ce;if(ue||Ls(M),e.removed=[],typeof ce=="string"&&(En=!1),En){if(ce.nodeName){const yn=Qt(ce.nodeName);if(!j[yn]||Pe[yn])throw wu("root node is forbidden and cannot be sanitized in-place")}}else if(ce instanceof a)ae=xe("<!---->"),Ce=ae.ownerDocument.importNode(ce,!0),Ce.nodeType===Au.element&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?ae=Ce:ae.appendChild(Ce);else{if(!Ge&&!Ct&&!ln&&ce.indexOf("<")===-1)return k&&Me?k.createHTML(ce):ce;if(ae=xe(ce),!ae)return Ge?null:Me?S:""}ae&&we&&q(ae.firstChild);const Ht=De(En?ce:ae);for(;Xe=Ht.nextNode();)Re(Xe)||(Xe.content instanceof o&&ht(Xe.content),qt(Xe));if(En)return ce;if(Ge){if(Ve)for(vt=T.call(ae.ownerDocument);ae.firstChild;)vt.appendChild(ae.firstChild);else vt=ae;return(ke.shadowroot||ke.shadowrootmode)&&(vt=O.call(r,vt,!0)),vt}let en=ln?ae.outerHTML:ae.innerHTML;return ln&&j["!doctype"]&&ae.ownerDocument&&ae.ownerDocument.doctype&&ae.ownerDocument.doctype.name&&Jn(ox,ae.ownerDocument.doctype.name)&&(en="<!DOCTYPE "+ae.ownerDocument.doctype.name+`>
`+en),Ct&&jh([V,H,Z],yn=>{en=bu(en,yn," ")}),k&&Me?k.createHTML(en):en},e.setConfig=function(){let ce=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ls(ce),ue=!0},e.clearConfig=function(){Do=null,ue=!1},e.isValidAttribute=function(ce,M,ae){Do||Ls({});const Ce=Qt(ce),Xe=Qt(M);return We(Ce,Xe,ae)},e.addHook=function(ce,M){typeof M=="function"&&(B[ce]=B[ce]||[],Iu(B[ce],M))},e.removeHook=function(ce){if(B[ce])return kS(B[ce])},e.removeHooks=function(ce){B[ce]&&(B[ce]=[])},e.removeAllHooks=function(){B={}},e}var wF=sx();const Za=class Za extends ut.Component{constructor(n){super(n);L(this,"outputRef",ut.createRef());L(this,"messageKey",0);L(this,"saveOutput",()=>{const n=this.state.output.map(r=>Sa.renderToStaticMarkup(r));localStorage.setItem(Za.LOCAL_STORAGE_KEY,JSON.stringify(n))});L(this,"loadOutput",()=>{const n=localStorage.getItem(Za.LOCAL_STORAGE_KEY);return n?JSON.parse(n).map(i=>ut.createElement("div",{dangerouslySetInnerHTML:{__html:i}})):[]});L(this,"addCommand",n=>{this.addToOutput([X.jsx("span",{className:"command","aria-live":"off",children:n})],!1)});L(this,"addError",n=>this.addToOutput([X.jsxs("h2",{children:[" Error: ",n.message]})]));L(this,"handleConnected",()=>this.addToOutput([X.jsx("h2",{children:" Connected"})]));L(this,"handleDisconnected",()=>{this.addToOutput([X.jsx("h2",{children:" Disconnected"})]),this.setState({sidebarVisible:!1})});L(this,"handleUserList",n=>this.setState({sidebarVisible:!!n}));L(this,"handleScroll",()=>{this.isScrolledToBottom()&&this.setState({newLinesCount:0})});L(this,"isScrolledToBottom",()=>{const n=this.outputRef.current;return n?n.scrollHeight-n.scrollTop<=n.clientHeight+1:!1});L(this,"handleScrollToBottom",()=>{this.scrollToBottom(),this.setState({newLinesCount:0})});L(this,"scrollToBottom",()=>{const n=this.outputRef.current;n&&(n.scrollTop=n.scrollHeight)});L(this,"handleMessage",n=>{if(!n)return;const r=j2(n,this.handleExitClick);this.addToOutput(r)});L(this,"handleHtml",n=>{const r=wF.sanitize(n),i=X.jsx("div",{style:{whiteSpace:"normal"},dangerouslySetInnerHTML:{__html:r}});this.addToOutput([i])});L(this,"handleExitClick",n=>{this.props.client.sendCommand(n)});this.state={output:this.loadOutput(),sidebarVisible:!1,newLinesCount:0}}getSnapshotBeforeUpdate(n,r){if(this.outputRef.current){const i=this.outputRef.current;return i.scrollHeight-i.scrollTop<=i.clientHeight}return null}componentDidUpdate(n,r,i){i&&this.scrollToBottom(),this.state.output.length>r.output.length&&(this.isScrolledToBottom()?this.setState({newLinesCount:0}):this.setState({newLinesCount:this.state.newLinesCount+(this.state.output.length-r.output.length)})),this.saveOutput()}componentDidMount(){const{client:n}=this.props;n.on("message",this.handleMessage),n.on("html",this.handleHtml),n.on("connect",this.handleConnected),n.on("disconnect",this.handleDisconnected),n.on("error",this.addError),n.on("command",this.addCommand),n.on("userlist",this.handleUserList)}componentWillUnmount(){const{client:n}=this.props;n.removeListener("message",this.handleMessage),n.removeListener("html",this.handleHtml),n.removeListener("connect",this.handleConnected),n.removeListener("disconnect",this.handleDisconnected),n.removeListener("error",this.addError),n.removeListener("command",this.addCommand),n.removeListener("userlist",this.handleUserList)}sanitizeHtml(n){return new DOMParser().parseFromString(n,"text/html").body.textContent||""}addToOutput(n,r=!0){r&&n.forEach(i=>{if(ut.isValidElement(i)){const o=Sa.renderToString(i),s=this.sanitizeHtml(o);Pw(s)}else typeof i=="string"&&Pw(i)}),this.setState(i=>{const o=n.map((l,c)=>X.jsx("div",{children:l},this.messageKey+c));return this.messageKey+=n.length,{output:[...i.output,...o].slice(-Za.MAX_OUTPUT_LENGTH)}})}saveLog(){const n=this.outputRef.current;if(n){const r=n.innerHTML,i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=new Date,l=a.toLocaleDateString(),c=a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=`${document.title.replace(/\s+/g,"-")}-log-${l}-${c}.html`;s.download=d,s.href=o,s.click(),URL.revokeObjectURL(o),s.remove()}}clearLog(){this.setState({output:[]})}render(){var n="output";this.state.sidebarVisible&&(n+=" sidebar-visible");const r=`${this.state.newLinesCount} new ${this.state.newLinesCount===1?"message":"messages"}`;return X.jsxs("div",{ref:this.outputRef,className:n,onScroll:this.handleScroll,children:[this.state.output,this.state.newLinesCount>0&&X.jsx("div",{className:"new-lines-notification",onClick:this.handleScrollToBottom,role:"button","aria-live":"off",children:r})]})}};L(Za,"MAX_OUTPUT_LENGTH",5e3),L(Za,"LOCAL_STORAGE_KEY","outputLog");let g0=Za;var ax={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function o(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function s(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,f,p){var g=n?n+c:c;if(!this._events[g])return!1;var C=this._events[g],m=arguments.length,v,b;if(C.fn){switch(C.once&&this.removeListener(c,C.fn,void 0,!0),m){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,u),!0;case 3:return C.fn.call(C.context,u,d),!0;case 4:return C.fn.call(C.context,u,d,h),!0;case 5:return C.fn.call(C.context,u,d,h,f),!0;case 6:return C.fn.call(C.context,u,d,h,f,p),!0}for(b=1,v=new Array(m-1);b<m;b++)v[b-1]=arguments[b];C.fn.apply(C.context,v)}else{var k=C.length,S;for(b=0;b<k;b++)switch(C[b].once&&this.removeListener(c,C[b].fn,void 0,!0),m){case 1:C[b].fn.call(C[b].context);break;case 2:C[b].fn.call(C[b].context,u);break;case 3:C[b].fn.call(C[b].context,u,d);break;case 4:C[b].fn.call(C[b].context,u,d,h);break;default:if(!v)for(S=1,v=new Array(m-1);S<m;S++)v[S-1]=arguments[S];C[b].fn.apply(C[b].context,v)}}return!0},a.prototype.on=function(c,u,d){return o(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return o(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var f=n?n+c:c;if(!this._events[f])return this;if(!u)return s(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&s(this,f);else{for(var g=0,C=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&C.push(p[g]);C.length?this._events[f]=C.length===1?C[0]:C:s(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(ax);var SF=ax.exports;const lx=Qd(SF);var Tn={},Ig={};Ig.byteLength=EF;Ig.toByteArray=xF;Ig.fromByteArray=NF;var io=[],qr=[],AF=typeof Uint8Array<"u"?Uint8Array:Array,Om="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dl=0,kF=Om.length;Dl<kF;++Dl)io[Dl]=Om[Dl],qr[Om.charCodeAt(Dl)]=Dl;qr[45]=62;qr[95]=63;function cx(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function EF(t){var e=cx(t),n=e[0],r=e[1];return(n+r)*3/4-r}function TF(t,e,n){return(e+n)*3/4-n}function xF(t){var e,n=cx(t),r=n[0],i=n[1],o=new AF(TF(t,r,i)),s=0,a=i>0?r-4:r,l;for(l=0;l<a;l+=4)e=qr[t.charCodeAt(l)]<<18|qr[t.charCodeAt(l+1)]<<12|qr[t.charCodeAt(l+2)]<<6|qr[t.charCodeAt(l+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=qr[t.charCodeAt(l)]<<2|qr[t.charCodeAt(l+1)]>>4,o[s++]=e&255),i===1&&(e=qr[t.charCodeAt(l)]<<10|qr[t.charCodeAt(l+1)]<<4|qr[t.charCodeAt(l+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function RF(t){return io[t>>18&63]+io[t>>12&63]+io[t>>6&63]+io[t&63]}function PF(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(RF(r));return i.join("")}function NF(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(PF(t,s,s+o>a?a:s+o));return r===1?(e=t[n-1],i.push(io[e>>2]+io[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(io[e>>10]+io[e>>4&63]+io[e<<2&63]+"=")),i.join("")}var jC={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */jC.read=function(t,e,n,r,i){var o,s,a=i*8-r-1,l=(1<<a)-1,c=l>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=o*256+t[e+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=s*256+t[e+d],d+=h,u-=8);if(o===0)o=1-c;else{if(o===l)return s?NaN:(f?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-c}return(f?-1:1)*s*Math.pow(2,o-r)};jC.write=function(t,e,n,r,i,o){var s,a,l,c=o*8-i-1,u=(1<<c)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),s+d>=1?e+=h/l:e+=h*Math.pow(2,1-d),e*l>=2&&(s++,l/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(e*l-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=a&255,f+=p,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[n+f]=s&255,f+=p,s/=256,c-=8);t[n+f-p]|=g*128};(function(t){const e=Ig,n=jC,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const E=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(E,y),E.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(E){if(E>i)throw new RangeError('The value "'+E+'" is invalid for option "size"');const y=new Uint8Array(E);return Object.setPrototypeOf(y,a.prototype),y}function a(E,y,I){if(typeof E=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(E)}return l(E,y,I)}a.poolSize=8192;function l(E,y,I){if(typeof E=="string")return h(E,y);if(ArrayBuffer.isView(E))return p(E);if(E==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);if(Lt(E,ArrayBuffer)||E&&Lt(E.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Lt(E,SharedArrayBuffer)||E&&Lt(E.buffer,SharedArrayBuffer)))return g(E,y,I);if(typeof E=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const P=E.valueOf&&E.valueOf();if(P!=null&&P!==E)return a.from(P,y,I);const F=C(E);if(F)return F;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof E[Symbol.toPrimitive]=="function")return a.from(E[Symbol.toPrimitive]("string"),y,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}a.from=function(E,y,I){return l(E,y,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function c(E){if(typeof E!="number")throw new TypeError('"size" argument must be of type number');if(E<0)throw new RangeError('The value "'+E+'" is invalid for option "size"')}function u(E,y,I){return c(E),E<=0?s(E):y!==void 0?typeof I=="string"?s(E).fill(y,I):s(E).fill(y):s(E)}a.alloc=function(E,y,I){return u(E,y,I)};function d(E){return c(E),s(E<0?0:m(E)|0)}a.allocUnsafe=function(E){return d(E)},a.allocUnsafeSlow=function(E){return d(E)};function h(E,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const I=b(E,y)|0;let P=s(I);const F=P.write(E,y);return F!==I&&(P=P.slice(0,F)),P}function f(E){const y=E.length<0?0:m(E.length)|0,I=s(y);for(let P=0;P<y;P+=1)I[P]=E[P]&255;return I}function p(E){if(Lt(E,Uint8Array)){const y=new Uint8Array(E);return g(y.buffer,y.byteOffset,y.byteLength)}return f(E)}function g(E,y,I){if(y<0||E.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(E.byteLength<y+(I||0))throw new RangeError('"length" is outside of buffer bounds');let P;return y===void 0&&I===void 0?P=new Uint8Array(E):I===void 0?P=new Uint8Array(E,y):P=new Uint8Array(E,y,I),Object.setPrototypeOf(P,a.prototype),P}function C(E){if(a.isBuffer(E)){const y=m(E.length)|0,I=s(y);return I.length===0||E.copy(I,0,0,y),I}if(E.length!==void 0)return typeof E.length!="number"||zt(E.length)?s(0):f(E);if(E.type==="Buffer"&&Array.isArray(E.data))return f(E.data)}function m(E){if(E>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return E|0}function v(E){return+E!=E&&(E=0),a.alloc(+E)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,I){if(Lt(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),Lt(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(y)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===I)return 0;let P=y.length,F=I.length;for(let W=0,Q=Math.min(P,F);W<Q;++W)if(y[W]!==I[W]){P=y[W],F=I[W];break}return P<F?-1:F<P?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,I){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let P;if(I===void 0)for(I=0,P=0;P<y.length;++P)I+=y[P].length;const F=a.allocUnsafe(I);let W=0;for(P=0;P<y.length;++P){let Q=y[P];if(Lt(Q,Uint8Array))W+Q.length>F.length?(a.isBuffer(Q)||(Q=a.from(Q)),Q.copy(F,W)):Uint8Array.prototype.set.call(F,Q,W);else if(a.isBuffer(Q))Q.copy(F,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=Q.length}return F};function b(E,y){if(a.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||Lt(E,ArrayBuffer))return E.byteLength;if(typeof E!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);const I=E.length,P=arguments.length>2&&arguments[2]===!0;if(!P&&I===0)return 0;let F=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return Ge(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return qe(E).length;default:if(F)return P?-1:Ge(E).length;y=(""+y).toLowerCase(),F=!0}}a.byteLength=b;function k(E,y,I){let P=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,y>>>=0,I<=y))return"";for(E||(E="utf8");;)switch(E){case"hex":return K(this,y,I);case"utf8":case"utf-8":return Z(this,y,I);case"ascii":return re(this,y,I);case"latin1":case"binary":return $(this,y,I);case"base64":return H(this,y,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ie(this,y,I);default:if(P)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),P=!0}}a.prototype._isBuffer=!0;function S(E,y,I){const P=E[y];E[y]=E[I],E[I]=P}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<y;I+=2)S(this,I,I+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<y;I+=4)S(this,I,I+3),S(this,I+1,I+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<y;I+=8)S(this,I,I+7),S(this,I+1,I+6),S(this,I+2,I+5),S(this,I+3,I+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?Z(this,0,y):k.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const I=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,I,P,F,W){if(Lt(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(I===void 0&&(I=0),P===void 0&&(P=y?y.length:0),F===void 0&&(F=0),W===void 0&&(W=this.length),I<0||P>y.length||F<0||W>this.length)throw new RangeError("out of range index");if(F>=W&&I>=P)return 0;if(F>=W)return-1;if(I>=P)return 1;if(I>>>=0,P>>>=0,F>>>=0,W>>>=0,this===y)return 0;let Q=W-F,_e=P-I;const rt=Math.min(Q,_e),ot=this.slice(F,W),at=y.slice(I,P);for(let Qe=0;Qe<rt;++Qe)if(ot[Qe]!==at[Qe]){Q=ot[Qe],_e=at[Qe];break}return Q<_e?-1:_e<Q?1:0};function A(E,y,I,P,F){if(E.length===0)return-1;if(typeof I=="string"?(P=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,zt(I)&&(I=F?0:E.length-1),I<0&&(I=E.length+I),I>=E.length){if(F)return-1;I=E.length-1}else if(I<0)if(F)I=0;else return-1;if(typeof y=="string"&&(y=a.from(y,P)),a.isBuffer(y))return y.length===0?-1:R(E,y,I,P,F);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?F?Uint8Array.prototype.indexOf.call(E,y,I):Uint8Array.prototype.lastIndexOf.call(E,y,I):R(E,[y],I,P,F);throw new TypeError("val must be string, number or Buffer")}function R(E,y,I,P,F){let W=1,Q=E.length,_e=y.length;if(P!==void 0&&(P=String(P).toLowerCase(),P==="ucs2"||P==="ucs-2"||P==="utf16le"||P==="utf-16le")){if(E.length<2||y.length<2)return-1;W=2,Q/=2,_e/=2,I/=2}function rt(at,Qe){return W===1?at[Qe]:at.readUInt16BE(Qe*W)}let ot;if(F){let at=-1;for(ot=I;ot<Q;ot++)if(rt(E,ot)===rt(y,at===-1?0:ot-at)){if(at===-1&&(at=ot),ot-at+1===_e)return at*W}else at!==-1&&(ot-=ot-at),at=-1}else for(I+_e>Q&&(I=Q-_e),ot=I;ot>=0;ot--){let at=!0;for(let Qe=0;Qe<_e;Qe++)if(rt(E,ot+Qe)!==rt(y,Qe)){at=!1;break}if(at)return ot}return-1}a.prototype.includes=function(y,I,P){return this.indexOf(y,I,P)!==-1},a.prototype.indexOf=function(y,I,P){return A(this,y,I,P,!0)},a.prototype.lastIndexOf=function(y,I,P){return A(this,y,I,P,!1)};function T(E,y,I,P){I=Number(I)||0;const F=E.length-I;P?(P=Number(P),P>F&&(P=F)):P=F;const W=y.length;P>W/2&&(P=W/2);let Q;for(Q=0;Q<P;++Q){const _e=parseInt(y.substr(Q*2,2),16);if(zt(_e))return Q;E[I+Q]=_e}return Q}function _(E,y,I,P){return Gt(Ge(y,E.length-I),E,I,P)}function O(E,y,I,P){return Gt(Ve(y),E,I,P)}function B(E,y,I,P){return Gt(qe(y),E,I,P)}function V(E,y,I,P){return Gt(Me(y,E.length-I),E,I,P)}a.prototype.write=function(y,I,P,F){if(I===void 0)F="utf8",P=this.length,I=0;else if(P===void 0&&typeof I=="string")F=I,P=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(P)?(P=P>>>0,F===void 0&&(F="utf8")):(F=P,P=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-I;if((P===void 0||P>W)&&(P=W),y.length>0&&(P<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");F||(F="utf8");let Q=!1;for(;;)switch(F){case"hex":return T(this,y,I,P);case"utf8":case"utf-8":return _(this,y,I,P);case"ascii":case"latin1":case"binary":return O(this,y,I,P);case"base64":return B(this,y,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,y,I,P);default:if(Q)throw new TypeError("Unknown encoding: "+F);F=(""+F).toLowerCase(),Q=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function H(E,y,I){return y===0&&I===E.length?e.fromByteArray(E):e.fromByteArray(E.slice(y,I))}function Z(E,y,I){I=Math.min(E.length,I);const P=[];let F=y;for(;F<I;){const W=E[F];let Q=null,_e=W>239?4:W>223?3:W>191?2:1;if(F+_e<=I){let rt,ot,at,Qe;switch(_e){case 1:W<128&&(Q=W);break;case 2:rt=E[F+1],(rt&192)===128&&(Qe=(W&31)<<6|rt&63,Qe>127&&(Q=Qe));break;case 3:rt=E[F+1],ot=E[F+2],(rt&192)===128&&(ot&192)===128&&(Qe=(W&15)<<12|(rt&63)<<6|ot&63,Qe>2047&&(Qe<55296||Qe>57343)&&(Q=Qe));break;case 4:rt=E[F+1],ot=E[F+2],at=E[F+3],(rt&192)===128&&(ot&192)===128&&(at&192)===128&&(Qe=(W&15)<<18|(rt&63)<<12|(ot&63)<<6|at&63,Qe>65535&&Qe<1114112&&(Q=Qe))}}Q===null?(Q=65533,_e=1):Q>65535&&(Q-=65536,P.push(Q>>>10&1023|55296),Q=56320|Q&1023),P.push(Q),F+=_e}return ee(P)}const J=4096;function ee(E){const y=E.length;if(y<=J)return String.fromCharCode.apply(String,E);let I="",P=0;for(;P<y;)I+=String.fromCharCode.apply(String,E.slice(P,P+=J));return I}function re(E,y,I){let P="";I=Math.min(E.length,I);for(let F=y;F<I;++F)P+=String.fromCharCode(E[F]&127);return P}function $(E,y,I){let P="";I=Math.min(E.length,I);for(let F=y;F<I;++F)P+=String.fromCharCode(E[F]);return P}function K(E,y,I){const P=E.length;(!y||y<0)&&(y=0),(!I||I<0||I>P)&&(I=P);let F="";for(let W=y;W<I;++W)F+=En[E[W]];return F}function ie(E,y,I){const P=E.slice(y,I);let F="";for(let W=0;W<P.length-1;W+=2)F+=String.fromCharCode(P[W]+P[W+1]*256);return F}a.prototype.slice=function(y,I){const P=this.length;y=~~y,I=I===void 0?P:~~I,y<0?(y+=P,y<0&&(y=0)):y>P&&(y=P),I<0?(I+=P,I<0&&(I=0)):I>P&&(I=P),I<y&&(I=y);const F=this.subarray(y,I);return Object.setPrototypeOf(F,a.prototype),F};function j(E,y,I){if(E%1!==0||E<0)throw new RangeError("offset is not uint");if(E+y>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,I,P){y=y>>>0,I=I>>>0,P||j(y,I,this.length);let F=this[y],W=1,Q=0;for(;++Q<I&&(W*=256);)F+=this[y+Q]*W;return F},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,I,P){y=y>>>0,I=I>>>0,P||j(y,I,this.length);let F=this[y+--I],W=1;for(;I>0&&(W*=256);)F+=this[y+--I]*W;return F},a.prototype.readUint8=a.prototype.readUInt8=function(y,I){return y=y>>>0,I||j(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,I){return y=y>>>0,I||j(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,I){return y=y>>>0,I||j(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,I){return y=y>>>0,I||j(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,I){return y=y>>>0,I||j(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=Yt(function(y){y=y>>>0,kn(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&ln(y,this.length-8);const F=I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,W=this[++y]+this[++y]*2**8+this[++y]*2**16+P*2**24;return BigInt(F)+(BigInt(W)<<BigInt(32))}),a.prototype.readBigUInt64BE=Yt(function(y){y=y>>>0,kn(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&ln(y,this.length-8);const F=I*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],W=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+P;return(BigInt(F)<<BigInt(32))+BigInt(W)}),a.prototype.readIntLE=function(y,I,P){y=y>>>0,I=I>>>0,P||j(y,I,this.length);let F=this[y],W=1,Q=0;for(;++Q<I&&(W*=256);)F+=this[y+Q]*W;return W*=128,F>=W&&(F-=Math.pow(2,8*I)),F},a.prototype.readIntBE=function(y,I,P){y=y>>>0,I=I>>>0,P||j(y,I,this.length);let F=I,W=1,Q=this[y+--F];for(;F>0&&(W*=256);)Q+=this[y+--F]*W;return W*=128,Q>=W&&(Q-=Math.pow(2,8*I)),Q},a.prototype.readInt8=function(y,I){return y=y>>>0,I||j(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,I){y=y>>>0,I||j(y,2,this.length);const P=this[y]|this[y+1]<<8;return P&32768?P|4294901760:P},a.prototype.readInt16BE=function(y,I){y=y>>>0,I||j(y,2,this.length);const P=this[y+1]|this[y]<<8;return P&32768?P|4294901760:P},a.prototype.readInt32LE=function(y,I){return y=y>>>0,I||j(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,I){return y=y>>>0,I||j(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=Yt(function(y){y=y>>>0,kn(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&ln(y,this.length-8);const F=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(P<<24);return(BigInt(F)<<BigInt(32))+BigInt(I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=Yt(function(y){y=y>>>0,kn(y,"offset");const I=this[y],P=this[y+7];(I===void 0||P===void 0)&&ln(y,this.length-8);const F=(I<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(F)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+P)}),a.prototype.readFloatLE=function(y,I){return y=y>>>0,I||j(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,I){return y=y>>>0,I||j(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,I){return y=y>>>0,I||j(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,I){return y=y>>>0,I||j(y,8,this.length),n.read(this,y,!1,52,8)};function oe(E,y,I,P,F,W){if(!a.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>F||y<W)throw new RangeError('"value" argument is out of bounds');if(I+P>E.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,I,P,F){if(y=+y,I=I>>>0,P=P>>>0,!F){const _e=Math.pow(2,8*P)-1;oe(this,y,I,P,_e,0)}let W=1,Q=0;for(this[I]=y&255;++Q<P&&(W*=256);)this[I+Q]=y/W&255;return I+P},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,I,P,F){if(y=+y,I=I>>>0,P=P>>>0,!F){const _e=Math.pow(2,8*P)-1;oe(this,y,I,P,_e,0)}let W=P-1,Q=1;for(this[I+W]=y&255;--W>=0&&(Q*=256);)this[I+W]=y/Q&255;return I+P},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,1,255,0),this[I]=y&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,2,65535,0),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,2,65535,0),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,4,4294967295,0),this[I+3]=y>>>24,this[I+2]=y>>>16,this[I+1]=y>>>8,this[I]=y&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,4,4294967295,0),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4};function ke(E,y,I,P,F){Ct(y,P,F,E,I,7);let W=Number(y&BigInt(4294967295));E[I++]=W,W=W>>8,E[I++]=W,W=W>>8,E[I++]=W,W=W>>8,E[I++]=W;let Q=Number(y>>BigInt(32)&BigInt(4294967295));return E[I++]=Q,Q=Q>>8,E[I++]=Q,Q=Q>>8,E[I++]=Q,Q=Q>>8,E[I++]=Q,I}function Le(E,y,I,P,F){Ct(y,P,F,E,I,7);let W=Number(y&BigInt(4294967295));E[I+7]=W,W=W>>8,E[I+6]=W,W=W>>8,E[I+5]=W,W=W>>8,E[I+4]=W;let Q=Number(y>>BigInt(32)&BigInt(4294967295));return E[I+3]=Q,Q=Q>>8,E[I+2]=Q,Q=Q>>8,E[I+1]=Q,Q=Q>>8,E[I]=Q,I+8}a.prototype.writeBigUInt64LE=Yt(function(y,I=0){return ke(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Yt(function(y,I=0){return Le(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,I,P,F){if(y=+y,I=I>>>0,!F){const rt=Math.pow(2,8*P-1);oe(this,y,I,P,rt-1,-rt)}let W=0,Q=1,_e=0;for(this[I]=y&255;++W<P&&(Q*=256);)y<0&&_e===0&&this[I+W-1]!==0&&(_e=1),this[I+W]=(y/Q>>0)-_e&255;return I+P},a.prototype.writeIntBE=function(y,I,P,F){if(y=+y,I=I>>>0,!F){const rt=Math.pow(2,8*P-1);oe(this,y,I,P,rt-1,-rt)}let W=P-1,Q=1,_e=0;for(this[I+W]=y&255;--W>=0&&(Q*=256);)y<0&&_e===0&&this[I+W+1]!==0&&(_e=1),this[I+W]=(y/Q>>0)-_e&255;return I+P},a.prototype.writeInt8=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,1,127,-128),y<0&&(y=255+y+1),this[I]=y&255,I+1},a.prototype.writeInt16LE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,2,32767,-32768),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeInt16BE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,2,32767,-32768),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeInt32LE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,4,2147483647,-2147483648),this[I]=y&255,this[I+1]=y>>>8,this[I+2]=y>>>16,this[I+3]=y>>>24,I+4},a.prototype.writeInt32BE=function(y,I,P){return y=+y,I=I>>>0,P||oe(this,y,I,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4},a.prototype.writeBigInt64LE=Yt(function(y,I=0){return ke(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Yt(function(y,I=0){return Le(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function de(E,y,I,P,F,W){if(I+P>E.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Pe(E,y,I,P,F){return y=+y,I=I>>>0,F||de(E,y,I,4),n.write(E,y,I,P,23,4),I+4}a.prototype.writeFloatLE=function(y,I,P){return Pe(this,y,I,!0,P)},a.prototype.writeFloatBE=function(y,I,P){return Pe(this,y,I,!1,P)};function Ye(E,y,I,P,F){return y=+y,I=I>>>0,F||de(E,y,I,8),n.write(E,y,I,P,52,8),I+8}a.prototype.writeDoubleLE=function(y,I,P){return Ye(this,y,I,!0,P)},a.prototype.writeDoubleBE=function(y,I,P){return Ye(this,y,I,!1,P)},a.prototype.copy=function(y,I,P,F){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(P||(P=0),!F&&F!==0&&(F=this.length),I>=y.length&&(I=y.length),I||(I=0),F>0&&F<P&&(F=P),F===P||y.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw new RangeError("Index out of range");if(F<0)throw new RangeError("sourceEnd out of bounds");F>this.length&&(F=this.length),y.length-I<F-P&&(F=y.length-I+P);const W=F-P;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,P,F):Uint8Array.prototype.set.call(y,this.subarray(P,F),I),W},a.prototype.fill=function(y,I,P,F){if(typeof y=="string"){if(typeof I=="string"?(F=I,I=0,P=this.length):typeof P=="string"&&(F=P,P=this.length),F!==void 0&&typeof F!="string")throw new TypeError("encoding must be a string");if(typeof F=="string"&&!a.isEncoding(F))throw new TypeError("Unknown encoding: "+F);if(y.length===1){const Q=y.charCodeAt(0);(F==="utf8"&&Q<128||F==="latin1")&&(y=Q)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(I<0||this.length<I||this.length<P)throw new RangeError("Out of range index");if(P<=I)return this;I=I>>>0,P=P===void 0?this.length:P>>>0,y||(y=0);let W;if(typeof y=="number")for(W=I;W<P;++W)this[W]=y;else{const Q=a.isBuffer(y)?y:a.from(y,F),_e=Q.length;if(_e===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(W=0;W<P-I;++W)this[W+I]=Q[W%_e]}return this};const ve={};function an(E,y,I){ve[E]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${E}]`,this.stack,delete this.name}get code(){return E}set code(F){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:F,writable:!0})}toString(){return`${this.name} [${E}]: ${this.message}`}}}an("ERR_BUFFER_OUT_OF_BOUNDS",function(E){return E?`${E} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),an("ERR_INVALID_ARG_TYPE",function(E,y){return`The "${E}" argument must be of type number. Received type ${typeof y}`},TypeError),an("ERR_OUT_OF_RANGE",function(E,y,I){let P=`The value of "${E}" is out of range.`,F=I;return Number.isInteger(I)&&Math.abs(I)>2**32?F=An(String(I)):typeof I=="bigint"&&(F=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(F=An(F)),F+="n"),P+=` It must be ${y}. Received ${F}`,P},RangeError);function An(E){let y="",I=E.length;const P=E[0]==="-"?1:0;for(;I>=P+4;I-=3)y=`_${E.slice(I-3,I)}${y}`;return`${E.slice(0,I)}${y}`}function st(E,y,I){kn(y,"offset"),(E[y]===void 0||E[y+I]===void 0)&&ln(y,E.length-(I+1))}function Ct(E,y,I,P,F,W){if(E>I||E<y){const Q=typeof y=="bigint"?"n":"";let _e;throw y===0||y===BigInt(0)?_e=`>= 0${Q} and < 2${Q} ** ${(W+1)*8}${Q}`:_e=`>= -(2${Q} ** ${(W+1)*8-1}${Q}) and < 2 ** ${(W+1)*8-1}${Q}`,new ve.ERR_OUT_OF_RANGE("value",_e,E)}st(P,F,W)}function kn(E,y){if(typeof E!="number")throw new ve.ERR_INVALID_ARG_TYPE(y,"number",E)}function ln(E,y,I){throw Math.floor(E)!==E?(kn(E,I),new ve.ERR_OUT_OF_RANGE("offset","an integer",E)):y<0?new ve.ERR_BUFFER_OUT_OF_BOUNDS:new ve.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,E)}const ue=/[^+/0-9A-Za-z-_]/g;function we(E){if(E=E.split("=")[0],E=E.trim().replace(ue,""),E.length<2)return"";for(;E.length%4!==0;)E=E+"=";return E}function Ge(E,y){y=y||1/0;let I;const P=E.length;let F=null;const W=[];for(let Q=0;Q<P;++Q){if(I=E.charCodeAt(Q),I>55295&&I<57344){if(!F){if(I>56319){(y-=3)>-1&&W.push(239,191,189);continue}else if(Q+1===P){(y-=3)>-1&&W.push(239,191,189);continue}F=I;continue}if(I<56320){(y-=3)>-1&&W.push(239,191,189),F=I;continue}I=(F-55296<<10|I-56320)+65536}else F&&(y-=3)>-1&&W.push(239,191,189);if(F=null,I<128){if((y-=1)<0)break;W.push(I)}else if(I<2048){if((y-=2)<0)break;W.push(I>>6|192,I&63|128)}else if(I<65536){if((y-=3)<0)break;W.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((y-=4)<0)break;W.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return W}function Ve(E){const y=[];for(let I=0;I<E.length;++I)y.push(E.charCodeAt(I)&255);return y}function Me(E,y){let I,P,F;const W=[];for(let Q=0;Q<E.length&&!((y-=2)<0);++Q)I=E.charCodeAt(Q),P=I>>8,F=I%256,W.push(F),W.push(P);return W}function qe(E){return e.toByteArray(we(E))}function Gt(E,y,I,P){let F;for(F=0;F<P&&!(F+I>=y.length||F>=E.length);++F)y[F+I]=E[F];return F}function Lt(E,y){return E instanceof y||E!=null&&E.constructor!=null&&E.constructor.name!=null&&E.constructor.name===y.name}function zt(E){return E!==E}const En=function(){const E="0123456789abcdef",y=new Array(256);for(let I=0;I<16;++I){const P=I*16;for(let F=0;F<16;++F)y[P+F]=E[I]+E[F]}return y}();function Yt(E){return typeof BigInt>"u"?pr:E}function pr(){throw new Error("BigInt not supported")}})(Tn);var ju=(t=>(t[t.BINARY=0]="BINARY",t[t.ECHO=1]="ECHO",t[t.RCP=2]="RCP",t[t.SUPPRESS_GO_AHEAD=3]="SUPPRESS_GO_AHEAD",t[t.APPROX_MESSAGE_SIZE_NEGOTIATION=4]="APPROX_MESSAGE_SIZE_NEGOTIATION",t[t.STATUS=5]="STATUS",t[t.TIMING_MARK=6]="TIMING_MARK",t[t.REMOTE_CONTROLLED_TRANSMISSION_ECHO=7]="REMOTE_CONTROLLED_TRANSMISSION_ECHO",t[t.OUTPUT_LINE_WIDTH=8]="OUTPUT_LINE_WIDTH",t[t.OUTPUT_PAGE_SIZE=9]="OUTPUT_PAGE_SIZE",t[t.OUTPUT_CARRIAGE_RETURN_DISPOSITION=10]="OUTPUT_CARRIAGE_RETURN_DISPOSITION",t[t.OUTPUT_HORIZONTAL_TAB_STOPS=11]="OUTPUT_HORIZONTAL_TAB_STOPS",t[t.OUTPUT_HORIZONTAL_TAB_DISPOSITION=12]="OUTPUT_HORIZONTAL_TAB_DISPOSITION",t[t.OUTPUT_FORMFEED_DISPOSITION=13]="OUTPUT_FORMFEED_DISPOSITION",t[t.OUTPUT_VERTICAL_TAB_STOPS=14]="OUTPUT_VERTICAL_TAB_STOPS",t[t.OUTPUT_VERTICAL_TAB_DISPOSITION=15]="OUTPUT_VERTICAL_TAB_DISPOSITION",t[t.OUTPUT_LINEFEED_DISPOSITION=16]="OUTPUT_LINEFEED_DISPOSITION",t[t.EXTENDED_ASCII=17]="EXTENDED_ASCII",t[t.LOGOUT=18]="LOGOUT",t[t.BYTE_MACRO=19]="BYTE_MACRO",t[t.DATA_ENTRY_TERMINAL=20]="DATA_ENTRY_TERMINAL",t[t.SUPDUP=21]="SUPDUP",t[t.SUPDUP_OUTPUT=22]="SUPDUP_OUTPUT",t[t.SEND_LOCATION=23]="SEND_LOCATION",t[t.TERMINAL_TYPE=24]="TERMINAL_TYPE",t[t.END_OF_RECORD=25]="END_OF_RECORD",t[t.TACACS_USER_IDENTIFICATION=26]="TACACS_USER_IDENTIFICATION",t[t.OUTPUT_MARKING=27]="OUTPUT_MARKING",t[t.TERMINAL_LOCATION_NUMBER=28]="TERMINAL_LOCATION_NUMBER",t[t.TELNET_3270_REGIME=29]="TELNET_3270_REGIME",t[t.X_3_PAD=30]="X_3_PAD",t[t.NAWS=31]="NAWS",t[t.TERMINAL_SPEED=32]="TERMINAL_SPEED",t[t.REMOTE_FLOW_CONTROL=33]="REMOTE_FLOW_CONTROL",t[t.LINEMODE=34]="LINEMODE",t[t.X_DISPLAY_LOCATION=35]="X_DISPLAY_LOCATION",t[t.ENVIRONMENT_OPTION=36]="ENVIRONMENT_OPTION",t[t.AUTHENTICATION_OPTION=37]="AUTHENTICATION_OPTION",t[t.ENCRYPTION_OPTION=38]="ENCRYPTION_OPTION",t[t.NEW_ENVIRONMENT_OPTION=39]="NEW_ENVIRONMENT_OPTION",t[t.TN3270E=40]="TN3270E",t[t.XAUTH=41]="XAUTH",t[t.CHARSET=42]="CHARSET",t[t.RSP=43]="RSP",t[t.COM_PORT_OPTION=44]="COM_PORT_OPTION",t[t.SUPPRESS_LOCAL_ECHO=45]="SUPPRESS_LOCAL_ECHO",t[t.START_TLS=46]="START_TLS",t[t.KERMIT=47]="KERMIT",t[t.SEND_URL=48]="SEND_URL",t[t.FORWARD_X=49]="FORWARD_X",t[t.PRAGMA_LOGON=138]="PRAGMA_LOGON",t[t.GMCP=201]="GMCP",t))(ju||{}),Zu=(t=>(t[t.SE=240]="SE",t[t.NOP=241]="NOP",t[t.DM=242]="DM",t[t.BRK=243]="BRK",t[t.IP=244]="IP",t[t.AO=245]="AO",t[t.AYT=246]="AYT",t[t.EC=247]="EC",t[t.EL=248]="EL",t[t.GA=249]="GA",t[t.SB=250]="SB",t[t.WILL=251]="WILL",t[t.WONT=252]="WONT",t[t.DO=253]="DO",t[t.DONT=254]="DONT",t[t.IAC=255]="IAC",t))(Zu||{});class _F{constructor(e){L(this,"ws");this.ws=e}on(e,n){if(e==="data"){this.ws.onmessage=i=>{n(i.data)};return}const r="on"+e;this[r]=n}write(e){this.ws.send(e)}}class OF extends lx{constructor(n){super();L(this,"state");L(this,"buffer");L(this,"subBuffer");L(this,"iacSEBuffer",Tn.Buffer.from([255,240]));L(this,"negotiationByte",0);L(this,"stream");this.state=0,this.buffer=Tn.Buffer.alloc(0),this.subBuffer=Tn.Buffer.alloc(0),n&&n.on("data",r=>this.parse(r)),this.stream=n}parse(n){for(this.buffer=Tn.Buffer.concat([this.buffer,Tn.Buffer.from(n)]);this.buffer.length>0;){let r;switch(this.state){case 0:this.handleData();break;case 1:if(r=this.handleCommand(),r)return;break;case 2:if(r=this.handleSubnegotiation(),r)return;break;case 3:if(r=this.handleNegotiation(),r)return;break}}}handleData(){const n=this.buffer.indexOf(255);if(n===-1){this.emit("data",this.buffer),this.buffer=Tn.Buffer.alloc(0);return}this.emit("data",this.buffer.slice(0,n)),this.buffer=this.buffer.slice(n),this.state=1}handleCommand(){if(this.buffer.length<2)return!0;const n=this.buffer[1];switch(this.buffer=this.buffer.slice(2),n){case 241:this.emit("command",241),this.state=0;break;case 250:this.subBuffer=Tn.Buffer.alloc(0),this.state=2;break;case 253:case 254:case 251:case 252:this.negotiationByte=n,this.state=3;break;default:this.state=0;break}return!1}handleNegotiation(){if(this.buffer.length<1)return!0;const n=this.negotiationByte,r=this.buffer[0];return this.buffer=this.buffer.slice(1),this.emit("negotiation",n,r),this.state=0,!1}handleSubnegotiation(){let n=this.buffer.indexOf(this.iacSEBuffer);if(n===-1)return!0;this.state=0;let r=this.buffer.slice(0,n);return r[0]===201?this.handleGmcp(r.slice(1)):this.emit("subnegotiation",r),this.buffer=this.buffer.slice(n+2),!1}handleGmcp(n){const r=n.toString(),[i,o]=r.split(/ +(.+?)$/,2);this.emit("gmcp",i,o)}sendNegotiation(n,r){this.stream.write(Tn.Buffer.from([255,n,r]))}sendGmcp(n,r){const i=n+" "+r,o=Tn.Buffer.from(i),s=Tn.Buffer.concat([Tn.Buffer.from([255,250]),Tn.Buffer.from([201]),o,this.iacSEBuffer]);this.stream.write(s)}sendTerminalType(n){const r=Tn.Buffer.from(n),i=Tn.Buffer.concat([Tn.Buffer.from([255,250]),Tn.Buffer.from([24,0]),r,this.iacSEBuffer]);this.stream.write(i)}}function MF({onlyFirst:t=!1}={}){const n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?(?:\\u0007|\\u001B\\u005C|\\u009C))","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");return new RegExp(n,t?void 0:"g")}const DF=MF();function LF(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(DF,"")}class BF{constructor(e){L(this,"editors");L(this,"channel");this.client=e,this.editors=new Map,this.channel=new BroadcastChannel("editor"),this.setupChannelListeners()}openEditorWindow(e){console.log("Opening editor window for session:",e);const n=e.reference,r=this.editors.get(n);if(r&&r.state===1&&r.window&&!r.window.closed)r.window.focus();else{const i=encodeURIComponent(n),o=window.open(`/editor?reference=${i}`,"_blank"),s={...e,window:o,state:0};this.editors.set(n,s),o&&o.focus()}}saveEditorWindow(e){const n={reference:e.reference,type:e.type,"content*":""};this.client.sendMCPMultiline("dns-org-mud-moo-simpleedit-set",n,e.contents)}setupChannelListeners(){this.channel.onmessage=e=>{console.log("Editor window message:",e);const{type:n,id:r,session:i}=e.data;switch(n){case"ready":console.log("Editor window ready, id:",r);const o=this.editors.get(r);if(o){o.state=1;const{window:a,...l}=o;this.channel.postMessage({type:"load",session:l})}else console.error(`No session found for id: ${r}`);break;case"save":console.log("Saving editor window with session:",i),this.saveEditorWindow(i);break;case"close":console.log("Closing editor window, id:",r);const s=this.editors.get(r);s&&(s.state=2);break}}}shutdown(){console.log("Shutting down EditorManager"),this.editors.forEach((e,n)=>{try{e.state===1&&e.window&&(console.log(`Closing editor window for ${n}`),e.window.close(),this.channel.postMessage({type:"shutdown",id:n}))}catch(r){console.error(`Error closing editor window ${n}:`,r)}}),this.editors.clear(),console.log("Closing broadcast channel"),this.channel.close(),console.log("EditorManager shutdown complete")}}class Ro{constructor(e){L(this,"packageName");L(this,"packageVersion",1);L(this,"client");this.client=e}sendData(e,n){this.client.sendGmcp(this.packageName+"."+e,JSON.stringify(n))}shutdown(){}}class FF extends Ro{constructor(){super(...arguments);L(this,"packageName","Auth.Autologin")}handleToken(n){localStorage.setItem("LoginRefreshToken",n)}sendLogin(){var n=localStorage.getItem("LoginRefreshToken");n&&this.sendData("Login",n)}}class UF extends Ro{constructor(){super(...arguments);L(this,"packageName","Char")}handleName(n){this.client.worldData.playerId=n.name,this.client.worldData.playerName=n.fullname,this.client.emit("statustext",`Logged in as ${n.fullname}`)}sendLogin(n,r){this.client.sendGmcp("Char.Login",JSON.stringify({name:n,password:r}))}}class VF extends Ro{constructor(n){super(n);L(this,"packageName","Client.Keystrokes");L(this,"bindings",[]);L(this,"boundKeyUpHandler");document.addEventListener("keydown",r=>this.handleKeydown(r))}handleKeydown(n){const r=this.findBinding(n);if(r){n.preventDefault();const i=this.client.getInput(),o=this.parseCommand(r.command,i);r.autosend?this.client.sendCommand(o):this.placeInInputField(o)}}shutdown(){document.removeEventListener("keydown",n=>this.handleKeydown(n))}findBinding(n){try{return this.bindings.find(r=>{if(r.key.toLowerCase()!==n.key.toLowerCase())return!1;const i=new Set([n.altKey&&"Alt",n.ctrlKey&&"Control",n.shiftKey&&"Shift",n.metaKey&&"Meta"].filter(Boolean));return r.modifiers&&r.modifiers.every(o=>i.has(o))})}catch(r){console.error("Error in finding key binding: ",r);return}}parseCommand(n,r){const i=r.trim().split(/\s+/);return n.replace(/%(\d+|\*)/g,(o,s)=>{if(s==="*")return r;const a=parseInt(s,10)-1;return a>=0&&a<i.length?i[a]:o})}placeInInputField(n){this.client.setInput(n)}bindKey(n){const r={key:n.key,modifiers:n.modifiers,command:n.command,autosend:n.autosend};this.bindings.push(r)}unbindKey(n){this.bindings=this.bindings.filter(r=>!(r.key===n.key&&r.modifiers.length===n.modifiers.length&&r.modifiers.every(i=>n.modifiers.includes(i))))}unbindAll(){this.bindings=[]}handleBind(n){this.bindKey(n)}handleUnbind(n){this.unbindKey(n)}handleBind_all(n){this.bindings=n.bindings.map(r=>({...r}))}listBindings(){return[...this.bindings]}}const _S=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),OS=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),m0=(t,e)=>({startTime:e,type:"setValue",value:t}),ux=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),dx=(t,e,{startTime:n,target:r,timeConstant:i})=>r+(e-r)*Math.exp((n-t)/i),ql=t=>t.type==="exponentialRampToValue",Ap=t=>t.type==="linearRampToValue",Js=t=>ql(t)||Ap(t),ZC=t=>t.type==="setValue",Fo=t=>t.type==="setValueCurve",kp=(t,e,n,r)=>{const i=t[e];return i===void 0?r:Js(i)||ZC(i)?i.value:Fo(i)?i.values[i.values.length-1]:dx(n,kp(t,e-1,i.startTime,r),i)},MS=(t,e,n,r,i)=>n===void 0?[r.insertTime,i]:Js(n)?[n.endTime,n.value]:ZC(n)?[n.startTime,n.value]:Fo(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,kp(t,e-1,n.startTime,i)],v0=t=>t.type==="cancelAndHold",y0=t=>t.type==="cancelScheduledValues",Us=t=>v0(t)||y0(t)?t.cancelTime:ql(t)||Ap(t)?t.endTime:t.startTime,DS=(t,e,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(r-e)):0,LS=(t,e,n,{endTime:r,value:i})=>n+(t-e)/(r-e)*(i-n),GF=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},WF=(t,{duration:e,startTime:n,values:r})=>{const i=(t-n)/e*(r.length-1);return GF(r,i)},zh=t=>t.type==="setTarget";class jF{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=Us(e);if(v0(e)||y0(e)){const r=this._automationEvents.findIndex(o=>y0(e)&&Fo(o)?o.startTime+o.duration>=n:Us(o)>=n),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),v0(e)){const o=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&Js(i)){if(o!==void 0&&zh(o))throw new Error("The internal list is malformed.");const s=o===void 0?i.insertTime:Fo(o)?o.startTime+o.duration:Us(o),a=o===void 0?this._defaultValue:Fo(o)?o.values[o.values.length-1]:o.value,l=ql(i)?DS(n,s,a,i):LS(n,s,a,i),c=ql(i)?_S(l,n,this._currenTime):OS(l,n,this._currenTime);this._automationEvents.push(c)}if(o!==void 0&&zh(o)&&this._automationEvents.push(m0(this.getValue(n),n)),o!==void 0&&Fo(o)&&o.startTime+o.duration>n){const s=n-o.startTime,a=(o.values.length-1)/o.duration,l=Math.max(2,1+Math.ceil(s*a)),c=s/(l-1)*a,u=o.values.slice(0,l);if(c<1)for(let d=1;d<l;d+=1){const h=c*d%1;u[d]=o.values[d-1]*(1-h)+o.values[d]*h}this._automationEvents[this._automationEvents.length-1]=ux(u,o.startTime,s)}}}else{const r=this._automationEvents.findIndex(s=>Us(s)>n),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&Fo(i)&&Us(i)+i.duration>n)return!1;const o=ql(e)?_S(e.value,e.endTime,this._currenTime):Ap(e)?OS(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(o);else{if(Fo(e)&&n+e.duration>Us(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,o)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>Us(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),i=r[0];zh(i)&&r.unshift(m0(kp(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(s=>Us(s)>e),r=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,o=this._automationEvents[i];if(o!==void 0&&zh(o)&&(r===void 0||!Js(r)||r.insertTime>e))return dx(e,kp(this._automationEvents,i-1,o.startTime,this._defaultValue),o);if(o!==void 0&&ZC(o)&&(r===void 0||!Js(r)))return o.value;if(o!==void 0&&Fo(o)&&(r===void 0||!Js(r)||o.startTime+o.duration>e))return e<o.startTime+o.duration?WF(e,o):o.values[o.values.length-1];if(o!==void 0&&Js(o)&&(r===void 0||!Js(r)))return o.value;if(r!==void 0&&ql(r)){const[s,a]=MS(this._automationEvents,i,o,r,this._defaultValue);return DS(e,s,a,r)}if(r!==void 0&&Ap(r)){const[s,a]=MS(this._automationEvents,i,o,r,this._defaultValue);return LS(e,s,a,r)}return this._defaultValue}}const ZF=t=>({cancelTime:t,type:"cancelAndHold"}),zF=t=>({cancelTime:t,type:"cancelScheduledValues"}),HF=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),$F=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),XF=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),KF=()=>new DOMException("","AbortError"),JF=t=>(e,n,[r,i,o],s)=>{t(e[i],[n,r,o],a=>a[0]===n&&a[1]===r,s)},YF=t=>(e,n,r)=>{const i=[];for(let o=0;o<r.numberOfInputs;o+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},QF=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},Pc=new WeakSet,hx=new WeakMap,fx=new WeakMap,px=new WeakMap,gx=new WeakMap,mx=new WeakMap,vx=new WeakMap,C0=new WeakMap,I0=new WeakMap,b0=new WeakMap,yx={construct(){return yx}},qF=t=>{try{const e=new Proxy(t,yx);new e}catch{return!1}return!0},BS=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,FS=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),i=r.match(BS);for(;i!==null;){const o=i[1].slice(1,-1),s=i[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());n.push(s),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(BS)}return[n.join(";"),r]},US=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},VS=t=>{if(!qF(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},e3=(t,e,n,r,i,o,s,a,l,c,u,d,h)=>{let f=0;return(p,g,C={credentials:"omit"})=>{const m=u.get(p);if(m!==void 0&&m.has(g))return Promise.resolve();const v=c.get(p);if(v!==void 0){const S=v.get(g);if(S!==void 0)return S}const b=o(p),k=b.audioWorklet===void 0?i(g).then(([S,A])=>{const[R,T]=FS(S,A),_=`${R};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return n(_)}).then(()=>{const S=h._AWGS.pop();if(S===void 0)throw new SyntaxError;r(b.currentTime,b.sampleRate,()=>S(class{},void 0,(A,R)=>{if(A.trim()==="")throw e();const T=I0.get(b);if(T!==void 0){if(T.has(A))throw e();VS(R),US(R.parameterDescriptors),T.set(A,R)}else VS(R),US(R.parameterDescriptors),I0.set(b,new Map([[A,R]]))},b.sampleRate,void 0,void 0))}):Promise.all([i(g),Promise.resolve(t(d,d))]).then(([[S,A],R])=>{const T=f+1;f=T;const[_,O]=FS(S,A),Z=`${_};((AudioWorkletProcessor,registerProcessor)=>{${O}
})(${R?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${R?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${R?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,J=new Blob([Z],{type:"application/javascript; charset=utf-8"}),ee=URL.createObjectURL(J);return b.audioWorklet.addModule(ee,C).then(()=>{if(a(b))return b;const re=s(b);return re.audioWorklet.addModule(ee,C).then(()=>re)}).then(re=>{if(l===null)throw new SyntaxError;try{new l(re,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(ee))});return v===void 0?c.set(p,new Map([[g,k]])):v.set(g,k),k.then(()=>{const S=u.get(p);S===void 0?u.set(p,new Set([g])):S.add(g)}).finally(()=>{const S=c.get(p);S!==void 0&&S.delete(g)}),k}},Wi=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},bg=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},Cx=(t,e,n,r)=>{const i=Wi(t,e),o=bg(i,s=>s[0]===n&&s[1]===r);return i.size===0&&t.delete(e),o},sh=t=>Wi(vx,t),Nc=t=>{if(Pc.has(t))throw new Error("The AudioNode is already stored.");Pc.add(t),sh(t).forEach(e=>e(!0))},Ix=t=>"port"in t,ah=t=>{if(!Pc.has(t))throw new Error("The AudioNode is not stored.");Pc.delete(t),sh(t).forEach(e=>e(!1))},w0=(t,e)=>{!Ix(t)&&e.every(n=>n.size===0)&&ah(t)},t3=(t,e,n,r,i,o,s,a,l,c,u,d,h)=>{const f=new WeakMap;return(p,g,C,m,v)=>{const{activeInputs:b,passiveInputs:k}=o(g),{outputs:S}=o(p),A=a(p),R=T=>{const _=l(g),O=l(p);if(T){const B=Cx(k,p,C,m);t(b,p,B,!1),!v&&!d(p)&&n(O,_,C,m),h(g)&&Nc(g)}else{const B=r(b,p,C,m);e(k,m,B,!1),!v&&!d(p)&&i(O,_,C,m);const V=s(g);if(V===0)u(g)&&w0(g,b);else{const H=f.get(g);H!==void 0&&clearTimeout(H),f.set(g,setTimeout(()=>{u(g)&&w0(g,b)},V*1e3))}}};return c(S,[g,C,m],T=>T[0]===g&&T[1]===C&&T[2]===m,!0)?(A.add(R),u(p)?t(b,p,[C,m,R],!0):e(k,m,[p,C,R],!0),!0):!1}},n3=t=>(e,n,[r,i,o],s)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,n,o]])):t(a,[i,n,o],l=>l[0]===i&&l[1]===n,s)},r3=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)},i3=t=>(e,n)=>{t(e).add(n)},o3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},s3=(t,e,n,r,i,o)=>class extends t{constructor(a,l){const c=i(a),u={...o3,...l},d=r(c,u),h=o(c)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const l=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=l,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const l=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=l,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Kn=(t,e)=>t.context===e,a3=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Kn(a,s)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,c)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},S0=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},Po=()=>new DOMException("","IndexSizeError"),bx=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?Po():r}})(t.getChannelData)},l3={numberOfChannels:1},c3=(t,e,n,r,i,o,s,a)=>{let l=null;return class wx{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}={...l3,...u};l===null&&(l=new i(1,1,44100));const p=r!==null&&e(o,o)?new r({length:d,numberOfChannels:h,sampleRate:f}):l.createBuffer(h,d,f);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(s(p),bx(p)):e(S0,()=>S0(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===wx.prototype||t.has(u)}}},Ir=-34028234663852886e22,er=-Ir,vs=t=>Pc.has(t),u3={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},d3=(t,e,n,r,i,o,s,a)=>class extends t{constructor(c,u){const d=o(c),h={...u3,...u},f=i(d,h),p=s(d),g=p?e():null;super(c,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,p,f.playbackRate,er,Ir)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(c){if(this._nativeAudioBufferSourceNode.buffer=c,c!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(c){this._nativeAudioBufferSourceNode.loop=c}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(c){this._nativeAudioBufferSourceNode.loopEnd=c}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(c){this._nativeAudioBufferSourceNode.loopStart=c}get onended(){return this._onended}set onended(c){const u=typeof c=="function"?a(this,c):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?c:d}get playbackRate(){return this._playbackRate}start(c=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(c,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[c,u]:[c,u,d]),this.context.state!=="closed"){Nc(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),vs(this)&&ah(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(c=0){this._nativeAudioBufferSourceNode.stop(c),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=c)}},h3=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const l=async(c,u)=>{let d=n(c);const h=Kn(d,u);if(!h){const f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,f),s!==null&&d.start(...s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,c.playbackRate,d.playbackRate):await r(u,c.playbackRate,d.playbackRate),await i(c,u,d),d};return{set start(c){s=c},set stop(c){a=c},render(c,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},f3=t=>"playbackRate"in t,p3=t=>"frequency"in t&&"gain"in t,g3=t=>"offset"in t,m3=t=>!("frequency"in t)&&"gain"in t,v3=t=>"detune"in t&&"frequency"in t&&!("gain"in t),y3=t=>"pan"in t,rr=t=>Wi(hx,t),lh=t=>Wi(px,t),A0=(t,e)=>{const{activeInputs:n}=rr(t);n.forEach(i=>i.forEach(([o])=>{e.includes(t)||A0(o,[...e,t])}));const r=f3(t)?[t.playbackRate]:Ix(t)?Array.from(t.parameters.values()):p3(t)?[t.Q,t.detune,t.frequency,t.gain]:g3(t)?[t.offset]:m3(t)?[t.gain]:v3(t)?[t.detune,t.frequency]:y3(t)?[t.pan]:[];for(const i of r){const o=lh(i);o!==void 0&&o.activeInputs.forEach(([s])=>A0(s,e))}vs(t)&&ah(t)},C3=t=>{A0(t.destination,[])},I3=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),b3=(t,e,n,r,i,o,s,a,l)=>class extends t{constructor(u={}){if(l===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new l(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!I3(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,l.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),C3(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(u){return new s(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},w3=(t,e,n,r,i,o,s,a)=>class extends t{constructor(c,u){const d=o(c),h=s(d),f=i(d,u,h),p=h?e(a):null;super(c,!1,f,p),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(c>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=c}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(c){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=c}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},S3=t=>{const e=new WeakMap,n=async(r,i)=>{const o=i.destination;return e.set(i,o),await t(r,i,o),o};return{render(r,i){const o=e.get(i);return o!==void 0?Promise.resolve(o):n(r,i)}}},A3=(t,e,n,r,i,o,s,a)=>(l,c)=>{const u=c.listener,d=()=>{const S=new Float32Array(1),A=e(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),R=s(c);let T=!1,_=[0,0,-1,0,1,0],O=[0,0,0];const B=()=>{if(T)return;T=!0;const J=r(c,256,9,0);J.onaudioprocess=({inputBuffer:ee})=>{const re=[o(ee,S,0),o(ee,S,1),o(ee,S,2),o(ee,S,3),o(ee,S,4),o(ee,S,5)];re.some((K,ie)=>K!==_[ie])&&(u.setOrientation(...re),_=re);const $=[o(ee,S,6),o(ee,S,7),o(ee,S,8)];$.some((K,ie)=>K!==O[ie])&&(u.setPosition(...$),O=$)},A.connect(J)},V=J=>ee=>{ee!==_[J]&&(_[J]=ee,u.setOrientation(..._))},H=J=>ee=>{ee!==O[J]&&(O[J]=ee,u.setPosition(...O))},Z=(J,ee,re)=>{const $=n(c,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee});$.connect(A,0,J),$.start(),Object.defineProperty($.offset,"defaultValue",{get(){return ee}});const K=t({context:l},R,$.offset,er,Ir);return a(K,"value",ie=>()=>ie.call(K),ie=>j=>{try{ie.call(K,j)}catch(oe){if(oe.code!==9)throw oe}B(),R&&re(j)}),K.cancelAndHoldAtTime=(ie=>R?()=>{throw i()}:(...j)=>{const oe=ie.apply(K,j);return B(),oe})(K.cancelAndHoldAtTime),K.cancelScheduledValues=(ie=>R?()=>{throw i()}:(...j)=>{const oe=ie.apply(K,j);return B(),oe})(K.cancelScheduledValues),K.exponentialRampToValueAtTime=(ie=>R?()=>{throw i()}:(...j)=>{const oe=ie.apply(K,j);return B(),oe})(K.exponentialRampToValueAtTime),K.linearRampToValueAtTime=(ie=>R?()=>{throw i()}:(...j)=>{const oe=ie.apply(K,j);return B(),oe})(K.linearRampToValueAtTime),K.setTargetAtTime=(ie=>R?()=>{throw i()}:(...j)=>{const oe=ie.apply(K,j);return B(),oe})(K.setTargetAtTime),K.setValueAtTime=(ie=>R?()=>{throw i()}:(...j)=>{const oe=ie.apply(K,j);return B(),oe})(K.setValueAtTime),K.setValueCurveAtTime=(ie=>R?()=>{throw i()}:(...j)=>{const oe=ie.apply(K,j);return B(),oe})(K.setValueCurveAtTime),K};return{forwardX:Z(0,0,V(0)),forwardY:Z(1,0,V(1)),forwardZ:Z(2,-1,V(2)),positionX:Z(6,0,H(0)),positionY:Z(7,0,H(1)),positionZ:Z(8,0,H(2)),upX:Z(3,0,V(3)),upY:Z(4,1,V(4)),upZ:Z(5,0,V(5))}},{forwardX:h,forwardY:f,forwardZ:p,positionX:g,positionY:C,positionZ:m,upX:v,upY:b,upZ:k}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return p},get positionX(){return g},get positionY(){return C},get positionZ(){return m},get upX(){return v},get upY(){return b},get upZ(){return k}}},Ep=t=>"context"in t,ch=t=>Ep(t[0]),Al=(t,e,n,r)=>{for(const i of t)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},GS=(t,e,[n,r],i)=>{Al(t,[e,n,r],o=>o[0]===e&&o[1]===n,i)},WS=(t,[e,n,r],i)=>{const o=t.get(e);o===void 0?t.set(e,new Set([[n,r]])):Al(o,[n,r],s=>s[0]===n,i)},zc=t=>"inputs"in t,Tp=(t,e,n,r)=>{if(zc(e)){const i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},Sx=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},k3=(t,e,n)=>bg(t,r=>r[0]===e&&r[1]===n),Ax=(t,e)=>{if(!sh(t).delete(e))throw new Error("Missing the expected event listener.")},kx=(t,e,n)=>{const r=Wi(t,e),i=bg(r,o=>o[0]===n);return r.size===0&&t.delete(e),i},xp=(t,e,n,r)=>{zc(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},_t=t=>Wi(fx,t),Dd=t=>Wi(gx,t),hl=t=>C0.has(t),Ef=t=>!Pc.has(t),jS=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),i=t.createGain(),o=t.createBuffer(1,2,44100),s=o.getChannelData(0);s[0]=1,s[1]=1;const a=t.createBufferSource();a.buffer=o,a.loop=!0,a.connect(r).connect(t.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=l=>{const c=l.inputBuffer.getChannelData(0);Array.prototype.some.call(c,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Mm=(t,e)=>{const n=new Map;for(const r of t)for(const i of r){const o=n.get(i);n.set(i,o===void 0?1:o+1)}n.forEach((r,i)=>e(i,r))},Rp=t=>"context"in t,E3=t=>{const e=new Map;t.connect=(n=>(r,i=0,o=0)=>{const s=Rp(r)?n(r,i,o):n(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:o,output:i}]):a.every(l=>l.input!==o||l.output!==i)&&a.push({input:o,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(r,i,o)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[s,a]of e){const l=a.filter(c=>c.output!==r);l.length===0?e.delete(s):e.set(s,l)}else if(e.has(r))if(i===void 0)e.delete(r);else{const s=e.get(r);if(s!==void 0){const a=s.filter(l=>l.output!==i&&(l.input!==o||o===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[s,a]of e)a.forEach(l=>{Rp(s)?t.connect(s,l.output,l.input):t.connect(s,l.output)})})(t.disconnect)},T3=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=lh(e),{outputs:s}=rr(t),a=sh(t),l=c=>{const u=_t(t),d=Dd(e);if(c){const h=kx(o,t,n);GS(i,t,h,!1),!r&&!hl(t)&&u.connect(d,n)}else{const h=k3(i,t,n);WS(o,h,!1),!r&&!hl(t)&&u.disconnect(d,n)}};return Al(s,[e,n],c=>c[0]===e&&c[1]===n,!0)?(a.add(l),vs(t)?GS(i,t,[n,l],!0):WS(o,[t,n,l],!0),!0):!1},x3=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=rr(e),s=Sx(i[r],t,n);return s===null?[Cx(o,t,n,r)[2],!1]:[s[2],!0]},R3=(t,e,n)=>{const{activeInputs:r,passiveInputs:i}=lh(e),o=Sx(r,t,n);return o===null?[kx(i,t,n)[1],!1]:[o[2],!0]},zC=(t,e,n,r,i)=>{const[o,s]=x3(t,n,r,i);if(o!==null&&(Ax(t,o),s&&!e&&!hl(t)&&xp(_t(t),_t(n),r,i)),vs(n)){const{activeInputs:a}=rr(n);w0(n,a)}},HC=(t,e,n,r)=>{const[i,o]=R3(t,n,r);i!==null&&(Ax(t,i),o&&!e&&!hl(t)&&_t(t).disconnect(Dd(n),r))},P3=(t,e)=>{const n=rr(t),r=[];for(const i of n.outputs)ch(i)?zC(t,e,...i):HC(t,e,...i),r.push(i[0]);return n.outputs.clear(),r},N3=(t,e,n)=>{const r=rr(t),i=[];for(const o of r.outputs)o[1]===n&&(ch(o)?zC(t,e,...o):HC(t,e,...o),i.push(o[0]),r.outputs.delete(o));return i},_3=(t,e,n,r,i)=>{const o=rr(t);return Array.from(o.outputs).filter(s=>s[0]===n&&(r===void 0||s[1]===r)&&(i===void 0||s[2]===i)).map(s=>(ch(s)?zC(t,e,...s):HC(t,e,...s),o.outputs.delete(s),s[0]))},O3=(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g)=>class extends c{constructor(m,v,b,k){super(b),this._context=m,this._nativeAudioNode=b;const S=u(m);d(S)&&n(jS,()=>jS(S,g))!==!0&&E3(b),fx.set(this,b),vx.set(this,new Set),m.state!=="closed"&&v&&Nc(this),t(this,k,b)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(m){this._nativeAudioNode.channelCount=m}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(m){this._nativeAudioNode.channelCountMode=m}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(m){this._nativeAudioNode.channelInterpretation=m}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(m,v=0,b=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();const k=u(this._context),S=p(k);if(h(m)||f(m))throw o();if(Ep(m)){const T=_t(m);try{const O=Tp(this._nativeAudioNode,T,v,b),B=Ef(this);(S||B)&&this._nativeAudioNode.disconnect(...O),this.context.state!=="closed"&&!B&&Ef(m)&&Nc(m)}catch(O){throw O.code===12?o():O}if(e(this,m,v,b,S)){const O=l([this],m);Mm(O,r(S))}return m}const A=Dd(m);if(A.name==="playbackRate"&&A.maxValue===1024)throw s();try{this._nativeAudioNode.connect(A,v),(S||Ef(this))&&this._nativeAudioNode.disconnect(A,v)}catch(T){throw T.code===12?o():T}if(T3(this,m,v,S)){const T=l([this],m);Mm(T,r(S))}}disconnect(m,v,b){let k;const S=u(this._context),A=p(S);if(m===void 0)k=P3(this,A);else if(typeof m=="number"){if(m<0||m>=this.numberOfOutputs)throw i();k=N3(this,A,m)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Ep(m)&&b!==void 0&&(b<0||b>=m.numberOfInputs))throw i();if(k=_3(this,A,m,v,b),k.length===0)throw o()}for(const R of k){const T=l([this],R);Mm(T,a)}}},M3=(t,e,n,r,i,o,s,a,l,c,u,d,h)=>(f,p,g,C=null,m=null)=>{const v=g.value,b=new jF(v),k=p?r(b):null,S={get defaultValue(){return v},get maxValue(){return C===null?g.maxValue:C},get minValue(){return m===null?g.minValue:m},get value(){return g.value},set value(A){g.value=A,S.setValueAtTime(A,f.context.currentTime)},cancelAndHoldAtTime(A){if(typeof g.cancelAndHoldAtTime=="function")k===null&&b.flush(f.context.currentTime),b.add(i(A)),g.cancelAndHoldAtTime(A);else{const R=Array.from(b).pop();k===null&&b.flush(f.context.currentTime),b.add(i(A));const T=Array.from(b).pop();g.cancelScheduledValues(A),R!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?g.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?g.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&g.setValueCurveAtTime(T.values,T.startTime,T.duration))}return S},cancelScheduledValues(A){return k===null&&b.flush(f.context.currentTime),b.add(o(A)),g.cancelScheduledValues(A),S},exponentialRampToValueAtTime(A,R){if(A===0)throw new RangeError;if(!Number.isFinite(R)||R<0)throw new RangeError;const T=f.context.currentTime;return k===null&&b.flush(T),Array.from(b).length===0&&(b.add(c(v,T)),g.setValueAtTime(v,T)),b.add(s(A,R)),g.exponentialRampToValueAtTime(A,R),S},linearRampToValueAtTime(A,R){const T=f.context.currentTime;return k===null&&b.flush(T),Array.from(b).length===0&&(b.add(c(v,T)),g.setValueAtTime(v,T)),b.add(a(A,R)),g.linearRampToValueAtTime(A,R),S},setTargetAtTime(A,R,T){return k===null&&b.flush(f.context.currentTime),b.add(l(A,R,T)),g.setTargetAtTime(A,R,T),S},setValueAtTime(A,R){return k===null&&b.flush(f.context.currentTime),b.add(c(A,R)),g.setValueAtTime(A,R),S},setValueCurveAtTime(A,R,T){const _=A instanceof Float32Array?A:new Float32Array(A);if(d!==null&&d.name==="webkitAudioContext"){const O=R+T,B=f.context.sampleRate,V=Math.ceil(R*B),H=Math.floor(O*B),Z=H-V,J=new Float32Array(Z);for(let re=0;re<Z;re+=1){const $=(_.length-1)/T*((V+re)/B-R),K=Math.floor($),ie=Math.ceil($);J[re]=K===ie?_[K]:(1-($-K))*_[K]+(1-(ie-$))*_[ie]}k===null&&b.flush(f.context.currentTime),b.add(u(J,R,T)),g.setValueCurveAtTime(J,R,T);const ee=H/B;ee<O&&h(S,J[J.length-1],ee),h(S,_[_.length-1],O)}else k===null&&b.flush(f.context.currentTime),b.add(u(_,R,T)),g.setValueCurveAtTime(_,R,T);return S}};return n.set(S,g),e.set(S,f),t(S,k),S},D3=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:i}=n;e.exponentialRampToValueAtTime(i,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:i}=n;e.linearRampToValueAtTime(i,r)}else if(n.type==="setTarget"){const{startTime:r,target:i,timeConstant:o}=n;e.setTargetAtTime(i,r,o)}else if(n.type==="setValue"){const{startTime:r,value:i}=n;e.setValueAtTime(i,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:i,values:o}=n;e.setValueCurveAtTime(o,i,r)}else throw new Error("Can't apply an unknown automation.")}});class Ex{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,i)=>e.call(n,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const L3={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},B3=(t,e,n,r,i,o,s,a,l,c,u,d,h,f)=>class extends e{constructor(g,C,m){var v;const b=a(g),k=l(b),S=u({...L3,...m});h(S);const A=I0.get(b),R=A==null?void 0:A.get(C),T=k||b.state!=="closed"?b:(v=s(b))!==null&&v!==void 0?v:b,_=i(T,k?null:g.baseLatency,c,C,R,S),O=k?r(C,S,R):null;super(g,!0,_,O);const B=[];_.parameters.forEach((H,Z)=>{const J=n(this,k,H);B.push([Z,J])}),this._nativeAudioWorkletNode=_,this._onprocessorerror=null,this._parameters=new Ex(B),k&&t(b,this);const{activeInputs:V}=o(this);d(_,V)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const C=typeof g=="function"?f(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=C;const m=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=m!==null&&m===C?g:m}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Pp(t,e,n,r,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{const o=t.getChannelData(r);if(e[n].byteLength===0)e[n]=o.slice(i,i+128);else{const s=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(s)}}}const Tx=(t,e,n,r,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,i):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],i)},Np=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const i=[],o=typeof e=="number"?e:e[r];for(let s=0;s<o;s+=1)i.push(new Float32Array(128));n.push(i)}return n},F3=(t,e)=>{const n=Wi(b0,t),r=_t(e);return Wi(n,r)},U3=async(t,e,n,r,i,o,s)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,l=r.channelCount*r.numberOfInputs,c=i.reduce((C,m)=>C+m,0),u=c===0?null:n.createBuffer(c,a,n.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const d=rr(t),h=await F3(n,t),f=Np(r.numberOfInputs,r.channelCount),p=Np(r.numberOfOutputs,i),g=Array.from(t.parameters.keys()).reduce((C,m)=>({...C,[m]:new Float32Array(128)}),{});for(let C=0;C<a;C+=128){if(r.numberOfInputs>0&&e!==null)for(let m=0;m<r.numberOfInputs;m+=1)for(let v=0;v<r.channelCount;v+=1)Pp(e,f[m],v,v,C);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:m},v)=>{Pp(e,g,m,l+v,C)});for(let m=0;m<r.numberOfInputs;m+=1)for(let v=0;v<i[m];v+=1)p[m][v].byteLength===0&&(p[m][v]=new Float32Array(128));try{const m=f.map((b,k)=>d.activeInputs[k].size===0?[]:b),v=s(C/n.sampleRate,n.sampleRate,()=>h.process(m,p,g));if(u!==null)for(let b=0,k=0;b<r.numberOfOutputs;b+=1){for(let S=0;S<i[b];S+=1)Tx(u,p[b],S,k+S,C);k+=i[b]}if(!v)break}catch(m){t.dispatchEvent(new ErrorEvent("processorerror",{colno:m.colno,filename:m.filename,lineno:m.lineno,message:m.message}));break}}return u},V3=(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g)=>(C,m,v)=>{const b=new WeakMap;let k=null;const S=async(A,R)=>{let T=u(A),_=null;const O=Kn(T,R),B=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(d===null){const V=B.reduce((ee,re)=>ee+re,0),H=i(R,{channelCount:Math.max(1,V),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,V)}),Z=[];for(let ee=0;ee<A.numberOfOutputs;ee+=1)Z.push(r(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:B[ee]}));const J=s(R,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1});J.connect=e.bind(null,Z),J.disconnect=l.bind(null,Z),_=[H,Z,J]}else O||(T=new d(R,C));if(b.set(R,_===null?T:_[2]),_!==null){if(k===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const re=A.channelCount*A.numberOfInputs,$=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,K=re+$;k=U3(A,K===0?null:await(async()=>{const j=new h(K,Math.ceil(A.context.length/128)*128,R.sampleRate),oe=[],ke=[];for(let Pe=0;Pe<m.numberOfInputs;Pe+=1)oe.push(s(j,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),ke.push(i(j,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const Le=await Promise.all(Array.from(A.parameters.values()).map(async Pe=>{const Ye=o(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Pe.value});return await f(j,Pe,Ye.offset),Ye})),de=r(j,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,re+$)});for(let Pe=0;Pe<m.numberOfInputs;Pe+=1){oe[Pe].connect(ke[Pe]);for(let Ye=0;Ye<m.channelCount;Ye+=1)ke[Pe].connect(de,Ye,Pe*m.channelCount+Ye)}for(const[Pe,Ye]of Le.entries())Ye.connect(de,0,re+Pe),Ye.start(0);return de.connect(j.destination),await Promise.all(oe.map(Pe=>p(A,j,Pe))),g(j)})(),R,m,B,v,c)}const V=await k,H=n(R,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Z,J,ee]=_;V!==null&&(H.buffer=V,H.start(0)),H.connect(Z);for(let re=0,$=0;re<A.numberOfOutputs;re+=1){const K=J[re];for(let ie=0;ie<B[re];ie+=1)Z.connect(K,$+ie,ie);$+=B[re]}return ee}if(O)for(const[V,H]of A.parameters.entries())await t(R,H,T.parameters.get(V));else for(const[V,H]of A.parameters.entries())await f(R,H,T.parameters.get(V));return await p(A,R,T),T};return{render(A,R){a(R,A);const T=b.get(R);return T!==void 0?Promise.resolve(T):S(A,R)}}},G3=(t,e,n,r,i,o,s,a,l,c,u,d,h,f,p,g,C,m,v,b)=>class extends p{constructor(S,A){super(S,A),this._nativeContext=S,this._audioWorklet=t===void 0?void 0:{addModule:(R,T)=>t(this,R,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(S,A,R){return new n({length:A,numberOfChannels:S,sampleRate:R})}createBufferSource(){return new r(this)}createChannelMerger(S=6){return new o(this,{numberOfInputs:S})}createChannelSplitter(S=6){return new s(this,{numberOfOutputs:S})}createConstantSource(){return new a(this)}createConvolver(){return new l(this)}createDelay(S=1){return new u(this,{maxDelayTime:S})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(S,A){return new f(this,{feedback:A,feedforward:S})}createOscillator(){return new g(this)}createPanner(){return new C(this)}createPeriodicWave(S,A,R={disableNormalization:!1}){return new m(this,{...R,imag:A,real:S})}createStereoPanner(){return new v(this)}createWaveShaper(){return new b(this)}decodeAudioData(S,A,R){return c(this._nativeContext,S).then(T=>(typeof A=="function"&&A(T),T),T=>{throw typeof R=="function"&&R(T),T})}},W3={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},j3=(t,e,n,r,i,o,s,a)=>class extends t{constructor(c,u){const d=o(c),h={...W3,...u},f=i(d,h),p=s(d),g=p?n():null;super(c,!1,f,g),this._Q=e(this,p,f.Q,er,Ir),this._detune=e(this,p,f.detune,1200*Math.log2(er),-1200*Math.log2(er)),this._frequency=e(this,p,f.frequency,c.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(er),Ir),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(c){this._nativeBiquadFilterNode.type=c}getFrequencyResponse(c,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(c,u,d)}catch(h){throw h.code===11?r():h}if(c.length!==u.length||u.length!==d.length)throw r()}},Z3=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,l)=>{let c=n(a);const u=Kn(c,l);if(!u){const d={Q:c.Q.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,detune:c.detune.value,frequency:c.frequency.value,gain:c.gain.value,type:c.type};c=e(l,d)}return o.set(l,c),u?(await t(l,a.Q,c.Q),await t(l,a.detune,c.detune),await t(l,a.frequency,c.frequency),await t(l,a.gain,c.gain)):(await r(l,a.Q,c.Q),await r(l,a.detune,c.detune),await r(l,a.frequency,c.frequency),await r(l,a.gain,c.gain)),await i(a,l,c),c};return{render(a,l){const c=o.get(l);return c!==void 0?Promise.resolve(c):s(a,l)}}},z3=(t,e)=>(n,r)=>{const i=e.get(n);if(i!==void 0)return i;const o=t.get(n);if(o!==void 0)return o;try{const s=r();return s instanceof Promise?(t.set(n,s),s.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,s),s)}catch{return e.set(n,!1),!1}},H3={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},$3=(t,e,n,r,i)=>class extends t{constructor(s,a){const l=r(s),c={...H3,...a},u=n(l,c),d=i(l)?e():null;super(s,!1,u,d)}},X3=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Kn(a,s)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,c)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},K3={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},J3=(t,e,n,r,i,o)=>class extends t{constructor(a,l){const c=r(a),u=o({...K3,...l}),d=n(c,u),h=i(c)?e():null;super(a,!1,d,h)}},Y3=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Kn(a,s)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,c)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},Q3=t=>(e,n,r)=>t(n,e,r),q3=t=>(e,n,r=0,i=0)=>{const o=e[r];if(o===void 0)throw t();return Rp(n)?o.connect(n,0,i):o.connect(n,0)},e5=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},t5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},n5=(t,e,n,r,i,o,s)=>class extends t{constructor(l,c){const u=i(l),d={...t5,...c},h=r(u,d),f=o(u),p=f?n():null;super(l,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,er,Ir),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?s(this,l):null;this._nativeConstantSourceNode.onended=c;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===c?l:u}start(l=0){if(this._nativeConstantSourceNode.start(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=l),this.context.state!=="closed"){Nc(this);const c=()=>{this._nativeConstantSourceNode.removeEventListener("ended",c),vs(this)&&ah(this)};this._nativeConstantSourceNode.addEventListener("ended",c)}}stop(l=0){this._nativeConstantSourceNode.stop(l),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=l)}},r5=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const l=async(c,u)=>{let d=n(c);const h=Kn(d,u);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,f),s!==null&&d.start(s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,c.offset,d.offset):await r(u,c.offset,d.offset),await i(c,u,d),d};return{set start(c){s=c},set stop(c){a=c},render(c,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):l(c,u)}}},i5=t=>e=>(t[0]=e,t[0]),o5={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},s5=(t,e,n,r,i,o)=>class extends t{constructor(a,l){const c=r(a),u={...o5,...l},d=n(c,u),f=i(c)?e():null;super(a,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const l=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=l.createBuffer(1,1,l.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},a5=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Kn(a,s)){const c={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,c)}return r.set(s,a),zc(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},l5=()=>new DOMException("","DataCloneError"),ZS=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},c5=(t,e,n,r,i,o,s,a,l,c,u)=>(d,h)=>{const f=s(d)?d:o(d);if(i.has(h)){const p=n();return Promise.reject(p)}try{i.add(h)}catch{}return e(l,()=>l(f))?f.decodeAudioData(h).then(p=>(ZS(h).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,g)=>{const C=async()=>{try{await ZS(h)}catch{}},m=v=>{g(v),C()};try{f.decodeAudioData(h,v=>{typeof v.copyFromChannel!="function"&&(c(v),bx(v)),t.add(v),C().then(()=>p(v))},v=>{m(v===null?r():v)})}catch(v){m(v)}})},u5=(t,e,n,r,i,o,s,a)=>(l,c)=>{const u=e.get(l);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=o(l.context),h=a(d);if(u===c){if(e.delete(l),!h&&s(l)){const f=r(l),{outputs:p}=n(l);for(const g of p)if(ch(g)){const C=r(g[0]);t(f,C,g[1],g[2])}else{const C=i(g[0]);f.connect(C,g[1])}}}else e.set(l,u-c)},d5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},h5=(t,e,n,r,i,o,s)=>class extends t{constructor(l,c){const u=i(l),d={...d5,...c},h=r(u,d),f=o(u),p=f?n(d.maxDelayTime):null;super(l,!1,h,p),this._delayTime=e(this,f,h.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},f5=(t,e,n,r,i)=>o=>{const s=new WeakMap,a=async(l,c)=>{let u=n(l);const d=Kn(u,c);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:o};u=e(c,h)}return s.set(c,u),d?await t(c,l.delayTime,u.delayTime):await r(c,l.delayTime,u.delayTime),await i(l,c,u),u};return{render(l,c){const u=s.get(c);return u!==void 0?Promise.resolve(u):a(l,c)}}},p5=t=>(e,n,r,i)=>t(e[i],o=>o[0]===n&&o[1]===r),g5=t=>(e,n)=>{t(e).delete(n)},m5=t=>"delayTime"in t,v5=(t,e,n)=>function r(i,o){const s=Ep(o)?o:n(t,o);if(m5(s))return[];if(i[0]===s)return[i];if(i.includes(s))return[];const{outputs:a}=e(s);return Array.from(a).map(l=>r([...i,s],l[0])).reduce((l,c)=>l.concat(c),[])},Hh=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},y5=t=>(e,n=void 0,r=void 0,i=0)=>n===void 0?e.forEach(o=>o.disconnect()):typeof n=="number"?Hh(t,e,n).disconnect():Rp(n)?r===void 0?e.forEach(o=>o.disconnect(n)):i===void 0?Hh(t,e,r).disconnect(n,0):Hh(t,e,r).disconnect(n,0,i):r===void 0?e.forEach(o=>o.disconnect(n)):Hh(t,e,r).disconnect(n,0),C5={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},I5=(t,e,n,r,i,o,s,a)=>class extends t{constructor(c,u){const d=o(c),h={...C5,...u},f=r(d,h),p=s(d),g=p?n():null;super(c,!1,f,g),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(c){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=c,c>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(c){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=c,c==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},b5=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,l)=>{let c=n(a);const u=Kn(c,l);if(!u){const d={attack:c.attack.value,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,knee:c.knee.value,ratio:c.ratio.value,release:c.release.value,threshold:c.threshold.value};c=e(l,d)}return o.set(l,c),u?(await t(l,a.attack,c.attack),await t(l,a.knee,c.knee),await t(l,a.ratio,c.ratio),await t(l,a.release,c.release),await t(l,a.threshold,c.threshold)):(await r(l,a.attack,c.attack),await r(l,a.knee,c.knee),await r(l,a.ratio,c.ratio),await r(l,a.release,c.release),await r(l,a.threshold,c.threshold)),await i(a,l,c),c};return{render(a,l){const c=o.get(l);return c!==void 0?Promise.resolve(c):s(a,l)}}},w5=()=>new DOMException("","EncodingError"),S5=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const i=t.document.head;if(i===null)r(new SyntaxError);else{const o=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),l=t.onerror,c=()=>{t.onerror=l,URL.revokeObjectURL(a)};t.onerror=(u,d,h,f,p)=>{if(d===a||d===t.location.href&&h===1&&f===1)return c(),r(p),!1;if(l!==null)return l(u,d,h,f,p)},o.onerror=()=>{c(),r(new SyntaxError)},o.onload=()=>{c(),n()},o.src=a,o.type="module",i.appendChild(o)}}),A5=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,i){if(r!==null){let o=this._listeners.get(r);o===void 0&&(o=t(this,r),typeof r=="function"&&this._listeners.set(r,o)),this._nativeEventTarget.addEventListener(n,o,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,i){const o=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,o===void 0?null:o,i)}},k5=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},E5=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},T5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},x5=(t,e,n,r,i,o)=>class extends t{constructor(a,l){const c=i(a),u={...T5,...l},d=r(c,u),h=o(c),f=h?n():null;super(a,!1,d,f),this._gain=e(this,h,d.gain,er,Ir)}get gain(){return this._gain}},R5=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,l)=>{let c=n(a);const u=Kn(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:c.gain.value};c=e(l,d)}return o.set(l,c),u?await t(l,a.gain,c.gain):await r(l,a.gain,c.gain),await i(a,l,c),c};return{render(a,l){const c=o.get(l);return c!==void 0?Promise.resolve(c):s(a,l)}}},P5=(t,e)=>n=>e(t,n),N5=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},_5=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},O5=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},M5=t=>e=>t.get(e),Mn=()=>new DOMException("","InvalidStateError"),D5=t=>e=>{const n=t.get(e);if(n===void 0)throw Mn();return n},L5=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},B5=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},wg=()=>new DOMException("","InvalidAccessError"),F5=t=>{t.getFrequencyResponse=(e=>(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw wg();return e.call(t,n,r,i)})(t.getFrequencyResponse)},U5={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},V5=(t,e,n,r,i,o)=>class extends t{constructor(a,l){const c=r(a),u=i(c),d={...U5,...l},h=e(c,u?null:a.baseLatency,d),f=u?n(d.feedback,d.feedforward):null;super(a,!1,h,f),F5(h),this._nativeIIRFilterNode=h,o(this,1)}getFrequencyResponse(a,l,c){return this._nativeIIRFilterNode.getFrequencyResponse(a,l,c)}},xx=(t,e,n,r,i,o,s,a,l,c,u)=>{const d=c.length;let h=a;for(let f=0;f<d;f+=1){let p=n[0]*c[f];for(let g=1;g<i;g+=1){const C=h-g&l-1;p+=n[g]*o[C],p-=t[g]*s[C]}for(let g=i;g<r;g+=1)p+=n[g]*o[h-g&l-1];for(let g=i;g<e;g+=1)p-=t[g]*s[h-g&l-1];o[h]=c[f],s[h]=p,h=h+1&l-1,u[f]=p}return h},G5=(t,e,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=r instanceof Float64Array?r:new Float64Array(r),s=i.length,a=o.length,l=Math.min(s,a);if(i[0]!==1){for(let p=0;p<s;p+=1)o[p]/=i[0];for(let p=1;p<a;p+=1)i[p]/=i[0]}const c=32,u=new Float32Array(c),d=new Float32Array(c),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){const g=t.getChannelData(p),C=h.getChannelData(p);u.fill(0),d.fill(0),xx(i,s,o,a,l,u,d,0,c,g,C)}return h},W5=(t,e,n,r,i)=>(o,s)=>{const a=new WeakMap;let l=null;const c=async(u,d)=>{let h=null,f=e(u);const p=Kn(f,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=d.createIIRFilter(s,o)),a.set(d,h===null?f:h),h!==null){if(l===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);l=(async()=>{await r(u,C,C.destination);const m=await i(C);return G5(m,d,o,s)})()}const g=await l;return h.buffer=g,h.start(0),h}return await r(u,d,f),f};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},j5=(t,e,n,r,i,o)=>s=>(a,l)=>{const c=t.get(a);if(c===void 0){if(!s&&o(a)){const u=r(a),{outputs:d}=n(a);for(const h of d)if(ch(h)){const f=r(h[0]);e(u,f,h[1],h[2])}else{const f=i(h[0]);u.disconnect(f,h[1])}}t.set(a,l)}else t.set(a,c+l)},Z5=t=>e=>t!==null&&e instanceof t,z5=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,H5=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,$5=(t,e)=>n=>t(n)||e(n),X5=t=>e=>t!==null&&e instanceof t,K5=t=>t!==null&&t.isSecureContext,J5=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),l=e(a,s);if(r(a))throw TypeError();super(o,!0,l,null),this._nativeMediaElementAudioSourceNode=l}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},Y5={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},Q5=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o);if(r(a))throw new TypeError;const l={...Y5,...s},c=e(a,l);super(o,!1,c,null),this._nativeMediaStreamAudioDestinationNode=c}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},q5=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),l=e(a,s);if(r(a))throw new TypeError;super(o,!0,l,null),this._nativeMediaStreamAudioSourceNode=l}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},eU=(t,e,n)=>class extends t{constructor(i,o){const s=n(i),a=e(s,o);super(i,!0,a,null)}},tU=(t,e,n,r,i,o)=>class extends n{constructor(a,l){super(a),this._nativeContext=a,mx.set(this,a),r(a)&&i.set(a,new Set),this._destination=new t(this,l),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const l=typeof a=="function"?o(this,a):null;this._nativeContext.onstatechange=l;const c=this._nativeContext.onstatechange;this._onstatechange=c!==null&&c===l?a:c}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},k0=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},nU=(t,e)=>(n,r,i)=>{const o=new Set;return n.connect=(s=>(a,l=0,c=0)=>{const u=o.size===0;if(e(a))return s.call(n,a,l,c),t(o,[a,l,c],d=>d[0]===a&&d[1]===l&&d[2]===c,!0),u&&r(),a;s.call(n,a,l),t(o,[a,l],d=>d[0]===a&&d[1]===l,!0),u&&r()})(n.connect),n.disconnect=(s=>(a,l,c)=>{const u=o.size>0;if(a===void 0)s.apply(n),o.clear();else if(typeof a=="number"){s.call(n,a);for(const h of o)h[1]===a&&o.delete(h)}else{e(a)?s.call(n,a,l,c):s.call(n,a,l);for(const h of o)h[0]===a&&(l===void 0||h[1]===l)&&(c===void 0||h[2]===c)&&o.delete(h)}const d=o.size===0;u&&d&&i()})(n.disconnect),n},Mt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},vn=(t,e)=>{Mt(t,e,"channelCount"),Mt(t,e,"channelCountMode"),Mt(t,e,"channelInterpretation")},zS=t=>typeof t.getFloatTimeDomainData=="function",rU=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let i=0;i<r;i+=1)e[i]=(n[i]-128)*.0078125;return e}},iU=(t,e)=>(n,r)=>{const i=n.createAnalyser();if(vn(i,r),!(r.maxDecibels>r.minDecibels))throw e();return Mt(i,r,"fftSize"),Mt(i,r,"maxDecibels"),Mt(i,r,"minDecibels"),Mt(i,r,"smoothingTimeConstant"),t(zS,()=>zS(i))||rU(i),i},oU=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Zt=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},sU=t=>{t.start=(e=>{let n=!1;return(r=0,i=0,o)=>{if(n)throw Mn();e.call(t,r,i,o),n=!0}})(t.start)},$C=t=>{t.start=(e=>(n=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})(t.start)},XC=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},aU=(t,e,n,r,i,o,s,a,l,c,u)=>(d,h)=>{const f=d.createBufferSource();return vn(f,h),Zt(f,h,"playbackRate"),Mt(f,h,"buffer"),Mt(f,h,"loop"),Mt(f,h,"loopEnd"),Mt(f,h,"loopStart"),e(n,()=>n(d))||sU(f),e(r,()=>r(d))||l(f),e(i,()=>i(d))||c(f,d),e(o,()=>o(d))||$C(f),e(s,()=>s(d))||u(f,d),e(a,()=>a(d))||XC(f),t(d,f),f},lU=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,cU=(t,e)=>(n,r,i)=>{const o=n.destination;if(o.channelCount!==r)try{o.channelCount=r}catch{}i&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:r});const s=t(n,{channelCount:r,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>l=>{a.call(s,l);try{o.channelCount=l}catch(c){if(l>o.maxChannelCount)throw c}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>l=>{a.call(s,l),o.channelCountMode=l}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>l=>{a.call(s,l),o.channelInterpretation=l}),Object.defineProperty(s,"maxChannelCount",{get:()=>o.maxChannelCount}),s.connect(o),s},uU=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,dU=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},hU=(t,e,n,r,i)=>(o,s,a,l,c,u)=>{if(a!==null)try{const d=new a(o,l,u),h=new Map;let f=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&d.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(C!==null){const m=h.get(g[1]);m!==void 0?g[1]=m:(g[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),C(v)):C(new ErrorEvent(g[0],{...v}))},h.set(C,g[1]))}}return p.call(d,"error",g[1],g[2]),p.call(d,...g)})(d.addEventListener),d.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=h.get(g[1]);C!==void 0&&(h.delete(g[1]),g[1]=C)}return p.call(d,"error",g[1],g[2]),p.call(d,g[0],g[1],g[2])})(d.removeEventListener),u.numberOfOutputs!==0){const p=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(o.destination),i(d,()=>p.disconnect(),()=>p.connect(o.destination))}return d}catch(d){throw d.code===11?r():d}if(c===void 0)throw r();return dU(u),e(o,s,c,u)},Rx=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),fU=t=>new Promise((e,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:o})=>{r.close(),i.close(),e(o)},r.onmessageerror=({data:o})=>{r.close(),i.close(),n(o)},i.postMessage(t)}),pU=async(t,e)=>{const n=await fU(e);return new t(n)},gU=(t,e,n,r)=>{let i=b0.get(t);i===void 0&&(i=new WeakMap,b0.set(t,i));const o=pU(n,r);return i.set(e,o),o},mU=(t,e,n,r,i,o,s,a,l,c,u,d,h)=>(f,p,g,C)=>{if(C.numberOfInputs===0&&C.numberOfOutputs===0)throw l();const m=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(m.some(ue=>ue<1))throw l();if(m.length!==C.numberOfOutputs)throw e();if(C.channelCountMode!=="explicit")throw l();const v=C.channelCount*C.numberOfInputs,b=m.reduce((ue,we)=>ue+we,0),k=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(v+k>6||b>6)throw l();const S=new MessageChannel,A=[],R=[];for(let ue=0;ue<C.numberOfInputs;ue+=1)A.push(s(f,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),R.push(i(f,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const T=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:ue,maxValue:we,minValue:Ge,name:Ve}of g.parameterDescriptors){const Me=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.parameterData[Ve]!==void 0?C.parameterData[Ve]:ue===void 0?0:ue});Object.defineProperties(Me.offset,{defaultValue:{get:()=>ue===void 0?0:ue},maxValue:{get:()=>we===void 0?er:we},minValue:{get:()=>Ge===void 0?Ir:Ge}}),T.push(Me)}const _=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+k)}),O=Rx(p,f.sampleRate),B=a(f,O,v+k,Math.max(1,b)),V=i(f,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),H=[];for(let ue=0;ue<C.numberOfOutputs;ue+=1)H.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[ue]}));for(let ue=0;ue<C.numberOfInputs;ue+=1){A[ue].connect(R[ue]);for(let we=0;we<C.channelCount;we+=1)R[ue].connect(_,we,ue*C.channelCount+we)}const Z=new Ex(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:ue},we)=>{const Ge=T[we];return Ge.connect(_,0,v+we),Ge.start(0),[ue,Ge.offset]}));_.connect(B);let J=C.channelInterpretation,ee=null;const re=C.numberOfOutputs===0?[B]:H,$={get bufferSize(){return O},get channelCount(){return C.channelCount},set channelCount(ue){throw n()},get channelCountMode(){return C.channelCountMode},set channelCountMode(ue){throw n()},get channelInterpretation(){return J},set channelInterpretation(ue){for(const we of A)we.channelInterpretation=ue;J=ue},get context(){return B.context},get inputs(){return A},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get onprocessorerror(){return ee},set onprocessorerror(ue){typeof ee=="function"&&$.removeEventListener("processorerror",ee),ee=typeof ue=="function"?ue:null,typeof ee=="function"&&$.addEventListener("processorerror",ee)},get parameters(){return Z},get port(){return S.port2},addEventListener(...ue){return B.addEventListener(ue[0],ue[1],ue[2])},connect:t.bind(null,re),disconnect:c.bind(null,re),dispatchEvent(...ue){return B.dispatchEvent(ue[0])},removeEventListener(...ue){return B.removeEventListener(ue[0],ue[1],ue[2])}},K=new Map;S.port1.addEventListener=(ue=>(...we)=>{if(we[0]==="message"){const Ge=typeof we[1]=="function"?we[1]:typeof we[1]=="object"&&we[1]!==null&&typeof we[1].handleEvent=="function"?we[1].handleEvent:null;if(Ge!==null){const Ve=K.get(we[1]);Ve!==void 0?we[1]=Ve:(we[1]=Me=>{u(f.currentTime,f.sampleRate,()=>Ge(Me))},K.set(Ge,we[1]))}}return ue.call(S.port1,we[0],we[1],we[2])})(S.port1.addEventListener),S.port1.removeEventListener=(ue=>(...we)=>{if(we[0]==="message"){const Ge=K.get(we[1]);Ge!==void 0&&(K.delete(we[1]),we[1]=Ge)}return ue.call(S.port1,we[0],we[1],we[2])})(S.port1.removeEventListener);let ie=null;Object.defineProperty(S.port1,"onmessage",{get:()=>ie,set:ue=>{typeof ie=="function"&&S.port1.removeEventListener("message",ie),ie=typeof ue=="function"?ue:null,typeof ie=="function"&&(S.port1.addEventListener("message",ie),S.port1.start())}}),g.prototype.port=S.port1;let j=null;gU(f,$,g,C).then(ue=>j=ue);const ke=Np(C.numberOfInputs,C.channelCount),Le=Np(C.numberOfOutputs,m),de=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((ue,{name:we})=>({...ue,[we]:new Float32Array(128)}),{});let Pe=!0;const Ye=()=>{C.numberOfOutputs>0&&B.disconnect(V);for(let ue=0,we=0;ue<C.numberOfOutputs;ue+=1){const Ge=H[ue];for(let Ve=0;Ve<m[ue];Ve+=1)V.disconnect(Ge,we+Ve,Ve);we+=m[ue]}},ve=new Map;B.onaudioprocess=({inputBuffer:ue,outputBuffer:we})=>{if(j!==null){const Ge=d($);for(let Ve=0;Ve<O;Ve+=128){for(let Me=0;Me<C.numberOfInputs;Me+=1)for(let qe=0;qe<C.channelCount;qe+=1)Pp(ue,ke[Me],qe,qe,Ve);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:Me},qe)=>{Pp(ue,de,Me,v+qe,Ve)});for(let Me=0;Me<C.numberOfInputs;Me+=1)for(let qe=0;qe<m[Me];qe+=1)Le[Me][qe].byteLength===0&&(Le[Me][qe]=new Float32Array(128));try{const Me=ke.map((Gt,Lt)=>{if(Ge[Lt].size>0)return ve.set(Lt,O/128),Gt;const En=ve.get(Lt);return En===void 0?[]:(Gt.every(Yt=>Yt.every(pr=>pr===0))&&(En===1?ve.delete(Lt):ve.set(Lt,En-1)),Gt)});Pe=u(f.currentTime+Ve/f.sampleRate,f.sampleRate,()=>j.process(Me,Le,de));for(let Gt=0,Lt=0;Gt<C.numberOfOutputs;Gt+=1){for(let zt=0;zt<m[Gt];zt+=1)Tx(we,Le[Gt],zt,Lt+zt,Ve);Lt+=m[Gt]}}catch(Me){Pe=!1,$.dispatchEvent(new ErrorEvent("processorerror",{colno:Me.colno,filename:Me.filename,lineno:Me.lineno,message:Me.message}))}if(!Pe){for(let Me=0;Me<C.numberOfInputs;Me+=1){A[Me].disconnect(R[Me]);for(let qe=0;qe<C.channelCount;qe+=1)R[Ve].disconnect(_,qe,Me*C.channelCount+qe)}if(g.parameterDescriptors!==void 0){const Me=g.parameterDescriptors.length;for(let qe=0;qe<Me;qe+=1){const Gt=T[qe];Gt.disconnect(_,0,v+qe),Gt.stop()}}_.disconnect(B),B.onaudioprocess=null,an?Ye():Ct();break}}}};let an=!1;const An=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),st=()=>B.connect(An).connect(f.destination),Ct=()=>{B.disconnect(An),An.disconnect()},kn=()=>{if(Pe){Ct(),C.numberOfOutputs>0&&B.connect(V);for(let ue=0,we=0;ue<C.numberOfOutputs;ue+=1){const Ge=H[ue];for(let Ve=0;Ve<m[ue];Ve+=1)V.connect(Ge,we+Ve,Ve);we+=m[ue]}}an=!0},ln=()=>{Pe&&(st(),Ye()),an=!1};return st(),h($,kn,ln)},Px=(t,e)=>{const n=t.createBiquadFilter();return vn(n,e),Zt(n,e,"Q"),Zt(n,e,"detune"),Zt(n,e,"frequency"),Zt(n,e,"gain"),Mt(n,e,"type"),n},vU=(t,e)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),vn(i,r),i},yU=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw Mn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw Mn()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw Mn()}})},uh=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return vn(n,e),yU(n),n},CU=(t,e,n,r,i)=>(o,s)=>{if(o.createConstantSource===void 0)return n(o,s);const a=o.createConstantSource();return vn(a,s),Zt(a,s,"offset"),e(r,()=>r(o))||$C(a),e(i,()=>i(o))||XC(a),t(o,a),a},Hc=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),IU=(t,e,n,r)=>(i,{offset:o,...s})=>{const a=i.createBuffer(1,2,44100),l=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),c=n(i,{...s,gain:o}),u=a.getChannelData(0);u[0]=1,u[1]=1,l.buffer=a,l.loop=!0;const d={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(p){c.channelCount=p},get channelCountMode(){return c.channelCountMode},set channelCountMode(p){c.channelCountMode=p},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(p){c.channelInterpretation=p},get context(){return c.context},get inputs(){return[]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get offset(){return c.gain},get onended(){return l.onended},set onended(p){l.onended=p},addEventListener(...p){return l.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return l.dispatchEvent(p[0])},removeEventListener(...p){return l.removeEventListener(p[0],p[1],p[2])},start(p=0){l.start.call(l,p)},stop(p=0){l.stop.call(l,p)}},h=()=>l.connect(c),f=()=>l.disconnect(c);return t(i,l),r(Hc(d,c),h,f)},bU=(t,e)=>(n,r)=>{const i=n.createConvolver();if(vn(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),Mt(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",o=>()=>o.call(i),o=>s=>{if(s>2)throw t();return o.call(i,s)}),r.channelCountMode==="max"))throw t();return e(i,"channelCountMode",o=>()=>o.call(i),o=>s=>{if(s==="max")throw t();return o.call(i,s)}),i},Nx=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return vn(n,e),Zt(n,e,"delayTime"),n},wU=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(vn(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Zt(r,n,"attack"),Zt(r,n,"knee"),Zt(r,n,"ratio"),Zt(r,n,"release"),Zt(r,n,"threshold"),r},xr=(t,e)=>{const n=t.createGain();return vn(n,e),Zt(n,e,"gain"),n},SU=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return vn(i,r),i};function AU(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function kU(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function HS(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=kU(n,e),n[0]+=t[r];return n}const EU=(t,e,n,r)=>(i,o,{channelCount:s,channelCountMode:a,channelInterpretation:l,feedback:c,feedforward:u})=>{const d=Rx(o,i.sampleRate),h=c instanceof Float64Array?c:new Float64Array(c),f=u instanceof Float64Array?u:new Float64Array(u),p=h.length,g=f.length,C=Math.min(p,g);if(p===0||p>20)throw r();if(h[0]===0)throw e();if(g===0||g>20)throw r();if(f[0]===0)throw e();if(h[0]!==1){for(let T=0;T<g;T+=1)f[T]/=h[0];for(let T=1;T<p;T+=1)h[T]/=h[0]}const m=n(i,d,s,s);m.channelCount=s,m.channelCountMode=a,m.channelInterpretation=l;const v=32,b=[],k=[],S=[];for(let T=0;T<s;T+=1){b.push(0);const _=new Float32Array(v),O=new Float32Array(v);_.fill(0),O.fill(0),k.push(_),S.push(O)}m.onaudioprocess=T=>{const _=T.inputBuffer,O=T.outputBuffer,B=_.numberOfChannels;for(let V=0;V<B;V+=1){const H=_.getChannelData(V),Z=O.getChannelData(V);b[V]=xx(h,p,f,g,C,k[V],S[V],b[V],v,H,Z)}};const A=i.sampleRate/2;return Hc({get bufferSize(){return d},get channelCount(){return m.channelCount},set channelCount(T){m.channelCount=T},get channelCountMode(){return m.channelCountMode},set channelCountMode(T){m.channelCountMode=T},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(T){m.channelInterpretation=T},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener(...T){return m.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return m.dispatchEvent(T[0])},getFrequencyResponse(T,_,O){if(T.length!==_.length||_.length!==O.length)throw t();const B=T.length;for(let V=0;V<B;V+=1){const H=-Math.PI*(T[V]/A),Z=[Math.cos(H),Math.sin(H)],J=HS(f,Z),ee=HS(h,Z),re=AU(J,ee);_[V]=Math.sqrt(re[0]*re[0]+re[1]*re[1]),O[V]=Math.atan2(re[1],re[0])}},removeEventListener(...T){return m.removeEventListener(T[0],T[1],T[2])}},m)},TU=(t,e)=>t.createMediaElementSource(e.mediaElement),xU=(t,e)=>{const n=t.createMediaStreamDestination();return vn(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},RU=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((o,s)=>o.id<s.id?-1:o.id>s.id?1:0);const r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},PU=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),o=n.createMediaStreamSource(i);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return o},NU=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,_U=(t,e,n,r,i,o)=>(s,a)=>{const l=s.createOscillator();return vn(l,a),Zt(l,a,"detune"),Zt(l,a,"frequency"),a.periodicWave!==void 0?l.setPeriodicWave(a.periodicWave):Mt(l,a,"type"),e(n,()=>n(s))||$C(l),e(r,()=>r(s))||o(l,s),e(i,()=>i(s))||XC(l),t(s,l),l},OU=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(vn(r,n),Zt(r,n,"orientationX"),Zt(r,n,"orientationY"),Zt(r,n,"orientationZ"),Zt(r,n,"positionX"),Zt(r,n,"positionY"),Zt(r,n,"positionZ"),Mt(r,n,"coneInnerAngle"),Mt(r,n,"coneOuterAngle"),Mt(r,n,"coneOuterGain"),Mt(r,n,"distanceModel"),Mt(r,n,"maxDistance"),Mt(r,n,"panningModel"),Mt(r,n,"refDistance"),Mt(r,n,"rolloffFactor"),r)},MU=(t,e,n,r,i,o,s,a,l,c)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:g,orientationX:C,orientationY:m,orientationZ:v,panningModel:b,positionX:k,positionY:S,positionZ:A,refDistance:R,rolloffFactor:T,..._})=>{const O=u.createPanner();if(_.channelCount>2||_.channelCountMode==="max")throw s();vn(O,_);const B={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},V=n(u,{...B,channelInterpretation:"speakers",numberOfInputs:6}),H=r(u,{..._,gain:1}),Z=r(u,{...B,gain:1}),J=r(u,{...B,gain:0}),ee=r(u,{...B,gain:0}),re=r(u,{...B,gain:0}),$=r(u,{...B,gain:0}),K=r(u,{...B,gain:0}),ie=i(u,256,6,1),j=o(u,{...B,curve:new Float32Array([1,1]),oversample:"none"});let oe=[C,m,v],ke=[k,S,A];const Le=new Float32Array(1);ie.onaudioprocess=({inputBuffer:ve})=>{const an=[l(ve,Le,0),l(ve,Le,1),l(ve,Le,2)];an.some((st,Ct)=>st!==oe[Ct])&&(O.setOrientation(...an),oe=an);const An=[l(ve,Le,3),l(ve,Le,4),l(ve,Le,5)];An.some((st,Ct)=>st!==ke[Ct])&&(O.setPosition(...An),ke=An)},Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(re.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0}),Object.defineProperty(K.gain,"defaultValue",{get:()=>0});const de={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(ve){if(ve>2)throw s();H.channelCount=ve,O.channelCount=ve},get channelCountMode(){return O.channelCountMode},set channelCountMode(ve){if(ve==="max")throw s();H.channelCountMode=ve,O.channelCountMode=ve},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(ve){H.channelInterpretation=ve,O.channelInterpretation=ve},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(ve){O.coneInnerAngle=ve},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(ve){O.coneOuterAngle=ve},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(ve){if(ve<0||ve>1)throw e();O.coneOuterGain=ve},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(ve){O.distanceModel=ve},get inputs(){return[H]},get maxDistance(){return O.maxDistance},set maxDistance(ve){if(ve<0)throw new RangeError;O.maxDistance=ve},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return Z.gain},get orientationY(){return J.gain},get orientationZ(){return ee.gain},get panningModel(){return O.panningModel},set panningModel(ve){O.panningModel=ve},get positionX(){return re.gain},get positionY(){return $.gain},get positionZ(){return K.gain},get refDistance(){return O.refDistance},set refDistance(ve){if(ve<0)throw new RangeError;O.refDistance=ve},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(ve){if(ve<0)throw new RangeError;O.rolloffFactor=ve},addEventListener(...ve){return H.addEventListener(ve[0],ve[1],ve[2])},dispatchEvent(...ve){return H.dispatchEvent(ve[0])},removeEventListener(...ve){return H.removeEventListener(ve[0],ve[1],ve[2])}};d!==de.coneInnerAngle&&(de.coneInnerAngle=d),h!==de.coneOuterAngle&&(de.coneOuterAngle=h),f!==de.coneOuterGain&&(de.coneOuterGain=f),p!==de.distanceModel&&(de.distanceModel=p),g!==de.maxDistance&&(de.maxDistance=g),C!==de.orientationX.value&&(de.orientationX.value=C),m!==de.orientationY.value&&(de.orientationY.value=m),v!==de.orientationZ.value&&(de.orientationZ.value=v),b!==de.panningModel&&(de.panningModel=b),k!==de.positionX.value&&(de.positionX.value=k),S!==de.positionY.value&&(de.positionY.value=S),A!==de.positionZ.value&&(de.positionZ.value=A),R!==de.refDistance&&(de.refDistance=R),T!==de.rolloffFactor&&(de.rolloffFactor=T),(oe[0]!==1||oe[1]!==0||oe[2]!==0)&&O.setOrientation(...oe),(ke[0]!==0||ke[1]!==0||ke[2]!==0)&&O.setPosition(...ke);const Pe=()=>{H.connect(O),t(H,j,0,0),j.connect(Z).connect(V,0,0),j.connect(J).connect(V,0,1),j.connect(ee).connect(V,0,2),j.connect(re).connect(V,0,3),j.connect($).connect(V,0,4),j.connect(K).connect(V,0,5),V.connect(ie).connect(u.destination)},Ye=()=>{H.disconnect(O),a(H,j,0,0),j.disconnect(Z),Z.disconnect(V),j.disconnect(J),J.disconnect(V),j.disconnect(ee),ee.disconnect(V),j.disconnect(re),re.disconnect(V),j.disconnect($),$.disconnect(V),j.disconnect(K),K.disconnect(V),V.disconnect(ie),ie.disconnect(u.destination)};return c(Hc(de,O),Pe,Ye)},DU=t=>(e,{disableNormalization:n,imag:r,real:i})=>{const o=r instanceof Float32Array?r:new Float32Array(r),s=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(s,o,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},dh=(t,e,n,r)=>t.createScriptProcessor(e,n,r),LU=(t,e)=>(n,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const o=n.createStereoPanner();return vn(o,r),Zt(o,r,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:s=>{if(s!==i)throw e()}}),o},BU=(t,e,n,r,i,o)=>{const a=new Float32Array([1,1]),l=Math.PI/2,c={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...c,oversample:"none"},d=(p,g,C,m)=>{const v=new Float32Array(16385),b=new Float32Array(16385);for(let _=0;_<16385;_+=1){const O=_/16384*l;v[_]=Math.cos(O),b[_]=Math.sin(O)}const k=n(p,{...c,gain:0}),S=r(p,{...u,curve:v}),A=r(p,{...u,curve:a}),R=n(p,{...c,gain:0}),T=r(p,{...u,curve:b});return{connectGraph(){g.connect(k),g.connect(A.inputs===void 0?A:A.inputs[0]),g.connect(R),A.connect(C),C.connect(S.inputs===void 0?S:S.inputs[0]),C.connect(T.inputs===void 0?T:T.inputs[0]),S.connect(k.gain),T.connect(R.gain),k.connect(m,0,0),R.connect(m,0,1)},disconnectGraph(){g.disconnect(k),g.disconnect(A.inputs===void 0?A:A.inputs[0]),g.disconnect(R),A.disconnect(C),C.disconnect(S.inputs===void 0?S:S.inputs[0]),C.disconnect(T.inputs===void 0?T:T.inputs[0]),S.disconnect(k.gain),T.disconnect(R.gain),k.disconnect(m,0,0),R.disconnect(m,0,1)}}},h=(p,g,C,m)=>{const v=new Float32Array(16385),b=new Float32Array(16385),k=new Float32Array(16385),S=new Float32Array(16385),A=Math.floor(16385/2);for(let re=0;re<16385;re+=1)if(re>A){const $=(re-A)/(16384-A)*l;v[re]=Math.cos($),b[re]=Math.sin($),k[re]=0,S[re]=1}else{const $=re/(16384-A)*l;v[re]=1,b[re]=0,k[re]=Math.cos($),S[re]=Math.sin($)}const R=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=n(p,{...c,gain:0}),_=r(p,{...u,curve:v}),O=n(p,{...c,gain:0}),B=r(p,{...u,curve:b}),V=r(p,{...u,curve:a}),H=n(p,{...c,gain:0}),Z=r(p,{...u,curve:k}),J=n(p,{...c,gain:0}),ee=r(p,{...u,curve:S});return{connectGraph(){g.connect(R),g.connect(V.inputs===void 0?V:V.inputs[0]),R.connect(T,0),R.connect(O,0),R.connect(H,1),R.connect(J,1),V.connect(C),C.connect(_.inputs===void 0?_:_.inputs[0]),C.connect(B.inputs===void 0?B:B.inputs[0]),C.connect(Z.inputs===void 0?Z:Z.inputs[0]),C.connect(ee.inputs===void 0?ee:ee.inputs[0]),_.connect(T.gain),B.connect(O.gain),Z.connect(H.gain),ee.connect(J.gain),T.connect(m,0,0),H.connect(m,0,0),O.connect(m,0,1),J.connect(m,0,1)},disconnectGraph(){g.disconnect(R),g.disconnect(V.inputs===void 0?V:V.inputs[0]),R.disconnect(T,0),R.disconnect(O,0),R.disconnect(H,1),R.disconnect(J,1),V.disconnect(C),C.disconnect(_.inputs===void 0?_:_.inputs[0]),C.disconnect(B.inputs===void 0?B:B.inputs[0]),C.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),C.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),_.disconnect(T.gain),B.disconnect(O.gain),Z.disconnect(H.gain),ee.disconnect(J.gain),T.disconnect(m,0,0),H.disconnect(m,0,0),O.disconnect(m,0,1),J.disconnect(m,0,1)}}},f=(p,g,C,m,v)=>{if(g===1)return d(p,C,m,v);if(g===2)return h(p,C,m,v);throw i()};return(p,{channelCount:g,channelCountMode:C,pan:m,...v})=>{if(C==="max")throw i();const b=t(p,{...v,channelCount:1,channelCountMode:C,numberOfInputs:2}),k=n(p,{...v,channelCount:g,channelCountMode:C,gain:1}),S=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:m});let{connectGraph:A,disconnectGraph:R}=f(p,g,k,S,b);Object.defineProperty(S.gain,"defaultValue",{get:()=>0}),Object.defineProperty(S.gain,"maxValue",{get:()=>1}),Object.defineProperty(S.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(V){k.channelCount!==V&&(_&&R(),{connectGraph:A,disconnectGraph:R}=f(p,V,k,S,b),_&&A()),k.channelCount=V},get channelCountMode(){return k.channelCountMode},set channelCountMode(V){if(V==="clamped-max"||V==="max")throw i();k.channelCountMode=V},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(V){k.channelInterpretation=V},get context(){return k.context},get inputs(){return[k]},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get pan(){return S.gain},addEventListener(...V){return k.addEventListener(V[0],V[1],V[2])},dispatchEvent(...V){return k.dispatchEvent(V[0])},removeEventListener(...V){return k.removeEventListener(V[0],V[1],V[2])}};let _=!1;const O=()=>{A(),_=!0},B=()=>{R(),_=!1};return o(Hc(T,b),O,B)}},FU=(t,e,n,r,i,o,s)=>(a,l)=>{const c=a.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,l);vn(c,l);const u=l.curve===null||l.curve instanceof Float32Array?l.curve:new Float32Array(l.curve);if(u!==null&&u.length<2)throw e();Mt(c,{curve:u},"curve"),Mt(c,l,"oversample");let d=null,h=!1;return s(c,"curve",g=>()=>g.call(c),g=>C=>(g.call(c,C),h&&(r(C)&&d===null?d=t(a,c):!r(C)&&d!==null&&(d(),d=null)),C)),i(c,()=>{h=!0,r(c.curve)&&(d=t(a,c))},()=>{h=!1,d!==null&&(d(),d=null)})},UU=(t,e,n,r,i)=>(o,{curve:s,oversample:a,...l})=>{const c=o.createWaveShaper(),u=o.createWaveShaper();vn(c,l),vn(u,l);const d=n(o,{...l,gain:1}),h=n(o,{...l,gain:-1}),f=n(o,{...l,gain:1}),p=n(o,{...l,gain:-1});let g=null,C=!1,m=null;const v={get bufferSize(){},get channelCount(){return c.channelCount},set channelCount(S){d.channelCount=S,h.channelCount=S,c.channelCount=S,f.channelCount=S,u.channelCount=S,p.channelCount=S},get channelCountMode(){return c.channelCountMode},set channelCountMode(S){d.channelCountMode=S,h.channelCountMode=S,c.channelCountMode=S,f.channelCountMode=S,u.channelCountMode=S,p.channelCountMode=S},get channelInterpretation(){return c.channelInterpretation},set channelInterpretation(S){d.channelInterpretation=S,h.channelInterpretation=S,c.channelInterpretation=S,f.channelInterpretation=S,u.channelInterpretation=S,p.channelInterpretation=S},get context(){return c.context},get curve(){return m},set curve(S){if(S!==null&&S.length<2)throw e();if(S===null)c.curve=S,u.curve=S;else{const A=S.length,R=new Float32Array(A+2-A%2),T=new Float32Array(A+2-A%2);R[0]=S[0],T[0]=-S[A-1];const _=Math.ceil((A+1)/2),O=(A+1)/2-1;for(let B=1;B<_;B+=1){const V=B/_*O,H=Math.floor(V),Z=Math.ceil(V);R[B]=H===Z?S[H]:(1-(V-H))*S[H]+(1-(Z-V))*S[Z],T[B]=H===Z?-S[A-1-H]:-((1-(V-H))*S[A-1-H])-(1-(Z-V))*S[A-1-Z]}R[_]=A%2===1?S[_-1]:(S[_-2]+S[_-1])/2,c.curve=R,u.curve=T}m=S,C&&(r(m)&&g===null?g=t(o,d):g!==null&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return c.numberOfOutputs},get oversample(){return c.oversample},set oversample(S){c.oversample=S,u.oversample=S},addEventListener(...S){return d.addEventListener(S[0],S[1],S[2])},dispatchEvent(...S){return d.dispatchEvent(S[0])},removeEventListener(...S){return d.removeEventListener(S[0],S[1],S[2])}};s!==null&&(v.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==v.oversample&&(v.oversample=a);const b=()=>{d.connect(c).connect(f),d.connect(h).connect(u).connect(p).connect(f),C=!0,r(m)&&(g=t(o,d))},k=()=>{d.disconnect(c),c.disconnect(f),d.disconnect(h),h.disconnect(u),u.disconnect(p),p.disconnect(f),C=!1,g!==null&&(g(),g=null)};return i(Hc(v,f),b,k)},Rr=()=>new DOMException("","NotSupportedError"),VU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},GU=(t,e,n,r,i,o,s)=>class extends t{constructor(l,c){const u=i(l),d={...VU,...c},h=n(u,d),f=o(u),p=f?r():null,g=l.sampleRate/2;super(l,!1,h,p),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,g,-g),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(l){const c=typeof l=="function"?s(this,l):null;this._nativeOscillatorNode.onended=c;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===c?l:u}get type(){return this._nativeOscillatorNode.type}set type(l){this._nativeOscillatorNode.type=l,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(l){this._nativeOscillatorNode.setPeriodicWave(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=l)}start(l=0){if(this._nativeOscillatorNode.start(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=l),this.context.state!=="closed"){Nc(this);const c=()=>{this._nativeOscillatorNode.removeEventListener("ended",c),vs(this)&&ah(this)};this._nativeOscillatorNode.addEventListener("ended",c)}}stop(l=0){this._nativeOscillatorNode.stop(l),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=l)}},WU=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null,l=null;const c=async(u,d)=>{let h=n(u);const f=Kn(h,d);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:s===null?void 0:s,type:h.type};h=e(d,p),a!==null&&h.start(a),l!==null&&h.stop(l)}return o.set(d,h),f?(await t(d,u.detune,h.detune),await t(d,u.frequency,h.frequency)):(await r(d,u.detune,h.detune),await r(d,u.frequency,h.frequency)),await i(u,d,h),h};return{set periodicWave(u){s=u},set start(u){a=u},set stop(u){l=u},render(u,d){const h=o.get(d);return h!==void 0?Promise.resolve(h):c(u,d)}}},jU={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},ZU=(t,e,n,r,i,o,s)=>class extends t{constructor(l,c){const u=i(l),d={...jU,...c},h=n(u,d),f=o(u),p=f?r():null;super(l,!1,h,p),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,er,Ir),this._orientationY=e(this,f,h.orientationY,er,Ir),this._orientationZ=e(this,f,h.orientationZ,er,Ir),this._positionX=e(this,f,h.positionX,er,Ir),this._positionY=e(this,f,h.positionY,er,Ir),this._positionZ=e(this,f,h.positionZ,er,Ir),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(l){this._nativePannerNode.coneInnerAngle=l}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(l){this._nativePannerNode.coneOuterAngle=l}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(l){this._nativePannerNode.coneOuterGain=l}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(l){this._nativePannerNode.distanceModel=l}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(l){this._nativePannerNode.maxDistance=l}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(l){this._nativePannerNode.panningModel=l}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(l){this._nativePannerNode.refDistance=l}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(l){this._nativePannerNode.rolloffFactor=l}},zU=(t,e,n,r,i,o,s,a,l,c)=>()=>{const u=new WeakMap;let d=null;const h=async(f,p)=>{let g=null,C=o(f);const m={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},v={...m,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},b=Kn(C,p);if("bufferSize"in C)g=r(p,{...m,gain:1});else if(!b){const k={...v,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=i(p,k)}if(u.set(p,g===null?C:g),g!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const B=new s(6,f.context.length,p.sampleRate),V=e(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});V.connect(B.destination),d=(async()=>{const H=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(Z,J)=>{const ee=n(B,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:J===0?1:0});return await a(B,Z,ee.offset),ee}));for(let Z=0;Z<6;Z+=1)H[Z].connect(V,0,Z),H[Z].start(0);return c(B)})()}const k=await d,S=r(p,{...m,gain:1});await l(f,p,S);const A=[];for(let B=0;B<k.numberOfChannels;B+=1)A.push(k.getChannelData(B));let R=[A[0][0],A[1][0],A[2][0]],T=[A[3][0],A[4][0],A[5][0]],_=r(p,{...m,gain:1}),O=i(p,{...v,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:T[0],positionY:T[1],positionZ:T[2]});S.connect(_).connect(O.inputs[0]),O.connect(g);for(let B=128;B<k.length;B+=128){const V=[A[0][B],A[1][B],A[2][B]],H=[A[3][B],A[4][B],A[5][B]];if(V.some((Z,J)=>Z!==R[J])||H.some((Z,J)=>Z!==T[J])){R=V,T=H;const Z=B/p.sampleRate;_.gain.setValueAtTime(0,Z),_=r(p,{...m,gain:0}),O=i(p,{...v,orientationX:R[0],orientationY:R[1],orientationZ:R[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),_.gain.setValueAtTime(1,Z),S.connect(_).connect(O.inputs[0]),O.connect(g)}}return g}return b?(await t(p,f.orientationX,C.orientationX),await t(p,f.orientationY,C.orientationY),await t(p,f.orientationZ,C.orientationZ),await t(p,f.positionX,C.positionX),await t(p,f.positionY,C.positionY),await t(p,f.positionZ,C.positionZ)):(await a(p,f.orientationX,C.orientationX),await a(p,f.orientationY,C.orientationY),await a(p,f.orientationZ,C.orientationZ),await a(p,f.positionX,C.positionX),await a(p,f.positionY,C.positionY),await a(p,f.positionZ,C.positionZ)),zc(C)?await l(f,p,C.inputs[0]):await l(f,p,C),C};return{render(f,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):h(f,p)}}},HU={disableNormalization:!1},$U=(t,e,n,r)=>class _x{constructor(o,s){const a=e(o),l=r({...HU,...s}),c=t(a,l);return n.add(c),c}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===_x.prototype||n.has(o)}},XU=(t,e)=>(n,r,i)=>(t(r).replay(i),e(r,n,i)),KU=(t,e,n)=>async(r,i,o)=>{const s=t(r);await Promise.all(s.activeInputs.map((a,l)=>Array.from(a).map(async([c,u])=>{const h=await e(c).render(c,i),f=r.context.destination;!n(c)&&(r!==f||!n(r))&&h.connect(o,u,l)})).reduce((a,l)=>[...a,...l],[]))},JU=(t,e,n)=>async(r,i,o)=>{const s=e(r);await Promise.all(Array.from(s.activeInputs).map(async([a,l])=>{const u=await t(a).render(a,i);n(a)||u.connect(o,l)}))},YU=(t,e,n,r)=>i=>t(k0,()=>k0(i))?Promise.resolve(t(r,r)).then(o=>{if(!o){const s=n(i,512,0,1);i.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>i.currentTime,s.connect(i.destination)}return i.startRendering()}):new Promise(o=>{const s=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{s.disconnect(),o(a.renderedBuffer)},s.connect(i.destination),i.startRendering()}),QU=t=>(e,n)=>{t.set(e,n)},qU=t=>(e,n)=>t.set(e,n),e4={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},t4=(t,e,n,r,i,o)=>class extends t{constructor(a,l){const c=i(a),u={...e4,...l},d=n(c,u),h=o(c),f=h?r():null;super(a,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},n4=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,l)=>{let c=n(a);const u=Kn(c,l);if(!u){const d={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,pan:c.pan.value};c=e(l,d)}return o.set(l,c),u?await t(l,a.pan,c.pan):await r(l,a.pan,c.pan),zc(c)?await i(a,l,c.inputs[0]):await i(a,l,c),c};return{render(a,l){const c=o.get(l);return c!==void 0?Promise.resolve(c):s(a,l)}}},r4=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},i4=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(n);let o=!1,s=!1;try{await r.audioWorklet.addModule(i);const a=new t(r,"a",{numberOfOutputs:0}),l=r.createOscillator();a.port.onmessage=()=>o=!0,a.onprocessorerror=()=>s=!0,l.connect(a),l.start(0),await r.startRendering(),await new Promise(c=>setTimeout(c))}catch{}finally{URL.revokeObjectURL(i)}return o&&!s},o4=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{r.disconnect(),i(n.currentTime!==0)},n.startRendering()})},s4=()=>new DOMException("","UnknownError"),a4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},l4=(t,e,n,r,i,o,s)=>class extends t{constructor(l,c){const u=i(l),d={...a4,...c},h=n(u,d),p=o(u)?r():null;super(l,!0,h,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(l){if(l===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(l.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=l}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(l){this._nativeWaveShaperNode.oversample=l}},c4=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Kn(a,s)){const c={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,c)}return r.set(s,a),zc(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},u4=()=>typeof window>"u"?null:window,d4=(t,e)=>n=>{n.copyFromChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<l&&d<u;d+=1)r[d]=c[d+s]},n.copyToChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const l=n.length,c=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<l&&d<u;d+=1)c[d+s]=r[d]}},h4=t=>e=>{e.copyFromChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyToChannel)},f4=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",i=>()=>{const o=i.call(e);return o===r?null:o},i=>o=>i.call(e,o===null?r:o))},p4=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let l=0;l<a;l+=1)i.connect(r,0,l)},()=>i.disconnect(r))},Ox=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),Mx=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},hh=(t,e,n,r)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:s}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:r(s)})},g4=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),m4=t=>({...t,channelCount:t.numberOfOutputs}),v4=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},Dx=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;Dx(t,e,n+1e-7)}},y4=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},C4=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},I4=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},KC=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},Lx=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},JC=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},b4=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},w4=t=>{t.start=(e=>(n=0,r=0,i)=>{const o=t.buffer,s=o===null?r:Math.min(o.duration,r);o!==null&&s>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,i)})(t.start)},Bx=(t,e)=>{const n=e.createGain();t.connect(n);const r=(i=>()=>{i.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),Hc(t,n),t.stop=(i=>{let o=!1;return(s=0)=>{if(o)try{i.call(t,s)}catch{n.gain.setValueAtTime(0,s)}else i.call(t,s),o=!0}})(t.stop)},$c=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},S4=JF(Al),A4=n3(Al),k4=p5(bg),Fx=new WeakMap,E4=_5(Fx),Ps=z3(new Map,new WeakMap),Eo=u4(),Ux=iU(Ps,Po),Vx=N5(rr),Vn=KU(rr,Vx,hl),T4=a3(Ux,_t,Vn),At=D5(mx),Pa=NU(Eo),yt=X5(Pa),Gx=new WeakMap,Wx=A5($c),fh=lU(Eo),jx=Z5(fh),Zx=z5(Eo),x4=H5(Eo),Ld=uU(Eo),Jt=O3(YF(hx),t3(S4,A4,Tp,k4,xp,rr,E4,sh,_t,Al,vs,hl,Ef),Ps,j5(C0,xp,rr,_t,Dd,vs),Po,wg,Rr,u5(Tp,C0,rr,_t,Dd,At,vs,yt),v5(Gx,rr,Wi),Wx,At,jx,Zx,x4,yt,Ld),R4=s3(Jt,T4,Po,Ux,At,yt),zx=new WeakSet,$S=oU(Eo),Hx=i5(new Uint32Array(1)),$x=d4(Hx,Po),Xx=h4(Hx),P4=c3(zx,Ps,Rr,$S,Pa,r4($S),$x,Xx),Sg=r3(xr),Kx=JU(Vx,lh,hl),No=Q3(Kx),Xc=aU(Sg,Ps,y4,C4,I4,KC,Lx,JC,w4,f4(hh),Bx),_o=XU(O5(lh),Kx),N4=h3(No,Xc,_t,_o,Vn),Hi=M3(QF(px),Gx,gx,D3,ZF,zF,HF,$F,XF,m0,ux,fh,Dx),_4=d3(Jt,N4,Hi,Mn,Xc,At,yt,$c),O4=w3(Jt,S3,Po,Mn,cU(xr,hh),At,yt,Vn),M4=Z3(No,Px,_t,_o,Vn),kl=qU(Fx),D4=j3(Jt,Hi,M4,wg,Px,At,yt,kl),Na=nU(Al,Zx),L4=p4(Mn,Na),_a=vU(fh,L4),B4=X3(_a,_t,Vn),F4=$3(Jt,B4,_a,At,yt),U4=Y3(uh,_t,Vn),V4=J3(Jt,U4,uh,At,yt,m4),G4=IU(Sg,Xc,xr,Na),Kc=CU(Sg,Ps,G4,KC,JC),W4=r5(No,Kc,_t,_o,Vn),j4=n5(Jt,Hi,W4,Kc,At,yt,$c),Jx=bU(Rr,hh),Z4=a5(Jx,_t,Vn),z4=s5(Jt,Z4,Jx,At,yt,kl),H4=f5(No,Nx,_t,_o,Vn),$4=h5(Jt,Hi,H4,Nx,At,yt,kl),Yx=wU(Rr),X4=b5(No,Yx,_t,_o,Vn),K4=I5(Jt,Hi,X4,Yx,Rr,At,yt,kl),J4=R5(No,xr,_t,_o,Vn),Y4=x5(Jt,Hi,J4,xr,At,yt),Q4=EU(wg,Mn,dh,Rr),YC=YU(Ps,xr,dh,o4(xr,Pa)),q4=W5(Xc,_t,Pa,Vn,YC),eV=SU(Q4),tV=V5(Jt,eV,q4,At,yt,kl),nV=A3(Hi,_a,Kc,dh,Rr,Ox,yt,hh),Qx=new WeakMap,rV=tU(O4,nV,Wx,yt,Qx,$c),qx=_U(Sg,Ps,KC,Lx,JC,Bx),iV=WU(No,qx,_t,_o,Vn),oV=GU(Jt,Hi,qx,iV,At,yt,$c),eR=e5(Xc),sV=UU(eR,Mn,xr,Mx,Na),Ag=FU(eR,Mn,sV,Mx,Na,fh,hh),aV=MU(Tp,Mn,_a,xr,dh,Ag,Rr,xp,Ox,Na),tR=OU(aV),lV=zU(No,_a,Kc,xr,tR,_t,Pa,_o,Vn,YC),cV=ZU(Jt,Hi,tR,lV,At,yt,kl),uV=DU(Po),dV=$U(uV,At,new WeakSet,v4),hV=BU(_a,uh,xr,Ag,Rr,Na),nR=LU(hV,Rr),fV=n4(No,nR,_t,_o,Vn),pV=t4(Jt,Hi,nR,fV,At,yt),gV=c4(Ag,_t,Vn),mV=l4(Jt,Mn,Ag,gV,At,yt,kl),rR=K5(Eo),QC=k5(Eo),iR=new WeakMap,vV=L5(iR,Pa),yV=rR?e3(Ps,Rr,S5(Eo),QC,E5(KF),At,vV,yt,Ld,new WeakMap,new WeakMap,i4(Ld,Pa),Eo):void 0,CV=$5(jx,yt),IV=c5(zx,Ps,l5,w5,new WeakSet,At,CV,S0,k0,$x,Xx),bV=G3(yV,R4,P4,_4,D4,F4,V4,j4,z4,IV,$4,K4,Y4,tV,rV,oV,cV,dV,pV,mV),wV=J5(Jt,TU,At,yt),SV=Q5(Jt,xU,At,yt),AV=q5(Jt,RU,At,yt),kV=PU(Mn,yt),EV=eU(Jt,kV,At),TV=b3(bV,Mn,Rr,s4,wV,SV,AV,EV,fh),oR=B5(Qx),xV=i3(oR),sR=q3(Po),RV=g5(oR),aR=y5(Po),lR=new WeakMap,PV=P5(lR,Wi),NV=mU(sR,Po,Mn,_a,uh,Kc,xr,dh,Rr,aR,QC,PV,Na),_V=hU(Mn,NV,xr,Rr,Na),OV=V3(No,sR,Xc,_a,uh,Kc,xr,RV,aR,QC,_t,Ld,Pa,_o,Vn,YC),MV=M5(iR),DV=QU(lR),XS=rR?B3(xV,Jt,Hi,OV,_V,rr,MV,At,yt,Ld,g4,DV,b4,$c):void 0,LV="data:text/javascript;base64,KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgV0VCQVVESU9fQkxPQ0tfU0laRSA9IDEyODsKICAgIGNvbnN0IERFRkFVTFRfQkxPQ0tfU0laRSA9IDEwMjQ7IC8vIERlZmF1bHQgYmxvY2sgc2l6ZSBpZiBub3QgcHJvdmlkZWQgaW4gb3B0aW9ucwogICAgLyoqIE92ZXJsYXAtQWRkIE5vZGUgKi8KICAgIGNsYXNzIE9MQVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgICAgICAgbmJJbnB1dHM7CiAgICAgICAgbmJPdXRwdXRzOwogICAgICAgIGJsb2NrU2l6ZTsKICAgICAgICBob3BTaXplOwogICAgICAgIG5iT3ZlcmxhcHM7CiAgICAgICAgaW5wdXRCdWZmZXJzID0gW107CiAgICAgICAgaW5wdXRCdWZmZXJzSGVhZCA9IFtdOwogICAgICAgIGlucHV0QnVmZmVyc1RvU2VuZCA9IFtdOwogICAgICAgIG91dHB1dEJ1ZmZlcnMgPSBbXTsKICAgICAgICBvdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSA9IFtdOwogICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMubmJJbnB1dHMgPSBvcHRpb25zLm51bWJlck9mSW5wdXRzIHx8IDE7CiAgICAgICAgICAgIHRoaXMubmJPdXRwdXRzID0gb3B0aW9ucy5udW1iZXJPZk91dHB1dHMgfHwgMTsKICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBvcHRpb25zLnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplIHx8IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5ob3BTaXplID0gV0VCQVVESU9fQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5uYk92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLmJsb2NrU2l6ZSAvIHRoaXMuaG9wU2l6ZSk7CiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTsKICAgICAgICB9CiAgICAgICAgaW5pdGlhbGl6ZUJ1ZmZlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWQgPSBuZXcgQXJyYXkodGhpcy5uYklucHV0cyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMgPSBuZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlID0gbmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYk91dHB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFsbG9jYXRlSW5wdXRDaGFubmVscyhpbnB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWRbaW5wdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplICsgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc1tpbnB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW2lucHV0SW5kZXhdW2ldID0gdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0uc3ViYXJyYXkoMCwgdGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxvY2F0ZU91dHB1dENoYW5uZWxzKG91dHB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tvdXRwdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbb3V0cHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVtvdXRwdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZChpbnB1dHMsIG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gaW5wdXRzW2ldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYkNoYW5uZWxzICE9PSB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gb3V0cHV0c1tpXS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJDaGFubmVscyAhPT0gdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkSW5wdXRzKGlucHV0cykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gaW5wdXRzW2ldW2pdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLnNldCh3ZWJBdWRpb0Jsb2NrLCB0aGlzLmJsb2NrU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgd3JpdGVPdXRwdXRzKG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iT3V0cHV0czsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMub3V0cHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gb3V0cHV0c1tpXVtqXTsKICAgICAgICAgICAgICAgICAgICB3ZWJBdWRpb0Jsb2NrLnNldCh0aGlzLm91dHB1dEJ1ZmZlcnNbaV1bal0uc3ViYXJyYXkoMCwgV0VCQVVESU9fQkxPQ0tfU0laRSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0SW5wdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2hpZnRPdXRwdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmZpbGwoMCwgdGhpcy5ibG9ja1NpemUgLSBXRUJBVURJT19CTE9DS19TSVpFKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2ldW2pdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbaV1bal0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmJsb2NrU2l6ZTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tpXVtqXVtrXSArPSB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW2ldW2pdW2tdIC8gdGhpcy5uYk92ZXJsYXBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICB0aGlzLnJlYWxsb2NhdGVDaGFubmVsc0lmTmVlZGVkKGlucHV0cywgb3V0cHV0cyk7CiAgICAgICAgICAgIHRoaXMucmVhZElucHV0cyhpbnB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCk7CiAgICAgICAgICAgIHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpOwogICAgICAgICAgICB0aGlzLnByb2Nlc3NPTEEodGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQsIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUsIHBhcmFtZXRlcnMpOwogICAgICAgICAgICB0aGlzLmhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCk7CiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRzKG91dHB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgKHgpIHsKICAgIAlyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4OwogICAgfQoKICAgIGZ1bmN0aW9uIEZGVChzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfCAwOwogICAgICBpZiAodGhpcy5zaXplIDw9IDEgfHwgKHRoaXMuc2l6ZSAmICh0aGlzLnNpemUgLSAxKSkgIT09IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxJyk7CgogICAgICB0aGlzLl9jc2l6ZSA9IHNpemUgPDwgMTsKCiAgICAgIC8vIE5PVEU6IFVzZSBvZiBgdmFyYCBpcyBpbnRlbnRpb25hbCBmb3Igb2xkIFY4IHZlcnNpb25zCiAgICAgIHZhciB0YWJsZSA9IG5ldyBBcnJheSh0aGlzLnNpemUgKiAyKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSSAqIGkgLyB0aGlzLnNpemU7CiAgICAgICAgdGFibGVbaV0gPSBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgdGFibGVbaSArIDFdID0gLU1hdGguc2luKGFuZ2xlKTsKICAgICAgfQogICAgICB0aGlzLnRhYmxlID0gdGFibGU7CgogICAgICAvLyBGaW5kIHNpemUncyBwb3dlciBvZiB0d28KICAgICAgdmFyIHBvd2VyID0gMDsKICAgICAgZm9yICh2YXIgdCA9IDE7IHRoaXMuc2l6ZSA+IHQ7IHQgPDw9IDEpCiAgICAgICAgcG93ZXIrKzsKCiAgICAgIC8vIENhbGN1bGF0ZSBpbml0aWFsIHN0ZXAncyB3aWR0aDoKICAgICAgLy8gICAqIElmIHdlIGFyZSBmdWxsIHJhZGl4LTQgLSBpdCBpcyAyeCBzbWFsbGVyIHRvIGdpdmUgaW5pdGFsIGxlbj04CiAgICAgIC8vICAgKiBPdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgYHBvd2VyYCB0byBnaXZlIGxlbj00CiAgICAgIHRoaXMuX3dpZHRoID0gcG93ZXIgJSAyID09PSAwID8gcG93ZXIgLSAxIDogcG93ZXI7CgogICAgICAvLyBQcmUtY29tcHV0ZSBiaXQtcmV2ZXJzYWwgcGF0dGVybnMKICAgICAgdGhpcy5fYml0cmV2ID0gbmV3IEFycmF5KDEgPDwgdGhpcy5fd2lkdGgpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2JpdHJldi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuX2JpdHJldltqXSA9IDA7CiAgICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBzaGlmdCA8IHRoaXMuX3dpZHRoOyBzaGlmdCArPSAyKSB7CiAgICAgICAgICB2YXIgcmV2U2hpZnQgPSB0aGlzLl93aWR0aCAtIHNoaWZ0IC0gMjsKICAgICAgICAgIHRoaXMuX2JpdHJldltqXSB8PSAoKGogPj4+IHNoaWZ0KSAmIDMpIDw8IHJldlNoaWZ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fb3V0ID0gbnVsbDsKICAgICAgdGhpcy5fZGF0YSA9IG51bGw7CiAgICAgIHRoaXMuX2ludiA9IDA7CiAgICB9CiAgICB2YXIgZmZ0ID0gRkZUOwoKICAgIEZGVC5wcm90b3R5cGUuZnJvbUNvbXBsZXhBcnJheSA9IGZ1bmN0aW9uIGZyb21Db21wbGV4QXJyYXkoY29tcGxleCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCBuZXcgQXJyYXkoY29tcGxleC5sZW5ndGggPj4+IDEpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXgubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzW2kgPj4+IDFdID0gY29tcGxleFtpXTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5jcmVhdGVDb21wbGV4QXJyYXkgPSBmdW5jdGlvbiBjcmVhdGVDb21wbGV4QXJyYXkoKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudG9Db21wbGV4QXJyYXkgPSBmdW5jdGlvbiB0b0NvbXBsZXhBcnJheShpbnB1dCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCB0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHJlc1tpXSA9IGlucHV0W2kgPj4+IDFdOwogICAgICAgIHJlc1tpICsgMV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUuY29tcGxldGVTcGVjdHJ1bSA9IGZ1bmN0aW9uIGNvbXBsZXRlU3BlY3RydW0oc3BlY3RydW0pIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLl9jc2l6ZTsKICAgICAgdmFyIGhhbGYgPSBzaXplID4+PiAxOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGhhbGY7IGkgKz0gMikgewogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpXSA9IHNwZWN0cnVtW2ldOwogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpICsgMV0gPSAtc3BlY3RydW1baSArIDFdOwogICAgICB9CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl90cmFuc2Zvcm00KCk7CiAgICAgIHRoaXMuX291dCA9IG51bGw7CiAgICAgIHRoaXMuX2RhdGEgPSBudWxsOwogICAgfTsKCiAgICBGRlQucHJvdG90eXBlLnJlYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiByZWFsVHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl9yZWFsVHJhbnNmb3JtNCgpOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5pbnZlcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gaW52ZXJzZVRyYW5zZm9ybShvdXQsIGRhdGEpIHsKICAgICAgaWYgKG91dCA9PT0gZGF0YSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCcpOwoKICAgICAgdGhpcy5fb3V0ID0gb3V0OwogICAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgICAgdGhpcy5faW52ID0gMTsKICAgICAgdGhpcy5fdHJhbnNmb3JtNCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykKICAgICAgICBvdXRbaV0gLz0gdGhpcy5zaXplOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgLy8gcmFkaXgtNCBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IFVzZXMgb2YgYHZhcmAgYXJlIGludGVudGlvbmFsIGZvciBvbGRlciBWOCB2ZXJzaW9uIHRoYXQgZG8gbm90CiAgICAvLyBzdXBwb3J0IGJvdGggYGxldCBjb21wb3VuZCBhc3NpZ25tZW50c2AgYW5kIGBjb25zdCBwaGlgCiAgICBGRlQucHJvdG90eXBlLl90cmFuc2Zvcm00ID0gZnVuY3Rpb24gX3RyYW5zZm9ybTQoKSB7CiAgICAgIHZhciBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIHZhciBzaXplID0gdGhpcy5fY3NpemU7CgogICAgICAvLyBJbml0aWFsIHN0ZXAgKHBlcm11dGUgYW5kIHRyYW5zZm9ybSkKICAgICAgdmFyIHdpZHRoID0gdGhpcy5fd2lkdGg7CiAgICAgIHZhciBzdGVwID0gMSA8PCB3aWR0aDsKICAgICAgdmFyIGxlbiA9IChzaXplIC8gc3RlcCkgPDwgMTsKCiAgICAgIHZhciBvdXRPZmY7CiAgICAgIHZhciB0OwogICAgICB2YXIgYml0cmV2ID0gdGhpcy5fYml0cmV2OwogICAgICBpZiAobGVuID09PSA0KSB7CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGVuID09PSA4CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm00KG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gbGVuID4+PiAyOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgLy8gRnVsbCBjYXNlCiAgICAgICAgICB2YXIgbGltaXQgPSBvdXRPZmYgKyBxdWFydGVyTGVuOwogICAgICAgICAgZm9yICh2YXIgaSA9IG91dE9mZiwgayA9IDA7IGkgPCBsaW1pdDsgaSArPSAyLCBrICs9IHN0ZXApIHsKICAgICAgICAgICAgY29uc3QgQSA9IGk7CiAgICAgICAgICAgIGNvbnN0IEIgPSBBICsgcXVhcnRlckxlbjsKICAgICAgICAgICAgY29uc3QgQyA9IEIgKyBxdWFydGVyTGVuOwogICAgICAgICAgICBjb25zdCBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgQXIgPSBvdXRbQV07CiAgICAgICAgICAgIGNvbnN0IEFpID0gb3V0W0EgKyAxXTsKICAgICAgICAgICAgY29uc3QgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIGNvbnN0IEJpID0gb3V0W0IgKyAxXTsKICAgICAgICAgICAgY29uc3QgQ3IgPSBvdXRbQ107CiAgICAgICAgICAgIGNvbnN0IENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgY29uc3QgRHIgPSBvdXRbRF07CiAgICAgICAgICAgIGNvbnN0IERpID0gb3V0W0QgKyAxXTsKCiAgICAgICAgICAgIC8vIE1pZGRsZSB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgTUFyID0gQXI7CiAgICAgICAgICAgIGNvbnN0IE1BaSA9IEFpOwoKICAgICAgICAgICAgY29uc3QgdGFibGVCciA9IHRhYmxlW2tdOwogICAgICAgICAgICBjb25zdCB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICBjb25zdCBNQnIgPSBCciAqIHRhYmxlQnIgLSBCaSAqIHRhYmxlQmk7CiAgICAgICAgICAgIGNvbnN0IE1CaSA9IEJyICogdGFibGVCaSArIEJpICogdGFibGVCcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2kgPSBpbnYgKiB0YWJsZVsyICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNQ3IgPSBDciAqIHRhYmxlQ3IgLSBDaSAqIHRhYmxlQ2k7CiAgICAgICAgICAgIGNvbnN0IE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRHIgPSB0YWJsZVszICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGkgPSBpbnYgKiB0YWJsZVszICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIGNvbnN0IE1EaSA9IERyICogdGFibGVEaSArIERpICogdGFibGVEcjsKCiAgICAgICAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgVDByID0gTUFyICsgTUNyOwogICAgICAgICAgICBjb25zdCBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIGNvbnN0IFQxciA9IE1BciAtIE1DcjsKICAgICAgICAgICAgY29uc3QgVDFpID0gTUFpIC0gTUNpOwogICAgICAgICAgICBjb25zdCBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIGNvbnN0IFQyaSA9IE1CaSArIE1EaTsKICAgICAgICAgICAgY29uc3QgVDNyID0gaW52ICogKE1CciAtIE1Ecik7CiAgICAgICAgICAgIGNvbnN0IFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKICAgICAgICAgICAgY29uc3QgRkFpID0gVDBpICsgVDJpOwoKICAgICAgICAgICAgY29uc3QgRkNyID0gVDByIC0gVDJyOwogICAgICAgICAgICBjb25zdCBGQ2kgPSBUMGkgLSBUMmk7CgogICAgICAgICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgICAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgICAgICAgIGNvbnN0IEZEciA9IFQxciAtIFQzaTsKICAgICAgICAgICAgY29uc3QgRkRpID0gVDFpICsgVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CiAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgb3V0W0MgKyAxXSA9IEZDaTsKICAgICAgICAgICAgb3V0W0RdID0gRkRyOwogICAgICAgICAgICBvdXRbRCArIDFdID0gRkRpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyByYWRpeC0yIGltcGxlbWVudGF0aW9uCiAgICAvLwogICAgLy8gTk9URTogT25seSBjYWxsZWQgZm9yIGxlbj00CiAgICBGRlQucHJvdG90eXBlLl9zaW5nbGVUcmFuc2Zvcm0yID0gZnVuY3Rpb24gX3NpbmdsZVRyYW5zZm9ybTIob3V0T2ZmLCBvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IGV2ZW5JID0gZGF0YVtvZmYgKyAxXTsKICAgICAgY29uc3Qgb2RkUiA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IG9kZEkgPSBkYXRhW29mZiArIHN0ZXAgKyAxXTsKCiAgICAgIGNvbnN0IGxlZnRSID0gZXZlblIgKyBvZGRSOwogICAgICBjb25zdCBsZWZ0SSA9IGV2ZW5JICsgb2RkSTsKICAgICAgY29uc3QgcmlnaHRSID0gZXZlblIgLSBvZGRSOwogICAgICBjb25zdCByaWdodEkgPSBldmVuSSAtIG9kZEk7CgogICAgICBvdXRbb3V0T2ZmXSA9IGxlZnRSOwogICAgICBvdXRbb3V0T2ZmICsgMV0gPSBsZWZ0STsKICAgICAgb3V0W291dE9mZiArIDJdID0gcmlnaHRSOwogICAgICBvdXRbb3V0T2ZmICsgM10gPSByaWdodEk7CiAgICB9OwoKICAgIC8vIHJhZGl4LTQKICAgIC8vCiAgICAvLyBOT1RFOiBPbmx5IGNhbGxlZCBmb3IgbGVuPTgKICAgIEZGVC5wcm90b3R5cGUuX3NpbmdsZVRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlVHJhbnNmb3JtNChvdXRPZmYsIG9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuX291dDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7CiAgICAgIGNvbnN0IGludiA9IHRoaXMuX2ludiA/IC0xIDogMTsKICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwICogMjsKICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwICogMzsKCiAgICAgIC8vIE9yaWdpbmFsIHZhbHVlcwogICAgICBjb25zdCBBciA9IGRhdGFbb2ZmXTsKICAgICAgY29uc3QgQWkgPSBkYXRhW29mZiArIDFdOwogICAgICBjb25zdCBCciA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IEJpID0gZGF0YVtvZmYgKyBzdGVwICsgMV07CiAgICAgIGNvbnN0IENyID0gZGF0YVtvZmYgKyBzdGVwMl07CiAgICAgIGNvbnN0IENpID0gZGF0YVtvZmYgKyBzdGVwMiArIDFdOwogICAgICBjb25zdCBEciA9IGRhdGFbb2ZmICsgc3RlcDNdOwogICAgICBjb25zdCBEaSA9IGRhdGFbb2ZmICsgc3RlcDMgKyAxXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDBpID0gQWkgKyBDaTsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDFpID0gQWkgLSBDaTsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDJpID0gQmkgKyBEaTsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwogICAgICBjb25zdCBUM2kgPSBpbnYgKiAoQmkgLSBEaSk7CgogICAgICAvLyBGaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgRkFyID0gVDByICsgVDJyOwogICAgICBjb25zdCBGQWkgPSBUMGkgKyBUMmk7CgogICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKICAgICAgY29uc3QgRkNpID0gVDBpIC0gVDJpOwoKICAgICAgY29uc3QgRkRyID0gVDFyIC0gVDNpOwogICAgICBjb25zdCBGRGkgPSBUMWkgKyBUM3I7CgogICAgICBvdXRbb3V0T2ZmXSA9IEZBcjsKICAgICAgb3V0W291dE9mZiArIDFdID0gRkFpOwogICAgICBvdXRbb3V0T2ZmICsgMl0gPSBGQnI7CiAgICAgIG91dFtvdXRPZmYgKyAzXSA9IEZCaTsKICAgICAgb3V0W291dE9mZiArIDRdID0gRkNyOwogICAgICBvdXRbb3V0T2ZmICsgNV0gPSBGQ2k7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICAvLyBSZWFsIGlucHV0IHJhZGl4LTQgaW1wbGVtZW50YXRpb24KICAgIEZGVC5wcm90b3R5cGUuX3JlYWxUcmFuc2Zvcm00ID0gZnVuY3Rpb24gX3JlYWxUcmFuc2Zvcm00KCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5fb3V0OwogICAgICB2YXIgc2l6ZSA9IHRoaXMuX2NzaXplOwoKICAgICAgLy8gSW5pdGlhbCBzdGVwIChwZXJtdXRlIGFuZCB0cmFuc2Zvcm0pCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoOwogICAgICB2YXIgc3RlcCA9IDEgPDwgd2lkdGg7CiAgICAgIHZhciBsZW4gPSAoc2l6ZSAvIHN0ZXApIDw8IDE7CgogICAgICB2YXIgb3V0T2ZmOwogICAgICB2YXIgdDsKICAgICAgdmFyIGJpdHJldiA9IHRoaXMuX2JpdHJldjsKICAgICAgaWYgKGxlbiA9PT0gNCkgewogICAgICAgIGZvciAob3V0T2ZmID0gMCwgdCA9IDA7IG91dE9mZiA8IHNpemU7IG91dE9mZiArPSBsZW4sIHQrKykgewogICAgICAgICAgY29uc3Qgb2ZmID0gYml0cmV2W3RdOwogICAgICAgICAgdGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLCBvZmYgPj4+IDEsIHN0ZXAgPj4+IDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZW4gPT09IDgKICAgICAgICBmb3IgKG91dE9mZiA9IDAsIHQgPSAwOyBvdXRPZmYgPCBzaXplOyBvdXRPZmYgKz0gbGVuLCB0KyspIHsKICAgICAgICAgIGNvbnN0IG9mZiA9IGJpdHJldlt0XTsKICAgICAgICAgIHRoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG91dE9mZiwgb2ZmID4+PiAxLCBzdGVwID4+PiAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBoYWxmTGVuID0gbGVuID4+PiAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gaGFsZkxlbiA+Pj4gMTsKICAgICAgICB2YXIgaHF1YXJ0ZXJMZW4gPSBxdWFydGVyTGVuID4+PiAxOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDw9IGhxdWFydGVyTGVuOyBpICs9IDIsIGsgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgQSA9IG91dE9mZiArIGk7CiAgICAgICAgICAgIHZhciBCID0gQSArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBDID0gQiArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgdmFyIEFyID0gb3V0W0FdOwogICAgICAgICAgICB2YXIgQWkgPSBvdXRbQSArIDFdOwogICAgICAgICAgICB2YXIgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIHZhciBCaSA9IG91dFtCICsgMV07CiAgICAgICAgICAgIHZhciBDciA9IG91dFtDXTsKICAgICAgICAgICAgdmFyIENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgdmFyIERyID0gb3V0W0RdOwogICAgICAgICAgICB2YXIgRGkgPSBvdXRbRCArIDFdOwoKICAgICAgICAgICAgLy8gTWlkZGxlIHZhbHVlcwogICAgICAgICAgICB2YXIgTUFyID0gQXI7CiAgICAgICAgICAgIHZhciBNQWkgPSBBaTsKCiAgICAgICAgICAgIHZhciB0YWJsZUJyID0gdGFibGVba107CiAgICAgICAgICAgIHZhciB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICB2YXIgTUJyID0gQnIgKiB0YWJsZUJyIC0gQmkgKiB0YWJsZUJpOwogICAgICAgICAgICB2YXIgTUJpID0gQnIgKiB0YWJsZUJpICsgQmkgKiB0YWJsZUJyOwoKICAgICAgICAgICAgdmFyIHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIHZhciB0YWJsZUNpID0gaW52ICogdGFibGVbMiAqIGsgKyAxXTsKICAgICAgICAgICAgdmFyIE1DciA9IENyICogdGFibGVDciAtIENpICogdGFibGVDaTsKICAgICAgICAgICAgdmFyIE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIHZhciB0YWJsZURyID0gdGFibGVbMyAqIGtdOwogICAgICAgICAgICB2YXIgdGFibGVEaSA9IGludiAqIHRhYmxlWzMgKiBrICsgMV07CiAgICAgICAgICAgIHZhciBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIHZhciBNRGkgPSBEciAqIHRhYmxlRGkgKyBEaSAqIHRhYmxlRHI7CgogICAgICAgICAgICAvLyBQcmUtRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBUMHIgPSBNQXIgKyBNQ3I7CiAgICAgICAgICAgIHZhciBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIHZhciBUMXIgPSBNQXIgLSBNQ3I7CiAgICAgICAgICAgIHZhciBUMWkgPSBNQWkgLSBNQ2k7CiAgICAgICAgICAgIHZhciBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIHZhciBUMmkgPSBNQmkgKyBNRGk7CiAgICAgICAgICAgIHZhciBUM3IgPSBpbnYgKiAoTUJyIC0gTURyKTsKICAgICAgICAgICAgdmFyIFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBGQXIgPSBUMHIgKyBUMnI7CiAgICAgICAgICAgIHZhciBGQWkgPSBUMGkgKyBUMmk7CgogICAgICAgICAgICB2YXIgRkJyID0gVDFyICsgVDNpOwogICAgICAgICAgICB2YXIgRkJpID0gVDFpIC0gVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CgogICAgICAgICAgICAvLyBPdXRwdXQgZmluYWwgbWlkZGxlIHBvaW50CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyIEZDciA9IFQwciAtIFQycjsKICAgICAgICAgICAgICB2YXIgRkNpID0gVDBpIC0gVDJpOwogICAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgICBvdXRbQyArIDFdID0gRkNpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIG91cnNlbHZlcwogICAgICAgICAgICBpZiAoaSA9PT0gaHF1YXJ0ZXJMZW4pCiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBJbiB0aGUgZmxpcHBlZCBjYXNlOgogICAgICAgICAgICAvLyBNQWkgPSAtTUFpCiAgICAgICAgICAgIC8vIE1Ccj0tTUJpLCBNQmk9LU1CcgogICAgICAgICAgICAvLyBNQ3I9LU1DcgogICAgICAgICAgICAvLyBNRHI9TURpLCBNRGk9TURyCiAgICAgICAgICAgIHZhciBTVDByID0gVDFyOwogICAgICAgICAgICB2YXIgU1QwaSA9IC1UMWk7CiAgICAgICAgICAgIHZhciBTVDFyID0gVDByOwogICAgICAgICAgICB2YXIgU1QxaSA9IC1UMGk7CiAgICAgICAgICAgIHZhciBTVDJyID0gLWludiAqIFQzaTsKICAgICAgICAgICAgdmFyIFNUMmkgPSAtaW52ICogVDNyOwogICAgICAgICAgICB2YXIgU1QzciA9IC1pbnYgKiBUMmk7CiAgICAgICAgICAgIHZhciBTVDNpID0gLWludiAqIFQycjsKCiAgICAgICAgICAgIHZhciBTRkFyID0gU1QwciArIFNUMnI7CiAgICAgICAgICAgIHZhciBTRkFpID0gU1QwaSArIFNUMmk7CgogICAgICAgICAgICB2YXIgU0ZCciA9IFNUMXIgKyBTVDNpOwogICAgICAgICAgICB2YXIgU0ZCaSA9IFNUMWkgLSBTVDNyOwoKICAgICAgICAgICAgdmFyIFNBID0gb3V0T2ZmICsgcXVhcnRlckxlbiAtIGk7CiAgICAgICAgICAgIHZhciBTQiA9IG91dE9mZiArIGhhbGZMZW4gLSBpOwoKICAgICAgICAgICAgb3V0W1NBXSA9IFNGQXI7CiAgICAgICAgICAgIG91dFtTQSArIDFdID0gU0ZBaTsKICAgICAgICAgICAgb3V0W1NCXSA9IFNGQnI7CiAgICAgICAgICAgIG91dFtTQiArIDFdID0gU0ZCaTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gcmFkaXgtMiBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49NAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTIgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IG9kZFIgPSBkYXRhW29mZiArIHN0ZXBdOwoKICAgICAgY29uc3QgbGVmdFIgPSBldmVuUiArIG9kZFI7CiAgICAgIGNvbnN0IHJpZ2h0UiA9IGV2ZW5SIC0gb2RkUjsKCiAgICAgIG91dFtvdXRPZmZdID0gbGVmdFI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IHJpZ2h0UjsKICAgICAgb3V0W291dE9mZiArIDNdID0gMDsKICAgIH07CgogICAgLy8gcmFkaXgtNAogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49OAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTQob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwogICAgICBjb25zdCBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcCAqIDI7CiAgICAgIGNvbnN0IHN0ZXAzID0gc3RlcCAqIDM7CgogICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgQXIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IEJyID0gZGF0YVtvZmYgKyBzdGVwXTsKICAgICAgY29uc3QgQ3IgPSBkYXRhW29mZiArIHN0ZXAyXTsKICAgICAgY29uc3QgRHIgPSBkYXRhW29mZiArIHN0ZXAzXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwoKICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKCiAgICAgIGNvbnN0IEZCciA9IFQxcjsKICAgICAgY29uc3QgRkJpID0gLVQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKCiAgICAgIGNvbnN0IEZEciA9IFQxcjsKICAgICAgY29uc3QgRkRpID0gVDNyOwoKICAgICAgb3V0W291dE9mZl0gPSBGQXI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IEZCcjsKICAgICAgb3V0W291dE9mZiArIDNdID0gRkJpOwogICAgICBvdXRbb3V0T2ZmICsgNF0gPSBGQ3I7CiAgICAgIG91dFtvdXRPZmYgKyA1XSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICB2YXIgRkZUJDEgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmZ0KTsKCiAgICBjb25zdCBCVUZGRVJFRF9CTE9DS19TSVpFID0gMjA0ODsKICAgIGZ1bmN0aW9uIGdlbkhhbm5XaW5kb3cobGVuZ3RoKSB7CiAgICAgICAgbGV0IHdpbiA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdpbltpXSA9IDAuNSAqICgxIC0gTWF0aC5jb3MoMiAqIE1hdGguUEkgKiBpIC8gbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3aW47CiAgICB9CiAgICBjbGFzcyBQaGFzZVZvY29kZXJQcm9jZXNzb3IgZXh0ZW5kcyBPTEFQcm9jZXNzb3IgewogICAgICAgIGZmdFNpemU7CiAgICAgICAgdGltZUN1cnNvcjsKICAgICAgICBoYW5uV2luZG93OwogICAgICAgIGZmdDsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlcjsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ7CiAgICAgICAgdGltZUNvbXBsZXhCdWZmZXI7CiAgICAgICAgbWFnbml0dWRlczsKICAgICAgICBwZWFrSW5kZXhlczsKICAgICAgICBuYlBlYWtzOwogICAgICAgIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaXRjaEZhY3RvcicsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLjAKICAgICAgICAgICAgICAgIH1dOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMucHJvY2Vzc29yT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogQlVGRkVSRURfQkxPQ0tfU0laRSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMuZmZ0U2l6ZSA9IHRoaXMuYmxvY2tTaXplOwogICAgICAgICAgICB0aGlzLnRpbWVDdXJzb3IgPSAwOwogICAgICAgICAgICB0aGlzLmhhbm5XaW5kb3cgPSBnZW5IYW5uV2luZG93KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgLy8gcHJlcGFyZSBGRlQgYW5kIHByZS1hbGxvY2F0ZSBidWZmZXJzCiAgICAgICAgICAgIHRoaXMuZmZ0ID0gbmV3IEZGVCQxKHRoaXMuZmZ0U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy50aW1lQ29tcGxleEJ1ZmZlciA9IHRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICAgICAgICB0aGlzLm1hZ25pdHVkZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZSAvIDIgKyAxKTsKICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlcyA9IG5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLm5iUGVha3MgPSAwOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzT0xBKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIGNvbnN0IHBpdGNoRmFjdG9yID0gcGFyYW1ldGVycy5waXRjaEZhY3RvcltwYXJhbWV0ZXJzLnBpdGNoRmFjdG9yLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dHNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhhbm5XaW5kb3coaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlciwgaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQZWFrcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRQZWFrcyhwaXRjaEZhY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCBvdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIYW5uV2luZG93KG91dHB1dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lQ3Vyc29yICs9IHRoaXMuaG9wU2l6ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGFwcGx5SGFubldpbmRvdyhpbnB1dCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGlucHV0W2ldICo9IHRoaXMuaGFubldpbmRvd1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb21wdXRlTWFnbml0dWRlcygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdGhpcy5tYWduaXR1ZGVzLmxlbmd0aDsgaSsrLCBqICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2pdOwogICAgICAgICAgICAgICAgY29uc3QgaW1hZyA9IHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbaiArIDFdOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGVzW2ldID0gcmVhbCAqKiAyICsgaW1hZyAqKiAyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmRQZWFrcygpIHsKICAgICAgICAgICAgdGhpcy5uYlBlYWtzID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGVuZCA9IHRoaXMubWFnbml0dWRlcy5sZW5ndGggLSAyOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pdHVkZXNbaSAtIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSAtIDJdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDJdID49IG1hZykgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3MrK10gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0UGVha3MocGl0Y2hGYWN0b3IpIHsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iUGVha3M7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGVha0luZGV4ID0gdGhpcy5wZWFrSW5kZXhlc1tpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlYWtJbmRleFNoaWZ0ZWQgPSBNYXRoLnJvdW5kKHBlYWtJbmRleCAqIHBpdGNoRmFjdG9yKTsKICAgICAgICAgICAgICAgIGlmIChwZWFrSW5kZXhTaGlmdGVkID4gdGhpcy5tYWduaXR1ZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoaSA+IDApID8gcGVha0luZGV4IC0gTWF0aC5mbG9vcigocGVha0luZGV4IC0gdGhpcy5wZWFrSW5kZXhlc1tpIC0gMV0pIC8gMikgOiAwOwogICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKGkgPCB0aGlzLm5iUGVha3MgLSAxKSA/IHBlYWtJbmRleCArIE1hdGguY2VpbCgodGhpcy5wZWFrSW5kZXhlc1tpICsgMV0gLSBwZWFrSW5kZXgpIC8gMikgOiB0aGlzLmZmdFNpemU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJbmRleCAtIHBlYWtJbmRleDsgaiA8IGVuZEluZGV4IC0gcGVha0luZGV4OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5JbmRleCA9IHBlYWtJbmRleCArIGo7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluSW5kZXhTaGlmdGVkID0gcGVha0luZGV4U2hpZnRlZCArIGo7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbkluZGV4U2hpZnRlZCA+PSB0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWVnYURlbHRhID0gMiAqIE1hdGguUEkgKiAoYmluSW5kZXhTaGlmdGVkIC0gYmluSW5kZXgpIC8gdGhpcy5mZnRTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoYXNlU2hpZnRSZWFsID0gTWF0aC5jb3Mob21lZ2FEZWx0YSAqIHRoaXMudGltZUN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VTaGlmdEltYWcgPSBNYXRoLnNpbihvbWVnYURlbHRhICogdGhpcy50aW1lQ3Vyc29yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFJlYWwgPSBiaW5JbmRleCAqIDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbWFnID0gaW5kZXhSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2luZGV4UmVhbF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbWFnID0gdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltpbmRleEltYWddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZFJlYWwgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0UmVhbCAtIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRJbWFnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZEltYWcgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0SW1hZyArIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRSZWFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZFJlYWwgPSBiaW5JbmRleFNoaWZ0ZWQgKiAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZEltYWcgPSBpbmRleFNoaWZ0ZWRSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtpbmRleFNoaWZ0ZWRSZWFsXSArPSB2YWx1ZVNoaWZ0ZWRSZWFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2luZGV4U2hpZnRlZEltYWddICs9IHZhbHVlU2hpZnRlZEltYWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBAdHMtaWdub3JlCiAgICByZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2RlciIsIFBoYXNlVm9jb2RlclByb2Nlc3Nvcik7CiAgICBjb25zb2xlLmxvZygiUGhhc2VWb2NvZGVyUHJvY2Vzc29yIHJlZ2lzdGVyZWQiKTsKCiAgICBleHBvcnRzLlBoYXNlVm9jb2RlclByb2Nlc3NvciA9IFBoYXNlVm9jb2RlclByb2Nlc3NvcjsKCiAgICByZXR1cm4gZXhwb3J0czsKCn0pKHt9KTsK";let KS=class{constructor(e){L(this,"maxSize");L(this,"cache");this.maxSize=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}has(e){return this.cache.has(e)}};const JS=100,Bt=class Bt{static setCacheExpirationTime(e){this.cacheExpirationTime=e}static async openCache(){try{return await caches.open("audio-cache")}catch(e){throw console.error("Failed to open cache:",e),e}}static async getBufferFromCache(e,n){try{const r=await n.match(e);return r&&r.ok?await r.arrayBuffer():null}catch(r){return console.error("Failed to get data from cache:",r),null}}static async fetchAndCacheBuffer(e,n,r,i){try{const o=new Headers;r&&o.append("If-None-Match",r),i&&o.append("If-Modified-Since",i);const s=await fetch(e,{headers:o}),a=s.clone();if(s.status===200){const l=s.headers.get("ETag")||void 0,c=s.headers.get("Last-Modified")||void 0,u={url:e,etag:l,lastModified:c,timestamp:Date.now()};await n.put(e,a),await n.put(e+":meta",new Response(JSON.stringify(u),{headers:{"Content-Type":"application/json"}}))}else if(s.status===304){const l=await n.match(e);if(l)return await l.arrayBuffer()}return await s.arrayBuffer()}catch(o){throw console.error("Failed to fetch and cache data:",o),o}}static async decodeAudioData(e,n){try{return await e.decodeAudioData(n)}catch(r){throw console.error("Failed to decode audio data:",r),r}}static async getMetadataFromCache(e,n){try{const r=await n.match(e+":meta");return r&&r.ok?await r.json():null}catch(r){return console.error("Failed to get metadata from cache:",r),null}}async getAudioBuffer(e,n){if(Bt.decodedBuffers.has(n))return Bt.decodedBuffers.get(n);if(n.startsWith("data:")){const a=n.split(",")[1],l=Uint8Array.from(atob(a),u=>u.charCodeAt(0)).buffer,c=await Bt.decodeAudioData(e,l);return Bt.decodedBuffers.set(n,c),c}const r=await Bt.openCache();let i=Bt.pendingRequests.get(n);if(i)return i;const o=await Bt.getMetadataFromCache(n,r);let s=!o;if(o&&(o.etag||o.lastModified?s=!1:o.timestamp?s=Date.now()-o.timestamp>Bt.cacheExpirationTime:s=!0),s)return i=Bt.fetchAndCacheBuffer(n,r,o==null?void 0:o.etag,o==null?void 0:o.lastModified).then(a=>Bt.decodeAudioData(e,a)).then(a=>(Bt.decodedBuffers.set(n,a),a)).finally(()=>{Bt.pendingRequests.delete(n)}),Bt.pendingRequests.set(n,i),i;{const a=await Bt.getBufferFromCache(n,r);if(a){const l=await Bt.decodeAudioData(e,a);return Bt.decodedBuffers.set(n,l),l}}throw new Error("Failed to retrieve audio buffer")}clearMemoryCache(){Bt.decodedBuffers=new KS(JS),Bt.pendingRequests.clear()}};L(Bt,"pendingRequests",new Map),L(Bt,"decodedBuffers",new KS(JS)),L(Bt,"cacheExpirationTime",24*60*60*1e3);let E0=Bt;class YS{constructor(e=[]){L(this,"_position",[0,0,0]);L(this,"loopCount",0);L(this,"playIndex",0);this.sounds=e}preplayRandom(){if(this.sounds.length===0)return;const e=this.randomSound().preplay();return e.length>0?e[0]:void 0}playRandom(){const e=this.preplayRandom();return e&&e.play(),e}preplayOrdered(e=!0){if(this.sounds.length===0)return;const n=this.sounds[this.playIndex].preplay();if(n.length!==0)return this.playIndex=(this.playIndex+1)%this.sounds.length,!e&&this.playIndex===0&&(this.playIndex=this.sounds.length),n[0]}playOrdered(e=!0){const n=this.preplayOrdered(e);return n&&n.play(),n}get duration(){return this.sounds.map(e=>e.duration).reduce((e,n)=>Math.max(e,n),0)}seek(e){this.sounds.forEach(n=>n.seek&&n.seek(e))}addSound(e){this.sounds.push(e)}randomSound(){if(this.sounds.length===0)throw new Error("Cannot get a random sound from an empty group");const e=Math.floor(Math.random()*this.sounds.length);return this.sounds[e]}preplay(){return this.sounds.map(e=>e.preplay()).flat()}play(){const e=[];return this.preplay().forEach(n=>{n.play(),e.push(n)}),e}get isPlaying(){return this.sounds.some(e=>e.isPlaying)}stop(){this.sounds.forEach(e=>e.stop())}pause(){this.sounds.forEach(e=>e.pause())}loop(e){return e===void 0?this.loopCount:(this.loopCount=e,this.sounds.forEach(n=>n.loop(e)),this.loopCount)}addFilter(e){this.sounds.forEach(n=>n.addFilter(e))}removeFilter(e){this.sounds.forEach(n=>n.removeFilter(e))}set position(e){this._position=e,this.sounds.forEach(n=>n.position=this._position)}get position(){return this._position}get volume(){return this.sounds.map(e=>e.volume).reduce((e,n)=>e+n,0)/this.sounds.length}set volume(e){this.sounds.forEach(n=>n.volume=e)}get playbackRate(){return this.sounds.length===0?1:this.sounds[0].playbackRate}set playbackRate(e){this.sounds.forEach(n=>n.playbackRate=e)}}let Jc=class{constructor(){L(this,"_filters",[])}addFilter(e){this._filters.push(e)}removeFilter(e){this._filters=this._filters.filter(n=>n.frequency.value!==e.frequency.value&&n.type!==e.type&&n.Q.value!==e.Q.value&&n.gain.value!==e.gain.value)}applyFilters(e){return this._filters.reduce((n,r)=>(n.connect(r),r),e),this._filters.length>0?this._filters[this._filters.length-1]:e}get filters(){return this._filters}addFilters(e){e.forEach(n=>this.addFilter(n))}removeFilters(e){e.forEach(n=>this.removeFilter(n))}},BV=class extends Jc{constructor(n,r,i,o=0){super();L(this,"context");L(this,"source");L(this,"gainNode");L(this,"panner");this.source=n,this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner).connect(this.gainNode),this.refreshFilters()}get duration(){return 0}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return[this]}get isPlaying(){return!!this.source}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.stop())}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!1)}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!0)}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,o]=n;this.panner.positionX.value=r,this.panner.positionY.value=i,this.panner.positionZ.value=o}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.source||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.source;this.source.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}get playbackRate(){return 1}set playbackRate(n){}};class FV extends Jc{constructor(n){super();L(this,"context");L(this,"_position",[0,0,0]);L(this,"loopCount",0);L(this,"prevVolume",1);L(this,"microphoneGainNode");L(this,"streamPlayback");L(this,"stream");L(this,"streamSource");this.context=n,this.microphoneGainNode=this.context.createGain()}play(){return this.stream||navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{this.stream=n,this.streamSource=this.context.createMediaStreamSource(this.stream),this.streamPlayback=new BV(this.streamSource,this.microphoneGainNode,this.context),this.streamPlayback.play()}).catch(n=>{console.error("Error initializing microphone stream:",n)}),this.streamPlayback?[this.streamPlayback]:[]}get duration(){return 0}seek(n){}get isPlaying(){return!!this.streamPlayback}stop(){this.streamPlayback&&(this.streamPlayback.stop(),this.streamPlayback=void 0)}pause(){this.streamPlayback&&this.streamPlayback.pause()}resume(){this.streamPlayback&&this.streamPlayback.resume()}addFilter(n){this.streamPlayback&&this.streamPlayback.addFilter(n)}removeFilter(n){this.streamPlayback&&this.streamPlayback.removeFilter(n)}get volume(){return this.streamPlayback?this.streamPlayback.volume:0}set volume(n){this.streamPlayback&&(this.streamPlayback.volume=n)}get position(){return[0,0,0]}set position(n){}loop(n){return 0}get playbackRate(){return 1}set playbackRate(n){}}function cR(t){class e extends t{constructor(){super(...arguments);L(this,"playbacks",[]);L(this,"_position",[0,0,0]);L(this,"_stereoPan",0);L(this,"_threeDOptions",{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",panningModel:"HRTF",refDistance:1,rolloffFactor:1,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0});L(this,"_volume",1)}play(){const i=this.preplay();return i.forEach(o=>o.play()),i}stop(){this.playbacks.forEach(i=>i.stop()),this.playbacks=[]}pause(){this.playbacks.forEach(i=>i.pause())}addFilter(i){super.addFilter(i),this.playbacks.forEach(o=>o.addFilter(i))}removeFilter(i){super.removeFilter(i),this.playbacks.forEach(o=>o.removeFilter(i))}get isPlaying(){return this.playbacks.some(i=>i.isPlaying)}get position(){return[this._threeDOptions.positionX,this._threeDOptions.positionY,this._threeDOptions.positionZ]}set position(i){this._threeDOptions.positionX=i[0],this._threeDOptions.positionY=i[1],this._threeDOptions.positionZ=i[2],this.playbacks.forEach(o=>o.position=i)}get threeDOptions(){return this._threeDOptions}set threeDOptions(i){this._threeDOptions={...this._threeDOptions,...i},this.playbacks.forEach(o=>o.threeDOptions=this._threeDOptions)}get stereoPan(){return this._stereoPan}set stereoPan(i){this._stereoPan=i,this.playbacks.forEach(o=>o.stereoPan=i)}get volume(){return this._volume}set volume(i){this._volume=i,this.playbacks.forEach(o=>o.volume=i)}}return e}function uR(t){class e extends t{constructor(){super(...arguments);L(this,"panner");L(this,"_panType","stereo")}get panType(){return this._panType}setPanType(i,o){this._panType===i&&this.panner||(this.panner&&this.panner.disconnect(),this._panType=i,i==="stereo"?this.panner=o.createStereoPanner():this.panner=o.createPanner())}setPannerNode(i){this.panner=i}get stereoPan(){return this.panType==="stereo"?this.panner.pan.value:null}set stereoPan(i){if(this.panType!=="stereo")throw new Error("Stereo panning is not available when using HRTF.");if(!this.panner)throw new Error("Cannot set stereo pan of a sound that has been cleaned up");i=QS(i,-1,1),this.panner.pan.setValueAtTime(QS(i,-1,1),this.panner.context.currentTime)}get threeDOptions(){if(!this.panner)throw new Error("Cannot get 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get 3D options of a sound that is not using HRTF");const i=this.panner;return{coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,channelCount:this.panner.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,panningModel:i.panningModel,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,positionX:i.positionX.value,positionY:i.positionY.value,positionZ:i.positionZ.value,orientationX:i.orientationX.value,orientationY:i.orientationY.value,orientationZ:i.orientationZ.value}}set threeDOptions(i){if(!this.panner)throw new Error("Cannot set 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot set 3D options of a sound that is not using HRTF");const o=this.panner;o.coneInnerAngle=i.coneInnerAngle!==void 0?i.coneInnerAngle:o.coneInnerAngle,o.coneOuterAngle=i.coneOuterAngle!==void 0?i.coneOuterAngle:o.coneOuterAngle,o.coneOuterGain=i.coneOuterGain!==void 0?i.coneOuterGain:o.coneOuterGain,o.distanceModel=i.distanceModel||o.distanceModel,o.maxDistance=i.maxDistance!==void 0?i.maxDistance:o.maxDistance,o.channelCount=i.channelCount!==void 0?i.channelCount:o.channelCount,o.channelCountMode=i.channelCountMode||o.channelCountMode,o.channelInterpretation=i.channelInterpretation||o.channelInterpretation,o.panningModel=i.panningModel||o.panningModel,o.refDistance=i.refDistance!==void 0?i.refDistance:o.refDistance,o.rolloffFactor=i.rolloffFactor!==void 0?i.rolloffFactor:o.rolloffFactor,o.positionX.value=i.positionX!==void 0?i.positionX:o.positionX.value,o.positionY.value=i.positionY!==void 0?i.positionY:o.positionY.value,o.positionZ.value=i.positionZ!==void 0?i.positionZ:o.positionZ.value,o.orientationX.value=i.orientationX!==void 0?i.orientationX:o.orientationX.value,o.orientationY.value=i.orientationY!==void 0?i.orientationY:o.orientationY.value,o.orientationZ.value=i.orientationZ!==void 0?i.orientationZ:o.orientationZ.value}set position(i){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot move a sound that is not using HRTF");const[o,s,a]=i,l=this.panner;l.positionX.value=o,l.positionY.value=s,l.positionZ.value=a}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get position of a sound that is not using HRTF");const i=this.panner;return[i.positionX.value,i.positionY.value,i.positionZ.value]}}return e}function QS(t,e,n){return Math.min(Math.max(t,e),n)}function dR(t){class e extends t{constructor(){super(...arguments);L(this,"gainNode")}setGainNode(i){this.gainNode=i}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(i){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=i}}return e}class hR extends uR(dR(Jc)){constructor(){super(...arguments);L(this,"source");L(this,"_playing",!1);L(this,"origin")}get isPlaying(){return this.source?this._playing:!1}}class qC extends hR{constructor(n,r,i){super();L(this,"context");L(this,"loopCount",0);L(this,"currentLoop",0);L(this,"buffer");L(this,"_offset",0);L(this,"_startTime",0);L(this,"_state",0);L(this,"_playbackRate",1);L(this,"loopEnded",()=>{!this.source||this._state!==1||(this.currentLoop++,this.loopCount!=="infinite"&&this.currentLoop>this.loopCount?this.stop():(this.seek(0),this._state=1,"start"in this.source&&this.source.start?this.source.start(0,this._offset):"mediaElement"in this.source&&this.source.mediaElement&&this.source.mediaElement.play()))});this.origin=n,this.context=n.context,this.loopCount=n.loopCount,this.setPanType(n.panType,n.context),this.source=r,"buffer"in r&&r.buffer&&(this.buffer=r.buffer),this.setupSourceNode(r),this.source.connect(this.panner),this.setGainNode(i),this.panner.connect(this.gainNode),this.refreshFilters()}setupSourceNode(n){if("mediaElement"in n&&n.mediaElement)n.mediaElement.onended=this.loopEnded;else if("onended"in n)n.onended=this.loopEnded;else throw new Error("Unsupported source type")}get isPlaying(){return this._state===1}get duration(){if(!this.source)throw new Error("Cannot get duration of a sound that has been cleaned up");return"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.duration:this.buffer?this.buffer.duration||NaN:NaN}get playbackRate(){return this._playbackRate}set playbackRate(n){if(n<=0)throw new Error("Playback rate must be greater than 0");if(this._state===1){const r=(this.context.currentTime-this._startTime)*this._playbackRate;this._offset+=r,this._startTime=this.context.currentTime}this._playbackRate=n,this.source&&("playbackRate"in this.source&&(this.source.playbackRate.value=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.playbackRate=n))}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return this._state===1?[this]:(this._state===2?"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.play():(this.recreateSource(),"start"in this.source&&this.source.start&&this.source.start(0,this._offset)):"mediaElement"in this.source&&this.source.mediaElement?(this.source.mediaElement.currentTime=this._offset,this.source.mediaElement.play()):"start"in this.source&&this.source.start&&(this.recreateSource(),this.source.start(0,this._offset)),this._startTime=this.context.currentTime,this._state=1,[this])}pause(){if(!this.source||this._state!==1)return;const n=(this.context.currentTime-this._startTime)*this._playbackRate;this._offset+=n,"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.pause():this.recreateSource(),this._state=2}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this._state===3||this._state===0||("stop"in this.source&&this._state===1&&this.source.stop(),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.pause(),this.source.mediaElement.currentTime=0),this._offset=0,this._startTime=0,this._state=3)}seek(n){if(!this.source||!this.gainNode||!this.panner)throw new Error("Cannot seek a sound that has been cleaned up");if(!isFinite(n)||n<0)throw new Error("Invalid time value for seek");const r=this._state===1;r&&this.pause(),this._offset=n,"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.currentTime=n:this.recreateSource(),r&&this.play()}get currentTime(){if(this._state===1){const n=(this.context.currentTime-this._startTime)*this._playbackRate;return this._offset+n}else return this._offset}recreateSource(){if(!this.buffer||!this.panner||!this.context||!this.gainNode)throw new Error("Cannot recreate source of a sound that has been cleaned up");this.source&&this.source.disconnect(),this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.panner),this.source.onended=this.loopEnded,this.playbackRate=this._playbackRate,this.refreshFilters()}set sourceLoop(n){if(!this.source)throw new Error("Cannot set loop on a sound that has been cleaned up");"loop"in this.source&&(this.source.loop=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.loop=n)}cleanup(){this.source&&(this.source.disconnect(),this.source=void 0),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=void 0),this._filters.forEach(n=>{n&&n.disconnect()}),this._filters=[]}loop(n){if(!this.source)throw new Error("Cannot loop a sound that has been cleaned up");if(n!==void 0&&(this.loopCount=n==="infinite"?"infinite":Math.max(0,n),this.currentLoop=0),"mediaElement"in this.source&&this.source.mediaElement){const r=this.source.mediaElement;r.loop=this.loopCount==="infinite"}else if("loop"in this.source)this.source.loop=this.loopCount==="infinite",this.source.buffer&&(this.source.loopEnd=this.source.buffer.duration,this.source.loopStart=0);else throw new Error("Unsupported source type");return this.loopCount}addFilter(n){const r=this.context.createBiquadFilter();r.type=n.type,r.frequency.value=n.frequency.value,r.Q.value=n.Q.value,r.gain.value=n.gain.value,this._filters.push(r),this.refreshFilters()}removeFilter(n){const r=this._filters.indexOf(n);r!==-1&&this._filters.splice(r,1)[0].disconnect(),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}clone(n={}){if(!this.source||!this.gainNode||!this.context)throw new Error("Cannot clone a sound that has been cleaned up");const r=n.panType||this.panType,i=this.context.createGain();let o;if("buffer"in this.source&&this.source.buffer)o=this.context.createBufferSource(),o.buffer=this.source.buffer;else if("mediaElement"in this.source&&this.source.mediaElement)o=this.context.createMediaElementSource(this.source.mediaElement);else throw new Error("Unsupported source type");const s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=new qC(this.origin,o,i);return a.loopCount=s,a.currentLoop=this.currentLoop,a.setPanType(r,this.context),a.volume=this.volume,a.playbackRate=this._playbackRate,a._offset=this._offset,a._state=this._state,this._filters.forEach(l=>{const c=this.context.createBiquadFilter();c.type=l.type,c.frequency.value=l.frequency.value,c.Q.value=l.Q.value,c.gain.value=l.gain.value,a.addFilter(c)}),this._state===1&&a.play(),a}}let $h=class fR extends cR(Jc){constructor(n,r,i,o,s=Bd.Buffer,a="HRTF"){super();L(this,"buffer");L(this,"context");L(this,"loopCount",0);L(this,"_playbackRate",1);this.url=n,this.globalGainNode=o,this.soundType=s,this.panType=a,this.buffer=r,this.context=i}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan,o=n.threeDOptions||this.threeDOptions,s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=n.playbackRate||this.playbackRate,l=n.volume!==void 0?n.volume:this.volume,c=n.position!==void 0?n.position:this.position,u=n.filters&&n.filters.length?n.filters:this._filters,d=new fR(this.url,this.buffer,this.context,this.globalGainNode,this.soundType,r);return d.loop(s),d.playbackRate=a,d.volume=l,r==="HRTF"?(d.threeDOptions=o,d.position=c):d.stereoPan=i,d.addFilters(u),d}preplay(){let n;if(this.buffer)n=this.context.createBufferSource(),n.buffer=this.buffer;else{const o=new Audio;o.crossOrigin="anonymous",o.src=this.url,o.preload="auto",n=this.context.createMediaElementSource(o)}const r=this.context.createGain();r.connect(this.globalGainNode);const i=new qC(this,n,r);return i.setGainNode(r),i.volume=this.volume,i.playbackRate=this.playbackRate,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}seek(n){this.playbacks.forEach(r=>r.seek(n))}get duration(){var n;return this.playbacks.length>0?this.playbacks[0].duration:((n=this.buffer)==null?void 0:n.duration)||NaN}loop(n){return n===void 0?this.loopCount:(this.loopCount=n,this.playbacks.forEach(r=>r.loop(n)),this.loopCount)}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.playbacks.forEach(r=>r.playbackRate=n)}};function UV(t){class e extends hR{constructor(){super(...arguments);L(this,"_oscillatorOptions",{})}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(i){this._oscillatorOptions=i,this.source&&this.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type))}play(){if(!this.source)throw new Error("No source node found");return this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type),this.source.start(),this._playing=!0,[this]}stop(){this.source&&this.source.stop&&(this.source.stop(),this._playing=!1)}pause(){this.stop()}get frequency(){return this.source.frequency.value}set frequency(i){this.source.frequency.value=i,this.oscillatorOptions.frequency=i}get detune(){return this.source.detune.value}set detune(i){this.source.detune.value=i,this.oscillatorOptions.detune=i}get type(){return this.source.type}set type(i){this.source.type=i,this.oscillatorOptions.type=i}}return e}class VV extends UV(uR(dR(Jc))){constructor(n,r,i){super();L(this,"context");this.origin=n,this.source=r,this.context=n.context,this.setPanType(n.panType,n.context),this.source.connect(this.panner),this.setGainNode(i),this.panner.connect(this.gainNode),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}}class eI extends cR(Jc){constructor(n,r,i=Bd.Oscillator,o="HRTF",s={}){super();L(this,"_oscillatorOptions");L(this,"playbacks",[]);this.context=n,this.globalGainNode=r,this.soundType=i,this.panType=o,this.context=n,this._oscillatorOptions=s}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan??0,o=n.threeDOptions||this.threeDOptions,s=n.volume!==void 0?n.volume:this.volume,a=n.position&&n.position.length?n.position:this.position,l=n.filters&&n.filters.length?n.filters:this._filters,c=n.oscillatorOptions||this._oscillatorOptions,u=new eI(this.context,this.globalGainNode,this.soundType,r,c);return u._volume=s,u._position=a,u._stereoPan=i,u._threeDOptions=o,u.addFilters(l),u}preplay(){const n=this.context.createOscillator();this.oscillatorOptions.detune&&(n.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(n.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(n.type=this.oscillatorOptions.type);const r=this.context.createGain();r.connect(this.globalGainNode);const i=new VV(this,n,r);return i.volume=this.volume,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(n){this._oscillatorOptions=n,this.playbacks.forEach(r=>{r.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(r.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(r.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(r.source.type=this.oscillatorOptions.type))})}get frequency(){return this.oscillatorOptions.frequency||440}set frequency(n){this._oscillatorOptions.frequency=n,this.playbacks.forEach(r=>r.frequency=n)}get detune(){return this.oscillatorOptions.detune}set detune(n){this._oscillatorOptions.detune=n,this.playbacks.forEach(r=>r.detune=n)}get type(){return this.oscillatorOptions.type||"sine"}set type(n){this._oscillatorOptions.type=n,this.playbacks.forEach(r=>r.type=n)}}var Bd=(t=>(t.HTML="HTML",t.Streaming="Streaming",t.Buffer="Buffer",t.Oscillator="oscillator",t))(Bd||{});class GV{constructor(e,n){L(this,"context");L(this,"globalGainNode");L(this,"listener");L(this,"prevVolume",1);L(this,"finalizationRegistry");L(this,"cache");L(this,"createBiquadFilter",({type:e,frequency:n,gain:r,Q:i})=>{n===void 0&&(n=350);const o=this.context.createBiquadFilter();return o.type=e||"lowpass",o.frequency.value=n,o.gain.value=r||0,o.Q.value=i||1,o});this.context=e||new TV,this.listener=this.context.listener,this.globalGainNode=this.context.createGain(),this.globalGainNode.connect(this.context.destination),this.cache=n||new E0,this.finalizationRegistry=new FinalizationRegistry(r=>{r.cleanup()})}async loadWorklets(){this.context.audioWorklet?await this.createWorkletNode("phase-vocoder",LV):console.warn("AudioWorklet not supported")}async createWorkletNode(e,n){if(!this.context.audioWorklet)throw new Error("AudioWorklet not supported");try{return new XS(this.context,e)}catch(r){console.error(r),console.log("Loading worklet from url",n);try{await this.context.audioWorklet.addModule(n)}catch(i){throw console.error(i),new Error(`Could not load worklet from url ${n}`)}return new XS(this.context,e)}}clearMemoryCache(){this.cache.clearMemoryCache()}createOscillator(e,n="HRTF"){return new eI(this.context,this.globalGainNode,"oscillator",n,e)}async createSound(e,n="Buffer",r="HRTF"){if(typeof e=="object")return Promise.resolve(new $h("",e,this.context,this.globalGainNode,"Buffer",r));const i=e;if(n==="HTML"){const o=new Audio;return o.src=i,o.crossOrigin="anonymous",new $h(i,void 0,this.context,this.globalGainNode,"HTML",r)}return this.cache.getAudioBuffer(this.context,i).then(o=>new $h(i,o,this.context,this.globalGainNode,n,r))}async createGroup(e){const n=new YS;return e.forEach(r=>n.addSound(r)),n}async createGroupFromUrls(e,n="Buffer",r="HRTF"){const i=new YS;return(await Promise.all(e.map(o=>this.createSound(o,n,r)))).forEach(o=>i.addSound(o)),i}async createStream(e){return new $h(e,void 0,this.context,this.globalGainNode,"Streaming")}createPanner({coneInnerAngle:e,coneOuterAngle:n,coneOuterGain:r,distanceModel:i,maxDistance:o,channelCount:s,channelCountMode:a,channelInterpretation:l,panningModel:c,refDistance:u,rolloffFactor:d,positionX:h,positionY:f,positionZ:p,orientationX:g,orientationY:C,orientationZ:m}){const v=this.context.createPanner();return v.coneInnerAngle=e||360,v.coneOuterAngle=n||360,v.coneOuterGain=r||0,v.distanceModel=i||"inverse",v.maxDistance=o||1e4,v.channelCount=s||2,v.channelCountMode=a||"clamped-max",v.channelInterpretation=l||"speakers",v.panningModel=c||"HRTF",v.refDistance=u||1,v.rolloffFactor=d||1,v.positionX.value=h||0,v.positionY.value=f||0,v.positionZ.value=p||0,v.orientationX.value=g||0,v.orientationY.value=C||0,v.orientationZ.value=m||0,v}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}setGlobalVolume(e){this.globalGainNode.gain.value=e}get volume(){return this.globalGainNode.gain.value}set volume(e){if(this.muted){this.prevVolume=e;return}this.setGlobalVolume(e)}mute(){this.muted||(this.prevVolume=this.globalGainNode.gain.value,this.setGlobalVolume(0))}unmute(){this.muted&&this.setGlobalVolume(this.prevVolume)}get muted(){return this.globalGainNode.gain.value===0}set muted(e){e!==this.muted&&(e?this.mute():this.unmute())}getMicrophoneStream(){return new Promise((e,n)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{const i=new FV(this.context);i.play(),e(i)}).catch(r=>{n(r)})})}get listenerOrientation(){return{forward:[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value],up:[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}}set listenerOrientation(e){const{forward:n,up:r}=e,[i,o,s]=n,[a,l,c]=r;this.listener.forwardX.value=i,this.listener.forwardY.value=o,this.listener.forwardZ.value=s,this.listener.upX.value=a,this.listener.upY.value=l,this.listener.upZ.value=c}get listenerUpOrientation(){return[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}set listenerUpOrientation(e){const[n,r,i]=e;this.listener.upX.value=n,this.listener.upY.value=r,this.listener.upZ.value=i}get listenerForwardOrientation(){return[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value]}set listenerForwardOrientation(e){const[n,r,i]=e;this.listener.forwardX.value=n,this.listener.forwardY.value=r,this.listener.forwardZ.value=i}get listenerPosition(){return[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}set listenerPosition(e){const[n,r,i]=e,o=this.context.currentTime;this.listener.positionX.setValueAtTime(n,o),this.listener.positionY.setValueAtTime(r,o),this.listener.positionZ.setValueAtTime(i,o)}}const WV="https://mongoose.world:9080/?url=";class jV extends Ro{constructor(){super(...arguments);L(this,"packageName","Client.Media");L(this,"sounds",{});L(this,"defaultUrl","")}handleDefault(n){this.defaultUrl=n}async handleLoad(n){const r=(n.url||this.defaultUrl)+n.name,i=n.url+n.name;if(!this.sounds[i]){let s=await this.client.cacophony.createSound(r);s.key=i,this.sounds[i]=s}}mediaUrl(n){var i;let r=(n.url||this.defaultUrl)+n.name;return((i=n.type)==null?void 0:i.toLowerCase())==="music"&&(r=WV+encodeURIComponent(r)),r}async handlePlay(n){let r=this.mediaUrl(n);n.key=n.key||r;let i=this.sounds[n.key];const o=n.is3d?"HRTF":"stereo";if((!i||i.url!==r)&&(n.type==="music"?i=await this.client.cacophony.createSound(r,Bd.HTML,o):i=await this.client.cacophony.createSound(r,Bd.Buffer,o)),n.volume!==void 0&&(i.volume=n.volume/100),n.loops!==void 0){const s=n.loops===-1?1/0:n.loops-1;i.loop(s)}if(n.start&&i.seek(n.start/1e3),n.end&&setTimeout(()=>{delete this.sounds[i.key],i.stop()},n.end),n.is3d&&(i.threeDOptions={coneInnerAngle:360,coneOuterAngle:0,panningModel:"HRTF",distanceModel:"inverse"},i.position=[n.position[0],n.position[1],n.position[2]]),n.priority){for(let s in this.sounds){const a=this.sounds[s];a.priority&&a.priority<n.priority&&a.stop()}i.priority=n.priority}if(!i.isPlaying){const s=i.play()[0];n.fadein&&s.fadeIn(n.fadein),n.fadeout&&s.fadeOut(n.fadeout)}i.key=n.key,this.sounds[i.key]=i}handleStop(n){n.name&&this.soundsByName(n.name).forEach(r=>this.stopSound(r)),n.type&&this.soundsByType(n.type).forEach(r=>this.stopSound(r)),n.tag&&this.soundsByTag(n.tag).forEach(r=>this.stopSound(r)),n.key&&this.soundsByKey(n.key).forEach(r=>this.stopSound(r)),!n.name&&!n.type&&!n.tag&&!n.key&&(this.allSounds.forEach(r=>r.stop()),this.sounds={})}stopSound(n){delete this.sounds[n.key],n.stop()}handleListenerPosition(n){var r;(r=n.position)!=null&&r.length&&(this.client.cacophony.listenerPosition=n.position)}handleListenerOrientation(n){n.up&&n.up.length&&(this.client.cacophony.listenerUpOrientation=n.up),n.forward&&n.forward.length&&(this.client.cacophony.listenerForwardOrientation=n.forward)}soundsByName(n){return Object.values(this.sounds).filter(r=>r.url&&r.url[r.url.length-1].endsWith(n))}soundsByKey(n){return Object.values(this.sounds).filter(r=>r.key===n)}soundsByTag(n){return Object.values(this.sounds).filter(r=>r.tag===n)}soundsByType(n){return Object.values(this.sounds).filter(r=>r.mediaType===n)}get allSounds(){return Object.values(this.sounds)}stopAllSounds(){this.allSounds.forEach(n=>n.stop()),this.sounds={}}}class ZV extends Ro{constructor(){super(...arguments);L(this,"packageName","Client.Speech")}handleSpeak(n){const r=new SpeechSynthesisUtterance(n.text);r.rate=n.rate,r.pitch=n.pitch,r.volume=n.volume,speechSynthesis.speak(r)}}class zV extends Ro{constructor(){super(...arguments);L(this,"packageName","Comm.Channel");L(this,"channels",[])}handleList(n){this.channels=n}sendList(){this.sendData("List")}handleText(n){n.channel==="say_to_you"&&(document.hasFocus()||this.client.sendNotification(`Message from ${n.talker}`,`${n.text}`))}}class HV extends Ro{constructor(){super(...arguments);L(this,"packageName","Comm.LiveKit")}handleroom_token(n){this.client.worldData.liveKitTokens.push(n.token),this.client.emit("livekitToken",n.token)}handleroom_leave(n){this.client.worldData.liveKitTokens=this.client.worldData.liveKitTokens.filter(r=>r!==n.token),this.client.emit("livekitLeave",n.token)}}class $V extends Ro{constructor(){super(...arguments);L(this,"packageName","Core")}sendHello(){this.sendData("Hello",{client:"Mongoose Client",version:"0.1"})}}class XV extends Ro{constructor(){super(...arguments);L(this,"packageName","Core.Supports")}sendSet(){const n=Object.values(this.client.gmcpHandlers).map(r=>r.packageName+" "+r.packageVersion.toString());this.sendData("Set",n)}}function tI(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let El=tI();function pR(t){El=t}const sd={exec:()=>null};function gt(t,e=""){let n=typeof t=="string"?t:t.source;const r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(ir.caret,"$1"),n=n.replace(i,s),r},getRegex:()=>new RegExp(n,e)};return r}const ir={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},KV=/^(?:[ \t]*(?:\n|$))+/,JV=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,YV=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,ph=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,QV=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,gR=/(?:[*+-]|\d{1,9}[.)])/,mR=gt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,gR).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),nI=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,qV=/^[^\n]+/,rI=/(?!\s*\])(?:\\.|[^\[\]\\])+/,eG=gt(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",rI).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),tG=gt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,gR).getRegex(),kg="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",iI=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,nG=gt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",iI).replace("tag",kg).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),vR=gt(nI).replace("hr",ph).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kg).getRegex(),rG=gt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",vR).getRegex(),oI={blockquote:rG,code:JV,def:eG,fences:YV,heading:QV,hr:ph,html:nG,lheading:mR,list:tG,newline:KV,paragraph:vR,table:sd,text:qV},qS=gt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",ph).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kg).getRegex(),iG={...oI,table:qS,paragraph:gt(nI).replace("hr",ph).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",qS).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",kg).getRegex()},oG={...oI,html:gt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",iI).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:sd,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:gt(nI).replace("hr",ph).replace("heading",` *#{1,6} *[^
]`).replace("lheading",mR).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},yR=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,sG=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,CR=/^( {2,}|\\)\n(?!\s*$)/,aG=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Eg=/[\p{P}\p{S}]/u,sI=/[\s\p{P}\p{S}]/u,IR=/[^\s\p{P}\p{S}]/u,lG=gt(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,sI).getRegex(),cG=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,uG=gt(/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,"u").replace(/punct/g,Eg).getRegex(),dG=gt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)","gu").replace(/notPunctSpace/g,IR).replace(/punctSpace/g,sI).replace(/punct/g,Eg).getRegex(),hG=gt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,IR).replace(/punctSpace/g,sI).replace(/punct/g,Eg).getRegex(),fG=gt(/\\(punct)/,"gu").replace(/punct/g,Eg).getRegex(),pG=gt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),gG=gt(iI).replace("(?:-->|$)","-->").getRegex(),mG=gt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",gG).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),_p=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,vG=gt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",_p).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),bR=gt(/^!?\[(label)\]\[(ref)\]/).replace("label",_p).replace("ref",rI).getRegex(),wR=gt(/^!?\[(ref)\](?:\[\])?/).replace("ref",rI).getRegex(),yG=gt("reflink|nolink(?!\\()","g").replace("reflink",bR).replace("nolink",wR).getRegex(),aI={_backpedal:sd,anyPunctuation:fG,autolink:pG,blockSkip:cG,br:CR,code:sG,del:sd,emStrongLDelim:uG,emStrongRDelimAst:dG,emStrongRDelimUnd:hG,escape:yR,link:vG,nolink:wR,punctuation:lG,reflink:bR,reflinkSearch:yG,tag:mG,text:aG,url:sd},CG={...aI,link:gt(/^!?\[(label)\]\((.*?)\)/).replace("label",_p).getRegex(),reflink:gt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",_p).getRegex()},T0={...aI,escape:gt(yR).replace("])","~|])").getRegex(),url:gt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},IG={...T0,br:gt(CR).replace("{2,}","*").getRegex(),text:gt(T0.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Xh={normal:oI,gfm:iG,pedantic:oG},ku={normal:aI,gfm:T0,breaks:IG,pedantic:CG},bG={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},eA=t=>bG[t];function eo(t,e){if(e){if(ir.escapeTest.test(t))return t.replace(ir.escapeReplace,eA)}else if(ir.escapeTestNoEncode.test(t))return t.replace(ir.escapeReplaceNoEncode,eA);return t}function tA(t){try{t=encodeURI(t).replace(ir.percentDecode,"%")}catch{return null}return t}function nA(t,e){var o;const n=t.replace(ir.findPipe,(s,a,l)=>{let c=!1,u=a;for(;--u>=0&&l[u]==="\\";)c=!c;return c?"|":" |"}),r=n.split(ir.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(ir.slashPipe,"|");return r}function Eu(t,e,n){const r=t.length;if(r===0)return"";let i=0;for(;i<r;){const o=t.charAt(r-i-1);if(o===e&&!n)i++;else if(o!==e&&n)i++;else break}return t.slice(0,r-i)}function wG(t,e){if(t.indexOf(e[1])===-1)return-1;let n=0;for(let r=0;r<t.length;r++)if(t[r]==="\\")r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}function rA(t,e,n,r,i){const o=e.href,s=e.title||null,a=t[1].replace(i.other.outputLinkReplace,"$1");if(t[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:n,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:n,href:o,title:s,text:a}}function SG(t,e,n){const r=t.match(n.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(o=>{const s=o.match(n.other.beginningSpace);if(s===null)return o;const[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}class Op{constructor(e){L(this,"options");L(this,"rules");L(this,"lexer");this.options=e||El}space(e){const n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){const n=this.rules.block.code.exec(e);if(n){const r=n[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Eu(r,`
`)}}}fences(e){const n=this.rules.block.fences.exec(e);if(n){const r=n[0],i=SG(r,n[3]||"",this.rules);return{type:"code",raw:r,lang:n[2]?n[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):n[2],text:i}}}heading(e){const n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(this.rules.other.endingHash.test(r)){const i=Eu(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:Eu(n[0],`
`)}}blockquote(e){const n=this.rules.block.blockquote.exec(e);if(n){let r=Eu(n[0],`
`).split(`
`),i="",o="";const s=[];for(;r.length>0;){let a=!1;const l=[];let c;for(c=0;c<r.length;c++)if(this.rules.other.blockquoteStart.test(r[c]))l.push(r[c]),a=!0;else if(!a)l.push(r[c]);else break;r=r.slice(c);const u=l.join(`
`),d=u.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${u}`:u,o=o?`${o}
${d}`:d;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,s,!0),this.lexer.state.top=h,r.length===0)break;const f=s.at(-1);if((f==null?void 0:f.type)==="code")break;if((f==null?void 0:f.type)==="blockquote"){const p=f,g=p.raw+`
`+r.join(`
`),C=this.blockquote(g);s[s.length-1]=C,i=i.substring(0,i.length-p.raw.length)+C.raw,o=o.substring(0,o.length-p.text.length)+C.text;break}else if((f==null?void 0:f.type)==="list"){const p=f,g=p.raw+`
`+r.join(`
`),C=this.list(g);s[s.length-1]=C,i=i.substring(0,i.length-f.raw.length)+C.raw,o=o.substring(0,o.length-p.raw.length)+C.raw,r=g.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r=n[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let c=!1,u="",d="";if(!(n=s.exec(e))||this.rules.block.hr.test(e))break;u=n[0],e=e.substring(u.length);let h=n[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,v=>" ".repeat(3*v.length)),f=e.split(`
`,1)[0],p=!h.trim(),g=0;if(this.options.pedantic?(g=2,d=h.trimStart()):p?g=n[1].length+1:(g=n[2].search(this.rules.other.nonSpaceChar),g=g>4?1:g,d=h.slice(g),g+=n[1].length),p&&this.rules.other.blankLine.test(f)&&(u+=f+`
`,e=e.substring(f.length+1),c=!0),!c){const v=this.rules.other.nextBulletRegex(g),b=this.rules.other.hrRegex(g),k=this.rules.other.fencesBeginRegex(g),S=this.rules.other.headingBeginRegex(g),A=this.rules.other.htmlBeginRegex(g);for(;e;){const R=e.split(`
`,1)[0];let T;if(f=R,this.options.pedantic?(f=f.replace(this.rules.other.listReplaceNesting,"  "),T=f):T=f.replace(this.rules.other.tabCharGlobal,"    "),k.test(f)||S.test(f)||A.test(f)||v.test(f)||b.test(f))break;if(T.search(this.rules.other.nonSpaceChar)>=g||!f.trim())d+=`
`+T.slice(g);else{if(p||h.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||k.test(h)||S.test(h)||b.test(h))break;d+=`
`+f}!p&&!f.trim()&&(p=!0),u+=R+`
`,e=e.substring(R.length+1),h=T.slice(g)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(u)&&(a=!0));let C=null,m;this.options.gfm&&(C=this.rules.other.listIsTask.exec(d),C&&(m=C[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:u,task:!!C,checked:m,loose:!1,text:d,tokens:[]}),o.raw+=u}const l=o.items.at(-1);l&&(l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd()),o.raw=o.raw.trimEnd();for(let c=0;c<o.items.length;c++)if(this.lexer.state.top=!1,o.items[c].tokens=this.lexer.blockTokens(o.items[c].text,[]),!o.loose){const u=o.items[c].tokens.filter(h=>h.type==="space"),d=u.length>0&&u.some(h=>this.rules.other.anyLine.test(h.raw));o.loose=d}if(o.loose)for(let c=0;c<o.items.length;c++)o.items[c].loose=!0;return o}}html(e){const n=this.rules.block.html.exec(e);if(n)return{type:"html",block:!0,raw:n[0],pre:n[1]==="pre"||n[1]==="script"||n[1]==="style",text:n[0]}}def(e){const n=this.rules.block.def.exec(e);if(n){const r=n[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=n[2]?n[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=n[3]?n[3].substring(1,n[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):n[3];return{type:"def",tag:r,raw:n[0],href:i,title:o}}}table(e){var a;const n=this.rules.block.table.exec(e);if(!n||!this.rules.other.tableDelimiter.test(n[2]))return;const r=nA(n[1]),i=n[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=n[3])!=null&&a.trim()?n[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:n[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const l of i)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<r.length;l++)s.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:s.align[l]});for(const l of o)s.rows.push(nA(l,s.header.length).map((c,u)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:s.align[u]})));return s}}lheading(e){const n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){const n=this.rules.block.paragraph.exec(e);if(n){const r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){const n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:n[1]}}tag(e){const n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&this.rules.other.startATag.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:n[0]}}link(e){const n=this.rules.inline.link.exec(e);if(n){const r=n[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const s=Eu(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=wG(n[2],"()");if(s>-1){const l=(n[0].indexOf("!")===0?5:4)+n[1].length+s;n[2]=n[2].substring(0,s),n[0]=n[0].substring(0,l).trim(),n[3]=""}}let i=n[2],o="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=n[3]?n[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),rA(n,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},n[0],this.lexer,this.rules)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=n[i.toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return rA(r,o,r[0],this.lexer,this.rules)}}emStrong(e,n,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let a,l,c=s,u=0;const d=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(d.lastIndex=0,n=n.slice(-1*e.length+s);(i=d.exec(n))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){c+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const h=[...i[0]][0].length,f=e.slice(0,s+i.index+h+l);if(Math.min(s,l)%2){const g=f.slice(1,-1);return{type:"em",raw:f,text:g,tokens:this.lexer.inlineTokens(g)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:n[0],text:r}}}br(e){const n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){const n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e){const n=this.rules.inline.autolink.exec(e);if(n){let r,i;return n[2]==="@"?(r=n[1],i="mailto:"+r):(r=n[1],i=r),{type:"link",raw:n[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let n;if(n=this.rules.inline.url.exec(e)){let i,o;if(n[2]==="@")i=n[0],o="mailto:"+i;else{let s;do s=n[0],n[0]=((r=this.rules.inline._backpedal.exec(n[0]))==null?void 0:r[0])??"";while(s!==n[0]);i=n[0],n[1]==="www."?o="http://"+n[0]:o=n[0]}return{type:"link",raw:n[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const n=this.rules.inline.text.exec(e);if(n){const r=this.lexer.state.inRawBlock;return{type:"text",raw:n[0],text:n[0],escaped:r}}}}class oi{constructor(e){L(this,"tokens");L(this,"options");L(this,"state");L(this,"tokenizer");L(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||El,this.options.tokenizer=this.options.tokenizer||new Op,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const n={other:ir,block:Xh.normal,inline:ku.normal};this.options.pedantic?(n.block=Xh.pedantic,n.inline=ku.pedantic):this.options.gfm&&(n.block=Xh.gfm,this.options.breaks?n.inline=ku.breaks:n.inline=ku.gfm),this.tokenizer.rules=n}static get rules(){return{block:Xh,inline:ku}}static lex(e,n){return new oi(n).lex(e)}static lexInline(e,n){return new oi(n).inlineTokens(e)}lex(e){e=e.replace(ir.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let n=0;n<this.inlineQueue.length;n++){const r=this.inlineQueue[n];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,n=[],r=!1){var i,o,s;for(this.options.pedantic&&(e=e.replace(ir.tabCharGlobal,"    ").replace(ir.spaceLine,""));e;){let a;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(c=>(a=c.call({lexer:this},e,n))?(e=e.substring(a.raw.length),n.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const c=n.at(-1);a.raw.length===1&&c!==void 0?c.raw+=`
`:n.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="paragraph"||(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.raw,this.inlineQueue.at(-1).src=c.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),n.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),n.push(a);continue}let l=e;if((s=this.options.extensions)!=null&&s.startBlock){let c=1/0;const u=e.slice(1);let d;this.options.extensions.startBlock.forEach(h=>{d=h.call({lexer:this},u),typeof d=="number"&&d>=0&&(c=Math.min(c,d))}),c<1/0&&c>=0&&(l=e.substring(0,c+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const c=n.at(-1);r&&(c==null?void 0:c.type)==="paragraph"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const c=n.at(-1);(c==null?void 0:c.type)==="text"?(c.raw+=`
`+a.raw,c.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=c.text):n.push(a);continue}if(e){const c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}else throw new Error(c)}}return this.state.top=!0,n}inline(e,n=[]){return this.inlineQueue.push({src:e,tokens:n}),n}inlineTokens(e,n=[]){var a,l,c;let r=e,i=null;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)u.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);let o=!1,s="";for(;e;){o||(s=""),o=!1;let u;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(h=>(u=h.call({lexer:this},e,n))?(e=e.substring(u.raw.length),n.push(u),!0):!1))continue;if(u=this.tokenizer.escape(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.tag(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.link(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(u.raw.length);const h=n.at(-1);u.type==="text"&&(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(u=this.tokenizer.emStrong(e,r,s)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.codespan(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.br(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.del(e)){e=e.substring(u.raw.length),n.push(u);continue}if(u=this.tokenizer.autolink(e)){e=e.substring(u.raw.length),n.push(u);continue}if(!this.state.inLink&&(u=this.tokenizer.url(e))){e=e.substring(u.raw.length),n.push(u);continue}let d=e;if((c=this.options.extensions)!=null&&c.startInline){let h=1/0;const f=e.slice(1);let p;this.options.extensions.startInline.forEach(g=>{p=g.call({lexer:this},f),typeof p=="number"&&p>=0&&(h=Math.min(h,p))}),h<1/0&&h>=0&&(d=e.substring(0,h+1))}if(u=this.tokenizer.inlineText(d)){e=e.substring(u.raw.length),u.raw.slice(-1)!=="_"&&(s=u.raw.slice(-1)),o=!0;const h=n.at(-1);(h==null?void 0:h.type)==="text"?(h.raw+=u.raw,h.text+=u.text):n.push(u);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return n}}class Mp{constructor(e){L(this,"options");L(this,"parser");this.options=e||El}space(e){return""}code({text:e,lang:n,escaped:r}){var s;const i=(s=(n||"").match(ir.notSpaceStart))==null?void 0:s[0],o=e.replace(ir.endingNewline,"")+`
`;return i?'<pre><code class="language-'+eo(i)+'">'+(r?o:eo(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:eo(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:n}){return`<h${n}>${this.parser.parseInline(e)}</h${n}>
`}hr(e){return`<hr>
`}list(e){const n=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const l=e.items[a];i+=this.listitem(l)}const o=n?"ol":"ul",s=n&&r!==1?' start="'+r+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(e){var r;let n="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+eo(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):n+=i+" "}return n+=this.parser.parse(e.tokens,!!e.loose),`<li>${n}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let n="",r="";for(let o=0;o<e.header.length;o++)r+=this.tablecell(e.header[o]);n+=this.tablerow({text:r});let i="";for(let o=0;o<e.rows.length;o++){const s=e.rows[o];r="";for(let a=0;a<s.length;a++)r+=this.tablecell(s[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+n+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const n=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+n+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${eo(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:n,tokens:r}){const i=this.parser.parseInline(r),o=tA(e);if(o===null)return i;e=o;let s='<a href="'+e+'"';return n&&(s+=' title="'+eo(n)+'"'),s+=">"+i+"</a>",s}image({href:e,title:n,text:r}){const i=tA(e);if(i===null)return eo(r);e=i;let o=`<img src="${e}" alt="${r}"`;return n&&(o+=` title="${eo(n)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:eo(e.text)}}class lI{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class si{constructor(e){L(this,"options");L(this,"renderer");L(this,"textRenderer");this.options=e||El,this.options.renderer=this.options.renderer||new Mp,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new lI}static parse(e,n){return new si(n).parse(e)}static parseInline(e,n){return new si(n).parseInline(e)}parse(e,n=!0){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const c=a,u=this.options.extensions.renderers[c.type].call({parser:this},c);if(u!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(c.type)){r+=u||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let c=l,u=this.renderer.text(c);for(;s+1<e.length&&e[s+1].type==="text";)c=e[++s],u+=`
`+this.renderer.text(c);n?r+=this.renderer.paragraph({type:"paragraph",raw:u,text:u,tokens:[{type:"text",raw:u,text:u,escaped:!0}]}):r+=u;continue}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}parseInline(e,n=this.renderer){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=c||"";continue}}const l=a;switch(l.type){case"escape":{r+=n.text(l);break}case"html":{r+=n.html(l);break}case"link":{r+=n.link(l);break}case"image":{r+=n.image(l);break}case"strong":{r+=n.strong(l);break}case"em":{r+=n.em(l);break}case"codespan":{r+=n.codespan(l);break}case"br":{r+=n.br(l);break}case"del":{r+=n.del(l);break}case"text":{r+=n.text(l);break}default:{const c='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(c),"";throw new Error(c)}}}return r}}class ad{constructor(e){L(this,"options");L(this,"block");this.options=e||El}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?oi.lex:oi.lexInline}provideParser(){return this.block?si.parse:si.parseInline}}L(ad,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class AG{constructor(...e){L(this,"defaults",tI());L(this,"options",this.setOptions);L(this,"parse",this.parseMarkdown(!0));L(this,"parseInline",this.parseMarkdown(!1));L(this,"Parser",si);L(this,"Renderer",Mp);L(this,"TextRenderer",lI);L(this,"Lexer",oi);L(this,"Tokenizer",Op);L(this,"Hooks",ad);this.use(...e)}walkTokens(e,n){var i,o;let r=[];for(const s of e)switch(r=r.concat(n.call(this,s)),s.type){case"table":{const a=s;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,n));for(const l of a.rows)for(const c of l)r=r.concat(this.walkTokens(c.tokens,n));break}case"list":{const a=s;r=r.concat(this.walkTokens(a.items,n));break}default:{const a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const c=a[l].flat(1/0);r=r.concat(this.walkTokens(c,n))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,n)))}}return r}use(...e){const n=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=n.renderers[o.name];s?n.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:n.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=n[o.level];s?s.unshift(o.tokenizer):n[o.level]=[o.tokenizer],o.start&&(o.level==="block"?n.startBlock?n.startBlock.push(o.start):n.startBlock=[o.start]:o.level==="inline"&&(n.startInline?n.startInline.push(o.start):n.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(n.childTokens[o.name]=o.childTokens)}),i.extensions=n),r.renderer){const o=this.defaults.renderer||new Mp(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,l=r.renderer[a],c=o[a];o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new Op(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,l=r.tokenizer[a],c=o[a];o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new ad;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,l=r.hooks[a],c=o[a];ad.passThroughHooks.has(s)?o[a]=u=>{if(this.defaults.async)return Promise.resolve(l.call(o,u)).then(h=>c.call(o,h));const d=l.call(o,u);return c.call(o,d)}:o[a]=(...u)=>{let d=l.apply(o,u);return d===!1&&(d=c.apply(o,u)),d}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,n){return oi.lex(e,n??this.defaults)}parser(e,n){return si.parse(e,n??this.defaults)}parseMarkdown(e){return(r,i)=>{const o={...i},s={...this.defaults,...o},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const l=s.hooks?s.hooks.provideLexer():e?oi.lex:oi.lexInline,c=s.hooks?s.hooks.provideParser():e?si.parse:si.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(u=>l(u,s)).then(u=>s.hooks?s.hooks.processAllTokens(u):u).then(u=>s.walkTokens?Promise.all(this.walkTokens(u,s.walkTokens)).then(()=>u):u).then(u=>c(u,s)).then(u=>s.hooks?s.hooks.postprocess(u):u).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let u=l(r,s);s.hooks&&(u=s.hooks.processAllTokens(u)),s.walkTokens&&this.walkTokens(u,s.walkTokens);let d=c(u,s);return s.hooks&&(d=s.hooks.postprocess(d)),d}catch(u){return a(u)}}}onError(e,n){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+eo(r.message+"",!0)+"</pre>";return n?Promise.resolve(i):i}if(n)return Promise.reject(r);throw r}}}const fl=new AG;function ct(t,e){return fl.parse(t,e)}ct.options=ct.setOptions=function(t){return fl.setOptions(t),ct.defaults=fl.defaults,pR(ct.defaults),ct};ct.getDefaults=tI;ct.defaults=El;ct.use=function(...t){return fl.use(...t),ct.defaults=fl.defaults,pR(ct.defaults),ct};ct.walkTokens=function(t,e){return fl.walkTokens(t,e)};ct.parseInline=fl.parseInline;ct.Parser=si;ct.parser=si.parse;ct.Renderer=Mp;ct.TextRenderer=lI;ct.Lexer=oi;ct.lexer=oi.lex;ct.Tokenizer=Op;ct.Hooks=ad;ct.parse=ct;ct.options;ct.setOptions;ct.use;ct.walkTokens;ct.parseInline;si.parse;oi.lex;class kG extends Ro{constructor(n){super(n);L(this,"packageName","Client.Html")}handleAdd_html(n){this.client.emit("html",n.data.join(`
`))}handleAdd_markdown(n){const r=n.data.join(`
`),i=ct(r);this.client.emit("html",i)}}const Ll=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,SR=new Set,x0=typeof process=="object"&&process?process:{},AR=(t,e,n,r)=>{typeof x0.emitWarning=="function"?x0.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let Dp=globalThis.AbortController,iA=globalThis.AbortSignal;var xk;if(typeof Dp>"u"){iA=class{constructor(){L(this,"onabort");L(this,"_onabort",[]);L(this,"reason");L(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},Dp=class{constructor(){L(this,"signal",new iA);e()}abort(r){var i,o;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const s of this.signal._onabort)s(r);(o=(i=this.signal).onabort)==null||o.call(i,r)}}};let t=((xk=x0.env)==null?void 0:xk.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,AR("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const EG=t=>!SR.has(t),Zs=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),kR=t=>Zs(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Tf:null:null;class Tf extends Array{constructor(e){super(e),this.fill(0)}}var yc;const za=class za{constructor(e,n){L(this,"heap");L(this,"length");if(!N(za,yc))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=kR(e);if(!n)return[];Ne(za,yc,!0);const r=new za(e,n);return Ne(za,yc,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};yc=new WeakMap,et(za,yc,!1);let R0=za;var Rk,Pk,Ci,Or,Ii,bi,Cc,Ic,cn,wi,rn,xt,Be,Yn,Mr,jn,Cn,Si,In,Ai,ki,Dr,Ei,qs,Qn,he,N0,Qa,Wo,Jd,Lr,ER,qa,bc,Yd,zs,Hs,_0,xf,Rf,Tt,O0,zu,$s,M0;const KI=class KI{constructor(e){et(this,he);et(this,Ci);et(this,Or);et(this,Ii);et(this,bi);et(this,Cc);et(this,Ic);L(this,"ttl");L(this,"ttlResolution");L(this,"ttlAutopurge");L(this,"updateAgeOnGet");L(this,"updateAgeOnHas");L(this,"allowStale");L(this,"noDisposeOnSet");L(this,"noUpdateTTL");L(this,"maxEntrySize");L(this,"sizeCalculation");L(this,"noDeleteOnFetchRejection");L(this,"noDeleteOnStaleGet");L(this,"allowStaleOnFetchAbort");L(this,"allowStaleOnFetchRejection");L(this,"ignoreFetchAbort");et(this,cn);et(this,wi);et(this,rn);et(this,xt);et(this,Be);et(this,Yn);et(this,Mr);et(this,jn);et(this,Cn);et(this,Si);et(this,In);et(this,Ai);et(this,ki);et(this,Dr);et(this,Ei);et(this,qs);et(this,Qn);et(this,Qa,()=>{});et(this,Wo,()=>{});et(this,Jd,()=>{});et(this,Lr,()=>!1);et(this,qa,e=>{});et(this,bc,(e,n,r)=>{});et(this,Yd,(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});L(this,Rk,"LRUCache");const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:l,dispose:c,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:h,maxSize:f=0,maxEntrySize:p=0,sizeCalculation:g,fetchMethod:C,memoMethod:m,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:k,allowStaleOnFetchAbort:S,ignoreFetchAbort:A}=e;if(n!==0&&!Zs(n))throw new TypeError("max option must be a nonnegative integer");const R=n?kR(n):Array;if(!R)throw new Error("invalid max value: "+n);if(Ne(this,Ci,n),Ne(this,Or,f),this.maxEntrySize=p||N(this,Or),this.sizeCalculation=g,this.sizeCalculation){if(!N(this,Or)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(m!==void 0&&typeof m!="function")throw new TypeError("memoMethod must be a function if defined");if(Ne(this,Ic,m),C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ne(this,Cc,C),Ne(this,qs,!!C),Ne(this,rn,new Map),Ne(this,xt,new Array(n).fill(void 0)),Ne(this,Be,new Array(n).fill(void 0)),Ne(this,Yn,new R(n)),Ne(this,Mr,new R(n)),Ne(this,jn,0),Ne(this,Cn,0),Ne(this,Si,R0.create(n)),Ne(this,cn,0),Ne(this,wi,0),typeof c=="function"&&Ne(this,Ii,c),typeof u=="function"?(Ne(this,bi,u),Ne(this,In,[])):(Ne(this,bi,void 0),Ne(this,In,void 0)),Ne(this,Ei,!!N(this,Ii)),Ne(this,Qn,!!N(this,bi)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!k,this.allowStaleOnFetchAbort=!!S,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(N(this,Or)!==0&&!Zs(N(this,Or)))throw new TypeError("maxSize must be a positive integer if specified");if(!Zs(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");Ae(this,he,ER).call(this)}if(this.allowStale=!!l,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=Zs(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!Zs(this.ttl))throw new TypeError("ttl must be a positive integer if specified");Ae(this,he,N0).call(this)}if(N(this,Ci)===0&&this.ttl===0&&N(this,Or)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!N(this,Ci)&&!N(this,Or)){const T="LRU_CACHE_UNBOUNDED";EG(T)&&(SR.add(T),AR("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",T,KI))}}static unsafeExposeInternals(e){return{starts:N(e,ki),ttls:N(e,Dr),sizes:N(e,Ai),keyMap:N(e,rn),keyList:N(e,xt),valList:N(e,Be),next:N(e,Yn),prev:N(e,Mr),get head(){return N(e,jn)},get tail(){return N(e,Cn)},free:N(e,Si),isBackgroundFetch:n=>{var r;return Ae(r=e,he,Tt).call(r,n)},backgroundFetch:(n,r,i,o)=>{var s;return Ae(s=e,he,Rf).call(s,n,r,i,o)},moveToTail:n=>{var r;return Ae(r=e,he,zu).call(r,n)},indexes:n=>{var r;return Ae(r=e,he,zs).call(r,n)},rindexes:n=>{var r;return Ae(r=e,he,Hs).call(r,n)},isStale:n=>{var r;return N(r=e,Lr).call(r,n)}}}get max(){return N(this,Ci)}get maxSize(){return N(this,Or)}get calculatedSize(){return N(this,wi)}get size(){return N(this,cn)}get fetchMethod(){return N(this,Cc)}get memoMethod(){return N(this,Ic)}get dispose(){return N(this,Ii)}get disposeAfter(){return N(this,bi)}getRemainingTTL(e){return N(this,rn).has(e)?1/0:0}*entries(){for(const e of Ae(this,he,zs).call(this))N(this,Be)[e]!==void 0&&N(this,xt)[e]!==void 0&&!Ae(this,he,Tt).call(this,N(this,Be)[e])&&(yield[N(this,xt)[e],N(this,Be)[e]])}*rentries(){for(const e of Ae(this,he,Hs).call(this))N(this,Be)[e]!==void 0&&N(this,xt)[e]!==void 0&&!Ae(this,he,Tt).call(this,N(this,Be)[e])&&(yield[N(this,xt)[e],N(this,Be)[e]])}*keys(){for(const e of Ae(this,he,zs).call(this)){const n=N(this,xt)[e];n!==void 0&&!Ae(this,he,Tt).call(this,N(this,Be)[e])&&(yield n)}}*rkeys(){for(const e of Ae(this,he,Hs).call(this)){const n=N(this,xt)[e];n!==void 0&&!Ae(this,he,Tt).call(this,N(this,Be)[e])&&(yield n)}}*values(){for(const e of Ae(this,he,zs).call(this))N(this,Be)[e]!==void 0&&!Ae(this,he,Tt).call(this,N(this,Be)[e])&&(yield N(this,Be)[e])}*rvalues(){for(const e of Ae(this,he,Hs).call(this))N(this,Be)[e]!==void 0&&!Ae(this,he,Tt).call(this,N(this,Be)[e])&&(yield N(this,Be)[e])}[(Pk=Symbol.iterator,Rk=Symbol.toStringTag,Pk)](){return this.entries()}find(e,n={}){for(const r of Ae(this,he,zs).call(this)){const i=N(this,Be)[r],o=Ae(this,he,Tt).call(this,i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,N(this,xt)[r],this))return this.get(N(this,xt)[r],n)}}forEach(e,n=this){for(const r of Ae(this,he,zs).call(this)){const i=N(this,Be)[r],o=Ae(this,he,Tt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,xt)[r],this)}}rforEach(e,n=this){for(const r of Ae(this,he,Hs).call(this)){const i=N(this,Be)[r],o=Ae(this,he,Tt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,xt)[r],this)}}purgeStale(){let e=!1;for(const n of Ae(this,he,Hs).call(this,{allowStale:!0}))N(this,Lr).call(this,n)&&(Ae(this,he,$s).call(this,N(this,xt)[n],"expire"),e=!0);return e}info(e){const n=N(this,rn).get(e);if(n===void 0)return;const r=N(this,Be)[n],i=Ae(this,he,Tt).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const o={value:i};if(N(this,Dr)&&N(this,ki)){const s=N(this,Dr)[n],a=N(this,ki)[n];if(s&&a){const l=s-(Ll.now()-a);o.ttl=l,o.start=Date.now()}}return N(this,Ai)&&(o.size=N(this,Ai)[n]),o}dump(){const e=[];for(const n of Ae(this,he,zs).call(this,{allowStale:!0})){const r=N(this,xt)[n],i=N(this,Be)[n],o=Ae(this,he,Tt).call(this,i)?i.__staleWhileFetching:i;if(o===void 0||r===void 0)continue;const s={value:o};if(N(this,Dr)&&N(this,ki)){s.ttl=N(this,Dr)[n];const a=Ll.now()-N(this,ki)[n];s.start=Math.floor(Date.now()-a)}N(this,Ai)&&(s.size=N(this,Ai)[n]),e.unshift([r,s])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=Ll.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){var h,f,p,g,C;if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:l}=r;let{noUpdateTTL:c=this.noUpdateTTL}=r;const u=N(this,Yd).call(this,e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return l&&(l.set="miss",l.maxEntrySizeExceeded=!0),Ae(this,he,$s).call(this,e,"set"),this;let d=N(this,cn)===0?void 0:N(this,rn).get(e);if(d===void 0)d=N(this,cn)===0?N(this,Cn):N(this,Si).length!==0?N(this,Si).pop():N(this,cn)===N(this,Ci)?Ae(this,he,xf).call(this,!1):N(this,cn),N(this,xt)[d]=e,N(this,Be)[d]=n,N(this,rn).set(e,d),N(this,Yn)[N(this,Cn)]=d,N(this,Mr)[d]=N(this,Cn),Ne(this,Cn,d),Ih(this,cn)._++,N(this,bc).call(this,d,u,l),l&&(l.set="add"),c=!1;else{Ae(this,he,zu).call(this,d);const m=N(this,Be)[d];if(n!==m){if(N(this,qs)&&Ae(this,he,Tt).call(this,m)){m.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:v}=m;v!==void 0&&!s&&(N(this,Ei)&&((h=N(this,Ii))==null||h.call(this,v,e,"set")),N(this,Qn)&&((f=N(this,In))==null||f.push([v,e,"set"])))}else s||(N(this,Ei)&&((p=N(this,Ii))==null||p.call(this,m,e,"set")),N(this,Qn)&&((g=N(this,In))==null||g.push([m,e,"set"])));if(N(this,qa).call(this,d),N(this,bc).call(this,d,u,l),N(this,Be)[d]=n,l){l.set="replace";const v=m&&Ae(this,he,Tt).call(this,m)?m.__staleWhileFetching:m;v!==void 0&&(l.oldValue=v)}}else l&&(l.set="update")}if(i!==0&&!N(this,Dr)&&Ae(this,he,N0).call(this),N(this,Dr)&&(c||N(this,Jd).call(this,d,i,o),l&&N(this,Wo).call(this,l,d)),!s&&N(this,Qn)&&N(this,In)){const m=N(this,In);let v;for(;v=m==null?void 0:m.shift();)(C=N(this,bi))==null||C.call(this,...v)}return this}pop(){var e;try{for(;N(this,cn);){const n=N(this,Be)[N(this,jn)];if(Ae(this,he,xf).call(this,!0),Ae(this,he,Tt).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(N(this,Qn)&&N(this,In)){const n=N(this,In);let r;for(;r=n==null?void 0:n.shift();)(e=N(this,bi))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,o=N(this,rn).get(e);if(o!==void 0){const s=N(this,Be)[o];if(Ae(this,he,Tt).call(this,s)&&s.__staleWhileFetching===void 0)return!1;if(N(this,Lr).call(this,o))i&&(i.has="stale",N(this,Wo).call(this,i,o));else return r&&N(this,Qa).call(this,o),i&&(i.has="hit",N(this,Wo).call(this,i,o)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=N(this,rn).get(e);if(i===void 0||!r&&N(this,Lr).call(this,i))return;const o=N(this,Be)[i];return Ae(this,he,Tt).call(this,o)?o.__staleWhileFetching:o}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:g,forceRefresh:C=!1,status:m,signal:v}=n;if(!N(this,qs))return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:m});const b={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:m,signal:v};let k=N(this,rn).get(e);if(k===void 0){m&&(m.fetch="miss");const S=Ae(this,he,Rf).call(this,e,k,b,g);return S.__returned=S}else{const S=N(this,Be)[k];if(Ae(this,he,Tt).call(this,S)){const O=r&&S.__staleWhileFetching!==void 0;return m&&(m.fetch="inflight",O&&(m.returnedStale=!0)),O?S.__staleWhileFetching:S.__returned=S}const A=N(this,Lr).call(this,k);if(!C&&!A)return m&&(m.fetch="hit"),Ae(this,he,zu).call(this,k),i&&N(this,Qa).call(this,k),m&&N(this,Wo).call(this,m,k),S;const R=Ae(this,he,Rf).call(this,e,k,b,g),_=R.__staleWhileFetching!==void 0&&r;return m&&(m.fetch=A?"stale":"refresh",_&&A&&(m.returnedStale=!0)),_?R.__staleWhileFetching:R.__returned=R}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=N(this,Ic);if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:o,...s}=n,a=this.get(e,s);if(!o&&a!==void 0)return a;const l=r(e,a,{options:s,context:i});return this.set(e,l,s),l}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=n,a=N(this,rn).get(e);if(a!==void 0){const l=N(this,Be)[a],c=Ae(this,he,Tt).call(this,l);return s&&N(this,Wo).call(this,s,a),N(this,Lr).call(this,a)?(s&&(s.get="stale"),c?(s&&r&&l.__staleWhileFetching!==void 0&&(s.returnedStale=!0),r?l.__staleWhileFetching:void 0):(o||Ae(this,he,$s).call(this,e,"expire"),s&&r&&(s.returnedStale=!0),r?l:void 0)):(s&&(s.get="hit"),c?l.__staleWhileFetching:(Ae(this,he,zu).call(this,a),i&&N(this,Qa).call(this,a),l))}else s&&(s.get="miss")}delete(e){return Ae(this,he,$s).call(this,e,"delete")}clear(){return Ae(this,he,M0).call(this,"delete")}};Ci=new WeakMap,Or=new WeakMap,Ii=new WeakMap,bi=new WeakMap,Cc=new WeakMap,Ic=new WeakMap,cn=new WeakMap,wi=new WeakMap,rn=new WeakMap,xt=new WeakMap,Be=new WeakMap,Yn=new WeakMap,Mr=new WeakMap,jn=new WeakMap,Cn=new WeakMap,Si=new WeakMap,In=new WeakMap,Ai=new WeakMap,ki=new WeakMap,Dr=new WeakMap,Ei=new WeakMap,qs=new WeakMap,Qn=new WeakMap,he=new WeakSet,N0=function(){const e=new Tf(N(this,Ci)),n=new Tf(N(this,Ci));Ne(this,Dr,e),Ne(this,ki,n),Ne(this,Jd,(o,s,a=Ll.now())=>{if(n[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){const l=setTimeout(()=>{N(this,Lr).call(this,o)&&Ae(this,he,$s).call(this,N(this,xt)[o],"expire")},s+1);l.unref&&l.unref()}}),Ne(this,Qa,o=>{n[o]=e[o]!==0?Ll.now():0}),Ne(this,Wo,(o,s)=>{if(e[s]){const a=e[s],l=n[s];if(!a||!l)return;o.ttl=a,o.start=l,o.now=r||i();const c=o.now-l;o.remainingTTL=a-c}});let r=0;const i=()=>{const o=Ll.now();if(this.ttlResolution>0){r=o;const s=setTimeout(()=>r=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{const s=N(this,rn).get(o);if(s===void 0)return 0;const a=e[s],l=n[s];if(!a||!l)return 1/0;const c=(r||i())-l;return a-c},Ne(this,Lr,o=>{const s=n[o],a=e[o];return!!a&&!!s&&(r||i())-s>a})},Qa=new WeakMap,Wo=new WeakMap,Jd=new WeakMap,Lr=new WeakMap,ER=function(){const e=new Tf(N(this,Ci));Ne(this,wi,0),Ne(this,Ai,e),Ne(this,qa,n=>{Ne(this,wi,N(this,wi)-e[n]),e[n]=0}),Ne(this,Yd,(n,r,i,o)=>{if(Ae(this,he,Tt).call(this,r))return 0;if(!Zs(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(r,n),!Zs(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),Ne(this,bc,(n,r,i)=>{if(e[n]=r,N(this,Or)){const o=N(this,Or)-e[n];for(;N(this,wi)>o;)Ae(this,he,xf).call(this,!0)}Ne(this,wi,N(this,wi)+e[n]),i&&(i.entrySize=r,i.totalCalculatedSize=N(this,wi))})},qa=new WeakMap,bc=new WeakMap,Yd=new WeakMap,zs=function*({allowStale:e=this.allowStale}={}){if(N(this,cn))for(let n=N(this,Cn);!(!Ae(this,he,_0).call(this,n)||((e||!N(this,Lr).call(this,n))&&(yield n),n===N(this,jn)));)n=N(this,Mr)[n]},Hs=function*({allowStale:e=this.allowStale}={}){if(N(this,cn))for(let n=N(this,jn);!(!Ae(this,he,_0).call(this,n)||((e||!N(this,Lr).call(this,n))&&(yield n),n===N(this,Cn)));)n=N(this,Yn)[n]},_0=function(e){return e!==void 0&&N(this,rn).get(N(this,xt)[e])===e},xf=function(e){var o,s;const n=N(this,jn),r=N(this,xt)[n],i=N(this,Be)[n];return N(this,qs)&&Ae(this,he,Tt).call(this,i)?i.__abortController.abort(new Error("evicted")):(N(this,Ei)||N(this,Qn))&&(N(this,Ei)&&((o=N(this,Ii))==null||o.call(this,i,r,"evict")),N(this,Qn)&&((s=N(this,In))==null||s.push([i,r,"evict"]))),N(this,qa).call(this,n),e&&(N(this,xt)[n]=void 0,N(this,Be)[n]=void 0,N(this,Si).push(n)),N(this,cn)===1?(Ne(this,jn,Ne(this,Cn,0)),N(this,Si).length=0):Ne(this,jn,N(this,Yn)[n]),N(this,rn).delete(r),Ih(this,cn)._--,n},Rf=function(e,n,r,i){const o=n===void 0?void 0:N(this,Be)[n];if(Ae(this,he,Tt).call(this,o))return o;const s=new Dp,{signal:a}=r;a==null||a.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});const l={signal:s.signal,options:r,context:i},c=(g,C=!1)=>{const{aborted:m}=s.signal,v=r.ignoreFetchAbort&&g!==void 0;if(r.status&&(m&&!C?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,v&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),m&&!v&&!C)return d(s.signal.reason);const b=f;return N(this,Be)[n]===f&&(g===void 0?b.__staleWhileFetching?N(this,Be)[n]=b.__staleWhileFetching:Ae(this,he,$s).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,g,l.options))),g},u=g=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=g),d(g)),d=g=>{const{aborted:C}=s.signal,m=C&&r.allowStaleOnFetchAbort,v=m||r.allowStaleOnFetchRejection,b=v||r.noDeleteOnFetchRejection,k=f;if(N(this,Be)[n]===f&&(!b||k.__staleWhileFetching===void 0?Ae(this,he,$s).call(this,e,"fetch"):m||(N(this,Be)[n]=k.__staleWhileFetching)),v)return r.status&&k.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),k.__staleWhileFetching;if(k.__returned===k)throw g},h=(g,C)=>{var v;const m=(v=N(this,Cc))==null?void 0:v.call(this,e,o,l);m&&m instanceof Promise&&m.then(b=>g(b===void 0?void 0:b),C),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(g(void 0),r.allowStaleOnFetchAbort&&(g=b=>c(b,!0)))})};r.status&&(r.status.fetchDispatched=!0);const f=new Promise(h).then(c,u),p=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return n===void 0?(this.set(e,p,{...l.options,status:void 0}),n=N(this,rn).get(e)):N(this,Be)[n]=p,p},Tt=function(e){if(!N(this,qs))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof Dp},O0=function(e,n){N(this,Mr)[n]=e,N(this,Yn)[e]=n},zu=function(e){e!==N(this,Cn)&&(e===N(this,jn)?Ne(this,jn,N(this,Yn)[e]):Ae(this,he,O0).call(this,N(this,Mr)[e],N(this,Yn)[e]),Ae(this,he,O0).call(this,N(this,Cn),e),Ne(this,Cn,e))},$s=function(e,n){var i,o,s,a;let r=!1;if(N(this,cn)!==0){const l=N(this,rn).get(e);if(l!==void 0)if(r=!0,N(this,cn)===1)Ae(this,he,M0).call(this,n);else{N(this,qa).call(this,l);const c=N(this,Be)[l];if(Ae(this,he,Tt).call(this,c)?c.__abortController.abort(new Error("deleted")):(N(this,Ei)||N(this,Qn))&&(N(this,Ei)&&((i=N(this,Ii))==null||i.call(this,c,e,n)),N(this,Qn)&&((o=N(this,In))==null||o.push([c,e,n]))),N(this,rn).delete(e),N(this,xt)[l]=void 0,N(this,Be)[l]=void 0,l===N(this,Cn))Ne(this,Cn,N(this,Mr)[l]);else if(l===N(this,jn))Ne(this,jn,N(this,Yn)[l]);else{const u=N(this,Mr)[l];N(this,Yn)[u]=N(this,Yn)[l];const d=N(this,Yn)[l];N(this,Mr)[d]=N(this,Mr)[l]}Ih(this,cn)._--,N(this,Si).push(l)}}if(N(this,Qn)&&((s=N(this,In))!=null&&s.length)){const l=N(this,In);let c;for(;c=l==null?void 0:l.shift();)(a=N(this,bi))==null||a.call(this,...c)}return r},M0=function(e){var n,r,i;for(const o of Ae(this,he,Hs).call(this,{allowStale:!0})){const s=N(this,Be)[o];if(Ae(this,he,Tt).call(this,s))s.__abortController.abort(new Error("deleted"));else{const a=N(this,xt)[o];N(this,Ei)&&((n=N(this,Ii))==null||n.call(this,s,a,e)),N(this,Qn)&&((r=N(this,In))==null||r.push([s,a,e]))}}if(N(this,rn).clear(),N(this,Be).fill(void 0),N(this,xt).fill(void 0),N(this,Dr)&&N(this,ki)&&(N(this,Dr).fill(0),N(this,ki).fill(0)),N(this,Ai)&&N(this,Ai).fill(0),Ne(this,jn,0),Ne(this,Cn,0),N(this,Si).length=0,Ne(this,wi,0),Ne(this,cn,0),N(this,Qn)&&N(this,In)){const o=N(this,In);let s;for(;s=o==null?void 0:o.shift();)(i=N(this,bi))==null||i.call(this,...s)}};let P0=KI;function TG(t){const e=t.match(/^#\$#(\S+)(?:\s+(\S{6})\s+)?(.*)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#name [authKey] keyval*'\nGot `"+t+"`"),null;const n=e[1],r=e[2],i={},o=/(\S+)\s*:\s*"([^"]*)"|(\S+)\s*:\s*(\S+)/g;let s;for(;s=o.exec(e[3]);){const a=s[1]||s[3],l=s[2]||s[4];a in i?console.log(`Invalid message format: duplicate key ${a} detected`):i[a]=l}return{name:n,authKey:r,keyvals:i}}function oA(t){const e=t.match(/^#\$#\*\s(\S+)\s(\S+)\s*:\s*(.+)$|^#\$#:\s(\S+)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#* datatag keyval'\nGot `"+t+"`"),null;const n=e[1]||e[4],r=void 0,i=e[2],o=e[3],s={};return s[i]=o,{name:n,authKey:r,keyvals:s}}function sA(){return(Math.random()+1).toString(36).substring(3,9)}class Yc{constructor(e){L(this,"packageName");L(this,"minVersion",1);L(this,"maxVersion",1);L(this,"packageVersion",0);L(this,"client");this.client=e}handle(e){throw new Error("Method not implemented.")}handleMultiline(e){throw new Error("Method not implemented.")}closeMultiline(e){throw new Error("Method not implemented.")}shutdown(){}send(e,n){e.startsWith(this.packageName)||(e=this.packageName+"-"+e),this.client.sendMcp(e,n)}}class xG extends Yc{constructor(){super(...arguments);L(this,"packageName","mcp-negotiate");L(this,"minVersion",2);L(this,"maxVersion",2)}handle(n){switch(n.name){}}sendNegotiate(){var n,r;for(const i of Object.values(this.client.mcpHandlers)){let o=(n=i.minVersion)==null?void 0:n.toFixed(1),s=(r=i.maxVersion)==null?void 0:r.toFixed(1);this.client.sendMcp("mcp-negotiate-can",{package:i.packageName,"min-version":o,"max-version":s})}this.client.sendCommand("#$#$mcp-negotiate-end")}}class RG extends Yc{constructor(){super(...arguments);L(this,"packageName","dns-com-awns-status")}handle(n){console.log(n),this.client.emit("statustext",n.keyvals.text)}}class PG extends Yc{constructor(n){super(n);L(this,"packageName","dns-org-mud-moo-simpleedit");L(this,"currentSession",null)}handle(n){n.name==="dns-org-mud-moo-simpleedit-content"?this.currentSession={name:n.keyvals.name,reference:n.keyvals.reference,type:n.keyvals.type,contents:[]}:console.log(`Unexpected simpleedit message ${n}`)}handleMultiline(n){this.currentSession&&"content"in n.keyvals?this.currentSession.contents.push(n.keyvals.content):console.log(`Unexpected simpleedit ML ${n}`)}closeMultiline(n){console.log(`Closing multiline ${n.name}`),this.currentSession&&(this.client.editors.openEditorWindow(this.currentSession),this.currentSession=null)}}class NG extends Yc{constructor(){super(...arguments);L(this,"packageName","dns-com-awns-getset");L(this,"id",1);L(this,"cache",new P0({max:10}));L(this,"LocalCache",{})}handle(n){switch(n.name){case"dns-com-awns-getset-ack":const r=this.cache.get(n.keyvals.id);if(r===void 0){console.log(`Got ack for unknown id ${n.keyvals.id}`);break}const i=n.keyvals.value;console.log(`Got ${r} = ${i}`),this.LocalCache[r]=i,this.client.emit("getset",r,i);break}}sendGet(n){const r=(this.id++).toString();this.cache.set(r,n),this.client.sendMcp("dns-com-awns-getset-get",{id:r,property:n})}sendSet(n,r){this.client.sendMcp("dns-com-awns-getset-set",{id:this.id++,property:n,value:r})}sendDrop(n){this.client.sendMcp("dns-com-awns-getset-drop",{id:this.id++,property:n})}}class _G extends Yc{constructor(){super(...arguments);L(this,"packageName","dns-com-vmoo-userlist");L(this,"maxVersion",1.1);L(this,"player");L(this,"fields",["Object","Name","Icon"]);L(this,"icons",["Idle","Away","Idle+Away","Friend","Newbie","Inhabitant","Inhabitant+","Schooled","Wizard","Key","Star"]);L(this,"players",[])}handle(n){switch(n.name){case"dns-com-vmoo-userlist-you":this.player=n.keyvals.nr;break}}handleMultiline(n){if("fields"in n.keyvals&&(this.fields=gi(n.keyvals.fields.trim())),"icons"in n.keyvals&&(this.icons=gi(n.keyvals.icons.trim())),"d"in n.keyvals){const o=n.keyvals.d[0];switch(o){case"=":var r=gi(n.keyvals.d.slice(1));this.players=r.map(a=>this.playerFromArray(a));break;case"+":this.players.push(this.playerFromArray(gi(n.keyvals.d.slice(1))));break;case"-":var i=gi(n.keyvals.d.slice(1));this.players=this.players.filter(a=>!i.includes(a.Object));break;case"*":const s=this.playerFromArray(gi(n.keyvals.d.slice(1)));this.updatePlayer(s);break;case"<":i=gi(n.keyvals.d.slice(1)),this.players.forEach((a,l)=>{i.includes(a.Object)&&(a.idle=!0,this.players[l]=a)});break;case">":i=gi(n.keyvals.d.slice(1)),this.players.forEach((a,l)=>{i.includes(a.Object)&&(a.idle=!1,this.players[l]=a)});break;case"[":i=gi(n.keyvals.d.slice(1)),this.players.forEach((a,l)=>{i.includes(a.Object)&&(a.away=!0,this.players[l]=a)});break;case"]":i=gi(n.keyvals.d.slice(1)),this.players.forEach((a,l)=>{i.includes(a.Object)&&(a.away=!1,this.players[l]=a)});break;default:console.log(`Unknown userlist mode ${o} in ${n.keyvals.d}`);break}this.update()}}updatePlayer(n){const r=this.players.findIndex(i=>i.Object===n.Object);r!==-1?this.players[r]=n:this.players.push(n)}update(){this.players.sort((r,i)=>n(i)-n(r)),this.client.emit("userlist",this.players);function n(r){return r.Icon-(r.idle?10:0)-(r.away?20:0)}}playerFromArray(n){const r={};return n.forEach((i,o)=>{r[this.fields[o]]=i}),r.away=!1,r.idle=!1,r}}function gi(t){t=t.slice(1,-1);let e=[],n="",r=0;for(let o=0;o<t.length;o++){const s=t[o];if(s==="{")r++;else if(s==="}")r--;else if(s===","&&r===0){i(),n="";continue}n+=s}return n.length>0&&i(),e;function i(){n=n.trim(),n.startsWith("{")&&n.endsWith("}")?e.push(gi(n)):Number.isNaN(Number(n))?n.startsWith('"')&&n.endsWith('"')?e.push(n.slice(1,-1)):e.push(n):e.push(Number(n))}}class OG extends Yc{constructor(){super(...arguments);L(this,"packageName","dns-com-awns-ping");L(this,"id",1)}handle(n){switch(n.name){case"dns-com-awns-ping":this.send("reply",n.keyvals);break}}ping(){this.send("dns-com-awns-ping",{id:this.id++})}}var D0=(t=>(t.Off="off",t.Unfocused="unfocused",t.All="all",t))(D0||{}),Es=(t=>(t.SetGeneral="SET_GENERAL",t.SetSpeech="SET_SPEECH",t.SetChannels="SET_CHANNELS",t.SetEditorAutocompleteEnabled="SET_EDITOR_AUTOCOMPLETE_ENABLED",t.SetEditorAccessibilityMode="SET_EDITOR_ACCESSIBILITY_MODE",t))(Es||{});class MG{constructor(){L(this,"state");L(this,"listeners",new Set);L(this,"dispatch",e=>{this.state=this.reducer(this.state,e),localStorage.setItem("preferences",JSON.stringify(this.state)),this.listeners.forEach(n=>n())});const e=localStorage.getItem("preferences"),n=this.getInitialPreferences();this.state=e?this.mergePreferences(n,JSON.parse(e)):n}getInitialPreferences(){return{general:{localEcho:!1},speech:{autoreadMode:"off",voice:"",rate:1,pitch:1,volume:1},channels:{sayto:{autoreadMode:"off",notify:!0}},editor:{autocompleteEnabled:!0,accessibilityMode:!0}}}mergePreferences(e,n){return{...e,general:{...e.general,...n.general},speech:{...e.speech,...n.speech},channels:n.channels?{...e.channels,...n.channels}:e.channels,editor:{...e.editor,...n.editor}}}reducer(e,n){switch(n.type){case"SET_GENERAL":return{...e,general:n.data};case"SET_SPEECH":return{...e,speech:n.data};case"SET_CHANNELS":return{...e,channels:n.data};case"SET_EDITOR_AUTOCOMPLETE_ENABLED":return{...e,editor:{...e.editor,autocompleteEnabled:n.data}};case"SET_EDITOR_ACCESSIBILITY_MODE":return{...e,editor:{...e.editor,accessibilityMode:n.data}};default:return e}}getState(){return this.state}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}}const lc=new MG;class DG extends lx{constructor(n,r){super();L(this,"ws");L(this,"decoder",new TextDecoder("utf8"));L(this,"telnet");L(this,"host");L(this,"port");L(this,"telnetNegotiation",!1);L(this,"telnetBuffer","");L(this,"gmcpHandlers",{});L(this,"mcpHandlers",{});L(this,"mcpMultilines",{});L(this,"mcpAuthKey",null);L(this,"mcp_negotiate");L(this,"mcp_getset");L(this,"gmcp_char");L(this,"worldData",{playerId:"",playerName:"",roomId:"",liveKitTokens:[]});L(this,"cacophony");L(this,"editors");L(this,"sendCommand",n=>{lc.getState().general.localEcho&&this.emit("command",n),this.send(n+`\r
`),console.log("> "+n)});this.host=n,this.port=r,this.mcp_negotiate=this.registerMcpPackage(xG),this.mcp_getset=this.registerMcpPackage(NG),this.gmcp_char=this.registerGMCPPackage(UF),this.cacophony=new GV,this.editors=new BF(this)}registerGMCPPackage(n){const r=new n(this);return this.gmcpHandlers[r.packageName]=r,console.log("Registered GMCP Package:",r.packageName),r}registerMcpPackage(n){const r=new n(this);return this.mcpHandlers[r.packageName]=r,r}connect(){this.ws=new window.WebSocket(`wss://${this.host}:${this.port}`),this.ws.binaryType="arraybuffer",this.telnet=new OF(new _F(this.ws)),this.ws.onopen=()=>{this.emit("connect")},this.telnet.on("data",n=>{this.handleData(n)}),this.telnet.on("negotiation",(n,r)=>{n===Zu.WILL&&r===ju.GMCP?(console.log("GMCP Negotiation"),this.telnet.sendNegotiation(Zu.DO,ju.GMCP),this.gmcpHandlers.Core.sendHello(),this.gmcpHandlers["Core.Supports"].sendSet(),this.gmcpHandlers["Auth.Autologin"].sendLogin()):n===Zu.DO&&r===ju.TERMINAL_TYPE&&(console.log("TTYPE Negotiation"),this.telnet.sendNegotiation(Zu.WILL,ju.TERMINAL_TYPE),this.telnet.sendTerminalType("Mongoose Client"),this.telnet.sendTerminalType("ANSI"),this.telnet.sendTerminalType("PROXY"))}),this.telnet.on("gmcp",(n,r)=>{console.log("GMCP Package:",n,r);try{this.handleGmcpData(n,r)}catch(i){console.error("Calling GMCP:",i)}}),this.ws.onclose=()=>{this.emit("disconnect"),this.mcpAuthKey=null,setTimeout(()=>{this.connect()},1e4)},this.ws.onerror=n=>{this.emit("error",n)}}send(n){this.ws.send(n)}close(){this.ws.close()}handleData(n){const r=this.decoder.decode(n).trimEnd();for(const i of r.split(`
`))i&&i.startsWith("#$#")?this.handleMcp(i):this.emitMessage(i)}handleMcp(n){if(n.startsWith("#$#*")){const i=oA(n.trimEnd());i&&(i.name in this.mcpMultilines?this.mcpMultilines[i.name].handleMultiline(i):console.warn("Received continuation for unknown multiline",i));return}if(n.startsWith("#$#:")){const i=oA(n.trimEnd());i&&(this.mcpMultilines[i.name].closeMultiline(i),delete this.mcpMultilines[i.name]);return}const r=TG(n.trimEnd());if(console.log("MCP Message:",r),(r==null?void 0:r.name.toLowerCase())==="mcp"&&r.authKey==null&&this.mcpAuthKey==null)this.mcpAuthKey=sA(),this.sendCommand(`#$#mcp authentication-key: ${this.mcpAuthKey} version: 2.1 to: 2.1`),this.mcp_negotiate.sendNegotiate();else if((r==null?void 0:r.name)!=="mcp-negotiate-end")if((r==null?void 0:r.authKey)===this.mcpAuthKey){let i=r.name;do{if(i in this.mcpHandlers){this.mcpHandlers[i].handle(r),"_data-tag"in r.keyvals&&(console.log("new multiline "+r.keyvals["_data-tag"]),this.mcpMultilines[r.keyvals["_data-tag"]]=this.mcpHandlers[i]);return}i=i.substring(0,i.lastIndexOf("-"))}while(i);console.log(`No handler for ${r.name}`)}else console.log(`Unexpected authkey "${r==null?void 0:r.authKey}", probably a spoofed message.`)}handleGmcpData(n,r){const i=n.lastIndexOf("."),o=n.substring(0,i),s=n.substring(i+1);console.log("GMCP Message:",o,s,r);const a=this.gmcpHandlers[o];if(!a){console.log("No handler for GMCP package:",o);return}const l=a["handle"+s];l?(console.log("Calling handler:",l),l.call(a,JSON.parse(r))):console.log("No handler on package:",o,s)}emitMessage(n){const r=lc.getState().speech.autoreadMode;r===D0.All&&this.speak(n),r===D0.Unfocused&&!document.hasFocus()&&this.speak(n),this.emit("message",n)}sendGmcp(n,r){console.log("Sending GMCP:",n,r),this.telnet.sendGmcp(n,r)}sendMcp(n,r){if(typeof r=="object"){let o="";for(const[s,a]of Object.entries(r))o+=` ${s}: ${a||'""'}`;r=o}const i=`#$#${n} ${this.mcpAuthKey} ${r}\r
`;this.send(i)}sendMcpMLLine(n,r,i){this.send(`#$#* ${n} ${r}: ${i}\r
`)}closeMcpML(n){this.send(`#$#: ${n}\r
`)}sendMCPMultiline(n,r,i){const o=sA();r["_data-tag"]=o,this.sendMcp(n,r);for(const s of i)this.sendMcpMLLine(o,"content",s);this.closeMcpML(o)}shutdown(){Object.values(this.mcpHandlers).forEach(n=>{n.shutdown()}),Object.values(this.gmcpHandlers).forEach(n=>{n.shutdown()}),this.editors.shutdown()}requestNotificationPermission(){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="default"&&Notification.requestPermission()}sendNotification(n,r){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="granted"&&new Notification(n,{body:r})}speak(n){if(!("speechSynthesis"in window)){console.log("This browser does not support speech synthesis");return}const r=new SpeechSynthesisUtterance(LF(n));r.lang="en-US";const{rate:i,pitch:o,voice:s,volume:a}=lc.getState().speech;r.rate=i,r.pitch=o,r.volume=a;const c=speechSynthesis.getVoices().find(u=>u.name===s);c&&(r.voice=c),speechSynthesis.speak(r)}cancelSpeech(){speechSynthesis.cancel()}stopAllSounds(){this.gmcpHandlers["Client.Media"].stopAllSounds()}getInput(){var n;return((n=document.getElementById("command-input"))==null?void 0:n.textContent)||""}setInput(n){const r=document.getElementById("command-input");r&&(r.textContent=n)}}class LG{constructor(){L(this,"history",[]);L(this,"currentIndex",-1);L(this,"unsentInput","")}addCommand(e){e.trim()!==""&&(this.history.length===0||this.history[this.history.length-1]!==e)&&this.history.push(e.trim()),this.currentIndex=-1,this.unsentInput=""}navigateUp(e){return this.currentIndex===-1&&(this.unsentInput=e),this.history.length>0&&this.currentIndex<this.history.length-1&&this.currentIndex++,this.history.length>0?this.history[this.history.length-1-this.currentIndex]:""}navigateDown(e){return this.currentIndex===-1&&(this.unsentInput=e),this.currentIndex>0?(this.currentIndex--,this.history[this.history.length-1-this.currentIndex]):(this.currentIndex=-1,this.unsentInput)}getCurrentInput(){return this.currentIndex===-1?this.unsentInput:this.history[this.history.length-1-this.currentIndex]}}const BG=({onSend:t,inputRef:e})=>{const[n,r]=w.useState(""),i=w.useRef(new LG),o=a=>{const l=i.current;if(a.key==="Enter"&&!a.shiftKey)a.preventDefault(),s();else if(a.key==="ArrowUp"){a.preventDefault();const c=l.navigateUp(n);r(c)}else if(a.key==="ArrowDown"){a.preventDefault();const c=l.navigateDown(n);r(c)}},s=()=>{n.trim()&&(t(n),i.current.addCommand(n),r(""))};return X.jsxs("div",{className:"command-input-container",children:[X.jsx("textarea",{value:n,onChange:a=>r(a.target.value),onKeyDown:o,id:"command-input",ref:e,autoFocus:!0}),X.jsx("button",{onClick:s,className:"send-button",children:"Send"})]})},FG="81f84082e6e5e80dc2cc636515b299b2281b1495",Ns=()=>{const[,t]=w.useReducer(e=>e+1,0);return w.useEffect(()=>lc.subscribe(t),[]),[lc.getState(),lc.dispatch]},UG=()=>{const[t,e]=w.useState([]);return w.useEffect(()=>{const n=()=>{e(window.speechSynthesis.getVoices())};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)},[]),t},VG=({tabs:t})=>{const[e,n]=w.useState(0),r=w.useRef([]);return w.useEffect(()=>{r.current=r.current.slice(0,t.length)},[t]),w.useEffect(()=>{const i=s=>{switch(s.key){case"ArrowLeft":n(a=>a>0?a-1:t.length-1);break;case"ArrowRight":n(a=>a<t.length-1?a+1:0);break}},o=r.current[e];return o==null||o.addEventListener("keydown",i),()=>{o==null||o.removeEventListener("keydown",i)}},[t.length,e]),w.useEffect(()=>{var i;(i=r.current[e])==null||i.focus()},[e]),X.jsxs("div",{children:[X.jsx("div",{role:"tablist","aria-label":"Tabs",children:t.map((i,o)=>X.jsx("button",{ref:s=>r.current[o]=s,role:"tab","aria-selected":e===o,id:`${i.label}-tab`,"aria-controls":`${i.label}-panel`,onClick:()=>n(o),tabIndex:e===o?void 0:-1,children:i.label},o))}),t.map((i,o)=>X.jsx("div",{role:"tabpanel",id:`${i.label}-panel`,"aria-labelledby":`${i.label}-tab`,hidden:e!==o,tabIndex:e===o?0:-1,children:i.content},o))]})},GG=()=>{const[t,e]=Ns();return X.jsxs("label",{children:[X.jsx("input",{type:"checkbox",checked:t.general.localEcho,onChange:n=>e({type:Es.SetGeneral,data:{...t.general,localEcho:n.target.checked}})}),"Local Echo"]})},WG=()=>{const[t,e]=Ns();return X.jsxs("label",{children:["Auto Read:",X.jsxs("select",{value:t.speech.autoreadMode,onChange:n=>e({type:Es.SetSpeech,data:{...t.speech,autoreadMode:n.target.value}}),children:[X.jsx("option",{value:"off",children:"Off"}),X.jsx("option",{value:"unfocused",children:"Unfocused"}),X.jsx("option",{value:"all",children:"Always"})]})]})},jG=()=>{const[t,e]=Ns(),n=UG();return X.jsxs("label",{children:["Voice:",X.jsx("select",{value:t.speech.voice,onChange:r=>e({type:Es.SetSpeech,data:{...t.speech,voice:r.target.value}}),children:n.map(r=>X.jsx("option",{value:r.name,children:r.name},r.voiceURI))})]})},ZG=()=>{const[t,e]=Ns();return X.jsxs("label",{children:["Rate (0.1 - 10.0):",X.jsx("input",{type:"range",min:"0.1",max:"10.0",step:"0.1",value:t.speech.rate,onChange:n=>e({type:Es.SetSpeech,data:{...t.speech,rate:parseFloat(n.target.value)}})})]})},zG=()=>{const[t,e]=Ns();return X.jsxs("label",{children:["Pitch (0 - 2):",X.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:t.speech.pitch,onChange:n=>e({type:Es.SetSpeech,data:{...t.speech,pitch:parseFloat(n.target.value)}})})]})},HG=()=>{const[t,e]=Ns();return X.jsxs("label",{children:["Volume (0 - 1):",X.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.speech.volume,onChange:n=>e({type:Es.SetSpeech,data:{...t.speech,volume:parseFloat(n.target.value)}})})]})},$G=()=>{const[t]=Ns(),[e,n]=w.useState(!1),r=()=>{n(!0),console.log("Preview button clicked");const i=()=>{const o=new SpeechSynthesisUtterance("This is a preview of the selected voice settings."),s=speechSynthesis.getVoices();console.log("Available voices:",s.map(l=>l.name));const a=s.find(l=>l.name===t.speech.voice);console.log("Selected voice:",a?a.name:"Not found"),o.voice=a||null,o.rate=t.speech.rate,o.pitch=t.speech.pitch,o.volume=t.speech.volume,console.log("Utterance settings:",{voice:o.voice?o.voice.name:"Default",rate:o.rate,pitch:o.pitch,volume:o.volume}),o.onend=()=>{console.log("Speech ended"),n(!1)},o.onerror=l=>{console.error("Speech synthesis error:",l),n(!1)},speechSynthesis.cancel(),speechSynthesis.speak(o),console.log("Speech started")};speechSynthesis.getVoices().length>0?i():speechSynthesis.onvoiceschanged=()=>{speechSynthesis.onvoiceschanged=null,i()}};return ut.useEffect(()=>()=>{speechSynthesis.cancel()},[]),X.jsx("button",{onClick:r,disabled:e,children:e?"Playing...":"Preview Voice"})},XG=()=>X.jsxs("div",{children:[X.jsx(WG,{}),X.jsx("br",{}),X.jsx(jG,{}),X.jsx("br",{}),X.jsx(ZG,{}),X.jsx("br",{}),X.jsx(zG,{}),X.jsx("br",{}),X.jsx(HG,{}),X.jsx("br",{}),X.jsx($G,{})]}),KG=()=>{const[t,e]=Ns(),n=t.editor,r=o=>{e({type:Es.SetEditorAutocompleteEnabled,data:o.target.checked})},i=o=>{e({type:Es.SetEditorAccessibilityMode,data:o.target.checked})};return X.jsxs("div",{children:[X.jsxs("label",{children:[X.jsx("input",{type:"checkbox",checked:n.autocompleteEnabled,onChange:r}),"Enable Autocomplete"]}),X.jsx("br",{}),X.jsxs("label",{children:[X.jsx("input",{type:"checkbox",checked:n.accessibilityMode,onChange:i}),"Enable Accessibility Mode"]}),X.jsx("br",{})]})},JG=()=>{const t=[{label:"General",content:X.jsx(GG,{})},{label:"Speech",content:X.jsx(XG,{})},{label:"Editor",content:X.jsx(KG,{})}];return X.jsx(VG,{tabs:t})};function YG(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function Fd(){return Fd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fd.apply(null,arguments)}var L0="data-focus-lock",TR="data-focus-lock-disabled",QG="data-no-focus-lock",qG="data-autofocus-inside",eW="data-no-autofocus";function Dm(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function tW(t,e){var n=w.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var nW=typeof window<"u"?w.useLayoutEffect:w.useEffect,aA=new WeakMap;function rW(t,e){var n=tW(null,function(r){return t.forEach(function(i){return Dm(i,r)})});return nW(function(){var r=aA.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||Dm(a,null)}),o.forEach(function(a){i.has(a)||Dm(a,s)})}aA.set(n,t)},[t]),n}var Lm={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},B0=function(t,e){return B0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},B0(t,e)};function Qc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");B0(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var F0=function(){return F0=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},F0.apply(this,arguments)};function iW(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,e||[])).next())})}function xR(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(n=0)),n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}function _c(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function U0(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function V0(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function cc(t){return this instanceof cc?(this.v=t,this):new cc(t)}function oW(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(C,m){o.push([f,g,C,m])>1||l(f,g)})},p&&(i[f]=p(i[f])))}function l(f,p){try{c(r[f](p))}catch(g){h(o[0][3],g)}}function c(f){f.value instanceof cc?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){l("next",f)}function d(f){l("throw",f)}function h(f,p){f(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function sW(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof _c=="function"?_c(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}function RR(t){return t}function PR(t,e){e===void 0&&(e=RR);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var l=function(){var u=s;s=[],u.forEach(o)},c=function(){return Promise.resolve().then(l)};c(),n={push:function(u){s.push(u),c()},filter:function(u){return s=s.filter(u),n}}}};return i}function cI(t,e){return e===void 0&&(e=RR),PR(t,e)}function aW(t){t===void 0&&(t={});var e=PR(null);return e.options=F0({async:!0,ssr:!1},t),e}var NR=cI({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),_R=cI(),lW=cI(),cW=aW({async:!0,ssr:typeof document<"u"}),uW=w.createContext(void 0),dW=[],uI=w.forwardRef(function(e,n){var r,i=w.useState(),o=i[0],s=i[1],a=w.useRef(),l=w.useRef(!1),c=w.useRef(null),u=w.useState({}),d=u[1],h=e.children,f=e.disabled,p=f===void 0?!1:f,g=e.noFocusGuards,C=g===void 0?!1:g,m=e.persistentFocus,v=m===void 0?!1:m,b=e.crossFrame,k=b===void 0?!0:b,S=e.autoFocus,A=S===void 0?!0:S;e.allowTextSelection;var R=e.group,T=e.className,_=e.whiteList,O=e.hasPositiveIndices,B=e.shards,V=B===void 0?dW:B,H=e.as,Z=H===void 0?"div":H,J=e.lockProps,ee=J===void 0?{}:J,re=e.sideCar,$=e.returnFocus,K=$===void 0?!1:$,ie=e.focusOptions,j=e.onActivation,oe=e.onDeactivation,ke=w.useState({}),Le=ke[0],de=w.useCallback(function(we){var Ge=we.captureFocusRestore;if(!c.current){var Ve,Me=(Ve=document)==null?void 0:Ve.activeElement;c.current=Me,Me!==document.body&&(c.current=Ge(Me))}a.current&&j&&j(a.current),l.current=!0,d()},[j]),Pe=w.useCallback(function(){l.current=!1,oe&&oe(a.current),d()},[oe]),Ye=w.useCallback(function(we){var Ge=c.current;if(Ge){var Ve=(typeof Ge=="function"?Ge():Ge)||document.body,Me=typeof K=="function"?K(Ve):K;if(Me){var qe=typeof Me=="object"?Me:void 0;c.current=null,we?Promise.resolve().then(function(){return Ve.focus(qe)}):Ve.focus(qe)}}},[K]),ve=w.useCallback(function(we){l.current&&NR.useMedium(we)},[]),an=_R.useMedium,An=w.useCallback(function(we){a.current!==we&&(a.current=we,s(we))},[]),st=Fd((r={},r[TR]=p&&"disabled",r[L0]=R,r),ee),Ct=C!==!0,kn=Ct&&C!=="tail",ln=rW([n,An]),ue=w.useMemo(function(){return{observed:a,shards:V,enabled:!p,active:l.current}},[p,l.current,V,o]);return w.createElement(w.Fragment,null,Ct&&[w.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:Lm}),O?w.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:Lm}):null],!p&&w.createElement(re,{id:Le,sideCar:cW,observed:o,disabled:p,persistentFocus:v,crossFrame:k,autoFocus:A,whiteList:_,shards:V,onActivation:de,onDeactivation:Pe,returnFocus:Ye,focusOptions:ie,noFocusGuards:C}),w.createElement(Z,Fd({ref:ln},st,{className:T,onBlur:an,onFocus:ve}),w.createElement(uW.Provider,{value:ue},h)),kn&&w.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:Lm}))});uI.propTypes={};function G0(t,e){return G0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},G0(t,e)}function hW(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,G0(t,e)}function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(t)}function fW(t,e){if(Ud(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Ud(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function pW(t){var e=fW(t,"string");return Ud(e)=="symbol"?e:e+""}function gW(t,e,n){return(e=pW(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mW(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var o=[],s;function a(){s=t(o.map(function(c){return c.props})),e(s)}var l=function(c){hW(u,c);function u(){return c.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var f=o.indexOf(this);o.splice(f,1),a()},d.render=function(){return ut.createElement(i,this.props)},u}(w.PureComponent);return gW(l,"displayName","SideEffect("+n(i)+")"),l}}var Oo=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},pl=function(t){return Array.isArray(t)?t:[t]},OR=function(t){return Array.isArray(t)?t[0]:t},vW=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},MR=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},DR=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},yW=function(t){return t.hasAttribute("inert")},CW=function(t,e){return!t||DR(t)||!vW(t)&&!yW(t)&&e(MR(t))},LR=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=CW(e,LR.bind(void 0,t));return t.set(e,r),r},IW=function(t,e){return t&&!DR(t)?SW(t)?e(MR(t)):!1:!0},BR=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=IW(e,BR.bind(void 0,t));return t.set(e,r),r},FR=function(t){return t.dataset},bW=function(t){return t.tagName==="BUTTON"},UR=function(t){return t.tagName==="INPUT"},VR=function(t){return UR(t)&&t.type==="radio"},wW=function(t){return!((UR(t)||bW(t))&&(t.type==="hidden"||t.disabled))},SW=function(t){var e=t.getAttribute(eW);return![!0,"true",""].includes(e)},dI=function(t){var e;return!!(t&&(!((e=FR(t))===null||e===void 0)&&e.focusGuard))},W0=function(t){return!dI(t)},AW=function(t){return!!t},kW=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},EW=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},hI=function(t,e,n){return Oo(t).map(function(r,i){var o=EW(r);return{node:r,index:i,tabIndex:n&&o===-1?(r.dataset||{}).focusGuard?0:-1:o}}).filter(function(r){return!e||r.tabIndex>=0}).sort(kW)},TW=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],fI=TW.join(","),xW="".concat(fI,", [data-focus-guard]"),GR=function(t,e){return Oo((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?xW:fI)?[r]:[],GR(r))},[])},RW=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?Oc([t.contentDocument.body],e):[t]},Oc=function(t,e){return t.reduce(function(n,r){var i,o=GR(r,e),s=(i=[]).concat.apply(i,o.map(function(a){return RW(a,e)}));return n.concat(s,r.parentNode?Oo(r.parentNode.querySelectorAll(fI)).filter(function(a){return a===r}):[])},[])},PW=function(t){var e=t.querySelectorAll("[".concat(qG,"]"));return Oo(e).map(function(n){return Oc([n])}).reduce(function(n,r){return n.concat(r)},[])},pI=function(t,e){return Oo(t).filter(function(n){return LR(e,n)}).filter(function(n){return wW(n)})},lA=function(t,e){return e===void 0&&(e=new Map),Oo(t).filter(function(n){return BR(e,n)})},gI=function(t,e,n){return hI(pI(Oc(t,n),e),!0,n)},Vd=function(t,e){return hI(pI(Oc(t),e),!1)},NW=function(t,e){return pI(PW(t),e)},rl=function(t,e){return t.shadowRoot?rl(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:Oo(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?rl(i,e):!1}return rl(n,e)})},_W=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(s,a){return!e.has(a)})},WR=function(t){return t.parentNode?WR(t.parentNode):t},mI=function(t){var e=pl(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(L0);return n.push.apply(n,i?_W(Oo(WR(r).querySelectorAll("[".concat(L0,'="').concat(i,'"]:not([').concat(TR,'="disabled"])')))):[r]),n},[])},OW=function(t){try{return t()}catch{return}},Gd=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?Gd(e.shadowRoot):e instanceof HTMLIFrameElement&&OW(function(){return e.contentWindow.document})?Gd(e.contentWindow.document):e}},MW=function(t,e){return t===e},DW=function(t,e){return!!Oo(t.querySelectorAll("iframe")).some(function(n){return MW(n,e)})},jR=function(t,e){return e===void 0&&(e=Gd(OR(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:mI(t).some(function(n){return rl(n,e)||DW(n,e)})},LW=function(t){t===void 0&&(t=document);var e=Gd(t);return e?Oo(t.querySelectorAll("[".concat(QG,"]"))).some(function(n){return rl(n,e)}):!1},BW=function(t,e){return e.filter(VR).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},vI=function(t,e){return VR(t)&&t.name?BW(t,e):t},FW=function(t){var e=new Set;return t.forEach(function(n){return e.add(vI(n,t))}),t.filter(function(n){return e.has(n)})},cA=function(t){return t[0]&&t.length>1?vI(t[0],t):t[0]},uA=function(t,e){return t.indexOf(vI(e,t))},j0="NEW_FOCUS",UW=function(t,e,n,r,i){var o=t.length,s=t[0],a=t[o-1],l=dI(r);if(!(r&&t.indexOf(r)>=0)){var c=r!==void 0?n.indexOf(r):-1,u=i?n.indexOf(i):c,d=i?t.indexOf(i):-1;if(c===-1)return d!==-1?d:j0;if(d===-1)return j0;var h=c-u,f=n.indexOf(s),p=n.indexOf(a),g=FW(n),C=r!==void 0?g.indexOf(r):-1,m=C-(i?g.indexOf(i):c);if(!h&&d>=0||e.length===0)return d;var v=uA(t,e[0]),b=uA(t,e[e.length-1]);if(c<=f&&l&&Math.abs(h)>1)return b;if(c>=p&&l&&Math.abs(h)>1)return v;if(h&&Math.abs(m)>1)return d;if(c<=f)return b;if(c>p)return v;if(h)return Math.abs(h)>1?d:(o+d+h)%o}},VW=function(t){return function(e){var n,r=(n=FR(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},dA=function(t,e,n){var r=t.map(function(o){var s=o.node;return s}),i=lA(r.filter(VW(n)));return i&&i.length?cA(i):cA(lA(e))},Z0=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&Z0(t.parentNode.host||t.parentNode,e),e},Bm=function(t,e){for(var n=Z0(t),r=Z0(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},ZR=function(t,e,n){var r=pl(t),i=pl(e),o=r[0],s=!1;return i.filter(Boolean).forEach(function(a){s=Bm(s||a,a)||s,n.filter(Boolean).forEach(function(l){var c=Bm(o,l);c&&(!s||rl(c,s)?s=c:s=Bm(c,s))})}),s},hA=function(t,e){return t.reduce(function(n,r){return n.concat(NW(r,e))},[])},GW=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(AW)},WW=function(t,e){var n=Gd(pl(t).length>0?document:OR(t).ownerDocument),r=mI(t).filter(W0),i=ZR(n||t,t,r),o=new Map,s=Vd(r,o),a=s.filter(function(p){var g=p.node;return W0(g)});if(a[0]){var l=Vd([i],o).map(function(p){var g=p.node;return g}),c=GW(l,a),u=c.map(function(p){var g=p.node;return g}),d=c.filter(function(p){var g=p.tabIndex;return g>=0}).map(function(p){var g=p.node;return g}),h=UW(u,d,l,n,e);if(h===j0){var f=dA(s,d,hA(r,o))||dA(s,u,hA(r,o));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return h===void 0?h:c[h]}},jW=function(t){var e=mI(t).filter(W0),n=ZR(t,t,e),r=hI(Oc([n],!0),!0,!0),i=Oc(e,!1);return r.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:i.indexOf(s)>=0,guard:dI(s)}})},yI=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},Fm=0,Um=!1,zR=function(t,e,n){n===void 0&&(n={});var r=WW(t,e);if(!Um&&r){if(Fm>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Um=!0,setTimeout(function(){Um=!1},1);return}Fm++,yI(r.node,n.focusOptions),Fm--}};function Tu(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var ZW=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:Tu(n),parent:Tu(n.parentElement),left:Tu(n.previousElementSibling),right:Tu(n.nextElementSibling)}),n=n.parentElement;return{element:Tu(t),stack:e,ownerDocument:t.ownerDocument}},zW=function(t){var e,n,r,i,o;if(t)for(var s=t.stack,a=t.ownerDocument,l=new Map,c=0,u=s;c<u.length;c++){var d=u[c],h=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(h&&a.contains(h)){for(var f=(n=d.left)===null||n===void 0?void 0:n.call(d),p=d.current(),g=h.contains(p)?p:void 0,C=(r=d.right)===null||r===void 0?void 0:r.call(d),m=gI([h],l),v=(o=(i=g??(f==null?void 0:f.nextElementSibling))!==null&&i!==void 0?i:C)!==null&&o!==void 0?o:f;v;){for(var b=0,k=m;b<k.length;b++){var S=k[b];if(v!=null&&v.contains(S.node))return S.node}v=v.nextElementSibling}if(m.length)return m[0].node}}},HR=function(t){var e=ZW(t);return function(){return zW(e)}},HW=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=pl(e);if(r.every(function(s){return!rl(s,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?gI(r,new Map):Vd(r,new Map),o=i.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},$W=function(t,e){var n=e?gI(pl(t),new Map):Vd(pl(t),new Map);return{first:n[0],last:n[n.length-1]}},XW=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},$R=function(t,e,n){e===void 0&&(e={});var r=XW(e),i=HW(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&yI(o.node,r.focusOptions)}},KW=function(t,e){e===void 0&&(e={}),$R(t,e,function(n,r){var i=n.next,o=n.first;return i||r&&o})},JW=function(t,e){e===void 0&&(e={}),$R(t,e,function(n,r){var i=n.prev,o=n.last;return i||r&&o})},XR=function(t,e,n){var r,i=$W(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),o=i[n];o&&yI(o.node,e.focusOptions)},YW=function(t,e){e===void 0&&(e={}),XR(t,e,"first")},QW=function(t,e){e===void 0&&(e={}),XR(t,e,"last")};function CI(t){setTimeout(t,1)}var qW=function(e){return e&&"current"in e?e.current:e},KR=function(){return document&&document.activeElement===document.body},e9=function(){return KR()||LW()},uc=null,_r=null,fA=function(){return null},dc=null,Wd=!1,II=!1,t9=function(){return!0},n9=function(e){return(uc.whiteList||t9)(e)},r9=function(e,n){dc={observerNode:e,portaledElement:n}},i9=function(e){return dc&&dc.portaledElement===e};function pA(t,e,n,r){var i=null,o=t;do{var s=r[o];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else if(s.lockItem){if(o!==t)return;i=null}else break}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var o9=function(e){return e?!!Wd:Wd==="meanwhile"},s9=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},a9=function(e,n){return n.some(function(r){return s9(e,r,r)})},JR=function(e){return Vd(e,new Map)},l9=function(e){return!JR([e.parentNode]).some(function(n){return n.node===e})},Lp=function(){var e=!1;if(uc){var n=uc,r=n.observed,i=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,l=n.focusOptions,c=n.noFocusGuards,u=r||dc&&dc.portaledElement;if(KR()&&_r&&(!document.body.contains(_r)||l9(_r))){_r=null;var d=fA();d&&d.focus()}var h=document&&document.activeElement;if(u){var f=[u].concat(s.map(qW).filter(Boolean)),p=function(){if(!o9(a)||!c||!_r||II)return!1;var b=JR(f),k=b.findIndex(function(S){var A=S.node;return A===_r});return k===0||k===b.length-1};if((!h||n9(h))&&(i||p()||!e9()||!_r&&o)&&(u&&!(jR(f)||h&&a9(h,f)||i9(h))&&(document&&!_r&&h&&!o?(h.blur&&h.blur(),document.body.focus()):(e=zR(f,_r,{focusOptions:l}),dc={})),Wd=!1,_r=document&&document.activeElement,fA=HR(_r)),document&&h!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var g=document&&document.activeElement,C=jW(f),m=C.map(function(v){var b=v.node;return b}).indexOf(g);m>-1&&(C.filter(function(v){var b=v.guard,k=v.node;return b&&k.dataset.focusAutoGuard}).forEach(function(v){var b=v.node;return b.removeAttribute("tabIndex")}),pA(m,C.length,1,C),pA(m,-1,-1,C))}}}return e},YR=function(e){Lp()&&e&&(e.stopPropagation(),e.preventDefault())},bI=function(){return CI(Lp)},c9=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||r9(r,n)},u9=function(){return null},QR=function(){II=!0},qR=function(){II=!1,Wd="just",CI(function(){Wd="meanwhile"})},d9=function(){document.addEventListener("focusin",YR),document.addEventListener("focusout",bI),window.addEventListener("focus",QR),window.addEventListener("blur",qR)},h9=function(){document.removeEventListener("focusin",YR),document.removeEventListener("focusout",bI),window.removeEventListener("focus",QR),window.removeEventListener("blur",qR)};function f9(t){return t.filter(function(e){var n=e.disabled;return!n})}var eP={moveFocusInside:zR,focusInside:jR,focusNextElement:KW,focusPrevElement:JW,focusFirstElement:YW,focusLastElement:QW,captureFocusRestore:HR};function p9(t){var e=t.slice(-1)[0];e&&!uc&&d9();var n=uc,r=n&&e&&e.id===n.id;uc=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!e)),e?(_r=null,(!r||n.observed!==e.observed)&&e.onActivation(eP),Lp(),CI(Lp)):(h9(),_r=null)}NR.assignSyncMedium(c9);_R.assignMedium(bI);lW.assignMedium(function(t){return t(eP)});const g9=mW(f9,p9)(u9);var tP=w.forwardRef(function(e,n){return w.createElement(uI,Fd({sideCar:g9,ref:n},e))}),nP=uI.propTypes||{};nP.sideCar;YG(nP,["sideCar"]);tP.propTypes={};const m9=ut.forwardRef((t,e)=>{const[n,r]=w.useState(!1),i=w.useRef(null);return ut.useImperativeHandle(e,()=>({open(){r(!0)},close(){r(!1)}})),w.useEffect(()=>{var o;n&&((o=i.current)==null||o.focus())},[n]),w.useEffect(()=>{const o=s=>{s.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[]),X.jsx(tP,{disabled:!n,children:X.jsxs("dialog",{className:"preferences-dialog",open:n,ref:i,tabIndex:-1,"aria-label":"Preferences",children:[X.jsx("h1",{style:{color:"white",textAlign:"center",fontSize:"1.5em",padding:"0.5em",margin:"0.5em",border:"1px solid black",borderRadius:"0.5em",backgroundColor:"black"},children:"Preferences"}),n&&X.jsx(JG,{}),X.jsx("button",{onClick:()=>r(!1),children:"Close"}),X.jsx("br",{}),X.jsxs("span",{id:"commit-hash",children:["Version: ",FG]})]})})});var rP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},gA=ut.createContext&&ut.createContext(rP),v9=["attr","size","title"];function y9(t,e){if(t==null)return{};var n=C9(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function C9(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function Bp(){return Bp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Bp.apply(this,arguments)}function mA(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Fp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mA(Object(n),!0).forEach(function(r){I9(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function I9(t,e,n){return e=b9(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function b9(t){var e=w9(t,"string");return typeof e=="symbol"?e:e+""}function w9(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function iP(t){return t&&t.map((e,n)=>ut.createElement(e.tag,Fp({key:n},e.attr),iP(e.child)))}function Tl(t){return e=>ut.createElement(S9,Bp({attr:Fp({},t.attr)},e),iP(t.child))}function S9(t){var e=n=>{var{attr:r,size:i,title:o}=t,s=y9(t,v9),a=i||n.size||"1em",l;return n.className&&(l=n.className),t.className&&(l=(l?l+" ":"")+t.className),ut.createElement("svg",Bp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:l,style:Fp(Fp({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&ut.createElement("title",null,o),t.children)};return gA!==void 0?ut.createElement(gA.Consumer,null,n=>e(n)):e(rP)}function A9(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function k9(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function E9(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"},child:[]}]})(t)}function oP(t){return Tl({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function T9(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function x9(t){return Tl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function R9(t){return Tl({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const P9=({client:t,onClearLog:e,onSaveLog:n,onToggleUsers:r,onOpenPrefs:i})=>{const[o,s]=ut.useState(t.cacophony.muted);return X.jsxs("div",{className:"toolbar",children:[X.jsxs("button",{onClick:n,accessKey:"l",children:[X.jsx(oP,{}),"Save Log"]}),X.jsxs("button",{onClick:e,accessKey:"c",children:[X.jsx(E9,{}),"Clear Log"]}),X.jsxs("button",{onClick:i,accessKey:"p",children:[X.jsx(A9,{}),"Preferences"]}),X.jsxs("button",{onClick:()=>{s(!o),t.cacophony.muted=!o},accessKey:"m",children:[o?X.jsx(R9,{}):X.jsx(x9,{}),o?"Unmute":"Mute"]}),X.jsxs("label",{children:["Volume",X.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>t.cacophony.setGlobalVolume(Number(a.target.value)/100)})]}),X.jsx("button",{onClick:r,accessKey:"u",children:"Show/Hide Users"})]})};class N9 extends ut.Component{constructor(e){super(e),this.state={statusText:"Not connected"},e.client.on("statustext",n=>this.setState({statusText:n})),e.client.on("connect",()=>this.setState({statusText:"Connected"})),e.client.on("disconnect",()=>this.setState({statusText:"Disconnected"}))}render(){return X.jsx("div",{className:"statusbar",children:this.state.statusText})}}const _9=({users:t})=>X.jsxs("div",{className:"sidebar",children:[X.jsx("div",{className:"sidebar-header",role:"heading","aria-level":2,children:"Connected Players"}),X.jsx("div",{className:"sidebar-content",children:X.jsx("ul",{children:t.map(e=>{let n="";return e.away&&(n+=" away"),e.idle&&(n+=" idle"),X.jsx("li",{className:n,children:e.Name},e.Object)})})})]});var vA={};function O9(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var M9=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D9(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sP={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(M9,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function o(g,C){var m=g[C];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?s:console[g]!==void 0?o(console,g):console.log!==void 0?o(console,"log"):e}function l(g,C){for(var m=0;m<i.length;m++){var v=i[m];this[v]=m<g?e:this.methodFactory(v,g,C)}this.log=this.debug}function c(g,C,m){return function(){typeof console!==n&&(l.call(this,C,m),this[g].apply(this,arguments))}}function u(g,C,m){return a(g)||c.apply(this,arguments)}function d(g,C,m){var v=this,b;C=C??"WARN";var k="loglevel";typeof g=="string"?k+=":"+g:typeof g=="symbol"&&(k=void 0);function S(_){var O=(i[_]||"silent").toUpperCase();if(!(typeof window===n||!k)){try{window.localStorage[k]=O;return}catch{}try{window.document.cookie=encodeURIComponent(k)+"="+O+";"}catch{}}}function A(){var _;if(!(typeof window===n||!k)){try{_=window.localStorage[k]}catch{}if(typeof _===n)try{var O=window.document.cookie,B=O.indexOf(encodeURIComponent(k)+"=");B!==-1&&(_=/^([^;]+)/.exec(O.slice(B))[1])}catch{}return v.levels[_]===void 0&&(_=void 0),_}}function R(){if(!(typeof window===n||!k)){try{window.localStorage.removeItem(k);return}catch{}try{window.document.cookie=encodeURIComponent(k)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}v.name=g,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=m||u,v.getLevel=function(){return b},v.setLevel=function(_,O){if(typeof _=="string"&&v.levels[_.toUpperCase()]!==void 0&&(_=v.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=v.levels.SILENT){if(b=_,O!==!1&&S(_),l.call(v,_,g),typeof console===n&&_<v.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+_},v.setDefaultLevel=function(_){C=_,A()||v.setLevel(_,!1)},v.resetLevel=function(){v.setLevel(C,!1),R()},v.enableAll=function(_){v.setLevel(v.levels.TRACE,_)},v.disableAll=function(_){v.setLevel(v.levels.SILENT,_)};var T=A();T==null&&(T=C),v.setLevel(T,!1)}var h=new d,f={};h.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var m=f[C];return m||(m=f[C]=new d(C,h.getLevel(),h.methodFactory)),m};var p=typeof window!==n?window.log:void 0;return h.noConflict=function(){return typeof window!==n&&window.log===h&&(window.log=p),h},h.getLoggers=function(){return f},h.default=h,h})})(sP);var wI=sP.exports,z0;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(z0||(z0={}));var To;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(To||(To={}));let Ke=wI.getLogger("livekit");Ke.setDefaultLevel(z0.info);function Ts(t){const e=wI.getLogger(t);return e.setDefaultLevel(Ke.getLevel()),e}wI.getLogger("lk-e2ee");function br(t,e){if(!t)throw new Error(e)}const L9=34028234663852886e22,B9=-34028234663852886e22,F9=4294967295,U9=2147483647,V9=-2147483648;function Pf(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>U9||t<V9)throw new Error("invalid int 32: "+t)}function H0(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>F9||t<0)throw new Error("invalid uint 32: "+t)}function aP(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>L9||t<B9))throw new Error("invalid float 32: "+t)}const lP=Symbol("@bufbuild/protobuf/enum-type");function G9(t){const e=t[lP];return br(e,"missing enum type on enum object"),e}function cP(t,e,n,r){t[lP]=uP(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function uP(t,e,n){const r=Object.create(null),i=Object.create(null),o=[];for(const s of e){const a=dP(s);o.push(a),r[s.name]=a,i[s.no]=a}return{typeName:t,values:o,findName(s){return r[s]},findNumber(s){return i[s]}}}function W9(t,e,n){const r={};for(const i of e){const o=dP(i);r[o.localName]=o.no,r[o.no]=o.localName}return cP(r,t,e),r}function dP(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class be{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function j9(t,e,n,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),s={[o]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(s.prototype,new be),Object.assign(s,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,l){return new s().fromBinary(a,l)},fromJson(a,l){return new s().fromJson(a,l)},fromJsonString(a,l){return new s().fromJsonString(a,l)},equals(a,l){return t.util.equals(s,a,l)}}),s}function Z9(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makeMessageType(i,o,s){return j9(this,i,o,s)},makeEnum:W9,makeEnumType:uP,getEnumType:G9}}var te;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(te||(te={}));var gl;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(gl||(gl={}));function z9(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Vm(t,e,n){for(let o=0;o<28;o=o+7){const s=t>>>o,a=!(!(s>>>7)&&e==0),l=(a?s|128:s)&255;if(n.push(l),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const s=e>>>o,a=!!(s>>>7),l=(a?s|128:s)&255;if(n.push(l),!a)return}n.push(e>>>31&1)}}const Nf=4294967296;function yA(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function o(s,a){const l=Number(t.slice(s,a));i*=n,r=r*n+l,r>=Nf&&(i=i+(r/Nf|0),r=r%Nf)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?fP(r,i):SI(r,i)}function H9(t,e){let n=SI(t,e);const r=n.hi&2147483648;r&&(n=fP(n.lo,n.hi));const i=hP(n.lo,n.hi);return r?"-"+i:i}function hP(t,e){if({lo:t,hi:e}=$9(t,e),e<=2097151)return String(Nf*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let o=n+r*6777216+i*6710656,s=r+i*8147497,a=i*2;const l=1e7;return o>=l&&(s+=Math.floor(o/l),o%=l),s>=l&&(a+=Math.floor(s/l),s%=l),a.toString()+CA(s)+CA(o)}function $9(t,e){return{lo:t>>>0,hi:e>>>0}}function SI(t,e){return{lo:t|0,hi:e|0}}function fP(t,e){return e=~e,t?t=~t+1:e+=1,SI(t,e)}const CA=t=>{const e=String(t);return"0000000".slice(e.length)+e};function IA(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function X9(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function K9(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof vA!="object"||vA.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>o||c<i)throw new Error("int64 invalid: ".concat(l));return c},uParse(l){const c=typeof l=="bigint"?l:BigInt(l);if(c>a||c<s)throw new Error("uint64 invalid: ".concat(l));return c},enc(l){return t.setBigInt64(0,this.parse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(l){return t.setBigInt64(0,this.uParse(l),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigInt64(0,!0)},uDec(l,c){return t.setInt32(0,l,!0),t.setInt32(4,c,!0),t.getBigUint64(0,!0)}}}const n=i=>br(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>br(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),yA(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),yA(i)},dec(i,o){return H9(i,o)},uDec(i,o){return hP(i,o)}}}const Ue=K9();var $t;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})($t||($t={}));class J9{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(H0(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return Pf(e),IA(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){aP(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){H0(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){Pf(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return Pf(e),e=(e<<1^e>>31)>>>0,IA(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Ue.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Ue.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Ue.enc(e);return Vm(n.lo,n.hi,this.buf),this}sint64(e){let n=Ue.enc(e),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return Vm(i,o,this.buf),this}uint64(e){let n=Ue.uEnc(e);return Vm(n.lo,n.hi,this.buf),this}}class Y9{constructor(e,n){this.varint64=z9,this.uint32=X9,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case $t.Varint:for(;this.buf[this.pos++]&128;);break;case $t.Bit64:this.pos+=4;case $t.Bit32:this.pos+=4;break;case $t.LengthDelimited:let r=this.uint32();this.pos+=r;break;case $t.StartGroup:let i;for(;(i=this.tag()[1])!==$t.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Ue.dec(...this.varint64())}uint64(){return Ue.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Ue.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Ue.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Ue.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function $0(t,e){return e instanceof be||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}te.DOUBLE,te.FLOAT,te.INT64,te.UINT64,te.INT32,te.UINT32,te.BOOL,te.STRING,te.BYTES;function Vs(t,e,n){if(e===n)return!0;if(t==te.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case te.UINT64:case te.FIXED64:case te.INT64:case te.SFIXED64:case te.SINT64:return e==n}return!1}function X0(t,e){switch(t){case te.BOOL:return!1;case te.UINT64:case te.FIXED64:case te.INT64:case te.SFIXED64:case te.SINT64:return e==0?Ue.zero:"0";case te.DOUBLE:case te.FLOAT:return 0;case te.BYTES:return new Uint8Array(0);case te.STRING:return"";default:return 0}}function pP(t,e){const n=e===void 0;let r=$t.Varint,i=e===0;switch(t){case te.STRING:i=n||!e.length,r=$t.LengthDelimited;break;case te.BOOL:i=e===!1;break;case te.DOUBLE:r=$t.Bit64;break;case te.FLOAT:r=$t.Bit32;break;case te.INT64:i=n||e==0;break;case te.UINT64:i=n||e==0;break;case te.FIXED64:i=n||e==0,r=$t.Bit64;break;case te.BYTES:i=n||!e.byteLength,r=$t.LengthDelimited;break;case te.FIXED32:r=$t.Bit32;break;case te.SFIXED32:r=$t.Bit32;break;case te.SFIXED64:i=n||e==0,r=$t.Bit64;break;case te.SINT64:i=n||e==0;break}const o=te[t].toLowerCase();return[r,o,n||i]}const Bl=Symbol("@bufbuild/protobuf/unknown-fields"),bA={readUnknownFields:!0,readerFactory:t=>new Y9(t)},wA={writeUnknownFields:!0,writerFactory:()=>new J9};function Q9(t){return t?Object.assign(Object.assign({},bA),t):bA}function q9(t){return t?Object.assign(Object.assign({},wA),t):wA}function ej(){return{makeReadOptions:Q9,makeWriteOptions:q9,listUnknownFields(t){var e;return(e=t[Bl])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[Bl]},writeUnknownFields(t,e){const r=t[Bl];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[Bl])||(i[Bl]=[]),i[Bl].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r){const i=t.getType(),o=n===void 0?e.len:e.pos+n;for(;e.pos<o;){const[s,a]=e.tag(),l=i.fields.find(s);if(!l){const h=e.skip(a);r.readUnknownFields&&this.onUnknownField(t,s,a,h);continue}let c=t,u=l.repeated,d=l.localName;switch(l.oneof&&(c=c[l.oneof.localName],c.case!=d&&delete c.value,c.case=d,d="value"),l.kind){case"scalar":case"enum":const h=l.kind=="enum"?te.INT32:l.T;let f=Up;if(l.kind=="scalar"&&l.L>0&&(f=nj),u){let m=c[d];if(a==$t.LengthDelimited&&h!=te.STRING&&h!=te.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)m.push(f(e,h))}else m.push(f(e,h))}else c[d]=f(e,h);break;case"message":const p=l.T;u?c[d].push(_f(e,new p,r)):c[d]instanceof be?_f(e,c[d],r):(c[d]=_f(e,new p,r),p.fieldWrapper&&!l.oneof&&!l.repeated&&(c[d]=p.fieldWrapper.unwrapField(c[d])));break;case"map":let[g,C]=tj(l,e,r);c[d][g]=C;break}}}}}function _f(t,e,n){return e.getType().runtime.bin.readMessage(e,t,t.uint32(),n),e}function tj(t,e,n){const r=e.uint32(),i=e.pos+r;let o,s;for(;e.pos<i;){let[a]=e.tag();switch(a){case 1:o=Up(e,t.K);break;case 2:switch(t.V.kind){case"scalar":s=Up(e,t.V.T);break;case"enum":s=e.int32();break;case"message":s=_f(e,new t.V.T,n);break}break}}if(o===void 0){let a=X0(t.K,gl.BIGINT);o=t.K==te.BOOL?a.toString():a}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(t.V.kind){case"scalar":s=X0(t.V.T,gl.BIGINT);break;case"enum":s=0;break;case"message":s=new t.V.T;break}return[o,s]}function nj(t,e){const n=Up(t,e);return typeof n=="bigint"?n.toString():n}function Up(t,e){switch(e){case te.STRING:return t.string();case te.BOOL:return t.bool();case te.DOUBLE:return t.double();case te.FLOAT:return t.float();case te.INT32:return t.int32();case te.INT64:return t.int64();case te.UINT64:return t.uint64();case te.FIXED64:return t.fixed64();case te.BYTES:return t.bytes();case te.FIXED32:return t.fixed32();case te.SFIXED32:return t.sfixed32();case te.SFIXED64:return t.sfixed64();case te.SINT64:return t.sint64();case te.UINT32:return t.uint32();case te.SINT32:return t.sint32()}}function rj(t,e,n,r,i){t.tag(n.no,$t.LengthDelimited),t.fork();let o=r;switch(n.K){case te.INT32:case te.FIXED32:case te.UINT32:case te.SFIXED32:case te.SINT32:o=Number.parseInt(r);break;case te.BOOL:br(r=="true"||r=="false"),o=r=="true";break}switch(ld(t,n.K,1,o,!0),n.V.kind){case"scalar":ld(t,n.V.T,2,i,!0);break;case"enum":ld(t,te.INT32,2,i,!0);break;case"message":K0(t,e,n.V.T,2,i);break}t.join()}function K0(t,e,n,r,i){if(i!==void 0){const o=$0(n,i);t.tag(r,$t.LengthDelimited).bytes(o.toBinary(e))}}function ld(t,e,n,r,i){let[o,s,a]=pP(e,r);(!a||i)&&t.tag(n,o)[s](r)}function ij(t,e,n,r){if(!r.length)return;t.tag(n,$t.LengthDelimited).fork();let[,i]=pP(e);for(let o=0;o<r.length;o++)t[i](r[o]);t.join()}function oj(){return Object.assign(Object.assign({},ej()),{writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){let o,s=i.repeated,a=i.localName;if(i.oneof){const l=t[i.oneof.localName];if(l.case!==a)continue;o=l.value}else o=t[a];switch(i.kind){case"scalar":case"enum":let l=i.kind=="enum"?te.INT32:i.T;if(s)if(i.packed)ij(e,l,i.no,o);else for(const c of o)ld(e,l,i.no,c,!0);else o!==void 0&&ld(e,l,i.no,o,!!i.oneof||i.opt);break;case"message":if(s)for(const c of o)K0(e,n,i.T,i.no,c);else K0(e,n,i.T,i.no,o);break;case"map":for(const[c,u]of Object.entries(o))rj(e,n,i,c,u);break}}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}let jo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Tg=[];for(let t=0;t<jo.length;t++)Tg[jo[t].charCodeAt(0)]=t;Tg[45]=jo.indexOf("+");Tg[95]=jo.indexOf("/");const gP={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,o,s=0;for(let a=0;a<t.length;a++){if(o=Tg[t.charCodeAt(a)],o===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=o,i=1;break;case 1:n[r++]=s<<2|(o&48)>>4,s=o,i=2;break;case 2:n[r++]=(s&15)<<4|(o&60)>>2,s=o,i=3;break;case 3:n[r++]=(s&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=jo[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=jo[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=jo[i|r>>6],e+=jo[r&63],n=0;break}return n&&(e+=jo[i],e+="=",n==1&&(e+="=")),e}},SA={ignoreUnknownFields:!1},AA={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function sj(t){return t?Object.assign(Object.assign({},SA),t):SA}function aj(t){return t?Object.assign(Object.assign({},AA),t):AA}function lj(t){const e=t(cj,kA);return{makeReadOptions:sj,makeWriteOptions:aj,readMessage(n,r,i,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(this.debug(r)));o=o??new n;const s={};for(const[a,l]of Object.entries(r)){const c=n.fields.findJsonName(a);if(!c){if(!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(a,'" is unknown'));continue}let u=c.localName,d=o;if(c.oneof){if(l===null&&c.kind=="scalar")continue;const h=s[c.oneof.localName];if(h)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(c.oneof.name,'" present: "').concat(h,'", "').concat(a,'"'));s[c.oneof.localName]=a,d=d[c.oneof.localName]={case:u},u="value"}if(c.repeated){if(l===null)continue;if(!Array.isArray(l))throw new Error("cannot decode field ".concat(n.typeName,".").concat(c.name," from JSON: ").concat(this.debug(l)));const h=d[u];for(const f of l){if(f===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(c.name," from JSON: ").concat(this.debug(f)));let p;switch(c.kind){case"message":p=c.T.fromJson(f,i);break;case"enum":if(p=Gm(c.T,f,i.ignoreUnknownFields),p===void 0)continue;break;case"scalar":try{p=xu(c.T,f,c.L)}catch(g){let C="cannot decode field ".concat(n.typeName,".").concat(c.name," from JSON: ").concat(this.debug(f));throw g instanceof Error&&g.message.length>0&&(C+=": ".concat(g.message)),new Error(C)}break}h.push(p)}}else if(c.kind=="map"){if(l===null)continue;if(Array.isArray(l)||typeof l!="object")throw new Error("cannot decode field ".concat(n.typeName,".").concat(c.name," from JSON: ").concat(this.debug(l)));const h=d[u];for(const[f,p]of Object.entries(l)){if(p===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(c.name," from JSON: map value null"));let g;switch(c.V.kind){case"message":g=c.V.T.fromJson(p,i);break;case"enum":if(g=Gm(c.V.T,p,i.ignoreUnknownFields),g===void 0)continue;break;case"scalar":try{g=xu(c.V.T,p,gl.BIGINT)}catch(C){let m="cannot decode map value for field ".concat(n.typeName,".").concat(c.name," from JSON: ").concat(this.debug(l));throw C instanceof Error&&C.message.length>0&&(m+=": ".concat(C.message)),new Error(m)}break}try{h[xu(c.K,c.K==te.BOOL?f=="true"?!0:f=="false"?!1:f:f,gl.BIGINT).toString()]=g}catch(C){let m="cannot decode map key for field ".concat(n.typeName,".").concat(c.name," from JSON: ").concat(this.debug(l));throw C instanceof Error&&C.message.length>0&&(m+=": ".concat(C.message)),new Error(m)}}}else switch(c.kind){case"message":const h=c.T;if(l===null&&h.typeName!="google.protobuf.Value"){if(c.oneof)throw new Error("cannot decode field ".concat(n.typeName,".").concat(c.name,' from JSON: null is invalid for oneof field "').concat(a,'"'));continue}d[u]instanceof be?d[u].fromJson(l,i):(d[u]=h.fromJson(l,i),h.fieldWrapper&&!c.oneof&&(d[u]=h.fieldWrapper.unwrapField(d[u])));break;case"enum":const f=Gm(c.T,l,i.ignoreUnknownFields);f!==void 0&&(d[u]=f);break;case"scalar":try{d[u]=xu(c.T,l,c.L)}catch(p){let g="cannot decode field ".concat(n.typeName,".").concat(c.name," from JSON: ").concat(this.debug(l));throw p instanceof Error&&p.message.length>0&&(g+=": ".concat(p.message)),new Error(g)}break}}return o},writeMessage(n,r){const i=n.getType(),o={};let s;try{for(const a of i.fields.byMember()){let l;if(a.kind=="oneof"){const c=n[a.localName];if(c.value===void 0)continue;if(s=a.findField(c.case),!s)throw"oneof case not found: "+c.case;l=e(s,c.value,r)}else s=a,l=e(s,n[s.localName],r);l!==void 0&&(o[r.useProtoFieldName?s.name:s.jsonName]=l)}}catch(a){const l=s?"cannot encode field ".concat(i.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),c=a instanceof Error?a.message:String(a);throw new Error(l+(c.length>0?": ".concat(c):""))}return o},readScalar:xu,writeScalar:kA,debug:mP}}function mP(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function xu(t,e,n){switch(t){case te.DOUBLE:case te.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==te.FLOAT&&aP(r),r;case te.INT32:case te.FIXED32:case te.SFIXED32:case te.SINT32:case te.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return t==te.UINT32?H0(i):Pf(i),i;case te.INT64:case te.SFIXED64:case te.SINT64:if(e===null)return Ue.zero;if(typeof e!="number"&&typeof e!="string")break;const o=Ue.parse(e);return n?o.toString():o;case te.FIXED64:case te.UINT64:if(e===null)return Ue.zero;if(typeof e!="number"&&typeof e!="string")break;const s=Ue.uParse(e);return n?s.toString():s;case te.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case te.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case te.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return gP.dec(e)}throw new Error}function Gm(t,e,n){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r||n)return r==null?void 0:r.no;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(mP(e)))}function cj(t,e,n,r){var i;if(e===void 0)return e;if(e===0&&!n)return;if(r)return e;if(t.typeName=="google.protobuf.NullValue")return null;const o=t.findNumber(e);return(i=o==null?void 0:o.name)!==null&&i!==void 0?i:e}function kA(t,e,n){if(e!==void 0)switch(t){case te.INT32:case te.SFIXED32:case te.SINT32:case te.FIXED32:case te.UINT32:return br(typeof e=="number"),e!=0||n?e:void 0;case te.FLOAT:case te.DOUBLE:return br(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||n?e:void 0;case te.STRING:return br(typeof e=="string"),e.length>0||n?e:void 0;case te.BOOL:return br(typeof e=="boolean"),e||n?e:void 0;case te.UINT64:case te.FIXED64:case te.INT64:case te.SFIXED64:case te.SINT64:return br(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.toString(10):void 0;case te.BYTES:return br(e instanceof Uint8Array),n||e.byteLength>0?gP.enc(e):void 0}}function uj(){return lj((t,e)=>function(r,i,o){if(r.kind=="map"){const s={};switch(r.V.kind){case"scalar":for(const[l,c]of Object.entries(i)){const u=e(r.V.T,c,!0);br(u!==void 0),s[l.toString()]=u}break;case"message":for(const[l,c]of Object.entries(i))s[l.toString()]=c.toJson(o);break;case"enum":const a=r.V.T;for(const[l,c]of Object.entries(i)){br(c===void 0||typeof c=="number");const u=t(a,c,!0,o.enumAsInteger);br(u!==void 0),s[l.toString()]=u}break}return o.emitDefaultValues||Object.keys(s).length>0?s:void 0}else if(r.repeated){const s=[];switch(r.kind){case"scalar":for(let a=0;a<i.length;a++)s.push(e(r.T,i[a],!0));break;case"enum":for(let a=0;a<i.length;a++)s.push(t(r.T,i[a],!0,o.enumAsInteger));break;case"message":for(let a=0;a<i.length;a++)s.push($0(r.T,i[a]).toJson(o));break}return o.emitDefaultValues||s.length>0?s:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return t(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return i!==void 0?$0(r.T,i).toJson(o):void 0}})}function dj(){return{setEnumType:cP,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,o=e,s=t;if(s[i]!==void 0)switch(r.kind){case"oneof":const a=s[i].case;if(a===void 0)continue;const l=r.findField(a);let c=s[i].value;l&&l.kind=="message"&&!(c instanceof l.T)?c=new l.T(c):l&&l.kind==="scalar"&&l.T===te.BYTES&&(c=Ru(c)),o[i]={case:a,value:c};break;case"scalar":case"enum":let u=s[i];r.T===te.BYTES&&(u=r.repeated?u.map(Ru):Ru(u)),o[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===te.BYTES)for(const[f,p]of Object.entries(s[i]))o[i][f]=Ru(p);else Object.assign(o[i],s[i]);break;case"message":const h=r.V.T;for(const f of Object.keys(s[i])){let p=s[i][f];h.fieldWrapper||(p=new h(p)),o[i][f]=p}break}break;case"message":const d=r.T;if(r.repeated)o[i]=s[i].map(h=>h instanceof d?h:new d(h));else if(s[i]!==void 0){const h=s[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[i]=Ru(h):o[i]=h:o[i]=h instanceof d?h:new d(h)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((s,a)=>r.T.equals(s,o[a]));case"scalar":return i.every((s,a)=>Vs(r.T,s,o[a]));case"enum":return i.every((s,a)=>Vs(te.INT32,s,o[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return Vs(te.INT32,i,o);case"scalar":return Vs(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const s=r.findField(i.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(i.value,o.value);case"enum":return Vs(te.INT32,i.value,o.value);case"scalar":return Vs(s.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(s.kind));case"map":const a=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const l=r.V.T;return a.every(u=>l.equals(i[u],o[u]));case"enum":return a.every(u=>Vs(te.INT32,i[u],o[u]));case"scalar":const c=r.V.T;return a.every(u=>Vs(c,i[u],o[u]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const o=t[i.localName];let s;if(i.repeated)s=o.map(Kh);else if(i.kind=="map"){s=r[i.localName];for(const[a,l]of Object.entries(o))s[a]=Kh(l)}else i.kind=="oneof"?s=i.findField(o.case)?{case:o.case,value:Kh(o.value)}:{case:void 0}:s=Kh(o);r[i.localName]=s}return n}}}function Kh(t){if(t===void 0)return t;if(t instanceof be)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Ru(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class hj{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function vP(t,e){const n=yP(t);return e?n:yj(vj(n))}function fj(t){return vP(t,!1)}const pj=yP;function yP(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const gj=new Set(["constructor","toString","toJSON","valueOf"]),mj=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),CP=t=>"".concat(t,"$"),vj=t=>mj.has(t)?CP(t):t,yj=t=>gj.has(t)?CP(t):t;class Cj{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=fj(e)}addField(e){br(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const x=Z9("proto3",uj(),oj(),Object.assign(Object.assign({},dj()),{newFieldList(t){return new hj(t,Ij)},initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=X0(e.T,e.L);break}}}}));function Ij(t){var e,n,r,i;const o=[];let s;for(const a of typeof t=="function"?t():t){const l=a;if(l.localName=vP(a.name,a.oneof!==void 0),l.jsonName=(e=a.jsonName)!==null&&e!==void 0?e:pj(a.name),l.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(l.L=(r=a.L)!==null&&r!==void 0?r:gl.BIGINT),l.packed=(i=a.packed)!==null&&i!==void 0?i:a.kind=="enum"||a.kind=="scalar"&&a.T!=te.BYTES&&a.T!=te.STRING,a.oneof!==void 0){const c=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!s||s.name!=c)&&(s=new Cj(c)),l.oneof=s,s.addField(l)}o.push(l)}return o}class wn extends be{constructor(e){super(),this.seconds=Ue.zero,this.nanos=0,x.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(x.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Ue.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return wn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new wn({seconds:Ue.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new wn().fromBinary(e,n)}static fromJson(e,n){return new wn().fromJson(e,n)}static fromJsonString(e,n){return new wn().fromJsonString(e,n)}static equals(e,n){return x.util.equals(wn,e,n)}}wn.runtime=x;wn.typeName="google.protobuf.Timestamp";wn.fields=x.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var J0;(function(t){t[t.DEFAULT_AC=0]="DEFAULT_AC",t[t.OPUS=1]="OPUS",t[t.AAC=2]="AAC"})(J0||(J0={}));x.util.setEnumType(J0,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var Y0;(function(t){t[t.DEFAULT_VC=0]="DEFAULT_VC",t[t.H264_BASELINE=1]="H264_BASELINE",t[t.H264_MAIN=2]="H264_MAIN",t[t.H264_HIGH=3]="H264_HIGH",t[t.VP8=4]="VP8"})(Y0||(Y0={}));x.util.setEnumType(Y0,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var Q0;(function(t){t[t.IC_DEFAULT=0]="IC_DEFAULT",t[t.IC_JPEG=1]="IC_JPEG"})(Q0||(Q0={}));x.util.setEnumType(Q0,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var zn;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO",t[t.DATA=2]="DATA"})(zn||(zn={}));x.util.setEnumType(zn,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var Xt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CAMERA=1]="CAMERA",t[t.MICROPHONE=2]="MICROPHONE",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(Xt||(Xt={}));x.util.setEnumType(Xt,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var gn;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF"})(gn||(gn={}));x.util.setEnumType(gn,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var Ho;(function(t){t[t.POOR=0]="POOR",t[t.GOOD=1]="GOOD",t[t.EXCELLENT=2]="EXCELLENT",t[t.LOST=3]="LOST"})(Ho||(Ho={}));x.util.setEnumType(Ho,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var ji;(function(t){t[t.UNSET=0]="UNSET",t[t.DISABLED=1]="DISABLED",t[t.ENABLED=2]="ENABLED"})(ji||(ji={}));x.util.setEnumType(ji,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var ys;(function(t){t[t.UNKNOWN_REASON=0]="UNKNOWN_REASON",t[t.CLIENT_INITIATED=1]="CLIENT_INITIATED",t[t.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",t[t.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",t[t.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",t[t.ROOM_DELETED=5]="ROOM_DELETED",t[t.STATE_MISMATCH=6]="STATE_MISMATCH",t[t.JOIN_FAILURE=7]="JOIN_FAILURE"})(ys||(ys={}));x.util.setEnumType(ys,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"}]);var Vo;(function(t){t[t.RR_UNKNOWN=0]="RR_UNKNOWN",t[t.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",t[t.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",t[t.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",t[t.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(Vo||(Vo={}));x.util.setEnumType(Vo,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var jd;(function(t){t[t.SE_UNKNOWN=0]="SE_UNKNOWN",t[t.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",t[t.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(jd||(jd={}));x.util.setEnumType(jd,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let qc=class Hu extends be{constructor(e){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=Ue.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,x.util.initPartial(e,this)}static fromBinary(e,n){return new Hu().fromBinary(e,n)}static fromJson(e,n){return new Hu().fromJson(e,n)}static fromJsonString(e,n){return new Hu().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Hu,e,n)}};qc.runtime=x;qc.typeName="livekit.Room";qc.fields=x.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Ni,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8}]);class Ni extends be{constructor(e){super(),this.mime="",this.fmtpLine="",x.util.initPartial(e,this)}static fromBinary(e,n){return new Ni().fromBinary(e,n)}static fromJson(e,n){return new Ni().fromJson(e,n)}static fromJsonString(e,n){return new Ni().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Ni,e,n)}}Ni.runtime=x;Ni.typeName="livekit.Codec";Ni.fields=x.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class oa extends be{constructor(e){super(),this.enabled=!1,this.min=0,this.max=0,x.util.initPartial(e,this)}static fromBinary(e,n){return new oa().fromBinary(e,n)}static fromJson(e,n){return new oa().fromJson(e,n)}static fromJsonString(e,n){return new oa().fromJsonString(e,n)}static equals(e,n){return x.util.equals(oa,e,n)}}oa.runtime=x;oa.typeName="livekit.PlayoutDelay";oa.fields=x.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class $o extends be{constructor(e){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,x.util.initPartial(e,this)}static fromBinary(e,n){return new $o().fromBinary(e,n)}static fromJson(e,n){return new $o().fromJson(e,n)}static fromJsonString(e,n){return new $o().fromJsonString(e,n)}static equals(e,n){return x.util.equals($o,e,n)}}$o.runtime=x;$o.typeName="livekit.ParticipantPermission";$o.fields=x.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:x.getEnumType(Xt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class zr extends be{constructor(e){super(),this.sid="",this.identity="",this.state=ml.JOINING,this.tracks=[],this.metadata="",this.joinedAt=Ue.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,x.util.initPartial(e,this)}static fromBinary(e,n){return new zr().fromBinary(e,n)}static fromJson(e,n){return new zr().fromJson(e,n)}static fromJsonString(e,n){return new zr().fromJsonString(e,n)}static equals(e,n){return x.util.equals(zr,e,n)}}zr.runtime=x;zr.typeName="livekit.ParticipantInfo";zr.fields=x.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:x.getEnumType(ml)},{no:4,name:"tracks",kind:"message",T:Sr,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:$o},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8}]);var ml;(function(t){t[t.JOINING=0]="JOINING",t[t.JOINED=1]="JOINED",t[t.ACTIVE=2]="ACTIVE",t[t.DISCONNECTED=3]="DISCONNECTED"})(ml||(ml={}));x.util.setEnumType(ml,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);class sa extends be{constructor(e){super(),x.util.initPartial(e,this)}static fromBinary(e,n){return new sa().fromBinary(e,n)}static fromJson(e,n){return new sa().fromJson(e,n)}static fromJsonString(e,n){return new sa().fromJsonString(e,n)}static equals(e,n){return x.util.equals(sa,e,n)}}sa.runtime=x;sa.typeName="livekit.Encryption";sa.fields=x.util.newFieldList(()=>[]);var Pn;(function(t){t[t.NONE=0]="NONE",t[t.GCM=1]="GCM",t[t.CUSTOM=2]="CUSTOM"})(Pn||(Pn={}));x.util.setEnumType(Pn,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class Xo extends be{constructor(e){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new Xo().fromBinary(e,n)}static fromJson(e,n){return new Xo().fromJson(e,n)}static fromJsonString(e,n){return new Xo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Xo,e,n)}}Xo.runtime=x;Xo.typeName="livekit.SimulcastCodecInfo";Xo.fields=x.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:or,repeated:!0}]);class Sr extends be{constructor(e){super(),this.sid="",this.type=zn.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=Xt.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=Pn.NONE,this.stream="",x.util.initPartial(e,this)}static fromBinary(e,n){return new Sr().fromBinary(e,n)}static fromJson(e,n){return new Sr().fromJson(e,n)}static fromJsonString(e,n){return new Sr().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Sr,e,n)}}Sr.runtime=x;Sr.typeName="livekit.TrackInfo";Sr.fields=x.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:x.getEnumType(zn)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:x.getEnumType(Xt)},{no:10,name:"layers",kind:"message",T:or,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:Xo,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:x.getEnumType(Pn)},{no:17,name:"stream",kind:"scalar",T:9}]);class or extends be{constructor(e){super(),this.quality=gn.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,x.util.initPartial(e,this)}static fromBinary(e,n){return new or().fromBinary(e,n)}static fromJson(e,n){return new or().fromJson(e,n)}static fromJsonString(e,n){return new or().fromJsonString(e,n)}static equals(e,n){return x.util.equals(or,e,n)}}or.runtime=x;or.typeName="livekit.VideoLayer";or.fields=x.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:x.getEnumType(gn)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class oo extends be{constructor(e){super(),this.kind=dn.RELIABLE,this.value={case:void 0},x.util.initPartial(e,this)}static fromBinary(e,n){return new oo().fromBinary(e,n)}static fromJson(e,n){return new oo().fromJson(e,n)}static fromJsonString(e,n){return new oo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(oo,e,n)}}oo.runtime=x;oo.typeName="livekit.DataPacket";oo.fields=x.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:x.getEnumType(dn)},{no:2,name:"user",kind:"message",T:ao,oneof:"value"},{no:3,name:"speaker",kind:"message",T:Ko,oneof:"value"}]);var dn;(function(t){t[t.RELIABLE=0]="RELIABLE",t[t.LOSSY=1]="LOSSY"})(dn||(dn={}));x.util.setEnumType(dn,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class Ko extends be{constructor(e){super(),this.speakers=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new Ko().fromBinary(e,n)}static fromJson(e,n){return new Ko().fromJson(e,n)}static fromJsonString(e,n){return new Ko().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Ko,e,n)}}Ko.runtime=x;Ko.typeName="livekit.ActiveSpeakerUpdate";Ko.fields=x.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:so,repeated:!0}]);class so extends be{constructor(e){super(),this.sid="",this.level=0,this.active=!1,x.util.initPartial(e,this)}static fromBinary(e,n){return new so().fromBinary(e,n)}static fromJson(e,n){return new so().fromJson(e,n)}static fromJsonString(e,n){return new so().fromJsonString(e,n)}static equals(e,n){return x.util.equals(so,e,n)}}so.runtime=x;so.typeName="livekit.SpeakerInfo";so.fields=x.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class ao extends be{constructor(e){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new ao().fromBinary(e,n)}static fromJson(e,n){return new ao().fromJson(e,n)}static fromJsonString(e,n){return new ao().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ao,e,n)}}ao.runtime=x;ao.typeName="livekit.UserPacket";ao.fields=x.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class lo extends be{constructor(e){super(),this.participantSid="",this.trackSids=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new lo().fromBinary(e,n)}static fromJson(e,n){return new lo().fromJson(e,n)}static fromJsonString(e,n){return new lo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(lo,e,n)}}lo.runtime=x;lo.typeName="livekit.ParticipantTracks";lo.fields=x.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class Jo extends be{constructor(e){super(),this.edition=Mc.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",x.util.initPartial(e,this)}static fromBinary(e,n){return new Jo().fromBinary(e,n)}static fromJson(e,n){return new Jo().fromJson(e,n)}static fromJsonString(e,n){return new Jo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Jo,e,n)}}Jo.runtime=x;Jo.typeName="livekit.ServerInfo";Jo.fields=x.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:x.getEnumType(Mc)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var Mc;(function(t){t[t.Standard=0]="Standard",t[t.Cloud=1]="Cloud"})(Mc||(Mc={}));x.util.setEnumType(Mc,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class Yo extends be{constructor(e){super(),this.sdk=Dc.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",x.util.initPartial(e,this)}static fromBinary(e,n){return new Yo().fromBinary(e,n)}static fromJson(e,n){return new Yo().fromJson(e,n)}static fromJsonString(e,n){return new Yo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Yo,e,n)}}Yo.runtime=x;Yo.typeName="livekit.ClientInfo";Yo.fields=x.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:x.getEnumType(Dc)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var Dc;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JS=1]="JS",t[t.SWIFT=2]="SWIFT",t[t.ANDROID=3]="ANDROID",t[t.FLUTTER=4]="FLUTTER",t[t.GO=5]="GO",t[t.UNITY=6]="UNITY",t[t.REACT_NATIVE=7]="REACT_NATIVE",t[t.RUST=8]="RUST",t[t.PYTHON=9]="PYTHON",t[t.CPP=10]="CPP"})(Dc||(Dc={}));x.util.setEnumType(Dc,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class co extends be{constructor(e){super(),this.resumeConnection=ji.UNSET,this.forceRelay=ji.UNSET,x.util.initPartial(e,this)}static fromBinary(e,n){return new co().fromBinary(e,n)}static fromJson(e,n){return new co().fromJson(e,n)}static fromJsonString(e,n){return new co().fromJsonString(e,n)}static equals(e,n){return x.util.equals(co,e,n)}}co.runtime=x;co.typeName="livekit.ClientConfiguration";co.fields=x.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:uo},{no:2,name:"screen",kind:"message",T:uo},{no:3,name:"resume_connection",kind:"enum",T:x.getEnumType(ji)},{no:4,name:"disabled_codecs",kind:"message",T:Qo},{no:5,name:"force_relay",kind:"enum",T:x.getEnumType(ji)}]);class uo extends be{constructor(e){super(),this.hardwareEncoder=ji.UNSET,x.util.initPartial(e,this)}static fromBinary(e,n){return new uo().fromBinary(e,n)}static fromJson(e,n){return new uo().fromJson(e,n)}static fromJsonString(e,n){return new uo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(uo,e,n)}}uo.runtime=x;uo.typeName="livekit.VideoConfiguration";uo.fields=x.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:x.getEnumType(ji)}]);class Qo extends be{constructor(e){super(),this.codecs=[],this.publish=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new Qo().fromBinary(e,n)}static fromJson(e,n){return new Qo().fromJson(e,n)}static fromJsonString(e,n){return new Qo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Qo,e,n)}}Qo.runtime=x;Qo.typeName="livekit.DisabledCodecs";Qo.fields=x.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:Ni,repeated:!0},{no:2,name:"publish",kind:"message",T:Ni,repeated:!0}]);class ho extends be{constructor(e){super(),this.duration=0,this.startTimestamp=Ue.zero,this.endTimestamp=Ue.zero,this.rtpClockTicks=Ue.zero,this.driftSamples=Ue.zero,this.driftMs=0,this.clockRate=0,x.util.initPartial(e,this)}static fromBinary(e,n){return new ho().fromBinary(e,n)}static fromJson(e,n){return new ho().fromJson(e,n)}static fromJsonString(e,n){return new ho().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ho,e,n)}}ho.runtime=x;ho.typeName="livekit.RTPDrift";ho.fields=x.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:wn},{no:2,name:"end_time",kind:"message",T:wn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class aa extends be{constructor(e){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=Ue.zero,this.headerBytes=Ue.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=Ue.zero,this.headerBytesDuplicate=Ue.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=Ue.zero,this.headerBytesPadding=Ue.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,x.util.initPartial(e,this)}static fromBinary(e,n){return new aa().fromBinary(e,n)}static fromJson(e,n){return new aa().fromJson(e,n)}static fromJsonString(e,n){return new aa().fromJsonString(e,n)}static equals(e,n){return x.util.equals(aa,e,n)}}aa.runtime=x;aa.typeName="livekit.RTPStats";aa.fields=x.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:wn},{no:2,name:"end_time",kind:"message",T:wn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:wn},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:wn},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:wn},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:wn},{no:44,name:"packet_drift",kind:"message",T:ho},{no:45,name:"report_drift",kind:"message",T:ho}]);class la extends be{constructor(e){super(),this.unixMicro=Ue.zero,this.ticks=0,x.util.initPartial(e,this)}static fromBinary(e,n){return new la().fromBinary(e,n)}static fromJson(e,n){return new la().fromJson(e,n)}static fromJsonString(e,n){return new la().fromJsonString(e,n)}static equals(e,n){return x.util.equals(la,e,n)}}la.runtime=x;la.typeName="livekit.TimedVersion";la.fields=x.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const Pu=7e3,bj=[0,300,2*2*300,3*3*300,4*4*300,Pu,Pu,Pu,Pu,Pu];class wj{constructor(e){this._retryDelays=e!==void 0?[...e]:bj}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function G(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(a,l)}c((r=r.apply(t,[])).next())})}function EA(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vl(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof EA=="function"?EA(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,l){s=t[o](s),i(a,l,s.done,s.value)})}}function i(o,s,a,l){Promise.resolve(l).then(function(c){o({value:c,done:a})},s)}}var AI={exports:{}},hc=typeof Reflect=="object"?Reflect:null,TA=hc&&typeof hc.apply=="function"?hc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Of;hc&&typeof hc.ownKeys=="function"?Of=hc.ownKeys:Object.getOwnPropertySymbols?Of=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Of=function(e){return Object.getOwnPropertyNames(e)};function Sj(t){console&&console.warn&&console.warn(t)}var IP=Number.isNaN||function(e){return e!==e};function mt(){mt.init.call(this)}AI.exports=mt;AI.exports.once=Tj;mt.EventEmitter=mt;mt.prototype._events=void 0;mt.prototype._eventsCount=0;mt.prototype._maxListeners=void 0;var xA=10;function xg(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(mt,"defaultMaxListeners",{enumerable:!0,get:function(){return xA},set:function(t){if(typeof t!="number"||t<0||IP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");xA=t}});mt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};mt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||IP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function bP(t){return t._maxListeners===void 0?mt.defaultMaxListeners:t._maxListeners}mt.prototype.getMaxListeners=function(){return bP(this)};mt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var l=o[e];if(l===void 0)return!1;if(typeof l=="function")TA(l,this,n);else for(var c=l.length,u=EP(l,c),r=0;r<c;++r)TA(u[r],this,n);return!0};function wP(t,e,n,r){var i,o,s;if(xg(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=bP(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,Sj(a)}return t}mt.prototype.addListener=function(e,n){return wP(this,e,n,!1)};mt.prototype.on=mt.prototype.addListener;mt.prototype.prependListener=function(e,n){return wP(this,e,n,!0)};function Aj(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function SP(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=Aj.bind(r);return i.listener=n,r.wrapFn=i,i}mt.prototype.once=function(e,n){return xg(n),this.on(e,SP(this,e,n)),this};mt.prototype.prependOnceListener=function(e,n){return xg(n),this.prependListener(e,SP(this,e,n)),this};mt.prototype.removeListener=function(e,n){var r,i,o,s,a;if(xg(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():kj(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};mt.prototype.off=mt.prototype.removeListener;mt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function AP(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?Ej(i):EP(i,i.length)}mt.prototype.listeners=function(e){return AP(this,e,!0)};mt.prototype.rawListeners=function(e){return AP(this,e,!1)};mt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):kP.call(t,e)};mt.prototype.listenerCount=kP;function kP(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}mt.prototype.eventNames=function(){return this._eventsCount>0?Of(this._events):[]};function EP(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function kj(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function Ej(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function Tj(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}TP(t,e,o,{once:!0}),e!=="error"&&xj(t,i,{once:!0})})}function xj(t,e,n){typeof t.on=="function"&&TP(t,"error",e,n)}function TP(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var Mo=AI.exports;let xP=!0,RP=!0;function Mf(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function xl(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==e)return i.apply(this,arguments);const l=c=>{const u=n(c);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,l),i.apply(this,[s,l])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(a))return o.apply(this,arguments);const l=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,l])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function Rj(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(xP=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Pj(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(RP=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function PP(){if(typeof window=="object"){if(xP)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function kI(t,e){RP&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Nj(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Mf(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=Mf(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Mf(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function RA(t){return Object.prototype.toString.call(t)==="[object Object]"}function NP(t){return RA(t)?Object.keys(t).reduce(function(e,n){const r=RA(t[n]),i=r?NP(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function q0(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?q0(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{q0(t,t.get(i),n)})}))}function PA(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&o.push(s)}),o.forEach(s=>{t.forEach(a=>{a.type===r&&a.trackId===s.id&&q0(t,a,i)})}),i}const NA=PP;function _P(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const l={};return Object.keys(a).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof a[c]=="object"?a[c]:{ideal:a[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,f){return h?h+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(u.ideal!==void 0){l.optional=l.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",c)]=u.ideal,l.optional.push(h),h={},h[d("max",c)]=u.ideal,l.optional.push(h)):(h[d("",c)]=u.ideal,l.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(l.mandatory=l.mandatory||{},l.mandatory[d("",c)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(l.mandatory=l.mandatory||{},l.mandatory[d(h,c)]=u[h])})}),a.advanced&&(l.optional=(l.optional||[]).concat(a.advanced)),l},i=function(a,l){if(e.version>=61)return l(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const c=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),c(a.audio,"autoGainControl","googAutoGainControl"),c(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let c=a.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(p=>p.kind==="videoinput");let f=h.find(p=>d.some(g=>p.label.toLowerCase().includes(g)));return!f&&h.length&&d.includes("back")&&(f=h[h.length-1]),f&&(a.video.deviceId=c.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=r(a.video),NA("chrome: "+JSON.stringify(a)),l(a)})}a.video=r(a.video)}return NA("chrome: "+JSON.stringify(a)),l(a)},o=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,l,c){i(a,u=>{n.webkitGetUserMedia(u,l,d=>{c&&c(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(l){return i(l,c=>a(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function _j(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),t.navigator.mediaDevices.getUserMedia(r)})}}}function OP(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function MP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else xl(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function DP(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,l){let c=i.apply(this,arguments);return c||(c=e(this,a),this._senders.push(c)),c};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const l=this._senders.indexOf(a);l!==-1&&this._senders.splice(l,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(l=>l.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function LP(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const s=function(l){const c={};return l.result().forEach(d=>{const h={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(f=>{h[f]=d.stat(f)}),c[h.id]=h}),c},a=function(l){return new Map(Object.keys(l).map(c=>[c,l[c]]))};if(arguments.length>=2){const l=function(c){i(a(s(c)))};return e.apply(this,[l,r])}return new Promise((l,c)=>{e.apply(this,[function(u){l(a(s(u)))},c])}).then(i,o)}}function BP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>PA(s,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),xl(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>PA(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function FP(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const l=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(l)===-1&&this._shimmedLocalStreams[a.id].push(l):this._shimmedLocalStreams[a.id]=[a,l],l};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const l=this.getSenders().filter(c=>a.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(l)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const l=this._shimmedLocalStreams[a].indexOf(s);l!==-1&&this._shimmedLocalStreams[a].splice(l,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function UP(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return FP(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(f=>f.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(g=>g===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new t.MediaStream([u]);this._streams[d.id]=g,this._reverseStreams[g.id]=d,this.addStream(g)}return this.getSenders().find(g=>g.track===u)};function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const f=c._reverseStreams[h],p=c._streams[f.id];d=d.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(h=>{const f=c._reverseStreams[h],p=c._streams[f.id];d=d.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],d={[c](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const g=o(this,p);h[0].apply(null,[g])},p=>{h[1]&&h[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>o(this,p))}};t.RTCPeerConnection.prototype[c]=d[c]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const l=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=l.get.apply(this);return c.type===""?c:o(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(g=>u.track===g)&&(h=this._streams[f])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function ey(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function VP(t,e){xl(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var _A=Object.freeze({__proto__:null,fixNegotiationNeeded:VP,shimAddTrackRemoveTrack:UP,shimAddTrackRemoveTrackWithNative:FP,shimGetDisplayMedia:_j,shimGetSendersWithDtmf:DP,shimGetStats:LP,shimGetUserMedia:_P,shimMediaStream:OP,shimOnTrack:MP,shimPeerConnection:ey,shimSenderReceiverGetStats:BP});function GP(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){kI("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,a,l){a in s&&!(l in s)&&(s[l]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function Oj(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function WP(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function ty(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(l=>{if(e.version<53&&!s)try{l.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;l.forEach((u,d)=>{l.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return l}).then(s,a)}}function jP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function ZP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),xl(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function zP(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){kI("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function HP(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function $P(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function XP(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function KP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function JP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var OA=Object.freeze({__proto__:null,shimAddTransceiver:$P,shimCreateAnswer:JP,shimCreateOffer:KP,shimGetDisplayMedia:Oj,shimGetParameters:XP,shimGetUserMedia:GP,shimOnTrack:WP,shimPeerConnection:ty,shimRTCDataChannel:HP,shimReceiverGetStats:ZP,shimRemoveStream:zP,shimSenderGetStats:jP});function YP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function QP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function qP(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[d]);return u?(h.then(c,u),Promise.resolve()):h};let a=function(l,c,u){const d=i.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(l,c,u){const d=o.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(l,c,u){const d=s.apply(this,[l]);return u?(d.then(c,u),Promise.resolve()):d},e.addIceCandidate=a}function eN(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(tN(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function tN(t){return t&&t.video!==void 0?Object.assign({},t,{video:NP(t.video)}):t}function nN(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];a.urls===void 0&&a.url?(kI("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function rN(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function iN(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function oN(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var MA=Object.freeze({__proto__:null,shimAudioContext:oN,shimCallbacksAPI:qP,shimConstraints:tN,shimCreateOfferLegacy:iN,shimGetUserMedia:eN,shimLocalStreamsAPI:YP,shimRTCIceServerUrls:nN,shimRemoteStreamsAPI:QP,shimTrackEventTransceiver:rN}),sN={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let a=3;a<o.length;a++){const l=o[a],c=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(c){const u=e.parseRtpMap(c),d=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const s=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{s.forEach(l=>{a.rtcpFeedback.find(u=>u.type===l.type&&u.parameter===l.parameter)||a.rtcpFeedback.push(l)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),l=a.length>0&&a[0].ssrc;let c;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===l&&(c=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let f={ssrc:l,codecPayloadType:parseInt(h.parameters.apt,10)};l&&c&&(f.rtx={ssrc:c}),r.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:l,mechanism:s?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&l&&r.push({ssrc:l});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(h=>{h.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const l=a[0].substring(10).split(" ");return{port:parseInt(l[0],10),protocol:l[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(sN);var aN=sN.exports,fc=D9(aN),Mj=O9({__proto__:null,default:fc},[aN]);function Df(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),o=fc.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,xl(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ny(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||xl(t,"icecandidate",e=>{if(e.candidate){const n=fc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Lf(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const l=fc.splitSections(a.sdp);return l.shift(),l.some(c=>{const u=fc.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const l=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(l===null||l.length<2)return-1;const c=parseInt(l[1],10);return c!==c?-1:c},i=function(a){let l=65536;return e.browser==="firefox"&&(e.version<57?a===-1?l=16384:l=2147483637:e.version<60?l=e.version===57?65535:65536:l=2147483637),l},o=function(a,l){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=fc.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substring(19),10):e.browser==="firefox"&&l!==-1&&(c=2147483637),c},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:l}=this.getConfiguration();l==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const l=r(arguments[0]),c=i(l),u=o(arguments[0],l);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return s.apply(this,arguments)}}function Bf(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const a=arguments[0],l=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&l>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},xl(t,"datachannel",r=>(e(r.channel,r.target),r))}function ry(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function iy(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Ff(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Uf(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var Dj=Object.freeze({__proto__:null,removeExtmapAllowMixed:iy,shimAddIceCandidateNullOrEmpty:Ff,shimConnectionState:ry,shimMaxMessageSize:Lf,shimParameterlessSetLocalDescription:Uf,shimRTCIceCandidate:Df,shimRTCIceCandidateRelayProtocol:ny,shimSendThrowTypeError:Bf});function Lj(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=PP,r=Nj(t),i={browserDetails:r,commonShim:Dj,extractVersion:Mf,disableLog:Rj,disableWarnings:Pj,sdp:Mj};switch(r.browser){case"chrome":if(!_A||!ey||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=_A,Ff(t,r),Uf(t),_P(t,r),OP(t),ey(t,r),MP(t),UP(t,r),DP(t),LP(t),BP(t),VP(t,r),Df(t),ny(t),ry(t),Lf(t,r),Bf(t),iy(t,r);break;case"firefox":if(!OA||!ty||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=OA,Ff(t,r),Uf(t),GP(t,r),ty(t,r),WP(t),zP(t),jP(t),ZP(t),HP(t),$P(t),XP(t),KP(t),JP(t),Df(t),ry(t),Lf(t,r),Bf(t);break;case"safari":if(!MA||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=MA,Ff(t,r),Uf(t),nN(t),iN(t),qP(t),YP(t),QP(t),rN(t),eN(t),oN(t),Df(t),ny(t),Lf(t,r),Bf(t),iy(t,r);break;default:n("Unsupported browser!");break}return i}Lj({window:typeof window>"u"?void 0:window});const Bj=10,Jh="lk_e2ee",Fj="LKFrameEncryptionKey",Uj={sharedKey:!1,ratchetSalt:Fj,ratchetWindowSize:8,failureTolerance:Bj};var Ca;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Ca||(Ca={}));var DA;(function(t){t.KeyRatcheted="keyRatcheted"})(DA||(DA={}));var ca;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(ca||(ca={}));var LA;(function(t){t.Error="cryptorError"})(LA||(LA={}));function Vj(){return Gj()||oy()}function oy(){return typeof window.RTCRtpScriptTransform<"u"}function Gj(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class Y$ extends Mo.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{Ke.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},Uj),e),this.on(Ca.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Ca.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Ca.RatchetRequest,e,n)}}class eu extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}class wt extends eu{constructor(e,n,r){super(1,e),this.status=r,this.reason=n}}class EI extends eu{constructor(e){super(21,e??"device is unsupported")}}class no extends eu{constructor(e){super(20,e??"track is invalid")}}class Wj extends eu{constructor(e){super(10,e??"unsupported server")}}class un extends eu{constructor(e){super(12,e??"unexpected connection state")}}class sy extends eu{constructor(e){super(13,e??"unable to negotiate")}}var Zd;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Zd||(Zd={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Zd||(Zd={}));var ne;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.StateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged"})(ne||(ne={}));var se;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded"})(se||(se={}));var Ee;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished"})(Ee||(Ee={}));var ge;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed"})(ge||(ge={}));function TI(t,e,n){var r,i,o;e===void 0&&(e=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,l=n.maxWait,c=Date.now(),u=[];function d(){if(l!==void 0){var f=Date.now()-c;if(f+e>=l)return l-f}return e}var h=function(){var f=[].slice.call(arguments),p=this;return new Promise(function(g,C){var m=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,c=Date.now(),!s){var b=t.apply(p,f);a&&a(b),u.forEach(function(k){return(0,k.resolve)(b)}),u=[]}},d()),m){var v=t.apply(p,f);return a&&a(v),g(v)}u.push({resolve:g,reject:C})})};return h.cancel=function(f){o!==void 0&&clearTimeout(o),u.forEach(function(p){return(0,p.reject)(f)}),u=[]},h}const jj=/version\/(\d+(\.?_?\d+)+)/i;let Wm;function xs(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Wm===void 0||e){const r=Zj.find(i=>{let{test:o}=i;return o.test(n)});Wm=r==null?void 0:r.describe(n)}return Wm}const Zj=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:jm(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:jm(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:jm(jj,t),os:t.includes("mobile/")?"iOS":"macOS"}}}];function jm(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}var zj="1.15.13";const Hj=zj,$j=11;class _n{}_n.setTimeout=function(){return setTimeout(...arguments)};_n.setInterval=function(){return setInterval(...arguments)};_n.clearTimeout=function(){return clearTimeout(...arguments)};_n.clearInterval=function(){return clearInterval(...arguments)};class pt{constructor(e,n,r,i,o){this.width=e,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const Xj=["vp8","h264"],lN=["vp8","h264","vp9","av1"];function Kj(t){return!!Xj.find(e=>e===t)}var Vp;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:2e4},t.music={maxBitrate:32e3},t.musicStereo={maxBitrate:48e3},t.musicHighQuality={maxBitrate:64e3},t.musicHighQualityStereo={maxBitrate:96e3}})(Vp||(Vp={}));const zd={h90:new pt(160,90,9e4,20),h180:new pt(320,180,16e4,20),h216:new pt(384,216,18e4,20),h360:new pt(640,360,45e4,20),h540:new pt(960,540,8e5,25),h720:new pt(1280,720,17e5,30),h1080:new pt(1920,1080,3e6,30),h1440:new pt(2560,1440,5e6,30),h2160:new pt(3840,2160,8e6,30)},ay={h120:new pt(160,120,7e4,20),h180:new pt(240,180,125e3,20),h240:new pt(320,240,14e4,20),h360:new pt(480,360,33e4,20),h480:new pt(640,480,5e5,20),h540:new pt(720,540,6e5,25),h720:new pt(960,720,13e5,30),h1080:new pt(1440,1080,23e5,30),h1440:new pt(1920,1440,38e5,30)},xI={h360fps3:new pt(640,360,2e5,3,"medium"),h360fps15:new pt(640,360,4e5,15,"medium"),h720fps5:new pt(1280,720,8e5,5,"medium"),h720fps15:new pt(1280,720,15e5,15,"medium"),h720fps30:new pt(1280,720,2e6,30,"medium"),h1080fps15:new pt(1920,1080,25e5,15,"medium"),h1080fps30:new pt(1920,1080,5e6,30,"medium"),original:new pt(0,0,7e6,30,"medium")};var Hn;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(Hn||(Hn={}));x.util.setEnumType(Hn,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var vl;(function(t){t[t.ACTIVE=0]="ACTIVE",t[t.PAUSED=1]="PAUSED"})(vl||(vl={}));x.util.setEnumType(vl,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var Gp;(function(t){t[t.UDP=0]="UDP",t[t.TCP=1]="TCP",t[t.TLS=2]="TLS"})(Gp||(Gp={}));x.util.setEnumType(Gp,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class qo extends be{constructor(e){super(),this.message={case:void 0},x.util.initPartial(e,this)}static fromBinary(e,n){return new qo().fromBinary(e,n)}static fromJson(e,n){return new qo().fromJson(e,n)}static fromJsonString(e,n){return new qo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(qo,e,n)}}qo.runtime=x;qo.typeName="livekit.SignalRequest";qo.fields=x.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:sr,oneof:"message"},{no:2,name:"answer",kind:"message",T:sr,oneof:"message"},{no:3,name:"trickle",kind:"message",T:Mi,oneof:"message"},{no:4,name:"add_track",kind:"message",T:Oi,oneof:"message"},{no:5,name:"mute",kind:"message",T:Di,oneof:"message"},{no:6,name:"subscription",kind:"message",T:ai,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:po,oneof:"message"},{no:8,name:"leave",kind:"message",T:li,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:go,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Co,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:Io,oneof:"message"},{no:13,name:"simulate",kind:"message",T:Rn,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:mo,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:wo,oneof:"message"}]);class fo extends be{constructor(e){super(),this.message={case:void 0},x.util.initPartial(e,this)}static fromBinary(e,n){return new fo().fromBinary(e,n)}static fromJson(e,n){return new fo().fromJson(e,n)}static fromJsonString(e,n){return new fo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(fo,e,n)}}fo.runtime=x;fo.typeName="livekit.SignalResponse";fo.fields=x.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:es,oneof:"message"},{no:2,name:"answer",kind:"message",T:sr,oneof:"message"},{no:3,name:"offer",kind:"message",T:sr,oneof:"message"},{no:4,name:"trickle",kind:"message",T:Mi,oneof:"message"},{no:5,name:"update",kind:"message",T:rs,oneof:"message"},{no:6,name:"track_published",kind:"message",T:Li,oneof:"message"},{no:8,name:"leave",kind:"message",T:li,oneof:"message"},{no:9,name:"mute",kind:"message",T:Di,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:is,oneof:"message"},{no:11,name:"room_update",kind:"message",T:os,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:as,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:cs,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:ds,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:hs,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:ns,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:ts,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:fs,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:gs,oneof:"message"}]);class _i extends be{constructor(e){super(),this.codec="",this.cid="",x.util.initPartial(e,this)}static fromBinary(e,n){return new _i().fromBinary(e,n)}static fromJson(e,n){return new _i().fromJson(e,n)}static fromJsonString(e,n){return new _i().fromJsonString(e,n)}static equals(e,n){return x.util.equals(_i,e,n)}}_i.runtime=x;_i.typeName="livekit.SimulcastCodec";_i.fields=x.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class Oi extends be{constructor(e){super(),this.cid="",this.name="",this.type=zn.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=Xt.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=Pn.NONE,this.stream="",x.util.initPartial(e,this)}static fromBinary(e,n){return new Oi().fromBinary(e,n)}static fromJson(e,n){return new Oi().fromJson(e,n)}static fromJsonString(e,n){return new Oi().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Oi,e,n)}}Oi.runtime=x;Oi.typeName="livekit.AddTrackRequest";Oi.fields=x.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:x.getEnumType(zn)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:x.getEnumType(Xt)},{no:9,name:"layers",kind:"message",T:or,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:_i,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:x.getEnumType(Pn)},{no:15,name:"stream",kind:"scalar",T:9}]);class Mi extends be{constructor(e){super(),this.candidateInit="",this.target=Hn.PUBLISHER,x.util.initPartial(e,this)}static fromBinary(e,n){return new Mi().fromBinary(e,n)}static fromJson(e,n){return new Mi().fromJson(e,n)}static fromJsonString(e,n){return new Mi().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Mi,e,n)}}Mi.runtime=x;Mi.typeName="livekit.TrickleRequest";Mi.fields=x.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:x.getEnumType(Hn)}]);class Di extends be{constructor(e){super(),this.sid="",this.muted=!1,x.util.initPartial(e,this)}static fromBinary(e,n){return new Di().fromBinary(e,n)}static fromJson(e,n){return new Di().fromJson(e,n)}static fromJsonString(e,n){return new Di().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Di,e,n)}}Di.runtime=x;Di.typeName="livekit.MuteTrackRequest";Di.fields=x.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class es extends be{constructor(e){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),x.util.initPartial(e,this)}static fromBinary(e,n){return new es().fromBinary(e,n)}static fromJson(e,n){return new es().fromJson(e,n)}static fromJsonString(e,n){return new es().fromJsonString(e,n)}static equals(e,n){return x.util.equals(es,e,n)}}es.runtime=x;es.typeName="livekit.JoinResponse";es.fields=x.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:qc},{no:2,name:"participant",kind:"message",T:zr},{no:3,name:"other_participants",kind:"message",T:zr,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:vo,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:co},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Jo},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class ts extends be{constructor(e){super(),this.iceServers=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new ts().fromBinary(e,n)}static fromJson(e,n){return new ts().fromJson(e,n)}static fromJsonString(e,n){return new ts().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ts,e,n)}}ts.runtime=x;ts.typeName="livekit.ReconnectResponse";ts.fields=x.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:vo,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:co}]);class Li extends be{constructor(e){super(),this.cid="",x.util.initPartial(e,this)}static fromBinary(e,n){return new Li().fromBinary(e,n)}static fromJson(e,n){return new Li().fromJson(e,n)}static fromJsonString(e,n){return new Li().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Li,e,n)}}Li.runtime=x;Li.typeName="livekit.TrackPublishedResponse";Li.fields=x.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:Sr}]);class ns extends be{constructor(e){super(),this.trackSid="",x.util.initPartial(e,this)}static fromBinary(e,n){return new ns().fromBinary(e,n)}static fromJson(e,n){return new ns().fromJson(e,n)}static fromJsonString(e,n){return new ns().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ns,e,n)}}ns.runtime=x;ns.typeName="livekit.TrackUnpublishedResponse";ns.fields=x.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class sr extends be{constructor(e){super(),this.type="",this.sdp="",x.util.initPartial(e,this)}static fromBinary(e,n){return new sr().fromBinary(e,n)}static fromJson(e,n){return new sr().fromJson(e,n)}static fromJsonString(e,n){return new sr().fromJsonString(e,n)}static equals(e,n){return x.util.equals(sr,e,n)}}sr.runtime=x;sr.typeName="livekit.SessionDescription";sr.fields=x.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class rs extends be{constructor(e){super(),this.participants=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new rs().fromBinary(e,n)}static fromJson(e,n){return new rs().fromJson(e,n)}static fromJsonString(e,n){return new rs().fromJsonString(e,n)}static equals(e,n){return x.util.equals(rs,e,n)}}rs.runtime=x;rs.typeName="livekit.ParticipantUpdate";rs.fields=x.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:zr,repeated:!0}]);class ai extends be{constructor(e){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new ai().fromBinary(e,n)}static fromJson(e,n){return new ai().fromJson(e,n)}static fromJsonString(e,n){return new ai().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ai,e,n)}}ai.runtime=x;ai.typeName="livekit.UpdateSubscription";ai.fields=x.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:lo,repeated:!0}]);class po extends be{constructor(e){super(),this.trackSids=[],this.disabled=!1,this.quality=gn.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,x.util.initPartial(e,this)}static fromBinary(e,n){return new po().fromBinary(e,n)}static fromJson(e,n){return new po().fromJson(e,n)}static fromJsonString(e,n){return new po().fromJsonString(e,n)}static equals(e,n){return x.util.equals(po,e,n)}}po.runtime=x;po.typeName="livekit.UpdateTrackSettings";po.fields=x.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:x.getEnumType(gn)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class li extends be{constructor(e){super(),this.canReconnect=!1,this.reason=ys.UNKNOWN_REASON,x.util.initPartial(e,this)}static fromBinary(e,n){return new li().fromBinary(e,n)}static fromJson(e,n){return new li().fromJson(e,n)}static fromJsonString(e,n){return new li().fromJsonString(e,n)}static equals(e,n){return x.util.equals(li,e,n)}}li.runtime=x;li.typeName="livekit.LeaveRequest";li.fields=x.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:x.getEnumType(ys)}]);class go extends be{constructor(e){super(),this.trackSid="",this.layers=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new go().fromBinary(e,n)}static fromJson(e,n){return new go().fromJson(e,n)}static fromJsonString(e,n){return new go().fromJsonString(e,n)}static equals(e,n){return x.util.equals(go,e,n)}}go.runtime=x;go.typeName="livekit.UpdateVideoLayers";go.fields=x.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:or,repeated:!0}]);class mo extends be{constructor(e){super(),this.metadata="",this.name="",x.util.initPartial(e,this)}static fromBinary(e,n){return new mo().fromBinary(e,n)}static fromJson(e,n){return new mo().fromJson(e,n)}static fromJsonString(e,n){return new mo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(mo,e,n)}}mo.runtime=x;mo.typeName="livekit.UpdateParticipantMetadata";mo.fields=x.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class vo extends be{constructor(e){super(),this.urls=[],this.username="",this.credential="",x.util.initPartial(e,this)}static fromBinary(e,n){return new vo().fromBinary(e,n)}static fromJson(e,n){return new vo().fromJson(e,n)}static fromJsonString(e,n){return new vo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(vo,e,n)}}vo.runtime=x;vo.typeName="livekit.ICEServer";vo.fields=x.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class is extends be{constructor(e){super(),this.speakers=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new is().fromBinary(e,n)}static fromJson(e,n){return new is().fromJson(e,n)}static fromJsonString(e,n){return new is().fromJsonString(e,n)}static equals(e,n){return x.util.equals(is,e,n)}}is.runtime=x;is.typeName="livekit.SpeakersChanged";is.fields=x.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:so,repeated:!0}]);class os extends be{constructor(e){super(),x.util.initPartial(e,this)}static fromBinary(e,n){return new os().fromBinary(e,n)}static fromJson(e,n){return new os().fromJson(e,n)}static fromJsonString(e,n){return new os().fromJsonString(e,n)}static equals(e,n){return x.util.equals(os,e,n)}}os.runtime=x;os.typeName="livekit.RoomUpdate";os.fields=x.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:qc}]);class ss extends be{constructor(e){super(),this.participantSid="",this.quality=Ho.POOR,this.score=0,x.util.initPartial(e,this)}static fromBinary(e,n){return new ss().fromBinary(e,n)}static fromJson(e,n){return new ss().fromJson(e,n)}static fromJsonString(e,n){return new ss().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ss,e,n)}}ss.runtime=x;ss.typeName="livekit.ConnectionQualityInfo";ss.fields=x.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:x.getEnumType(Ho)},{no:3,name:"score",kind:"scalar",T:2}]);class as extends be{constructor(e){super(),this.updates=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new as().fromBinary(e,n)}static fromJson(e,n){return new as().fromJson(e,n)}static fromJsonString(e,n){return new as().fromJsonString(e,n)}static equals(e,n){return x.util.equals(as,e,n)}}as.runtime=x;as.typeName="livekit.ConnectionQualityUpdate";as.fields=x.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:ss,repeated:!0}]);class ls extends be{constructor(e){super(),this.participantSid="",this.trackSid="",this.state=vl.ACTIVE,x.util.initPartial(e,this)}static fromBinary(e,n){return new ls().fromBinary(e,n)}static fromJson(e,n){return new ls().fromJson(e,n)}static fromJsonString(e,n){return new ls().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ls,e,n)}}ls.runtime=x;ls.typeName="livekit.StreamStateInfo";ls.fields=x.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:x.getEnumType(vl)}]);class cs extends be{constructor(e){super(),this.streamStates=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new cs().fromBinary(e,n)}static fromJson(e,n){return new cs().fromJson(e,n)}static fromJsonString(e,n){return new cs().fromJsonString(e,n)}static equals(e,n){return x.util.equals(cs,e,n)}}cs.runtime=x;cs.typeName="livekit.StreamStateUpdate";cs.fields=x.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:ls,repeated:!0}]);class Bi extends be{constructor(e){super(),this.quality=gn.LOW,this.enabled=!1,x.util.initPartial(e,this)}static fromBinary(e,n){return new Bi().fromBinary(e,n)}static fromJson(e,n){return new Bi().fromJson(e,n)}static fromJsonString(e,n){return new Bi().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Bi,e,n)}}Bi.runtime=x;Bi.typeName="livekit.SubscribedQuality";Bi.fields=x.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:x.getEnumType(gn)},{no:2,name:"enabled",kind:"scalar",T:8}]);class us extends be{constructor(e){super(),this.codec="",this.qualities=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new us().fromBinary(e,n)}static fromJson(e,n){return new us().fromJson(e,n)}static fromJsonString(e,n){return new us().fromJsonString(e,n)}static equals(e,n){return x.util.equals(us,e,n)}}us.runtime=x;us.typeName="livekit.SubscribedCodec";us.fields=x.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:Bi,repeated:!0}]);class ds extends be{constructor(e){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new ds().fromBinary(e,n)}static fromJson(e,n){return new ds().fromJson(e,n)}static fromJsonString(e,n){return new ds().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ds,e,n)}}ds.runtime=x;ds.typeName="livekit.SubscribedQualityUpdate";ds.fields=x.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:Bi,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:us,repeated:!0}]);class yo extends be{constructor(e){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",x.util.initPartial(e,this)}static fromBinary(e,n){return new yo().fromBinary(e,n)}static fromJson(e,n){return new yo().fromJson(e,n)}static fromJsonString(e,n){return new yo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(yo,e,n)}}yo.runtime=x;yo.typeName="livekit.TrackPermission";yo.fields=x.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class Co extends be{constructor(e){super(),this.allParticipants=!1,this.trackPermissions=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new Co().fromBinary(e,n)}static fromJson(e,n){return new Co().fromJson(e,n)}static fromJsonString(e,n){return new Co().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Co,e,n)}}Co.runtime=x;Co.typeName="livekit.SubscriptionPermission";Co.fields=x.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:yo,repeated:!0}]);class hs extends be{constructor(e){super(),this.participantSid="",this.trackSid="",this.allowed=!1,x.util.initPartial(e,this)}static fromBinary(e,n){return new hs().fromBinary(e,n)}static fromJson(e,n){return new hs().fromJson(e,n)}static fromJsonString(e,n){return new hs().fromJsonString(e,n)}static equals(e,n){return x.util.equals(hs,e,n)}}hs.runtime=x;hs.typeName="livekit.SubscriptionPermissionUpdate";hs.fields=x.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class Io extends be{constructor(e){super(),this.publishTracks=[],this.dataChannels=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new Io().fromBinary(e,n)}static fromJson(e,n){return new Io().fromJson(e,n)}static fromJsonString(e,n){return new Io().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Io,e,n)}}Io.runtime=x;Io.typeName="livekit.SyncState";Io.fields=x.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:sr},{no:2,name:"subscription",kind:"message",T:ai},{no:3,name:"publish_tracks",kind:"message",T:Li,repeated:!0},{no:4,name:"data_channels",kind:"message",T:bo,repeated:!0},{no:5,name:"offer",kind:"message",T:sr}]);class bo extends be{constructor(e){super(),this.label="",this.id=0,this.target=Hn.PUBLISHER,x.util.initPartial(e,this)}static fromBinary(e,n){return new bo().fromBinary(e,n)}static fromJson(e,n){return new bo().fromJson(e,n)}static fromJsonString(e,n){return new bo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(bo,e,n)}}bo.runtime=x;bo.typeName="livekit.DataChannelInfo";bo.fields=x.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:x.getEnumType(Hn)}]);class Rn extends be{constructor(e){super(),this.scenario={case:void 0},x.util.initPartial(e,this)}static fromBinary(e,n){return new Rn().fromBinary(e,n)}static fromJson(e,n){return new Rn().fromJson(e,n)}static fromJsonString(e,n){return new Rn().fromJsonString(e,n)}static equals(e,n){return x.util.equals(Rn,e,n)}}Rn.runtime=x;Rn.typeName="livekit.SimulateScenario";Rn.fields=x.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:x.getEnumType(Gp),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]);class wo extends be{constructor(e){super(),this.timestamp=Ue.zero,this.rtt=Ue.zero,x.util.initPartial(e,this)}static fromBinary(e,n){return new wo().fromBinary(e,n)}static fromJson(e,n){return new wo().fromJson(e,n)}static fromJsonString(e,n){return new wo().fromJsonString(e,n)}static equals(e,n){return x.util.equals(wo,e,n)}}wo.runtime=x;wo.typeName="livekit.Ping";wo.fields=x.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class fs extends be{constructor(e){super(),this.lastPingTimestamp=Ue.zero,this.timestamp=Ue.zero,x.util.initPartial(e,this)}static fromBinary(e,n){return new fs().fromBinary(e,n)}static fromJson(e,n){return new fs().fromJson(e,n)}static fromJsonString(e,n){return new fs().fromJsonString(e,n)}static equals(e,n){return x.util.equals(fs,e,n)}}fs.runtime=x;fs.typeName="livekit.Pong";fs.fields=x.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class ua extends be{constructor(e){super(),this.regions=[],x.util.initPartial(e,this)}static fromBinary(e,n){return new ua().fromBinary(e,n)}static fromJson(e,n){return new ua().fromJson(e,n)}static fromJsonString(e,n){return new ua().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ua,e,n)}}ua.runtime=x;ua.typeName="livekit.RegionSettings";ua.fields=x.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:ps,repeated:!0}]);class ps extends be{constructor(e){super(),this.region="",this.url="",this.distance=Ue.zero,x.util.initPartial(e,this)}static fromBinary(e,n){return new ps().fromBinary(e,n)}static fromJson(e,n){return new ps().fromJson(e,n)}static fromJsonString(e,n){return new ps().fromJsonString(e,n)}static equals(e,n){return x.util.equals(ps,e,n)}}ps.runtime=x;ps.typeName="livekit.RegionInfo";ps.fields=x.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class gs extends be{constructor(e){super(),this.trackSid="",this.err=jd.SE_UNKNOWN,x.util.initPartial(e,this)}static fromBinary(e,n){return new gs().fromBinary(e,n)}static fromJson(e,n){return new gs().fromJson(e,n)}static fromJsonString(e,n){return new gs().fromJsonString(e,n)}static equals(e,n){return x.util.equals(gs,e,n)}}gs.runtime=x;gs.typeName="livekit.SubscriptionResponse";gs.fields=x.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:x.getEnumType(jd)}]);function Jj(t){if(!(typeof t>"u"))return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const Yj=5e3,Nu=[];class Y extends Mo.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=Y.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Ke,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),Yj):this.handleAppVisibilityChanged()},this.log=Ts((i=r.loggerName)!==null&&i!==void 0?i:To.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=Y.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Rt(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===Y.Kind.Video&&(n="video"),this.attachedElements.length===0&&Y.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Nu.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&Nu.splice(Nu.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),ec(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(i?ge.AudioPlaybackStarted:ge.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?ge.AudioPlaybackFailed:ge.VideoPlaybackFailed,o):o.name==="AbortError"?Ke.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Ke.warn("could not playback ".concat(i?"audio":"video"),o),i&&e&&r.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(ge.ElementAttached,e),e}detach(e){try{if(e){pc(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(ge.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{pc(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(ge.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(e){e.loggerName&&(this.log=Ts(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Nu.forEach(r=>{r.parentElement||(n=!1)}),n&&Nu.push(e)}}handleAppVisibilityChanged(){return G(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){Tr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){Tr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function ec(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!yl()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(yl()||Lc())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function pc(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(c){c.Audio="audio",c.Video="video",c.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(c){c.Camera="camera",c.Microphone="microphone",c.ScreenShare="screen_share",c.ScreenShareAudio="screen_share_audio",c.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(c){c.Active="active",c.Paused="paused",c.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(c){switch(c){case e.Audio:return zn.AUDIO;case e.Video:return zn.VIDEO;default:return zn.DATA}}t.kindToProto=i;function o(c){switch(c){case zn.AUDIO:return e.Audio;case zn.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function s(c){switch(c){case n.Camera:return Xt.CAMERA;case n.Microphone:return Xt.MICROPHONE;case n.ScreenShare:return Xt.SCREEN_SHARE;case n.ScreenShareAudio:return Xt.SCREEN_SHARE_AUDIO;default:return Xt.UNKNOWN}}t.sourceToProto=s;function a(c){switch(c){case Xt.CAMERA:return n.Camera;case Xt.MICROPHONE:return n.Microphone;case Xt.SCREEN_SHARE:return n.ScreenShare;case Xt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function l(c){switch(c){case vl.ACTIVE:return r.Active;case vl.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=l})(Y||(Y={}));function cN(t,e,n){var r;const i=(r=Jj(t))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&ly(i.audio,e),i.video&&ly(i.video,n),i}function ly(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Rg(t){const e={};if(t.video)if(typeof t.video=="object"){const n={},r=n,i=t.video;Object.keys(i).forEach(o=>{switch(o){case"resolution":ly(r,i.resolution);break;default:r[o]=i[o]}}),e.video=n}else e.video=t.video;else e.video=!1;return t.audio?typeof t.audio=="object"?e.audio=t.audio:e.audio=!0:e.audio=!1,e}function Qj(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return G(this,void 0,void 0,function*(){const n=RI();if(n){const r=n.createAnalyser();r.fftSize=2048;const i=r.frequencyBinCount,o=new Uint8Array(i);n.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield Cs(e),r.getByteTimeDomainData(o);const a=o.some(l=>l!==128&&l!==0);return n.close(),!a}return!1})}function RI(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}function qj(t){return t===Y.Source.Microphone?"audioinput":t===Y.Source.Camera?"videoinput":void 0}function e6(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,yl()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio}}function uN(t){const e=t.split("/")[1].toLowerCase();if(!lN.includes(e))throw Error("Video codec not supported: ".concat(e));return e}function t6(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new Li({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Rt(t){return t instanceof Y?{trackSid:t.sid,trackSource:t.source,trackMuted:t.isMuted,trackEnabled:t.mediaStreamTrack.enabled,trackKind:t.kind}:{trackSid:t.trackSid,trackName:t.trackName,track:t.track?Rt(t.track):void 0,trackEnabled:t.isEnabled,trackEncrypted:t.isEncrypted,trackMimeType:t.mimeType}}const n6="|",BA="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function r6(t){const e=t.split(n6);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Cs(t){return G(this,void 0,void 0,function*(){return new Promise(e=>_n.setTimeout(e,t))})}function FA(){return"addTransceiver"in RTCPeerConnection.prototype}function UA(){return"addTrack"in RTCPeerConnection.prototype}function i6(){if(!("getCapabilities"in RTCRtpSender)||yl())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function o6(){if(!("getCapabilities"in RTCRtpSender)||Lc())return!1;if(yl()){const n=xs();if(n!=null&&n.version&&PI(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function cd(t){return t==="av1"||t==="vp9"}function cy(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}const s6={Chrome:"100",Safari:"15",Firefox:"100"};function a6(t){if(!Tr()||!("setCodecPreferences"in t))return!1;const e=xs();if(!(e!=null&&e.name)||!e.version)return!1;const n=s6[e.name];return n?PI(e.version,n)>=0:!1}function Lc(){var t;return((t=xs())===null||t===void 0?void 0:t.name)==="Firefox"}function l6(){var t;return((t=xs())===null||t===void 0?void 0:t.name)==="Chrome"}function yl(){var t;return((t=xs())===null||t===void 0?void 0:t.name)==="Safari"}function c6(){const t=xs();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function dN(){return Tr()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function Tr(){return typeof document<"u"}function Cl(){return navigator.product=="ReactNative"}function uy(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function hN(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function fN(){if(!Cl())return;let t=hN();if(t)return t.platform}function VA(){if(Tr())return window.devicePixelRatio;if(Cl()){let t=hN();if(t)return t.devicePixelRatio}return 1}function PI(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const s=parseInt(n[o],10),a=parseInt(r[o],10);if(s>a)return 1;if(s<a)return-1;if(o===i-1&&s===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function u6(t){for(const e of t)e.target.handleResize(e)}function d6(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Zm=null;const GA=()=>(Zm||(Zm=new ResizeObserver(u6)),Zm);let zm=null;const WA=()=>(zm||(zm=new IntersectionObserver(d6,{root:null,rootMargin:"0px"})),zm);function h6(){var t;const e=new Yo({sdk:Dc.JS,protocol:$j,version:Hj});return Cl()&&(e.os=(t=fN())!==null&&t!==void 0?t:""),e}function jA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const o=i.getContext("2d");o==null||o.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=i.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let _u;function Hm(){if(!_u){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[_u]=r.stream.getAudioTracks(),!_u)throw Error("Could not get empty media stream audio track");_u.enabled=!1}return _u.clone()}class pN{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>G(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function f6(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),r=RI();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,o=r.createMediaStreamSource(new MediaStream([i])),s=r.createAnalyser();s.minDecibels=n.minDecibels,s.maxDecibels=n.maxDecibels,s.fftSize=n.fftSize,s.smoothingTimeConstant=n.smoothingTimeConstant,o.connect(s);const a=new Uint8Array(s.frequencyBinCount);return{calculateVolume:()=>{s.getByteFrequencyData(a);let u=0;for(const h of a)u+=Math.pow(h/255,2);return Math.sqrt(u/a.length)},analyser:s,cleanup:()=>G(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class Vi{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function p6(t){return lN.includes(t)}function il(t){if(typeof t=="string")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function g6(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function ZA(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}const zA="default";class tr{static getInstance(){return this.instance===void 0&&(this.instance=new tr),this.instance}getDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r;return G(this,void 0,void 0,function*(){if(((r=tr.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){Ke.debug("awaiting getUserMedia promise");try{e?yield tr.userMediaPromiseMap.get(e):yield Promise.all(tr.userMediaPromiseMap.values())}catch{Ke.warn("error waiting for media permissons")}}let i=yield navigator.mediaDevices.enumerateDevices();if(n&&!(yl()&&this.hasDeviceInUse(e))&&(i.length===0||i.some(s=>{const a=s.label==="",l=e?s.kind===e:!0;return a&&l}))){const s={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},a=yield navigator.mediaDevices.getUserMedia(s);i=yield navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(l=>{l.stop()})}return e&&(i=i.filter(o=>o.kind===e)),i})}normalizeDeviceId(e,n,r){return G(this,void 0,void 0,function*(){if(n!==zA)return n;const o=(yield this.getDevices(e)).find(s=>s.groupId===r&&s.deviceId!==zA);return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?tr.userMediaPromiseMap.has(e):tr.userMediaPromiseMap.size>0}}tr.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];tr.userMediaPromiseMap=new Map;const m6=1e3;class Bc extends Y{get constraints(){return this._constraints}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=TI(()=>G(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>G(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(ge.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new Vi,this.pauseUpstreamLock=new Vi,this.processorLock=new Vi,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==Y.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(e,n){return G(this,void 0,void 0,function*(){if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{pc(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e&&this.processorElement){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");ec(e,this.processorElement),this.processorElement.muted=!0,yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{ec(r??e,i)}))})}waitForDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m6;var n;return G(this,void 0,void 0,function*(){if(this.kind===Y.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=xs())===null||n===void 0?void 0:n.os)==="iOS"&&(yield Cs(10));const r=Date.now();for(;Date.now()-r<e;){const i=this.dimensions;if(i)return i;yield Cs(50)}throw new no("unable to get track dimensions after timeout")})}getDeviceId(){return G(this,void 0,void 0,function*(){if(this.source===Y.Source.ScreenShare)return;const{deviceId:e,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===Y.Kind.Audio?"audioinput":"videoinput";return tr.getInstance().normalizeDeviceId(r,e,n)})}mute(){return G(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return G(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(this,void 0,void 0,function*(){if(!this.sender)throw new no("unable to replace an unpublished track");return this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),this.providedByUser=n,this.processor&&(yield this.stopProcessor()),this})}restart(e){return G(this,void 0,void 0,function*(){e||(e=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const n={audio:!1,video:!1};this.kind===Y.Kind.Video?n.video=e:n.audio=e,this.attachedElements.forEach(o=>{pc(this.mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const i=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return i.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(i),this._constraints=e,this.emit(ge.Restarted,this),this})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ge.Muted:ge.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),dN()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return G(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(ge.UpstreamPaused,this);const n=xs();if((n==null?void 0:n.name)==="Safari"&&PI(n.version,"12.0")<0)throw new EI("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{e()}})}resumeUpstream(){return G(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(ge.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{e()}})}getRTCStatsReport(){var e;return G(this,void 0,void 0,function*(){return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r,i;return G(this,void 0,void 0,function*(){const o=yield this.processorLock.lock();try{if(this.log.debug("setting up processor",this.logContext),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(r=this.processorElement)!==null&&r!==void 0?r:document.createElement(this.kind),ec(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(a=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:a})));const s={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield e.init(s),this.processor=e,this.processor.processedTrack){for(const a of this.attachedElements)a!==this.processorElement&&n&&(pc(this._mediaStreamTrack,a),ec(this.processor.processedTrack,a));yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack)}}finally{o()}})}getProcessor(){return this.processor}stopProcessor(){var e,n;return G(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(e=this.processor.processedTrack)===null||e===void 0||e.stop(),yield this.processor.destroy(),this.processor=void 0,(n=this.processorElement)===null||n===void 0||n.remove(),this.processorElement=void 0,yield this.restart())})}}class v6 extends Mo.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:o,data:s}=n.data;switch(o){case"error":Ke.error(s.error.message),this.emit(ca.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==s.enabled&&s.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(ca.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(s.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(ca.ParticipantEncryptionStatusChanged,s.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(Ca.KeyRatcheted,s.material,s.keyIndex);break}},this.onWorkerError=n=>{Ke.error("e2ee worker encountered an error:",{error:n.error}),this.emit(ca.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!Vj())throw new EI("tried to setup end-to-end encryption on an unsupported browser");if(Ke.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(Ke.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Ke.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Ke.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(Ee.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(ne.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==Pn.NONE,i.identity)),e.on(ne.ConnectionStateChanged,r=>{r===it.Connected&&e.participants.forEach(i=>{i.tracks.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Pn.NONE,i.identity)})})}).on(ne.TrackUnsubscribed,(r,i,o)=>{var s;const a={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(a)}).on(ne.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(ne.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),e.localParticipant.on(se.LocalTrackPublished,r=>G(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Ca.SetKey,r=>this.postKey(r)).on(Ca.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?uN(r.mimeType):void 0)}}setupE2EESender(e,n){if(!(e instanceof Bc)||!n){n||Ke.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return G(this,void 0,void 0,function*(){if(this.worker){if(oy()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Jh in e&&i){const l={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(l);return}let o=e.writableStream,s=e.readableStream;if(!o||!s){const l=e.createEncodedStreams();e.writableStream=l.writable,o=l.writable,e.readableStream=l.readable,s=l.readable}const a={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[s,o])}e[Jh]=!0}})}handleSender(e,n,r){var i;if(!(Jh in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(oy()){Ke.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{Ke.info("initialize encoded streams");const o=e.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s,[o.readable,o.writable])}e[Jh]=!0}}}var ud;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(ud||(ud={}));class y6{constructor(){this.pendingTasks=new Map,this.taskMutex=new Vi,this.nextTaskIndex=0}run(e){return G(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:ud.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=ud.RUNNING,yield e()}finally{n.status=ud.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return G(this,void 0,void 0,function*(){return this.run(()=>G(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const C6=["syncState","trickle","offer","answer","simulate","leave"];function I6(t){const e=C6.indexOf(t.case)>=0;return Ke.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Wt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Wt||(Wt={}));class NI{get currentState(){return this.state}get isDisconnected(){return this.state===Wt.DISCONNECTING||this.state===Wt.DISCONNECTED}get isEstablishingConnection(){return this.state===Wt.CONNECTING||this.state===Wt.RECONNECTING}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Wt.DISCONNECTED,this.log=Ke,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=Ts((r=n.loggerName)!==null&&r!==void 0?r:To.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new y6,this.queuedRequests=[],this.closingLock=new Vi,this.connectionLock=new Vi,this.state=Wt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return G(this,void 0,void 0,function*(){return this.state=Wt.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return G(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Wt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r,e=g6(e),e=e.replace(/\/$/,""),e+="/rtc";const o=h6(),s=b6(n,o,r);return new Promise((a,l)=>G(this,void 0,void 0,function*(){const c=yield this.connectionLock.lock();try{const u=()=>G(this,void 0,void 0,function*(){this.close(),clearTimeout(d),l(new wt("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),l(new wt("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),this.log.debug("connecting to ".concat(e+s),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(e+s),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=h=>G(this,void 0,void 0,function*(){if(this.state!==Wt.CONNECTED){clearTimeout(d);try{const f=yield fetch("http".concat(e.substring(2),"/validate").concat(s));if(f.status.toFixed(0).startsWith("4")){const p=yield f.text();l(new wt(p,0,f.status))}else l(new wt("Internal error",2,f.status))}catch{l(new wt("server was not reachable",1))}return}this.handleWSError(h)}),this.ws.onmessage=h=>G(this,void 0,void 0,function*(){var f,p,g,C;let m;if(typeof h.data=="string"){const v=JSON.parse(h.data);m=fo.fromJson(v)}else if(h.data instanceof ArrayBuffer)m=fo.fromBinary(new Uint8Array(h.data));else{this.log.error("could not decode websocket message: ".concat(typeof h.data),this.logContext);return}if(this.state!==Wt.CONNECTED){let v=!1;if(((f=m.message)===null||f===void 0?void 0:f.case)==="join"?(this.state=Wt.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=m.message.value.pingTimeout,this.pingIntervalDuration=m.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(m.message.value)):this.state===Wt.RECONNECTING&&m.message.case!=="leave"?(this.state=Wt.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((p=m.message)===null||p===void 0?void 0:p.case)==="reconnect"?a((g=m.message)===null||g===void 0?void 0:g.value):(a(),v=!0)):this.isEstablishingConnection&&m.message.case==="leave"?l(new wt("Received leave request while trying to (re)connect",4)):r.reconnect||l(new wt("did not receive join response, got ".concat((C=m.message)===null||C===void 0?void 0:C.case," instead"))),!v)return}this.signalLatency&&(yield Cs(this.signalLatency)),this.handleSignalResponse(m)}),this.ws.onclose=h=>{this.isEstablishingConnection&&l(new wt("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:h.reason,state:this.state})),this.handleOnClose(h.reason)}}finally{c()}}))}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return G(this,void 0,void 0,function*(){const n=yield this.closingLock.lock();try{if(e&&(this.state=Wt.DISCONNECTING),this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const r=new Promise(i=>{this.ws?this.ws.onclose=()=>{i()}:i()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([r,Cs(250)])),this.ws=void 0}}finally{e&&(this.state=Wt.DISCONNECTED),this.clearPingInterval(),n()}})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:Wp(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:Wp(e)})}sendIceCandidate(e,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new Mi({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new Di({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return this.sendRequest({case:"updateMetadata",value:new mo({metadata:e,name:n})})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new go({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new Co({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Ue.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new wo({timestamp:Ue.parse(Date.now()),rtt:Ue.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new li({canReconnect:!1,reason:ys.CLIENT_INITIATED})})}sendRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return G(this,void 0,void 0,function*(){if(!n&&!I6(e)&&this.state===Wt.RECONNECTING){this.queuedRequests.push(()=>G(this,void 0,void 0,function*(){yield this.sendRequest(e,!0)}));return}if(n||(yield this.requestQueue.flush()),this.signalLatency&&(yield Cs(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(e==null?void 0:e.case),this.logContext);return}const i=new qo({message:e});try{this.useJSON?this.ws.send(i.toJsonString()):this.ws.send(i.toBinary())}catch(o){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:o}))}})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const s=HA(i.value);this.onAnswer&&this.onAnswer(s)}else if(i.case==="offer"){const s=HA(i.value);this.onOffer&&this.onOffer(s)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return G(this,void 0,void 0,function*(){if(this.state===Wt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=_n.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&_n.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=_n.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&_n.clearInterval(this.pingInterval)}}function HA(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function Wp(t){return new sr({sdp:t.sdp,type:t.type})}function b6(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Cl()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.publishOnly!==void 0&&i.set("publish",n.publishOnly),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var gN={},mN={exports:{}},$A=mN.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys($A).forEach(function(t){var e=$A[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var vN=mN.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,l,c,u){if(u&&!c)l[u]=e(a[1]);else for(var d=0;d<c.length;d+=1)a[d+1]!=null&&(l[c[d]]=e(a[d+1]))},r=function(a,l,c){var u=a.name&&a.names;a.push&&!l[a.push]?l[a.push]=[]:u&&!l[a.name]&&(l[a.name]={});var d=a.push?{}:u?l[a.name]:l;n(c.match(a.reg),d,a.names,a.name),a.push&&l[a.push].push(d)},i=vN,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var l={},c=[],u=l;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var h=d[0],f=d.slice(2);h==="m"&&(c.push({rtp:[],fmtp:[]}),u=c[c.length-1]);for(var p=0;p<(i[h]||[]).length;p+=1){var g=i[h][p];if(g.reg.test(f))return r(g,u,f)}}),l.media=c,l};var s=function(a,l){var c=l.split(/=(.+)/,2);return c.length===2?a[c[0]]=e(c[1]):c.length===1&&l.length>1&&(a[c[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var l=[],c=a.split(" ").map(e),u=0;u<c.length;u+=3)l.push({component:c[u],ip:c[u+1],port:c[u+2]});return l},t.parseImageAttributes=function(a){return a.split(" ").map(function(l){return l.substring(1,l.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(l){return l.split(",").map(function(c){var u,d=!1;return c[0]!=="~"?u=e(c):(u=e(c.substring(1,c.length)),d=!0),{scid:u,paused:d}})})}})(gN);var $m=vN,w6=/%[sdv%]/g,S6=function(t){var e=1,n=arguments,r=n.length;return t.replace(w6,function(i){if(e>=r)return i;var o=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},Ou=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var o=0;o<e.names.length;o+=1){var s=e.names[o];e.name?i.push(n[e.name][s]):i.push(n[e.names[o]])}else i.push(n[e.name]);return S6.apply(null,i)},A6=["v","o","s","i","u","e","p","c","b","t","r","z","a"],k6=["i","c","b","a"],E6=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var n=e.outerOrder||A6,r=e.innerOrder||k6,i=[];return n.forEach(function(o){$m[o].forEach(function(s){s.name in t&&t[s.name]!=null?i.push(Ou(o,s,t)):s.push in t&&t[s.push]!=null&&t[s.push].forEach(function(a){i.push(Ou(o,s,a))})})}),t.media.forEach(function(o){i.push(Ou("m",$m.m[0],o)),r.forEach(function(s){$m[s].forEach(function(a){a.name in o&&o[a.name]!=null?i.push(Ou(s,a,o)):a.push in o&&o[a.push]!=null&&o[a.push].forEach(function(l){i.push(Ou(s,a,l))})})})}),i.join(`\r
`)+`\r
`},T6=gN,x6=E6,Xm=x6,$u=T6.parse;const XA=.7,gc={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class KA extends Mo.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.log=Ke,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=TI(o=>G(this,void 0,void 0,function*(){this.emit(gc.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(o)o(s);else throw s}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ts((i=r.loggerName)!==null&&i!==void 0?i:To.PCTransport),this.loggerOptions=r,this.config=e,this.mediaConstraints=n,this._pc=this.createPC()}createPC(){const e=l6()?new RTCPeerConnection(this.config,this.mediaConstraints):new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return G(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){var n;return G(this,void 0,void 0,function*(){let r;if(e.type==="offer"){let{stereoMids:i,nackMids:o}=P6(e);this.remoteStereoMids=i,this.remoteNackMids=o}else if(e.type==="answer"){const i=$u((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(s=>{if(!s.transceiver||o.mid!=s.transceiver.mid)return!1;let a=0;if(o.rtp.some(c=>c.codec.toUpperCase()===s.codec.toUpperCase()?(a=c.payload,!0):!1),a===0)return!0;let l=!1;for(const c of o.fmtp)if(c.payload===a){c.config=c.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),s.maxbr>0&&(c.config+=";maxaveragebitrate=".concat(s.maxbr*1e3)),l=!0;break}return l||s.maxbr>0&&o.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(s.maxbr*1e3)}),!0})}),r=Xm(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(gc.NegotiationComplete),e.sdp&&$u(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(gc.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(e){var n;return G(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e),i=$u((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"?JA(o,[],[]):o.type==="video"&&(R6(o),this.trackBitrates.some(s=>{if(!o.msid||!s.cid||!o.msid.includes(s.cid))return!1;let a=0;if(o.rtp.some(c=>c.codec.toUpperCase()===s.codec.toUpperCase()?(a=c.payload,!0):!1),a===0)return!0;let l=!1;for(const c of o.fmtp)if(c.payload===a){c.config.includes("x-google-start-bitrate")||(c.config+=";x-google-start-bitrate=".concat(Math.round(s.maxbr*XA))),c.config.includes("x-google-max-bitrate")||(c.config+=";x-google-max-bitrate=".concat(s.maxbr)),l=!0;break}return l||o.fmtp.push({payload:a,config:"x-google-start-bitrate=".concat(Math.round(s.maxbr*XA),";x-google-max-bitrate=").concat(s.maxbr)}),!0}))}),yield this.setMungedSDP(r,Xm(i)),this.onOffer(r)})}createAndSetAnswer(){var e;return G(this,void 0,void 0,function*(){const n=yield this.pc.createAnswer(),r=$u((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{i.type==="audio"&&JA(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Xm(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new un("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new un("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var e;return G(this,void 0,void 0,function*(){if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const s=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(e,n,r){return G(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const s={error:o,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new sy(o)}})}}function JA(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function R6(t){var e,n,r,i;const o=(n=(e=t.rtp[0])===null||e===void 0?void 0:e.codec)===null||n===void 0?void 0:n.toLowerCase();if(!cd(o))return;let s=0;((r=t.ext)===null||r===void 0?void 0:r.some(l=>l.uri===BA?!0:(l.value>s&&(s=l.value),!1)))||(i=t.ext)===null||i===void 0||i.push({value:s+1,uri:BA})}function P6(t){var e;const n=[],r=[],i=$u((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return i.media.forEach(s=>{var a;s.type==="audio"&&(s.rtp.some(l=>l.codec==="opus"?(o=l.payload,!0):!1),!((a=s.rtcpFb)===null||a===void 0)&&a.some(l=>l.payload===o&&l.type==="nack")&&r.push(s.mid),s.fmtp.some(l=>l.payload===o?(l.config.includes("sprop-stereo=1")&&n.push(s.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const dy="vp8",N6={audioBitrate:Vp.music.maxBitrate,audioPreset:Vp.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:xI.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:dy,backupCodec:!0},yN={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},CN={resolution:zd.h720.resolution},_6={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new wj,disconnectOnPageLeave:!0,expWebAudioMix:!1},_I={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var hn;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(hn||(hn={}));class O6{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=_I.peerConnectionTimeout,this.log=Ke,this.updateState=()=>{var s;const a=this.state,l=this.requiredTransports.map(c=>c.getConnectionState());l.every(c=>c==="connected")?this.state=hn.CONNECTED:l.some(c=>c==="failed")?this.state=hn.FAILED:l.some(c=>c==="connecting")?this.state=hn.CONNECTING:l.every(c=>c==="closed")?this.state=hn.CLOSED:l.some(c=>c==="closed")?this.state=hn.CLOSING:l.every(c=>c==="new")&&(this.state=hn.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(hn[a]," to ").concat(hn[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=Ts((i=r.loggerName)!==null&&i!==void 0?i:To.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n;const o={optional:[{googDscp:!0}]};this.publisher=new KA(e,o,r),this.subscriber=new KA(e,void 0,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Hn.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Hn.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=s=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s)},this.state=hn.NEW,this.connectionLock=new Vi}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return G(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return G(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return G(this,void 0,void 0,function*(){n===Hn.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return G(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){var r;return G(this,void 0,void 0,function*(){const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,e,n)))}finally{i()}})}negotiate(e){return G(this,void 0,void 0,function*(){return new Promise((n,r)=>G(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(gc.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(gc.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Hn.PUBLISHER?this.publisher.getConnectedAddress():e===Hn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return G(this,void 0,void 0,function*(){if(e.getConnectionState()!=="connected")return new Promise((o,s)=>G(this,void 0,void 0,function*(){const a=()=>{this.log.warn("abort transport connection",this.logContext),_n.clearTimeout(l),s(new wt("room connection has been cancelled",3))};n!=null&&n.signal.aborted&&a(),n==null||n.signal.addEventListener("abort",a);const l=_n.setTimeout(()=>{n==null||n.signal.removeEventListener("abort",a),s(new wt("could not establish pc connection"))},r);for(;this.state!==hn.CONNECTED;)if(yield Cs(50),n!=null&&n.signal.aborted){s(new wt("room connection has been cancelled",3));return}_n.clearTimeout(l),n==null||n.signal.removeEventListener("abort",a),o()}))})}}const YA="_lossy",QA="_reliable",M6=2*1e3,qA="leave-reconnect";var vi;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(vi||(vi={}));class D6 extends Mo.EventEmitter{get isClosed(){return this._isClosed}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=_I.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=vi.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Ke,this.handleDataChannel=r=>{let{channel:i}=r;return G(this,void 0,void 0,function*(){if(i){if(i.label===QA)this.reliableDCSub=i;else if(i.label===YA)this.lossyDCSub=i;else return;this.log.debug("on data channel ".concat(i.id,", ").concat(i.label),this.logContext),i.onmessage=this.handleDataMessage}})},this.handleDataMessage=r=>G(this,void 0,void 0,function*(){var i,o;const s=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const l=oo.fromBinary(new Uint8Array(a));((i=l.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(Ee.ActiveSpeakersUpdate,l.value.value.speakers):((o=l.value)===null||o===void 0?void 0:o.case)==="user"&&this.emit(Ee.DataPacketReceived,l.value.value,l.kind)}finally{s()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?dn.LOSSY:dn.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=l=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(l,"ms. giving up"),this.logContext),this.emit(Ee.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(a===null){o(s);return}r===qA&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=_n.setTimeout(()=>this.attemptReconnect(i),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===vi.Connected&&r();const o=()=>{this.off(Ee.Disconnected,s),r()},s=()=>{this.off(Ee.Restarted,o),i()};this.once(Ee.Restarted,o),this.once(Ee.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(Ee.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Wt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(Vo.RR_SIGNAL_DISCONNECTED))},this.log=Ts((n=e.loggerName)!==null&&n!==void 0?n:To.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new NI(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new Vi,this.dataProcessLock=new Vi,this.dcBufferStatus=new Map([[dn.LOSSY,!0],[dn.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(Ee.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(Ee.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(Ee.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(Ee.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(Ee.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(Ee.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(Ee.StreamStateChanged,r)}get logContext(){var e,n,r,i,o,s;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomSid:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,identity:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity}}join(e,n,r,i){return G(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof wt&&o.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw o}})}close(){return G(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.emit(Ee.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){var e;return G(this,void 0,void 0,function*(){yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return G(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new no("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new wt("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){var e;return G(this,void 0,void 0,function*(){return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){var n;return G(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==hn.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new O6(r,e.subscriberPrimary,this.loggerOptions),this.emit(Ee.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(i,o)=>{this.client.sendIceCandidate(i,o)},this.pcManager.onPublisherOffer=i=>{this.client.sendOffer(i)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(i,o,s)=>G(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(i),this.logContext),i===hn.CONNECTED){const a=this.pcState===vi.New;this.pcState=vi.Connected,a&&this.emit(Ee.Connected,e)}else i===hn.FAILED&&this.pcState===vi.Connected&&(this.pcState=vi.Disconnected,this.handleDisconnect("peerconnection failed",s==="failed"?Vo.RR_SUBSCRIBER_FAILED:Vo.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=i=>{this.emit(Ee.MediaTrackAdded,i.track,i.streams[0],i.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>G(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>G(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(Ee.LocalTrackUnpublished,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(Ee.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(Ee.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",Vo.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{e!=null&&e.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(qA)):(this.emit(Ee.Disconnected,e==null?void 0:e.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason}))}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),i.push(s)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===ji.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(YA,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(QA,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(e,n,r){if(!("getCapabilities"in RTCRtpReceiver))return;const i=RTCRtpReceiver.getCapabilities(n);if(!i)return;this.log.debug("get receiver capabilities",Object.assign(Object.assign({},this.logContext),{cap:i}));const o=[],s=[],a=[];i.codecs.forEach(l=>{const c=l.mimeType.toLowerCase();if(c==="audio/opus"){o.push(l);return}if(!(c==="video/".concat(r))){a.push(l);return}if(r==="h264"){l.sdpFmtpLine&&l.sdpFmtpLine.includes("profile-level-id=42e01f")?o.push(l):s.push(l);return}o.push(l)}),a6(e)&&e.setCodecPreferences(o.concat(s,a))}createSender(e,n,r){return G(this,void 0,void 0,function*(){if(FA())return yield this.createTransceiverRTCRtpSender(e,n,r);if(UA())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new un("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return G(this,void 0,void 0,function*(){if(FA())return this.createSimulcastTransceiverSender(e,n,r,i);if(UA())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new un("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new un("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream);const o={direction:"sendonly",streams:i};r&&(o.sendEncodings=r);const s=yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o);return e.kind===Y.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(s,e.kind,n.videoCodec),e.codec=n.videoCodec),s.sender})}createSimulcastTransceiverSender(e,n,r,i){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new un("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return this.setPreferredCodec(s,e.kind,r.videoCodec),e.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(e){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new un("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){var n,r,i;return G(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){Ke.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===ji.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:hn.NEW)===hn.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof un?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof Fl||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",Vo.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(Ee.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){var n,r,i;return G(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new un("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(Ee.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new Fl;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof wt&&s.reason===0?new un("could not reconnect, token might be expired"):new Fl}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(Ee.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Wt.CONNECTED)throw new Fl("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(Ee.Restarted)}catch(o){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(e){var n;return G(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new un("could not reconnect, url or token not saved");if(!this.pcManager)throw new un("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(Ee.Resuming);try{this.setupSignalClientCallbacks();const r=yield this.client.reconnect(this.url,this.token,this.participantSid,e);if(r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}}catch(r){let i="";throw r instanceof Error&&(i=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof wt&&r.reason===0?new un("could not reconnect, token might be expired"):r instanceof wt&&r.reason===4?r:new Fl(i)}if(this.emit(Ee.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Wt.CONNECTED)throw new Fl("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(Ee.Resumed)})}waitForPCInitialConnection(e,n){return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new un("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return G(this,void 0,void 0,function*(){this.pcState=vi.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Cs(M6),!this.pcManager)throw new un("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=vi.Connected}catch(e){throw this.pcState=vi.Disconnected,new wt("could not establish PC connection, ".concat(e.message))}})}sendDataPacket(e,n){return G(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var r;return G(this,void 0,void 0,function*(){if(!this.pcManager)throw new un("PC manager is closed");const i=n?this.pcManager.subscriber:this.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!i)throw new wt("".concat(o," connection not set"));!n&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const s=this.dataChannelForKind(e,n);if((s==null?void 0:s.readyState)==="open")return;const a=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<a;){if(i.isICEConnected&&((r=this.dataChannelForKind(e,n))===null||r===void 0?void 0:r.readyState)==="open")return;yield Cs(50)}throw new wt("could not establish ".concat(o," connection, state: ").concat(i.getICEConnectionState()))})}ensurePublisherConnected(e){return G(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(e,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==hn.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return G(this,void 0,void 0,function*(){return new Promise((e,n)=>G(this,void 0,void 0,function*(){if(!this.pcManager){n(new sy("PC manager is closed"));return}this.pcManager.requirePublisher();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(Ee.Closing,i),this.pcManager.publisher.once(gc.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(a=>{const l=a.codec.toLowerCase();p6(l)&&s.set(a.payload,l)}),this.emit(Ee.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),e()}catch(o){o instanceof sy&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",Vo.RR_UNKNOWN),n(o)}finally{this.off(Ee.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===dn.LOSSY)return this.lossyDCSub;if(e===dn.RELIABLE)return this.reliableDCSub}else{if(e===dn.LOSSY)return this.lossyDC;if(e===dn.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,l=new Array;e.forEach(c=>{c.isDesired!==a&&l.push(c.trackSid)}),this.client.sendSyncState(new Io({answer:o?Wp({sdp:o.sdp,type:o.type}):void 0,offer:s?Wp({sdp:s.sdp,type:s.type}):void 0,subscription:new ai({trackSids:l,subscribe:!a,participantTracks:[]}),publishTracks:t6(n),dataChannels:this.dataChannelsInfo()}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new bo({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(dn.LOSSY),Hn.PUBLISHER),n(this.dataChannelForKind(dn.RELIABLE),Hn.PUBLISHER),n(this.dataChannelForKind(dn.LOSSY,!0),Hn.SUBSCRIBER),n(this.dataChannelForKind(dn.RELIABLE,!0),Hn.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&_n.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){Tr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){Tr()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class Fl extends Error{}class ek{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return uy(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return G(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),Ke.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return G(this,void 0,void 0,function*(){const n=yield fetch("".concat(L6(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new wt("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}}function L6(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}const OI=2e3;function Pg(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}class yr extends Bc{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,Y.Kind.Audio,n,r,o),this.stopOnMute=!1,this.monitorSender=()=>G(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}s&&this.prevStats&&(this._currentBitrate=Pg(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.checkForSilence()}setDeviceId(e){return G(this,void 0,void 0,function*(){return this._constraints.deviceId===e?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||il(e)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Y.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==il(this._constraints.deviceId);return this.source===Y.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return G(this,void 0,void 0,function*(){let n;if(e){const r=Rg({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return G(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){Tr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},OI)))}setProcessor(e){var n;return G(this,void 0,void 0,function*(){const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack))}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){var e;return G(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return G(this,void 0,void 0,function*(){const e=yield Qj(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(ge.AudioSilenceDetected)),e})}}function IN(t,e,n){switch(t.kind){case"audio":return new yr(t,e,!1,void 0,n);case"video":return new ei(t,e,!1,n);default:throw new no("unsupported track type: ".concat(t.kind))}}const B6=Object.values(zd),F6=Object.values(ay),U6=Object.values(xI),V6=[zd.h180,zd.h360],G6=[ay.h180,ay.h360],W6=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new pt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),hy=["q","h","f"];function fy(t,e,n,r){var i,o;let s=r==null?void 0:r.videoEncoding;t&&(s=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,l=r==null?void 0:r.scalabilityMode,c=r==null?void 0:r.videoCodec;if(!s&&!a&&!l||!e||!n)return[{}];s||(s=Z6(t,e,n,c),Ke.debug("using video encoding",s));const u=new pt(e,n,s.maxBitrate,s.maxFramerate,s.priority);if(l&&cd(c)){Ke.debug("using svc with scalabilityMode ".concat(l));const f=new bN(l),p=[];if(f.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(l));for(let g=0;g<f.spatial;g+=1)p.push({rid:hy[2-g],maxBitrate:s.maxBitrate/Math.pow(3,g),maxFramerate:u.encoding.maxFramerate});return p[0].scalabilityMode=l,Ke.debug("encodings",p),p}if(!a)return[s];let d=[];t?d=(i=nk(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:tk(t,u):d=(o=nk(r==null?void 0:r.videoSimulcastLayers))!==null&&o!==void 0?o:tk(t,u);let h;if(d.length>0){const f=d[0];d.length>1&&([,h]=d);const p=Math.max(e,n);if(p>=960&&h)return Km(e,n,[f,h,u]);if(p>=480)return Km(e,n,[f,u])}return Km(e,n,[u])}function j6(t,e,n){var r,i,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Ke.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),l=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,c=(o=a.height)!==null&&o!==void 0?o:(s=t.dimensions)===null||s===void 0?void 0:s.height;return fy(t.source===Y.Source.ScreenShare,l,c,n)}function Z6(t,e,n,r){const i=z6(t,e,n);let{encoding:o}=i[0];const s=Math.max(e,n);for(let a=0;a<i.length;a+=1){const l=i[a];if(o=l.encoding,l.width>=s)break}if(r)switch(r){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function z6(t,e,n){if(t)return U6;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?B6:F6}function tk(t,e){if(t)return W6(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?V6:G6}function Km(t,e,n){const r=[];if(n.forEach((i,o)=>{if(o>=hy.length)return;const s=Math.min(t,e),l={rid:hy[o],scaleResolutionDownBy:Math.max(1,s/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(l.maxFramerate=i.encoding.maxFramerate);const c=Lc()||o===0;i.encoding.priority&&c&&(l.priority=i.encoding.priority,l.networkPriority=i.encoding.priority),r.push(l)}),Cl()&&fN()==="ios"){let i;r.forEach(s=>{i?s.maxFramerate&&s.maxFramerate>i&&(i=s.maxFramerate):i=s.maxFramerate});let o=!0;r.forEach(s=>{var a;s.maxFramerate!=i&&(o&&(o=!1,Ke.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Ke.info('Setting framerate of encoding "'.concat((a=s.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),s.maxFramerate=i)})}return r}function nk(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class bN{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}const H6=5e3;class ei extends Bc{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,Y.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.monitorSender=()=>G(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const s=new Map(o.map(a=>[a.rid,a]));if(this.prevStats){let a=0;s.forEach((l,c)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(c);a+=Pg(l,d)}),this._currentBitrate=a}this.prevStats=s}),this.senderLock=new Vi}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!Tr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},OI))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var n,r,i,o,s;return G(this,void 0,void 0,function*(){yield e.pauseUpstream.call(this);try{for(var a=!0,l=Vl(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0)o=c.value,a=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var n,r,i,o,s;return G(this,void 0,void 0,function*(){yield e.resumeUpstream.call(this);try{for(var a=!0,l=Vl(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0){o=c.value,a=!1;const u=o;yield(s=u.sender)===null||s===void 0?void 0:s.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return G(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===Y.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){var e;return G(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,framesSent:i.framesSent,timestamp:i.timestamp,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges},a=r.get(i.remoteId);a&&(s.jitter=a.jitter,s.packetsLost=a.packetsLost,s.roundTripTime=a.roundTripTime),n.push(s)}}),n})}setPublishingQuality(e){const n=[];for(let r=gn.LOW;r<=gn.HIGH;r+=1)n.push(new Bi({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}setDeviceId(e){return G(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===il(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||il(e)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(e){var n,r,i,o;return G(this,void 0,void 0,function*(){let s;if(e){const u=Rg({video:e});typeof u.video!="boolean"&&(s=u.video)}yield this.restart(s);try{for(var a=!0,l=Vl(this.simulcastCodecs.values()),c;c=yield l.next(),n=c.done,!n;a=!0){o=c.value,a=!1;const u=o;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var i,o,s,a,l,c;return G(this,void 0,void 0,function*(){if(yield r.setProcessor.call(this,e,n),!((l=this.processor)===null||l===void 0)&&l.processedTrack)try{for(var u=!0,d=Vl(this.simulcastCodecs.values()),h;h=yield d.next(),i=h.done,!i;u=!0)a=h.value,u=!1,yield(c=a.sender)===null||c===void 0?void 0:c.replaceTrack(this.processor.processedTrack)}catch(f){o={error:f}}finally{try{!u&&!i&&(s=d.return)&&(yield s.call(d))}finally{if(o)throw o.error}}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e))throw new Error("".concat(e," already added"));const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},H6))}setPublishingCodecs(e){var n,r,i,o,s,a,l;return G(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const c=[];try{for(n=!0,r=Vl(e);i=yield r.next(),o=i.done,!o;n=!0){l=i.value,n=!1;const u=l;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){c.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield rk(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){s={error:u}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return c})}setPublishingLayers(e){return G(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield rk(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),dN()&&this.isInBackground&&this.source===Y.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function rk(t,e,n,r,i,o){return G(this,void 0,void 0,function*(){const s=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const a=t.getParameters(),{encodings:l}=a;if(!l)return;if(l.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch");return}let c=!1;!1&&l[0].scalabilityMode||l.forEach((d,h)=>{var f;let p=(f=d.rid)!==null&&f!==void 0?f:"";p===""&&(p="q");const g=wN(p),C=n.find(m=>m.quality===g);C&&d.active!==C.enabled&&(c=!0,d.active=C.enabled,i.debug("setting layer ".concat(C.quality," to ").concat(d.active?"enabled":"disabled"),o),Lc()&&(C.enabled?(d.scaleResolutionDownBy=e[h].scaleResolutionDownBy,d.maxBitrate=e[h].maxBitrate,d.maxFrameRate=e[h].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),c&&(a.encodings=l,i.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:a.encodings})),yield t.setParameters(a))}finally{s()}})}function wN(t){switch(t){case"f":return gn.HIGH;case"h":return gn.MEDIUM;case"q":return gn.LOW;default:return gn.HIGH}}function ik(t,e,n,r){if(!n)return[new or({quality:gn.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new bN(i),s=[];for(let a=0;a<o.spatial;a+=1)s.push(new or({quality:gn.HIGH-a,width:Math.ceil(t/Math.pow(2,a)),height:Math.ceil(e/Math.pow(2,a)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(3,a)):0,ssrc:0}));return s}return n.map(i=>{var o,s,a;const l=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let c=wN((s=i.rid)!==null&&s!==void 0?s:"");return new or({quality:c,width:Math.ceil(t/l),height:Math.ceil(e/l),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}class SN extends Y{constructor(e,n,r,i,o){super(e,r,o),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?ge.Muted:ge.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver=void 0,this._currentBitrate=0,this.emit(ge.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var e;return G(this,void 0,void 0,function*(){return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),OI))}}class ol extends SN{constructor(e,n,r,i,o,s){super(e,n,Y.Kind.Audio,r,s),this.monitorReceiver=()=>G(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Pg(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;Cl()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Cl())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return G(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(cy(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&cy(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(ge.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(ge.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return G(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const Jm=100;class dd extends SN{constructor(e,n,r,i,o){super(e,n,Y.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>G(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=Pg(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=TI(()=>{this.updateDimensions()},Jm),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?pc(this._mediaStreamTrack,n):ec(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new $6(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return G(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return G(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((a,l)=>Math.max(a,l.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(a=>a.pictureInPicture),s=this.elementInfos.some(a=>a.visible)&&!i||o;if(this.lastVisible!==s){if(!s&&Date.now()-r<Jm){_n.setTimeout(()=>{this.updateVisibility()},Jm);return}this.lastVisible=s,this.emit(ge.VisibilityChanged,s,this)}}updateDimensions(){var e,n;let r=0,i=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const a=s.width()*o,l=s.height()*o;a+l>r+i&&(r=a,i=l)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(ge.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?VA():n||(VA()>2?2:1)}}class $6{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:s}=r;o===this.element&&(this.isIntersecting=s,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??ok(e),this.isPiP=Tr()&&document.pictureInPictureElement===e,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=ok(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var e;(e=this.handleResize)===null||e===void 0||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,WA().observe(this.element),GA().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var e,n;(e=WA())===null||e===void 0||e.unobserve(this.element),(n=GA())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function ok(t){let e=t.offsetTop,n=t.offsetLeft;const r=t.offsetWidth,i=t.offsetHeight,{hidden:o}=t,{opacity:s,display:a}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&e+i>window.pageYOffset&&n+r>window.pageXOffset&&!o&&(s!==""?parseFloat(s)>0:!0)&&a!=="none"}class Go extends Mo.EventEmitter{constructor(e,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=Pn.NONE,this.log=Ke,this.handleMuted=()=>{this.emit(ge.Muted)},this.handleUnmuted=()=>{this.emit(ge.Unmuted)},this.log=Ts((o=i==null?void 0:i.loggerName)!==null&&o!==void 0?o:To.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=Y.Source.Unknown}setTrack(e){this.track&&(this.track.off(ge.Muted,this.handleMuted),this.track.off(ge.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(ge.Muted,this.handleMuted),e.on(ge.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Rt(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Pn.NONE}get audioTrack(){if(this.track instanceof yr||this.track instanceof ol)return this.track}get videoTrack(){if(this.track instanceof ei||this.track instanceof dd)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=Y.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===Y.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(Go||(Go={}));class Hd extends Go{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(ge.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(ge.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(ge.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var e;return G(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){var e;return G(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){var e;return G(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){var e;return G(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}}var ri;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(ri||(ri={}));function X6(t){switch(t){case Ho.EXCELLENT:return ri.Excellent;case Ho.GOOD:return ri.Good;case Ho.POOR:return ri.Poor;case Ho.LOST:return ri.Lost;default:return ri.Unknown}}class AN extends Mo.EventEmitter{get logContext(){var e,n;return Object.assign(Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e)),{participantSid:this.sid,participantId:this.identity})}get isEncrypted(){return this.tracks.size>0&&Array.from(this.tracks.values()).every(e=>e.isEncrypted)}get isAgent(){var e,n;return(n=(e=this.permissions)===null||e===void 0?void 0:e.agent)!==null&&n!==void 0?n:!1}constructor(e,n,r,i,o){var s;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=ri.Unknown,this.log=Ke,this.log=Ts((s=o==null?void 0:o.loggerName)!==null&&s!==void 0?s:To.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){for(const[,n]of this.tracks)if(n.source===e)return n}getTrackByName(e){for(const[,n]of this.tracks)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrack(Y.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrack(Y.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrack(Y.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(se.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(se.ParticipantNameChanged,e)}setPermissions(e){var n,r,i,o,s;const a=this.permissions,l=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((c,u)=>{var d;return c!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=e,l&&this.emit(se.ParticipantPermissionsChanged,a),l}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(se.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=X6(e),n!==this._connectionQuality&&this.emit(se.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTracks.forEach(n=>(n.track instanceof ol||n.track instanceof yr)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(ge.Muted,()=>{this.emit(se.TrackMuted,e)}),e.on(ge.Unmuted,()=>{this.emit(se.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case Y.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case Y.Kind.Video:this.videoTracks.set(e.trackSid,e);break}}}function K6(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new yo({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class MI extends Go{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=gn.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(ge.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new ai({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new lo({participantSid:"",trackSids:[this.trackSid]})]});this.emit(ge.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?Go.SubscriptionStatus.Unsubscribed:super.isSubscribed?Go.SubscriptionStatus.Subscribed:Go.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Go.PermissionStatus.Allowed:Go.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(this.track instanceof dd&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&this.track instanceof dd&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(ge.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(ge.VisibilityChanged,this.handleVisibilityChange),i.off(ge.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(ge.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(ge.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(ge.VisibilityChanged,this.handleVisibilityChange),e.on(ge.Ended,this.handleEnded),this.emit(ge.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(ge.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?ge.Muted:ge.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(ge.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(ge.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===Y.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof dd&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new po({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=gn.HIGH,this.emit(ge.UpdateSettings,e)}}class $d extends AN{static fromParticipantInfo(e,n){return new $d(e,n.sid,n.identity,n.name,n.metadata)}constructor(e,n,r,i,o,s){super(n,r||"",i,o,s),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(ge.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Rt(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(ge.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(ge.SubscriptionPermissionChanged,n=>{this.emit(se.TrackSubscriptionPermissionChanged,e,n)}),e.on(ge.SubscriptionStatusChanged,n=>{this.emit(se.TrackSubscriptionStatusChanged,e,n)}),e.on(ge.Subscribed,n=>{this.emit(se.TrackSubscribed,n,e)}),e.on(ge.Unsubscribed,n=>{this.emit(se.TrackUnsubscribed,n,e)}),e.on(ge.SubscriptionFailed,n=>{this.emit(se.TrackSubscriptionFailed,e.trackSid,n)})}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Y.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrack(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y.Source.Microphone;const n=this.getTrack(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,o,s){let a=this.getTrackPublication(n);if(a||n.startsWith("TR")||this.tracks.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(se.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,o,s-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Rt(a))),this.emit(se.TrackSubscriptionFailed,n);return}const l=e.kind==="video";let c;return l?c=new dd(e,n,i,o):c=new ol(e,n,i,this.audioContext,this.audioOutput),c.source=a.source,c.isMuted=a.isMuted,c.setMediaStream(r),c.start(),a.setTrack(c),this.volumeMap.has(a.source)&&c instanceof ol&&c.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var o,s;let a=this.getTrackPublication(i.sid);if(a)a.updateInfo(i);else{const l=Y.kindFromProto(i.type);if(!l)return;a=new MI(l,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),a.updateInfo(i),r.set(i.sid,a);const c=Array.from(this.tracks.values()).find(u=>u.source===(a==null?void 0:a.source));c&&a.source!==Y.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Rt(c),newTrack:Rt(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.tracks.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Rt(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(se.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.tracks.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.tracks.delete(e),r.kind){case Y.Kind.Audio:this.audioTracks.delete(e);break;case Y.Kind.Video:this.videoTracks.delete(e);break}n&&this.emit(se.TrackUnpublished,r)}setAudioOutput(e){return G(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTracks.forEach(r=>{var i;r.track instanceof ol&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}class py extends AN{constructor(e,n,r,i){super(e,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Pn.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new pN)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>K6(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Rt(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Rt(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Rt(o))),this.onTrackMuted(o,o.isMuted)},this.handleSubscribedQualityUpdate=o=>G(this,void 0,void 0,function*(){var s,a,l,c,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const h=this.videoTracks.get(o.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!h.videoTrack)return;const C=yield h.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var f=!0,p=Vl(C),g;g=yield p.next(),s=g.done,!s;f=!0){c=g.value,f=!1;const m=c;Kj(m)&&(this.log.debug("publish ".concat(m," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Rt(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,m,h.options))}}catch(m){a={error:m}}finally{try{!f&&!s&&(l=p.return)&&(yield l.call(p))}finally{if(a)throw a.error}}}else o.subscribedQualities.length>0&&(yield(d=h.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.tracks.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>G(this,void 0,void 0,function*(){if(o.source===Y.Source.ScreenShare||o.source===Y.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Rt(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof yr||o instanceof ei)try{if(Tr())try{const s=yield navigator==null?void 0:navigator.permissions.query({name:o.source===Y.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),Rt(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Rt(o))),yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Rt(o))),yield o.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Pn.NONE}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(Ee.RemoteMute,(n,r)=>{const i=this.tracks.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(Ee.Connected,this.handleReconnected).on(Ee.SignalRestarted,this.handleReconnected).on(Ee.SignalResumed,this.handleReconnected).on(Ee.Restarting,this.handleReconnecting).on(Ee.Resuming,this.handleReconnecting).on(Ee.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(Ee.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(Ee.Disconnected,this.handleDisconnected)}setMetadata(e){var n;this.engine.client.sendUpdateLocalMetadata(e,(n=this.name)!==null&&n!==void 0?n:"")}setName(e){var n;this.engine.client.sendUpdateLocalMetadata((n=this.metadata)!==null&&n!==void 0?n:"",e)}setCameraEnabled(e,n,r){return this.setTrackEnabled(Y.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(Y.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(Y.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(se.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return G(this,void 0,void 0,function*(){this.encryptionType=e?Pn.GCM:Pn.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){var o,s;return G(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n}));let a=this.getTrack(e);if(n)if(a)yield a.unmute();else{let l;if(this.pendingPublishing.has(e)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:e}));return}this.pendingPublishing.add(e);try{switch(e){case Y.Source.Camera:l=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case Y.Source.Microphone:l=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case Y.Source.ScreenShare:l=yield this.createScreenTracks(Object.assign({},r));break;default:throw new no(e)}const c=[];for(const d of l)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Rt(d))),c.push(this.publishTrack(d,i));[a]=yield Promise.all(c)}catch(c){throw l==null||l.forEach(u=>{u.stop()}),c instanceof Error&&!(c instanceof no)&&this.emit(se.MediaDevicesError,c),c}finally{this.pendingPublishing.delete(e)}}else if(a&&a.track)if(e===Y.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const l=this.getTrack(Y.Source.ScreenShareAudio);l&&l.track&&this.unpublishTrack(l.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return G(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(Y.Source.Camera)||this.pendingPublishing.has(Y.Source.Microphone))){this.pendingPublishing.add(Y.Source.Camera),this.pendingPublishing.add(Y.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(Y.Source.Camera),this.pendingPublishing.delete(Y.Source.Microphone)}}})}createTracks(e){var n,r;return G(this,void 0,void 0,function*(){const i=cN(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),o=Rg(i);let s;try{s=yield navigator.mediaDevices.getUserMedia(o)}catch(a){throw a instanceof Error&&(o.audio&&(this.microphoneError=a),o.video&&(this.cameraError=a)),a}return o.audio&&(this.microphoneError=void 0,this.emit(se.AudioStreamAcquired)),o.video&&(this.cameraError=void 0),s.getTracks().map(a=>{const l=a.kind==="audio";l?e.audio:e.video;let c;const u=l?o.audio:o.video;typeof u!="boolean"&&(c=u);const d=IN(a,c,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return d.kind===Y.Kind.Video?d.source=Y.Source.Camera:d.kind===Y.Kind.Audio&&(d.source=Y.Source.Microphone),d.mediaStream=s,d})})}createScreenTracks(e){return G(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new EI("getDisplayMedia not supported");e.resolution===void 0&&!c6()&&(e.resolution=xI.h1080fps30.resolution);const n=e6(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new no("no video track found");const o=new ei(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=Y.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const s=[o];if(r.getAudioTracks().length>0){this.emit(se.AudioStreamAcquired);const a=new yr(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=Y.Source.ScreenShareAudio,s.push(a)}return s})}publishTrack(e,n){var r,i,o,s;return G(this,void 0,void 0,function*(){yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,e instanceof Bc&&this.pendingPublishPromises.has(e)&&(yield this.pendingPublishPromises.get(e));let a;if(e instanceof MediaStreamTrack)a=e.getConstraints();else{a=e.constraints;let f;switch(e.source){case Y.Source.Microphone:f="audioinput";break;case Y.Source.Camera:f="videoinput"}f&&this.activeDeviceMap.has(f)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(f)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new yr(e,a,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":e=new ei(e,a,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new no("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e instanceof yr&&e.setAudioContext(this.audioContext);let l;if(this.tracks.forEach(f=>{f.track&&f.track===e&&(l=f)}),l)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),Rt(l))),l;const c="channelCount"in e.mediaStreamTrack.getSettings()&&e.mediaStreamTrack.getSettings().channelCount===2||e.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:c;u&&(n||(n={}),n.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),Rt(e))),n.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(o=n.dtx)!==null&&o!==void 0||(n.dtx=!1),(s=n.red)!==null&&s!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);yl()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),d.simulcast=!1),d.source&&(e.source=d.source);const h=this.publish(e,d,u);this.pendingPublishPromises.set(e,h);try{return yield h}catch(f){throw f}finally{this.pendingPublishPromises.delete(e)}})}publish(e,n,r){var i,o,s,a,l,c,u,d,h,f,p,g,C;return G(this,void 0,void 0,function*(){Array.from(this.tracks.values()).find(T=>e instanceof Bc&&T.source===e.source)&&e.source!==Y.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Rt(e))),n.stopMicTrackOnMute&&e instanceof yr&&(e.stopOnMute=!0),e.source===Y.Source.ScreenShare&&Lc()&&(n.simulcast=!1),n.videoCodec==="av1"&&!i6()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!o6()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=dy);const v=n.videoCodec;e.on(ge.Muted,this.onTrackMuted),e.on(ge.Unmuted,this.onTrackUnmuted),e.on(ge.Ended,this.handleTrackEnded),e.on(ge.UpstreamPaused,this.onTrackUpstreamPaused),e.on(ge.UpstreamResumed,this.onTrackUpstreamResumed);const b=new Oi({cid:e.mediaStreamTrack.id,name:n.name,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n==null?void 0:n.stream});let k;if(e.kind===Y.Kind.Video){let T={width:0,height:0};try{T=yield e.waitForDimensions()}catch{const O=(a=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&a!==void 0?a:zd.h720.resolution;T={width:O.width,height:O.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Rt(e)),{dims:T}))}b.width=T.width,b.height=T.height,e instanceof ei&&(cd(v)&&(e.source===Y.Source.ScreenShare&&v==="vp9"&&(n.scalabilityMode="L1T3"),n.scalabilityMode=(l=n.scalabilityMode)!==null&&l!==void 0?l:"L3T3_KEY"),b.simulcastCodecs=[new _i({codec:v,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:dy}),n.backupCodec&&v!==n.backupCodec.codec&&b.encryption===Pn.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),b.simulcastCodecs.push(new _i({codec:n.backupCodec.codec,cid:""})))),k=fy(e.source===Y.Source.ScreenShare,b.width,b.height,n),b.layers=ik(b.width,b.height,k,cd(n.videoCodec))}else e.kind===Y.Kind.Audio&&(k=[{maxBitrate:(u=(c=n.audioPreset)===null||c===void 0?void 0:c.maxBitrate)!==null&&u!==void 0?u:n.audioBitrate,priority:(h=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&h!==void 0?h:"high",networkPriority:(p=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new un("cannot publish track when not connected");const S=yield this.engine.addTrack(b);let A;if(S.codecs.forEach(T=>{A===void 0&&(A=T.mimeType)}),A&&e.kind===Y.Kind.Video){const T=uN(A);T!==v&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Rt(e)),{codec:T})),n.videoCodec=T,k=fy(e.source===Y.Source.ScreenShare,b.width,b.height,n))}const R=new Hd(e.kind,S,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(R.options=n,e.sid=S.sid,!this.engine.pcManager)throw new un("pcManager is not ready");if(this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:k,trackInfo:S})),e.sender=yield this.engine.createSender(e,n,k),k)if(Lc()&&e.kind===Y.Kind.Audio){let T;for(const _ of this.engine.pcManager.publisher.getTransceivers())if(_.sender===e.sender){T=_;break}T&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:T,codec:"opus",maxbr:!((g=k[0])===null||g===void 0)&&g.maxBitrate?k[0].maxBitrate/1e3:0})}else e.codec&&cd(e.codec)&&(!((C=k[0])===null||C===void 0)&&C.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:b.cid,codec:e.codec,maxbr:k[0].maxBitrate/1e3});return yield this.engine.negotiate(),e instanceof ei?e.startMonitor(this.engine.client):e instanceof yr&&e.startMonitor(),this.addTrackPublication(R),this.emit(se.LocalTrackPublished,R),R})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){var i;return G(this,void 0,void 0,function*(){if(this.encryptionType!==Pn.NONE)return;let o;if(this.tracks.forEach(d=>{d.track&&d.track===e&&(o=d)}),!o)throw new no("track is not published");if(!(e instanceof ei))throw new no("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=j6(e,n,s);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Rt(e)));return}const l=e.addSimulcastTrack(n,a),c=new Oi({cid:l.mediaStreamTrack.id,type:Y.kindToProto(e.kind),muted:e.isMuted,source:Y.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:s.videoCodec,cid:l.mediaStreamTrack.id}]});if(c.layers=ik(c.width,c.height,a),!this.engine||this.engine.isClosed)throw new un("cannot publish track when not connected");const u=yield this.engine.addTrack(c);yield this.engine.createSimulcastSender(e,l,s,a),yield this.engine.negotiate(),this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:u}))})}unpublishTrack(e,n){var r,i;return G(this,void 0,void 0,function*(){const o=this.getPublicationForTrack(e),s=o?Rt(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}e=o.track,e.off(ge.Muted,this.onTrackMuted),e.off(ge.Unmuted,this.onTrackUnmuted),e.off(ge.Ended,this.handleTrackEnded),e.off(ge.UpstreamPaused,this.onTrackUpstreamPaused),e.off(ge.UpstreamResumed,this.onTrackUpstreamResumed),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&e.stop();let a=!1;const l=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<hn.FAILED&&l)try{for(const c of this.engine.pcManager.publisher.getTransceivers())c.sender===l&&(c.direction="inactive",a=!0);if(this.engine.removeTrack(l)&&(a=!0),e instanceof ei){for(const[,c]of e.simulcastCodecs)c.sender&&(this.engine.removeTrack(c.sender)&&(a=!0),c.sender=void 0);e.simulcastCodecs.clear()}}catch(c){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:c}))}switch(this.tracks.delete(o.trackSid),o.kind){case Y.Kind.Audio:this.audioTracks.delete(o.trackSid);break;case Y.Kind.Video:this.videoTracks.delete(o.trackSid);break}return this.emit(se.LocalTrackUnpublished,o),o.setTrack(void 0),a&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return G(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof Hd)})}republishAllTracks(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return G(this,void 0,void 0,function*(){const r=[];this.tracks.forEach(i=>{i.track&&(e&&(i.options=Object.assign(Object.assign({},i.options),e)),r.push(i))}),yield Promise.all(r.map(i=>G(this,void 0,void 0,function*(){const o=i.track;yield this.unpublishTrack(o,!1),n&&!o.isMuted&&o.source!==Y.Source.ScreenShare&&o.source!==Y.Source.ScreenShareAudio&&(o instanceof yr||o instanceof ei)&&!o.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:i.trackSid})),yield o.restartTrack()),yield this.publishTrack(o,i.options)})))})}publishData(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return G(this,void 0,void 0,function*(){const i=Array.isArray(r)?r:r==null?void 0:r.destination,o=[],s=Array.isArray(r)?void 0:r.topic;i!==void 0&&i.forEach(l=>{l instanceof $d?o.push(l.sid):o.push(l)});const a=new oo({kind:n,value:{case:"user",value:new ao({participantSid:this.sid,payload:e,destinationSids:o,topic:s})}});yield this.engine.sendDataPacket(a,n)})}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var r,i;const o=this.tracks.get(n.sid);if(o){const s=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Rt(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0)}getPublicationForTrack(e){let n;return this.tracks.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(i instanceof yr||i instanceof ei)&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}}var it;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting"})(it||(it={}));const J6=2*1e3;class jp extends Mo.EventEmitter{constructor(e){var n,r,i;super(),n=this,this.state=it.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Ke,this.bufferedEvents=[],this.connect=(o,s,a)=>G(this,void 0,void 0,function*(){var l;const c=yield this.disconnectLock.lock();if(this.state===it.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),c(),Promise.resolve();if(this.connectFuture)return c(),this.connectFuture.promise;this.setAndEmitConnectionState(it.Connecting),((l=this.regionUrlProvider)===null||l===void 0?void 0:l.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),uy(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new ek(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().catch(h=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:h}))}));const u=(h,f,p)=>G(this,void 0,void 0,function*(){var g;this.abortController&&this.abortController.abort();const C=new AbortController;this.abortController=C,c==null||c();try{yield this.attemptConnection(p??o,s,a,C),this.abortController=void 0,h()}catch(m){if(this.regionUrlProvider&&m instanceof wt&&m.reason!==3&&m.reason!==0){let v=null;try{v=yield this.regionUrlProvider.getNextBestRegionUrl((g=this.abortController)===null||g===void 0?void 0:g.signal)}catch(b){if(b instanceof wt&&(b.status===401||b.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(b);return}}v?(this.log.info("Initial connection failed with ConnectionError: ".concat(m.message,". Retrying with another region: ").concat(v),this.logContext),yield u(h,f,v)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(m))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(m)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new pN((h,f)=>{u(h,f,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,a,l,c,u)=>G(this,void 0,void 0,function*(){var d,h,f;const p=yield a.join(o,s,{autoSubscribe:l.autoSubscribe,publishOnly:l.publishOnly,adaptiveStream:typeof c.adaptiveStream=="object"?!0:c.adaptiveStream,maxRetries:l.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:l.websocketTimeout},u.signal);let g=p.serverInfo;if(g||(g={version:p.serverVersion,region:p.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(g).map(C=>{let[m,v]=C;return"".concat(m,": ").concat(v)}).join(", ")),{room:(d=p.room)===null||d===void 0?void 0:d.name,roomSid:(h=p.room)===null||h===void 0?void 0:h.sid,identity:(f=p.participant)===null||f===void 0?void 0:f.identity}),!p.serverVersion)throw new Wj("unknown server version");return p.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),c.dynacast=!1),p}),this.applyJoinResponse=o=>{const s=o.participant;this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(o.sifTrailer)},this.attemptConnection=(o,s,a,l)=>G(this,void 0,void 0,function*(){var c,u;this.state===it.Reconnecting?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((c=this.regionUrlProvider)===null||c===void 0)&&c.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},_I),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const d=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,l);this.applyJoinResponse(d),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected)}catch(d){yield this.engine.close(),this.recreateEngine();const h=new wt("could not establish signal connection");throw d instanceof Error&&(h.message="".concat(h.message,": ").concat(d.message)),d instanceof wt&&(h.reason=d.reason,h.status=d.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:d})),h}if(l.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new wt("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,l)}catch(d){throw yield this.engine.close(),this.recreateEngine(),d}Tr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),Tr()&&(document.addEventListener("freeze",this.onPageLeave),(u=navigator.mediaDevices)===null||u===void 0||u.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(it.Connected),this.emit(ne.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return G(n,void 0,void 0,function*(){var s,a,l,c;const u=yield this.disconnectLock.lock();try{if(this.state===it.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===it.Connecting||this.state===it.Reconnecting)&&(this.log.warn("abort connection attempt",this.logContext),(s=this.abortController)===null||s===void 0||s.abort(),(l=(a=this.connectFuture)===null||a===void 0?void 0:a.reject)===null||l===void 0||l.call(a,new wt("Client initiated disconnect")),this.connectFuture=void 0),!((c=this.engine)===null||c===void 0)&&c.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(o,ys.CLIENT_INITIATED),this.engine=void 0}finally{u()}})},this.onPageLeave=()=>G(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>G(this,void 0,void 0,function*(){const o=[],s=xs();if(s&&s.os==="iOS"){const a="livekit-dummy-audio-el";let l=document.getElementById(a);if(!l){l=document.createElement("audio"),l.id=a,l.autoplay=!0,l.hidden=!0;const c=Hm();c.enabled=!0;const u=new MediaStream([c]);l.srcObject=u,document.addEventListener("visibilitychange",()=>{l&&(l.srcObject=document.hidden?null:u,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(l),this.once(ne.Disconnected,()=>{l==null||l.remove(),l=null})}o.push(l)}this.participants.forEach(a=>{a.audioTracks.forEach(l=>{l.track&&l.track.attachedElements.forEach(c=>{o.push(c)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>G(this,void 0,void 0,function*(){const o=[];for(const s of this.participants.values())s.videoTracks.forEach(a=>{var l;(l=a.track)===null||l===void 0||l.attachedElements.forEach(c=>{o.includes(c)||o.push(c)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const o of this.participants.values())this.handleParticipantDisconnected(o.sid,o);this.setAndEmitConnectionState(it.Reconnecting)&&this.emit(ne.Reconnecting)},this.handleSignalRestarted=o=>G(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(it.Connected),this.emit(ne.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}const a=this.identityToSid.get(s.identity);a&&a!==s.sid&&this.handleParticipantDisconnected(a,this.participants.get(a));let l=this.participants.get(s.sid);const c=!l;s.state===ml.DISCONNECTED?this.handleParticipantDisconnected(s.sid,l):(l=this.getOrCreateParticipant(s.sid,s),c||l.updateInfo(s))})},this.handleActiveSpeakersUpdate=o=>{const s=[],a={};o.forEach(l=>{if(a[l.sid]=!0,l.sid===this.localParticipant.sid)this.localParticipant.audioLevel=l.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const c=this.participants.get(l.sid);c&&(c.audioLevel=l.level,c.setIsSpeaking(!0),s.push(c))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(l=>{a[l.sid]||(l.audioLevel=0,l.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(ne.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(l=>{s.set(l.sid,l)}),o.forEach(l=>{let c=this.participants.get(l.sid);l.sid===this.localParticipant.sid&&(c=this.localParticipant),c&&(c.audioLevel=l.level,c.setIsSpeaking(l.active),l.active?s.set(l.sid,c):s.delete(l.sid))});const a=Array.from(s.values());a.sort((l,c)=>c.audioLevel-l.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(ne.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const a=this.participants.get(s.participantSid);if(!a)return;const l=a.getTrackPublication(s.trackSid);!l||!l.track||(l.track.streamState=Y.streamStateFromProto(s.state),a.emit(se.TrackStreamStateChanged,l,l.track.streamState),this.emitWhenConnected(ne.TrackStreamStateChanged,l,l.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.participants.get(o.participantSid);if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.participants.values()).find(l=>l.tracks.has(o.trackSid));if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setSubscriptionError(o.err)},this.handleDataPacket=(o,s)=>{const a=this.participants.get(o.participantSid);this.emit(ne.DataReceived,o.payload,a,s,o.topic),a==null||a.emit(se.DataReceived,o.payload,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ne.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ne.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ne.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ne.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>G(this,void 0,void 0,function*(){this.emit(ne.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(ne.RoomMetadataChanged,o.metadata),(s==null?void 0:s.activeRecording)!==o.activeRecording&&this.emitWhenConnected(ne.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const a=this.participants.get(s.participantSid);a&&a.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(ne.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(ne.ParticipantNameChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(ne.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(ne.TrackUnmuted,o,this.localParticipant)},this.onLocalTrackPublished=o=>G(this,void 0,void 0,function*(){var s;this.emit(ne.LocalTrackPublished,o,this.localParticipant),o.track instanceof yr&&(yield o.track.checkForSilence())&&this.emit(ne.LocalAudioSilenceDetected,o);const a=yield(s=o.track)===null||s===void 0?void 0:s.getDeviceId(),l=qj(o.source);l&&a&&a!==this.localParticipant.activeDeviceMap.get(l)&&(this.localParticipant.activeDeviceMap.set(l,a),this.emit(ne.ActiveDeviceChanged,l,a))}),this.onLocalTrackUnpublished=o=>{this.emit(ne.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalConnectionQualityChanged=o=>{this.emit(ne.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(ne.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(ne.ParticipantPermissionsChanged,o,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.identityToSid=new Map,this.options=Object.assign(Object.assign({},_6),e),this.log=Ts((r=this.options.loggerName)!==null&&r!==void 0?r:To.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},yN),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},CN),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},N6),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new Vi,this.localParticipant=new py("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",il(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",il(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",il(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(e){return G(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&(this.e2eeManager=new v6(this.options.e2ee),this.e2eeManager.on(ca.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof py&&(this.isE2EEEnabled=n),this.emit(ne.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(ca.EncryptionError,n=>this.emit(ne.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){return{room:this.name,roomSid:this.sid,identity:this.localParticipant.identity}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}get sid(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.sid)!==null&&n!==void 0?n:""}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new D6(this.options),this.engine.on(Ee.ParticipantUpdate,this.handleParticipantUpdates).on(Ee.RoomUpdate,this.handleRoomUpdate).on(Ee.SpeakersChanged,this.handleSpeakersChanged).on(Ee.StreamStateChanged,this.handleStreamStateUpdate).on(Ee.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(Ee.SubscriptionError,this.handleSubscriptionError).on(Ee.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(Ee.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(Ee.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(Ee.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(Ee.DataPacketReceived,this.handleDataPacket).on(Ee.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(it.Reconnecting)&&this.emit(ne.Reconnecting)}).on(Ee.Resumed,()=>{this.setAndEmitConnectionState(it.Connected),this.emit(ne.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),this.emitBufferedEvents()}).on(Ee.SignalResumed,()=>{this.bufferedEvents=[],this.state===it.Reconnecting&&this.sendSyncState()}).on(Ee.Restarting,this.handleRestarting).on(Ee.SignalRestarted,this.handleSignalRestarted).on(Ee.DCBufferStatusChanged,(e,n)=>{this.emit(ne.DCBufferStatusChanged,e,n)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return tr.getInstance().getDevices(e,n)}prepareConnection(e,n){return G(this,void 0,void 0,function*(){if(this.state===it.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(uy(new URL(e))&&n){this.regionUrlProvider=new ek(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===it.Disconnected&&(this.regionUrl=r,yield fetch(ZA(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(ZA(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){if(this.localParticipant.identity===e)return this.localParticipant;const n=this.identityToSid.get(e);if(n)return this.participants.get(n)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return G(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new Rn({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new Rn({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new Rn({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new Rn({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>G(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Rn({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>G(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new Rn({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new Rn({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>G(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new li({reason:ys.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new Rn({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveAudioOutputDevice(){var e,n;return(n=(e=this.options.audioOutput)===null||e===void 0?void 0:e.deviceId)!==null&&n!==void 0?n:""}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var i,o,s;return G(this,void 0,void 0,function*(){let a=!1,l=!0;const c=r?{exact:n}:n;if(e==="audioinput"){const u=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=c,a=u!==c;const d=Array.from(this.localParticipant.audioTracks.values()).filter(h=>h.source===Y.Source.Microphone);try{l=(yield Promise.all(d.map(h=>{var f;return(f=h.audioTrack)===null||f===void 0?void 0:f.setDeviceId(c)}))).every(h=>h===!0)}catch(h){throw this.options.audioCaptureDefaults.deviceId=u,h}}else if(e==="videoinput"){const u=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=c,a=u!==c;const d=Array.from(this.localParticipant.videoTracks.values()).filter(h=>h.source===Y.Source.Camera);try{l=(yield Promise.all(d.map(h=>{var f;return(f=h.videoTrack)===null||f===void 0?void 0:f.setDeviceId(c)}))).every(h=>h===!0)}catch(h){throw this.options.videoCaptureDefaults.deviceId=u,h}}else if(e==="audiooutput"){if(!cy()&&!this.options.expWebAudioMix||this.options.expWebAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(i=(s=this.options).audioOutput)!==null&&i!==void 0||(s.audioOutput={});const u=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=n,a=u!==c;try{this.options.expWebAudioMix?(o=this.audioContext)===null||o===void 0||o.setSinkId(n):yield Promise.all(Array.from(this.participants.values()).map(d=>d.setAudioOutput({deviceId:n})))}catch(d){throw this.options.audioOutput.deviceId=u,d}}return a&&l&&(this.localParticipant.activeDeviceMap.set(e,n),this.emit(ne.ActiveDeviceChanged,e,n)),l})}setupLocalParticipantEvents(){this.localParticipant.on(se.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(se.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(se.TrackMuted,this.onLocalTrackMuted).on(se.TrackUnmuted,this.onLocalTrackUnmuted).on(se.LocalTrackPublished,this.onLocalTrackPublished).on(se.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(se.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(se.MediaDevicesError,this.onMediaDevicesError).on(se.AudioStreamAcquired,this.startAudio).on(se.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.participants.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===it.Connecting||this.state===it.Reconnecting){const u=()=>{this.onTrackAdded(e,n,r),d()},d=()=>{this.off(ne.Reconnected,u),this.off(ne.Connected,u),this.off(ne.Disconnected,d)};this.once(ne.Reconnected,u),this.once(ne.Connected,u),this.once(ne.Disconnected,d);return}if(this.state===it.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=r6(n.id),o=i[0];let s=i[1],a=e.id;if(s&&s.startsWith("TR")&&(a=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const l=this.participants.get(o);if(!l){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let c;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?c=this.options.adaptiveStream:c={}),l.addSubscribedMediaTrack(e,a,n,r,c)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.bufferedEvents=[],this.state!==it.Disconnected){this.regionUrl=void 0;try{this.participants.forEach(i=>{i.tracks.forEach(o=>{i.unpublishTrack(o.trackSid)})}),this.localParticipant.tracks.forEach(i=>{var o,s;i.track&&this.localParticipant.unpublishTrack(i.track,e),e&&((o=i.track)===null||o===void 0||o.detach(),(s=i.track)===null||s===void 0||s.stop())}),this.localParticipant.off(se.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(se.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(se.TrackMuted,this.onLocalTrackMuted).off(se.TrackUnmuted,this.onLocalTrackUnmuted).off(se.LocalTrackPublished,this.onLocalTrackPublished).off(se.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(se.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(se.MediaDevicesError,this.onMediaDevicesError).off(se.AudioStreamAcquired,this.startAudio).off(se.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),Tr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(it.Disconnected),this.emit(ne.Disconnected,n)}}}handleParticipantDisconnected(e,n){this.participants.delete(e),n&&(this.identityToSid.delete(n.identity),n.tracks.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(ne.ParticipantDisconnected,n))}acquireAudioContext(){var e,n;return G(this,void 0,void 0,function*(){if(typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?this.audioContext=this.options.expWebAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=RI())!==null&&e!==void 0?e:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.expWebAudioMix&&this.participants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(ne.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=$d.fromParticipantInfo(this.engine.client,n):i=new $d(this.engine.client,e,"",void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.expWebAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.participants.has(e))return this.participants.get(e);const r=this.createParticipant(e,n);return this.participants.set(e,r),this.identityToSid.set(n.identity,n.sid),this.emitWhenConnected(ne.ParticipantConnected,r),r.on(se.TrackPublished,i=>{this.emitWhenConnected(ne.TrackPublished,i,r)}).on(se.TrackSubscribed,(i,o)=>{i.kind===Y.Kind.Audio?(i.on(ge.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(ge.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===Y.Kind.Video&&(i.on(ge.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(ge.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ne.TrackSubscribed,i,o,r)}).on(se.TrackUnpublished,i=>{this.emit(ne.TrackUnpublished,i,r)}).on(se.TrackUnsubscribed,(i,o)=>{this.emit(ne.TrackUnsubscribed,i,o,r)}).on(se.TrackSubscriptionFailed,i=>{this.emit(ne.TrackSubscriptionFailed,i,r)}).on(se.TrackMuted,i=>{this.emitWhenConnected(ne.TrackMuted,i,r)}).on(se.TrackUnmuted,i=>{this.emitWhenConnected(ne.TrackUnmuted,i,r)}).on(se.ParticipantMetadataChanged,i=>{this.emitWhenConnected(ne.ParticipantMetadataChanged,i,r)}).on(se.ParticipantNameChanged,i=>{this.emitWhenConnected(ne.ParticipantNameChanged,i,r)}).on(se.ConnectionQualityChanged,i=>{this.emitWhenConnected(ne.ConnectionQualityChanged,i,r)}).on(se.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(ne.ParticipantPermissionsChanged,i,r)}).on(se.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(ne.TrackSubscriptionStatusChanged,i,o,r)}).on(se.TrackSubscriptionFailed,(i,o)=>{this.emit(ne.TrackSubscriptionFailed,i,r,o)}).on(se.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(ne.TrackSubscriptionPermissionChanged,i,o,r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.participants.values()).reduce((r,i)=>(r.push(...i.getTracks()),r),[]),n=this.localParticipant.getTracks();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.participants.values())for(const n of e.videoTracks.values())n.isSubscribed&&n instanceof MI&&n.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=_n.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,ys.STATE_MISMATCH))):e=0},J6)}clearConnectionReconcile(){this.connectionReconcileInterval&&_n.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(ne.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.state===it.Connected?this.emit(e,...r):(this.state===it.Reconnecting&&this.bufferedEvents.push([e,r]),!1)}simulateParticipants(e){var n,r;return G(this,void 0,void 0,function*(){const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new qc({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Ue.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new zr({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected),this.emit(ne.Connected),this.setAndEmitConnectionState(it.Connected),i.video){const s=new Hd(Y.Kind.Video,new Sr({source:Xt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO,name:"video-dummy"}),new ei(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:jA(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(se.LocalTrackPublished,s)}if(i.audio){const s=new Hd(Y.Kind.Audio,new Sr({source:Xt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO}),new yr(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Hm(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(se.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let a=new zr({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:ml.ACTIVE,tracks:[],joinedAt:Ue.parse(Date.now())});const l=this.getOrCreateParticipant(a.identity,a);if(o.video){const c=jA(160*((r=o.aspectRatios[s%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new Sr({source:Xt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c])),a.tracks=[...a.tracks,u]}if(o.audio){const c=Hm(),u=new Sr({source:Xt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:zn.AUDIO});l.addSubscribedMediaTrack(c,u.sid,new MediaStream([c])),a.tracks=[...a.tracks,u]}l.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==ne.ActiveSpeakersChanged){const o=kN(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...r)}}function kN(t){return t.map(e=>{if(e)return Array.isArray(e)?kN(e):typeof e=="object"?"logContext"in e&&e.logContext:e})}var Ri;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(Ri||(Ri={}));class tu extends Mo.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=Ri.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=e,this.token=n,this.name=this.constructor.name,this.room=new jp(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(e){return G(this,void 0,void 0,function*(){if(this.status!==Ri.IDLE)throw Error("check is running already");this.setStatus(Ri.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==Ri.SKIPPED&&this.setStatus(this.isSuccess()?Ri.SUCCESS:Ri.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(){return G(this,void 0,void 0,function*(){return this.room.state===it.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return G(this,void 0,void 0,function*(){this.room&&this.room.state!==it.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(Ri.SKIPPED)}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function EN(t){var e,n;return G(this,void 0,void 0,function*(){t??(t={}),(e=t.audio)!==null&&e!==void 0||(t.audio=!0),(n=t.video)!==null&&n!==void 0||(t.video=!0);const r=cN(t,yN,CN),i=Rg(r),o=navigator.mediaDevices.getUserMedia(i);t.audio&&(tr.userMediaPromiseMap.set("audioinput",o),o.catch(()=>tr.userMediaPromiseMap.delete("audioinput"))),t.video&&(tr.userMediaPromiseMap.set("videoinput",o),o.catch(()=>tr.userMediaPromiseMap.delete("videoinput")));const s=yield o;return s.getTracks().map(a=>{const l=a.kind==="audio";l?t.audio:t.video;let c;const u=l?i.audio:i.video;typeof u!="boolean"&&(c=u),c?c.deviceId=a.getSettings().deviceId:c={deviceId:a.getSettings().deviceId};const d=IN(a,c);return d.kind===Y.Kind.Video?d.source=Y.Source.Camera:d.kind===Y.Kind.Audio&&(d.source=Y.Source.Microphone),d.mediaStream=s,d})})}function Y6(t){return G(this,void 0,void 0,function*(){return(yield EN({audio:!1,video:t}))[0]})}function Q6(t){return G(this,void 0,void 0,function*(){return(yield EN({audio:t,video:!1}))[0]})}class q6 extends tu{get description(){return"Can publish audio"}perform(){var e;return G(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield Q6();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="audio"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class eZ extends tu{get description(){return"Can publish video"}perform(){var e;return G(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield Y6();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="video"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class tZ extends tu{get description(){return"Resuming connection after interruption"}perform(){var e;return G(this,void 0,void 0,function*(){const n=yield this.connect();let r=!1,i=!1,o;const s=new Promise(l=>{setTimeout(l,5e3),o=l});n.on(ne.Reconnecting,()=>{r=!0}).on(ne.Reconnected,()=>{i=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const a=n.engine.client.onClose;if(a&&a(""),yield s,r){if(!i||n.state!==it.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class nZ extends tu{get description(){return"Can connect via TURN"}perform(){var e,n;return G(this,void 0,void 0,function*(){const r=new NI,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,a=!1;for(let l of i.iceServers)for(let c of l.urls)c.startsWith("turn:")?(s=!0,a=!0):c.startsWith("turns:")&&(s=!0,a=!0,o=!0),c.startsWith("stun:")&&(a=!0);a?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(l=>setTimeout(l,0)))})}}class rZ extends tu{get description(){return"Establishing WebRTC connection"}perform(){return G(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(ne.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,o)=>{if(i.candidate){const s=new RTCIceCandidate(i);let a="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(iZ(s.address)?a+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(e=!0,a+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Ke.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function iZ(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class oZ extends tu{get description(){return"Connecting to signal connection via WebSocket"}perform(){var e,n,r;return G(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new NI;const o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===Mc.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class Q$ extends Mo.EventEmitter{constructor(e,n){super(),this.checkResults=new Map,this.url=e,this.token=n}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:Ri.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==Ri.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return G(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token),i=s=>{this.updateCheck(n,s)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(oZ)})}checkWebRTC(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(rZ)})}checkTURN(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(nZ)})}checkReconnect(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(tZ)})}checkPublishAudio(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(q6)})}checkPublishVideo(){return G(this,void 0,void 0,function*(){return this.createAndRunCheck(eZ)})}}function sZ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=t instanceof Bc?t.mediaStreamTrack:t,i=r.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;Ke.debug("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&cZ(s)&&(o={facingMode:s,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Ke.debug("Try to get facing mode from device label: (".concat(r.label,")"));const s=lZ(r.label);s!==void 0&&(o=s)}return o}const sk=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),aZ=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function lZ(t){var e;const n=t.trim().toLowerCase();if(n!=="")return sk.has(n)?sk.get(n):(e=Array.from(aZ.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function cZ(t){return t===void 0||["user","environment","left","right"].includes(t)}const gy=Math.min,mc=Math.max,Zp=Math.round,ko=t=>({x:t,y:t}),uZ={left:"right",right:"left",bottom:"top",top:"bottom"},dZ={start:"end",end:"start"};function ak(t,e,n){return mc(t,gy(e,n))}function Ng(t,e){return typeof t=="function"?t(e):t}function Il(t){return t.split("-")[0]}function _g(t){return t.split("-")[1]}function TN(t){return t==="x"?"y":"x"}function xN(t){return t==="y"?"height":"width"}function Fc(t){return["top","bottom"].includes(Il(t))?"y":"x"}function RN(t){return TN(Fc(t))}function hZ(t,e,n){n===void 0&&(n=!1);const r=_g(t),i=RN(t),o=xN(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=zp(s)),[s,zp(s)]}function fZ(t){const e=zp(t);return[my(t),e,my(e)]}function my(t){return t.replace(/start|end/g,e=>dZ[e])}function pZ(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function gZ(t,e,n,r){const i=_g(t);let o=pZ(Il(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(my)))),o}function zp(t){return t.replace(/left|right|bottom|top/g,e=>uZ[e])}function mZ(t){return{top:0,right:0,bottom:0,left:0,...t}}function vZ(t){return typeof t!="number"?mZ(t):{top:t,right:t,bottom:t,left:t}}function Hp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function lk(t,e,n){let{reference:r,floating:i}=t;const o=Fc(e),s=RN(e),a=xN(s),l=Il(e),c=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(l){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(_g(e)){case"start":f[s]-=h*(n&&c?-1:1);break;case"end":f[s]+=h*(n&&c?-1:1);break}return f}const yZ=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=lk(c,r,l),h=r,f={},p=0;for(let g=0;g<a.length;g++){const{name:C,fn:m}=a[g],{x:v,y:b,data:k,reset:S}=await m({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:c,platform:s,elements:{reference:t,floating:e}});u=v??u,d=b??d,f={...f,[C]:{...f[C],...k}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):S.rects),{x:u,y:d}=lk(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function PN(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:l}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Ng(e,t),p=vZ(f),C=a[h?d==="floating"?"reference":"floating":d],m=Hp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:c,rootBoundary:u,strategy:l})),v=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),k=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},S=Hp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:l}):v);return{top:(m.top-S.top+p.top)/k.y,bottom:(S.bottom-m.bottom+p.bottom)/k.y,left:(m.left-S.left+p.left)/k.x,right:(S.right-m.right+p.right)/k.x}}const CZ=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...C}=Ng(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const m=Il(i),v=Fc(a),b=Il(a)===a,k=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(b||!g?[zp(a)]:fZ(a)),A=p!=="none";!h&&A&&S.push(...gZ(a,g,p,k));const R=[a,...S],T=await PN(e,C),_=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&_.push(T[m]),d){const Z=hZ(i,s,k);_.push(T[Z[0]],T[Z[1]])}if(O=[...O,{placement:i,overflows:_}],!_.every(Z=>Z<=0)){var B,V;const Z=(((B=o.flip)==null?void 0:B.index)||0)+1,J=R[Z];if(J)return{data:{index:Z,overflows:O},reset:{placement:J}};let ee=(V=O.filter(re=>re.overflows[0]<=0).sort((re,$)=>re.overflows[1]-$.overflows[1])[0])==null?void 0:V.placement;if(!ee)switch(f){case"bestFit":{var H;const re=(H=O.filter($=>{if(A){const K=Fc($.placement);return K===v||K==="y"}return!0}).map($=>[$.placement,$.overflows.filter(K=>K>0).reduce((K,ie)=>K+ie,0)]).sort(($,K)=>$[1]-K[1])[0])==null?void 0:H[0];re&&(ee=re);break}case"initialPlacement":ee=a;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}};async function IZ(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=Il(n),a=_g(n),l=Fc(n)==="y",c=["left","top"].includes(s)?-1:1,u=o&&l?-1:1,d=Ng(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const bZ=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,l=await IZ(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},wZ=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:C=>{let{x:m,y:v}=C;return{x:m,y:v}}},...l}=Ng(t,e),c={x:n,y:r},u=await PN(e,l),d=Fc(Il(i)),h=TN(d);let f=c[h],p=c[d];if(o){const C=h==="y"?"top":"left",m=h==="y"?"bottom":"right",v=f+u[C],b=f-u[m];f=ak(v,f,b)}if(s){const C=d==="y"?"top":"left",m=d==="y"?"bottom":"right",v=p+u[C],b=p-u[m];p=ak(v,p,b)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[h]:o,[d]:s}}}}}};function Og(){return typeof window<"u"}function nu(t){return NN(t)?(t.nodeName||"").toLowerCase():"#document"}function $r(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _s(t){var e;return(e=(NN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function NN(t){return Og()?t instanceof Node||t instanceof $r(t).Node:!1}function Zi(t){return Og()?t instanceof Element||t instanceof $r(t).Element:!1}function xo(t){return Og()?t instanceof HTMLElement||t instanceof $r(t).HTMLElement:!1}function ck(t){return!Og()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof $r(t).ShadowRoot}function gh(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=zi(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function SZ(t){return["table","td","th"].includes(nu(t))}function Mg(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function DI(t){const e=LI(),n=Zi(t)?zi(t):t;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function AZ(t){let e=Aa(t);for(;xo(e)&&!Uc(e);){if(DI(e))return e;if(Mg(e))return null;e=Aa(e)}return null}function LI(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Uc(t){return["html","body","#document"].includes(nu(t))}function zi(t){return $r(t).getComputedStyle(t)}function Dg(t){return Zi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Aa(t){if(nu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||ck(t)&&t.host||_s(t);return ck(e)?e.host:e}function _N(t){const e=Aa(t);return Uc(e)?t.ownerDocument?t.ownerDocument.body:t.body:xo(e)&&gh(e)?e:_N(e)}function vy(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=_N(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=$r(i);if(o){const a=yy(s);return e.concat(s,s.visualViewport||[],gh(i)?i:[],a&&n?vy(a):[])}return e.concat(i,vy(i,[],n))}function yy(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function ON(t){const e=zi(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=xo(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=Zp(n)!==o||Zp(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function MN(t){return Zi(t)?t:t.contextElement}function vc(t){const e=MN(t);if(!xo(e))return ko(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=ON(e);let s=(o?Zp(n.width):n.width)/r,a=(o?Zp(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const kZ=ko(0);function DN(t){const e=$r(t);return!LI()||!e.visualViewport?kZ:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function EZ(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==$r(t)?!1:e}function Xd(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=MN(t);let s=ko(1);e&&(r?Zi(r)&&(s=vc(r)):s=vc(t));const a=EZ(o,n,r)?DN(o):ko(0);let l=(i.left+a.x)/s.x,c=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const h=$r(o),f=r&&Zi(r)?$r(r):r;let p=h,g=yy(p);for(;g&&r&&f!==p;){const C=vc(g),m=g.getBoundingClientRect(),v=zi(g),b=m.left+(g.clientLeft+parseFloat(v.paddingLeft))*C.x,k=m.top+(g.clientTop+parseFloat(v.paddingTop))*C.y;l*=C.x,c*=C.y,u*=C.x,d*=C.y,l+=b,c+=k,p=$r(g),g=yy(p)}}return Hp({width:u,height:d,x:l,y:c})}function BI(t,e){const n=Dg(t).scrollLeft;return e?e.left+n:Xd(_s(t)).left+n}function LN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),i=r.left+e.scrollLeft-(n?0:BI(t,r)),o=r.top+e.scrollTop;return{x:i,y:o}}function TZ(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=_s(r),a=e?Mg(e.floating):!1;if(r===s||a&&o)return n;let l={scrollLeft:0,scrollTop:0},c=ko(1);const u=ko(0),d=xo(r);if((d||!d&&!o)&&((nu(r)!=="body"||gh(s))&&(l=Dg(r)),xo(r))){const f=Xd(r);c=vc(r),u.x=f.x+r.clientLeft,u.y=f.y+r.clientTop}const h=s&&!d&&!o?LN(s,l,!0):ko(0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:n.y*c.y-l.scrollTop*c.y+u.y+h.y}}function xZ(t){return Array.from(t.getClientRects())}function RZ(t){const e=_s(t),n=Dg(t),r=t.ownerDocument.body,i=mc(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=mc(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+BI(t);const a=-n.scrollTop;return zi(r).direction==="rtl"&&(s+=mc(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function PZ(t,e){const n=$r(t),r=_s(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,l=0;if(i){o=i.width,s=i.height;const c=LI();(!c||c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:a,y:l}}function NZ(t,e){const n=Xd(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=xo(t)?vc(t):ko(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,l=i*o.x,c=r*o.y;return{width:s,height:a,x:l,y:c}}function uk(t,e,n){let r;if(e==="viewport")r=PZ(t,n);else if(e==="document")r=RZ(_s(t));else if(Zi(e))r=NZ(e,n);else{const i=DN(t);r={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return Hp(r)}function BN(t,e){const n=Aa(t);return n===e||!Zi(n)||Uc(n)?!1:zi(n).position==="fixed"||BN(n,e)}function _Z(t,e){const n=e.get(t);if(n)return n;let r=vy(t,[],!1).filter(a=>Zi(a)&&nu(a)!=="body"),i=null;const o=zi(t).position==="fixed";let s=o?Aa(t):t;for(;Zi(s)&&!Uc(s);){const a=zi(s),l=DI(s);!l&&a.position==="fixed"&&(i=null),(o?!l&&!i:!l&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||gh(s)&&!l&&BN(t,s))?r=r.filter(u=>u!==s):i=a,s=Aa(s)}return e.set(t,r),r}function OZ(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?Mg(e)?[]:_Z(e,this._c):[].concat(n),r],a=s[0],l=s.reduce((c,u)=>{const d=uk(e,u,i);return c.top=mc(d.top,c.top),c.right=gy(d.right,c.right),c.bottom=gy(d.bottom,c.bottom),c.left=mc(d.left,c.left),c},uk(e,a,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function MZ(t){const{width:e,height:n}=ON(t);return{width:e,height:n}}function DZ(t,e,n){const r=xo(e),i=_s(e),o=n==="fixed",s=Xd(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const l=ko(0);if(r||!r&&!o)if((nu(e)!=="body"||gh(i))&&(a=Dg(e)),r){const h=Xd(e,!0,o,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=BI(i));const c=i&&!r&&!o?LN(i,a):ko(0),u=s.left+a.scrollLeft-l.x-c.x,d=s.top+a.scrollTop-l.y-c.y;return{x:u,y:d,width:s.width,height:s.height}}function Ym(t){return zi(t).position==="static"}function dk(t,e){if(!xo(t)||zi(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _s(t)===n&&(n=n.ownerDocument.body),n}function FN(t,e){const n=$r(t);if(Mg(t))return n;if(!xo(t)){let i=Aa(t);for(;i&&!Uc(i);){if(Zi(i)&&!Ym(i))return i;i=Aa(i)}return n}let r=dk(t,e);for(;r&&SZ(r)&&Ym(r);)r=dk(r,e);return r&&Uc(r)&&Ym(r)&&!DI(r)?n:r||AZ(t)||n}const LZ=async function(t){const e=this.getOffsetParent||FN,n=this.getDimensions,r=await n(t.floating);return{reference:DZ(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function BZ(t){return zi(t).direction==="rtl"}const FZ={convertOffsetParentRelativeRectToViewportRelativeRect:TZ,getDocumentElement:_s,getClippingRect:OZ,getOffsetParent:FN,getElementRects:LZ,getClientRects:xZ,getDimensions:MZ,getScale:vc,isElement:Zi,isRTL:BZ},UZ=bZ,VZ=wZ,GZ=CZ,WZ=(t,e,n)=>{const r=new Map,i={platform:FZ,...n},o={...i.platform,_c:r};return yZ(t,e,{...i,platform:o})};var UN={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(L_,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(g,C){var m=g[C];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?l:console[g]!==void 0?a(console,g):console.log!==void 0?a(console,"log"):e}function u(){for(var g=this.getLevel(),C=0;C<i.length;C++){var m=i[C];this[m]=C<g?e:this.methodFactory(m,g,this.name)}if(this.log=this.debug,typeof console===n&&g<this.levels.SILENT)return"No console available for logging"}function d(g){return function(){typeof console!==n&&(u.call(this),this[g].apply(this,arguments))}}function h(g,C,m){return c(g)||d.apply(this,arguments)}function f(g,C){var m=this,v,b,k,S="loglevel";typeof g=="string"?S+=":"+g:typeof g=="symbol"&&(S=void 0);function A(B){var V=(i[B]||"silent").toUpperCase();if(!(typeof window===n||!S)){try{window.localStorage[S]=V;return}catch{}try{window.document.cookie=encodeURIComponent(S)+"="+V+";"}catch{}}}function R(){var B;if(!(typeof window===n||!S)){try{B=window.localStorage[S]}catch{}if(typeof B===n)try{var V=window.document.cookie,H=encodeURIComponent(S),Z=V.indexOf(H+"=");Z!==-1&&(B=/^([^;]+)/.exec(V.slice(Z+H.length+1))[1])}catch{}return m.levels[B]===void 0&&(B=void 0),B}}function T(){if(!(typeof window===n||!S)){try{window.localStorage.removeItem(S)}catch{}try{window.document.cookie=encodeURIComponent(S)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(B){var V=B;if(typeof V=="string"&&m.levels[V.toUpperCase()]!==void 0&&(V=m.levels[V.toUpperCase()]),typeof V=="number"&&V>=0&&V<=m.levels.SILENT)return V;throw new TypeError("log.setLevel() called with invalid level: "+B)}m.name=g,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=C||h,m.getLevel=function(){return k??b??v},m.setLevel=function(B,V){return k=_(B),V!==!1&&A(k),u.call(m)},m.setDefaultLevel=function(B){b=_(B),R()||m.setLevel(B,!1)},m.resetLevel=function(){k=null,T(),u.call(m)},m.enableAll=function(B){m.setLevel(m.levels.TRACE,B)},m.disableAll=function(B){m.setLevel(m.levels.SILENT,B)},m.rebuild=function(){if(s!==m&&(v=_(s.getLevel())),u.call(m),s===m)for(var B in o)o[B].rebuild()},v=_(s?s.getLevel():"WARN");var O=R();O!=null&&(k=_(O)),u.call(m)}s=new f,s.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var m=o[C];return m||(m=o[C]=new f(C,s.methodFactory)),m};var p=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=p),s},s.getLoggers=function(){return o},s.default=s,s})})(UN);var jZ=UN.exports;const ZZ=Qd(jZ);function mn(t){return typeof t=="function"}function VN(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Qm=VN(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Cy(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Lg=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=_c(s),l=a.next();!l.done;l=a.next()){var c=l.value;c.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(mn(u))try{u()}catch(g){o=g instanceof Qm?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=_c(d),f=h.next();!f.done;f=h.next()){var p=f.value;try{hk(p)}catch(g){o=o??[],g instanceof Qm?o=V0(V0([],U0(o)),U0(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new Qm(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)hk(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Cy(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Cy(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),GN=Lg.EMPTY;function WN(t){return t instanceof Lg||t&&"closed"in t&&mn(t.remove)&&mn(t.add)&&mn(t.unsubscribe)}function hk(t){mn(t)?t():t.unsubscribe()}var jN={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},ZN={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,V0([t,e],U0(n)))},clearTimeout:function(t){var e=ZN.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function zN(t){ZN.setTimeout(function(){throw t})}function Iy(){}function Vf(t){t()}var FI=function(t){Qc(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,WN(n)&&n.add(r)):r.destination=XZ,r}return e.create=function(n,r,i){return new by(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Lg),zZ=Function.prototype.bind;function qm(t,e){return zZ.call(t,e)}var HZ=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){Yh(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){Yh(r)}else Yh(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){Yh(n)}},t}(),by=function(t){Qc(e,t);function e(n,r,i){var o=t.call(this)||this,s;if(mn(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&jN.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&qm(n.next,a),error:n.error&&qm(n.error,a),complete:n.complete&&qm(n.complete,a)}):s=n}return o.destination=new HZ(s),o}return e}(FI);function Yh(t){zN(t)}function $Z(t){throw t}var XZ={closed:!0,next:Iy,error:$Z,complete:Iy},UI=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function HN(t){return t}function KZ(t){return t.length===0?HN:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var Fn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=YZ(e)?e:new by(e,n,r);return Vf(function(){var s=i,a=s.operator,l=s.source;o.add(a?a.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=fk(n),new n(function(i,o){var s=new by({next:function(a){try{e(a)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[UI]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return KZ(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=fk(e),new e(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function fk(t){var e;return(e=t??jN.Promise)!==null&&e!==void 0?e:Promise}function JZ(t){return t&&mn(t.next)&&mn(t.error)&&mn(t.complete)}function YZ(t){return t&&t instanceof FI||JZ(t)&&WN(t)}function QZ(t){return mn(t==null?void 0:t.lift)}function Os(t){return function(e){if(QZ(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function bl(t,e,n,r,i){return new qZ(t,e,n,r,i)}var qZ=function(t){Qc(e,t);function e(n,r,i,o,s,a){var l=t.call(this,n)||this;return l.onFinalize=s,l.shouldUnsubscribe=a,l._next=r?function(c){try{r(c)}catch(u){n.error(u)}}:t.prototype._next,l._error=o?function(c){try{o(c)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,l._complete=i?function(){try{i()}catch(c){n.error(c)}finally{this.unsubscribe()}}:t.prototype._complete,l}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(FI),ez=VN(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),ka=function(t){Qc(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new pk(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new ez},e.prototype.next=function(n){var r=this;Vf(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=_c(r.currentObservers),a=s.next();!a.done;a=s.next()){var l=a.value;l.next(n)}}catch(c){i={error:c}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;Vf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;Vf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?GN:(this.currentObservers=null,a.push(n),new Lg(function(){r.currentObservers=null,Cy(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},e.prototype.asObservable=function(){var n=new Fn;return n.source=this,n},e.create=function(n,r){return new pk(n,r)},e}(Fn),pk=function(t){Qc(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:GN},e}(ka),$N=function(t){Qc(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(ka);function tz(t){return t&&mn(t.schedule)}function nz(t){return t[t.length-1]}function XN(t){return tz(nz(t))?t.pop():void 0}var KN=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function JN(t){return mn(t==null?void 0:t.then)}function YN(t){return mn(t[UI])}function QN(t){return Symbol.asyncIterator&&mn(t==null?void 0:t[Symbol.asyncIterator])}function qN(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function rz(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var e_=rz();function t_(t){return mn(t==null?void 0:t[e_])}function n_(t){return oW(this,arguments,function(){var n,r,i,o;return xR(this,function(s){switch(s.label){case 0:n=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,cc(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,cc(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,cc(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function r_(t){return mn(t==null?void 0:t.getReader)}function ru(t){if(t instanceof Fn)return t;if(t!=null){if(YN(t))return iz(t);if(KN(t))return oz(t);if(JN(t))return sz(t);if(QN(t))return i_(t);if(t_(t))return az(t);if(r_(t))return lz(t)}throw qN(t)}function iz(t){return new Fn(function(e){var n=t[UI]();if(mn(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function oz(t){return new Fn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function sz(t){return new Fn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,zN)})}function az(t){return new Fn(function(e){var n,r;try{for(var i=_c(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function i_(t){return new Fn(function(e){cz(t,e).catch(function(n){return e.error(n)})})}function lz(t){return i_(n_(t))}function cz(t,e){var n,r,i,o;return iW(this,void 0,void 0,function(){var s,a;return xR(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=sW(t),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=l.sent(),i={error:a},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function sl(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function o_(t,e){return e===void 0&&(e=0),Os(function(n,r){n.subscribe(bl(r,function(i){return sl(r,t,function(){return r.next(i)},e)},function(){return sl(r,t,function(){return r.complete()},e)},function(i){return sl(r,t,function(){return r.error(i)},e)}))})}function s_(t,e){return e===void 0&&(e=0),Os(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function uz(t,e){return ru(t).pipe(s_(e),o_(e))}function dz(t,e){return ru(t).pipe(s_(e),o_(e))}function hz(t,e){return new Fn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function fz(t,e){return new Fn(function(n){var r;return sl(n,e,function(){r=t[e_](),sl(n,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return mn(r==null?void 0:r.return)&&r.return()}})}function a_(t,e){if(!t)throw new Error("Iterable cannot be null");return new Fn(function(n){sl(n,e,function(){var r=t[Symbol.asyncIterator]();sl(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function pz(t,e){return a_(n_(t),e)}function gz(t,e){if(t!=null){if(YN(t))return uz(t,e);if(KN(t))return hz(t,e);if(JN(t))return dz(t,e);if(QN(t))return a_(t,e);if(t_(t))return fz(t,e);if(r_(t))return pz(t,e)}throw qN(t)}function mz(t,e){return e?gz(t,e):ru(t)}function fr(t,e){return Os(function(n,r){var i=0;n.subscribe(bl(r,function(o){r.next(t.call(e,o,i++))}))})}function vz(t,e,n,r,i,o,s,a){var l=[],c=0,u=0,d=!1,h=function(){d&&!l.length&&!c&&e.complete()},f=function(g){return c<r?p(g):l.push(g)},p=function(g){c++;var C=!1;ru(n(g,u++)).subscribe(bl(e,function(m){e.next(m)},function(){C=!0},void 0,function(){if(C)try{c--;for(var m=function(){var v=l.shift();s||p(v)};l.length&&c<r;)m();h()}catch(v){e.error(v)}}))};return t.subscribe(bl(e,f,function(){d=!0,h()})),function(){}}function l_(t,e,n){return n===void 0&&(n=1/0),mn(e)?l_(function(r,i){return fr(function(o,s){return e(r,o,i,s)})(ru(t(r,i)))},n):(typeof e=="number"&&(n=e),Os(function(r,i){return vz(r,i,t,n)}))}function yz(t){return l_(HN,t)}function Cz(){return yz(1)}function wy(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Cz()(mz(t,XN(t)))}function c_(t,e){return Os(function(n,r){var i=0;n.subscribe(bl(r,function(o){return t.call(e,o,i++)&&r.next(o)}))})}function Iz(t,e,n,r,i){return function(o,s){var a=n,l=e,c=0;o.subscribe(bl(s,function(u){var d=c++;l=a?t(l,u,d):(a=!0,u),s.next(l)},i))}}function bz(t){return Os(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function wz(t,e){return Os(Iz(t,e,arguments.length>=2,!0))}function $i(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=XN(t);return Os(function(r,i){(n?wy(t,r,n):wy(t,r)).subscribe(i)})}function gk(t){return Os(function(e,n){ru(t).subscribe(bl(n,function(){return n.complete()},Iy)),!n.closed&&e.subscribe(n)})}var Sz=Object.defineProperty,Az=Object.defineProperties,kz=Object.getOwnPropertyDescriptors,$p=Object.getOwnPropertySymbols,u_=Object.prototype.hasOwnProperty,d_=Object.prototype.propertyIsEnumerable,mk=(t,e,n)=>e in t?Sz(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Sy=(t,e)=>{for(var n in e||(e={}))u_.call(e,n)&&mk(t,n,e[n]);if($p)for(var n of $p(e))d_.call(e,n)&&mk(t,n,e[n]);return t},Ez=(t,e)=>Az(t,kz(e)),Tz=(t,e)=>{var n={};for(var r in t)u_.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&$p)for(var r of $p(t))e.indexOf(r)<0&&d_.call(t,r)&&(n[r]=t[r]);return n},Ms=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())}),h_="lk";function VI(t){return typeof t>"u"?!1:xz(t)||Rz(t)}function xz(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function Rz(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function Pz(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function f_(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if(Pz(t))return`${t.participant.identity}_${t.source}_placeholder`;if(VI(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function Nz(t){return t instanceof py}function _z(t,e){return Ms(this,null,function*(){const{x:n,y:r}=yield WZ(t,e,{placement:"top",middleware:[UZ(6),GZ(),VZ({padding:5})]});return{x:n,y:r}})}function Oz(t,e){return!t.contains(e.target)}var Mz=[ne.ConnectionStateChanged,ne.RoomMetadataChanged,ne.ActiveSpeakersChanged,ne.ConnectionQualityChanged,ne.ParticipantConnected,ne.ParticipantDisconnected,ne.ParticipantPermissionsChanged,ne.ParticipantMetadataChanged,ne.TrackMuted,ne.TrackUnmuted,ne.TrackPublished,ne.TrackUnpublished,ne.TrackStreamStateChanged,ne.TrackSubscriptionFailed,ne.TrackSubscriptionPermissionChanged,ne.TrackSubscriptionStatusChanged],Dz=[...Mz,ne.LocalTrackPublished,ne.LocalTrackUnpublished],Lz=[se.ConnectionQualityChanged,se.IsSpeakingChanged,se.ParticipantMetadataChanged,se.ParticipantPermissionsChanged,se.TrackMuted,se.TrackUnmuted,se.TrackPublished,se.TrackUnpublished,se.TrackStreamStateChanged,se.TrackSubscriptionFailed,se.TrackSubscriptionPermissionChanged,se.TrackSubscriptionStatusChanged];[...Lz,se.LocalTrackPublished,se.LocalTrackUnpublished];var lt=ZZ.getLogger("lk-components-js");lt.setDefaultLevel("WARN");function Bz(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var Fz=[],Uz={showChat:!1,unreadMessages:0};function GI(t,...e){return new Fn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe($i(t))}function WI(t,e){return new Fn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function Vz(t){return WI(t,ne.ConnectionStateChanged).pipe(fr(([e])=>e),$i(t.state))}function Gz(t,e,n=!0){var r;const i=()=>Ms(this,null,function*(){try{const a=yield jp.getLocalDevices(t,n);o.next(a)}catch(a){e==null||e(a)}}),o=new ka,s=o.pipe(bz(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return wy(jp.getLocalDevices(t,n).catch(a=>e==null?void 0:e(a)),s)}function Wz(t){return WI(t,ne.DataReceived)}function jz(t){return GI(t,ne.AudioPlaybackStatusChanged).pipe(fr(n=>({canPlayAudio:n.canPlaybackAudio})))}function Zz(t){return GI(t,ne.VideoPlaybackStatusChanged).pipe(fr(n=>({canPlayVideo:n.canPlaybackVideo})))}function zz(t,e){return WI(t,ne.ActiveDeviceChanged).pipe(c_(([n])=>n===e),fr(([n,r])=>(lt.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),$i(t.getActiveDevice(e)))}function fi(t){return`${h_}-${t}`}function Hz(t){const e=Ay(t),n=ZI(t.participant).pipe(fr(()=>Ay(t)),$i(e));return{className:fi(t.source===Y.Source.Camera||t.source===Y.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function Ay(t){if(VI(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTracks().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackByName(n);if(e)return r.getTrack(e);throw new Error("At least one of source and name needs to be defined")}}function jI(t,...e){return new Fn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe($i(t))}function ZI(t){return jI(t,se.TrackMuted,se.TrackUnmuted,se.ParticipantPermissionsChanged,se.TrackPublished,se.TrackUnpublished,se.LocalTrackPublished,se.LocalTrackUnpublished,se.MediaDevicesError,se.TrackSubscriptionStatusChanged).pipe(fr(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:o}=n,s=n.getTrack(Y.Source.Microphone),a=n.getTrack(Y.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:o,cameraTrack:a,microphoneTrack:s,participant:n}}))}function $z(t){return jI(t,se.ParticipantMetadataChanged).pipe(fr(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),$i({name:t.name,identity:t.identity,metadata:t.metadata}))}function Xz(t){return zI(t,se.ConnectionQualityChanged).pipe(fr(([n])=>n),$i(t.connectionQuality))}function zI(t,e){return new Fn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function p_(t){var e,n,r,i;return jI(t.participant,se.TrackMuted,se.TrackUnmuted,se.TrackSubscribed,se.TrackUnsubscribed,se.LocalTrackPublished,se.LocalTrackUnpublished).pipe(fr(o=>{var s,a;const l=(s=t.publication)!=null?s:o.getTrack(t.source);return(a=l==null?void 0:l.isMuted)!=null?a:!0}),$i((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrack(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function Kz(t){return zI(t,se.IsSpeakingChanged).pipe(fr(([e])=>e))}function Jz(t,e={}){var n;let r;const i=new Fn(l=>(r=l,()=>a.unsubscribe())).pipe($i(Array.from(t.participants.values()))),o=(n=e.additionalRoomEvents)!=null?n:Dz,s=Array.from(new Set([ne.ParticipantConnected,ne.ParticipantDisconnected,ne.ConnectionStateChanged,...o])),a=GI(t,...s).subscribe(l=>r==null?void 0:r.next(Array.from(l.participants.values())));return t.participants.size>0&&(r==null||r.next(Array.from(t.participants.values()))),i}function Yz(t){return zI(t,se.ParticipantPermissionsChanged).pipe(fr(()=>t.permissions),$i(t.permissions))}function Qz(t,e,n){const{localParticipant:r}=e,i=(c,u)=>{let d=!1;switch(c){case Y.Source.Camera:d=u.isCameraEnabled;break;case Y.Source.Microphone:d=u.isMicrophoneEnabled;break;case Y.Source.ScreenShare:d=u.isScreenShareEnabled;break}return d},o=ZI(r).pipe(fr(c=>i(t,c.participant)),$i(i(t,r))),s=new ka,a=(c,u)=>Ms(this,null,function*(){try{switch(u??(u=n),s.next(!0),t){case Y.Source.Camera:yield r.setCameraEnabled(c??!r.isCameraEnabled,u);break;case Y.Source.Microphone:yield r.setMicrophoneEnabled(c??!r.isMicrophoneEnabled,u);break;case Y.Source.ScreenShare:yield r.setScreenShareEnabled(c??!r.isScreenShareEnabled,u);break;default:break}}finally{s.next(!1)}});return{className:fi("button"),toggle:a,enabledObserver:o,pendingObserver:s.asObservable()}}function qz(){let t=!1;const e=new ka,n=new ka,r=o=>{n.next(!0),t=o??!t,e.next(t),n.next(!1)};return{className:fi("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function e8(t,e,n){const r=new $N(void 0),i=e?zz(e,t):r.asObservable(),o=(a,...l)=>Ms(this,[a,...l],function*(c,u={}){var d,h,f;if(e){lt.debug(`Switching active device of kind "${t}" with id ${c}.`),yield e.switchActiveDevice(t,c,u.exact);const p=(d=e.getActiveDevice(t))!=null?d:c;p!==c&&c!=="default"&&lt.info(`We tried to select the device with id (${c}), but the browser decided to select the device with id (${p}) instead.`);let g;t==="audioinput"?g=(h=e.localParticipant.getTrack(Y.Source.Microphone))==null?void 0:h.track:t==="videoinput"&&(g=(f=e.localParticipant.getTrack(Y.Source.Camera))==null?void 0:f.track);const C=c==="default"&&!g||c==="default"&&(g==null?void 0:g.mediaStreamTrack.label.startsWith("Default"));r.next(C?c:p)}else if(n){yield n.setDeviceId(u.exact?{exact:c}:c);const p=yield n.getDeviceId();r.next(c==="default"&&n.mediaStreamTrack.label.startsWith("Default")?c:p)}else r.value!==c&&(lt.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(c))});return{className:fi("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}}function t8(t){const e=r=>{t.disconnect(r)};return{className:fi("disconnect-button"),disconnect:e}}function n8(t){const e=fi("connection-quality"),n=Xz(t);return{className:e,connectionQualityObserver:n}}function r8(t){let e="track-muted-indicator-camera";switch(t.source){case Y.Source.Camera:e="track-muted-indicator-camera";break;case Y.Source.Microphone:e="track-muted-indicator-microphone";break}const n=fi(e),r=p_(t);return{className:n,mediaMutedObserver:r}}function i8(t){return{className:"lk-participant-name",infoObserver:$z(t)}}function o8(){return{className:fi("participant-tile")}}var s8={CHAT:"lk-chat-topic"};function g_(t,e,n){return Ms(this,arguments,function*(r,i,o,s={}){const{kind:a,destination:l}=s;yield r.publishData(i,a??dn.RELIABLE,{destination:l,topic:o})})}function a8(t,e,n){const r=Wz(t).pipe(c_(([,,,a])=>e===void 0||a===e),fr(([a,l,,c])=>({payload:a,topic:c,from:l})));let i;const o=new Fn(a=>{i=a});return{messageObservable:r,isSendingObservable:o,send:(a,...l)=>Ms(this,[a,...l],function*(c,u={}){i.next(!0);try{yield g_(t.localParticipant,c,e,u)}finally{i.next(!1)}})}}var l8=new TextEncoder,c8=new TextDecoder,Qh=new Map,u8=t=>l8.encode(JSON.stringify({message:t.message,timestamp:t.timestamp})),d8=t=>JSON.parse(c8.decode(t));function h8(t,e){var n,r;const i=new ka,{messageDecoder:o,messageEncoder:s,channelTopic:a}=e??{},l=a??s8.CHAT;let c=!1;Qh.has(t)||(c=!0);const u=(n=Qh.get(t))!=null?n:new Map,d=(r=u.get(l))!=null?r:new ka;if(u.set(l,d),Qh.set(t,u),c){const{messageObservable:v}=a8(t,l);v.pipe(gk(i)).subscribe(d)}const h=o??d8,f=d.pipe(fr(v=>{const b=h(v.payload);return Ez(Sy({},b),{from:v.from})}),wz((v,b)=>[...v,b],[]),gk(i)),p=new $N(!1),g=s??u8,C=v=>Ms(this,null,function*(){const b=Date.now(),k=g({message:v,timestamp:b});p.next(!0);try{yield g_(t.localParticipant,k,l,{kind:dn.RELIABLE}),d.next({payload:k,topic:l,from:t.localParticipant})}finally{p.next(!1)}});function m(){i.next(),i.complete(),Qh.clear()}return t.once(ne.Disconnected,m),{messageObservable:f,isSendingObservable:p,send:C}}function f8(){const t=n=>Ms(this,null,function*(){lt.info("Start Audio for room: ",n),yield n.startAudio()});return{className:fi("start-audio-button"),roomAudioPlaybackAllowedObservable:jz,handleStartAudioPlayback:t}}function p8(){const t=n=>Ms(this,null,function*(){lt.info("Start Video for room: ",n),yield n.startVideo()});return{className:fi("start-audio-button"),roomVideoPlaybackAllowedObservable:Zz,handleStartVideoPlayback:t}}function g8(){return{className:[fi("button"),fi("chat-toggle")].join(" ")}}function m8(){return{className:"lk-room-container"}}function v8(t,e){if(typeof localStorage>"u"){lt.error("Local storage is not available.");return}try{localStorage.setItem(t,JSON.stringify(e))}catch(n){lt.error(`Error setting item to local storage: ${n}`)}}function y8(t){if(typeof localStorage>"u"){lt.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){lt.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){lt.error(`Error getting item from local storage: ${e}`);return}}function C8(t){return{load:()=>y8(t),save:e=>v8(t,e)}}var I8=`${h_}-user-choices`,Da={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:"",e2ee:!1,sharedPassphrase:""},{load:b8,save:w8}=C8(I8);function S8(t,e=!1){if(e===!0)return;const n=t,r=Tz(n,["e2ee","sharedPassphrase"]);w8(r)}function A8(t,e=!1){var n,r,i,o,s,a,l;const c={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:Da.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:Da.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:Da.videoDeviceId,audioDeviceId:(o=t==null?void 0:t.audioDeviceId)!=null?o:Da.audioDeviceId,username:(s=t==null?void 0:t.username)!=null?s:Da.username,e2ee:(a=t==null?void 0:t.e2ee)!=null?a:Da.e2ee,sharedPassphrase:(l=t==null?void 0:t.sharedPassphrase)!=null?l:Da.sharedPassphrase};if(e)return c;{const u=b8();return Sy(Sy({},c),u??{})}}function m_(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=m_(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function k8(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=m_(t))&&(r&&(r+=" "),r+=e);return r}var E8=Object.defineProperty,T8=Object.defineProperties,x8=Object.getOwnPropertyDescriptors,Xp=Object.getOwnPropertySymbols,v_=Object.prototype.hasOwnProperty,y_=Object.prototype.propertyIsEnumerable,vk=(t,e,n)=>e in t?E8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Oe=(t,e)=>{for(var n in e||(e={}))v_.call(e,n)&&vk(t,n,e[n]);if(Xp)for(var n of Xp(e))y_.call(e,n)&&vk(t,n,e[n]);return t},$n=(t,e)=>T8(t,x8(e)),Un=(t,e)=>{var n={};for(var r in t)v_.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&Xp)for(var r of Xp(t))e.indexOf(r)<0&&y_.call(t,r)&&(n[r]=t[r]);return n},C_=(t,e,n)=>new Promise((r,i)=>{var o=l=>{try{a(n.next(l))}catch(c){i(c)}},s=l=>{try{a(n.throw(l))}catch(c){i(c)}},a=l=>l.done?r(l.value):Promise.resolve(l.value).then(o,s);a((n=n.apply(t,e)).next())});function Jr(t,e){const[n,r]=w.useState(e);return w.useEffect(()=>{if(typeof window>"u"||!t)return;const i=t.subscribe(r);return()=>i.unsubscribe()},[t]),n}function R8(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=w.useState(e(t));function i(){r(e(t))}return w.useEffect(()=>{const o=window.matchMedia(t);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[t]),n}function P8(t,e){if(e.msg==="show_chat")return $n(Oe({},t),{showChat:!0,unreadMessages:0});if(e.msg==="hide_chat")return $n(Oe({},t),{showChat:!1});if(e.msg==="toggle_chat"){const n=$n(Oe({},t),{showChat:!t.showChat});return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?$n(Oe({},t),{unreadMessages:e.count}):Oe({},t)}function N8(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:Oe({},t)}var HI=w.createContext(void 0);function _8(){const t=w.useContext(HI);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function O8(t){const[e,n]=w.useReducer(N8,Fz),[r,i]=w.useReducer(P8,Uz);return t??{pin:{dispatch:n,state:e},widget:{dispatch:i,state:r}}}function I_(){return w.useContext(HI)}var M8=w.createContext(void 0);function mh(){return w.useContext(M8)}var $I=w.createContext(void 0);function Bg(){return w.useContext($I)}function Rl(t){var e;const n=Bg(),r=mh(),i=(e=t??n)!=null?e:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var XI=w.createContext(void 0);function Fg(){const t=w.useContext(XI);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Ug(){return w.useContext(XI)}function vh(t){const e=Ug(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var D8=w.createContext(void 0);function L8(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}function Oa(...t){const e=Oe({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const o=e[i],s=r[i];typeof o=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=L8(o,s):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?e[i]=k8(o,s):e[i]=s!==void 0?s:o}}return e}function B8(t={}){const e=Rl(t.participant),{className:n,connectionQualityObserver:r}=w.useMemo(()=>n8(e),[e]),i=Jr(r,ri.Unknown);return{className:n,quality:i}}function F8(t){const e=vh(t),n=w.useMemo(()=>Vz(e),[e]);return Jr(n,e.state)}function U8(t){const e=Fg(),n=F8(e);return{buttonProps:w.useMemo(()=>{const{className:i,disconnect:o}=t8(e);return Oa(t,{className:i,onClick:()=>{var a;return o((a=t.stopTracks)!=null?a:!0)},disabled:n===it.Disconnected})},[e,t,n])}}function V8(t){if(t.publication instanceof Hd){const e=t.publication.track;if(e){const{facingMode:n}=sZ(e);return n}}return"undefined"}function yk(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,o=Rl(i),s=typeof t=="string"?{participant:o,source:t}:t,[a,l]=w.useState(!!((n=s.publication)!=null&&n.isMuted||(r=o.getTrack(s.source))!=null&&r.isMuted));return w.useEffect(()=>{const c=p_(s).subscribe(l);return()=>c.unsubscribe()},[f_(s)]),a}function G8(t){const e=Rl(t),n=w.useMemo(()=>Kz(e),[e]);return Jr(n,e.isSpeaking)}var W8={connect:!0,audio:!1,video:!1};function j8(t){const e=Oe(Oe({},W8),t),{token:n,serverUrl:r,options:i,room:o,connectOptions:s,connect:a,audio:l,video:c,screen:u,onConnected:d,onDisconnected:h,onError:f,onMediaDeviceFailure:p,onEncryptionError:g,simulateParticipants:C}=e,m=Un(e,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&o&&lt.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,b]=w.useState();w.useEffect(()=>{b(o??new jp(i))},[o]);const k=w.useMemo(()=>{const{className:S}=m8();return Oa(m,{className:S})},[m]);return w.useEffect(()=>{if(!v)return;const S=()=>{const T=v.localParticipant;lt.debug("trying to publish local tracks"),Promise.all([T.setMicrophoneEnabled(!!l,typeof l!="boolean"?l:void 0),T.setCameraEnabled(!!c,typeof c!="boolean"?c:void 0),T.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(_=>{lt.warn(_),f==null||f(_)})},A=T=>{const _=Zd.getFailure(T);p==null||p(_)},R=T=>{g==null||g(T)};return v.on(ne.SignalConnected,S).on(ne.MediaDevicesError,A).on(ne.EncryptionError,R),()=>{v.off(ne.SignalConnected,S).off(ne.MediaDevicesError,A).off(ne.EncryptionError,R)}},[v,l,c,u,f,g,p]),w.useEffect(()=>{if(v){if(C){v.simulateParticipants({participants:{count:C},publish:{audio:!0,useRealTracks:!0}});return}if(!n){lt.debug("no token yet");return}if(!r){lt.warn("no livekit url provided"),f==null||f(Error("no livekit url provided"));return}a?(lt.debug("connecting"),v.connect(r,n,s).catch(S=>{lt.warn(S),f==null||f(S)})):(lt.debug("disconnecting because connect is false"),v.disconnect())}},[a,n,JSON.stringify(s),v,f,r,C]),w.useEffect(()=>{if(!v)return;const S=A=>{switch(A){case it.Disconnected:h&&h();break;case it.Connected:d&&d();break}};return v.on(ne.ConnectionStateChanged,S),()=>{v.off(ne.ConnectionStateChanged,S)}},[n,d,h,v]),w.useEffect(()=>{if(v)return()=>{lt.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:k}}function Z8(t={}){const e=vh(t.room),[n,r]=w.useState(e.localParticipant),[i,o]=w.useState(n.isMicrophoneEnabled),[s,a]=w.useState(n.isMicrophoneEnabled),[l,c]=w.useState(n.lastMicrophoneError),[u,d]=w.useState(n.lastCameraError),[h,f]=w.useState(n.isMicrophoneEnabled),[p,g]=w.useState(void 0),[C,m]=w.useState(void 0),v=b=>{a(b.isCameraEnabled),o(b.isMicrophoneEnabled),f(b.isScreenShareEnabled),m(b.cameraTrack),g(b.microphoneTrack),c(b.participant.lastMicrophoneError),d(b.participant.lastCameraError),r(b.participant)};return w.useEffect(()=>{const b=ZI(n).subscribe(v);return()=>b.unsubscribe()},[n]),{isMicrophoneEnabled:i,isScreenShareEnabled:h,isCameraEnabled:s,microphoneTrack:p,cameraTrack:C,lastMicrophoneError:l,lastCameraError:u,localParticipant:n}}function z8(){const t=Fg(),e=w.useMemo(()=>Yz(t.localParticipant),[t]);return Jr(e,t.localParticipant.permissions)}function H8({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const o=Ug(),s=w.useMemo(()=>Gz(t,i,r),[t,r,i]),a=Jr(s,[]),[l,c]=w.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:h}=w.useMemo(()=>e8(t,e??o,n),[t,e,o,n]);return w.useEffect(()=>{const f=d.subscribe(p=>{lt.info("setCurrentDeviceId",p),p&&c(p)});return()=>{f==null||f.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:l,setActiveMediaDevice:h}}function $8(t){return t!==void 0}function iu(...t){return Oa(...t.filter($8))}function b_(t,e,n){return w.Children.map(t,r=>w.isValidElement(r)&&w.Children.only(t)?w.cloneElement(r,$n(Oe({},e),{key:n})):r)}function w_(t,e={}){var n;const[r,i]=w.useState(Ay(t)),[o,s]=w.useState(r==null?void 0:r.isMuted),[a,l]=w.useState(r==null?void 0:r.isSubscribed),[c,u]=w.useState(r==null?void 0:r.track),[d,h]=w.useState("landscape"),f=w.useRef(),{className:p,trackObserver:g}=w.useMemo(()=>Hz(t),[(n=t.participant.sid)!=null?n:t.participant.identity,t.source,VI(t)&&t.publication.trackSid]);return w.useEffect(()=>{const C=g.subscribe(m=>{lt.debug("update track",m),i(m),s(m==null?void 0:m.isMuted),l(m==null?void 0:m.isSubscribed),u(m==null?void 0:m.track)});return()=>C==null?void 0:C.unsubscribe()},[g]),w.useEffect(()=>{var C,m;return c&&(f.current&&c.detach(f.current),(C=e.element)!=null&&C.current&&!(Nz(t.participant)&&(c==null?void 0:c.kind)==="audio")&&c.attach(e.element.current)),f.current=(m=e.element)==null?void 0:m.current,()=>{f.current&&(c==null||c.detach(f.current))}},[c,e.element]),w.useEffect(()=>{var C,m;if(typeof((C=r==null?void 0:r.dimensions)==null?void 0:C.width)=="number"&&typeof((m=r==null?void 0:r.dimensions)==null?void 0:m.height)=="number"){const v=r.dimensions.width>r.dimensions.height?"landscape":"portrait";h(v)}},[r]),{publication:r,isMuted:o,isSubscribed:a,track:c,elementProps:iu(e.props,Oe({className:p,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}function X8({trackRef:t,participant:e,source:n,publication:r,onParticipantClick:i,disableSpeakingIndicator:o,htmlProps:s}){const a=mh(),l=Rl(e),c=w.useMemo(()=>{var g,C,m,v,b,k;const S=(C=(g=t==null?void 0:t.source)!=null?g:a==null?void 0:a.source)!=null?C:n;if(S===void 0)throw new Error("Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.");return{participant:(v=(m=t==null?void 0:t.participant)!=null?m:a==null?void 0:a.participant)!=null?v:l,publication:(k=(b=t==null?void 0:t.publication)!=null?b:a==null?void 0:a.publication)!=null?k:r,source:S}},[t==null?void 0:t.participant,t==null?void 0:t.source,t==null?void 0:t.publication,a==null?void 0:a.participant,a==null?void 0:a.source,a==null?void 0:a.publication,l,n,r]),u=w.useMemo(()=>{const{className:g}=o8();return Oa(s,{className:g,onClick:C=>{var m,v;if((m=s.onClick)==null||m.call(s,C),typeof i=="function"){const b=(v=c.publication)!=null?v:c.participant.getTrack(c.source);i({participant:c.participant,track:b})}}})},[s,i,c.publication,c.source,c.participant]),d=yk(Y.Source.Camera,{participant:c.participant}),h=yk(Y.Source.Microphone,{participant:c.participant}),f=G8(c.participant),p=V8(c);return{elementProps:Oe({"data-lk-audio-muted":h,"data-lk-video-muted":d,"data-lk-speaking":o===!0?!1:f,"data-lk-local-participant":c.participant.isLocal,"data-lk-source":c.source,"data-lk-facing-mode":p},u)}}function K8(t={}){const e=vh(t.room),[n,r]=w.useState([]);return w.useEffect(()=>{const i=Jz(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(r);return()=>i.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function J8(t={}){const e=K8(t),{localParticipant:n}=Z8(t);return[n,...e]}function Y8({room:t,props:e}){const n=vh(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=w.useMemo(()=>f8(),[]),s=w.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=Jr(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:w.useMemo(()=>Oa(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayAudio:a}}function Q8({room:t,props:e}){const n=vh(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=w.useMemo(()=>p8(),[]),s=w.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=Jr(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:w.useMemo(()=>Oa(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayVideo:a}}function q8({props:t}){const{dispatch:e,state:n}=_8().widget,{className:r}=w.useMemo(()=>g8(),[]);return{mergedProps:w.useMemo(()=>Oa(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function e7(t,e={}){var n,r,i,o;let s=mh();const a=(r=(n=Bg())!=null?n:e.participant)!=null?r:s==null?void 0:s.participant;if(typeof t=="string"){if(!a)throw Error("Participant missing, either provide it via context or pass it in directly");s={participant:a,source:t}}else if(t)s=t;else throw Error("No track reference found, either provide it via context or pass it in directly");const{className:l,mediaMutedObserver:c}=w.useMemo(()=>r8(s),[f_(s)]);return{isMuted:Jr(c,!!((i=s.publication)!=null&&i.isMuted||(o=s.participant.getTrack(s.source))!=null&&o.isMuted)),className:l}}function t7(t){var e=t,{source:n,onChange:r,initialState:i,captureOptions:o}=e,s=Un(e,["source","onChange","initialState","captureOptions"]),a;const l=Ug(),c=(a=l==null?void 0:l.localParticipant)==null?void 0:a.getTrack(n),{toggle:u,className:d,pendingObserver:h,enabledObserver:f}=w.useMemo(()=>l?Qz(n,l,o):qz(),[l,n,JSON.stringify(o)]),p=Jr(h,!1),g=Jr(f,i??!!(c!=null&&c.isEnabled));w.useEffect(()=>{r==null||r(g)},[g,r]),w.useEffect(()=>{i!==void 0&&(lt.debug("forcing initial toggle state",n,i),u(i))},[]);const C=w.useMemo(()=>Oa(s,{className:d}),[s,d]),m=w.useCallback(v=>{var b;u(),(b=s.onClick)==null||b.call(s,v)},[s,u]);return{toggle:u,enabled:g,pending:p,track:c,buttonProps:$n(Oe({},C),{"aria-pressed":g,"data-lk-source":n,"data-lk-enabled":g,disabled:p,onClick:m})}}function n7(t,e={}){return w_(t,e)}function r7(t){const e=Fg(),[n,r]=w.useState(),i=Jr(n==null?void 0:n.isSendingObservable,!1),o=Jr(n==null?void 0:n.messageObservable,[]);return w.useEffect(()=>{const s=h8(e,t);r(s)},[e,t]),{send:n==null?void 0:n.send,chatMessages:o,isSending:i}}function i7(t={}){var e;const[n,r]=w.useState(A8(t.defaults,(e=t.preventLoad)!=null?e:!1)),i=w.useCallback(c=>{r(u=>$n(Oe({},u),{audioEnabled:c}))},[]),o=w.useCallback(c=>{r(u=>$n(Oe({},u),{videoEnabled:c}))},[]),s=w.useCallback(c=>{r(u=>$n(Oe({},u),{audioDeviceId:c}))},[]),a=w.useCallback(c=>{r(u=>$n(Oe({},u),{videoDeviceId:c}))},[]),l=w.useCallback(c=>{r(u=>$n(Oe({},u),{username:c}))},[]);return w.useEffect(()=>{var c;S8(n,(c=t.preventSave)!=null?c:!1)},[n,t.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:o,saveAudioInputDeviceId:s,saveVideoInputDeviceId:a,saveUsername:l}}function o7(t){const{mergedProps:e}=q8({props:t});return w.createElement("button",Oe({},e),t.children)}function s7(t){const{buttonProps:e}=U8(t);return w.createElement("button",Oe({},e),t.children)}var a7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),w.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),l7=a7,c7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),u7=c7,d7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),h7=d7,f7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),p7=f7,g7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),w.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),m7=g7,v7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),w.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),y7=v7,C7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),I7=C7,b7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),w7=b7,S7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),w.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),A7=S7,k7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),w.createElement("g",{opacity:.25},w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),w.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),E7=k7,T7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),w.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),x7=T7,R7=t=>w.createElement("svg",Oe({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),w.createElement("g",{fill:"currentColor"},w.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),w.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),P7=R7;function ev(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,onDeviceListChange:o,onDeviceSelectError:s,exactMatch:a,track:l,requestPermissions:c,onError:u}=e,d=Un(e,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const h=Ug(),f=w.useCallback(S=>{h&&h.emit(ne.MediaDevicesError,S),u==null||u(S)},[h,u]),{devices:p,activeDeviceId:g,setActiveMediaDevice:C,className:m}=H8({kind:n,room:h,track:l,requestPermissions:c,onError:f});w.useEffect(()=>{r!==void 0&&C(r)},[C]),w.useEffect(()=>{typeof o=="function"&&o(p)},[o,p]),w.useEffect(()=>{g&&g!==""&&(i==null||i(g))},[g]);const v=S=>C_(this,null,function*(){try{yield C(S,{exact:a})}catch(A){if(A instanceof Error)s==null||s(A);else throw A}}),b=w.useMemo(()=>iu(d,{className:m},{className:"lk-list"}),[m,d]);function k(S,A,R){return S===A||R===0&&A==="default"}return w.createElement("ul",Oe({},b),p.map((S,A)=>w.createElement("li",{key:S.deviceId,id:S.deviceId,"data-lk-active":k(S.deviceId,g,A),"aria-selected":k(S.deviceId,g,A),role:"option"},w.createElement("button",{className:"lk-button",onClick:()=>v(S.deviceId)},S.label))))}function S_(t,e){switch(t){case Y.Source.Microphone:return e?w.createElement(y7,null):w.createElement(m7,null);case Y.Source.Camera:return e?w.createElement(u7,null):w.createElement(l7,null);case Y.Source.ScreenShare:return e?w.createElement(P7,null):w.createElement(x7,null);default:return}}function N7(t){switch(t){case ri.Excellent:return w.createElement(I7,null);case ri.Good:return w.createElement(w7,null);case ri.Poor:return w.createElement(A7,null);default:return w.createElement(E7,null)}}function tv(t){var e=t,{showIcon:n}=e,r=Un(e,["showIcon"]);const{buttonProps:i,enabled:o}=t7(r);return w.createElement("button",Oe({},i),(n??!0)&&S_(r.source,o),r.children)}function _7(t){var e;const{className:n,quality:r}=B8(t),i=w.useMemo(()=>$n(Oe({},iu(t,{className:n})),{"data-lk-quality":r}),[r,t,n]);return w.createElement("div",Oe({},i),(e=t.children)!=null?e:N7(r))}function O7(t){var e=t,{participant:n}=e,r=Un(e,["participant"]);const i=Rl(n),{className:o,infoObserver:s}=w.useMemo(()=>i8(i),[i]),{identity:a,name:l}=Jr(s,{name:i.name,identity:i.identity,metadata:i.metadata}),c=w.useMemo(()=>iu(r,{className:o,"data-lk-participant-name":l}),[r,o,l]);return w.createElement("span",Oe({},c),l!==""?l:a,r.children)}function M7(t){var e=t,{source:n,participant:r,trackRef:i,show:o="always"}=e,s=Un(e,["source","participant","trackRef","show"]),a,l;const{className:c,isMuted:u}=e7(i??n,{participant:r}),d=o==="always"||o==="muted"&&u||o==="unmuted"&&!u,h=w.useMemo(()=>iu(s,{className:c}),[c,s]);return d?w.createElement("div",$n(Oe({},h),{"data-lk-muted":u}),(l=s.children)!=null?l:S_((a=i==null?void 0:i.source)!=null?a:n,!u)):null}function D7(t){var e=t,{trackRef:n,onSubscriptionStatusChanged:r,volume:i,source:o,name:s,publication:a,participant:l}=e,c=Un(e,["trackRef","onSubscriptionStatusChanged","volume","source","name","publication","participant"]),u,d,h,f,p,g,C,m,v,b;const k=mh(),S=(f=(h=(u=n==null?void 0:n.publication)==null?void 0:u.trackName)!=null?h:(d=k==null?void 0:k.publication)==null?void 0:d.trackName)!=null?f:s,A=(g=(p=n==null?void 0:n.source)!=null?p:k==null?void 0:k.source)!=null?g:o,R=(m=(C=n==null?void 0:n.publication)!=null?C:k==null?void 0:k.publication)!=null?m:a,T=(b=(v=n==null?void 0:n.participant)!=null?v:k==null?void 0:k.participant)!=null?b:l;if(A===void 0)throw new Error("The AudioTrack component expects a trackRef or source property.");const _=w.useRef(null),O=Rl(T),{elementProps:B,isSubscribed:V,track:H,publication:Z}=w_({source:A,name:S,participant:O,publication:R},{element:_,props:c});return w.useEffect(()=>{r==null||r(!!V)},[V,r]),w.useEffect(()=>{H===void 0||i===void 0||(H instanceof ol?H.setVolume(i):lt.warn("Volume can only be set on remote audio tracks."))},[i,H]),w.useEffect(()=>{Z===void 0||c.muted===void 0||(Z instanceof MI?Z.setEnabled(!c.muted):lt.warn("Can only call setEnabled on remote track publications."))},[c.muted,Z,H]),w.createElement("audio",Oe({ref:_},B))}function L7(t){const e=!!Bg();return t.participant&&!e?w.createElement($I.Provider,{value:t.participant},t.children):w.createElement(w.Fragment,null,t.children)}function B7({value:t,onPinChange:e,onWidgetChange:n,children:r}){const i=O8(t);return w.useEffect(()=>{lt.debug("PinState Updated",{state:i.pin.state}),e&&i.pin.state&&e(i.pin.state)},[i.pin.state,e]),w.useEffect(()=>{lt.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),w.createElement(HI.Provider,{value:i},r)}function F7(t){const{room:e,htmlProps:n}=j8(t);return w.createElement("div",Oe({},n),e&&w.createElement(XI.Provider,{value:e},w.createElement(D8.Provider,{value:t.featureFlags},t.children)))}function U7(t){var e=t,{participant:n,trackRef:r}=e,i=Un(e,["participant","trackRef"]),o,s;const[a,l]=w.useState([]),c=200,u=90,d=6,h=4,f=50,p=7,g=(o=Bg())!=null?o:n;let C=(s=mh())!=null?s:r;if(!C){if(!g)throw Error("Participant missing, provide it directly or within a context");C={participant:g,source:Y.Source.Microphone}}const{track:m}=n7(C);return w.useEffect(()=>{if(!m||!(m instanceof yr||m instanceof ol))return;const{analyser:v,cleanup:b}=f6(m,{smoothingTimeConstant:.8,fftSize:64}),k=new Uint8Array(v.frequencyBinCount),S=()=>{v.getByteFrequencyData(k);const R=new Array(p).fill(0);k.slice(1);const T=6;for(let _=0;_<p/2;_+=1){const O=Math.floor(p/2-_);for(let B=0;B<T;B+=1)R[O]+=Math.pow(k[_*T+B]/255,2);R[O]/=T}for(let _=0;_<p/2;_+=1){const O=Math.floor(p/2+_);if(R[O]===0){for(let B=0;B<T;B+=1)R[O]+=Math.pow(k[_*T+B]/255,2);R[O]/=T}}return R.map(_=>_*f)},A=setInterval(()=>{const R=S();l(R)},100);return()=>{clearInterval(A),b()}},[m]),w.createElement("svg",$n(Oe({width:"100%",height:"100%",viewBox:`0 0 ${c} ${u}`},i),{className:"lk-audio-visualizer"}),w.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),w.createElement("g",{style:{transform:`translate(${(c-p*(d+h))/2}px, 0)`}},a.map((v,b)=>w.createElement("rect",{key:b,x:b*(d+h),y:u/2-v/2,width:d,height:v}))))}function V7(t){var e=t,{participants:n}=e,r=Un(e,["participants"]);return w.createElement(w.Fragment,null,n.map(i=>w.createElement($I.Provider,{value:i,key:i.identity},b_(r.children))))}function G7(t){var e=t,{participant:n,children:r,source:i,publication:o,disableSpeakingIndicator:s,onParticipantClick:a}=e,l=Un(e,["participant","children","source","publication","disableSpeakingIndicator","onParticipantClick"]);const c=Rl(n),{elementProps:u}=X8({participant:c,htmlProps:l,disableSpeakingIndicator:s,source:Y.Source.Microphone,publication:o,onParticipantClick:a});return w.createElement("div",Oe({style:{position:"relative"}},u),w.createElement(L7,{participant:c},r??w.createElement(w.Fragment,null,w.createElement(D7,{source:i??Y.Source.Microphone}),w.createElement(U7,null),w.createElement("div",{className:"lk-participant-metadata"},w.createElement("div",{className:"lk-participant-metadata-item"},w.createElement(M7,{source:Y.Source.Microphone}),w.createElement(O7,null)),w.createElement(_7,{className:"lk-participant-metadata-item"})))))}function W7(t){var e=t,{entry:n,hideName:r=!1,hideTimestamp:i=!1,messageFormatter:o}=e,s=Un(e,["entry","hideName","hideTimestamp","messageFormatter"]),a,l,c,u;const d=w.useMemo(()=>o?o(n.message):n.message,[n.message,o]),h=new Date(n.timestamp),f=navigator?navigator.language:"en-US";return w.createElement("li",Oe({className:"lk-chat-entry",title:h.toLocaleTimeString(f,{timeStyle:"full"}),"data-lk-message-origin":(a=n.from)!=null&&a.isLocal?"local":"remote"},s),(!i||!r)&&w.createElement("span",{className:"lk-meta-data"},!r&&w.createElement("strong",{className:"lk-participant-name"},(u=(l=n.from)==null?void 0:l.name)!=null?u:(c=n.from)==null?void 0:c.identity),!i&&w.createElement("span",{className:"lk-timestamp"},h.toLocaleTimeString(f,{timeStyle:"short"}))),w.createElement("span",{className:"lk-message-body"},d))}function j7(t){var e=t,{messageFormatter:n,messageDecoder:r,messageEncoder:i,channelTopic:o}=e,s=Un(e,["messageFormatter","messageDecoder","messageEncoder","channelTopic"]);const a=w.useRef(null),l=w.useRef(null),c=w.useMemo(()=>({messageDecoder:r,messageEncoder:i,channelTopic:o}),[r,i,o]),{send:u,chatMessages:d,isSending:h}=r7(c),f=I_(),p=w.useRef(0);function g(C){return C_(this,null,function*(){C.preventDefault(),a.current&&a.current.value.trim()!==""&&u&&(yield u(a.current.value),a.current.value="",a.current.focus())})}return w.useEffect(()=>{var C;l&&((C=l.current)==null||C.scrollTo({top:l.current.scrollHeight}))},[l,d]),w.useEffect(()=>{var C,m,v,b,k;if(!f||d.length===0)return;if((C=f.widget.state)!=null&&C.showChat&&d.length>0&&p.current!==((m=d[d.length-1])==null?void 0:m.timestamp)){p.current=(v=d[d.length-1])==null?void 0:v.timestamp;return}const S=d.filter(R=>!p.current||R.timestamp>p.current).length,{widget:A}=f;S>0&&((b=A.state)==null?void 0:b.unreadMessages)!==S&&((k=A.dispatch)==null||k.call(A,{msg:"unread_msg",count:S}))},[d,f==null?void 0:f.widget]),w.createElement("div",$n(Oe({},s),{className:"lk-chat"}),w.createElement("ul",{className:"lk-list lk-chat-messages",ref:l},s.children?d.map((C,m)=>b_(s.children,{entry:C,key:m,messageFormatter:n})):d.map((C,m,v)=>{const b=m>=1&&v[m-1].from===C.from,k=m>=1&&C.timestamp-v[m-1].timestamp<6e4;return w.createElement(W7,{key:m,hideName:b,hideTimestamp:b===!1?!1:k,entry:C,messageFormatter:n})})),w.createElement("form",{className:"lk-chat-form",onSubmit:g},w.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:h,ref:a,type:"text",placeholder:"Enter a message..."}),w.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:h},"Send")))}function Ck(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:o,requestPermissions:s=!1}=e,a=Un(e,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[l,c]=w.useState(!1),[u,d]=w.useState([]),[h,f]=w.useState(!0),p=(v,b)=>{lt.debug("handle device change"),c(!1),i==null||i(v,b)},g=w.useRef(null),C=w.useRef(null);w.useLayoutEffect(()=>{g.current&&C.current&&(u||h)&&_z(g.current,C.current).then(({x:v,y:b})=>{C.current&&Object.assign(C.current.style,{left:`${v}px`,top:`${b}px`})}),f(!1)},[g,C,u,h]);const m=w.useCallback(v=>{C.current&&v.target!==g.current&&l&&Oz(C.current,v)&&c(!1)},[l,C,g]);return w.useEffect(()=>(document.addEventListener("click",m),window.addEventListener("resize",()=>f(!0)),()=>{document.removeEventListener("click",m),window.removeEventListener("resize",()=>f(!0))}),[m,f]),w.createElement(w.Fragment,null,w.createElement("button",$n(Oe({className:"lk-button lk-button-menu","aria-pressed":l},a),{onClick:()=>c(!l),ref:g}),a.children),!a.disabled&&w.createElement("div",{className:"lk-device-menu",ref:C,style:{visibility:l?"visible":"hidden"}},n?w.createElement(ev,{initialSelection:r,onActiveDeviceChange:v=>p(n,v),onDeviceListChange:d,kind:n,track:o==null?void 0:o[n],requestPermissions:s}):w.createElement(w.Fragment,null,w.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),w.createElement(ev,{kind:"audioinput",onActiveDeviceChange:v=>p("audioinput",v),onDeviceListChange:d,track:o==null?void 0:o.audioinput,requestPermissions:s}),w.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),w.createElement(ev,{kind:"videoinput",onActiveDeviceChange:v=>p("videoinput",v),onDeviceListChange:d,track:o==null?void 0:o.videoinput,requestPermissions:s}))))}function Z7(t){var e=t,{label:n}=e,r=Un(e,["label"]);const i=Fg(),{mergedProps:o,canPlayAudio:s}=Y8({room:i,props:r}),{mergedProps:a,canPlayVideo:l}=Q8({room:i,props:o}),c=a,{style:u}=c,d=Un(c,["style"]);return u.display=s&&l?"none":"block",w.createElement("button",Oe({style:u},d),n??`Start ${s?"Video":"Audio"}`)}function z7(t){var e=t,{variation:n,controls:r,saveUserChoices:i=!0}=e,o=Un(e,["variation","controls","saveUserChoices"]),s,a,l,c,u;const[d,h]=w.useState(!1),f=I_();w.useEffect(()=>{var H,Z;((H=f==null?void 0:f.widget.state)==null?void 0:H.showChat)!==void 0&&h((Z=f==null?void 0:f.widget.state)==null?void 0:Z.showChat)},[(s=f==null?void 0:f.widget.state)==null?void 0:s.showChat]);const g=R8(`(max-width: ${d?1e3:760}px)`)?"minimal":"verbose";n??(n=g);const C=Oe({leave:!0},r),m=z8();m?((a=C.camera)!=null||(C.camera=m.canPublish),(l=C.microphone)!=null||(C.microphone=m.canPublish),(c=C.screenShare)!=null||(C.screenShare=m.canPublish),(u=C.chat)!=null||(C.chat=m.canPublishData&&(r==null?void 0:r.chat))):(C.camera=!1,C.chat=!1,C.microphone=!1,C.screenShare=!1);const v=w.useMemo(()=>n==="minimal"||n==="verbose",[n]),b=w.useMemo(()=>n==="textOnly"||n==="verbose",[n]),k=Bz(),[S,A]=w.useState(!1),R=H=>{A(H)},T=iu({className:"lk-control-bar"},o),{saveAudioInputEnabled:_,saveVideoInputEnabled:O,saveAudioInputDeviceId:B,saveVideoInputDeviceId:V}=i7({preventSave:!i});return w.createElement("div",Oe({},T),C.microphone&&w.createElement("div",{className:"lk-button-group"},w.createElement(tv,{source:Y.Source.Microphone,showIcon:v,onChange:_},b&&"Microphone"),w.createElement("div",{className:"lk-button-group-menu"},w.createElement(Ck,{kind:"audioinput",onActiveDeviceChange:(H,Z)=>B(Z??"")}))),C.camera&&w.createElement("div",{className:"lk-button-group"},w.createElement(tv,{source:Y.Source.Camera,showIcon:v,onChange:O},b&&"Camera"),w.createElement("div",{className:"lk-button-group-menu"},w.createElement(Ck,{kind:"videoinput",onActiveDeviceChange:(H,Z)=>V(Z??"")}))),C.screenShare&&k&&w.createElement(tv,{source:Y.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:R},b&&(S?"Stop screen share":"Share screen")),C.chat&&w.createElement(o7,null,v&&w.createElement(h7,null),b&&"Chat"),C.leave&&w.createElement(s7,null,v&&w.createElement(p7,null),b&&"Leave"),w.createElement(Z7,null))}function H7(t){var e=Un(t,[]);const[n,r]=w.useState({showChat:!1,unreadMessages:0}),i=J8();return w.createElement(B7,{onWidgetChange:r},w.createElement("div",Oe({className:"lk-audio-conference"},e),w.createElement("div",{className:"lk-audio-conference-stage"},w.createElement(V7,{participants:i},w.createElement(G7,null))),w.createElement(z7,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),n.showChat&&w.createElement(j7,null)))}const $7="wss://mongoose-67t79p35.livekit.cloud",X7=({client:t})=>{const[e,n]=w.useState([]),[r,i]=w.useState(!1);return w.useEffect(()=>{const o=a=>{n(l=>[...l,a]),i(!0)},s=a=>{n(l=>{const c=l.filter(u=>u!==a);return c.length===0&&i(!1),c})};return t.on("livekitToken",o),t.on("livekitLeave",s),()=>{t.off("livekitToken",o),t.off("livekitLeave",s)}},[t]),e.length?X.jsxs("div",{"data-lk-theme":"default",children:[e.map((o,s)=>X.jsx(F7,{video:!1,audio:!0,token:o,serverUrl:$7,connect:!0,onDisconnected:()=>t.emit("livekitLeave",o),children:X.jsx(H7,{})},s)),X.jsx("div",{className:"audio-status","aria-live":"polite"})]}):null};function K7(){const[t,e]=w.useState(null),[n,r]=w.useState(!1),[i,o]=w.useState([]),s=ut.useRef(null),a=ut.useRef(null),l=ut.useRef(null),c=w.useRef(!1),u=()=>{s.current&&s.current.saveLog()},d=()=>{s.current&&s.current.clearLog()},h=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return w.useEffect(()=>{if(c.current)return;const f=new DG("mongoose.moo.mud.org",8765);f.registerGMCPPackage($V),f.registerGMCPPackage(jV),f.registerGMCPPackage(ZV),f.registerGMCPPackage(VF),f.registerGMCPPackage(XV),f.registerGMCPPackage(zV),f.registerGMCPPackage(HV),f.registerGMCPPackage(FF),f.registerGMCPPackage(kG),f.registerMcpPackage(RG),f.registerMcpPackage(PG),f.registerMcpPackage(_G),f.registerMcpPackage(OG),f.connect(),f.requestNotificationPermission(),e(f),r(!h),window.mudClient=f,c.current=!0;const p=C=>{f&&(C.key==="Control"&&f.cancelSpeech(),C.key==="Escape"&&f.stopAllSounds())};window.addEventListener("keydown",p);const g=()=>{var C;(C=a.current)==null||C.focus()};return document.addEventListener("focus",g),()=>{window.removeEventListener("keydown",p),document.removeEventListener("focus",g)}},[h]),w.useEffect(()=>{if(t){const f=g=>{o(g)},p=()=>{o([])};return t.on("userlist",f),t.on("disconnect",p),()=>{t.off("userlist",f),t.off("disconnect",p)}}},[t]),iT(f=>{t&&t.shutdown()}),t?X.jsxs("div",{className:"App",children:[X.jsx("header",{className:"App-header"}),X.jsx(P9,{client:t,onSaveLog:u,onClearLog:d,onToggleUsers:()=>r(!n),onOpenPrefs:()=>{var f;return(f=l.current)==null?void 0:f.open()}}),X.jsxs("div",{children:[X.jsx(g0,{client:t,ref:s}),n&&X.jsx(_9,{users:i}),X.jsx(X7,{client:t})]}),X.jsx(BG,{onSend:t.sendCommand,inputRef:a}),X.jsx(N9,{client:t}),X.jsx(m9,{ref:l})]}):null}function J7(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ik(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function bk(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ik(Object(n),!0).forEach(function(r){J7(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ik(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Y7(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Q7(t,e){if(t==null)return{};var n=Y7(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function q7(t,e){return eH(t)||tH(t,e)||nH(t,e)||rH()}function eH(t){if(Array.isArray(t))return t}function tH(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){i=!0,o=l}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function nH(t,e){if(t){if(typeof t=="string")return wk(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wk(t,e)}}function wk(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function rH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iH(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sk(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ak(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sk(Object(n),!0).forEach(function(r){iH(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sk(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function oH(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,o){return o(i)},r)}}function Xu(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return e.apply(n,[].concat(i,a))}}}function Kp(t){return{}.toString.call(t).includes("Object")}function sH(t){return!Object.keys(t).length}function Kd(t){return typeof t=="function"}function aH(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function lH(t,e){return Kp(e)||Ia("changeType"),Object.keys(e).some(function(n){return!aH(t,n)})&&Ia("changeField"),e}function cH(t){Kd(t)||Ia("selectorType")}function uH(t){Kd(t)||Kp(t)||Ia("handlerType"),Kp(t)&&Object.values(t).some(function(e){return!Kd(e)})&&Ia("handlersType")}function dH(t){t||Ia("initialIsRequired"),Kp(t)||Ia("initialType"),sH(t)&&Ia("initialContent")}function hH(t,e){throw new Error(t[e]||t.default)}var fH={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Ia=Xu(hH)(fH),qh={changes:lH,selector:cH,handler:uH,initial:dH};function pH(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};qh.initial(t),qh.handler(e);var n={current:t},r=Xu(vH)(n,e),i=Xu(mH)(n),o=Xu(qh.changes)(t),s=Xu(gH)(n);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return qh.selector(c),c(n.current)}function l(c){oH(r,i,o,s)(c)}return[a,l]}function gH(t,e){return Kd(e)?e(t.current):e}function mH(t,e){return t.current=Ak(Ak({},t.current),e),e}function vH(t,e,n){return Kd(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var yH={create:pH},CH={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function IH(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),l=0;l<s;l++)a[l]=arguments[l];return e.apply(n,[].concat(i,a))}}}function bH(t){return{}.toString.call(t).includes("Object")}function wH(t){return t||kk("configIsRequired"),bH(t)||kk("configType"),t.urls?(SH(),{paths:{vs:t.urls.monacoBase}}):t}function SH(){console.warn(A_.deprecation)}function AH(t,e){throw new Error(t[e]||t.default)}var A_={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},kk=IH(AH)(A_),kH={config:wH},EH=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,s){return s(o)},i)}};function k_(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],k_(t[n],e[n]))}),bk(bk({},t),e)}var TH={type:"cancelation",msg:"operation is manually canceled"};function nv(t){var e=!1,n=new Promise(function(r,i){t.then(function(o){return e?i(TH):r(o)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var xH=yH.create({config:CH,isInitialized:!1,resolve:null,reject:null,monaco:null}),E_=q7(xH,2),yh=E_[0],Vg=E_[1];function RH(t){var e=kH.config(t),n=e.monaco,r=Q7(e,["monaco"]);Vg(function(i){return{config:k_(i.config,r),monaco:n}})}function PH(){var t=yh(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if(Vg({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),nv(rv);if(window.monaco&&window.monaco.editor)return T_(window.monaco),t.resolve(window.monaco),nv(rv);EH(NH,OH)(MH)}return nv(rv)}function NH(t){return document.body.appendChild(t)}function _H(t){var e=document.createElement("script");return t&&(e.src=t),e}function OH(t){var e=yh(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=_H("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function MH(){var t=yh(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){T_(n),t.resolve(n)},function(n){t.reject(n)})}function T_(t){yh().monaco||Vg({monaco:t})}function DH(){return yh(function(t){var e=t.monaco;return e})}var rv=new Promise(function(t,e){return Vg({resolve:t,reject:e})}),x_={config:RH,init:PH,__getMonacoInstance:DH},LH={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},iv=LH,BH={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},FH=BH;function UH({children:t}){return ut.createElement("div",{style:FH.container},t)}var VH=UH,GH=VH;function WH({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:o,wrapperProps:s}){return ut.createElement("section",{style:{...iv.wrapper,width:t,height:e},...s},!n&&ut.createElement(GH,null,r),ut.createElement("div",{ref:i,style:{...iv.fullWidth,...!n&&iv.hide},className:o}))}var jH=WH,R_=w.memo(jH);function ZH(t){w.useEffect(t,[])}var P_=ZH;function zH(t,e,n=!0){let r=w.useRef(!0);w.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var jr=zH;function hd(){}function tc(t,e,n,r){return HH(t,r)||$H(t,e,n,r)}function HH(t,e){return t.editor.getModel(N_(t,e))}function $H(t,e,n,r){return t.editor.createModel(e,n,r?N_(t,r):void 0)}function N_(t,e){return t.Uri.parse(e)}function XH({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:s,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:c="light",loading:u="Loading...",options:d={},height:h="100%",width:f="100%",className:p,wrapperProps:g={},beforeMount:C=hd,onMount:m=hd}){let[v,b]=w.useState(!1),[k,S]=w.useState(!0),A=w.useRef(null),R=w.useRef(null),T=w.useRef(null),_=w.useRef(m),O=w.useRef(C),B=w.useRef(!1);P_(()=>{let J=x_.init();return J.then(ee=>(R.current=ee)&&S(!1)).catch(ee=>(ee==null?void 0:ee.type)!=="cancelation"&&console.error("Monaco initialization: error:",ee)),()=>A.current?Z():J.cancel()}),jr(()=>{if(A.current&&R.current){let J=A.current.getOriginalEditor(),ee=tc(R.current,t||"",r||n||"text",o||"");ee!==J.getModel()&&J.setModel(ee)}},[o],v),jr(()=>{if(A.current&&R.current){let J=A.current.getModifiedEditor(),ee=tc(R.current,e||"",i||n||"text",s||"");ee!==J.getModel()&&J.setModel(ee)}},[s],v),jr(()=>{let J=A.current.getModifiedEditor();J.getOption(R.current.editor.EditorOption.readOnly)?J.setValue(e||""):e!==J.getValue()&&(J.executeEdits("",[{range:J.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),J.pushUndoStop())},[e],v),jr(()=>{var J,ee;(ee=(J=A.current)==null?void 0:J.getModel())==null||ee.original.setValue(t||"")},[t],v),jr(()=>{let{original:J,modified:ee}=A.current.getModel();R.current.editor.setModelLanguage(J,r||n||"text"),R.current.editor.setModelLanguage(ee,i||n||"text")},[n,r,i],v),jr(()=>{var J;(J=R.current)==null||J.editor.setTheme(c)},[c],v),jr(()=>{var J;(J=A.current)==null||J.updateOptions(d)},[d],v);let V=w.useCallback(()=>{var re;if(!R.current)return;O.current(R.current);let J=tc(R.current,t||"",r||n||"text",o||""),ee=tc(R.current,e||"",i||n||"text",s||"");(re=A.current)==null||re.setModel({original:J,modified:ee})},[n,e,i,t,r,o,s]),H=w.useCallback(()=>{var J;!B.current&&T.current&&(A.current=R.current.editor.createDiffEditor(T.current,{automaticLayout:!0,...d}),V(),(J=R.current)==null||J.editor.setTheme(c),b(!0),B.current=!0)},[d,c,V]);w.useEffect(()=>{v&&_.current(A.current,R.current)},[v]),w.useEffect(()=>{!k&&!v&&H()},[k,v,H]);function Z(){var ee,re,$,K;let J=(ee=A.current)==null?void 0:ee.getModel();a||((re=J==null?void 0:J.original)==null||re.dispose()),l||(($=J==null?void 0:J.modified)==null||$.dispose()),(K=A.current)==null||K.dispose()}return ut.createElement(R_,{width:f,height:h,isEditorReady:v,loading:u,_ref:T,className:p,wrapperProps:g})}var KH=XH;w.memo(KH);function JH(t){let e=w.useRef();return w.useEffect(()=>{e.current=t},[t]),e.current}var YH=JH,ef=new Map;function QH({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:o,theme:s="light",line:a,loading:l="Loading...",options:c={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:h=!1,width:f="100%",height:p="100%",className:g,wrapperProps:C={},beforeMount:m=hd,onMount:v=hd,onChange:b,onValidate:k=hd}){let[S,A]=w.useState(!1),[R,T]=w.useState(!0),_=w.useRef(null),O=w.useRef(null),B=w.useRef(null),V=w.useRef(v),H=w.useRef(m),Z=w.useRef(),J=w.useRef(r),ee=YH(o),re=w.useRef(!1),$=w.useRef(!1);P_(()=>{let j=x_.init();return j.then(oe=>(_.current=oe)&&T(!1)).catch(oe=>(oe==null?void 0:oe.type)!=="cancelation"&&console.error("Monaco initialization: error:",oe)),()=>O.current?ie():j.cancel()}),jr(()=>{var oe,ke,Le,de;let j=tc(_.current,t||r||"",e||i||"",o||n||"");j!==((oe=O.current)==null?void 0:oe.getModel())&&(d&&ef.set(ee,(ke=O.current)==null?void 0:ke.saveViewState()),(Le=O.current)==null||Le.setModel(j),d&&((de=O.current)==null||de.restoreViewState(ef.get(o))))},[o],S),jr(()=>{var j;(j=O.current)==null||j.updateOptions(c)},[c],S),jr(()=>{!O.current||r===void 0||(O.current.getOption(_.current.editor.EditorOption.readOnly)?O.current.setValue(r):r!==O.current.getValue()&&($.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),O.current.pushUndoStop(),$.current=!1))},[r],S),jr(()=>{var oe,ke;let j=(oe=O.current)==null?void 0:oe.getModel();j&&i&&((ke=_.current)==null||ke.editor.setModelLanguage(j,i))},[i],S),jr(()=>{var j;a!==void 0&&((j=O.current)==null||j.revealLine(a))},[a],S),jr(()=>{var j;(j=_.current)==null||j.editor.setTheme(s)},[s],S);let K=w.useCallback(()=>{var j;if(!(!B.current||!_.current)&&!re.current){H.current(_.current);let oe=o||n,ke=tc(_.current,r||t||"",e||i||"",oe||"");O.current=(j=_.current)==null?void 0:j.editor.create(B.current,{model:ke,automaticLayout:!0,...c},u),d&&O.current.restoreViewState(ef.get(oe)),_.current.editor.setTheme(s),a!==void 0&&O.current.revealLine(a),A(!0),re.current=!0}},[t,e,n,r,i,o,c,u,d,s,a]);w.useEffect(()=>{S&&V.current(O.current,_.current)},[S]),w.useEffect(()=>{!R&&!S&&K()},[R,S,K]),J.current=r,w.useEffect(()=>{var j,oe;S&&b&&((j=Z.current)==null||j.dispose(),Z.current=(oe=O.current)==null?void 0:oe.onDidChangeModelContent(ke=>{$.current||b(O.current.getValue(),ke)}))},[S,b]),w.useEffect(()=>{if(S){let j=_.current.editor.onDidChangeMarkers(oe=>{var Le;let ke=(Le=O.current.getModel())==null?void 0:Le.uri;if(ke&&oe.find(de=>de.path===ke.path)){let de=_.current.editor.getModelMarkers({resource:ke});k==null||k(de)}});return()=>{j==null||j.dispose()}}return()=>{}},[S,k]);function ie(){var j,oe;(j=Z.current)==null||j.dispose(),h?d&&ef.set(o,O.current.saveViewState()):(oe=O.current.getModel())==null||oe.dispose(),O.current.dispose()}return ut.createElement(R_,{width:f,height:p,isEditorReady:S,loading:l,_ref:B,className:g,wrapperProps:C})}var qH=QH,e$=w.memo(qH),t$=e$,n$={restoreOnUnmount:!1};function r$(t,e){e===void 0&&(e=n$);var n=w.useRef(document.title);document.title!==t&&(document.title=t),w.useEffect(function(){if(e&&e.restoreOnUnmount)return function(){document.title=n.current}},[])}const i$=typeof document<"u"?r$:function(t){};function o$({onSave:t,onRevert:e,onDownload:n}){return X.jsx("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderBottom:"1px solid #e8e8e8"},children:X.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[X.jsxs("button",{onClick:t,accessKey:"s",children:[X.jsx(oP,{}),"Save"]}),X.jsxs("button",{onClick:e,accessKey:"r",children:[X.jsx(T9,{}),"Revert"]}),X.jsxs("button",{onClick:n,accessKey:"d",children:[X.jsx(k9,{}),"Download"]})]})})}const s$=({docstate:t,session:e})=>X.jsxs("div",{"aria-live":"polite",className:"statusbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderTop:"1px solid #e8e8e8"},children:[X.jsx("span",{children:t}),X.jsx("span",{children:"|"}),X.jsx("span",{children:e.reference}),X.jsx("span",{children:"|"}),X.jsx("span",{children:e.type})]});function a$(){const t=rT(),e=ut.useRef(null),[n,r]=w.useState(""),[i,o]=w.useState(""),[s,a]=w.useState(""),[l,c]=w.useState(0),[u,d]=w.useState({name:"none",contents:[],reference:"",type:""}),h=(H,Z)=>{e.current=H},[f,p]=Ns();console.log(f);const g=f.editor.accessibilityMode,C=f.editor.autocompleteEnabled;iT(H=>{S.postMessage({type:"close",id:R}),l===1&&H.preventDefault()});const[m,v]=w.useState(!1),b=m?`${u.name} - Mongoose Editor`:"Mongoose Editor";i$(b);const k=w.useMemo(()=>{switch(l){case 0:return"Unchanged";case 1:return"Changed";case 2:return"Saved"}},[l]),S=w.useMemo(()=>new BroadcastChannel("editor"),[]),A=new URLSearchParams(t.search),R=decodeURIComponent(A.get("reference")||"");w.useEffect(()=>{if(!R)return;console.log("ID: "+R),console.log("Sending ready message"),S.postMessage({type:"ready",id:R});const H=Z=>{switch(console.log(Z.data),Z.data.type){case"load":if(n!=="")return;const J=Z.data.session.contents.join(`
`);o(J),a(J),d(Z.data.session),c(0),r(Z.data.clientId),v(!0),setTimeout(V,100);break;case"shutdown":if(console.log("Received shutdown message"),l===1&&!window.confirm("You have unsaved changes. Are you sure you want to close this editor?"))return;S.close(),window.close();break;default:console.warn("Unknown message type received",Z.data.type)}};return S.addEventListener("message",H),()=>{S.removeEventListener("message",H),S.postMessage({type:"close",id:R})}},[S,n,R,l]);const T=()=>{o(s),c(0)},_=H=>{const Z=i.split(/\r\n|\r|\n/),J={...u,contents:Z};S.postMessage({type:"save",session:J,id:R}),c(2),V(),H.preventDefault()},O=H=>{H!==void 0&&(console.log("Original: "+s),console.log("New: "+H),o(H),H.split(/\r\n|\r|\n/).join(`
`)!==s?c(1):c(0),m||v(!0))},B=()=>{const H=new Blob([i],{type:"text/plain"}),Z=URL.createObjectURL(H),J=document.createElement("a"),ee=new Date,re=ee.toLocaleDateString().replace(/\//g,"-"),$=ee.toLocaleTimeString().replace(/:/g,"-"),K=`${u.name}-${re}-${$}.txt`;J.download=K,J.href=Z,J.click(),URL.revokeObjectURL(Z),J.remove()};return X.jsxs("div",{id:"editor",children:[X.jsx(o$,{onSave:_,onRevert:T,onDownload:B}),X.jsx(t$,{height:"80vh",defaultLanguage:"lambdamoo",value:i,onChange:O,options:{wordWrap:"on",accessibilitySupport:g?"on":"off",quickSuggestions:C},onMount:h,path:u.reference}),X.jsx(s$,{docstate:k,session:u})]});function V(){e.current!==null&&e.current.focus()}}const l$="modulepreload",c$=function(t){return"/"+t},Ek={},u$=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),a=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(n.map(l=>{if(l=c$(l),l in Ek)return;Ek[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const d=document.createElement("link");if(d.rel=c?"stylesheet":l$,c||(d.as="script"),d.crossOrigin="",d.href=l,a&&d.setAttribute("nonce",a),document.head.appendChild(d),c)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return i.then(s=>{for(const a of s||[])a.status==="rejected"&&o(a.reason);return e().catch(o)})},d$=t=>{t&&t instanceof Function&&u$(async()=>{const{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}=await import("./web-vitals-DdRmOIVa.js");return{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}},[]).then(({getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o})=>{e(t),n(t),r(t),i(t),o(t)})};var Tk={};const h$=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function f$(t){if("serviceWorker"in navigator){if(new URL(Tk.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${Tk.PUBLIC_URL}/service-worker.js`;h$?(p$(n),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):__(n)})}}function __(t,e){navigator.serviceWorker.register(t).then(n=>{n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."):console.log("Content is cached for offline use."))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function p$(t,e){fetch(t).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):__(t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}const g$=k2([{path:"/",element:X.jsx(K7,{})},{path:"/editor",element:X.jsx(a$,{})}]),m$=ov.createRoot(document.getElementById("root"));m$.render(X.jsx(ut.StrictMode,{children:X.jsx(M2,{router:g$})}));d$(console.log);f$();
