var YR=Object.defineProperty;var ZC=t=>{throw TypeError(t)};var QR=(t,e,n)=>e in t?YR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var V=(t,e,n)=>QR(t,typeof e!="symbol"?e+"":e,n),Qp=(t,e,n)=>e.has(t)||ZC("Cannot "+n);var N=(t,e,n)=>(Qp(t,e,"read from private field"),n?n.call(t):e.get(t)),je=(t,e,n)=>e.has(t)?ZC("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ae=(t,e,n,r)=>(Qp(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ve=(t,e,n)=>(Qp(t,e,"access private method"),n);var Ud=(t,e,n,r)=>({set _(i){Ae(t,e,i,n)},get _(){return N(t,e,r)}});function a1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var qR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fd(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var c1={exports:{}},ap={},l1={exports:{}},Ue={},pd=Symbol.for("react.element"),eN=Symbol.for("react.portal"),tN=Symbol.for("react.fragment"),nN=Symbol.for("react.strict_mode"),rN=Symbol.for("react.profiler"),iN=Symbol.for("react.provider"),oN=Symbol.for("react.context"),sN=Symbol.for("react.forward_ref"),aN=Symbol.for("react.suspense"),cN=Symbol.for("react.memo"),lN=Symbol.for("react.lazy"),zC=Symbol.iterator;function uN(t){return t===null||typeof t!="object"?null:(t=zC&&t[zC]||t["@@iterator"],typeof t=="function"?t:null)}var u1={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},d1=Object.assign,h1={};function hl(t,e,n){this.props=t,this.context=e,this.refs=h1,this.updater=n||u1}hl.prototype.isReactComponent={};hl.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};hl.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function f1(){}f1.prototype=hl.prototype;function k0(t,e,n){this.props=t,this.context=e,this.refs=h1,this.updater=n||u1}var E0=k0.prototype=new f1;E0.constructor=k0;d1(E0,hl.prototype);E0.isPureReactComponent=!0;var HC=Array.isArray,p1=Object.prototype.hasOwnProperty,T0={current:null},g1={key:!0,ref:!0,__self:!0,__source:!0};function m1(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)p1.call(e,r)&&!g1.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var c=Array(a),l=0;l<a;l++)c[l]=arguments[l+2];i.children=c}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:pd,type:t,key:o,ref:s,props:i,_owner:T0.current}}function dN(t,e){return{$$typeof:pd,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x0(t){return typeof t=="object"&&t!==null&&t.$$typeof===pd}function hN(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var XC=/\/+/g;function qp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hN(""+t.key):e.toString(36)}function mh(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case pd:case eN:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+qp(s,0):r,HC(i)?(n="",t!=null&&(n=t.replace(XC,"$&/")+"/"),mh(i,e,n,"",function(l){return l})):i!=null&&(x0(i)&&(i=dN(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(XC,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",HC(t))for(var a=0;a<t.length;a++){o=t[a];var c=r+qp(o,a);s+=mh(o,e,n,c,i)}else if(c=uN(t),typeof c=="function")for(t=c.call(t),a=0;!(o=t.next()).done;)o=o.value,c=r+qp(o,a++),s+=mh(o,e,n,c,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Vd(t,e,n){if(t==null)return t;var r=[],i=0;return mh(t,r,"","",function(o){return e.call(n,o,i++)}),r}function fN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jn={current:null},vh={transition:null},pN={ReactCurrentDispatcher:jn,ReactCurrentBatchConfig:vh,ReactCurrentOwner:T0};function v1(){throw Error("act(...) is not supported in production builds of React.")}Ue.Children={map:Vd,forEach:function(t,e,n){Vd(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vd(t,function(){e++}),e},toArray:function(t){return Vd(t,function(e){return e})||[]},only:function(t){if(!x0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ue.Component=hl;Ue.Fragment=tN;Ue.Profiler=rN;Ue.PureComponent=k0;Ue.StrictMode=nN;Ue.Suspense=aN;Ue.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pN;Ue.act=v1;Ue.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=d1({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=T0.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(c in e)p1.call(e,c)&&!g1.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&a!==void 0?a[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){a=Array(c);for(var l=0;l<c;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:pd,type:t.type,key:i,ref:o,props:r,_owner:s}};Ue.createContext=function(t){return t={$$typeof:oN,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:iN,_context:t},t.Consumer=t};Ue.createElement=m1;Ue.createFactory=function(t){var e=m1.bind(null,t);return e.type=t,e};Ue.createRef=function(){return{current:null}};Ue.forwardRef=function(t){return{$$typeof:sN,render:t}};Ue.isValidElement=x0;Ue.lazy=function(t){return{$$typeof:lN,_payload:{_status:-1,_result:t},_init:fN}};Ue.memo=function(t,e){return{$$typeof:cN,type:t,compare:e===void 0?null:e}};Ue.startTransition=function(t){var e=vh.transition;vh.transition={};try{t()}finally{vh.transition=e}};Ue.unstable_act=v1;Ue.useCallback=function(t,e){return jn.current.useCallback(t,e)};Ue.useContext=function(t){return jn.current.useContext(t)};Ue.useDebugValue=function(){};Ue.useDeferredValue=function(t){return jn.current.useDeferredValue(t)};Ue.useEffect=function(t,e){return jn.current.useEffect(t,e)};Ue.useId=function(){return jn.current.useId()};Ue.useImperativeHandle=function(t,e,n){return jn.current.useImperativeHandle(t,e,n)};Ue.useInsertionEffect=function(t,e){return jn.current.useInsertionEffect(t,e)};Ue.useLayoutEffect=function(t,e){return jn.current.useLayoutEffect(t,e)};Ue.useMemo=function(t,e){return jn.current.useMemo(t,e)};Ue.useReducer=function(t,e,n){return jn.current.useReducer(t,e,n)};Ue.useRef=function(t){return jn.current.useRef(t)};Ue.useState=function(t){return jn.current.useState(t)};Ue.useSyncExternalStore=function(t,e,n){return jn.current.useSyncExternalStore(t,e,n)};Ue.useTransition=function(){return jn.current.useTransition()};Ue.version="18.3.1";l1.exports=Ue;var S=l1.exports;const nt=fd(S),gN=a1({__proto__:null,default:nt},[S]);var mN=S,vN=Symbol.for("react.element"),yN=Symbol.for("react.fragment"),CN=Object.prototype.hasOwnProperty,IN=mN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,bN={key:!0,ref:!0,__self:!0,__source:!0};function y1(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)CN.call(e,r)&&!bN.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:vN,type:t,key:o,ref:s,props:i,_owner:IN.current}}ap.Fragment=yN;ap.jsx=y1;ap.jsxs=y1;c1.exports=ap;var X=c1.exports,um={},C1={exports:{}},Pr={},I1={exports:{}},b1={};(function(t){function e(z,$){var re=z.length;z.push($);e:for(;0<re;){var H=re-1>>>1,ie=z[H];if(0<i(ie,$))z[H]=$,z[re]=ie,re=H;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var $=z[0],re=z.pop();if(re!==$){z[0]=re;e:for(var H=0,ie=z.length,Re=ie>>>1;H<Re;){var Ne=2*(H+1)-1,Ce=z[Ne],Te=Ne+1,it=z[Te];if(0>i(Ce,re))Te<ie&&0>i(it,Ce)?(z[H]=it,z[Te]=re,H=Te):(z[H]=Ce,z[Ne]=re,H=Ne);else if(Te<ie&&0>i(it,re))z[H]=it,z[Te]=re,H=Te;else break e}}return $}function i(z,$){var re=z.sortIndex-$.sortIndex;return re!==0?re:z.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var c=[],l=[],u=1,d=null,h=3,f=!1,p=!1,g=!1,C=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(z){for(var $=n(l);$!==null;){if($.callback===null)r(l);else if($.startTime<=z)r(l),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(l)}}function E(z){if(g=!1,b(z),!p)if(n(c)!==null)p=!0,ee(w);else{var $=n(l);$!==null&&ne(E,$.startTime-z)}}function w(z,$){p=!1,g&&(g=!1,m(T),T=-1),f=!0;var re=h;try{for(b($),d=n(c);d!==null&&(!(d.expirationTime>$)||z&&!D());){var H=d.callback;if(typeof H=="function"){d.callback=null,h=d.priorityLevel;var ie=H(d.expirationTime<=$);$=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(c)&&r(c),b($)}else r(c);d=n(c)}if(d!==null)var Re=!0;else{var Ne=n(l);Ne!==null&&ne(E,Ne.startTime-$),Re=!1}return Re}finally{d=null,h=re,f=!1}}var A=!1,x=null,T=-1,_=5,O=-1;function D(){return!(t.unstable_now()-O<_)}function U(){if(x!==null){var z=t.unstable_now();O=z;var $=!0;try{$=x(!0,z)}finally{$?j():(A=!1,x=null)}}else A=!1}var j;if(typeof v=="function")j=function(){v(U)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,Y=Z.port2;Z.port1.onmessage=U,j=function(){Y.postMessage(null)}}else j=function(){C(U,0)};function ee(z){x=z,A||(A=!0,j())}function ne(z,$){T=C(function(){z(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,ee(w))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var re=h;h=$;try{return z()}finally{h=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,$){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var re=h;h=z;try{return $()}finally{h=re}},t.unstable_scheduleCallback=function(z,$,re){var H=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?H+re:H):re=H,z){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=re+ie,z={id:u++,callback:$,priorityLevel:z,startTime:re,expirationTime:ie,sortIndex:-1},re>H?(z.sortIndex=re,e(l,z),n(c)===null&&z===n(l)&&(g?(m(T),T=-1):g=!0,ne(E,re-H))):(z.sortIndex=ie,e(c,z),p||f||(p=!0,ee(w))),z},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(z){var $=h;return function(){var re=h;h=$;try{return z.apply(this,arguments)}finally{h=re}}}})(b1);I1.exports=b1;var SN=I1.exports,wN=S,Tr=SN;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var S1=new Set,xu={};function Xa(t,e){$c(t,e),$c(t+"Capture",e)}function $c(t,e){for(xu[t]=e,t=0;t<e.length;t++)S1.add(e[t])}var $o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dm=Object.prototype.hasOwnProperty,AN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,$C={},KC={};function kN(t){return dm.call(KC,t)?!0:dm.call($C,t)?!1:AN.test(t)?KC[t]=!0:($C[t]=!0,!1)}function EN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TN(t,e,n,r){if(e===null||typeof e>"u"||EN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Zn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var gn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){gn[t]=new Zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];gn[e]=new Zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){gn[t]=new Zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){gn[t]=new Zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){gn[t]=new Zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){gn[t]=new Zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){gn[t]=new Zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){gn[t]=new Zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){gn[t]=new Zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var P0=/[\-:]([a-z])/g;function R0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(P0,R0);gn[e]=new Zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(P0,R0);gn[e]=new Zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(P0,R0);gn[e]=new Zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){gn[t]=new Zn(t,1,!1,t.toLowerCase(),null,!1,!1)});gn.xlinkHref=new Zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){gn[t]=new Zn(t,1,!1,t.toLowerCase(),null,!0,!0)});function N0(t,e,n,r){var i=gn.hasOwnProperty(e)?gn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TN(e,n,i,r)&&(n=null),r||i===null?kN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var rs=wN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Gd=Symbol.for("react.element"),hc=Symbol.for("react.portal"),fc=Symbol.for("react.fragment"),_0=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),w1=Symbol.for("react.provider"),A1=Symbol.for("react.context"),O0=Symbol.for("react.forward_ref"),fm=Symbol.for("react.suspense"),pm=Symbol.for("react.suspense_list"),M0=Symbol.for("react.memo"),Is=Symbol.for("react.lazy"),k1=Symbol.for("react.offscreen"),JC=Symbol.iterator;function _l(t){return t===null||typeof t!="object"?null:(t=JC&&t[JC]||t["@@iterator"],typeof t=="function"?t:null)}var Pt=Object.assign,eg;function Jl(t){if(eg===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);eg=e&&e[1]||""}return`
`+eg+t}var tg=!1;function ng(t,e){if(!t||tg)return"";tg=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var c=`
`+i[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=a);break}}}finally{tg=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Jl(t):""}function xN(t){switch(t.tag){case 5:return Jl(t.type);case 16:return Jl("Lazy");case 13:return Jl("Suspense");case 19:return Jl("SuspenseList");case 0:case 2:case 15:return t=ng(t.type,!1),t;case 11:return t=ng(t.type.render,!1),t;case 1:return t=ng(t.type,!0),t;default:return""}}function gm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fc:return"Fragment";case hc:return"Portal";case hm:return"Profiler";case _0:return"StrictMode";case fm:return"Suspense";case pm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case A1:return(t.displayName||"Context")+".Consumer";case w1:return(t._context.displayName||"Context")+".Provider";case O0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M0:return e=t.displayName||null,e!==null?e:gm(t.type)||"Memo";case Is:e=t._payload,t=t._init;try{return gm(t(e))}catch{}}return null}function PN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return gm(e);case 8:return e===_0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Hs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RN(t){var e=E1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wd(t){t._valueTracker||(t._valueTracker=RN(t))}function T1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=E1(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function ef(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mm(t,e){var n=e.checked;return Pt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function YC(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Hs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function x1(t,e){e=e.checked,e!=null&&N0(t,"checked",e,!1)}function vm(t,e){x1(t,e);var n=Hs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ym(t,e.type,n):e.hasOwnProperty("defaultValue")&&ym(t,e.type,Hs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function QC(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ym(t,e,n){(e!=="number"||ef(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Yl=Array.isArray;function xc(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Hs(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Cm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return Pt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qC(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(Yl(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Hs(n)}}function P1(t,e){var n=Hs(e.value),r=Hs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function eI(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function R1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Im(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?R1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jd,N1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jd=jd||document.createElement("div"),jd.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jd.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var du={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NN=["Webkit","ms","Moz","O"];Object.keys(du).forEach(function(t){NN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),du[e]=du[t]})});function _1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||du.hasOwnProperty(t)&&du[t]?(""+e).trim():e+"px"}function O1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=_1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var _N=Pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bm(t,e){if(e){if(_N[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function Sm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wm=null;function D0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Am=null,Pc=null,Rc=null;function tI(t){if(t=vd(t)){if(typeof Am!="function")throw Error(se(280));var e=t.stateNode;e&&(e=hp(e),Am(t.stateNode,t.type,e))}}function M1(t){Pc?Rc?Rc.push(t):Rc=[t]:Pc=t}function D1(){if(Pc){var t=Pc,e=Rc;if(Rc=Pc=null,tI(t),e)for(t=0;t<e.length;t++)tI(e[t])}}function L1(t,e){return t(e)}function B1(){}var rg=!1;function F1(t,e,n){if(rg)return t(e,n);rg=!0;try{return L1(t,e,n)}finally{rg=!1,(Pc!==null||Rc!==null)&&(B1(),D1())}}function Ru(t,e){var n=t.stateNode;if(n===null)return null;var r=hp(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var km=!1;if($o)try{var Ol={};Object.defineProperty(Ol,"passive",{get:function(){km=!0}}),window.addEventListener("test",Ol,Ol),window.removeEventListener("test",Ol,Ol)}catch{km=!1}function ON(t,e,n,r,i,o,s,a,c){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(u){this.onError(u)}}var hu=!1,tf=null,nf=!1,Em=null,MN={onError:function(t){hu=!0,tf=t}};function DN(t,e,n,r,i,o,s,a,c){hu=!1,tf=null,ON.apply(MN,arguments)}function LN(t,e,n,r,i,o,s,a,c){if(DN.apply(this,arguments),hu){if(hu){var l=tf;hu=!1,tf=null}else throw Error(se(198));nf||(nf=!0,Em=l)}}function $a(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function U1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function nI(t){if($a(t)!==t)throw Error(se(188))}function BN(t){var e=t.alternate;if(!e){if(e=$a(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return nI(i),t;if(o===r)return nI(i),e;o=o.sibling}throw Error(se(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(se(189))}}if(n.alternate!==r)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function V1(t){return t=BN(t),t!==null?G1(t):null}function G1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G1(t);if(e!==null)return e;t=t.sibling}return null}var W1=Tr.unstable_scheduleCallback,rI=Tr.unstable_cancelCallback,FN=Tr.unstable_shouldYield,UN=Tr.unstable_requestPaint,Bt=Tr.unstable_now,VN=Tr.unstable_getCurrentPriorityLevel,L0=Tr.unstable_ImmediatePriority,j1=Tr.unstable_UserBlockingPriority,rf=Tr.unstable_NormalPriority,GN=Tr.unstable_LowPriority,Z1=Tr.unstable_IdlePriority,cp=null,Yi=null;function WN(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(cp,t,void 0,(t.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:zN,jN=Math.log,ZN=Math.LN2;function zN(t){return t>>>=0,t===0?32:31-(jN(t)/ZN|0)|0}var Zd=64,zd=4194304;function Ql(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function of(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Ql(a):(o&=s,o!==0&&(r=Ql(o)))}else s=n&~i,s!==0?r=Ql(s):o!==0&&(r=Ql(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mi(e),i=1<<n,r|=t[n],e&=~i;return r}function HN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function XN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-mi(o),a=1<<s,c=i[s];c===-1?(!(a&n)||a&r)&&(i[s]=HN(a,e)):c<=e&&(t.expiredLanes|=a),o&=~a}}function Tm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function z1(){var t=Zd;return Zd<<=1,!(Zd&4194240)&&(Zd=64),t}function ig(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function gd(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mi(e),t[e]=n}function $N(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-mi(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function B0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Qe=0;function H1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var X1,F0,$1,K1,J1,xm=!1,Hd=[],Ls=null,Bs=null,Fs=null,Nu=new Map,_u=new Map,ws=[],KN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iI(t,e){switch(t){case"focusin":case"focusout":Ls=null;break;case"dragenter":case"dragleave":Bs=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Nu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_u.delete(e.pointerId)}}function Ml(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=vd(e),e!==null&&F0(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function JN(t,e,n,r,i){switch(e){case"focusin":return Ls=Ml(Ls,t,e,n,r,i),!0;case"dragenter":return Bs=Ml(Bs,t,e,n,r,i),!0;case"mouseover":return Fs=Ml(Fs,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nu.set(o,Ml(Nu.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,_u.set(o,Ml(_u.get(o)||null,t,e,n,r,i)),!0}return!1}function Y1(t){var e=va(t.target);if(e!==null){var n=$a(e);if(n!==null){if(e=n.tag,e===13){if(e=U1(n),e!==null){t.blockedOn=e,J1(t.priority,function(){$1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);wm=r,n.target.dispatchEvent(r),wm=null}else return e=vd(n),e!==null&&F0(e),t.blockedOn=n,!1;e.shift()}return!0}function oI(t,e,n){yh(t)&&n.delete(e)}function YN(){xm=!1,Ls!==null&&yh(Ls)&&(Ls=null),Bs!==null&&yh(Bs)&&(Bs=null),Fs!==null&&yh(Fs)&&(Fs=null),Nu.forEach(oI),_u.forEach(oI)}function Dl(t,e){t.blockedOn===e&&(t.blockedOn=null,xm||(xm=!0,Tr.unstable_scheduleCallback(Tr.unstable_NormalPriority,YN)))}function Ou(t){function e(i){return Dl(i,t)}if(0<Hd.length){Dl(Hd[0],t);for(var n=1;n<Hd.length;n++){var r=Hd[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ls!==null&&Dl(Ls,t),Bs!==null&&Dl(Bs,t),Fs!==null&&Dl(Fs,t),Nu.forEach(e),_u.forEach(e),n=0;n<ws.length;n++)r=ws[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ws.length&&(n=ws[0],n.blockedOn===null);)Y1(n),n.blockedOn===null&&ws.shift()}var Nc=rs.ReactCurrentBatchConfig,sf=!0;function QN(t,e,n,r){var i=Qe,o=Nc.transition;Nc.transition=null;try{Qe=1,U0(t,e,n,r)}finally{Qe=i,Nc.transition=o}}function qN(t,e,n,r){var i=Qe,o=Nc.transition;Nc.transition=null;try{Qe=4,U0(t,e,n,r)}finally{Qe=i,Nc.transition=o}}function U0(t,e,n,r){if(sf){var i=Pm(t,e,n,r);if(i===null)pg(t,e,r,af,n),iI(t,r);else if(JN(i,t,e,n,r))r.stopPropagation();else if(iI(t,r),e&4&&-1<KN.indexOf(t)){for(;i!==null;){var o=vd(i);if(o!==null&&X1(o),o=Pm(t,e,n,r),o===null&&pg(t,e,r,af,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else pg(t,e,r,null,n)}}var af=null;function Pm(t,e,n,r){if(af=null,t=D0(r),t=va(t),t!==null)if(e=$a(t),e===null)t=null;else if(n=e.tag,n===13){if(t=U1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return af=t,null}function Q1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VN()){case L0:return 1;case j1:return 4;case rf:case GN:return 16;case Z1:return 536870912;default:return 16}default:return 16}}var Es=null,V0=null,Ch=null;function q1(){if(Ch)return Ch;var t,e=V0,n=e.length,r,i="value"in Es?Es.value:Es.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Ch=i.slice(t,1<r?1-r:void 0)}function Ih(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Xd(){return!0}function sI(){return!1}function Rr(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Xd:sI,this.isPropagationStopped=sI,this}return Pt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Xd)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Xd)},persist:function(){},isPersistent:Xd}),e}var fl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},G0=Rr(fl),md=Pt({},fl,{view:0,detail:0}),e_=Rr(md),og,sg,Ll,lp=Pt({},md,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:W0,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ll&&(Ll&&t.type==="mousemove"?(og=t.screenX-Ll.screenX,sg=t.screenY-Ll.screenY):sg=og=0,Ll=t),og)},movementY:function(t){return"movementY"in t?t.movementY:sg}}),aI=Rr(lp),t_=Pt({},lp,{dataTransfer:0}),n_=Rr(t_),r_=Pt({},md,{relatedTarget:0}),ag=Rr(r_),i_=Pt({},fl,{animationName:0,elapsedTime:0,pseudoElement:0}),o_=Rr(i_),s_=Pt({},fl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),a_=Rr(s_),c_=Pt({},fl,{data:0}),cI=Rr(c_),l_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},u_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},d_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function h_(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=d_[t])?!!e[t]:!1}function W0(){return h_}var f_=Pt({},md,{key:function(t){if(t.key){var e=l_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ih(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?u_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:W0,charCode:function(t){return t.type==="keypress"?Ih(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ih(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),p_=Rr(f_),g_=Pt({},lp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lI=Rr(g_),m_=Pt({},md,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:W0}),v_=Rr(m_),y_=Pt({},fl,{propertyName:0,elapsedTime:0,pseudoElement:0}),C_=Rr(y_),I_=Pt({},lp,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),b_=Rr(I_),S_=[9,13,27,32],j0=$o&&"CompositionEvent"in window,fu=null;$o&&"documentMode"in document&&(fu=document.documentMode);var w_=$o&&"TextEvent"in window&&!fu,eA=$o&&(!j0||fu&&8<fu&&11>=fu),uI=" ",dI=!1;function tA(t,e){switch(t){case"keyup":return S_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pc=!1;function A_(t,e){switch(t){case"compositionend":return nA(e);case"keypress":return e.which!==32?null:(dI=!0,uI);case"textInput":return t=e.data,t===uI&&dI?null:t;default:return null}}function k_(t,e){if(pc)return t==="compositionend"||!j0&&tA(t,e)?(t=q1(),Ch=V0=Es=null,pc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return eA&&e.locale!=="ko"?null:e.data;default:return null}}var E_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hI(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!E_[t.type]:e==="textarea"}function rA(t,e,n,r){M1(r),e=cf(e,"onChange"),0<e.length&&(n=new G0("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var pu=null,Mu=null;function T_(t){pA(t,0)}function up(t){var e=vc(t);if(T1(e))return t}function x_(t,e){if(t==="change")return e}var iA=!1;if($o){var cg;if($o){var lg="oninput"in document;if(!lg){var fI=document.createElement("div");fI.setAttribute("oninput","return;"),lg=typeof fI.oninput=="function"}cg=lg}else cg=!1;iA=cg&&(!document.documentMode||9<document.documentMode)}function pI(){pu&&(pu.detachEvent("onpropertychange",oA),Mu=pu=null)}function oA(t){if(t.propertyName==="value"&&up(Mu)){var e=[];rA(e,Mu,t,D0(t)),F1(T_,e)}}function P_(t,e,n){t==="focusin"?(pI(),pu=e,Mu=n,pu.attachEvent("onpropertychange",oA)):t==="focusout"&&pI()}function R_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return up(Mu)}function N_(t,e){if(t==="click")return up(e)}function __(t,e){if(t==="input"||t==="change")return up(e)}function O_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ci=typeof Object.is=="function"?Object.is:O_;function Du(t,e){if(Ci(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!dm.call(e,i)||!Ci(t[i],e[i]))return!1}return!0}function gI(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mI(t,e){var n=gI(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=gI(n)}}function sA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function aA(){for(var t=window,e=ef();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=ef(t.document)}return e}function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function M_(t){var e=aA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&sA(n.ownerDocument.documentElement,n)){if(r!==null&&Z0(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=mI(n,o);var s=mI(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var D_=$o&&"documentMode"in document&&11>=document.documentMode,gc=null,Rm=null,gu=null,Nm=!1;function vI(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Nm||gc==null||gc!==ef(r)||(r=gc,"selectionStart"in r&&Z0(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),gu&&Du(gu,r)||(gu=r,r=cf(Rm,"onSelect"),0<r.length&&(e=new G0("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gc)))}function $d(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mc={animationend:$d("Animation","AnimationEnd"),animationiteration:$d("Animation","AnimationIteration"),animationstart:$d("Animation","AnimationStart"),transitionend:$d("Transition","TransitionEnd")},ug={},cA={};$o&&(cA=document.createElement("div").style,"AnimationEvent"in window||(delete mc.animationend.animation,delete mc.animationiteration.animation,delete mc.animationstart.animation),"TransitionEvent"in window||delete mc.transitionend.transition);function dp(t){if(ug[t])return ug[t];if(!mc[t])return t;var e=mc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in cA)return ug[t]=e[n];return t}var lA=dp("animationend"),uA=dp("animationiteration"),dA=dp("animationstart"),hA=dp("transitionend"),fA=new Map,yI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qs(t,e){fA.set(t,e),Xa(e,[t])}for(var dg=0;dg<yI.length;dg++){var hg=yI[dg],L_=hg.toLowerCase(),B_=hg[0].toUpperCase()+hg.slice(1);Qs(L_,"on"+B_)}Qs(lA,"onAnimationEnd");Qs(uA,"onAnimationIteration");Qs(dA,"onAnimationStart");Qs("dblclick","onDoubleClick");Qs("focusin","onFocus");Qs("focusout","onBlur");Qs(hA,"onTransitionEnd");$c("onMouseEnter",["mouseout","mouseover"]);$c("onMouseLeave",["mouseout","mouseover"]);$c("onPointerEnter",["pointerout","pointerover"]);$c("onPointerLeave",["pointerout","pointerover"]);Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ql="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),F_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ql));function CI(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LN(r,e,void 0,t),t.currentTarget=null}function pA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==o&&i.isPropagationStopped())break e;CI(i,a,l),o=c}else for(s=0;s<r.length;s++){if(a=r[s],c=a.instance,l=a.currentTarget,a=a.listener,c!==o&&i.isPropagationStopped())break e;CI(i,a,l),o=c}}}if(nf)throw t=Em,nf=!1,Em=null,t}function mt(t,e){var n=e[Lm];n===void 0&&(n=e[Lm]=new Set);var r=t+"__bubble";n.has(r)||(gA(e,t,2,!1),n.add(r))}function fg(t,e,n){var r=0;e&&(r|=4),gA(n,t,r,e)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Lu(t){if(!t[Kd]){t[Kd]=!0,S1.forEach(function(n){n!=="selectionchange"&&(F_.has(n)||fg(n,!1,t),fg(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kd]||(e[Kd]=!0,fg("selectionchange",!1,e))}}function gA(t,e,n,r){switch(Q1(e)){case 1:var i=QN;break;case 4:i=qN;break;default:i=U0}n=i.bind(null,e,n,t),i=void 0,!km||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function pg(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;s=s.return}for(;a!==null;){if(s=va(a),s===null)return;if(c=s.tag,c===5||c===6){r=o=s;continue e}a=a.parentNode}}r=r.return}F1(function(){var l=o,u=D0(n),d=[];e:{var h=fA.get(t);if(h!==void 0){var f=G0,p=t;switch(t){case"keypress":if(Ih(n)===0)break e;case"keydown":case"keyup":f=p_;break;case"focusin":p="focus",f=ag;break;case"focusout":p="blur",f=ag;break;case"beforeblur":case"afterblur":f=ag;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=aI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=n_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=v_;break;case lA:case uA:case dA:f=o_;break;case hA:f=C_;break;case"scroll":f=e_;break;case"wheel":f=b_;break;case"copy":case"cut":case"paste":f=a_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=lI}var g=(e&4)!==0,C=!g&&t==="scroll",m=g?h!==null?h+"Capture":null:h;g=[];for(var v=l,b;v!==null;){b=v;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,m!==null&&(E=Ru(v,m),E!=null&&g.push(Bu(v,E,b)))),C)break;v=v.return}0<g.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==wm&&(p=n.relatedTarget||n.fromElement)&&(va(p)||p[Ko]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=l,p=p?va(p):null,p!==null&&(C=$a(p),p!==C||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=l),f!==p)){if(g=aI,E="onMouseLeave",m="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(g=lI,E="onPointerLeave",m="onPointerEnter",v="pointer"),C=f==null?h:vc(f),b=p==null?h:vc(p),h=new g(E,v+"leave",f,n,u),h.target=C,h.relatedTarget=b,E=null,va(u)===l&&(g=new g(m,v+"enter",p,n,u),g.target=b,g.relatedTarget=C,E=g),C=E,f&&p)t:{for(g=f,m=p,v=0,b=g;b;b=ic(b))v++;for(b=0,E=m;E;E=ic(E))b++;for(;0<v-b;)g=ic(g),v--;for(;0<b-v;)m=ic(m),b--;for(;v--;){if(g===m||m!==null&&g===m.alternate)break t;g=ic(g),m=ic(m)}g=null}else g=null;f!==null&&II(d,h,f,g,!1),p!==null&&C!==null&&II(d,C,p,g,!0)}}e:{if(h=l?vc(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=x_;else if(hI(h))if(iA)w=__;else{w=R_;var A=P_}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=N_);if(w&&(w=w(t,l))){rA(d,w,n,u);break e}A&&A(t,h,l),t==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&ym(h,"number",h.value)}switch(A=l?vc(l):window,t){case"focusin":(hI(A)||A.contentEditable==="true")&&(gc=A,Rm=l,gu=null);break;case"focusout":gu=Rm=gc=null;break;case"mousedown":Nm=!0;break;case"contextmenu":case"mouseup":case"dragend":Nm=!1,vI(d,n,u);break;case"selectionchange":if(D_)break;case"keydown":case"keyup":vI(d,n,u)}var x;if(j0)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else pc?tA(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(eA&&n.locale!=="ko"&&(pc||T!=="onCompositionStart"?T==="onCompositionEnd"&&pc&&(x=q1()):(Es=u,V0="value"in Es?Es.value:Es.textContent,pc=!0)),A=cf(l,T),0<A.length&&(T=new cI(T,t,null,n,u),d.push({event:T,listeners:A}),x?T.data=x:(x=nA(n),x!==null&&(T.data=x)))),(x=w_?A_(t,n):k_(t,n))&&(l=cf(l,"onBeforeInput"),0<l.length&&(u=new cI("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:l}),u.data=x))}pA(d,e)})}function Bu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function cf(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=Ru(t,n),o!=null&&r.unshift(Bu(t,o,i)),o=Ru(t,e),o!=null&&r.push(Bu(t,o,i))),t=t.return}return r}function ic(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function II(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(c!==null&&c===r)break;a.tag===5&&l!==null&&(a=l,i?(c=Ru(n,o),c!=null&&s.unshift(Bu(n,c,a))):i||(c=Ru(n,o),c!=null&&s.push(Bu(n,c,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var U_=/\r\n?/g,V_=/\u0000|\uFFFD/g;function bI(t){return(typeof t=="string"?t:""+t).replace(U_,`
`).replace(V_,"")}function Jd(t,e,n){if(e=bI(e),bI(t)!==e&&n)throw Error(se(425))}function lf(){}var _m=null,Om=null;function Mm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dm=typeof setTimeout=="function"?setTimeout:void 0,G_=typeof clearTimeout=="function"?clearTimeout:void 0,SI=typeof Promise=="function"?Promise:void 0,W_=typeof queueMicrotask=="function"?queueMicrotask:typeof SI<"u"?function(t){return SI.resolve(null).then(t).catch(j_)}:Dm;function j_(t){setTimeout(function(){throw t})}function gg(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ou(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ou(e)}function Us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wI(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var pl=Math.random().toString(36).slice(2),_i="__reactFiber$"+pl,Fu="__reactProps$"+pl,Ko="__reactContainer$"+pl,Lm="__reactEvents$"+pl,Z_="__reactListeners$"+pl,z_="__reactHandles$"+pl;function va(t){var e=t[_i];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ko]||n[_i]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wI(t);t!==null;){if(n=t[_i])return n;t=wI(t)}return e}t=n,n=t.parentNode}return null}function vd(t){return t=t[_i]||t[Ko],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function vc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function hp(t){return t[Fu]||null}var Bm=[],yc=-1;function qs(t){return{current:t}}function bt(t){0>yc||(t.current=Bm[yc],Bm[yc]=null,yc--)}function ft(t,e){yc++,Bm[yc]=t.current,t.current=e}var Xs={},Pn=qs(Xs),rr=qs(!1),Oa=Xs;function Kc(t,e){var n=t.type.contextTypes;if(!n)return Xs;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ir(t){return t=t.childContextTypes,t!=null}function uf(){bt(rr),bt(Pn)}function AI(t,e,n){if(Pn.current!==Xs)throw Error(se(168));ft(Pn,e),ft(rr,n)}function mA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(se(108,PN(t)||"Unknown",i));return Pt({},n,r)}function df(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xs,Oa=Pn.current,ft(Pn,t),ft(rr,rr.current),!0}function kI(t,e,n){var r=t.stateNode;if(!r)throw Error(se(169));n?(t=mA(t,e,Oa),r.__reactInternalMemoizedMergedChildContext=t,bt(rr),bt(Pn),ft(Pn,t)):bt(rr),ft(rr,n)}var fo=null,fp=!1,mg=!1;function vA(t){fo===null?fo=[t]:fo.push(t)}function H_(t){fp=!0,vA(t)}function ea(){if(!mg&&fo!==null){mg=!0;var t=0,e=Qe;try{var n=fo;for(Qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}fo=null,fp=!1}catch(i){throw fo!==null&&(fo=fo.slice(t+1)),W1(L0,ea),i}finally{Qe=e,mg=!1}}return null}var Cc=[],Ic=0,hf=null,ff=0,Dr=[],Lr=0,Ma=null,yo=1,Co="";function la(t,e){Cc[Ic++]=ff,Cc[Ic++]=hf,hf=t,ff=e}function yA(t,e,n){Dr[Lr++]=yo,Dr[Lr++]=Co,Dr[Lr++]=Ma,Ma=t;var r=yo;t=Co;var i=32-mi(r)-1;r&=~(1<<i),n+=1;var o=32-mi(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,yo=1<<32-mi(e)+i|n<<i|r,Co=o+t}else yo=1<<o|n<<i|r,Co=t}function z0(t){t.return!==null&&(la(t,1),yA(t,1,0))}function H0(t){for(;t===hf;)hf=Cc[--Ic],Cc[Ic]=null,ff=Cc[--Ic],Cc[Ic]=null;for(;t===Ma;)Ma=Dr[--Lr],Dr[Lr]=null,Co=Dr[--Lr],Dr[Lr]=null,yo=Dr[--Lr],Dr[Lr]=null}var kr=null,wr=null,kt=!1,ci=null;function CA(t,e){var n=Fr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function EI(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,wr=Us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,wr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ma!==null?{id:yo,overflow:Co}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Fr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,kr=t,wr=null,!0):!1;default:return!1}}function Fm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Um(t){if(kt){var e=wr;if(e){var n=e;if(!EI(t,e)){if(Fm(t))throw Error(se(418));e=Us(n.nextSibling);var r=kr;e&&EI(t,e)?CA(r,n):(t.flags=t.flags&-4097|2,kt=!1,kr=t)}}else{if(Fm(t))throw Error(se(418));t.flags=t.flags&-4097|2,kt=!1,kr=t}}}function TI(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function Yd(t){if(t!==kr)return!1;if(!kt)return TI(t),kt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mm(t.type,t.memoizedProps)),e&&(e=wr)){if(Fm(t))throw IA(),Error(se(418));for(;e;)CA(t,e),e=Us(e.nextSibling)}if(TI(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){wr=Us(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}wr=null}}else wr=kr?Us(t.stateNode.nextSibling):null;return!0}function IA(){for(var t=wr;t;)t=Us(t.nextSibling)}function Jc(){wr=kr=null,kt=!1}function X0(t){ci===null?ci=[t]:ci.push(t)}var X_=rs.ReactCurrentBatchConfig;function Bl(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var r=n.stateNode}if(!r)throw Error(se(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function Qd(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xI(t){var e=t._init;return e(t._payload)}function bA(t){function e(m,v){if(t){var b=m.deletions;b===null?(m.deletions=[v],m.flags|=16):b.push(v)}}function n(m,v){if(!t)return null;for(;v!==null;)e(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=js(m,v),m.index=0,m.sibling=null,m}function o(m,v,b){return m.index=b,t?(b=m.alternate,b!==null?(b=b.index,b<v?(m.flags|=2,v):b):(m.flags|=2,v)):(m.flags|=1048576,v)}function s(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,v,b,E){return v===null||v.tag!==6?(v=wg(b,m.mode,E),v.return=m,v):(v=i(v,b),v.return=m,v)}function c(m,v,b,E){var w=b.type;return w===fc?u(m,v,b.props.children,E,b.key):v!==null&&(v.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Is&&xI(w)===v.type)?(E=i(v,b.props),E.ref=Bl(m,v,b),E.return=m,E):(E=Th(b.type,b.key,b.props,null,m.mode,E),E.ref=Bl(m,v,b),E.return=m,E)}function l(m,v,b,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=Ag(b,m.mode,E),v.return=m,v):(v=i(v,b.children||[]),v.return=m,v)}function u(m,v,b,E,w){return v===null||v.tag!==7?(v=Ta(b,m.mode,E,w),v.return=m,v):(v=i(v,b),v.return=m,v)}function d(m,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=wg(""+v,m.mode,b),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Gd:return b=Th(v.type,v.key,v.props,null,m.mode,b),b.ref=Bl(m,null,v),b.return=m,b;case hc:return v=Ag(v,m.mode,b),v.return=m,v;case Is:var E=v._init;return d(m,E(v._payload),b)}if(Yl(v)||_l(v))return v=Ta(v,m.mode,b,null),v.return=m,v;Qd(m,v)}return null}function h(m,v,b,E){var w=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(m,v,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Gd:return b.key===w?c(m,v,b,E):null;case hc:return b.key===w?l(m,v,b,E):null;case Is:return w=b._init,h(m,v,w(b._payload),E)}if(Yl(b)||_l(b))return w!==null?null:u(m,v,b,E,null);Qd(m,b)}return null}function f(m,v,b,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(b)||null,a(v,m,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Gd:return m=m.get(E.key===null?b:E.key)||null,c(v,m,E,w);case hc:return m=m.get(E.key===null?b:E.key)||null,l(v,m,E,w);case Is:var A=E._init;return f(m,v,b,A(E._payload),w)}if(Yl(E)||_l(E))return m=m.get(b)||null,u(v,m,E,w,null);Qd(v,E)}return null}function p(m,v,b,E){for(var w=null,A=null,x=v,T=v=0,_=null;x!==null&&T<b.length;T++){x.index>T?(_=x,x=null):_=x.sibling;var O=h(m,x,b[T],E);if(O===null){x===null&&(x=_);break}t&&x&&O.alternate===null&&e(m,x),v=o(O,v,T),A===null?w=O:A.sibling=O,A=O,x=_}if(T===b.length)return n(m,x),kt&&la(m,T),w;if(x===null){for(;T<b.length;T++)x=d(m,b[T],E),x!==null&&(v=o(x,v,T),A===null?w=x:A.sibling=x,A=x);return kt&&la(m,T),w}for(x=r(m,x);T<b.length;T++)_=f(x,m,T,b[T],E),_!==null&&(t&&_.alternate!==null&&x.delete(_.key===null?T:_.key),v=o(_,v,T),A===null?w=_:A.sibling=_,A=_);return t&&x.forEach(function(D){return e(m,D)}),kt&&la(m,T),w}function g(m,v,b,E){var w=_l(b);if(typeof w!="function")throw Error(se(150));if(b=w.call(b),b==null)throw Error(se(151));for(var A=w=null,x=v,T=v=0,_=null,O=b.next();x!==null&&!O.done;T++,O=b.next()){x.index>T?(_=x,x=null):_=x.sibling;var D=h(m,x,O.value,E);if(D===null){x===null&&(x=_);break}t&&x&&D.alternate===null&&e(m,x),v=o(D,v,T),A===null?w=D:A.sibling=D,A=D,x=_}if(O.done)return n(m,x),kt&&la(m,T),w;if(x===null){for(;!O.done;T++,O=b.next())O=d(m,O.value,E),O!==null&&(v=o(O,v,T),A===null?w=O:A.sibling=O,A=O);return kt&&la(m,T),w}for(x=r(m,x);!O.done;T++,O=b.next())O=f(x,m,T,O.value,E),O!==null&&(t&&O.alternate!==null&&x.delete(O.key===null?T:O.key),v=o(O,v,T),A===null?w=O:A.sibling=O,A=O);return t&&x.forEach(function(U){return e(m,U)}),kt&&la(m,T),w}function C(m,v,b,E){if(typeof b=="object"&&b!==null&&b.type===fc&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Gd:e:{for(var w=b.key,A=v;A!==null;){if(A.key===w){if(w=b.type,w===fc){if(A.tag===7){n(m,A.sibling),v=i(A,b.props.children),v.return=m,m=v;break e}}else if(A.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Is&&xI(w)===A.type){n(m,A.sibling),v=i(A,b.props),v.ref=Bl(m,A,b),v.return=m,m=v;break e}n(m,A);break}else e(m,A);A=A.sibling}b.type===fc?(v=Ta(b.props.children,m.mode,E,b.key),v.return=m,m=v):(E=Th(b.type,b.key,b.props,null,m.mode,E),E.ref=Bl(m,v,b),E.return=m,m=E)}return s(m);case hc:e:{for(A=b.key;v!==null;){if(v.key===A)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(m,v.sibling),v=i(v,b.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else e(m,v);v=v.sibling}v=Ag(b,m.mode,E),v.return=m,m=v}return s(m);case Is:return A=b._init,C(m,v,A(b._payload),E)}if(Yl(b))return p(m,v,b,E);if(_l(b))return g(m,v,b,E);Qd(m,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,b),v.return=m,m=v):(n(m,v),v=wg(b,m.mode,E),v.return=m,m=v),s(m)):n(m,v)}return C}var Yc=bA(!0),SA=bA(!1),pf=qs(null),gf=null,bc=null,$0=null;function K0(){$0=bc=gf=null}function J0(t){var e=pf.current;bt(pf),t._currentValue=e}function Vm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function _c(t,e){gf=t,$0=bc=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tr=!0),t.firstContext=null)}function Wr(t){var e=t._currentValue;if($0!==t)if(t={context:t,memoizedValue:e,next:null},bc===null){if(gf===null)throw Error(se(308));bc=t,gf.dependencies={lanes:0,firstContext:t}}else bc=bc.next=t;return e}var ya=null;function Y0(t){ya===null?ya=[t]:ya.push(t)}function wA(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Y0(e)):(n.next=i.next,i.next=n),e.interleaved=n,Jo(t,r)}function Jo(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var bs=!1;function Q0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function AA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Vs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ze&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Jo(t,n)}return i=r.interleaved,i===null?(e.next=e,Y0(r)):(e.next=i.next,i.next=e),r.interleaved=e,Jo(t,n)}function bh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,B0(t,n)}}function PI(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function mf(t,e,n,r){var i=t.updateQueue;bs=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var c=a,l=c.next;c.next=null,s===null?o=l:s.next=l,s=c;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(o!==null){var d=i.baseState;s=0,u=l=c=null,a=o;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(h=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Pt({},d,h);break e;case 2:bs=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(l=u=f,c=d):u=u.next=f,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(c=d),i.baseState=c,i.firstBaseUpdate=l,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);La|=s,t.lanes=s,t.memoizedState=d}}function RI(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(se(191,i));i.call(r)}}}var yd={},Qi=qs(yd),Uu=qs(yd),Vu=qs(yd);function Ca(t){if(t===yd)throw Error(se(174));return t}function q0(t,e){switch(ft(Vu,e),ft(Uu,t),ft(Qi,yd),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Im(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Im(e,t)}bt(Qi),ft(Qi,e)}function Qc(){bt(Qi),bt(Uu),bt(Vu)}function kA(t){Ca(Vu.current);var e=Ca(Qi.current),n=Im(e,t.type);e!==n&&(ft(Uu,t),ft(Qi,n))}function ey(t){Uu.current===t&&(bt(Qi),bt(Uu))}var Tt=qs(0);function vf(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vg=[];function ty(){for(var t=0;t<vg.length;t++)vg[t]._workInProgressVersionPrimary=null;vg.length=0}var Sh=rs.ReactCurrentDispatcher,yg=rs.ReactCurrentBatchConfig,Da=0,xt=null,$t=null,tn=null,yf=!1,mu=!1,Gu=0,$_=0;function Sn(){throw Error(se(321))}function ny(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ci(t[n],e[n]))return!1;return!0}function ry(t,e,n,r,i,o){if(Da=o,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Sh.current=t===null||t.memoizedState===null?Q_:q_,t=n(r,i),mu){o=0;do{if(mu=!1,Gu=0,25<=o)throw Error(se(301));o+=1,tn=$t=null,e.updateQueue=null,Sh.current=eO,t=n(r,i)}while(mu)}if(Sh.current=Cf,e=$t!==null&&$t.next!==null,Da=0,tn=$t=xt=null,yf=!1,e)throw Error(se(300));return t}function iy(){var t=Gu!==0;return Gu=0,t}function Ri(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?xt.memoizedState=tn=t:tn=tn.next=t,tn}function jr(){if($t===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=$t.next;var e=tn===null?xt.memoizedState:tn.next;if(e!==null)tn=e,$t=t;else{if(t===null)throw Error(se(310));$t=t,t={memoizedState:$t.memoizedState,baseState:$t.baseState,baseQueue:$t.baseQueue,queue:$t.queue,next:null},tn===null?xt.memoizedState=tn=t:tn=tn.next=t}return tn}function Wu(t,e){return typeof e=="function"?e(t):e}function Cg(t){var e=jr(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=$t,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,c=null,l=o;do{var u=l.lane;if((Da&u)===u)c!==null&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:u,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};c===null?(a=c=d,s=r):c=c.next=d,xt.lanes|=u,La|=u}l=l.next}while(l!==null&&l!==o);c===null?s=r:c.next=a,Ci(r,e.memoizedState)||(tr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,xt.lanes|=o,La|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ig(t){var e=jr(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Ci(o,e.memoizedState)||(tr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function EA(){}function TA(t,e){var n=xt,r=jr(),i=e(),o=!Ci(r.memoizedState,i);if(o&&(r.memoizedState=i,tr=!0),r=r.queue,oy(RA.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,ju(9,PA.bind(null,n,r,i,e),void 0,null),rn===null)throw Error(se(349));Da&30||xA(n,e,i)}return i}function xA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function PA(t,e,n,r){e.value=n,e.getSnapshot=r,NA(e)&&_A(t)}function RA(t,e,n){return n(function(){NA(e)&&_A(t)})}function NA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ci(t,n)}catch{return!0}}function _A(t){var e=Jo(t,1);e!==null&&vi(e,t,1,-1)}function NI(t){var e=Ri();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Wu,lastRenderedState:t},e.queue=t,t=t.dispatch=Y_.bind(null,xt,t),[e.memoizedState,t]}function ju(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function OA(){return jr().memoizedState}function wh(t,e,n,r){var i=Ri();xt.flags|=t,i.memoizedState=ju(1|e,n,void 0,r===void 0?null:r)}function pp(t,e,n,r){var i=jr();r=r===void 0?null:r;var o=void 0;if($t!==null){var s=$t.memoizedState;if(o=s.destroy,r!==null&&ny(r,s.deps)){i.memoizedState=ju(e,n,o,r);return}}xt.flags|=t,i.memoizedState=ju(1|e,n,o,r)}function _I(t,e){return wh(8390656,8,t,e)}function oy(t,e){return pp(2048,8,t,e)}function MA(t,e){return pp(4,2,t,e)}function DA(t,e){return pp(4,4,t,e)}function LA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BA(t,e,n){return n=n!=null?n.concat([t]):null,pp(4,4,LA.bind(null,e,t),n)}function sy(){}function FA(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ny(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function UA(t,e){var n=jr();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ny(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function VA(t,e,n){return Da&21?(Ci(n,e)||(n=z1(),xt.lanes|=n,La|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tr=!0),t.memoizedState=n)}function K_(t,e){var n=Qe;Qe=n!==0&&4>n?n:4,t(!0);var r=yg.transition;yg.transition={};try{t(!1),e()}finally{Qe=n,yg.transition=r}}function GA(){return jr().memoizedState}function J_(t,e,n){var r=Ws(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},WA(t))jA(e,n);else if(n=wA(t,e,n,r),n!==null){var i=Wn();vi(n,t,r,i),ZA(n,e,r)}}function Y_(t,e,n){var r=Ws(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(WA(t))jA(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,Ci(a,s)){var c=e.interleaved;c===null?(i.next=i,Y0(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}n=wA(t,e,i,r),n!==null&&(i=Wn(),vi(n,t,r,i),ZA(n,e,r))}}function WA(t){var e=t.alternate;return t===xt||e!==null&&e===xt}function jA(t,e){mu=yf=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ZA(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,B0(t,n)}}var Cf={readContext:Wr,useCallback:Sn,useContext:Sn,useEffect:Sn,useImperativeHandle:Sn,useInsertionEffect:Sn,useLayoutEffect:Sn,useMemo:Sn,useReducer:Sn,useRef:Sn,useState:Sn,useDebugValue:Sn,useDeferredValue:Sn,useTransition:Sn,useMutableSource:Sn,useSyncExternalStore:Sn,useId:Sn,unstable_isNewReconciler:!1},Q_={readContext:Wr,useCallback:function(t,e){return Ri().memoizedState=[t,e===void 0?null:e],t},useContext:Wr,useEffect:_I,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wh(4194308,4,LA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wh(4194308,4,t,e)},useInsertionEffect:function(t,e){return wh(4,2,t,e)},useMemo:function(t,e){var n=Ri();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ri();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=J_.bind(null,xt,t),[r.memoizedState,t]},useRef:function(t){var e=Ri();return t={current:t},e.memoizedState=t},useState:NI,useDebugValue:sy,useDeferredValue:function(t){return Ri().memoizedState=t},useTransition:function(){var t=NI(!1),e=t[0];return t=K_.bind(null,t[1]),Ri().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xt,i=Ri();if(kt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),rn===null)throw Error(se(349));Da&30||xA(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,_I(RA.bind(null,r,o,t),[t]),r.flags|=2048,ju(9,PA.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Ri(),e=rn.identifierPrefix;if(kt){var n=Co,r=yo;n=(r&~(1<<32-mi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Gu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},q_={readContext:Wr,useCallback:FA,useContext:Wr,useEffect:oy,useImperativeHandle:BA,useInsertionEffect:MA,useLayoutEffect:DA,useMemo:UA,useReducer:Cg,useRef:OA,useState:function(){return Cg(Wu)},useDebugValue:sy,useDeferredValue:function(t){var e=jr();return VA(e,$t.memoizedState,t)},useTransition:function(){var t=Cg(Wu)[0],e=jr().memoizedState;return[t,e]},useMutableSource:EA,useSyncExternalStore:TA,useId:GA,unstable_isNewReconciler:!1},eO={readContext:Wr,useCallback:FA,useContext:Wr,useEffect:oy,useImperativeHandle:BA,useInsertionEffect:MA,useLayoutEffect:DA,useMemo:UA,useReducer:Ig,useRef:OA,useState:function(){return Ig(Wu)},useDebugValue:sy,useDeferredValue:function(t){var e=jr();return $t===null?e.memoizedState=t:VA(e,$t.memoizedState,t)},useTransition:function(){var t=Ig(Wu)[0],e=jr().memoizedState;return[t,e]},useMutableSource:EA,useSyncExternalStore:TA,useId:GA,unstable_isNewReconciler:!1};function Jr(t,e){if(t&&t.defaultProps){e=Pt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Pt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var gp={isMounted:function(t){return(t=t._reactInternals)?$a(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Wn(),i=Ws(t),o=Zo(r,i);o.payload=e,n!=null&&(o.callback=n),e=Vs(t,o,i),e!==null&&(vi(e,t,i,r),bh(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Wn(),i=Ws(t),o=Zo(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Vs(t,o,i),e!==null&&(vi(e,t,i,r),bh(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Wn(),r=Ws(t),i=Zo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Vs(t,i,r),e!==null&&(vi(e,t,r,n),bh(e,t,r))}};function OI(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Du(n,r)||!Du(i,o):!0}function zA(t,e,n){var r=!1,i=Xs,o=e.contextType;return typeof o=="object"&&o!==null?o=Wr(o):(i=ir(e)?Oa:Pn.current,r=e.contextTypes,o=(r=r!=null)?Kc(t,i):Xs),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=gp,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function MI(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&gp.enqueueReplaceState(e,e.state,null)}function Wm(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Q0(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Wr(o):(o=ir(e)?Oa:Pn.current,i.context=Kc(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Gm(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&gp.enqueueReplaceState(i,i.state,null),mf(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function qc(t,e){try{var n="",r=e;do n+=xN(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function bg(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jm(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tO=typeof WeakMap=="function"?WeakMap:Map;function HA(t,e,n){n=Zo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bf||(bf=!0,qm=r),jm(t,e)},n}function XA(t,e,n){n=Zo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){jm(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){jm(t,e),typeof r!="function"&&(Gs===null?Gs=new Set([this]):Gs.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function DI(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tO;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=gO.bind(null,t,e,n),e.then(t,t))}function LI(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function BI(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zo(-1,1),e.tag=2,Vs(n,e,1))),n.lanes|=1),t)}var nO=rs.ReactCurrentOwner,tr=!1;function Dn(t,e,n,r){e.child=t===null?SA(e,null,n,r):Yc(e,t.child,n,r)}function FI(t,e,n,r,i){n=n.render;var o=e.ref;return _c(e,i),r=ry(t,e,n,r,o,i),n=iy(),t!==null&&!tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yo(t,e,i)):(kt&&n&&z0(e),e.flags|=1,Dn(t,e,r,i),e.child)}function UI(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!py(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,$A(t,e,o,r,i)):(t=Th(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Du,n(s,r)&&t.ref===e.ref)return Yo(t,e,i)}return e.flags|=1,t=js(o,r),t.ref=e.ref,t.return=e,e.child=t}function $A(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Du(o,r)&&t.ref===e.ref)if(tr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(tr=!0);else return e.lanes=t.lanes,Yo(t,e,i)}return Zm(t,e,n,r,i)}function KA(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(wc,mr),mr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(wc,mr),mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,ft(wc,mr),mr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,ft(wc,mr),mr|=r;return Dn(t,e,i,n),e.child}function JA(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Zm(t,e,n,r,i){var o=ir(n)?Oa:Pn.current;return o=Kc(e,o),_c(e,i),n=ry(t,e,n,r,o,i),r=iy(),t!==null&&!tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Yo(t,e,i)):(kt&&r&&z0(e),e.flags|=1,Dn(t,e,n,i),e.child)}function VI(t,e,n,r,i){if(ir(n)){var o=!0;df(e)}else o=!1;if(_c(e,i),e.stateNode===null)Ah(t,e),zA(e,n,r),Wm(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var c=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=Wr(l):(l=ir(n)?Oa:Pn.current,l=Kc(e,l));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||c!==l)&&MI(e,s,r,l),bs=!1;var h=e.memoizedState;s.state=h,mf(e,r,s,i),c=e.memoizedState,a!==r||h!==c||rr.current||bs?(typeof u=="function"&&(Gm(e,n,u,r),c=e.memoizedState),(a=bs||OI(e,n,a,r,h,c,l))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),s.props=r,s.state=c,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,AA(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:Jr(e.type,a),s.props=l,d=e.pendingProps,h=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Wr(c):(c=ir(n)?Oa:Pn.current,c=Kc(e,c));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==c)&&MI(e,s,r,c),bs=!1,h=e.memoizedState,s.state=h,mf(e,r,s,i);var p=e.memoizedState;a!==d||h!==p||rr.current||bs?(typeof f=="function"&&(Gm(e,n,f,r),p=e.memoizedState),(l=bs||OI(e,n,l,r,h,p,c)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=c,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return zm(t,e,n,r,o,i)}function zm(t,e,n,r,i,o){JA(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&kI(e,n,!1),Yo(t,e,o);r=e.stateNode,nO.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Yc(e,t.child,null,o),e.child=Yc(e,null,a,o)):Dn(t,e,a,o),e.memoizedState=r.state,i&&kI(e,n,!0),e.child}function YA(t){var e=t.stateNode;e.pendingContext?AI(t,e.pendingContext,e.pendingContext!==e.context):e.context&&AI(t,e.context,!1),q0(t,e.containerInfo)}function GI(t,e,n,r,i){return Jc(),X0(i),e.flags|=256,Dn(t,e,n,r),e.child}var Hm={dehydrated:null,treeContext:null,retryLane:0};function Xm(t){return{baseLanes:t,cachePool:null,transitions:null}}function QA(t,e,n){var r=e.pendingProps,i=Tt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ft(Tt,i&1),t===null)return Um(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=yp(s,r,0,null),t=Ta(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Xm(n),e.memoizedState=Hm,t):ay(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return rO(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var c={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=js(i,c),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=js(a,o):(o=Ta(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Xm(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=Hm,r}return o=t.child,t=o.sibling,r=js(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function ay(t,e){return e=yp({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function qd(t,e,n,r){return r!==null&&X0(r),Yc(e,t.child,null,n),t=ay(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rO(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=bg(Error(se(422))),qd(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=yp({mode:"visible",children:r.children},i,0,null),o=Ta(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Yc(e,t.child,null,s),e.child.memoizedState=Xm(s),e.memoizedState=Hm,o);if(!(e.mode&1))return qd(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(se(419)),r=bg(o,r,void 0),qd(t,e,s,r)}if(a=(s&t.childLanes)!==0,tr||a){if(r=rn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Jo(t,i),vi(r,t,i,-1))}return fy(),r=bg(Error(se(421))),qd(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=mO.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,wr=Us(i.nextSibling),kr=e,kt=!0,ci=null,t!==null&&(Dr[Lr++]=yo,Dr[Lr++]=Co,Dr[Lr++]=Ma,yo=t.id,Co=t.overflow,Ma=e),e=ay(e,r.children),e.flags|=4096,e)}function WI(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vm(t.return,e,n)}function Sg(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function qA(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Dn(t,e,r.children,n),r=Tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&WI(t,n,e);else if(t.tag===19)WI(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ft(Tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&vf(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Sg(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&vf(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Sg(e,!0,n,null,o);break;case"together":Sg(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ah(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yo(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),La|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=js(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=js(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function iO(t,e,n){switch(e.tag){case 3:YA(e),Jc();break;case 5:kA(e);break;case 1:ir(e.type)&&df(e);break;case 4:q0(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ft(pf,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ft(Tt,Tt.current&1),e.flags|=128,null):n&e.child.childLanes?QA(t,e,n):(ft(Tt,Tt.current&1),t=Yo(t,e,n),t!==null?t.sibling:null);ft(Tt,Tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return qA(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ft(Tt,Tt.current),r)break;return null;case 22:case 23:return e.lanes=0,KA(t,e,n)}return Yo(t,e,n)}var ek,$m,tk,nk;ek=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};$m=function(){};tk=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Ca(Qi.current);var o=null;switch(n){case"input":i=mm(t,i),r=mm(t,r),o=[];break;case"select":i=Pt({},i,{value:void 0}),r=Pt({},r,{value:void 0}),o=[];break;case"textarea":i=Cm(t,i),r=Cm(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=lf)}bm(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xu.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&c!==a&&(c!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&a[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(l,n)),n=c;else l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,a=a?a.__html:void 0,c!=null&&a!==c&&(o=o||[]).push(l,c)):l==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(l,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(xu.hasOwnProperty(l)?(c!=null&&l==="onScroll"&&mt("scroll",t),o||a===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};nk=function(t,e,n,r){n!==r&&(e.flags|=4)};function Fl(t,e){if(!kt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function wn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function oO(t,e,n){var r=e.pendingProps;switch(H0(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wn(e),null;case 1:return ir(e.type)&&uf(),wn(e),null;case 3:return r=e.stateNode,Qc(),bt(rr),bt(Pn),ty(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Yd(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ci!==null&&(nv(ci),ci=null))),$m(t,e),wn(e),null;case 5:ey(e);var i=Ca(Vu.current);if(n=e.type,t!==null&&e.stateNode!=null)tk(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(se(166));return wn(e),null}if(t=Ca(Qi.current),Yd(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[_i]=e,r[Fu]=o,t=(e.mode&1)!==0,n){case"dialog":mt("cancel",r),mt("close",r);break;case"iframe":case"object":case"embed":mt("load",r);break;case"video":case"audio":for(i=0;i<ql.length;i++)mt(ql[i],r);break;case"source":mt("error",r);break;case"img":case"image":case"link":mt("error",r),mt("load",r);break;case"details":mt("toggle",r);break;case"input":YC(r,o),mt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},mt("invalid",r);break;case"textarea":qC(r,o),mt("invalid",r)}bm(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Jd(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Jd(r.textContent,a,t),i=["children",""+a]):xu.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&mt("scroll",r)}switch(n){case"input":Wd(r),QC(r,o,!0);break;case"textarea":Wd(r),eI(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=lf)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=R1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[_i]=e,t[Fu]=r,ek(t,e,!1,!1),e.stateNode=t;e:{switch(s=Sm(n,r),n){case"dialog":mt("cancel",t),mt("close",t),i=r;break;case"iframe":case"object":case"embed":mt("load",t),i=r;break;case"video":case"audio":for(i=0;i<ql.length;i++)mt(ql[i],t);i=r;break;case"source":mt("error",t),i=r;break;case"img":case"image":case"link":mt("error",t),mt("load",t),i=r;break;case"details":mt("toggle",t),i=r;break;case"input":YC(t,r),i=mm(t,r),mt("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Pt({},r,{value:void 0}),mt("invalid",t);break;case"textarea":qC(t,r),i=Cm(t,r),mt("invalid",t);break;default:i=r}bm(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="style"?O1(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&N1(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Pu(t,c):typeof c=="number"&&Pu(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(xu.hasOwnProperty(o)?c!=null&&o==="onScroll"&&mt("scroll",t):c!=null&&N0(t,o,c,s))}switch(n){case"input":Wd(t),QC(t,r,!1);break;case"textarea":Wd(t),eI(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Hs(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?xc(t,!!r.multiple,o,!1):r.defaultValue!=null&&xc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=lf)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wn(e),null;case 6:if(t&&e.stateNode!=null)nk(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(se(166));if(n=Ca(Vu.current),Ca(Qi.current),Yd(e)){if(r=e.stateNode,n=e.memoizedProps,r[_i]=e,(o=r.nodeValue!==n)&&(t=kr,t!==null))switch(t.tag){case 3:Jd(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jd(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_i]=e,e.stateNode=r}return wn(e),null;case 13:if(bt(Tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(kt&&wr!==null&&e.mode&1&&!(e.flags&128))IA(),Jc(),e.flags|=98560,o=!1;else if(o=Yd(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(se(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(se(317));o[_i]=e}else Jc(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wn(e),o=!1}else ci!==null&&(nv(ci),ci=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Tt.current&1?Kt===0&&(Kt=3):fy())),e.updateQueue!==null&&(e.flags|=4),wn(e),null);case 4:return Qc(),$m(t,e),t===null&&Lu(e.stateNode.containerInfo),wn(e),null;case 10:return J0(e.type._context),wn(e),null;case 17:return ir(e.type)&&uf(),wn(e),null;case 19:if(bt(Tt),o=e.memoizedState,o===null)return wn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Fl(o,!1);else{if(Kt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=vf(t),s!==null){for(e.flags|=128,Fl(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ft(Tt,Tt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Bt()>el&&(e.flags|=128,r=!0,Fl(o,!1),e.lanes=4194304)}else{if(!r)if(t=vf(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Fl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!kt)return wn(e),null}else 2*Bt()-o.renderingStartTime>el&&n!==1073741824&&(e.flags|=128,r=!0,Fl(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Bt(),e.sibling=null,n=Tt.current,ft(Tt,r?n&1|2:n&1),e):(wn(e),null);case 22:case 23:return hy(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?mr&1073741824&&(wn(e),e.subtreeFlags&6&&(e.flags|=8192)):wn(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function sO(t,e){switch(H0(e),e.tag){case 1:return ir(e.type)&&uf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qc(),bt(rr),bt(Pn),ty(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ey(e),null;case 13:if(bt(Tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Jc()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return bt(Tt),null;case 4:return Qc(),null;case 10:return J0(e.type._context),null;case 22:case 23:return hy(),null;case 24:return null;default:return null}}var eh=!1,kn=!1,aO=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Sc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){_t(t,e,r)}else n.current=null}function Km(t,e,n){try{n()}catch(r){_t(t,e,r)}}var jI=!1;function cO(t,e){if(_m=sf,t=aA(),Z0(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,a=-1,c=-1,l=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(c=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===i&&(a=s),h===o&&++u===r&&(c=s),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||c===-1?null:{start:a,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Om={focusedElem:t,selectionRange:n},sf=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,C=p.memoizedState,m=e.stateNode,v=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:Jr(e.type,g),C);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(E){_t(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return p=jI,jI=!1,p}function vu(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Km(e,n,o)}i=i.next}while(i!==r)}}function mp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function rk(t){var e=t.alternate;e!==null&&(t.alternate=null,rk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_i],delete e[Fu],delete e[Lm],delete e[Z_],delete e[z_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ik(t){return t.tag===5||t.tag===3||t.tag===4}function ZI(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ik(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ym(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=lf));else if(r!==4&&(t=t.child,t!==null))for(Ym(t,e,n),t=t.sibling;t!==null;)Ym(t,e,n),t=t.sibling}function Qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Qm(t,e,n),t=t.sibling;t!==null;)Qm(t,e,n),t=t.sibling}var cn=null,oi=!1;function ls(t,e,n){for(n=n.child;n!==null;)ok(t,e,n),n=n.sibling}function ok(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(cp,n)}catch{}switch(n.tag){case 5:kn||Sc(n,e);case 6:var r=cn,i=oi;cn=null,ls(t,e,n),cn=r,oi=i,cn!==null&&(oi?(t=cn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):cn.removeChild(n.stateNode));break;case 18:cn!==null&&(oi?(t=cn,n=n.stateNode,t.nodeType===8?gg(t.parentNode,n):t.nodeType===1&&gg(t,n),Ou(t)):gg(cn,n.stateNode));break;case 4:r=cn,i=oi,cn=n.stateNode.containerInfo,oi=!0,ls(t,e,n),cn=r,oi=i;break;case 0:case 11:case 14:case 15:if(!kn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Km(n,e,s),i=i.next}while(i!==r)}ls(t,e,n);break;case 1:if(!kn&&(Sc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){_t(n,e,a)}ls(t,e,n);break;case 21:ls(t,e,n);break;case 22:n.mode&1?(kn=(r=kn)||n.memoizedState!==null,ls(t,e,n),kn=r):ls(t,e,n);break;default:ls(t,e,n)}}function zI(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aO),e.forEach(function(r){var i=vO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Xr(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:cn=a.stateNode,oi=!1;break e;case 3:cn=a.stateNode.containerInfo,oi=!0;break e;case 4:cn=a.stateNode.containerInfo,oi=!0;break e}a=a.return}if(cn===null)throw Error(se(160));ok(o,s,i),cn=null,oi=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(l){_t(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sk(e,t),e=e.sibling}function sk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Xr(e,t),Ei(t),r&4){try{vu(3,t,t.return),mp(3,t)}catch(g){_t(t,t.return,g)}try{vu(5,t,t.return)}catch(g){_t(t,t.return,g)}}break;case 1:Xr(e,t),Ei(t),r&512&&n!==null&&Sc(n,n.return);break;case 5:if(Xr(e,t),Ei(t),r&512&&n!==null&&Sc(n,n.return),t.flags&32){var i=t.stateNode;try{Pu(i,"")}catch(g){_t(t,t.return,g)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&x1(i,o),Sm(a,s);var l=Sm(a,o);for(s=0;s<c.length;s+=2){var u=c[s],d=c[s+1];u==="style"?O1(i,d):u==="dangerouslySetInnerHTML"?N1(i,d):u==="children"?Pu(i,d):N0(i,u,d,l)}switch(a){case"input":vm(i,o);break;case"textarea":P1(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?xc(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?xc(i,!!o.multiple,o.defaultValue,!0):xc(i,!!o.multiple,o.multiple?[]:"",!1))}i[Fu]=o}catch(g){_t(t,t.return,g)}}break;case 6:if(Xr(e,t),Ei(t),r&4){if(t.stateNode===null)throw Error(se(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(g){_t(t,t.return,g)}}break;case 3:if(Xr(e,t),Ei(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ou(e.containerInfo)}catch(g){_t(t,t.return,g)}break;case 4:Xr(e,t),Ei(t);break;case 13:Xr(e,t),Ei(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(uy=Bt())),r&4&&zI(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(kn=(l=kn)||u,Xr(e,t),kn=l):Xr(e,t),Ei(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!u&&t.mode&1)for(ge=t,u=t.child;u!==null;){for(d=ge=u;ge!==null;){switch(h=ge,f=h.child,h.tag){case 0:case 11:case 14:case 15:vu(4,h,h.return);break;case 1:Sc(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){_t(r,n,g)}}break;case 5:Sc(h,h.return);break;case 22:if(h.memoizedState!==null){XI(d);continue}}f!==null?(f.return=h,ge=f):XI(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,c=d.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,a.style.display=_1("display",s))}catch(g){_t(t,t.return,g)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(g){_t(t,t.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Xr(e,t),Ei(t),r&4&&zI(t);break;case 21:break;default:Xr(e,t),Ei(t)}}function Ei(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ik(n)){var r=n;break e}n=n.return}throw Error(se(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Pu(i,""),r.flags&=-33);var o=ZI(t);Qm(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=ZI(t);Ym(t,a,s);break;default:throw Error(se(161))}}catch(c){_t(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function lO(t,e,n){ge=t,ak(t)}function ak(t,e,n){for(var r=(t.mode&1)!==0;ge!==null;){var i=ge,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||eh;if(!s){var a=i.alternate,c=a!==null&&a.memoizedState!==null||kn;a=eh;var l=kn;if(eh=s,(kn=c)&&!l)for(ge=i;ge!==null;)s=ge,c=s.child,s.tag===22&&s.memoizedState!==null?$I(i):c!==null?(c.return=s,ge=c):$I(i);for(;o!==null;)ge=o,ak(o),o=o.sibling;ge=i,eh=a,kn=l}HI(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ge=o):HI(t)}}function HI(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:kn||mp(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!kn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Jr(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&RI(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}RI(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var u=l.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ou(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}kn||e.flags&512&&Jm(e)}catch(h){_t(e,e.return,h)}}if(e===t){ge=null;break}if(n=e.sibling,n!==null){n.return=e.return,ge=n;break}ge=e.return}}function XI(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ge=n;break}ge=e.return}}function $I(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mp(4,e)}catch(c){_t(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(c){_t(e,i,c)}}var o=e.return;try{Jm(e)}catch(c){_t(e,o,c)}break;case 5:var s=e.return;try{Jm(e)}catch(c){_t(e,s,c)}}}catch(c){_t(e,e.return,c)}if(e===t){ge=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ge=a;break}ge=e.return}}var uO=Math.ceil,If=rs.ReactCurrentDispatcher,cy=rs.ReactCurrentOwner,Gr=rs.ReactCurrentBatchConfig,Ze=0,rn=null,Wt=null,fn=0,mr=0,wc=qs(0),Kt=0,Zu=null,La=0,vp=0,ly=0,yu=null,Qn=null,uy=0,el=1/0,uo=null,bf=!1,qm=null,Gs=null,th=!1,Ts=null,Sf=0,Cu=0,ev=null,kh=-1,Eh=0;function Wn(){return Ze&6?Bt():kh!==-1?kh:kh=Bt()}function Ws(t){return t.mode&1?Ze&2&&fn!==0?fn&-fn:X_.transition!==null?(Eh===0&&(Eh=z1()),Eh):(t=Qe,t!==0||(t=window.event,t=t===void 0?16:Q1(t.type)),t):1}function vi(t,e,n,r){if(50<Cu)throw Cu=0,ev=null,Error(se(185));gd(t,n,r),(!(Ze&2)||t!==rn)&&(t===rn&&(!(Ze&2)&&(vp|=n),Kt===4&&As(t,fn)),or(t,r),n===1&&Ze===0&&!(e.mode&1)&&(el=Bt()+500,fp&&ea()))}function or(t,e){var n=t.callbackNode;XN(t,e);var r=of(t,t===rn?fn:0);if(r===0)n!==null&&rI(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&rI(n),e===1)t.tag===0?H_(KI.bind(null,t)):vA(KI.bind(null,t)),W_(function(){!(Ze&6)&&ea()}),n=null;else{switch(H1(r)){case 1:n=L0;break;case 4:n=j1;break;case 16:n=rf;break;case 536870912:n=Z1;break;default:n=rf}n=gk(n,ck.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ck(t,e){if(kh=-1,Eh=0,Ze&6)throw Error(se(327));var n=t.callbackNode;if(Oc()&&t.callbackNode!==n)return null;var r=of(t,t===rn?fn:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=wf(t,r);else{e=r;var i=Ze;Ze|=2;var o=uk();(rn!==t||fn!==e)&&(uo=null,el=Bt()+500,Ea(t,e));do try{fO();break}catch(a){lk(t,a)}while(!0);K0(),If.current=o,Ze=i,Wt!==null?e=0:(rn=null,fn=0,e=Kt)}if(e!==0){if(e===2&&(i=Tm(t),i!==0&&(r=i,e=tv(t,i))),e===1)throw n=Zu,Ea(t,0),As(t,r),or(t,Bt()),n;if(e===6)As(t,r);else{if(i=t.current.alternate,!(r&30)&&!dO(i)&&(e=wf(t,r),e===2&&(o=Tm(t),o!==0&&(r=o,e=tv(t,o))),e===1))throw n=Zu,Ea(t,0),As(t,r),or(t,Bt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(se(345));case 2:ua(t,Qn,uo);break;case 3:if(As(t,r),(r&130023424)===r&&(e=uy+500-Bt(),10<e)){if(of(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Wn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Dm(ua.bind(null,t,Qn,uo),e);break}ua(t,Qn,uo);break;case 4:if(As(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-mi(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Bt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*uO(r/1960))-r,10<r){t.timeoutHandle=Dm(ua.bind(null,t,Qn,uo),r);break}ua(t,Qn,uo);break;case 5:ua(t,Qn,uo);break;default:throw Error(se(329))}}}return or(t,Bt()),t.callbackNode===n?ck.bind(null,t):null}function tv(t,e){var n=yu;return t.current.memoizedState.isDehydrated&&(Ea(t,e).flags|=256),t=wf(t,e),t!==2&&(e=Qn,Qn=n,e!==null&&nv(e)),t}function nv(t){Qn===null?Qn=t:Qn.push.apply(Qn,t)}function dO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Ci(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~ly,e&=~vp,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mi(e),r=1<<n;t[n]=-1,e&=~r}}function KI(t){if(Ze&6)throw Error(se(327));Oc();var e=of(t,0);if(!(e&1))return or(t,Bt()),null;var n=wf(t,e);if(t.tag!==0&&n===2){var r=Tm(t);r!==0&&(e=r,n=tv(t,r))}if(n===1)throw n=Zu,Ea(t,0),As(t,e),or(t,Bt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ua(t,Qn,uo),or(t,Bt()),null}function dy(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(el=Bt()+500,fp&&ea())}}function Ba(t){Ts!==null&&Ts.tag===0&&!(Ze&6)&&Oc();var e=Ze;Ze|=1;var n=Gr.transition,r=Qe;try{if(Gr.transition=null,Qe=1,t)return t()}finally{Qe=r,Gr.transition=n,Ze=e,!(Ze&6)&&ea()}}function hy(){mr=wc.current,bt(wc)}function Ea(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,G_(n)),Wt!==null)for(n=Wt.return;n!==null;){var r=n;switch(H0(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&uf();break;case 3:Qc(),bt(rr),bt(Pn),ty();break;case 5:ey(r);break;case 4:Qc();break;case 13:bt(Tt);break;case 19:bt(Tt);break;case 10:J0(r.type._context);break;case 22:case 23:hy()}n=n.return}if(rn=t,Wt=t=js(t.current,null),fn=mr=e,Kt=0,Zu=null,ly=vp=La=0,Qn=yu=null,ya!==null){for(e=0;e<ya.length;e++)if(n=ya[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}ya=null}return t}function lk(t,e){do{var n=Wt;try{if(K0(),Sh.current=Cf,yf){for(var r=xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}yf=!1}if(Da=0,tn=$t=xt=null,mu=!1,Gu=0,cy.current=null,n===null||n.return===null){Kt=1,Zu=e,Wt=null;break}e:{var o=t,s=n.return,a=n,c=e;if(e=fn,a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var l=c,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=LI(s);if(f!==null){f.flags&=-257,BI(f,s,a,o,e),f.mode&1&&DI(o,l,e),e=f,c=l;var p=e.updateQueue;if(p===null){var g=new Set;g.add(c),e.updateQueue=g}else p.add(c);break e}else{if(!(e&1)){DI(o,l,e),fy();break e}c=Error(se(426))}}else if(kt&&a.mode&1){var C=LI(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),BI(C,s,a,o,e),X0(qc(c,a));break e}}o=c=qc(c,a),Kt!==4&&(Kt=2),yu===null?yu=[o]:yu.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var m=HA(o,c,e);PI(o,m);break e;case 1:a=c;var v=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Gs===null||!Gs.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=XA(o,a,e);PI(o,E);break e}}o=o.return}while(o!==null)}hk(n)}catch(w){e=w,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function uk(){var t=If.current;return If.current=Cf,t===null?Cf:t}function fy(){(Kt===0||Kt===3||Kt===2)&&(Kt=4),rn===null||!(La&268435455)&&!(vp&268435455)||As(rn,fn)}function wf(t,e){var n=Ze;Ze|=2;var r=uk();(rn!==t||fn!==e)&&(uo=null,Ea(t,e));do try{hO();break}catch(i){lk(t,i)}while(!0);if(K0(),Ze=n,If.current=r,Wt!==null)throw Error(se(261));return rn=null,fn=0,Kt}function hO(){for(;Wt!==null;)dk(Wt)}function fO(){for(;Wt!==null&&!FN();)dk(Wt)}function dk(t){var e=pk(t.alternate,t,mr);t.memoizedProps=t.pendingProps,e===null?hk(t):Wt=e,cy.current=null}function hk(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=sO(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Kt=6,Wt=null;return}}else if(n=oO(n,e,mr),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Kt===0&&(Kt=5)}function ua(t,e,n){var r=Qe,i=Gr.transition;try{Gr.transition=null,Qe=1,pO(t,e,n,r)}finally{Gr.transition=i,Qe=r}return null}function pO(t,e,n,r){do Oc();while(Ts!==null);if(Ze&6)throw Error(se(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if($N(t,o),t===rn&&(Wt=rn=null,fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||th||(th=!0,gk(rf,function(){return Oc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Gr.transition,Gr.transition=null;var s=Qe;Qe=1;var a=Ze;Ze|=4,cy.current=null,cO(t,n),sk(n,t),M_(Om),sf=!!_m,Om=_m=null,t.current=n,lO(n),UN(),Ze=a,Qe=s,Gr.transition=o}else t.current=n;if(th&&(th=!1,Ts=t,Sf=i),o=t.pendingLanes,o===0&&(Gs=null),WN(n.stateNode),or(t,Bt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(bf)throw bf=!1,t=qm,qm=null,t;return Sf&1&&t.tag!==0&&Oc(),o=t.pendingLanes,o&1?t===ev?Cu++:(Cu=0,ev=t):Cu=0,ea(),null}function Oc(){if(Ts!==null){var t=H1(Sf),e=Gr.transition,n=Qe;try{if(Gr.transition=null,Qe=16>t?16:t,Ts===null)var r=!1;else{if(t=Ts,Ts=null,Sf=0,Ze&6)throw Error(se(331));var i=Ze;for(Ze|=4,ge=t.current;ge!==null;){var o=ge,s=o.child;if(ge.flags&16){var a=o.deletions;if(a!==null){for(var c=0;c<a.length;c++){var l=a[c];for(ge=l;ge!==null;){var u=ge;switch(u.tag){case 0:case 11:case 15:vu(8,u,o)}var d=u.child;if(d!==null)d.return=u,ge=d;else for(;ge!==null;){u=ge;var h=u.sibling,f=u.return;if(rk(u),u===l){ge=null;break}if(h!==null){h.return=f,ge=h;break}ge=f}}}var p=o.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var C=g.sibling;g.sibling=null,g=C}while(g!==null)}}ge=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ge=s;else e:for(;ge!==null;){if(o=ge,o.flags&2048)switch(o.tag){case 0:case 11:case 15:vu(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,ge=m;break e}ge=o.return}}var v=t.current;for(ge=v;ge!==null;){s=ge;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,ge=b;else e:for(s=v;ge!==null;){if(a=ge,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:mp(9,a)}}catch(w){_t(a,a.return,w)}if(a===s){ge=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,ge=E;break e}ge=a.return}}if(Ze=i,ea(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(cp,t)}catch{}r=!0}return r}finally{Qe=n,Gr.transition=e}}return!1}function JI(t,e,n){e=qc(n,e),e=HA(t,e,1),t=Vs(t,e,1),e=Wn(),t!==null&&(gd(t,1,e),or(t,e))}function _t(t,e,n){if(t.tag===3)JI(t,t,n);else for(;e!==null;){if(e.tag===3){JI(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gs===null||!Gs.has(r))){t=qc(n,t),t=XA(e,t,1),e=Vs(e,t,1),t=Wn(),e!==null&&(gd(e,1,t),or(e,t));break}}e=e.return}}function gO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Wn(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(fn&n)===n&&(Kt===4||Kt===3&&(fn&130023424)===fn&&500>Bt()-uy?Ea(t,0):ly|=n),or(t,e)}function fk(t,e){e===0&&(t.mode&1?(e=zd,zd<<=1,!(zd&130023424)&&(zd=4194304)):e=1);var n=Wn();t=Jo(t,e),t!==null&&(gd(t,e,n),or(t,n))}function mO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),fk(t,n)}function vO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(se(314))}r!==null&&r.delete(e),fk(t,n)}var pk;pk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||rr.current)tr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tr=!1,iO(t,e,n);tr=!!(t.flags&131072)}else tr=!1,kt&&e.flags&1048576&&yA(e,ff,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ah(t,e),t=e.pendingProps;var i=Kc(e,Pn.current);_c(e,n),i=ry(null,e,r,t,i,n);var o=iy();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ir(r)?(o=!0,df(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Q0(e),i.updater=gp,e.stateNode=i,i._reactInternals=e,Wm(e,r,t,n),e=zm(null,e,r,!0,o,n)):(e.tag=0,kt&&o&&z0(e),Dn(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ah(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=CO(r),t=Jr(r,t),i){case 0:e=Zm(null,e,r,t,n);break e;case 1:e=VI(null,e,r,t,n);break e;case 11:e=FI(null,e,r,t,n);break e;case 14:e=UI(null,e,r,Jr(r.type,t),n);break e}throw Error(se(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),Zm(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),VI(t,e,r,i,n);case 3:e:{if(YA(e),t===null)throw Error(se(387));r=e.pendingProps,o=e.memoizedState,i=o.element,AA(t,e),mf(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=qc(Error(se(423)),e),e=GI(t,e,r,n,i);break e}else if(r!==i){i=qc(Error(se(424)),e),e=GI(t,e,r,n,i);break e}else for(wr=Us(e.stateNode.containerInfo.firstChild),kr=e,kt=!0,ci=null,n=SA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jc(),r===i){e=Yo(t,e,n);break e}Dn(t,e,r,n)}e=e.child}return e;case 5:return kA(e),t===null&&Um(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Mm(r,i)?s=null:o!==null&&Mm(r,o)&&(e.flags|=32),JA(t,e),Dn(t,e,s,n),e.child;case 6:return t===null&&Um(e),null;case 13:return QA(t,e,n);case 4:return q0(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yc(e,null,r,n):Dn(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),FI(t,e,r,i,n);case 7:return Dn(t,e,e.pendingProps,n),e.child;case 8:return Dn(t,e,e.pendingProps.children,n),e.child;case 12:return Dn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,ft(pf,r._currentValue),r._currentValue=s,o!==null)if(Ci(o.value,s)){if(o.children===i.children&&!rr.current){e=Yo(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var c=a.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=Zo(-1,n&-n),c.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var u=l.pending;u===null?c.next=c:(c.next=u.next,u.next=c),l.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Vm(o.return,n,e),a.lanes|=n;break}c=c.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(se(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Vm(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Dn(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,_c(e,n),i=Wr(i),r=r(i),e.flags|=1,Dn(t,e,r,n),e.child;case 14:return r=e.type,i=Jr(r,e.pendingProps),i=Jr(r.type,i),UI(t,e,r,i,n);case 15:return $A(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Jr(r,i),Ah(t,e),e.tag=1,ir(r)?(t=!0,df(e)):t=!1,_c(e,n),zA(e,r,i),Wm(e,r,i,n),zm(null,e,r,!0,t,n);case 19:return qA(t,e,n);case 22:return KA(t,e,n)}throw Error(se(156,e.tag))};function gk(t,e){return W1(t,e)}function yO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Fr(t,e,n,r){return new yO(t,e,n,r)}function py(t){return t=t.prototype,!(!t||!t.isReactComponent)}function CO(t){if(typeof t=="function")return py(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O0)return 11;if(t===M0)return 14}return 2}function js(t,e){var n=t.alternate;return n===null?(n=Fr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Th(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")py(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case fc:return Ta(n.children,i,o,e);case _0:s=8,i|=8;break;case hm:return t=Fr(12,n,e,i|2),t.elementType=hm,t.lanes=o,t;case fm:return t=Fr(13,n,e,i),t.elementType=fm,t.lanes=o,t;case pm:return t=Fr(19,n,e,i),t.elementType=pm,t.lanes=o,t;case k1:return yp(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case w1:s=10;break e;case A1:s=9;break e;case O0:s=11;break e;case M0:s=14;break e;case Is:s=16,r=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=Fr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ta(t,e,n,r){return t=Fr(7,t,r,e),t.lanes=n,t}function yp(t,e,n,r){return t=Fr(22,t,r,e),t.elementType=k1,t.lanes=n,t.stateNode={isHidden:!1},t}function wg(t,e,n){return t=Fr(6,t,null,e),t.lanes=n,t}function Ag(t,e,n){return e=Fr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function IO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ig(0),this.expirationTimes=ig(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ig(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function gy(t,e,n,r,i,o,s,a,c){return t=new IO(t,e,n,a,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Fr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Q0(o),t}function bO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mk(t){if(!t)return Xs;t=t._reactInternals;e:{if($a(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ir(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(ir(n))return mA(t,n,e)}return e}function vk(t,e,n,r,i,o,s,a,c){return t=gy(n,r,!0,t,i,o,s,a,c),t.context=mk(null),n=t.current,r=Wn(),i=Ws(n),o=Zo(r,i),o.callback=e??null,Vs(n,o,i),t.current.lanes=i,gd(t,i,r),or(t,r),t}function Cp(t,e,n,r){var i=e.current,o=Wn(),s=Ws(i);return n=mk(n),e.context===null?e.context=n:e.pendingContext=n,e=Zo(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Vs(i,e,s),t!==null&&(vi(t,i,s,o),bh(t,i,s)),s}function Af(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YI(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function my(t,e){YI(t,e),(t=t.alternate)&&YI(t,e)}function SO(){return null}var yk=typeof reportError=="function"?reportError:function(t){console.error(t)};function vy(t){this._internalRoot=t}Ip.prototype.render=vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Cp(t,e,null,null)};Ip.prototype.unmount=vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ba(function(){Cp(null,t,null,null)}),e[Ko]=null}};function Ip(t){this._internalRoot=t}Ip.prototype.unstable_scheduleHydration=function(t){if(t){var e=K1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ws.length&&e!==0&&e<ws[n].priority;n++);ws.splice(n,0,t),n===0&&Y1(t)}};function yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function bp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function QI(){}function wO(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=Af(s);o.call(l)}}var s=vk(e,r,t,0,null,!1,!1,"",QI);return t._reactRootContainer=s,t[Ko]=s.current,Lu(t.nodeType===8?t.parentNode:t),Ba(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=Af(c);a.call(l)}}var c=gy(t,0,!1,null,null,!1,!1,"",QI);return t._reactRootContainer=c,t[Ko]=c.current,Lu(t.nodeType===8?t.parentNode:t),Ba(function(){Cp(e,c,n,r)}),c}function Sp(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var c=Af(s);a.call(c)}}Cp(e,s,t,i)}else s=wO(n,e,t,i,r);return Af(s)}X1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ql(e.pendingLanes);n!==0&&(B0(e,n|1),or(e,Bt()),!(Ze&6)&&(el=Bt()+500,ea()))}break;case 13:Ba(function(){var r=Jo(t,1);if(r!==null){var i=Wn();vi(r,t,1,i)}}),my(t,1)}};F0=function(t){if(t.tag===13){var e=Jo(t,134217728);if(e!==null){var n=Wn();vi(e,t,134217728,n)}my(t,134217728)}};$1=function(t){if(t.tag===13){var e=Ws(t),n=Jo(t,e);if(n!==null){var r=Wn();vi(n,t,e,r)}my(t,e)}};K1=function(){return Qe};J1=function(t,e){var n=Qe;try{return Qe=t,e()}finally{Qe=n}};Am=function(t,e,n){switch(e){case"input":if(vm(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=hp(r);if(!i)throw Error(se(90));T1(r),vm(r,i)}}}break;case"textarea":P1(t,n);break;case"select":e=n.value,e!=null&&xc(t,!!n.multiple,e,!1)}};L1=dy;B1=Ba;var AO={usingClientEntryPoint:!1,Events:[vd,vc,hp,M1,D1,dy]},Ul={findFiberByHostInstance:va,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kO={bundleType:Ul.bundleType,version:Ul.version,rendererPackageName:Ul.rendererPackageName,rendererConfig:Ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=V1(t),t===null?null:t.stateNode},findFiberByHostInstance:Ul.findFiberByHostInstance||SO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nh.isDisabled&&nh.supportsFiber)try{cp=nh.inject(kO),Yi=nh}catch{}}Pr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AO;Pr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(e))throw Error(se(200));return bO(t,e,null,n)};Pr.createRoot=function(t,e){if(!yy(t))throw Error(se(299));var n=!1,r="",i=yk;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=gy(t,1,!1,null,null,n,!1,r,i),t[Ko]=e.current,Lu(t.nodeType===8?t.parentNode:t),new vy(e)};Pr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=V1(e),t=t===null?null:t.stateNode,t};Pr.flushSync=function(t){return Ba(t)};Pr.hydrate=function(t,e,n){if(!bp(e))throw Error(se(200));return Sp(null,t,e,!0,n)};Pr.hydrateRoot=function(t,e,n){if(!yy(t))throw Error(se(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=yk;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=vk(e,null,t,1,n??null,i,!1,o,s),t[Ko]=e.current,Lu(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ip(e)};Pr.render=function(t,e,n){if(!bp(e))throw Error(se(200));return Sp(null,t,e,!1,n)};Pr.unmountComponentAtNode=function(t){if(!bp(t))throw Error(se(40));return t._reactRootContainer?(Ba(function(){Sp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ko]=null})}),!0):!1};Pr.unstable_batchedUpdates=dy;Pr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!bp(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Sp(t,e,n,!1,r)};Pr.version="18.3.1-next-f1338f8080-20240426";function Ck(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ck)}catch(t){console.error(t)}}Ck(),C1.exports=Pr;var Cy=C1.exports;const EO=fd(Cy),TO=a1({__proto__:null,default:EO},[Cy]);var qI=Cy;um.createRoot=qI.createRoot,um.hydrateRoot=qI.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Et(){return Et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Et.apply(this,arguments)}var Gt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Gt||(Gt={}));const eb="popstate";function xO(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:a}=r.location;return zu("",{pathname:o,search:s,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:Cd(i)}return RO(e,n,null,t)}function Ge(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function tl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function PO(){return Math.random().toString(36).substr(2,8)}function tb(t,e){return{usr:t.state,key:t.key,idx:e}}function zu(t,e,n,r){return n===void 0&&(n=null),Et({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ta(e):e,{state:n,key:e&&e.key||r||PO()})}function Cd(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ta(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function RO(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a=Gt.Pop,c=null,l=u();l==null&&(l=0,s.replaceState(Et({},s.state,{idx:l}),""));function u(){return(s.state||{idx:null}).idx}function d(){a=Gt.Pop;let C=u(),m=C==null?null:C-l;l=C,c&&c({action:a,location:g.location,delta:m})}function h(C,m){a=Gt.Push;let v=zu(g.location,C,m);l=u()+1;let b=tb(v,l),E=g.createHref(v);try{s.pushState(b,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(E)}o&&c&&c({action:a,location:g.location,delta:1})}function f(C,m){a=Gt.Replace;let v=zu(g.location,C,m);l=u();let b=tb(v,l),E=g.createHref(v);s.replaceState(b,"",E),o&&c&&c({action:a,location:g.location,delta:0})}function p(C){let m=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof C=="string"?C:Cd(C);return v=v.replace(/ $/,"%20"),Ge(m,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,m)}let g={get action(){return a},get location(){return t(i,s)},listen(C){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(eb,d),c=C,()=>{i.removeEventListener(eb,d),c=null}},createHref(C){return e(i,C)},createURL:p,encodeLocation(C){let m=p(C);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:h,replace:f,go(C){return s.go(C)}};return g}var dt;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dt||(dt={}));const NO=new Set(["lazy","caseSensitive","path","id","index","children"]);function _O(t){return t.index===!0}function Hu(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,String(o)],a=typeof i.id=="string"?i.id:s.join("-");if(Ge(i.index!==!0||!i.children,"Cannot specify children on an index route"),Ge(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),_O(i)){let c=Et({},i,e(i),{id:a});return r[a]=c,c}else{let c=Et({},i,e(i),{id:a,children:void 0});return r[a]=c,i.children&&(c.children=Hu(i.children,e,s,r)),c}})}function da(t,e,n){return n===void 0&&(n="/"),xh(t,e,n,!1)}function xh(t,e,n,r){let i=typeof e=="string"?ta(e):e,o=Id(i.pathname||"/",n);if(o==null)return null;let s=Ik(t);MO(s);let a=null;for(let c=0;a==null&&c<s.length;++c){let l=zO(o);a=jO(s[c],l,r)}return a}function OO(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Ik(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,a)=>{let c={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let l=xa([r,c.relativePath]),u=n.concat(c);o.children&&o.children.length>0&&(Ge(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),Ik(o.children,e,u,l)),!(o.path==null&&!o.index)&&e.push({path:l,score:GO(l,o.index),routesMeta:u})};return t.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let c of bk(o.path))i(o,s,c)}),e}function bk(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=bk(r.join("/")),a=[];return a.push(...s.map(c=>c===""?o:[o,c].join("/"))),i&&a.push(...s),a.map(c=>t.startsWith("/")&&c===""?"/":c)}function MO(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:WO(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DO=/^:[\w-]+$/,LO=3,BO=2,FO=1,UO=10,VO=-2,nb=t=>t==="*";function GO(t,e){let n=t.split("/"),r=n.length;return n.some(nb)&&(r+=VO),e&&(r+=BO),n.filter(i=>!nb(i)).reduce((i,o)=>i+(DO.test(o)?LO:o===""?FO:UO),r)}function WO(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function jO(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,i={},o="/",s=[];for(let a=0;a<r.length;++a){let c=r[a],l=a===r.length-1,u=o==="/"?e:e.slice(o.length)||"/",d=rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),h=c.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=rb({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!d)return null;Object.assign(i,d.params),s.push({params:i,pathname:xa([o,d.pathname]),pathnameBase:JO(xa([o,d.pathnameBase])),route:h}),d.pathnameBase!=="/"&&(o=xa([o,d.pathnameBase]))}return s}function rb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=ZO(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let g=a[d]||"";s=o.slice(0,o.length-g.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?l[h]=void 0:l[h]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:o,pathnameBase:s,pattern:t}}function ZO(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),tl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,c)=>(r.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function zO(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return tl(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Id(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function HO(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?ta(t):t;return{pathname:n?n.startsWith("/")?n:XO(n,e):e,search:YO(r),hash:QO(i)}}function XO(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function kg(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Sk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $O(t,e){let n=Sk(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function KO(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=ta(t):(i=Et({},t),Ge(!i.pathname||!i.pathname.includes("?"),kg("?","pathname","search",i)),Ge(!i.pathname||!i.pathname.includes("#"),kg("#","pathname","hash",i)),Ge(!i.search||!i.search.includes("#"),kg("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=n;else{let d=e.length-1;if(!r&&s.startsWith("..")){let h=s.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let c=HO(i,a),l=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}const xa=t=>t.join("/").replace(/\/\/+/g,"/"),JO=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),YO=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,QO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Iy{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function wp(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const wk=["post","put","patch","delete"],qO=new Set(wk),eM=["get",...wk],tM=new Set(eM),nM=new Set([301,302,303,307,308]),rM=new Set([307,308]),Eg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},iM={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Vl={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},by=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,oM=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),Ak="remix-router-transitions";function sM(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Ge(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let M=t.detectErrorBoundary;i=B=>({hasErrorBoundary:M(B)})}else i=oM;let o={},s=Hu(t.routes,i,void 0,o),a,c=t.basename||"/",l=t.unstable_dataStrategy||dM,u=t.unstable_patchRoutesOnMiss,d=Et({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),h=null,f=new Set,p=null,g=null,C=null,m=t.hydrationData!=null,v=da(s,t.history.location,c),b=null;if(v==null&&!u){let M=Mn(404,{pathname:t.history.location.pathname}),{matches:B,route:G}=fb(s);v=B,b={[G.id]:M}}v&&u&&Yp(v,s,t.history.location.pathname).active&&(v=null);let E;if(!v)E=!1,v=[];else if(v.some(M=>M.route.lazy))E=!1;else if(!v.some(M=>M.route.loader))E=!0;else if(d.v7_partialHydration){let M=t.hydrationData?t.hydrationData.loaderData:null,B=t.hydrationData?t.hydrationData.errors:null,G=Q=>Q.route.loader?typeof Q.route.loader=="function"&&Q.route.loader.hydrate===!0?!1:M&&M[Q.route.id]!==void 0||B&&B[Q.route.id]!==void 0:!0;if(B){let Q=v.findIndex(de=>B[de.route.id]!==void 0);E=v.slice(0,Q+1).every(G)}else E=v.every(G)}else E=t.hydrationData!=null;let w,A={historyAction:t.history.action,location:t.history.location,matches:v,initialized:E,navigation:Eg,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},x=Gt.Pop,T=!1,_,O=!1,D=new Map,U=null,j=!1,Z=!1,Y=[],ee=[],ne=new Map,z=0,$=-1,re=new Map,H=new Set,ie=new Map,Re=new Map,Ne=new Set,Ce=new Map,Te=new Map,it=new Map,pe=!1;function Nn(){if(h=t.history.listen(M=>{let{action:B,location:G,delta:Q}=M;if(pe){pe=!1;return}tl(Te.size===0||Q!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let de=VC({currentLocation:A.location,nextLocation:G,historyAction:B});if(de&&Q!=null){pe=!0,t.history.go(Q*-1),Od(de,{state:"blocked",location:G,proceed(){Od(de,{state:"proceeding",proceed:void 0,reset:void 0,location:G}),t.history.go(Q)},reset(){let be=new Map(A.blockers);be.set(de,Vl),qe({blockers:be})}});return}return fe(B,G)}),n){AM(e,D);let M=()=>kM(e,D);e.addEventListener("pagehide",M),U=()=>e.removeEventListener("pagehide",M)}return A.initialized||fe(Gt.Pop,A.location,{initialHydration:!0}),w}function $n(){h&&h(),U&&U(),f.clear(),_&&_.abort(),A.fetchers.forEach((M,B)=>L(B)),A.blockers.forEach((M,B)=>Ke(B))}function Nr(M){return f.add(M),()=>f.delete(M)}function qe(M,B){B===void 0&&(B={}),A=Et({},A,M);let G=[],Q=[];d.v7_fetcherPersist&&A.fetchers.forEach((de,be)=>{de.state==="idle"&&(Ne.has(be)?Q.push(be):G.push(be))}),[...f].forEach(de=>de(A,{deletedFetchers:Q,unstable_viewTransitionOpts:B.viewTransitionOpts,unstable_flushSync:B.flushSync===!0})),d.v7_fetcherPersist&&(G.forEach(de=>A.fetchers.delete(de)),Q.forEach(de=>L(de)))}function on(M,B,G){var Q,de;let{flushSync:be}=G===void 0?{}:G,Ee=A.actionData!=null&&A.navigation.formMethod!=null&&si(A.navigation.formMethod)&&A.navigation.state==="loading"&&((Q=M.state)==null?void 0:Q._isRedirect)!==!0,ae;B.actionData?Object.keys(B.actionData).length>0?ae=B.actionData:ae=null:Ee?ae=A.actionData:ae=null;let Oe=B.loaderData?db(A.loaderData,B.loaderData,B.matches||[],B.errors):A.loaderData,Se=A.blockers;Se.size>0&&(Se=new Map(Se),Se.forEach((Xe,st)=>Se.set(st,Vl)));let we=T===!0||A.navigation.formMethod!=null&&si(A.navigation.formMethod)&&((de=M.state)==null?void 0:de._isRedirect)!==!0;a&&(s=a,a=void 0),j||x===Gt.Pop||(x===Gt.Push?t.history.push(M,M.state):x===Gt.Replace&&t.history.replace(M,M.state));let et;if(x===Gt.Pop){let Xe=D.get(A.location.pathname);Xe&&Xe.has(M.pathname)?et={currentLocation:A.location,nextLocation:M}:D.has(M.pathname)&&(et={currentLocation:M,nextLocation:A.location})}else if(O){let Xe=D.get(A.location.pathname);Xe?Xe.add(M.pathname):(Xe=new Set([M.pathname]),D.set(A.location.pathname,Xe)),et={currentLocation:A.location,nextLocation:M}}qe(Et({},B,{actionData:ae,loaderData:Oe,historyAction:x,location:M,initialized:!0,navigation:Eg,revalidation:"idle",restoreScrollPosition:WC(M,B.matches||A.matches),preventScrollReset:we,blockers:Se}),{viewTransitionOpts:et,flushSync:be===!0}),x=Gt.Pop,T=!1,O=!1,j=!1,Z=!1,Y=[],ee=[]}async function _r(M,B){if(typeof M=="number"){t.history.go(M);return}let G=rv(A.location,A.matches,c,d.v7_prependBasename,M,d.v7_relativeSplatPath,B==null?void 0:B.fromRouteId,B==null?void 0:B.relative),{path:Q,submission:de,error:be}=ib(d.v7_normalizeFormMethod,!1,G,B),Ee=A.location,ae=zu(A.location,Q,B&&B.state);ae=Et({},ae,t.history.encodeLocation(ae));let Oe=B&&B.replace!=null?B.replace:void 0,Se=Gt.Push;Oe===!0?Se=Gt.Replace:Oe===!1||de!=null&&si(de.formMethod)&&de.formAction===A.location.pathname+A.location.search&&(Se=Gt.Replace);let we=B&&"preventScrollReset"in B?B.preventScrollReset===!0:void 0,et=(B&&B.unstable_flushSync)===!0,Xe=VC({currentLocation:Ee,nextLocation:ae,historyAction:Se});if(Xe){Od(Xe,{state:"blocked",location:ae,proceed(){Od(Xe,{state:"proceeding",proceed:void 0,reset:void 0,location:ae}),_r(M,B)},reset(){let st=new Map(A.blockers);st.set(Xe,Vl),qe({blockers:st})}});return}return await fe(Se,ae,{submission:de,pendingError:be,preventScrollReset:we,replace:B&&B.replace,enableViewTransition:B&&B.unstable_viewTransition,flushSync:et})}function le(){if(k(),qe({revalidation:"loading"}),A.navigation.state!=="submitting"){if(A.navigation.state==="idle"){fe(A.historyAction,A.location,{startUninterruptedRevalidation:!0});return}fe(x||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation})}}async function fe(M,B,G){_&&_.abort(),_=null,x=M,j=(G&&G.startUninterruptedRevalidation)===!0,XR(A.location,A.matches),T=(G&&G.preventScrollReset)===!0,O=(G&&G.enableViewTransition)===!0;let Q=a||s,de=G&&G.overrideNavigation,be=da(Q,B,c),Ee=(G&&G.flushSync)===!0,ae=Yp(be,Q,B.pathname);if(ae.active&&ae.matches&&(be=ae.matches),!be){let{error:Je,notFoundMatches:sn,route:Ut}=Kp(B.pathname);on(B,{matches:sn,loaderData:{},errors:{[Ut.id]:Je}},{flushSync:Ee});return}if(A.initialized&&!Z&&vM(A.location,B)&&!(G&&G.submission&&si(G.submission.formMethod))){on(B,{matches:be},{flushSync:Ee});return}_=new AbortController;let Oe=oc(t.history,B,_.signal,G&&G.submission),Se;if(G&&G.pendingError)Se=[Iu(be).route.id,{type:dt.error,error:G.pendingError}];else if(G&&G.submission&&si(G.submission.formMethod)){let Je=await ze(Oe,B,G.submission,be,ae.active,{replace:G.replace,flushSync:Ee});if(Je.shortCircuited)return;if(Je.pendingActionResult){let[sn,Ut]=Je.pendingActionResult;if(br(Ut)&&wp(Ut.error)&&Ut.error.status===404){_=null,on(B,{matches:Je.matches,loaderData:{},errors:{[sn]:Ut.error}});return}}be=Je.matches||be,Se=Je.pendingActionResult,de=Tg(B,G.submission),Ee=!1,ae.active=!1,Oe=oc(t.history,Oe.url,Oe.signal)}let{shortCircuited:we,matches:et,loaderData:Xe,errors:st}=await We(Oe,B,be,ae.active,de,G&&G.submission,G&&G.fetcherSubmission,G&&G.replace,G&&G.initialHydration===!0,Ee,Se);we||(_=null,on(B,Et({matches:et||be},hb(Se),{loaderData:Xe,errors:st})))}async function ze(M,B,G,Q,de,be){be===void 0&&(be={}),k();let Ee=SM(B,G);if(qe({navigation:Ee},{flushSync:be.flushSync===!0}),de){let Se=await Dd(Q,B.pathname,M.signal);if(Se.type==="aborted")return{shortCircuited:!0};if(Se.type==="error"){let{error:we,notFoundMatches:et,route:Xe}=Md(B.pathname,Se);return{matches:et,pendingActionResult:[Xe.id,{type:dt.error,error:we}]}}else if(Se.matches)Q=Se.matches;else{let{notFoundMatches:we,error:et,route:Xe}=Kp(B.pathname);return{matches:we,pendingActionResult:[Xe.id,{type:dt.error,error:et}]}}}let ae,Oe=eu(Q,B);if(!Oe.route.action&&!Oe.route.lazy)ae={type:dt.error,error:Mn(405,{method:M.method,pathname:B.pathname,routeId:Oe.route.id})};else if(ae=(await bn("action",M,[Oe],Q))[0],M.signal.aborted)return{shortCircuited:!0};if(ba(ae)){let Se;return be&&be.replace!=null?Se=be.replace:Se=cb(ae.response.headers.get("Location"),new URL(M.url),c)===A.location.pathname+A.location.search,await Hr(M,ae,{submission:G,replace:Se}),{shortCircuited:!0}}if(Ia(ae))throw Mn(400,{type:"defer-action"});if(br(ae)){let Se=Iu(Q,Oe.route.id);return(be&&be.replace)!==!0&&(x=Gt.Push),{matches:Q,pendingActionResult:[Se.route.id,ae]}}return{matches:Q,pendingActionResult:[Oe.route.id,ae]}}async function We(M,B,G,Q,de,be,Ee,ae,Oe,Se,we){let et=de||Tg(B,be),Xe=be||Ee||mb(et),st=!j&&(!d.v7_partialHydration||!Oe);if(Q){if(st){let Rt=xe(we);qe(Et({navigation:et},Rt!==void 0?{actionData:Rt}:{}),{flushSync:Se})}let Le=await Dd(G,B.pathname,M.signal);if(Le.type==="aborted")return{shortCircuited:!0};if(Le.type==="error"){let{error:Rt,notFoundMatches:lr,route:ct}=Md(B.pathname,Le);return{matches:lr,loaderData:{},errors:{[ct.id]:Rt}}}else if(Le.matches)G=Le.matches;else{let{error:Rt,notFoundMatches:lr,route:ct}=Kp(B.pathname);return{matches:lr,loaderData:{},errors:{[ct.id]:Rt}}}}let Je=a||s,[sn,Ut]=ob(t.history,A,G,Xe,B,d.v7_partialHydration&&Oe===!0,d.unstable_skipActionErrorRevalidation,Z,Y,ee,Ne,ie,H,Je,c,we);if(Jp(Le=>!(G&&G.some(Rt=>Rt.route.id===Le))||sn&&sn.some(Rt=>Rt.route.id===Le)),$=++z,sn.length===0&&Ut.length===0){let Le=gt();return on(B,Et({matches:G,loaderData:{},errors:we&&br(we[1])?{[we[0]]:we[1].error}:null},hb(we),Le?{fetchers:new Map(A.fetchers)}:{}),{flushSync:Se}),{shortCircuited:!0}}if(st){let Le={};if(!Q){Le.navigation=et;let Rt=xe(we);Rt!==void 0&&(Le.actionData=Rt)}Ut.length>0&&(Le.fetchers=$e(Ut)),qe(Le,{flushSync:Se})}Ut.forEach(Le=>{ne.has(Le.key)&&K(Le.key),Le.controller&&ne.set(Le.key,Le.controller)});let Nl=()=>Ut.forEach(Le=>K(Le.key));_&&_.signal.addEventListener("abort",Nl);let{loaderResults:cs,fetcherResults:tc}=await ec(A.matches,G,sn,Ut,M);if(M.signal.aborted)return{shortCircuited:!0};_&&_.signal.removeEventListener("abort",Nl),Ut.forEach(Le=>ne.delete(Le.key));let nc=pb([...cs,...tc]);if(nc){if(nc.idx>=sn.length){let Le=Ut[nc.idx-sn.length].key;H.add(Le)}return await Hr(M,nc.result,{replace:ae}),{shortCircuited:!0}}let{loaderData:rc,errors:ki}=ub(A,G,sn,cs,we,Ut,tc,Ce);Ce.forEach((Le,Rt)=>{Le.subscribe(lr=>{(lr||Le.done)&&Ce.delete(Rt)})}),d.v7_partialHydration&&Oe&&A.errors&&Object.entries(A.errors).filter(Le=>{let[Rt]=Le;return!sn.some(lr=>lr.route.id===Rt)}).forEach(Le=>{let[Rt,lr]=Le;ki=Object.assign(ki||{},{[Rt]:lr})});let Ld=gt(),Bd=ot($),Fd=Ld||Bd||Ut.length>0;return Et({matches:G,loaderData:rc,errors:ki},Fd?{fetchers:new Map(A.fetchers)}:{})}function xe(M){if(M&&!br(M[1]))return{[M[0]]:M[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function $e(M){return M.forEach(B=>{let G=A.fetchers.get(B.key),Q=Gl(void 0,G?G.data:void 0);A.fetchers.set(B.key,Q)}),new Map(A.fetchers)}function jt(M,B,G,Q){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");ne.has(M)&&K(M);let de=(Q&&Q.unstable_flushSync)===!0,be=a||s,Ee=rv(A.location,A.matches,c,d.v7_prependBasename,G,d.v7_relativeSplatPath,B,Q==null?void 0:Q.relative),ae=da(be,Ee,c),Oe=Yp(ae,be,Ee);if(Oe.active&&Oe.matches&&(ae=Oe.matches),!ae){I(M,B,Mn(404,{pathname:Ee}),{flushSync:de});return}let{path:Se,submission:we,error:et}=ib(d.v7_normalizeFormMethod,!0,Ee,Q);if(et){I(M,B,et,{flushSync:de});return}let Xe=eu(ae,Se);if(T=(Q&&Q.preventScrollReset)===!0,we&&si(we.formMethod)){Mt(M,B,Se,Xe,ae,Oe.active,de,we);return}ie.set(M,{routeId:B,path:Se}),zr(M,B,Se,Xe,ae,Oe.active,de,we)}async function Mt(M,B,G,Q,de,be,Ee,ae){k(),ie.delete(M);function Oe(ct){if(!ct.route.action&&!ct.route.lazy){let co=Mn(405,{method:ae.formMethod,pathname:G,routeId:B});return I(M,B,co,{flushSync:Ee}),!0}return!1}if(!be&&Oe(Q))return;let Se=A.fetchers.get(M);y(M,wM(ae,Se),{flushSync:Ee});let we=new AbortController,et=oc(t.history,G,we.signal,ae);if(be){let ct=await Dd(de,G,et.signal);if(ct.type==="aborted")return;if(ct.type==="error"){let{error:co}=Md(G,ct);I(M,B,co,{flushSync:Ee});return}else if(ct.matches){if(de=ct.matches,Q=eu(de,G),Oe(Q))return}else{I(M,B,Mn(404,{pathname:G}),{flushSync:Ee});return}}ne.set(M,we);let Xe=z,Je=(await bn("action",et,[Q],de))[0];if(et.signal.aborted){ne.get(M)===we&&ne.delete(M);return}if(d.v7_fetcherPersist&&Ne.has(M)){if(ba(Je)||br(Je)){y(M,fs(void 0));return}}else{if(ba(Je))if(ne.delete(M),$>Xe){y(M,fs(void 0));return}else return H.add(M),y(M,Gl(ae)),Hr(et,Je,{fetcherSubmission:ae});if(br(Je)){I(M,B,Je.error);return}}if(Ia(Je))throw Mn(400,{type:"defer-action"});let sn=A.navigation.location||A.location,Ut=oc(t.history,sn,we.signal),Nl=a||s,cs=A.navigation.state!=="idle"?da(Nl,A.navigation.location,c):A.matches;Ge(cs,"Didn't find any matches after fetcher action");let tc=++z;re.set(M,tc);let nc=Gl(ae,Je.data);A.fetchers.set(M,nc);let[rc,ki]=ob(t.history,A,cs,ae,sn,!1,d.unstable_skipActionErrorRevalidation,Z,Y,ee,Ne,ie,H,Nl,c,[Q.route.id,Je]);ki.filter(ct=>ct.key!==M).forEach(ct=>{let co=ct.key,jC=A.fetchers.get(co),JR=Gl(void 0,jC?jC.data:void 0);A.fetchers.set(co,JR),ne.has(co)&&K(co),ct.controller&&ne.set(co,ct.controller)}),qe({fetchers:new Map(A.fetchers)});let Ld=()=>ki.forEach(ct=>K(ct.key));we.signal.addEventListener("abort",Ld);let{loaderResults:Bd,fetcherResults:Fd}=await ec(A.matches,cs,rc,ki,Ut);if(we.signal.aborted)return;we.signal.removeEventListener("abort",Ld),re.delete(M),ne.delete(M),ki.forEach(ct=>ne.delete(ct.key));let Le=pb([...Bd,...Fd]);if(Le){if(Le.idx>=rc.length){let ct=ki[Le.idx-rc.length].key;H.add(ct)}return Hr(Ut,Le.result)}let{loaderData:Rt,errors:lr}=ub(A,A.matches,rc,Bd,void 0,ki,Fd,Ce);if(A.fetchers.has(M)){let ct=fs(Je.data);A.fetchers.set(M,ct)}ot(tc),A.navigation.state==="loading"&&tc>$?(Ge(x,"Expected pending action"),_&&_.abort(),on(A.navigation.location,{matches:cs,loaderData:Rt,errors:lr,fetchers:new Map(A.fetchers)})):(qe({errors:lr,loaderData:db(A.loaderData,Rt,cs,lr),fetchers:new Map(A.fetchers)}),Z=!1)}async function zr(M,B,G,Q,de,be,Ee,ae){let Oe=A.fetchers.get(M);y(M,Gl(ae,Oe?Oe.data:void 0),{flushSync:Ee});let Se=new AbortController,we=oc(t.history,G,Se.signal);if(be){let Je=await Dd(de,G,we.signal);if(Je.type==="aborted")return;if(Je.type==="error"){let{error:sn}=Md(G,Je);I(M,B,sn,{flushSync:Ee});return}else if(Je.matches)de=Je.matches,Q=eu(de,G);else{I(M,B,Mn(404,{pathname:G}),{flushSync:Ee});return}}ne.set(M,Se);let et=z,st=(await bn("loader",we,[Q],de))[0];if(Ia(st)&&(st=await Pk(st,we.signal,!0)||st),ne.get(M)===Se&&ne.delete(M),!we.signal.aborted){if(Ne.has(M)){y(M,fs(void 0));return}if(ba(st))if($>et){y(M,fs(void 0));return}else{H.add(M),await Hr(we,st);return}if(br(st)){I(M,B,st.error);return}Ge(!Ia(st),"Unhandled fetcher deferred data"),y(M,fs(st.data))}}async function Hr(M,B,G){let{submission:Q,fetcherSubmission:de,replace:be}=G===void 0?{}:G;B.response.headers.has("X-Remix-Revalidate")&&(Z=!0);let Ee=B.response.headers.get("Location");Ge(Ee,"Expected a Location header on the redirect Response"),Ee=cb(Ee,new URL(M.url),c);let ae=zu(A.location,Ee,{_isRedirect:!0});if(n){let st=!1;if(B.response.headers.has("X-Remix-Reload-Document"))st=!0;else if(by.test(Ee)){const Je=t.history.createURL(Ee);st=Je.origin!==e.location.origin||Id(Je.pathname,c)==null}if(st){be?e.location.replace(Ee):e.location.assign(Ee);return}}_=null;let Oe=be===!0?Gt.Replace:Gt.Push,{formMethod:Se,formAction:we,formEncType:et}=A.navigation;!Q&&!de&&Se&&we&&et&&(Q=mb(A.navigation));let Xe=Q||de;if(rM.has(B.response.status)&&Xe&&si(Xe.formMethod))await fe(Oe,ae,{submission:Et({},Xe,{formAction:Ee}),preventScrollReset:T});else{let st=Tg(ae,Q);await fe(Oe,ae,{overrideNavigation:st,fetcherSubmission:de,preventScrollReset:T})}}async function bn(M,B,G,Q){try{let de=await hM(l,M,B,G,Q,o,i);return await Promise.all(de.map((be,Ee)=>{if(CM(be)){let ae=be.result;return{type:dt.redirect,response:gM(ae,B,G[Ee].route.id,Q,c,d.v7_relativeSplatPath)}}return pM(be)}))}catch(de){return G.map(()=>({type:dt.error,error:de}))}}async function ec(M,B,G,Q,de){let[be,...Ee]=await Promise.all([G.length?bn("loader",de,G,B):[],...Q.map(ae=>{if(ae.matches&&ae.match&&ae.controller){let Oe=oc(t.history,ae.path,ae.controller.signal);return bn("loader",Oe,[ae.match],ae.matches).then(Se=>Se[0])}else return Promise.resolve({type:dt.error,error:Mn(404,{pathname:ae.path})})})]);return await Promise.all([gb(M,G,be,be.map(()=>de.signal),!1,A.loaderData),gb(M,Q.map(ae=>ae.match),Ee,Q.map(ae=>ae.controller?ae.controller.signal:null),!0)]),{loaderResults:be,fetcherResults:Ee}}function k(){Z=!0,Y.push(...Jp()),ie.forEach((M,B)=>{ne.has(B)&&(ee.push(B),K(B))})}function y(M,B,G){G===void 0&&(G={}),A.fetchers.set(M,B),qe({fetchers:new Map(A.fetchers)},{flushSync:(G&&G.flushSync)===!0})}function I(M,B,G,Q){Q===void 0&&(Q={});let de=Iu(A.matches,B);L(M),qe({errors:{[de.route.id]:G},fetchers:new Map(A.fetchers)},{flushSync:(Q&&Q.flushSync)===!0})}function R(M){return d.v7_fetcherPersist&&(Re.set(M,(Re.get(M)||0)+1),Ne.has(M)&&Ne.delete(M)),A.fetchers.get(M)||iM}function L(M){let B=A.fetchers.get(M);ne.has(M)&&!(B&&B.state==="loading"&&re.has(M))&&K(M),ie.delete(M),re.delete(M),H.delete(M),Ne.delete(M),A.fetchers.delete(M)}function W(M){if(d.v7_fetcherPersist){let B=(Re.get(M)||0)-1;B<=0?(Re.delete(M),Ne.add(M)):Re.set(M,B)}else L(M);qe({fetchers:new Map(A.fetchers)})}function K(M){let B=ne.get(M);Ge(B,"Expected fetch controller: "+M),B.abort(),ne.delete(M)}function De(M){for(let B of M){let G=R(B),Q=fs(G.data);A.fetchers.set(B,Q)}}function gt(){let M=[],B=!1;for(let G of H){let Q=A.fetchers.get(G);Ge(Q,"Expected fetcher: "+G),Q.state==="loading"&&(H.delete(G),M.push(G),B=!0)}return De(M),B}function ot(M){let B=[];for(let[G,Q]of re)if(Q<M){let de=A.fetchers.get(G);Ge(de,"Expected fetcher: "+G),de.state==="loading"&&(K(G),re.delete(G),B.push(G))}return De(B),B.length>0}function wt(M,B){let G=A.blockers.get(M)||Vl;return Te.get(M)!==B&&Te.set(M,B),G}function Ke(M){A.blockers.delete(M),Te.delete(M)}function Od(M,B){let G=A.blockers.get(M)||Vl;Ge(G.state==="unblocked"&&B.state==="blocked"||G.state==="blocked"&&B.state==="blocked"||G.state==="blocked"&&B.state==="proceeding"||G.state==="blocked"&&B.state==="unblocked"||G.state==="proceeding"&&B.state==="unblocked","Invalid blocker state transition: "+G.state+" -> "+B.state);let Q=new Map(A.blockers);Q.set(M,B),qe({blockers:Q})}function VC(M){let{currentLocation:B,nextLocation:G,historyAction:Q}=M;if(Te.size===0)return;Te.size>1&&tl(!1,"A router only supports one blocker at a time");let de=Array.from(Te.entries()),[be,Ee]=de[de.length-1],ae=A.blockers.get(be);if(!(ae&&ae.state==="proceeding")&&Ee({currentLocation:B,nextLocation:G,historyAction:Q}))return be}function Kp(M){let B=Mn(404,{pathname:M}),G=a||s,{matches:Q,route:de}=fb(G);return Jp(),{notFoundMatches:Q,route:de,error:B}}function Md(M,B){let G=B.partialMatches,Q=G[G.length-1].route,de=Mn(400,{type:"route-discovery",routeId:Q.id,pathname:M,message:B.error!=null&&"message"in B.error?B.error:String(B.error)});return{notFoundMatches:G,route:Q,error:de}}function Jp(M){let B=[];return Ce.forEach((G,Q)=>{(!M||M(Q))&&(G.cancel(),B.push(Q),Ce.delete(Q))}),B}function HR(M,B,G){if(p=M,C=B,g=G||null,!m&&A.navigation===Eg){m=!0;let Q=WC(A.location,A.matches);Q!=null&&qe({restoreScrollPosition:Q})}return()=>{p=null,C=null,g=null}}function GC(M,B){return g&&g(M,B.map(Q=>OO(Q,A.loaderData)))||M.key}function XR(M,B){if(p&&C){let G=GC(M,B);p[G]=C()}}function WC(M,B){if(p){let G=GC(M,B),Q=p[G];if(typeof Q=="number")return Q}return null}function Yp(M,B,G){if(u)if(M){let Q=M[M.length-1].route;if(Q.path&&(Q.path==="*"||Q.path.endsWith("/*")))return{active:!0,matches:xh(B,G,c,!0)}}else return{active:!0,matches:xh(B,G,c,!0)||[]};return{active:!1,matches:null}}async function Dd(M,B,G){let Q=M,de=Q.length>0?Q[Q.length-1].route:null;for(;;){let be=a==null,Ee=a||s;try{await uM(u,B,Q,Ee,o,i,it,G)}catch(we){return{type:"error",error:we,partialMatches:Q}}finally{be&&(s=[...s])}if(G.aborted)return{type:"aborted"};let ae=da(Ee,B,c),Oe=!1;if(ae){let we=ae[ae.length-1].route;if(we.index)return{type:"success",matches:ae};if(we.path&&we.path.length>0)if(we.path==="*")Oe=!0;else return{type:"success",matches:ae}}let Se=xh(Ee,B,c,!0);if(!Se||Q.map(we=>we.route.id).join("-")===Se.map(we=>we.route.id).join("-"))return{type:"success",matches:Oe?ae:null};if(Q=Se,de=Q[Q.length-1].route,de.path==="*")return{type:"success",matches:Q}}}function $R(M){o={},a=Hu(M,i,void 0,o)}function KR(M,B){let G=a==null;Ek(M,B,a||s,o,i),G&&(s=[...s],qe({}))}return w={get basename(){return c},get future(){return d},get state(){return A},get routes(){return s},get window(){return e},initialize:Nn,subscribe:Nr,enableScrollRestoration:HR,navigate:_r,fetch:jt,revalidate:le,createHref:M=>t.history.createHref(M),encodeLocation:M=>t.history.encodeLocation(M),getFetcher:R,deleteFetcher:W,dispose:$n,getBlocker:wt,deleteBlocker:Ke,patchRoutes:KR,_internalFetchControllers:ne,_internalActiveDeferreds:Ce,_internalSetRoutes:$R},w}function aM(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function rv(t,e,n,r,i,o,s,a){let c,l;if(s){c=[];for(let d of e)if(c.push(d),d.route.id===s){l=d;break}}else c=e,l=e[e.length-1];let u=KO(i||".",$O(c,o),Id(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&l&&l.route.index&&!Sy(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:xa([n,u.pathname])),Cd(u)}function ib(t,e,n,r){if(!r||!aM(r))return{path:n};if(r.formMethod&&!bM(r.formMethod))return{path:n,error:Mn(405,{method:r.formMethod})};let i=()=>({path:n,error:Mn(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),a=Tk(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!si(s))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[g,C]=p;return""+f+g+"="+C+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!si(s))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}Ge(typeof FormData=="function","FormData is not available in this environment");let c,l;if(r.formData)c=iv(r.formData),l=r.formData;else if(r.body instanceof FormData)c=iv(r.body),l=r.body;else if(r.body instanceof URLSearchParams)c=r.body,l=lb(c);else if(r.body==null)c=new URLSearchParams,l=new FormData;else try{c=new URLSearchParams(r.body),l=lb(c)}catch{return i()}let u={formMethod:s,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(si(u.formMethod))return{path:n,submission:u};let d=ta(n);return e&&d.search&&Sy(d.search)&&c.append("index",""),d.search="?"+c,{path:Cd(d),submission:u}}function cM(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function ob(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g){let C=g?br(g[1])?g[1].error:g[1].data:void 0,m=t.createURL(e.location),v=t.createURL(i),b=g&&br(g[1])?g[0]:void 0,E=b?cM(n,b):n,w=g?g[1].statusCode:void 0,A=s&&w&&w>=400,x=E.filter((_,O)=>{let{route:D}=_;if(D.lazy)return!0;if(D.loader==null)return!1;if(o)return typeof D.loader!="function"||D.loader.hydrate?!0:e.loaderData[D.id]===void 0&&(!e.errors||e.errors[D.id]===void 0);if(lM(e.loaderData,e.matches[O],_)||c.some(Z=>Z===_.route.id))return!0;let U=e.matches[O],j=_;return sb(_,Et({currentUrl:m,currentParams:U.params,nextUrl:v,nextParams:j.params},r,{actionResult:C,unstable_actionStatus:w,defaultShouldRevalidate:A?!1:a||m.pathname+m.search===v.pathname+v.search||m.search!==v.search||kk(U,j)}))}),T=[];return d.forEach((_,O)=>{if(o||!n.some(Y=>Y.route.id===_.routeId)||u.has(O))return;let D=da(f,_.path,p);if(!D){T.push({key:O,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let U=e.fetchers.get(O),j=eu(D,_.path),Z=!1;h.has(O)?Z=!1:l.includes(O)?Z=!0:U&&U.state!=="idle"&&U.data===void 0?Z=a:Z=sb(j,Et({currentUrl:m,currentParams:e.matches[e.matches.length-1].params,nextUrl:v,nextParams:n[n.length-1].params},r,{actionResult:C,unstable_actionStatus:w,defaultShouldRevalidate:A?!1:a})),Z&&T.push({key:O,routeId:_.routeId,path:_.path,matches:D,match:j,controller:new AbortController})}),[x,T]}function lM(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function kk(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function sb(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function uM(t,e,n,r,i,o,s,a){let c=[e,...n.map(l=>l.route.id)].join("-");try{let l=s.get(c);l||(l=t({path:e,matches:n,patch:(u,d)=>{a.aborted||Ek(u,d,r,i,o)}}),s.set(c,l)),l&&yM(l)&&await l}finally{s.delete(c)}}function Ek(t,e,n,r,i){if(t){var o;let s=r[t];Ge(s,"No route found to patch children into: routeId = "+t);let a=Hu(e,i,[t,"patch",String(((o=s.children)==null?void 0:o.length)||"0")],r);s.children?s.children.push(...a):s.children=a}else{let s=Hu(e,i,["patch",String(n.length||"0")],r);n.push(...s)}}async function ab(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Ge(i,"No route found in manifest");let o={};for(let s in r){let c=i[s]!==void 0&&s!=="hasErrorBoundary";tl(!c,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!c&&!NO.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,Et({},e(i),{lazy:void 0}))}function dM(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function hM(t,e,n,r,i,o,s,a){let c=r.reduce((d,h)=>d.add(h.route.id),new Set),l=new Set,u=await t({matches:i.map(d=>{let h=c.has(d.route.id);return Et({},d,{shouldLoad:h,resolve:p=>(l.add(d.route.id),h?fM(e,n,d,o,s,p,a):Promise.resolve({type:dt.data,result:void 0}))})}),request:n,params:i[0].params,context:a});return i.forEach(d=>Ge(l.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),u.filter((d,h)=>c.has(i[h].route.id))}async function fM(t,e,n,r,i,o,s){let a,c,l=u=>{let d,h=new Promise((g,C)=>d=C);c=()=>d(),e.signal.addEventListener("abort",c);let f=g=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:s},...g!==void 0?[g]:[]),p;return o?p=o(g=>f(g)):p=(async()=>{try{return{type:"data",result:await f()}}catch(g){return{type:"error",result:g}}})(),Promise.race([p,h])};try{let u=n.route[t];if(n.route.lazy)if(u){let d,[h]=await Promise.all([l(u).catch(f=>{d=f}),ab(n.route,i,r)]);if(d!==void 0)throw d;a=h}else if(await ab(n.route,i,r),u=n.route[t],u)a=await l(u);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw Mn(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:dt.data,result:void 0};else if(u)a=await l(u);else{let d=new URL(e.url),h=d.pathname+d.search;throw Mn(404,{pathname:h})}Ge(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:dt.error,result:u}}finally{c&&e.signal.removeEventListener("abort",c)}return a}async function pM(t){let{result:e,type:n,status:r}=t;if(xk(e)){let s;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?s=null:s=await e.json():s=await e.text()}catch(a){return{type:dt.error,error:a}}return n===dt.error?{type:dt.error,error:new Iy(e.status,e.statusText,s),statusCode:e.status,headers:e.headers}:{type:dt.data,data:s,statusCode:e.status,headers:e.headers}}if(n===dt.error)return{type:dt.error,error:e,statusCode:wp(e)?e.status:r};if(IM(e)){var i,o;return{type:dt.deferred,deferredData:e,statusCode:(i=e.init)==null?void 0:i.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}return{type:dt.data,data:e,statusCode:r}}function gM(t,e,n,r,i,o){let s=t.headers.get("Location");if(Ge(s,"Redirects returned/thrown from loaders/actions must have a Location header"),!by.test(s)){let a=r.slice(0,r.findIndex(c=>c.route.id===n)+1);s=rv(new URL(e.url),a,i,!0,s,o),t.headers.set("Location",s)}return t}function cb(t,e,n){if(by.test(t)){let r=t,i=r.startsWith("//")?new URL(e.protocol+r):new URL(r),o=Id(i.pathname,n)!=null;if(i.origin===e.origin&&o)return i.pathname+i.search+i.hash}return t}function oc(t,e,n,r){let i=t.createURL(Tk(e)).toString(),o={signal:n};if(r&&si(r.formMethod)){let{formMethod:s,formEncType:a}=r;o.method=s.toUpperCase(),a==="application/json"?(o.headers=new Headers({"Content-Type":a}),o.body=JSON.stringify(r.json)):a==="text/plain"?o.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?o.body=iv(r.formData):o.body=r.formData}return new Request(i,o)}function iv(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function lb(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function mM(t,e,n,r,i,o){let s={},a=null,c,l=!1,u={},d=r&&br(r[1])?r[1].error:void 0;return n.forEach((h,f)=>{let p=e[f].route.id;if(Ge(!ba(h),"Cannot handle redirect results in processLoaderData"),br(h)){let g=h.error;d!==void 0&&(g=d,d=void 0),a=a||{};{let C=Iu(t,p);a[C.route.id]==null&&(a[C.route.id]=g)}s[p]=void 0,l||(l=!0,c=wp(h.error)?h.error.status:500),h.headers&&(u[p]=h.headers)}else Ia(h)?(i.set(p,h.deferredData),s[p]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!l&&(c=h.statusCode),h.headers&&(u[p]=h.headers)):(s[p]=h.data,h.statusCode&&h.statusCode!==200&&!l&&(c=h.statusCode),h.headers&&(u[p]=h.headers))}),d!==void 0&&r&&(a={[r[0]]:d},s[r[0]]=void 0),{loaderData:s,errors:a,statusCode:c||200,loaderHeaders:u}}function ub(t,e,n,r,i,o,s,a){let{loaderData:c,errors:l}=mM(e,n,r,i,a);for(let u=0;u<o.length;u++){let{key:d,match:h,controller:f}=o[u];Ge(s!==void 0&&s[u]!==void 0,"Did not find corresponding fetcher result");let p=s[u];if(!(f&&f.signal.aborted))if(br(p)){let g=Iu(t.matches,h==null?void 0:h.route.id);l&&l[g.route.id]||(l=Et({},l,{[g.route.id]:p.error})),t.fetchers.delete(d)}else if(ba(p))Ge(!1,"Unhandled fetcher revalidation redirect");else if(Ia(p))Ge(!1,"Unhandled fetcher deferred data");else{let g=fs(p.data);t.fetchers.set(d,g)}}return{loaderData:c,errors:l}}function db(t,e,n,r){let i=Et({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function hb(t){return t?br(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Iu(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function fb(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Mn(t,e){let{pathname:n,routeId:r,method:i,type:o,message:s}=e===void 0?{}:e,a="Unknown Server Error",c="Unknown @remix-run/router error";return t===400?(a="Bad Request",o==="route-discovery"?c='Unable to match URL "'+n+'" - the `children()` function for '+("route `"+r+"` threw the following error:\n"+s):i&&n&&r?c="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?c="defer() is not supported in actions":o==="invalid-body"&&(c="Unable to encode submission body")):t===403?(a="Forbidden",c='Route "'+r+'" does not match URL "'+n+'"'):t===404?(a="Not Found",c='No route matches URL "'+n+'"'):t===405&&(a="Method Not Allowed",i&&n&&r?c="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(c='Invalid request method "'+i.toUpperCase()+'"')),new Iy(t||500,a,new Error(c),!0)}function pb(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(ba(n))return{result:n,idx:e}}}function Tk(t){let e=typeof t=="string"?ta(t):t;return Cd(Et({},e,{hash:""}))}function vM(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function yM(t){return typeof t=="object"&&t!=null&&"then"in t}function CM(t){return xk(t.result)&&nM.has(t.result.status)}function Ia(t){return t.type===dt.deferred}function br(t){return t.type===dt.error}function ba(t){return(t&&t.type)===dt.redirect}function IM(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function xk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function bM(t){return tM.has(t.toLowerCase())}function si(t){return qO.has(t.toLowerCase())}async function gb(t,e,n,r,i,o){for(let s=0;s<n.length;s++){let a=n[s],c=e[s];if(!c)continue;let l=t.find(d=>d.route.id===c.route.id),u=l!=null&&!kk(l,c)&&(o&&o[c.route.id])!==void 0;if(Ia(a)&&(i||u)){let d=r[s];Ge(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await Pk(a,d,i).then(h=>{h&&(n[s]=h||n[s])})}}}async function Pk(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:dt.data,data:t.deferredData.unwrappedData}}catch(i){return{type:dt.error,error:i}}return{type:dt.data,data:t.deferredData.data}}}function Sy(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function eu(t,e){let n=typeof e=="string"?ta(e).search:e.search;if(t[t.length-1].route.index&&Sy(n||""))return t[t.length-1];let r=Sk(t);return r[r.length-1]}function mb(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function Tg(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function SM(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Gl(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function wM(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function fs(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function AM(t,e){try{let n=t.sessionStorage.getItem(Ak);if(n){let r=JSON.parse(n);for(let[i,o]of Object.entries(r||{}))o&&Array.isArray(o)&&e.set(i,new Set(o||[]))}}catch{}}function kM(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(Ak,JSON.stringify(n))}catch(r){tl(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ov.apply(this,arguments)}const Rk=S.createContext(null),Nk=S.createContext(null),_k=S.createContext(null),wy=S.createContext(null),Ap=S.createContext({outlet:null,matches:[],isDataRoute:!1}),Ok=S.createContext(null);function Ay(){return S.useContext(wy)!=null}function Mk(){return Ay()||Ge(!1),S.useContext(wy).location}function EM(t,e,n,r){Ay()||Ge(!1);let{navigator:i}=S.useContext(_k),{matches:o}=S.useContext(Ap),s=o[o.length-1],a=s?s.params:{};s&&s.pathname;let c=s?s.pathnameBase:"/";s&&s.route;let l=Mk(),u;u=l;let d=u.pathname||"/",h=d;if(c!=="/"){let g=c.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let f=da(t,{pathname:h});return NM(f&&f.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:xa([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:xa([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),o,n,r)}function TM(){let t=DM(),e=wp(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),n?S.createElement("pre",{style:i},n):null,null)}const xM=S.createElement(TM,null);class PM extends S.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?S.createElement(Ap.Provider,{value:this.props.routeContext},S.createElement(Ok.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RM(t){let{routeContext:e,match:n,children:r}=t,i=S.useContext(Rk);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),S.createElement(Ap.Provider,{value:e},r)}function NM(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var o;if((o=n)!=null&&o.errors)t=n.matches;else return null}let s=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||Ge(!1),s=s.slice(0,Math.min(s.length,u+1))}let c=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){c=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let f,p=!1,g=null,C=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||xM,c&&(l<0&&h===0?(LM("route-fallback"),p=!0,C=null):l===h&&(p=!0,C=d.route.hydrateFallbackElement||null)));let m=e.concat(s.slice(0,h+1)),v=()=>{let b;return f?b=g:p?b=C:d.route.Component?b=S.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,S.createElement(RM,{match:d,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?S.createElement(PM,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:v(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):v()},null)}var sv=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(sv||{});function _M(t){let e=S.useContext(Nk);return e||Ge(!1),e}function OM(t){let e=S.useContext(Ap);return e||Ge(!1),e}function MM(t){let e=OM(),n=e.matches[e.matches.length-1];return n.route.id||Ge(!1),n.route.id}function DM(){var t;let e=S.useContext(Ok),n=_M(sv.UseRouteError),r=MM(sv.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}const vb={};function LM(t,e,n){vb[t]||(vb[t]=!0)}function BM(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Gt.Pop,navigator:o,static:s=!1,future:a}=t;Ay()&&Ge(!1);let c=e.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:c,navigator:o,static:s,future:ov({v7_relativeSplatPath:!1},a)}),[c,a,o,s]);typeof r=="string"&&(r=ta(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=S.useMemo(()=>{let C=Id(u,c);return C==null?null:{location:{pathname:C,search:d,hash:h,state:f,key:p},navigationType:i}},[c,u,d,h,f,p,i]);return g==null?null:S.createElement(_k.Provider,{value:l},S.createElement(wy.Provider,{children:n,value:g}))}new Promise(()=>{});function FM(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:S.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:S.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:S.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kf(){return kf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kf.apply(this,arguments)}const UM="6";try{window.__reactRouterVersion=UM}catch{}function VM(t,e){return sM({basename:void 0,future:kf({},void 0,{v7_prependBasename:!0}),history:xO({window:void 0}),hydrationData:GM(),routes:t,mapRouteProperties:FM,unstable_dataStrategy:void 0,unstable_patchRoutesOnMiss:void 0,window:void 0}).initialize()}function GM(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=kf({},e,{errors:WM(e.errors)})),e}function WM(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Iy(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}const jM=S.createContext({isTransitioning:!1}),ZM=S.createContext(new Map),zM="startTransition",yb=gN[zM],HM="flushSync",Cb=TO[HM];function XM(t){yb?yb(t):t()}function Wl(t){Cb?Cb(t):t()}class $M{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function KM(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=S.useState(n.state),[s,a]=S.useState(),[c,l]=S.useState({isTransitioning:!1}),[u,d]=S.useState(),[h,f]=S.useState(),[p,g]=S.useState(),C=S.useRef(new Map),{v7_startTransition:m}=r||{},v=S.useCallback(x=>{m?XM(x):x()},[m]),b=S.useCallback((x,T)=>{let{deletedFetchers:_,unstable_flushSync:O,unstable_viewTransitionOpts:D}=T;_.forEach(j=>C.current.delete(j)),x.fetchers.forEach((j,Z)=>{j.data!==void 0&&C.current.set(Z,j.data)});let U=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!D||U){O?Wl(()=>o(x)):v(()=>o(x));return}if(O){Wl(()=>{h&&(u&&u.resolve(),h.skipTransition()),l({isTransitioning:!0,flushSync:!0,currentLocation:D.currentLocation,nextLocation:D.nextLocation})});let j=n.window.document.startViewTransition(()=>{Wl(()=>o(x))});j.finished.finally(()=>{Wl(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})})}),Wl(()=>f(j));return}h?(u&&u.resolve(),h.skipTransition(),g({state:x,currentLocation:D.currentLocation,nextLocation:D.nextLocation})):(a(x),l({isTransitioning:!0,flushSync:!1,currentLocation:D.currentLocation,nextLocation:D.nextLocation}))},[n.window,h,u,C,v]);S.useLayoutEffect(()=>n.subscribe(b),[n,b]),S.useEffect(()=>{c.isTransitioning&&!c.flushSync&&d(new $M)},[c]),S.useEffect(()=>{if(u&&s&&n.window){let x=s,T=u.promise,_=n.window.document.startViewTransition(async()=>{v(()=>o(x)),await T});_.finished.finally(()=>{d(void 0),f(void 0),a(void 0),l({isTransitioning:!1})}),f(_)}},[v,s,u,n.window]),S.useEffect(()=>{u&&s&&i.location.key===s.location.key&&u.resolve()},[u,h,i.location,s]),S.useEffect(()=>{!c.isTransitioning&&p&&(a(p.state),l({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),g(void 0))},[c.isTransitioning,p]),S.useEffect(()=>{},[]);let E=S.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:x=>n.navigate(x),push:(x,T,_)=>n.navigate(x,{state:T,preventScrollReset:_==null?void 0:_.preventScrollReset}),replace:(x,T,_)=>n.navigate(x,{replace:!0,state:T,preventScrollReset:_==null?void 0:_.preventScrollReset})}),[n]),w=n.basename||"/",A=S.useMemo(()=>({router:n,navigator:E,static:!1,basename:w}),[n,E,w]);return S.createElement(S.Fragment,null,S.createElement(Rk.Provider,{value:A},S.createElement(Nk.Provider,{value:i},S.createElement(ZM.Provider,{value:C.current},S.createElement(jM.Provider,{value:c},S.createElement(BM,{basename:w,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?S.createElement(JM,{routes:n.routes,future:n.future,state:i}):e))))),null)}function JM(t){let{routes:e,future:n,state:r}=t;return EM(e,void 0,r,n)}var Ib;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Ib||(Ib={}));var bb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bb||(bb={}));const Dk=t=>{const e=typeof t=="function",n=S.useRef(t);S.useEffect(()=>{n.current=t}),S.useEffect(()=>{if(e){const r=i=>{const o=n.current(i);if(typeof o=="string")return i.preventDefault(),i.returnValue=o;if(i.defaultPrevented)return i.returnValue=""};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}},[e])},Lk=7e3;let xg=null;function Sb(t,e="assertive",n=Lk){xg||(xg=new YM),xg.announce(t,e,n)}class YM{createLog(e){let n=document.createElement("div");return n.setAttribute("role","log"),n.setAttribute("aria-live",e),n.setAttribute("aria-relevant","additions"),n}destroy(){this.node&&(document.body.removeChild(this.node),this.node=null)}announce(e,n="assertive",r=Lk){if(!this.node)return;let i=document.createElement("div");i.textContent=e,n==="assertive"?this.assertiveLog.appendChild(i):this.politeLog.appendChild(i),e!==""&&setTimeout(()=>{i.remove()},r)}clear(e){this.node&&((!e||e==="assertive")&&(this.assertiveLog.innerHTML=""),(!e||e==="polite")&&(this.politeLog.innerHTML=""))}constructor(){this.node=document.createElement("div"),this.node.dataset.liveAnnouncer="true",Object.assign(this.node.style,{border:0,clip:"rect(0 0 0 0)",clipPath:"inset(50%)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"}),this.assertiveLog=this.createLog("assertive"),this.node.appendChild(this.assertiveLog),this.politeLog=this.createLog("polite"),this.node.appendChild(this.politeLog),document.body.prepend(this.node)}}var wb=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();function QM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var us=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],qM=function(){wb(t,null,[{key:"escapeForHtml",value:function(n){return new t().escapeForHtml(n)}},{key:"linkify",value:function(n){return new t().linkify(n)}},{key:"ansiToHtml",value:function(n,r){return new t().ansiToHtml(n,r)}},{key:"ansiToJson",value:function(n,r){return new t().ansiToJson(n,r)}},{key:"ansiToText",value:function(n){return new t().ansiToText(n)}}]);function t(){QM(this,t),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return wb(t,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var n=0;n<2;++n)for(var r=0;r<8;++r)this.PALETTE_COLORS.push(us[n][r].color);for(var i=[0,95,135,175,215,255],o=function(h,f,p){return i[h]+", "+i[f]+", "+i[p]},s=0;s<6;++s)for(var a=0;a<6;++a)for(var c=0;c<6;++c)this.PALETTE_COLORS.push(o(s,a,c));for(var l=8,u=0;u<24;++u,l+=10)this.PALETTE_COLORS.push(o(l,l,l))}},{key:"escapeForHtml",value:function(n){return n.replace(/[&<>\"]/gm,function(r){return r=="&"?"&amp;":r=='"'?"&quot;":r=="<"?"&lt;":r==">"?"&gt;":""})}},{key:"linkify",value:function(n){return n.replace(/(https?:\/\/[^\s]+)/gm,function(r){return'<a href="'+r+'">'+r+"</a>"})}},{key:"ansiToHtml",value:function(n,r){return this.process(n,r,!0)}},{key:"ansiToJson",value:function(n,r){return r=r||{},r.json=!0,r.clearLine=!1,this.process(n,r,!0)}},{key:"ansiToText",value:function(n){return this.process(n,{},!1)}},{key:"process",value:function(n,r,i){var o=this,s=this,a=n.split(/\033\[/),c=a.shift();r==null&&(r={}),r.clearLine=/\r/.test(n);var l=a.map(function(d){return o.processChunk(d,r,i)});if(r&&r.json){var u=s.processChunkJson("");return u.content=c,u.clearLine=r.clearLine,l.unshift(u),r.remove_empty&&(l=l.filter(function(d){return!d.isEmpty()})),l}else l.unshift(c);return l.join("")}},{key:"processChunkJson",value:function(n,r,i){r=typeof r>"u"?{}:r;var o=r.use_classes=typeof r.use_classes<"u"&&r.use_classes,s=r.key=o?"class":"color",a={content:n,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:r.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!a.content}},c=n.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!c)return a;a.content=c[4];var l=c[2].split(";");if(c[1]!==""||c[3]!=="m"||!i)return a;for(var u=this;l.length>0;){var d=l.shift(),h=parseInt(d);if(isNaN(h)||h===0)u.fg=u.bg=null,u.decorations=[];else if(h===1)u.decorations.push("bold");else if(h===2)u.decorations.push("dim");else if(h===3)u.decorations.push("italic");else if(h===4)u.decorations.push("underline");else if(h===5)u.decorations.push("blink");else if(h===7)u.decorations.push("reverse");else if(h===8)u.decorations.push("hidden");else if(h===9)u.decorations.push("strikethrough");else if(h===21)u.removeDecoration("bold");else if(h===22)u.removeDecoration("bold"),u.removeDecoration("dim");else if(h===23)u.removeDecoration("italic");else if(h===24)u.removeDecoration("underline");else if(h===25)u.removeDecoration("blink");else if(h===27)u.removeDecoration("reverse");else if(h===28)u.removeDecoration("hidden");else if(h===29)u.removeDecoration("strikethrough");else if(h===39)u.fg=null;else if(h===49)u.bg=null;else if(h>=30&&h<38)u.fg=us[0][h%10][s];else if(h>=90&&h<98)u.fg=us[1][h%10][s];else if(h>=40&&h<48)u.bg=us[0][h%10][s];else if(h>=100&&h<108)u.bg=us[1][h%10][s];else if(h===38||h===48){var f=h===38;if(l.length>=1){var p=l.shift();if(p==="5"&&l.length>=1){var g=parseInt(l.shift());if(g>=0&&g<=255)if(!o)this.PALETTE_COLORS||u.setupPalette(),f?u.fg=this.PALETTE_COLORS[g]:u.bg=this.PALETTE_COLORS[g];else{var C=g>=16?"ansi-palette-"+g:us[g>7?1:0][g%8].class;f?u.fg=C:u.bg=C}}else if(p==="2"&&l.length>=3){var m=parseInt(l.shift()),v=parseInt(l.shift()),b=parseInt(l.shift());if(m>=0&&m<=255&&v>=0&&v<=255&&b>=0&&b<=255){var E=m+", "+v+", "+b;o?f?(u.fg="ansi-truecolor",u.fg_truecolor=E):(u.bg="ansi-truecolor",u.bg_truecolor=E):f?u.fg=E:u.bg=E}}}}}return u.fg===null&&u.bg===null&&u.decorations.length===0||(a.fg=u.fg,a.bg=u.bg,a.fg_truecolor=u.fg_truecolor,a.bg_truecolor=u.bg_truecolor,a.decorations=u.decorations,a.decoration=u.decorations.slice(-1).pop()||null,a.was_processed=!0),a}},{key:"processChunk",value:function(n,r,i){var o=this;r=r||{};var s=this.processChunkJson(n,r,i),a=r.use_classes;if(s.decorations=s.decorations.filter(function(f){if(f==="reverse"){s.fg||(s.fg=us[0][7][a?"class":"color"]),s.bg||(s.bg=us[0][0][a?"class":"color"]);var p=s.fg;s.fg=s.bg,s.bg=p;var g=s.fg_truecolor;return s.fg_truecolor=s.bg_truecolor,s.bg_truecolor=g,s.isInverted=!0,!1}return!0}),r.json)return s;if(s.isEmpty())return"";if(!s.was_processed)return s.content;var c=[],l=[],u=[],d={},h=function(p){var g=[],C=void 0;for(C in p)p.hasOwnProperty(C)&&g.push("data-"+C+'="'+o.escapeForHtml(p[C])+'"');return g.length>0?" "+g.join(" "):""};return s.isInverted&&(d["ansi-is-inverted"]="true"),s.fg&&(a?(c.push(s.fg+"-fg"),s.fg_truecolor!==null&&(d["ansi-truecolor-fg"]=s.fg_truecolor,s.fg_truecolor=null)):c.push("color:rgb("+s.fg+")")),s.bg&&(a?(c.push(s.bg+"-bg"),s.bg_truecolor!==null&&(d["ansi-truecolor-bg"]=s.bg_truecolor,s.bg_truecolor=null)):c.push("background-color:rgb("+s.bg+")")),s.decorations.forEach(function(f){if(a){l.push("ansi-"+f);return}f==="bold"?l.push("font-weight:bold"):f==="dim"?l.push("opacity:0.5"):f==="italic"?l.push("font-style:italic"):f==="hidden"?l.push("visibility:hidden"):f==="strikethrough"?u.push("line-through"):u.push(f)}),u.length&&l.push("text-decoration:"+u.join(" ")),a?'<span class="'+c.concat(l).join(" ")+'"'+h(d)+">"+s.content+"</span>":'<span style="'+c.concat(l).join(";")+'"'+h(d)+">"+s.content+"</span>"}},{key:"removeDecoration",value:function(n){var r=this.decorations.indexOf(n);r>=0&&this.decorations.splice(r,1)}}]),t}(),eD=qM;const tD=fd(eD);function nD(t,e){let n=[];for(const r of t.split(`\r
`)){const i=tD.ansiToJson(r,{json:!0,remove_empty:!1});let o=[];for(const s of i){const a=sD(s,e);o=[...o,...a]}n=[...n,X.jsx("span",{children:o},n.length)]}return n}const rD=/(\s|^)((\w+):\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,iD=/(?<slorp1>\s|^)(?<name>[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+[a-zA-Z])(?<slorp2>\s|$|\.)/g,oD=/@\[exit:([a-zA-Z]+)\]([a-zA-Z]+)@\[\/\]/g;function sD(t,e){const n=aD(t),r=[];let i=0,o=0;function s(u,d){let h;for(;(h=u.exec(t.content))!==null;){const f=h.index;f>i&&r.push(t.content.substring(i,f)),r.push(d(h)),i=u.lastIndex}}function a(u){const[,d,h]=u,f=h;return X.jsxs(X.Fragment,{children:[d,X.jsx("a",{href:f,target:"_blank",rel:"noreferrer",children:h})]})}function c(u){const d=u.groups.name,h=`mailto:${d}`;return X.jsxs(X.Fragment,{children:[u.groups.slorp1,X.jsx("a",{href:h,target:"_blank",rel:"noreferrer",children:d}),u.groups.slorp2]})}function l(u){const[,d,h]=u;return X.jsx("a",{onClick:()=>e(d),className:"exit",children:h})}return s(rD,a),s(iD,c),s(oD,l),i<t.content.length&&r.push(t.content.substring(i)),r.map(u=>X.jsx("span",{style:n,children:u},o++))}function aD(t){const e={};switch(t.bg&&(e.backgroundColor=`rgb(${t.bg})`),t.fg&&(e.color=`rgb(${t.fg})`),t.decoration){case"bold":e.fontWeight="bold";break;case"dim":e.opacity="0.5";break;case"italic":e.fontStyle="italic";break;case"hidden":e.visibility="hidden";break;case"strikethrough":e.textDecoration="line-through";break;case"underline":e.textDecoration="underline";break;case"blink":e.textDecoration="blink";break}return e}var $s={},gl={},Bk=S;function _e(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kn=Object.prototype.hasOwnProperty,cD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ab={},kb={};function Fk(t){return Kn.call(kb,t)?!0:Kn.call(Ab,t)?!1:cD.test(t)?kb[t]=!0:(Ab[t]=!0,!1)}function zn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){mn[t]=new zn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];mn[e]=new zn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){mn[t]=new zn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){mn[t]=new zn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){mn[t]=new zn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){mn[t]=new zn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){mn[t]=new zn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){mn[t]=new zn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){mn[t]=new zn(t,5,!1,t.toLowerCase(),null,!1,!1)});var ky=/[\-:]([a-z])/g;function Ey(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ky,Ey);mn[e]=new zn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ky,Ey);mn[e]=new zn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ky,Ey);mn[e]=new zn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){mn[t]=new zn(t,1,!1,t.toLowerCase(),null,!1,!1)});mn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){mn[t]=new zn(t,1,!1,t.toLowerCase(),null,!0,!0)});var Ph={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lD=["Webkit","ms","Moz","O"];Object.keys(Ph).forEach(function(t){lD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ph[e]=Ph[t]})});var uD=/["'&<>]/;function Fn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=uD.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var dD=/([A-Z])/g,hD=/^ms-/,av=Array.isArray;function lo(t,e){return{insertionMode:t,selectedValue:e}}function fD(t,e,n){switch(e){case"select":return lo(1,n.value!=null?n.value:n.defaultValue);case"svg":return lo(2,null);case"math":return lo(3,null);case"foreignObject":return lo(1,null);case"table":return lo(4,null);case"thead":case"tbody":case"tfoot":return lo(5,null);case"colgroup":return lo(7,null);case"tr":return lo(6,null)}return 4<=t.insertionMode||t.insertionMode===0?lo(1,null):t}var Eb=new Map;function Uk(t,e,n){if(typeof n!="object")throw Error(_e(62));e=!0;for(var r in n)if(Kn.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=Fn(r);i=Fn((""+i).trim())}else{o=r;var s=Eb.get(o);s!==void 0||(s=Fn(o.replace(dD,"-$1").toLowerCase().replace(hD,"-ms-")),Eb.set(o,s)),o=s,i=typeof i=="number"?i===0||Kn.call(Ph,r)?""+i:i+"px":Fn((""+i).trim())}e?(e=!1,t.push(' style="',o,":",i)):t.push(";",o,":",i)}}e||t.push('"')}function ur(t,e,n,r){switch(n){case"style":Uk(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=mn.hasOwnProperty(n)?mn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=e.attributeName,e.type){case 3:r&&t.push(" ",n,'=""');break;case 4:r===!0?t.push(" ",n,'=""'):r!==!1&&t.push(" ",n,'="',Fn(r),'"');break;case 5:isNaN(r)||t.push(" ",n,'="',Fn(r),'"');break;case 6:!isNaN(r)&&1<=r&&t.push(" ",n,'="',Fn(r),'"');break;default:e.sanitizeURL&&(r=""+r),t.push(" ",n,'="',Fn(r),'"')}}else if(Fk(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(" ",n,'="',Fn(r),'"')}}}function Rh(t,e,n){if(e!=null){if(n!=null)throw Error(_e(60));if(typeof e!="object"||!("__html"in e))throw Error(_e(61));e=e.__html,e!=null&&t.push(""+e)}}function pD(t){var e="";return Bk.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}function Pg(t,e,n,r){t.push(Ti(n));var i=n=null,o;for(o in e)if(Kn.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:ur(t,r,o,s)}}return t.push(">"),Rh(t,i,n),typeof n=="string"?(t.push(Fn(n)),null):n}var gD=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Tb=new Map;function Ti(t){var e=Tb.get(t);if(e===void 0){if(!gD.test(t))throw Error(_e(65,t));e="<"+t,Tb.set(t,e)}return e}function mD(t,e,n,r,i){switch(e){case"select":t.push(Ti("select"));var o=null,s=null;for(u in n)if(Kn.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:ur(t,r,u,a)}}return t.push(">"),Rh(t,s,o),o;case"option":s=i.selectedValue,t.push(Ti("option"));var c=a=null,l=null,u=null;for(o in n)if(Kn.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:ur(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:pD(a),av(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(' selected=""');break}}else""+s===n&&t.push(' selected=""');else l&&t.push(' selected=""');return t.push(">"),Rh(t,u,a),a;case"textarea":t.push(Ti("textarea")),u=s=o=null;for(a in n)if(Kn.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(_e(91));default:ur(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(">"),u!=null){if(o!=null)throw Error(_e(92));if(av(u)&&1<u.length)throw Error(_e(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o!==null&&t.push(Fn(""+o)),null;case"input":t.push(Ti("input")),c=u=a=o=null;for(s in n)if(Kn.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(_e(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:ur(t,r,s,l)}return u!==null?ur(t,r,"checked",u):c!==null&&ur(t,r,"checked",c),o!==null?ur(t,r,"value",o):a!==null&&ur(t,r,"value",a),t.push("/>"),null;case"menuitem":t.push(Ti("menuitem"));for(var h in n)if(Kn.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(_e(400));default:ur(t,r,h,o)}return t.push(">"),null;case"title":t.push(Ti("title")),o=null;for(d in n)if(Kn.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(_e(434));default:ur(t,r,d,s)}return t.push(">"),o;case"listing":case"pre":t.push(Ti(e)),s=o=null;for(c in n)if(Kn.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:ur(t,r,c,a)}if(t.push(">"),s!=null){if(o!=null)throw Error(_e(60));if(typeof s!="object"||!("__html"in s))throw Error(_e(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(`
`,n):t.push(""+n))}return typeof o=="string"&&o[0]===`
`&&t.push(`
`),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Ti(e));for(var f in n)if(Kn.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(_e(399,e));default:ur(t,r,f,o)}return t.push("/>"),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Pg(t,n,e,r);case"html":return i.insertionMode===0&&t.push("<!DOCTYPE html>"),Pg(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Pg(t,n,e,r);t.push(Ti(e)),s=o=null;for(l in n)if(Kn.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":Uk(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:Fk(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(" ",l,'="',Fn(a),'"')}return t.push(">"),Rh(t,s,o),o}}function xb(t,e,n){if(t.push('<!--$?--><template id="'),n===null)throw Error(_e(395));return t.push(n),t.push('"></template>')}function vD(t,e,n,r){switch(n.insertionMode){case 0:case 1:return t.push('<div hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 2:return t.push('<svg aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 3:return t.push('<math aria-hidden="true" style="display:none" id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 4:return t.push('<table hidden id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 5:return t.push('<table hidden><tbody id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 6:return t.push('<table hidden><tr id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');case 7:return t.push('<table hidden><colgroup id="'),t.push(e.segmentPrefix),e=r.toString(16),t.push(e),t.push('">');default:throw Error(_e(397))}}function yD(t,e){switch(e.insertionMode){case 0:case 1:return t.push("</div>");case 2:return t.push("</svg>");case 3:return t.push("</math>");case 4:return t.push("</table>");case 5:return t.push("</tbody></table>");case 6:return t.push("</tr></table>");case 7:return t.push("</colgroup></table>");default:throw Error(_e(397))}}var CD=/[<\u2028\u2029]/g;function Rg(t){return JSON.stringify(t).replace(CD,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}function ID(t,e){return e=e===void 0?"":e,{bootstrapChunks:[],startInlineScript:"<script>",placeholderPrefix:e+"P:",segmentPrefix:e+"S:",boundaryPrefix:e+"B:",idPrefix:e,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1,generateStaticMarkup:t}}function Pb(t,e,n,r){return n.generateStaticMarkup?(t.push(Fn(e)),!1):(e===""?t=r:(r&&t.push("<!-- -->"),t.push(Fn(e)),t=!0),t)}var bu=Object.assign,bD=Symbol.for("react.element"),Vk=Symbol.for("react.portal"),Gk=Symbol.for("react.fragment"),Wk=Symbol.for("react.strict_mode"),jk=Symbol.for("react.profiler"),Zk=Symbol.for("react.provider"),zk=Symbol.for("react.context"),Hk=Symbol.for("react.forward_ref"),Xk=Symbol.for("react.suspense"),$k=Symbol.for("react.suspense_list"),Kk=Symbol.for("react.memo"),Ty=Symbol.for("react.lazy"),SD=Symbol.for("react.scope"),wD=Symbol.for("react.debug_trace_mode"),AD=Symbol.for("react.legacy_hidden"),kD=Symbol.for("react.default_value"),Rb=Symbol.iterator;function cv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gk:return"Fragment";case Vk:return"Portal";case jk:return"Profiler";case Wk:return"StrictMode";case Xk:return"Suspense";case $k:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case zk:return(t.displayName||"Context")+".Consumer";case Zk:return(t._context.displayName||"Context")+".Provider";case Hk:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Kk:return e=t.displayName||null,e!==null?e:cv(t.type)||"Memo";case Ty:e=t._payload,t=t._init;try{return cv(t(e))}catch{}}return null}var Jk={};function Nb(t,e){if(t=t.contextTypes,!t)return Jk;var n={},r;for(r in t)n[r]=e[r];return n}var Sa=null;function kp(t,e){if(t!==e){t.context._currentValue2=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(_e(401))}else{if(n===null)throw Error(_e(401));kp(t,n)}e.context._currentValue2=e.value}}function Yk(t){t.context._currentValue2=t.parentValue,t=t.parent,t!==null&&Yk(t)}function Qk(t){var e=t.parent;e!==null&&Qk(e),t.context._currentValue2=t.value}function qk(t,e){if(t.context._currentValue2=t.parentValue,t=t.parent,t===null)throw Error(_e(402));t.depth===e.depth?kp(t,e):qk(t,e)}function eE(t,e){var n=e.parent;if(n===null)throw Error(_e(402));t.depth===n.depth?kp(t,n):eE(t,n),e.context._currentValue2=e.value}function Ef(t){var e=Sa;e!==t&&(e===null?Qk(t):t===null?Yk(e):e.depth===t.depth?kp(e,t):e.depth>t.depth?qk(e,t):eE(e,t),Sa=t)}var _b={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function Ob(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=_b,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue2:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:bu({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&_b.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=bu({},o,a)):bu(o,a))}t.state=o}else o.queue=null}var ED={id:1,overflow:""};function lv(t,e,n){var r=t.id;t=t.overflow;var i=32-Nh(r)-1;r&=~(1<<i),n+=1;var o=32-Nh(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-Nh(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var Nh=Math.clz32?Math.clz32:PD,TD=Math.log,xD=Math.LN2;function PD(t){return t>>>=0,t===0?32:31-(TD(t)/xD|0)|0}function RD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ND=typeof Object.is=="function"?Object.is:RD,Qo=null,xy=null,_h=null,lt=null,tu=!1,Tf=!1,Xu=0,xs=null,Ep=0;function ha(){if(Qo===null)throw Error(_e(321));return Qo}function Mb(){if(0<Ep)throw Error(_e(312));return{memoizedState:null,queue:null,next:null}}function Py(){return lt===null?_h===null?(tu=!1,_h=lt=Mb()):(tu=!0,lt=_h):lt.next===null?(tu=!1,lt=lt.next=Mb()):(tu=!0,lt=lt.next),lt}function Ry(){xy=Qo=null,Tf=!1,_h=null,Ep=0,lt=xs=null}function tE(t,e){return typeof e=="function"?e(t):e}function Db(t,e,n){if(Qo=ha(),lt=Py(),tu){var r=lt.queue;if(e=r.dispatch,xs!==null&&(n=xs.get(r),n!==void 0)){xs.delete(r),r=lt.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return lt.memoizedState=r,[r,e]}return[lt.memoizedState,e]}return t=t===tE?typeof e=="function"?e():e:n!==void 0?n(e):e,lt.memoizedState=t,t=lt.queue={last:null,dispatch:null},t=t.dispatch=_D.bind(null,Qo,t),[lt.memoizedState,t]}function Lb(t,e){if(Qo=ha(),lt=Py(),e=e===void 0?null:e,lt!==null){var n=lt.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!ND(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),lt.memoizedState=[t,e],t}function _D(t,e,n){if(25<=Ep)throw Error(_e(301));if(t===Qo)if(Tf=!0,t={action:n,next:null},xs===null&&(xs=new Map),n=xs.get(e),n===void 0)xs.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function OD(){throw Error(_e(394))}function rh(){}var Bb={readContext:function(t){return t._currentValue2},useContext:function(t){return ha(),t._currentValue2},useMemo:Lb,useReducer:Db,useRef:function(t){Qo=ha(),lt=Py();var e=lt.memoizedState;return e===null?(t={current:t},lt.memoizedState=t):e},useState:function(t){return Db(tE,t)},useInsertionEffect:rh,useLayoutEffect:function(){},useCallback:function(t,e){return Lb(function(){return t},e)},useImperativeHandle:rh,useEffect:rh,useDebugValue:rh,useDeferredValue:function(t){return ha(),t},useTransition:function(){return ha(),[!1,OD]},useId:function(){var t=xy.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Nh(t)-1)).toString(32)+e;var n=Oh;if(n===null)throw Error(_e(404));return e=Xu++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return ha(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(_e(407));return n()}},Oh=null,Ng=Bk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function MD(t){return console.error(t),null}function nu(){}function DD(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?MD:i,onAllReady:nu,onShellReady:s===void 0?nu:s,onShellError:nu,onFatalError:nu},n=xf(e,0,null,n,!1,!1),n.parentFlushed=!0,t=Ny(e,t,null,n,u,Jk,null,ED),l.push(t),e}function Ny(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&iE(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function xf(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function $u(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Pf(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,t.destination.destroy(e)):(t.status=1,t.fatalError=e)}function Fb(t,e,n,r,i){for(Qo={},xy=e,Xu=0,t=n(r,i);Tf;)Tf=!1,Xu=0,Ep+=1,lt=null,t=n(r,i);return Ry(),t}function Ub(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(_e(108,cv(r)||"Unknown",a));r=bu({},s,n)}e.legacyContext=r,vr(t,e,i),e.legacyContext=s}else vr(t,e,i)}function Vb(t,e){if(t&&t.defaultProps){e=bu({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uv(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=Nb(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue2:i),Ob(o,n,r,i),Ub(t,e,o,n)}else{o=Nb(n,e.legacyContext),i=Fb(t,e,n,r,o);var s=Xu!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)Ob(i,n,r,o),Ub(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=lv(r,1,0);try{vr(t,e,i)}finally{e.treeContext=r}}else vr(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=mD(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=fD(s,n,r),dv(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push("</",n,">")}i.lastPushedText=!1}else{switch(n){case AD:case wD:case Wk:case jk:case Gk:vr(t,e,r.children);return;case $k:vr(t,e,r.children);return;case SD:throw Error(_e(343));case Xk:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=xf(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=xf(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(dv(t,e,r),t.responseState.generateStaticMarkup||l.lastPushedText&&l.textEmbedded&&l.chunks.push("<!-- -->"),l.status=1,Rf(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=$u(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=Ny(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Hk:if(r=Fb(t,e,n.render,r,i),Xu!==0){n=e.treeContext,e.treeContext=lv(n,1,0);try{vr(t,e,r)}finally{e.treeContext=n}}else vr(t,e,r);return;case Kk:n=n.type,r=Vb(n,r),uv(t,e,n,r,i);return;case Zk:if(i=r.children,n=n._context,r=r.value,o=n._currentValue2,n._currentValue2=r,s=Sa,Sa=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,vr(t,e,i),t=Sa,t===null)throw Error(_e(403));r=t.parentValue,t.context._currentValue2=r===kD?t.context._defaultValue:r,t=Sa=t.parent,e.context=t;return;case zk:r=r.children,r=r(n._currentValue2),vr(t,e,r);return;case Ty:i=n._init,n=i(n._payload),r=Vb(n,r),uv(t,e,n,r,void 0);return}throw Error(_e(130,n==null?n:typeof n,""))}}function vr(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case bD:uv(t,e,n.type,n.props,n.ref);return;case Vk:throw Error(_e(257));case Ty:var r=n._init;n=r(n._payload),vr(t,e,n);return}if(av(n)){Gb(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=Rb&&n[Rb]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);Gb(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(_e(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=Pb(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=Pb(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function Gb(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=lv(o,r,i);try{dv(t,e,n[i])}finally{e.treeContext=o}}}function dv(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return vr(t,e,n)}catch(c){if(Ry(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=xf(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=Ny(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Ef(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Ef(o),c}}function LD(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,rE(this,e,t)}function nE(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.push(null))):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(_e(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return nE(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function Rf(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Rf(t,n)}else t.completedSegments.push(e)}function rE(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(_e(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=nu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Rf(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(LD,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Rf(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function iE(t){if(t.status!==2){var e=Sa,n=Ng.current;Ng.current=Bb;var r=Oh;Oh=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){Ef(s.context);try{vr(a,s,s.node),a.responseState.generateStaticMarkup||c.lastPushedText&&c.textEmbedded&&c.chunks.push("<!-- -->"),s.abortSet.delete(s),c.status=1,rE(a,s.blockedBoundary,c)}catch(p){if(Ry(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=s.ping;p.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=p,h=$u(a,d);if(u===null?Pf(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&_y(t,t.destination)}catch(p){$u(t,p),Pf(t,p)}finally{Oh=r,Ng.current=n,n===Bb&&Ef(e)}}}function ih(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,e.push('<template id="'),e.push(t.placeholderPrefix),t=r.toString(16),e.push(t),e.push('"></template>');case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)e.push(r[o]);i=Tp(t,e,i)}for(;o<r.length-1;o++)e.push(r[o]);return o<r.length&&(i=e.push(r[o])),i;default:throw Error(_e(390))}}function Tp(t,e,n){var r=n.boundary;if(r===null)return ih(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)return t.responseState.generateStaticMarkup||(r=r.errorDigest,e.push("<!--$!-->"),e.push("<template"),r&&(e.push(' data-dgst="'),r=Fn(r),e.push(r),e.push('"')),e.push("></template>")),ih(t,e,n),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t;if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;return i=i.boundaryPrefix+o.toString(16),r=r.id=i,xb(e,t.responseState,r),ih(t,e,n),e.push("<!--/$-->")}if(r.byteSize>t.progressiveChunkSize)return r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),xb(e,t.responseState,r.id),ih(t,e,n),e.push("<!--/$-->");if(t.responseState.generateStaticMarkup||e.push("<!--$-->"),n=r.completedSegments,n.length!==1)throw Error(_e(391));return Tp(t,e,n[0]),t=t.responseState.generateStaticMarkup?!0:e.push("<!--/$-->"),t}function Wb(t,e,n){return vD(e,t.responseState,n.formatContext,n.id),Tp(t,e,n),yD(e,n.formatContext)}function jb(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)oE(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,e.push(t.startInlineScript),t.sentCompleteBoundaryFunction?e.push('$RC("'):(t.sentCompleteBoundaryFunction=!0,e.push('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("')),r===null)throw Error(_e(395));return n=n.toString(16),e.push(r),e.push('","'),e.push(t.segmentPrefix),e.push(n),e.push('")<\/script>')}function oE(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(_e(392));return Wb(t,e,r)}return Wb(t,e,r),t=t.responseState,e.push(t.startInlineScript),t.sentCompleteSegmentFunction?e.push('$RS("'):(t.sentCompleteSegmentFunction=!0,e.push('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("')),e.push(t.segmentPrefix),i=i.toString(16),e.push(i),e.push('","'),e.push(t.placeholderPrefix),e.push(i),e.push('")<\/script>')}function _y(t,e){try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Tp(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)e.push(r[n]);n<r.length&&e.push(r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(r.push(a.startInlineScript),a.sentClientRenderFunction?r.push('$RX("'):(a.sentClientRenderFunction=!0,r.push('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("')),c===null)throw Error(_e(395));if(r.push(c),r.push('"'),l||u||d){r.push(",");var h=Rg(l||"");r.push(h)}if(u||d){r.push(",");var f=Rg(u||"");r.push(f)}if(d){r.push(",");var p=Rg(d);r.push(p)}if(!r.push(")<\/script>")){t.destination=null,o++,i.splice(0,o);return}}i.splice(0,o);var g=t.completedBoundaries;for(o=0;o<g.length;o++)if(!jb(t,e,g[o])){t.destination=null,o++,g.splice(0,o);return}g.splice(0,o);var C=t.partialBoundaries;for(o=0;o<C.length;o++){var m=C[o];e:{i=t,s=e;var v=m.completedSegments;for(a=0;a<v.length;a++)if(!oE(i,s,m,v[a])){a++,v.splice(0,a);var b=!1;break e}v.splice(0,a),b=!0}if(!b){t.destination=null,o++,C.splice(0,o);return}}C.splice(0,o);var E=t.completedBoundaries;for(o=0;o<E.length;o++)if(!jb(t,e,E[o])){t.destination=null,o++,E.splice(0,o);return}E.splice(0,o)}finally{t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.push(null)}}function BD(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return nE(r,t,e)}),n.clear(),t.destination!==null&&_y(t,t.destination)}catch(r){$u(t,r),Pf(t,r)}}function FD(){}function sE(t,e,n,r){var i=!1,o=null,s="",a={push:function(l){return l!==null&&(s+=l),!0},destroy:function(l){i=!0,o=l}},c=!1;if(t=DD(t,ID(n,e?e.identifierPrefix:void 0),{insertionMode:1,selectedValue:null},1/0,FD,void 0,function(){c=!0}),iE(t),BD(t,r),t.status===1)t.status=2,a.destroy(t.fatalError);else if(t.status!==2&&t.destination===null){t.destination=a;try{_y(t,a)}catch(l){$u(t,l),Pf(t,l)}}if(i)throw o;if(!c)throw Error(_e(426));return s}gl.renderToNodeStream=function(){throw Error(_e(207))};gl.renderToStaticMarkup=function(t,e){return sE(t,e,!0,'The server used "renderToStaticMarkup" which does not support Suspense. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};gl.renderToStaticNodeStream=function(){throw Error(_e(208))};gl.renderToString=function(t,e){return sE(t,e,!1,'The server used "renderToString" which does not support Suspense. If you intended for this Suspense boundary to render the fallback content on the server consider throwing an Error somewhere within the Suspense boundary. If you intended to have the server wait for the suspended component please switch to "renderToReadableStream" which supports Suspense on the server')};gl.version="18.3.1";var Oy={},aE=S;function Be(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yr=null,Cr=0;function Ie(t,e){if(e.length!==0)if(512<e.length)0<Cr&&(t.enqueue(new Uint8Array(yr.buffer,0,Cr)),yr=new Uint8Array(512),Cr=0),t.enqueue(e);else{var n=yr.length-Cr;n<e.length&&(n===0?t.enqueue(yr):(yr.set(e.subarray(0,n),Cr),t.enqueue(yr),e=e.subarray(n)),yr=new Uint8Array(512),Cr=0),yr.set(e,Cr),Cr+=e.length}}function It(t,e){return Ie(t,e),!0}function Zb(t){yr&&0<Cr&&(t.enqueue(new Uint8Array(yr.buffer,0,Cr)),yr=null,Cr=0)}var cE=new TextEncoder;function Fe(t){return cE.encode(t)}function ue(t){return cE.encode(t)}function lE(t,e){typeof t.error=="function"?t.error(e):t.close()}var Jn=Object.prototype.hasOwnProperty,UD=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,zb={},Hb={};function uE(t){return Jn.call(Hb,t)?!0:Jn.call(zb,t)?!1:UD.test(t)?Hb[t]=!0:(zb[t]=!0,!1)}function Hn(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var vn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vn[t]=new Hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vn[e]=new Hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vn[t]=new Hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vn[t]=new Hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vn[t]=new Hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vn[t]=new Hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vn[t]=new Hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vn[t]=new Hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vn[t]=new Hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var My=/[\-:]([a-z])/g;function Dy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(My,Dy);vn[e]=new Hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(My,Dy);vn[e]=new Hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(My,Dy);vn[e]=new Hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vn[t]=new Hn(t,1,!1,t.toLowerCase(),null,!1,!1)});vn.xlinkHref=new Hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vn[t]=new Hn(t,1,!1,t.toLowerCase(),null,!0,!0)});var Mh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},VD=["Webkit","ms","Moz","O"];Object.keys(Mh).forEach(function(t){VD.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mh[e]=Mh[t]})});var GD=/["'&<>]/;function dn(t){if(typeof t=="boolean"||typeof t=="number")return""+t;t=""+t;var e=GD.exec(t);if(e){var n="",r,i=0;for(r=e.index;r<t.length;r++){switch(t.charCodeAt(r)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#x27;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}i!==r&&(n+=t.substring(i,r)),i=r+1,n+=e}t=i!==r?n+t.substring(i,r):n}return t}var WD=/([A-Z])/g,jD=/^ms-/,hv=Array.isArray,ZD=ue("<script>"),zD=ue("<\/script>"),HD=ue('<script src="'),XD=ue('<script type="module" src="'),Xb=ue('" async=""><\/script>'),$D=/(<\/|<)(s)(cript)/gi;function KD(t,e,n,r){return""+e+(n==="s"?"\\u0073":"\\u0053")+r}function JD(t,e,n,r,i){t=t===void 0?"":t,e=e===void 0?ZD:ue('<script nonce="'+dn(e)+'">');var o=[];if(n!==void 0&&o.push(e,Fe((""+n).replace($D,KD)),zD),r!==void 0)for(n=0;n<r.length;n++)o.push(HD,Fe(dn(r[n])),Xb);if(i!==void 0)for(r=0;r<i.length;r++)o.push(XD,Fe(dn(i[r])),Xb);return{bootstrapChunks:o,startInlineScript:e,placeholderPrefix:ue(t+"P:"),segmentPrefix:ue(t+"S:"),boundaryPrefix:t+"B:",idPrefix:t,nextSuspenseID:0,sentCompleteSegmentFunction:!1,sentCompleteBoundaryFunction:!1,sentClientRenderFunction:!1}}function xi(t,e){return{insertionMode:t,selectedValue:e}}function YD(t){return xi(t==="http://www.w3.org/2000/svg"?2:t==="http://www.w3.org/1998/Math/MathML"?3:0,null)}function QD(t,e,n){switch(e){case"select":return xi(1,n.value!=null?n.value:n.defaultValue);case"svg":return xi(2,null);case"math":return xi(3,null);case"foreignObject":return xi(1,null);case"table":return xi(4,null);case"thead":case"tbody":case"tfoot":return xi(5,null);case"colgroup":return xi(7,null);case"tr":return xi(6,null)}return 4<=t.insertionMode||t.insertionMode===0?xi(1,null):t}var Ly=ue("<!-- -->");function $b(t,e,n,r){return e===""?r:(r&&t.push(Ly),t.push(Fe(dn(e))),!0)}var Kb=new Map,qD=ue(' style="'),Jb=ue(":"),e2=ue(";");function dE(t,e,n){if(typeof n!="object")throw Error(Be(62));e=!0;for(var r in n)if(Jn.call(n,r)){var i=n[r];if(i!=null&&typeof i!="boolean"&&i!==""){if(r.indexOf("--")===0){var o=Fe(dn(r));i=Fe(dn((""+i).trim()))}else{o=r;var s=Kb.get(o);s!==void 0||(s=ue(dn(o.replace(WD,"-$1").toLowerCase().replace(jD,"-ms-"))),Kb.set(o,s)),o=s,i=typeof i=="number"?i===0||Jn.call(Mh,r)?Fe(""+i):Fe(i+"px"):Fe(dn((""+i).trim()))}e?(e=!1,t.push(qD,o,Jb,i)):t.push(e2,o,Jb,i)}}e||t.push(fa)}var ps=ue(" "),uc=ue('="'),fa=ue('"'),Yb=ue('=""');function dr(t,e,n,r){switch(n){case"style":dE(t,e,r);return;case"defaultValue":case"defaultChecked":case"innerHTML":case"suppressContentEditableWarning":case"suppressHydrationWarning":return}if(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N"){if(e=vn.hasOwnProperty(n)?vn[n]:null,e!==null){switch(typeof r){case"function":case"symbol":return;case"boolean":if(!e.acceptsBooleans)return}switch(n=Fe(e.attributeName),e.type){case 3:r&&t.push(ps,n,Yb);break;case 4:r===!0?t.push(ps,n,Yb):r!==!1&&t.push(ps,n,uc,Fe(dn(r)),fa);break;case 5:isNaN(r)||t.push(ps,n,uc,Fe(dn(r)),fa);break;case 6:!isNaN(r)&&1<=r&&t.push(ps,n,uc,Fe(dn(r)),fa);break;default:e.sanitizeURL&&(r=""+r),t.push(ps,n,uc,Fe(dn(r)),fa)}}else if(uE(n)){switch(typeof r){case"function":case"symbol":return;case"boolean":if(e=n.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-")return}t.push(ps,Fe(n),uc,Fe(dn(r)),fa)}}}var gs=ue(">"),Qb=ue("/>");function Dh(t,e,n){if(e!=null){if(n!=null)throw Error(Be(60));if(typeof e!="object"||!("__html"in e))throw Error(Be(61));e=e.__html,e!=null&&t.push(Fe(""+e))}}function t2(t){var e="";return aE.Children.forEach(t,function(n){n!=null&&(e+=n)}),e}var _g=ue(' selected=""');function Og(t,e,n,r){t.push(Pi(n));var i=n=null,o;for(o in e)if(Jn.call(e,o)){var s=e[o];if(s!=null)switch(o){case"children":n=s;break;case"dangerouslySetInnerHTML":i=s;break;default:dr(t,r,o,s)}}return t.push(gs),Dh(t,i,n),typeof n=="string"?(t.push(Fe(dn(n))),null):n}var Mg=ue(`
`),n2=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,qb=new Map;function Pi(t){var e=qb.get(t);if(e===void 0){if(!n2.test(t))throw Error(Be(65,t));e=ue("<"+t),qb.set(t,e)}return e}var r2=ue("<!DOCTYPE html>");function i2(t,e,n,r,i){switch(e){case"select":t.push(Pi("select"));var o=null,s=null;for(u in n)if(Jn.call(n,u)){var a=n[u];if(a!=null)switch(u){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"defaultValue":case"value":break;default:dr(t,r,u,a)}}return t.push(gs),Dh(t,s,o),o;case"option":s=i.selectedValue,t.push(Pi("option"));var c=a=null,l=null,u=null;for(o in n)if(Jn.call(n,o)){var d=n[o];if(d!=null)switch(o){case"children":a=d;break;case"selected":l=d;break;case"dangerouslySetInnerHTML":u=d;break;case"value":c=d;default:dr(t,r,o,d)}}if(s!=null)if(n=c!==null?""+c:t2(a),hv(s)){for(r=0;r<s.length;r++)if(""+s[r]===n){t.push(_g);break}}else""+s===n&&t.push(_g);else l&&t.push(_g);return t.push(gs),Dh(t,u,a),a;case"textarea":t.push(Pi("textarea")),u=s=o=null;for(a in n)if(Jn.call(n,a)&&(c=n[a],c!=null))switch(a){case"children":u=c;break;case"value":o=c;break;case"defaultValue":s=c;break;case"dangerouslySetInnerHTML":throw Error(Be(91));default:dr(t,r,a,c)}if(o===null&&s!==null&&(o=s),t.push(gs),u!=null){if(o!=null)throw Error(Be(92));if(hv(u)&&1<u.length)throw Error(Be(93));o=""+u}return typeof o=="string"&&o[0]===`
`&&t.push(Mg),o!==null&&t.push(Fe(dn(""+o))),null;case"input":t.push(Pi("input")),c=u=a=o=null;for(s in n)if(Jn.call(n,s)&&(l=n[s],l!=null))switch(s){case"children":case"dangerouslySetInnerHTML":throw Error(Be(399,"input"));case"defaultChecked":c=l;break;case"defaultValue":a=l;break;case"checked":u=l;break;case"value":o=l;break;default:dr(t,r,s,l)}return u!==null?dr(t,r,"checked",u):c!==null&&dr(t,r,"checked",c),o!==null?dr(t,r,"value",o):a!==null&&dr(t,r,"value",a),t.push(Qb),null;case"menuitem":t.push(Pi("menuitem"));for(var h in n)if(Jn.call(n,h)&&(o=n[h],o!=null))switch(h){case"children":case"dangerouslySetInnerHTML":throw Error(Be(400));default:dr(t,r,h,o)}return t.push(gs),null;case"title":t.push(Pi("title")),o=null;for(d in n)if(Jn.call(n,d)&&(s=n[d],s!=null))switch(d){case"children":o=s;break;case"dangerouslySetInnerHTML":throw Error(Be(434));default:dr(t,r,d,s)}return t.push(gs),o;case"listing":case"pre":t.push(Pi(e)),s=o=null;for(c in n)if(Jn.call(n,c)&&(a=n[c],a!=null))switch(c){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;default:dr(t,r,c,a)}if(t.push(gs),s!=null){if(o!=null)throw Error(Be(60));if(typeof s!="object"||!("__html"in s))throw Error(Be(61));n=s.__html,n!=null&&(typeof n=="string"&&0<n.length&&n[0]===`
`?t.push(Mg,Fe(n)):t.push(Fe(""+n)))}return typeof o=="string"&&o[0]===`
`&&t.push(Mg),o;case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":t.push(Pi(e));for(var f in n)if(Jn.call(n,f)&&(o=n[f],o!=null))switch(f){case"children":case"dangerouslySetInnerHTML":throw Error(Be(399,e));default:dr(t,r,f,o)}return t.push(Qb),null;case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return Og(t,n,e,r);case"html":return i.insertionMode===0&&t.push(r2),Og(t,n,e,r);default:if(e.indexOf("-")===-1&&typeof n.is!="string")return Og(t,n,e,r);t.push(Pi(e)),s=o=null;for(l in n)if(Jn.call(n,l)&&(a=n[l],a!=null))switch(l){case"children":o=a;break;case"dangerouslySetInnerHTML":s=a;break;case"style":dE(t,r,a);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":break;default:uE(l)&&typeof a!="function"&&typeof a!="symbol"&&t.push(ps,Fe(l),uc,Fe(dn(a)),fa)}return t.push(gs),Dh(t,s,o),o}}var o2=ue("</"),s2=ue(">"),a2=ue('<template id="'),c2=ue('"></template>'),l2=ue("<!--$-->"),u2=ue('<!--$?--><template id="'),d2=ue('"></template>'),h2=ue("<!--$!-->"),f2=ue("<!--/$-->"),p2=ue("<template"),g2=ue('"'),m2=ue(' data-dgst="');ue(' data-msg="');ue(' data-stck="');var v2=ue("></template>");function eS(t,e,n){if(Ie(t,u2),n===null)throw Error(Be(395));return Ie(t,n),It(t,d2)}var y2=ue('<div hidden id="'),C2=ue('">'),I2=ue("</div>"),b2=ue('<svg aria-hidden="true" style="display:none" id="'),S2=ue('">'),w2=ue("</svg>"),A2=ue('<math aria-hidden="true" style="display:none" id="'),k2=ue('">'),E2=ue("</math>"),T2=ue('<table hidden id="'),x2=ue('">'),P2=ue("</table>"),R2=ue('<table hidden><tbody id="'),N2=ue('">'),_2=ue("</tbody></table>"),O2=ue('<table hidden><tr id="'),M2=ue('">'),D2=ue("</tr></table>"),L2=ue('<table hidden><colgroup id="'),B2=ue('">'),F2=ue("</colgroup></table>");function U2(t,e,n,r){switch(n.insertionMode){case 0:case 1:return Ie(t,y2),Ie(t,e.segmentPrefix),Ie(t,Fe(r.toString(16))),It(t,C2);case 2:return Ie(t,b2),Ie(t,e.segmentPrefix),Ie(t,Fe(r.toString(16))),It(t,S2);case 3:return Ie(t,A2),Ie(t,e.segmentPrefix),Ie(t,Fe(r.toString(16))),It(t,k2);case 4:return Ie(t,T2),Ie(t,e.segmentPrefix),Ie(t,Fe(r.toString(16))),It(t,x2);case 5:return Ie(t,R2),Ie(t,e.segmentPrefix),Ie(t,Fe(r.toString(16))),It(t,N2);case 6:return Ie(t,O2),Ie(t,e.segmentPrefix),Ie(t,Fe(r.toString(16))),It(t,M2);case 7:return Ie(t,L2),Ie(t,e.segmentPrefix),Ie(t,Fe(r.toString(16))),It(t,B2);default:throw Error(Be(397))}}function V2(t,e){switch(e.insertionMode){case 0:case 1:return It(t,I2);case 2:return It(t,w2);case 3:return It(t,E2);case 4:return It(t,P2);case 5:return It(t,_2);case 6:return It(t,D2);case 7:return It(t,F2);default:throw Error(Be(397))}}var G2=ue('function $RS(a,b){a=document.getElementById(a);b=document.getElementById(b);for(a.parentNode.removeChild(a);a.firstChild;)b.parentNode.insertBefore(a.firstChild,b);b.parentNode.removeChild(b)};$RS("'),W2=ue('$RS("'),j2=ue('","'),Z2=ue('")<\/script>'),z2=ue('function $RC(a,b){a=document.getElementById(a);b=document.getElementById(b);b.parentNode.removeChild(b);if(a){a=a.previousSibling;var f=a.parentNode,c=a.nextSibling,e=0;do{if(c&&8===c.nodeType){var d=c.data;if("/$"===d)if(0===e)break;else e--;else"$"!==d&&"$?"!==d&&"$!"!==d||e++}d=c.nextSibling;f.removeChild(c);c=d}while(c);for(;b.firstChild;)f.insertBefore(b.firstChild,c);a.data="$";a._reactRetry&&a._reactRetry()}};$RC("'),H2=ue('$RC("'),X2=ue('","'),$2=ue('")<\/script>'),K2=ue('function $RX(b,c,d,e){var a=document.getElementById(b);a&&(b=a.previousSibling,b.data="$!",a=a.dataset,c&&(a.dgst=c),d&&(a.msg=d),e&&(a.stck=e),b._reactRetry&&b._reactRetry())};$RX("'),J2=ue('$RX("'),Y2=ue('"'),Q2=ue(")<\/script>"),Dg=ue(","),q2=/[<\u2028\u2029]/g;function Lg(t){return JSON.stringify(t).replace(q2,function(e){switch(e){case"<":return"\\u003c";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw Error("escapeJSStringsForInstructionScripts encountered a match it does not know how to replace. this means the match regex and the replacement characters are no longer in sync. This is a bug in React")}})}var Su=Object.assign,eL=Symbol.for("react.element"),hE=Symbol.for("react.portal"),fE=Symbol.for("react.fragment"),pE=Symbol.for("react.strict_mode"),gE=Symbol.for("react.profiler"),mE=Symbol.for("react.provider"),vE=Symbol.for("react.context"),yE=Symbol.for("react.forward_ref"),CE=Symbol.for("react.suspense"),IE=Symbol.for("react.suspense_list"),bE=Symbol.for("react.memo"),By=Symbol.for("react.lazy"),tL=Symbol.for("react.scope"),nL=Symbol.for("react.debug_trace_mode"),rL=Symbol.for("react.legacy_hidden"),iL=Symbol.for("react.default_value"),tS=Symbol.iterator;function fv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fE:return"Fragment";case hE:return"Portal";case gE:return"Profiler";case pE:return"StrictMode";case CE:return"Suspense";case IE:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vE:return(t.displayName||"Context")+".Consumer";case mE:return(t._context.displayName||"Context")+".Provider";case yE:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case bE:return e=t.displayName||null,e!==null?e:fv(t.type)||"Memo";case By:e=t._payload,t=t._init;try{return fv(t(e))}catch{}}return null}var SE={};function nS(t,e){if(t=t.contextTypes,!t)return SE;var n={},r;for(r in t)n[r]=e[r];return n}var wa=null;function xp(t,e){if(t!==e){t.context._currentValue=t.parentValue,t=t.parent;var n=e.parent;if(t===null){if(n!==null)throw Error(Be(401))}else{if(n===null)throw Error(Be(401));xp(t,n)}e.context._currentValue=e.value}}function wE(t){t.context._currentValue=t.parentValue,t=t.parent,t!==null&&wE(t)}function AE(t){var e=t.parent;e!==null&&AE(e),t.context._currentValue=t.value}function kE(t,e){if(t.context._currentValue=t.parentValue,t=t.parent,t===null)throw Error(Be(402));t.depth===e.depth?xp(t,e):kE(t,e)}function EE(t,e){var n=e.parent;if(n===null)throw Error(Be(402));t.depth===n.depth?xp(t,n):EE(t,n),e.context._currentValue=e.value}function Nf(t){var e=wa;e!==t&&(e===null?AE(t):t===null?wE(e):e.depth===t.depth?xp(e,t):e.depth>t.depth?kE(e,t):EE(e,t),wa=t)}var rS={isMounted:function(){return!1},enqueueSetState:function(t,e){t=t._reactInternals,t.queue!==null&&t.queue.push(e)},enqueueReplaceState:function(t,e){t=t._reactInternals,t.replace=!0,t.queue=[e]},enqueueForceUpdate:function(){}};function iS(t,e,n,r){var i=t.state!==void 0?t.state:null;t.updater=rS,t.props=n,t.state=i;var o={queue:[],replace:!1};t._reactInternals=o;var s=e.contextType;if(t.context=typeof s=="object"&&s!==null?s._currentValue:r,s=e.getDerivedStateFromProps,typeof s=="function"&&(s=s(n,i),i=s==null?i:Su({},i,s),t.state=i),typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function"&&(typeof t.UNSAFE_componentWillMount=="function"||typeof t.componentWillMount=="function"))if(e=t.state,typeof t.componentWillMount=="function"&&t.componentWillMount(),typeof t.UNSAFE_componentWillMount=="function"&&t.UNSAFE_componentWillMount(),e!==t.state&&rS.enqueueReplaceState(t,t.state,null),o.queue!==null&&0<o.queue.length)if(e=o.queue,s=o.replace,o.queue=null,o.replace=!1,s&&e.length===1)t.state=e[0];else{for(o=s?e[0]:t.state,i=!0,s=s?1:0;s<e.length;s++){var a=e[s];a=typeof a=="function"?a.call(t,o,n,r):a,a!=null&&(i?(i=!1,o=Su({},o,a)):Su(o,a))}t.state=o}else o.queue=null}var oL={id:1,overflow:""};function pv(t,e,n){var r=t.id;t=t.overflow;var i=32-Lh(r)-1;r&=~(1<<i),n+=1;var o=32-Lh(e)+i;if(30<o){var s=i-i%5;return o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,{id:1<<32-Lh(e)+i|n<<i|r,overflow:o+t}}return{id:1<<o|n<<i|r,overflow:t}}var Lh=Math.clz32?Math.clz32:cL,sL=Math.log,aL=Math.LN2;function cL(t){return t>>>=0,t===0?32:31-(sL(t)/aL|0)|0}function lL(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var uL=typeof Object.is=="function"?Object.is:lL,qo=null,Fy=null,Bh=null,ut=null,ru=!1,_f=!1,Ku=0,Ps=null,Pp=0;function pa(){if(qo===null)throw Error(Be(321));return qo}function oS(){if(0<Pp)throw Error(Be(312));return{memoizedState:null,queue:null,next:null}}function Uy(){return ut===null?Bh===null?(ru=!1,Bh=ut=oS()):(ru=!0,ut=Bh):ut.next===null?(ru=!1,ut=ut.next=oS()):(ru=!0,ut=ut.next),ut}function Vy(){Fy=qo=null,_f=!1,Bh=null,Pp=0,ut=Ps=null}function TE(t,e){return typeof e=="function"?e(t):e}function sS(t,e,n){if(qo=pa(),ut=Uy(),ru){var r=ut.queue;if(e=r.dispatch,Ps!==null&&(n=Ps.get(r),n!==void 0)){Ps.delete(r),r=ut.memoizedState;do r=t(r,n.action),n=n.next;while(n!==null);return ut.memoizedState=r,[r,e]}return[ut.memoizedState,e]}return t=t===TE?typeof e=="function"?e():e:n!==void 0?n(e):e,ut.memoizedState=t,t=ut.queue={last:null,dispatch:null},t=t.dispatch=dL.bind(null,qo,t),[ut.memoizedState,t]}function aS(t,e){if(qo=pa(),ut=Uy(),e=e===void 0?null:e,ut!==null){var n=ut.memoizedState;if(n!==null&&e!==null){var r=n[1];e:if(r===null)r=!1;else{for(var i=0;i<r.length&&i<e.length;i++)if(!uL(e[i],r[i])){r=!1;break e}r=!0}if(r)return n[0]}}return t=t(),ut.memoizedState=[t,e],t}function dL(t,e,n){if(25<=Pp)throw Error(Be(301));if(t===qo)if(_f=!0,t={action:n,next:null},Ps===null&&(Ps=new Map),n=Ps.get(e),n===void 0)Ps.set(e,t);else{for(e=n;e.next!==null;)e=e.next;e.next=t}}function hL(){throw Error(Be(394))}function oh(){}var cS={readContext:function(t){return t._currentValue},useContext:function(t){return pa(),t._currentValue},useMemo:aS,useReducer:sS,useRef:function(t){qo=pa(),ut=Uy();var e=ut.memoizedState;return e===null?(t={current:t},ut.memoizedState=t):e},useState:function(t){return sS(TE,t)},useInsertionEffect:oh,useLayoutEffect:function(){},useCallback:function(t,e){return aS(function(){return t},e)},useImperativeHandle:oh,useEffect:oh,useDebugValue:oh,useDeferredValue:function(t){return pa(),t},useTransition:function(){return pa(),[!1,hL]},useId:function(){var t=Fy.treeContext,e=t.overflow;t=t.id,t=(t&~(1<<32-Lh(t)-1)).toString(32)+e;var n=Fh;if(n===null)throw Error(Be(404));return e=Ku++,t=":"+n.idPrefix+"R"+t,0<e&&(t+="H"+e.toString(32)),t+":"},useMutableSource:function(t,e){return pa(),e(t._source)},useSyncExternalStore:function(t,e,n){if(n===void 0)throw Error(Be(407));return n()}},Fh=null,Bg=aE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentDispatcher;function fL(t){return console.error(t),null}function iu(){}function pL(t,e,n,r,i,o,s,a,c){var l=[],u=new Set;return e={destination:null,responseState:e,progressiveChunkSize:r===void 0?12800:r,status:0,fatalError:null,nextSegmentId:0,allPendingTasks:0,pendingRootTasks:0,completedRootSegment:null,abortableTasks:u,pingedTasks:l,clientRenderedBoundaries:[],completedBoundaries:[],partialBoundaries:[],onError:i===void 0?fL:i,onAllReady:o===void 0?iu:o,onShellReady:s===void 0?iu:s,onShellError:a===void 0?iu:a,onFatalError:c===void 0?iu:c},n=Of(e,0,null,n,!1,!1),n.parentFlushed=!0,t=Gy(e,t,null,n,u,SE,null,oL),l.push(t),e}function Gy(t,e,n,r,i,o,s,a){t.allPendingTasks++,n===null?t.pendingRootTasks++:n.pendingTasks++;var c={node:e,ping:function(){var l=t.pingedTasks;l.push(c),l.length===1&&RE(t)},blockedBoundary:n,blockedSegment:r,abortSet:i,legacyContext:o,context:s,treeContext:a};return i.add(c),c}function Of(t,e,n,r,i,o){return{status:0,id:-1,index:e,parentFlushed:!1,chunks:[],children:[],formatContext:r,boundary:n,lastPushedText:i,textEmbedded:o}}function Ju(t,e){if(t=t.onError(e),t!=null&&typeof t!="string")throw Error('onError returned something with a type other than "string". onError should return a string and may return null or undefined but must not return anything else. It received something of type "'+typeof t+'" instead');return t}function Mf(t,e){var n=t.onShellError;n(e),n=t.onFatalError,n(e),t.destination!==null?(t.status=2,lE(t.destination,e)):(t.status=1,t.fatalError=e)}function lS(t,e,n,r,i){for(qo={},Fy=e,Ku=0,t=n(r,i);_f;)_f=!1,Ku=0,Pp+=1,ut=null,t=n(r,i);return Vy(),t}function uS(t,e,n,r){var i=n.render(),o=r.childContextTypes;if(o!=null){var s=e.legacyContext;if(typeof n.getChildContext!="function")r=s;else{n=n.getChildContext();for(var a in n)if(!(a in o))throw Error(Be(108,fv(r)||"Unknown",a));r=Su({},s,n)}e.legacyContext=r,Ir(t,e,i),e.legacyContext=s}else Ir(t,e,i)}function dS(t,e){if(t&&t.defaultProps){e=Su({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gv(t,e,n,r,i){if(typeof n=="function")if(n.prototype&&n.prototype.isReactComponent){i=nS(n,e.legacyContext);var o=n.contextType;o=new n(r,typeof o=="object"&&o!==null?o._currentValue:i),iS(o,n,r,i),uS(t,e,o,n)}else{o=nS(n,e.legacyContext),i=lS(t,e,n,r,o);var s=Ku!==0;if(typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0)iS(i,n,r,o),uS(t,e,i,n);else if(s){r=e.treeContext,e.treeContext=pv(r,1,0);try{Ir(t,e,i)}finally{e.treeContext=r}}else Ir(t,e,i)}else if(typeof n=="string"){switch(i=e.blockedSegment,o=i2(i.chunks,n,r,t.responseState,i.formatContext),i.lastPushedText=!1,s=i.formatContext,i.formatContext=QD(s,n,r),mv(t,e,o),i.formatContext=s,n){case"area":case"base":case"br":case"col":case"embed":case"hr":case"img":case"input":case"keygen":case"link":case"meta":case"param":case"source":case"track":case"wbr":break;default:i.chunks.push(o2,Fe(n),s2)}i.lastPushedText=!1}else{switch(n){case rL:case nL:case pE:case gE:case fE:Ir(t,e,r.children);return;case IE:Ir(t,e,r.children);return;case tL:throw Error(Be(343));case CE:e:{n=e.blockedBoundary,i=e.blockedSegment,o=r.fallback,r=r.children,s=new Set;var a={id:null,rootSegmentID:-1,parentFlushed:!1,pendingTasks:0,forceClientRender:!1,completedSegments:[],byteSize:0,fallbackAbortableTasks:s,errorDigest:null},c=Of(t,i.chunks.length,a,i.formatContext,!1,!1);i.children.push(c),i.lastPushedText=!1;var l=Of(t,0,null,i.formatContext,!1,!1);l.parentFlushed=!0,e.blockedBoundary=a,e.blockedSegment=l;try{if(mv(t,e,r),l.lastPushedText&&l.textEmbedded&&l.chunks.push(Ly),l.status=1,Df(a,l),a.pendingTasks===0)break e}catch(u){l.status=4,a.forceClientRender=!0,a.errorDigest=Ju(t,u)}finally{e.blockedBoundary=n,e.blockedSegment=i}e=Gy(t,o,n,c,s,e.legacyContext,e.context,e.treeContext),t.pingedTasks.push(e)}return}if(typeof n=="object"&&n!==null)switch(n.$$typeof){case yE:if(r=lS(t,e,n.render,r,i),Ku!==0){n=e.treeContext,e.treeContext=pv(n,1,0);try{Ir(t,e,r)}finally{e.treeContext=n}}else Ir(t,e,r);return;case bE:n=n.type,r=dS(n,r),gv(t,e,n,r,i);return;case mE:if(i=r.children,n=n._context,r=r.value,o=n._currentValue,n._currentValue=r,s=wa,wa=r={parent:s,depth:s===null?0:s.depth+1,context:n,parentValue:o,value:r},e.context=r,Ir(t,e,i),t=wa,t===null)throw Error(Be(403));r=t.parentValue,t.context._currentValue=r===iL?t.context._defaultValue:r,t=wa=t.parent,e.context=t;return;case vE:r=r.children,r=r(n._currentValue),Ir(t,e,r);return;case By:i=n._init,n=i(n._payload),r=dS(n,r),gv(t,e,n,r,void 0);return}throw Error(Be(130,n==null?n:typeof n,""))}}function Ir(t,e,n){if(e.node=n,typeof n=="object"&&n!==null){switch(n.$$typeof){case eL:gv(t,e,n.type,n.props,n.ref);return;case hE:throw Error(Be(257));case By:var r=n._init;n=r(n._payload),Ir(t,e,n);return}if(hv(n)){hS(t,e,n);return}if(n===null||typeof n!="object"?r=null:(r=tS&&n[tS]||n["@@iterator"],r=typeof r=="function"?r:null),r&&(r=r.call(n))){if(n=r.next(),!n.done){var i=[];do i.push(n.value),n=r.next();while(!n.done);hS(t,e,i)}return}throw t=Object.prototype.toString.call(n),Error(Be(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t))}typeof n=="string"?(r=e.blockedSegment,r.lastPushedText=$b(e.blockedSegment.chunks,n,t.responseState,r.lastPushedText)):typeof n=="number"&&(r=e.blockedSegment,r.lastPushedText=$b(e.blockedSegment.chunks,""+n,t.responseState,r.lastPushedText))}function hS(t,e,n){for(var r=n.length,i=0;i<r;i++){var o=e.treeContext;e.treeContext=pv(o,r,i);try{mv(t,e,n[i])}finally{e.treeContext=o}}}function mv(t,e,n){var r=e.blockedSegment.formatContext,i=e.legacyContext,o=e.context;try{return Ir(t,e,n)}catch(c){if(Vy(),typeof c=="object"&&c!==null&&typeof c.then=="function"){n=c;var s=e.blockedSegment,a=Of(t,s.chunks.length,null,s.formatContext,s.lastPushedText,!0);s.children.push(a),s.lastPushedText=!1,t=Gy(t,e.node,e.blockedBoundary,a,e.abortSet,e.legacyContext,e.context,e.treeContext).ping,n.then(t,t),e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Nf(o)}else throw e.blockedSegment.formatContext=r,e.legacyContext=i,e.context=o,Nf(o),c}}function gL(t){var e=t.blockedBoundary;t=t.blockedSegment,t.status=3,PE(this,e,t)}function xE(t,e,n){var r=t.blockedBoundary;t.blockedSegment.status=3,r===null?(e.allPendingTasks--,e.status!==2&&(e.status=2,e.destination!==null&&e.destination.close())):(r.pendingTasks--,r.forceClientRender||(r.forceClientRender=!0,t=n===void 0?Error(Be(432)):n,r.errorDigest=e.onError(t),r.parentFlushed&&e.clientRenderedBoundaries.push(r)),r.fallbackAbortableTasks.forEach(function(i){return xE(i,e,n)}),r.fallbackAbortableTasks.clear(),e.allPendingTasks--,e.allPendingTasks===0&&(r=e.onAllReady,r()))}function Df(t,e){if(e.chunks.length===0&&e.children.length===1&&e.children[0].boundary===null){var n=e.children[0];n.id=e.id,n.parentFlushed=!0,n.status===1&&Df(t,n)}else t.completedSegments.push(e)}function PE(t,e,n){if(e===null){if(n.parentFlushed){if(t.completedRootSegment!==null)throw Error(Be(389));t.completedRootSegment=n}t.pendingRootTasks--,t.pendingRootTasks===0&&(t.onShellError=iu,e=t.onShellReady,e())}else e.pendingTasks--,e.forceClientRender||(e.pendingTasks===0?(n.parentFlushed&&n.status===1&&Df(e,n),e.parentFlushed&&t.completedBoundaries.push(e),e.fallbackAbortableTasks.forEach(gL,t),e.fallbackAbortableTasks.clear()):n.parentFlushed&&n.status===1&&(Df(e,n),e.completedSegments.length===1&&e.parentFlushed&&t.partialBoundaries.push(e)));t.allPendingTasks--,t.allPendingTasks===0&&(t=t.onAllReady,t())}function RE(t){if(t.status!==2){var e=wa,n=Bg.current;Bg.current=cS;var r=Fh;Fh=t.responseState;try{var i=t.pingedTasks,o;for(o=0;o<i.length;o++){var s=i[o],a=t,c=s.blockedSegment;if(c.status===0){Nf(s.context);try{Ir(a,s,s.node),c.lastPushedText&&c.textEmbedded&&c.chunks.push(Ly),s.abortSet.delete(s),c.status=1,PE(a,s.blockedBoundary,c)}catch(p){if(Vy(),typeof p=="object"&&p!==null&&typeof p.then=="function"){var l=s.ping;p.then(l,l)}else{s.abortSet.delete(s),c.status=4;var u=s.blockedBoundary,d=p,h=Ju(a,d);if(u===null?Mf(a,d):(u.pendingTasks--,u.forceClientRender||(u.forceClientRender=!0,u.errorDigest=h,u.parentFlushed&&a.clientRenderedBoundaries.push(u))),a.allPendingTasks--,a.allPendingTasks===0){var f=a.onAllReady;f()}}}finally{}}}i.splice(0,o),t.destination!==null&&Wy(t,t.destination)}catch(p){Ju(t,p),Mf(t,p)}finally{Fh=r,Bg.current=n,n===cS&&Nf(e)}}}function sh(t,e,n){switch(n.parentFlushed=!0,n.status){case 0:var r=n.id=t.nextSegmentId++;return n.lastPushedText=!1,n.textEmbedded=!1,t=t.responseState,Ie(e,a2),Ie(e,t.placeholderPrefix),t=Fe(r.toString(16)),Ie(e,t),It(e,c2);case 1:n.status=2;var i=!0;r=n.chunks;var o=0;n=n.children;for(var s=0;s<n.length;s++){for(i=n[s];o<i.index;o++)Ie(e,r[o]);i=Rp(t,e,i)}for(;o<r.length-1;o++)Ie(e,r[o]);return o<r.length&&(i=It(e,r[o])),i;default:throw Error(Be(390))}}function Rp(t,e,n){var r=n.boundary;if(r===null)return sh(t,e,n);if(r.parentFlushed=!0,r.forceClientRender)r=r.errorDigest,It(e,h2),Ie(e,p2),r&&(Ie(e,m2),Ie(e,Fe(dn(r))),Ie(e,g2)),It(e,v2),sh(t,e,n);else if(0<r.pendingTasks){r.rootSegmentID=t.nextSegmentId++,0<r.completedSegments.length&&t.partialBoundaries.push(r);var i=t.responseState,o=i.nextSuspenseID++;i=ue(i.boundaryPrefix+o.toString(16)),r=r.id=i,eS(e,t.responseState,r),sh(t,e,n)}else if(r.byteSize>t.progressiveChunkSize)r.rootSegmentID=t.nextSegmentId++,t.completedBoundaries.push(r),eS(e,t.responseState,r.id),sh(t,e,n);else{if(It(e,l2),n=r.completedSegments,n.length!==1)throw Error(Be(391));Rp(t,e,n[0])}return It(e,f2)}function fS(t,e,n){return U2(e,t.responseState,n.formatContext,n.id),Rp(t,e,n),V2(e,n.formatContext)}function pS(t,e,n){for(var r=n.completedSegments,i=0;i<r.length;i++)NE(t,e,n,r[i]);if(r.length=0,t=t.responseState,r=n.id,n=n.rootSegmentID,Ie(e,t.startInlineScript),t.sentCompleteBoundaryFunction?Ie(e,H2):(t.sentCompleteBoundaryFunction=!0,Ie(e,z2)),r===null)throw Error(Be(395));return n=Fe(n.toString(16)),Ie(e,r),Ie(e,X2),Ie(e,t.segmentPrefix),Ie(e,n),It(e,$2)}function NE(t,e,n,r){if(r.status===2)return!0;var i=r.id;if(i===-1){if((r.id=n.rootSegmentID)===-1)throw Error(Be(392));return fS(t,e,r)}return fS(t,e,r),t=t.responseState,Ie(e,t.startInlineScript),t.sentCompleteSegmentFunction?Ie(e,W2):(t.sentCompleteSegmentFunction=!0,Ie(e,G2)),Ie(e,t.segmentPrefix),i=Fe(i.toString(16)),Ie(e,i),Ie(e,j2),Ie(e,t.placeholderPrefix),Ie(e,i),It(e,Z2)}function Wy(t,e){yr=new Uint8Array(512),Cr=0;try{var n=t.completedRootSegment;if(n!==null&&t.pendingRootTasks===0){Rp(t,e,n),t.completedRootSegment=null;var r=t.responseState.bootstrapChunks;for(n=0;n<r.length-1;n++)Ie(e,r[n]);n<r.length&&It(e,r[n])}var i=t.clientRenderedBoundaries,o;for(o=0;o<i.length;o++){var s=i[o];r=e;var a=t.responseState,c=s.id,l=s.errorDigest,u=s.errorMessage,d=s.errorComponentStack;if(Ie(r,a.startInlineScript),a.sentClientRenderFunction?Ie(r,J2):(a.sentClientRenderFunction=!0,Ie(r,K2)),c===null)throw Error(Be(395));Ie(r,c),Ie(r,Y2),(l||u||d)&&(Ie(r,Dg),Ie(r,Fe(Lg(l||"")))),(u||d)&&(Ie(r,Dg),Ie(r,Fe(Lg(u||"")))),d&&(Ie(r,Dg),Ie(r,Fe(Lg(d)))),It(r,Q2)}i.splice(0,o);var h=t.completedBoundaries;for(o=0;o<h.length;o++)pS(t,e,h[o]);h.splice(0,o),Zb(e),yr=new Uint8Array(512),Cr=0;var f=t.partialBoundaries;for(o=0;o<f.length;o++){var p=f[o];e:{i=t,s=e;var g=p.completedSegments;for(a=0;a<g.length;a++)if(!NE(i,s,p,g[a])){a++,g.splice(0,a);var C=!1;break e}g.splice(0,a),C=!0}if(!C){t.destination=null,o++,f.splice(0,o);return}}f.splice(0,o);var m=t.completedBoundaries;for(o=0;o<m.length;o++)pS(t,e,m[o]);m.splice(0,o)}finally{Zb(e),t.allPendingTasks===0&&t.pingedTasks.length===0&&t.clientRenderedBoundaries.length===0&&t.completedBoundaries.length===0&&e.close()}}function gS(t,e){try{var n=t.abortableTasks;n.forEach(function(r){return xE(r,t,e)}),n.clear(),t.destination!==null&&Wy(t,t.destination)}catch(r){Ju(t,r),Mf(t,r)}}Oy.renderToReadableStream=function(t,e){return new Promise(function(n,r){var i,o,s=new Promise(function(u,d){o=u,i=d}),a=pL(t,JD(e?e.identifierPrefix:void 0,e?e.nonce:void 0,e?e.bootstrapScriptContent:void 0,e?e.bootstrapScripts:void 0,e?e.bootstrapModules:void 0),YD(e?e.namespaceURI:void 0),e?e.progressiveChunkSize:void 0,e?e.onError:void 0,o,function(){var u=new ReadableStream({type:"bytes",pull:function(d){if(a.status===1)a.status=2,lE(d,a.fatalError);else if(a.status!==2&&a.destination===null){a.destination=d;try{Wy(a,d)}catch(h){Ju(a,h),Mf(a,h)}}},cancel:function(){gS(a)}},{highWaterMark:0});u.allReady=s,n(u)},function(u){s.catch(function(){}),r(u)},i);if(e&&e.signal){var c=e.signal,l=function(){gS(a,c.reason),c.removeEventListener("abort",l)};c.addEventListener("abort",l)}RE(a)})};Oy.version="18.3.1";var ml,_E;ml=gl,_E=Oy;$s.version=ml.version;$s.renderToString=ml.renderToString;$s.renderToStaticMarkup=ml.renderToStaticMarkup;$s.renderToNodeStream=ml.renderToNodeStream;$s.renderToStaticNodeStream=ml.renderToStaticNodeStream;$s.renderToReadableStream=_E.renderToReadableStream;const ga=class ga extends nt.Component{constructor(n){super(n);V(this,"outputRef",nt.createRef());V(this,"messageKey",0);V(this,"saveOutput",()=>{const n=this.state.output.map(r=>$s.renderToStaticMarkup(r));localStorage.setItem(ga.LOCAL_STORAGE_KEY,JSON.stringify(n))});V(this,"loadOutput",()=>{const n=localStorage.getItem(ga.LOCAL_STORAGE_KEY);return n?JSON.parse(n).map(i=>nt.createElement("div",{dangerouslySetInnerHTML:{__html:i}})):[]});V(this,"addCommand",n=>{this.addToOutput([X.jsx("span",{className:"command","aria-live":"off",children:n})],!1)});V(this,"addError",n=>this.addToOutput([X.jsxs("h2",{children:[" Error: ",n.message]})]));V(this,"handleConnected",()=>this.addToOutput([X.jsx("h2",{children:" Connected"})]));V(this,"handleDisconnected",()=>{this.addToOutput([X.jsx("h2",{children:" Disconnected"})]),this.setState({sidebarVisible:!1})});V(this,"handleUserList",n=>this.setState({sidebarVisible:!!n}));V(this,"handleScroll",()=>{this.isScrolledToBottom()&&this.setState({newLinesCount:0})});V(this,"isScrolledToBottom",()=>{const n=this.outputRef.current;return n?n.scrollHeight-n.scrollTop<=n.clientHeight+1:!1});V(this,"handleScrollToBottom",()=>{this.scrollToBottom(),this.setState({newLinesCount:0})});V(this,"scrollToBottom",()=>{const n=this.outputRef.current;n&&(n.scrollTop=n.scrollHeight)});V(this,"handleMessage",n=>{if(!n)return;const r=nD(n,this.handleExitClick);this.addToOutput(r)});V(this,"handleExitClick",n=>{this.props.client.sendCommand(n)});this.state={output:this.loadOutput(),sidebarVisible:!1,newLinesCount:0}}getSnapshotBeforeUpdate(n,r){if(this.outputRef.current){const i=this.outputRef.current;return i.scrollHeight-i.scrollTop<=i.clientHeight}return null}componentDidUpdate(n,r,i){i&&this.scrollToBottom(),this.state.output.length>r.output.length&&(this.isScrolledToBottom()?this.setState({newLinesCount:0}):this.setState({newLinesCount:this.state.newLinesCount+(this.state.output.length-r.output.length)})),this.saveOutput()}componentDidMount(){const{client:n}=this.props;n.on("message",this.handleMessage),n.on("connect",this.handleConnected),n.on("disconnect",this.handleDisconnected),n.on("error",this.addError),n.on("command",this.addCommand),n.on("userlist",this.handleUserList)}componentWillUnmount(){const{client:n}=this.props;n.removeListener("message",this.handleMessage),n.removeListener("connect",this.handleConnected),n.removeListener("disconnect",this.handleDisconnected),n.removeListener("error",this.addError),n.removeListener("command",this.addCommand),n.removeListener("userlist",this.handleUserList)}sanitizeHtml(n){return new DOMParser().parseFromString(n,"text/html").body.textContent||""}addToOutput(n,r=!0){r&&n.forEach(i=>{if(nt.isValidElement(i)){const o=$s.renderToString(i),s=this.sanitizeHtml(o);Sb(s)}else typeof i=="string"&&Sb(i)}),this.setState(i=>{const o=n.map((c,l)=>X.jsx("div",{children:c},this.messageKey+l));return this.messageKey+=n.length,{output:[...i.output,...o].slice(-ga.MAX_OUTPUT_LENGTH)}})}saveLog(){const n=this.outputRef.current;if(n){const r=n.innerHTML,i=new Blob([r],{type:"text/html"}),o=URL.createObjectURL(i),s=document.createElement("a"),a=new Date,c=a.toLocaleDateString(),l=a.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}),d=`${document.title.replace(/\s+/g,"-")}-log-${c}-${l}.html`;s.download=d,s.href=o,s.click(),URL.revokeObjectURL(o),s.remove()}}clearLog(){this.setState({output:[]})}render(){var n="output";this.state.sidebarVisible&&(n+=" sidebar-visible");const r=`${this.state.newLinesCount} new ${this.state.newLinesCount===1?"message":"messages"}`;return X.jsxs("div",{ref:this.outputRef,className:n,onScroll:this.handleScroll,children:[this.state.output,this.state.newLinesCount>0&&X.jsx("div",{className:"new-lines-notification",onClick:this.handleScrollToBottom,role:"button","aria-live":"off",children:r})]})}};V(ga,"MAX_OUTPUT_LENGTH",5e3),V(ga,"LOCAL_STORAGE_KEY","outputLog");let vv=ga;var OE={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function o(c,l,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||c,h),p=n?n+l:l;return c._events[p]?c._events[p].fn?c._events[p]=[c._events[p],f]:c._events[p].push(f):(c._events[p]=f,c._eventsCount++),c}function s(c,l){--c._eventsCount===0?c._events=new r:delete c._events[l]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,d;if(this._eventsCount===0)return l;for(d in u=this._events)e.call(u,d)&&l.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=n?n+l:l,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(l){var u=n?n+l:l,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(l,u,d,h,f,p){var g=n?n+l:l;if(!this._events[g])return!1;var C=this._events[g],m=arguments.length,v,b;if(C.fn){switch(C.once&&this.removeListener(l,C.fn,void 0,!0),m){case 1:return C.fn.call(C.context),!0;case 2:return C.fn.call(C.context,u),!0;case 3:return C.fn.call(C.context,u,d),!0;case 4:return C.fn.call(C.context,u,d,h),!0;case 5:return C.fn.call(C.context,u,d,h,f),!0;case 6:return C.fn.call(C.context,u,d,h,f,p),!0}for(b=1,v=new Array(m-1);b<m;b++)v[b-1]=arguments[b];C.fn.apply(C.context,v)}else{var E=C.length,w;for(b=0;b<E;b++)switch(C[b].once&&this.removeListener(l,C[b].fn,void 0,!0),m){case 1:C[b].fn.call(C[b].context);break;case 2:C[b].fn.call(C[b].context,u);break;case 3:C[b].fn.call(C[b].context,u,d);break;case 4:C[b].fn.call(C[b].context,u,d,h);break;default:if(!v)for(w=1,v=new Array(m-1);w<m;w++)v[w-1]=arguments[w];C[b].fn.apply(C[b].context,v)}}return!0},a.prototype.on=function(l,u,d){return o(this,l,u,d,!1)},a.prototype.once=function(l,u,d){return o(this,l,u,d,!0)},a.prototype.removeListener=function(l,u,d,h){var f=n?n+l:l;if(!this._events[f])return this;if(!u)return s(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&s(this,f);else{for(var g=0,C=[],m=p.length;g<m;g++)(p[g].fn!==u||h&&!p[g].once||d&&p[g].context!==d)&&C.push(p[g]);C.length?this._events[f]=C.length===1?C[0]:C:s(this,f)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=n?n+l:l,this._events[u]&&s(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(OE);var mL=OE.exports;const ME=fd(mL);var an={},Np={};Np.byteLength=CL;Np.toByteArray=bL;Np.fromByteArray=AL;var Oi=[],Or=[],vL=typeof Uint8Array<"u"?Uint8Array:Array,Fg="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var sc=0,yL=Fg.length;sc<yL;++sc)Oi[sc]=Fg[sc],Or[Fg.charCodeAt(sc)]=sc;Or[45]=62;Or[95]=63;function DE(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var r=n===e?0:4-n%4;return[n,r]}function CL(t){var e=DE(t),n=e[0],r=e[1];return(n+r)*3/4-r}function IL(t,e,n){return(e+n)*3/4-n}function bL(t){var e,n=DE(t),r=n[0],i=n[1],o=new vL(IL(t,r,i)),s=0,a=i>0?r-4:r,c;for(c=0;c<a;c+=4)e=Or[t.charCodeAt(c)]<<18|Or[t.charCodeAt(c+1)]<<12|Or[t.charCodeAt(c+2)]<<6|Or[t.charCodeAt(c+3)],o[s++]=e>>16&255,o[s++]=e>>8&255,o[s++]=e&255;return i===2&&(e=Or[t.charCodeAt(c)]<<2|Or[t.charCodeAt(c+1)]>>4,o[s++]=e&255),i===1&&(e=Or[t.charCodeAt(c)]<<10|Or[t.charCodeAt(c+1)]<<4|Or[t.charCodeAt(c+2)]>>2,o[s++]=e>>8&255,o[s++]=e&255),o}function SL(t){return Oi[t>>18&63]+Oi[t>>12&63]+Oi[t>>6&63]+Oi[t&63]}function wL(t,e,n){for(var r,i=[],o=e;o<n;o+=3)r=(t[o]<<16&16711680)+(t[o+1]<<8&65280)+(t[o+2]&255),i.push(SL(r));return i.join("")}function AL(t){for(var e,n=t.length,r=n%3,i=[],o=16383,s=0,a=n-r;s<a;s+=o)i.push(wL(t,s,s+o>a?a:s+o));return r===1?(e=t[n-1],i.push(Oi[e>>2]+Oi[e<<4&63]+"==")):r===2&&(e=(t[n-2]<<8)+t[n-1],i.push(Oi[e>>10]+Oi[e>>4&63]+Oi[e<<2&63]+"=")),i.join("")}var jy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */jy.read=function(t,e,n,r,i){var o,s,a=i*8-r-1,c=(1<<a)-1,l=c>>1,u=-7,d=n?i-1:0,h=n?-1:1,f=t[e+d];for(d+=h,o=f&(1<<-u)-1,f>>=-u,u+=a;u>0;o=o*256+t[e+d],d+=h,u-=8);for(s=o&(1<<-u)-1,o>>=-u,u+=r;u>0;s=s*256+t[e+d],d+=h,u-=8);if(o===0)o=1-l;else{if(o===c)return s?NaN:(f?-1:1)*(1/0);s=s+Math.pow(2,r),o=o-l}return(f?-1:1)*s*Math.pow(2,o-r)};jy.write=function(t,e,n,r,i,o){var s,a,c,l=o*8-i-1,u=(1<<l)-1,d=u>>1,h=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,p=r?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=u):(s=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-s))<1&&(s--,c*=2),s+d>=1?e+=h/c:e+=h*Math.pow(2,1-d),e*c>=2&&(s++,c/=2),s+d>=u?(a=0,s=u):s+d>=1?(a=(e*c-1)*Math.pow(2,i),s=s+d):(a=e*Math.pow(2,d-1)*Math.pow(2,i),s=0));i>=8;t[n+f]=a&255,f+=p,a/=256,i-=8);for(s=s<<i|a,l+=i;l>0;t[n+f]=s&255,f+=p,s/=256,l-=8);t[n+f-p]|=g*128};(function(t){const e=Np,n=jy,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=v,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const k=new Uint8Array(1),y={foo:function(){return 42}};return Object.setPrototypeOf(y,Uint8Array.prototype),Object.setPrototypeOf(k,y),k.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function s(k){if(k>i)throw new RangeError('The value "'+k+'" is invalid for option "size"');const y=new Uint8Array(k);return Object.setPrototypeOf(y,a.prototype),y}function a(k,y,I){if(typeof k=="number"){if(typeof y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(k)}return c(k,y,I)}a.poolSize=8192;function c(k,y,I){if(typeof k=="string")return h(k,y);if(ArrayBuffer.isView(k))return p(k);if(k==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k);if(Mt(k,ArrayBuffer)||k&&Mt(k.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Mt(k,SharedArrayBuffer)||k&&Mt(k.buffer,SharedArrayBuffer)))return g(k,y,I);if(typeof k=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const R=k.valueOf&&k.valueOf();if(R!=null&&R!==k)return a.from(R,y,I);const L=C(k);if(L)return L;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof k[Symbol.toPrimitive]=="function")return a.from(k[Symbol.toPrimitive]("string"),y,I);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof k)}a.from=function(k,y,I){return c(k,y,I)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(k){if(typeof k!="number")throw new TypeError('"size" argument must be of type number');if(k<0)throw new RangeError('The value "'+k+'" is invalid for option "size"')}function u(k,y,I){return l(k),k<=0?s(k):y!==void 0?typeof I=="string"?s(k).fill(y,I):s(k).fill(y):s(k)}a.alloc=function(k,y,I){return u(k,y,I)};function d(k){return l(k),s(k<0?0:m(k)|0)}a.allocUnsafe=function(k){return d(k)},a.allocUnsafeSlow=function(k){return d(k)};function h(k,y){if((typeof y!="string"||y==="")&&(y="utf8"),!a.isEncoding(y))throw new TypeError("Unknown encoding: "+y);const I=b(k,y)|0;let R=s(I);const L=R.write(k,y);return L!==I&&(R=R.slice(0,L)),R}function f(k){const y=k.length<0?0:m(k.length)|0,I=s(y);for(let R=0;R<y;R+=1)I[R]=k[R]&255;return I}function p(k){if(Mt(k,Uint8Array)){const y=new Uint8Array(k);return g(y.buffer,y.byteOffset,y.byteLength)}return f(k)}function g(k,y,I){if(y<0||k.byteLength<y)throw new RangeError('"offset" is outside of buffer bounds');if(k.byteLength<y+(I||0))throw new RangeError('"length" is outside of buffer bounds');let R;return y===void 0&&I===void 0?R=new Uint8Array(k):I===void 0?R=new Uint8Array(k,y):R=new Uint8Array(k,y,I),Object.setPrototypeOf(R,a.prototype),R}function C(k){if(a.isBuffer(k)){const y=m(k.length)|0,I=s(y);return I.length===0||k.copy(I,0,0,y),I}if(k.length!==void 0)return typeof k.length!="number"||zr(k.length)?s(0):f(k);if(k.type==="Buffer"&&Array.isArray(k.data))return f(k.data)}function m(k){if(k>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return k|0}function v(k){return+k!=k&&(k=0),a.alloc(+k)}a.isBuffer=function(y){return y!=null&&y._isBuffer===!0&&y!==a.prototype},a.compare=function(y,I){if(Mt(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),Mt(I,Uint8Array)&&(I=a.from(I,I.offset,I.byteLength)),!a.isBuffer(y)||!a.isBuffer(I))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(y===I)return 0;let R=y.length,L=I.length;for(let W=0,K=Math.min(R,L);W<K;++W)if(y[W]!==I[W]){R=y[W],L=I[W];break}return R<L?-1:L<R?1:0},a.isEncoding=function(y){switch(String(y).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(y,I){if(!Array.isArray(y))throw new TypeError('"list" argument must be an Array of Buffers');if(y.length===0)return a.alloc(0);let R;if(I===void 0)for(I=0,R=0;R<y.length;++R)I+=y[R].length;const L=a.allocUnsafe(I);let W=0;for(R=0;R<y.length;++R){let K=y[R];if(Mt(K,Uint8Array))W+K.length>L.length?(a.isBuffer(K)||(K=a.from(K)),K.copy(L,W)):Uint8Array.prototype.set.call(L,K,W);else if(a.isBuffer(K))K.copy(L,W);else throw new TypeError('"list" argument must be an Array of Buffers');W+=K.length}return L};function b(k,y){if(a.isBuffer(k))return k.length;if(ArrayBuffer.isView(k)||Mt(k,ArrayBuffer))return k.byteLength;if(typeof k!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof k);const I=k.length,R=arguments.length>2&&arguments[2]===!0;if(!R&&I===0)return 0;let L=!1;for(;;)switch(y){case"ascii":case"latin1":case"binary":return I;case"utf8":case"utf-8":return ze(k).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I*2;case"hex":return I>>>1;case"base64":return $e(k).length;default:if(L)return R?-1:ze(k).length;y=(""+y).toLowerCase(),L=!0}}a.byteLength=b;function E(k,y,I){let R=!1;if((y===void 0||y<0)&&(y=0),y>this.length||((I===void 0||I>this.length)&&(I=this.length),I<=0)||(I>>>=0,y>>>=0,I<=y))return"";for(k||(k="utf8");;)switch(k){case"hex":return $(this,y,I);case"utf8":case"utf-8":return Z(this,y,I);case"ascii":return ne(this,y,I);case"latin1":case"binary":return z(this,y,I);case"base64":return j(this,y,I);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return re(this,y,I);default:if(R)throw new TypeError("Unknown encoding: "+k);k=(k+"").toLowerCase(),R=!0}}a.prototype._isBuffer=!0;function w(k,y,I){const R=k[y];k[y]=k[I],k[I]=R}a.prototype.swap16=function(){const y=this.length;if(y%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let I=0;I<y;I+=2)w(this,I,I+1);return this},a.prototype.swap32=function(){const y=this.length;if(y%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let I=0;I<y;I+=4)w(this,I,I+3),w(this,I+1,I+2);return this},a.prototype.swap64=function(){const y=this.length;if(y%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let I=0;I<y;I+=8)w(this,I,I+7),w(this,I+1,I+6),w(this,I+2,I+5),w(this,I+3,I+4);return this},a.prototype.toString=function(){const y=this.length;return y===0?"":arguments.length===0?Z(this,0,y):E.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(y){if(!a.isBuffer(y))throw new TypeError("Argument must be a Buffer");return this===y?!0:a.compare(this,y)===0},a.prototype.inspect=function(){let y="";const I=t.INSPECT_MAX_BYTES;return y=this.toString("hex",0,I).replace(/(.{2})/g,"$1 ").trim(),this.length>I&&(y+=" ... "),"<Buffer "+y+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(y,I,R,L,W){if(Mt(y,Uint8Array)&&(y=a.from(y,y.offset,y.byteLength)),!a.isBuffer(y))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof y);if(I===void 0&&(I=0),R===void 0&&(R=y?y.length:0),L===void 0&&(L=0),W===void 0&&(W=this.length),I<0||R>y.length||L<0||W>this.length)throw new RangeError("out of range index");if(L>=W&&I>=R)return 0;if(L>=W)return-1;if(I>=R)return 1;if(I>>>=0,R>>>=0,L>>>=0,W>>>=0,this===y)return 0;let K=W-L,De=R-I;const gt=Math.min(K,De),ot=this.slice(L,W),wt=y.slice(I,R);for(let Ke=0;Ke<gt;++Ke)if(ot[Ke]!==wt[Ke]){K=ot[Ke],De=wt[Ke];break}return K<De?-1:De<K?1:0};function A(k,y,I,R,L){if(k.length===0)return-1;if(typeof I=="string"?(R=I,I=0):I>2147483647?I=2147483647:I<-2147483648&&(I=-2147483648),I=+I,zr(I)&&(I=L?0:k.length-1),I<0&&(I=k.length+I),I>=k.length){if(L)return-1;I=k.length-1}else if(I<0)if(L)I=0;else return-1;if(typeof y=="string"&&(y=a.from(y,R)),a.isBuffer(y))return y.length===0?-1:x(k,y,I,R,L);if(typeof y=="number")return y=y&255,typeof Uint8Array.prototype.indexOf=="function"?L?Uint8Array.prototype.indexOf.call(k,y,I):Uint8Array.prototype.lastIndexOf.call(k,y,I):x(k,[y],I,R,L);throw new TypeError("val must be string, number or Buffer")}function x(k,y,I,R,L){let W=1,K=k.length,De=y.length;if(R!==void 0&&(R=String(R).toLowerCase(),R==="ucs2"||R==="ucs-2"||R==="utf16le"||R==="utf-16le")){if(k.length<2||y.length<2)return-1;W=2,K/=2,De/=2,I/=2}function gt(wt,Ke){return W===1?wt[Ke]:wt.readUInt16BE(Ke*W)}let ot;if(L){let wt=-1;for(ot=I;ot<K;ot++)if(gt(k,ot)===gt(y,wt===-1?0:ot-wt)){if(wt===-1&&(wt=ot),ot-wt+1===De)return wt*W}else wt!==-1&&(ot-=ot-wt),wt=-1}else for(I+De>K&&(I=K-De),ot=I;ot>=0;ot--){let wt=!0;for(let Ke=0;Ke<De;Ke++)if(gt(k,ot+Ke)!==gt(y,Ke)){wt=!1;break}if(wt)return ot}return-1}a.prototype.includes=function(y,I,R){return this.indexOf(y,I,R)!==-1},a.prototype.indexOf=function(y,I,R){return A(this,y,I,R,!0)},a.prototype.lastIndexOf=function(y,I,R){return A(this,y,I,R,!1)};function T(k,y,I,R){I=Number(I)||0;const L=k.length-I;R?(R=Number(R),R>L&&(R=L)):R=L;const W=y.length;R>W/2&&(R=W/2);let K;for(K=0;K<R;++K){const De=parseInt(y.substr(K*2,2),16);if(zr(De))return K;k[I+K]=De}return K}function _(k,y,I,R){return jt(ze(y,k.length-I),k,I,R)}function O(k,y,I,R){return jt(We(y),k,I,R)}function D(k,y,I,R){return jt($e(y),k,I,R)}function U(k,y,I,R){return jt(xe(y,k.length-I),k,I,R)}a.prototype.write=function(y,I,R,L){if(I===void 0)L="utf8",R=this.length,I=0;else if(R===void 0&&typeof I=="string")L=I,R=this.length,I=0;else if(isFinite(I))I=I>>>0,isFinite(R)?(R=R>>>0,L===void 0&&(L="utf8")):(L=R,R=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const W=this.length-I;if((R===void 0||R>W)&&(R=W),y.length>0&&(R<0||I<0)||I>this.length)throw new RangeError("Attempt to write outside buffer bounds");L||(L="utf8");let K=!1;for(;;)switch(L){case"hex":return T(this,y,I,R);case"utf8":case"utf-8":return _(this,y,I,R);case"ascii":case"latin1":case"binary":return O(this,y,I,R);case"base64":return D(this,y,I,R);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,y,I,R);default:if(K)throw new TypeError("Unknown encoding: "+L);L=(""+L).toLowerCase(),K=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function j(k,y,I){return y===0&&I===k.length?e.fromByteArray(k):e.fromByteArray(k.slice(y,I))}function Z(k,y,I){I=Math.min(k.length,I);const R=[];let L=y;for(;L<I;){const W=k[L];let K=null,De=W>239?4:W>223?3:W>191?2:1;if(L+De<=I){let gt,ot,wt,Ke;switch(De){case 1:W<128&&(K=W);break;case 2:gt=k[L+1],(gt&192)===128&&(Ke=(W&31)<<6|gt&63,Ke>127&&(K=Ke));break;case 3:gt=k[L+1],ot=k[L+2],(gt&192)===128&&(ot&192)===128&&(Ke=(W&15)<<12|(gt&63)<<6|ot&63,Ke>2047&&(Ke<55296||Ke>57343)&&(K=Ke));break;case 4:gt=k[L+1],ot=k[L+2],wt=k[L+3],(gt&192)===128&&(ot&192)===128&&(wt&192)===128&&(Ke=(W&15)<<18|(gt&63)<<12|(ot&63)<<6|wt&63,Ke>65535&&Ke<1114112&&(K=Ke))}}K===null?(K=65533,De=1):K>65535&&(K-=65536,R.push(K>>>10&1023|55296),K=56320|K&1023),R.push(K),L+=De}return ee(R)}const Y=4096;function ee(k){const y=k.length;if(y<=Y)return String.fromCharCode.apply(String,k);let I="",R=0;for(;R<y;)I+=String.fromCharCode.apply(String,k.slice(R,R+=Y));return I}function ne(k,y,I){let R="";I=Math.min(k.length,I);for(let L=y;L<I;++L)R+=String.fromCharCode(k[L]&127);return R}function z(k,y,I){let R="";I=Math.min(k.length,I);for(let L=y;L<I;++L)R+=String.fromCharCode(k[L]);return R}function $(k,y,I){const R=k.length;(!y||y<0)&&(y=0),(!I||I<0||I>R)&&(I=R);let L="";for(let W=y;W<I;++W)L+=Hr[k[W]];return L}function re(k,y,I){const R=k.slice(y,I);let L="";for(let W=0;W<R.length-1;W+=2)L+=String.fromCharCode(R[W]+R[W+1]*256);return L}a.prototype.slice=function(y,I){const R=this.length;y=~~y,I=I===void 0?R:~~I,y<0?(y+=R,y<0&&(y=0)):y>R&&(y=R),I<0?(I+=R,I<0&&(I=0)):I>R&&(I=R),I<y&&(I=y);const L=this.subarray(y,I);return Object.setPrototypeOf(L,a.prototype),L};function H(k,y,I){if(k%1!==0||k<0)throw new RangeError("offset is not uint");if(k+y>I)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(y,I,R){y=y>>>0,I=I>>>0,R||H(y,I,this.length);let L=this[y],W=1,K=0;for(;++K<I&&(W*=256);)L+=this[y+K]*W;return L},a.prototype.readUintBE=a.prototype.readUIntBE=function(y,I,R){y=y>>>0,I=I>>>0,R||H(y,I,this.length);let L=this[y+--I],W=1;for(;I>0&&(W*=256);)L+=this[y+--I]*W;return L},a.prototype.readUint8=a.prototype.readUInt8=function(y,I){return y=y>>>0,I||H(y,1,this.length),this[y]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(y,I){return y=y>>>0,I||H(y,2,this.length),this[y]|this[y+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(y,I){return y=y>>>0,I||H(y,2,this.length),this[y]<<8|this[y+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(y,I){return y=y>>>0,I||H(y,4,this.length),(this[y]|this[y+1]<<8|this[y+2]<<16)+this[y+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(y,I){return y=y>>>0,I||H(y,4,this.length),this[y]*16777216+(this[y+1]<<16|this[y+2]<<8|this[y+3])},a.prototype.readBigUInt64LE=bn(function(y){y=y>>>0,on(y,"offset");const I=this[y],R=this[y+7];(I===void 0||R===void 0)&&_r(y,this.length-8);const L=I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24,W=this[++y]+this[++y]*2**8+this[++y]*2**16+R*2**24;return BigInt(L)+(BigInt(W)<<BigInt(32))}),a.prototype.readBigUInt64BE=bn(function(y){y=y>>>0,on(y,"offset");const I=this[y],R=this[y+7];(I===void 0||R===void 0)&&_r(y,this.length-8);const L=I*2**24+this[++y]*2**16+this[++y]*2**8+this[++y],W=this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+R;return(BigInt(L)<<BigInt(32))+BigInt(W)}),a.prototype.readIntLE=function(y,I,R){y=y>>>0,I=I>>>0,R||H(y,I,this.length);let L=this[y],W=1,K=0;for(;++K<I&&(W*=256);)L+=this[y+K]*W;return W*=128,L>=W&&(L-=Math.pow(2,8*I)),L},a.prototype.readIntBE=function(y,I,R){y=y>>>0,I=I>>>0,R||H(y,I,this.length);let L=I,W=1,K=this[y+--L];for(;L>0&&(W*=256);)K+=this[y+--L]*W;return W*=128,K>=W&&(K-=Math.pow(2,8*I)),K},a.prototype.readInt8=function(y,I){return y=y>>>0,I||H(y,1,this.length),this[y]&128?(255-this[y]+1)*-1:this[y]},a.prototype.readInt16LE=function(y,I){y=y>>>0,I||H(y,2,this.length);const R=this[y]|this[y+1]<<8;return R&32768?R|4294901760:R},a.prototype.readInt16BE=function(y,I){y=y>>>0,I||H(y,2,this.length);const R=this[y+1]|this[y]<<8;return R&32768?R|4294901760:R},a.prototype.readInt32LE=function(y,I){return y=y>>>0,I||H(y,4,this.length),this[y]|this[y+1]<<8|this[y+2]<<16|this[y+3]<<24},a.prototype.readInt32BE=function(y,I){return y=y>>>0,I||H(y,4,this.length),this[y]<<24|this[y+1]<<16|this[y+2]<<8|this[y+3]},a.prototype.readBigInt64LE=bn(function(y){y=y>>>0,on(y,"offset");const I=this[y],R=this[y+7];(I===void 0||R===void 0)&&_r(y,this.length-8);const L=this[y+4]+this[y+5]*2**8+this[y+6]*2**16+(R<<24);return(BigInt(L)<<BigInt(32))+BigInt(I+this[++y]*2**8+this[++y]*2**16+this[++y]*2**24)}),a.prototype.readBigInt64BE=bn(function(y){y=y>>>0,on(y,"offset");const I=this[y],R=this[y+7];(I===void 0||R===void 0)&&_r(y,this.length-8);const L=(I<<24)+this[++y]*2**16+this[++y]*2**8+this[++y];return(BigInt(L)<<BigInt(32))+BigInt(this[++y]*2**24+this[++y]*2**16+this[++y]*2**8+R)}),a.prototype.readFloatLE=function(y,I){return y=y>>>0,I||H(y,4,this.length),n.read(this,y,!0,23,4)},a.prototype.readFloatBE=function(y,I){return y=y>>>0,I||H(y,4,this.length),n.read(this,y,!1,23,4)},a.prototype.readDoubleLE=function(y,I){return y=y>>>0,I||H(y,8,this.length),n.read(this,y,!0,52,8)},a.prototype.readDoubleBE=function(y,I){return y=y>>>0,I||H(y,8,this.length),n.read(this,y,!1,52,8)};function ie(k,y,I,R,L,W){if(!a.isBuffer(k))throw new TypeError('"buffer" argument must be a Buffer instance');if(y>L||y<W)throw new RangeError('"value" argument is out of bounds');if(I+R>k.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(y,I,R,L){if(y=+y,I=I>>>0,R=R>>>0,!L){const De=Math.pow(2,8*R)-1;ie(this,y,I,R,De,0)}let W=1,K=0;for(this[I]=y&255;++K<R&&(W*=256);)this[I+K]=y/W&255;return I+R},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(y,I,R,L){if(y=+y,I=I>>>0,R=R>>>0,!L){const De=Math.pow(2,8*R)-1;ie(this,y,I,R,De,0)}let W=R-1,K=1;for(this[I+W]=y&255;--W>=0&&(K*=256);)this[I+W]=y/K&255;return I+R},a.prototype.writeUint8=a.prototype.writeUInt8=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,1,255,0),this[I]=y&255,I+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,2,65535,0),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,2,65535,0),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,4,4294967295,0),this[I+3]=y>>>24,this[I+2]=y>>>16,this[I+1]=y>>>8,this[I]=y&255,I+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,4,4294967295,0),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4};function Re(k,y,I,R,L){qe(y,R,L,k,I,7);let W=Number(y&BigInt(4294967295));k[I++]=W,W=W>>8,k[I++]=W,W=W>>8,k[I++]=W,W=W>>8,k[I++]=W;let K=Number(y>>BigInt(32)&BigInt(4294967295));return k[I++]=K,K=K>>8,k[I++]=K,K=K>>8,k[I++]=K,K=K>>8,k[I++]=K,I}function Ne(k,y,I,R,L){qe(y,R,L,k,I,7);let W=Number(y&BigInt(4294967295));k[I+7]=W,W=W>>8,k[I+6]=W,W=W>>8,k[I+5]=W,W=W>>8,k[I+4]=W;let K=Number(y>>BigInt(32)&BigInt(4294967295));return k[I+3]=K,K=K>>8,k[I+2]=K,K=K>>8,k[I+1]=K,K=K>>8,k[I]=K,I+8}a.prototype.writeBigUInt64LE=bn(function(y,I=0){return Re(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=bn(function(y,I=0){return Ne(this,y,I,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(y,I,R,L){if(y=+y,I=I>>>0,!L){const gt=Math.pow(2,8*R-1);ie(this,y,I,R,gt-1,-gt)}let W=0,K=1,De=0;for(this[I]=y&255;++W<R&&(K*=256);)y<0&&De===0&&this[I+W-1]!==0&&(De=1),this[I+W]=(y/K>>0)-De&255;return I+R},a.prototype.writeIntBE=function(y,I,R,L){if(y=+y,I=I>>>0,!L){const gt=Math.pow(2,8*R-1);ie(this,y,I,R,gt-1,-gt)}let W=R-1,K=1,De=0;for(this[I+W]=y&255;--W>=0&&(K*=256);)y<0&&De===0&&this[I+W+1]!==0&&(De=1),this[I+W]=(y/K>>0)-De&255;return I+R},a.prototype.writeInt8=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,1,127,-128),y<0&&(y=255+y+1),this[I]=y&255,I+1},a.prototype.writeInt16LE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,2,32767,-32768),this[I]=y&255,this[I+1]=y>>>8,I+2},a.prototype.writeInt16BE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,2,32767,-32768),this[I]=y>>>8,this[I+1]=y&255,I+2},a.prototype.writeInt32LE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,4,2147483647,-2147483648),this[I]=y&255,this[I+1]=y>>>8,this[I+2]=y>>>16,this[I+3]=y>>>24,I+4},a.prototype.writeInt32BE=function(y,I,R){return y=+y,I=I>>>0,R||ie(this,y,I,4,2147483647,-2147483648),y<0&&(y=4294967295+y+1),this[I]=y>>>24,this[I+1]=y>>>16,this[I+2]=y>>>8,this[I+3]=y&255,I+4},a.prototype.writeBigInt64LE=bn(function(y,I=0){return Re(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=bn(function(y,I=0){return Ne(this,y,I,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ce(k,y,I,R,L,W){if(I+R>k.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("Index out of range")}function Te(k,y,I,R,L){return y=+y,I=I>>>0,L||Ce(k,y,I,4),n.write(k,y,I,R,23,4),I+4}a.prototype.writeFloatLE=function(y,I,R){return Te(this,y,I,!0,R)},a.prototype.writeFloatBE=function(y,I,R){return Te(this,y,I,!1,R)};function it(k,y,I,R,L){return y=+y,I=I>>>0,L||Ce(k,y,I,8),n.write(k,y,I,R,52,8),I+8}a.prototype.writeDoubleLE=function(y,I,R){return it(this,y,I,!0,R)},a.prototype.writeDoubleBE=function(y,I,R){return it(this,y,I,!1,R)},a.prototype.copy=function(y,I,R,L){if(!a.isBuffer(y))throw new TypeError("argument should be a Buffer");if(R||(R=0),!L&&L!==0&&(L=this.length),I>=y.length&&(I=y.length),I||(I=0),L>0&&L<R&&(L=R),L===R||y.length===0||this.length===0)return 0;if(I<0)throw new RangeError("targetStart out of bounds");if(R<0||R>=this.length)throw new RangeError("Index out of range");if(L<0)throw new RangeError("sourceEnd out of bounds");L>this.length&&(L=this.length),y.length-I<L-R&&(L=y.length-I+R);const W=L-R;return this===y&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(I,R,L):Uint8Array.prototype.set.call(y,this.subarray(R,L),I),W},a.prototype.fill=function(y,I,R,L){if(typeof y=="string"){if(typeof I=="string"?(L=I,I=0,R=this.length):typeof R=="string"&&(L=R,R=this.length),L!==void 0&&typeof L!="string")throw new TypeError("encoding must be a string");if(typeof L=="string"&&!a.isEncoding(L))throw new TypeError("Unknown encoding: "+L);if(y.length===1){const K=y.charCodeAt(0);(L==="utf8"&&K<128||L==="latin1")&&(y=K)}}else typeof y=="number"?y=y&255:typeof y=="boolean"&&(y=Number(y));if(I<0||this.length<I||this.length<R)throw new RangeError("Out of range index");if(R<=I)return this;I=I>>>0,R=R===void 0?this.length:R>>>0,y||(y=0);let W;if(typeof y=="number")for(W=I;W<R;++W)this[W]=y;else{const K=a.isBuffer(y)?y:a.from(y,L),De=K.length;if(De===0)throw new TypeError('The value "'+y+'" is invalid for argument "value"');for(W=0;W<R-I;++W)this[W+I]=K[W%De]}return this};const pe={};function Nn(k,y,I){pe[k]=class extends I{constructor(){super(),Object.defineProperty(this,"message",{value:y.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${k}]`,this.stack,delete this.name}get code(){return k}set code(L){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:L,writable:!0})}toString(){return`${this.name} [${k}]: ${this.message}`}}}Nn("ERR_BUFFER_OUT_OF_BOUNDS",function(k){return k?`${k} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Nn("ERR_INVALID_ARG_TYPE",function(k,y){return`The "${k}" argument must be of type number. Received type ${typeof y}`},TypeError),Nn("ERR_OUT_OF_RANGE",function(k,y,I){let R=`The value of "${k}" is out of range.`,L=I;return Number.isInteger(I)&&Math.abs(I)>2**32?L=$n(String(I)):typeof I=="bigint"&&(L=String(I),(I>BigInt(2)**BigInt(32)||I<-(BigInt(2)**BigInt(32)))&&(L=$n(L)),L+="n"),R+=` It must be ${y}. Received ${L}`,R},RangeError);function $n(k){let y="",I=k.length;const R=k[0]==="-"?1:0;for(;I>=R+4;I-=3)y=`_${k.slice(I-3,I)}${y}`;return`${k.slice(0,I)}${y}`}function Nr(k,y,I){on(y,"offset"),(k[y]===void 0||k[y+I]===void 0)&&_r(y,k.length-(I+1))}function qe(k,y,I,R,L,W){if(k>I||k<y){const K=typeof y=="bigint"?"n":"";let De;throw y===0||y===BigInt(0)?De=`>= 0${K} and < 2${K} ** ${(W+1)*8}${K}`:De=`>= -(2${K} ** ${(W+1)*8-1}${K}) and < 2 ** ${(W+1)*8-1}${K}`,new pe.ERR_OUT_OF_RANGE("value",De,k)}Nr(R,L,W)}function on(k,y){if(typeof k!="number")throw new pe.ERR_INVALID_ARG_TYPE(y,"number",k)}function _r(k,y,I){throw Math.floor(k)!==k?(on(k,I),new pe.ERR_OUT_OF_RANGE("offset","an integer",k)):y<0?new pe.ERR_BUFFER_OUT_OF_BOUNDS:new pe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${y}`,k)}const le=/[^+/0-9A-Za-z-_]/g;function fe(k){if(k=k.split("=")[0],k=k.trim().replace(le,""),k.length<2)return"";for(;k.length%4!==0;)k=k+"=";return k}function ze(k,y){y=y||1/0;let I;const R=k.length;let L=null;const W=[];for(let K=0;K<R;++K){if(I=k.charCodeAt(K),I>55295&&I<57344){if(!L){if(I>56319){(y-=3)>-1&&W.push(239,191,189);continue}else if(K+1===R){(y-=3)>-1&&W.push(239,191,189);continue}L=I;continue}if(I<56320){(y-=3)>-1&&W.push(239,191,189),L=I;continue}I=(L-55296<<10|I-56320)+65536}else L&&(y-=3)>-1&&W.push(239,191,189);if(L=null,I<128){if((y-=1)<0)break;W.push(I)}else if(I<2048){if((y-=2)<0)break;W.push(I>>6|192,I&63|128)}else if(I<65536){if((y-=3)<0)break;W.push(I>>12|224,I>>6&63|128,I&63|128)}else if(I<1114112){if((y-=4)<0)break;W.push(I>>18|240,I>>12&63|128,I>>6&63|128,I&63|128)}else throw new Error("Invalid code point")}return W}function We(k){const y=[];for(let I=0;I<k.length;++I)y.push(k.charCodeAt(I)&255);return y}function xe(k,y){let I,R,L;const W=[];for(let K=0;K<k.length&&!((y-=2)<0);++K)I=k.charCodeAt(K),R=I>>8,L=I%256,W.push(L),W.push(R);return W}function $e(k){return e.toByteArray(fe(k))}function jt(k,y,I,R){let L;for(L=0;L<R&&!(L+I>=y.length||L>=k.length);++L)y[L+I]=k[L];return L}function Mt(k,y){return k instanceof y||k!=null&&k.constructor!=null&&k.constructor.name!=null&&k.constructor.name===y.name}function zr(k){return k!==k}const Hr=function(){const k="0123456789abcdef",y=new Array(256);for(let I=0;I<16;++I){const R=I*16;for(let L=0;L<16;++L)y[R+L]=k[I]+k[L]}return y}();function bn(k){return typeof BigInt>"u"?ec:k}function ec(){throw new Error("BigInt not supported")}})(an);var ou=(t=>(t[t.BINARY=0]="BINARY",t[t.ECHO=1]="ECHO",t[t.RCP=2]="RCP",t[t.SUPPRESS_GO_AHEAD=3]="SUPPRESS_GO_AHEAD",t[t.APPROX_MESSAGE_SIZE_NEGOTIATION=4]="APPROX_MESSAGE_SIZE_NEGOTIATION",t[t.STATUS=5]="STATUS",t[t.TIMING_MARK=6]="TIMING_MARK",t[t.REMOTE_CONTROLLED_TRANSMISSION_ECHO=7]="REMOTE_CONTROLLED_TRANSMISSION_ECHO",t[t.OUTPUT_LINE_WIDTH=8]="OUTPUT_LINE_WIDTH",t[t.OUTPUT_PAGE_SIZE=9]="OUTPUT_PAGE_SIZE",t[t.OUTPUT_CARRIAGE_RETURN_DISPOSITION=10]="OUTPUT_CARRIAGE_RETURN_DISPOSITION",t[t.OUTPUT_HORIZONTAL_TAB_STOPS=11]="OUTPUT_HORIZONTAL_TAB_STOPS",t[t.OUTPUT_HORIZONTAL_TAB_DISPOSITION=12]="OUTPUT_HORIZONTAL_TAB_DISPOSITION",t[t.OUTPUT_FORMFEED_DISPOSITION=13]="OUTPUT_FORMFEED_DISPOSITION",t[t.OUTPUT_VERTICAL_TAB_STOPS=14]="OUTPUT_VERTICAL_TAB_STOPS",t[t.OUTPUT_VERTICAL_TAB_DISPOSITION=15]="OUTPUT_VERTICAL_TAB_DISPOSITION",t[t.OUTPUT_LINEFEED_DISPOSITION=16]="OUTPUT_LINEFEED_DISPOSITION",t[t.EXTENDED_ASCII=17]="EXTENDED_ASCII",t[t.LOGOUT=18]="LOGOUT",t[t.BYTE_MACRO=19]="BYTE_MACRO",t[t.DATA_ENTRY_TERMINAL=20]="DATA_ENTRY_TERMINAL",t[t.SUPDUP=21]="SUPDUP",t[t.SUPDUP_OUTPUT=22]="SUPDUP_OUTPUT",t[t.SEND_LOCATION=23]="SEND_LOCATION",t[t.TERMINAL_TYPE=24]="TERMINAL_TYPE",t[t.END_OF_RECORD=25]="END_OF_RECORD",t[t.TACACS_USER_IDENTIFICATION=26]="TACACS_USER_IDENTIFICATION",t[t.OUTPUT_MARKING=27]="OUTPUT_MARKING",t[t.TERMINAL_LOCATION_NUMBER=28]="TERMINAL_LOCATION_NUMBER",t[t.TELNET_3270_REGIME=29]="TELNET_3270_REGIME",t[t.X_3_PAD=30]="X_3_PAD",t[t.NAWS=31]="NAWS",t[t.TERMINAL_SPEED=32]="TERMINAL_SPEED",t[t.REMOTE_FLOW_CONTROL=33]="REMOTE_FLOW_CONTROL",t[t.LINEMODE=34]="LINEMODE",t[t.X_DISPLAY_LOCATION=35]="X_DISPLAY_LOCATION",t[t.ENVIRONMENT_OPTION=36]="ENVIRONMENT_OPTION",t[t.AUTHENTICATION_OPTION=37]="AUTHENTICATION_OPTION",t[t.ENCRYPTION_OPTION=38]="ENCRYPTION_OPTION",t[t.NEW_ENVIRONMENT_OPTION=39]="NEW_ENVIRONMENT_OPTION",t[t.TN3270E=40]="TN3270E",t[t.XAUTH=41]="XAUTH",t[t.CHARSET=42]="CHARSET",t[t.RSP=43]="RSP",t[t.COM_PORT_OPTION=44]="COM_PORT_OPTION",t[t.SUPPRESS_LOCAL_ECHO=45]="SUPPRESS_LOCAL_ECHO",t[t.START_TLS=46]="START_TLS",t[t.KERMIT=47]="KERMIT",t[t.SEND_URL=48]="SEND_URL",t[t.FORWARD_X=49]="FORWARD_X",t[t.PRAGMA_LOGON=138]="PRAGMA_LOGON",t[t.GMCP=201]="GMCP",t))(ou||{}),su=(t=>(t[t.SE=240]="SE",t[t.NOP=241]="NOP",t[t.DM=242]="DM",t[t.BRK=243]="BRK",t[t.IP=244]="IP",t[t.AO=245]="AO",t[t.AYT=246]="AYT",t[t.EC=247]="EC",t[t.EL=248]="EL",t[t.GA=249]="GA",t[t.SB=250]="SB",t[t.WILL=251]="WILL",t[t.WONT=252]="WONT",t[t.DO=253]="DO",t[t.DONT=254]="DONT",t[t.IAC=255]="IAC",t))(su||{});class kL{constructor(e){V(this,"ws");this.ws=e}on(e,n){if(e==="data"){this.ws.onmessage=i=>{n(i.data)};return}const r="on"+e;this[r]=n}write(e){this.ws.send(e)}}class EL extends ME{constructor(n){super();V(this,"state");V(this,"buffer");V(this,"subBuffer");V(this,"iacSEBuffer",an.Buffer.from([255,240]));V(this,"negotiationByte",0);V(this,"stream");this.state=0,this.buffer=an.Buffer.alloc(0),this.subBuffer=an.Buffer.alloc(0),n&&n.on("data",r=>this.parse(r)),this.stream=n}parse(n){for(this.buffer=an.Buffer.concat([this.buffer,an.Buffer.from(n)]);this.buffer.length>0;){let r;switch(this.state){case 0:this.handleData();break;case 1:if(r=this.handleCommand(),r)return;break;case 2:if(r=this.handleSubnegotiation(),r)return;break;case 3:if(r=this.handleNegotiation(),r)return;break}}}handleData(){const n=this.buffer.indexOf(255);if(n===-1){this.emit("data",this.buffer),this.buffer=an.Buffer.alloc(0);return}this.emit("data",this.buffer.slice(0,n)),this.buffer=this.buffer.slice(n),this.state=1}handleCommand(){if(this.buffer.length<2)return!0;const n=this.buffer[1];switch(this.buffer=this.buffer.slice(2),n){case 241:this.emit("command",241),this.state=0;break;case 250:this.subBuffer=an.Buffer.alloc(0),this.state=2;break;case 253:case 254:case 251:case 252:this.negotiationByte=n,this.state=3;break;default:this.state=0;break}return!1}handleNegotiation(){if(this.buffer.length<1)return!0;const n=this.negotiationByte,r=this.buffer[0];return this.buffer=this.buffer.slice(1),this.emit("negotiation",n,r),this.state=0,!1}handleSubnegotiation(){let n=this.buffer.indexOf(this.iacSEBuffer);if(n===-1)return!0;this.state=0;let r=this.buffer.slice(0,n);return r[0]===201?this.handleGmcp(r.slice(1)):this.emit("subnegotiation",r),this.buffer=this.buffer.slice(n+2),!1}handleGmcp(n){const r=n.toString(),[i,o]=r.split(/ +(.+?)$/,2);this.emit("gmcp",i,o)}sendNegotiation(n,r){this.stream.write(an.Buffer.from([255,n,r]))}sendGmcp(n,r){const i=n+" "+r,o=an.Buffer.from(i),s=an.Buffer.concat([an.Buffer.from([255,250]),an.Buffer.from([201]),o,this.iacSEBuffer]);this.stream.write(s)}sendTerminalType(n){const r=an.Buffer.from(n),i=an.Buffer.concat([an.Buffer.from([255,250]),an.Buffer.from([24,0]),r,this.iacSEBuffer]);this.stream.write(i)}}function TL({onlyFirst:t=!1}={}){const e=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(e,t?void 0:"g")}const xL=TL();function PL(t){if(typeof t!="string")throw new TypeError(`Expected a \`string\`, got \`${typeof t}\``);return t.replace(xL,"")}class is{constructor(e){V(this,"packageName");V(this,"packageVersion",1);V(this,"client");this.client=e}sendData(e,n){this.client.sendGmcp(this.packageName+"."+e,JSON.stringify(n))}shutdown(){}}class RL extends is{constructor(){super(...arguments);V(this,"packageName","Auth.Autologin")}handleToken(n){localStorage.setItem("LoginRefreshToken",n)}sendLogin(){var n=localStorage.getItem("LoginRefreshToken");n&&this.sendData("Login",n)}}class NL extends is{constructor(){super(...arguments);V(this,"packageName","Char")}handleName(n){this.client.worldData.playerId=n.name,this.client.worldData.playerName=n.fullname,this.client.emit("statustext",`Logged in as ${n.fullname}`)}sendLogin(n,r){this.client.sendGmcp("Char.Login",JSON.stringify({name:n,password:r}))}}class _L extends is{constructor(n){super(n);V(this,"packageName","Client.Keystrokes");V(this,"bindings",[]);V(this,"boundKeyUpHandler");document.addEventListener("keydown",r=>this.handleKeydown(r))}handleKeydown(n){const r=this.findBinding(n);if(r){n.preventDefault();const i=this.client.getInput(),o=this.parseCommand(r.command,i);r.autosend?this.client.sendCommand(o):this.placeInInputField(o)}}shutdown(){document.removeEventListener("keydown",n=>this.handleKeydown(n))}findBinding(n){try{return this.bindings.find(r=>{if(r.key.toLowerCase()!==n.key.toLowerCase())return!1;const i=new Set([n.altKey&&"Alt",n.ctrlKey&&"Control",n.shiftKey&&"Shift",n.metaKey&&"Meta"].filter(Boolean));return r.modifiers&&r.modifiers.every(o=>i.has(o))})}catch(r){console.error("Error in finding key binding: ",r);return}}parseCommand(n,r){const i=r.trim().split(/\s+/);return n.replace(/%(\d+|\*)/g,(o,s)=>{if(s==="*")return r;const a=parseInt(s,10)-1;return a>=0&&a<i.length?i[a]:o})}placeInInputField(n){this.client.setInput(n)}bindKey(n){const r={key:n.key,modifiers:n.modifiers,command:n.command,autosend:n.autosend};this.bindings.push(r)}unbindKey(n){this.bindings=this.bindings.filter(r=>!(r.key===n.key&&r.modifiers.length===n.modifiers.length&&r.modifiers.every(i=>n.modifiers.includes(i))))}unbindAll(){this.bindings=[]}handleBind(n){this.bindKey(n)}handleUnbind(n){this.unbindKey(n)}handleBind_all(n){this.bindings=n.bindings.map(r=>({...r}))}listBindings(){return[...this.bindings]}}const mS=(t,e,n)=>({endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}),vS=(t,e,n)=>({endTime:e,insertTime:n,type:"linearRampToValue",value:t}),yv=(t,e)=>({startTime:e,type:"setValue",value:t}),LE=(t,e,n)=>({duration:n,startTime:e,type:"setValueCurve",values:t}),BE=(t,e,{startTime:n,target:r,timeConstant:i})=>r+(e-r)*Math.exp((n-t)/i),Ac=t=>t.type==="exponentialRampToValue",Lf=t=>t.type==="linearRampToValue",Ss=t=>Ac(t)||Lf(t),Zy=t=>t.type==="setValue",ho=t=>t.type==="setValueCurve",Bf=(t,e,n,r)=>{const i=t[e];return i===void 0?r:Ss(i)||Zy(i)?i.value:ho(i)?i.values[i.values.length-1]:BE(n,Bf(t,e-1,i.startTime,r),i)},yS=(t,e,n,r,i)=>n===void 0?[r.insertTime,i]:Ss(n)?[n.endTime,n.value]:Zy(n)?[n.startTime,n.value]:ho(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,Bf(t,e-1,n.startTime,i)],Cv=t=>t.type==="cancelAndHold",Iv=t=>t.type==="cancelScheduledValues",ds=t=>Cv(t)||Iv(t)?t.cancelTime:Ac(t)||Lf(t)?t.endTime:t.startTime,CS=(t,e,n,{endTime:r,value:i})=>n===i?i:0<n&&0<i||n<0&&i<0?n*(i/n)**((t-e)/(r-e)):0,IS=(t,e,n,{endTime:r,value:i})=>n+(t-e)/(r-e)*(i-n),OL=(t,e)=>{const n=Math.floor(e),r=Math.ceil(e);return n===r?t[n]:(1-(e-n))*t[n]+(1-(r-e))*t[r]},ML=(t,{duration:e,startTime:n,values:r})=>{const i=(t-n)/e*(r.length-1);return OL(r,i)},ah=t=>t.type==="setTarget";class DL{constructor(e){this._automationEvents=[],this._currenTime=0,this._defaultValue=e}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(e){const n=ds(e);if(Cv(e)||Iv(e)){const r=this._automationEvents.findIndex(o=>Iv(e)&&ho(o)?o.startTime+o.duration>=n:ds(o)>=n),i=this._automationEvents[r];if(r!==-1&&(this._automationEvents=this._automationEvents.slice(0,r)),Cv(e)){const o=this._automationEvents[this._automationEvents.length-1];if(i!==void 0&&Ss(i)){if(o!==void 0&&ah(o))throw new Error("The internal list is malformed.");const s=o===void 0?i.insertTime:ho(o)?o.startTime+o.duration:ds(o),a=o===void 0?this._defaultValue:ho(o)?o.values[o.values.length-1]:o.value,c=Ac(i)?CS(n,s,a,i):IS(n,s,a,i),l=Ac(i)?mS(c,n,this._currenTime):vS(c,n,this._currenTime);this._automationEvents.push(l)}if(o!==void 0&&ah(o)&&this._automationEvents.push(yv(this.getValue(n),n)),o!==void 0&&ho(o)&&o.startTime+o.duration>n){const s=n-o.startTime,a=(o.values.length-1)/o.duration,c=Math.max(2,1+Math.ceil(s*a)),l=s/(c-1)*a,u=o.values.slice(0,c);if(l<1)for(let d=1;d<c;d+=1){const h=l*d%1;u[d]=o.values[d-1]*(1-h)+o.values[d]*h}this._automationEvents[this._automationEvents.length-1]=LE(u,o.startTime,s)}}}else{const r=this._automationEvents.findIndex(s=>ds(s)>n),i=r===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[r-1];if(i!==void 0&&ho(i)&&ds(i)+i.duration>n)return!1;const o=Ac(e)?mS(e.value,e.endTime,this._currenTime):Lf(e)?vS(e.value,n,this._currenTime):e;if(r===-1)this._automationEvents.push(o);else{if(ho(e)&&n+e.duration>ds(this._automationEvents[r]))return!1;this._automationEvents.splice(r,0,o)}}return!0}flush(e){const n=this._automationEvents.findIndex(r=>ds(r)>e);if(n>1){const r=this._automationEvents.slice(n-1),i=r[0];ah(i)&&r.unshift(yv(Bf(this._automationEvents,n-2,i.startTime,this._defaultValue),i.startTime)),this._automationEvents=r}}getValue(e){if(this._automationEvents.length===0)return this._defaultValue;const n=this._automationEvents.findIndex(s=>ds(s)>e),r=this._automationEvents[n],i=(n===-1?this._automationEvents.length:n)-1,o=this._automationEvents[i];if(o!==void 0&&ah(o)&&(r===void 0||!Ss(r)||r.insertTime>e))return BE(e,Bf(this._automationEvents,i-1,o.startTime,this._defaultValue),o);if(o!==void 0&&Zy(o)&&(r===void 0||!Ss(r)))return o.value;if(o!==void 0&&ho(o)&&(r===void 0||!Ss(r)||o.startTime+o.duration>e))return e<o.startTime+o.duration?ML(e,o):o.values[o.values.length-1];if(o!==void 0&&Ss(o)&&(r===void 0||!Ss(r)))return o.value;if(r!==void 0&&Ac(r)){const[s,a]=yS(this._automationEvents,i,o,r,this._defaultValue);return CS(e,s,a,r)}if(r!==void 0&&Lf(r)){const[s,a]=yS(this._automationEvents,i,o,r,this._defaultValue);return IS(e,s,a,r)}return this._defaultValue}}const LL=t=>({cancelTime:t,type:"cancelAndHold"}),BL=t=>({cancelTime:t,type:"cancelScheduledValues"}),FL=(t,e)=>({endTime:e,type:"exponentialRampToValue",value:t}),UL=(t,e)=>({endTime:e,type:"linearRampToValue",value:t}),VL=(t,e,n)=>({startTime:e,target:t,timeConstant:n,type:"setTarget"}),GL=()=>new DOMException("","AbortError"),WL=t=>(e,n,[r,i,o],s)=>{t(e[i],[n,r,o],a=>a[0]===n&&a[1]===r,s)},jL=t=>(e,n,r)=>{const i=[];for(let o=0;o<r.numberOfInputs;o+=1)i.push(new Set);t.set(e,{activeInputs:i,outputs:new Set,passiveInputs:new WeakMap,renderer:n})},ZL=t=>(e,n)=>{t.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:n})},nl=new WeakSet,FE=new WeakMap,UE=new WeakMap,VE=new WeakMap,GE=new WeakMap,WE=new WeakMap,jE=new WeakMap,bv=new WeakMap,Sv=new WeakMap,wv=new WeakMap,ZE={construct(){return ZE}},zL=t=>{try{const e=new Proxy(t,ZE);new e}catch{return!1}return!0},bS=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,SS=(t,e)=>{const n=[];let r=t.replace(/^[\s]+/,""),i=r.match(bS);for(;i!==null;){const o=i[1].slice(1,-1),s=i[0].replace(/([\s]+)?;?$/,"").replace(o,new URL(o,e).toString());n.push(s),r=r.slice(i[0].length).replace(/^[\s]+/,""),i=r.match(bS)}return[n.join(";"),r]},wS=t=>{if(t!==void 0&&!Array.isArray(t))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},AS=t=>{if(!zL(t))throw new TypeError("The given value for processorCtor should be a constructor.");if(t.prototype===null||typeof t.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},HL=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>{let f=0;return(p,g,C={credentials:"omit"})=>{const m=u.get(p);if(m!==void 0&&m.has(g))return Promise.resolve();const v=l.get(p);if(v!==void 0){const w=v.get(g);if(w!==void 0)return w}const b=o(p),E=b.audioWorklet===void 0?i(g).then(([w,A])=>{const[x,T]=SS(w,A),_=`${x};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${T}
})})(window,'_AWGS')`;return n(_)}).then(()=>{const w=h._AWGS.pop();if(w===void 0)throw new SyntaxError;r(b.currentTime,b.sampleRate,()=>w(class{},void 0,(A,x)=>{if(A.trim()==="")throw e();const T=Sv.get(b);if(T!==void 0){if(T.has(A))throw e();AS(x),wS(x.parameterDescriptors),T.set(A,x)}else AS(x),wS(x.parameterDescriptors),Sv.set(b,new Map([[A,x]]))},b.sampleRate,void 0,void 0))}):Promise.all([i(g),Promise.resolve(t(d,d))]).then(([[w,A],x])=>{const T=f+1;f=T;const[_,O]=SS(w,A),Z=`${_};((AudioWorkletProcessor,registerProcessor)=>{${O}
})(${x?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${x?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${x?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${T}',class extends AudioWorkletProcessor{process(){return !1}})`,Y=new Blob([Z],{type:"application/javascript; charset=utf-8"}),ee=URL.createObjectURL(Y);return b.audioWorklet.addModule(ee,C).then(()=>{if(a(b))return b;const ne=s(b);return ne.audioWorklet.addModule(ee,C).then(()=>ne)}).then(ne=>{if(c===null)throw new SyntaxError;try{new c(ne,`__sac${T}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(ee))});return v===void 0?l.set(p,new Map([[g,E]])):v.set(g,E),E.then(()=>{const w=u.get(p);w===void 0?u.set(p,new Set([g])):w.add(g)}).finally(()=>{const w=l.get(p);w!==void 0&&w.delete(g)}),E}},Ii=(t,e)=>{const n=t.get(e);if(n===void 0)throw new Error("A value with the given key could not be found.");return n},_p=(t,e)=>{const n=Array.from(t).filter(e);if(n.length>1)throw Error("More than one element was found.");if(n.length===0)throw Error("No element was found.");const[r]=n;return t.delete(r),r},zE=(t,e,n,r)=>{const i=Ii(t,e),o=_p(i,s=>s[0]===n&&s[1]===r);return i.size===0&&t.delete(e),o},bd=t=>Ii(jE,t),rl=t=>{if(nl.has(t))throw new Error("The AudioNode is already stored.");nl.add(t),bd(t).forEach(e=>e(!0))},HE=t=>"port"in t,Sd=t=>{if(!nl.has(t))throw new Error("The AudioNode is not stored.");nl.delete(t),bd(t).forEach(e=>e(!1))},Av=(t,e)=>{!HE(t)&&e.every(n=>n.size===0)&&Sd(t)},XL=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>{const f=new WeakMap;return(p,g,C,m,v)=>{const{activeInputs:b,passiveInputs:E}=o(g),{outputs:w}=o(p),A=a(p),x=T=>{const _=c(g),O=c(p);if(T){const D=zE(E,p,C,m);t(b,p,D,!1),!v&&!d(p)&&n(O,_,C,m),h(g)&&rl(g)}else{const D=r(b,p,C,m);e(E,m,D,!1),!v&&!d(p)&&i(O,_,C,m);const U=s(g);if(U===0)u(g)&&Av(g,b);else{const j=f.get(g);j!==void 0&&clearTimeout(j),f.set(g,setTimeout(()=>{u(g)&&Av(g,b)},U*1e3))}}};return l(w,[g,C,m],T=>T[0]===g&&T[1]===C&&T[2]===m,!0)?(A.add(x),u(p)?t(b,p,[C,m,x],!0):e(E,m,[p,C,x],!0),!0):!1}},$L=t=>(e,n,[r,i,o],s)=>{const a=e.get(r);a===void 0?e.set(r,new Set([[i,n,o]])):t(a,[i,n,o],c=>c[0]===i&&c[1]===n,s)},KL=t=>(e,n)=>{const r=t(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});n.connect(r).connect(e.destination);const i=()=>{n.removeEventListener("ended",i),n.disconnect(r),r.disconnect()};n.addEventListener("ended",i)},JL=t=>(e,n)=>{t(e).add(n)},YL={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},QL=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...YL,...c},d=r(l,u),h=o(l)?e():null;super(a,!1,d,h),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,n()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,n()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}},Rn=(t,e)=>t.context===e,qL=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Rn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},kv=t=>{try{t.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},ro=()=>new DOMException("","IndexSizeError"),XE=t=>{t.getChannelData=(e=>n=>{try{return e.call(t,n)}catch(r){throw r.code===12?ro():r}})(t.getChannelData)},eB={numberOfChannels:1},tB=(t,e,n,r,i,o,s,a)=>{let c=null;return class $E{constructor(u){if(i===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:h,sampleRate:f}={...eB,...u};c===null&&(c=new i(1,1,44100));const p=r!==null&&e(o,o)?new r({length:d,numberOfChannels:h,sampleRate:f}):c.createBuffer(h,d,f);if(p.numberOfChannels===0)throw n();return typeof p.copyFromChannel!="function"?(s(p),XE(p)):e(kv,()=>kv(p))||a(p),t.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===$E.prototype||t.has(u)}}},qn=-34028234663852886e22,Ln=-qn,zo=t=>nl.has(t),nB={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},rB=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...nB,...u},f=i(d,h),p=s(d),g=p?e():null;super(l,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=h.buffer!==null,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=n(this,p,f.playbackRate,Ln,qn)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){const u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;const d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[l,u]:[l,u,d]),this.context.state!=="closed"){rl(this);const h=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",h),zo(this)&&Sd(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",h)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}},iB=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const h=Rn(d,u);if(!h){const f={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,f),s!==null&&d.start(...s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,l.playbackRate,d.playbackRate):await r(u,l.playbackRate,d.playbackRate),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},oB=t=>"playbackRate"in t,sB=t=>"frequency"in t&&"gain"in t,aB=t=>"offset"in t,cB=t=>!("frequency"in t)&&"gain"in t,lB=t=>"detune"in t&&"frequency"in t&&!("gain"in t),uB=t=>"pan"in t,Un=t=>Ii(FE,t),wd=t=>Ii(VE,t),Ev=(t,e)=>{const{activeInputs:n}=Un(t);n.forEach(i=>i.forEach(([o])=>{e.includes(t)||Ev(o,[...e,t])}));const r=oB(t)?[t.playbackRate]:HE(t)?Array.from(t.parameters.values()):sB(t)?[t.Q,t.detune,t.frequency,t.gain]:aB(t)?[t.offset]:cB(t)?[t.gain]:lB(t)?[t.detune,t.frequency]:uB(t)?[t.pan]:[];for(const i of r){const o=wd(i);o!==void 0&&o.activeInputs.forEach(([s])=>Ev(s,e))}zo(t)&&Sd(t)},dB=t=>{Ev(t.destination,[])},hB=t=>t===void 0||typeof t=="number"||typeof t=="string"&&(t==="balanced"||t==="interactive"||t==="playback"),fB=(t,e,n,r,i,o,s,a,c)=>class extends t{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?n():p}if(d===null)throw r();if(!hB(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw n();super(d,2);const{latencyHint:h}=u,{sampleRate:f}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:h==="balanced"?512/f:h==="interactive"||h===void 0?256/f:h==="playback"?1024/f:Math.max(2,Math.min(128,Math.round(h*f/128)))*128/f,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";const p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),dB(this)}))}createMediaElementSource(u){return new i(this,{mediaElement:u})}createMediaStreamDestination(){return new o(this)}createMediaStreamSource(u){return new s(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{const h=()=>{this._nativeAudioContext.removeEventListener("statechange",h),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",h)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}},pB=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h=s(d),f=i(d,u,h),p=h?e(a):null;super(l,!1,f,p),this._isNodeOfNativeOfflineAudioContext=h,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},gB=t=>{const e=new WeakMap,n=async(r,i)=>{const o=i.destination;return e.set(i,o),await t(r,i,o),o};return{render(r,i){const o=e.get(i);return o!==void 0?Promise.resolve(o):n(r,i)}}},mB=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=l.listener,d=()=>{const w=new Float32Array(1),A=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),x=s(l);let T=!1,_=[0,0,-1,0,1,0],O=[0,0,0];const D=()=>{if(T)return;T=!0;const Y=r(l,256,9,0);Y.onaudioprocess=({inputBuffer:ee})=>{const ne=[o(ee,w,0),o(ee,w,1),o(ee,w,2),o(ee,w,3),o(ee,w,4),o(ee,w,5)];ne.some(($,re)=>$!==_[re])&&(u.setOrientation(...ne),_=ne);const z=[o(ee,w,6),o(ee,w,7),o(ee,w,8)];z.some(($,re)=>$!==O[re])&&(u.setPosition(...z),O=z)},A.connect(Y)},U=Y=>ee=>{ee!==_[Y]&&(_[Y]=ee,u.setOrientation(..._))},j=Y=>ee=>{ee!==O[Y]&&(O[Y]=ee,u.setPosition(...O))},Z=(Y,ee,ne)=>{const z=n(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ee});z.connect(A,0,Y),z.start(),Object.defineProperty(z.offset,"defaultValue",{get(){return ee}});const $=t({context:c},x,z.offset,Ln,qn);return a($,"value",re=>()=>re.call($),re=>H=>{try{re.call($,H)}catch(ie){if(ie.code!==9)throw ie}D(),x&&ne(H)}),$.cancelAndHoldAtTime=(re=>x?()=>{throw i()}:(...H)=>{const ie=re.apply($,H);return D(),ie})($.cancelAndHoldAtTime),$.cancelScheduledValues=(re=>x?()=>{throw i()}:(...H)=>{const ie=re.apply($,H);return D(),ie})($.cancelScheduledValues),$.exponentialRampToValueAtTime=(re=>x?()=>{throw i()}:(...H)=>{const ie=re.apply($,H);return D(),ie})($.exponentialRampToValueAtTime),$.linearRampToValueAtTime=(re=>x?()=>{throw i()}:(...H)=>{const ie=re.apply($,H);return D(),ie})($.linearRampToValueAtTime),$.setTargetAtTime=(re=>x?()=>{throw i()}:(...H)=>{const ie=re.apply($,H);return D(),ie})($.setTargetAtTime),$.setValueAtTime=(re=>x?()=>{throw i()}:(...H)=>{const ie=re.apply($,H);return D(),ie})($.setValueAtTime),$.setValueCurveAtTime=(re=>x?()=>{throw i()}:(...H)=>{const ie=re.apply($,H);return D(),ie})($.setValueCurveAtTime),$};return{forwardX:Z(0,0,U(0)),forwardY:Z(1,0,U(1)),forwardZ:Z(2,-1,U(2)),positionX:Z(6,0,j(0)),positionY:Z(7,0,j(1)),positionZ:Z(8,0,j(2)),upX:Z(3,0,U(3)),upY:Z(4,1,U(4)),upZ:Z(5,0,U(5))}},{forwardX:h,forwardY:f,forwardZ:p,positionX:g,positionY:C,positionZ:m,upX:v,upY:b,upZ:E}=u.forwardX===void 0?d():u;return{get forwardX(){return h},get forwardY(){return f},get forwardZ(){return p},get positionX(){return g},get positionY(){return C},get positionZ(){return m},get upX(){return v},get upY(){return b},get upZ(){return E}}},Ff=t=>"context"in t,Ad=t=>Ff(t[0]),Ka=(t,e,n,r)=>{for(const i of t)if(n(i)){if(r)return!1;throw Error("The set contains at least one similar element.")}return t.add(e),!0},kS=(t,e,[n,r],i)=>{Ka(t,[e,n,r],o=>o[0]===e&&o[1]===n,i)},ES=(t,[e,n,r],i)=>{const o=t.get(e);o===void 0?t.set(e,new Set([[n,r]])):Ka(o,[n,r],s=>s[0]===n,i)},vl=t=>"inputs"in t,Uf=(t,e,n,r)=>{if(vl(e)){const i=e.inputs[r];return t.connect(i,n,0),[i,n,0]}return t.connect(e,n,r),[e,n,r]},KE=(t,e,n)=>{for(const r of t)if(r[0]===e&&r[1]===n)return t.delete(r),r;return null},vB=(t,e,n)=>_p(t,r=>r[0]===e&&r[1]===n),JE=(t,e)=>{if(!bd(t).delete(e))throw new Error("Missing the expected event listener.")},YE=(t,e,n)=>{const r=Ii(t,e),i=_p(r,o=>o[0]===n);return r.size===0&&t.delete(e),i},Vf=(t,e,n,r)=>{vl(e)?t.disconnect(e.inputs[r],n,0):t.disconnect(e,n,r)},St=t=>Ii(UE,t),Yu=t=>Ii(GE,t),Fa=t=>bv.has(t),Uh=t=>!nl.has(t),TS=(t,e)=>new Promise(n=>{if(e!==null)n(!0);else{const r=t.createScriptProcessor(256,1,1),i=t.createGain(),o=t.createBuffer(1,2,44100),s=o.getChannelData(0);s[0]=1,s[1]=1;const a=t.createBufferSource();a.buffer=o,a.loop=!0,a.connect(r).connect(t.destination),a.connect(i),a.disconnect(i),r.onaudioprocess=c=>{const l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?n(!0):n(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(t.destination)},a.start()}}),Ug=(t,e)=>{const n=new Map;for(const r of t)for(const i of r){const o=n.get(i);n.set(i,o===void 0?1:o+1)}n.forEach((r,i)=>e(i,r))},Gf=t=>"context"in t,yB=t=>{const e=new Map;t.connect=(n=>(r,i=0,o=0)=>{const s=Gf(r)?n(r,i,o):n(r,i),a=e.get(r);return a===void 0?e.set(r,[{input:o,output:i}]):a.every(c=>c.input!==o||c.output!==i)&&a.push({input:o,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(r,i,o)=>{if(n.apply(t),r===void 0)e.clear();else if(typeof r=="number")for(const[s,a]of e){const c=a.filter(l=>l.output!==r);c.length===0?e.delete(s):e.set(s,c)}else if(e.has(r))if(i===void 0)e.delete(r);else{const s=e.get(r);if(s!==void 0){const a=s.filter(c=>c.output!==i&&(c.input!==o||o===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(const[s,a]of e)a.forEach(c=>{Gf(s)?t.connect(s,c.output,c.input):t.connect(s,c.output)})})(t.disconnect)},CB=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=wd(e),{outputs:s}=Un(t),a=bd(t),c=l=>{const u=St(t),d=Yu(e);if(l){const h=YE(o,t,n);kS(i,t,h,!1),!r&&!Fa(t)&&u.connect(d,n)}else{const h=vB(i,t,n);ES(o,h,!1),!r&&!Fa(t)&&u.disconnect(d,n)}};return Ka(s,[e,n],l=>l[0]===e&&l[1]===n,!0)?(a.add(c),zo(t)?kS(i,t,[n,c],!0):ES(o,[t,n,c],!0),!0):!1},IB=(t,e,n,r)=>{const{activeInputs:i,passiveInputs:o}=Un(e),s=KE(i[r],t,n);return s===null?[zE(o,t,n,r)[2],!1]:[s[2],!0]},bB=(t,e,n)=>{const{activeInputs:r,passiveInputs:i}=wd(e),o=KE(r,t,n);return o===null?[YE(i,t,n)[1],!1]:[o[2],!0]},zy=(t,e,n,r,i)=>{const[o,s]=IB(t,n,r,i);if(o!==null&&(JE(t,o),s&&!e&&!Fa(t)&&Vf(St(t),St(n),r,i)),zo(n)){const{activeInputs:a}=Un(n);Av(n,a)}},Hy=(t,e,n,r)=>{const[i,o]=bB(t,n,r);i!==null&&(JE(t,i),o&&!e&&!Fa(t)&&St(t).disconnect(Yu(n),r))},SB=(t,e)=>{const n=Un(t),r=[];for(const i of n.outputs)Ad(i)?zy(t,e,...i):Hy(t,e,...i),r.push(i[0]);return n.outputs.clear(),r},wB=(t,e,n)=>{const r=Un(t),i=[];for(const o of r.outputs)o[1]===n&&(Ad(o)?zy(t,e,...o):Hy(t,e,...o),i.push(o[0]),r.outputs.delete(o));return i},AB=(t,e,n,r,i)=>{const o=Un(t);return Array.from(o.outputs).filter(s=>s[0]===n&&(r===void 0||s[1]===r)&&(i===void 0||s[2]===i)).map(s=>(Ad(s)?zy(t,e,...s):Hy(t,e,...s),o.outputs.delete(s),s[0]))},kB=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g)=>class extends l{constructor(m,v,b,E){super(b),this._context=m,this._nativeAudioNode=b;const w=u(m);d(w)&&n(TS,()=>TS(w,g))!==!0&&yB(b),UE.set(this,b),jE.set(this,new Set),m.state!=="closed"&&v&&rl(this),t(this,E,b)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(m){this._nativeAudioNode.channelCount=m}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(m){this._nativeAudioNode.channelCountMode=m}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(m){this._nativeAudioNode.channelInterpretation=m}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(m,v=0,b=0){if(v<0||v>=this._nativeAudioNode.numberOfOutputs)throw i();const E=u(this._context),w=p(E);if(h(m)||f(m))throw o();if(Ff(m)){const T=St(m);try{const O=Uf(this._nativeAudioNode,T,v,b),D=Uh(this);(w||D)&&this._nativeAudioNode.disconnect(...O),this.context.state!=="closed"&&!D&&Uh(m)&&rl(m)}catch(O){throw O.code===12?o():O}if(e(this,m,v,b,w)){const O=c([this],m);Ug(O,r(w))}return m}const A=Yu(m);if(A.name==="playbackRate"&&A.maxValue===1024)throw s();try{this._nativeAudioNode.connect(A,v),(w||Uh(this))&&this._nativeAudioNode.disconnect(A,v)}catch(T){throw T.code===12?o():T}if(CB(this,m,v,w)){const T=c([this],m);Ug(T,r(w))}}disconnect(m,v,b){let E;const w=u(this._context),A=p(w);if(m===void 0)E=SB(this,A);else if(typeof m=="number"){if(m<0||m>=this.numberOfOutputs)throw i();E=wB(this,A,m)}else{if(v!==void 0&&(v<0||v>=this.numberOfOutputs)||Ff(m)&&b!==void 0&&(b<0||b>=m.numberOfInputs))throw i();if(E=AB(this,A,m,v,b),E.length===0)throw o()}for(const x of E){const T=c([this],x);Ug(T,a)}}},EB=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>(f,p,g,C=null,m=null)=>{const v=g.value,b=new DL(v),E=p?r(b):null,w={get defaultValue(){return v},get maxValue(){return C===null?g.maxValue:C},get minValue(){return m===null?g.minValue:m},get value(){return g.value},set value(A){g.value=A,w.setValueAtTime(A,f.context.currentTime)},cancelAndHoldAtTime(A){if(typeof g.cancelAndHoldAtTime=="function")E===null&&b.flush(f.context.currentTime),b.add(i(A)),g.cancelAndHoldAtTime(A);else{const x=Array.from(b).pop();E===null&&b.flush(f.context.currentTime),b.add(i(A));const T=Array.from(b).pop();g.cancelScheduledValues(A),x!==T&&T!==void 0&&(T.type==="exponentialRampToValue"?g.exponentialRampToValueAtTime(T.value,T.endTime):T.type==="linearRampToValue"?g.linearRampToValueAtTime(T.value,T.endTime):T.type==="setValue"?g.setValueAtTime(T.value,T.startTime):T.type==="setValueCurve"&&g.setValueCurveAtTime(T.values,T.startTime,T.duration))}return w},cancelScheduledValues(A){return E===null&&b.flush(f.context.currentTime),b.add(o(A)),g.cancelScheduledValues(A),w},exponentialRampToValueAtTime(A,x){if(A===0)throw new RangeError;if(!Number.isFinite(x)||x<0)throw new RangeError;const T=f.context.currentTime;return E===null&&b.flush(T),Array.from(b).length===0&&(b.add(l(v,T)),g.setValueAtTime(v,T)),b.add(s(A,x)),g.exponentialRampToValueAtTime(A,x),w},linearRampToValueAtTime(A,x){const T=f.context.currentTime;return E===null&&b.flush(T),Array.from(b).length===0&&(b.add(l(v,T)),g.setValueAtTime(v,T)),b.add(a(A,x)),g.linearRampToValueAtTime(A,x),w},setTargetAtTime(A,x,T){return E===null&&b.flush(f.context.currentTime),b.add(c(A,x,T)),g.setTargetAtTime(A,x,T),w},setValueAtTime(A,x){return E===null&&b.flush(f.context.currentTime),b.add(l(A,x)),g.setValueAtTime(A,x),w},setValueCurveAtTime(A,x,T){const _=A instanceof Float32Array?A:new Float32Array(A);if(d!==null&&d.name==="webkitAudioContext"){const O=x+T,D=f.context.sampleRate,U=Math.ceil(x*D),j=Math.floor(O*D),Z=j-U,Y=new Float32Array(Z);for(let ne=0;ne<Z;ne+=1){const z=(_.length-1)/T*((U+ne)/D-x),$=Math.floor(z),re=Math.ceil(z);Y[ne]=$===re?_[$]:(1-(z-$))*_[$]+(1-(re-z))*_[re]}E===null&&b.flush(f.context.currentTime),b.add(u(Y,x,T)),g.setValueCurveAtTime(Y,x,T);const ee=j/D;ee<O&&h(w,Y[Y.length-1],ee),h(w,_[_.length-1],O)}else E===null&&b.flush(f.context.currentTime),b.add(u(_,x,T)),g.setValueCurveAtTime(_,x,T);return w}};return n.set(w,g),e.set(w,f),t(w,E),w},TB=t=>({replay(e){for(const n of t)if(n.type==="exponentialRampToValue"){const{endTime:r,value:i}=n;e.exponentialRampToValueAtTime(i,r)}else if(n.type==="linearRampToValue"){const{endTime:r,value:i}=n;e.linearRampToValueAtTime(i,r)}else if(n.type==="setTarget"){const{startTime:r,target:i,timeConstant:o}=n;e.setTargetAtTime(i,r,o)}else if(n.type==="setValue"){const{startTime:r,value:i}=n;e.setValueAtTime(i,r)}else if(n.type==="setValueCurve"){const{duration:r,startTime:i,values:o}=n;e.setValueCurveAtTime(o,i,r)}else throw new Error("Can't apply an unknown automation.")}});class QE{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,n=null){return this._map.forEach((r,i)=>e.call(n,r,i,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const xB={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},PB=(t,e,n,r,i,o,s,a,c,l,u,d,h,f)=>class extends e{constructor(g,C,m){var v;const b=a(g),E=c(b),w=u({...xB,...m});h(w);const A=Sv.get(b),x=A==null?void 0:A.get(C),T=E||b.state!=="closed"?b:(v=s(b))!==null&&v!==void 0?v:b,_=i(T,E?null:g.baseLatency,l,C,x,w),O=E?r(C,w,x):null;super(g,!0,_,O);const D=[];_.parameters.forEach((j,Z)=>{const Y=n(this,E,j);D.push([Z,Y])}),this._nativeAudioWorkletNode=_,this._onprocessorerror=null,this._parameters=new QE(D),E&&t(b,this);const{activeInputs:U}=o(this);d(_,U)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const C=typeof g=="function"?f(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=C;const m=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=m!==null&&m===C?g:m}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Wf(t,e,n,r,i){if(typeof t.copyFromChannel=="function")e[n].byteLength===0&&(e[n]=new Float32Array(128)),t.copyFromChannel(e[n],r,i);else{const o=t.getChannelData(r);if(e[n].byteLength===0)e[n]=o.slice(i,i+128);else{const s=new Float32Array(o.buffer,i*Float32Array.BYTES_PER_ELEMENT,128);e[n].set(s)}}}const qE=(t,e,n,r,i)=>{typeof t.copyToChannel=="function"?e[n].byteLength!==0&&t.copyToChannel(e[n],r,i):e[n].byteLength!==0&&t.getChannelData(r).set(e[n],i)},jf=(t,e)=>{const n=[];for(let r=0;r<t;r+=1){const i=[],o=typeof e=="number"?e:e[r];for(let s=0;s<o;s+=1)i.push(new Float32Array(128));n.push(i)}return n},RB=(t,e)=>{const n=Ii(wv,t),r=St(e);return Ii(n,r)},NB=async(t,e,n,r,i,o,s)=>{const a=e===null?Math.ceil(t.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,l=i.reduce((C,m)=>C+m,0),u=l===0?null:n.createBuffer(l,a,n.sampleRate);if(o===void 0)throw new Error("Missing the processor constructor.");const d=Un(t),h=await RB(n,t),f=jf(r.numberOfInputs,r.channelCount),p=jf(r.numberOfOutputs,i),g=Array.from(t.parameters.keys()).reduce((C,m)=>({...C,[m]:new Float32Array(128)}),{});for(let C=0;C<a;C+=128){if(r.numberOfInputs>0&&e!==null)for(let m=0;m<r.numberOfInputs;m+=1)for(let v=0;v<r.channelCount;v+=1)Wf(e,f[m],v,v,C);o.parameterDescriptors!==void 0&&e!==null&&o.parameterDescriptors.forEach(({name:m},v)=>{Wf(e,g,m,c+v,C)});for(let m=0;m<r.numberOfInputs;m+=1)for(let v=0;v<i[m];v+=1)p[m][v].byteLength===0&&(p[m][v]=new Float32Array(128));try{const m=f.map((b,E)=>d.activeInputs[E].size===0?[]:b),v=s(C/n.sampleRate,n.sampleRate,()=>h.process(m,p,g));if(u!==null)for(let b=0,E=0;b<r.numberOfOutputs;b+=1){for(let w=0;w<i[b];w+=1)qE(u,p[b],w,E+w,C);E+=i[b]}if(!v)break}catch(m){t.dispatchEvent(new ErrorEvent("processorerror",{colno:m.colno,filename:m.filename,lineno:m.lineno,message:m.message}));break}}return u},_B=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g)=>(C,m,v)=>{const b=new WeakMap;let E=null;const w=async(A,x)=>{let T=u(A),_=null;const O=Rn(T,x),D=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(d===null){const U=D.reduce((ee,ne)=>ee+ne,0),j=i(x,{channelCount:Math.max(1,U),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,U)}),Z=[];for(let ee=0;ee<A.numberOfOutputs;ee+=1)Z.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:D[ee]}));const Y=s(x,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1});Y.connect=e.bind(null,Z),Y.disconnect=c.bind(null,Z),_=[j,Z,Y]}else O||(T=new d(x,C));if(b.set(x,_===null?T:_[2]),_!==null){if(E===null){if(v===void 0)throw new Error("Missing the processor constructor.");if(h===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ne=A.channelCount*A.numberOfInputs,z=v.parameterDescriptors===void 0?0:v.parameterDescriptors.length,$=ne+z;E=NB(A,$===0?null:await(async()=>{const H=new h($,Math.ceil(A.context.length/128)*128,x.sampleRate),ie=[],Re=[];for(let Te=0;Te<m.numberOfInputs;Te+=1)ie.push(s(H,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),Re.push(i(H,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const Ne=await Promise.all(Array.from(A.parameters.values()).map(async Te=>{const it=o(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Te.value});return await f(H,Te,it.offset),it})),Ce=r(H,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ne+z)});for(let Te=0;Te<m.numberOfInputs;Te+=1){ie[Te].connect(Re[Te]);for(let it=0;it<m.channelCount;it+=1)Re[Te].connect(Ce,it,Te*m.channelCount+it)}for(const[Te,it]of Ne.entries())it.connect(Ce,0,ne+Te),it.start(0);return Ce.connect(H.destination),await Promise.all(ie.map(Te=>p(A,H,Te))),g(H)})(),x,m,D,v,l)}const U=await E,j=n(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[Z,Y,ee]=_;U!==null&&(j.buffer=U,j.start(0)),j.connect(Z);for(let ne=0,z=0;ne<A.numberOfOutputs;ne+=1){const $=Y[ne];for(let re=0;re<D[ne];re+=1)Z.connect($,z+re,re);z+=D[ne]}return ee}if(O)for(const[U,j]of A.parameters.entries())await t(x,j,T.parameters.get(U));else for(const[U,j]of A.parameters.entries())await f(x,j,T.parameters.get(U));return await p(A,x,T),T};return{render(A,x){a(x,A);const T=b.get(x);return T!==void 0?Promise.resolve(T):w(A,x)}}},OB=(t,e,n,r,i,o,s,a,c,l,u,d,h,f,p,g,C,m,v,b)=>class extends p{constructor(w,A){super(w,A),this._nativeContext=w,this._audioWorklet=t===void 0?void 0:{addModule:(x,T)=>t(this,x,T)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new i(this)}createBuffer(w,A,x){return new n({length:A,numberOfChannels:w,sampleRate:x})}createBufferSource(){return new r(this)}createChannelMerger(w=6){return new o(this,{numberOfInputs:w})}createChannelSplitter(w=6){return new s(this,{numberOfOutputs:w})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(w=1){return new u(this,{maxDelayTime:w})}createDynamicsCompressor(){return new d(this)}createGain(){return new h(this)}createIIRFilter(w,A){return new f(this,{feedback:A,feedforward:w})}createOscillator(){return new g(this)}createPanner(){return new C(this)}createPeriodicWave(w,A,x={disableNormalization:!1}){return new m(this,{...x,imag:A,real:w})}createStereoPanner(){return new v(this)}createWaveShaper(){return new b(this)}decodeAudioData(w,A,x){return l(this._nativeContext,w).then(T=>(typeof A=="function"&&A(T),T),T=>{throw typeof x=="function"&&x(T),T})}},MB={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},DB=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...MB,...u},f=i(d,h),p=s(d),g=p?n():null;super(l,!1,f,g),this._Q=e(this,p,f.Q,Ln,qn),this._detune=e(this,p,f.detune,1200*Math.log2(Ln),-1200*Math.log2(Ln)),this._frequency=e(this,p,f.frequency,l.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Ln),qn),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(h){throw h.code===11?r():h}if(l.length!==u.length||u.length!==d.length)throw r()}},LB=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Rn(l,c);if(!u){const d={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,d)}return o.set(c,l),u?(await t(c,a.Q,l.Q),await t(c,a.detune,l.detune),await t(c,a.frequency,l.frequency),await t(c,a.gain,l.gain)):(await r(c,a.Q,l.Q),await r(c,a.detune,l.detune),await r(c,a.frequency,l.frequency),await r(c,a.gain,l.gain)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},BB=(t,e)=>(n,r)=>{const i=e.get(n);if(i!==void 0)return i;const o=t.get(n);if(o!==void 0)return o;try{const s=r();return s instanceof Promise?(t.set(n,s),s.catch(()=>!1).then(a=>(t.delete(n),e.set(n,a),a))):(e.set(n,s),s)}catch{return e.set(n,!1),!1}},FB={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},UB=(t,e,n,r,i)=>class extends t{constructor(s,a){const c=r(s),l={...FB,...a},u=n(c,l),d=i(c)?e():null;super(s,!1,u,d)}},VB=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Rn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},GB={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},WB=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=o({...GB,...c}),d=n(l,u),h=i(l)?e():null;super(a,!1,d,h)}},jB=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Rn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=t(s,l)}return r.set(s,a),await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},ZB=t=>(e,n,r)=>t(n,e,r),zB=t=>(e,n,r=0,i=0)=>{const o=e[r];if(o===void 0)throw t();return Gf(n)?o.connect(n,0,i):o.connect(n,0)},HB=t=>(e,n)=>{const r=t(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),i=e.createBuffer(1,2,44100);return r.buffer=i,r.loop=!0,r.connect(n),r.start(),()=>{r.stop(),r.disconnect(n)}},XB={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},$B=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...XB,...l},h=r(u,d),f=o(u),p=f?n():null;super(c,!1,h,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=h,this._offset=e(this,f,h.offset,Ln,qn),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeConstantSourceNode.onended=l;const u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){rl(this);const l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),zo(this)&&Sd(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}},KB=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null;const c=async(l,u)=>{let d=n(l);const h=Rn(d,u);if(!h){const f={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,f),s!==null&&d.start(s),a!==null&&d.stop(a)}return o.set(u,d),h?await t(u,l.offset,d.offset):await r(u,l.offset,d.offset),await i(l,u,d),d};return{set start(l){s=l},set stop(l){a=l},render(l,u){const d=o.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}},JB=t=>e=>(t[0]=e,t[0]),YB={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},QB=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u={...YB,...c},d=n(l,u),f=i(l)?e():null;super(a,!1,d,f),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&o(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,o(this,0)}else this._isBufferNullified=!1,o(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}},qB=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Rn(a,s)){const l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=t(s,l)}return r.set(s,a),vl(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},eF=()=>new DOMException("","DataCloneError"),xS=t=>{const{port1:e,port2:n}=new MessageChannel;return new Promise(r=>{const i=()=>{n.onmessage=null,e.close(),n.close(),r()};n.onmessage=()=>i();try{e.postMessage(t,[t])}catch{}finally{i()}})},tF=(t,e,n,r,i,o,s,a,c,l,u)=>(d,h)=>{const f=s(d)?d:o(d);if(i.has(h)){const p=n();return Promise.reject(p)}try{i.add(h)}catch{}return e(c,()=>c(f))?f.decodeAudioData(h).then(p=>(xS(h).catch(()=>{}),e(a,()=>a(p))||u(p),t.add(p),p)):new Promise((p,g)=>{const C=async()=>{try{await xS(h)}catch{}},m=v=>{g(v),C()};try{f.decodeAudioData(h,v=>{typeof v.copyFromChannel!="function"&&(l(v),XE(v)),t.add(v),C().then(()=>p(v))},v=>{m(v===null?r():v)})}catch(v){m(v)}})},nF=(t,e,n,r,i,o,s,a)=>(c,l)=>{const u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");const d=o(c.context),h=a(d);if(u===l){if(e.delete(c),!h&&s(c)){const f=r(c),{outputs:p}=n(c);for(const g of p)if(Ad(g)){const C=r(g[0]);t(f,C,g[1],g[2])}else{const C=i(g[0]);f.connect(C,g[1])}}}else e.set(c,u-l)},rF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},iF=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...rF,...l},h=r(u,d),f=o(u),p=f?n(d.maxDelayTime):null;super(c,!1,h,p),this._delayTime=e(this,f,h.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}},oF=(t,e,n,r,i)=>o=>{const s=new WeakMap,a=async(c,l)=>{let u=n(c);const d=Rn(u,l);if(!d){const h={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:o};u=e(l,h)}return s.set(l,u),d?await t(l,c.delayTime,u.delayTime):await r(l,c.delayTime,u.delayTime),await i(c,l,u),u};return{render(c,l){const u=s.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}},sF=t=>(e,n,r,i)=>t(e[i],o=>o[0]===n&&o[1]===r),aF=t=>(e,n)=>{t(e).delete(n)},cF=t=>"delayTime"in t,lF=(t,e,n)=>function r(i,o){const s=Ff(o)?o:n(t,o);if(cF(s))return[];if(i[0]===s)return[i];if(i.includes(s))return[];const{outputs:a}=e(s);return Array.from(a).map(c=>r([...i,s],c[0])).reduce((c,l)=>c.concat(l),[])},ch=(t,e,n)=>{const r=e[n];if(r===void 0)throw t();return r},uF=t=>(e,n=void 0,r=void 0,i=0)=>n===void 0?e.forEach(o=>o.disconnect()):typeof n=="number"?ch(t,e,n).disconnect():Gf(n)?r===void 0?e.forEach(o=>o.disconnect(n)):i===void 0?ch(t,e,r).disconnect(n,0):ch(t,e,r).disconnect(n,0,i):r===void 0?e.forEach(o=>o.disconnect(n)):ch(t,e,r).disconnect(n,0),dF={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},hF=(t,e,n,r,i,o,s,a)=>class extends t{constructor(l,u){const d=o(l),h={...dF,...u},f=r(d,h),p=s(d),g=p?n():null;super(l,!1,f,g),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){const u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,i()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){const u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,i()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},fF=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Rn(l,c);if(!u){const d={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,d)}return o.set(c,l),u?(await t(c,a.attack,l.attack),await t(c,a.knee,l.knee),await t(c,a.ratio,l.ratio),await t(c,a.release,l.release),await t(c,a.threshold,l.threshold)):(await r(c,a.attack,l.attack),await r(c,a.knee,l.knee),await r(c,a.ratio,l.ratio),await r(c,a.release,l.release),await r(c,a.threshold,l.threshold)),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},pF=()=>new DOMException("","EncodingError"),gF=t=>e=>new Promise((n,r)=>{if(t===null){r(new SyntaxError);return}const i=t.document.head;if(i===null)r(new SyntaxError);else{const o=t.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=t.onerror,l=()=>{t.onerror=c,URL.revokeObjectURL(a)};t.onerror=(u,d,h,f,p)=>{if(d===a||d===t.location.href&&h===1&&f===1)return l(),r(p),!1;if(c!==null)return c(u,d,h,f,p)},o.onerror=()=>{l(),r(new SyntaxError)},o.onload=()=>{l(),n()},o.src=a,o.type="module",i.appendChild(o)}}),mF=t=>class{constructor(n){this._nativeEventTarget=n,this._listeners=new WeakMap}addEventListener(n,r,i){if(r!==null){let o=this._listeners.get(r);o===void 0&&(o=t(this,r),typeof r=="function"&&this._listeners.set(r,o)),this._nativeEventTarget.addEventListener(n,o,i)}}dispatchEvent(n){return this._nativeEventTarget.dispatchEvent(n)}removeEventListener(n,r,i){const o=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(n,o===void 0?null:o,i)}},vF=t=>(e,n,r)=>{Object.defineProperties(t,{currentFrame:{configurable:!0,get(){return Math.round(e*n)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{t!==null&&(delete t.currentFrame,delete t.currentTime)}},yF=t=>async e=>{try{const n=await fetch(e);if(n.ok)return[await n.text(),n.url]}catch{}throw t()},CF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},IF=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...CF,...c},d=r(l,u),h=o(l),f=h?n():null;super(a,!1,d,f),this._gain=e(this,h,d.gain,Ln,qn)}get gain(){return this._gain}},bF=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Rn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.gain,l.gain):await r(c,a.gain,l.gain),await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},SF=(t,e)=>n=>e(t,n),wF=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return n.renderer},AF=t=>e=>{var n;return(n=t.get(e))!==null&&n!==void 0?n:0},kF=t=>e=>{const n=t(e);if(n.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return n.renderer},EF=t=>e=>t.get(e),pn=()=>new DOMException("","InvalidStateError"),TF=t=>e=>{const n=t.get(e);if(n===void 0)throw pn();return n},xF=(t,e)=>n=>{let r=t.get(n);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),t.set(n,r),r},PF=t=>e=>{const n=t.get(e);if(n===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return n},Op=()=>new DOMException("","InvalidAccessError"),RF=t=>{t.getFrequencyResponse=(e=>(n,r,i)=>{if(n.length!==r.length||r.length!==i.length)throw Op();return e.call(t,n,r,i)})(t.getFrequencyResponse)},NF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},_F=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=r(a),u=i(l),d={...NF,...c},h=e(l,u?null:a.baseLatency,d),f=u?n(d.feedback,d.feedforward):null;super(a,!1,h,f),RF(h),this._nativeIIRFilterNode=h,o(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}},eT=(t,e,n,r,i,o,s,a,c,l,u)=>{const d=l.length;let h=a;for(let f=0;f<d;f+=1){let p=n[0]*l[f];for(let g=1;g<i;g+=1){const C=h-g&c-1;p+=n[g]*o[C],p-=t[g]*s[C]}for(let g=i;g<r;g+=1)p+=n[g]*o[h-g&c-1];for(let g=i;g<e;g+=1)p-=t[g]*s[h-g&c-1];o[h]=l[f],s[h]=p,h=h+1&c-1,u[f]=p}return h},OF=(t,e,n,r)=>{const i=n instanceof Float64Array?n:new Float64Array(n),o=r instanceof Float64Array?r:new Float64Array(r),s=i.length,a=o.length,c=Math.min(s,a);if(i[0]!==1){for(let p=0;p<s;p+=1)o[p]/=i[0];for(let p=1;p<a;p+=1)i[p]/=i[0]}const l=32,u=new Float32Array(l),d=new Float32Array(l),h=e.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let p=0;p<f;p+=1){const g=t.getChannelData(p),C=h.getChannelData(p);u.fill(0),d.fill(0),eT(i,s,o,a,c,u,d,0,l,g,C)}return h},MF=(t,e,n,r,i)=>(o,s)=>{const a=new WeakMap;let c=null;const l=async(u,d)=>{let h=null,f=e(u);const p=Rn(f,d);if(d.createIIRFilter===void 0?h=t(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(f=d.createIIRFilter(s,o)),a.set(d,h===null?f:h),h!==null){if(c===null){if(n===null)throw new Error("Missing the native OfflineAudioContext constructor.");const C=new n(u.context.destination.channelCount,u.context.length,d.sampleRate);c=(async()=>{await r(u,C,C.destination);const m=await i(C);return OF(m,d,o,s)})()}const g=await c;return h.buffer=g,h.start(0),h}return await r(u,d,f),f};return{render(u,d){const h=a.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},DF=(t,e,n,r,i,o)=>s=>(a,c)=>{const l=t.get(a);if(l===void 0){if(!s&&o(a)){const u=r(a),{outputs:d}=n(a);for(const h of d)if(Ad(h)){const f=r(h[0]);e(u,f,h[1],h[2])}else{const f=i(h[0]);u.disconnect(f,h[1])}}t.set(a,c)}else t.set(a,l+c)},LF=t=>e=>t!==null&&e instanceof t,BF=t=>e=>t!==null&&typeof t.AudioNode=="function"&&e instanceof t.AudioNode,FF=t=>e=>t!==null&&typeof t.AudioParam=="function"&&e instanceof t.AudioParam,UF=(t,e)=>n=>t(n)||e(n),VF=t=>e=>t!==null&&e instanceof t,GF=t=>t!==null&&t.isSecureContext,WF=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw TypeError();super(o,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},jF={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},ZF=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o);if(r(a))throw new TypeError;const c={...jF,...s},l=e(a,c);super(o,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},zF=(t,e,n,r)=>class extends t{constructor(o,s){const a=n(o),c=e(a,s);if(r(a))throw new TypeError;super(o,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},HF=(t,e,n)=>class extends t{constructor(i,o){const s=n(i),a=e(s,o);super(i,!0,a,null)}},XF=(t,e,n,r,i,o)=>class extends n{constructor(a,c){super(a),this._nativeContext=a,WE.set(this,a),r(a)&&i.set(a,new Set),this._destination=new t(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c=typeof a=="function"?o(this,a):null;this._nativeContext.onstatechange=c;const l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},Tv=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const n=t.decodeAudioData(e.buffer,()=>{});return n===void 0?!1:(n.catch(()=>{}),!0)}catch{}return!1},$F=(t,e)=>(n,r,i)=>{const o=new Set;return n.connect=(s=>(a,c=0,l=0)=>{const u=o.size===0;if(e(a))return s.call(n,a,c,l),t(o,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;s.call(n,a,c),t(o,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(n.connect),n.disconnect=(s=>(a,c,l)=>{const u=o.size>0;if(a===void 0)s.apply(n),o.clear();else if(typeof a=="number"){s.call(n,a);for(const h of o)h[1]===a&&o.delete(h)}else{e(a)?s.call(n,a,c,l):s.call(n,a,c);for(const h of o)h[0]===a&&(c===void 0||h[1]===c)&&(l===void 0||h[2]===l)&&o.delete(h)}const d=o.size===0;u&&d&&i()})(n.disconnect),n},At=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n]&&(t[n]=r)},Qt=(t,e)=>{At(t,e,"channelCount"),At(t,e,"channelCountMode"),At(t,e,"channelInterpretation")},PS=t=>typeof t.getFloatTimeDomainData=="function",KF=t=>{t.getFloatTimeDomainData=e=>{const n=new Uint8Array(e.length);t.getByteTimeDomainData(n);const r=Math.max(n.length,t.fftSize);for(let i=0;i<r;i+=1)e[i]=(n[i]-128)*.0078125;return e}},JF=(t,e)=>(n,r)=>{const i=n.createAnalyser();if(Qt(i,r),!(r.maxDecibels>r.minDecibels))throw e();return At(i,r,"fftSize"),At(i,r,"maxDecibels"),At(i,r,"minDecibels"),At(i,r,"smoothingTimeConstant"),t(PS,()=>PS(i))||KF(i),i},YF=t=>t===null?null:t.hasOwnProperty("AudioBuffer")?t.AudioBuffer:null,Ot=(t,e,n)=>{const r=e[n];r!==void 0&&r!==t[n].value&&(t[n].value=r)},QF=t=>{t.start=(e=>{let n=!1;return(r=0,i=0,o)=>{if(n)throw pn();e.call(t,r,i,o),n=!0}})(t.start)},Xy=t=>{t.start=(e=>(n=0,r=0,i)=>{if(typeof i=="number"&&i<0||r<0||n<0)throw new RangeError("The parameters can't be negative.");e.call(t,n,r,i)})(t.start)},$y=t=>{t.stop=(e=>(n=0)=>{if(n<0)throw new RangeError("The parameter can't be negative.");e.call(t,n)})(t.stop)},qF=(t,e,n,r,i,o,s,a,c,l,u)=>(d,h)=>{const f=d.createBufferSource();return Qt(f,h),Ot(f,h,"playbackRate"),At(f,h,"buffer"),At(f,h,"loop"),At(f,h,"loopEnd"),At(f,h,"loopStart"),e(n,()=>n(d))||QF(f),e(r,()=>r(d))||c(f),e(i,()=>i(d))||l(f,d),e(o,()=>o(d))||Xy(f),e(s,()=>s(d))||u(f,d),e(a,()=>a(d))||$y(f),t(d,f),f},e3=t=>t===null?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null,t3=(t,e)=>(n,r,i)=>{const o=n.destination;if(o.channelCount!==r)try{o.channelCount=r}catch{}i&&o.channelCountMode!=="explicit"&&(o.channelCountMode="explicit"),o.maxChannelCount===0&&Object.defineProperty(o,"maxChannelCount",{value:r});const s=t(n,{channelCount:r,channelCountMode:o.channelCountMode,channelInterpretation:o.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>c=>{a.call(s,c);try{o.channelCount=c}catch(l){if(c>o.maxChannelCount)throw l}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelCountMode=c}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>c=>{a.call(s,c),o.channelInterpretation=c}),Object.defineProperty(s,"maxChannelCount",{get:()=>o.maxChannelCount}),s.connect(o),s},n3=t=>t===null?null:t.hasOwnProperty("AudioWorkletNode")?t.AudioWorkletNode:null,r3=t=>{const{port1:e}=new MessageChannel;try{e.postMessage(t)}finally{e.close()}},i3=(t,e,n,r,i)=>(o,s,a,c,l,u)=>{if(a!==null)try{const d=new a(o,c,u),h=new Map;let f=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>f,set:p=>{typeof f=="function"&&d.removeEventListener("processorerror",f),f=typeof p=="function"?p:null,typeof f=="function"&&d.addEventListener("processorerror",f)}}}),d.addEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=typeof g[1]=="function"?g[1]:typeof g[1]=="object"&&g[1]!==null&&typeof g[1].handleEvent=="function"?g[1].handleEvent:null;if(C!==null){const m=h.get(g[1]);m!==void 0?g[1]=m:(g[1]=v=>{v.type==="error"?(Object.defineProperties(v,{type:{value:"processorerror"}}),C(v)):C(new ErrorEvent(g[0],{...v}))},h.set(C,g[1]))}}return p.call(d,"error",g[1],g[2]),p.call(d,...g)})(d.addEventListener),d.removeEventListener=(p=>(...g)=>{if(g[0]==="processorerror"){const C=h.get(g[1]);C!==void 0&&(h.delete(g[1]),g[1]=C)}return p.call(d,"error",g[1],g[2]),p.call(d,g[0],g[1],g[2])})(d.removeEventListener),u.numberOfOutputs!==0){const p=n(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(o.destination),i(d,()=>p.disconnect(),()=>p.connect(o.destination))}return d}catch(d){throw d.code===11?r():d}if(l===void 0)throw r();return r3(u),e(o,s,l,u)},tT=(t,e)=>t===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(t*e))))),o3=t=>new Promise((e,n)=>{const{port1:r,port2:i}=new MessageChannel;r.onmessage=({data:o})=>{r.close(),i.close(),e(o)},r.onmessageerror=({data:o})=>{r.close(),i.close(),n(o)},i.postMessage(t)}),s3=async(t,e)=>{const n=await o3(e);return new t(n)},a3=(t,e,n,r)=>{let i=wv.get(t);i===void 0&&(i=new WeakMap,wv.set(t,i));const o=s3(n,r);return i.set(e,o),o},c3=(t,e,n,r,i,o,s,a,c,l,u,d,h)=>(f,p,g,C)=>{if(C.numberOfInputs===0&&C.numberOfOutputs===0)throw c();const m=Array.isArray(C.outputChannelCount)?C.outputChannelCount:Array.from(C.outputChannelCount);if(m.some(le=>le<1))throw c();if(m.length!==C.numberOfOutputs)throw e();if(C.channelCountMode!=="explicit")throw c();const v=C.channelCount*C.numberOfInputs,b=m.reduce((le,fe)=>le+fe,0),E=g.parameterDescriptors===void 0?0:g.parameterDescriptors.length;if(v+E>6||b>6)throw c();const w=new MessageChannel,A=[],x=[];for(let le=0;le<C.numberOfInputs;le+=1)A.push(s(f,{channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation,gain:1})),x.push(i(f,{channelCount:C.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:C.channelCount}));const T=[];if(g.parameterDescriptors!==void 0)for(const{defaultValue:le,maxValue:fe,minValue:ze,name:We}of g.parameterDescriptors){const xe=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:C.parameterData[We]!==void 0?C.parameterData[We]:le===void 0?0:le});Object.defineProperties(xe.offset,{defaultValue:{get:()=>le===void 0?0:le},maxValue:{get:()=>fe===void 0?Ln:fe},minValue:{get:()=>ze===void 0?qn:ze}}),T.push(xe)}const _=r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,v+E)}),O=tT(p,f.sampleRate),D=a(f,O,v+E,Math.max(1,b)),U=i(f,{channelCount:Math.max(1,b),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,b)}),j=[];for(let le=0;le<C.numberOfOutputs;le+=1)j.push(r(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[le]}));for(let le=0;le<C.numberOfInputs;le+=1){A[le].connect(x[le]);for(let fe=0;fe<C.channelCount;fe+=1)x[le].connect(_,fe,le*C.channelCount+fe)}const Z=new QE(g.parameterDescriptors===void 0?[]:g.parameterDescriptors.map(({name:le},fe)=>{const ze=T[fe];return ze.connect(_,0,v+fe),ze.start(0),[le,ze.offset]}));_.connect(D);let Y=C.channelInterpretation,ee=null;const ne=C.numberOfOutputs===0?[D]:j,z={get bufferSize(){return O},get channelCount(){return C.channelCount},set channelCount(le){throw n()},get channelCountMode(){return C.channelCountMode},set channelCountMode(le){throw n()},get channelInterpretation(){return Y},set channelInterpretation(le){for(const fe of A)fe.channelInterpretation=le;Y=le},get context(){return D.context},get inputs(){return A},get numberOfInputs(){return C.numberOfInputs},get numberOfOutputs(){return C.numberOfOutputs},get onprocessorerror(){return ee},set onprocessorerror(le){typeof ee=="function"&&z.removeEventListener("processorerror",ee),ee=typeof le=="function"?le:null,typeof ee=="function"&&z.addEventListener("processorerror",ee)},get parameters(){return Z},get port(){return w.port2},addEventListener(...le){return D.addEventListener(le[0],le[1],le[2])},connect:t.bind(null,ne),disconnect:l.bind(null,ne),dispatchEvent(...le){return D.dispatchEvent(le[0])},removeEventListener(...le){return D.removeEventListener(le[0],le[1],le[2])}},$=new Map;w.port1.addEventListener=(le=>(...fe)=>{if(fe[0]==="message"){const ze=typeof fe[1]=="function"?fe[1]:typeof fe[1]=="object"&&fe[1]!==null&&typeof fe[1].handleEvent=="function"?fe[1].handleEvent:null;if(ze!==null){const We=$.get(fe[1]);We!==void 0?fe[1]=We:(fe[1]=xe=>{u(f.currentTime,f.sampleRate,()=>ze(xe))},$.set(ze,fe[1]))}}return le.call(w.port1,fe[0],fe[1],fe[2])})(w.port1.addEventListener),w.port1.removeEventListener=(le=>(...fe)=>{if(fe[0]==="message"){const ze=$.get(fe[1]);ze!==void 0&&($.delete(fe[1]),fe[1]=ze)}return le.call(w.port1,fe[0],fe[1],fe[2])})(w.port1.removeEventListener);let re=null;Object.defineProperty(w.port1,"onmessage",{get:()=>re,set:le=>{typeof re=="function"&&w.port1.removeEventListener("message",re),re=typeof le=="function"?le:null,typeof re=="function"&&(w.port1.addEventListener("message",re),w.port1.start())}}),g.prototype.port=w.port1;let H=null;a3(f,z,g,C).then(le=>H=le);const Re=jf(C.numberOfInputs,C.channelCount),Ne=jf(C.numberOfOutputs,m),Ce=g.parameterDescriptors===void 0?[]:g.parameterDescriptors.reduce((le,{name:fe})=>({...le,[fe]:new Float32Array(128)}),{});let Te=!0;const it=()=>{C.numberOfOutputs>0&&D.disconnect(U);for(let le=0,fe=0;le<C.numberOfOutputs;le+=1){const ze=j[le];for(let We=0;We<m[le];We+=1)U.disconnect(ze,fe+We,We);fe+=m[le]}},pe=new Map;D.onaudioprocess=({inputBuffer:le,outputBuffer:fe})=>{if(H!==null){const ze=d(z);for(let We=0;We<O;We+=128){for(let xe=0;xe<C.numberOfInputs;xe+=1)for(let $e=0;$e<C.channelCount;$e+=1)Wf(le,Re[xe],$e,$e,We);g.parameterDescriptors!==void 0&&g.parameterDescriptors.forEach(({name:xe},$e)=>{Wf(le,Ce,xe,v+$e,We)});for(let xe=0;xe<C.numberOfInputs;xe+=1)for(let $e=0;$e<m[xe];$e+=1)Ne[xe][$e].byteLength===0&&(Ne[xe][$e]=new Float32Array(128));try{const xe=Re.map((jt,Mt)=>{if(ze[Mt].size>0)return pe.set(Mt,O/128),jt;const Hr=pe.get(Mt);return Hr===void 0?[]:(jt.every(bn=>bn.every(ec=>ec===0))&&(Hr===1?pe.delete(Mt):pe.set(Mt,Hr-1)),jt)});Te=u(f.currentTime+We/f.sampleRate,f.sampleRate,()=>H.process(xe,Ne,Ce));for(let jt=0,Mt=0;jt<C.numberOfOutputs;jt+=1){for(let zr=0;zr<m[jt];zr+=1)qE(fe,Ne[jt],zr,Mt+zr,We);Mt+=m[jt]}}catch(xe){Te=!1,z.dispatchEvent(new ErrorEvent("processorerror",{colno:xe.colno,filename:xe.filename,lineno:xe.lineno,message:xe.message}))}if(!Te){for(let xe=0;xe<C.numberOfInputs;xe+=1){A[xe].disconnect(x[xe]);for(let $e=0;$e<C.channelCount;$e+=1)x[We].disconnect(_,$e,xe*C.channelCount+$e)}if(g.parameterDescriptors!==void 0){const xe=g.parameterDescriptors.length;for(let $e=0;$e<xe;$e+=1){const jt=T[$e];jt.disconnect(_,0,v+$e),jt.stop()}}_.disconnect(D),D.onaudioprocess=null,Nn?it():qe();break}}}};let Nn=!1;const $n=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Nr=()=>D.connect($n).connect(f.destination),qe=()=>{D.disconnect($n),$n.disconnect()},on=()=>{if(Te){qe(),C.numberOfOutputs>0&&D.connect(U);for(let le=0,fe=0;le<C.numberOfOutputs;le+=1){const ze=j[le];for(let We=0;We<m[le];We+=1)U.connect(ze,fe+We,We);fe+=m[le]}}Nn=!0},_r=()=>{Te&&(Nr(),it()),Nn=!1};return Nr(),h(z,on,_r)},nT=(t,e)=>{const n=t.createBiquadFilter();return Qt(n,e),Ot(n,e,"Q"),Ot(n,e,"detune"),Ot(n,e,"frequency"),Ot(n,e,"gain"),At(n,e,"type"),n},l3=(t,e)=>(n,r)=>{const i=n.createChannelMerger(r.numberOfInputs);return t!==null&&t.name==="webkitAudioContext"&&e(n,i),Qt(i,r),i},u3=t=>{const e=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>e,set:n=>{if(n!==e)throw pn()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:n=>{if(n!=="explicit")throw pn()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:n=>{if(n!=="discrete")throw pn()}})},kd=(t,e)=>{const n=t.createChannelSplitter(e.numberOfOutputs);return Qt(n,e),u3(n),n},d3=(t,e,n,r,i)=>(o,s)=>{if(o.createConstantSource===void 0)return n(o,s);const a=o.createConstantSource();return Qt(a,s),Ot(a,s,"offset"),e(r,()=>r(o))||Xy(a),e(i,()=>i(o))||$y(a),t(o,a),a},yl=(t,e)=>(t.connect=e.connect.bind(e),t.disconnect=e.disconnect.bind(e),t),h3=(t,e,n,r)=>(i,{offset:o,...s})=>{const a=i.createBuffer(1,2,44100),c=e(i,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),l=n(i,{...s,gain:o}),u=a.getChannelData(0);u[0]=1,u[1]=1,c.buffer=a,c.loop=!0;const d={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(p){l.channelCount=p},get channelCountMode(){return l.channelCountMode},set channelCountMode(p){l.channelCountMode=p},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(p){l.channelInterpretation=p},get context(){return l.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get offset(){return l.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener(...p){return c.addEventListener(p[0],p[1],p[2])},dispatchEvent(...p){return c.dispatchEvent(p[0])},removeEventListener(...p){return c.removeEventListener(p[0],p[1],p[2])},start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}},h=()=>c.connect(l),f=()=>c.disconnect(l);return t(i,c),r(yl(d,l),h,f)},f3=(t,e)=>(n,r)=>{const i=n.createConvolver();if(Qt(i,r),r.disableNormalization===i.normalize&&(i.normalize=!r.disableNormalization),At(i,r,"buffer"),r.channelCount>2||(e(i,"channelCount",o=>()=>o.call(i),o=>s=>{if(s>2)throw t();return o.call(i,s)}),r.channelCountMode==="max"))throw t();return e(i,"channelCountMode",o=>()=>o.call(i),o=>s=>{if(s==="max")throw t();return o.call(i,s)}),i},rT=(t,e)=>{const n=t.createDelay(e.maxDelayTime);return Qt(n,e),Ot(n,e,"delayTime"),n},p3=t=>(e,n)=>{const r=e.createDynamicsCompressor();if(Qt(r,n),n.channelCount>2||n.channelCountMode==="max")throw t();return Ot(r,n,"attack"),Ot(r,n,"knee"),Ot(r,n,"ratio"),Ot(r,n,"release"),Ot(r,n,"threshold"),r},ar=(t,e)=>{const n=t.createGain();return Qt(n,e),Ot(n,e,"gain"),n},g3=t=>(e,n,r)=>{if(e.createIIRFilter===void 0)return t(e,n,r);const i=e.createIIRFilter(r.feedforward,r.feedback);return Qt(i,r),i};function m3(t,e){const n=e[0]*e[0]+e[1]*e[1];return[(t[0]*e[0]+t[1]*e[1])/n,(t[1]*e[0]-t[0]*e[1])/n]}function v3(t,e){return[t[0]*e[0]-t[1]*e[1],t[0]*e[1]+t[1]*e[0]]}function RS(t,e){let n=[0,0];for(let r=t.length-1;r>=0;r-=1)n=v3(n,e),n[0]+=t[r];return n}const y3=(t,e,n,r)=>(i,o,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{const d=tT(o,i.sampleRate),h=l instanceof Float64Array?l:new Float64Array(l),f=u instanceof Float64Array?u:new Float64Array(u),p=h.length,g=f.length,C=Math.min(p,g);if(p===0||p>20)throw r();if(h[0]===0)throw e();if(g===0||g>20)throw r();if(f[0]===0)throw e();if(h[0]!==1){for(let T=0;T<g;T+=1)f[T]/=h[0];for(let T=1;T<p;T+=1)h[T]/=h[0]}const m=n(i,d,s,s);m.channelCount=s,m.channelCountMode=a,m.channelInterpretation=c;const v=32,b=[],E=[],w=[];for(let T=0;T<s;T+=1){b.push(0);const _=new Float32Array(v),O=new Float32Array(v);_.fill(0),O.fill(0),E.push(_),w.push(O)}m.onaudioprocess=T=>{const _=T.inputBuffer,O=T.outputBuffer,D=_.numberOfChannels;for(let U=0;U<D;U+=1){const j=_.getChannelData(U),Z=O.getChannelData(U);b[U]=eT(h,p,f,g,C,E[U],w[U],b[U],v,j,Z)}};const A=i.sampleRate/2;return yl({get bufferSize(){return d},get channelCount(){return m.channelCount},set channelCount(T){m.channelCount=T},get channelCountMode(){return m.channelCountMode},set channelCountMode(T){m.channelCountMode=T},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(T){m.channelInterpretation=T},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener(...T){return m.addEventListener(T[0],T[1],T[2])},dispatchEvent(...T){return m.dispatchEvent(T[0])},getFrequencyResponse(T,_,O){if(T.length!==_.length||_.length!==O.length)throw t();const D=T.length;for(let U=0;U<D;U+=1){const j=-Math.PI*(T[U]/A),Z=[Math.cos(j),Math.sin(j)],Y=RS(f,Z),ee=RS(h,Z),ne=m3(Y,ee);_[U]=Math.sqrt(ne[0]*ne[0]+ne[1]*ne[1]),O[U]=Math.atan2(ne[1],ne[0])}},removeEventListener(...T){return m.removeEventListener(T[0],T[1],T[2])}},m)},C3=(t,e)=>t.createMediaElementSource(e.mediaElement),I3=(t,e)=>{const n=t.createMediaStreamDestination();return Qt(n,e),n.numberOfOutputs===1&&Object.defineProperty(n,"numberOfOutputs",{get:()=>0}),n},b3=(t,{mediaStream:e})=>{const n=e.getAudioTracks();n.sort((o,s)=>o.id<s.id?-1:o.id>s.id?1:0);const r=n.slice(0,1),i=t.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(i,"mediaStream",{value:e}),i},S3=(t,e)=>(n,{mediaStreamTrack:r})=>{if(typeof n.createMediaStreamTrackSource=="function")return n.createMediaStreamTrackSource(r);const i=new MediaStream([r]),o=n.createMediaStreamSource(i);if(r.kind!=="audio")throw t();if(e(n))throw new TypeError;return o},w3=t=>t===null?null:t.hasOwnProperty("OfflineAudioContext")?t.OfflineAudioContext:t.hasOwnProperty("webkitOfflineAudioContext")?t.webkitOfflineAudioContext:null,A3=(t,e,n,r,i,o)=>(s,a)=>{const c=s.createOscillator();return Qt(c,a),Ot(c,a,"detune"),Ot(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):At(c,a,"type"),e(n,()=>n(s))||Xy(c),e(r,()=>r(s))||o(c,s),e(i,()=>i(s))||$y(c),t(s,c),c},k3=t=>(e,n)=>{const r=e.createPanner();return r.orientationX===void 0?t(e,n):(Qt(r,n),Ot(r,n,"orientationX"),Ot(r,n,"orientationY"),Ot(r,n,"orientationZ"),Ot(r,n,"positionX"),Ot(r,n,"positionY"),Ot(r,n,"positionZ"),At(r,n,"coneInnerAngle"),At(r,n,"coneOuterAngle"),At(r,n,"coneOuterGain"),At(r,n,"distanceModel"),At(r,n,"maxDistance"),At(r,n,"panningModel"),At(r,n,"refDistance"),At(r,n,"rolloffFactor"),r)},E3=(t,e,n,r,i,o,s,a,c,l)=>(u,{coneInnerAngle:d,coneOuterAngle:h,coneOuterGain:f,distanceModel:p,maxDistance:g,orientationX:C,orientationY:m,orientationZ:v,panningModel:b,positionX:E,positionY:w,positionZ:A,refDistance:x,rolloffFactor:T,..._})=>{const O=u.createPanner();if(_.channelCount>2||_.channelCountMode==="max")throw s();Qt(O,_);const D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},U=n(u,{...D,channelInterpretation:"speakers",numberOfInputs:6}),j=r(u,{..._,gain:1}),Z=r(u,{...D,gain:1}),Y=r(u,{...D,gain:0}),ee=r(u,{...D,gain:0}),ne=r(u,{...D,gain:0}),z=r(u,{...D,gain:0}),$=r(u,{...D,gain:0}),re=i(u,256,6,1),H=o(u,{...D,curve:new Float32Array([1,1]),oversample:"none"});let ie=[C,m,v],Re=[E,w,A];const Ne=new Float32Array(1);re.onaudioprocess=({inputBuffer:pe})=>{const Nn=[c(pe,Ne,0),c(pe,Ne,1),c(pe,Ne,2)];Nn.some((Nr,qe)=>Nr!==ie[qe])&&(O.setOrientation(...Nn),ie=Nn);const $n=[c(pe,Ne,3),c(pe,Ne,4),c(pe,Ne,5)];$n.some((Nr,qe)=>Nr!==Re[qe])&&(O.setPosition(...$n),Re=$n)},Object.defineProperty(Y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ee.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty($.gain,"defaultValue",{get:()=>0});const Ce={get bufferSize(){},get channelCount(){return O.channelCount},set channelCount(pe){if(pe>2)throw s();j.channelCount=pe,O.channelCount=pe},get channelCountMode(){return O.channelCountMode},set channelCountMode(pe){if(pe==="max")throw s();j.channelCountMode=pe,O.channelCountMode=pe},get channelInterpretation(){return O.channelInterpretation},set channelInterpretation(pe){j.channelInterpretation=pe,O.channelInterpretation=pe},get coneInnerAngle(){return O.coneInnerAngle},set coneInnerAngle(pe){O.coneInnerAngle=pe},get coneOuterAngle(){return O.coneOuterAngle},set coneOuterAngle(pe){O.coneOuterAngle=pe},get coneOuterGain(){return O.coneOuterGain},set coneOuterGain(pe){if(pe<0||pe>1)throw e();O.coneOuterGain=pe},get context(){return O.context},get distanceModel(){return O.distanceModel},set distanceModel(pe){O.distanceModel=pe},get inputs(){return[j]},get maxDistance(){return O.maxDistance},set maxDistance(pe){if(pe<0)throw new RangeError;O.maxDistance=pe},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return O.numberOfOutputs},get orientationX(){return Z.gain},get orientationY(){return Y.gain},get orientationZ(){return ee.gain},get panningModel(){return O.panningModel},set panningModel(pe){O.panningModel=pe},get positionX(){return ne.gain},get positionY(){return z.gain},get positionZ(){return $.gain},get refDistance(){return O.refDistance},set refDistance(pe){if(pe<0)throw new RangeError;O.refDistance=pe},get rolloffFactor(){return O.rolloffFactor},set rolloffFactor(pe){if(pe<0)throw new RangeError;O.rolloffFactor=pe},addEventListener(...pe){return j.addEventListener(pe[0],pe[1],pe[2])},dispatchEvent(...pe){return j.dispatchEvent(pe[0])},removeEventListener(...pe){return j.removeEventListener(pe[0],pe[1],pe[2])}};d!==Ce.coneInnerAngle&&(Ce.coneInnerAngle=d),h!==Ce.coneOuterAngle&&(Ce.coneOuterAngle=h),f!==Ce.coneOuterGain&&(Ce.coneOuterGain=f),p!==Ce.distanceModel&&(Ce.distanceModel=p),g!==Ce.maxDistance&&(Ce.maxDistance=g),C!==Ce.orientationX.value&&(Ce.orientationX.value=C),m!==Ce.orientationY.value&&(Ce.orientationY.value=m),v!==Ce.orientationZ.value&&(Ce.orientationZ.value=v),b!==Ce.panningModel&&(Ce.panningModel=b),E!==Ce.positionX.value&&(Ce.positionX.value=E),w!==Ce.positionY.value&&(Ce.positionY.value=w),A!==Ce.positionZ.value&&(Ce.positionZ.value=A),x!==Ce.refDistance&&(Ce.refDistance=x),T!==Ce.rolloffFactor&&(Ce.rolloffFactor=T),(ie[0]!==1||ie[1]!==0||ie[2]!==0)&&O.setOrientation(...ie),(Re[0]!==0||Re[1]!==0||Re[2]!==0)&&O.setPosition(...Re);const Te=()=>{j.connect(O),t(j,H,0,0),H.connect(Z).connect(U,0,0),H.connect(Y).connect(U,0,1),H.connect(ee).connect(U,0,2),H.connect(ne).connect(U,0,3),H.connect(z).connect(U,0,4),H.connect($).connect(U,0,5),U.connect(re).connect(u.destination)},it=()=>{j.disconnect(O),a(j,H,0,0),H.disconnect(Z),Z.disconnect(U),H.disconnect(Y),Y.disconnect(U),H.disconnect(ee),ee.disconnect(U),H.disconnect(ne),ne.disconnect(U),H.disconnect(z),z.disconnect(U),H.disconnect($),$.disconnect(U),U.disconnect(re),re.disconnect(u.destination)};return l(yl(Ce,O),Te,it)},T3=t=>(e,{disableNormalization:n,imag:r,real:i})=>{const o=r instanceof Float32Array?r:new Float32Array(r),s=i instanceof Float32Array?i:new Float32Array(i),a=e.createPeriodicWave(s,o,{disableNormalization:n});if(Array.from(r).length<2)throw t();return a},Ed=(t,e,n,r)=>t.createScriptProcessor(e,n,r),x3=(t,e)=>(n,r)=>{const i=r.channelCountMode;if(i==="clamped-max")throw e();if(n.createStereoPanner===void 0)return t(n,r);const o=n.createStereoPanner();return Qt(o,r),Ot(o,r,"pan"),Object.defineProperty(o,"channelCountMode",{get:()=>i,set:s=>{if(s!==i)throw e()}}),o},P3=(t,e,n,r,i,o)=>{const a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u={...l,oversample:"none"},d=(p,g,C,m)=>{const v=new Float32Array(16385),b=new Float32Array(16385);for(let _=0;_<16385;_+=1){const O=_/16384*c;v[_]=Math.cos(O),b[_]=Math.sin(O)}const E=n(p,{...l,gain:0}),w=r(p,{...u,curve:v}),A=r(p,{...u,curve:a}),x=n(p,{...l,gain:0}),T=r(p,{...u,curve:b});return{connectGraph(){g.connect(E),g.connect(A.inputs===void 0?A:A.inputs[0]),g.connect(x),A.connect(C),C.connect(w.inputs===void 0?w:w.inputs[0]),C.connect(T.inputs===void 0?T:T.inputs[0]),w.connect(E.gain),T.connect(x.gain),E.connect(m,0,0),x.connect(m,0,1)},disconnectGraph(){g.disconnect(E),g.disconnect(A.inputs===void 0?A:A.inputs[0]),g.disconnect(x),A.disconnect(C),C.disconnect(w.inputs===void 0?w:w.inputs[0]),C.disconnect(T.inputs===void 0?T:T.inputs[0]),w.disconnect(E.gain),T.disconnect(x.gain),E.disconnect(m,0,0),x.disconnect(m,0,1)}}},h=(p,g,C,m)=>{const v=new Float32Array(16385),b=new Float32Array(16385),E=new Float32Array(16385),w=new Float32Array(16385),A=Math.floor(16385/2);for(let ne=0;ne<16385;ne+=1)if(ne>A){const z=(ne-A)/(16384-A)*c;v[ne]=Math.cos(z),b[ne]=Math.sin(z),E[ne]=0,w[ne]=1}else{const z=ne/(16384-A)*c;v[ne]=1,b[ne]=0,E[ne]=Math.cos(z),w[ne]=Math.sin(z)}const x=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),T=n(p,{...l,gain:0}),_=r(p,{...u,curve:v}),O=n(p,{...l,gain:0}),D=r(p,{...u,curve:b}),U=r(p,{...u,curve:a}),j=n(p,{...l,gain:0}),Z=r(p,{...u,curve:E}),Y=n(p,{...l,gain:0}),ee=r(p,{...u,curve:w});return{connectGraph(){g.connect(x),g.connect(U.inputs===void 0?U:U.inputs[0]),x.connect(T,0),x.connect(O,0),x.connect(j,1),x.connect(Y,1),U.connect(C),C.connect(_.inputs===void 0?_:_.inputs[0]),C.connect(D.inputs===void 0?D:D.inputs[0]),C.connect(Z.inputs===void 0?Z:Z.inputs[0]),C.connect(ee.inputs===void 0?ee:ee.inputs[0]),_.connect(T.gain),D.connect(O.gain),Z.connect(j.gain),ee.connect(Y.gain),T.connect(m,0,0),j.connect(m,0,0),O.connect(m,0,1),Y.connect(m,0,1)},disconnectGraph(){g.disconnect(x),g.disconnect(U.inputs===void 0?U:U.inputs[0]),x.disconnect(T,0),x.disconnect(O,0),x.disconnect(j,1),x.disconnect(Y,1),U.disconnect(C),C.disconnect(_.inputs===void 0?_:_.inputs[0]),C.disconnect(D.inputs===void 0?D:D.inputs[0]),C.disconnect(Z.inputs===void 0?Z:Z.inputs[0]),C.disconnect(ee.inputs===void 0?ee:ee.inputs[0]),_.disconnect(T.gain),D.disconnect(O.gain),Z.disconnect(j.gain),ee.disconnect(Y.gain),T.disconnect(m,0,0),j.disconnect(m,0,0),O.disconnect(m,0,1),Y.disconnect(m,0,1)}}},f=(p,g,C,m,v)=>{if(g===1)return d(p,C,m,v);if(g===2)return h(p,C,m,v);throw i()};return(p,{channelCount:g,channelCountMode:C,pan:m,...v})=>{if(C==="max")throw i();const b=t(p,{...v,channelCount:1,channelCountMode:C,numberOfInputs:2}),E=n(p,{...v,channelCount:g,channelCountMode:C,gain:1}),w=n(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:m});let{connectGraph:A,disconnectGraph:x}=f(p,g,E,w,b);Object.defineProperty(w.gain,"defaultValue",{get:()=>0}),Object.defineProperty(w.gain,"maxValue",{get:()=>1}),Object.defineProperty(w.gain,"minValue",{get:()=>-1});const T={get bufferSize(){},get channelCount(){return E.channelCount},set channelCount(U){E.channelCount!==U&&(_&&x(),{connectGraph:A,disconnectGraph:x}=f(p,U,E,w,b),_&&A()),E.channelCount=U},get channelCountMode(){return E.channelCountMode},set channelCountMode(U){if(U==="clamped-max"||U==="max")throw i();E.channelCountMode=U},get channelInterpretation(){return E.channelInterpretation},set channelInterpretation(U){E.channelInterpretation=U},get context(){return E.context},get inputs(){return[E]},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get pan(){return w.gain},addEventListener(...U){return E.addEventListener(U[0],U[1],U[2])},dispatchEvent(...U){return E.dispatchEvent(U[0])},removeEventListener(...U){return E.removeEventListener(U[0],U[1],U[2])}};let _=!1;const O=()=>{A(),_=!0},D=()=>{x(),_=!1};return o(yl(T,b),O,D)}},R3=(t,e,n,r,i,o,s)=>(a,c)=>{const l=a.createWaveShaper();if(o!==null&&o.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return n(a,c);Qt(l,c);const u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();At(l,{curve:u},"curve"),At(l,c,"oversample");let d=null,h=!1;return s(l,"curve",g=>()=>g.call(l),g=>C=>(g.call(l,C),h&&(r(C)&&d===null?d=t(a,l):!r(C)&&d!==null&&(d(),d=null)),C)),i(l,()=>{h=!0,r(l.curve)&&(d=t(a,l))},()=>{h=!1,d!==null&&(d(),d=null)})},N3=(t,e,n,r,i)=>(o,{curve:s,oversample:a,...c})=>{const l=o.createWaveShaper(),u=o.createWaveShaper();Qt(l,c),Qt(u,c);const d=n(o,{...c,gain:1}),h=n(o,{...c,gain:-1}),f=n(o,{...c,gain:1}),p=n(o,{...c,gain:-1});let g=null,C=!1,m=null;const v={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(w){d.channelCount=w,h.channelCount=w,l.channelCount=w,f.channelCount=w,u.channelCount=w,p.channelCount=w},get channelCountMode(){return l.channelCountMode},set channelCountMode(w){d.channelCountMode=w,h.channelCountMode=w,l.channelCountMode=w,f.channelCountMode=w,u.channelCountMode=w,p.channelCountMode=w},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(w){d.channelInterpretation=w,h.channelInterpretation=w,l.channelInterpretation=w,f.channelInterpretation=w,u.channelInterpretation=w,p.channelInterpretation=w},get context(){return l.context},get curve(){return m},set curve(w){if(w!==null&&w.length<2)throw e();if(w===null)l.curve=w,u.curve=w;else{const A=w.length,x=new Float32Array(A+2-A%2),T=new Float32Array(A+2-A%2);x[0]=w[0],T[0]=-w[A-1];const _=Math.ceil((A+1)/2),O=(A+1)/2-1;for(let D=1;D<_;D+=1){const U=D/_*O,j=Math.floor(U),Z=Math.ceil(U);x[D]=j===Z?w[j]:(1-(U-j))*w[j]+(1-(Z-U))*w[Z],T[D]=j===Z?-w[A-1-j]:-((1-(U-j))*w[A-1-j])-(1-(Z-U))*w[A-1-Z]}x[_]=A%2===1?w[_-1]:(w[_-2]+w[_-1])/2,l.curve=x,u.curve=T}m=w,C&&(r(m)&&g===null?g=t(o,d):g!==null&&(g(),g=null))},get inputs(){return[d]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get oversample(){return l.oversample},set oversample(w){l.oversample=w,u.oversample=w},addEventListener(...w){return d.addEventListener(w[0],w[1],w[2])},dispatchEvent(...w){return d.dispatchEvent(w[0])},removeEventListener(...w){return d.removeEventListener(w[0],w[1],w[2])}};s!==null&&(v.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==v.oversample&&(v.oversample=a);const b=()=>{d.connect(l).connect(f),d.connect(h).connect(u).connect(p).connect(f),C=!0,r(m)&&(g=t(o,d))},E=()=>{d.disconnect(l),l.disconnect(f),d.disconnect(h),h.disconnect(u),u.disconnect(p),p.disconnect(f),C=!1,g!==null&&(g(),g=null)};return i(yl(v,f),b,E)},cr=()=>new DOMException("","NotSupportedError"),_3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},O3=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={..._3,...l},h=n(u,d),f=o(u),p=f?r():null,g=c.sampleRate/2;super(c,!1,h,p),this._detune=e(this,f,h.detune,153600,-153600),this._frequency=e(this,f,h.frequency,g,-g),this._nativeOscillatorNode=h,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const l=typeof c=="function"?s(this,c):null;this._nativeOscillatorNode.onended=l;const u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){rl(this);const l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),zo(this)&&Sd(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}},M3=(t,e,n,r,i)=>()=>{const o=new WeakMap;let s=null,a=null,c=null;const l=async(u,d)=>{let h=n(u);const f=Rn(h,d);if(!f){const p={channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,detune:h.detune.value,frequency:h.frequency.value,periodicWave:s===null?void 0:s,type:h.type};h=e(d,p),a!==null&&h.start(a),c!==null&&h.stop(c)}return o.set(d,h),f?(await t(d,u.detune,h.detune),await t(d,u.frequency,h.frequency)):(await r(d,u.detune,h.detune),await r(d,u.frequency,h.frequency)),await i(u,d,h),h};return{set periodicWave(u){s=u},set start(u){a=u},set stop(u){c=u},render(u,d){const h=o.get(d);return h!==void 0?Promise.resolve(h):l(u,d)}}},D3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},L3=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...D3,...l},h=n(u,d),f=o(u),p=f?r():null;super(c,!1,h,p),this._nativePannerNode=h,this._orientationX=e(this,f,h.orientationX,Ln,qn),this._orientationY=e(this,f,h.orientationY,Ln,qn),this._orientationZ=e(this,f,h.orientationZ,Ln,qn),this._positionX=e(this,f,h.positionX,Ln,qn),this._positionY=e(this,f,h.positionY,Ln,qn),this._positionZ=e(this,f,h.positionZ,Ln,qn),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}},B3=(t,e,n,r,i,o,s,a,c,l)=>()=>{const u=new WeakMap;let d=null;const h=async(f,p)=>{let g=null,C=o(f);const m={channelCount:C.channelCount,channelCountMode:C.channelCountMode,channelInterpretation:C.channelInterpretation},v={...m,coneInnerAngle:C.coneInnerAngle,coneOuterAngle:C.coneOuterAngle,coneOuterGain:C.coneOuterGain,distanceModel:C.distanceModel,maxDistance:C.maxDistance,panningModel:C.panningModel,refDistance:C.refDistance,rolloffFactor:C.rolloffFactor},b=Rn(C,p);if("bufferSize"in C)g=r(p,{...m,gain:1});else if(!b){const E={...v,orientationX:C.orientationX.value,orientationY:C.orientationY.value,orientationZ:C.orientationZ.value,positionX:C.positionX.value,positionY:C.positionY.value,positionZ:C.positionZ.value};C=i(p,E)}if(u.set(p,g===null?C:g),g!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");const D=new s(6,f.context.length,p.sampleRate),U=e(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});U.connect(D.destination),d=(async()=>{const j=await Promise.all([f.orientationX,f.orientationY,f.orientationZ,f.positionX,f.positionY,f.positionZ].map(async(Z,Y)=>{const ee=n(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Y===0?1:0});return await a(D,Z,ee.offset),ee}));for(let Z=0;Z<6;Z+=1)j[Z].connect(U,0,Z),j[Z].start(0);return l(D)})()}const E=await d,w=r(p,{...m,gain:1});await c(f,p,w);const A=[];for(let D=0;D<E.numberOfChannels;D+=1)A.push(E.getChannelData(D));let x=[A[0][0],A[1][0],A[2][0]],T=[A[3][0],A[4][0],A[5][0]],_=r(p,{...m,gain:1}),O=i(p,{...v,orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:T[0],positionY:T[1],positionZ:T[2]});w.connect(_).connect(O.inputs[0]),O.connect(g);for(let D=128;D<E.length;D+=128){const U=[A[0][D],A[1][D],A[2][D]],j=[A[3][D],A[4][D],A[5][D]];if(U.some((Z,Y)=>Z!==x[Y])||j.some((Z,Y)=>Z!==T[Y])){x=U,T=j;const Z=D/p.sampleRate;_.gain.setValueAtTime(0,Z),_=r(p,{...m,gain:0}),O=i(p,{...v,orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:T[0],positionY:T[1],positionZ:T[2]}),_.gain.setValueAtTime(1,Z),w.connect(_).connect(O.inputs[0]),O.connect(g)}}return g}return b?(await t(p,f.orientationX,C.orientationX),await t(p,f.orientationY,C.orientationY),await t(p,f.orientationZ,C.orientationZ),await t(p,f.positionX,C.positionX),await t(p,f.positionY,C.positionY),await t(p,f.positionZ,C.positionZ)):(await a(p,f.orientationX,C.orientationX),await a(p,f.orientationY,C.orientationY),await a(p,f.orientationZ,C.orientationZ),await a(p,f.positionX,C.positionX),await a(p,f.positionY,C.positionY),await a(p,f.positionZ,C.positionZ)),vl(C)?await c(f,p,C.inputs[0]):await c(f,p,C),C};return{render(f,p){const g=u.get(p);return g!==void 0?Promise.resolve(g):h(f,p)}}},F3={disableNormalization:!1},U3=(t,e,n,r)=>class iT{constructor(o,s){const a=e(o),c=r({...F3,...s}),l=t(a,c);return n.add(l),l}static[Symbol.hasInstance](o){return o!==null&&typeof o=="object"&&Object.getPrototypeOf(o)===iT.prototype||n.has(o)}},V3=(t,e)=>(n,r,i)=>(t(r).replay(i),e(r,n,i)),G3=(t,e,n)=>async(r,i,o)=>{const s=t(r);await Promise.all(s.activeInputs.map((a,c)=>Array.from(a).map(async([l,u])=>{const h=await e(l).render(l,i),f=r.context.destination;!n(l)&&(r!==f||!n(r))&&h.connect(o,u,c)})).reduce((a,c)=>[...a,...c],[]))},W3=(t,e,n)=>async(r,i,o)=>{const s=e(r);await Promise.all(Array.from(s.activeInputs).map(async([a,c])=>{const u=await t(a).render(a,i);n(a)||u.connect(o,c)}))},j3=(t,e,n,r)=>i=>t(Tv,()=>Tv(i))?Promise.resolve(t(r,r)).then(o=>{if(!o){const s=n(i,512,0,1);i.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>i.currentTime,s.connect(i.destination)}return i.startRendering()}):new Promise(o=>{const s=e(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=a=>{s.disconnect(),o(a.renderedBuffer)},s.connect(i.destination),i.startRendering()}),Z3=t=>(e,n)=>{t.set(e,n)},z3=t=>(e,n)=>t.set(e,n),H3={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},X3=(t,e,n,r,i,o)=>class extends t{constructor(a,c){const l=i(a),u={...H3,...c},d=n(l,u),h=o(l),f=h?r():null;super(a,!1,d,f),this._pan=e(this,h,d.pan)}get pan(){return this._pan}},$3=(t,e,n,r,i)=>()=>{const o=new WeakMap,s=async(a,c)=>{let l=n(a);const u=Rn(l,c);if(!u){const d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,d)}return o.set(c,l),u?await t(c,a.pan,l.pan):await r(c,a.pan,l.pan),vl(l)?await i(a,c,l.inputs[0]):await i(a,c,l),l};return{render(a,c){const l=o.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}},K3=t=>()=>{if(t===null)return!1;try{new t({length:1,sampleRate:44100})}catch{return!1}return!0},J3=(t,e)=>async()=>{if(t===null)return!0;if(e===null)return!1;const n=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),i=URL.createObjectURL(n);let o=!1,s=!1;try{await r.audioWorklet.addModule(i);const a=new t(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>o=!0,a.onprocessorerror=()=>s=!0,c.connect(a),c.start(0),await r.startRendering(),await new Promise(l=>setTimeout(l))}catch{}finally{URL.revokeObjectURL(i)}return o&&!s},Y3=(t,e)=>()=>{if(e===null)return Promise.resolve(!1);const n=new e(1,1,44100),r=t(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(i=>{n.oncomplete=()=>{r.disconnect(),i(n.currentTime!==0)},n.startRendering()})},Q3=()=>new DOMException("","UnknownError"),q3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},e5=(t,e,n,r,i,o,s)=>class extends t{constructor(c,l){const u=i(c),d={...q3,...l},h=n(u,d),p=o(u)?r():null;super(c,!0,h,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=h,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}},t5=(t,e,n)=>()=>{const r=new WeakMap,i=async(o,s)=>{let a=e(o);if(!Rn(a,s)){const l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=t(s,l)}return r.set(s,a),vl(a)?await n(o,s,a.inputs[0]):await n(o,s,a),a};return{render(o,s){const a=r.get(s);return a!==void 0?Promise.resolve(a):i(o,s)}}},n5=()=>typeof window>"u"?null:window,r5=(t,e)=>n=>{n.copyFromChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)r[d]=l[d+s]},n.copyToChannel=(r,i,o=0)=>{const s=t(o),a=t(i);if(a>=n.numberOfChannels)throw e();const c=n.length,l=n.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)l[d+s]=r[d]}},i5=t=>e=>{e.copyFromChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(n=>(r,i,o=0)=>{const s=t(o),a=t(i);if(s<e.length)return n.call(e,r,a,s)})(e.copyToChannel)},o5=t=>(e,n)=>{const r=n.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),t(e,"buffer",i=>()=>{const o=i.call(e);return o===r?null:o},i=>o=>i.call(e,o===null?r:o))},s5=(t,e)=>(n,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw t()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw t()}});const i=n.createBufferSource();e(r,()=>{const a=r.numberOfInputs;for(let c=0;c<a;c+=1)i.connect(r,0,c)},()=>i.disconnect(r))},oT=(t,e,n)=>t.copyFromChannel===void 0?t.getChannelData(n)[0]:(t.copyFromChannel(e,n),e[0]),sT=t=>{if(t===null)return!1;const e=t.length;return e%2!==0?t[Math.floor(e/2)]!==0:t[e/2-1]+t[e/2]!==0},Td=(t,e,n,r)=>{let i=t;for(;!i.hasOwnProperty(e);)i=Object.getPrototypeOf(i);const{get:o,set:s}=Object.getOwnPropertyDescriptor(i,e);Object.defineProperty(t,e,{get:n(o),set:r(s)})},a5=t=>({...t,outputChannelCount:t.outputChannelCount!==void 0?t.outputChannelCount:t.numberOfInputs===1&&t.numberOfOutputs===1?[t.channelCount]:Array.from({length:t.numberOfOutputs},()=>1)}),c5=t=>({...t,channelCount:t.numberOfOutputs}),l5=t=>{const{imag:e,real:n}=t;return e===void 0?n===void 0?{...t,imag:[0,0],real:[0,0]}:{...t,imag:Array.from(n,()=>0),real:n}:n===void 0?{...t,imag:e,real:Array.from(e,()=>0)}:{...t,imag:e,real:n}},aT=(t,e,n)=>{try{t.setValueAtTime(e,n)}catch(r){if(r.code!==9)throw r;aT(t,e,n+1e-7)}},u5=t=>{const e=t.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},d5=t=>{const e=t.createBufferSource(),n=t.createBuffer(1,1,44100);e.buffer=n;try{e.start(0,1)}catch{return!1}return!0},h5=t=>{const e=t.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},Ky=t=>{const e=t.createOscillator();try{e.start(-1)}catch(n){return n instanceof RangeError}return!1},cT=t=>{const e=t.createBuffer(1,1,44100),n=t.createBufferSource();n.buffer=e,n.start(),n.stop();try{return n.stop(),!0}catch{return!1}},Jy=t=>{const e=t.createOscillator();try{e.stop(-1)}catch(n){return n instanceof RangeError}return!1},f5=t=>{const{port1:e,port2:n}=new MessageChannel;try{e.postMessage(t)}finally{e.close(),n.close()}},p5=t=>{t.start=(e=>(n=0,r=0,i)=>{const o=t.buffer,s=o===null?r:Math.min(o.duration,r);o!==null&&s>o.duration-.5/t.context.sampleRate?e.call(t,n,0,0):e.call(t,n,s,i)})(t.start)},lT=(t,e)=>{const n=e.createGain();t.connect(n);const r=(i=>()=>{i.call(t,n),t.removeEventListener("ended",r)})(t.disconnect);t.addEventListener("ended",r),yl(t,n),t.stop=(i=>{let o=!1;return(s=0)=>{if(o)try{i.call(t,s)}catch{n.gain.setValueAtTime(0,s)}else i.call(t,s),o=!0}})(t.stop)},Cl=(t,e)=>n=>{const r={value:t};return Object.defineProperties(n,{currentTarget:r,target:r}),typeof e=="function"?e.call(t,n):e.handleEvent.call(t,n)},g5=WL(Ka),m5=$L(Ka),v5=sF(_p),uT=new WeakMap,y5=AF(uT),os=BB(new Map,new WeakMap),qi=n5(),dT=JF(os,ro),hT=wF(Un),In=G3(Un,hT,Fa),C5=qL(dT,St,In),pt=TF(WE),na=w3(qi),at=VF(na),fT=new WeakMap,pT=mF(Cl),xd=e3(qi),gT=LF(xd),mT=BF(qi),I5=FF(qi),Qu=n3(qi),Ft=kB(jL(FE),XL(g5,m5,Uf,v5,Vf,Un,y5,bd,St,Ka,zo,Fa,Uh),os,DF(bv,Vf,Un,St,Yu,zo),ro,Op,cr,nF(Uf,bv,Un,St,Yu,pt,zo,at),lF(fT,Un,Ii),pT,pt,gT,mT,I5,at,Qu),b5=QL(Ft,C5,ro,dT,pt,at),vT=new WeakSet,NS=YF(qi),yT=JB(new Uint32Array(1)),CT=r5(yT,ro),IT=i5(yT),S5=tB(vT,os,cr,NS,na,K3(NS),CT,IT),Mp=KL(ar),bT=W3(hT,wd,Fa),io=ZB(bT),Il=qF(Mp,os,u5,d5,h5,Ky,cT,Jy,p5,o5(Td),lT),oo=V3(kF(wd),bT),w5=iB(io,Il,St,oo,In),wi=EB(ZL(VE),fT,GE,TB,LL,BL,FL,UL,VL,yv,LE,xd,aT),A5=rB(Ft,w5,wi,pn,Il,pt,at,Cl),k5=pB(Ft,gB,ro,pn,t3(ar,Td),pt,at,In),E5=LB(io,nT,St,oo,In),Ja=z3(uT),T5=DB(Ft,wi,E5,Op,nT,pt,at,Ja),ra=$F(Ka,mT),x5=s5(pn,ra),ia=l3(xd,x5),P5=VB(ia,St,In),R5=UB(Ft,P5,ia,pt,at),N5=jB(kd,St,In),_5=WB(Ft,N5,kd,pt,at,c5),O5=h3(Mp,Il,ar,ra),bl=d3(Mp,os,O5,Ky,Jy),M5=KB(io,bl,St,oo,In),D5=$B(Ft,wi,M5,bl,pt,at,Cl),ST=f3(cr,Td),L5=qB(ST,St,In),B5=QB(Ft,L5,ST,pt,at,Ja),F5=oF(io,rT,St,oo,In),U5=iF(Ft,wi,F5,rT,pt,at,Ja),wT=p3(cr),V5=fF(io,wT,St,oo,In),G5=hF(Ft,wi,V5,wT,cr,pt,at,Ja),W5=bF(io,ar,St,oo,In),j5=IF(Ft,wi,W5,ar,pt,at),Z5=y3(Op,pn,Ed,cr),Yy=j3(os,ar,Ed,Y3(ar,na)),z5=MF(Il,St,na,In,Yy),H5=g3(Z5),X5=_F(Ft,H5,z5,pt,at,Ja),$5=mB(wi,ia,bl,Ed,cr,oT,at,Td),AT=new WeakMap,K5=XF(k5,$5,pT,at,AT,Cl),kT=A3(Mp,os,Ky,cT,Jy,lT),J5=M3(io,kT,St,oo,In),Y5=O3(Ft,wi,kT,J5,pt,at,Cl),ET=HB(Il),Q5=N3(ET,pn,ar,sT,ra),Dp=R3(ET,pn,Q5,sT,ra,xd,Td),q5=E3(Uf,pn,ia,ar,Ed,Dp,cr,Vf,oT,ra),TT=k3(q5),eU=B3(io,ia,bl,ar,TT,St,na,oo,In,Yy),tU=L3(Ft,wi,TT,eU,pt,at,Ja),nU=T3(ro),rU=U3(nU,pt,new WeakSet,l5),iU=P3(ia,kd,ar,Dp,cr,ra),xT=x3(iU,cr),oU=$3(io,xT,St,oo,In),sU=X3(Ft,wi,xT,oU,pt,at),aU=t5(Dp,St,In),cU=e5(Ft,pn,Dp,aU,pt,at,Ja),PT=GF(qi),Qy=vF(qi),RT=new WeakMap,lU=xF(RT,na),uU=PT?HL(os,cr,gF(qi),Qy,yF(GL),pt,lU,at,Qu,new WeakMap,new WeakMap,J3(Qu,na),qi):void 0,dU=UF(gT,at),hU=tF(vT,os,eF,pF,new WeakSet,pt,dU,kv,Tv,CT,IT),fU=OB(uU,b5,S5,A5,T5,R5,_5,D5,B5,hU,U5,G5,j5,X5,K5,Y5,tU,rU,sU,cU),pU=WF(Ft,C3,pt,at),gU=ZF(Ft,I3,pt,at),mU=zF(Ft,b3,pt,at),vU=S3(pn,at),yU=HF(Ft,vU,pt),CU=fB(fU,pn,cr,Q3,pU,gU,mU,yU,xd),NT=PF(AT),IU=JL(NT),_T=zB(ro),bU=aF(NT),OT=uF(ro),MT=new WeakMap,SU=SF(MT,Ii),wU=c3(_T,ro,pn,ia,kd,bl,ar,Ed,cr,OT,Qy,SU,ra),AU=i3(pn,wU,ar,cr,ra),kU=_B(io,_T,Il,ia,kd,bl,ar,bU,OT,Qy,St,Qu,na,oo,In,Yy),EU=EF(RT),TU=Z3(MT),_S=PT?PB(IU,Ft,wi,kU,AU,Un,EU,pt,at,Qu,a5,TU,f5,Cl):void 0,xU="data:text/javascript;base64,KGZ1bmN0aW9uIChleHBvcnRzKSB7CiAgICAndXNlIHN0cmljdCc7CgogICAgY29uc3QgV0VCQVVESU9fQkxPQ0tfU0laRSA9IDEyODsKICAgIGNvbnN0IERFRkFVTFRfQkxPQ0tfU0laRSA9IDEwMjQ7IC8vIERlZmF1bHQgYmxvY2sgc2l6ZSBpZiBub3QgcHJvdmlkZWQgaW4gb3B0aW9ucwogICAgLyoqIE92ZXJsYXAtQWRkIE5vZGUgKi8KICAgIGNsYXNzIE9MQVByb2Nlc3NvciBleHRlbmRzIEF1ZGlvV29ya2xldFByb2Nlc3NvciB7CiAgICAgICAgbmJJbnB1dHM7CiAgICAgICAgbmJPdXRwdXRzOwogICAgICAgIGJsb2NrU2l6ZTsKICAgICAgICBob3BTaXplOwogICAgICAgIG5iT3ZlcmxhcHM7CiAgICAgICAgaW5wdXRCdWZmZXJzID0gW107CiAgICAgICAgaW5wdXRCdWZmZXJzSGVhZCA9IFtdOwogICAgICAgIGlucHV0QnVmZmVyc1RvU2VuZCA9IFtdOwogICAgICAgIG91dHB1dEJ1ZmZlcnMgPSBbXTsKICAgICAgICBvdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZSA9IFtdOwogICAgICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMubmJJbnB1dHMgPSBvcHRpb25zLm51bWJlck9mSW5wdXRzIHx8IDE7CiAgICAgICAgICAgIHRoaXMubmJPdXRwdXRzID0gb3B0aW9ucy5udW1iZXJPZk91dHB1dHMgfHwgMTsKICAgICAgICAgICAgdGhpcy5ibG9ja1NpemUgPSBvcHRpb25zLnByb2Nlc3Nvck9wdGlvbnMuYmxvY2tTaXplIHx8IERFRkFVTFRfQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5ob3BTaXplID0gV0VCQVVESU9fQkxPQ0tfU0laRTsKICAgICAgICAgICAgdGhpcy5uYk92ZXJsYXBzID0gTWF0aC5mbG9vcih0aGlzLmJsb2NrU2l6ZSAvIHRoaXMuaG9wU2l6ZSk7CiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZUJ1ZmZlcnMoKTsKICAgICAgICB9CiAgICAgICAgaW5pdGlhbGl6ZUJ1ZmZlcnMoKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWQgPSBuZXcgQXJyYXkodGhpcy5uYklucHV0cyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kID0gbmV3IEFycmF5KHRoaXMubmJJbnB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnMgPSBuZXcgQXJyYXkodGhpcy5uYk91dHB1dHMpOwogICAgICAgICAgICB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlID0gbmV3IEFycmF5KHRoaXMubmJPdXRwdXRzKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVJbnB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5uYk91dHB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5hbGxvY2F0ZU91dHB1dENoYW5uZWxzKGksIDEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGFsbG9jYXRlSW5wdXRDaGFubmVscyhpbnB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc0hlYWRbaW5wdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2lucHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplICsgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB0aGlzLmlucHV0QnVmZmVyc1tpbnB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNIZWFkW2lucHV0SW5kZXhdW2ldID0gdGhpcy5pbnB1dEJ1ZmZlcnNbaW5wdXRJbmRleF1baV0uc3ViYXJyYXkoMCwgdGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmRbaW5wdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBhbGxvY2F0ZU91dHB1dENoYW5uZWxzKG91dHB1dEluZGV4LCBuYkNoYW5uZWxzKSB7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tvdXRwdXRJbmRleF0gPSBuZXcgQXJyYXkobmJDaGFubmVscyk7CiAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmVbb3V0cHV0SW5kZXhdID0gbmV3IEFycmF5KG5iQ2hhbm5lbHMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5iQ2hhbm5lbHM7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXSA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5ibG9ja1NpemUpOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW291dHB1dEluZGV4XVtpXS5maWxsKDApOwogICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzVG9SZXRyaWV2ZVtvdXRwdXRJbmRleF1baV0gPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFsbG9jYXRlQ2hhbm5lbHNJZk5lZWRlZChpbnB1dHMsIG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iSW5wdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gaW5wdXRzW2ldLmxlbmd0aDsKICAgICAgICAgICAgICAgIGlmIChuYkNoYW5uZWxzICE9PSB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbG9jYXRlSW5wdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGxldCBuYkNoYW5uZWxzID0gb3V0cHV0c1tpXS5sZW5ndGg7CiAgICAgICAgICAgICAgICBpZiAobmJDaGFubmVscyAhPT0gdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsb2NhdGVPdXRwdXRDaGFubmVscyhpLCBuYkNoYW5uZWxzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZWFkSW5wdXRzKGlucHV0cykgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gaW5wdXRzW2ldW2pdOwogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLnNldCh3ZWJBdWRpb0Jsb2NrLCB0aGlzLmJsb2NrU2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgd3JpdGVPdXRwdXRzKG91dHB1dHMpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iT3V0cHV0czsgaSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IHRoaXMub3V0cHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGxldCB3ZWJBdWRpb0Jsb2NrID0gb3V0cHV0c1tpXVtqXTsKICAgICAgICAgICAgICAgICAgICB3ZWJBdWRpb0Jsb2NrLnNldCh0aGlzLm91dHB1dEJ1ZmZlcnNbaV1bal0uc3ViYXJyYXkoMCwgV0VCQVVESU9fQkxPQ0tfU0laRSkpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0SW5wdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgc2hpZnRPdXRwdXRCdWZmZXJzKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmNvcHlXaXRoaW4oMCwgV0VCQVVESU9fQkxPQ0tfU0laRSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRCdWZmZXJzW2ldW2pdLmZpbGwoMCwgdGhpcy5ibG9ja1NpemUgLSBXRUJBVURJT19CTE9DS19TSVpFKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcmVwYXJlSW5wdXRCdWZmZXJzVG9TZW5kKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0aGlzLmlucHV0QnVmZmVyc1tpXS5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuaW5wdXRCdWZmZXJzVG9TZW5kW2ldW2pdLnNldCh0aGlzLmlucHV0QnVmZmVyc0hlYWRbaV1bal0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJPdXRwdXRzOyBpKyspIHsKICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgdGhpcy5vdXRwdXRCdWZmZXJzW2ldLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLmJsb2NrU2l6ZTsgaysrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0QnVmZmVyc1tpXVtqXVtrXSArPSB0aGlzLm91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlW2ldW2pdW2tdIC8gdGhpcy5uYk92ZXJsYXBzOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBwcm9jZXNzKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICB0aGlzLnJlYWxsb2NhdGVDaGFubmVsc0lmTmVlZGVkKGlucHV0cywgb3V0cHV0cyk7CiAgICAgICAgICAgIHRoaXMucmVhZElucHV0cyhpbnB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0SW5wdXRCdWZmZXJzKCk7CiAgICAgICAgICAgIHRoaXMucHJlcGFyZUlucHV0QnVmZmVyc1RvU2VuZCgpOwogICAgICAgICAgICB0aGlzLnByb2Nlc3NPTEEodGhpcy5pbnB1dEJ1ZmZlcnNUb1NlbmQsIHRoaXMub3V0cHV0QnVmZmVyc1RvUmV0cmlldmUsIHBhcmFtZXRlcnMpOwogICAgICAgICAgICB0aGlzLmhhbmRsZU91dHB1dEJ1ZmZlcnNUb1JldHJpZXZlKCk7CiAgICAgICAgICAgIHRoaXMud3JpdGVPdXRwdXRzKG91dHB1dHMpOwogICAgICAgICAgICB0aGlzLnNoaWZ0T3V0cHV0QnVmZmVycygpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICB9CgogICAgZnVuY3Rpb24gZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMgKHgpIHsKICAgIAlyZXR1cm4geCAmJiB4Ll9fZXNNb2R1bGUgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHgsICdkZWZhdWx0JykgPyB4WydkZWZhdWx0J10gOiB4OwogICAgfQoKICAgIGZ1bmN0aW9uIEZGVChzaXplKSB7CiAgICAgIHRoaXMuc2l6ZSA9IHNpemUgfCAwOwogICAgICBpZiAodGhpcy5zaXplIDw9IDEgfHwgKHRoaXMuc2l6ZSAmICh0aGlzLnNpemUgLSAxKSkgIT09IDApCiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGRlQgc2l6ZSBtdXN0IGJlIGEgcG93ZXIgb2YgdHdvIGFuZCBiaWdnZXIgdGhhbiAxJyk7CgogICAgICB0aGlzLl9jc2l6ZSA9IHNpemUgPDwgMTsKCiAgICAgIC8vIE5PVEU6IFVzZSBvZiBgdmFyYCBpcyBpbnRlbnRpb25hbCBmb3Igb2xkIFY4IHZlcnNpb25zCiAgICAgIHZhciB0YWJsZSA9IG5ldyBBcnJheSh0aGlzLnNpemUgKiAyKTsKICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZS5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIGNvbnN0IGFuZ2xlID0gTWF0aC5QSSAqIGkgLyB0aGlzLnNpemU7CiAgICAgICAgdGFibGVbaV0gPSBNYXRoLmNvcyhhbmdsZSk7CiAgICAgICAgdGFibGVbaSArIDFdID0gLU1hdGguc2luKGFuZ2xlKTsKICAgICAgfQogICAgICB0aGlzLnRhYmxlID0gdGFibGU7CgogICAgICAvLyBGaW5kIHNpemUncyBwb3dlciBvZiB0d28KICAgICAgdmFyIHBvd2VyID0gMDsKICAgICAgZm9yICh2YXIgdCA9IDE7IHRoaXMuc2l6ZSA+IHQ7IHQgPDw9IDEpCiAgICAgICAgcG93ZXIrKzsKCiAgICAgIC8vIENhbGN1bGF0ZSBpbml0aWFsIHN0ZXAncyB3aWR0aDoKICAgICAgLy8gICAqIElmIHdlIGFyZSBmdWxsIHJhZGl4LTQgLSBpdCBpcyAyeCBzbWFsbGVyIHRvIGdpdmUgaW5pdGFsIGxlbj04CiAgICAgIC8vICAgKiBPdGhlcndpc2UgaXQgaXMgdGhlIHNhbWUgYXMgYHBvd2VyYCB0byBnaXZlIGxlbj00CiAgICAgIHRoaXMuX3dpZHRoID0gcG93ZXIgJSAyID09PSAwID8gcG93ZXIgLSAxIDogcG93ZXI7CgogICAgICAvLyBQcmUtY29tcHV0ZSBiaXQtcmV2ZXJzYWwgcGF0dGVybnMKICAgICAgdGhpcy5fYml0cmV2ID0gbmV3IEFycmF5KDEgPDwgdGhpcy5fd2lkdGgpOwogICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHRoaXMuX2JpdHJldi5sZW5ndGg7IGorKykgewogICAgICAgIHRoaXMuX2JpdHJldltqXSA9IDA7CiAgICAgICAgZm9yICh2YXIgc2hpZnQgPSAwOyBzaGlmdCA8IHRoaXMuX3dpZHRoOyBzaGlmdCArPSAyKSB7CiAgICAgICAgICB2YXIgcmV2U2hpZnQgPSB0aGlzLl93aWR0aCAtIHNoaWZ0IC0gMjsKICAgICAgICAgIHRoaXMuX2JpdHJldltqXSB8PSAoKGogPj4+IHNoaWZ0KSAmIDMpIDw8IHJldlNoaWZ0OwogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5fb3V0ID0gbnVsbDsKICAgICAgdGhpcy5fZGF0YSA9IG51bGw7CiAgICAgIHRoaXMuX2ludiA9IDA7CiAgICB9CiAgICB2YXIgZmZ0ID0gRkZUOwoKICAgIEZGVC5wcm90b3R5cGUuZnJvbUNvbXBsZXhBcnJheSA9IGZ1bmN0aW9uIGZyb21Db21wbGV4QXJyYXkoY29tcGxleCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCBuZXcgQXJyYXkoY29tcGxleC5sZW5ndGggPj4+IDEpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbXBsZXgubGVuZ3RoOyBpICs9IDIpCiAgICAgICAgcmVzW2kgPj4+IDFdID0gY29tcGxleFtpXTsKICAgICAgcmV0dXJuIHJlczsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5jcmVhdGVDb21wbGV4QXJyYXkgPSBmdW5jdGlvbiBjcmVhdGVDb21wbGV4QXJyYXkoKSB7CiAgICAgIGNvbnN0IHJlcyA9IG5ldyBBcnJheSh0aGlzLl9jc2l6ZSk7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzLmxlbmd0aDsgaSsrKQogICAgICAgIHJlc1tpXSA9IDA7CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudG9Db21wbGV4QXJyYXkgPSBmdW5jdGlvbiB0b0NvbXBsZXhBcnJheShpbnB1dCwgc3RvcmFnZSkgewogICAgICB2YXIgcmVzID0gc3RvcmFnZSB8fCB0aGlzLmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlcy5sZW5ndGg7IGkgKz0gMikgewogICAgICAgIHJlc1tpXSA9IGlucHV0W2kgPj4+IDFdOwogICAgICAgIHJlc1tpICsgMV0gPSAwOwogICAgICB9CiAgICAgIHJldHVybiByZXM7CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUuY29tcGxldGVTcGVjdHJ1bSA9IGZ1bmN0aW9uIGNvbXBsZXRlU3BlY3RydW0oc3BlY3RydW0pIHsKICAgICAgdmFyIHNpemUgPSB0aGlzLl9jc2l6ZTsKICAgICAgdmFyIGhhbGYgPSBzaXplID4+PiAxOwogICAgICBmb3IgKHZhciBpID0gMjsgaSA8IGhhbGY7IGkgKz0gMikgewogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpXSA9IHNwZWN0cnVtW2ldOwogICAgICAgIHNwZWN0cnVtW3NpemUgLSBpICsgMV0gPSAtc3BlY3RydW1baSArIDFdOwogICAgICB9CiAgICB9OwoKICAgIEZGVC5wcm90b3R5cGUudHJhbnNmb3JtID0gZnVuY3Rpb24gdHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl90cmFuc2Zvcm00KCk7CiAgICAgIHRoaXMuX291dCA9IG51bGw7CiAgICAgIHRoaXMuX2RhdGEgPSBudWxsOwogICAgfTsKCiAgICBGRlQucHJvdG90eXBlLnJlYWxUcmFuc2Zvcm0gPSBmdW5jdGlvbiByZWFsVHJhbnNmb3JtKG91dCwgZGF0YSkgewogICAgICBpZiAob3V0ID09PSBkYXRhKQogICAgICAgIHRocm93IG5ldyBFcnJvcignSW5wdXQgYW5kIG91dHB1dCBidWZmZXJzIG11c3QgYmUgZGlmZmVyZW50Jyk7CgogICAgICB0aGlzLl9vdXQgPSBvdXQ7CiAgICAgIHRoaXMuX2RhdGEgPSBkYXRhOwogICAgICB0aGlzLl9pbnYgPSAwOwogICAgICB0aGlzLl9yZWFsVHJhbnNmb3JtNCgpOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgRkZULnByb3RvdHlwZS5pbnZlcnNlVHJhbnNmb3JtID0gZnVuY3Rpb24gaW52ZXJzZVRyYW5zZm9ybShvdXQsIGRhdGEpIHsKICAgICAgaWYgKG91dCA9PT0gZGF0YSkKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lucHV0IGFuZCBvdXRwdXQgYnVmZmVycyBtdXN0IGJlIGRpZmZlcmVudCcpOwoKICAgICAgdGhpcy5fb3V0ID0gb3V0OwogICAgICB0aGlzLl9kYXRhID0gZGF0YTsKICAgICAgdGhpcy5faW52ID0gMTsKICAgICAgdGhpcy5fdHJhbnNmb3JtNCgpOwogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG91dC5sZW5ndGg7IGkrKykKICAgICAgICBvdXRbaV0gLz0gdGhpcy5zaXplOwogICAgICB0aGlzLl9vdXQgPSBudWxsOwogICAgICB0aGlzLl9kYXRhID0gbnVsbDsKICAgIH07CgogICAgLy8gcmFkaXgtNCBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IFVzZXMgb2YgYHZhcmAgYXJlIGludGVudGlvbmFsIGZvciBvbGRlciBWOCB2ZXJzaW9uIHRoYXQgZG8gbm90CiAgICAvLyBzdXBwb3J0IGJvdGggYGxldCBjb21wb3VuZCBhc3NpZ25tZW50c2AgYW5kIGBjb25zdCBwaGlgCiAgICBGRlQucHJvdG90eXBlLl90cmFuc2Zvcm00ID0gZnVuY3Rpb24gX3RyYW5zZm9ybTQoKSB7CiAgICAgIHZhciBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIHZhciBzaXplID0gdGhpcy5fY3NpemU7CgogICAgICAvLyBJbml0aWFsIHN0ZXAgKHBlcm11dGUgYW5kIHRyYW5zZm9ybSkKICAgICAgdmFyIHdpZHRoID0gdGhpcy5fd2lkdGg7CiAgICAgIHZhciBzdGVwID0gMSA8PCB3aWR0aDsKICAgICAgdmFyIGxlbiA9IChzaXplIC8gc3RlcCkgPDwgMTsKCiAgICAgIHZhciBvdXRPZmY7CiAgICAgIHZhciB0OwogICAgICB2YXIgYml0cmV2ID0gdGhpcy5fYml0cmV2OwogICAgICBpZiAobGVuID09PSA0KSB7CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm0yKG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gbGVuID09PSA4CiAgICAgICAgZm9yIChvdXRPZmYgPSAwLCB0ID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbiwgdCsrKSB7CiAgICAgICAgICBjb25zdCBvZmYgPSBiaXRyZXZbdF07CiAgICAgICAgICB0aGlzLl9zaW5nbGVUcmFuc2Zvcm00KG91dE9mZiwgb2ZmLCBzdGVwKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gbGVuID4+PiAyOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgLy8gRnVsbCBjYXNlCiAgICAgICAgICB2YXIgbGltaXQgPSBvdXRPZmYgKyBxdWFydGVyTGVuOwogICAgICAgICAgZm9yICh2YXIgaSA9IG91dE9mZiwgayA9IDA7IGkgPCBsaW1pdDsgaSArPSAyLCBrICs9IHN0ZXApIHsKICAgICAgICAgICAgY29uc3QgQSA9IGk7CiAgICAgICAgICAgIGNvbnN0IEIgPSBBICsgcXVhcnRlckxlbjsKICAgICAgICAgICAgY29uc3QgQyA9IEIgKyBxdWFydGVyTGVuOwogICAgICAgICAgICBjb25zdCBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgQXIgPSBvdXRbQV07CiAgICAgICAgICAgIGNvbnN0IEFpID0gb3V0W0EgKyAxXTsKICAgICAgICAgICAgY29uc3QgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIGNvbnN0IEJpID0gb3V0W0IgKyAxXTsKICAgICAgICAgICAgY29uc3QgQ3IgPSBvdXRbQ107CiAgICAgICAgICAgIGNvbnN0IENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgY29uc3QgRHIgPSBvdXRbRF07CiAgICAgICAgICAgIGNvbnN0IERpID0gb3V0W0QgKyAxXTsKCiAgICAgICAgICAgIC8vIE1pZGRsZSB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgTUFyID0gQXI7CiAgICAgICAgICAgIGNvbnN0IE1BaSA9IEFpOwoKICAgICAgICAgICAgY29uc3QgdGFibGVCciA9IHRhYmxlW2tdOwogICAgICAgICAgICBjb25zdCB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICBjb25zdCBNQnIgPSBCciAqIHRhYmxlQnIgLSBCaSAqIHRhYmxlQmk7CiAgICAgICAgICAgIGNvbnN0IE1CaSA9IEJyICogdGFibGVCaSArIEJpICogdGFibGVCcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlQ2kgPSBpbnYgKiB0YWJsZVsyICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNQ3IgPSBDciAqIHRhYmxlQ3IgLSBDaSAqIHRhYmxlQ2k7CiAgICAgICAgICAgIGNvbnN0IE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIGNvbnN0IHRhYmxlRHIgPSB0YWJsZVszICoga107CiAgICAgICAgICAgIGNvbnN0IHRhYmxlRGkgPSBpbnYgKiB0YWJsZVszICogayArIDFdOwogICAgICAgICAgICBjb25zdCBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIGNvbnN0IE1EaSA9IERyICogdGFibGVEaSArIERpICogdGFibGVEcjsKCiAgICAgICAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgICAgICAgY29uc3QgVDByID0gTUFyICsgTUNyOwogICAgICAgICAgICBjb25zdCBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIGNvbnN0IFQxciA9IE1BciAtIE1DcjsKICAgICAgICAgICAgY29uc3QgVDFpID0gTUFpIC0gTUNpOwogICAgICAgICAgICBjb25zdCBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIGNvbnN0IFQyaSA9IE1CaSArIE1EaTsKICAgICAgICAgICAgY29uc3QgVDNyID0gaW52ICogKE1CciAtIE1Ecik7CiAgICAgICAgICAgIGNvbnN0IFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKICAgICAgICAgICAgY29uc3QgRkFpID0gVDBpICsgVDJpOwoKICAgICAgICAgICAgY29uc3QgRkNyID0gVDByIC0gVDJyOwogICAgICAgICAgICBjb25zdCBGQ2kgPSBUMGkgLSBUMmk7CgogICAgICAgICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgICAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgICAgICAgIGNvbnN0IEZEciA9IFQxciAtIFQzaTsKICAgICAgICAgICAgY29uc3QgRkRpID0gVDFpICsgVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CiAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgb3V0W0MgKyAxXSA9IEZDaTsKICAgICAgICAgICAgb3V0W0RdID0gRkRyOwogICAgICAgICAgICBvdXRbRCArIDFdID0gRkRpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfTsKCiAgICAvLyByYWRpeC0yIGltcGxlbWVudGF0aW9uCiAgICAvLwogICAgLy8gTk9URTogT25seSBjYWxsZWQgZm9yIGxlbj00CiAgICBGRlQucHJvdG90eXBlLl9zaW5nbGVUcmFuc2Zvcm0yID0gZnVuY3Rpb24gX3NpbmdsZVRyYW5zZm9ybTIob3V0T2ZmLCBvZmYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IGV2ZW5JID0gZGF0YVtvZmYgKyAxXTsKICAgICAgY29uc3Qgb2RkUiA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IG9kZEkgPSBkYXRhW29mZiArIHN0ZXAgKyAxXTsKCiAgICAgIGNvbnN0IGxlZnRSID0gZXZlblIgKyBvZGRSOwogICAgICBjb25zdCBsZWZ0SSA9IGV2ZW5JICsgb2RkSTsKICAgICAgY29uc3QgcmlnaHRSID0gZXZlblIgLSBvZGRSOwogICAgICBjb25zdCByaWdodEkgPSBldmVuSSAtIG9kZEk7CgogICAgICBvdXRbb3V0T2ZmXSA9IGxlZnRSOwogICAgICBvdXRbb3V0T2ZmICsgMV0gPSBsZWZ0STsKICAgICAgb3V0W291dE9mZiArIDJdID0gcmlnaHRSOwogICAgICBvdXRbb3V0T2ZmICsgM10gPSByaWdodEk7CiAgICB9OwoKICAgIC8vIHJhZGl4LTQKICAgIC8vCiAgICAvLyBOT1RFOiBPbmx5IGNhbGxlZCBmb3IgbGVuPTgKICAgIEZGVC5wcm90b3R5cGUuX3NpbmdsZVRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlVHJhbnNmb3JtNChvdXRPZmYsIG9mZiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuX291dDsKICAgICAgY29uc3QgZGF0YSA9IHRoaXMuX2RhdGE7CiAgICAgIGNvbnN0IGludiA9IHRoaXMuX2ludiA/IC0xIDogMTsKICAgICAgY29uc3Qgc3RlcDIgPSBzdGVwICogMjsKICAgICAgY29uc3Qgc3RlcDMgPSBzdGVwICogMzsKCiAgICAgIC8vIE9yaWdpbmFsIHZhbHVlcwogICAgICBjb25zdCBBciA9IGRhdGFbb2ZmXTsKICAgICAgY29uc3QgQWkgPSBkYXRhW29mZiArIDFdOwogICAgICBjb25zdCBCciA9IGRhdGFbb2ZmICsgc3RlcF07CiAgICAgIGNvbnN0IEJpID0gZGF0YVtvZmYgKyBzdGVwICsgMV07CiAgICAgIGNvbnN0IENyID0gZGF0YVtvZmYgKyBzdGVwMl07CiAgICAgIGNvbnN0IENpID0gZGF0YVtvZmYgKyBzdGVwMiArIDFdOwogICAgICBjb25zdCBEciA9IGRhdGFbb2ZmICsgc3RlcDNdOwogICAgICBjb25zdCBEaSA9IGRhdGFbb2ZmICsgc3RlcDMgKyAxXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDBpID0gQWkgKyBDaTsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDFpID0gQWkgLSBDaTsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDJpID0gQmkgKyBEaTsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwogICAgICBjb25zdCBUM2kgPSBpbnYgKiAoQmkgLSBEaSk7CgogICAgICAvLyBGaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgRkFyID0gVDByICsgVDJyOwogICAgICBjb25zdCBGQWkgPSBUMGkgKyBUMmk7CgogICAgICBjb25zdCBGQnIgPSBUMXIgKyBUM2k7CiAgICAgIGNvbnN0IEZCaSA9IFQxaSAtIFQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKICAgICAgY29uc3QgRkNpID0gVDBpIC0gVDJpOwoKICAgICAgY29uc3QgRkRyID0gVDFyIC0gVDNpOwogICAgICBjb25zdCBGRGkgPSBUMWkgKyBUM3I7CgogICAgICBvdXRbb3V0T2ZmXSA9IEZBcjsKICAgICAgb3V0W291dE9mZiArIDFdID0gRkFpOwogICAgICBvdXRbb3V0T2ZmICsgMl0gPSBGQnI7CiAgICAgIG91dFtvdXRPZmYgKyAzXSA9IEZCaTsKICAgICAgb3V0W291dE9mZiArIDRdID0gRkNyOwogICAgICBvdXRbb3V0T2ZmICsgNV0gPSBGQ2k7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICAvLyBSZWFsIGlucHV0IHJhZGl4LTQgaW1wbGVtZW50YXRpb24KICAgIEZGVC5wcm90b3R5cGUuX3JlYWxUcmFuc2Zvcm00ID0gZnVuY3Rpb24gX3JlYWxUcmFuc2Zvcm00KCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5fb3V0OwogICAgICB2YXIgc2l6ZSA9IHRoaXMuX2NzaXplOwoKICAgICAgLy8gSW5pdGlhbCBzdGVwIChwZXJtdXRlIGFuZCB0cmFuc2Zvcm0pCiAgICAgIHZhciB3aWR0aCA9IHRoaXMuX3dpZHRoOwogICAgICB2YXIgc3RlcCA9IDEgPDwgd2lkdGg7CiAgICAgIHZhciBsZW4gPSAoc2l6ZSAvIHN0ZXApIDw8IDE7CgogICAgICB2YXIgb3V0T2ZmOwogICAgICB2YXIgdDsKICAgICAgdmFyIGJpdHJldiA9IHRoaXMuX2JpdHJldjsKICAgICAgaWYgKGxlbiA9PT0gNCkgewogICAgICAgIGZvciAob3V0T2ZmID0gMCwgdCA9IDA7IG91dE9mZiA8IHNpemU7IG91dE9mZiArPSBsZW4sIHQrKykgewogICAgICAgICAgY29uc3Qgb2ZmID0gYml0cmV2W3RdOwogICAgICAgICAgdGhpcy5fc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLCBvZmYgPj4+IDEsIHN0ZXAgPj4+IDEpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBsZW4gPT09IDgKICAgICAgICBmb3IgKG91dE9mZiA9IDAsIHQgPSAwOyBvdXRPZmYgPCBzaXplOyBvdXRPZmYgKz0gbGVuLCB0KyspIHsKICAgICAgICAgIGNvbnN0IG9mZiA9IGJpdHJldlt0XTsKICAgICAgICAgIHRoaXMuX3NpbmdsZVJlYWxUcmFuc2Zvcm00KG91dE9mZiwgb2ZmID4+PiAxLCBzdGVwID4+PiAxKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIC8vIExvb3AgdGhyb3VnaCBzdGVwcyBpbiBkZWNyZWFzaW5nIG9yZGVyCiAgICAgIHZhciBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIHZhciB0YWJsZSA9IHRoaXMudGFibGU7CiAgICAgIGZvciAoc3RlcCA+Pj0gMjsgc3RlcCA+PSAyOyBzdGVwID4+PSAyKSB7CiAgICAgICAgbGVuID0gKHNpemUgLyBzdGVwKSA8PCAxOwogICAgICAgIHZhciBoYWxmTGVuID0gbGVuID4+PiAxOwogICAgICAgIHZhciBxdWFydGVyTGVuID0gaGFsZkxlbiA+Pj4gMTsKICAgICAgICB2YXIgaHF1YXJ0ZXJMZW4gPSBxdWFydGVyTGVuID4+PiAxOwoKICAgICAgICAvLyBMb29wIHRocm91Z2ggb2Zmc2V0cyBpbiB0aGUgZGF0YQogICAgICAgIGZvciAob3V0T2ZmID0gMDsgb3V0T2ZmIDwgc2l6ZTsgb3V0T2ZmICs9IGxlbikgewogICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGsgPSAwOyBpIDw9IGhxdWFydGVyTGVuOyBpICs9IDIsIGsgKz0gc3RlcCkgewogICAgICAgICAgICB2YXIgQSA9IG91dE9mZiArIGk7CiAgICAgICAgICAgIHZhciBCID0gQSArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBDID0gQiArIHF1YXJ0ZXJMZW47CiAgICAgICAgICAgIHZhciBEID0gQyArIHF1YXJ0ZXJMZW47CgogICAgICAgICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgICAgICAgdmFyIEFyID0gb3V0W0FdOwogICAgICAgICAgICB2YXIgQWkgPSBvdXRbQSArIDFdOwogICAgICAgICAgICB2YXIgQnIgPSBvdXRbQl07CiAgICAgICAgICAgIHZhciBCaSA9IG91dFtCICsgMV07CiAgICAgICAgICAgIHZhciBDciA9IG91dFtDXTsKICAgICAgICAgICAgdmFyIENpID0gb3V0W0MgKyAxXTsKICAgICAgICAgICAgdmFyIERyID0gb3V0W0RdOwogICAgICAgICAgICB2YXIgRGkgPSBvdXRbRCArIDFdOwoKICAgICAgICAgICAgLy8gTWlkZGxlIHZhbHVlcwogICAgICAgICAgICB2YXIgTUFyID0gQXI7CiAgICAgICAgICAgIHZhciBNQWkgPSBBaTsKCiAgICAgICAgICAgIHZhciB0YWJsZUJyID0gdGFibGVba107CiAgICAgICAgICAgIHZhciB0YWJsZUJpID0gaW52ICogdGFibGVbayArIDFdOwogICAgICAgICAgICB2YXIgTUJyID0gQnIgKiB0YWJsZUJyIC0gQmkgKiB0YWJsZUJpOwogICAgICAgICAgICB2YXIgTUJpID0gQnIgKiB0YWJsZUJpICsgQmkgKiB0YWJsZUJyOwoKICAgICAgICAgICAgdmFyIHRhYmxlQ3IgPSB0YWJsZVsyICoga107CiAgICAgICAgICAgIHZhciB0YWJsZUNpID0gaW52ICogdGFibGVbMiAqIGsgKyAxXTsKICAgICAgICAgICAgdmFyIE1DciA9IENyICogdGFibGVDciAtIENpICogdGFibGVDaTsKICAgICAgICAgICAgdmFyIE1DaSA9IENyICogdGFibGVDaSArIENpICogdGFibGVDcjsKCiAgICAgICAgICAgIHZhciB0YWJsZURyID0gdGFibGVbMyAqIGtdOwogICAgICAgICAgICB2YXIgdGFibGVEaSA9IGludiAqIHRhYmxlWzMgKiBrICsgMV07CiAgICAgICAgICAgIHZhciBNRHIgPSBEciAqIHRhYmxlRHIgLSBEaSAqIHRhYmxlRGk7CiAgICAgICAgICAgIHZhciBNRGkgPSBEciAqIHRhYmxlRGkgKyBEaSAqIHRhYmxlRHI7CgogICAgICAgICAgICAvLyBQcmUtRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBUMHIgPSBNQXIgKyBNQ3I7CiAgICAgICAgICAgIHZhciBUMGkgPSBNQWkgKyBNQ2k7CiAgICAgICAgICAgIHZhciBUMXIgPSBNQXIgLSBNQ3I7CiAgICAgICAgICAgIHZhciBUMWkgPSBNQWkgLSBNQ2k7CiAgICAgICAgICAgIHZhciBUMnIgPSBNQnIgKyBNRHI7CiAgICAgICAgICAgIHZhciBUMmkgPSBNQmkgKyBNRGk7CiAgICAgICAgICAgIHZhciBUM3IgPSBpbnYgKiAoTUJyIC0gTURyKTsKICAgICAgICAgICAgdmFyIFQzaSA9IGludiAqIChNQmkgLSBNRGkpOwoKICAgICAgICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgICAgICAgIHZhciBGQXIgPSBUMHIgKyBUMnI7CiAgICAgICAgICAgIHZhciBGQWkgPSBUMGkgKyBUMmk7CgogICAgICAgICAgICB2YXIgRkJyID0gVDFyICsgVDNpOwogICAgICAgICAgICB2YXIgRkJpID0gVDFpIC0gVDNyOwoKICAgICAgICAgICAgb3V0W0FdID0gRkFyOwogICAgICAgICAgICBvdXRbQSArIDFdID0gRkFpOwogICAgICAgICAgICBvdXRbQl0gPSBGQnI7CiAgICAgICAgICAgIG91dFtCICsgMV0gPSBGQmk7CgogICAgICAgICAgICAvLyBPdXRwdXQgZmluYWwgbWlkZGxlIHBvaW50CiAgICAgICAgICAgIGlmIChpID09PSAwKSB7CiAgICAgICAgICAgICAgdmFyIEZDciA9IFQwciAtIFQycjsKICAgICAgICAgICAgICB2YXIgRkNpID0gVDBpIC0gVDJpOwogICAgICAgICAgICAgIG91dFtDXSA9IEZDcjsKICAgICAgICAgICAgICBvdXRbQyArIDFdID0gRkNpOwogICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBEbyBub3Qgb3ZlcndyaXRlIG91cnNlbHZlcwogICAgICAgICAgICBpZiAoaSA9PT0gaHF1YXJ0ZXJMZW4pCiAgICAgICAgICAgICAgY29udGludWU7CgogICAgICAgICAgICAvLyBJbiB0aGUgZmxpcHBlZCBjYXNlOgogICAgICAgICAgICAvLyBNQWkgPSAtTUFpCiAgICAgICAgICAgIC8vIE1Ccj0tTUJpLCBNQmk9LU1CcgogICAgICAgICAgICAvLyBNQ3I9LU1DcgogICAgICAgICAgICAvLyBNRHI9TURpLCBNRGk9TURyCiAgICAgICAgICAgIHZhciBTVDByID0gVDFyOwogICAgICAgICAgICB2YXIgU1QwaSA9IC1UMWk7CiAgICAgICAgICAgIHZhciBTVDFyID0gVDByOwogICAgICAgICAgICB2YXIgU1QxaSA9IC1UMGk7CiAgICAgICAgICAgIHZhciBTVDJyID0gLWludiAqIFQzaTsKICAgICAgICAgICAgdmFyIFNUMmkgPSAtaW52ICogVDNyOwogICAgICAgICAgICB2YXIgU1QzciA9IC1pbnYgKiBUMmk7CiAgICAgICAgICAgIHZhciBTVDNpID0gLWludiAqIFQycjsKCiAgICAgICAgICAgIHZhciBTRkFyID0gU1QwciArIFNUMnI7CiAgICAgICAgICAgIHZhciBTRkFpID0gU1QwaSArIFNUMmk7CgogICAgICAgICAgICB2YXIgU0ZCciA9IFNUMXIgKyBTVDNpOwogICAgICAgICAgICB2YXIgU0ZCaSA9IFNUMWkgLSBTVDNyOwoKICAgICAgICAgICAgdmFyIFNBID0gb3V0T2ZmICsgcXVhcnRlckxlbiAtIGk7CiAgICAgICAgICAgIHZhciBTQiA9IG91dE9mZiArIGhhbGZMZW4gLSBpOwoKICAgICAgICAgICAgb3V0W1NBXSA9IFNGQXI7CiAgICAgICAgICAgIG91dFtTQSArIDFdID0gU0ZBaTsKICAgICAgICAgICAgb3V0W1NCXSA9IFNGQnI7CiAgICAgICAgICAgIG91dFtTQiArIDFdID0gU0ZCaTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH07CgogICAgLy8gcmFkaXgtMiBpbXBsZW1lbnRhdGlvbgogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49NAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTIgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTIob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwoKICAgICAgY29uc3QgZXZlblIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IG9kZFIgPSBkYXRhW29mZiArIHN0ZXBdOwoKICAgICAgY29uc3QgbGVmdFIgPSBldmVuUiArIG9kZFI7CiAgICAgIGNvbnN0IHJpZ2h0UiA9IGV2ZW5SIC0gb2RkUjsKCiAgICAgIG91dFtvdXRPZmZdID0gbGVmdFI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IHJpZ2h0UjsKICAgICAgb3V0W291dE9mZiArIDNdID0gMDsKICAgIH07CgogICAgLy8gcmFkaXgtNAogICAgLy8KICAgIC8vIE5PVEU6IE9ubHkgY2FsbGVkIGZvciBsZW49OAogICAgRkZULnByb3RvdHlwZS5fc2luZ2xlUmVhbFRyYW5zZm9ybTQgPSBmdW5jdGlvbiBfc2luZ2xlUmVhbFRyYW5zZm9ybTQob3V0T2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2ZmLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLl9vdXQ7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9kYXRhOwogICAgICBjb25zdCBpbnYgPSB0aGlzLl9pbnYgPyAtMSA6IDE7CiAgICAgIGNvbnN0IHN0ZXAyID0gc3RlcCAqIDI7CiAgICAgIGNvbnN0IHN0ZXAzID0gc3RlcCAqIDM7CgogICAgICAvLyBPcmlnaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgQXIgPSBkYXRhW29mZl07CiAgICAgIGNvbnN0IEJyID0gZGF0YVtvZmYgKyBzdGVwXTsKICAgICAgY29uc3QgQ3IgPSBkYXRhW29mZiArIHN0ZXAyXTsKICAgICAgY29uc3QgRHIgPSBkYXRhW29mZiArIHN0ZXAzXTsKCiAgICAgIC8vIFByZS1GaW5hbCB2YWx1ZXMKICAgICAgY29uc3QgVDByID0gQXIgKyBDcjsKICAgICAgY29uc3QgVDFyID0gQXIgLSBDcjsKICAgICAgY29uc3QgVDJyID0gQnIgKyBEcjsKICAgICAgY29uc3QgVDNyID0gaW52ICogKEJyIC0gRHIpOwoKICAgICAgLy8gRmluYWwgdmFsdWVzCiAgICAgIGNvbnN0IEZBciA9IFQwciArIFQycjsKCiAgICAgIGNvbnN0IEZCciA9IFQxcjsKICAgICAgY29uc3QgRkJpID0gLVQzcjsKCiAgICAgIGNvbnN0IEZDciA9IFQwciAtIFQycjsKCiAgICAgIGNvbnN0IEZEciA9IFQxcjsKICAgICAgY29uc3QgRkRpID0gVDNyOwoKICAgICAgb3V0W291dE9mZl0gPSBGQXI7CiAgICAgIG91dFtvdXRPZmYgKyAxXSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyAyXSA9IEZCcjsKICAgICAgb3V0W291dE9mZiArIDNdID0gRkJpOwogICAgICBvdXRbb3V0T2ZmICsgNF0gPSBGQ3I7CiAgICAgIG91dFtvdXRPZmYgKyA1XSA9IDA7CiAgICAgIG91dFtvdXRPZmYgKyA2XSA9IEZEcjsKICAgICAgb3V0W291dE9mZiArIDddID0gRkRpOwogICAgfTsKCiAgICB2YXIgRkZUJDEgPSAvKkBfX1BVUkVfXyovZ2V0RGVmYXVsdEV4cG9ydEZyb21DanMoZmZ0KTsKCiAgICBjb25zdCBCVUZGRVJFRF9CTE9DS19TSVpFID0gMjA0ODsKICAgIGZ1bmN0aW9uIGdlbkhhbm5XaW5kb3cobGVuZ3RoKSB7CiAgICAgICAgbGV0IHdpbiA9IG5ldyBGbG9hdDMyQXJyYXkobGVuZ3RoKTsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHdpbltpXSA9IDAuNSAqICgxIC0gTWF0aC5jb3MoMiAqIE1hdGguUEkgKiBpIC8gbGVuZ3RoKSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB3aW47CiAgICB9CiAgICBjbGFzcyBQaGFzZVZvY29kZXJQcm9jZXNzb3IgZXh0ZW5kcyBPTEFQcm9jZXNzb3IgewogICAgICAgIGZmdFNpemU7CiAgICAgICAgdGltZUN1cnNvcjsKICAgICAgICBoYW5uV2luZG93OwogICAgICAgIGZmdDsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlcjsKICAgICAgICBmcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQ7CiAgICAgICAgdGltZUNvbXBsZXhCdWZmZXI7CiAgICAgICAgbWFnbml0dWRlczsKICAgICAgICBwZWFrSW5kZXhlczsKICAgICAgICBuYlBlYWtzOwogICAgICAgIHN0YXRpYyBnZXQgcGFyYW1ldGVyRGVzY3JpcHRvcnMoKSB7CiAgICAgICAgICAgIHJldHVybiBbewogICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwaXRjaEZhY3RvcicsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiAxLjAKICAgICAgICAgICAgICAgIH1dOwogICAgICAgIH0KICAgICAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7CiAgICAgICAgICAgIG9wdGlvbnMucHJvY2Vzc29yT3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIGJsb2NrU2l6ZTogQlVGRkVSRURfQkxPQ0tfU0laRSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3VwZXIob3B0aW9ucyk7CiAgICAgICAgICAgIHRoaXMuZmZ0U2l6ZSA9IHRoaXMuYmxvY2tTaXplOwogICAgICAgICAgICB0aGlzLnRpbWVDdXJzb3IgPSAwOwogICAgICAgICAgICB0aGlzLmhhbm5XaW5kb3cgPSBnZW5IYW5uV2luZG93KHRoaXMuYmxvY2tTaXplKTsKICAgICAgICAgICAgLy8gcHJlcGFyZSBGRlQgYW5kIHByZS1hbGxvY2F0ZSBidWZmZXJzCiAgICAgICAgICAgIHRoaXMuZmZ0ID0gbmV3IEZGVCQxKHRoaXMuZmZ0U2l6ZSk7CiAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXIgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQgPSB0aGlzLmZmdC5jcmVhdGVDb21wbGV4QXJyYXkoKTsKICAgICAgICAgICAgdGhpcy50aW1lQ29tcGxleEJ1ZmZlciA9IHRoaXMuZmZ0LmNyZWF0ZUNvbXBsZXhBcnJheSgpOwogICAgICAgICAgICB0aGlzLm1hZ25pdHVkZXMgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuZmZ0U2l6ZSAvIDIgKyAxKTsKICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlcyA9IG5ldyBJbnQzMkFycmF5KHRoaXMubWFnbml0dWRlcy5sZW5ndGgpOwogICAgICAgICAgICB0aGlzLm5iUGVha3MgPSAwOwogICAgICAgIH0KICAgICAgICBwcm9jZXNzT0xBKGlucHV0cywgb3V0cHV0cywgcGFyYW1ldGVycykgewogICAgICAgICAgICAvLyBAdHMtaWdub3JlCiAgICAgICAgICAgIGNvbnN0IHBpdGNoRmFjdG9yID0gcGFyYW1ldGVycy5waXRjaEZhY3RvcltwYXJhbWV0ZXJzLnBpdGNoRmFjdG9yLmxlbmd0aCAtIDFdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubmJJbnB1dHM7IGkrKykgewogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBpbnB1dHNbaV0ubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSBpbnB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdmFyIG91dHB1dCA9IG91dHB1dHNbaV1bal07CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHBseUhhbm5XaW5kb3coaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZmZ0LnJlYWxUcmFuc2Zvcm0odGhpcy5mcmVxQ29tcGxleEJ1ZmZlciwgaW5wdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZU1hZ25pdHVkZXMoKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbmRQZWFrcygpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRQZWFrcyhwaXRjaEZhY3Rvcik7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuY29tcGxldGVTcGVjdHJ1bSh0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuaW52ZXJzZVRyYW5zZm9ybSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZnQuZnJvbUNvbXBsZXhBcnJheSh0aGlzLnRpbWVDb21wbGV4QnVmZmVyLCBvdXRwdXQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlIYW5uV2luZG93KG91dHB1dCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50aW1lQ3Vyc29yICs9IHRoaXMuaG9wU2l6ZTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGFwcGx5SGFubldpbmRvdyhpbnB1dCkgewogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuYmxvY2tTaXplOyBpKyspIHsKICAgICAgICAgICAgICAgIGlucHV0W2ldICo9IHRoaXMuaGFubldpbmRvd1tpXTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBjb21wdXRlTWFnbml0dWRlcygpIHsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGogPSAwOyBpIDwgdGhpcy5tYWduaXR1ZGVzLmxlbmd0aDsgaSsrLCBqICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2pdOwogICAgICAgICAgICAgICAgY29uc3QgaW1hZyA9IHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJbaiArIDFdOwogICAgICAgICAgICAgICAgdGhpcy5tYWduaXR1ZGVzW2ldID0gcmVhbCAqKiAyICsgaW1hZyAqKiAyOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZpbmRQZWFrcygpIHsKICAgICAgICAgICAgdGhpcy5uYlBlYWtzID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDIsIGVuZCA9IHRoaXMubWFnbml0dWRlcy5sZW5ndGggLSAyOyBpIDwgZW5kOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlc1tpXTsKICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hZ25pdHVkZXNbaSAtIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSAtIDJdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDFdID49IG1hZyB8fCB0aGlzLm1hZ25pdHVkZXNbaSArIDJdID49IG1hZykgewogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5wZWFrSW5kZXhlc1t0aGlzLm5iUGVha3MrK10gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHNoaWZ0UGVha3MocGl0Y2hGYWN0b3IpIHsKICAgICAgICAgICAgdGhpcy5mcmVxQ29tcGxleEJ1ZmZlclNoaWZ0ZWQuZmlsbCgwKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm5iUGVha3M7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgcGVha0luZGV4ID0gdGhpcy5wZWFrSW5kZXhlc1tpXTsKICAgICAgICAgICAgICAgIGNvbnN0IHBlYWtJbmRleFNoaWZ0ZWQgPSBNYXRoLnJvdW5kKHBlYWtJbmRleCAqIHBpdGNoRmFjdG9yKTsKICAgICAgICAgICAgICAgIGlmIChwZWFrSW5kZXhTaGlmdGVkID4gdGhpcy5tYWduaXR1ZGVzLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgbGV0IHN0YXJ0SW5kZXggPSAoaSA+IDApID8gcGVha0luZGV4IC0gTWF0aC5mbG9vcigocGVha0luZGV4IC0gdGhpcy5wZWFrSW5kZXhlc1tpIC0gMV0pIC8gMikgOiAwOwogICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gKGkgPCB0aGlzLm5iUGVha3MgLSAxKSA/IHBlYWtJbmRleCArIE1hdGguY2VpbCgodGhpcy5wZWFrSW5kZXhlc1tpICsgMV0gLSBwZWFrSW5kZXgpIC8gMikgOiB0aGlzLmZmdFNpemU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gc3RhcnRJbmRleCAtIHBlYWtJbmRleDsgaiA8IGVuZEluZGV4IC0gcGVha0luZGV4OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBiaW5JbmRleCA9IHBlYWtJbmRleCArIGo7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYmluSW5kZXhTaGlmdGVkID0gcGVha0luZGV4U2hpZnRlZCArIGo7CiAgICAgICAgICAgICAgICAgICAgaWYgKGJpbkluZGV4U2hpZnRlZCA+PSB0aGlzLm1hZ25pdHVkZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBvbWVnYURlbHRhID0gMiAqIE1hdGguUEkgKiAoYmluSW5kZXhTaGlmdGVkIC0gYmluSW5kZXgpIC8gdGhpcy5mZnRTaXplOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHBoYXNlU2hpZnRSZWFsID0gTWF0aC5jb3Mob21lZ2FEZWx0YSAqIHRoaXMudGltZUN1cnNvcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGhhc2VTaGlmdEltYWcgPSBNYXRoLnNpbihvbWVnYURlbHRhICogdGhpcy50aW1lQ3Vyc29yKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBpbmRleFJlYWwgPSBiaW5JbmRleCAqIDI7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgaW5kZXhJbWFnID0gaW5kZXhSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZVJlYWwgPSB0aGlzLmZyZXFDb21wbGV4QnVmZmVyW2luZGV4UmVhbF07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWVJbWFnID0gdGhpcy5mcmVxQ29tcGxleEJ1ZmZlcltpbmRleEltYWddOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZFJlYWwgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0UmVhbCAtIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRJbWFnOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlU2hpZnRlZEltYWcgPSB2YWx1ZVJlYWwgKiBwaGFzZVNoaWZ0SW1hZyArIHZhbHVlSW1hZyAqIHBoYXNlU2hpZnRSZWFsOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZFJlYWwgPSBiaW5JbmRleFNoaWZ0ZWQgKiAyOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IGluZGV4U2hpZnRlZEltYWcgPSBpbmRleFNoaWZ0ZWRSZWFsICsgMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyZXFDb21wbGV4QnVmZmVyU2hpZnRlZFtpbmRleFNoaWZ0ZWRSZWFsXSArPSB2YWx1ZVNoaWZ0ZWRSZWFsOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZnJlcUNvbXBsZXhCdWZmZXJTaGlmdGVkW2luZGV4U2hpZnRlZEltYWddICs9IHZhbHVlU2hpZnRlZEltYWc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICAvLyBAdHMtaWdub3JlCiAgICByZWdpc3RlclByb2Nlc3NvcigicGhhc2Utdm9jb2RlciIsIFBoYXNlVm9jb2RlclByb2Nlc3Nvcik7CiAgICBjb25zb2xlLmxvZygiUGhhc2VWb2NvZGVyUHJvY2Vzc29yIHJlZ2lzdGVyZWQiKTsKCiAgICBleHBvcnRzLlBoYXNlVm9jb2RlclByb2Nlc3NvciA9IFBoYXNlVm9jb2RlclByb2Nlc3NvcjsKCiAgICByZXR1cm4gZXhwb3J0czsKCn0pKHt9KTsK";class OS{constructor(e){V(this,"maxSize");V(this,"cache");this.maxSize=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}has(e){return this.cache.has(e)}}const PU=100;class Zf{static async openCache(){try{return await caches.open("audio-cache")}catch(e){throw console.error("Failed to open cache:",e),e}}static async getBufferFromCache(e,n){try{const r=await n.match(e);return r&&r.ok?await r.arrayBuffer():null}catch(r){return console.error("Failed to get data from cache:",r),null}}static async fetchAndCacheBuffer(e,n,r,i){try{const o=new Headers;r&&o.append("If-None-Match",r),i&&o.append("If-Modified-Since",i);const s=await fetch(e,{headers:o}),a=s.clone();if(s.status===200){const c=s.headers.get("ETag")||void 0,l=s.headers.get("Last-Modified")||void 0,u={url:e,etag:c,lastModified:l};await n.put(e,a),await n.put(e+":meta",new Response(JSON.stringify(u),{headers:{"Content-Type":"application/json"}}))}else if(s.status===304){const c=await n.match(e);if(c)return await c.arrayBuffer()}return await s.arrayBuffer()}catch(o){throw console.error("Failed to fetch and cache data:",o),o}}static async decodeAudioData(e,n){try{return await e.decodeAudioData(n)}catch(r){throw console.error("Failed to decode audio data:",r),r}}static async getMetadataFromCache(e,n){try{const r=await n.match(e+":meta");return r&&r.ok?await r.json():null}catch(r){return console.error("Failed to get metadata from cache:",r),null}}static async getAudioBuffer(e,n){if(this.decodedBuffers.has(n))return this.decodedBuffers.get(n);if(n.startsWith("data:")){const l=n.split(",")[1],u=Uint8Array.from(atob(l),h=>h.charCodeAt(0)).buffer,d=await this.decodeAudioData(e,u);return this.decodedBuffers.set(n,d),d}const r=await this.openCache();let i=this.pendingRequests.get(n);if(i)return i;const o=await this.getBufferFromCache(n,r);if(o){const l=await this.decodeAudioData(e,o);return this.decodedBuffers.set(n,l),l}const s=await this.getMetadataFromCache(n,r),a=s==null?void 0:s.etag,c=s==null?void 0:s.lastModified;return i=this.fetchAndCacheBuffer(n,r,a,c).then(l=>this.decodeAudioData(e,l)).then(l=>(this.decodedBuffers.set(n,l),l)).finally(()=>{this.pendingRequests.delete(n)}),this.pendingRequests.set(n,i),i}static clearMemoryCache(){this.decodedBuffers=new OS(PU),this.pendingRequests.clear()}}V(Zf,"pendingRequests",new Map),V(Zf,"decodedBuffers",new OS(100));class MS{constructor(e=[]){V(this,"_position",[0,0,0]);V(this,"loopCount",0);V(this,"playIndex",0);this.sounds=e}playRandom(){if(this.sounds.length===0)throw new Error("Cannot play a random sound from an empty group");const e=Math.floor(Math.random()*this.sounds.length),n=this.sounds[e].preplay();return n.forEach(r=>r.play()),n[0]}playOrdered(e=!0){if(this.sounds.length===0)throw new Error("Cannot play an ordered sound from an empty group");const n=this.sounds[this.playIndex].preplay();return n.forEach(r=>r.play()),this.playIndex++,this.playIndex>=this.sounds.length&&(e?this.playIndex=0:this.playIndex=this.sounds.length),n[0]}get duration(){return this.sounds.map(e=>e.duration).reduce((e,n)=>Math.max(e,n),0)}seek(e){this.sounds.forEach(n=>n.seek&&n.seek(e))}addSound(e){this.sounds.push(e)}preplay(){return this.sounds.reduce((e,n)=>(n.loop&&n.loop(this.loopCount),e.concat(n.preplay())),[])}play(){return this.preplay().map(e=>e.play()[0])}get isPlaying(){return this.sounds.some(e=>e.isPlaying)}stop(){this.sounds.forEach(e=>e.stop())}pause(){this.sounds.forEach(e=>e.pause())}loop(e){return e===void 0?this.loopCount:(this.loopCount=e,this.sounds.forEach(n=>n.loop(e)),this.loopCount)}addFilter(e){this.sounds.forEach(n=>n.addFilter(e))}removeFilter(e){this.sounds.forEach(n=>n.removeFilter(e))}set position(e){this._position=e,this.sounds.forEach(n=>n.position=this._position)}get position(){return this._position}get volume(){return this.sounds.map(e=>e.volume).reduce((e,n)=>e+n,0)/this.sounds.length}set volume(e){this.sounds.forEach(n=>n.volume=e)}get playbackRate(){return this.sounds.length===0?1:this.sounds[0].playbackRate}set playbackRate(e){this.sounds.forEach(n=>n.playbackRate=e)}}class Sl{constructor(){V(this,"_filters",[])}addFilter(e){this._filters.push(e)}removeFilter(e){this._filters=this._filters.filter(n=>n.frequency.value!==e.frequency.value&&n.type!==e.type&&n.Q.value!==e.Q.value&&n.gain.value!==e.gain.value)}applyFilters(e){return this._filters.reduce((n,r)=>(n.connect(r),r),e),this._filters.length>0?this._filters[this._filters.length-1]:e}get filters(){return this._filters}addFilters(e){e.forEach(n=>this.addFilter(n))}removeFilters(e){e.forEach(n=>this.removeFilter(n))}}let RU=class extends Sl{constructor(n,r,i,o=0){super();V(this,"context");V(this,"source");V(this,"gainNode");V(this,"panner");this.source=n,this.gainNode=r,this.context=i,this.panner=i.createPanner(),n.connect(this.panner).connect(this.gainNode),this.refreshFilters()}get duration(){return 0}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");return[this]}get isPlaying(){return!!this.source}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(n){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=n}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.stop())}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!1)}resume(){if(!this.source)throw new Error("Cannot resume a sound that has been cleaned up");this.source.mediaStream.getTracks().forEach(n=>n.enabled=!0)}addFilter(n){super.addFilter(n),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}set position(n){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");const[r,i,o]=n;this.panner.positionX.value=r,this.panner.positionY.value=i,this.panner.positionZ.value=o}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");return[this.panner.positionX.value,this.panner.positionY.value,this.panner.positionZ.value]}refreshFilters(){if(!this.source||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.source;this.source.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}get playbackRate(){return 1}set playbackRate(n){}},NU=class extends Sl{constructor(n){super();V(this,"context");V(this,"_position",[0,0,0]);V(this,"loopCount",0);V(this,"prevVolume",1);V(this,"microphoneGainNode");V(this,"streamPlayback");V(this,"stream");V(this,"streamSource");this.context=n,this.microphoneGainNode=this.context.createGain()}play(){return this.stream||navigator.mediaDevices.getUserMedia({audio:!0}).then(n=>{this.stream=n,this.streamSource=this.context.createMediaStreamSource(this.stream),this.streamPlayback=new RU(this.streamSource,this.microphoneGainNode,this.context),this.streamPlayback.play()}).catch(n=>{console.error("Error initializing microphone stream:",n)}),this.streamPlayback?[this.streamPlayback]:[]}get duration(){return 0}seek(n){}get isPlaying(){return!!this.streamPlayback}stop(){this.streamPlayback&&(this.streamPlayback.stop(),this.streamPlayback=void 0)}pause(){this.streamPlayback&&this.streamPlayback.pause()}resume(){this.streamPlayback&&this.streamPlayback.resume()}addFilter(n){this.streamPlayback&&this.streamPlayback.addFilter(n)}removeFilter(n){this.streamPlayback&&this.streamPlayback.removeFilter(n)}get volume(){return this.streamPlayback?this.streamPlayback.volume:0}set volume(n){this.streamPlayback&&(this.streamPlayback.volume=n)}get position(){return[0,0,0]}set position(n){}loop(n){return 0}get playbackRate(){return 1}set playbackRate(n){}};function DT(t){class e extends t{constructor(){super(...arguments);V(this,"playbacks",[]);V(this,"_position",[0,0,0]);V(this,"_stereoPan",0);V(this,"_threeDOptions",{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",panningModel:"HRTF",refDistance:1,rolloffFactor:1,positionX:0,positionY:0,positionZ:0,orientationX:0,orientationY:0,orientationZ:0});V(this,"_volume",1)}play(){const i=this.preplay();return i.forEach(o=>o.play()),i}stop(){this.playbacks.forEach(i=>i.stop()),this.playbacks=[]}pause(){this.playbacks.forEach(i=>i.pause())}addFilter(i){super.addFilter(i),this.playbacks.forEach(o=>o.addFilter(i))}removeFilter(i){super.removeFilter(i),this.playbacks.forEach(o=>o.removeFilter(i))}get isPlaying(){return this.playbacks.some(i=>i.isPlaying)}get position(){return[this._threeDOptions.positionX,this._threeDOptions.positionY,this._threeDOptions.positionZ]}set position(i){this._threeDOptions.positionX=i[0],this._threeDOptions.positionY=i[1],this._threeDOptions.positionZ=i[2],this.playbacks.forEach(o=>o.position=i)}get threeDOptions(){return this._threeDOptions}set threeDOptions(i){this._threeDOptions={...this._threeDOptions,...i},this.playbacks.forEach(o=>o.threeDOptions=this._threeDOptions)}get stereoPan(){return this._stereoPan}set stereoPan(i){this._stereoPan=i,this.playbacks.forEach(o=>o.stereoPan=i)}get volume(){return this._volume}set volume(i){this._volume=i,this.playbacks.forEach(o=>o.volume=i)}}return e}function LT(t){class e extends t{constructor(){super(...arguments);V(this,"panner");V(this,"_panType","stereo")}get panType(){return this._panType}setPanType(i,o){this._panType=i,i==="stereo"?this.panner=o.createStereoPanner():this.panner=o.createPanner()}setPannerNode(i){this.panner=i}get stereoPan(){return this.panType==="stereo"?this.panner.pan.value:null}set stereoPan(i){if(this.panType!=="stereo")throw new Error("Stereo panning is not available when using HRTF.");if(!this.panner)throw new Error("Cannot set stereo pan of a sound that has been cleaned up");i=DS(i,-1,1),this.panner.pan.setValueAtTime(DS(i,-1,1),this.panner.context.currentTime)}get threeDOptions(){if(!this.panner)throw new Error("Cannot get 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get 3D options of a sound that is not using HRTF");const i=this.panner;return{coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,channelCount:this.panner.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,panningModel:i.panningModel,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,positionX:i.positionX.value,positionY:i.positionY.value,positionZ:i.positionZ.value,orientationX:i.orientationX.value,orientationY:i.orientationY.value,orientationZ:i.orientationZ.value}}set threeDOptions(i){if(!this.panner)throw new Error("Cannot set 3D options of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot set 3D options of a sound that is not using HRTF");const o=this.panner;o.coneInnerAngle=i.coneInnerAngle!==void 0?i.coneInnerAngle:o.coneInnerAngle,o.coneOuterAngle=i.coneOuterAngle!==void 0?i.coneOuterAngle:o.coneOuterAngle,o.coneOuterGain=i.coneOuterGain!==void 0?i.coneOuterGain:o.coneOuterGain,o.distanceModel=i.distanceModel||o.distanceModel,o.maxDistance=i.maxDistance!==void 0?i.maxDistance:o.maxDistance,o.channelCount=i.channelCount!==void 0?i.channelCount:o.channelCount,o.channelCountMode=i.channelCountMode||o.channelCountMode,o.channelInterpretation=i.channelInterpretation||o.channelInterpretation,o.panningModel=i.panningModel||o.panningModel,o.refDistance=i.refDistance!==void 0?i.refDistance:o.refDistance,o.rolloffFactor=i.rolloffFactor!==void 0?i.rolloffFactor:o.rolloffFactor,o.positionX.value=i.positionX!==void 0?i.positionX:o.positionX.value,o.positionY.value=i.positionY!==void 0?i.positionY:o.positionY.value,o.positionZ.value=i.positionZ!==void 0?i.positionZ:o.positionZ.value,o.orientationX.value=i.orientationX!==void 0?i.orientationX:o.orientationX.value,o.orientationY.value=i.orientationY!==void 0?i.orientationY:o.orientationY.value,o.orientationZ.value=i.orientationZ!==void 0?i.orientationZ:o.orientationZ.value}set position(i){if(!this.panner)throw new Error("Cannot move a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot move a sound that is not using HRTF");const[o,s,a]=i,c=this.panner;c.positionX.value=o,c.positionY.value=s,c.positionZ.value=a}get position(){if(!this.panner)throw new Error("Cannot get position of a sound that has been cleaned up");if(this.panType!=="HRTF")throw new Error("Cannot get position of a sound that is not using HRTF");const i=this.panner;return[i.positionX.value,i.positionY.value,i.positionZ.value]}}return e}function DS(t,e,n){return Math.min(Math.max(t,e),n)}function BT(t){class e extends t{constructor(){super(...arguments);V(this,"gainNode")}setGainNode(i){this.gainNode=i}get volume(){if(!this.gainNode)throw new Error("Cannot get volume of a sound that has been cleaned up");return this.gainNode.gain.value}set volume(i){if(!this.gainNode)throw new Error("Cannot set volume of a sound that has been cleaned up");this.gainNode.gain.value=i}}return e}class FT extends LT(BT(Sl)){constructor(){super(...arguments);V(this,"source");V(this,"_playing",!1)}get isPlaying(){return this.source?this._playing:!1}}class qy extends FT{constructor(n,r,i,o=0,s="HRTF"){super();V(this,"context");V(this,"loopCount",0);V(this,"currentLoop",0);V(this,"buffer");V(this,"pauseTime",0);V(this,"startTime",0);V(this,"handleLoop",()=>{this.source&&(this.currentLoop++,this.loopCount!=="infinite"&&this.currentLoop>this.loopCount&&(this._playing=!1,this.stop()),this.loopCount==="infinite"||this.currentLoop<this.loopCount?this.buffer?(this.recreateSource(),this._playing&&(this.source.start(0),this._playing=!0)):this._playing&&this.seek(0):this._playing=!1)});if(this.loopCount=o,this.setPanType(s,i),this.source=n,"buffer"in n&&n.buffer&&(this.buffer=n.buffer),"mediaElement"in n&&n.mediaElement)n.mediaElement.onended=this.handleLoop;else if("onended"in n)n.onended=this.handleLoop;else throw new Error("Unsupported source type");this.context=i,this.source.connect(this.panner),this.setGainNode(r),this.panner.connect(this.gainNode),this.refreshFilters()}get duration(){if(!this.buffer)throw new Error("Cannot get duration of a sound that has been cleaned up");return this.buffer.duration}get playbackRate(){if(!this.source)throw new Error("Cannot get playback rate of a sound that has been cleaned up");if("playbackRate"in this.source)return this.source.playbackRate.value;if("mediaElement"in this.source&&this.source.mediaElement)return this.source.mediaElement.playbackRate;throw new Error("Unsupported source type")}set playbackRate(n){if(!this.source)throw new Error("Cannot set playback rate of a sound that has been cleaned up");"playbackRate"in this.source&&(this.source.playbackRate.value=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.playbackRate=n)}recreateSource(){if(!this.buffer||!this.source||!this.panner||!this.context||!this.gainNode)throw new Error("Cannot recreate source of a sound that has been cleaned up");this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.panner),this.source.onended=this.handleLoop}play(){if(!this.source)throw new Error("Cannot play a sound that has been cleaned up");if("mediaElement"in this.source&&this.source.mediaElement)this.source.mediaElement.play();else if("start"in this.source&&this.source.start){const n=this.pauseTime?this.pauseTime:0;this.source.start(0,n)}return this._playing=!0,[this]}pause(){if(!this.source)throw new Error("Cannot pause a sound that has been cleaned up");"mediaElement"in this.source&&this.source.mediaElement?this.source.mediaElement.pause():"stop"in this.source&&this.source.stop&&(this.pauseTime=this.context.currentTime-this.startTime,this.source.stop()),this._playing=!1}seek(n){if(!this.source||!this.gainNode||!this.panner)throw new Error("Cannot seek a sound that has been cleaned up");const r=this.isPlaying;if(this.stop(),"mediaElement"in this.source&&this.source.mediaElement)this.source.mediaElement.currentTime=n,r&&this.source.mediaElement.play();else if(this.buffer)this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.onended=this.handleLoop,this.refreshFilters(),this.source.connect(this.panner),r&&this.source.start(0,n);else throw new Error("Unsupported source type for seeking")}set sourceLoop(n){if(!this.source)throw new Error("Cannot set loop on a sound that has been cleaned up");"loop"in this.source&&(this.source.loop=n),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.loop=n)}cleanup(){this.source&&(this.source.disconnect(),this.source=void 0),this.gainNode&&(this.gainNode.disconnect(),this.gainNode=void 0),this._filters.forEach(n=>{n&&n.disconnect()}),this._filters=[]}loop(n){var r;if(!this.source)throw new Error("Cannot loop a sound that has been cleaned up");if("mediaElement"in this.source&&this.source.mediaElement){const i=this.source.mediaElement;return n===void 0||(i.loop=!0),i.loop===!0?"infinite":0}else if("loop"in this.source)return n===void 0?this.source.loop===!0?"infinite":0:(this.source.loop=!0,this.source.loopEnd=((r=this.source.buffer)==null?void 0:r.duration)||0,this.source.loopStart=0,this.source.loop===!0?"infinite":0);throw new Error("Unsupported source type")}stop(){if(!this.source)throw new Error("Cannot stop a sound that has been cleaned up");if(this.isPlaying){try{"stop"in this.source&&this.source.stop(),"mediaElement"in this.source&&this.source.mediaElement&&(this.source.mediaElement.pause(),this.source.mediaElement.currentTime=0)}catch{}this._playing=!1,this.startTime=0,this.pauseTime=0}}addFilter(n){const r=n.context.createBiquadFilter();r.type=n.type,r.frequency.value=n.frequency.value,r.Q.value=n.Q.value,super.addFilter(r),this.refreshFilters()}removeFilter(n){super.removeFilter(n),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let n=this.panner;n.disconnect(),n=this.applyFilters(n),n.connect(this.gainNode)}clone(n={}){if(!this.source||!this.gainNode||!this.context)throw new Error("Cannot clone a sound that has been cleaned up");const r=n.panType||this.panType,i=this.context.createGain();let o;if("buffer"in this.source&&this.source.buffer)o=this.context.createBufferSource(),o.buffer=this.source.buffer;else if("mediaElement"in this.source&&this.source.mediaElement)o=this.context.createMediaElementSource(this.source.mediaElement);else throw new Error("Unsupported source type");const s=n.loopCount!==void 0?n.loopCount:this.loopCount;return new qy(o,i,this.context,s,r)}}let lh=class UT extends DT(Sl){constructor(n,r,i,o,s=qu.Buffer,a="HRTF"){super();V(this,"buffer");V(this,"context");V(this,"loopCount",0);V(this,"_playbackRate",1);this.url=n,this.globalGainNode=o,this.soundType=s,this.panType=a,this.buffer=r,this.context=i}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan,o=n.threeDOptions||this.threeDOptions,s=n.loopCount!==void 0?n.loopCount:this.loopCount,a=n.playbackRate||this.playbackRate,c=n.volume!==void 0?n.volume:this.volume,l=n.position&&n.position.length?n.position:this.position,u=n.filters&&n.filters.length?n.filters:this._filters,d=new UT(this.url,this.buffer,this.context,this.globalGainNode,this.soundType,r);return d.loopCount=s,d._playbackRate=a,d._volume=c,d._position=l,d._stereoPan=i,d._threeDOptions=o,d.addFilters(u),d}preplay(){let n;if(this.buffer)n=this.context.createBufferSource(),n.buffer=this.buffer;else{const o=new Audio;o.crossOrigin="anonymous",o.src=this.url,o.preload="auto",n=this.context.createMediaElementSource(o)}const r=this.context.createGain();r.connect(this.globalGainNode);const i=new qy(n,r,this.context,this.loopCount,this.panType);return i.setGainNode(r),i.volume=this.volume,i.playbackRate=this.playbackRate,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}seek(n){this.playbacks.forEach(r=>r.seek(n))}get duration(){var n;return((n=this.buffer)==null?void 0:n.duration)||0}loop(n){return n===void 0?this.loopCount:(this.loopCount=n,this.playbacks.forEach(r=>r.loop(n)),this.loopCount)}get playbackRate(){return this._playbackRate}set playbackRate(n){this._playbackRate=n,this.playbacks.forEach(r=>r.playbackRate=n)}};const _U=(t,e)=>{var n=new Uint8Array(t.byteLength+e.byteLength);return n.set(new Uint8Array(t),0),n.set(new Uint8Array(e),t.byteLength),n.buffer};function OU(t,e){const n=[];let r=0;fetch(t).then(function(o){if(!o.ok)throw new Error("HTTP error, status = "+o.status);if(!o.body)throw new Error("Missing body");var s=o.body.getReader();let a=new ArrayBuffer(0);function c(){return s.read().then(({value:l,done:u})=>{let d=null;if(l){if(a.byteLength?d=_U(a,l.buffer):(a=l.buffer.slice(0,44),d=l.buffer),e.decodeAudioData(d,function(h){n.push(h),n.length&&i()},function(h){console.log("err(decodeAudioData): "+h)}),u){console.log("done");return}c()}})}c()});function i(){for(;n.length;){let o=n.shift();const s=e.createBufferSource();if(!o)return;s.buffer=o,s.connect(e.destination),r==0&&(r=e.currentTime+.02),s.start(r),r+=s.buffer.duration}}}function MU(t){class e extends FT{constructor(){super(...arguments);V(this,"_oscillatorOptions",{})}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(i){this._oscillatorOptions=i,this.source&&this.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type))}play(){if(!this.source)throw new Error("No source node found");return this.oscillatorOptions.detune&&(this.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(this.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(this.source.type=this.oscillatorOptions.type),this.source.start(),this._playing=!0,[this]}stop(){this.source&&this.source.stop&&(this.source.stop(),this._playing=!1)}pause(){this.stop()}get frequency(){return this.source.frequency.value}set frequency(i){this.source.frequency.value=i,this.oscillatorOptions.frequency=i}get detune(){return this.source.detune.value}set detune(i){this.source.detune.value=i,this.oscillatorOptions.detune=i}get type(){return this.source.type}set type(i){this.source.type=i,this.oscillatorOptions.type=i}}return e}class DU extends MU(LT(BT(Sl))){constructor(e,n,r,i="HRTF"){super(),this.source=e,this.context=r,this.setPanType(i,r),this.source.connect(this.panner),this.setGainNode(n),this.panner.connect(this.gainNode),this.refreshFilters()}refreshFilters(){if(!this.panner||!this.gainNode)throw new Error("Cannot update filters on a sound that has been cleaned up");let e=this.panner;e.disconnect(),e=this.applyFilters(e),e.connect(this.gainNode)}}class eC extends DT(Sl){constructor(n,r,i=qu.Oscillator,o="HRTF",s={}){super();V(this,"_oscillatorOptions");V(this,"playbacks",[]);this.context=n,this.globalGainNode=r,this.soundType=i,this.panType=o,this.context=n,this._oscillatorOptions=s}clone(n={}){const r=n.panType||this.panType,i=n.stereoPan!==void 0?n.stereoPan:this.stereoPan??0,o=n.threeDOptions||this.threeDOptions,s=n.volume!==void 0?n.volume:this.volume,a=n.position&&n.position.length?n.position:this.position,c=n.filters&&n.filters.length?n.filters:this._filters,l=n.oscillatorOptions||this._oscillatorOptions,u=new eC(this.context,this.globalGainNode,this.soundType,r,l);return u._volume=s,u._position=a,u._stereoPan=i,u._threeDOptions=o,u.addFilters(c),u}preplay(){const n=this.context.createOscillator();this.oscillatorOptions.detune&&(n.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(n.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(n.type=this.oscillatorOptions.type);const r=this.context.createGain();r.connect(this.globalGainNode);const i=new DU(n,r,this.context,this.panType);return i.volume=this.volume,this._filters.forEach(o=>i.addFilter(o)),this.panType==="HRTF"?(i.threeDOptions=this.threeDOptions,i.position=this.position):this.panType==="stereo"&&(i.stereoPan=this.stereoPan),this.playbacks.push(i),[i]}get oscillatorOptions(){return this._oscillatorOptions}set oscillatorOptions(n){this._oscillatorOptions=n,this.playbacks.forEach(r=>{r.source instanceof OscillatorNode&&(this.oscillatorOptions.detune&&(r.source.detune.value=this.oscillatorOptions.detune),this.oscillatorOptions.frequency&&(r.source.frequency.value=this.oscillatorOptions.frequency),this.oscillatorOptions.type&&(r.source.type=this.oscillatorOptions.type))})}get frequency(){return this.oscillatorOptions.frequency||440}set frequency(n){this._oscillatorOptions.frequency=n,this.playbacks.forEach(r=>r.frequency=n)}get detune(){return this.oscillatorOptions.detune}set detune(n){this._oscillatorOptions.detune=n,this.playbacks.forEach(r=>r.detune=n)}get type(){return this.oscillatorOptions.type||"sine"}set type(n){this._oscillatorOptions.type=n,this.playbacks.forEach(r=>r.type=n)}}var qu=(t=>(t.HTML="HTML",t.Streaming="Streaming",t.Buffer="Buffer",t.Oscillator="oscillator",t))(qu||{});class LU{constructor(e){V(this,"context");V(this,"globalGainNode");V(this,"listener");V(this,"prevVolume",1);V(this,"finalizationRegistry");V(this,"createBiquadFilter",({type:e,frequency:n,gain:r,Q:i})=>{n===void 0&&(n=350);const o=this.context.createBiquadFilter();return o.type=e||"lowpass",o.frequency.value=n,o.gain.value=r||0,o.Q.value=i||1,o});this.context=e||new CU,this.listener=this.context.listener,this.globalGainNode=this.context.createGain(),this.globalGainNode.connect(this.context.destination),this.finalizationRegistry=new FinalizationRegistry(n=>{n.cleanup()})}async loadWorklets(){this.context.audioWorklet?await this.createWorkletNode("phase-vocoder",xU):console.warn("AudioWorklet not supported")}async createWorkletNode(e,n){if(!this.context.audioWorklet)throw new Error("AudioWorklet not supported");try{return new _S(this.context,e)}catch(r){console.error(r),console.log("Loading worklet from url",n);try{await this.context.audioWorklet.addModule(n)}catch(i){throw console.error(i),new Error(`Could not load worklet from url ${n}`)}return new _S(this.context,e)}}clearMemoryCache(){Zf.clearMemoryCache()}createOscillator(e){return new eC(this.context,this.globalGainNode,"oscillator","HRTF",e)}async createSound(e,n="Buffer",r="HRTF"){if(typeof e=="object")return Promise.resolve(new lh("",e,this.context,this.globalGainNode,"Buffer",r));const i=e;if(n==="HTML"){const o=new Audio;return o.src=i,o.crossOrigin="anonymous",new lh(i,void 0,this.context,this.globalGainNode,"HTML",r)}return Zf.getAudioBuffer(this.context,i).then(o=>new lh(i,o,this.context,this.globalGainNode,n,r))}async createGroup(e){const n=new MS;return e.forEach(r=>n.addSound(r)),n}async createGroupFromUrls(e,n="Buffer",r="HRTF"){const i=new MS;return(await Promise.all(e.map(o=>this.createSound(o,n,r)))).forEach(o=>i.addSound(o)),i}async createStream(e){return await OU(e,this.context),new lh(e,void 0,this.context,this.globalGainNode,"Streaming")}createPanner({coneInnerAngle:e,coneOuterAngle:n,coneOuterGain:r,distanceModel:i,maxDistance:o,channelCount:s,channelCountMode:a,channelInterpretation:c,panningModel:l,refDistance:u,rolloffFactor:d,positionX:h,positionY:f,positionZ:p,orientationX:g,orientationY:C,orientationZ:m}){const v=this.context.createPanner();return v.coneInnerAngle=e||360,v.coneOuterAngle=n||360,v.coneOuterGain=r||0,v.distanceModel=i||"inverse",v.maxDistance=o||1e4,v.channelCount=s||2,v.channelCountMode=a||"clamped-max",v.channelInterpretation=c||"speakers",v.panningModel=l||"HRTF",v.refDistance=u||1,v.rolloffFactor=d||1,v.positionX.value=h||0,v.positionY.value=f||0,v.positionZ.value=p||0,v.orientationX.value=g||0,v.orientationY.value=C||0,v.orientationZ.value=m||0,v}pause(){"suspend"in this.context&&this.context.suspend()}resume(){"resume"in this.context&&this.context.resume()}setGlobalVolume(e){this.globalGainNode.gain.value=e}get volume(){return this.globalGainNode.gain.value}set volume(e){if(this.muted){this.prevVolume=e;return}this.setGlobalVolume(e)}mute(){this.muted||(this.prevVolume=this.globalGainNode.gain.value,this.setGlobalVolume(0))}unmute(){this.muted&&this.setGlobalVolume(this.prevVolume)}get muted(){return this.globalGainNode.gain.value===0}set muted(e){e!==this.muted&&(e?this.mute():this.unmute())}getMicrophoneStream(){return new Promise((e,n)=>{navigator.mediaDevices.getUserMedia({audio:!0}).then(r=>{const i=new NU(this.context);i.play(),e(i)}).catch(r=>{n(r)})})}get listenerOrientation(){return{forward:[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value],up:[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}}set listenerOrientation(e){const{forward:n,up:r}=e,[i,o,s]=n,[a,c,l]=r;this.listener.forwardX.value=i,this.listener.forwardY.value=o,this.listener.forwardZ.value=s,this.listener.upX.value=a,this.listener.upY.value=c,this.listener.upZ.value=l}get listenerUpOrientation(){return[this.listener.upX.value,this.listener.upY.value,this.listener.upZ.value]}set listenerUpOrientation(e){const[n,r,i]=e;this.listener.upX.value=n,this.listener.upY.value=r,this.listener.upZ.value=i}get listenerForwardOrientation(){return[this.listener.forwardX.value,this.listener.forwardY.value,this.listener.forwardZ.value]}set listenerForwardOrientation(e){const[n,r,i]=e;this.listener.forwardX.value=n,this.listener.forwardY.value=r,this.listener.forwardZ.value=i}get listenerPosition(){return[this.listener.positionX.value,this.listener.positionY.value,this.listener.positionZ.value]}set listenerPosition(e){const[n,r,i]=e,o=this.context.currentTime;this.listener.positionX.setValueAtTime(n,o),this.listener.positionY.setValueAtTime(r,o),this.listener.positionZ.setValueAtTime(i,o)}}const BU="https://mongoose.world:9080/?url=";class FU extends is{constructor(){super(...arguments);V(this,"packageName","Client.Media");V(this,"sounds",{});V(this,"defaultUrl","")}handleDefault(n){this.defaultUrl=n}async handleLoad(n){const r=(n.url||this.defaultUrl)+n.name,i=n.url+n.name;if(!this.sounds[i]){let s=await this.client.cacophony.createSound(r);s.key=i,this.sounds[i]=s}}mediaUrl(n){var i;let r=(n.url||this.defaultUrl)+n.name;return((i=n.type)==null?void 0:i.toLowerCase())==="music"&&(r=BU+encodeURIComponent(r)),r}async handlePlay(n){let r=this.mediaUrl(n);n.key=n.key||r;let i=this.sounds[n.key];const o=n.is3d?"HRTF":"stereo";if((!i||i.url!==r)&&(n.type==="music"?i=await this.client.cacophony.createSound(r,qu.HTML,o):i=await this.client.cacophony.createSound(r,qu.Buffer,o)),n.volume!==void 0&&(i.volume=n.volume/100),n.loops!==void 0&&i.loop(n.loops),n.start&&i.seek(n.start),n.end&&setTimeout(()=>{delete this.sounds[i.key],i.stop()},n.end),n.is3d&&(i.threeDOptions={coneInnerAngle:360,coneOuterAngle:0,panningModel:"HRTF",distanceModel:"inverse"},i.position=[n.position[0],n.position[1],n.position[2]]),n.priority){for(let s in this.sounds){const a=this.sounds[s];a.priority&&a.priority<n.priority&&a.stop()}i.priority=n.priority}if(!i.isPlaying){const s=i.play()[0];n.fadein&&s.fadeIn(n.fadein),n.fadeout&&s.fadeOut(n.fadeout)}i.key=n.key,this.sounds[i.key]=i}handleStop(n){n.name&&this.soundsByName(n.name).forEach(r=>this.stopSound(r)),n.type&&this.soundsByType(n.type).forEach(r=>this.stopSound(r)),n.tag&&this.soundsByTag(n.tag).forEach(r=>this.stopSound(r)),n.key&&this.soundsByKey(n.key).forEach(r=>this.stopSound(r)),!n.name&&!n.type&&!n.tag&&!n.key&&(this.allSounds.forEach(r=>r.stop()),this.sounds={})}stopSound(n){delete this.sounds[n.key],n.stop()}handleListenerPosition(n){var r;(r=n.position)!=null&&r.length&&(this.client.cacophony.listenerPosition=n.position)}handleListenerOrientation(n){n.up&&n.up.length&&(this.client.cacophony.listenerUpOrientation=n.up),n.forward&&n.forward.length&&(this.client.cacophony.listenerForwardOrientation=n.forward)}soundsByName(n){return Object.values(this.sounds).filter(r=>r.url&&r.url[r.url.length-1].endsWith(n))}soundsByKey(n){return Object.values(this.sounds).filter(r=>r.key===n)}soundsByTag(n){return Object.values(this.sounds).filter(r=>r.tag===n)}soundsByType(n){return Object.values(this.sounds).filter(r=>r.mediaType===n)}get allSounds(){return Object.values(this.sounds)}stopAllSounds(){this.allSounds.forEach(n=>n.stop()),this.sounds={}}}class UU extends is{constructor(){super(...arguments);V(this,"packageName","Client.Speech")}handleSpeak(n){const r=new SpeechSynthesisUtterance(n.text);r.rate=n.rate,r.pitch=n.pitch,r.volume=n.volume,speechSynthesis.speak(r)}}class VU extends is{constructor(){super(...arguments);V(this,"packageName","Comm.Channel");V(this,"channels",[])}handleList(n){this.channels=n}sendList(){this.sendData("List")}handleText(n){n.channel==="say_to_you"&&(document.hasFocus()||this.client.sendNotification(`Message from ${n.talker}`,`${n.text}`))}}class GU extends is{constructor(){super(...arguments);V(this,"packageName","Comm.LiveKit")}handleroom_token(n){this.client.worldData.liveKitTokens.push(n.token),this.client.emit("livekitToken",n.token)}handleroom_leave(n){this.client.worldData.liveKitTokens=this.client.worldData.liveKitTokens.filter(r=>r!==n.token),this.client.emit("livekitLeave",n.token)}}class WU extends is{constructor(){super(...arguments);V(this,"packageName","Core")}sendHello(){this.sendData("Hello",{client:"Mongoose Client",version:"0.1"})}}class jU extends is{constructor(){super(...arguments);V(this,"packageName","Core.Supports")}sendSet(){const n=Object.values(this.client.gmcpHandlers).map(r=>r.packageName+" "+r.packageVersion.toString());this.sendData("Set",n)}}const ac=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,VT=new Set,xv=typeof process=="object"&&process?process:{},GT=(t,e,n,r)=>{typeof xv.emitWarning=="function"?xv.emitWarning(t,e,n,r):console.error(`[${n}] ${e}: ${t}`)};let zf=globalThis.AbortController,LS=globalThis.AbortSignal;var i1;if(typeof zf>"u"){LS=class{constructor(){V(this,"onabort");V(this,"_onabort",[]);V(this,"reason");V(this,"aborted",!1)}addEventListener(r,i){this._onabort.push(i)}},zf=class{constructor(){V(this,"signal",new LS);e()}abort(r){var i,o;if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(const s of this.signal._onabort)s(r);(o=(i=this.signal).onabort)==null||o.call(i,r)}}};let t=((i1=xv.env)==null?void 0:i1.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const e=()=>{t&&(t=!1,GT("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}const ZU=t=>!VT.has(t),ms=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),WT=t=>ms(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Vh:null:null;class Vh extends Array{constructor(e){super(e),this.fill(0)}}var Zc;const ma=class ma{constructor(e,n){V(this,"heap");V(this,"length");if(!N(ma,Zc))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new n(e),this.length=0}static create(e){const n=WT(e);if(!n)return[];Ae(ma,Zc,!0);const r=new ma(e,n);return Ae(ma,Zc,!1),r}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};Zc=new WeakMap,je(ma,Zc,!1);let Pv=ma;var o1,s1,Yr,hr,Qr,qr,zc,Hc,Zt,ei,Vt,yt,Pe,_n,fr,An,qt,ti,en,ni,ri,pr,ii,ks,On,ce,Nv,Aa,mo,dd,gr,jT,ka,Xc,hd,vs,ys,_v,Gh,Wh,vt,Ov,au,Cs,Mv;const UC=class UC{constructor(e){je(this,ce);je(this,Yr);je(this,hr);je(this,Qr);je(this,qr);je(this,zc);je(this,Hc);V(this,"ttl");V(this,"ttlResolution");V(this,"ttlAutopurge");V(this,"updateAgeOnGet");V(this,"updateAgeOnHas");V(this,"allowStale");V(this,"noDisposeOnSet");V(this,"noUpdateTTL");V(this,"maxEntrySize");V(this,"sizeCalculation");V(this,"noDeleteOnFetchRejection");V(this,"noDeleteOnStaleGet");V(this,"allowStaleOnFetchAbort");V(this,"allowStaleOnFetchRejection");V(this,"ignoreFetchAbort");je(this,Zt);je(this,ei);je(this,Vt);je(this,yt);je(this,Pe);je(this,_n);je(this,fr);je(this,An);je(this,qt);je(this,ti);je(this,en);je(this,ni);je(this,ri);je(this,pr);je(this,ii);je(this,ks);je(this,On);je(this,Aa,()=>{});je(this,mo,()=>{});je(this,dd,()=>{});je(this,gr,()=>!1);je(this,ka,e=>{});je(this,Xc,(e,n,r)=>{});je(this,hd,(e,n,r,i)=>{if(r||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});V(this,o1,"LRUCache");const{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:s,updateAgeOnHas:a,allowStale:c,dispose:l,disposeAfter:u,noDisposeOnSet:d,noUpdateTTL:h,maxSize:f=0,maxEntrySize:p=0,sizeCalculation:g,fetchMethod:C,memoMethod:m,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:b,allowStaleOnFetchRejection:E,allowStaleOnFetchAbort:w,ignoreFetchAbort:A}=e;if(n!==0&&!ms(n))throw new TypeError("max option must be a nonnegative integer");const x=n?WT(n):Array;if(!x)throw new Error("invalid max value: "+n);if(Ae(this,Yr,n),Ae(this,hr,f),this.maxEntrySize=p||N(this,hr),this.sizeCalculation=g,this.sizeCalculation){if(!N(this,hr)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(m!==void 0&&typeof m!="function")throw new TypeError("memoMethod must be a function if defined");if(Ae(this,Hc,m),C!==void 0&&typeof C!="function")throw new TypeError("fetchMethod must be a function if specified");if(Ae(this,zc,C),Ae(this,ks,!!C),Ae(this,Vt,new Map),Ae(this,yt,new Array(n).fill(void 0)),Ae(this,Pe,new Array(n).fill(void 0)),Ae(this,_n,new x(n)),Ae(this,fr,new x(n)),Ae(this,An,0),Ae(this,qt,0),Ae(this,ti,Pv.create(n)),Ae(this,Zt,0),Ae(this,ei,0),typeof l=="function"&&Ae(this,Qr,l),typeof u=="function"?(Ae(this,qr,u),Ae(this,en,[])):(Ae(this,qr,void 0),Ae(this,en,void 0)),Ae(this,ii,!!N(this,Qr)),Ae(this,On,!!N(this,qr)),this.noDisposeOnSet=!!d,this.noUpdateTTL=!!h,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!E,this.allowStaleOnFetchAbort=!!w,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(N(this,hr)!==0&&!ms(N(this,hr)))throw new TypeError("maxSize must be a positive integer if specified");if(!ms(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");ve(this,ce,jT).call(this)}if(this.allowStale=!!c,this.noDeleteOnStaleGet=!!b,this.updateAgeOnGet=!!s,this.updateAgeOnHas=!!a,this.ttlResolution=ms(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||0,this.ttl){if(!ms(this.ttl))throw new TypeError("ttl must be a positive integer if specified");ve(this,ce,Nv).call(this)}if(N(this,Yr)===0&&this.ttl===0&&N(this,hr)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!N(this,Yr)&&!N(this,hr)){const T="LRU_CACHE_UNBOUNDED";ZU(T)&&(VT.add(T),GT("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",T,UC))}}static unsafeExposeInternals(e){return{starts:N(e,ri),ttls:N(e,pr),sizes:N(e,ni),keyMap:N(e,Vt),keyList:N(e,yt),valList:N(e,Pe),next:N(e,_n),prev:N(e,fr),get head(){return N(e,An)},get tail(){return N(e,qt)},free:N(e,ti),isBackgroundFetch:n=>{var r;return ve(r=e,ce,vt).call(r,n)},backgroundFetch:(n,r,i,o)=>{var s;return ve(s=e,ce,Wh).call(s,n,r,i,o)},moveToTail:n=>{var r;return ve(r=e,ce,au).call(r,n)},indexes:n=>{var r;return ve(r=e,ce,vs).call(r,n)},rindexes:n=>{var r;return ve(r=e,ce,ys).call(r,n)},isStale:n=>{var r;return N(r=e,gr).call(r,n)}}}get max(){return N(this,Yr)}get maxSize(){return N(this,hr)}get calculatedSize(){return N(this,ei)}get size(){return N(this,Zt)}get fetchMethod(){return N(this,zc)}get memoMethod(){return N(this,Hc)}get dispose(){return N(this,Qr)}get disposeAfter(){return N(this,qr)}getRemainingTTL(e){return N(this,Vt).has(e)?1/0:0}*entries(){for(const e of ve(this,ce,vs).call(this))N(this,Pe)[e]!==void 0&&N(this,yt)[e]!==void 0&&!ve(this,ce,vt).call(this,N(this,Pe)[e])&&(yield[N(this,yt)[e],N(this,Pe)[e]])}*rentries(){for(const e of ve(this,ce,ys).call(this))N(this,Pe)[e]!==void 0&&N(this,yt)[e]!==void 0&&!ve(this,ce,vt).call(this,N(this,Pe)[e])&&(yield[N(this,yt)[e],N(this,Pe)[e]])}*keys(){for(const e of ve(this,ce,vs).call(this)){const n=N(this,yt)[e];n!==void 0&&!ve(this,ce,vt).call(this,N(this,Pe)[e])&&(yield n)}}*rkeys(){for(const e of ve(this,ce,ys).call(this)){const n=N(this,yt)[e];n!==void 0&&!ve(this,ce,vt).call(this,N(this,Pe)[e])&&(yield n)}}*values(){for(const e of ve(this,ce,vs).call(this))N(this,Pe)[e]!==void 0&&!ve(this,ce,vt).call(this,N(this,Pe)[e])&&(yield N(this,Pe)[e])}*rvalues(){for(const e of ve(this,ce,ys).call(this))N(this,Pe)[e]!==void 0&&!ve(this,ce,vt).call(this,N(this,Pe)[e])&&(yield N(this,Pe)[e])}[(s1=Symbol.iterator,o1=Symbol.toStringTag,s1)](){return this.entries()}find(e,n={}){for(const r of ve(this,ce,vs).call(this)){const i=N(this,Pe)[r],o=ve(this,ce,vt).call(this,i)?i.__staleWhileFetching:i;if(o!==void 0&&e(o,N(this,yt)[r],this))return this.get(N(this,yt)[r],n)}}forEach(e,n=this){for(const r of ve(this,ce,vs).call(this)){const i=N(this,Pe)[r],o=ve(this,ce,vt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,yt)[r],this)}}rforEach(e,n=this){for(const r of ve(this,ce,ys).call(this)){const i=N(this,Pe)[r],o=ve(this,ce,vt).call(this,i)?i.__staleWhileFetching:i;o!==void 0&&e.call(n,o,N(this,yt)[r],this)}}purgeStale(){let e=!1;for(const n of ve(this,ce,ys).call(this,{allowStale:!0}))N(this,gr).call(this,n)&&(ve(this,ce,Cs).call(this,N(this,yt)[n],"expire"),e=!0);return e}info(e){const n=N(this,Vt).get(e);if(n===void 0)return;const r=N(this,Pe)[n],i=ve(this,ce,vt).call(this,r)?r.__staleWhileFetching:r;if(i===void 0)return;const o={value:i};if(N(this,pr)&&N(this,ri)){const s=N(this,pr)[n],a=N(this,ri)[n];if(s&&a){const c=s-(ac.now()-a);o.ttl=c,o.start=Date.now()}}return N(this,ni)&&(o.size=N(this,ni)[n]),o}dump(){const e=[];for(const n of ve(this,ce,vs).call(this,{allowStale:!0})){const r=N(this,yt)[n],i=N(this,Pe)[n],o=ve(this,ce,vt).call(this,i)?i.__staleWhileFetching:i;if(o===void 0||r===void 0)continue;const s={value:o};if(N(this,pr)&&N(this,ri)){s.ttl=N(this,pr)[n];const a=ac.now()-N(this,ri)[n];s.start=Math.floor(Date.now()-a)}N(this,ni)&&(s.size=N(this,ni)[n]),e.unshift([r,s])}return e}load(e){this.clear();for(const[n,r]of e){if(r.start){const i=Date.now()-r.start;r.start=ac.now()-i}this.set(n,r.value,r)}}set(e,n,r={}){var h,f,p,g,C;if(n===void 0)return this.delete(e),this;const{ttl:i=this.ttl,start:o,noDisposeOnSet:s=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:c}=r;let{noUpdateTTL:l=this.noUpdateTTL}=r;const u=N(this,hd).call(this,e,n,r.size||0,a);if(this.maxEntrySize&&u>this.maxEntrySize)return c&&(c.set="miss",c.maxEntrySizeExceeded=!0),ve(this,ce,Cs).call(this,e,"set"),this;let d=N(this,Zt)===0?void 0:N(this,Vt).get(e);if(d===void 0)d=N(this,Zt)===0?N(this,qt):N(this,ti).length!==0?N(this,ti).pop():N(this,Zt)===N(this,Yr)?ve(this,ce,Gh).call(this,!1):N(this,Zt),N(this,yt)[d]=e,N(this,Pe)[d]=n,N(this,Vt).set(e,d),N(this,_n)[N(this,qt)]=d,N(this,fr)[d]=N(this,qt),Ae(this,qt,d),Ud(this,Zt)._++,N(this,Xc).call(this,d,u,c),c&&(c.set="add"),l=!1;else{ve(this,ce,au).call(this,d);const m=N(this,Pe)[d];if(n!==m){if(N(this,ks)&&ve(this,ce,vt).call(this,m)){m.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:v}=m;v!==void 0&&!s&&(N(this,ii)&&((h=N(this,Qr))==null||h.call(this,v,e,"set")),N(this,On)&&((f=N(this,en))==null||f.push([v,e,"set"])))}else s||(N(this,ii)&&((p=N(this,Qr))==null||p.call(this,m,e,"set")),N(this,On)&&((g=N(this,en))==null||g.push([m,e,"set"])));if(N(this,ka).call(this,d),N(this,Xc).call(this,d,u,c),N(this,Pe)[d]=n,c){c.set="replace";const v=m&&ve(this,ce,vt).call(this,m)?m.__staleWhileFetching:m;v!==void 0&&(c.oldValue=v)}}else c&&(c.set="update")}if(i!==0&&!N(this,pr)&&ve(this,ce,Nv).call(this),N(this,pr)&&(l||N(this,dd).call(this,d,i,o),c&&N(this,mo).call(this,c,d)),!s&&N(this,On)&&N(this,en)){const m=N(this,en);let v;for(;v=m==null?void 0:m.shift();)(C=N(this,qr))==null||C.call(this,...v)}return this}pop(){var e;try{for(;N(this,Zt);){const n=N(this,Pe)[N(this,An)];if(ve(this,ce,Gh).call(this,!0),ve(this,ce,vt).call(this,n)){if(n.__staleWhileFetching)return n.__staleWhileFetching}else if(n!==void 0)return n}}finally{if(N(this,On)&&N(this,en)){const n=N(this,en);let r;for(;r=n==null?void 0:n.shift();)(e=N(this,qr))==null||e.call(this,...r)}}}has(e,n={}){const{updateAgeOnHas:r=this.updateAgeOnHas,status:i}=n,o=N(this,Vt).get(e);if(o!==void 0){const s=N(this,Pe)[o];if(ve(this,ce,vt).call(this,s)&&s.__staleWhileFetching===void 0)return!1;if(N(this,gr).call(this,o))i&&(i.has="stale",N(this,mo).call(this,i,o));else return r&&N(this,Aa).call(this,o),i&&(i.has="hit",N(this,mo).call(this,i,o)),!0}else i&&(i.has="miss");return!1}peek(e,n={}){const{allowStale:r=this.allowStale}=n,i=N(this,Vt).get(e);if(i===void 0||!r&&N(this,gr).call(this,i))return;const o=N(this,Pe)[i];return ve(this,ce,vt).call(this,o)?o.__staleWhileFetching:o}async fetch(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:s=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:c=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:h=this.allowStaleOnFetchRejection,ignoreFetchAbort:f=this.ignoreFetchAbort,allowStaleOnFetchAbort:p=this.allowStaleOnFetchAbort,context:g,forceRefresh:C=!1,status:m,signal:v}=n;if(!N(this,ks))return m&&(m.fetch="get"),this.get(e,{allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,status:m});const b={allowStale:r,updateAgeOnGet:i,noDeleteOnStaleGet:o,ttl:s,noDisposeOnSet:a,size:c,sizeCalculation:l,noUpdateTTL:u,noDeleteOnFetchRejection:d,allowStaleOnFetchRejection:h,allowStaleOnFetchAbort:p,ignoreFetchAbort:f,status:m,signal:v};let E=N(this,Vt).get(e);if(E===void 0){m&&(m.fetch="miss");const w=ve(this,ce,Wh).call(this,e,E,b,g);return w.__returned=w}else{const w=N(this,Pe)[E];if(ve(this,ce,vt).call(this,w)){const O=r&&w.__staleWhileFetching!==void 0;return m&&(m.fetch="inflight",O&&(m.returnedStale=!0)),O?w.__staleWhileFetching:w.__returned=w}const A=N(this,gr).call(this,E);if(!C&&!A)return m&&(m.fetch="hit"),ve(this,ce,au).call(this,E),i&&N(this,Aa).call(this,E),m&&N(this,mo).call(this,m,E),w;const x=ve(this,ce,Wh).call(this,e,E,b,g),_=x.__staleWhileFetching!==void 0&&r;return m&&(m.fetch=A?"stale":"refresh",_&&A&&(m.returnedStale=!0)),_?x.__staleWhileFetching:x.__returned=x}}async forceFetch(e,n={}){const r=await this.fetch(e,n);if(r===void 0)throw new Error("fetch() returned undefined");return r}memo(e,n={}){const r=N(this,Hc);if(!r)throw new Error("no memoMethod provided to constructor");const{context:i,forceRefresh:o,...s}=n,a=this.get(e,s);if(!o&&a!==void 0)return a;const c=r(e,a,{options:s,context:i});return this.set(e,c,s),c}get(e,n={}){const{allowStale:r=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:s}=n,a=N(this,Vt).get(e);if(a!==void 0){const c=N(this,Pe)[a],l=ve(this,ce,vt).call(this,c);return s&&N(this,mo).call(this,s,a),N(this,gr).call(this,a)?(s&&(s.get="stale"),l?(s&&r&&c.__staleWhileFetching!==void 0&&(s.returnedStale=!0),r?c.__staleWhileFetching:void 0):(o||ve(this,ce,Cs).call(this,e,"expire"),s&&r&&(s.returnedStale=!0),r?c:void 0)):(s&&(s.get="hit"),l?c.__staleWhileFetching:(ve(this,ce,au).call(this,a),i&&N(this,Aa).call(this,a),c))}else s&&(s.get="miss")}delete(e){return ve(this,ce,Cs).call(this,e,"delete")}clear(){return ve(this,ce,Mv).call(this,"delete")}};Yr=new WeakMap,hr=new WeakMap,Qr=new WeakMap,qr=new WeakMap,zc=new WeakMap,Hc=new WeakMap,Zt=new WeakMap,ei=new WeakMap,Vt=new WeakMap,yt=new WeakMap,Pe=new WeakMap,_n=new WeakMap,fr=new WeakMap,An=new WeakMap,qt=new WeakMap,ti=new WeakMap,en=new WeakMap,ni=new WeakMap,ri=new WeakMap,pr=new WeakMap,ii=new WeakMap,ks=new WeakMap,On=new WeakMap,ce=new WeakSet,Nv=function(){const e=new Vh(N(this,Yr)),n=new Vh(N(this,Yr));Ae(this,pr,e),Ae(this,ri,n),Ae(this,dd,(o,s,a=ac.now())=>{if(n[o]=s!==0?a:0,e[o]=s,s!==0&&this.ttlAutopurge){const c=setTimeout(()=>{N(this,gr).call(this,o)&&ve(this,ce,Cs).call(this,N(this,yt)[o],"expire")},s+1);c.unref&&c.unref()}}),Ae(this,Aa,o=>{n[o]=e[o]!==0?ac.now():0}),Ae(this,mo,(o,s)=>{if(e[s]){const a=e[s],c=n[s];if(!a||!c)return;o.ttl=a,o.start=c,o.now=r||i();const l=o.now-c;o.remainingTTL=a-l}});let r=0;const i=()=>{const o=ac.now();if(this.ttlResolution>0){r=o;const s=setTimeout(()=>r=0,this.ttlResolution);s.unref&&s.unref()}return o};this.getRemainingTTL=o=>{const s=N(this,Vt).get(o);if(s===void 0)return 0;const a=e[s],c=n[s];if(!a||!c)return 1/0;const l=(r||i())-c;return a-l},Ae(this,gr,o=>{const s=n[o],a=e[o];return!!a&&!!s&&(r||i())-s>a})},Aa=new WeakMap,mo=new WeakMap,dd=new WeakMap,gr=new WeakMap,jT=function(){const e=new Vh(N(this,Yr));Ae(this,ei,0),Ae(this,ni,e),Ae(this,ka,n=>{Ae(this,ei,N(this,ei)-e[n]),e[n]=0}),Ae(this,hd,(n,r,i,o)=>{if(ve(this,ce,vt).call(this,r))return 0;if(!ms(i))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(i=o(r,n),!ms(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),Ae(this,Xc,(n,r,i)=>{if(e[n]=r,N(this,hr)){const o=N(this,hr)-e[n];for(;N(this,ei)>o;)ve(this,ce,Gh).call(this,!0)}Ae(this,ei,N(this,ei)+e[n]),i&&(i.entrySize=r,i.totalCalculatedSize=N(this,ei))})},ka=new WeakMap,Xc=new WeakMap,hd=new WeakMap,vs=function*({allowStale:e=this.allowStale}={}){if(N(this,Zt))for(let n=N(this,qt);!(!ve(this,ce,_v).call(this,n)||((e||!N(this,gr).call(this,n))&&(yield n),n===N(this,An)));)n=N(this,fr)[n]},ys=function*({allowStale:e=this.allowStale}={}){if(N(this,Zt))for(let n=N(this,An);!(!ve(this,ce,_v).call(this,n)||((e||!N(this,gr).call(this,n))&&(yield n),n===N(this,qt)));)n=N(this,_n)[n]},_v=function(e){return e!==void 0&&N(this,Vt).get(N(this,yt)[e])===e},Gh=function(e){var o,s;const n=N(this,An),r=N(this,yt)[n],i=N(this,Pe)[n];return N(this,ks)&&ve(this,ce,vt).call(this,i)?i.__abortController.abort(new Error("evicted")):(N(this,ii)||N(this,On))&&(N(this,ii)&&((o=N(this,Qr))==null||o.call(this,i,r,"evict")),N(this,On)&&((s=N(this,en))==null||s.push([i,r,"evict"]))),N(this,ka).call(this,n),e&&(N(this,yt)[n]=void 0,N(this,Pe)[n]=void 0,N(this,ti).push(n)),N(this,Zt)===1?(Ae(this,An,Ae(this,qt,0)),N(this,ti).length=0):Ae(this,An,N(this,_n)[n]),N(this,Vt).delete(r),Ud(this,Zt)._--,n},Wh=function(e,n,r,i){const o=n===void 0?void 0:N(this,Pe)[n];if(ve(this,ce,vt).call(this,o))return o;const s=new zf,{signal:a}=r;a==null||a.addEventListener("abort",()=>s.abort(a.reason),{signal:s.signal});const c={signal:s.signal,options:r,context:i},l=(g,C=!1)=>{const{aborted:m}=s.signal,v=r.ignoreFetchAbort&&g!==void 0;if(r.status&&(m&&!C?(r.status.fetchAborted=!0,r.status.fetchError=s.signal.reason,v&&(r.status.fetchAbortIgnored=!0)):r.status.fetchResolved=!0),m&&!v&&!C)return d(s.signal.reason);const b=f;return N(this,Pe)[n]===f&&(g===void 0?b.__staleWhileFetching?N(this,Pe)[n]=b.__staleWhileFetching:ve(this,ce,Cs).call(this,e,"fetch"):(r.status&&(r.status.fetchUpdated=!0),this.set(e,g,c.options))),g},u=g=>(r.status&&(r.status.fetchRejected=!0,r.status.fetchError=g),d(g)),d=g=>{const{aborted:C}=s.signal,m=C&&r.allowStaleOnFetchAbort,v=m||r.allowStaleOnFetchRejection,b=v||r.noDeleteOnFetchRejection,E=f;if(N(this,Pe)[n]===f&&(!b||E.__staleWhileFetching===void 0?ve(this,ce,Cs).call(this,e,"fetch"):m||(N(this,Pe)[n]=E.__staleWhileFetching)),v)return r.status&&E.__staleWhileFetching!==void 0&&(r.status.returnedStale=!0),E.__staleWhileFetching;if(E.__returned===E)throw g},h=(g,C)=>{var v;const m=(v=N(this,zc))==null?void 0:v.call(this,e,o,c);m&&m instanceof Promise&&m.then(b=>g(b===void 0?void 0:b),C),s.signal.addEventListener("abort",()=>{(!r.ignoreFetchAbort||r.allowStaleOnFetchAbort)&&(g(void 0),r.allowStaleOnFetchAbort&&(g=b=>l(b,!0)))})};r.status&&(r.status.fetchDispatched=!0);const f=new Promise(h).then(l,u),p=Object.assign(f,{__abortController:s,__staleWhileFetching:o,__returned:void 0});return n===void 0?(this.set(e,p,{...c.options,status:void 0}),n=N(this,Vt).get(e)):N(this,Pe)[n]=p,p},vt=function(e){if(!N(this,ks))return!1;const n=e;return!!n&&n instanceof Promise&&n.hasOwnProperty("__staleWhileFetching")&&n.__abortController instanceof zf},Ov=function(e,n){N(this,fr)[n]=e,N(this,_n)[e]=n},au=function(e){e!==N(this,qt)&&(e===N(this,An)?Ae(this,An,N(this,_n)[e]):ve(this,ce,Ov).call(this,N(this,fr)[e],N(this,_n)[e]),ve(this,ce,Ov).call(this,N(this,qt),e),Ae(this,qt,e))},Cs=function(e,n){var i,o,s,a;let r=!1;if(N(this,Zt)!==0){const c=N(this,Vt).get(e);if(c!==void 0)if(r=!0,N(this,Zt)===1)ve(this,ce,Mv).call(this,n);else{N(this,ka).call(this,c);const l=N(this,Pe)[c];if(ve(this,ce,vt).call(this,l)?l.__abortController.abort(new Error("deleted")):(N(this,ii)||N(this,On))&&(N(this,ii)&&((i=N(this,Qr))==null||i.call(this,l,e,n)),N(this,On)&&((o=N(this,en))==null||o.push([l,e,n]))),N(this,Vt).delete(e),N(this,yt)[c]=void 0,N(this,Pe)[c]=void 0,c===N(this,qt))Ae(this,qt,N(this,fr)[c]);else if(c===N(this,An))Ae(this,An,N(this,_n)[c]);else{const u=N(this,fr)[c];N(this,_n)[u]=N(this,_n)[c];const d=N(this,_n)[c];N(this,fr)[d]=N(this,fr)[c]}Ud(this,Zt)._--,N(this,ti).push(c)}}if(N(this,On)&&((s=N(this,en))!=null&&s.length)){const c=N(this,en);let l;for(;l=c==null?void 0:c.shift();)(a=N(this,qr))==null||a.call(this,...l)}return r},Mv=function(e){var n,r,i;for(const o of ve(this,ce,ys).call(this,{allowStale:!0})){const s=N(this,Pe)[o];if(ve(this,ce,vt).call(this,s))s.__abortController.abort(new Error("deleted"));else{const a=N(this,yt)[o];N(this,ii)&&((n=N(this,Qr))==null||n.call(this,s,a,e)),N(this,On)&&((r=N(this,en))==null||r.push([s,a,e]))}}if(N(this,Vt).clear(),N(this,Pe).fill(void 0),N(this,yt).fill(void 0),N(this,pr)&&N(this,ri)&&(N(this,pr).fill(0),N(this,ri).fill(0)),N(this,ni)&&N(this,ni).fill(0),Ae(this,An,0),Ae(this,qt,0),N(this,ti).length=0,Ae(this,ei,0),Ae(this,Zt,0),N(this,On)&&N(this,en)){const o=N(this,en);let s;for(;s=o==null?void 0:o.shift();)(i=N(this,qr))==null||i.call(this,...s)}};let Rv=UC;function zU(t){const e=t.match(/^#\$#(\S+)(?:\s+(\S{6})\s+)?(.*)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#name [authKey] keyval*'\nGot `"+t+"`"),null;const n=e[1],r=e[2],i={},o=/(\S+)\s*:\s*"([^"]*)"|(\S+)\s*:\s*(\S+)/g;let s;for(;s=o.exec(e[3]);){const a=s[1]||s[3],c=s[2]||s[4];a in i?console.log(`Invalid message format: duplicate key ${a} detected`):i[a]=c}return{name:n,authKey:r,keyvals:i}}function BS(t){const e=t.match(/^#\$#\*\s(\S+)\s(\S+)\s*:\s*(.+)$|^#\$#:\s(\S+)$/);if(!e)return console.log("Invalid message format: message must match the format '#$#* datatag keyval'\nGot `"+t+"`"),null;const n=e[1]||e[4],r=void 0,i=e[2],o=e[3],s={};return s[i]=o,{name:n,authKey:r,keyvals:s}}function Dv(){return(Math.random()+1).toString(36).substring(3,9)}class wl{constructor(e){V(this,"packageName");V(this,"minVersion",1);V(this,"maxVersion",1);V(this,"packageVersion",0);V(this,"client");this.client=e}handle(e){throw new Error("Method not implemented.")}handleMultiline(e){throw new Error("Method not implemented.")}closeMultiline(e){throw new Error("Method not implemented.")}shutdown(){}send(e,n){e.startsWith(this.packageName)||(e=this.packageName+"-"+e),this.client.sendMcp(e,n)}}class HU extends wl{constructor(){super(...arguments);V(this,"packageName","mcp-negotiate");V(this,"minVersion",2);V(this,"maxVersion",2)}handle(n){switch(n.name){}}sendNegotiate(){var n,r;for(const i of Object.values(this.client.mcpHandlers)){let o=(n=i.minVersion)==null?void 0:n.toFixed(1),s=(r=i.maxVersion)==null?void 0:r.toFixed(1);this.client.sendMcp("mcp-negotiate-can",{package:i.packageName,"min-version":o,"max-version":s})}this.client.sendCommand("#$#$mcp-negotiate-end")}}class XU extends wl{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-status")}handle(n){console.log(n),this.client.emit("statustext",n.keyvals.text)}}class $U extends wl{constructor(n){super(n);V(this,"packageName","dns-org-mud-moo-simpleedit");V(this,"sessions",{});V(this,"clientId");this.clientId=Dv()}handle(n){if(n.name==="dns-org-mud-moo-simpleedit-content"){const r={name:n.keyvals.name,reference:n.keyvals.reference,type:n.keyvals.type,contents:[]};this.sessions[n.keyvals["_data-tag"]]=r}else console.log(`Unexpected simpleedit message ${n}`)}handleMultiline(n){"content"in n.keyvals?this.sessions[n.name].contents.push(n.keyvals.content):console.log(`Unexpected simpleedit ML ${n}`)}closeMultiline(n){console.log(`Closing multiline ${n.name}`),this.client.openEditorWindow(this.sessions[n.name])}shutdown(){new BroadcastChannel("editor").postMessage({type:"shutdown"})}}class KU extends wl{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-getset");V(this,"id",1);V(this,"cache",new Rv({max:10}));V(this,"LocalCache",{})}handle(n){switch(n.name){case"dns-com-awns-getset-ack":const r=this.cache.get(n.keyvals.id);if(r===void 0){console.log(`Got ack for unknown id ${n.keyvals.id}`);break}const i=n.keyvals.value;console.log(`Got ${r} = ${i}`),this.LocalCache[r]=i,this.client.emit("getset",r,i);break}}sendGet(n){const r=(this.id++).toString();this.cache.set(r,n),this.client.sendMcp("dns-com-awns-getset-get",{id:r,property:n})}sendSet(n,r){this.client.sendMcp("dns-com-awns-getset-set",{id:this.id++,property:n,value:r})}sendDrop(n){this.client.sendMcp("dns-com-awns-getset-drop",{id:this.id++,property:n})}}class JU extends wl{constructor(){super(...arguments);V(this,"packageName","dns-com-vmoo-userlist");V(this,"maxVersion",1.1);V(this,"player");V(this,"fields",["Object","Name","Icon"]);V(this,"icons",["Idle","Away","Idle+Away","Friend","Newbie","Inhabitant","Inhabitant+","Schooled","Wizard","Key","Star"]);V(this,"players",[])}handle(n){switch(n.name){case"dns-com-vmoo-userlist-you":this.player=n.keyvals.nr;break}}handleMultiline(n){if("fields"in n.keyvals&&(this.fields=$r(n.keyvals.fields.trim())),"icons"in n.keyvals&&(this.icons=$r(n.keyvals.icons.trim())),"d"in n.keyvals){const o=n.keyvals.d[0];switch(o){case"=":var r=$r(n.keyvals.d.slice(1));this.players=r.map(a=>this.playerFromArray(a));break;case"+":this.players.push(this.playerFromArray($r(n.keyvals.d.slice(1))));break;case"-":var i=$r(n.keyvals.d.slice(1));this.players=this.players.filter(a=>!i.includes(a.Object));break;case"*":const s=this.playerFromArray($r(n.keyvals.d.slice(1)));this.updatePlayer(s);break;case"<":i=$r(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!0,this.players[c]=a)});break;case">":i=$r(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.idle=!1,this.players[c]=a)});break;case"[":i=$r(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!0,this.players[c]=a)});break;case"]":i=$r(n.keyvals.d.slice(1)),this.players.forEach((a,c)=>{i.includes(a.Object)&&(a.away=!1,this.players[c]=a)});break;default:console.log(`Unknown userlist mode ${o} in ${n.keyvals.d}`);break}this.update()}}updatePlayer(n){const r=this.players.findIndex(i=>i.Object===n.Object);r!==-1?this.players[r]=n:this.players.push(n)}update(){this.players.sort((r,i)=>n(i)-n(r)),this.client.emit("userlist",this.players);function n(r){return r.Icon-(r.idle?10:0)-(r.away?20:0)}}playerFromArray(n){const r={};return n.forEach((i,o)=>{r[this.fields[o]]=i}),r.away=!1,r.idle=!1,r}}function $r(t){t=t.slice(1,-1);let e=[],n="",r=0;for(let o=0;o<t.length;o++){const s=t[o];if(s==="{")r++;else if(s==="}")r--;else if(s===","&&r===0){i(),n="";continue}n+=s}return n.length>0&&i(),e;function i(){n=n.trim(),n.startsWith("{")&&n.endsWith("}")?e.push($r(n)):Number.isNaN(Number(n))?n.startsWith('"')&&n.endsWith('"')?e.push(n.slice(1,-1)):e.push(n):e.push(Number(n))}}class YU extends wl{constructor(){super(...arguments);V(this,"packageName","dns-com-awns-ping");V(this,"id",1)}handle(n){switch(n.name){case"dns-com-awns-ping":this.send("reply",n.keyvals);break}}ping(){this.send("dns-com-awns-ping",{id:this.id++})}}var Lv=(t=>(t.Off="off",t.Unfocused="unfocused",t.All="all",t))(Lv||{}),es=(t=>(t.SetGeneral="SET_GENERAL",t.SetSpeech="SET_SPEECH",t.SetChannels="SET_CHANNELS",t.SetEditorAutocompleteEnabled="SET_EDITOR_AUTOCOMPLETE_ENABLED",t.SetEditorAccessibilityMode="SET_EDITOR_ACCESSIBILITY_MODE",t))(es||{});class QU{constructor(){V(this,"state");V(this,"listeners",new Set);V(this,"dispatch",e=>{this.state=this.reducer(this.state,e),localStorage.setItem("preferences",JSON.stringify(this.state)),this.listeners.forEach(n=>n())});const e=localStorage.getItem("preferences"),n=this.getInitialPreferences();this.state=e?this.mergePreferences(n,JSON.parse(e)):n}getInitialPreferences(){return{general:{localEcho:!1},speech:{autoreadMode:"off",voice:"",rate:1,pitch:1,volume:1},channels:{sayto:{autoreadMode:"off",notify:!0}},editor:{autocompleteEnabled:!0,accessibilityMode:!0}}}mergePreferences(e,n){return{...e,general:{...e.general,...n.general},speech:{...e.speech,...n.speech},channels:n.channels?{...e.channels,...n.channels}:e.channels,editor:{...e.editor,...n.editor}}}reducer(e,n){switch(n.type){case"SET_GENERAL":return{...e,general:n.data};case"SET_SPEECH":return{...e,speech:n.data};case"SET_CHANNELS":return{...e,channels:n.data};case"SET_EDITOR_AUTOCOMPLETE_ENABLED":return{...e,editor:{...e.editor,autocompleteEnabled:n.data}};case"SET_EDITOR_ACCESSIBILITY_MODE":return{...e,editor:{...e.editor,accessibilityMode:n.data}};default:return e}}getState(){return this.state}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}}const Mc=new QU;class qU extends ME{constructor(n,r){super();V(this,"ws");V(this,"decoder",new TextDecoder("utf8"));V(this,"telnet");V(this,"host");V(this,"port");V(this,"telnetNegotiation",!1);V(this,"telnetBuffer","");V(this,"gmcpHandlers",{});V(this,"mcpHandlers",{});V(this,"mcpMultilines",{});V(this,"mcpAuthKey",null);V(this,"mcp_negotiate");V(this,"mcp_getset");V(this,"gmcp_char");V(this,"worldData",{playerId:"",playerName:"",roomId:"",liveKitTokens:[]});V(this,"cacophony");V(this,"sendCommand",n=>{Mc.getState().general.localEcho&&this.emit("command",n),this.send(n+`\r
`),console.log("> "+n)});this.host=n,this.port=r,this.mcp_negotiate=this.registerMcpPackage(HU),this.mcp_getset=this.registerMcpPackage(KU),this.gmcp_char=this.registerGMCPPackage(NL),this.cacophony=new LU}registerGMCPPackage(n){const r=new n(this);return this.gmcpHandlers[r.packageName]=r,console.log("Registered GMCP Package:",r.packageName),r}registerMcpPackage(n){const r=new n(this);return this.mcpHandlers[r.packageName]=r,r}connect(){this.ws=new window.WebSocket(`wss://${this.host}:${this.port}`),this.ws.binaryType="arraybuffer",this.telnet=new EL(new kL(this.ws)),this.ws.onopen=()=>{this.emit("connect")},this.telnet.on("data",n=>{this.handleData(n)}),this.telnet.on("negotiation",(n,r)=>{n===su.WILL&&r===ou.GMCP?(console.log("GMCP Negotiation"),this.telnet.sendNegotiation(su.DO,ou.GMCP),this.gmcpHandlers.Core.sendHello(),this.gmcpHandlers["Core.Supports"].sendSet(),this.gmcpHandlers["Auth.Autologin"].sendLogin()):n===su.DO&&r===ou.TERMINAL_TYPE&&(console.log("TTYPE Negotiation"),this.telnet.sendNegotiation(su.WILL,ou.TERMINAL_TYPE),this.telnet.sendTerminalType("Mongoose Client"),this.telnet.sendTerminalType("ANSI"),this.telnet.sendTerminalType("PROXY"))}),this.telnet.on("gmcp",(n,r)=>{console.log("GMCP Package:",n,r);try{this.handleGmcpData(n,r)}catch(i){console.error("Calling GMCP:",i)}}),this.ws.onclose=()=>{this.emit("disconnect"),this.mcpAuthKey=null,setTimeout(()=>{this.connect()},1e4)},this.ws.onerror=n=>{this.emit("error",n)}}send(n){this.ws.send(n)}close(){this.ws.close()}handleData(n){const r=this.decoder.decode(n).trimEnd();for(const i of r.split(`
`))i&&i.startsWith("#$#")?this.handleMcp(i):this.emitMessage(i)}handleMcp(n){if(n.startsWith("#$#*")){const i=BS(n.trimEnd());i&&(i.name in this.mcpMultilines?this.mcpMultilines[i.name].handleMultiline(i):console.warn("Received continuation for unknown multiline",i));return}if(n.startsWith("#$#:")){const i=BS(n.trimEnd());i&&(this.mcpMultilines[i.name].closeMultiline(i),delete this.mcpMultilines[i.name]);return}const r=zU(n.trimEnd());if(console.log("MCP Message:",r),(r==null?void 0:r.name.toLowerCase())==="mcp"&&r.authKey==null&&this.mcpAuthKey==null)this.mcpAuthKey=Dv(),this.sendCommand(`#$#mcp authentication-key: ${this.mcpAuthKey} version: 2.1 to: 2.1`),this.mcp_negotiate.sendNegotiate();else if((r==null?void 0:r.name)!=="mcp-negotiate-end")if((r==null?void 0:r.authKey)===this.mcpAuthKey){let i=r.name;do{if(i in this.mcpHandlers){this.mcpHandlers[i].handle(r),"_data-tag"in r.keyvals&&(console.log("new multiline "+r.keyvals["_data-tag"]),this.mcpMultilines[r.keyvals["_data-tag"]]=this.mcpHandlers[i]);return}i=i.substring(0,i.lastIndexOf("-"))}while(i);console.log(`No handler for ${r.name}`)}else console.log(`Unexpected authkey "${r==null?void 0:r.authKey}", probably a spoofed message.`)}handleGmcpData(n,r){const i=n.lastIndexOf("."),o=n.substring(0,i),s=n.substring(i+1);console.log("GMCP Message:",o,s,r);const a=this.gmcpHandlers[o];if(!a){console.log("No handler for GMCP package:",o);return}const c=a["handle"+s];c?(console.log("Calling handler:",c),c.call(a,JSON.parse(r))):console.log("No handler on package:",o,s)}emitMessage(n){const r=Mc.getState().speech.autoreadMode;r===Lv.All&&this.speak(n),r===Lv.Unfocused&&!document.hasFocus()&&this.speak(n),this.emit("message",n)}sendGmcp(n,r){console.log("Sending GMCP:",n,r),this.telnet.sendGmcp(n,r)}sendMcp(n,r){if(typeof r=="object"){let o="";for(const[s,a]of Object.entries(r))o+=` ${s}: ${a||'""'}`;r=o}const i=`#$#${n} ${this.mcpAuthKey} ${r}\r
`;this.send(i)}sendMcpMLLine(n,r,i){this.send(`#$#* ${n} ${r}: ${i}\r
`)}closeMcpML(n){this.send(`#$#: ${n}\r
`)}openEditorWindow(n){console.log(n);const r=new BroadcastChannel("editor"),i=n.reference,o=encodeURIComponent(i),s=window.open(`/editor?reference=${o}`,"_blank");r.onmessage=a=>{console.log("editor window message",a),a.data.id===i&&(a.data.type==="ready"?(console.log("sending editor window session",n),r.postMessage({type:"load",session:n})):a.data.type==="save"?(console.log("saving editor window with session",a.data.session),this.saveEditorWindow(a.data.session)):a.data.type==="close"&&(console.log("closing editor window"),r.close(),r.onmessage=null))},s&&s.focus()}saveEditorWindow(n){const r={reference:n.reference,type:n.type};r["content*"]="",this.sendMCPMultiline("dns-org-mud-moo-simpleedit-set",r,n.contents)}sendMCPMultiline(n,r,i){const o=Dv();r["_data-tag"]=o,this.sendMcp(n,r);for(const s of i)this.sendMcpMLLine(o,"content",s);this.closeMcpML(o)}shutdown(){Object.values(this.mcpHandlers).forEach(n=>{n.shutdown()}),Object.values(this.gmcpHandlers).forEach(n=>{n.shutdown()})}requestNotificationPermission(){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="default"&&Notification.requestPermission()}sendNotification(n,r){if(!("Notification"in window)){console.log("This browser does not support desktop notification");return}Notification.permission==="granted"&&new Notification(n,{body:r})}speak(n){if(!("speechSynthesis"in window)){console.log("This browser does not support speech synthesis");return}const r=new SpeechSynthesisUtterance(PL(n));r.lang="en-US";const{rate:i,pitch:o,voice:s,volume:a}=Mc.getState().speech;r.rate=i,r.pitch=o,r.volume=a;const l=speechSynthesis.getVoices().find(u=>u.name===s);l&&(r.voice=l),speechSynthesis.speak(r)}cancelSpeech(){speechSynthesis.cancel()}stopAllSounds(){this.gmcpHandlers["Client.Media"].stopAllSounds()}getInput(){var n;return((n=document.getElementById("command-input"))==null?void 0:n.textContent)||""}setInput(n){const r=document.getElementById("command-input");r&&(r.textContent=n)}}class e4{constructor(){V(this,"history",[]);V(this,"currentIndex",0);V(this,"unsentInput","")}addCommand(e){e.trim()!==""&&(this.history.length===0||this.history[this.history.length-1]!==e)&&(this.history.push(e.trim()),this.currentIndex=this.history.length),this.unsentInput=""}navigateUp(e){return this.currentIndex===this.history.length&&(this.unsentInput=e),this.history.length>0&&this.currentIndex>0&&this.currentIndex--,this.history.length>0?this.history[Math.max(0,this.currentIndex)]:""}navigateDown(e){return this.currentIndex===this.history.length&&(this.unsentInput=e),this.currentIndex<this.history.length-1?(this.currentIndex++,this.history[this.currentIndex]):(this.currentIndex=this.history.length,this.unsentInput)}getCurrentInput(){return this.currentIndex>=this.history.length?this.unsentInput:this.history[this.currentIndex]}}const t4=({onSend:t,inputRef:e})=>{const[n,r]=S.useState(""),i=S.useRef(new e4),o=s=>{const a=i.current;if(s.key==="Enter"&&!s.shiftKey)s.preventDefault(),t(n),a.addCommand(n),r("");else if(s.key==="ArrowUp"){s.preventDefault();const c=a.navigateUp(n);r(c)}else if(s.key==="ArrowDown"){s.preventDefault();const c=a.navigateDown(n);r(c)}};return X.jsx("textarea",{value:n,onChange:s=>r(s.target.value),onKeyDown:o,id:"command-input",ref:e,autoFocus:!0})},n4="f0bad3f364a4c3d342a522c48826b4d1101948d3",oa=()=>{const[,t]=S.useReducer(e=>e+1,0);return S.useEffect(()=>Mc.subscribe(t),[]),[Mc.getState(),Mc.dispatch]},r4=()=>{const[t,e]=S.useState([]);return S.useEffect(()=>{const n=()=>{e(window.speechSynthesis.getVoices())};n(),window.speechSynthesis.onvoiceschanged!==void 0&&(window.speechSynthesis.onvoiceschanged=n)},[]),t},i4=({tabs:t})=>{const[e,n]=S.useState(0),r=S.useRef([]);return S.useEffect(()=>{r.current=r.current.slice(0,t.length)},[t]),S.useEffect(()=>{const i=s=>{switch(s.key){case"ArrowLeft":n(a=>a>0?a-1:t.length-1);break;case"ArrowRight":n(a=>a<t.length-1?a+1:0);break}},o=r.current[e];return o==null||o.addEventListener("keydown",i),()=>{o==null||o.removeEventListener("keydown",i)}},[t.length,e]),S.useEffect(()=>{var i;(i=r.current[e])==null||i.focus()},[e]),X.jsxs("div",{children:[X.jsx("div",{role:"tablist","aria-label":"Tabs",children:t.map((i,o)=>X.jsx("button",{ref:s=>r.current[o]=s,role:"tab","aria-selected":e===o,id:`${i.label}-tab`,"aria-controls":`${i.label}-panel`,onClick:()=>n(o),tabIndex:e===o?void 0:-1,children:i.label},o))}),t.map((i,o)=>X.jsx("div",{role:"tabpanel",id:`${i.label}-panel`,"aria-labelledby":`${i.label}-tab`,hidden:e!==o,tabIndex:e===o?0:-1,children:i.content},o))]})},o4=()=>{const[t,e]=oa();return X.jsxs("label",{children:[X.jsx("input",{type:"checkbox",checked:t.general.localEcho,onChange:n=>e({type:es.SetGeneral,data:{...t.general,localEcho:n.target.checked}})}),"Local Echo"]})},s4=()=>{const[t,e]=oa();return X.jsxs("label",{children:["Auto Read:",X.jsxs("select",{value:t.speech.autoreadMode,onChange:n=>e({type:es.SetSpeech,data:{...t.speech,autoreadMode:n.target.value}}),children:[X.jsx("option",{value:"off",children:"Off"}),X.jsx("option",{value:"unfocused",children:"Unfocused"}),X.jsx("option",{value:"all",children:"Always"})]})]})},a4=()=>{const[t,e]=oa(),n=r4();return X.jsxs("label",{children:["Voice:",X.jsx("select",{value:t.speech.voice,onChange:r=>e({type:es.SetSpeech,data:{...t.speech,voice:r.target.value}}),children:n.map(r=>X.jsx("option",{value:r.name,children:r.name},r.voiceURI))})]})},c4=()=>{const[t,e]=oa();return X.jsxs("label",{children:["Rate (0.1 - 10.0):",X.jsx("input",{type:"range",min:"0.1",max:"10.0",step:"0.1",value:t.speech.rate,onChange:n=>e({type:es.SetSpeech,data:{...t.speech,rate:parseFloat(n.target.value)}})})]})},l4=()=>{const[t,e]=oa();return X.jsxs("label",{children:["Pitch (0 - 2):",X.jsx("input",{type:"range",min:"0",max:"2",step:"0.1",value:t.speech.pitch,onChange:n=>e({type:es.SetSpeech,data:{...t.speech,pitch:parseFloat(n.target.value)}})})]})},u4=()=>{const[t,e]=oa();return X.jsxs("label",{children:["Volume (0 - 1):",X.jsx("input",{type:"range",min:"0.1",max:"1",step:"0.1",value:t.speech.volume,onChange:n=>e({type:es.SetSpeech,data:{...t.speech,volume:parseFloat(n.target.value)}})})]})},d4=()=>X.jsxs("div",{children:[X.jsx(s4,{}),X.jsx("br",{}),X.jsx(a4,{}),X.jsx("br",{}),X.jsx(c4,{}),X.jsx("br",{}),X.jsx(l4,{}),X.jsx("br",{}),X.jsx(u4,{}),X.jsx("br",{})]}),h4=()=>{const[t,e]=oa(),n=t.editor,r=o=>{e({type:es.SetEditorAutocompleteEnabled,data:o.target.checked})},i=o=>{e({type:es.SetEditorAccessibilityMode,data:o.target.checked})};return X.jsxs("div",{children:[X.jsxs("label",{children:[X.jsx("input",{type:"checkbox",checked:n.autocompleteEnabled,onChange:r}),"Enable Autocomplete"]}),X.jsx("br",{}),X.jsxs("label",{children:[X.jsx("input",{type:"checkbox",checked:n.accessibilityMode,onChange:i}),"Enable Accessibility Mode"]}),X.jsx("br",{})]})},f4=()=>{const t=[{label:"General",content:X.jsx(o4,{})},{label:"Speech",content:X.jsx(d4,{})},{label:"Editor",content:X.jsx(h4,{})}];return X.jsx(i4,{tabs:t})};function p4(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.includes(r))continue;n[r]=t[r]}return n}function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ed.apply(null,arguments)}var Bv="data-focus-lock",ZT="data-focus-lock-disabled",g4="data-no-focus-lock",m4="data-autofocus-inside",v4="data-no-autofocus";function Vg(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function y4(t,e){var n=S.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=e,n.facade}var C4=typeof window<"u"?S.useLayoutEffect:S.useEffect,FS=new WeakMap;function I4(t,e){var n=y4(null,function(r){return t.forEach(function(i){return Vg(i,r)})});return C4(function(){var r=FS.get(n);if(r){var i=new Set(r),o=new Set(t),s=n.current;i.forEach(function(a){o.has(a)||Vg(a,null)}),o.forEach(function(a){i.has(a)||Vg(a,s)})}FS.set(n,t)},[t]),n}var Gg={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},Fv=function(t,e){return Fv=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},Fv(t,e)};function Al(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Fv(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Uv=function(){return Uv=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Uv.apply(this,arguments)};function b4(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,e||[])).next())})}function zT(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(n=0)),n;)try{if(r=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){n.label=l[1];break}if(l[0]===6&&n.label<o[1]){n.label=o[1],o=l;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(l);break}o[2]&&n.ops.pop(),n.trys.pop();continue}l=e.call(t,n)}catch(u){l=[6,u],i=0}finally{r=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function il(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vv(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(a){s={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Gv(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}function Dc(t){return this instanceof Dc?(this.v=t,this):new Dc(t)}function S4(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i={},a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(g){return new Promise(function(C,m){o.push([f,g,C,m])>1||c(f,g)})},p&&(i[f]=p(i[f])))}function c(f,p){try{l(r[f](p))}catch(g){h(o[0][3],g)}}function l(f){f.value instanceof Dc?Promise.resolve(f.value.v).then(u,d):h(o[0][2],f)}function u(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function w4(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof il=="function"?il(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}function HT(t){return t}function XT(t,e){e===void 0&&(e=HT);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var s=e(o,r);return n.push(s),function(){n=n.filter(function(a){return a!==s})}},assignSyncMedium:function(o){for(r=!0;n.length;){var s=n;n=[],s.forEach(o)}n={push:function(a){return o(a)},filter:function(){return n}}},assignMedium:function(o){r=!0;var s=[];if(n.length){var a=n;n=[],a.forEach(o),s=n}var c=function(){var u=s;s=[],u.forEach(o)},l=function(){return Promise.resolve().then(c)};l(),n={push:function(u){s.push(u),l()},filter:function(u){return s=s.filter(u),n}}}};return i}function tC(t,e){return e===void 0&&(e=HT),XT(t,e)}function A4(t){t===void 0&&(t={});var e=XT(null);return e.options=Uv({async:!0,ssr:!1},t),e}var $T=tC({},function(t){var e=t.target,n=t.currentTarget;return{target:e,currentTarget:n}}),KT=tC(),k4=tC(),E4=A4({async:!0,ssr:typeof document<"u"}),T4=S.createContext(void 0),x4=[],nC=S.forwardRef(function(e,n){var r,i=S.useState(),o=i[0],s=i[1],a=S.useRef(),c=S.useRef(!1),l=S.useRef(null),u=S.useState({}),d=u[1],h=e.children,f=e.disabled,p=f===void 0?!1:f,g=e.noFocusGuards,C=g===void 0?!1:g,m=e.persistentFocus,v=m===void 0?!1:m,b=e.crossFrame,E=b===void 0?!0:b,w=e.autoFocus,A=w===void 0?!0:w;e.allowTextSelection;var x=e.group,T=e.className,_=e.whiteList,O=e.hasPositiveIndices,D=e.shards,U=D===void 0?x4:D,j=e.as,Z=j===void 0?"div":j,Y=e.lockProps,ee=Y===void 0?{}:Y,ne=e.sideCar,z=e.returnFocus,$=z===void 0?!1:z,re=e.focusOptions,H=e.onActivation,ie=e.onDeactivation,Re=S.useState({}),Ne=Re[0],Ce=S.useCallback(function(fe){var ze=fe.captureFocusRestore;if(!l.current){var We,xe=(We=document)==null?void 0:We.activeElement;l.current=xe,xe!==document.body&&(l.current=ze(xe))}a.current&&H&&H(a.current),c.current=!0,d()},[H]),Te=S.useCallback(function(){c.current=!1,ie&&ie(a.current),d()},[ie]),it=S.useCallback(function(fe){var ze=l.current;if(ze){var We=(typeof ze=="function"?ze():ze)||document.body,xe=typeof $=="function"?$(We):$;if(xe){var $e=typeof xe=="object"?xe:void 0;l.current=null,fe?Promise.resolve().then(function(){return We.focus($e)}):We.focus($e)}}},[$]),pe=S.useCallback(function(fe){c.current&&$T.useMedium(fe)},[]),Nn=KT.useMedium,$n=S.useCallback(function(fe){a.current!==fe&&(a.current=fe,s(fe))},[]),Nr=ed((r={},r[ZT]=p&&"disabled",r[Bv]=x,r),ee),qe=C!==!0,on=qe&&C!=="tail",_r=I4([n,$n]),le=S.useMemo(function(){return{observed:a,shards:U,enabled:!p,active:c.current}},[p,c.current,U,o]);return S.createElement(S.Fragment,null,qe&&[S.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:p?-1:0,style:Gg}),O?S.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:p?-1:1,style:Gg}):null],!p&&S.createElement(ne,{id:Ne,sideCar:E4,observed:o,disabled:p,persistentFocus:v,crossFrame:E,autoFocus:A,whiteList:_,shards:U,onActivation:Ce,onDeactivation:Te,returnFocus:it,focusOptions:re}),S.createElement(Z,ed({ref:_r},Nr,{className:T,onBlur:Nn,onFocus:pe}),S.createElement(T4.Provider,{value:le},h)),on&&S.createElement("div",{"data-focus-guard":!0,tabIndex:p?-1:0,style:Gg}))});nC.propTypes={};function Wv(t,e){return Wv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Wv(t,e)}function P4(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,Wv(t,e)}function td(t){"@babel/helpers - typeof";return td=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},td(t)}function R4(t,e){if(td(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(td(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function N4(t){var e=R4(t,"string");return td(e)=="symbol"?e:e+""}function _4(t,e,n){return(e=N4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function O4(t,e){function n(r){return r.displayName||r.name||"Component"}return function(i){var o=[],s;function a(){s=t(o.map(function(l){return l.props})),e(s)}var c=function(l){P4(u,l);function u(){return l.apply(this,arguments)||this}u.peek=function(){return s};var d=u.prototype;return d.componentDidMount=function(){o.push(this),a()},d.componentDidUpdate=function(){a()},d.componentWillUnmount=function(){var f=o.indexOf(this);o.splice(f,1),a()},d.render=function(){return nt.createElement(i,this.props)},u}(S.PureComponent);return _4(c,"displayName","SideEffect("+n(i)+")"),c}}var so=function(t){for(var e=Array(t.length),n=0;n<t.length;++n)e[n]=t[n];return e},Ua=function(t){return Array.isArray(t)?t:[t]},JT=function(t){return Array.isArray(t)?t[0]:t},M4=function(t){if(t.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(t,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},YT=function(t){return t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?t.parentNode.host:t.parentNode},QT=function(t){return t===document||t&&t.nodeType===Node.DOCUMENT_NODE},D4=function(t){return t.hasAttribute("inert")},L4=function(t,e){return!t||QT(t)||!M4(t)&&!D4(t)&&e(YT(t))},qT=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=L4(e,qT.bind(void 0,t));return t.set(e,r),r},B4=function(t,e){return t&&!QT(t)?V4(t)?e(YT(t)):!1:!0},ex=function(t,e){var n=t.get(e);if(n!==void 0)return n;var r=B4(e,ex.bind(void 0,t));return t.set(e,r),r},tx=function(t){return t.dataset},F4=function(t){return t.tagName==="BUTTON"},nx=function(t){return t.tagName==="INPUT"},rx=function(t){return nx(t)&&t.type==="radio"},U4=function(t){return!((nx(t)||F4(t))&&(t.type==="hidden"||t.disabled))},V4=function(t){var e=t.getAttribute(v4);return![!0,"true",""].includes(e)},rC=function(t){var e;return!!(t&&(!((e=tx(t))===null||e===void 0)&&e.focusGuard))},jv=function(t){return!rC(t)},G4=function(t){return!!t},W4=function(t,e){var n=Math.max(0,t.tabIndex),r=Math.max(0,e.tabIndex),i=n-r,o=t.index-e.index;if(i){if(!n)return 1;if(!r)return-1}return i||o},j4=function(t){return t.tabIndex<0&&!t.hasAttribute("tabindex")?0:t.tabIndex},iC=function(t,e,n){return so(t).map(function(r,i){var o=j4(r);return{node:r,index:i,tabIndex:n&&o===-1?(r.dataset||{}).focusGuard?0:-1:o}}).filter(function(r){return!e||r.tabIndex>=0}).sort(W4)},Z4=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],oC=Z4.join(","),z4="".concat(oC,", [data-focus-guard]"),ix=function(t,e){return so((t.shadowRoot||t).children).reduce(function(n,r){return n.concat(r.matches(e?z4:oC)?[r]:[],ix(r))},[])},H4=function(t,e){var n;return t instanceof HTMLIFrameElement&&(!((n=t.contentDocument)===null||n===void 0)&&n.body)?ol([t.contentDocument.body],e):[t]},ol=function(t,e){return t.reduce(function(n,r){var i,o=ix(r,e),s=(i=[]).concat.apply(i,o.map(function(a){return H4(a,e)}));return n.concat(s,r.parentNode?so(r.parentNode.querySelectorAll(oC)).filter(function(a){return a===r}):[])},[])},X4=function(t){var e=t.querySelectorAll("[".concat(m4,"]"));return so(e).map(function(n){return ol([n])}).reduce(function(n,r){return n.concat(r)},[])},sC=function(t,e){return so(t).filter(function(n){return qT(e,n)}).filter(function(n){return U4(n)})},US=function(t,e){return e===void 0&&(e=new Map),so(t).filter(function(n){return ex(e,n)})},aC=function(t,e,n){return iC(sC(ol(t,n),e),!0,n)},Hf=function(t,e){return iC(sC(ol(t),e),!1)},$4=function(t,e){return sC(X4(t),e)},Pa=function(t,e){return t.shadowRoot?Pa(t.shadowRoot,e):Object.getPrototypeOf(t).contains!==void 0&&Object.getPrototypeOf(t).contains.call(t,e)?!0:so(t.children).some(function(n){var r;if(n instanceof HTMLIFrameElement){var i=(r=n.contentDocument)===null||r===void 0?void 0:r.body;return i?Pa(i,e):!1}return Pa(n,e)})},K4=function(t){for(var e=new Set,n=t.length,r=0;r<n;r+=1)for(var i=r+1;i<n;i+=1){var o=t[r].compareDocumentPosition(t[i]);(o&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(i),(o&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(r)}return t.filter(function(s,a){return!e.has(a)})},ox=function(t){return t.parentNode?ox(t.parentNode):t},cC=function(t){var e=Ua(t);return e.filter(Boolean).reduce(function(n,r){var i=r.getAttribute(Bv);return n.push.apply(n,i?K4(so(ox(r).querySelectorAll("[".concat(Bv,'="').concat(i,'"]:not([').concat(ZT,'="disabled"])')))):[r]),n},[])},J4=function(t){try{return t()}catch{return}},nd=function(t){if(t===void 0&&(t=document),!(!t||!t.activeElement)){var e=t.activeElement;return e.shadowRoot?nd(e.shadowRoot):e instanceof HTMLIFrameElement&&J4(function(){return e.contentWindow.document})?nd(e.contentWindow.document):e}},Y4=function(t,e){return t===e},Q4=function(t,e){return!!so(t.querySelectorAll("iframe")).some(function(n){return Y4(n,e)})},sx=function(t,e){return e===void 0&&(e=nd(JT(t).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:cC(t).some(function(n){return Pa(n,e)||Q4(n,e)})},q4=function(t){t===void 0&&(t=document);var e=nd(t);return e?so(t.querySelectorAll("[".concat(g4,"]"))).some(function(n){return Pa(n,e)}):!1},eV=function(t,e){return e.filter(rx).filter(function(n){return n.name===t.name}).filter(function(n){return n.checked})[0]||t},lC=function(t,e){return rx(t)&&t.name?eV(t,e):t},tV=function(t){var e=new Set;return t.forEach(function(n){return e.add(lC(n,t))}),t.filter(function(n){return e.has(n)})},VS=function(t){return t[0]&&t.length>1?lC(t[0],t):t[0]},GS=function(t,e){return t.indexOf(lC(e,t))},Zv="NEW_FOCUS",nV=function(t,e,n,r,i){var o=t.length,s=t[0],a=t[o-1],c=rC(r);if(!(r&&t.indexOf(r)>=0)){var l=r!==void 0?n.indexOf(r):-1,u=i?n.indexOf(i):l,d=i?t.indexOf(i):-1;if(l===-1)return d!==-1?d:Zv;if(d===-1)return Zv;var h=l-u,f=n.indexOf(s),p=n.indexOf(a),g=tV(n),C=r!==void 0?g.indexOf(r):-1,m=C-(i?g.indexOf(i):l);if(!h&&d>=0||e.length===0)return d;var v=GS(t,e[0]),b=GS(t,e[e.length-1]);if(l<=f&&c&&Math.abs(h)>1)return b;if(l>=p&&c&&Math.abs(h)>1)return v;if(h&&Math.abs(m)>1)return d;if(l<=f)return b;if(l>p)return v;if(h)return Math.abs(h)>1?d:(o+d+h)%o}},rV=function(t){return function(e){var n,r=(n=tx(e))===null||n===void 0?void 0:n.autofocus;return e.autofocus||r!==void 0&&r!=="false"||t.indexOf(e)>=0}},WS=function(t,e,n){var r=t.map(function(o){var s=o.node;return s}),i=US(r.filter(rV(n)));return i&&i.length?VS(i):VS(US(e))},zv=function(t,e){return e===void 0&&(e=[]),e.push(t),t.parentNode&&zv(t.parentNode.host||t.parentNode,e),e},Wg=function(t,e){for(var n=zv(t),r=zv(e),i=0;i<n.length;i+=1){var o=n[i];if(r.indexOf(o)>=0)return o}return!1},ax=function(t,e,n){var r=Ua(t),i=Ua(e),o=r[0],s=!1;return i.filter(Boolean).forEach(function(a){s=Wg(s||a,a)||s,n.filter(Boolean).forEach(function(c){var l=Wg(o,c);l&&(!s||Pa(l,s)?s=l:s=Wg(l,s))})}),s},jS=function(t,e){return t.reduce(function(n,r){return n.concat($4(r,e))},[])},iV=function(t,e){var n=new Map;return e.forEach(function(r){return n.set(r.node,r)}),t.map(function(r){return n.get(r)}).filter(G4)},oV=function(t,e){var n=nd(Ua(t).length>0?document:JT(t).ownerDocument),r=cC(t).filter(jv),i=ax(n||t,t,r),o=new Map,s=Hf(r,o),a=s.filter(function(p){var g=p.node;return jv(g)});if(a[0]){var c=Hf([i],o).map(function(p){var g=p.node;return g}),l=iV(c,a),u=l.map(function(p){var g=p.node;return g}),d=l.filter(function(p){var g=p.tabIndex;return g>=0}).map(function(p){var g=p.node;return g}),h=nV(u,d,c,n,e);if(h===Zv){var f=WS(s,d,jS(r,o))||WS(s,u,jS(r,o));if(f)return{node:f};console.warn("focus-lock: cannot find any node to move focus into");return}return h===void 0?h:l[h]}},sV=function(t){var e=cC(t).filter(jv),n=ax(t,t,e),r=iC(ol([n],!0),!0,!0),i=ol(e,!1);return r.map(function(o){var s=o.node,a=o.index;return{node:s,index:a,lockItem:i.indexOf(s)>=0,guard:rC(s)}})},uC=function(t,e){t&&("focus"in t&&t.focus(e),"contentWindow"in t&&t.contentWindow&&t.contentWindow.focus())},jg=0,Zg=!1,cx=function(t,e,n){n===void 0&&(n={});var r=oV(t,e);if(!Zg&&r){if(jg>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),Zg=!0,setTimeout(function(){Zg=!1},1);return}jg++,uC(r.node,n.focusOptions),jg--}};function jl(t){if(!t)return null;if(typeof WeakRef>"u")return function(){return t||null};var e=t?new WeakRef(t):null;return function(){return(e==null?void 0:e.deref())||null}}var aV=function(t){if(!t)return null;for(var e=[],n=t;n&&n!==document.body;)e.push({current:jl(n),parent:jl(n.parentElement),left:jl(n.previousElementSibling),right:jl(n.nextElementSibling)}),n=n.parentElement;return{element:jl(t),stack:e,ownerDocument:t.ownerDocument}},cV=function(t){var e,n,r,i,o;if(t)for(var s=t.stack,a=t.ownerDocument,c=new Map,l=0,u=s;l<u.length;l++){var d=u[l],h=(e=d.parent)===null||e===void 0?void 0:e.call(d);if(h&&a.contains(h)){for(var f=(n=d.left)===null||n===void 0?void 0:n.call(d),p=d.current(),g=h.contains(p)?p:void 0,C=(r=d.right)===null||r===void 0?void 0:r.call(d),m=aC([h],c),v=(o=(i=g??(f==null?void 0:f.nextElementSibling))!==null&&i!==void 0?i:C)!==null&&o!==void 0?o:f;v;){for(var b=0,E=m;b<E.length;b++){var w=E[b];if(v!=null&&v.contains(w.node))return w.node}v=v.nextElementSibling}if(m.length)return m[0].node}}},lV=function(t){var e=aV(t);return function(){return cV(e)}},uV=function(t,e,n){if(!t||!e)return console.error("no element or scope given"),{};var r=Ua(e);if(r.every(function(s){return!Pa(s,t)}))return console.error("Active element is not contained in the scope"),{};var i=n?aC(r,new Map):Hf(r,new Map),o=i.findIndex(function(s){var a=s.node;return a===t});if(o!==-1)return{prev:i[o-1],next:i[o+1],first:i[0],last:i[i.length-1]}},dV=function(t,e){var n=e?aC(Ua(t),new Map):Hf(Ua(t),new Map);return{first:n[0],last:n[n.length-1]}},hV=function(t){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},t)},lx=function(t,e,n){e===void 0&&(e={});var r=hV(e),i=uV(t,r.scope,r.onlyTabbable);if(i){var o=n(i,r.cycle);o&&uC(o.node,r.focusOptions)}},fV=function(t,e){e===void 0&&(e={}),lx(t,e,function(n,r){var i=n.next,o=n.first;return i||r&&o})},pV=function(t,e){e===void 0&&(e={}),lx(t,e,function(n,r){var i=n.prev,o=n.last;return i||r&&o})},ux=function(t,e,n){var r,i=dV(t,(r=e.onlyTabbable)!==null&&r!==void 0?r:!0),o=i[n];o&&uC(o.node,e.focusOptions)},gV=function(t,e){e===void 0&&(e={}),ux(t,e,"first")},mV=function(t,e){e===void 0&&(e={}),ux(t,e,"last")};function dC(t){setTimeout(t,1)}var vV=function(e){return e&&"current"in e?e.current:e},yV=function(){return document&&document.activeElement===document.body},CV=function(){return yV()||q4()},Lc=null,kc=null,Bc=null,rd=!1,IV=function(){return!0},bV=function(e){return(Lc.whiteList||IV)(e)},SV=function(e,n){Bc={observerNode:e,portaledElement:n}},wV=function(e){return Bc&&Bc.portaledElement===e};function ZS(t,e,n,r){var i=null,o=t;do{var s=r[o];if(s.guard)s.node.dataset.focusAutoGuard&&(i=s);else if(s.lockItem){if(o!==t)return;i=null}else break}while((o+=n)!==e);i&&(i.node.tabIndex=0)}var AV=function(e){return e?!!rd:rd==="meanwhile"},kV=function t(e,n,r){return n&&(n.host===e&&(!n.activeElement||r.contains(n.activeElement))||n.parentNode&&t(e,n.parentNode,r))},EV=function(e,n){return n.some(function(r){return kV(e,r,r)})},Xf=function(){var e=!1;if(Lc){var n=Lc,r=n.observed,i=n.persistentFocus,o=n.autoFocus,s=n.shards,a=n.crossFrame,c=n.focusOptions,l=r||Bc&&Bc.portaledElement,u=document&&document.activeElement;if(l){var d=[l].concat(s.map(vV).filter(Boolean));if((!u||bV(u))&&(i||AV(a)||!CV()||!kc&&o)&&(l&&!(sx(d)||u&&EV(u,d)||wV(u))&&(document&&!kc&&u&&!o?(u.blur&&u.blur(),document.body.focus()):(e=cx(d,kc,{focusOptions:c}),Bc={})),rd=!1,kc=document&&document.activeElement),document&&u!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var h=document&&document.activeElement,f=sV(d),p=f.map(function(g){var C=g.node;return C}).indexOf(h);p>-1&&(f.filter(function(g){var C=g.guard,m=g.node;return C&&m.dataset.focusAutoGuard}).forEach(function(g){var C=g.node;return C.removeAttribute("tabIndex")}),ZS(p,f.length,1,f),ZS(p,-1,-1,f))}}}return e},dx=function(e){Xf()&&e&&(e.stopPropagation(),e.preventDefault())},hC=function(){return dC(Xf)},TV=function(e){var n=e.target,r=e.currentTarget;r.contains(n)||SV(r,n)},xV=function(){return null},hx=function(){rd="just",dC(function(){rd="meanwhile"})},PV=function(){document.addEventListener("focusin",dx),document.addEventListener("focusout",hC),window.addEventListener("blur",hx)},RV=function(){document.removeEventListener("focusin",dx),document.removeEventListener("focusout",hC),window.removeEventListener("blur",hx)};function NV(t){return t.filter(function(e){var n=e.disabled;return!n})}var fx={moveFocusInside:cx,focusInside:sx,focusNextElement:fV,focusPrevElement:pV,focusFirstElement:gV,focusLastElement:mV,captureFocusRestore:lV};function _V(t){var e=t.slice(-1)[0];e&&!Lc&&PV();var n=Lc,r=n&&e&&e.id===n.id;Lc=e,n&&!r&&(n.onDeactivation(),t.filter(function(i){var o=i.id;return o===n.id}).length||n.returnFocus(!e)),e?(kc=null,(!r||n.observed!==e.observed)&&e.onActivation(fx),Xf(),dC(Xf)):(RV(),kc=null)}$T.assignSyncMedium(TV);KT.assignMedium(hC);k4.assignMedium(function(t){return t(fx)});const OV=O4(NV,_V)(xV);var px=S.forwardRef(function(e,n){return S.createElement(nC,ed({sideCar:OV,ref:n},e))}),gx=nC.propTypes||{};gx.sideCar;p4(gx,["sideCar"]);px.propTypes={};const MV=nt.forwardRef((t,e)=>{const[n,r]=S.useState(!1),i=S.useRef(null);return nt.useImperativeHandle(e,()=>({open(){r(!0)},close(){r(!1)}})),S.useEffect(()=>{var o;n&&((o=i.current)==null||o.focus())},[n]),S.useEffect(()=>{const o=s=>{s.key==="Escape"&&r(!1)};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},[]),X.jsx(px,{disabled:!n,children:X.jsxs("dialog",{className:"preferences-dialog",open:n,ref:i,tabIndex:-1,"aria-label":"Preferences",children:[X.jsx("h1",{style:{color:"white",textAlign:"center",fontSize:"1.5em",padding:"0.5em",margin:"0.5em",border:"1px solid black",borderRadius:"0.5em",backgroundColor:"black"},children:"Preferences"}),n&&X.jsx(f4,{}),X.jsx("button",{onClick:()=>r(!1),children:"Close"}),X.jsx("br",{}),X.jsxs("span",{id:"commit-hash",children:["Version: ",n4]})]})})});var mx={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zS=nt.createContext&&nt.createContext(mx),DV=["attr","size","title"];function LV(t,e){if(t==null)return{};var n=BV(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function BV(t,e){if(t==null)return{};var n={};for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(e.indexOf(r)>=0)continue;n[r]=t[r]}return n}function $f(){return $f=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$f.apply(this,arguments)}function HS(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Kf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HS(Object(n),!0).forEach(function(r){FV(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HS(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function FV(t,e,n){return e=UV(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function UV(t){var e=VV(t,"string");return typeof e=="symbol"?e:e+""}function VV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function vx(t){return t&&t.map((e,n)=>nt.createElement(e.tag,Kf({key:n},e.attr),vx(e.child)))}function Ya(t){return e=>nt.createElement(GV,$f({attr:Kf({},t.attr)},e),vx(t.child))}function GV(t){var e=n=>{var{attr:r,size:i,title:o}=t,s=LV(t,DV),a=i||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),nt.createElement("svg",$f({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,s,{className:c,style:Kf(Kf({color:t.color||n.color},n.style),t.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),o&&nt.createElement("title",null,o),t.children)};return zS!==void 0?nt.createElement(zS.Consumer,null,n=>e(n)):e(mx)}function WV(t){return Ya({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(t)}function jV(t){return Ya({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function ZV(t){return Ya({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497.941 273.941c18.745-18.745 18.745-49.137 0-67.882l-160-160c-18.745-18.745-49.136-18.746-67.883 0l-256 256c-18.745 18.745-18.745 49.137 0 67.882l96 96A48.004 48.004 0 0 0 144 480h356c6.627 0 12-5.373 12-12v-40c0-6.627-5.373-12-12-12H355.883l142.058-142.059zm-302.627-62.627l137.373 137.373L265.373 416H150.628l-80-80 124.686-124.686z"},child:[]}]})(t)}function yx(t){return Ya({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function zV(t){return Ya({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M212.333 224.333H12c-6.627 0-12-5.373-12-12V12C0 5.373 5.373 0 12 0h48c6.627 0 12 5.373 12 12v78.112C117.773 39.279 184.26 7.47 258.175 8.007c136.906.994 246.448 111.623 246.157 248.532C504.041 393.258 393.12 504 256.333 504c-64.089 0-122.496-24.313-166.51-64.215-5.099-4.622-5.334-12.554-.467-17.42l33.967-33.967c4.474-4.474 11.662-4.717 16.401-.525C170.76 415.336 211.58 432 256.333 432c97.268 0 176-78.716 176-176 0-97.267-78.716-176-176-176-58.496 0-110.28 28.476-142.274 72.333h98.274c6.627 0 12 5.373 12 12v48c0 6.627-5.373 12-12 12z"},child:[]}]})(t)}function HV(t){return Ya({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zM461.64 256l45.64-45.64c6.3-6.3 6.3-16.52 0-22.82l-22.82-22.82c-6.3-6.3-16.52-6.3-22.82 0L416 210.36l-45.64-45.64c-6.3-6.3-16.52-6.3-22.82 0l-22.82 22.82c-6.3 6.3-6.3 16.52 0 22.82L370.36 256l-45.63 45.63c-6.3 6.3-6.3 16.52 0 22.82l22.82 22.82c6.3 6.3 16.52 6.3 22.82 0L416 301.64l45.64 45.64c6.3 6.3 16.52 6.3 22.82 0l22.82-22.82c6.3-6.3 6.3-16.52 0-22.82L461.64 256z"},child:[]}]})(t)}function XV(t){return Ya({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M215.03 71.05L126.06 160H24c-13.26 0-24 10.74-24 24v144c0 13.25 10.74 24 24 24h102.06l88.97 88.95c15.03 15.03 40.97 4.47 40.97-16.97V88.02c0-21.46-25.96-31.98-40.97-16.97zm233.32-51.08c-11.17-7.33-26.18-4.24-33.51 6.95-7.34 11.17-4.22 26.18 6.95 33.51 66.27 43.49 105.82 116.6 105.82 195.58 0 78.98-39.55 152.09-105.82 195.58-11.17 7.32-14.29 22.34-6.95 33.5 7.04 10.71 21.93 14.56 33.51 6.95C528.27 439.58 576 351.33 576 256S528.27 72.43 448.35 19.97zM480 256c0-63.53-32.06-121.94-85.77-156.24-11.19-7.14-26.03-3.82-33.12 7.46s-3.78 26.21 7.41 33.36C408.27 165.97 432 209.11 432 256s-23.73 90.03-63.48 115.42c-11.19 7.14-14.5 22.07-7.41 33.36 6.51 10.36 21.12 15.14 33.12 7.46C447.94 377.94 480 319.54 480 256zm-141.77-76.87c-11.58-6.33-26.19-2.16-32.61 9.45-6.39 11.61-2.16 26.2 9.45 32.61C327.98 228.28 336 241.63 336 256c0 14.38-8.02 27.72-20.92 34.81-11.61 6.41-15.84 21-9.45 32.61 6.43 11.66 21.05 15.8 32.61 9.45 28.23-15.55 45.77-45 45.77-76.88s-17.54-61.32-45.78-76.86z"},child:[]}]})(t)}const $V=({client:t,onClearLog:e,onSaveLog:n,onToggleUsers:r,onOpenPrefs:i})=>{const[o,s]=nt.useState(t.cacophony.muted);return X.jsxs("div",{className:"toolbar",children:[X.jsxs("button",{onClick:n,accessKey:"l",children:[X.jsx(yx,{}),"Save Log"]}),X.jsxs("button",{onClick:e,accessKey:"c",children:[X.jsx(ZV,{}),"Clear Log"]}),X.jsxs("button",{onClick:i,accessKey:"p",children:[X.jsx(WV,{}),"Preferences"]}),X.jsxs("button",{onClick:()=>{s(!o),t.cacophony.muted=!o},accessKey:"m",children:[o?X.jsx(XV,{}):X.jsx(HV,{}),o?"Unmute":"Mute"]}),X.jsxs("label",{children:["Volume",X.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>t.cacophony.setGlobalVolume(Number(a.target.value)/100)})]}),X.jsx("button",{onClick:r,accessKey:"u",children:"Show/Hide Users"}),X.jsxs("label",{children:["Volume",X.jsx("input",{type:"range",min:"0",max:"100",onChange:a=>t.cacophony.setGlobalVolume(Number(a.target.value)/100)})]})]})};class KV extends nt.Component{constructor(e){super(e),this.state={statusText:"Not connected"},e.client.on("statustext",n=>this.setState({statusText:n})),e.client.on("connect",()=>this.setState({statusText:"Connected"})),e.client.on("disconnect",()=>this.setState({statusText:"Disconnected"}))}render(){return X.jsx("div",{className:"statusbar",children:this.state.statusText})}}const JV=({users:t})=>X.jsxs("div",{className:"sidebar",children:[X.jsx("div",{className:"sidebar-header",role:"heading","aria-level":2,children:"Connected Players"}),X.jsx("div",{className:"sidebar-content",children:X.jsx("ul",{children:t.map(e=>{let n="";return e.away&&(n+=" away"),e.idle&&(n+=" idle"),X.jsx("li",{className:n,children:e.Name},e.Object)})})})]});var XS={};function YV(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(r){if(r!=="default"&&!(r in t)){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return n[r]}})}})}),Object.freeze(t)}var QV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function qV(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Cx={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(QV,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"];function o(g,C){var m=g[C];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function s(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?s:console[g]!==void 0?o(console,g):console.log!==void 0?o(console,"log"):e}function c(g,C){for(var m=0;m<i.length;m++){var v=i[m];this[v]=m<g?e:this.methodFactory(v,g,C)}this.log=this.debug}function l(g,C,m){return function(){typeof console!==n&&(c.call(this,C,m),this[g].apply(this,arguments))}}function u(g,C,m){return a(g)||l.apply(this,arguments)}function d(g,C,m){var v=this,b;C=C??"WARN";var E="loglevel";typeof g=="string"?E+=":"+g:typeof g=="symbol"&&(E=void 0);function w(_){var O=(i[_]||"silent").toUpperCase();if(!(typeof window===n||!E)){try{window.localStorage[E]=O;return}catch{}try{window.document.cookie=encodeURIComponent(E)+"="+O+";"}catch{}}}function A(){var _;if(!(typeof window===n||!E)){try{_=window.localStorage[E]}catch{}if(typeof _===n)try{var O=window.document.cookie,D=O.indexOf(encodeURIComponent(E)+"=");D!==-1&&(_=/^([^;]+)/.exec(O.slice(D))[1])}catch{}return v.levels[_]===void 0&&(_=void 0),_}}function x(){if(!(typeof window===n||!E)){try{window.localStorage.removeItem(E);return}catch{}try{window.document.cookie=encodeURIComponent(E)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}v.name=g,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=m||u,v.getLevel=function(){return b},v.setLevel=function(_,O){if(typeof _=="string"&&v.levels[_.toUpperCase()]!==void 0&&(_=v.levels[_.toUpperCase()]),typeof _=="number"&&_>=0&&_<=v.levels.SILENT){if(b=_,O!==!1&&w(_),c.call(v,_,g),typeof console===n&&_<v.levels.SILENT)return"No console available for logging"}else throw"log.setLevel() called with invalid level: "+_},v.setDefaultLevel=function(_){C=_,A()||v.setLevel(_,!1)},v.resetLevel=function(){v.setLevel(C,!1),x()},v.enableAll=function(_){v.setLevel(v.levels.TRACE,_)},v.disableAll=function(_){v.setLevel(v.levels.SILENT,_)};var T=A();T==null&&(T=C),v.setLevel(T,!1)}var h=new d,f={};h.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var m=f[C];return m||(m=f[C]=new d(C,h.getLevel(),h.methodFactory)),m};var p=typeof window!==n?window.log:void 0;return h.noConflict=function(){return typeof window!==n&&window.log===h&&(window.log=p),h},h.getLoggers=function(){return f},h.default=h,h})})(Cx);var fC=Cx.exports,Hv;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(Hv||(Hv={}));var eo;(function(t){t.Default="livekit",t.Room="livekit-room",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(eo||(eo={}));let Ve=fC.getLogger("livekit");Ve.setDefaultLevel(Hv.info);function ts(t){const e=fC.getLogger(t);return e.setDefaultLevel(Ve.getLevel()),e}fC.getLogger("lk-e2ee");function er(t,e){if(!t)throw new Error(e)}const eG=34028234663852886e22,tG=-34028234663852886e22,nG=4294967295,rG=2147483647,iG=-2147483648;function jh(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>rG||t<iG)throw new Error("invalid int 32: "+t)}function Xv(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>nG||t<0)throw new Error("invalid uint 32: "+t)}function Ix(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>eG||t<tG))throw new Error("invalid float 32: "+t)}const bx=Symbol("@bufbuild/protobuf/enum-type");function oG(t){const e=t[bx];return er(e,"missing enum type on enum object"),e}function Sx(t,e,n,r){t[bx]=wx(e,n.map(i=>({no:i.no,name:i.name,localName:t[i.no]})))}function wx(t,e,n){const r=Object.create(null),i=Object.create(null),o=[];for(const s of e){const a=Ax(s);o.push(a),r[s.name]=a,i[s.no]=a}return{typeName:t,values:o,findName(s){return r[s]},findNumber(s){return i[s]}}}function sG(t,e,n){const r={};for(const i of e){const o=Ax(i);r[o.localName]=o.no,r[o.no]=o.localName}return Sx(r,t,e),r}function Ax(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class me{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const r=this.getType(),i=r.runtime.bin,o=i.makeReadOptions(n);return i.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const r=this.getType(),i=r.runtime.json,o=i.makeReadOptions(n);return i.readMessage(r,e,o,this),this}fromJsonString(e,n){let r;try{r=JSON.parse(e)}catch(i){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(i instanceof Error?i.message:String(i)))}return this.fromJson(r,n)}toBinary(e){const n=this.getType(),r=n.runtime.bin,i=r.makeWriteOptions(e),o=i.writerFactory();return r.writeMessage(this,o,i),o.finish()}toJson(e){const n=this.getType(),r=n.runtime.json,i=r.makeWriteOptions(e);return r.writeMessage(this,i)}toJsonString(e){var n;const r=this.toJson(e);return JSON.stringify(r,null,(n=e==null?void 0:e.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function aG(t,e,n,r){var i;const o=(i=r==null?void 0:r.localName)!==null&&i!==void 0?i:e.substring(e.lastIndexOf(".")+1),s={[o]:function(a){t.util.initFields(this),t.util.initPartial(a,this)}}[o];return Object.setPrototypeOf(s.prototype,new me),Object.assign(s,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(a,c){return new s().fromBinary(a,c)},fromJson(a,c){return new s().fromJson(a,c)},fromJsonString(a,c){return new s().fromJsonString(a,c)},equals(a,c){return t.util.equals(s,a,c)}}),s}function cG(t,e,n,r){return{syntax:t,json:e,bin:n,util:r,makeMessageType(i,o,s){return aG(this,i,o,s)},makeEnum:sG,makeEnumType:wx,getEnumType:oG}}var q;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(q||(q={}));var Va;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Va||(Va={}));function lG(){let t=0,e=0;for(let r=0;r<28;r+=7){let i=this.buf[this.pos++];if(t|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,!(n&128))return this.assertBounds(),[t,e];for(let r=3;r<=31;r+=7){let i=this.buf[this.pos++];if(e|=(i&127)<<r,!(i&128))return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function zg(t,e,n){for(let o=0;o<28;o=o+7){const s=t>>>o,a=!(!(s>>>7)&&e==0),c=(a?s|128:s)&255;if(n.push(c),!a)return}const r=t>>>28&15|(e&7)<<4,i=!!(e>>3);if(n.push((i?r|128:r)&255),!!i){for(let o=3;o<31;o=o+7){const s=e>>>o,a=!!(s>>>7),c=(a?s|128:s)&255;if(n.push(c),!a)return}n.push(e>>>31&1)}}const Zh=4294967296;function $S(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let r=0,i=0;function o(s,a){const c=Number(t.slice(s,a));i*=n,r=r*n+c,r>=Zh&&(i=i+(r/Zh|0),r=r%Zh)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?Ex(r,i):pC(r,i)}function uG(t,e){let n=pC(t,e);const r=n.hi&2147483648;r&&(n=Ex(n.lo,n.hi));const i=kx(n.lo,n.hi);return r?"-"+i:i}function kx(t,e){if({lo:t,hi:e}=dG(t,e),e<=2097151)return String(Zh*e+t);const n=t&16777215,r=(t>>>24|e<<8)&16777215,i=e>>16&65535;let o=n+r*6777216+i*6710656,s=r+i*8147497,a=i*2;const c=1e7;return o>=c&&(s+=Math.floor(o/c),o%=c),s>=c&&(a+=Math.floor(s/c),s%=c),a.toString()+KS(s)+KS(o)}function dG(t,e){return{lo:t>>>0,hi:e>>>0}}function pC(t,e){return{lo:t|0,hi:e|0}}function Ex(t,e){return e=~e,t?t=~t+1:e+=1,pC(t,e)}const KS=t=>{const e=String(t);return"0000000".slice(e.length)+e};function JS(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function hG(){let t=this.buf[this.pos++],e=t&127;if(!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,!(t&128))return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,!(t&128))return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;t&128&&n<10;n++)t=this.buf[this.pos++];if(t&128)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function fG(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof XS!="object"||XS.BUF_BIGINT_DISABLE!=="1")){const i=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),s=BigInt("0"),a=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>o||l<i)throw new Error("int64 invalid: ".concat(c));return l},uParse(c){const l=typeof c=="bigint"?c:BigInt(c);if(l>a||l<s)throw new Error("uint64 invalid: ".concat(c));return l},enc(c){return t.setBigInt64(0,this.parse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(c){return t.setBigInt64(0,this.uParse(c),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigInt64(0,!0)},uDec(c,l){return t.setInt32(0,c,!0),t.setInt32(4,l,!0),t.getBigUint64(0,!0)}}}const n=i=>er(/^-?[0-9]+$/.test(i),"int64 invalid: ".concat(i)),r=i=>er(/^[0-9]+$/.test(i),"uint64 invalid: ".concat(i));return{zero:"0",supported:!1,parse(i){return typeof i!="string"&&(i=i.toString()),n(i),i},uParse(i){return typeof i!="string"&&(i=i.toString()),r(i),i},enc(i){return typeof i!="string"&&(i=i.toString()),n(i),$S(i)},uEnc(i){return typeof i!="string"&&(i=i.toString()),r(i),$S(i)},dec(i,o){return uG(i,o)},uDec(i,o){return kx(i,o)}}}const Me=fG();var Dt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(Dt||(Dt={}));class pG{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let i=0;i<this.chunks.length;i++)e+=this.chunks[i].length;let n=new Uint8Array(e),r=0;for(let i=0;i<this.chunks.length;i++)n.set(this.chunks[i],r),r+=this.chunks[i].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Xv(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return jh(e),JS(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){Ix(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Xv(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){jh(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return jh(e),e=(e<<1^e>>31)>>>0,JS(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Me.enc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),r=new DataView(n.buffer),i=Me.uEnc(e);return r.setInt32(0,i.lo,!0),r.setInt32(4,i.hi,!0),this.raw(n)}int64(e){let n=Me.enc(e);return zg(n.lo,n.hi,this.buf),this}sint64(e){let n=Me.enc(e),r=n.hi>>31,i=n.lo<<1^r,o=(n.hi<<1|n.lo>>>31)^r;return zg(i,o,this.buf),this}uint64(e){let n=Me.uEnc(e);return zg(n.lo,n.hi,this.buf),this}}class gG{constructor(e,n){this.varint64=lG,this.uint32=hG,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,r=e&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(e){let n=this.pos;switch(e){case Dt.Varint:for(;this.buf[this.pos++]&128;);break;case Dt.Bit64:this.pos+=4;case Dt.Bit32:this.pos+=4;break;case Dt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case Dt.StartGroup:let i;for(;(i=this.tag()[1])!==Dt.EndGroup;)this.skip(i);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return Me.dec(...this.varint64())}uint64(){return Me.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),r=-(e&1);return e=(e>>>1|(n&1)<<31)^r,n=n>>>1^r,Me.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return Me.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return Me.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function $v(t,e){return e instanceof me||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}q.DOUBLE,q.FLOAT,q.INT64,q.UINT64,q.INT32,q.UINT32,q.BOOL,q.STRING,q.BYTES;function hs(t,e,n){if(e===n)return!0;if(t==q.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}switch(t){case q.UINT64:case q.FIXED64:case q.INT64:case q.SFIXED64:case q.SINT64:return e==n}return!1}function Kv(t,e){switch(t){case q.BOOL:return!1;case q.UINT64:case q.FIXED64:case q.INT64:case q.SFIXED64:case q.SINT64:return e==0?Me.zero:"0";case q.DOUBLE:case q.FLOAT:return 0;case q.BYTES:return new Uint8Array(0);case q.STRING:return"";default:return 0}}function Tx(t,e){const n=e===void 0;let r=Dt.Varint,i=e===0;switch(t){case q.STRING:i=n||!e.length,r=Dt.LengthDelimited;break;case q.BOOL:i=e===!1;break;case q.DOUBLE:r=Dt.Bit64;break;case q.FLOAT:r=Dt.Bit32;break;case q.INT64:i=n||e==0;break;case q.UINT64:i=n||e==0;break;case q.FIXED64:i=n||e==0,r=Dt.Bit64;break;case q.BYTES:i=n||!e.byteLength,r=Dt.LengthDelimited;break;case q.FIXED32:r=Dt.Bit32;break;case q.SFIXED32:r=Dt.Bit32;break;case q.SFIXED64:i=n||e==0,r=Dt.Bit64;break;case q.SINT64:i=n||e==0;break}const o=q[t].toLowerCase();return[r,o,n||i]}const cc=Symbol("@bufbuild/protobuf/unknown-fields"),YS={readUnknownFields:!0,readerFactory:t=>new gG(t)},QS={writeUnknownFields:!0,writerFactory:()=>new pG};function mG(t){return t?Object.assign(Object.assign({},YS),t):YS}function vG(t){return t?Object.assign(Object.assign({},QS),t):QS}function yG(){return{makeReadOptions:mG,makeWriteOptions:vG,listUnknownFields(t){var e;return(e=t[cc])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[cc]},writeUnknownFields(t,e){const r=t[cc];if(r)for(const i of r)e.tag(i.no,i.wireType).raw(i.data)},onUnknownField(t,e,n,r){const i=t;Array.isArray(i[cc])||(i[cc]=[]),i[cc].push({no:e,wireType:n,data:r})},readMessage(t,e,n,r){const i=t.getType(),o=n===void 0?e.len:e.pos+n;for(;e.pos<o;){const[s,a]=e.tag(),c=i.fields.find(s);if(!c){const h=e.skip(a);r.readUnknownFields&&this.onUnknownField(t,s,a,h);continue}let l=t,u=c.repeated,d=c.localName;switch(c.oneof&&(l=l[c.oneof.localName],l.case!=d&&delete l.value,l.case=d,d="value"),c.kind){case"scalar":case"enum":const h=c.kind=="enum"?q.INT32:c.T;let f=Jf;if(c.kind=="scalar"&&c.L>0&&(f=IG),u){let m=l[d];if(a==Dt.LengthDelimited&&h!=q.STRING&&h!=q.BYTES){let v=e.uint32()+e.pos;for(;e.pos<v;)m.push(f(e,h))}else m.push(f(e,h))}else l[d]=f(e,h);break;case"message":const p=c.T;u?l[d].push(zh(e,new p,r)):l[d]instanceof me?zh(e,l[d],r):(l[d]=zh(e,new p,r),p.fieldWrapper&&!c.oneof&&!c.repeated&&(l[d]=p.fieldWrapper.unwrapField(l[d])));break;case"map":let[g,C]=CG(c,e,r);l[d][g]=C;break}}}}}function zh(t,e,n){return e.getType().runtime.bin.readMessage(e,t,t.uint32(),n),e}function CG(t,e,n){const r=e.uint32(),i=e.pos+r;let o,s;for(;e.pos<i;){let[a]=e.tag();switch(a){case 1:o=Jf(e,t.K);break;case 2:switch(t.V.kind){case"scalar":s=Jf(e,t.V.T);break;case"enum":s=e.int32();break;case"message":s=zh(e,new t.V.T,n);break}break}}if(o===void 0){let a=Kv(t.K,Va.BIGINT);o=t.K==q.BOOL?a.toString():a}if(typeof o!="string"&&typeof o!="number"&&(o=o.toString()),s===void 0)switch(t.V.kind){case"scalar":s=Kv(t.V.T,Va.BIGINT);break;case"enum":s=0;break;case"message":s=new t.V.T;break}return[o,s]}function IG(t,e){const n=Jf(t,e);return typeof n=="bigint"?n.toString():n}function Jf(t,e){switch(e){case q.STRING:return t.string();case q.BOOL:return t.bool();case q.DOUBLE:return t.double();case q.FLOAT:return t.float();case q.INT32:return t.int32();case q.INT64:return t.int64();case q.UINT64:return t.uint64();case q.FIXED64:return t.fixed64();case q.BYTES:return t.bytes();case q.FIXED32:return t.fixed32();case q.SFIXED32:return t.sfixed32();case q.SFIXED64:return t.sfixed64();case q.SINT64:return t.sint64();case q.UINT32:return t.uint32();case q.SINT32:return t.sint32()}}function bG(t,e,n,r,i){t.tag(n.no,Dt.LengthDelimited),t.fork();let o=r;switch(n.K){case q.INT32:case q.FIXED32:case q.UINT32:case q.SFIXED32:case q.SINT32:o=Number.parseInt(r);break;case q.BOOL:er(r=="true"||r=="false"),o=r=="true";break}switch(wu(t,n.K,1,o,!0),n.V.kind){case"scalar":wu(t,n.V.T,2,i,!0);break;case"enum":wu(t,q.INT32,2,i,!0);break;case"message":Jv(t,e,n.V.T,2,i);break}t.join()}function Jv(t,e,n,r,i){if(i!==void 0){const o=$v(n,i);t.tag(r,Dt.LengthDelimited).bytes(o.toBinary(e))}}function wu(t,e,n,r,i){let[o,s,a]=Tx(e,r);(!a||i)&&t.tag(n,o)[s](r)}function SG(t,e,n,r){if(!r.length)return;t.tag(n,Dt.LengthDelimited).fork();let[,i]=Tx(e);for(let o=0;o<r.length;o++)t[i](r[o]);t.join()}function wG(){return Object.assign(Object.assign({},yG()),{writeMessage(t,e,n){const r=t.getType();for(const i of r.fields.byNumber()){let o,s=i.repeated,a=i.localName;if(i.oneof){const c=t[i.oneof.localName];if(c.case!==a)continue;o=c.value}else o=t[a];switch(i.kind){case"scalar":case"enum":let c=i.kind=="enum"?q.INT32:i.T;if(s)if(i.packed)SG(e,c,i.no,o);else for(const l of o)wu(e,c,i.no,l,!0);else o!==void 0&&wu(e,c,i.no,o,!!i.oneof||i.opt);break;case"message":if(s)for(const l of o)Jv(e,n,i.T,i.no,l);else Jv(e,n,i.T,i.no,o);break;case"map":for(const[l,u]of Object.entries(o))bG(e,n,i,l,u);break}}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e}})}let vo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Lp=[];for(let t=0;t<vo.length;t++)Lp[vo[t].charCodeAt(0)]=t;Lp[45]=vo.indexOf("+");Lp[95]=vo.indexOf("/");const xx={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),r=0,i=0,o,s=0;for(let a=0;a<t.length;a++){if(o=Lp[t.charCodeAt(a)],o===void 0)switch(t[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(i){case 0:s=o,i=1;break;case 1:n[r++]=s<<2|(o&48)>>4,s=o,i=2;break;case 2:n[r++]=(s&15)<<4|(o&60)>>2,s=o,i=3;break;case 3:n[r++]=(s&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string.");return n.subarray(0,r)},enc(t){let e="",n=0,r,i=0;for(let o=0;o<t.length;o++)switch(r=t[o],n){case 0:e+=vo[r>>2],i=(r&3)<<4,n=1;break;case 1:e+=vo[i|r>>4],i=(r&15)<<2,n=2;break;case 2:e+=vo[i|r>>6],e+=vo[r&63],n=0;break}return n&&(e+=vo[i],e+="=",n==1&&(e+="=")),e}},qS={ignoreUnknownFields:!1},ew={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function AG(t){return t?Object.assign(Object.assign({},qS),t):qS}function kG(t){return t?Object.assign(Object.assign({},ew),t):ew}function EG(t){const e=t(TG,tw);return{makeReadOptions:AG,makeWriteOptions:kG,readMessage(n,r,i,o){if(r==null||Array.isArray(r)||typeof r!="object")throw new Error("cannot decode message ".concat(n.typeName," from JSON: ").concat(this.debug(r)));o=o??new n;const s={};for(const[a,c]of Object.entries(r)){const l=n.fields.findJsonName(a);if(!l){if(!i.ignoreUnknownFields)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: key "').concat(a,'" is unknown'));continue}let u=l.localName,d=o;if(l.oneof){if(c===null&&l.kind=="scalar")continue;const h=s[l.oneof.localName];if(h)throw new Error("cannot decode message ".concat(n.typeName,' from JSON: multiple keys for oneof "').concat(l.oneof.name,'" present: "').concat(h,'", "').concat(a,'"'));s[l.oneof.localName]=a,d=d[l.oneof.localName]={case:u},u="value"}if(l.repeated){if(c===null)continue;if(!Array.isArray(c))throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const h=d[u];for(const f of c){if(f===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(f)));let p;switch(l.kind){case"message":p=l.T.fromJson(f,i);break;case"enum":if(p=Hg(l.T,f,i.ignoreUnknownFields),p===void 0)continue;break;case"scalar":try{p=Zl(l.T,f,l.L)}catch(g){let C="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(f));throw g instanceof Error&&g.message.length>0&&(C+=": ".concat(g.message)),new Error(C)}break}h.push(p)}}else if(l.kind=="map"){if(c===null)continue;if(Array.isArray(c)||typeof c!="object")throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c)));const h=d[u];for(const[f,p]of Object.entries(c)){if(p===null)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: map value null"));let g;switch(l.V.kind){case"message":g=l.V.T.fromJson(p,i);break;case"enum":if(g=Hg(l.V.T,p,i.ignoreUnknownFields),g===void 0)continue;break;case"scalar":try{g=Zl(l.V.T,p,Va.BIGINT)}catch(C){let m="cannot decode map value for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(m+=": ".concat(C.message)),new Error(m)}break}try{h[Zl(l.K,l.K==q.BOOL?f=="true"?!0:f=="false"?!1:f:f,Va.BIGINT).toString()]=g}catch(C){let m="cannot decode map key for field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw C instanceof Error&&C.message.length>0&&(m+=": ".concat(C.message)),new Error(m)}}}else switch(l.kind){case"message":const h=l.T;if(c===null&&h.typeName!="google.protobuf.Value"){if(l.oneof)throw new Error("cannot decode field ".concat(n.typeName,".").concat(l.name,' from JSON: null is invalid for oneof field "').concat(a,'"'));continue}d[u]instanceof me?d[u].fromJson(c,i):(d[u]=h.fromJson(c,i),h.fieldWrapper&&!l.oneof&&(d[u]=h.fieldWrapper.unwrapField(d[u])));break;case"enum":const f=Hg(l.T,c,i.ignoreUnknownFields);f!==void 0&&(d[u]=f);break;case"scalar":try{d[u]=Zl(l.T,c,l.L)}catch(p){let g="cannot decode field ".concat(n.typeName,".").concat(l.name," from JSON: ").concat(this.debug(c));throw p instanceof Error&&p.message.length>0&&(g+=": ".concat(p.message)),new Error(g)}break}}return o},writeMessage(n,r){const i=n.getType(),o={};let s;try{for(const a of i.fields.byMember()){let c;if(a.kind=="oneof"){const l=n[a.localName];if(l.value===void 0)continue;if(s=a.findField(l.case),!s)throw"oneof case not found: "+l.case;c=e(s,l.value,r)}else s=a,c=e(s,n[s.localName],r);c!==void 0&&(o[r.useProtoFieldName?s.name:s.jsonName]=c)}}catch(a){const c=s?"cannot encode field ".concat(i.typeName,".").concat(s.name," to JSON"):"cannot encode message ".concat(i.typeName," to JSON"),l=a instanceof Error?a.message:String(a);throw new Error(c+(l.length>0?": ".concat(l):""))}return o},readScalar:Zl,writeScalar:tw,debug:Px}}function Px(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function Zl(t,e,n){switch(t){case q.DOUBLE:case q.FLOAT:if(e===null)return 0;if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==q.FLOAT&&Ix(r),r;case q.INT32:case q.FIXED32:case q.SFIXED32:case q.SINT32:case q.UINT32:if(e===null)return 0;let i;if(typeof e=="number"?i=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(i=Number(e)),i===void 0)break;return t==q.UINT32?Xv(i):jh(i),i;case q.INT64:case q.SFIXED64:case q.SINT64:if(e===null)return Me.zero;if(typeof e!="number"&&typeof e!="string")break;const o=Me.parse(e);return n?o.toString():o;case q.FIXED64:case q.UINT64:if(e===null)return Me.zero;if(typeof e!="number"&&typeof e!="string")break;const s=Me.uParse(e);return n?s.toString():s;case q.BOOL:if(e===null)return!1;if(typeof e!="boolean")break;return e;case q.STRING:if(e===null)return"";if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case q.BYTES:if(e===null||e==="")return new Uint8Array(0);if(typeof e!="string")break;return xx.dec(e)}throw new Error}function Hg(t,e,n){if(e===null)return 0;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r||n)return r==null?void 0:r.no;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(Px(e)))}function TG(t,e,n,r){var i;if(e===void 0)return e;if(e===0&&!n)return;if(r)return e;if(t.typeName=="google.protobuf.NullValue")return null;const o=t.findNumber(e);return(i=o==null?void 0:o.name)!==null&&i!==void 0?i:e}function tw(t,e,n){if(e!==void 0)switch(t){case q.INT32:case q.SFIXED32:case q.SINT32:case q.FIXED32:case q.UINT32:return er(typeof e=="number"),e!=0||n?e:void 0;case q.FLOAT:case q.DOUBLE:return er(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e!==0||n?e:void 0;case q.STRING:return er(typeof e=="string"),e.length>0||n?e:void 0;case q.BOOL:return er(typeof e=="boolean"),e||n?e:void 0;case q.UINT64:case q.FIXED64:case q.INT64:case q.SFIXED64:case q.SINT64:return er(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),n||e!=0?e.toString(10):void 0;case q.BYTES:return er(e instanceof Uint8Array),n||e.byteLength>0?xx.enc(e):void 0}}function xG(){return EG((t,e)=>function(r,i,o){if(r.kind=="map"){const s={};switch(r.V.kind){case"scalar":for(const[c,l]of Object.entries(i)){const u=e(r.V.T,l,!0);er(u!==void 0),s[c.toString()]=u}break;case"message":for(const[c,l]of Object.entries(i))s[c.toString()]=l.toJson(o);break;case"enum":const a=r.V.T;for(const[c,l]of Object.entries(i)){er(l===void 0||typeof l=="number");const u=t(a,l,!0,o.enumAsInteger);er(u!==void 0),s[c.toString()]=u}break}return o.emitDefaultValues||Object.keys(s).length>0?s:void 0}else if(r.repeated){const s=[];switch(r.kind){case"scalar":for(let a=0;a<i.length;a++)s.push(e(r.T,i[a],!0));break;case"enum":for(let a=0;a<i.length;a++)s.push(t(r.T,i[a],!0,o.enumAsInteger));break;case"message":for(let a=0;a<i.length;a++)s.push($v(r.T,i[a]).toJson(o));break}return o.emitDefaultValues||s.length>0?s:void 0}else switch(r.kind){case"scalar":return e(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues);case"enum":return t(r.T,i,!!r.oneof||r.opt||o.emitDefaultValues,o.enumAsInteger);case"message":return i!==void 0?$v(r.T,i).toJson(o):void 0}})}function PG(){return{setEnumType:Sx,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const r of n.fields.byMember()){const i=r.localName,o=e,s=t;if(s[i]!==void 0)switch(r.kind){case"oneof":const a=s[i].case;if(a===void 0)continue;const c=r.findField(a);let l=s[i].value;c&&c.kind=="message"&&!(l instanceof c.T)?l=new c.T(l):c&&c.kind==="scalar"&&c.T===q.BYTES&&(l=zl(l)),o[i]={case:a,value:l};break;case"scalar":case"enum":let u=s[i];r.T===q.BYTES&&(u=r.repeated?u.map(zl):zl(u)),o[i]=u;break;case"map":switch(r.V.kind){case"scalar":case"enum":if(r.V.T===q.BYTES)for(const[f,p]of Object.entries(s[i]))o[i][f]=zl(p);else Object.assign(o[i],s[i]);break;case"message":const h=r.V.T;for(const f of Object.keys(s[i])){let p=s[i][f];h.fieldWrapper||(p=new h(p)),o[i][f]=p}break}break;case"message":const d=r.T;if(r.repeated)o[i]=s[i].map(h=>h instanceof d?h:new d(h));else if(s[i]!==void 0){const h=s[i];d.fieldWrapper?d.typeName==="google.protobuf.BytesValue"?o[i]=zl(h):o[i]=h:o[i]=h instanceof d?h:new d(h)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(r=>{const i=e[r.localName],o=n[r.localName];if(r.repeated){if(i.length!==o.length)return!1;switch(r.kind){case"message":return i.every((s,a)=>r.T.equals(s,o[a]));case"scalar":return i.every((s,a)=>hs(r.T,s,o[a]));case"enum":return i.every((s,a)=>hs(q.INT32,s,o[a]))}throw new Error("repeated cannot contain ".concat(r.kind))}switch(r.kind){case"message":return r.T.equals(i,o);case"enum":return hs(q.INT32,i,o);case"scalar":return hs(r.T,i,o);case"oneof":if(i.case!==o.case)return!1;const s=r.findField(i.case);if(s===void 0)return!0;switch(s.kind){case"message":return s.T.equals(i.value,o.value);case"enum":return hs(q.INT32,i.value,o.value);case"scalar":return hs(s.T,i.value,o.value)}throw new Error("oneof cannot contain ".concat(s.kind));case"map":const a=Object.keys(i).concat(Object.keys(o));switch(r.V.kind){case"message":const c=r.V.T;return a.every(u=>c.equals(i[u],o[u]));case"enum":return a.every(u=>hs(q.INT32,i[u],o[u]));case"scalar":const l=r.V.T;return a.every(u=>hs(l,i[u],o[u]))}break}})},clone(t){const e=t.getType(),n=new e,r=n;for(const i of e.fields.byMember()){const o=t[i.localName];let s;if(i.repeated)s=o.map(uh);else if(i.kind=="map"){s=r[i.localName];for(const[a,c]of Object.entries(o))s[a]=uh(c)}else i.kind=="oneof"?s=i.findField(o.case)?{case:o.case,value:uh(o.value)}:{case:void 0}:s=uh(o);r[i.localName]=s}return n}}}function uh(t){if(t===void 0)return t;if(t instanceof me)return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function zl(t){return t instanceof Uint8Array?t:new Uint8Array(t)}class RG{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const r of this.list())n[r.jsonName]=n[r.name]=r;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const r of this.list())n[r.no]=r;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const r of this.list())r.oneof?r.oneof!==n&&(n=r.oneof,e.push(n)):e.push(r)}return this.members}}function Rx(t,e){const n=Nx(t);return e?n:LG(DG(n))}function NG(t){return Rx(t,!1)}const _G=Nx;function Nx(t){let e=!1;const n=[];for(let r=0;r<t.length;r++){let i=t.charAt(r);switch(i){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(i),e=!1;break;default:e&&(e=!1,i=i.toUpperCase()),n.push(i);break}}return n.join("")}const OG=new Set(["constructor","toString","toJSON","valueOf"]),MG=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),_x=t=>"".concat(t,"$"),DG=t=>MG.has(t)?_x(t):t,LG=t=>OG.has(t)?_x(t):t;class BG{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=NG(e)}addField(e){er(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}const P=cG("proto3",xG(),wG(),Object.assign(Object.assign({},PG()),{newFieldList(t){return new RG(t,FG)},initFields(t){for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,r=t;if(e.repeated){r[n]=[];continue}switch(e.kind){case"oneof":r[n]={case:void 0};break;case"enum":r[n]=0;break;case"map":r[n]={};break;case"scalar":r[n]=Kv(e.T,e.L);break}}}}));function FG(t){var e,n,r,i;const o=[];let s;for(const a of typeof t=="function"?t():t){const c=a;if(c.localName=Rx(a.name,a.oneof!==void 0),c.jsonName=(e=a.jsonName)!==null&&e!==void 0?e:_G(a.name),c.repeated=(n=a.repeated)!==null&&n!==void 0?n:!1,a.kind=="scalar"&&(c.L=(r=a.L)!==null&&r!==void 0?r:Va.BIGINT),c.packed=(i=a.packed)!==null&&i!==void 0?i:a.kind=="enum"||a.kind=="scalar"&&a.T!=q.BYTES&&a.T!=q.STRING,a.oneof!==void 0){const l=typeof a.oneof=="string"?a.oneof:a.oneof.name;(!s||s.name!=l)&&(s=new BG(l)),c.oneof=s,s.addField(c)}o.push(c)}return o}class nn extends me{constructor(e){super(),this.seconds=Me.zero,this.nanos=0,P.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(P.json.debug(e)));const r=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!r)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const i=Date.parse(r[1]+"-"+r[2]+"-"+r[3]+"T"+r[4]+":"+r[5]+":"+r[6]+(r[8]?r[8]:"Z"));if(Number.isNaN(i))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(i<Date.parse("0001-01-01T00:00:00Z")||i>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=Me.parse(i/1e3),this.nanos=0,r[7]&&(this.nanos=parseInt("1"+r[7]+"0".repeat(9-r[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let r="Z";if(this.nanos>0){const i=(this.nanos+1e9).toString().substring(1);i.substring(3)==="000000"?r="."+i.substring(0,3)+"Z":i.substring(6)==="000"?r="."+i.substring(0,6)+"Z":r="."+i+"Z"}return new Date(n).toISOString().replace(".000Z",r)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return nn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new nn({seconds:Me.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new nn().fromBinary(e,n)}static fromJson(e,n){return new nn().fromJson(e,n)}static fromJsonString(e,n){return new nn().fromJsonString(e,n)}static equals(e,n){return P.util.equals(nn,e,n)}}nn.runtime=P;nn.typeName="google.protobuf.Timestamp";nn.fields=P.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);var Yv;(function(t){t[t.DEFAULT_AC=0]="DEFAULT_AC",t[t.OPUS=1]="OPUS",t[t.AAC=2]="AAC"})(Yv||(Yv={}));P.util.setEnumType(Yv,"livekit.AudioCodec",[{no:0,name:"DEFAULT_AC"},{no:1,name:"OPUS"},{no:2,name:"AAC"}]);var Qv;(function(t){t[t.DEFAULT_VC=0]="DEFAULT_VC",t[t.H264_BASELINE=1]="H264_BASELINE",t[t.H264_MAIN=2]="H264_MAIN",t[t.H264_HIGH=3]="H264_HIGH",t[t.VP8=4]="VP8"})(Qv||(Qv={}));P.util.setEnumType(Qv,"livekit.VideoCodec",[{no:0,name:"DEFAULT_VC"},{no:1,name:"H264_BASELINE"},{no:2,name:"H264_MAIN"},{no:3,name:"H264_HIGH"},{no:4,name:"VP8"}]);var qv;(function(t){t[t.IC_DEFAULT=0]="IC_DEFAULT",t[t.IC_JPEG=1]="IC_JPEG"})(qv||(qv={}));P.util.setEnumType(qv,"livekit.ImageCodec",[{no:0,name:"IC_DEFAULT"},{no:1,name:"IC_JPEG"}]);var En;(function(t){t[t.AUDIO=0]="AUDIO",t[t.VIDEO=1]="VIDEO",t[t.DATA=2]="DATA"})(En||(En={}));P.util.setEnumType(En,"livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]);var Lt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.CAMERA=1]="CAMERA",t[t.MICROPHONE=2]="MICROPHONE",t[t.SCREEN_SHARE=3]="SCREEN_SHARE",t[t.SCREEN_SHARE_AUDIO=4]="SCREEN_SHARE_AUDIO"})(Lt||(Lt={}));P.util.setEnumType(Lt,"livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]);var Jt;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH",t[t.OFF=3]="OFF"})(Jt||(Jt={}));P.util.setEnumType(Jt,"livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]);var Io;(function(t){t[t.POOR=0]="POOR",t[t.GOOD=1]="GOOD",t[t.EXCELLENT=2]="EXCELLENT",t[t.LOST=3]="LOST"})(Io||(Io={}));P.util.setEnumType(Io,"livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]);var bi;(function(t){t[t.UNSET=0]="UNSET",t[t.DISABLED=1]="DISABLED",t[t.ENABLED=2]="ENABLED"})(bi||(bi={}));P.util.setEnumType(bi,"livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]);var Ho;(function(t){t[t.UNKNOWN_REASON=0]="UNKNOWN_REASON",t[t.CLIENT_INITIATED=1]="CLIENT_INITIATED",t[t.DUPLICATE_IDENTITY=2]="DUPLICATE_IDENTITY",t[t.SERVER_SHUTDOWN=3]="SERVER_SHUTDOWN",t[t.PARTICIPANT_REMOVED=4]="PARTICIPANT_REMOVED",t[t.ROOM_DELETED=5]="ROOM_DELETED",t[t.STATE_MISMATCH=6]="STATE_MISMATCH",t[t.JOIN_FAILURE=7]="JOIN_FAILURE"})(Ho||(Ho={}));P.util.setEnumType(Ho,"livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"}]);var po;(function(t){t[t.RR_UNKNOWN=0]="RR_UNKNOWN",t[t.RR_SIGNAL_DISCONNECTED=1]="RR_SIGNAL_DISCONNECTED",t[t.RR_PUBLISHER_FAILED=2]="RR_PUBLISHER_FAILED",t[t.RR_SUBSCRIBER_FAILED=3]="RR_SUBSCRIBER_FAILED",t[t.RR_SWITCH_CANDIDATE=4]="RR_SWITCH_CANDIDATE"})(po||(po={}));P.util.setEnumType(po,"livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]);var id;(function(t){t[t.SE_UNKNOWN=0]="SE_UNKNOWN",t[t.SE_CODEC_UNSUPPORTED=1]="SE_CODEC_UNSUPPORTED",t[t.SE_TRACK_NOTFOUND=2]="SE_TRACK_NOTFOUND"})(id||(id={}));P.util.setEnumType(id,"livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]);let kl=class cu extends me{constructor(e){super(),this.sid="",this.name="",this.emptyTimeout=0,this.maxParticipants=0,this.creationTime=Me.zero,this.turnPassword="",this.enabledCodecs=[],this.metadata="",this.numParticipants=0,this.numPublishers=0,this.activeRecording=!1,P.util.initPartial(e,this)}static fromBinary(e,n){return new cu().fromBinary(e,n)}static fromJson(e,n){return new cu().fromJson(e,n)}static fromJsonString(e,n){return new cu().fromJsonString(e,n)}static equals(e,n){return P.util.equals(cu,e,n)}};kl.runtime=P;kl.typeName="livekit.Room";kl.fields=P.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:li,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8}]);class li extends me{constructor(e){super(),this.mime="",this.fmtpLine="",P.util.initPartial(e,this)}static fromBinary(e,n){return new li().fromBinary(e,n)}static fromJson(e,n){return new li().fromJson(e,n)}static fromJsonString(e,n){return new li().fromJsonString(e,n)}static equals(e,n){return P.util.equals(li,e,n)}}li.runtime=P;li.typeName="livekit.Codec";li.fields=P.util.newFieldList(()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]);class Rs extends me{constructor(e){super(),this.enabled=!1,this.min=0,this.max=0,P.util.initPartial(e,this)}static fromBinary(e,n){return new Rs().fromBinary(e,n)}static fromJson(e,n){return new Rs().fromJson(e,n)}static fromJsonString(e,n){return new Rs().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Rs,e,n)}}Rs.runtime=P;Rs.typeName="livekit.PlayoutDelay";Rs.fields=P.util.newFieldList(()=>[{no:1,name:"enabled",kind:"scalar",T:8},{no:2,name:"min",kind:"scalar",T:13},{no:3,name:"max",kind:"scalar",T:13}]);class bo extends me{constructor(e){super(),this.canSubscribe=!1,this.canPublish=!1,this.canPublishData=!1,this.canPublishSources=[],this.hidden=!1,this.recorder=!1,this.canUpdateMetadata=!1,this.agent=!1,P.util.initPartial(e,this)}static fromBinary(e,n){return new bo().fromBinary(e,n)}static fromJson(e,n){return new bo().fromJson(e,n)}static fromJsonString(e,n){return new bo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(bo,e,n)}}bo.runtime=P;bo.typeName="livekit.ParticipantPermission";bo.fields=P.util.newFieldList(()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:P.getEnumType(Lt),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8}]);class Ar extends me{constructor(e){super(),this.sid="",this.identity="",this.state=Ga.JOINING,this.tracks=[],this.metadata="",this.joinedAt=Me.zero,this.name="",this.version=0,this.region="",this.isPublisher=!1,P.util.initPartial(e,this)}static fromBinary(e,n){return new Ar().fromBinary(e,n)}static fromJson(e,n){return new Ar().fromJson(e,n)}static fromJsonString(e,n){return new Ar().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ar,e,n)}}Ar.runtime=P;Ar.typeName="livekit.ParticipantInfo";Ar.fields=P.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:P.getEnumType(Ga)},{no:4,name:"tracks",kind:"message",T:nr,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:bo},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8}]);var Ga;(function(t){t[t.JOINING=0]="JOINING",t[t.JOINED=1]="JOINED",t[t.ACTIVE=2]="ACTIVE",t[t.DISCONNECTED=3]="DISCONNECTED"})(Ga||(Ga={}));P.util.setEnumType(Ga,"livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]);class Ns extends me{constructor(e){super(),P.util.initPartial(e,this)}static fromBinary(e,n){return new Ns().fromBinary(e,n)}static fromJson(e,n){return new Ns().fromJson(e,n)}static fromJsonString(e,n){return new Ns().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ns,e,n)}}Ns.runtime=P;Ns.typeName="livekit.Encryption";Ns.fields=P.util.newFieldList(()=>[]);var un;(function(t){t[t.NONE=0]="NONE",t[t.GCM=1]="GCM",t[t.CUSTOM=2]="CUSTOM"})(un||(un={}));P.util.setEnumType(un,"livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]);class So extends me{constructor(e){super(),this.mimeType="",this.mid="",this.cid="",this.layers=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new So().fromBinary(e,n)}static fromJson(e,n){return new So().fromJson(e,n)}static fromJsonString(e,n){return new So().fromJsonString(e,n)}static equals(e,n){return P.util.equals(So,e,n)}}So.runtime=P;So.typeName="livekit.SimulcastCodecInfo";So.fields=P.util.newFieldList(()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Vn,repeated:!0}]);class nr extends me{constructor(e){super(),this.sid="",this.type=En.AUDIO,this.name="",this.muted=!1,this.width=0,this.height=0,this.simulcast=!1,this.disableDtx=!1,this.source=Lt.UNKNOWN,this.layers=[],this.mimeType="",this.mid="",this.codecs=[],this.stereo=!1,this.disableRed=!1,this.encryption=un.NONE,this.stream="",P.util.initPartial(e,this)}static fromBinary(e,n){return new nr().fromBinary(e,n)}static fromJson(e,n){return new nr().fromJson(e,n)}static fromJsonString(e,n){return new nr().fromJsonString(e,n)}static equals(e,n){return P.util.equals(nr,e,n)}}nr.runtime=P;nr.typeName="livekit.TrackInfo";nr.fields=P.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:P.getEnumType(En)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:P.getEnumType(Lt)},{no:10,name:"layers",kind:"message",T:Vn,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:So,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:P.getEnumType(un)},{no:17,name:"stream",kind:"scalar",T:9}]);class Vn extends me{constructor(e){super(),this.quality=Jt.LOW,this.width=0,this.height=0,this.bitrate=0,this.ssrc=0,P.util.initPartial(e,this)}static fromBinary(e,n){return new Vn().fromBinary(e,n)}static fromJson(e,n){return new Vn().fromJson(e,n)}static fromJsonString(e,n){return new Vn().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Vn,e,n)}}Vn.runtime=P;Vn.typeName="livekit.VideoLayer";Vn.fields=P.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:P.getEnumType(Jt)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13}]);class Mi extends me{constructor(e){super(),this.kind=Ht.RELIABLE,this.value={case:void 0},P.util.initPartial(e,this)}static fromBinary(e,n){return new Mi().fromBinary(e,n)}static fromJson(e,n){return new Mi().fromJson(e,n)}static fromJsonString(e,n){return new Mi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Mi,e,n)}}Mi.runtime=P;Mi.typeName="livekit.DataPacket";Mi.fields=P.util.newFieldList(()=>[{no:1,name:"kind",kind:"enum",T:P.getEnumType(Ht)},{no:2,name:"user",kind:"message",T:Li,oneof:"value"},{no:3,name:"speaker",kind:"message",T:wo,oneof:"value"}]);var Ht;(function(t){t[t.RELIABLE=0]="RELIABLE",t[t.LOSSY=1]="LOSSY"})(Ht||(Ht={}));P.util.setEnumType(Ht,"livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]);class wo extends me{constructor(e){super(),this.speakers=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new wo().fromBinary(e,n)}static fromJson(e,n){return new wo().fromJson(e,n)}static fromJsonString(e,n){return new wo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(wo,e,n)}}wo.runtime=P;wo.typeName="livekit.ActiveSpeakerUpdate";wo.fields=P.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Di,repeated:!0}]);class Di extends me{constructor(e){super(),this.sid="",this.level=0,this.active=!1,P.util.initPartial(e,this)}static fromBinary(e,n){return new Di().fromBinary(e,n)}static fromJson(e,n){return new Di().fromJson(e,n)}static fromJsonString(e,n){return new Di().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Di,e,n)}}Di.runtime=P;Di.typeName="livekit.SpeakerInfo";Di.fields=P.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]);class Li extends me{constructor(e){super(),this.participantSid="",this.participantIdentity="",this.payload=new Uint8Array(0),this.destinationSids=[],this.destinationIdentities=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Li().fromBinary(e,n)}static fromJson(e,n){return new Li().fromJson(e,n)}static fromJsonString(e,n){return new Li().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Li,e,n)}}Li.runtime=P;Li.typeName="livekit.UserPacket";Li.fields=P.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0}]);class Bi extends me{constructor(e){super(),this.participantSid="",this.trackSids=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Bi().fromBinary(e,n)}static fromJson(e,n){return new Bi().fromJson(e,n)}static fromJsonString(e,n){return new Bi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Bi,e,n)}}Bi.runtime=P;Bi.typeName="livekit.ParticipantTracks";Bi.fields=P.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]);class Ao extends me{constructor(e){super(),this.edition=sl.Standard,this.version="",this.protocol=0,this.region="",this.nodeId="",this.debugInfo="",P.util.initPartial(e,this)}static fromBinary(e,n){return new Ao().fromBinary(e,n)}static fromJson(e,n){return new Ao().fromJson(e,n)}static fromJsonString(e,n){return new Ao().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ao,e,n)}}Ao.runtime=P;Ao.typeName="livekit.ServerInfo";Ao.fields=P.util.newFieldList(()=>[{no:1,name:"edition",kind:"enum",T:P.getEnumType(sl)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9}]);var sl;(function(t){t[t.Standard=0]="Standard",t[t.Cloud=1]="Cloud"})(sl||(sl={}));P.util.setEnumType(sl,"livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]);class ko extends me{constructor(e){super(),this.sdk=al.UNKNOWN,this.version="",this.protocol=0,this.os="",this.osVersion="",this.deviceModel="",this.browser="",this.browserVersion="",this.address="",this.network="",P.util.initPartial(e,this)}static fromBinary(e,n){return new ko().fromBinary(e,n)}static fromJson(e,n){return new ko().fromJson(e,n)}static fromJsonString(e,n){return new ko().fromJsonString(e,n)}static equals(e,n){return P.util.equals(ko,e,n)}}ko.runtime=P;ko.typeName="livekit.ClientInfo";ko.fields=P.util.newFieldList(()=>[{no:1,name:"sdk",kind:"enum",T:P.getEnumType(al)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9}]);var al;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.JS=1]="JS",t[t.SWIFT=2]="SWIFT",t[t.ANDROID=3]="ANDROID",t[t.FLUTTER=4]="FLUTTER",t[t.GO=5]="GO",t[t.UNITY=6]="UNITY",t[t.REACT_NATIVE=7]="REACT_NATIVE",t[t.RUST=8]="RUST",t[t.PYTHON=9]="PYTHON",t[t.CPP=10]="CPP"})(al||(al={}));P.util.setEnumType(al,"livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"}]);class Fi extends me{constructor(e){super(),this.resumeConnection=bi.UNSET,this.forceRelay=bi.UNSET,P.util.initPartial(e,this)}static fromBinary(e,n){return new Fi().fromBinary(e,n)}static fromJson(e,n){return new Fi().fromJson(e,n)}static fromJsonString(e,n){return new Fi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Fi,e,n)}}Fi.runtime=P;Fi.typeName="livekit.ClientConfiguration";Fi.fields=P.util.newFieldList(()=>[{no:1,name:"video",kind:"message",T:Ui},{no:2,name:"screen",kind:"message",T:Ui},{no:3,name:"resume_connection",kind:"enum",T:P.getEnumType(bi)},{no:4,name:"disabled_codecs",kind:"message",T:Eo},{no:5,name:"force_relay",kind:"enum",T:P.getEnumType(bi)}]);class Ui extends me{constructor(e){super(),this.hardwareEncoder=bi.UNSET,P.util.initPartial(e,this)}static fromBinary(e,n){return new Ui().fromBinary(e,n)}static fromJson(e,n){return new Ui().fromJson(e,n)}static fromJsonString(e,n){return new Ui().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ui,e,n)}}Ui.runtime=P;Ui.typeName="livekit.VideoConfiguration";Ui.fields=P.util.newFieldList(()=>[{no:1,name:"hardware_encoder",kind:"enum",T:P.getEnumType(bi)}]);class Eo extends me{constructor(e){super(),this.codecs=[],this.publish=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Eo().fromBinary(e,n)}static fromJson(e,n){return new Eo().fromJson(e,n)}static fromJsonString(e,n){return new Eo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Eo,e,n)}}Eo.runtime=P;Eo.typeName="livekit.DisabledCodecs";Eo.fields=P.util.newFieldList(()=>[{no:1,name:"codecs",kind:"message",T:li,repeated:!0},{no:2,name:"publish",kind:"message",T:li,repeated:!0}]);class Vi extends me{constructor(e){super(),this.duration=0,this.startTimestamp=Me.zero,this.endTimestamp=Me.zero,this.rtpClockTicks=Me.zero,this.driftSamples=Me.zero,this.driftMs=0,this.clockRate=0,P.util.initPartial(e,this)}static fromBinary(e,n){return new Vi().fromBinary(e,n)}static fromJson(e,n){return new Vi().fromJson(e,n)}static fromJsonString(e,n){return new Vi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Vi,e,n)}}Vi.runtime=P;Vi.typeName="livekit.RTPDrift";Vi.fields=P.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:nn},{no:2,name:"end_time",kind:"message",T:nn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"start_timestamp",kind:"scalar",T:4},{no:5,name:"end_timestamp",kind:"scalar",T:4},{no:6,name:"rtp_clock_ticks",kind:"scalar",T:4},{no:7,name:"drift_samples",kind:"scalar",T:3},{no:8,name:"drift_ms",kind:"scalar",T:1},{no:9,name:"clock_rate",kind:"scalar",T:1}]);class _s extends me{constructor(e){super(),this.duration=0,this.packets=0,this.packetRate=0,this.bytes=Me.zero,this.headerBytes=Me.zero,this.bitrate=0,this.packetsLost=0,this.packetLossRate=0,this.packetLossPercentage=0,this.packetsDuplicate=0,this.packetDuplicateRate=0,this.bytesDuplicate=Me.zero,this.headerBytesDuplicate=Me.zero,this.bitrateDuplicate=0,this.packetsPadding=0,this.packetPaddingRate=0,this.bytesPadding=Me.zero,this.headerBytesPadding=Me.zero,this.bitratePadding=0,this.packetsOutOfOrder=0,this.frames=0,this.frameRate=0,this.jitterCurrent=0,this.jitterMax=0,this.gapHistogram={},this.nacks=0,this.nackAcks=0,this.nackMisses=0,this.nackRepeated=0,this.plis=0,this.firs=0,this.rttCurrent=0,this.rttMax=0,this.keyFrames=0,this.layerLockPlis=0,P.util.initPartial(e,this)}static fromBinary(e,n){return new _s().fromBinary(e,n)}static fromJson(e,n){return new _s().fromJson(e,n)}static fromJsonString(e,n){return new _s().fromJsonString(e,n)}static equals(e,n){return P.util.equals(_s,e,n)}}_s.runtime=P;_s.typeName="livekit.RTPStats";_s.fields=P.util.newFieldList(()=>[{no:1,name:"start_time",kind:"message",T:nn},{no:2,name:"end_time",kind:"message",T:nn},{no:3,name:"duration",kind:"scalar",T:1},{no:4,name:"packets",kind:"scalar",T:13},{no:5,name:"packet_rate",kind:"scalar",T:1},{no:6,name:"bytes",kind:"scalar",T:4},{no:39,name:"header_bytes",kind:"scalar",T:4},{no:7,name:"bitrate",kind:"scalar",T:1},{no:8,name:"packets_lost",kind:"scalar",T:13},{no:9,name:"packet_loss_rate",kind:"scalar",T:1},{no:10,name:"packet_loss_percentage",kind:"scalar",T:2},{no:11,name:"packets_duplicate",kind:"scalar",T:13},{no:12,name:"packet_duplicate_rate",kind:"scalar",T:1},{no:13,name:"bytes_duplicate",kind:"scalar",T:4},{no:40,name:"header_bytes_duplicate",kind:"scalar",T:4},{no:14,name:"bitrate_duplicate",kind:"scalar",T:1},{no:15,name:"packets_padding",kind:"scalar",T:13},{no:16,name:"packet_padding_rate",kind:"scalar",T:1},{no:17,name:"bytes_padding",kind:"scalar",T:4},{no:41,name:"header_bytes_padding",kind:"scalar",T:4},{no:18,name:"bitrate_padding",kind:"scalar",T:1},{no:19,name:"packets_out_of_order",kind:"scalar",T:13},{no:20,name:"frames",kind:"scalar",T:13},{no:21,name:"frame_rate",kind:"scalar",T:1},{no:22,name:"jitter_current",kind:"scalar",T:1},{no:23,name:"jitter_max",kind:"scalar",T:1},{no:24,name:"gap_histogram",kind:"map",K:5,V:{kind:"scalar",T:13}},{no:25,name:"nacks",kind:"scalar",T:13},{no:37,name:"nack_acks",kind:"scalar",T:13},{no:26,name:"nack_misses",kind:"scalar",T:13},{no:38,name:"nack_repeated",kind:"scalar",T:13},{no:27,name:"plis",kind:"scalar",T:13},{no:28,name:"last_pli",kind:"message",T:nn},{no:29,name:"firs",kind:"scalar",T:13},{no:30,name:"last_fir",kind:"message",T:nn},{no:31,name:"rtt_current",kind:"scalar",T:13},{no:32,name:"rtt_max",kind:"scalar",T:13},{no:33,name:"key_frames",kind:"scalar",T:13},{no:34,name:"last_key_frame",kind:"message",T:nn},{no:35,name:"layer_lock_plis",kind:"scalar",T:13},{no:36,name:"last_layer_lock_pli",kind:"message",T:nn},{no:44,name:"packet_drift",kind:"message",T:Vi},{no:45,name:"report_drift",kind:"message",T:Vi}]);class Os extends me{constructor(e){super(),this.unixMicro=Me.zero,this.ticks=0,P.util.initPartial(e,this)}static fromBinary(e,n){return new Os().fromBinary(e,n)}static fromJson(e,n){return new Os().fromJson(e,n)}static fromJsonString(e,n){return new Os().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Os,e,n)}}Os.runtime=P;Os.typeName="livekit.TimedVersion";Os.fields=P.util.newFieldList(()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]);const Hl=7e3,UG=[0,300,2*2*300,3*3*300,4*4*300,Hl,Hl,Hl,Hl,Hl];class VG{constructor(e){this._retryDelays=e!==void 0?[...e]:UG}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function F(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?o(u.value):i(u.value).then(a,c)}l((r=r.apply(t,[])).next())})}function nw(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dc(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof nw=="function"?nw(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(a,c){s=t[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var gC={exports:{}},Fc=typeof Reflect=="object"?Reflect:null,rw=Fc&&typeof Fc.apply=="function"?Fc.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Hh;Fc&&typeof Fc.ownKeys=="function"?Hh=Fc.ownKeys:Object.getOwnPropertySymbols?Hh=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Hh=function(e){return Object.getOwnPropertyNames(e)};function GG(t){console&&console.warn&&console.warn(t)}var Ox=Number.isNaN||function(e){return e!==e};function rt(){rt.init.call(this)}gC.exports=rt;gC.exports.once=zG;rt.EventEmitter=rt;rt.prototype._events=void 0;rt.prototype._eventsCount=0;rt.prototype._maxListeners=void 0;var iw=10;function Bp(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(rt,"defaultMaxListeners",{enumerable:!0,get:function(){return iw},set:function(t){if(typeof t!="number"||t<0||Ox(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");iw=t}});rt.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};rt.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Ox(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Mx(t){return t._maxListeners===void 0?rt.defaultMaxListeners:t._maxListeners}rt.prototype.getMaxListeners=function(){return Mx(this)};rt.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",o=this._events;if(o!==void 0)i=i&&o.error===void 0;else if(!i)return!1;if(i){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var c=o[e];if(c===void 0)return!1;if(typeof c=="function")rw(c,this,n);else for(var l=c.length,u=Ux(c,l),r=0;r<l;++r)rw(u[r],this,n);return!0};function Dx(t,e,n,r){var i,o,s;if(Bp(n),o=t._events,o===void 0?(o=t._events=Object.create(null),t._eventsCount=0):(o.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]),s===void 0)s=o[e]=n,++t._eventsCount;else if(typeof s=="function"?s=o[e]=r?[n,s]:[s,n]:r?s.unshift(n):s.push(n),i=Mx(t),i>0&&s.length>i&&!s.warned){s.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=s.length,GG(a)}return t}rt.prototype.addListener=function(e,n){return Dx(this,e,n,!1)};rt.prototype.on=rt.prototype.addListener;rt.prototype.prependListener=function(e,n){return Dx(this,e,n,!0)};function WG(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Lx(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=WG.bind(r);return i.listener=n,r.wrapFn=i,i}rt.prototype.once=function(e,n){return Bp(n),this.on(e,Lx(this,e,n)),this};rt.prototype.prependOnceListener=function(e,n){return Bp(n),this.prependListener(e,Lx(this,e,n)),this};rt.prototype.removeListener=function(e,n){var r,i,o,s,a;if(Bp(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===n||r[s].listener===n){a=r[s].listener,o=s;break}if(o<0)return this;o===0?r.shift():jG(r,o),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};rt.prototype.off=rt.prototype.removeListener;rt.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var o=Object.keys(r),s;for(i=0;i<o.length;++i)s=o[i],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Bx(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?ZG(i):Ux(i,i.length)}rt.prototype.listeners=function(e){return Bx(this,e,!0)};rt.prototype.rawListeners=function(e){return Bx(this,e,!1)};rt.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Fx.call(t,e)};rt.prototype.listenerCount=Fx;function Fx(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}rt.prototype.eventNames=function(){return this._eventsCount>0?Hh(this._events):[]};function Ux(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function jG(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function ZG(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function zG(t,e){return new Promise(function(n,r){function i(s){t.removeListener(e,o),r(s)}function o(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Vx(t,e,o,{once:!0}),e!=="error"&&HG(t,i,{once:!0})})}function HG(t,e,n){typeof t.on=="function"&&Vx(t,"error",e,n)}function Vx(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(o){r.once&&t.removeEventListener(e,i),n(o)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ao=gC.exports;let Gx=!0,Wx=!0;function Xh(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Qa(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,a){if(s!==e)return i.apply(this,arguments);const c=l=>{const u=n(l);u&&(a.handleEvent?a.handleEvent(u):a(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(a,c),i.apply(this,[s,c])};const o=r.removeEventListener;r.removeEventListener=function(s,a){if(s!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(a))return o.apply(this,arguments);const c=this._eventMap[e].get(a);return this._eventMap[e].delete(a),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,c])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function XG(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Gx=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function $G(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Wx=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function jx(){if(typeof window=="object"){if(Gx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function mC(t,e){Wx&&console.warn(t+" is deprecated, please use "+e+" instead.")}function KG(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=Xh(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=Xh(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=Xh(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function ow(t){return Object.prototype.toString.call(t)==="[object Object]"}function Zx(t){return ow(t)?Object.keys(t).reduce(function(e,n){const r=ow(t[n]),i=r?Zx(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function e0(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?e0(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{e0(t,t.get(i),n)})}))}function sw(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&o.push(s)}),o.forEach(s=>{t.forEach(a=>{a.type===r&&a.trackId===s.id&&e0(t,a,i)})}),i}const aw=jx;function zx(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(a){if(typeof a!="object"||a.mandatory||a.optional)return a;const c={};return Object.keys(a).forEach(l=>{if(l==="require"||l==="advanced"||l==="mediaSource")return;const u=typeof a[l]=="object"?a[l]:{ideal:a[l]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(h,f){return h?h+f.charAt(0).toUpperCase()+f.slice(1):f==="deviceId"?"sourceId":f};if(u.ideal!==void 0){c.optional=c.optional||[];let h={};typeof u.ideal=="number"?(h[d("min",l)]=u.ideal,c.optional.push(h),h={},h[d("max",l)]=u.ideal,c.optional.push(h)):(h[d("",l)]=u.ideal,c.optional.push(h))}u.exact!==void 0&&typeof u.exact!="number"?(c.mandatory=c.mandatory||{},c.mandatory[d("",l)]=u.exact):["min","max"].forEach(h=>{u[h]!==void 0&&(c.mandatory=c.mandatory||{},c.mandatory[d(h,l)]=u[h])})}),a.advanced&&(c.optional=(c.optional||[]).concat(a.advanced)),c},i=function(a,c){if(e.version>=61)return c(a);if(a=JSON.parse(JSON.stringify(a)),a&&typeof a.audio=="object"){const l=function(u,d,h){d in u&&!(h in u)&&(u[h]=u[d],delete u[d])};a=JSON.parse(JSON.stringify(a)),l(a.audio,"autoGainControl","googAutoGainControl"),l(a.audio,"noiseSuppression","googNoiseSuppression"),a.audio=r(a.audio)}if(a&&typeof a.video=="object"){let l=a.video.facingMode;l=l&&(typeof l=="object"?l:{ideal:l});const u=e.version<66;if(l&&(l.exact==="user"||l.exact==="environment"||l.ideal==="user"||l.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete a.video.facingMode;let d;if(l.exact==="environment"||l.ideal==="environment"?d=["back","rear"]:(l.exact==="user"||l.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(h=>{h=h.filter(p=>p.kind==="videoinput");let f=h.find(p=>d.some(g=>p.label.toLowerCase().includes(g)));return!f&&h.length&&d.includes("back")&&(f=h[h.length-1]),f&&(a.video.deviceId=l.exact?{exact:f.deviceId}:{ideal:f.deviceId}),a.video=r(a.video),aw("chrome: "+JSON.stringify(a)),c(a)})}a.video=r(a.video)}return aw("chrome: "+JSON.stringify(a)),c(a)},o=function(a){return e.version>=64?a:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[a.name]||a.name,message:a.message,constraint:a.constraint||a.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(a,c,l){i(a,u=>{n.webkitGetUserMedia(u,c,d=>{l&&l(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const a=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(c){return i(c,l=>a(l).then(u=>{if(l.audio&&!u.getAudioTracks().length||l.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function JG(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,a=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:a||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),t.navigator.mediaDevices.getUserMedia(r)})}}}function Hx(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Xx(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(a=>a.track&&a.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Qa(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function $x(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(a,c){let l=i.apply(this,arguments);return l||(l=e(this,a),this._senders.push(l)),l};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(a){o.apply(this,arguments);const c=this._senders.indexOf(a);c!==-1&&this._senders.splice(c,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const a=this._senders.find(c=>c.track===s);a&&this._senders.splice(this._senders.indexOf(a),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Kx(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const s=function(c){const l={};return c.result().forEach(d=>{const h={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(f=>{h[f]=d.stat(f)}),l[h.id]=h}),l},a=function(c){return new Map(Object.keys(c).map(l=>[l,c[l]]))};if(arguments.length>=2){const c=function(l){i(a(s(l)))};return e.apply(this,[c,r])}return new Promise((c,l)=>{e.apply(this,[function(u){c(a(s(u)))},l])}).then(i,o)}}function Jx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>sw(s,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Qa(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>sw(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(a=>{a.track===r&&(i?s=!0:i=a)}),this.getReceivers().forEach(a=>(a.track===r&&(o?s=!0:o=a),a.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Yx(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,a){if(!a)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const c=e.apply(this,arguments);return this._shimmedLocalStreams[a.id]?this._shimmedLocalStreams[a.id].indexOf(c)===-1&&this._shimmedLocalStreams[a.id].push(c):this._shimmedLocalStreams[a.id]=[a,c],c};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(l=>{if(this.getSenders().find(d=>d.track===l))throw new DOMException("Track already exists.","InvalidAccessError")});const a=this.getSenders();n.apply(this,arguments);const c=this.getSenders().filter(l=>a.indexOf(l)===-1);this._shimmedLocalStreams[s.id]=[s].concat(c)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(a=>{const c=this._shimmedLocalStreams[a].indexOf(s);c!==-1&&this._shimmedLocalStreams[a].splice(c,1),this._shimmedLocalStreams[a].length===1&&delete this._shimmedLocalStreams[a]}),i.apply(this,arguments)}}function Qx(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Yx(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(f=>f.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const h=[].slice.call(arguments,1);if(h.length!==1||!h[0].getTracks().find(g=>g===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(g=>g.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const g=new t.MediaStream([u]);this._streams[d.id]=g,this._reverseStreams[g.id]=d,this.addStream(g)}return this.getSenders().find(g=>g.track===u)};function o(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const f=l._reverseStreams[h],p=l._streams[f.id];d=d.replace(new RegExp(p.id,"g"),f.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(l,u){let d=u.sdp;return Object.keys(l._reverseStreams||[]).forEach(h=>{const f=l._reverseStreams[h],p=l._streams[f.id];d=d.replace(new RegExp(f.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(l){const u=t.RTCPeerConnection.prototype[l],d={[l](){const h=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const g=o(this,p);h[0].apply(null,[g])},p=>{h[1]&&h[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>o(this,p))}};t.RTCPeerConnection.prototype[l]=d[l]});const a=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?a.apply(this,arguments):(arguments[0]=s(this,arguments[0]),a.apply(this,arguments))};const c=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const l=c.get.apply(this);return l.type===""?l:o(this,l)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let h;Object.keys(this._streams).forEach(f=>{this._streams[f].getTracks().find(g=>u.track===g)&&(h=this._streams[f])}),h&&(h.getTracks().length===1?this.removeStream(this._reverseStreams[h.id]):h.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function t0(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function qx(t,e){Qa(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}var cw=Object.freeze({__proto__:null,fixNegotiationNeeded:qx,shimAddTrackRemoveTrack:Qx,shimAddTrackRemoveTrackWithNative:Yx,shimGetDisplayMedia:JG,shimGetSendersWithDtmf:$x,shimGetStats:Kx,shimGetUserMedia:zx,shimMediaStream:Hx,shimOnTrack:Xx,shimPeerConnection:t0,shimSenderReceiverGetStats:Jx});function eP(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){mC("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,a,c){a in s&&!(c in s)&&(s[c]=s[a],delete s[a])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const a=s.apply(this,arguments);return i(a,"mozAutoGainControl","autoGainControl"),i(a,"mozNoiseSuppression","noiseSuppression"),a}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(a){return this.kind==="audio"&&typeof a=="object"&&(a=JSON.parse(JSON.stringify(a)),i(a,"autoGainControl","mozAutoGainControl"),i(a,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[a])}}}}function YG(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function tP(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function n0(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,s,a]=arguments;return r.apply(this,[o||null]).then(c=>{if(e.version<53&&!s)try{c.forEach(l=>{l.type=n[l.type]||l.type})}catch(l){if(l.name!=="TypeError")throw l;c.forEach((u,d)=>{c.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return c}).then(s,a)}}function nP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function rP(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Qa(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function iP(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){mC("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function oP(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function sP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let r=arguments[1]&&arguments[1].sendEncodings;r===void 0&&(r=[]),r=[...r];const i=r.length>0;i&&r.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:s}=o,a=s.getParameters();(!("encodings"in a)||a.encodings.length===1&&Object.keys(a.encodings[0]).length===0)&&(a.encodings=r,s.sendEncodings=r,this.setParametersPromises.push(s.setParameters(a).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function aP(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function cP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function lP(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var lw=Object.freeze({__proto__:null,shimAddTransceiver:sP,shimCreateAnswer:lP,shimCreateOffer:cP,shimGetDisplayMedia:YG,shimGetParameters:aP,shimGetUserMedia:eP,shimOnTrack:tP,shimPeerConnection:n0,shimRTCDataChannel:oP,shimReceiverGetStats:rP,shimRemoveStream:iP,shimSenderGetStats:nP});function uP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r){for(var i=arguments.length,o=new Array(i>1?i-1:0),s=1;s<i;s++)o[s-1]=arguments[s];return o&&o.forEach(a=>{this._localStreams?this._localStreams.includes(a)||this._localStreams.push(a):this._localStreams=[a]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function dP(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function hP(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=n.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h},e.createAnswer=function(l,u){const d=arguments.length>=2?arguments[2]:arguments[0],h=r.apply(this,[d]);return u?(h.then(l,u),Promise.resolve()):h};let a=function(c,l,u){const d=i.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d};e.setLocalDescription=a,a=function(c,l,u){const d=o.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.setRemoteDescription=a,a=function(c,l,u){const d=s.apply(this,[c]);return u?(d.then(l,u),Promise.resolve()):d},e.addIceCandidate=a}function fP(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(pP(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function pP(t){return t&&t.video!==void 0?Object.assign({},t,{video:Zx(t.video)}):t}function gP(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let a=r.iceServers[s];a.urls===void 0&&a.url?(mC("RTCIceServer.url","RTCIceServer.urls"),a=JSON.parse(JSON.stringify(a)),a.urls=a.url,delete a.url,o.push(a)):o.push(r.iceServers[s])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function mP(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function vP(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio",{direction:"recvonly"}),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function yP(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var uw=Object.freeze({__proto__:null,shimAudioContext:yP,shimCallbacksAPI:hP,shimConstraints:pP,shimCreateOfferLegacy:vP,shimGetUserMedia:fP,shimLocalStreamsAPI:uP,shimRTCIceServerUrls:gP,shimRemoteStreamsAPI:dP,shimTrackEventTransceiver:mP}),CP={exports:{}};(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(r=>r.trim())},e.splitSections=function(n){return n.split(`
m=`).map((i,o)=>(o>0?"m="+i:i).trim()+`\r
`)},e.getDescription=function(n){const r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){const r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(i=>i.indexOf(r)===0)},e.parseCandidate=function(n){let r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");const i={foundation:r[0],component:{1:"rtp",2:"rtcp"}[r[1]]||r[1],protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]};for(let o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]===void 0&&(i[r[o]]=r[o+1]);break}return i},e.writeCandidate=function(n){const r=[];r.push(n.foundation);const i=n.component;i==="rtp"?r.push(1):i==="rtcp"?r.push(2):r.push(i),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);const o=n.type;return r.push("typ"),r.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let r=n.substring(9).split(" ");const i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){let r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);const i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){const r=n.substring(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1],attributes:r.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const r={};let i;const o=n.substring(n.indexOf(" ")+1).split(";");for(let s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){let r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(s=>{n.parameters[s]!==void 0?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){const r=n.substring(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){let r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){const r=n.indexOf(" "),i={ssrc:parseInt(n.substring(7,r),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substring(r+1,o),i.value=n.substring(o+1)):i.attribute=n.substring(r+1),i},e.parseSsrcGroup=function(n){const r=n.substring(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(i=>parseInt(i,10))}},e.getMid=function(n){const r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substring(6)},e.parseFingerprint=function(n){const r=n.substring(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1].toUpperCase()}},e.getDtlsParameters=function(n,r){return{role:"auto",fingerprints:e.matchPrefix(n+r,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){let i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(o=>{i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){const r=n.substring(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const r=n.substring(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){return e.matchPrefix(n+r,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,r){const i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let r="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(r+=`a=ice-lite\r
`),r},e.parseRtpParameters=function(n){const r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");r.profile=o[2];for(let a=3;a<o.length;a++){const c=o[a],l=e.matchPrefix(n,"a=rtpmap:"+c+" ")[0];if(l){const u=e.parseRtpMap(l),d=e.matchPrefix(n,"a=fmtp:"+c+" ");switch(u.parameters=d.length?e.parseFmtp(d[0]):{},u.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+c+" ").map(e.parseRtcpFb),r.codecs.push(u),u.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(u.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(a=>{r.headerExtensions.push(e.parseExtmap(a))});const s=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return r.codecs.forEach(a=>{s.forEach(c=>{a.rtcpFeedback.find(u=>u.type===c.type&&u.parameter===c.parameter)||a.rtcpFeedback.push(c)})}),r},e.writeRtpDescription=function(n,r){let i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" "+(r.profile||"UDP/TLS/RTP/SAVPF")+" ",i+=r.codecs.map(s=>s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(s=>{i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});let o=0;return r.codecs.forEach(s=>{s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),r.headerExtensions&&r.headerExtensions.forEach(s=>{i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){const r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,a=e.matchPrefix(n,"a=ssrc:").map(h=>e.parseSsrcMedia(h)).filter(h=>h.attribute==="cname"),c=a.length>0&&a[0].ssrc;let l;const u=e.matchPrefix(n,"a=ssrc-group:FID").map(h=>h.substring(17).split(" ").map(p=>parseInt(p,10)));u.length>0&&u[0].length>1&&u[0][0]===c&&(l=u[0][1]),i.codecs.forEach(h=>{if(h.name.toUpperCase()==="RTX"&&h.parameters.apt){let f={ssrc:c,codecPayloadType:parseInt(h.parameters.apt,10)};c&&l&&(f.rtx={ssrc:l}),r.push(f),o&&(f=JSON.parse(JSON.stringify(f)),f.fec={ssrc:c,mechanism:s?"red+ulpfec":"red"},r.push(f))}}),r.length===0&&c&&r.push({ssrc:c});let d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substring(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substring(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(h=>{h.maxBitrate=d})),r},e.parseRtcpParameters=function(n){const r={},i=e.matchPrefix(n,"a=ssrc:").map(a=>e.parseSsrcMedia(a)).filter(a=>a.attribute==="cname")[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;const s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.writeRtcpParameters=function(n){let r="";return n.reducedSize&&(r+=`a=rtcp-rsize\r
`),n.mux&&(r+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(r+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),r},e.parseMsid=function(n){let r;const i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substring(7).split(" "),{stream:r[0],track:r[1]};const o=e.matchPrefix(n,"a=ssrc:").map(s=>e.parseSsrcMedia(s)).filter(s=>s.attribute==="msid");if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){const r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:");let o;i.length>0&&(o=parseInt(i[0].substring(19),10)),isNaN(o)&&(o=65536);const s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substring(12),10),protocol:r.fmt,maxMessageSize:o};const a=e.matchPrefix(n,"a=sctpmap:");if(a.length>0){const c=a[0].substring(10).split(" ");return{port:parseInt(c[0],10),protocol:c[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){let i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,r,i){let o;const s=r!==void 0?r:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(i||"thisisadapterortc")+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,r){const i=e.splitLines(n);for(let o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substring(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const i=e.splitLines(n)[0].substring(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){const i=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const r=e.splitLines(n);for(let i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(CP);var IP=CP.exports,Uc=qV(IP),QG=YV({__proto__:null,default:Uc},[IP]);function $h(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substring(2)),r.candidate&&r.candidate.length){const i=new e(r),o=Uc.parseCandidate(r.candidate);for(const s in o)s in i||Object.defineProperty(i,s,{value:o[s]});return i.toJSON=function(){return{candidate:i.candidate,sdpMid:i.sdpMid,sdpMLineIndex:i.sdpMLineIndex,usernameFragment:i.usernameFragment}},i}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Qa(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function r0(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||Qa(t,"icecandidate",e=>{if(e.candidate){const n=Uc.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function Kh(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(a){if(!a||!a.sdp)return!1;const c=Uc.splitSections(a.sdp);return c.shift(),c.some(l=>{const u=Uc.parseMLine(l);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(a){const c=a.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(c===null||c.length<2)return-1;const l=parseInt(c[1],10);return l!==l?-1:l},i=function(a){let c=65536;return e.browser==="firefox"&&(e.version<57?a===-1?c=16384:c=2147483637:e.version<60?c=e.version===57?65535:65536:c=2147483637),c},o=function(a,c){let l=65536;e.browser==="firefox"&&e.version===57&&(l=65535);const u=Uc.matchPrefix(a.sdp,"a=max-message-size:");return u.length>0?l=parseInt(u[0].substring(19),10):e.browser==="firefox"&&c!==-1&&(l=2147483637),l},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:c}=this.getConfiguration();c==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const c=r(arguments[0]),l=i(c),u=o(arguments[0],c);let d;l===0&&u===0?d=Number.POSITIVE_INFINITY:l===0||u===0?d=Math.max(l,u):d=Math.min(l,u);const h={};Object.defineProperty(h,"maxMessageSize",{get(){return d}}),this._sctp=h}return s.apply(this,arguments)}}function Jh(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const a=arguments[0],c=a.length||a.size||a.byteLength;if(r.readyState==="open"&&i.sctp&&c>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Qa(t,"datachannel",r=>(e(r.channel,r.target),r))}function i0(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function o0(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Yh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function Qh(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let i=arguments[0]||{};if(typeof i!="object"||i.type&&i.sdp)return n.apply(this,arguments);if(i={type:i.type,sdp:i.sdp},!i.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":i.type="offer";break;default:i.type="answer";break}return i.sdp||i.type!=="offer"&&i.type!=="answer"?n.apply(this,[i]):(i.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(s=>n.apply(this,[s]))})}var qG=Object.freeze({__proto__:null,removeExtmapAllowMixed:o0,shimAddIceCandidateNullOrEmpty:Yh,shimConnectionState:i0,shimMaxMessageSize:Kh,shimParameterlessSetLocalDescription:Qh,shimRTCIceCandidate:$h,shimRTCIceCandidateRelayProtocol:r0,shimSendThrowTypeError:Jh});function eW(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=jx,r=KG(t),i={browserDetails:r,commonShim:qG,extractVersion:Xh,disableLog:XG,disableWarnings:$G,sdp:QG};switch(r.browser){case"chrome":if(!cw||!t0||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=cw,Yh(t,r),Qh(t),zx(t,r),Hx(t),t0(t,r),Xx(t),Qx(t,r),$x(t),Kx(t),Jx(t),qx(t,r),$h(t),r0(t),i0(t),Kh(t,r),Jh(t),o0(t,r);break;case"firefox":if(!lw||!n0||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=lw,Yh(t,r),Qh(t),eP(t,r),n0(t,r),tP(t),iP(t),nP(t),rP(t),oP(t),sP(t),aP(t),cP(t),lP(t),$h(t),i0(t),Kh(t,r),Jh(t);break;case"safari":if(!uw||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=uw,Yh(t,r),Qh(t),gP(t),vP(t),hP(t),uP(t),dP(t),mP(t),fP(t),yP(t),$h(t),r0(t),Kh(t,r),Jh(t),o0(t,r);break;default:n("Unsupported browser!");break}return i}eW({window:typeof window>"u"?void 0:window});const tW=10,dh="lk_e2ee",nW="LKFrameEncryptionKey",rW={sharedKey:!1,ratchetSalt:nW,ratchetWindowSize:8,failureTolerance:tW};var Zs;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Zs||(Zs={}));var dw;(function(t){t.KeyRatcheted="keyRatcheted"})(dw||(dw={}));var Ms;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Ms||(Ms={}));var hw;(function(t){t.Error="cryptorError"})(hw||(hw={}));function iW(){return oW()||s0()}function s0(){return typeof window.RTCRtpScriptTransform<"u"}function oW(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}class pz extends ao.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,r)=>{Ve.debug("key ratcheted event received",{material:n,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},rW),e),this.on(Zs.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,r){const i={key:e,participantIdentity:n,keyIndex:r};this.keyInfoMap.set("".concat(n??"shared","-").concat(r??0),i),this.emit(Zs.SetKey,i)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Zs.RatchetRequest,e,n)}}class El extends Error{constructor(e,n){super(n||"an error has occured"),this.code=e}}class ht extends El{constructor(e,n,r){super(1,e),this.status=r,this.reason=n}}class vC extends El{constructor(e){super(21,e??"device is unsupported")}}class Ni extends El{constructor(e){super(20,e??"track is invalid")}}class sW extends El{constructor(e){super(10,e??"unsupported server")}}class zt extends El{constructor(e){super(12,e??"unexpected connection state")}}class a0 extends El{constructor(e){super(13,e??"unable to negotiate")}}var od;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(od||(od={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(od||(od={}));var te;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.StateChanged="connectionStateChanged",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged"})(te||(te={}));var oe;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded"})(oe||(oe={}));var ye;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished"})(ye||(ye={}));var he;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed"})(he||(he={}));function yC(t,e,n){var r,i,o;e===void 0&&(e=50),n===void 0&&(n={});var s=(r=n.isImmediate)!=null&&r,a=(i=n.callback)!=null&&i,c=n.maxWait,l=Date.now(),u=[];function d(){if(c!==void 0){var f=Date.now()-l;if(f+e>=c)return c-f}return e}var h=function(){var f=[].slice.call(arguments),p=this;return new Promise(function(g,C){var m=s&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,l=Date.now(),!s){var b=t.apply(p,f);a&&a(b),u.forEach(function(E){return(0,E.resolve)(b)}),u=[]}},d()),m){var v=t.apply(p,f);return a&&a(v),g(v)}u.push({resolve:g,reject:C})})};return h.cancel=function(f){o!==void 0&&clearTimeout(o),u.forEach(function(p){return(0,p.reject)(f)}),u=[]},h}const aW=/version\/(\d+(\.?_?\d+)+)/i;let Xg;function ns(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Xg===void 0||e){const r=cW.find(i=>{let{test:o}=i;return o.test(n)});Xg=r==null?void 0:r.describe(n)}return Xg}const cW=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:$g(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:$g(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:$g(aW,t),os:t.includes("mobile/")?"iOS":"macOS"}}}];function $g(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const r=e.match(t);return r&&r.length>=n&&r[n]||""}var lW="1.15.13";const uW=lW,dW=11;class hn{}hn.setTimeout=function(){return setTimeout(...arguments)};hn.setInterval=function(){return setInterval(...arguments)};hn.clearTimeout=function(){return clearTimeout(...arguments)};hn.clearInterval=function(){return clearInterval(...arguments)};class tt{constructor(e,n,r,i,o){this.width=e,this.height=n,this.encoding={maxBitrate:r,maxFramerate:i,priority:o}}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.width/this.height}}}const hW=["vp8","h264"],bP=["vp8","h264","vp9","av1"];function fW(t){return!!hW.find(e=>e===t)}var Yf;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:2e4},t.music={maxBitrate:32e3},t.musicStereo={maxBitrate:48e3},t.musicHighQuality={maxBitrate:64e3},t.musicHighQualityStereo={maxBitrate:96e3}})(Yf||(Yf={}));const sd={h90:new tt(160,90,9e4,20),h180:new tt(320,180,16e4,20),h216:new tt(384,216,18e4,20),h360:new tt(640,360,45e4,20),h540:new tt(960,540,8e5,25),h720:new tt(1280,720,17e5,30),h1080:new tt(1920,1080,3e6,30),h1440:new tt(2560,1440,5e6,30),h2160:new tt(3840,2160,8e6,30)},c0={h120:new tt(160,120,7e4,20),h180:new tt(240,180,125e3,20),h240:new tt(320,240,14e4,20),h360:new tt(480,360,33e4,20),h480:new tt(640,480,5e5,20),h540:new tt(720,540,6e5,25),h720:new tt(960,720,13e5,30),h1080:new tt(1440,1080,23e5,30),h1440:new tt(1920,1440,38e5,30)},CC={h360fps3:new tt(640,360,2e5,3,"medium"),h360fps15:new tt(640,360,4e5,15,"medium"),h720fps5:new tt(1280,720,8e5,5,"medium"),h720fps15:new tt(1280,720,15e5,15,"medium"),h720fps30:new tt(1280,720,2e6,30,"medium"),h1080fps15:new tt(1920,1080,25e5,15,"medium"),h1080fps30:new tt(1920,1080,5e6,30,"medium"),original:new tt(0,0,7e6,30,"medium")};var Tn;(function(t){t[t.PUBLISHER=0]="PUBLISHER",t[t.SUBSCRIBER=1]="SUBSCRIBER"})(Tn||(Tn={}));P.util.setEnumType(Tn,"livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]);var Wa;(function(t){t[t.ACTIVE=0]="ACTIVE",t[t.PAUSED=1]="PAUSED"})(Wa||(Wa={}));P.util.setEnumType(Wa,"livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]);var Qf;(function(t){t[t.UDP=0]="UDP",t[t.TCP=1]="TCP",t[t.TLS=2]="TLS"})(Qf||(Qf={}));P.util.setEnumType(Qf,"livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]);class To extends me{constructor(e){super(),this.message={case:void 0},P.util.initPartial(e,this)}static fromBinary(e,n){return new To().fromBinary(e,n)}static fromJson(e,n){return new To().fromJson(e,n)}static fromJsonString(e,n){return new To().fromJsonString(e,n)}static equals(e,n){return P.util.equals(To,e,n)}}To.runtime=P;To.typeName="livekit.SignalRequest";To.fields=P.util.newFieldList(()=>[{no:1,name:"offer",kind:"message",T:Gn,oneof:"message"},{no:2,name:"answer",kind:"message",T:Gn,oneof:"message"},{no:3,name:"trickle",kind:"message",T:hi,oneof:"message"},{no:4,name:"add_track",kind:"message",T:di,oneof:"message"},{no:5,name:"mute",kind:"message",T:fi,oneof:"message"},{no:6,name:"subscription",kind:"message",T:Ur,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Wi,oneof:"message"},{no:8,name:"leave",kind:"message",T:Vr,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:ji,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Xi,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:$i,oneof:"message"},{no:13,name:"simulate",kind:"message",T:ln,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:Zi,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Ji,oneof:"message"}]);class Gi extends me{constructor(e){super(),this.message={case:void 0},P.util.initPartial(e,this)}static fromBinary(e,n){return new Gi().fromBinary(e,n)}static fromJson(e,n){return new Gi().fromJson(e,n)}static fromJsonString(e,n){return new Gi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Gi,e,n)}}Gi.runtime=P;Gi.typeName="livekit.SignalResponse";Gi.fields=P.util.newFieldList(()=>[{no:1,name:"join",kind:"message",T:xo,oneof:"message"},{no:2,name:"answer",kind:"message",T:Gn,oneof:"message"},{no:3,name:"offer",kind:"message",T:Gn,oneof:"message"},{no:4,name:"trickle",kind:"message",T:hi,oneof:"message"},{no:5,name:"update",kind:"message",T:No,oneof:"message"},{no:6,name:"track_published",kind:"message",T:pi,oneof:"message"},{no:8,name:"leave",kind:"message",T:Vr,oneof:"message"},{no:9,name:"mute",kind:"message",T:fi,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:_o,oneof:"message"},{no:11,name:"room_update",kind:"message",T:Oo,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:Do,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:Bo,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:Uo,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:Vo,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:Ro,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:Po,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:Go,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:jo,oneof:"message"}]);class ui extends me{constructor(e){super(),this.codec="",this.cid="",P.util.initPartial(e,this)}static fromBinary(e,n){return new ui().fromBinary(e,n)}static fromJson(e,n){return new ui().fromJson(e,n)}static fromJsonString(e,n){return new ui().fromJsonString(e,n)}static equals(e,n){return P.util.equals(ui,e,n)}}ui.runtime=P;ui.typeName="livekit.SimulcastCodec";ui.fields=P.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9}]);class di extends me{constructor(e){super(),this.cid="",this.name="",this.type=En.AUDIO,this.width=0,this.height=0,this.muted=!1,this.disableDtx=!1,this.source=Lt.UNKNOWN,this.layers=[],this.simulcastCodecs=[],this.sid="",this.stereo=!1,this.disableRed=!1,this.encryption=un.NONE,this.stream="",P.util.initPartial(e,this)}static fromBinary(e,n){return new di().fromBinary(e,n)}static fromJson(e,n){return new di().fromJson(e,n)}static fromJsonString(e,n){return new di().fromJsonString(e,n)}static equals(e,n){return P.util.equals(di,e,n)}}di.runtime=P;di.typeName="livekit.AddTrackRequest";di.fields=P.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:P.getEnumType(En)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:P.getEnumType(Lt)},{no:9,name:"layers",kind:"message",T:Vn,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:ui,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:P.getEnumType(un)},{no:15,name:"stream",kind:"scalar",T:9}]);class hi extends me{constructor(e){super(),this.candidateInit="",this.target=Tn.PUBLISHER,P.util.initPartial(e,this)}static fromBinary(e,n){return new hi().fromBinary(e,n)}static fromJson(e,n){return new hi().fromJson(e,n)}static fromJsonString(e,n){return new hi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(hi,e,n)}}hi.runtime=P;hi.typeName="livekit.TrickleRequest";hi.fields=P.util.newFieldList(()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:P.getEnumType(Tn)}]);class fi extends me{constructor(e){super(),this.sid="",this.muted=!1,P.util.initPartial(e,this)}static fromBinary(e,n){return new fi().fromBinary(e,n)}static fromJson(e,n){return new fi().fromJson(e,n)}static fromJsonString(e,n){return new fi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(fi,e,n)}}fi.runtime=P;fi.typeName="livekit.MuteTrackRequest";fi.fields=P.util.newFieldList(()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]);class xo extends me{constructor(e){super(),this.otherParticipants=[],this.serverVersion="",this.iceServers=[],this.subscriberPrimary=!1,this.alternativeUrl="",this.serverRegion="",this.pingTimeout=0,this.pingInterval=0,this.sifTrailer=new Uint8Array(0),P.util.initPartial(e,this)}static fromBinary(e,n){return new xo().fromBinary(e,n)}static fromJson(e,n){return new xo().fromJson(e,n)}static fromJsonString(e,n){return new xo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(xo,e,n)}}xo.runtime=P;xo.typeName="livekit.JoinResponse";xo.fields=P.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:kl},{no:2,name:"participant",kind:"message",T:Ar},{no:3,name:"other_participants",kind:"message",T:Ar,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:zi,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:Fi},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Ao},{no:13,name:"sif_trailer",kind:"scalar",T:12}]);class Po extends me{constructor(e){super(),this.iceServers=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Po().fromBinary(e,n)}static fromJson(e,n){return new Po().fromJson(e,n)}static fromJsonString(e,n){return new Po().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Po,e,n)}}Po.runtime=P;Po.typeName="livekit.ReconnectResponse";Po.fields=P.util.newFieldList(()=>[{no:1,name:"ice_servers",kind:"message",T:zi,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:Fi}]);class pi extends me{constructor(e){super(),this.cid="",P.util.initPartial(e,this)}static fromBinary(e,n){return new pi().fromBinary(e,n)}static fromJson(e,n){return new pi().fromJson(e,n)}static fromJsonString(e,n){return new pi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(pi,e,n)}}pi.runtime=P;pi.typeName="livekit.TrackPublishedResponse";pi.fields=P.util.newFieldList(()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:nr}]);class Ro extends me{constructor(e){super(),this.trackSid="",P.util.initPartial(e,this)}static fromBinary(e,n){return new Ro().fromBinary(e,n)}static fromJson(e,n){return new Ro().fromJson(e,n)}static fromJsonString(e,n){return new Ro().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ro,e,n)}}Ro.runtime=P;Ro.typeName="livekit.TrackUnpublishedResponse";Ro.fields=P.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]);class Gn extends me{constructor(e){super(),this.type="",this.sdp="",P.util.initPartial(e,this)}static fromBinary(e,n){return new Gn().fromBinary(e,n)}static fromJson(e,n){return new Gn().fromJson(e,n)}static fromJsonString(e,n){return new Gn().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Gn,e,n)}}Gn.runtime=P;Gn.typeName="livekit.SessionDescription";Gn.fields=P.util.newFieldList(()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9}]);class No extends me{constructor(e){super(),this.participants=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new No().fromBinary(e,n)}static fromJson(e,n){return new No().fromJson(e,n)}static fromJsonString(e,n){return new No().fromJsonString(e,n)}static equals(e,n){return P.util.equals(No,e,n)}}No.runtime=P;No.typeName="livekit.ParticipantUpdate";No.fields=P.util.newFieldList(()=>[{no:1,name:"participants",kind:"message",T:Ar,repeated:!0}]);class Ur extends me{constructor(e){super(),this.trackSids=[],this.subscribe=!1,this.participantTracks=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Ur().fromBinary(e,n)}static fromJson(e,n){return new Ur().fromJson(e,n)}static fromJsonString(e,n){return new Ur().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ur,e,n)}}Ur.runtime=P;Ur.typeName="livekit.UpdateSubscription";Ur.fields=P.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Bi,repeated:!0}]);class Wi extends me{constructor(e){super(),this.trackSids=[],this.disabled=!1,this.quality=Jt.LOW,this.width=0,this.height=0,this.fps=0,this.priority=0,P.util.initPartial(e,this)}static fromBinary(e,n){return new Wi().fromBinary(e,n)}static fromJson(e,n){return new Wi().fromJson(e,n)}static fromJsonString(e,n){return new Wi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Wi,e,n)}}Wi.runtime=P;Wi.typeName="livekit.UpdateTrackSettings";Wi.fields=P.util.newFieldList(()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:P.getEnumType(Jt)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]);class Vr extends me{constructor(e){super(),this.canReconnect=!1,this.reason=Ho.UNKNOWN_REASON,P.util.initPartial(e,this)}static fromBinary(e,n){return new Vr().fromBinary(e,n)}static fromJson(e,n){return new Vr().fromJson(e,n)}static fromJsonString(e,n){return new Vr().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Vr,e,n)}}Vr.runtime=P;Vr.typeName="livekit.LeaveRequest";Vr.fields=P.util.newFieldList(()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:P.getEnumType(Ho)}]);class ji extends me{constructor(e){super(),this.trackSid="",this.layers=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new ji().fromBinary(e,n)}static fromJson(e,n){return new ji().fromJson(e,n)}static fromJsonString(e,n){return new ji().fromJsonString(e,n)}static equals(e,n){return P.util.equals(ji,e,n)}}ji.runtime=P;ji.typeName="livekit.UpdateVideoLayers";ji.fields=P.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Vn,repeated:!0}]);class Zi extends me{constructor(e){super(),this.metadata="",this.name="",P.util.initPartial(e,this)}static fromBinary(e,n){return new Zi().fromBinary(e,n)}static fromJson(e,n){return new Zi().fromJson(e,n)}static fromJsonString(e,n){return new Zi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Zi,e,n)}}Zi.runtime=P;Zi.typeName="livekit.UpdateParticipantMetadata";Zi.fields=P.util.newFieldList(()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9}]);class zi extends me{constructor(e){super(),this.urls=[],this.username="",this.credential="",P.util.initPartial(e,this)}static fromBinary(e,n){return new zi().fromBinary(e,n)}static fromJson(e,n){return new zi().fromJson(e,n)}static fromJsonString(e,n){return new zi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(zi,e,n)}}zi.runtime=P;zi.typeName="livekit.ICEServer";zi.fields=P.util.newFieldList(()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]);class _o extends me{constructor(e){super(),this.speakers=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new _o().fromBinary(e,n)}static fromJson(e,n){return new _o().fromJson(e,n)}static fromJsonString(e,n){return new _o().fromJsonString(e,n)}static equals(e,n){return P.util.equals(_o,e,n)}}_o.runtime=P;_o.typeName="livekit.SpeakersChanged";_o.fields=P.util.newFieldList(()=>[{no:1,name:"speakers",kind:"message",T:Di,repeated:!0}]);class Oo extends me{constructor(e){super(),P.util.initPartial(e,this)}static fromBinary(e,n){return new Oo().fromBinary(e,n)}static fromJson(e,n){return new Oo().fromJson(e,n)}static fromJsonString(e,n){return new Oo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Oo,e,n)}}Oo.runtime=P;Oo.typeName="livekit.RoomUpdate";Oo.fields=P.util.newFieldList(()=>[{no:1,name:"room",kind:"message",T:kl}]);class Mo extends me{constructor(e){super(),this.participantSid="",this.quality=Io.POOR,this.score=0,P.util.initPartial(e,this)}static fromBinary(e,n){return new Mo().fromBinary(e,n)}static fromJson(e,n){return new Mo().fromJson(e,n)}static fromJsonString(e,n){return new Mo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Mo,e,n)}}Mo.runtime=P;Mo.typeName="livekit.ConnectionQualityInfo";Mo.fields=P.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:P.getEnumType(Io)},{no:3,name:"score",kind:"scalar",T:2}]);class Do extends me{constructor(e){super(),this.updates=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Do().fromBinary(e,n)}static fromJson(e,n){return new Do().fromJson(e,n)}static fromJsonString(e,n){return new Do().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Do,e,n)}}Do.runtime=P;Do.typeName="livekit.ConnectionQualityUpdate";Do.fields=P.util.newFieldList(()=>[{no:1,name:"updates",kind:"message",T:Mo,repeated:!0}]);class Lo extends me{constructor(e){super(),this.participantSid="",this.trackSid="",this.state=Wa.ACTIVE,P.util.initPartial(e,this)}static fromBinary(e,n){return new Lo().fromBinary(e,n)}static fromJson(e,n){return new Lo().fromJson(e,n)}static fromJsonString(e,n){return new Lo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Lo,e,n)}}Lo.runtime=P;Lo.typeName="livekit.StreamStateInfo";Lo.fields=P.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:P.getEnumType(Wa)}]);class Bo extends me{constructor(e){super(),this.streamStates=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Bo().fromBinary(e,n)}static fromJson(e,n){return new Bo().fromJson(e,n)}static fromJsonString(e,n){return new Bo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Bo,e,n)}}Bo.runtime=P;Bo.typeName="livekit.StreamStateUpdate";Bo.fields=P.util.newFieldList(()=>[{no:1,name:"stream_states",kind:"message",T:Lo,repeated:!0}]);class gi extends me{constructor(e){super(),this.quality=Jt.LOW,this.enabled=!1,P.util.initPartial(e,this)}static fromBinary(e,n){return new gi().fromBinary(e,n)}static fromJson(e,n){return new gi().fromJson(e,n)}static fromJsonString(e,n){return new gi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(gi,e,n)}}gi.runtime=P;gi.typeName="livekit.SubscribedQuality";gi.fields=P.util.newFieldList(()=>[{no:1,name:"quality",kind:"enum",T:P.getEnumType(Jt)},{no:2,name:"enabled",kind:"scalar",T:8}]);class Fo extends me{constructor(e){super(),this.codec="",this.qualities=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Fo().fromBinary(e,n)}static fromJson(e,n){return new Fo().fromJson(e,n)}static fromJsonString(e,n){return new Fo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Fo,e,n)}}Fo.runtime=P;Fo.typeName="livekit.SubscribedCodec";Fo.fields=P.util.newFieldList(()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:gi,repeated:!0}]);class Uo extends me{constructor(e){super(),this.trackSid="",this.subscribedQualities=[],this.subscribedCodecs=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Uo().fromBinary(e,n)}static fromJson(e,n){return new Uo().fromJson(e,n)}static fromJsonString(e,n){return new Uo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Uo,e,n)}}Uo.runtime=P;Uo.typeName="livekit.SubscribedQualityUpdate";Uo.fields=P.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:gi,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:Fo,repeated:!0}]);class Hi extends me{constructor(e){super(),this.participantSid="",this.allTracks=!1,this.trackSids=[],this.participantIdentity="",P.util.initPartial(e,this)}static fromBinary(e,n){return new Hi().fromBinary(e,n)}static fromJson(e,n){return new Hi().fromJson(e,n)}static fromJsonString(e,n){return new Hi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Hi,e,n)}}Hi.runtime=P;Hi.typeName="livekit.TrackPermission";Hi.fields=P.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]);class Xi extends me{constructor(e){super(),this.allParticipants=!1,this.trackPermissions=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Xi().fromBinary(e,n)}static fromJson(e,n){return new Xi().fromJson(e,n)}static fromJsonString(e,n){return new Xi().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Xi,e,n)}}Xi.runtime=P;Xi.typeName="livekit.SubscriptionPermission";Xi.fields=P.util.newFieldList(()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:Hi,repeated:!0}]);class Vo extends me{constructor(e){super(),this.participantSid="",this.trackSid="",this.allowed=!1,P.util.initPartial(e,this)}static fromBinary(e,n){return new Vo().fromBinary(e,n)}static fromJson(e,n){return new Vo().fromJson(e,n)}static fromJsonString(e,n){return new Vo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Vo,e,n)}}Vo.runtime=P;Vo.typeName="livekit.SubscriptionPermissionUpdate";Vo.fields=P.util.newFieldList(()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]);class $i extends me{constructor(e){super(),this.publishTracks=[],this.dataChannels=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new $i().fromBinary(e,n)}static fromJson(e,n){return new $i().fromJson(e,n)}static fromJsonString(e,n){return new $i().fromJsonString(e,n)}static equals(e,n){return P.util.equals($i,e,n)}}$i.runtime=P;$i.typeName="livekit.SyncState";$i.fields=P.util.newFieldList(()=>[{no:1,name:"answer",kind:"message",T:Gn},{no:2,name:"subscription",kind:"message",T:Ur},{no:3,name:"publish_tracks",kind:"message",T:pi,repeated:!0},{no:4,name:"data_channels",kind:"message",T:Ki,repeated:!0},{no:5,name:"offer",kind:"message",T:Gn}]);class Ki extends me{constructor(e){super(),this.label="",this.id=0,this.target=Tn.PUBLISHER,P.util.initPartial(e,this)}static fromBinary(e,n){return new Ki().fromBinary(e,n)}static fromJson(e,n){return new Ki().fromJson(e,n)}static fromJsonString(e,n){return new Ki().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ki,e,n)}}Ki.runtime=P;Ki.typeName="livekit.DataChannelInfo";Ki.fields=P.util.newFieldList(()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:P.getEnumType(Tn)}]);class ln extends me{constructor(e){super(),this.scenario={case:void 0},P.util.initPartial(e,this)}static fromBinary(e,n){return new ln().fromBinary(e,n)}static fromJson(e,n){return new ln().fromJson(e,n)}static fromJsonString(e,n){return new ln().fromJsonString(e,n)}static equals(e,n){return P.util.equals(ln,e,n)}}ln.runtime=P;ln.typeName="livekit.SimulateScenario";ln.fields=P.util.newFieldList(()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:P.getEnumType(Qf),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"}]);class Ji extends me{constructor(e){super(),this.timestamp=Me.zero,this.rtt=Me.zero,P.util.initPartial(e,this)}static fromBinary(e,n){return new Ji().fromBinary(e,n)}static fromJson(e,n){return new Ji().fromJson(e,n)}static fromJsonString(e,n){return new Ji().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ji,e,n)}}Ji.runtime=P;Ji.typeName="livekit.Ping";Ji.fields=P.util.newFieldList(()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]);class Go extends me{constructor(e){super(),this.lastPingTimestamp=Me.zero,this.timestamp=Me.zero,P.util.initPartial(e,this)}static fromBinary(e,n){return new Go().fromBinary(e,n)}static fromJson(e,n){return new Go().fromJson(e,n)}static fromJsonString(e,n){return new Go().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Go,e,n)}}Go.runtime=P;Go.typeName="livekit.Pong";Go.fields=P.util.newFieldList(()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]);class Ds extends me{constructor(e){super(),this.regions=[],P.util.initPartial(e,this)}static fromBinary(e,n){return new Ds().fromBinary(e,n)}static fromJson(e,n){return new Ds().fromJson(e,n)}static fromJsonString(e,n){return new Ds().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Ds,e,n)}}Ds.runtime=P;Ds.typeName="livekit.RegionSettings";Ds.fields=P.util.newFieldList(()=>[{no:1,name:"regions",kind:"message",T:Wo,repeated:!0}]);class Wo extends me{constructor(e){super(),this.region="",this.url="",this.distance=Me.zero,P.util.initPartial(e,this)}static fromBinary(e,n){return new Wo().fromBinary(e,n)}static fromJson(e,n){return new Wo().fromJson(e,n)}static fromJsonString(e,n){return new Wo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(Wo,e,n)}}Wo.runtime=P;Wo.typeName="livekit.RegionInfo";Wo.fields=P.util.newFieldList(()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]);class jo extends me{constructor(e){super(),this.trackSid="",this.err=id.SE_UNKNOWN,P.util.initPartial(e,this)}static fromBinary(e,n){return new jo().fromBinary(e,n)}static fromJson(e,n){return new jo().fromJson(e,n)}static fromJsonString(e,n){return new jo().fromJsonString(e,n)}static equals(e,n){return P.util.equals(jo,e,n)}}jo.runtime=P;jo.typeName="livekit.SubscriptionResponse";jo.fields=P.util.newFieldList(()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:P.getEnumType(id)}]);function pW(t){if(!(typeof t>"u"))return typeof structuredClone=="function"?structuredClone(t):JSON.parse(JSON.stringify(t))}const gW=5e3,Xl=[];class J extends ao.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.attachedElements=[],this.isMuted=!1,this.streamState=J.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Ve,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),gW):this.handleAppVisibilityChanged()},this.log=ts((i=r.loggerName)!==null&&i!==void 0?i:eo.Track),this.loggerContextCb=r.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=J.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ct(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===J.Kind.Video&&(n="video"),this.attachedElements.length===0&&J.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Xl.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&Xl.splice(Xl.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),Ec(this.mediaStreamTrack,e);const r=e.srcObject.getTracks(),i=r.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(i?he.AudioPlaybackStarted:he.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(i?he.AudioPlaybackFailed:he.VideoPlaybackFailed,o):o.name==="AbortError"?Ve.debug("".concat(i?"audio":"video"," playback aborted, likely due to new play request")):Ve.warn("could not playback ".concat(i?"audio":"video"),o),i&&e&&r.some(s=>s.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(he.ElementAttached,e),e}detach(e){try{if(e){Vc(this.mediaStreamTrack,e);const r=this.attachedElements.indexOf(e);return r>=0&&(this.attachedElements.splice(r,1),this.recycleElement(e),this.emit(he.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(r=>{Vc(this.mediaStreamTrack,r),n.push(r),this.recycleElement(r),this.emit(he.ElementDetached,r)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval)}updateLoggerOptions(e){e.loggerName&&(this.log=ts(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Xl.forEach(r=>{r.parentElement||(n=!1)}),n&&Xl.push(e)}}handleAppVisibilityChanged(){return F(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden"})}addAppVisibilityListener(){sr()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){sr()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function Ec(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let r;t.kind==="audio"?r=n.getAudioTracks():r=n.getVideoTracks(),r.includes(t)||(r.forEach(i=>{n.removeTrack(i)}),n.addTrack(t)),(!ja()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(ja()||cl())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function Vc(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(l){l.Audio="audio",l.Video="video",l.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(l){l.Camera="camera",l.Microphone="microphone",l.ScreenShare="screen_share",l.ScreenShareAudio="screen_share_audio",l.Unknown="unknown"})(n=t.Source||(t.Source={}));let r;(function(l){l.Active="active",l.Paused="paused",l.Unknown="unknown"})(r=t.StreamState||(t.StreamState={}));function i(l){switch(l){case e.Audio:return En.AUDIO;case e.Video:return En.VIDEO;default:return En.DATA}}t.kindToProto=i;function o(l){switch(l){case En.AUDIO:return e.Audio;case En.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function s(l){switch(l){case n.Camera:return Lt.CAMERA;case n.Microphone:return Lt.MICROPHONE;case n.ScreenShare:return Lt.SCREEN_SHARE;case n.ScreenShareAudio:return Lt.SCREEN_SHARE_AUDIO;default:return Lt.UNKNOWN}}t.sourceToProto=s;function a(l){switch(l){case Lt.CAMERA:return n.Camera;case Lt.MICROPHONE:return n.Microphone;case Lt.SCREEN_SHARE:return n.ScreenShare;case Lt.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=a;function c(l){switch(l){case Wa.ACTIVE:return r.Active;case Wa.PAUSED:return r.Paused;default:return r.Unknown}}t.streamStateFromProto=c})(J||(J={}));function SP(t,e,n){var r;const i=(r=pW(t))!==null&&r!==void 0?r:{};return i.audio===!0&&(i.audio={}),i.video===!0&&(i.video={}),i.audio&&l0(i.audio,e),i.video&&l0(i.video,n),i}function l0(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function Fp(t){const e={};if(t.video)if(typeof t.video=="object"){const n={},r=n,i=t.video;Object.keys(i).forEach(o=>{switch(o){case"resolution":l0(r,i.resolution);break;default:r[o]=i[o]}}),e.video=n}else e.video=t.video;else e.video=!1;return t.audio?typeof t.audio=="object"?e.audio=t.audio:e.audio=!0:e.audio=!1,e}function mW(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return F(this,void 0,void 0,function*(){const n=IC();if(n){const r=n.createAnalyser();r.fftSize=2048;const i=r.frequencyBinCount,o=new Uint8Array(i);n.createMediaStreamSource(new MediaStream([t.mediaStreamTrack])).connect(r),yield Xo(e),r.getByteTimeDomainData(o);const a=o.some(c=>c!==128&&c!==0);return n.close(),!a}return!1})}function IC(){const t=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(t)return new t({latencyHint:"interactive"})}function vW(t){return t===J.Source.Microphone?"audioinput":t===J.Source.Camera?"videoinput":void 0}function yW(t){var e,n;let r=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(r=typeof r=="boolean"?{}:r,ja()?r=Object.assign(Object.assign({},r),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):r=Object.assign(Object.assign({},r),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:r,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio}}function wP(t){const e=t.split("/")[1].toLowerCase();if(!bP.includes(e))throw Error("Video codec not supported: ".concat(e));return e}function CW(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new pi({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function Ct(t){return t instanceof J?{trackSid:t.sid,trackSource:t.source,trackMuted:t.isMuted,trackEnabled:t.mediaStreamTrack.enabled,trackKind:t.kind}:{trackSid:t.trackSid,trackName:t.trackName,track:t.track?Ct(t.track):void 0,trackEnabled:t.isEnabled,trackEncrypted:t.isEncrypted,trackMimeType:t.mimeType}}const IW="|",fw="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function bW(t){const e=t.split(IW);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function Xo(t){return F(this,void 0,void 0,function*(){return new Promise(e=>hn.setTimeout(e,t))})}function pw(){return"addTransceiver"in RTCPeerConnection.prototype}function gw(){return"addTrack"in RTCPeerConnection.prototype}function SW(){if(!("getCapabilities"in RTCRtpSender)||ja())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/AV1"){e=!0;break}}return e}function wW(){if(!("getCapabilities"in RTCRtpSender)||cl())return!1;if(ja()){const n=ns();if(n!=null&&n.version&&bC(n.version,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType==="video/VP9"){e=!0;break}}return e}function Au(t){return t==="av1"||t==="vp9"}function u0(t){return document?(t||(t=document.createElement("audio")),"setSinkId"in t):!1}const AW={Chrome:"100",Safari:"15",Firefox:"100"};function kW(t){if(!sr()||!("setCodecPreferences"in t))return!1;const e=ns();if(!(e!=null&&e.name)||!e.version)return!1;const n=AW[e.name];return n?bC(e.version,n)>=0:!1}function cl(){var t;return((t=ns())===null||t===void 0?void 0:t.name)==="Firefox"}function EW(){var t;return((t=ns())===null||t===void 0?void 0:t.name)==="Chrome"}function ja(){var t;return((t=ns())===null||t===void 0?void 0:t.name)==="Safari"}function TW(){const t=ns();return(t==null?void 0:t.name)==="Safari"&&t.version.startsWith("17.")}function AP(){return sr()?/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function sr(){return typeof document<"u"}function Za(){return navigator.product=="ReactNative"}function d0(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function kP(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function EP(){if(!Za())return;let t=kP();if(t)return t.platform}function mw(){if(sr())return window.devicePixelRatio;if(Za()){let t=kP();if(t)return t.devicePixelRatio}return 1}function bC(t,e){const n=t.split("."),r=e.split("."),i=Math.min(n.length,r.length);for(let o=0;o<i;++o){const s=parseInt(n[o],10),a=parseInt(r[o],10);if(s>a)return 1;if(s<a)return-1;if(o===i-1&&s===a)return 0}return t===""&&e!==""?-1:e===""?1:n.length==r.length?0:n.length<r.length?-1:1}function xW(t){for(const e of t)e.target.handleResize(e)}function PW(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Kg=null;const vw=()=>(Kg||(Kg=new ResizeObserver(xW)),Kg);let Jg=null;const yw=()=>(Jg||(Jg=new IntersectionObserver(PW,{root:null,rootMargin:"0px"})),Jg);function RW(){var t;const e=new ko({sdk:al.JS,protocol:dW,version:uW});return Za()&&(e.os=(t=EP())!==null&&t!==void 0?t:""),e}function Cw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=document.createElement("canvas");i.width=t,i.height=e;const o=i.getContext("2d");o==null||o.fillRect(0,0,i.width,i.height),r&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const s=i.captureStream(),[a]=s.getTracks();if(!a)throw Error("Could not get empty media stream video track");return a.enabled=n,a}let $l;function Yg(){if(!$l){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const r=t.createMediaStreamDestination();if(e.connect(n),n.connect(r),e.start(),[$l]=r.stream.getAudioTracks(),!$l)throw Error("Could not get empty media stream audio track");$l.enabled=!1}return $l.clone()}class TP{constructor(e,n){this.onFinally=n,this.promise=new Promise((r,i)=>F(this,void 0,void 0,function*(){this.resolve=r,this.reject=i,e&&(yield e(r,i))})).finally(()=>{var r;return(r=this.onFinally)===null||r===void 0?void 0:r.call(this)})}}function NW(t,e){const n=Object.assign({cloneTrack:!1,fftSize:2048,smoothingTimeConstant:.8,minDecibels:-100,maxDecibels:-80},e),r=IC();if(!r)throw new Error("Audio Context not supported on this browser");const i=n.cloneTrack?t.mediaStreamTrack.clone():t.mediaStreamTrack,o=r.createMediaStreamSource(new MediaStream([i])),s=r.createAnalyser();s.minDecibels=n.minDecibels,s.maxDecibels=n.maxDecibels,s.fftSize=n.fftSize,s.smoothingTimeConstant=n.smoothingTimeConstant,o.connect(s);const a=new Uint8Array(s.frequencyBinCount);return{calculateVolume:()=>{s.getByteFrequencyData(a);let u=0;for(const h of a)u+=Math.pow(h/255,2);return Math.sqrt(u/a.length)},analyser:s,cleanup:()=>F(this,void 0,void 0,function*(){yield r.close(),n.cloneTrack&&i.stop()})}}class yi{constructor(){this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(i=>e=()=>{this._locks-=1,i()}),r=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),r}}function _W(t){return bP.includes(t)}function Ra(t){if(typeof t=="string")return t;if(Array.isArray(t))return t[0];if(t.exact)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function OW(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function Iw(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}const bw="default";class Bn{static getInstance(){return this.instance===void 0&&(this.instance=new Bn),this.instance}getDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r;return F(this,void 0,void 0,function*(){if(((r=Bn.userMediaPromiseMap)===null||r===void 0?void 0:r.size)>0){Ve.debug("awaiting getUserMedia promise");try{e?yield Bn.userMediaPromiseMap.get(e):yield Promise.all(Bn.userMediaPromiseMap.values())}catch{Ve.warn("error waiting for media permissons")}}let i=yield navigator.mediaDevices.enumerateDevices();if(n&&!(ja()&&this.hasDeviceInUse(e))&&(i.length===0||i.some(s=>{const a=s.label==="",c=e?s.kind===e:!0;return a&&c}))){const s={video:e!=="audioinput"&&e!=="audiooutput",audio:e!=="videoinput"},a=yield navigator.mediaDevices.getUserMedia(s);i=yield navigator.mediaDevices.enumerateDevices(),a.getTracks().forEach(c=>{c.stop()})}return e&&(i=i.filter(o=>o.kind===e)),i})}normalizeDeviceId(e,n,r){return F(this,void 0,void 0,function*(){if(n!==bw)return n;const o=(yield this.getDevices(e)).find(s=>s.groupId===r&&s.deviceId!==bw);return o==null?void 0:o.deviceId})}hasDeviceInUse(e){return e?Bn.userMediaPromiseMap.has(e):Bn.userMediaPromiseMap.size>0}}Bn.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Bn.userMediaPromiseMap=new Map;const MW=1e3;class ll extends J{get constraints(){return this._constraints}constructor(e,n,r){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=yC(()=>F(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>F(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(he.Ended,this)},this.reacquireTrack=!1,this.providedByUser=i,this.muteLock=new yi,this.pauseUpstreamLock=new yi,this.processorLock=new yi,this.setMediaStreamTrack(e,!0),this._constraints=e.getConstraints(),r&&(this._constraints=r)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==J.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}setMediaStreamTrack(e,n){return F(this,void 0,void 0,function*(){if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(i=>{Vc(this._mediaStreamTrack,i)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e&&this.processorElement){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");Ec(e,this.processorElement),this.processorElement.muted=!0,yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(i=>{Ec(r??e,i)}))})}waitForDimensions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:MW;var n;return F(this,void 0,void 0,function*(){if(this.kind===J.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((n=ns())===null||n===void 0?void 0:n.os)==="iOS"&&(yield Xo(10));const r=Date.now();for(;Date.now()-r<e;){const i=this.dimensions;if(i)return i;yield Xo(50)}throw new Ni("unable to get track dimensions after timeout")})}getDeviceId(){return F(this,void 0,void 0,function*(){if(this.source===J.Source.ScreenShare)return;const{deviceId:e,groupId:n}=this._mediaStreamTrack.getSettings(),r=this.kind===J.Kind.Audio?"audioinput":"videoinput";return Bn.getInstance().normalizeDeviceId(r,e,n)})}mute(){return F(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return F(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return F(this,void 0,void 0,function*(){if(!this.sender)throw new Ni("unable to replace an unpublished track");return this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),this.providedByUser=n,this.processor&&(yield this.stopProcessor()),this})}restart(e){return F(this,void 0,void 0,function*(){e||(e=this._constraints),this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const n={audio:!1,video:!1};this.kind===J.Kind.Video?n.video=e:n.audio=e,this.attachedElements.forEach(o=>{Vc(this.mediaStreamTrack,o)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const i=(yield navigator.mediaDevices.getUserMedia(n)).getTracks()[0];return i.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(i),this._constraints=e,this.emit(he.Restarted,this),this})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?he.Muted:he.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return F(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),AP()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return F(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(he.UpstreamPaused,this);const n=ns();if((n==null?void 0:n.name)==="Safari"&&bC(n.version,"12.0")<0)throw new vC("pauseUpstream is not supported on Safari < 12.");yield this.sender.replaceTrack(null)}finally{e()}})}resumeUpstream(){return F(this,void 0,void 0,function*(){const e=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(he.UpstreamResumed,this),yield this.sender.replaceTrack(this._mediaStreamTrack)}finally{e()}})}getRTCStatsReport(){var e;return F(this,void 0,void 0,function*(){return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;var r,i;return F(this,void 0,void 0,function*(){const o=yield this.processorLock.lock();try{if(this.log.debug("setting up processor",this.logContext),this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement=(r=this.processorElement)!==null&&r!==void 0?r:document.createElement(this.kind),Ec(this._mediaStreamTrack,this.processorElement),this.processorElement.muted=!0,this.processorElement.play().catch(a=>this.log.error("failed to play processor element",Object.assign(Object.assign({},this.logContext),{error:a})));const s={kind:this.kind,track:this._mediaStreamTrack,element:this.processorElement};if(yield e.init(s),this.processor=e,this.processor.processedTrack){for(const a of this.attachedElements)a!==this.processorElement&&n&&(Vc(this._mediaStreamTrack,a),Ec(this.processor.processedTrack,a));yield(i=this.sender)===null||i===void 0?void 0:i.replaceTrack(this.processor.processedTrack)}}finally{o()}})}getProcessor(){return this.processor}stopProcessor(){var e,n;return F(this,void 0,void 0,function*(){this.processor&&(this.log.debug("stopping processor",this.logContext),(e=this.processor.processedTrack)===null||e===void 0||e.stop(),yield this.processor.destroy(),this.processor=void 0,(n=this.processorElement)===null||n===void 0||n.remove(),this.processorElement=void 0,yield this.restart())})}}class DW extends ao.EventEmitter{constructor(e){super(),this.onWorkerMessage=n=>{var r,i;const{kind:o,data:s}=n.data;switch(o){case"error":Ve.error(s.error.message),this.emit(Ms.EncryptionError,s.error);break;case"initAck":s.enabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"enable":if(this.encryptionEnabled!==s.enabled&&s.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Ms.ParticipantEncryptionStatusChanged,s.enabled,this.room.localParticipant),this.encryptionEnabled=s.enabled;else if(s.participantIdentity){const a=(i=this.room)===null||i===void 0?void 0:i.getParticipantByIdentity(s.participantIdentity);if(!a)throw TypeError("couldn't set encryption status, participant not found".concat(s.participantIdentity));this.emit(Ms.ParticipantEncryptionStatusChanged,s.enabled,a)}this.encryptionEnabled&&this.keyProvider.getKeys().forEach(a=>{this.postKey(a)});break;case"ratchetKey":this.keyProvider.emit(Zs.KeyRatcheted,s.material,s.keyIndex);break}},this.onWorkerError=n=>{Ve.error("e2ee worker encountered an error:",{error:n.error}),this.emit(Ms.EncryptionError,n.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1}setup(e){if(!iW())throw new vC("tried to setup end-to-end encryption on an unsupported browser");if(Ve.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions()}};this.worker&&(Ve.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Ve.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Ve.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(ye.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(te.TrackPublished,(r,i)=>this.setParticipantCryptorEnabled(r.trackInfo.encryption!==un.NONE,i.identity)),e.on(te.ConnectionStateChanged,r=>{r===He.Connected&&e.participants.forEach(i=>{i.tracks.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==un.NONE,i.identity)})})}).on(te.TrackUnsubscribed,(r,i,o)=>{var s;const a={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:r.mediaStreamID}};(s=this.worker)===null||s===void 0||s.postMessage(a)}).on(te.TrackSubscribed,(r,i,o)=>{this.setupE2EEReceiver(r,o.identity,i.trackInfo)}).on(te.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity),n.getKeys().forEach(r=>{this.postKey(r)})}),e.localParticipant.on(oe.LocalTrackPublished,r=>F(this,void 0,void 0,function*(){this.setupE2EESender(r.track,r.track.sender)})),n.on(Zs.SetKey,r=>this.postKey(r)).on(Zs.RatchetRequest,(r,i)=>this.postRatchetRequest(r,i))}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const r={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(r)}postKey(e){let{key:n,participantIdentity:r,keyIndex:i}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const s={kind:"setKey",data:{participantIdentity:r,isPublisher:r===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:i}};this.worker.postMessage(s)}postEnable(e,n){if(this.worker){const r={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(r)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const r={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,r){if(e.receiver){if(!(r!=null&&r.mimeType)||r.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?wP(r.mimeType):void 0)}}setupE2EESender(e,n){if(!(e instanceof ll)||!n){n||Ve.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,r,i){return F(this,void 0,void 0,function*(){if(this.worker){if(s0()){const o={kind:"decode",participantIdentity:r,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(dh in e&&i){const c={kind:"updateCodec",data:{trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(c);return}let o=e.writableStream,s=e.readableStream;if(!o||!s){const c=e.createEncodedStreams();e.writableStream=c.writable,o=c.writable,e.readableStream=c.readable,s=c.readable}const a={kind:"decode",data:{readableStream:s,writableStream:o,trackId:n,codec:i,participantIdentity:r}};this.worker.postMessage(a,[s,o])}e[dh]=!0}})}handleSender(e,n,r){var i;if(!(dh in e||!this.worker)){if(!(!((i=this.room)===null||i===void 0)&&i.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(s0()){Ve.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{Ve.info("initialize encoded streams");const o=e.createEncodedStreams(),s={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:r,trackId:n,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(s,[o.readable,o.writable])}e[dh]=!0}}}var ku;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(ku||(ku={}));class LW{constructor(){this.pendingTasks=new Map,this.taskMutex=new yi,this.nextTaskIndex=0}run(e){return F(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:ku.WAITING};this.pendingTasks.set(n.id,n);const r=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=ku.RUNNING,yield e()}finally{n.status=ku.COMPLETED,this.pendingTasks.delete(n.id),r()}})}flush(){return F(this,void 0,void 0,function*(){return this.run(()=>F(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}const BW=["syncState","trickle","offer","answer","simulate","leave"];function FW(t){const e=BW.indexOf(t.case)>=0;return Ve.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var Nt;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(Nt||(Nt={}));class SC{get currentState(){return this.state}get isDisconnected(){return this.state===Nt.DISCONNECTING||this.state===Nt.DISCONNECTED}get isEstablishingConnection(){return this.state===Nt.CONNECTING||this.state===Nt.RECONNECTING}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var r;this.rtt=0,this.state=Nt.DISCONNECTED,this.log=Ve,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0},this.log=ts((r=n.loggerName)!==null&&r!==void 0?r:eo.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new LW,this.queuedRequests=[],this.closingLock=new yi,this.connectionLock=new yi,this.state=Nt.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,r,i){return F(this,void 0,void 0,function*(){return this.state=Nt.CONNECTING,this.options=r,yield this.connect(e,n,r,i)})}reconnect(e,n,r,i){return F(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=Nt.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:r,reconnectReason:i}))})}connect(e,n,r,i){this.connectOptions=r,e=OW(e),e=e.replace(/\/$/,""),e+="/rtc";const o=RW(),s=UW(n,o,r);return new Promise((a,c)=>F(this,void 0,void 0,function*(){const l=yield this.connectionLock.lock();try{const u=()=>F(this,void 0,void 0,function*(){this.close(),clearTimeout(d),c(new ht("room connection has been cancelled (signal)"))}),d=setTimeout(()=>{this.close(),c(new ht("room connection has timed out (signal)"))},r.websocketTimeout);i!=null&&i.aborted&&u(),i==null||i.addEventListener("abort",u),this.log.debug("connecting to ".concat(e+s),this.logContext),this.ws&&(yield this.close(!1)),this.ws=new WebSocket(e+s),this.ws.binaryType="arraybuffer",this.ws.onopen=()=>{clearTimeout(d)},this.ws.onerror=h=>F(this,void 0,void 0,function*(){if(this.state!==Nt.CONNECTED){clearTimeout(d);try{const f=yield fetch("http".concat(e.substring(2),"/validate").concat(s));if(f.status.toFixed(0).startsWith("4")){const p=yield f.text();c(new ht(p,0,f.status))}else c(new ht("Internal error",2,f.status))}catch{c(new ht("server was not reachable",1))}return}this.handleWSError(h)}),this.ws.onmessage=h=>F(this,void 0,void 0,function*(){var f,p,g,C;let m;if(typeof h.data=="string"){const v=JSON.parse(h.data);m=Gi.fromJson(v)}else if(h.data instanceof ArrayBuffer)m=Gi.fromBinary(new Uint8Array(h.data));else{this.log.error("could not decode websocket message: ".concat(typeof h.data),this.logContext);return}if(this.state!==Nt.CONNECTED){let v=!1;if(((f=m.message)===null||f===void 0?void 0:f.case)==="join"?(this.state=Nt.CONNECTED,i==null||i.removeEventListener("abort",u),this.pingTimeoutDuration=m.message.value.pingTimeout,this.pingIntervalDuration=m.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&(this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})),this.startPingInterval()),a(m.message.value)):this.state===Nt.RECONNECTING&&m.message.case!=="leave"?(this.state=Nt.CONNECTED,i==null||i.removeEventListener("abort",u),this.startPingInterval(),((p=m.message)===null||p===void 0?void 0:p.case)==="reconnect"?a((g=m.message)===null||g===void 0?void 0:g.value):(a(),v=!0)):this.isEstablishingConnection&&m.message.case==="leave"?c(new ht("Received leave request while trying to (re)connect",4)):r.reconnect||c(new ht("did not receive join response, got ".concat((C=m.message)===null||C===void 0?void 0:C.case," instead"))),!v)return}this.signalLatency&&(yield Xo(this.signalLatency)),this.handleSignalResponse(m)}),this.ws.onclose=h=>{this.isEstablishingConnection&&c(new ht("Websocket got closed during a (re)connection attempt")),this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:h.reason,state:this.state})),this.handleOnClose(h.reason)}}finally{l()}}))}close(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return F(this,void 0,void 0,function*(){const n=yield this.closingLock.lock();try{if(e&&(this.state=Nt.DISCONNECTING),this.ws){this.ws.onmessage=null,this.ws.onopen=null,this.ws.onclose=null;const r=new Promise(i=>{this.ws?this.ws.onclose=()=>{i()}:i()});this.ws.readyState<this.ws.CLOSING&&(this.ws.close(),yield Promise.race([r,Xo(250)])),this.ws=void 0}}finally{e&&(this.state=Nt.DISCONNECTED),this.clearPingInterval(),n()}})}sendOffer(e){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:qf(e)})}sendAnswer(e){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:qf(e)})}sendIceCandidate(e,n){return this.log.trace("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new hi({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new fi({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return this.sendRequest({case:"updateMetadata",value:new Zi({metadata:e,name:n})})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new ji({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new Xi({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:Me.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Ji({timestamp:Me.parse(Date.now()),rtt:Me.parse(this.rtt)})})])}sendLeave(){return this.sendRequest({case:"leave",value:new Vr({canReconnect:!1,reason:Ho.CLIENT_INITIATED})})}sendRequest(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return F(this,void 0,void 0,function*(){if(!n&&!FW(e)&&this.state===Nt.RECONNECTING){this.queuedRequests.push(()=>F(this,void 0,void 0,function*(){yield this.sendRequest(e,!0)}));return}if(n||(yield this.requestQueue.flush()),this.signalLatency&&(yield Xo(this.signalLatency)),!this.ws||this.ws.readyState!==this.ws.OPEN){this.log.error("cannot send signal request before connected, type: ".concat(e==null?void 0:e.case),this.logContext);return}const i=new To({message:e});try{this.useJSON?this.ws.send(i.toJsonString()):this.ws.send(i.toBinary())}catch(o){this.log.error("error sending signal message",Object.assign(Object.assign({},this.logContext),{error:o}))}})}handleSignalResponse(e){var n,r;const i=e.message;if(i==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(i.case==="answer"){const s=Sw(i.value);this.onAnswer&&this.onAnswer(s)}else if(i.case==="offer"){const s=Sw(i.value);this.onOffer&&this.onOffer(s)}else if(i.case==="trickle"){const s=JSON.parse(i.value.candidateInit);this.onTrickle&&this.onTrickle(s,i.value.target)}else i.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=i.value.participants)!==null&&n!==void 0?n:[]):i.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(i.value):i.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((r=i.value.speakers)!==null&&r!==void 0?r:[]):i.case==="leave"?this.onLeave&&this.onLeave(i.value):i.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(i.value.sid,i.value.muted):i.case==="roomUpdate"?this.onRoomUpdate&&i.value.room&&this.onRoomUpdate(i.value.room):i.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(i.value):i.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(i.value):i.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(i.value):i.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(i.value):i.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(i.value):i.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(i.value):i.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(i.value):i.case==="pong"||(i.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(i.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:i.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return F(this,void 0,void 0,function*(){if(this.state===Nt.DISCONNECTED)return;const n=this.onClose;yield this.close(),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=hn.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&hn.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=hn.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&hn.clearInterval(this.pingInterval)}}function Sw(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function qf(t){return new Gn({sdp:t.sdp,type:t.type})}function UW(t,e,n){var r;const i=new URLSearchParams;return i.set("access_token",t),n.reconnect&&(i.set("reconnect","1"),n.sid&&i.set("sid",n.sid)),i.set("auto_subscribe",n.autoSubscribe?"1":"0"),i.set("sdk",Za()?"reactnative":"js"),i.set("version",e.version),i.set("protocol",e.protocol.toString()),e.deviceModel&&i.set("device_model",e.deviceModel),e.os&&i.set("os",e.os),e.osVersion&&i.set("os_version",e.osVersion),e.browser&&i.set("browser",e.browser),e.browserVersion&&i.set("browser_version",e.browserVersion),n.publishOnly!==void 0&&i.set("publish",n.publishOnly),n.adaptiveStream&&i.set("adaptive_stream","1"),n.reconnectReason&&i.set("reconnect_reason",n.reconnectReason.toString()),!((r=navigator.connection)===null||r===void 0)&&r.type&&i.set("network",navigator.connection.type),"?".concat(i.toString())}var xP={},PP={exports:{}},ww=PP.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(t){return t.encoding?"rtpmap:%d %s/%s/%s":t.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(t){return t.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(t){return t.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(t){return"extmap:%d"+(t.direction?"/%s":"%v")+(t["encrypt-uri"]?" %s":"%v")+" %s"+(t.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(t){return t.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(t){var e="candidate:%s %d %s %d %s %d typ %s";return e+=t.raddr!=null?" raddr %s rport %d":"%v%v",e+=t.tcptype!=null?" tcptype %s":"%v",t.generation!=null&&(e+=" generation %d"),e+=t["network-id"]!=null?" network-id %d":"%v",e+=t["network-cost"]!=null?" network-cost %d":"%v",e}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(t){var e="ssrc:%d";return t.attribute!=null&&(e+=" %s",t.value!=null&&(e+=":%s")),e}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(t){return t.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(t){return t.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(t){return"imageattr:%s %s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(t){return"simulcast:%s %s"+(t.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(t){return"ts-refclk:%s"+(t.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(t){var e="mediaclk:";return e+=t.id!=null?"id=%s %s":"%v%s",e+=t.mediaClockValue!=null?"=%s":"",e+=t.rateNumerator!=null?" rate=%s":"",e+=t.rateDenominator!=null?"/%s":"",e}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(ww).forEach(function(t){var e=ww[t];e.forEach(function(n){n.reg||(n.reg=/(.*)/),n.format||(n.format="%s")})});var RP=PP.exports;(function(t){var e=function(a){return String(Number(a))===a?Number(a):a},n=function(a,c,l,u){if(u&&!l)c[u]=e(a[1]);else for(var d=0;d<l.length;d+=1)a[d+1]!=null&&(c[l[d]]=e(a[d+1]))},r=function(a,c,l){var u=a.name&&a.names;a.push&&!c[a.push]?c[a.push]=[]:u&&!c[a.name]&&(c[a.name]={});var d=a.push?{}:u?c[a.name]:c;n(l.match(a.reg),d,a.names,a.name),a.push&&c[a.push].push(d)},i=RP,o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(a){var c={},l=[],u=c;return a.split(/(\r\n|\r|\n)/).filter(o).forEach(function(d){var h=d[0],f=d.slice(2);h==="m"&&(l.push({rtp:[],fmtp:[]}),u=l[l.length-1]);for(var p=0;p<(i[h]||[]).length;p+=1){var g=i[h][p];if(g.reg.test(f))return r(g,u,f)}}),c.media=l,c};var s=function(a,c){var l=c.split(/=(.+)/,2);return l.length===2?a[l[0]]=e(l[1]):l.length===1&&c.length>1&&(a[l[0]]=void 0),a};t.parseParams=function(a){return a.split(/;\s?/).reduce(s,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(a){return a.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(a){for(var c=[],l=a.split(" ").map(e),u=0;u<l.length;u+=3)c.push({component:l[u],ip:l[u+1],port:l[u+2]});return c},t.parseImageAttributes=function(a){return a.split(" ").map(function(c){return c.substring(1,c.length-1).split(",").reduce(s,{})})},t.parseSimulcastStreamList=function(a){return a.split(";").map(function(c){return c.split(",").map(function(l){var u,d=!1;return l[0]!=="~"?u=e(l):(u=e(l.substring(1,l.length)),d=!0),{scid:u,paused:d}})})}})(xP);var Qg=RP,VW=/%[sdv%]/g,GW=function(t){var e=1,n=arguments,r=n.length;return t.replace(VW,function(i){if(e>=r)return i;var o=n[e];switch(e+=1,i){case"%%":return"%";case"%s":return String(o);case"%d":return Number(o);case"%v":return""}})},Kl=function(t,e,n){var r=e.format instanceof Function?e.format(e.push?n:n[e.name]):e.format,i=[t+"="+r];if(e.names)for(var o=0;o<e.names.length;o+=1){var s=e.names[o];e.name?i.push(n[e.name][s]):i.push(n[e.names[o]])}else i.push(n[e.name]);return GW.apply(null,i)},WW=["v","o","s","i","u","e","p","c","b","t","r","z","a"],jW=["i","c","b","a"],ZW=function(t,e){e=e||{},t.version==null&&(t.version=0),t.name==null&&(t.name=" "),t.media.forEach(function(o){o.payloads==null&&(o.payloads="")});var n=e.outerOrder||WW,r=e.innerOrder||jW,i=[];return n.forEach(function(o){Qg[o].forEach(function(s){s.name in t&&t[s.name]!=null?i.push(Kl(o,s,t)):s.push in t&&t[s.push]!=null&&t[s.push].forEach(function(a){i.push(Kl(o,s,a))})})}),t.media.forEach(function(o){i.push(Kl("m",Qg.m[0],o)),r.forEach(function(s){Qg[s].forEach(function(a){a.name in o&&o[a.name]!=null?i.push(Kl(s,a,o)):a.push in o&&o[a.push]!=null&&o[a.push].forEach(function(c){i.push(Kl(s,a,c))})})})}),i.join(`\r
`)+`\r
`},zW=xP,HW=ZW,qg=HW,lu=zW.parse;const Aw=.7,Gc={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class kw extends ao.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var i;super(),this.log=Ve,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=yC(o=>F(this,void 0,void 0,function*(){this.emit(Gc.NegotiationStarted);try{yield this.createAndSendOffer()}catch(s){if(o)o(s);else throw s}}),100),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=ts((i=r.loggerName)!==null&&i!==void 0?i:eo.PCTransport),this.loggerOptions=r,this.config=e,this.mediaConstraints=n,this._pc=this.createPC()}createPC(){const e=EW()?new RTCPeerConnection(this.config,this.mediaConstraints):new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var r;n.candidate&&((r=this.onIceCandidate)===null||r===void 0||r.call(this,n.candidate))},e.onicecandidateerror=n=>{var r;(r=this.onIceCandidateError)===null||r===void 0||r.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var r;(r=this.onDataChannel)===null||r===void 0||r.call(this,n)},e.ontrack=n=>{var r;(r=this.onTrack)===null||r===void 0||r.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return F(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e){var n;return F(this,void 0,void 0,function*(){let r;if(e.type==="offer"){let{stereoMids:i,nackMids:o}=$W(e);this.remoteStereoMids=i,this.remoteNackMids=o}else if(e.type==="answer"){const i=lu((n=e.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"&&this.trackBitrates.some(s=>{if(!s.transceiver||o.mid!=s.transceiver.mid)return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config=l.config.split(";").filter(u=>!u.includes("maxaveragebitrate")).join(";"),s.maxbr>0&&(l.config+=";maxaveragebitrate=".concat(s.maxbr*1e3)),c=!0;break}return c||s.maxbr>0&&o.fmtp.push({payload:a,config:"maxaveragebitrate=".concat(s.maxbr*1e3)}),!0})}),r=qg(i)}yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(i=>{this.pc.addIceCandidate(i)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Gc.NegotiationComplete),e.sdp&&lu(e.sdp).media.forEach(o=>{o.type==="video"&&this.emit(Gc.RTPVideoPayloadTypes,o.rtp)}))})}createAndSendOffer(e){var n;return F(this,void 0,void 0,function*(){if(this.onOffer===void 0)return;if(e!=null&&e.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const o=this._pc.remoteDescription;if(e!=null&&e.iceRestart&&o)yield this._pc.setRemoteDescription(o);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=yield this.pc.createOffer(e),i=lu((n=r.sdp)!==null&&n!==void 0?n:"");i.media.forEach(o=>{o.type==="audio"?Ew(o,[],[]):o.type==="video"&&(XW(o),this.trackBitrates.some(s=>{if(!o.msid||!s.cid||!o.msid.includes(s.cid))return!1;let a=0;if(o.rtp.some(l=>l.codec.toUpperCase()===s.codec.toUpperCase()?(a=l.payload,!0):!1),a===0)return!0;let c=!1;for(const l of o.fmtp)if(l.payload===a){l.config.includes("x-google-start-bitrate")||(l.config+=";x-google-start-bitrate=".concat(Math.round(s.maxbr*Aw))),l.config.includes("x-google-max-bitrate")||(l.config+=";x-google-max-bitrate=".concat(s.maxbr)),c=!0;break}return c||o.fmtp.push({payload:a,config:"x-google-start-bitrate=".concat(Math.round(s.maxbr*Aw),";x-google-max-bitrate=").concat(s.maxbr)}),!0}))}),yield this.setMungedSDP(r,qg(i)),this.onOffer(r)})}createAndSetAnswer(){var e;return F(this,void 0,void 0,function*(){const n=yield this.pc.createAnswer(),r=lu((e=n.sdp)!==null&&e!==void 0?e:"");return r.media.forEach(i=>{i.type==="audio"&&Ew(i,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,qg(r)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new zt("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new zt("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){var e;return F(this,void 0,void 0,function*(){if(!this._pc)return;let n="";const r=new Map,i=new Map;if((yield this._pc.getStats()).forEach(a=>{switch(a.type){case"transport":n=a.selectedCandidatePairId;break;case"candidate-pair":n===""&&a.selected&&(n=a.id),r.set(a.id,a);break;case"remote-candidate":i.set(a.id,"".concat(a.address,":").concat(a.port));break}}),n==="")return;const s=(e=r.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(s!==void 0)return i.get(s)})}setMungedSDP(e,n,r){return F(this,void 0,void 0,function*(){if(n){const i=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(r?"remote":"local"," description"),this.logContext),r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=i}}try{r?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(i){let o="unknown error";i instanceof Error?o=i.message:typeof i=="string"&&(o=i);const s={error:o,sdp:e.sdp};throw!r&&this.pc.remoteDescription&&(s.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:s})),new a0(o)}})}}function Ew(t,e,n){let r=0;t.rtp.some(i=>i.codec==="opus"?(r=i.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(t.mid)&&!t.rtcpFb.some(i=>i.payload===r&&i.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),e.includes(t.mid)&&t.fmtp.some(i=>i.payload===r?(i.config.includes("stereo=1")||(i.config+=";stereo=1"),!0):!1))}function XW(t){var e,n,r,i;const o=(n=(e=t.rtp[0])===null||e===void 0?void 0:e.codec)===null||n===void 0?void 0:n.toLowerCase();if(!Au(o))return;let s=0;((r=t.ext)===null||r===void 0?void 0:r.some(c=>c.uri===fw?!0:(c.value>s&&(s=c.value),!1)))||(i=t.ext)===null||i===void 0||i.push({value:s+1,uri:fw})}function $W(t){var e;const n=[],r=[],i=lu((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return i.media.forEach(s=>{var a;s.type==="audio"&&(s.rtp.some(c=>c.codec==="opus"?(o=c.payload,!0):!1),!((a=s.rtcpFb)===null||a===void 0)&&a.some(c=>c.payload===o&&c.type==="nack")&&r.push(s.mid),s.fmtp.some(c=>c.payload===o?(c.config.includes("sprop-stereo=1")&&n.push(s.mid),!0):!1))}),{stereoMids:n,nackMids:r}}const h0="vp8",KW={audioBitrate:Yf.music.maxBitrate,audioPreset:Yf.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:CC.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:h0,backupCodec:!0},NP={autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0},_P={resolution:sd.h720.resolution},JW={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new VG,disconnectOnPageLeave:!0,expWebAudioMix:!1},wC={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var Xt;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(Xt||(Xt={}));class YW{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,r){var i;this.peerConnectionTimeout=wC.peerConnectionTimeout,this.log=Ve,this.updateState=()=>{var s;const a=this.state,c=this.requiredTransports.map(l=>l.getConnectionState());c.every(l=>l==="connected")?this.state=Xt.CONNECTED:c.some(l=>l==="failed")?this.state=Xt.FAILED:c.some(l=>l==="connecting")?this.state=Xt.CONNECTING:c.every(l=>l==="closed")?this.state=Xt.CLOSED:c.some(l=>l==="closed")?this.state=Xt.CLOSING:c.every(l=>l==="new")&&(this.state=Xt.NEW),a!==this.state&&(this.log.debug("pc state change: from ".concat(Xt[a]," to ").concat(Xt[this.state]),this.logContext),(s=this.onStateChange)===null||s===void 0||s.call(this,this.state,this.publisher.getConnectionState(),this.subscriber.getConnectionState()))},this.log=ts((i=r.loggerName)!==null&&i!==void 0?i:eo.PCManager),this.loggerOptions=r,this.isPublisherConnectionRequired=!n,this.isSubscriberConnectionRequired=n;const o={optional:[{googDscp:!0}]};this.publisher=new kw(e,o,r),this.subscriber=new kw(e,void 0,r),this.publisher.onConnectionStateChange=this.updateState,this.subscriber.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Tn.PUBLISHER)},this.subscriber.onIceCandidate=s=>{var a;(a=this.onIceCandidate)===null||a===void 0||a.call(this,s,Tn.SUBSCRIBER)},this.subscriber.onDataChannel=s=>{var a;(a=this.onDataChannel)===null||a===void 0||a.call(this,s)},this.subscriber.onTrack=s=>{var a;(a=this.onTrack)===null||a===void 0||a.call(this,s)},this.publisher.onOffer=s=>{var a;(a=this.onPublisherOffer)===null||a===void 0||a.call(this,s)},this.state=Xt.NEW,this.connectionLock=new yi}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}requireSubscriber(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isSubscriberConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e){return this.publisher.setRemoteDescription(e)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return F(this,void 0,void 0,function*(){if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const e=this.publisher;for(const n of e.getSenders())try{e.canRemoveTrack()&&e.removeTrack(n)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),this.subscriber.close()]),this.updateState()})}triggerIceRestart(){return F(this,void 0,void 0,function*(){this.subscriber.restartingIce=!0,this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return F(this,void 0,void 0,function*(){n===Tn.PUBLISHER?yield this.publisher.addIceCandidate(e):yield this.subscriber.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e){return F(this,void 0,void 0,function*(){return this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:this.subscriber.getSignallingState().toString()})),yield this.subscriber.setRemoteDescription(e),yield this.subscriber.createAndSetAnswer()})}updateConfiguration(e,n){this.publisher.setConfiguration(e),this.subscriber.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){var r;return F(this,void 0,void 0,function*(){const i=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((r=this.requiredTransports)===null||r===void 0?void 0:r.map(o=>this.ensureTransportConnected(o,e,n)))}finally{i()}})}negotiate(e){return F(this,void 0,void 0,function*(){return new Promise((n,r)=>F(this,void 0,void 0,function*(){const i=setTimeout(()=>{r("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(i),r("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(Gc.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Gc.NegotiationComplete,()=>{clearTimeout(i),n()})}),yield this.publisher.negotiate(s=>{clearTimeout(i),r(s)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===Tn.PUBLISHER?this.publisher.getConnectedAddress():e===Tn.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&e.push(this.subscriber),e}ensureTransportConnected(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return F(this,void 0,void 0,function*(){if(e.getConnectionState()!=="connected")return new Promise((o,s)=>F(this,void 0,void 0,function*(){const a=()=>{this.log.warn("abort transport connection",this.logContext),hn.clearTimeout(c),s(new ht("room connection has been cancelled",3))};n!=null&&n.signal.aborted&&a(),n==null||n.signal.addEventListener("abort",a);const c=hn.setTimeout(()=>{n==null||n.signal.removeEventListener("abort",a),s(new ht("could not establish pc connection"))},r);for(;this.state!==Xt.CONNECTED;)if(yield Xo(50),n!=null&&n.signal.aborted){s(new ht("room connection has been cancelled",3));return}hn.clearTimeout(c),n==null||n.signal.removeEventListener("abort",a),o()}))})}}const Tw="_lossy",xw="_reliable",QW=2*1e3,Pw="leave-reconnect";var Kr;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Kr||(Kr={}));class qW extends ao.EventEmitter{get isClosed(){return this._isClosed}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=wC.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.subscriberPrimary=!1,this.pcState=Kr.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Ve,this.handleDataChannel=r=>{let{channel:i}=r;return F(this,void 0,void 0,function*(){if(i){if(i.label===xw)this.reliableDCSub=i;else if(i.label===Tw)this.lossyDCSub=i;else return;this.log.debug("on data channel ".concat(i.id,", ").concat(i.label),this.logContext),i.onmessage=this.handleDataMessage}})},this.handleDataMessage=r=>F(this,void 0,void 0,function*(){var i,o;const s=yield this.dataProcessLock.lock();try{let a;if(r.data instanceof ArrayBuffer)a=r.data;else if(r.data instanceof Blob)a=yield r.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:r.data}));return}const c=Mi.fromBinary(new Uint8Array(a));((i=c.value)===null||i===void 0?void 0:i.case)==="speaker"?this.emit(ye.ActiveSpeakersUpdate,c.value.value.speakers):((o=c.value)===null||o===void 0?void 0:o.case)==="user"&&this.emit(ye.DataPacketReceived,c.value.value,c.kind)}finally{s()}}),this.handleDataError=r=>{const o=r.currentTarget.maxRetransmits===0?"lossy":"reliable";if(r instanceof ErrorEvent&&r.error){const{error:s}=r.error;this.log.error("DataChannel error on ".concat(o,": ").concat(r.message),Object.assign(Object.assign({},this.logContext),{error:s}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:r}))},this.handleBufferedAmountLow=r=>{const o=r.currentTarget.maxRetransmits===0?Ht.LOSSY:Ht.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(r,i)=>{if(this._isClosed)return;this.log.warn("".concat(r," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=c=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(c,"ms. giving up"),this.logContext),this.emit(ye.Disconnected),this.close()},s=Date.now()-this.reconnectStart;let a=this.getNextRetryDelay({elapsedMs:s,retryCount:this.reconnectAttempts});if(a===null){o(s);return}r===Pw&&(a=0),this.log.debug("reconnecting in ".concat(a,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=hn.setTimeout(()=>this.attemptReconnect(i),a)},this.waitForRestarted=()=>new Promise((r,i)=>{this.pcState===Kr.Connected&&r();const o=()=>{this.off(ye.Disconnected,s),r()},s=()=>{this.off(ye.Restarted,o),i()};this.once(ye.Restarted,o),this.once(ye.Disconnected,s)}),this.updateAndEmitDCBufferStatus=r=>{const i=this.isBufferStatusLow(r);typeof i<"u"&&i!==this.dcBufferStatus.get(r)&&(this.dcBufferStatus.set(r,i),this.emit(ye.DCBufferStatusChanged,i,r))},this.isBufferStatusLow=r=>{const i=this.dataChannelForKind(r);if(i)return i.bufferedAmount<=i.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===Nt.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(po.RR_SIGNAL_DISCONNECTED))},this.log=ts((n=e.loggerName)!==null&&n!==void 0?n:eo.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new SC(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.registerOnLineListener(),this.closingLock=new yi,this.dataProcessLock=new yi,this.dcBufferStatus=new Map([[Ht.LOSSY,!0],[Ht.RELIABLE,!0]]),this.client.onParticipantUpdate=r=>this.emit(ye.ParticipantUpdate,r),this.client.onConnectionQuality=r=>this.emit(ye.ConnectionQualityUpdate,r),this.client.onRoomUpdate=r=>this.emit(ye.RoomUpdate,r),this.client.onSubscriptionError=r=>this.emit(ye.SubscriptionError,r),this.client.onSubscriptionPermissionUpdate=r=>this.emit(ye.SubscriptionPermissionUpdate,r),this.client.onSpeakersChanged=r=>this.emit(ye.SpeakersChanged,r),this.client.onStreamStateUpdate=r=>this.emit(ye.StreamStateChanged,r)}get logContext(){var e,n,r,i,o,s;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomSid:(i=(r=this.latestJoinResponse)===null||r===void 0?void 0:r.room)===null||i===void 0?void 0:i.sid,identity:(s=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||s===void 0?void 0:s.identity}}join(e,n,r,i){return F(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=r,this.maxJoinAttempts=r.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,r,i);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),this.subscriberPrimary||this.negotiate(),this.clientConfiguration=o.clientConfiguration,o}catch(o){if(o instanceof ht&&o.reason===1&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,r,i);throw o}})}close(){return F(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.emit(ye.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){var e;return F(this,void 0,void 0,function*(){yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=r=>{r&&(r.close(),r.onbufferedamountlow=null,r.onclose=null,r.onclosing=null,r.onerror=null,r.onmessage=null,r.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0})}cleanupClient(){return F(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Ni("a track with the same ID has already been published");return new Promise((n,r)=>{const i=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],r(new ht("publication of local track timed out, no response from server"))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(i),n(o)},reject:()=>{clearTimeout(i),r(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){var e;return F(this,void 0,void 0,function*(){return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){var n;return F(this,void 0,void 0,function*(){if(this.pcManager&&this.pcManager.currentState!==Xt.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new YW(r,e.subscriberPrimary,this.loggerOptions),this.emit(ye.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(i,o)=>{this.client.sendIceCandidate(i,o)},this.pcManager.onPublisherOffer=i=>{this.client.sendOffer(i)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(i,o,s)=>F(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(i),this.logContext),i===Xt.CONNECTED){const a=this.pcState===Kr.New;this.pcState=Kr.Connected,a&&this.emit(ye.Connected,e)}else i===Xt.FAILED&&this.pcState===Kr.Connected&&(this.pcState=Kr.Disconnected,this.handleDisconnect("peerconnection failed",s==="failed"?po.RR_SUBSCRIBER_FAILED:po.RR_PUBLISHER_FAILED))}),this.pcManager.onTrack=i=>{this.emit(ye.MediaTrackAdded,i.track,i.streams[0],i.receiver)},this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=e=>F(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type})),yield this.pcManager.setPublisherAnswer(e))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.trace("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=e=>F(this,void 0,void 0,function*(){if(!this.pcManager)return;const n=yield this.pcManager.createSubscriberAnswerFromOffer(e);this.client.sendAnswer(n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:r}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],r(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(ye.LocalTrackUnpublished,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(ye.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(ye.SubscribedQualityUpdate,e)},this.client.onClose=()=>{this.handleDisconnect("signal",po.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{e!=null&&e.canReconnect?(this.fullReconnectOnNext=!0,this.handleDisconnect(Pw)):(this.emit(ye.Disconnected,e==null?void 0:e.reason),this.close()),this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e==null?void 0:e.reason}))}}makeRTCConfiguration(e){var n;const r=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),r.encodedInsertableStreams=!0),e.iceServers&&!r.iceServers){const i=[];e.iceServers.forEach(o=>{const s={urls:o.urls};o.username&&(s.username=o.username),o.credential&&(s.credential=o.credential),i.push(s)}),r.iceServers=i}return e.clientConfiguration&&e.clientConfiguration.forceRelay===bi.ENABLED&&(r.iceTransportPolicy="relay"),r.sdpSemantics="unified-plan",r.continualGatheringPolicy="gather_continually",r}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(Tw,{ordered:!0,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(xw,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}setPreferredCodec(e,n,r){if(!("getCapabilities"in RTCRtpReceiver))return;const i=RTCRtpReceiver.getCapabilities(n);if(!i)return;this.log.debug("get receiver capabilities",Object.assign(Object.assign({},this.logContext),{cap:i}));const o=[],s=[],a=[];i.codecs.forEach(c=>{const l=c.mimeType.toLowerCase();if(l==="audio/opus"){o.push(c);return}if(!(l==="video/".concat(r))){a.push(c);return}if(r==="h264"){c.sdpFmtpLine&&c.sdpFmtpLine.includes("profile-level-id=42e01f")?o.push(c):s.push(c);return}o.push(c)}),kW(e)&&e.setCodecPreferences(o.concat(s,a))}createSender(e,n,r){return F(this,void 0,void 0,function*(){if(pw())return yield this.createTransceiverRTCRtpSender(e,n,r);if(gw())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new zt("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,r,i){return F(this,void 0,void 0,function*(){if(pw())return this.createSimulcastTransceiverSender(e,n,r,i);if(gw())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new zt("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,r){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new zt("publisher is closed");const i=[];e.mediaStream&&i.push(e.mediaStream);const o={direction:"sendonly",streams:i};r&&(o.sendEncodings=r);const s=yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o);return e.kind===J.Kind.Video&&n.videoCodec&&(this.setPreferredCodec(s,e.kind,n.videoCodec),e.codec=n.videoCodec),s.sender})}createSimulcastTransceiverSender(e,n,r,i){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new zt("publisher is closed");const o={direction:"sendonly"};i&&(o.sendEncodings=i);const s=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(r.videoCodec)return this.setPreferredCodec(s,e.kind,r.videoCodec),e.setSimulcastTrackSender(r.videoCodec,s.sender),s.sender})}createRTCRtpSender(e){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new zt("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){var n,r,i;return F(this,void 0,void 0,function*(){if(!this._isClosed){if(this.attemptingReconnect){Ve.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===bi.DISABLED||((i=(r=this.pcManager)===null||r===void 0?void 0:r.currentState)!==null&&i!==void 0?i:Xt.NEW)===Xt.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let s=!0;o instanceof zt?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),s=!1):o instanceof lc||(this.fullReconnectOnNext=!0),s?this.handleDisconnect("reconnect",po.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(ye.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){var n,r,i;return F(this,void 0,void 0,function*(){try{if(!this.url||!this.token)throw new zt("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(ye.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new lc;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(s){throw s instanceof ht&&s.reason===0?new zt("could not reconnect, token might be expired"):new lc}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(ye.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==Nt.CONNECTED)throw new lc("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(ye.Restarted)}catch(o){const s=yield(r=this.regionUrlProvider)===null||r===void 0?void 0:r.getNextBestRegionUrl();if(s){yield this.restartConnection(s);return}else throw(i=this.regionUrlProvider)===null||i===void 0||i.resetAttempts(),o}})}resumeConnection(e){var n;return F(this,void 0,void 0,function*(){if(!this.url||!this.token)throw new zt("could not reconnect, url or token not saved");if(!this.pcManager)throw new zt("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(ye.Resuming);try{this.setupSignalClientCallbacks();const r=yield this.client.reconnect(this.url,this.token,this.participantSid,e);if(r){const i=this.makeRTCConfiguration(r);this.pcManager.updateConfiguration(i)}}catch(r){let i="";throw r instanceof Error&&(i=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof ht&&r.reason===0?new zt("could not reconnect, token might be expired"):r instanceof ht&&r.reason===4?r:new lc(i)}if(this.emit(ye.SignalResumed),this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==Nt.CONNECTED)throw new lc("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),this.emit(ye.Resumed)})}waitForPCInitialConnection(e,n){return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new zt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return F(this,void 0,void 0,function*(){this.pcState=Kr.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield Xo(QW),!this.pcManager)throw new zt("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Kr.Connected}catch(e){throw this.pcState=Kr.Disconnected,new ht("could not establish PC connection, ".concat(e.message))}})}sendDataPacket(e,n){return F(this,void 0,void 0,function*(){const r=e.toBinary();yield this.ensurePublisherConnected(n);const i=this.dataChannelForKind(n);i&&i.send(r),this.updateAndEmitDCBufferStatus(n)})}ensureDataTransportConnected(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;var r;return F(this,void 0,void 0,function*(){if(!this.pcManager)throw new zt("PC manager is closed");const i=n?this.pcManager.subscriber:this.pcManager.publisher,o=n?"Subscriber":"Publisher";if(!i)throw new ht("".concat(o," connection not set"));!n&&!this.pcManager.publisher.isICEConnected&&this.pcManager.publisher.getICEConnectionState()!=="checking"&&this.negotiate();const s=this.dataChannelForKind(e,n);if((s==null?void 0:s.readyState)==="open")return;const a=new Date().getTime()+this.peerConnectionTimeout;for(;new Date().getTime()<a;){if(i.isICEConnected&&((r=this.dataChannelForKind(e,n))===null||r===void 0?void 0:r.readyState)==="open")return;yield Xo(50)}throw new ht("could not establish ".concat(o," connection, state: ").concat(i.getICEConnectionState()))})}ensurePublisherConnected(e){return F(this,void 0,void 0,function*(){yield this.ensureDataTransportConnected(e,!1)})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==Xt.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return F(this,void 0,void 0,function*(){return new Promise((e,n)=>F(this,void 0,void 0,function*(){if(!this.pcManager){n(new a0("PC manager is closed"));return}this.pcManager.requirePublisher();const r=new AbortController,i=()=>{r.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(ye.Closing,i),this.pcManager.publisher.once(Gc.RTPVideoPayloadTypes,o=>{const s=new Map;o.forEach(a=>{const c=a.codec.toLowerCase();_W(c)&&s.set(a.payload,c)}),this.emit(ye.RTPVideoMapUpdate,s)});try{yield this.pcManager.negotiate(r),e()}catch(o){o instanceof a0&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",po.RR_UNKNOWN),n(o)}finally{this.off(ye.Closing,i)}}))})}dataChannelForKind(e,n){if(n){if(e===Ht.LOSSY)return this.lossyDCSub;if(e===Ht.RELIABLE)return this.reliableDCSub}else{if(e===Ht.LOSSY)return this.lossyDC;if(e===Ht.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var r,i;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const o=this.pcManager.subscriber.getLocalDescription(),s=this.pcManager.subscriber.getRemoteDescription(),a=(i=(r=this.signalOpts)===null||r===void 0?void 0:r.autoSubscribe)!==null&&i!==void 0?i:!0,c=new Array;e.forEach(l=>{l.isDesired!==a&&c.push(l.trackSid)}),this.client.sendSyncState(new $i({answer:o?qf({sdp:o.sdp,type:o.type}):void 0,offer:s?qf({sdp:s.sdp,type:s.type}):void 0,subscription:new Ur({trackSids:c,subscribe:!a,participantTracks:[]}),publishTracks:CW(n),dataChannels:this.dataChannelsInfo()}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(r,i)=>{(r==null?void 0:r.id)!==void 0&&r.id!==null&&e.push(new Ki({label:r.label,id:r.id,target:i}))};return n(this.dataChannelForKind(Ht.LOSSY),Tn.PUBLISHER),n(this.dataChannelForKind(Ht.RELIABLE),Tn.PUBLISHER),n(this.dataChannelForKind(Ht.LOSSY,!0),Tn.SUBSCRIBER),n(this.dataChannelForKind(Ht.RELIABLE,!0),Tn.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&hn.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){sr()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){sr()&&window.removeEventListener("online",this.handleBrowserOnLine)}}class lc extends Error{}class Rw{constructor(e,n){this.lastUpdateAt=0,this.settingsCacheTime=3e3,this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return d0(this.serverUrl)}getServerUrl(){return this.serverUrl}getNextBestRegionUrl(e){return F(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");(!this.regionSettings||Date.now()-this.lastUpdateAt>this.settingsCacheTime)&&(this.regionSettings=yield this.fetchRegionSettings(e));const n=this.regionSettings.regions.filter(r=>!this.attemptedRegions.find(i=>i.url===r.url));if(n.length>0){const r=n[0];return this.attemptedRegions.push(r),Ve.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}fetchRegionSettings(e){return F(this,void 0,void 0,function*(){const n=yield fetch("".concat(e9(this.serverUrl),"/regions"),{headers:{authorization:"Bearer ".concat(this.token)},signal:e});if(n.ok){const r=yield n.json();return this.lastUpdateAt=Date.now(),r}else throw new ht("Could not fetch region settings: ".concat(n.statusText),n.status===401?0:void 0,n.status)})}}function e9(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}const AC=2e3;function Up(t,e){if(!e)return 0;let n,r;return"bytesReceived"in t?(n=t.bytesReceived,r=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,r=e.bytesSent),n===void 0||r===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-r)*8*1e3/(t.timestamp-e.timestamp)}class Yn extends ll{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,J.Kind.Audio,n,r,o),this.stopOnMute=!1,this.monitorSender=()=>F(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let s;try{s=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}s&&this.prevStats&&(this._currentBitrate=Up(s,this.prevStats)),this.prevStats=s}),this.audioContext=i,this.checkForSilence()}setDeviceId(e){return F(this,void 0,void 0,function*(){return this._constraints.deviceId===e?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||Ra(e)===this.mediaStreamTrack.getSettings().deviceId)})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===J.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{const r=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Ra(this._constraints.deviceId);return this.source===J.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||r)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return F(this,void 0,void 0,function*(){let n;if(e){const r=Fp({audio:e});typeof r.audio!="boolean"&&(n=r.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return F(this,void 0,void 0,function*(){const r=yield n.restart.call(this,e);return this.checkForSilence(),r})}startMonitor(){sr()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},AC)))}setProcessor(e){var n;return F(this,void 0,void 0,function*(){const r=yield this.processorLock.lock();try{if(!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");if(this.processor&&(yield this.stopProcessor()),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");const i={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(i),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack))}finally{r()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){var e;return F(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let r;return n.forEach(i=>{i.type==="outbound-rtp"&&(r={type:"audio",streamId:i.id,packetsSent:i.packetsSent,packetsLost:i.packetsLost,bytesSent:i.bytesSent,timestamp:i.timestamp,roundTripTime:i.roundTripTime,jitter:i.jitter})}),r})}checkForSilence(){return F(this,void 0,void 0,function*(){const e=yield mW(this);return e&&(this.isMuted||this.log.warn("silence detected on local audio track",this.logContext),this.emit(he.AudioSilenceDetected)),e})}}function OP(t,e,n){switch(t.kind){case"audio":return new Yn(t,e,!1,void 0,n);case"video":return new Mr(t,e,!1,n);default:throw new Ni("unsupported track type: ".concat(t.kind))}}const t9=Object.values(sd),n9=Object.values(c0),r9=Object.values(CC),i9=[sd.h180,sd.h360],o9=[c0.h180,c0.h360],s9=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var r,i;return new tt(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((r=t.encoding.maxFramerate)!==null&&r!==void 0?r:30)/((i=n.fps)!==null&&i!==void 0?i:30))))),n.fps,t.encoding.priority)}),f0=["q","h","f"];function p0(t,e,n,r){var i,o;let s=r==null?void 0:r.videoEncoding;t&&(s=r==null?void 0:r.screenShareEncoding);const a=r==null?void 0:r.simulcast,c=r==null?void 0:r.scalabilityMode,l=r==null?void 0:r.videoCodec;if(!s&&!a&&!c||!e||!n)return[{}];s||(s=c9(t,e,n,l),Ve.debug("using video encoding",s));const u=new tt(e,n,s.maxBitrate,s.maxFramerate,s.priority);if(c&&Au(l)){Ve.debug("using svc with scalabilityMode ".concat(c));const f=new MP(c),p=[];if(f.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(c));for(let g=0;g<f.spatial;g+=1)p.push({rid:f0[2-g],maxBitrate:s.maxBitrate/Math.pow(3,g),maxFramerate:u.encoding.maxFramerate});return p[0].scalabilityMode=c,Ve.debug("encodings",p),p}if(!a)return[s];let d=[];t?d=(i=_w(r==null?void 0:r.screenShareSimulcastLayers))!==null&&i!==void 0?i:Nw(t,u):d=(o=_w(r==null?void 0:r.videoSimulcastLayers))!==null&&o!==void 0?o:Nw(t,u);let h;if(d.length>0){const f=d[0];d.length>1&&([,h]=d);const p=Math.max(e,n);if(p>=960&&h)return em(e,n,[f,h,u]);if(p>=480)return em(e,n,[f,u])}return em(e,n,[u])}function a9(t,e,n){var r,i,o,s;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Ve.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const a=t.mediaStreamTrack.getSettings(),c=(r=a.width)!==null&&r!==void 0?r:(i=t.dimensions)===null||i===void 0?void 0:i.width,l=(o=a.height)!==null&&o!==void 0?o:(s=t.dimensions)===null||s===void 0?void 0:s.height;return p0(t.source===J.Source.ScreenShare,c,l,n)}function c9(t,e,n,r){const i=l9(t,e,n);let{encoding:o}=i[0];const s=Math.max(e,n);for(let a=0;a<i.length;a+=1){const c=i[a];if(o=c.encoding,c.width>=s)break}if(r)switch(r){case"av1":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function l9(t,e,n){if(t)return r9;const r=e>n?e/n:n/e;return Math.abs(r-16/9)<Math.abs(r-4/3)?t9:n9}function Nw(t,e){if(t)return s9(e);const{width:n,height:r}=e,i=n>r?n/r:r/n;return Math.abs(i-16/9)<Math.abs(i-4/3)?i9:o9}function em(t,e,n){const r=[];if(n.forEach((i,o)=>{if(o>=f0.length)return;const s=Math.min(t,e),c={rid:f0[o],scaleResolutionDownBy:Math.max(1,s/Math.min(i.width,i.height)),maxBitrate:i.encoding.maxBitrate};i.encoding.maxFramerate&&(c.maxFramerate=i.encoding.maxFramerate);const l=cl()||o===0;i.encoding.priority&&l&&(c.priority=i.encoding.priority,c.networkPriority=i.encoding.priority),r.push(c)}),Za()&&EP()==="ios"){let i;r.forEach(s=>{i?s.maxFramerate&&s.maxFramerate>i&&(i=s.maxFramerate):i=s.maxFramerate});let o=!0;r.forEach(s=>{var a;s.maxFramerate!=i&&(o&&(o=!1,Ve.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Ve.info('Setting framerate of encoding "'.concat((a=s.rid)!==null&&a!==void 0?a:"",'" to ').concat(i)),s.maxFramerate=i)})}return r}function _w(t){if(t)return t.sort((e,n)=>{const{encoding:r}=e,{encoding:i}=n;return r.maxBitrate>i.maxBitrate?1:r.maxBitrate<i.maxBitrate?-1:r.maxBitrate===i.maxBitrate&&r.maxFramerate&&i.maxFramerate?r.maxFramerate>i.maxFramerate?1:-1:0})}class MP{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}const u9=5e3;class Mr extends ll{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,i=arguments.length>3?arguments[3]:void 0;super(e,J.Kind.Video,n,r,i),this.simulcastCodecs=new Map,this.monitorSender=()=>F(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(a){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:a}));return}const s=new Map(o.map(a=>[a.rid,a]));if(this.prevStats){let a=0;s.forEach((c,l)=>{var u;const d=(u=this.prevStats)===null||u===void 0?void 0:u.get(l);a+=Up(c,d)}),this._currentBitrate=a}this.prevStats=s}),this.senderLock=new yi}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!sr())return;const r=(n=this.sender)===null||n===void 0?void 0:n.getParameters();r&&(this.encodings=r.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},AC))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});var n,r,i,o,s;return F(this,void 0,void 0,function*(){yield e.pauseUpstream.call(this);try{for(var a=!0,c=dc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0)o=l.value,a=!1,yield(s=o.sender)===null||s===void 0?void 0:s.replaceTrack(null)}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});var n,r,i,o,s;return F(this,void 0,void 0,function*(){yield e.resumeUpstream.call(this);try{for(var a=!0,c=dc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;yield(s=u.sender)===null||s===void 0?void 0:s.replaceTrack(u.mediaStreamTrack)}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===J.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return F(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.source===J.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){var e;return F(this,void 0,void 0,function*(){if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],r=yield this.sender.getStats();return r.forEach(i=>{var o;if(i.type==="outbound-rtp"){const s={type:"video",streamId:i.id,frameHeight:i.frameHeight,frameWidth:i.frameWidth,firCount:i.firCount,pliCount:i.pliCount,nackCount:i.nackCount,packetsSent:i.packetsSent,bytesSent:i.bytesSent,framesSent:i.framesSent,timestamp:i.timestamp,rid:(o=i.rid)!==null&&o!==void 0?o:i.id,retransmittedPacketsSent:i.retransmittedPacketsSent,qualityLimitationReason:i.qualityLimitationReason,qualityLimitationResolutionChanges:i.qualityLimitationResolutionChanges},a=r.get(i.remoteId);a&&(s.jitter=a.jitter,s.packetsLost=a.packetsLost,s.roundTripTime=a.roundTripTime),n.push(s)}}),n})}setPublishingQuality(e){const n=[];for(let r=Jt.LOW;r<=Jt.HIGH;r+=1)n.push(new gi({quality:r,enabled:r<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(n)}setDeviceId(e){return F(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Ra(e)?!0:(this._constraints.deviceId=e,this.isMuted||(yield this.restartTrack()),this.isMuted||Ra(e)===this._mediaStreamTrack.getSettings().deviceId)})}restartTrack(e){var n,r,i,o;return F(this,void 0,void 0,function*(){let s;if(e){const u=Fp({video:e});typeof u.video!="boolean"&&(s=u.video)}yield this.restart(s);try{for(var a=!0,c=dc(this.simulcastCodecs.values()),l;l=yield c.next(),n=l.done,!n;a=!0){o=l.value,a=!1;const u=o;u.sender&&(u.mediaStreamTrack=this.mediaStreamTrack.clone(),yield u.sender.replaceTrack(u.mediaStreamTrack))}}catch(u){r={error:u}}finally{try{!a&&!n&&(i=c.return)&&(yield i.call(c))}finally{if(r)throw r.error}}})}setProcessor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const r=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});var i,o,s,a,c,l;return F(this,void 0,void 0,function*(){if(yield r.setProcessor.call(this,e,n),!((c=this.processor)===null||c===void 0)&&c.processedTrack)try{for(var u=!0,d=dc(this.simulcastCodecs.values()),h;h=yield d.next(),i=h.done,!i;u=!0)a=h.value,u=!1,yield(l=a.sender)===null||l===void 0?void 0:l.replaceTrack(this.processor.processedTrack)}catch(f){o={error:f}}finally{try{!u&&!i&&(s=d.return)&&(yield s.call(d))}finally{if(o)throw o.error}}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e))throw new Error("".concat(e," already added"));const r={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,r),r}setSimulcastTrackSender(e,n){const r=this.simulcastCodecs.get(e);r&&(r.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},u9))}setPublishingCodecs(e){var n,r,i,o,s,a,c;return F(this,void 0,void 0,function*(){if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(e[0].qualities),[];this.subscribedCodecs=e;const l=[];try{for(n=!0,r=dc(e);i=yield r.next(),o=i.done,!o;n=!0){c=i.value,n=!1;const u=c;if(!this.codec||this.codec===u.codec)yield this.setPublishingLayers(u.qualities);else{const d=this.simulcastCodecs.get(u.codec);if(this.log.debug("try setPublishingCodec for ".concat(u.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:d})),!d||!d.sender){for(const h of u.qualities)if(h.enabled){l.push(u.codec);break}}else d.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(u.codec),this.logContext),yield Ow(d.sender,d.encodings,u.qualities,this.senderLock,this.log,this.logContext))}}}catch(u){s={error:u}}finally{try{!n&&!o&&(a=r.return)&&(yield a.call(r))}finally{if(s)throw s.error}}return l})}setPublishingLayers(e){return F(this,void 0,void 0,function*(){this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:e})),!(!this.sender||!this.encodings)&&(yield Ow(this.sender,this.encodings,e,this.senderLock,this.log,this.logContext))})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return F(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),AP()&&this.isInBackground&&this.source===J.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function Ow(t,e,n,r,i,o){return F(this,void 0,void 0,function*(){const s=yield r.lock();i.debug("setPublishingLayersForSender",Object.assign(Object.assign({},o),{sender:t,qualities:n,senderEncodings:e}));try{const a=t.getParameters(),{encodings:c}=a;if(!c)return;if(c.length!==e.length){i.warn("cannot set publishing layers, encodings mismatch");return}let l=!1;!1&&c[0].scalabilityMode||c.forEach((d,h)=>{var f;let p=(f=d.rid)!==null&&f!==void 0?f:"";p===""&&(p="q");const g=DP(p),C=n.find(m=>m.quality===g);C&&d.active!==C.enabled&&(l=!0,d.active=C.enabled,i.debug("setting layer ".concat(C.quality," to ").concat(d.active?"enabled":"disabled"),o),cl()&&(C.enabled?(d.scaleResolutionDownBy=e[h].scaleResolutionDownBy,d.maxBitrate=e[h].maxBitrate,d.maxFrameRate=e[h].maxFrameRate):(d.scaleResolutionDownBy=4,d.maxBitrate=10,d.maxFrameRate=2)))}),l&&(a.encodings=c,i.debug("setting encodings",Object.assign(Object.assign({},o),{encodings:a.encodings})),yield t.setParameters(a))}finally{s()}})}function DP(t){switch(t){case"f":return Jt.HIGH;case"h":return Jt.MEDIUM;case"q":return Jt.LOW;default:return Jt.HIGH}}function Mw(t,e,n,r){if(!n)return[new Vn({quality:Jt.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(r){const i=n[0].scalabilityMode,o=new MP(i),s=[];for(let a=0;a<o.spatial;a+=1)s.push(new Vn({quality:Jt.HIGH-a,width:Math.ceil(t/Math.pow(2,a)),height:Math.ceil(e/Math.pow(2,a)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(3,a)):0,ssrc:0}));return s}return n.map(i=>{var o,s,a;const c=(o=i.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let l=DP((s=i.rid)!==null&&s!==void 0?s:"");return new Vn({quality:l,width:Math.ceil(t/c),height:Math.ceil(e/c),bitrate:(a=i.maxBitrate)!==null&&a!==void 0?a:0,ssrc:0})})}class LP extends J{constructor(e,n,r,i,o){super(e,r,o),this.sid=n,this.receiver=i}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?he.Muted:he.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=r=>{r.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver=void 0,this._currentBitrate=0,this.emit(he.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){var e;return F(this,void 0,void 0,function*(){return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),AC))}}class Na extends LP{constructor(e,n,r,i,o,s){super(e,n,J.Kind.Audio,r,s),this.monitorReceiver=()=>F(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const a=yield this.getReceiverStats();a&&this.prevStats&&this.receiver&&(this._currentBitrate=Up(a,this.prevStats)),this.prevStats=a}),this.audioContext=i,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const r of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):r.volume=e;Za()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Za())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return F(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(u0(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&u0(e)&&e.setSinkId(this.sinkId),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let r=this.sourceNode;this.webAudioPluginNodes.forEach(i=>{r.connect(i),r=i}),this.gainNode=e.createGain(),r.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(he.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(i=>{this.emit(he.AudioPlaybackFailed,i)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return F(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(r=>{r.type==="inbound-rtp"&&(n={type:"audio",timestamp:r.timestamp,jitter:r.jitter,bytesReceived:r.bytesReceived,concealedSamples:r.concealedSamples,concealmentEvents:r.concealmentEvents,silentConcealedSamples:r.silentConcealedSamples,silentConcealmentEvents:r.silentConcealmentEvents,totalAudioEnergy:r.totalAudioEnergy,totalSamplesDuration:r.totalSamplesDuration})}),n})}}const tm=100;class Eu extends LP{constructor(e,n,r,i,o){super(e,n,J.Kind.Video,r,o),this.elementInfos=[],this.monitorReceiver=()=>F(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const s=yield this.getReceiverStats();s&&this.prevStats&&this.receiver&&(this._currentBitrate=Up(s,this.prevStats)),this.prevStats=s}),this.debouncedHandleResize=yC(()=>{this.updateDimensions()},tm),this.adaptiveStreamSettings=i}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?Vc(this._mediaStreamTrack,n):Ec(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new d9(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(r=>r===e);for(const r of n)r.stopObserving();this.elementInfos=this.elementInfos.filter(r=>r!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const r of n)this.stopObservingElement(r);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return F(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,r="",i=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(r=o.codecId,n={type:"video",framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&i.set(o.id,o)}),n&&r!==""&&i.get(r)&&(n.mimeType=i.get(r).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(r=>r.element===e);for(const r of n)this.stopObservingElementInfo(r)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return F(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(){var e,n;const r=this.elementInfos.reduce((a,c)=>Math.max(a,c.visibilityChangedAt||0),0),i=!((n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pauseVideoInBackground)!==null&&n!==void 0)||n?this.isInBackground:!1,o=this.elementInfos.some(a=>a.pictureInPicture),s=this.elementInfos.some(a=>a.visible)&&!i||o;if(this.lastVisible!==s){if(!s&&Date.now()-r<tm){hn.setTimeout(()=>{this.updateVisibility()},tm);return}this.lastVisible=s,this.emit(he.VisibilityChanged,s,this)}}updateDimensions(){var e,n;let r=0,i=0;const o=this.getPixelDensity();for(const s of this.elementInfos){const a=s.width()*o,c=s.height()*o;a+c>r+i&&(r=a,i=c)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===r&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===i||(this.lastDimensions={width:r,height:i},this.emit(he.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?mw():n||(mw()>2?2:1)}}class d9{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=r=>{var i;const{target:o,isIntersecting:s}=r;o===this.element&&(this.isIntersecting=s,this.visibilityChangedAt=Date.now(),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this))},this.onEnterPiP=()=>{var r;this.isPiP=!0,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.onLeavePiP=()=>{var r;this.isPiP=!1,(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this)},this.element=e,this.isIntersecting=n??Dw(e),this.isPiP=sr()&&document.pictureInPictureElement===e,this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){this.isIntersecting=Dw(this.element),this.isPiP=document.pictureInPictureElement===this.element,this.element.handleResize=()=>{var e;(e=this.handleResize)===null||e===void 0||e.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,yw().observe(this.element),vw().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP)}stopObserving(){var e,n;(e=yw())===null||e===void 0||e.unobserve(this.element),(n=vw())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP)}}function Dw(t){let e=t.offsetTop,n=t.offsetLeft;const r=t.offsetWidth,i=t.offsetHeight,{hidden:o}=t,{opacity:s,display:a}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,e+=t.offsetTop,n+=t.offsetLeft;return e<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&e+i>window.pageYOffset&&n+r>window.pageXOffset&&!o&&(s!==""?parseFloat(s)>0:!0)&&a!=="none"}class go extends ao.EventEmitter{constructor(e,n,r,i){var o;super(),this.metadataMuted=!1,this.encryption=un.NONE,this.log=Ve,this.handleMuted=()=>{this.emit(he.Muted)},this.handleUnmuted=()=>{this.emit(he.Unmuted)},this.log=ts((o=i==null?void 0:i.loggerName)!==null&&o!==void 0?o:eo.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=r,this.source=J.Source.Unknown}setTrack(e){this.track&&(this.track.off(he.Muted,this.handleMuted),this.track.off(he.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(he.Muted,this.handleMuted),e.on(he.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),Ct(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==un.NONE}get audioTrack(){if(this.track instanceof Yn||this.track instanceof Na)return this.track}get videoTrack(){if(this.track instanceof Mr||this.track instanceof Eu)return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=J.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===J.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"}(t.PermissionStatus||(t.PermissionStatus={}))})(go||(go={}));class ad extends go{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.handleTrackEnded=()=>{this.emit(he.Ended)},this.updateInfo(n),this.setTrack(r)}setTrack(e){this.track&&this.track.off(he.Ended,this.handleTrackEnded),super.setTrack(e),e&&e.on(he.Ended,this.handleTrackEnded)}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}mute(){var e;return F(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){var e;return F(this,void 0,void 0,function*(){return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){var e;return F(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){var e;return F(this,void 0,void 0,function*(){yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}}var Br;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Br||(Br={}));function h9(t){switch(t){case Io.EXCELLENT:return Br.Excellent;case Io.GOOD:return Br.Good;case Io.POOR:return Br.Poor;case Io.LOST:return Br.Lost;default:return Br.Unknown}}class BP extends ao.EventEmitter{get logContext(){var e,n;return Object.assign(Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e)),{participantSid:this.sid,participantId:this.identity})}get isEncrypted(){return this.tracks.size>0&&Array.from(this.tracks.values()).every(e=>e.isEncrypted)}get isAgent(){var e,n;return(n=(e=this.permissions)===null||e===void 0?void 0:e.agent)!==null&&n!==void 0?n:!1}constructor(e,n,r,i,o){var s;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Br.Unknown,this.log=Ve,this.log=ts((s=o==null?void 0:o.loggerName)!==null&&s!==void 0?s:eo.Participant),this.loggerOptions=o,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=r,this.metadata=i,this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map}getTracks(){return Array.from(this.tracks.values())}getTrack(e){for(const[,n]of this.tracks)if(n.source===e)return n}getTrackByName(e){for(const[,n]of this.tracks)if(n.trackName===e)return n}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrack(J.Source.Camera);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrack(J.Source.Microphone);return!(!((e=n==null?void 0:n.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrack(J.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,this.log.trace("update participant info",Object.assign(Object.assign({},this.logContext),{info:e})),!0)}_setMetadata(e){const n=this.metadata!==e,r=this.metadata;this.metadata=e,n&&this.emit(oe.ParticipantMetadataChanged,r)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(oe.ParticipantNameChanged,e)}setPermissions(e){var n,r,i,o,s;const a=this.permissions,c=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((r=this.permissions)===null||r===void 0?void 0:r.canSubscribe)||e.canPublishData!==((i=this.permissions)===null||i===void 0?void 0:i.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((s=this.permissions)===null||s===void 0?void 0:s.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((l,u)=>{var d;return l!==((d=this.permissions)===null||d===void 0?void 0:d.canPublishSources[u])});return this.permissions=e,c&&this.emit(oe.ParticipantPermissionsChanged,a),c}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(oe.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=h9(e),n!==this._connectionQuality&&this.emit(oe.ConnectionQualityChanged,this._connectionQuality)}setAudioContext(e){this.audioContext=e,this.audioTracks.forEach(n=>(n.track instanceof Na||n.track instanceof Yn)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(he.Muted,()=>{this.emit(oe.TrackMuted,e)}),e.on(he.Unmuted,()=>{this.emit(oe.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.tracks.set(e.trackSid,e),e.kind){case J.Kind.Audio:this.audioTracks.set(e.trackSid,e);break;case J.Kind.Video:this.videoTracks.set(e.trackSid,e);break}}}function f9(t){var e,n,r;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new Hi({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(r=t.allowAll)!==null&&r!==void 0?r:!1,trackSids:t.allowedTrackSids||[]})}class kC extends go{constructor(e,n,r,i){super(e,n.sid,n.name,i),this.track=void 0,this.allowed=!0,this.disabled=!1,this.currentVideoQuality=Jt.HIGH,this.handleEnded=o=>{this.setTrack(void 0),this.emit(he.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.disabled=!o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensions=o,this.emitTrackUpdate()},this.subscribed=r,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const i=new Ur({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Bi({participantSid:"",trackSids:[this.trackSid]})]});this.emit(he.UpdateSubscription,i),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(r)}get subscriptionStatus(){return this.subscribed===!1?go.SubscriptionStatus.Unsubscribed:super.isSubscribed?go.SubscriptionStatus.Subscribed:go.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?go.PermissionStatus.Allowed:go.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return!this.disabled}setEnabled(e){!this.isManualOperationAllowed()||this.disabled===!e||(this.disabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.currentVideoQuality===e||(this.currentVideoQuality=e,this.videoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,r;this.isManualOperationAllowed()&&(((n=this.videoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((r=this.videoDimensions)===null||r===void 0?void 0:r.height)===e.height||(this.track instanceof Eu&&(this.videoDimensions=e),this.currentVideoQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&this.track instanceof Eu&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){return this.currentVideoQuality}setTrack(e){const n=this.subscriptionStatus,r=this.permissionStatus,i=this.track;i!==e&&(i&&(i.off(he.VideoDimensionsChanged,this.handleVideoDimensionsChange),i.off(he.VisibilityChanged,this.handleVisibilityChange),i.off(he.Ended,this.handleEnded),i.detach(),i.stopMonitor(),this.emit(he.Unsubscribed,i)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(he.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(he.VisibilityChanged,this.handleVisibilityChange),e.on(he.Ended,this.handleEnded),this.emit(he.Subscribed,e)),this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,r=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(r),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(he.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?he.Muted:he.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(he.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(he.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.kind===J.Kind.Video&&this.isAdaptiveStream?(this.log.warn("adaptive stream is enabled, cannot change video track settings",this.logContext),!1):this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return this.track instanceof Eu&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Wi({trackSids:[this.trackSid],disabled:this.disabled,fps:this.fps});this.videoDimensions?(e.width=Math.ceil(this.videoDimensions.width),e.height=Math.ceil(this.videoDimensions.height)):this.currentVideoQuality!==void 0?e.quality=this.currentVideoQuality:e.quality=Jt.HIGH,this.emit(he.UpdateSettings,e)}}class cd extends BP{static fromParticipantInfo(e,n){return new cd(e,n.sid,n.identity,n.name,n.metadata)}constructor(e,n,r,i,o,s){super(n,r||"",i,o,s),this.signalClient=e,this.tracks=new Map,this.audioTracks=new Map,this.videoTracks=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(he.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign({},this.logContext),Ct(e))),this.signalClient.sendUpdateTrackSettings(n)}),e.on(he.UpdateSubscription,n=>{n.participantTracks.forEach(r=>{r.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(he.SubscriptionPermissionChanged,n=>{this.emit(oe.TrackSubscriptionPermissionChanged,e,n)}),e.on(he.SubscriptionStatusChanged,n=>{this.emit(oe.TrackSubscriptionStatusChanged,e,n)}),e.on(he.Subscribed,n=>{this.emit(oe.TrackSubscribed,n,e)}),e.on(he.Unsubscribed,n=>{this.emit(oe.TrackUnsubscribed,n,e)}),e.on(he.SubscriptionFailed,n=>{this.emit(oe.TrackSubscriptionFailed,e.trackSid,n)})}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J.Source.Microphone;this.volumeMap.set(n,e);const r=this.getTrack(n);r&&r.track&&r.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:J.Source.Microphone;const n=this.getTrack(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,r,i,o,s){let a=this.getTrackPublication(n);if(a||n.startsWith("TR")||this.tracks.forEach(u=>{!a&&e.kind===u.kind.toString()&&(a=u)}),!a){if(s===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(oe.TrackSubscriptionFailed,n);return}s===void 0&&(s=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,r,i,o,s-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),Ct(a))),this.emit(oe.TrackSubscriptionFailed,n);return}const c=e.kind==="video";let l;return c?l=new Eu(e,n,i,o):l=new Na(e,n,i,this.audioContext,this.audioOutput),l.source=a.source,l.isMuted=a.isMuted,l.setMediaStream(r),l.start(),a.setTrack(l),this.volumeMap.has(a.source)&&l instanceof Na&&l.setVolume(this.volumeMap.get(a.source)),a}get hasMetadata(){return!!this.participantInfo}getTrackPublication(e){return this.tracks.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,r=new Map;return e.tracks.forEach(i=>{var o,s;let a=this.getTrackPublication(i.sid);if(a)a.updateInfo(i);else{const c=J.kindFromProto(i.type);if(!c)return;a=new kC(c,i,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(s=this.loggerOptions)===null||s===void 0?void 0:s.loggerName}),a.updateInfo(i),r.set(i.sid,a);const l=Array.from(this.tracks.values()).find(u=>u.source===(a==null?void 0:a.source));l&&a.source!==J.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(a.source),Object.assign(Object.assign({},this.logContext),{oldTrack:Ct(l),newTrack:Ct(a)})),this.addTrackPublication(a)}n.set(i.sid,a)}),this.tracks.forEach(i=>{n.has(i.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),Ct(i))),this.unpublishTrack(i.trackSid,!0))}),r.forEach(i=>{this.emit(oe.TrackPublished,i)}),!0}unpublishTrack(e,n){const r=this.tracks.get(e);if(!r)return;const{track:i}=r;switch(i&&(i.stop(),r.setTrack(void 0)),this.tracks.delete(e),r.kind){case J.Kind.Audio:this.audioTracks.delete(e);break;case J.Kind.Video:this.videoTracks.delete(e);break}n&&this.emit(oe.TrackUnpublished,r)}setAudioOutput(e){return F(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTracks.forEach(r=>{var i;r.track instanceof Na&&n.push(r.track.setSinkId((i=e.deviceId)!==null&&i!==void 0?i:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:r})),super.emit(e,...r)}}class g0 extends BP{constructor(e,n,r,i){super(e,n,void 0,void 0,{loggerName:i.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=un.NONE,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new TP)},this.handleReconnected=()=>{var o,s;(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.resolve)===null||s===void 0||s.call(o),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleDisconnected=()=>{var o,s;this.reconnectFuture&&(this.reconnectFuture.promise.catch(a=>this.log.warn(a.message,this.logContext)),(s=(o=this.reconnectFuture)===null||o===void 0?void 0:o.reject)===null||s===void 0||s.call(o,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0)},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(o=>f9(o)))},this.onTrackUnmuted=o=>{this.onTrackMuted(o,o.isUpstreamPaused)},this.onTrackMuted=(o,s)=>{if(s===void 0&&(s=!0),!o.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),Ct(o)));return}this.engine.updateMuteStatus(o.sid,s)},this.onTrackUpstreamPaused=o=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),Ct(o))),this.onTrackMuted(o,!0)},this.onTrackUpstreamResumed=o=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),Ct(o))),this.onTrackMuted(o,o.isMuted)},this.handleSubscribedQualityUpdate=o=>F(this,void 0,void 0,function*(){var s,a,c,l,u,d;if(!(!((u=this.roomOptions)===null||u===void 0)&&u.dynacast))return;const h=this.videoTracks.get(o.trackSid);if(!h){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}if(o.subscribedCodecs.length>0){if(!h.videoTrack)return;const C=yield h.videoTrack.setPublishingCodecs(o.subscribedCodecs);try{for(var f=!0,p=dc(C),g;g=yield p.next(),s=g.done,!s;f=!0){l=g.value,f=!1;const m=l;fW(m)&&(this.log.debug("publish ".concat(m," for ").concat(h.videoTrack.sid),Object.assign(Object.assign({},this.logContext),Ct(h))),yield this.publishAdditionalCodecForTrack(h.videoTrack,m,h.options))}}catch(m){a={error:m}}finally{try{!f&&!s&&(c=p.return)&&(yield c.call(p))}finally{if(a)throw a.error}}}else o.subscribedQualities.length>0&&(yield(d=h.videoTrack)===null||d===void 0?void 0:d.setPublishingLayers(o.subscribedQualities))}),this.handleLocalTrackUnpublished=o=>{const s=this.tracks.get(o.trackSid);if(!s){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:o.trackSid}));return}this.unpublishTrack(s.track)},this.handleTrackEnded=o=>F(this,void 0,void 0,function*(){if(o.source===J.Source.ScreenShare||o.source===J.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),Ct(o))),this.unpublishTrack(o);else if(o.isUserProvided)yield o.mute();else if(o instanceof Yn||o instanceof Mr)try{if(sr())try{const s=yield navigator==null?void 0:navigator.permissions.query({name:o.source===J.Source.Camera?"camera":"microphone"});if(s&&s.state==="denied")throw this.log.warn("user has revoked access to ".concat(o.source),Object.assign(Object.assign({},this.logContext),Ct(o))),s.onchange=()=>{s.state!=="denied"&&(o.isMuted||o.restartTrack(),s.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}o.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),Ct(o))),yield o.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),Ct(o))),yield o.mute()}}),this.audioTracks=new Map,this.videoTracks=new Map,this.tracks=new Map,this.engine=r,this.roomOptions=i,this.setupEngine(r),this.activeDeviceMap=new Map}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==un.NONE}getTrack(e){const n=super.getTrack(e);if(n)return n}getTrackByName(e){const n=super.getTrackByName(e);if(n)return n}setupEngine(e){this.engine=e,this.engine.on(ye.RemoteMute,(n,r)=>{const i=this.tracks.get(n);!i||!i.track||(r?i.mute():i.unmute())}),this.engine.on(ye.Connected,this.handleReconnected).on(ye.SignalRestarted,this.handleReconnected).on(ye.SignalResumed,this.handleReconnected).on(ye.Restarting,this.handleReconnecting).on(ye.Resuming,this.handleReconnecting).on(ye.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(ye.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(ye.Disconnected,this.handleDisconnected)}setMetadata(e){var n;this.engine.client.sendUpdateLocalMetadata(e,(n=this.name)!==null&&n!==void 0?n:"")}setName(e){var n;this.engine.client.sendUpdateLocalMetadata((n=this.metadata)!==null&&n!==void 0?n:"",e)}setCameraEnabled(e,n,r){return this.setTrackEnabled(J.Source.Camera,e,n,r)}setMicrophoneEnabled(e,n,r){return this.setTrackEnabled(J.Source.Microphone,e,n,r)}setScreenShareEnabled(e,n,r){return this.setTrackEnabled(J.Source.ScreenShare,e,n,r)}setPermissions(e){const n=this.permissions,r=super.setPermissions(e);return r&&n&&this.emit(oe.ParticipantPermissionsChanged,n),r}setE2EEEnabled(e){return F(this,void 0,void 0,function*(){this.encryptionType=e?un.GCM:un.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,r,i){var o,s;return F(this,void 0,void 0,function*(){this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n}));let a=this.getTrack(e);if(n)if(a)yield a.unmute();else{let c;if(this.pendingPublishing.has(e)){this.log.info("skipping duplicate published source",Object.assign(Object.assign({},this.logContext),{source:e}));return}this.pendingPublishing.add(e);try{switch(e){case J.Source.Camera:c=yield this.createTracks({video:(o=r)!==null&&o!==void 0?o:!0});break;case J.Source.Microphone:c=yield this.createTracks({audio:(s=r)!==null&&s!==void 0?s:!0});break;case J.Source.ScreenShare:c=yield this.createScreenTracks(Object.assign({},r));break;default:throw new Ni(e)}const l=[];for(const d of c)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),Ct(d))),l.push(this.publishTrack(d,i));[a]=yield Promise.all(l)}catch(l){throw c==null||c.forEach(u=>{u.stop()}),l instanceof Error&&!(l instanceof Ni)&&this.emit(oe.MediaDevicesError,l),l}finally{this.pendingPublishing.delete(e)}}else if(a&&a.track)if(e===J.Source.ScreenShare){a=yield this.unpublishTrack(a.track);const c=this.getTrack(J.Source.ScreenShareAudio);c&&c.track&&this.unpublishTrack(c.track)}else yield a.mute();return a})}enableCameraAndMicrophone(){return F(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(J.Source.Camera)||this.pendingPublishing.has(J.Source.Microphone))){this.pendingPublishing.add(J.Source.Camera),this.pendingPublishing.add(J.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(J.Source.Camera),this.pendingPublishing.delete(J.Source.Microphone)}}})}createTracks(e){var n,r;return F(this,void 0,void 0,function*(){const i=SP(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(r=this.roomOptions)===null||r===void 0?void 0:r.videoCaptureDefaults),o=Fp(i);let s;try{s=yield navigator.mediaDevices.getUserMedia(o)}catch(a){throw a instanceof Error&&(o.audio&&(this.microphoneError=a),o.video&&(this.cameraError=a)),a}return o.audio&&(this.microphoneError=void 0,this.emit(oe.AudioStreamAcquired)),o.video&&(this.cameraError=void 0),s.getTracks().map(a=>{const c=a.kind==="audio";c?e.audio:e.video;let l;const u=c?o.audio:o.video;typeof u!="boolean"&&(l=u);const d=OP(a,l,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});return d.kind===J.Kind.Video?d.source=J.Source.Camera:d.kind===J.Kind.Audio&&(d.source=J.Source.Microphone),d.mediaStream=s,d})})}createScreenTracks(e){return F(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new vC("getDisplayMedia not supported");e.resolution===void 0&&!TW()&&(e.resolution=CC.h1080fps30.resolution);const n=yW(e),r=yield navigator.mediaDevices.getDisplayMedia(n),i=r.getVideoTracks();if(i.length===0)throw new Ni("no video track found");const o=new Mr(i[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=J.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const s=[o];if(r.getAudioTracks().length>0){this.emit(oe.AudioStreamAcquired);const a=new Yn(r.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});a.source=J.Source.ScreenShareAudio,s.push(a)}return s})}publishTrack(e,n){var r,i,o,s;return F(this,void 0,void 0,function*(){yield(r=this.reconnectFuture)===null||r===void 0?void 0:r.promise,e instanceof ll&&this.pendingPublishPromises.has(e)&&(yield this.pendingPublishPromises.get(e));let a;if(e instanceof MediaStreamTrack)a=e.getConstraints();else{a=e.constraints;let f;switch(e.source){case J.Source.Microphone:f="audioinput";break;case J.Source.Camera:f="videoinput"}f&&this.activeDeviceMap.has(f)&&(a=Object.assign(Object.assign({},a),{deviceId:this.activeDeviceMap.get(f)}))}if(e instanceof MediaStreamTrack)switch(e.kind){case"audio":e=new Yn(e,a,!0,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;case"video":e=new Mr(e,a,!0,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});break;default:throw new Ni("unsupported MediaStreamTrack kind ".concat(e.kind))}else e.updateLoggerOptions({loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});e instanceof Yn&&e.setAudioContext(this.audioContext);let c;if(this.tracks.forEach(f=>{f.track&&f.track===e&&(c=f)}),c)return this.log.warn("track has already been published, skipping",Object.assign(Object.assign({},this.logContext),Ct(c))),c;const l="channelCount"in e.mediaStreamTrack.getSettings()&&e.mediaStreamTrack.getSettings().channelCount===2||e.mediaStreamTrack.getConstraints().channelCount===2,u=(i=n==null?void 0:n.forceStereo)!==null&&i!==void 0?i:l;u&&(n||(n={}),n.dtx===void 0&&this.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},this.logContext),Ct(e))),n.red===void 0&&this.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(o=n.dtx)!==null&&o!==void 0||(n.dtx=!1),(s=n.red)!==null&&s!==void 0||(n.red=!1));const d=Object.assign(Object.assign({},this.roomOptions.publishDefaults),n);ja()&&this.roomOptions.e2ee&&(this.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari",Object.assign({},this.logContext)),d.simulcast=!1),d.source&&(e.source=d.source);const h=this.publish(e,d,u);this.pendingPublishPromises.set(e,h);try{return yield h}catch(f){throw f}finally{this.pendingPublishPromises.delete(e)}})}publish(e,n,r){var i,o,s,a,c,l,u,d,h,f,p,g,C;return F(this,void 0,void 0,function*(){Array.from(this.tracks.values()).find(T=>e instanceof ll&&T.source===e.source)&&e.source!==J.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),Ct(e))),n.stopMicTrackOnMute&&e instanceof Yn&&(e.stopOnMute=!0),e.source===J.Source.ScreenShare&&cl()&&(n.simulcast=!1),n.videoCodec==="av1"&&!SW()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!wW()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=h0);const v=n.videoCodec;e.on(he.Muted,this.onTrackMuted),e.on(he.Unmuted,this.onTrackUnmuted),e.on(he.Ended,this.handleTrackEnded),e.on(he.UpstreamPaused,this.onTrackUpstreamPaused),e.on(he.UpstreamResumed,this.onTrackUpstreamResumed);const b=new di({cid:e.mediaStreamTrack.id,name:n.name,type:J.kindToProto(e.kind),muted:e.isMuted,source:J.sourceToProto(e.source),disableDtx:!(!((i=n.dtx)!==null&&i!==void 0)||i),encryption:this.encryptionType,stereo:r,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n==null?void 0:n.stream});let E;if(e.kind===J.Kind.Video){let T={width:0,height:0};try{T=yield e.waitForDimensions()}catch{const O=(a=(s=this.roomOptions.videoCaptureDefaults)===null||s===void 0?void 0:s.resolution)!==null&&a!==void 0?a:sd.h720.resolution;T={width:O.width,height:O.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(e)),{dims:T}))}b.width=T.width,b.height=T.height,e instanceof Mr&&(Au(v)&&(e.source===J.Source.ScreenShare&&v==="vp9"&&(n.scalabilityMode="L1T3"),n.scalabilityMode=(c=n.scalabilityMode)!==null&&c!==void 0?c:"L3T3_KEY"),b.simulcastCodecs=[new ui({codec:v,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:h0}),n.backupCodec&&v!==n.backupCodec.codec&&b.encryption===un.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),b.simulcastCodecs.push(new ui({codec:n.backupCodec.codec,cid:""})))),E=p0(e.source===J.Source.ScreenShare,b.width,b.height,n),b.layers=Mw(b.width,b.height,E,Au(n.videoCodec))}else e.kind===J.Kind.Audio&&(E=[{maxBitrate:(u=(l=n.audioPreset)===null||l===void 0?void 0:l.maxBitrate)!==null&&u!==void 0?u:n.audioBitrate,priority:(h=(d=n.audioPreset)===null||d===void 0?void 0:d.priority)!==null&&h!==void 0?h:"high",networkPriority:(p=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&p!==void 0?p:"high"}]);if(!this.engine||this.engine.isClosed)throw new zt("cannot publish track when not connected");const w=yield this.engine.addTrack(b);let A;if(w.codecs.forEach(T=>{A===void 0&&(A=T.mimeType)}),A&&e.kind===J.Kind.Video){const T=wP(A);T!==v&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(e)),{codec:T})),n.videoCodec=T,E=p0(e.source===J.Source.ScreenShare,b.width,b.height,n))}const x=new ad(e.kind,w,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(x.options=n,e.sid=w.sid,!this.engine.pcManager)throw new zt("pcManager is not ready");if(this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:E,trackInfo:w})),e.sender=yield this.engine.createSender(e,n,E),E)if(cl()&&e.kind===J.Kind.Audio){let T;for(const _ of this.engine.pcManager.publisher.getTransceivers())if(_.sender===e.sender){T=_;break}T&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:T,codec:"opus",maxbr:!((g=E[0])===null||g===void 0)&&g.maxBitrate?E[0].maxBitrate/1e3:0})}else e.codec&&Au(e.codec)&&(!((C=E[0])===null||C===void 0)&&C.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:b.cid,codec:e.codec,maxbr:E[0].maxBitrate/1e3});return yield this.engine.negotiate(),e instanceof Mr?e.startMonitor(this.engine.client):e instanceof Yn&&e.startMonitor(),this.addTrackPublication(x),this.emit(oe.LocalTrackPublished,x),x})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,r){var i;return F(this,void 0,void 0,function*(){if(this.encryptionType!==un.NONE)return;let o;if(this.tracks.forEach(d=>{d.track&&d.track===e&&(o=d)}),!o)throw new Ni("track is not published");if(!(e instanceof Mr))throw new Ni("track is not a video track");const s=Object.assign(Object.assign({},(i=this.roomOptions)===null||i===void 0?void 0:i.publishDefaults),r),a=a9(e,n,s);if(!a){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),Ct(e)));return}const c=e.addSimulcastTrack(n,a),l=new di({cid:c.mediaStreamTrack.id,type:J.kindToProto(e.kind),muted:e.isMuted,source:J.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:s.videoCodec,cid:c.mediaStreamTrack.id}]});if(l.layers=Mw(l.width,l.height,a),!this.engine||this.engine.isClosed)throw new zt("cannot publish track when not connected");const u=yield this.engine.addTrack(l);yield this.engine.createSimulcastSender(e,c,s,a),yield this.engine.negotiate(),this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:a,trackInfo:u}))})}unpublishTrack(e,n){var r,i;return F(this,void 0,void 0,function*(){const o=this.getPublicationForTrack(e),s=o?Ct(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),s)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),s));return}e=o.track,e.off(he.Muted,this.onTrackMuted),e.off(he.Unmuted,this.onTrackUnmuted),e.off(he.Ended,this.handleTrackEnded),e.off(he.UpstreamPaused,this.onTrackUpstreamPaused),e.off(he.UpstreamResumed,this.onTrackUpstreamResumed),n===void 0&&(n=(i=(r=this.roomOptions)===null||r===void 0?void 0:r.stopLocalTrackOnUnpublish)!==null&&i!==void 0?i:!0),n&&e.stop();let a=!1;const c=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<Xt.FAILED&&c)try{for(const l of this.engine.pcManager.publisher.getTransceivers())l.sender===c&&(l.direction="inactive",a=!0);if(this.engine.removeTrack(c)&&(a=!0),e instanceof Mr){for(const[,l]of e.simulcastCodecs)l.sender&&(this.engine.removeTrack(l.sender)&&(a=!0),l.sender=void 0);e.simulcastCodecs.clear()}}catch(l){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),s),{error:l}))}switch(this.tracks.delete(o.trackSid),o.kind){case J.Kind.Audio:this.audioTracks.delete(o.trackSid);break;case J.Kind.Video:this.videoTracks.delete(o.trackSid);break}return this.emit(oe.LocalTrackUnpublished,o),o.setTrack(void 0),a&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return F(this,void 0,void 0,function*(){return(yield Promise.all(e.map(r=>this.unpublishTrack(r)))).filter(r=>r instanceof ad)})}republishAllTracks(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return F(this,void 0,void 0,function*(){const r=[];this.tracks.forEach(i=>{i.track&&(e&&(i.options=Object.assign(Object.assign({},i.options),e)),r.push(i))}),yield Promise.all(r.map(i=>F(this,void 0,void 0,function*(){const o=i.track;yield this.unpublishTrack(o,!1),n&&!o.isMuted&&o.source!==J.Source.ScreenShare&&o.source!==J.Source.ScreenShareAudio&&(o instanceof Yn||o instanceof Mr)&&!o.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:i.trackSid})),yield o.restartTrack()),yield this.publishTrack(o,i.options)})))})}publishData(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return F(this,void 0,void 0,function*(){const i=Array.isArray(r)?r:r==null?void 0:r.destination,o=[],s=Array.isArray(r)?void 0:r.topic;i!==void 0&&i.forEach(c=>{c instanceof cd?o.push(c.sid):o.push(c)});const a=new Mi({kind:n,value:{case:"user",value:new Li({participantSid:this.sid,payload:e,destinationSids:o,topic:s})}});yield this.engine.sendDataPacket(a,n)})}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}updateInfo(e){return e.sid!==this.sid||!super.updateInfo(e)?!1:(e.tracks.forEach(n=>{var r,i;const o=this.tracks.get(n.sid);if(o){const s=o.isMuted||((i=(r=o.track)===null||r===void 0?void 0:r.isUpstreamPaused)!==null&&i!==void 0?i:!1);s!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),Ct(o)),{mutedOnServer:s})),this.engine.client.sendMuteTrack(n.sid,s))}}),!0)}getPublicationForTrack(e){let n;return this.tracks.forEach(r=>{const i=r.track;i&&(e instanceof MediaStreamTrack?(i instanceof Yn||i instanceof Mr)&&i.mediaStreamTrack===e&&(n=r):e===i&&(n=r))}),n}}var He;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting"})(He||(He={}));const p9=2*1e3;class ep extends ao.EventEmitter{constructor(e){var n,r,i;super(),n=this,this.state=He.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Ve,this.bufferedEvents=[],this.connect=(o,s,a)=>F(this,void 0,void 0,function*(){var c;const l=yield this.disconnectLock.lock();if(this.state===He.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),l(),Promise.resolve();if(this.connectFuture)return l(),this.connectFuture.promise;this.setAndEmitConnectionState(He.Connecting),((c=this.regionUrlProvider)===null||c===void 0?void 0:c.getServerUrl().toString())!==o&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),d0(new URL(o))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Rw(o,s):this.regionUrlProvider.updateToken(s),this.regionUrlProvider.fetchRegionSettings().catch(h=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:h}))}));const u=(h,f,p)=>F(this,void 0,void 0,function*(){var g;this.abortController&&this.abortController.abort();const C=new AbortController;this.abortController=C,l==null||l();try{yield this.attemptConnection(p??o,s,a,C),this.abortController=void 0,h()}catch(m){if(this.regionUrlProvider&&m instanceof ht&&m.reason!==3&&m.reason!==0){let v=null;try{v=yield this.regionUrlProvider.getNextBestRegionUrl((g=this.abortController)===null||g===void 0?void 0:g.signal)}catch(b){if(b instanceof ht&&(b.status===401||b.reason===3)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(b);return}}v?(this.log.info("Initial connection failed with ConnectionError: ".concat(m.message,". Retrying with another region: ").concat(v),this.logContext),yield u(h,f,v)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(m))}else this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),f(m)}}),d=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new TP((h,f)=>{u(h,f,d)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(o,s,a,c,l,u)=>F(this,void 0,void 0,function*(){var d,h,f;const p=yield a.join(o,s,{autoSubscribe:c.autoSubscribe,publishOnly:c.publishOnly,adaptiveStream:typeof l.adaptiveStream=="object"?!0:l.adaptiveStream,maxRetries:c.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:c.websocketTimeout},u.signal);let g=p.serverInfo;if(g||(g={version:p.serverVersion,region:p.serverRegion}),this.log.debug("connected to Livekit Server ".concat(Object.entries(g).map(C=>{let[m,v]=C;return"".concat(m,": ").concat(v)}).join(", ")),{room:(d=p.room)===null||d===void 0?void 0:d.name,roomSid:(h=p.room)===null||h===void 0?void 0:h.sid,identity:(f=p.participant)===null||f===void 0?void 0:f.identity}),!p.serverVersion)throw new sW("unknown server version");return p.serverVersion==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),l.dynacast=!1),p}),this.applyJoinResponse=o=>{const s=o.participant;this.localParticipant.sid=s.sid,this.localParticipant.identity=s.identity,this.handleParticipantUpdates([s,...o.otherParticipants]),o.room&&this.handleRoomUpdate(o.room),this.options.e2ee&&this.e2eeManager&&this.e2eeManager.setSifTrailer(o.sifTrailer)},this.attemptConnection=(o,s,a,c)=>F(this,void 0,void 0,function*(){var l,u;this.state===He.Reconnecting?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((l=this.regionUrlProvider)===null||l===void 0)&&l.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},wC),a),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const d=yield this.connectSignal(o,s,this.engine,this.connOptions,this.options,c);this.applyJoinResponse(d),this.setupLocalParticipantEvents(),this.emit(te.SignalConnected)}catch(d){yield this.engine.close(),this.recreateEngine();const h=new ht("could not establish signal connection");throw d instanceof Error&&(h.message="".concat(h.message,": ").concat(d.message)),d instanceof ht&&(h.reason=d.reason,h.status=d.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:d})),h}if(c.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new ht("Connection attempt aborted");try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,c)}catch(d){throw yield this.engine.close(),this.recreateEngine(),d}sr()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),sr()&&(document.addEventListener("freeze",this.onPageLeave),(u=navigator.mediaDevices)===null||u===void 0||u.addEventListener("devicechange",this.handleDeviceChange)),this.setAndEmitConnectionState(He.Connected),this.emit(te.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){let o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return F(n,void 0,void 0,function*(){var s,a,c,l;const u=yield this.disconnectLock.lock();try{if(this.state===He.Disconnected){this.log.debug("already disconnected",this.logContext);return}this.log.info("disconnect from room",Object.assign({},this.logContext)),(this.state===He.Connecting||this.state===He.Reconnecting)&&(this.log.warn("abort connection attempt",this.logContext),(s=this.abortController)===null||s===void 0||s.abort(),(c=(a=this.connectFuture)===null||a===void 0?void 0:a.reject)===null||c===void 0||c.call(a,new ht("Client initiated disconnect")),this.connectFuture=void 0),!((l=this.engine)===null||l===void 0)&&l.client.isDisconnected||(yield this.engine.client.sendLeave()),this.engine&&(yield this.engine.close()),this.handleDisconnect(o,Ho.CLIENT_INITIATED),this.engine=void 0}finally{u()}})},this.onPageLeave=()=>F(this,void 0,void 0,function*(){yield this.disconnect()}),this.startAudio=()=>F(this,void 0,void 0,function*(){const o=[],s=ns();if(s&&s.os==="iOS"){const a="livekit-dummy-audio-el";let c=document.getElementById(a);if(!c){c=document.createElement("audio"),c.id=a,c.autoplay=!0,c.hidden=!0;const l=Yg();l.enabled=!0;const u=new MediaStream([l]);c.srcObject=u,document.addEventListener("visibilitychange",()=>{c&&(c.srcObject=document.hidden?null:u,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(c),this.once(te.Disconnected,()=>{c==null||c.remove(),c=null})}o.push(c)}this.participants.forEach(a=>{a.audioTracks.forEach(c=>{c.track&&c.track.attachedElements.forEach(l=>{o.push(l)})})});try{yield Promise.all([this.acquireAudioContext(),...o.map(a=>(a.muted=!1,a.play()))]),this.handleAudioPlaybackStarted()}catch(a){throw this.handleAudioPlaybackFailed(a),a}}),this.startVideo=()=>F(this,void 0,void 0,function*(){const o=[];for(const s of this.participants.values())s.videoTracks.forEach(a=>{var c;(c=a.track)===null||c===void 0||c.attachedElements.forEach(l=>{o.includes(l)||o.push(l)})});yield Promise.all(o.map(s=>s.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(s=>{s.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile();for(const o of this.participants.values())this.handleParticipantDisconnected(o.sid,o);this.setAndEmitConnectionState(He.Reconnecting)&&this.emit(te.Reconnecting)},this.handleSignalRestarted=o=>F(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(o.serverRegion),Object.assign(Object.assign({},this.logContext),{region:o.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(o);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(s){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:s}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:o.serverRegion}))}catch{return}this.setAndEmitConnectionState(He.Connected),this.emit(te.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=o=>{o.forEach(s=>{if(s.identity===this.localParticipant.identity){this.localParticipant.updateInfo(s);return}const a=this.identityToSid.get(s.identity);a&&a!==s.sid&&this.handleParticipantDisconnected(a,this.participants.get(a));let c=this.participants.get(s.sid);const l=!c;s.state===Ga.DISCONNECTED?this.handleParticipantDisconnected(s.sid,c):(c=this.getOrCreateParticipant(s.sid,s),l||c.updateInfo(s))})},this.handleActiveSpeakersUpdate=o=>{const s=[],a={};o.forEach(c=>{if(a[c.sid]=!0,c.sid===this.localParticipant.sid)this.localParticipant.audioLevel=c.level,this.localParticipant.setIsSpeaking(!0),s.push(this.localParticipant);else{const l=this.participants.get(c.sid);l&&(l.audioLevel=c.level,l.setIsSpeaking(!0),s.push(l))}}),a[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.participants.forEach(c=>{a[c.sid]||(c.audioLevel=0,c.setIsSpeaking(!1))}),this.activeSpeakers=s,this.emitWhenConnected(te.ActiveSpeakersChanged,s)},this.handleSpeakersChanged=o=>{const s=new Map;this.activeSpeakers.forEach(c=>{s.set(c.sid,c)}),o.forEach(c=>{let l=this.participants.get(c.sid);c.sid===this.localParticipant.sid&&(l=this.localParticipant),l&&(l.audioLevel=c.level,l.setIsSpeaking(c.active),c.active?s.set(c.sid,l):s.delete(c.sid))});const a=Array.from(s.values());a.sort((c,l)=>l.audioLevel-c.audioLevel),this.activeSpeakers=a,this.emitWhenConnected(te.ActiveSpeakersChanged,a)},this.handleStreamStateUpdate=o=>{o.streamStates.forEach(s=>{const a=this.participants.get(s.participantSid);if(!a)return;const c=a.getTrackPublication(s.trackSid);!c||!c.track||(c.track.streamState=J.streamStateFromProto(s.state),a.emit(oe.TrackStreamStateChanged,c,c.track.streamState),this.emitWhenConnected(te.TrackStreamStateChanged,c,c.track.streamState,a))})},this.handleSubscriptionPermissionUpdate=o=>{const s=this.participants.get(o.participantSid);if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setAllowed(o.allowed)},this.handleSubscriptionError=o=>{const s=Array.from(this.participants.values()).find(c=>c.tracks.has(o.trackSid));if(!s)return;const a=s.getTrackPublication(o.trackSid);a&&a.setSubscriptionError(o.err)},this.handleDataPacket=(o,s)=>{const a=this.participants.get(o.participantSid);this.emit(te.DataReceived,o.payload,a,s,o.topic),a==null||a.emit(oe.DataReceived,o.payload,s)},this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(te.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=o=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:o})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(te.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(te.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(te.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>F(this,void 0,void 0,function*(){this.emit(te.MediaDevicesChanged)}),this.handleRoomUpdate=o=>{const s=this.roomInfo;this.roomInfo=o,s&&s.metadata!==o.metadata&&this.emitWhenConnected(te.RoomMetadataChanged,o.metadata),(s==null?void 0:s.activeRecording)!==o.activeRecording&&this.emitWhenConnected(te.RecordingStatusChanged,o.activeRecording)},this.handleConnectionQualityUpdate=o=>{o.updates.forEach(s=>{if(s.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(s.quality);return}const a=this.participants.get(s.participantSid);a&&a.setConnectionQuality(s.quality)})},this.onLocalParticipantMetadataChanged=o=>{this.emit(te.ParticipantMetadataChanged,o,this.localParticipant)},this.onLocalParticipantNameChanged=o=>{this.emit(te.ParticipantNameChanged,o,this.localParticipant)},this.onLocalTrackMuted=o=>{this.emit(te.TrackMuted,o,this.localParticipant)},this.onLocalTrackUnmuted=o=>{this.emit(te.TrackUnmuted,o,this.localParticipant)},this.onLocalTrackPublished=o=>F(this,void 0,void 0,function*(){var s;this.emit(te.LocalTrackPublished,o,this.localParticipant),o.track instanceof Yn&&(yield o.track.checkForSilence())&&this.emit(te.LocalAudioSilenceDetected,o);const a=yield(s=o.track)===null||s===void 0?void 0:s.getDeviceId(),c=vW(o.source);c&&a&&a!==this.localParticipant.activeDeviceMap.get(c)&&(this.localParticipant.activeDeviceMap.set(c,a),this.emit(te.ActiveDeviceChanged,c,a))}),this.onLocalTrackUnpublished=o=>{this.emit(te.LocalTrackUnpublished,o,this.localParticipant)},this.onLocalConnectionQualityChanged=o=>{this.emit(te.ConnectionQualityChanged,o,this.localParticipant)},this.onMediaDevicesError=o=>{this.emit(te.MediaDevicesError,o)},this.onLocalParticipantPermissionsChanged=o=>{this.emit(te.ParticipantPermissionsChanged,o,this.localParticipant)},this.setMaxListeners(100),this.participants=new Map,this.identityToSid=new Map,this.options=Object.assign(Object.assign({},JW),e),this.log=ts((r=this.options.loggerName)!==null&&r!==void 0?r:eo.Room),this.options.audioCaptureDefaults=Object.assign(Object.assign({},NP),e==null?void 0:e.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},_P),e==null?void 0:e.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},KW),e==null?void 0:e.publishDefaults),this.maybeCreateEngine(),this.disconnectLock=new yi,this.localParticipant=new g0("","",this.engine,this.options),this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Ra(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Ra(this.options.audioCaptureDefaults.deviceId)),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&this.switchActiveDevice("audiooutput",Ra(this.options.audioOutput.deviceId)).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),this.options.e2ee&&this.setupE2EE()}setE2EEEnabled(e){return F(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;this.options.e2ee&&(this.e2eeManager=new DW(this.options.e2ee),this.e2eeManager.on(Ms.ParticipantEncryptionStatusChanged,(n,r)=>{r instanceof g0&&(this.isE2EEEnabled=n),this.emit(te.ParticipantEncryptionStatusChanged,n,r)}),this.e2eeManager.on(Ms.EncryptionError,n=>this.emit(te.EncryptionError,n)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){return{room:this.name,roomSid:this.sid,identity:this.localParticipant.identity}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}get sid(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.sid)!==null&&n!==void 0?n:""}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new qW(this.options),this.engine.on(ye.ParticipantUpdate,this.handleParticipantUpdates).on(ye.RoomUpdate,this.handleRoomUpdate).on(ye.SpeakersChanged,this.handleSpeakersChanged).on(ye.StreamStateChanged,this.handleStreamStateUpdate).on(ye.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(ye.SubscriptionError,this.handleSubscriptionError).on(ye.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(ye.MediaTrackAdded,(e,n,r)=>{this.onTrackAdded(e,n,r)}).on(ye.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(ye.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(ye.DataPacketReceived,this.handleDataPacket).on(ye.Resuming,()=>{this.clearConnectionReconcile(),this.setAndEmitConnectionState(He.Reconnecting)&&this.emit(te.Reconnecting)}).on(ye.Resumed,()=>{this.setAndEmitConnectionState(He.Connected),this.emit(te.Reconnected),this.registerConnectionReconcile(),this.updateSubscriptions(),this.emitBufferedEvents()}).on(ye.SignalResumed,()=>{this.bufferedEvents=[],this.state===He.Reconnecting&&this.sendSyncState()}).on(ye.Restarting,this.handleRestarting).on(ye.SignalRestarted,this.handleSignalRestarted).on(ye.DCBufferStatusChanged,(e,n)=>{this.emit(te.DCBufferStatusChanged,e,n)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Bn.getInstance().getDevices(e,n)}prepareConnection(e,n){return F(this,void 0,void 0,function*(){if(this.state===He.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(d0(new URL(e))&&n){this.regionUrlProvider=new Rw(e,n);const r=yield this.regionUrlProvider.getNextBestRegionUrl();r&&this.state===He.Disconnected&&(this.regionUrl=r,yield fetch(Iw(r),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(r),this.logContext))}else yield fetch(Iw(e),{method:"HEAD"})}catch(r){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:r}))}}})}getParticipantByIdentity(e){if(this.localParticipant.identity===e)return this.localParticipant;const n=this.identityToSid.get(e);if(n)return this.participants.get(n)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return F(this,void 0,void 0,function*(){let r=()=>{},i;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":i=new ln({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":i=new ln({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":i=new ln({scenario:{case:"serverLeave",value:!0}});break;case"migration":i=new ln({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":r=()=>F(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new ln({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":r=()=>F(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),i=new ln({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":i=new ln({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),r=()=>F(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new Vr({reason:Ho.CLIENT_INITIATED,canReconnect:!0}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");i=new ln({scenario:{case:"subscriberBandwidth",value:BigInt(n)}});break}i&&(yield this.engine.client.sendSimulateScenario(i),yield r())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveAudioOutputDevice(){var e,n;return(n=(e=this.options.audioOutput)===null||e===void 0?void 0:e.deviceId)!==null&&n!==void 0?n:""}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;var i,o,s;return F(this,void 0,void 0,function*(){let a=!1,c=!0;const l=r?{exact:n}:n;if(e==="audioinput"){const u=this.options.audioCaptureDefaults.deviceId;this.options.audioCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.audioTracks.values()).filter(h=>h.source===J.Source.Microphone);try{c=(yield Promise.all(d.map(h=>{var f;return(f=h.audioTrack)===null||f===void 0?void 0:f.setDeviceId(l)}))).every(h=>h===!0)}catch(h){throw this.options.audioCaptureDefaults.deviceId=u,h}}else if(e==="videoinput"){const u=this.options.videoCaptureDefaults.deviceId;this.options.videoCaptureDefaults.deviceId=l,a=u!==l;const d=Array.from(this.localParticipant.videoTracks.values()).filter(h=>h.source===J.Source.Camera);try{c=(yield Promise.all(d.map(h=>{var f;return(f=h.videoTrack)===null||f===void 0?void 0:f.setDeviceId(l)}))).every(h=>h===!0)}catch(h){throw this.options.videoCaptureDefaults.deviceId=u,h}}else if(e==="audiooutput"){if(!u0()&&!this.options.expWebAudioMix||this.options.expWebAudioMix&&this.audioContext&&!("setSinkId"in this.audioContext))throw new Error("cannot switch audio output, setSinkId not supported");(i=(s=this.options).audioOutput)!==null&&i!==void 0||(s.audioOutput={});const u=this.options.audioOutput.deviceId;this.options.audioOutput.deviceId=n,a=u!==l;try{this.options.expWebAudioMix?(o=this.audioContext)===null||o===void 0||o.setSinkId(n):yield Promise.all(Array.from(this.participants.values()).map(d=>d.setAudioOutput({deviceId:n})))}catch(d){throw this.options.audioOutput.deviceId=u,d}}return a&&c&&(this.localParticipant.activeDeviceMap.set(e,n),this.emit(te.ActiveDeviceChanged,e,n)),c})}setupLocalParticipantEvents(){this.localParticipant.on(oe.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(oe.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(oe.TrackMuted,this.onLocalTrackMuted).on(oe.TrackUnmuted,this.onLocalTrackUnmuted).on(oe.LocalTrackPublished,this.onLocalTrackPublished).on(oe.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(oe.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(oe.MediaDevicesError,this.onMediaDevicesError).on(oe.AudioStreamAcquired,this.startAudio).on(oe.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.participants.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,r){if(this.state===He.Connecting||this.state===He.Reconnecting){const u=()=>{this.onTrackAdded(e,n,r),d()},d=()=>{this.off(te.Reconnected,u),this.off(te.Connected,u),this.off(te.Disconnected,d)};this.once(te.Reconnected,u),this.once(te.Connected,u),this.once(te.Disconnected,d);return}if(this.state===He.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}const i=bW(n.id),o=i[0];let s=i[1],a=e.id;if(s&&s.startsWith("TR")&&(a=s),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const c=this.participants.get(o);if(!c){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}let l;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?l=this.options.adaptiveStream:l={}),c.addSubscribedMediaTrack(e,a,n,r,l)}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var r;if(this.clearConnectionReconcile(),this.bufferedEvents=[],this.state!==He.Disconnected){this.regionUrl=void 0;try{this.participants.forEach(i=>{i.tracks.forEach(o=>{i.unpublishTrack(o.trackSid)})}),this.localParticipant.tracks.forEach(i=>{var o,s;i.track&&this.localParticipant.unpublishTrack(i.track,e),e&&((o=i.track)===null||o===void 0||o.detach(),(s=i.track)===null||s===void 0||s.stop())}),this.localParticipant.off(oe.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(oe.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(oe.TrackMuted,this.onLocalTrackMuted).off(oe.TrackUnmuted,this.onLocalTrackUnmuted).off(oe.LocalTrackPublished,this.onLocalTrackPublished).off(oe.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(oe.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(oe.MediaDevicesError,this.onMediaDevicesError).off(oe.AudioStreamAcquired,this.startAudio).off(oe.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.tracks.clear(),this.localParticipant.videoTracks.clear(),this.localParticipant.audioTracks.clear(),this.participants.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.expWebAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),sr()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(r=navigator.mediaDevices)===null||r===void 0||r.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(He.Disconnected),this.emit(te.Disconnected,n)}}}handleParticipantDisconnected(e,n){this.participants.delete(e),n&&(this.identityToSid.delete(n.identity),n.tracks.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(te.ParticipantDisconnected,n))}acquireAudioContext(){var e,n;return F(this,void 0,void 0,function*(){if(typeof this.options.expWebAudioMix!="boolean"&&this.options.expWebAudioMix.audioContext?this.audioContext=this.options.expWebAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=IC())!==null&&e!==void 0?e:void 0),this.audioContext&&this.audioContext.state==="suspended")try{yield this.audioContext.resume()}catch(i){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:i}))}this.options.expWebAudioMix&&this.participants.forEach(i=>i.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext);const r=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";r!==this.canPlaybackAudio&&(this.audioEnabled=r,this.emit(te.AudioPlaybackStatusChanged,r))})}createParticipant(e,n){var r;let i;return n?i=cd.fromParticipantInfo(this.engine.client,n):i=new cd(this.engine.client,e,"",void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.expWebAudioMix&&i.setAudioContext(this.audioContext),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&i.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),i}getOrCreateParticipant(e,n){if(this.participants.has(e))return this.participants.get(e);const r=this.createParticipant(e,n);return this.participants.set(e,r),this.identityToSid.set(n.identity,n.sid),this.emitWhenConnected(te.ParticipantConnected,r),r.on(oe.TrackPublished,i=>{this.emitWhenConnected(te.TrackPublished,i,r)}).on(oe.TrackSubscribed,(i,o)=>{i.kind===J.Kind.Audio?(i.on(he.AudioPlaybackStarted,this.handleAudioPlaybackStarted),i.on(he.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):i.kind===J.Kind.Video&&(i.on(he.VideoPlaybackFailed,this.handleVideoPlaybackFailed),i.on(he.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(te.TrackSubscribed,i,o,r)}).on(oe.TrackUnpublished,i=>{this.emit(te.TrackUnpublished,i,r)}).on(oe.TrackUnsubscribed,(i,o)=>{this.emit(te.TrackUnsubscribed,i,o,r)}).on(oe.TrackSubscriptionFailed,i=>{this.emit(te.TrackSubscriptionFailed,i,r)}).on(oe.TrackMuted,i=>{this.emitWhenConnected(te.TrackMuted,i,r)}).on(oe.TrackUnmuted,i=>{this.emitWhenConnected(te.TrackUnmuted,i,r)}).on(oe.ParticipantMetadataChanged,i=>{this.emitWhenConnected(te.ParticipantMetadataChanged,i,r)}).on(oe.ParticipantNameChanged,i=>{this.emitWhenConnected(te.ParticipantNameChanged,i,r)}).on(oe.ConnectionQualityChanged,i=>{this.emitWhenConnected(te.ConnectionQualityChanged,i,r)}).on(oe.ParticipantPermissionsChanged,i=>{this.emitWhenConnected(te.ParticipantPermissionsChanged,i,r)}).on(oe.TrackSubscriptionStatusChanged,(i,o)=>{this.emitWhenConnected(te.TrackSubscriptionStatusChanged,i,o,r)}).on(oe.TrackSubscriptionFailed,(i,o)=>{this.emit(te.TrackSubscriptionFailed,i,r,o)}).on(oe.TrackSubscriptionPermissionChanged,(i,o)=>{this.emitWhenConnected(te.TrackSubscriptionPermissionChanged,i,o,r)}),n&&r.updateInfo(n),r}sendSyncState(){const e=Array.from(this.participants.values()).reduce((r,i)=>(r.push(...i.getTracks()),r),[]),n=this.localParticipant.getTracks();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.participants.values())for(const n of e.videoTracks.values())n.isSubscribed&&n instanceof kC&&n.emitTrackUpdate()}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=hn.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,Ho.STATE_MISMATCH))):e=0},p9)}clearConnectionReconcile(){this.connectionReconcileInterval&&hn.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(te.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,r]=e;this.emit(n,...r)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return this.state===He.Connected?this.emit(e,...r):(this.state===He.Reconnecting&&this.bufferedEvents.push([e,r]),!1)}simulateParticipants(e){var n,r;return F(this,void 0,void 0,function*(){const i=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new kl({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:Me.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Ar({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(te.SignalConnected),this.emit(te.Connected),this.setAndEmitConnectionState(He.Connected),i.video){const s=new ad(J.Kind.Video,new nr({source:Lt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:En.AUDIO,name:"video-dummy"}),new Mr(i.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:Cw(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(oe.LocalTrackPublished,s)}if(i.audio){const s=new ad(J.Kind.Audio,new nr({source:Lt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:En.AUDIO}),new Yn(i.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:Yg(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(s),this.localParticipant.emit(oe.LocalTrackPublished,s)}for(let s=0;s<o.count-1;s+=1){let a=new Ar({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(s),state:Ga.ACTIVE,tracks:[],joinedAt:Me.parse(Date.now())});const c=this.getOrCreateParticipant(a.identity,a);if(o.video){const l=Cw(160*((r=o.aspectRatios[s%o.aspectRatios.length])!==null&&r!==void 0?r:1),160,!1,!0),u=new nr({source:Lt.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:En.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}if(o.audio){const l=Yg(),u=new nr({source:Lt.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:En.AUDIO});c.addSubscribedMediaTrack(l,u.sid,new MediaStream([l])),a.tracks=[...a.tracks,u]}c.updateInfo(a)}})}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(e!==te.ActiveSpeakersChanged){const o=FP(r).filter(s=>s!==void 0);this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...r)}}function FP(t){return t.map(e=>{if(e)return Array.isArray(e)?FP(e):typeof e=="object"?"logContext"in e&&e.logContext:e})}var ai;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(ai||(ai={}));class Tl extends ao.EventEmitter{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=ai.IDLE,this.logs=[],this.errorsAsWarnings=!1,this.url=e,this.token=n,this.name=this.constructor.name,this.room=new ep(r.roomOptions),this.connectOptions=r.connectOptions,r.errorsAsWarnings&&(this.errorsAsWarnings=r.errorsAsWarnings)}run(e){return F(this,void 0,void 0,function*(){if(this.status!==ai.IDLE)throw Error("check is running already");this.setStatus(ai.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==ai.SKIPPED&&this.setStatus(this.isSuccess()?ai.SUCCESS:ai.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(){return F(this,void 0,void 0,function*(){return this.room.state===He.Connected?this.room:(yield this.room.connect(this.url,this.token),this.room)})}disconnect(){return F(this,void 0,void 0,function*(){this.room&&this.room.state!==He.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(ai.SKIPPED)}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}function UP(t){var e,n;return F(this,void 0,void 0,function*(){t??(t={}),(e=t.audio)!==null&&e!==void 0||(t.audio=!0),(n=t.video)!==null&&n!==void 0||(t.video=!0);const r=SP(t,NP,_P),i=Fp(r),o=navigator.mediaDevices.getUserMedia(i);t.audio&&(Bn.userMediaPromiseMap.set("audioinput",o),o.catch(()=>Bn.userMediaPromiseMap.delete("audioinput"))),t.video&&(Bn.userMediaPromiseMap.set("videoinput",o),o.catch(()=>Bn.userMediaPromiseMap.delete("videoinput")));const s=yield o;return s.getTracks().map(a=>{const c=a.kind==="audio";c?t.audio:t.video;let l;const u=c?i.audio:i.video;typeof u!="boolean"&&(l=u),l?l.deviceId=a.getSettings().deviceId:l={deviceId:a.getSettings().deviceId};const d=OP(a,l);return d.kind===J.Kind.Video?d.source=J.Source.Camera:d.kind===J.Kind.Audio&&(d.source=J.Source.Microphone),d.mediaStream=s,d})})}function g9(t){return F(this,void 0,void 0,function*(){return(yield UP({audio:!1,video:t}))[0]})}function m9(t){return F(this,void 0,void 0,function*(){return(yield UP({audio:t,video:!1}))[0]})}class v9 extends Tl{get description(){return"Can publish audio"}perform(){var e;return F(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield m9();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="audio"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," audio packets"))})}}class y9 extends Tl{get description(){return"Can publish video"}perform(){var e;return F(this,void 0,void 0,function*(){const n=yield this.connect(),r=yield g9();n.localParticipant.publishTrack(r),yield new Promise(s=>setTimeout(s,3e3));const i=yield(e=r.sender)===null||e===void 0?void 0:e.getStats();if(!i)throw new Error("Could not get RTCStats");let o=0;if(i.forEach(s=>{s.type==="outbound-rtp"&&s.mediaType==="video"&&(o=s.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}}class C9 extends Tl{get description(){return"Resuming connection after interruption"}perform(){var e;return F(this,void 0,void 0,function*(){const n=yield this.connect();let r=!1,i=!1,o;const s=new Promise(c=>{setTimeout(c,5e3),o=c});n.on(te.Reconnecting,()=>{r=!0}).on(te.Reconnected,()=>{i=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const a=n.engine.client.onClose;if(a&&a(""),yield s,r){if(!i||n.state!==He.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class I9 extends Tl{get description(){return"Can connect via TURN"}perform(){var e,n;return F(this,void 0,void 0,function*(){const r=new SC,i=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});let o=!1,s=!1,a=!1;for(let c of i.iceServers)for(let l of c.urls)l.startsWith("turn:")?(s=!0,a=!0):l.startsWith("turns:")&&(s=!0,a=!0,o=!0),l.startsWith("stun:")&&(a=!0);a?s&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield r.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||s?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(c=>setTimeout(c,0)))})}}class b9 extends Tl{get description(){return"Establishing WebRTC connection"}perform(){return F(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(te.SignalConnected,()=>{const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(i,o)=>{if(i.candidate){const s=new RTCIceCandidate(i);let a="".concat(s.protocol," ").concat(s.address,":").concat(s.port," ").concat(s.type);s.address&&(S9(s.address)?a+=" (private)":s.protocol==="tcp"&&s.tcpType==="passive"?(e=!0,a+=" (passive)"):s.protocol==="udp"&&(n=!0)),this.appendMessage(a)}r&&r(i,o)},this.room.engine.pcManager&&(this.room.engine.pcManager.subscriber.onIceCandidateError=i=>{i instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(i.errorCode," ").concat(i.errorText," ").concat(i.url))})});try{yield this.connect(),Ve.info("now the room is connected")}catch(r){throw this.appendWarning("ports need to be open on firewall in order to connect."),r}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function S9(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class w9 extends Tl{get description(){return"Connecting to signal connection via WebSocket"}perform(){var e,n,r;return F(this,void 0,void 0,function*(){(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let i=new SC;const o=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===sl.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((r=o.serverInfo)===null||r===void 0?void 0:r.region)),yield i.close()})}}class gz extends ao.EventEmitter{constructor(e,n){super(),this.checkResults=new Map,this.url=e,this.token=n}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:ai.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==ai.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return F(this,void 0,void 0,function*(){const n=this.getNextCheckId(),r=new e(this.url,this.token),i=s=>{this.updateCheck(n,s)};r.on("update",i);const o=yield r.run();return r.off("update",i),o})}checkWebsocket(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(w9)})}checkWebRTC(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(b9)})}checkTURN(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(I9)})}checkReconnect(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(C9)})}checkPublishAudio(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(v9)})}checkPublishVideo(){return F(this,void 0,void 0,function*(){return this.createAndRunCheck(y9)})}}function A9(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var n;const r=t instanceof ll?t.mediaStreamTrack:t,i=r.getSettings();let o={facingMode:(n=e.defaultFacingMode)!==null&&n!==void 0?n:"user",confidence:"low"};if("facingMode"in i){const s=i.facingMode;Ve.debug("rawFacingMode",{rawFacingMode:s}),s&&typeof s=="string"&&T9(s)&&(o={facingMode:s,confidence:"high"})}if(["low","medium"].includes(o.confidence)){Ve.debug("Try to get facing mode from device label: (".concat(r.label,")"));const s=E9(r.label);s!==void 0&&(o=s)}return o}const Lw=new Map([["obs virtual camera",{facingMode:"environment",confidence:"medium"}]]),k9=new Map([["iphone",{facingMode:"environment",confidence:"medium"}],["ipad",{facingMode:"environment",confidence:"medium"}]]);function E9(t){var e;const n=t.trim().toLowerCase();if(n!=="")return Lw.has(n)?Lw.get(n):(e=Array.from(k9.entries()).find(r=>{let[i]=r;return n.includes(i)}))===null||e===void 0?void 0:e[1]}function T9(t){return t===void 0||["user","environment","left","right"].includes(t)}const m0=Math.min,Wc=Math.max,tp=Math.round,Ks=t=>({x:t,y:t}),x9={left:"right",right:"left",bottom:"top",top:"bottom"},P9={start:"end",end:"start"};function Bw(t,e,n){return Wc(t,m0(e,n))}function Vp(t,e){return typeof t=="function"?t(e):t}function za(t){return t.split("-")[0]}function Gp(t){return t.split("-")[1]}function VP(t){return t==="x"?"y":"x"}function GP(t){return t==="y"?"height":"width"}function ul(t){return["top","bottom"].includes(za(t))?"y":"x"}function WP(t){return VP(ul(t))}function R9(t,e,n){n===void 0&&(n=!1);const r=Gp(t),i=WP(t),o=GP(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=np(s)),[s,np(s)]}function N9(t){const e=np(t);return[v0(t),e,v0(e)]}function v0(t){return t.replace(/start|end/g,e=>P9[e])}function _9(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}function O9(t,e,n,r){const i=Gp(t);let o=_9(za(t),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),e&&(o=o.concat(o.map(v0)))),o}function np(t){return t.replace(/left|right|bottom|top/g,e=>x9[e])}function M9(t){return{top:0,right:0,bottom:0,left:0,...t}}function D9(t){return typeof t!="number"?M9(t):{top:t,right:t,bottom:t,left:t}}function rp(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function Fw(t,e,n){let{reference:r,floating:i}=t;const o=ul(e),s=WP(e),a=GP(s),c=za(e),l=o==="y",u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,h=r[a]/2-i[a]/2;let f;switch(c){case"top":f={x:u,y:r.y-i.height};break;case"bottom":f={x:u,y:r.y+r.height};break;case"right":f={x:r.x+r.width,y:d};break;case"left":f={x:r.x-i.width,y:d};break;default:f={x:r.x,y:r.y}}switch(Gp(e)){case"start":f[s]-=h*(n&&l?-1:1);break;case"end":f[s]+=h*(n&&l?-1:1);break}return f}const L9=async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,a=o.filter(Boolean),c=await(s.isRTL==null?void 0:s.isRTL(e));let l=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=Fw(l,r,c),h=r,f={},p=0;for(let g=0;g<a.length;g++){const{name:C,fn:m}=a[g],{x:v,y:b,data:E,reset:w}=await m({x:u,y:d,initialPlacement:r,placement:h,strategy:i,middlewareData:f,rects:l,platform:s,elements:{reference:t,floating:e}});u=v??u,d=b??d,f={...f,[C]:{...f[C],...E}},w&&p<=50&&(p++,typeof w=="object"&&(w.placement&&(h=w.placement),w.rects&&(l=w.rects===!0?await s.getElementRects({reference:t,floating:e,strategy:i}):w.rects),{x:u,y:d}=Fw(l,h,c)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function jP(t,e){var n;e===void 0&&(e={});const{x:r,y:i,platform:o,rects:s,elements:a,strategy:c}=t,{boundary:l="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=Vp(e,t),p=D9(f),C=a[h?d==="floating"?"reference":"floating":d],m=rp(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(a.floating)),boundary:l,rootBoundary:u,strategy:c})),v=d==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(a.floating)),E=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},w=rp(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:c}):v);return{top:(m.top-w.top+p.top)/E.y,bottom:(w.bottom-m.bottom+p.bottom)/E.y,left:(m.left-w.left+p.left)/E.x,right:(w.right-m.right+p.right)/E.x}}const B9=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:a,platform:c,elements:l}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:g=!0,...C}=Vp(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const m=za(i),v=ul(a),b=za(a)===a,E=await(c.isRTL==null?void 0:c.isRTL(l.floating)),w=h||(b||!g?[np(a)]:N9(a)),A=p!=="none";!h&&A&&w.push(...O9(a,g,p,E));const x=[a,...w],T=await jP(e,C),_=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(u&&_.push(T[m]),d){const Z=R9(i,s,E);_.push(T[Z[0]],T[Z[1]])}if(O=[...O,{placement:i,overflows:_}],!_.every(Z=>Z<=0)){var D,U;const Z=(((D=o.flip)==null?void 0:D.index)||0)+1,Y=x[Z];if(Y)return{data:{index:Z,overflows:O},reset:{placement:Y}};let ee=(U=O.filter(ne=>ne.overflows[0]<=0).sort((ne,z)=>ne.overflows[1]-z.overflows[1])[0])==null?void 0:U.placement;if(!ee)switch(f){case"bestFit":{var j;const ne=(j=O.filter(z=>{if(A){const $=ul(z.placement);return $===v||$==="y"}return!0}).map(z=>[z.placement,z.overflows.filter($=>$>0).reduce(($,re)=>$+re,0)]).sort((z,$)=>z[1]-$[1])[0])==null?void 0:j[0];ne&&(ee=ne);break}case"initialPlacement":ee=a;break}if(i!==ee)return{reset:{placement:ee}}}return{}}}};async function F9(t,e){const{placement:n,platform:r,elements:i}=t,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=za(n),a=Gp(n),c=ul(n)==="y",l=["left","top"].includes(s)?-1:1,u=o&&c?-1:1,d=Vp(e,t);let{mainAxis:h,crossAxis:f,alignmentAxis:p}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...d};return a&&typeof p=="number"&&(f=a==="end"?p*-1:p),c?{x:f*u,y:h*l}:{x:h*l,y:f*u}}const U9=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:a}=e,c=await F9(e,t);return s===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+c.x,y:o+c.y,data:{...c,placement:s}}}}},V9=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:a={fn:C=>{let{x:m,y:v}=C;return{x:m,y:v}}},...c}=Vp(t,e),l={x:n,y:r},u=await jP(e,c),d=ul(za(i)),h=VP(d);let f=l[h],p=l[d];if(o){const C=h==="y"?"top":"left",m=h==="y"?"bottom":"right",v=f+u[C],b=f-u[m];f=Bw(v,f,b)}if(s){const C=d==="y"?"top":"left",m=d==="y"?"bottom":"right",v=p+u[C],b=p-u[m];p=Bw(v,p,b)}const g=a.fn({...e,[h]:f,[d]:p});return{...g,data:{x:g.x-n,y:g.y-r}}}}};function xl(t){return ZP(t)?(t.nodeName||"").toLowerCase():"#document"}function Er(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function sa(t){var e;return(e=(ZP(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function ZP(t){return t instanceof Node||t instanceof Er(t).Node}function to(t){return t instanceof Element||t instanceof Er(t).Element}function no(t){return t instanceof HTMLElement||t instanceof Er(t).HTMLElement}function Uw(t){return typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Er(t).ShadowRoot}function Pd(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=Si(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function G9(t){return["table","td","th"].includes(xl(t))}function Wp(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function EC(t){const e=TC(),n=Si(t);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function W9(t){let e=Js(t);for(;no(e)&&!dl(e);){if(Wp(e))return null;if(EC(e))return e;e=Js(e)}return null}function TC(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function dl(t){return["html","body","#document"].includes(xl(t))}function Si(t){return Er(t).getComputedStyle(t)}function jp(t){return to(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function Js(t){if(xl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Uw(t)&&t.host||sa(t);return Uw(e)?e.host:e}function zP(t){const e=Js(t);return dl(e)?t.ownerDocument?t.ownerDocument.body:t.body:no(e)&&Pd(e)?e:zP(e)}function y0(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const i=zP(t),o=i===((r=t.ownerDocument)==null?void 0:r.body),s=Er(i);return o?e.concat(s,s.visualViewport||[],Pd(i)?i:[],s.frameElement&&n?y0(s.frameElement):[]):e.concat(i,y0(i,[],n))}function HP(t){const e=Si(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=no(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,a=tp(n)!==o||tp(r)!==s;return a&&(n=o,r=s),{width:n,height:r,$:a}}function XP(t){return to(t)?t:t.contextElement}function jc(t){const e=XP(t);if(!no(e))return Ks(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=HP(e);let s=(o?tp(n.width):n.width)/r,a=(o?tp(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!a||!Number.isFinite(a))&&(a=1),{x:s,y:a}}const j9=Ks(0);function $P(t){const e=Er(t);return!TC()||!e.visualViewport?j9:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Z9(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Er(t)?!1:e}function ld(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=XP(t);let s=Ks(1);e&&(r?to(r)&&(s=jc(r)):s=jc(t));const a=Z9(o,n,r)?$P(o):Ks(0);let c=(i.left+a.x)/s.x,l=(i.top+a.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const h=Er(o),f=r&&to(r)?Er(r):r;let p=h,g=p.frameElement;for(;g&&r&&f!==p;){const C=jc(g),m=g.getBoundingClientRect(),v=Si(g),b=m.left+(g.clientLeft+parseFloat(v.paddingLeft))*C.x,E=m.top+(g.clientTop+parseFloat(v.paddingTop))*C.y;c*=C.x,l*=C.y,u*=C.x,d*=C.y,c+=b,l+=E,p=Er(g),g=p.frameElement}}return rp({width:u,height:d,x:c,y:l})}function z9(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o=i==="fixed",s=sa(r),a=e?Wp(e.floating):!1;if(r===s||a&&o)return n;let c={scrollLeft:0,scrollTop:0},l=Ks(1);const u=Ks(0),d=no(r);if((d||!d&&!o)&&((xl(r)!=="body"||Pd(s))&&(c=jp(r)),no(r))){const h=ld(r);l=jc(r),u.x=h.x+r.clientLeft,u.y=h.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-c.scrollLeft*l.x+u.x,y:n.y*l.y-c.scrollTop*l.y+u.y}}function H9(t){return Array.from(t.getClientRects())}function KP(t){return ld(sa(t)).left+jp(t).scrollLeft}function X9(t){const e=sa(t),n=jp(t),r=t.ownerDocument.body,i=Wc(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Wc(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+KP(t);const a=-n.scrollTop;return Si(r).direction==="rtl"&&(s+=Wc(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:a}}function $9(t,e){const n=Er(t),r=sa(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,a=0,c=0;if(i){o=i.width,s=i.height;const l=TC();(!l||l&&e==="fixed")&&(a=i.offsetLeft,c=i.offsetTop)}return{width:o,height:s,x:a,y:c}}function K9(t,e){const n=ld(t,!0,e==="fixed"),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=no(t)?jc(t):Ks(1),s=t.clientWidth*o.x,a=t.clientHeight*o.y,c=i*o.x,l=r*o.y;return{width:s,height:a,x:c,y:l}}function Vw(t,e,n){let r;if(e==="viewport")r=$9(t,n);else if(e==="document")r=X9(sa(t));else if(to(e))r=K9(e,n);else{const i=$P(t);r={...e,x:e.x-i.x,y:e.y-i.y}}return rp(r)}function JP(t,e){const n=Js(t);return n===e||!to(n)||dl(n)?!1:Si(n).position==="fixed"||JP(n,e)}function J9(t,e){const n=e.get(t);if(n)return n;let r=y0(t,[],!1).filter(a=>to(a)&&xl(a)!=="body"),i=null;const o=Si(t).position==="fixed";let s=o?Js(t):t;for(;to(s)&&!dl(s);){const a=Si(s),c=EC(s);!c&&a.position==="fixed"&&(i=null),(o?!c&&!i:!c&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Pd(s)&&!c&&JP(t,s))?r=r.filter(u=>u!==s):i=a,s=Js(s)}return e.set(t,r),r}function Y9(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const s=[...n==="clippingAncestors"?Wp(e)?[]:J9(e,this._c):[].concat(n),r],a=s[0],c=s.reduce((l,u)=>{const d=Vw(e,u,i);return l.top=Wc(d.top,l.top),l.right=m0(d.right,l.right),l.bottom=m0(d.bottom,l.bottom),l.left=Wc(d.left,l.left),l},Vw(e,a,i));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function Q9(t){const{width:e,height:n}=HP(t);return{width:e,height:n}}function q9(t,e,n){const r=no(e),i=sa(e),o=n==="fixed",s=ld(t,!0,o,e);let a={scrollLeft:0,scrollTop:0};const c=Ks(0);if(r||!r&&!o)if((xl(e)!=="body"||Pd(i))&&(a=jp(e)),r){const d=ld(e,!0,o,e);c.x=d.x+e.clientLeft,c.y=d.y+e.clientTop}else i&&(c.x=KP(i));const l=s.left+a.scrollLeft-c.x,u=s.top+a.scrollTop-c.y;return{x:l,y:u,width:s.width,height:s.height}}function nm(t){return Si(t).position==="static"}function Gw(t,e){return!no(t)||Si(t).position==="fixed"?null:e?e(t):t.offsetParent}function YP(t,e){const n=Er(t);if(Wp(t))return n;if(!no(t)){let i=Js(t);for(;i&&!dl(i);){if(to(i)&&!nm(i))return i;i=Js(i)}return n}let r=Gw(t,e);for(;r&&G9(r)&&nm(r);)r=Gw(r,e);return r&&dl(r)&&nm(r)&&!EC(r)?n:r||W9(t)||n}const e6=async function(t){const e=this.getOffsetParent||YP,n=this.getDimensions,r=await n(t.floating);return{reference:q9(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function t6(t){return Si(t).direction==="rtl"}const n6={convertOffsetParentRelativeRectToViewportRelativeRect:z9,getDocumentElement:sa,getClippingRect:Y9,getOffsetParent:YP,getElementRects:e6,getClientRects:H9,getDimensions:Q9,getScale:jc,isElement:to,isRTL:t6},r6=U9,i6=V9,o6=B9,s6=(t,e,n)=>{const r=new Map,i={platform:n6,...n},o={...i.platform,_c:r};return L9(t,e,{...i,platform:o})};var QP={exports:{}};(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(qR,function(){var e=function(){},n="undefined",r=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),i=["trace","debug","info","warn","error"],o={},s=null;function a(g,C){var m=g[C];if(typeof m.bind=="function")return m.bind(g);try{return Function.prototype.bind.call(m,g)}catch{return function(){return Function.prototype.apply.apply(m,[g,arguments])}}}function c(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function l(g){return g==="debug"&&(g="log"),typeof console===n?!1:g==="trace"&&r?c:console[g]!==void 0?a(console,g):console.log!==void 0?a(console,"log"):e}function u(){for(var g=this.getLevel(),C=0;C<i.length;C++){var m=i[C];this[m]=C<g?e:this.methodFactory(m,g,this.name)}if(this.log=this.debug,typeof console===n&&g<this.levels.SILENT)return"No console available for logging"}function d(g){return function(){typeof console!==n&&(u.call(this),this[g].apply(this,arguments))}}function h(g,C,m){return l(g)||d.apply(this,arguments)}function f(g,C){var m=this,v,b,E,w="loglevel";typeof g=="string"?w+=":"+g:typeof g=="symbol"&&(w=void 0);function A(D){var U=(i[D]||"silent").toUpperCase();if(!(typeof window===n||!w)){try{window.localStorage[w]=U;return}catch{}try{window.document.cookie=encodeURIComponent(w)+"="+U+";"}catch{}}}function x(){var D;if(!(typeof window===n||!w)){try{D=window.localStorage[w]}catch{}if(typeof D===n)try{var U=window.document.cookie,j=encodeURIComponent(w),Z=U.indexOf(j+"=");Z!==-1&&(D=/^([^;]+)/.exec(U.slice(Z+j.length+1))[1])}catch{}return m.levels[D]===void 0&&(D=void 0),D}}function T(){if(!(typeof window===n||!w)){try{window.localStorage.removeItem(w)}catch{}try{window.document.cookie=encodeURIComponent(w)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function _(D){var U=D;if(typeof U=="string"&&m.levels[U.toUpperCase()]!==void 0&&(U=m.levels[U.toUpperCase()]),typeof U=="number"&&U>=0&&U<=m.levels.SILENT)return U;throw new TypeError("log.setLevel() called with invalid level: "+D)}m.name=g,m.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},m.methodFactory=C||h,m.getLevel=function(){return E??b??v},m.setLevel=function(D,U){return E=_(D),U!==!1&&A(E),u.call(m)},m.setDefaultLevel=function(D){b=_(D),x()||m.setLevel(D,!1)},m.resetLevel=function(){E=null,T(),u.call(m)},m.enableAll=function(D){m.setLevel(m.levels.TRACE,D)},m.disableAll=function(D){m.setLevel(m.levels.SILENT,D)},m.rebuild=function(){if(s!==m&&(v=_(s.getLevel())),u.call(m),s===m)for(var D in o)o[D].rebuild()},v=_(s?s.getLevel():"WARN");var O=x();O!=null&&(E=_(O)),u.call(m)}s=new f,s.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var m=o[C];return m||(m=o[C]=new f(C,s.methodFactory)),m};var p=typeof window!==n?window.log:void 0;return s.noConflict=function(){return typeof window!==n&&window.log===s&&(window.log=p),s},s.getLoggers=function(){return o},s.default=s,s})})(QP);var a6=QP.exports;const c6=fd(a6);function Yt(t){return typeof t=="function"}function qP(t){var e=function(r){Error.call(r),r.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var rm=qP(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function C0(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var Zp=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var a=il(s),c=a.next();!c.done;c=a.next()){var l=c.value;l.remove(this)}}catch(g){e={error:g}}finally{try{c&&!c.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else s.remove(this);var u=this.initialTeardown;if(Yt(u))try{u()}catch(g){o=g instanceof rm?g.errors:[g]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var h=il(d),f=h.next();!f.done;f=h.next()){var p=f.value;try{Ww(p)}catch(g){o=o??[],g instanceof rm?o=Gv(Gv([],Vv(o)),Vv(g.errors)):o.push(g)}}}catch(g){r={error:g}}finally{try{f&&!f.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new rm(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)Ww(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&C0(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&C0(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),eR=Zp.EMPTY;function tR(t){return t instanceof Zp||t&&"closed"in t&&Yt(t.remove)&&Yt(t.add)&&Yt(t.unsubscribe)}function Ww(t){Yt(t)?t():t.unsubscribe()}var nR={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},rR={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Gv([t,e],Vv(n)))},clearTimeout:function(t){var e=rR.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function iR(t){rR.setTimeout(function(){throw t})}function I0(){}function qh(t){t()}var xC=function(t){Al(e,t);function e(n){var r=t.call(this)||this;return r.isStopped=!1,n?(r.destination=n,tR(n)&&n.add(r)):r.destination=h6,r}return e.create=function(n,r,i){return new b0(n,r,i)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(Zp),l6=Function.prototype.bind;function im(t,e){return l6.call(t,e)}var u6=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(r){hh(r)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(r){hh(r)}else hh(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){hh(n)}},t}(),b0=function(t){Al(e,t);function e(n,r,i){var o=t.call(this)||this,s;if(Yt(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var a;o&&nR.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&im(n.next,a),error:n.error&&im(n.error,a),complete:n.complete&&im(n.complete,a)}):s=n}return o.destination=new u6(s),o}return e}(xC);function hh(t){iR(t)}function d6(t){throw t}var h6={closed:!0,next:I0,error:d6,complete:I0},PC=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function oR(t){return t}function f6(t){return t.length===0?oR:t.length===1?t[0]:function(n){return t.reduce(function(r,i){return i(r)},n)}}var yn=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,r){var i=this,o=g6(e)?e:new b0(e,n,r);return qh(function(){var s=i,a=s.operator,c=s.source;o.add(a?a.call(o,c):c?i._subscribe(o):i._trySubscribe(o))}),o},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var r=this;return n=jw(n),new n(function(i,o){var s=new b0({next:function(a){try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[PC]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return f6(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=jw(e),new e(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},t.create=function(e){return new t(e)},t}();function jw(t){var e;return(e=t??nR.Promise)!==null&&e!==void 0?e:Promise}function p6(t){return t&&Yt(t.next)&&Yt(t.error)&&Yt(t.complete)}function g6(t){return t&&t instanceof xC||p6(t)&&tR(t)}function m6(t){return Yt(t==null?void 0:t.lift)}function ss(t){return function(e){if(m6(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ha(t,e,n,r,i){return new v6(t,e,n,r,i)}var v6=function(t){Al(e,t);function e(n,r,i,o,s,a){var c=t.call(this,n)||this;return c.onFinalize=s,c.shouldUnsubscribe=a,c._next=r?function(l){try{r(l)}catch(u){n.error(u)}}:t.prototype._next,c._error=o?function(l){try{o(l)}catch(u){n.error(u)}finally{this.unsubscribe()}}:t.prototype._error,c._complete=i?function(){try{i()}catch(l){n.error(l)}finally{this.unsubscribe()}}:t.prototype._complete,c}return e.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;t.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},e}(xC),y6=qP(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ys=function(t){Al(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var r=new Zw(this,this);return r.operator=n,r},e.prototype._throwIfClosed=function(){if(this.closed)throw new y6},e.prototype.next=function(n){var r=this;qh(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=il(r.currentObservers),a=s.next();!a.done;a=s.next()){var c=a.value;c.next(n)}}catch(l){i={error:l}}finally{try{a&&!a.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},e.prototype.error=function(n){var r=this;qh(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},e.prototype.complete=function(){var n=this;qh(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,a=i.observers;return o||s?eR:(this.currentObservers=null,a.push(n),new Zp(function(){r.currentObservers=null,C0(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},e.prototype.asObservable=function(){var n=new yn;return n.source=this,n},e.create=function(n,r){return new Zw(n,r)},e}(yn),Zw=function(t){Al(e,t);function e(n,r){var i=t.call(this)||this;return i.destination=n,i.source=r,i}return e.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},e.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},e.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},e.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:eR},e}(Ys),sR=function(t){Al(e,t);function e(n){var r=t.call(this)||this;return r._value=n,r}return Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!1,configurable:!0}),e.prototype._subscribe=function(n){var r=t.prototype._subscribe.call(this,n);return!r.closed&&n.next(this._value),r},e.prototype.getValue=function(){var n=this,r=n.hasError,i=n.thrownError,o=n._value;if(r)throw i;return this._throwIfClosed(),o},e.prototype.next=function(n){t.prototype.next.call(this,this._value=n)},e}(Ys);function C6(t){return t&&Yt(t.schedule)}function I6(t){return t[t.length-1]}function aR(t){return C6(I6(t))?t.pop():void 0}var cR=function(t){return t&&typeof t.length=="number"&&typeof t!="function"};function lR(t){return Yt(t==null?void 0:t.then)}function uR(t){return Yt(t[PC])}function dR(t){return Symbol.asyncIterator&&Yt(t==null?void 0:t[Symbol.asyncIterator])}function hR(t){return new TypeError("You provided "+(t!==null&&typeof t=="object"?"an invalid object":"'"+t+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function b6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var fR=b6();function pR(t){return Yt(t==null?void 0:t[fR])}function gR(t){return S4(this,arguments,function(){var n,r,i,o;return zT(this,function(s){switch(s.label){case 0:n=t.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Dc(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Dc(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Dc(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function mR(t){return Yt(t==null?void 0:t.getReader)}function Pl(t){if(t instanceof yn)return t;if(t!=null){if(uR(t))return S6(t);if(cR(t))return w6(t);if(lR(t))return A6(t);if(dR(t))return vR(t);if(pR(t))return k6(t);if(mR(t))return E6(t)}throw hR(t)}function S6(t){return new yn(function(e){var n=t[PC]();if(Yt(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function w6(t){return new yn(function(e){for(var n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function A6(t){return new yn(function(e){t.then(function(n){e.closed||(e.next(n),e.complete())},function(n){return e.error(n)}).then(null,iR)})}function k6(t){return new yn(function(e){var n,r;try{for(var i=il(t),o=i.next();!o.done;o=i.next()){var s=o.value;if(e.next(s),e.closed)return}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}e.complete()})}function vR(t){return new yn(function(e){T6(t,e).catch(function(n){return e.error(n)})})}function E6(t){return vR(gR(t))}function T6(t,e){var n,r,i,o;return b4(this,void 0,void 0,function(){var s,a;return zT(this,function(c){switch(c.label){case 0:c.trys.push([0,5,6,11]),n=w4(t),c.label=1;case 1:return[4,n.next()];case 2:if(r=c.sent(),!!r.done)return[3,4];if(s=r.value,e.next(s),e.closed)return[2];c.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return a=c.sent(),i={error:a},[3,11];case 6:return c.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:c.sent(),c.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return e.complete(),[2]}})})}function _a(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=!1);var o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function yR(t,e){return e===void 0&&(e=0),ss(function(n,r){n.subscribe(Ha(r,function(i){return _a(r,t,function(){return r.next(i)},e)},function(){return _a(r,t,function(){return r.complete()},e)},function(i){return _a(r,t,function(){return r.error(i)},e)}))})}function CR(t,e){return e===void 0&&(e=0),ss(function(n,r){r.add(t.schedule(function(){return n.subscribe(r)},e))})}function x6(t,e){return Pl(t).pipe(CR(e),yR(e))}function P6(t,e){return Pl(t).pipe(CR(e),yR(e))}function R6(t,e){return new yn(function(n){var r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function N6(t,e){return new yn(function(n){var r;return _a(n,e,function(){r=t[fR](),_a(n,e,function(){var i,o,s;try{i=r.next(),o=i.value,s=i.done}catch(a){n.error(a);return}s?n.complete():n.next(o)},0,!0)}),function(){return Yt(r==null?void 0:r.return)&&r.return()}})}function IR(t,e){if(!t)throw new Error("Iterable cannot be null");return new yn(function(n){_a(n,e,function(){var r=t[Symbol.asyncIterator]();_a(n,e,function(){r.next().then(function(i){i.done?n.complete():n.next(i.value)})},0,!0)})})}function _6(t,e){return IR(gR(t),e)}function O6(t,e){if(t!=null){if(uR(t))return x6(t,e);if(cR(t))return R6(t,e);if(lR(t))return P6(t,e);if(dR(t))return IR(t,e);if(pR(t))return N6(t,e);if(mR(t))return _6(t,e)}throw hR(t)}function M6(t,e){return e?O6(t,e):Pl(t)}function Xn(t,e){return ss(function(n,r){var i=0;n.subscribe(Ha(r,function(o){r.next(t.call(e,o,i++))}))})}function D6(t,e,n,r,i,o,s,a){var c=[],l=0,u=0,d=!1,h=function(){d&&!c.length&&!l&&e.complete()},f=function(g){return l<r?p(g):c.push(g)},p=function(g){l++;var C=!1;Pl(n(g,u++)).subscribe(Ha(e,function(m){e.next(m)},function(){C=!0},void 0,function(){if(C)try{l--;for(var m=function(){var v=c.shift();s||p(v)};c.length&&l<r;)m();h()}catch(v){e.error(v)}}))};return t.subscribe(Ha(e,f,function(){d=!0,h()})),function(){}}function bR(t,e,n){return n===void 0&&(n=1/0),Yt(e)?bR(function(r,i){return Xn(function(o,s){return e(r,o,i,s)})(Pl(t(r,i)))},n):(typeof e=="number"&&(n=e),ss(function(r,i){return D6(r,i,t,n)}))}function L6(t){return bR(oR,t)}function B6(){return L6(1)}function S0(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return B6()(M6(t,aR(t)))}function SR(t,e){return ss(function(n,r){var i=0;n.subscribe(Ha(r,function(o){return t.call(e,o,i++)&&r.next(o)}))})}function F6(t,e,n,r,i){return function(o,s){var a=n,c=e,l=0;o.subscribe(Ha(s,function(u){var d=l++;c=a?t(c,u,d):(a=!0,u),s.next(c)},i))}}function U6(t){return ss(function(e,n){try{e.subscribe(n)}finally{n.add(t)}})}function V6(t,e){return ss(F6(t,e,arguments.length>=2,!0))}function Ai(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=aR(t);return ss(function(r,i){(n?S0(t,r,n):S0(t,r)).subscribe(i)})}function zw(t){return ss(function(e,n){Pl(t).subscribe(Ha(n,function(){return n.complete()},I0)),!n.closed&&e.subscribe(n)})}var G6=Object.defineProperty,W6=Object.defineProperties,j6=Object.getOwnPropertyDescriptors,ip=Object.getOwnPropertySymbols,wR=Object.prototype.hasOwnProperty,AR=Object.prototype.propertyIsEnumerable,Hw=(t,e,n)=>e in t?G6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w0=(t,e)=>{for(var n in e||(e={}))wR.call(e,n)&&Hw(t,n,e[n]);if(ip)for(var n of ip(e))AR.call(e,n)&&Hw(t,n,e[n]);return t},Z6=(t,e)=>W6(t,j6(e)),z6=(t,e)=>{var n={};for(var r in t)wR.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&ip)for(var r of ip(t))e.indexOf(r)<0&&AR.call(t,r)&&(n[r]=t[r]);return n},as=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())}),kR="lk";function RC(t){return typeof t>"u"?!1:H6(t)||X6(t)}function H6(t){var e;return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("track")&&typeof((e=t.publication)==null?void 0:e.track)<"u":!1}function X6(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&t.hasOwnProperty("publication")&&typeof t.publication<"u":!1}function $6(t){return t?t.hasOwnProperty("participant")&&t.hasOwnProperty("source")&&typeof t.publication>"u":!1}function ER(t){if(typeof t=="string"||typeof t=="number")return`${t}`;if($6(t))return`${t.participant.identity}_${t.source}_placeholder`;if(RC(t))return`${t.participant.identity}_${t.publication.source}_${t.publication.trackSid}`;throw new Error(`Can't generate a id for the given track reference: ${t}`)}function K6(t){return t instanceof g0}function J6(t,e){return as(this,null,function*(){const{x:n,y:r}=yield s6(t,e,{placement:"top",middleware:[r6(6),o6(),i6({padding:5})]});return{x:n,y:r}})}function Y6(t,e){return!t.contains(e.target)}var Q6=[te.ConnectionStateChanged,te.RoomMetadataChanged,te.ActiveSpeakersChanged,te.ConnectionQualityChanged,te.ParticipantConnected,te.ParticipantDisconnected,te.ParticipantPermissionsChanged,te.ParticipantMetadataChanged,te.TrackMuted,te.TrackUnmuted,te.TrackPublished,te.TrackUnpublished,te.TrackStreamStateChanged,te.TrackSubscriptionFailed,te.TrackSubscriptionPermissionChanged,te.TrackSubscriptionStatusChanged],q6=[...Q6,te.LocalTrackPublished,te.LocalTrackUnpublished],ej=[oe.ConnectionQualityChanged,oe.IsSpeakingChanged,oe.ParticipantMetadataChanged,oe.ParticipantPermissionsChanged,oe.TrackMuted,oe.TrackUnmuted,oe.TrackPublished,oe.TrackUnpublished,oe.TrackStreamStateChanged,oe.TrackSubscriptionFailed,oe.TrackSubscriptionPermissionChanged,oe.TrackSubscriptionStatusChanged];[...ej,oe.LocalTrackPublished,oe.LocalTrackUnpublished];var Ye=c6.getLogger("lk-components-js");Ye.setDefaultLevel("WARN");function tj(){return typeof navigator<"u"&&navigator.mediaDevices&&!!navigator.mediaDevices.getDisplayMedia}var nj=[],rj={showChat:!1,unreadMessages:0};function NC(t,...e){return new yn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(Ai(t))}function _C(t,e){return new yn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function ij(t){return _C(t,te.ConnectionStateChanged).pipe(Xn(([e])=>e),Ai(t.state))}function oj(t,e,n=!0){var r;const i=()=>as(this,null,function*(){try{const a=yield ep.getLocalDevices(t,n);o.next(a)}catch(a){e==null||e(a)}}),o=new Ys,s=o.pipe(U6(()=>{var a;(a=navigator==null?void 0:navigator.mediaDevices)==null||a.removeEventListener("devicechange",i)}));if(typeof window<"u"){if(!window.isSecureContext)throw new Error("Accessing media devices is available only in secure contexts (HTTPS and localhost), in some or all supporting browsers. See: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/mediaDevices");(r=navigator==null?void 0:navigator.mediaDevices)==null||r.addEventListener("devicechange",i)}return S0(ep.getLocalDevices(t,n).catch(a=>e==null?void 0:e(a)),s)}function sj(t){return _C(t,te.DataReceived)}function aj(t){return NC(t,te.AudioPlaybackStatusChanged).pipe(Xn(n=>({canPlayAudio:n.canPlaybackAudio})))}function cj(t){return NC(t,te.VideoPlaybackStatusChanged).pipe(Xn(n=>({canPlayVideo:n.canPlaybackVideo})))}function lj(t,e){return _C(t,te.ActiveDeviceChanged).pipe(SR(([n])=>n===e),Xn(([n,r])=>(Ye.debug("activeDeviceObservable | RoomEvent.ActiveDeviceChanged",{kind:n,deviceId:r}),r)),Ai(t.getActiveDevice(e)))}function Zr(t){return`${kR}-${t}`}function uj(t){const e=A0(t),n=MC(t.participant).pipe(Xn(()=>A0(t)),Ai(e));return{className:Zr(t.source===J.Source.Camera||t.source===J.Source.ScreenShare?"participant-media-video":"participant-media-audio"),trackObserver:n}}function A0(t){if(RC(t))return t.publication;{const{source:e,name:n,participant:r}=t;if(e&&n)return r.getTracks().find(i=>i.source===e&&i.trackName===n);if(n)return r.getTrackByName(n);if(e)return r.getTrack(e);throw new Error("At least one of source and name needs to be defined")}}function OC(t,...e){return new yn(r=>{const i=()=>{r.next(t)};return e.forEach(s=>{t.on(s,i)}),()=>{e.forEach(s=>{t.off(s,i)})}}).pipe(Ai(t))}function MC(t){return OC(t,oe.TrackMuted,oe.TrackUnmuted,oe.ParticipantPermissionsChanged,oe.TrackPublished,oe.TrackUnpublished,oe.LocalTrackPublished,oe.LocalTrackUnpublished,oe.MediaDevicesError,oe.TrackSubscriptionStatusChanged).pipe(Xn(n=>{const{isMicrophoneEnabled:r,isCameraEnabled:i,isScreenShareEnabled:o}=n,s=n.getTrack(J.Source.Microphone),a=n.getTrack(J.Source.Camera);return{isCameraEnabled:i,isMicrophoneEnabled:r,isScreenShareEnabled:o,cameraTrack:a,microphoneTrack:s,participant:n}}))}function dj(t){return OC(t,oe.ParticipantMetadataChanged).pipe(Xn(({name:n,identity:r,metadata:i})=>({name:n,identity:r,metadata:i})),Ai({name:t.name,identity:t.identity,metadata:t.metadata}))}function hj(t){return DC(t,oe.ConnectionQualityChanged).pipe(Xn(([n])=>n),Ai(t.connectionQuality))}function DC(t,e){return new yn(r=>{const i=(...s)=>{r.next(s)};return t.on(e,i),()=>{t.off(e,i)}})}function TR(t){var e,n,r,i;return OC(t.participant,oe.TrackMuted,oe.TrackUnmuted,oe.TrackSubscribed,oe.TrackUnsubscribed,oe.LocalTrackPublished,oe.LocalTrackUnpublished).pipe(Xn(o=>{var s,a;const c=(s=t.publication)!=null?s:o.getTrack(t.source);return(a=c==null?void 0:c.isMuted)!=null?a:!0}),Ai((i=(r=(e=t.publication)==null?void 0:e.isMuted)!=null?r:(n=t.participant.getTrack(t.source))==null?void 0:n.isMuted)!=null?i:!0))}function fj(t){return DC(t,oe.IsSpeakingChanged).pipe(Xn(([e])=>e))}function pj(t,e={}){var n;let r;const i=new yn(c=>(r=c,()=>a.unsubscribe())).pipe(Ai(Array.from(t.participants.values()))),o=(n=e.additionalRoomEvents)!=null?n:q6,s=Array.from(new Set([te.ParticipantConnected,te.ParticipantDisconnected,te.ConnectionStateChanged,...o])),a=NC(t,...s).subscribe(c=>r==null?void 0:r.next(Array.from(c.participants.values())));return t.participants.size>0&&(r==null||r.next(Array.from(t.participants.values()))),i}function gj(t){return DC(t,oe.ParticipantPermissionsChanged).pipe(Xn(()=>t.permissions),Ai(t.permissions))}function mj(t,e,n){const{localParticipant:r}=e,i=(l,u)=>{let d=!1;switch(l){case J.Source.Camera:d=u.isCameraEnabled;break;case J.Source.Microphone:d=u.isMicrophoneEnabled;break;case J.Source.ScreenShare:d=u.isScreenShareEnabled;break}return d},o=MC(r).pipe(Xn(l=>i(t,l.participant)),Ai(i(t,r))),s=new Ys,a=(l,u)=>as(this,null,function*(){try{switch(u??(u=n),s.next(!0),t){case J.Source.Camera:yield r.setCameraEnabled(l??!r.isCameraEnabled,u);break;case J.Source.Microphone:yield r.setMicrophoneEnabled(l??!r.isMicrophoneEnabled,u);break;case J.Source.ScreenShare:yield r.setScreenShareEnabled(l??!r.isScreenShareEnabled,u);break;default:break}}finally{s.next(!1)}});return{className:Zr("button"),toggle:a,enabledObserver:o,pendingObserver:s.asObservable()}}function vj(){let t=!1;const e=new Ys,n=new Ys,r=o=>{n.next(!0),t=o??!t,e.next(t),n.next(!1)};return{className:Zr("button"),toggle:r,enabledObserver:e.asObservable(),pendingObserver:n.asObservable()}}function yj(t,e,n){const r=new sR(void 0),i=e?lj(e,t):r.asObservable(),o=(a,...c)=>as(this,[a,...c],function*(l,u={}){var d,h,f;if(e){Ye.debug(`Switching active device of kind "${t}" with id ${l}.`),yield e.switchActiveDevice(t,l,u.exact);const p=(d=e.getActiveDevice(t))!=null?d:l;p!==l&&l!=="default"&&Ye.info(`We tried to select the device with id (${l}), but the browser decided to select the device with id (${p}) instead.`);let g;t==="audioinput"?g=(h=e.localParticipant.getTrack(J.Source.Microphone))==null?void 0:h.track:t==="videoinput"&&(g=(f=e.localParticipant.getTrack(J.Source.Camera))==null?void 0:f.track);const C=l==="default"&&!g||l==="default"&&(g==null?void 0:g.mediaStreamTrack.label.startsWith("Default"));r.next(C?l:p)}else if(n){yield n.setDeviceId(u.exact?{exact:l}:l);const p=yield n.getDeviceId();r.next(l==="default"&&n.mediaStreamTrack.label.startsWith("Default")?l:p)}else r.value!==l&&(Ye.warn("device switch skipped, please provide either a room or a local track to switch on. "),r.next(l))});return{className:Zr("media-device-select"),activeDeviceObservable:i,setActiveMediaDevice:o}}function Cj(t){const e=r=>{t.disconnect(r)};return{className:Zr("disconnect-button"),disconnect:e}}function Ij(t){const e=Zr("connection-quality"),n=hj(t);return{className:e,connectionQualityObserver:n}}function bj(t){let e="track-muted-indicator-camera";switch(t.source){case J.Source.Camera:e="track-muted-indicator-camera";break;case J.Source.Microphone:e="track-muted-indicator-microphone";break}const n=Zr(e),r=TR(t);return{className:n,mediaMutedObserver:r}}function Sj(t){return{className:"lk-participant-name",infoObserver:dj(t)}}function wj(){return{className:Zr("participant-tile")}}var Aj={CHAT:"lk-chat-topic"};function xR(t,e,n){return as(this,arguments,function*(r,i,o,s={}){const{kind:a,destination:c}=s;yield r.publishData(i,a??Ht.RELIABLE,{destination:c,topic:o})})}function kj(t,e,n){const r=sj(t).pipe(SR(([,,,a])=>e===void 0||a===e),Xn(([a,c,,l])=>({payload:a,topic:l,from:c})));let i;const o=new yn(a=>{i=a});return{messageObservable:r,isSendingObservable:o,send:(a,...c)=>as(this,[a,...c],function*(l,u={}){i.next(!0);try{yield xR(t.localParticipant,l,e,u)}finally{i.next(!1)}})}}var Ej=new TextEncoder,Tj=new TextDecoder,fh=new Map,xj=t=>Ej.encode(JSON.stringify({message:t.message,timestamp:t.timestamp})),Pj=t=>JSON.parse(Tj.decode(t));function Rj(t,e){var n,r;const i=new Ys,{messageDecoder:o,messageEncoder:s,channelTopic:a}=e??{},c=a??Aj.CHAT;let l=!1;fh.has(t)||(l=!0);const u=(n=fh.get(t))!=null?n:new Map,d=(r=u.get(c))!=null?r:new Ys;if(u.set(c,d),fh.set(t,u),l){const{messageObservable:v}=kj(t,c);v.pipe(zw(i)).subscribe(d)}const h=o??Pj,f=d.pipe(Xn(v=>{const b=h(v.payload);return Z6(w0({},b),{from:v.from})}),V6((v,b)=>[...v,b],[]),zw(i)),p=new sR(!1),g=s??xj,C=v=>as(this,null,function*(){const b=Date.now(),E=g({message:v,timestamp:b});p.next(!0);try{yield xR(t.localParticipant,E,c,{kind:Ht.RELIABLE}),d.next({payload:E,topic:c,from:t.localParticipant})}finally{p.next(!1)}});function m(){i.next(),i.complete(),fh.clear()}return t.once(te.Disconnected,m),{messageObservable:f,isSendingObservable:p,send:C}}function Nj(){const t=n=>as(this,null,function*(){Ye.info("Start Audio for room: ",n),yield n.startAudio()});return{className:Zr("start-audio-button"),roomAudioPlaybackAllowedObservable:aj,handleStartAudioPlayback:t}}function _j(){const t=n=>as(this,null,function*(){Ye.info("Start Video for room: ",n),yield n.startVideo()});return{className:Zr("start-audio-button"),roomVideoPlaybackAllowedObservable:cj,handleStartVideoPlayback:t}}function Oj(){return{className:[Zr("button"),Zr("chat-toggle")].join(" ")}}function Mj(){return{className:"lk-room-container"}}function Dj(t,e){if(typeof localStorage>"u"){Ye.error("Local storage is not available.");return}try{localStorage.setItem(t,JSON.stringify(e))}catch(n){Ye.error(`Error setting item to local storage: ${n}`)}}function Lj(t){if(typeof localStorage>"u"){Ye.error("Local storage is not available.");return}try{const e=localStorage.getItem(t);if(!e){Ye.warn(`Item with key ${t} does not exist in local storage.`);return}return JSON.parse(e)}catch(e){Ye.error(`Error getting item from local storage: ${e}`);return}}function Bj(t){return{load:()=>Lj(t),save:e=>Dj(t,e)}}var Fj=`${kR}-user-choices`,ca={videoEnabled:!0,audioEnabled:!0,videoDeviceId:"",audioDeviceId:"",username:"",e2ee:!1,sharedPassphrase:""},{load:Uj,save:Vj}=Bj(Fj);function Gj(t,e=!1){if(e===!0)return;const n=t,r=z6(n,["e2ee","sharedPassphrase"]);Vj(r)}function Wj(t,e=!1){var n,r,i,o,s,a,c;const l={videoEnabled:(n=t==null?void 0:t.videoEnabled)!=null?n:ca.videoEnabled,audioEnabled:(r=t==null?void 0:t.audioEnabled)!=null?r:ca.audioEnabled,videoDeviceId:(i=t==null?void 0:t.videoDeviceId)!=null?i:ca.videoDeviceId,audioDeviceId:(o=t==null?void 0:t.audioDeviceId)!=null?o:ca.audioDeviceId,username:(s=t==null?void 0:t.username)!=null?s:ca.username,e2ee:(a=t==null?void 0:t.e2ee)!=null?a:ca.e2ee,sharedPassphrase:(c=t==null?void 0:t.sharedPassphrase)!=null?c:ca.sharedPassphrase};if(e)return l;{const u=Uj();return w0(w0({},l),u??{})}}function PR(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=PR(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function jj(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=PR(t))&&(r&&(r+=" "),r+=e);return r}var Zj=Object.defineProperty,zj=Object.defineProperties,Hj=Object.getOwnPropertyDescriptors,op=Object.getOwnPropertySymbols,RR=Object.prototype.hasOwnProperty,NR=Object.prototype.propertyIsEnumerable,Xw=(t,e,n)=>e in t?Zj(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ke=(t,e)=>{for(var n in e||(e={}))RR.call(e,n)&&Xw(t,n,e[n]);if(op)for(var n of op(e))NR.call(e,n)&&Xw(t,n,e[n]);return t},xn=(t,e)=>zj(t,Hj(e)),Cn=(t,e)=>{var n={};for(var r in t)RR.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&op)for(var r of op(t))e.indexOf(r)<0&&NR.call(t,r)&&(n[r]=t[r]);return n},_R=(t,e,n)=>new Promise((r,i)=>{var o=c=>{try{a(n.next(c))}catch(l){i(l)}},s=c=>{try{a(n.throw(c))}catch(l){i(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(o,s);a((n=n.apply(t,e)).next())});function xr(t,e){const[n,r]=S.useState(e);return S.useEffect(()=>{if(typeof window>"u"||!t)return;const i=t.subscribe(r);return()=>i.unsubscribe()},[t]),n}function Xj(t){const e=o=>typeof window<"u"?window.matchMedia(o).matches:!1,[n,r]=S.useState(e(t));function i(){r(e(t))}return S.useEffect(()=>{const o=window.matchMedia(t);return i(),o.addListener?o.addListener(i):o.addEventListener("change",i),()=>{o.removeListener?o.removeListener(i):o.removeEventListener("change",i)}},[t]),n}function $j(t,e){if(e.msg==="show_chat")return xn(ke({},t),{showChat:!0,unreadMessages:0});if(e.msg==="hide_chat")return xn(ke({},t),{showChat:!1});if(e.msg==="toggle_chat"){const n=xn(ke({},t),{showChat:!t.showChat});return n.showChat===!0&&(n.unreadMessages=0),n}else return e.msg==="unread_msg"?xn(ke({},t),{unreadMessages:e.count}):ke({},t)}function Kj(t,e){return e.msg==="set_pin"?[e.trackReference]:e.msg==="clear_pin"?[]:ke({},t)}var LC=S.createContext(void 0);function Jj(){const t=S.useContext(LC);if(!t)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return t}function Yj(t){const[e,n]=S.useReducer(Kj,nj),[r,i]=S.useReducer($j,rj);return t??{pin:{dispatch:n,state:e},widget:{dispatch:i,state:r}}}function OR(){return S.useContext(LC)}var Qj=S.createContext(void 0);function Rd(){return S.useContext(Qj)}var BC=S.createContext(void 0);function zp(){return S.useContext(BC)}function qa(t){var e;const n=zp(),r=Rd(),i=(e=t??n)!=null?e:r==null?void 0:r.participant;if(!i)throw new Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return i}var FC=S.createContext(void 0);function Hp(){const t=S.useContext(FC);if(!t)throw Error("tried to access room context outside of livekit room component");return t}function Xp(){return S.useContext(FC)}function Nd(t){const e=Xp(),n=t??e;if(!n)throw new Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var qj=S.createContext(void 0);function eZ(...t){return(...e)=>{for(const n of t)typeof n=="function"&&n(...e)}}function aa(...t){const e=ke({},t[0]);for(let n=1;n<t.length;n++){const r=t[n];for(const i in r){const o=e[i],s=r[i];typeof o=="function"&&typeof s=="function"&&i[0]==="o"&&i[1]==="n"&&i.charCodeAt(2)>=65&&i.charCodeAt(2)<=90?e[i]=eZ(o,s):(i==="className"||i==="UNSAFE_className")&&typeof o=="string"&&typeof s=="string"?e[i]=jj(o,s):e[i]=s!==void 0?s:o}}return e}function tZ(t={}){const e=qa(t.participant),{className:n,connectionQualityObserver:r}=S.useMemo(()=>Ij(e),[e]),i=xr(r,Br.Unknown);return{className:n,quality:i}}function nZ(t){const e=Nd(t),n=S.useMemo(()=>ij(e),[e]);return xr(n,e.state)}function rZ(t){const e=Hp(),n=nZ(e);return{buttonProps:S.useMemo(()=>{const{className:i,disconnect:o}=Cj(e);return aa(t,{className:i,onClick:()=>{var a;return o((a=t.stopTracks)!=null?a:!0)},disabled:n===He.Disconnected})},[e,t,n])}}function iZ(t){if(t.publication instanceof ad){const e=t.publication.track;if(e){const{facingMode:n}=A9(e);return n}}return"undefined"}function $w(t,e={}){var n,r;const i=typeof t=="string"?e.participant:t.participant,o=qa(i),s=typeof t=="string"?{participant:o,source:t}:t,[a,c]=S.useState(!!((n=s.publication)!=null&&n.isMuted||(r=o.getTrack(s.source))!=null&&r.isMuted));return S.useEffect(()=>{const l=TR(s).subscribe(c);return()=>l.unsubscribe()},[ER(s)]),a}function oZ(t){const e=qa(t),n=S.useMemo(()=>fj(e),[e]);return xr(n,e.isSpeaking)}var sZ={connect:!0,audio:!1,video:!1};function aZ(t){const e=ke(ke({},sZ),t),{token:n,serverUrl:r,options:i,room:o,connectOptions:s,connect:a,audio:c,video:l,screen:u,onConnected:d,onDisconnected:h,onError:f,onMediaDeviceFailure:p,onEncryptionError:g,simulateParticipants:C}=e,m=Cn(e,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&o&&Ye.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");const[v,b]=S.useState();S.useEffect(()=>{b(o??new ep(i))},[o]);const E=S.useMemo(()=>{const{className:w}=Mj();return aa(m,{className:w})},[m]);return S.useEffect(()=>{if(!v)return;const w=()=>{const T=v.localParticipant;Ye.debug("trying to publish local tracks"),Promise.all([T.setMicrophoneEnabled(!!c,typeof c!="boolean"?c:void 0),T.setCameraEnabled(!!l,typeof l!="boolean"?l:void 0),T.setScreenShareEnabled(!!u,typeof u!="boolean"?u:void 0)]).catch(_=>{Ye.warn(_),f==null||f(_)})},A=T=>{const _=od.getFailure(T);p==null||p(_)},x=T=>{g==null||g(T)};return v.on(te.SignalConnected,w).on(te.MediaDevicesError,A).on(te.EncryptionError,x),()=>{v.off(te.SignalConnected,w).off(te.MediaDevicesError,A).off(te.EncryptionError,x)}},[v,c,l,u,f,g,p]),S.useEffect(()=>{if(v){if(C){v.simulateParticipants({participants:{count:C},publish:{audio:!0,useRealTracks:!0}});return}if(!n){Ye.debug("no token yet");return}if(!r){Ye.warn("no livekit url provided"),f==null||f(Error("no livekit url provided"));return}a?(Ye.debug("connecting"),v.connect(r,n,s).catch(w=>{Ye.warn(w),f==null||f(w)})):(Ye.debug("disconnecting because connect is false"),v.disconnect())}},[a,n,JSON.stringify(s),v,f,r,C]),S.useEffect(()=>{if(!v)return;const w=A=>{switch(A){case He.Disconnected:h&&h();break;case He.Connected:d&&d();break}};return v.on(te.ConnectionStateChanged,w),()=>{v.off(te.ConnectionStateChanged,w)}},[n,d,h,v]),S.useEffect(()=>{if(v)return()=>{Ye.info("disconnecting on onmount"),v.disconnect()}},[v]),{room:v,htmlProps:E}}function cZ(t={}){const e=Nd(t.room),[n,r]=S.useState(e.localParticipant),[i,o]=S.useState(n.isMicrophoneEnabled),[s,a]=S.useState(n.isMicrophoneEnabled),[c,l]=S.useState(n.lastMicrophoneError),[u,d]=S.useState(n.lastCameraError),[h,f]=S.useState(n.isMicrophoneEnabled),[p,g]=S.useState(void 0),[C,m]=S.useState(void 0),v=b=>{a(b.isCameraEnabled),o(b.isMicrophoneEnabled),f(b.isScreenShareEnabled),m(b.cameraTrack),g(b.microphoneTrack),l(b.participant.lastMicrophoneError),d(b.participant.lastCameraError),r(b.participant)};return S.useEffect(()=>{const b=MC(n).subscribe(v);return()=>b.unsubscribe()},[n]),{isMicrophoneEnabled:i,isScreenShareEnabled:h,isCameraEnabled:s,microphoneTrack:p,cameraTrack:C,lastMicrophoneError:c,lastCameraError:u,localParticipant:n}}function lZ(){const t=Hp(),e=S.useMemo(()=>gj(t.localParticipant),[t]);return xr(e,t.localParticipant.permissions)}function uZ({kind:t,room:e,track:n,requestPermissions:r,onError:i}){const o=Xp(),s=S.useMemo(()=>oj(t,i,r),[t,r,i]),a=xr(s,[]),[c,l]=S.useState(""),{className:u,activeDeviceObservable:d,setActiveMediaDevice:h}=S.useMemo(()=>yj(t,e??o,n),[t,e,o,n]);return S.useEffect(()=>{const f=d.subscribe(p=>{Ye.info("setCurrentDeviceId",p),p&&l(p)});return()=>{f==null||f.unsubscribe()}},[d]),{devices:a,className:u,activeDeviceId:c,setActiveMediaDevice:h}}function dZ(t){return t!==void 0}function Rl(...t){return aa(...t.filter(dZ))}function MR(t,e,n){return S.Children.map(t,r=>S.isValidElement(r)&&S.Children.only(t)?S.cloneElement(r,xn(ke({},e),{key:n})):r)}function DR(t,e={}){var n;const[r,i]=S.useState(A0(t)),[o,s]=S.useState(r==null?void 0:r.isMuted),[a,c]=S.useState(r==null?void 0:r.isSubscribed),[l,u]=S.useState(r==null?void 0:r.track),[d,h]=S.useState("landscape"),f=S.useRef(),{className:p,trackObserver:g}=S.useMemo(()=>uj(t),[(n=t.participant.sid)!=null?n:t.participant.identity,t.source,RC(t)&&t.publication.trackSid]);return S.useEffect(()=>{const C=g.subscribe(m=>{Ye.debug("update track",m),i(m),s(m==null?void 0:m.isMuted),c(m==null?void 0:m.isSubscribed),u(m==null?void 0:m.track)});return()=>C==null?void 0:C.unsubscribe()},[g]),S.useEffect(()=>{var C,m;return l&&(f.current&&l.detach(f.current),(C=e.element)!=null&&C.current&&!(K6(t.participant)&&(l==null?void 0:l.kind)==="audio")&&l.attach(e.element.current)),f.current=(m=e.element)==null?void 0:m.current,()=>{f.current&&(l==null||l.detach(f.current))}},[l,e.element]),S.useEffect(()=>{var C,m;if(typeof((C=r==null?void 0:r.dimensions)==null?void 0:C.width)=="number"&&typeof((m=r==null?void 0:r.dimensions)==null?void 0:m.height)=="number"){const v=r.dimensions.width>r.dimensions.height?"landscape":"portrait";h(v)}},[r]),{publication:r,isMuted:o,isSubscribed:a,track:l,elementProps:Rl(e.props,ke({className:p,"data-lk-local-participant":t.participant.isLocal,"data-lk-source":r==null?void 0:r.source},(r==null?void 0:r.kind)==="video"&&{"data-lk-orientation":d}))}}function hZ({trackRef:t,participant:e,source:n,publication:r,onParticipantClick:i,disableSpeakingIndicator:o,htmlProps:s}){const a=Rd(),c=qa(e),l=S.useMemo(()=>{var g,C,m,v,b,E;const w=(C=(g=t==null?void 0:t.source)!=null?g:a==null?void 0:a.source)!=null?C:n;if(w===void 0)throw new Error("Missing track `source`, provided it via `trackRef`, `source` property or via `TrackRefContext`.");return{participant:(v=(m=t==null?void 0:t.participant)!=null?m:a==null?void 0:a.participant)!=null?v:c,publication:(E=(b=t==null?void 0:t.publication)!=null?b:a==null?void 0:a.publication)!=null?E:r,source:w}},[t==null?void 0:t.participant,t==null?void 0:t.source,t==null?void 0:t.publication,a==null?void 0:a.participant,a==null?void 0:a.source,a==null?void 0:a.publication,c,n,r]),u=S.useMemo(()=>{const{className:g}=wj();return aa(s,{className:g,onClick:C=>{var m,v;if((m=s.onClick)==null||m.call(s,C),typeof i=="function"){const b=(v=l.publication)!=null?v:l.participant.getTrack(l.source);i({participant:l.participant,track:b})}}})},[s,i,l.publication,l.source,l.participant]),d=$w(J.Source.Camera,{participant:l.participant}),h=$w(J.Source.Microphone,{participant:l.participant}),f=oZ(l.participant),p=iZ(l);return{elementProps:ke({"data-lk-audio-muted":h,"data-lk-video-muted":d,"data-lk-speaking":o===!0?!1:f,"data-lk-local-participant":l.participant.isLocal,"data-lk-source":l.source,"data-lk-facing-mode":p},u)}}function fZ(t={}){const e=Nd(t.room),[n,r]=S.useState([]);return S.useEffect(()=>{const i=pj(e,{additionalRoomEvents:t.updateOnlyOn}).subscribe(r);return()=>i.unsubscribe()},[e,JSON.stringify(t.updateOnlyOn)]),n}function pZ(t={}){const e=fZ(t),{localParticipant:n}=cZ(t);return[n,...e]}function gZ({room:t,props:e}){const n=Nd(t),{className:r,roomAudioPlaybackAllowedObservable:i,handleStartAudioPlayback:o}=S.useMemo(()=>Nj(),[]),s=S.useMemo(()=>i(n),[n,i]),{canPlayAudio:a}=xr(s,{canPlayAudio:n.canPlaybackAudio});return{mergedProps:S.useMemo(()=>aa(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayAudio:a}}function mZ({room:t,props:e}){const n=Nd(t),{className:r,roomVideoPlaybackAllowedObservable:i,handleStartVideoPlayback:o}=S.useMemo(()=>_j(),[]),s=S.useMemo(()=>i(n),[n,i]),{canPlayVideo:a}=xr(s,{canPlayVideo:n.canPlaybackVideo});return{mergedProps:S.useMemo(()=>aa(e,{className:r,onClick:()=>{o(n)},style:{display:a?"none":"block"}}),[e,r,a,o,n]),canPlayVideo:a}}function vZ({props:t}){const{dispatch:e,state:n}=Jj().widget,{className:r}=S.useMemo(()=>Oj(),[]);return{mergedProps:S.useMemo(()=>aa(t,{className:r,onClick:()=>{e&&e({msg:"toggle_chat"})},"aria-pressed":n!=null&&n.showChat?"true":"false","data-lk-unread-msgs":n?n.unreadMessages<10?n.unreadMessages.toFixed(0):"9+":"0"}),[t,r,e,n])}}function yZ(t,e={}){var n,r,i,o;let s=Rd();const a=(r=(n=zp())!=null?n:e.participant)!=null?r:s==null?void 0:s.participant;if(typeof t=="string"){if(!a)throw Error("Participant missing, either provide it via context or pass it in directly");s={participant:a,source:t}}else if(t)s=t;else throw Error("No track reference found, either provide it via context or pass it in directly");const{className:c,mediaMutedObserver:l}=S.useMemo(()=>bj(s),[ER(s)]);return{isMuted:xr(l,!!((i=s.publication)!=null&&i.isMuted||(o=s.participant.getTrack(s.source))!=null&&o.isMuted)),className:c}}function CZ(t){var e=t,{source:n,onChange:r,initialState:i,captureOptions:o}=e,s=Cn(e,["source","onChange","initialState","captureOptions"]),a;const c=Xp(),l=(a=c==null?void 0:c.localParticipant)==null?void 0:a.getTrack(n),{toggle:u,className:d,pendingObserver:h,enabledObserver:f}=S.useMemo(()=>c?mj(n,c,o):vj(),[c,n,JSON.stringify(o)]),p=xr(h,!1),g=xr(f,i??!!(l!=null&&l.isEnabled));S.useEffect(()=>{r==null||r(g)},[g,r]),S.useEffect(()=>{i!==void 0&&(Ye.debug("forcing initial toggle state",n,i),u(i))},[]);const C=S.useMemo(()=>aa(s,{className:d}),[s,d]),m=S.useCallback(v=>{var b;u(),(b=s.onClick)==null||b.call(s,v)},[s,u]);return{toggle:u,enabled:g,pending:p,track:l,buttonProps:xn(ke({},C),{"aria-pressed":g,"data-lk-source":n,"data-lk-enabled":g,disabled:p,onClick:m})}}function IZ(t,e={}){return DR(t,e)}function bZ(t){const e=Hp(),[n,r]=S.useState(),i=xr(n==null?void 0:n.isSendingObservable,!1),o=xr(n==null?void 0:n.messageObservable,[]);return S.useEffect(()=>{const s=Rj(e,t);r(s)},[e,t]),{send:n==null?void 0:n.send,chatMessages:o,isSending:i}}function SZ(t={}){var e;const[n,r]=S.useState(Wj(t.defaults,(e=t.preventLoad)!=null?e:!1)),i=S.useCallback(l=>{r(u=>xn(ke({},u),{audioEnabled:l}))},[]),o=S.useCallback(l=>{r(u=>xn(ke({},u),{videoEnabled:l}))},[]),s=S.useCallback(l=>{r(u=>xn(ke({},u),{audioDeviceId:l}))},[]),a=S.useCallback(l=>{r(u=>xn(ke({},u),{videoDeviceId:l}))},[]),c=S.useCallback(l=>{r(u=>xn(ke({},u),{username:l}))},[]);return S.useEffect(()=>{var l;Gj(n,(l=t.preventSave)!=null?l:!1)},[n,t.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:o,saveAudioInputDeviceId:s,saveVideoInputDeviceId:a,saveUsername:c}}function wZ(t){const{mergedProps:e}=vZ({props:t});return S.createElement("button",ke({},e),t.children)}function AZ(t){const{buttonProps:e}=rZ(t);return S.createElement("button",ke({},e),t.children)}var kZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),S.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),EZ=kZ,TZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),xZ=TZ,PZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:18,fill:"none"},t),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h10.5A2.75 2.75 0 0 1 16 2.75v13.594a.75.75 0 0 1-1.234.572l-3.691-3.12a1.25 1.25 0 0 0-.807-.296H2.75A2.75 2.75 0 0 1 0 10.75v-8ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v8c0 .69.56 1.25 1.25 1.25h7.518c.65 0 1.279.23 1.775.65l2.457 2.077V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M3 4.5a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 0 1h-9a.5.5 0 0 1-.5-.5Zm0 2a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5Z",clipRule:"evenodd"})),RZ=PZ,NZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},t),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M2 2.75A2.75 2.75 0 0 1 4.75 0h6.5A2.75 2.75 0 0 1 14 2.75v10.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h6.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25h-6.5c-.69 0-1.25.56-1.25 1.25v.5a.75.75 0 0 1-1.5 0v-.5Z",clipRule:"evenodd"}),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M8.78 7.47a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h4.69l-.97-.97a.75.75 0 0 1 1.06-1.06l2.25 2.25Z",clipRule:"evenodd"})),_Z=NZ,OZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),S.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),MZ=OZ,DZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),S.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),LZ=DZ,BZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),FZ=BZ,UZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("g",{opacity:.25},S.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),VZ=UZ,GZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},t),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("g",{opacity:.25},S.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),S.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),WZ=GZ,jZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},t),S.createElement("g",{opacity:.25},S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),S.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),ZZ=jZ,zZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),S.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),HZ=zZ,XZ=t=>S.createElement("svg",ke({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},t),S.createElement("g",{fill:"currentColor"},S.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),S.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),$Z=XZ;function om(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,onDeviceListChange:o,onDeviceSelectError:s,exactMatch:a,track:c,requestPermissions:l,onError:u}=e,d=Cn(e,["kind","initialSelection","onActiveDeviceChange","onDeviceListChange","onDeviceSelectError","exactMatch","track","requestPermissions","onError"]);const h=Xp(),f=S.useCallback(w=>{h&&h.emit(te.MediaDevicesError,w),u==null||u(w)},[h,u]),{devices:p,activeDeviceId:g,setActiveMediaDevice:C,className:m}=uZ({kind:n,room:h,track:c,requestPermissions:l,onError:f});S.useEffect(()=>{r!==void 0&&C(r)},[C]),S.useEffect(()=>{typeof o=="function"&&o(p)},[o,p]),S.useEffect(()=>{g&&g!==""&&(i==null||i(g))},[g]);const v=w=>_R(this,null,function*(){try{yield C(w,{exact:a})}catch(A){if(A instanceof Error)s==null||s(A);else throw A}}),b=S.useMemo(()=>Rl(d,{className:m},{className:"lk-list"}),[m,d]);function E(w,A,x){return w===A||x===0&&A==="default"}return S.createElement("ul",ke({},b),p.map((w,A)=>S.createElement("li",{key:w.deviceId,id:w.deviceId,"data-lk-active":E(w.deviceId,g,A),"aria-selected":E(w.deviceId,g,A),role:"option"},S.createElement("button",{className:"lk-button",onClick:()=>v(w.deviceId)},w.label))))}function LR(t,e){switch(t){case J.Source.Microphone:return e?S.createElement(LZ,null):S.createElement(MZ,null);case J.Source.Camera:return e?S.createElement(xZ,null):S.createElement(EZ,null);case J.Source.ScreenShare:return e?S.createElement($Z,null):S.createElement(HZ,null);default:return}}function KZ(t){switch(t){case Br.Excellent:return S.createElement(FZ,null);case Br.Good:return S.createElement(VZ,null);case Br.Poor:return S.createElement(WZ,null);default:return S.createElement(ZZ,null)}}function sm(t){var e=t,{showIcon:n}=e,r=Cn(e,["showIcon"]);const{buttonProps:i,enabled:o}=CZ(r);return S.createElement("button",ke({},i),(n??!0)&&LR(r.source,o),r.children)}function JZ(t){var e;const{className:n,quality:r}=tZ(t),i=S.useMemo(()=>xn(ke({},Rl(t,{className:n})),{"data-lk-quality":r}),[r,t,n]);return S.createElement("div",ke({},i),(e=t.children)!=null?e:KZ(r))}function YZ(t){var e=t,{participant:n}=e,r=Cn(e,["participant"]);const i=qa(n),{className:o,infoObserver:s}=S.useMemo(()=>Sj(i),[i]),{identity:a,name:c}=xr(s,{name:i.name,identity:i.identity,metadata:i.metadata}),l=S.useMemo(()=>Rl(r,{className:o,"data-lk-participant-name":c}),[r,o,c]);return S.createElement("span",ke({},l),c!==""?c:a,r.children)}function QZ(t){var e=t,{source:n,participant:r,trackRef:i,show:o="always"}=e,s=Cn(e,["source","participant","trackRef","show"]),a,c;const{className:l,isMuted:u}=yZ(i??n,{participant:r}),d=o==="always"||o==="muted"&&u||o==="unmuted"&&!u,h=S.useMemo(()=>Rl(s,{className:l}),[l,s]);return d?S.createElement("div",xn(ke({},h),{"data-lk-muted":u}),(c=s.children)!=null?c:LR((a=i==null?void 0:i.source)!=null?a:n,!u)):null}function qZ(t){var e=t,{trackRef:n,onSubscriptionStatusChanged:r,volume:i,source:o,name:s,publication:a,participant:c}=e,l=Cn(e,["trackRef","onSubscriptionStatusChanged","volume","source","name","publication","participant"]),u,d,h,f,p,g,C,m,v,b;const E=Rd(),w=(f=(h=(u=n==null?void 0:n.publication)==null?void 0:u.trackName)!=null?h:(d=E==null?void 0:E.publication)==null?void 0:d.trackName)!=null?f:s,A=(g=(p=n==null?void 0:n.source)!=null?p:E==null?void 0:E.source)!=null?g:o,x=(m=(C=n==null?void 0:n.publication)!=null?C:E==null?void 0:E.publication)!=null?m:a,T=(b=(v=n==null?void 0:n.participant)!=null?v:E==null?void 0:E.participant)!=null?b:c;if(A===void 0)throw new Error("The AudioTrack component expects a trackRef or source property.");const _=S.useRef(null),O=qa(T),{elementProps:D,isSubscribed:U,track:j,publication:Z}=DR({source:A,name:w,participant:O,publication:x},{element:_,props:l});return S.useEffect(()=>{r==null||r(!!U)},[U,r]),S.useEffect(()=>{j===void 0||i===void 0||(j instanceof Na?j.setVolume(i):Ye.warn("Volume can only be set on remote audio tracks."))},[i,j]),S.useEffect(()=>{Z===void 0||l.muted===void 0||(Z instanceof kC?Z.setEnabled(!l.muted):Ye.warn("Can only call setEnabled on remote track publications."))},[l.muted,Z,j]),S.createElement("audio",ke({ref:_},D))}function e8(t){const e=!!zp();return t.participant&&!e?S.createElement(BC.Provider,{value:t.participant},t.children):S.createElement(S.Fragment,null,t.children)}function t8({value:t,onPinChange:e,onWidgetChange:n,children:r}){const i=Yj(t);return S.useEffect(()=>{Ye.debug("PinState Updated",{state:i.pin.state}),e&&i.pin.state&&e(i.pin.state)},[i.pin.state,e]),S.useEffect(()=>{Ye.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),S.createElement(LC.Provider,{value:i},r)}function n8(t){const{room:e,htmlProps:n}=aZ(t);return S.createElement("div",ke({},n),e&&S.createElement(FC.Provider,{value:e},S.createElement(qj.Provider,{value:t.featureFlags},t.children)))}function r8(t){var e=t,{participant:n,trackRef:r}=e,i=Cn(e,["participant","trackRef"]),o,s;const[a,c]=S.useState([]),l=200,u=90,d=6,h=4,f=50,p=7,g=(o=zp())!=null?o:n;let C=(s=Rd())!=null?s:r;if(!C){if(!g)throw Error("Participant missing, provide it directly or within a context");C={participant:g,source:J.Source.Microphone}}const{track:m}=IZ(C);return S.useEffect(()=>{if(!m||!(m instanceof Yn||m instanceof Na))return;const{analyser:v,cleanup:b}=NW(m,{smoothingTimeConstant:.8,fftSize:64}),E=new Uint8Array(v.frequencyBinCount),w=()=>{v.getByteFrequencyData(E);const x=new Array(p).fill(0);E.slice(1);const T=6;for(let _=0;_<p/2;_+=1){const O=Math.floor(p/2-_);for(let D=0;D<T;D+=1)x[O]+=Math.pow(E[_*T+D]/255,2);x[O]/=T}for(let _=0;_<p/2;_+=1){const O=Math.floor(p/2+_);if(x[O]===0){for(let D=0;D<T;D+=1)x[O]+=Math.pow(E[_*T+D]/255,2);x[O]/=T}}return x.map(_=>_*f)},A=setInterval(()=>{const x=w();c(x)},100);return()=>{clearInterval(A),b()}},[m]),S.createElement("svg",xn(ke({width:"100%",height:"100%",viewBox:`0 0 ${l} ${u}`},i),{className:"lk-audio-visualizer"}),S.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),S.createElement("g",{style:{transform:`translate(${(l-p*(d+h))/2}px, 0)`}},a.map((v,b)=>S.createElement("rect",{key:b,x:b*(d+h),y:u/2-v/2,width:d,height:v}))))}function i8(t){var e=t,{participants:n}=e,r=Cn(e,["participants"]);return S.createElement(S.Fragment,null,n.map(i=>S.createElement(BC.Provider,{value:i,key:i.identity},MR(r.children))))}function o8(t){var e=t,{participant:n,children:r,source:i,publication:o,disableSpeakingIndicator:s,onParticipantClick:a}=e,c=Cn(e,["participant","children","source","publication","disableSpeakingIndicator","onParticipantClick"]);const l=qa(n),{elementProps:u}=hZ({participant:l,htmlProps:c,disableSpeakingIndicator:s,source:J.Source.Microphone,publication:o,onParticipantClick:a});return S.createElement("div",ke({style:{position:"relative"}},u),S.createElement(e8,{participant:l},r??S.createElement(S.Fragment,null,S.createElement(qZ,{source:i??J.Source.Microphone}),S.createElement(r8,null),S.createElement("div",{className:"lk-participant-metadata"},S.createElement("div",{className:"lk-participant-metadata-item"},S.createElement(QZ,{source:J.Source.Microphone}),S.createElement(YZ,null)),S.createElement(JZ,{className:"lk-participant-metadata-item"})))))}function s8(t){var e=t,{entry:n,hideName:r=!1,hideTimestamp:i=!1,messageFormatter:o}=e,s=Cn(e,["entry","hideName","hideTimestamp","messageFormatter"]),a,c,l,u;const d=S.useMemo(()=>o?o(n.message):n.message,[n.message,o]),h=new Date(n.timestamp),f=navigator?navigator.language:"en-US";return S.createElement("li",ke({className:"lk-chat-entry",title:h.toLocaleTimeString(f,{timeStyle:"full"}),"data-lk-message-origin":(a=n.from)!=null&&a.isLocal?"local":"remote"},s),(!i||!r)&&S.createElement("span",{className:"lk-meta-data"},!r&&S.createElement("strong",{className:"lk-participant-name"},(u=(c=n.from)==null?void 0:c.name)!=null?u:(l=n.from)==null?void 0:l.identity),!i&&S.createElement("span",{className:"lk-timestamp"},h.toLocaleTimeString(f,{timeStyle:"short"}))),S.createElement("span",{className:"lk-message-body"},d))}function a8(t){var e=t,{messageFormatter:n,messageDecoder:r,messageEncoder:i,channelTopic:o}=e,s=Cn(e,["messageFormatter","messageDecoder","messageEncoder","channelTopic"]);const a=S.useRef(null),c=S.useRef(null),l=S.useMemo(()=>({messageDecoder:r,messageEncoder:i,channelTopic:o}),[r,i,o]),{send:u,chatMessages:d,isSending:h}=bZ(l),f=OR(),p=S.useRef(0);function g(C){return _R(this,null,function*(){C.preventDefault(),a.current&&a.current.value.trim()!==""&&u&&(yield u(a.current.value),a.current.value="",a.current.focus())})}return S.useEffect(()=>{var C;c&&((C=c.current)==null||C.scrollTo({top:c.current.scrollHeight}))},[c,d]),S.useEffect(()=>{var C,m,v,b,E;if(!f||d.length===0)return;if((C=f.widget.state)!=null&&C.showChat&&d.length>0&&p.current!==((m=d[d.length-1])==null?void 0:m.timestamp)){p.current=(v=d[d.length-1])==null?void 0:v.timestamp;return}const w=d.filter(x=>!p.current||x.timestamp>p.current).length,{widget:A}=f;w>0&&((b=A.state)==null?void 0:b.unreadMessages)!==w&&((E=A.dispatch)==null||E.call(A,{msg:"unread_msg",count:w}))},[d,f==null?void 0:f.widget]),S.createElement("div",xn(ke({},s),{className:"lk-chat"}),S.createElement("ul",{className:"lk-list lk-chat-messages",ref:c},s.children?d.map((C,m)=>MR(s.children,{entry:C,key:m,messageFormatter:n})):d.map((C,m,v)=>{const b=m>=1&&v[m-1].from===C.from,E=m>=1&&C.timestamp-v[m-1].timestamp<6e4;return S.createElement(s8,{key:m,hideName:b,hideTimestamp:b===!1?!1:E,entry:C,messageFormatter:n})})),S.createElement("form",{className:"lk-chat-form",onSubmit:g},S.createElement("input",{className:"lk-form-control lk-chat-form-input",disabled:h,ref:a,type:"text",placeholder:"Enter a message..."}),S.createElement("button",{type:"submit",className:"lk-button lk-chat-form-button",disabled:h},"Send")))}function Kw(t){var e=t,{kind:n,initialSelection:r,onActiveDeviceChange:i,tracks:o,requestPermissions:s=!1}=e,a=Cn(e,["kind","initialSelection","onActiveDeviceChange","tracks","requestPermissions"]);const[c,l]=S.useState(!1),[u,d]=S.useState([]),[h,f]=S.useState(!0),p=(v,b)=>{Ye.debug("handle device change"),l(!1),i==null||i(v,b)},g=S.useRef(null),C=S.useRef(null);S.useLayoutEffect(()=>{g.current&&C.current&&(u||h)&&J6(g.current,C.current).then(({x:v,y:b})=>{C.current&&Object.assign(C.current.style,{left:`${v}px`,top:`${b}px`})}),f(!1)},[g,C,u,h]);const m=S.useCallback(v=>{C.current&&v.target!==g.current&&c&&Y6(C.current,v)&&l(!1)},[c,C,g]);return S.useEffect(()=>(document.addEventListener("click",m),window.addEventListener("resize",()=>f(!0)),()=>{document.removeEventListener("click",m),window.removeEventListener("resize",()=>f(!0))}),[m,f]),S.createElement(S.Fragment,null,S.createElement("button",xn(ke({className:"lk-button lk-button-menu","aria-pressed":c},a),{onClick:()=>l(!c),ref:g}),a.children),!a.disabled&&S.createElement("div",{className:"lk-device-menu",ref:C,style:{visibility:c?"visible":"hidden"}},n?S.createElement(om,{initialSelection:r,onActiveDeviceChange:v=>p(n,v),onDeviceListChange:d,kind:n,track:o==null?void 0:o[n],requestPermissions:s}):S.createElement(S.Fragment,null,S.createElement("div",{className:"lk-device-menu-heading"},"Audio inputs"),S.createElement(om,{kind:"audioinput",onActiveDeviceChange:v=>p("audioinput",v),onDeviceListChange:d,track:o==null?void 0:o.audioinput,requestPermissions:s}),S.createElement("div",{className:"lk-device-menu-heading"},"Video inputs"),S.createElement(om,{kind:"videoinput",onActiveDeviceChange:v=>p("videoinput",v),onDeviceListChange:d,track:o==null?void 0:o.videoinput,requestPermissions:s}))))}function c8(t){var e=t,{label:n}=e,r=Cn(e,["label"]);const i=Hp(),{mergedProps:o,canPlayAudio:s}=gZ({room:i,props:r}),{mergedProps:a,canPlayVideo:c}=mZ({room:i,props:o}),l=a,{style:u}=l,d=Cn(l,["style"]);return u.display=s&&c?"none":"block",S.createElement("button",ke({style:u},d),n??`Start ${s?"Video":"Audio"}`)}function l8(t){var e=t,{variation:n,controls:r,saveUserChoices:i=!0}=e,o=Cn(e,["variation","controls","saveUserChoices"]),s,a,c,l,u;const[d,h]=S.useState(!1),f=OR();S.useEffect(()=>{var j,Z;((j=f==null?void 0:f.widget.state)==null?void 0:j.showChat)!==void 0&&h((Z=f==null?void 0:f.widget.state)==null?void 0:Z.showChat)},[(s=f==null?void 0:f.widget.state)==null?void 0:s.showChat]);const g=Xj(`(max-width: ${d?1e3:760}px)`)?"minimal":"verbose";n??(n=g);const C=ke({leave:!0},r),m=lZ();m?((a=C.camera)!=null||(C.camera=m.canPublish),(c=C.microphone)!=null||(C.microphone=m.canPublish),(l=C.screenShare)!=null||(C.screenShare=m.canPublish),(u=C.chat)!=null||(C.chat=m.canPublishData&&(r==null?void 0:r.chat))):(C.camera=!1,C.chat=!1,C.microphone=!1,C.screenShare=!1);const v=S.useMemo(()=>n==="minimal"||n==="verbose",[n]),b=S.useMemo(()=>n==="textOnly"||n==="verbose",[n]),E=tj(),[w,A]=S.useState(!1),x=j=>{A(j)},T=Rl({className:"lk-control-bar"},o),{saveAudioInputEnabled:_,saveVideoInputEnabled:O,saveAudioInputDeviceId:D,saveVideoInputDeviceId:U}=SZ({preventSave:!i});return S.createElement("div",ke({},T),C.microphone&&S.createElement("div",{className:"lk-button-group"},S.createElement(sm,{source:J.Source.Microphone,showIcon:v,onChange:_},b&&"Microphone"),S.createElement("div",{className:"lk-button-group-menu"},S.createElement(Kw,{kind:"audioinput",onActiveDeviceChange:(j,Z)=>D(Z??"")}))),C.camera&&S.createElement("div",{className:"lk-button-group"},S.createElement(sm,{source:J.Source.Camera,showIcon:v,onChange:O},b&&"Camera"),S.createElement("div",{className:"lk-button-group-menu"},S.createElement(Kw,{kind:"videoinput",onActiveDeviceChange:(j,Z)=>U(Z??"")}))),C.screenShare&&E&&S.createElement(sm,{source:J.Source.ScreenShare,captureOptions:{audio:!0,selfBrowserSurface:"include"},showIcon:v,onChange:x},b&&(w?"Stop screen share":"Share screen")),C.chat&&S.createElement(wZ,null,v&&S.createElement(RZ,null),b&&"Chat"),C.leave&&S.createElement(AZ,null,v&&S.createElement(_Z,null),b&&"Leave"),S.createElement(c8,null))}function u8(t){var e=Cn(t,[]);const[n,r]=S.useState({showChat:!1,unreadMessages:0}),i=pZ();return S.createElement(t8,{onWidgetChange:r},S.createElement("div",ke({className:"lk-audio-conference"},e),S.createElement("div",{className:"lk-audio-conference-stage"},S.createElement(i8,{participants:i},S.createElement(o8,null))),S.createElement(l8,{controls:{microphone:!0,screenShare:!1,camera:!1,chat:!0}}),n.showChat&&S.createElement(a8,null)))}const d8="wss://mongoose-67t79p35.livekit.cloud",h8=({client:t})=>{const[e,n]=S.useState([]),[r,i]=S.useState(!1);return S.useEffect(()=>{const o=a=>{n(c=>[...c,a]),i(!0)},s=a=>{n(c=>{const l=c.filter(u=>u!==a);return l.length===0&&i(!1),l})};return t.on("livekitToken",o),t.on("livekitLeave",s),()=>{t.off("livekitToken",o),t.off("livekitLeave",s)}},[t]),e.length?X.jsxs("div",{"data-lk-theme":"default",children:[e.map((o,s)=>X.jsx(n8,{video:!1,audio:!0,token:o,serverUrl:d8,connect:!0,onDisconnected:()=>t.emit("livekitLeave",o),children:X.jsx(u8,{})},s)),X.jsx("div",{className:"audio-status","aria-live":"polite"})]}):null};function f8(){const[t,e]=S.useState(null),[n,r]=S.useState(!1),[i,o]=S.useState([]),s=nt.useRef(null),a=nt.useRef(null),c=nt.useRef(null),l=S.useRef(!1),u=()=>{s.current&&s.current.saveLog()},d=()=>{s.current&&s.current.clearLog()},h=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);return S.useEffect(()=>{if(l.current)return;const f=new qU("mongoose.moo.mud.org",8765);f.registerGMCPPackage(WU),f.registerGMCPPackage(FU),f.registerGMCPPackage(UU),f.registerGMCPPackage(_L),f.registerGMCPPackage(jU),f.registerGMCPPackage(VU),f.registerGMCPPackage(GU),f.registerGMCPPackage(RL),f.registerMcpPackage(XU),f.registerMcpPackage($U),f.registerMcpPackage(JU),f.registerMcpPackage(YU),f.connect(),f.requestNotificationPermission(),e(f),r(!h),window.mudClient=f,l.current=!0;const p=C=>{f&&(C.key==="Control"&&f.cancelSpeech(),C.key==="Escape"&&f.stopAllSounds())};window.addEventListener("keydown",p);const g=()=>{var C;(C=a.current)==null||C.focus()};return document.addEventListener("focus",g),()=>{window.removeEventListener("keydown",p),document.removeEventListener("focus",g)}},[h]),S.useEffect(()=>{if(t){const f=g=>{o(g)},p=()=>{o([])};return t.on("userlist",f),t.on("disconnect",p),()=>{t.off("userlist",f),t.off("disconnect",p)}}},[t]),Dk(f=>{t&&t.shutdown()}),t?X.jsxs("div",{className:"App",children:[X.jsx("header",{className:"App-header"}),X.jsx($V,{client:t,onSaveLog:u,onClearLog:d,onToggleUsers:()=>r(!n),onOpenPrefs:()=>{var f;return(f=c.current)==null?void 0:f.open()}}),X.jsxs("div",{children:[X.jsx(vv,{client:t,ref:s}),n&&X.jsx(JV,{users:i}),X.jsx(h8,{client:t})]}),X.jsx(t4,{onSend:t.sendCommand,inputRef:a}),X.jsx(KV,{client:t}),X.jsx(MV,{ref:c})]}):null}function p8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Yw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jw(Object(n),!0).forEach(function(r){p8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function g8(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function m8(t,e){if(t==null)return{};var n=g8(t,e),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)r=o[i],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function v8(t,e){return y8(t)||C8(t,e)||I8(t,e)||b8()}function y8(t){if(Array.isArray(t))return t}function C8(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,i=!1,o=void 0;try{for(var s=t[Symbol.iterator](),a;!(r=(a=s.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(c){i=!0,o=c}finally{try{!r&&s.return!=null&&s.return()}finally{if(i)throw o}}return n}}function I8(t,e){if(t){if(typeof t=="string")return Qw(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qw(t,e)}}function Qw(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function b8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function S8(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qw(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function e1(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qw(Object(n),!0).forEach(function(r){S8(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qw(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function w8(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(i,o){return o(i)},r)}}function uu(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function sp(t){return{}.toString.call(t).includes("Object")}function A8(t){return!Object.keys(t).length}function ud(t){return typeof t=="function"}function k8(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function E8(t,e){return sp(e)||zs("changeType"),Object.keys(e).some(function(n){return!k8(t,n)})&&zs("changeField"),e}function T8(t){ud(t)||zs("selectorType")}function x8(t){ud(t)||sp(t)||zs("handlerType"),sp(t)&&Object.values(t).some(function(e){return!ud(e)})&&zs("handlersType")}function P8(t){t||zs("initialIsRequired"),sp(t)||zs("initialType"),A8(t)&&zs("initialContent")}function R8(t,e){throw new Error(t[e]||t.default)}var N8={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},zs=uu(R8)(N8),ph={changes:E8,selector:T8,handler:x8,initial:P8};function _8(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};ph.initial(t),ph.handler(e);var n={current:t},r=uu(D8)(n,e),i=uu(M8)(n),o=uu(ph.changes)(t),s=uu(O8)(n);function a(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return ph.selector(l),l(n.current)}function c(l){w8(r,i,o,s)(l)}return[a,c]}function O8(t,e){return ud(e)?e(t.current):e}function M8(t,e){return t.current=e1(e1({},t.current),e),e}function D8(t,e,n){return ud(e)?e(t.current):Object.keys(n).forEach(function(r){var i;return(i=e[r])===null||i===void 0?void 0:i.call(e,t.current[r])}),n}var L8={create:_8},B8={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function F8(t){return function e(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=t.length?t.apply(this,i):function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return e.apply(n,[].concat(i,a))}}}function U8(t){return{}.toString.call(t).includes("Object")}function V8(t){return t||t1("configIsRequired"),U8(t)||t1("configType"),t.urls?(G8(),{paths:{vs:t.urls.monacoBase}}):t}function G8(){console.warn(BR.deprecation)}function W8(t,e){throw new Error(t[e]||t.default)}var BR={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},t1=F8(W8)(BR),j8={config:V8},Z8=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,s){return s(o)},i)}};function FR(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],FR(t[n],e[n]))}),Yw(Yw({},t),e)}var z8={type:"cancelation",msg:"operation is manually canceled"};function am(t){var e=!1,n=new Promise(function(r,i){t.then(function(o){return e?i(z8):r(o)}),t.catch(i)});return n.cancel=function(){return e=!0},n}var H8=L8.create({config:B8,isInitialized:!1,resolve:null,reject:null,monaco:null}),UR=v8(H8,2),_d=UR[0],$p=UR[1];function X8(t){var e=j8.config(t),n=e.monaco,r=m8(e,["monaco"]);$p(function(i){return{config:FR(i.config,r),monaco:n}})}function $8(){var t=_d(function(e){var n=e.monaco,r=e.isInitialized,i=e.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!t.isInitialized){if($p({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),am(cm);if(window.monaco&&window.monaco.editor)return VR(window.monaco),t.resolve(window.monaco),am(cm);Z8(K8,Y8)(Q8)}return am(cm)}function K8(t){return document.body.appendChild(t)}function J8(t){var e=document.createElement("script");return t&&(e.src=t),e}function Y8(t){var e=_d(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=J8("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function Q8(){var t=_d(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){VR(n),t.resolve(n)},function(n){t.reject(n)})}function VR(t){_d().monaco||$p({monaco:t})}function q8(){return _d(function(t){var e=t.monaco;return e})}var cm=new Promise(function(t,e){return $p({resolve:t,reject:e})}),GR={config:X8,init:$8,__getMonacoInstance:q8},e7={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},lm=e7,t7={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},n7=t7;function r7({children:t}){return nt.createElement("div",{style:n7.container},t)}var i7=r7,o7=i7;function s7({width:t,height:e,isEditorReady:n,loading:r,_ref:i,className:o,wrapperProps:s}){return nt.createElement("section",{style:{...lm.wrapper,width:t,height:e},...s},!n&&nt.createElement(o7,null,r),nt.createElement("div",{ref:i,style:{...lm.fullWidth,...!n&&lm.hide},className:o}))}var a7=s7,WR=S.memo(a7);function c7(t){S.useEffect(t,[])}var jR=c7;function l7(t,e,n=!0){let r=S.useRef(!0);S.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var Sr=l7;function Tu(){}function Tc(t,e,n,r){return u7(t,r)||d7(t,e,n,r)}function u7(t,e){return t.editor.getModel(ZR(t,e))}function d7(t,e,n,r){return t.editor.createModel(e,n,r?ZR(t,r):void 0)}function ZR(t,e){return t.Uri.parse(e)}function h7({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:i,originalModelPath:o,modifiedModelPath:s,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:c=!1,theme:l="light",loading:u="Loading...",options:d={},height:h="100%",width:f="100%",className:p,wrapperProps:g={},beforeMount:C=Tu,onMount:m=Tu}){let[v,b]=S.useState(!1),[E,w]=S.useState(!0),A=S.useRef(null),x=S.useRef(null),T=S.useRef(null),_=S.useRef(m),O=S.useRef(C),D=S.useRef(!1);jR(()=>{let Y=GR.init();return Y.then(ee=>(x.current=ee)&&w(!1)).catch(ee=>(ee==null?void 0:ee.type)!=="cancelation"&&console.error("Monaco initialization: error:",ee)),()=>A.current?Z():Y.cancel()}),Sr(()=>{if(A.current&&x.current){let Y=A.current.getOriginalEditor(),ee=Tc(x.current,t||"",r||n||"text",o||"");ee!==Y.getModel()&&Y.setModel(ee)}},[o],v),Sr(()=>{if(A.current&&x.current){let Y=A.current.getModifiedEditor(),ee=Tc(x.current,e||"",i||n||"text",s||"");ee!==Y.getModel()&&Y.setModel(ee)}},[s],v),Sr(()=>{let Y=A.current.getModifiedEditor();Y.getOption(x.current.editor.EditorOption.readOnly)?Y.setValue(e||""):e!==Y.getValue()&&(Y.executeEdits("",[{range:Y.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),Y.pushUndoStop())},[e],v),Sr(()=>{var Y,ee;(ee=(Y=A.current)==null?void 0:Y.getModel())==null||ee.original.setValue(t||"")},[t],v),Sr(()=>{let{original:Y,modified:ee}=A.current.getModel();x.current.editor.setModelLanguage(Y,r||n||"text"),x.current.editor.setModelLanguage(ee,i||n||"text")},[n,r,i],v),Sr(()=>{var Y;(Y=x.current)==null||Y.editor.setTheme(l)},[l],v),Sr(()=>{var Y;(Y=A.current)==null||Y.updateOptions(d)},[d],v);let U=S.useCallback(()=>{var ne;if(!x.current)return;O.current(x.current);let Y=Tc(x.current,t||"",r||n||"text",o||""),ee=Tc(x.current,e||"",i||n||"text",s||"");(ne=A.current)==null||ne.setModel({original:Y,modified:ee})},[n,e,i,t,r,o,s]),j=S.useCallback(()=>{var Y;!D.current&&T.current&&(A.current=x.current.editor.createDiffEditor(T.current,{automaticLayout:!0,...d}),U(),(Y=x.current)==null||Y.editor.setTheme(l),b(!0),D.current=!0)},[d,l,U]);S.useEffect(()=>{v&&_.current(A.current,x.current)},[v]),S.useEffect(()=>{!E&&!v&&j()},[E,v,j]);function Z(){var ee,ne,z,$;let Y=(ee=A.current)==null?void 0:ee.getModel();a||((ne=Y==null?void 0:Y.original)==null||ne.dispose()),c||((z=Y==null?void 0:Y.modified)==null||z.dispose()),($=A.current)==null||$.dispose()}return nt.createElement(WR,{width:f,height:h,isEditorReady:v,loading:u,_ref:T,className:p,wrapperProps:g})}var f7=h7;S.memo(f7);function p7(t){let e=S.useRef();return S.useEffect(()=>{e.current=t},[t]),e.current}var g7=p7,gh=new Map;function m7({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:i,path:o,theme:s="light",line:a,loading:c="Loading...",options:l={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:h=!1,width:f="100%",height:p="100%",className:g,wrapperProps:C={},beforeMount:m=Tu,onMount:v=Tu,onChange:b,onValidate:E=Tu}){let[w,A]=S.useState(!1),[x,T]=S.useState(!0),_=S.useRef(null),O=S.useRef(null),D=S.useRef(null),U=S.useRef(v),j=S.useRef(m),Z=S.useRef(),Y=S.useRef(r),ee=g7(o),ne=S.useRef(!1),z=S.useRef(!1);jR(()=>{let H=GR.init();return H.then(ie=>(_.current=ie)&&T(!1)).catch(ie=>(ie==null?void 0:ie.type)!=="cancelation"&&console.error("Monaco initialization: error:",ie)),()=>O.current?re():H.cancel()}),Sr(()=>{var ie,Re,Ne,Ce;let H=Tc(_.current,t||r||"",e||i||"",o||n||"");H!==((ie=O.current)==null?void 0:ie.getModel())&&(d&&gh.set(ee,(Re=O.current)==null?void 0:Re.saveViewState()),(Ne=O.current)==null||Ne.setModel(H),d&&((Ce=O.current)==null||Ce.restoreViewState(gh.get(o))))},[o],w),Sr(()=>{var H;(H=O.current)==null||H.updateOptions(l)},[l],w),Sr(()=>{!O.current||r===void 0||(O.current.getOption(_.current.editor.EditorOption.readOnly)?O.current.setValue(r):r!==O.current.getValue()&&(z.current=!0,O.current.executeEdits("",[{range:O.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),O.current.pushUndoStop(),z.current=!1))},[r],w),Sr(()=>{var ie,Re;let H=(ie=O.current)==null?void 0:ie.getModel();H&&i&&((Re=_.current)==null||Re.editor.setModelLanguage(H,i))},[i],w),Sr(()=>{var H;a!==void 0&&((H=O.current)==null||H.revealLine(a))},[a],w),Sr(()=>{var H;(H=_.current)==null||H.editor.setTheme(s)},[s],w);let $=S.useCallback(()=>{var H;if(!(!D.current||!_.current)&&!ne.current){j.current(_.current);let ie=o||n,Re=Tc(_.current,r||t||"",e||i||"",ie||"");O.current=(H=_.current)==null?void 0:H.editor.create(D.current,{model:Re,automaticLayout:!0,...l},u),d&&O.current.restoreViewState(gh.get(ie)),_.current.editor.setTheme(s),a!==void 0&&O.current.revealLine(a),A(!0),ne.current=!0}},[t,e,n,r,i,o,l,u,d,s,a]);S.useEffect(()=>{w&&U.current(O.current,_.current)},[w]),S.useEffect(()=>{!x&&!w&&$()},[x,w,$]),Y.current=r,S.useEffect(()=>{var H,ie;w&&b&&((H=Z.current)==null||H.dispose(),Z.current=(ie=O.current)==null?void 0:ie.onDidChangeModelContent(Re=>{z.current||b(O.current.getValue(),Re)}))},[w,b]),S.useEffect(()=>{if(w){let H=_.current.editor.onDidChangeMarkers(ie=>{var Ne;let Re=(Ne=O.current.getModel())==null?void 0:Ne.uri;if(Re&&ie.find(Ce=>Ce.path===Re.path)){let Ce=_.current.editor.getModelMarkers({resource:Re});E==null||E(Ce)}});return()=>{H==null||H.dispose()}}return()=>{}},[w,E]);function re(){var H,ie;(H=Z.current)==null||H.dispose(),h?d&&gh.set(o,O.current.saveViewState()):(ie=O.current.getModel())==null||ie.dispose(),O.current.dispose()}return nt.createElement(WR,{width:f,height:p,isEditorReady:w,loading:c,_ref:D,className:g,wrapperProps:C})}var v7=m7,y7=S.memo(v7),C7=y7,I7={restoreOnUnmount:!1};function b7(t,e){e===void 0&&(e=I7);var n=S.useRef(document.title);document.title!==t&&(document.title=t),S.useEffect(function(){if(e&&e.restoreOnUnmount)return function(){document.title=n.current}},[])}const S7=typeof document<"u"?b7:function(t){};function w7({onSave:t,onRevert:e,onDownload:n}){return X.jsx("div",{className:"toolbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderBottom:"1px solid #e8e8e8"},children:X.jsxs("form",{onSubmit:r=>r.preventDefault(),children:[X.jsxs("button",{onClick:t,accessKey:"s",children:[X.jsx(yx,{}),"Save"]}),X.jsxs("button",{onClick:e,accessKey:"r",children:[X.jsx(zV,{}),"Revert"]}),X.jsxs("button",{onClick:n,accessKey:"d",children:[X.jsx(jV,{}),"Download"]})]})})}const A7=({docstate:t,session:e})=>X.jsxs("div",{"aria-live":"polite",className:"statusbar",style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0 1rem",height:"10vh",backgroundColor:"#f5f5f5",borderTop:"1px solid #e8e8e8"},children:[X.jsx("span",{children:t}),X.jsx("span",{children:"|"}),X.jsx("span",{children:e.reference}),X.jsx("span",{children:"|"}),X.jsx("span",{children:e.type})]});function k7(){const t=Mk(),e=nt.useRef(null),[n,r]=S.useState(""),[i,o]=S.useState(""),[s,a]=S.useState(""),[c,l]=S.useState(0),[u,d]=S.useState({name:"none",contents:[],reference:"",type:""}),h=(j,Z)=>{e.current=j},[f,p]=oa();console.log(f);const g=f.editor.accessibilityMode,C=f.editor.autocompleteEnabled;Dk(j=>{w.postMessage({type:"close",id:x}),c===1&&j.preventDefault()});const[m,v]=S.useState(!1),b=m?`${u.name} - Mongoose Editor`:"Mongoose Editor";S7(b);const E=S.useMemo(()=>{switch(c){case 0:return"Unchanged";case 1:return"Changed";case 2:return"Saved"}},[c]),w=S.useMemo(()=>new BroadcastChannel("editor"),[]),A=new URLSearchParams(t.search),x=decodeURIComponent(A.get("reference")||"");S.useEffect(()=>{if(!x)return;console.log("ID: "+x),console.log("Sending ready message"),w.postMessage({type:"ready",id:x});const j=Z=>{if(console.log(Z.data),Z.data.type==="load"){if(n!=="")return;const Y=Z.data.session.contents.join(`
`);o(Y),a(Y),d(Z.data.session),l(0),r(Z.data.clientId),setTimeout(U,100)}else if(Z.data.type==="shutdown"){if(Z.data.clientId!==n)return;w.close(),window.close()}};return w.addEventListener("message",j),()=>w.removeEventListener("message",j)},[w,n,x]);const T=()=>{o(s),l(0)},_=j=>{const Z=i.split(/\r\n|\r|\n/),Y={...u,contents:Z};w.postMessage({type:"save",session:Y,id:x}),l(2),U(),j.preventDefault()},O=j=>{j!==void 0&&(console.log("Original: "+s),console.log("New: "+j),o(j),j.split(/\r\n|\r|\n/).join(`
`)!==s?l(1):l(0),m||v(!0))},D=()=>{const j=new Blob([i],{type:"text/plain"}),Z=URL.createObjectURL(j),Y=document.createElement("a"),ee=new Date,ne=ee.toLocaleDateString().replace(/\//g,"-"),z=ee.toLocaleTimeString().replace(/:/g,"-"),$=`${u.name}-${ne}-${z}.txt`;Y.download=$,Y.href=Z,Y.click(),URL.revokeObjectURL(Z),Y.remove()};return X.jsxs("div",{id:"editor",children:[X.jsx(w7,{onSave:_,onRevert:T,onDownload:D}),X.jsx(C7,{height:"80vh",defaultLanguage:"lambdamoo",value:i,onChange:O,options:{wordWrap:"on",accessibilitySupport:g?"on":"off",quickSuggestions:C},onMount:h,path:u.reference}),X.jsx(A7,{docstate:E,session:u})]});function U(){e.current!==null&&e.current.focus()}}const E7="modulepreload",T7=function(t){return"/"+t},n1={},x7=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),s=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.all(n.map(a=>{if(a=T7(a),a in n1)return;n1[a]=!0;const c=a.endsWith(".css"),l=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${l}`))return;const u=document.createElement("link");if(u.rel=c?"stylesheet":E7,c||(u.as="script",u.crossOrigin=""),u.href=a,s&&u.setAttribute("nonce",s),document.head.appendChild(u),c)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},P7=t=>{t&&t instanceof Function&&x7(async()=>{const{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}=await import("./web-vitals-DdRmOIVa.js");return{getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o}},[]).then(({getCLS:e,getFID:n,getFCP:r,getLCP:i,getTTFB:o})=>{e(t),n(t),r(t),i(t),o(t)})};var r1={};const R7=!!(window.location.hostname==="localhost"||window.location.hostname==="[::1]"||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function N7(t){if("serviceWorker"in navigator){if(new URL(r1.PUBLIC_URL,window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const n=`${r1.PUBLIC_URL}/service-worker.js`;R7?(_7(n),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):zR(n)})}}function zR(t,e){navigator.serviceWorker.register(t).then(n=>{n.onupdatefound=()=>{const r=n.installing;r!=null&&(r.onstatechange=()=>{r.state==="installed"&&(navigator.serviceWorker.controller?console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."):console.log("Content is cached for offline use."))})}}).catch(n=>{console.error("Error during service worker registration:",n)})}function _7(t,e){fetch(t).then(n=>{const r=n.headers.get("content-type");n.status===404||r!=null&&r.indexOf("javascript")===-1?navigator.serviceWorker.ready.then(i=>{i.unregister().then(()=>{window.location.reload()})}):zR(t)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}const O7=VM([{path:"/",element:X.jsx(f8,{})},{path:"/editor",element:X.jsx(k7,{})}]),M7=um.createRoot(document.getElementById("root"));M7.render(X.jsx(nt.StrictMode,{children:X.jsx(KM,{router:O7})}));P7(console.log);N7();
